(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.ChickenPaint = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
/*
    ChickenPaint

    ChickenPaint is a translation of ChibiPaint from Java to JavaScript
    by Nicholas Sherlock / Chicken Smoothie.

    ChibiPaint is Copyright (c) 2006-2008 Marc Schefer

    ChickenPaint is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    ChickenPaint is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with ChickenPaint. If not, see <http://www.gnu.org/licenses/>.
*/

"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports["default"] = ChickenPaint;

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

var _engineCPBrushInfo = require("./engine/CPBrushInfo");

var _engineCPBrushInfo2 = _interopRequireDefault(_engineCPBrushInfo);

var _engineCPArtwork = require("./engine/CPArtwork");

var _engineCPArtwork2 = _interopRequireDefault(_engineCPArtwork);

var _engineCPResourceLoader = require("./engine/CPResourceLoader");

var _engineCPResourceLoader2 = _interopRequireDefault(_engineCPResourceLoader);

var _engineCPResourceSaver = require("./engine/CPResourceSaver");

var _engineCPResourceSaver2 = _interopRequireDefault(_engineCPResourceSaver);

var _guiCPSplashScreenJs = require("./gui/CPSplashScreen.js");

var _guiCPSplashScreenJs2 = _interopRequireDefault(_guiCPSplashScreenJs);

var _guiCPMainGUI = require("./gui/CPMainGUI");

var _guiCPMainGUI2 = _interopRequireDefault(_guiCPMainGUI);

var _guiCPAboutDialog = require("./gui/CPAboutDialog");

var _guiCPAboutDialog2 = _interopRequireDefault(_guiCPAboutDialog);

var _guiCPConfirmTransformDialog = require("./gui/CPConfirmTransformDialog");

var _guiCPConfirmTransformDialog2 = _interopRequireDefault(_guiCPConfirmTransformDialog);

var _guiCPShortcutsDialog = require("./gui/CPShortcutsDialog");

var _guiCPShortcutsDialog2 = _interopRequireDefault(_guiCPShortcutsDialog);

var _guiCPBoxBlurDialog = require("./gui/CPBoxBlurDialog");

var _guiCPBoxBlurDialog2 = _interopRequireDefault(_guiCPBoxBlurDialog);

var _guiCPTabletDialog = require("./gui/CPTabletDialog");

var _guiCPTabletDialog2 = _interopRequireDefault(_guiCPTabletDialog);

var _guiCPGridDialog = require("./gui/CPGridDialog");

var _guiCPGridDialog2 = _interopRequireDefault(_guiCPGridDialog);

var _guiCPSendDialog = require("./gui/CPSendDialog");

var _guiCPSendDialog2 = _interopRequireDefault(_guiCPSendDialog);

var _utilCPPolyfill = require("./util/CPPolyfill");

var _utilCPColor = require("./util/CPColor");

var _utilCPColor2 = _interopRequireDefault(_utilCPColor);

var _utilCPWacomTablet = require("./util/CPWacomTablet");

var _utilCPWacomTablet2 = _interopRequireDefault(_utilCPWacomTablet);

var _utilCPRect = require("./util/CPRect");

var _utilCPRect2 = _interopRequireDefault(_utilCPRect);

function isBrowserSupported() {
    return (0, _utilCPPolyfill.isCanvasSupported)() && "Uint8Array" in window;
}

function createDrawingTools() {
    var tools = new Array(ChickenPaint.T_MAX);

    tools[ChickenPaint.T_PENCIL] = new _engineCPBrushInfo2["default"]({
        toolNb: ChickenPaint.T_PENCIL,
        size: 16,
        alpha: 255,
        isAA: true,
        minSpacing: 0.5,
        spacing: 0.05,
        pressureSize: false,
        pressureAlpha: true,
        type: _engineCPBrushInfo2["default"].B_ROUND_AA,
        paintMode: _engineCPBrushInfo2["default"].M_PAINT
    });

    tools[ChickenPaint.T_ERASER] = new _engineCPBrushInfo2["default"]({
        toolNb: ChickenPaint.T_ERASER,
        size: 16,
        alpha: 255,
        isAA: true,
        minSpacing: 0.5,
        spacing: 0.05,
        pressureSize: false,
        pressureAlpha: false,
        type: _engineCPBrushInfo2["default"].B_ROUND_AA,
        paintMode: _engineCPBrushInfo2["default"].M_ERASE
    });

    tools[ChickenPaint.T_PEN] = new _engineCPBrushInfo2["default"]({
        toolNb: ChickenPaint.T_PEN,
        size: 2,
        alpha: 128,
        isAA: true,
        minSpacing: 0.5,
        spacing: 0.05,
        pressureSize: true,
        pressureAlpha: false,
        type: _engineCPBrushInfo2["default"].B_ROUND_AA,
        paintMode: _engineCPBrushInfo2["default"].M_PAINT
    });

    tools[ChickenPaint.T_SOFTERASER] = new _engineCPBrushInfo2["default"]({
        toolNb: ChickenPaint.T_SOFTERASER,
        size: 16,
        alpha: 64,
        isAA: false,
        isAirbrush: true,
        minSpacing: 0.5,
        spacing: 0.05,
        pressureSize: false,
        pressureAlpha: true,
        type: _engineCPBrushInfo2["default"].B_ROUND_AIRBRUSH,
        paintMode: _engineCPBrushInfo2["default"].M_ERASE
    });

    tools[ChickenPaint.T_AIRBRUSH] = new _engineCPBrushInfo2["default"]({
        toolNb: ChickenPaint.T_AIRBRUSH,
        size: 50,
        alpha: 32,
        isAA: false,
        isAirbrush: true,
        minSpacing: 0.5,
        spacing: 0.05,
        pressureSize: false,
        pressureAlpha: true,
        type: _engineCPBrushInfo2["default"].B_ROUND_AIRBRUSH,
        paintMode: _engineCPBrushInfo2["default"].M_PAINT
    });

    tools[ChickenPaint.T_DODGE] = new _engineCPBrushInfo2["default"]({
        toolNb: ChickenPaint.T_DODGE,
        size: 30,
        alpha: 32,
        isAA: false,
        isAirbrush: true,
        minSpacing: 0.5,
        spacing: 0.05,
        pressureSize: false,
        pressureAlpha: true,
        type: _engineCPBrushInfo2["default"].B_ROUND_AIRBRUSH,
        paintMode: _engineCPBrushInfo2["default"].M_DODGE
    });

    tools[ChickenPaint.T_BURN] = new _engineCPBrushInfo2["default"]({
        toolNb: ChickenPaint.T_BURN,
        size: 30,
        alpha: 32,
        isAA: false,
        isAirbrush: true,
        minSpacing: 0.5,
        spacing: 0.05,
        pressureSize: false,
        pressureAlpha: true,
        type: _engineCPBrushInfo2["default"].B_ROUND_AIRBRUSH,
        paintMode: _engineCPBrushInfo2["default"].M_BURN
    });

    tools[ChickenPaint.T_WATER] = new _engineCPBrushInfo2["default"]({
        toolNb: ChickenPaint.T_WATER,
        size: 30,
        alpha: 70,
        isAA: false,
        isAirbrush: true,
        minSpacing: 0.5,
        spacing: 0.02,
        pressureSize: false,
        pressureAlpha: true,
        type: _engineCPBrushInfo2["default"].B_ROUND_AA,
        paintMode: _engineCPBrushInfo2["default"].M_WATER,
        resat: 0.3,
        bleed: 0.6
    });

    tools[ChickenPaint.T_BLUR] = new _engineCPBrushInfo2["default"]({
        toolNb: ChickenPaint.T_BLUR,
        size: 20,
        alpha: 255,
        isAA: false,
        isAirbrush: true,
        minSpacing: 0.5,
        spacing: 0.05,
        pressureSize: false,
        pressureAlpha: true,
        type: _engineCPBrushInfo2["default"].B_ROUND_PIXEL,
        paintMode: _engineCPBrushInfo2["default"].M_BLUR
    });

    tools[ChickenPaint.T_SMUDGE] = new _engineCPBrushInfo2["default"]({
        toolNb: ChickenPaint.T_SMUDGE,
        size: 20,
        alpha: 128,
        isAA: false,
        isAirbrush: true,
        minSpacing: 0.5,
        spacing: 0.01,
        pressureSize: false,
        pressureAlpha: true,
        type: _engineCPBrushInfo2["default"].B_ROUND_AIRBRUSH,
        paintMode: _engineCPBrushInfo2["default"].M_SMUDGE,
        resat: 0.0,
        bleed: 1.0
    });

    tools[ChickenPaint.T_BLENDER] = new _engineCPBrushInfo2["default"]({
        toolNb: ChickenPaint.T_BLENDER,
        size: 20,
        alpha: 60,
        isAA: false,
        isAirbrush: true,
        minSpacing: 0.5,
        spacing: 0.1,
        pressureSize: false,
        pressureAlpha: true,
        type: _engineCPBrushInfo2["default"].B_ROUND_AIRBRUSH,
        paintMode: _engineCPBrushInfo2["default"].M_OIL,
        resat: 0.0,
        bleed: 0.07
    });

    return tools;
}

/**
 * Creates an instance of the ChickenPaint drawing app. Options is an object with these keys:
 *
 * uiElem       - DOM element to insert ChickenPaint into (required)
 * canvasWidth  - Width in pixels to use when creating blank canvases (defaults to 800)
 * canvasHeight - Height in pixels to use when creating blank canvases (defaults to 600)
 * rotation     - Integer from [0..3], number of 90 degree right rotations that should be applied to the canvas after
 *                loading
 *
 * saveUrl   - URL to POST the drawing to to save it
 * postUrl   - URL to navigate to after saving is successful and the user chooses to see/publish their finished product
 * exitUrl   - URL to navigate to after saving is successful and the user chooses to exit (optional)
 * testUrl   - URL that ChickenPaint can simulate a drawing upload to to test the user's permissions/connection (optional)
 *
 * loadImageUrl     - URL of PNG/JPEG image to load for editing (optional)
 * loadChibiFileUrl - URL of .chi file to load for editing (optional). Used in preference to loadImage.
 * loadSwatchesUrl  - URL of an .aco palette to load (optional)
 * 
 * allowDownload - Allow the drawing to be saved to the user's computer
 * allowFullScreen - Allow the drawing tool to enter "full screen" mode, where the rest of the page contents will be hidden
 *
 * disableBootstrapAPI - Disable Bootstrap's data API on the root of the document. This speeds up things considerably.
 * 
 * resourcesRoot - URL to the directory that contains the gfx/css etc directories (relative to the page that 
 *                 ChickenPaint is loaded on)
 *
 * @throws ChickenPaint.UnsupportedBrowserException if the web browser does not support ChickenPaint
 */

function ChickenPaint(options) {
    var that = this,
        uiElem = options.uiElem,
        canvas,
        mainGUI,
        curColor = new _utilCPColor2["default"](0),
        curBrush = ChickenPaint.T_PENCIL,
        curMode = ChickenPaint.M_DRAW,
        preTransformMode = curMode,
        curGradient = [0xFF000000, 0xFFFFFFFF],
        fullScreenMode = false,
        tools = createDrawingTools(),
        boxBlurDialog,
        gridDialog,
        actions = {
        // GUI actions

        CPFullScreen: {
            action: function action() {
                fullScreenMode = !fullScreenMode;

                $("body").toggleClass("chickenpaint-full-screen", fullScreenMode);
                $(uiElem).toggleClass("chickenpaint-full-screen", fullScreenMode);

                setTimeout(function () {
                    mainGUI.setFullScreenMode(fullScreenMode);
                }, 200);
            },
            isSupported: function isSupported() {
                return options.allowFullScreen !== false;
            },
            modifies: { gui: true }
        },
        CPZoomIn: {
            action: function action() {
                canvas.zoomIn();
            },
            modifies: { gui: true }
        },
        CPZoomOut: {
            action: function action() {
                canvas.zoomOut();
            },
            modifies: { gui: true }
        },
        CPZoom100: {
            action: function action() {
                canvas.zoom100();
            },
            modifies: { gui: true }
        },

        // History actions

        CPUndo: {
            action: function action() {
                that.artwork.undo();
            },
            modifies: { document: true }
        },
        CPRedo: {
            action: function action() {
                that.artwork.redo();
            },
            modifies: { document: true }
        },
        CPClearHistory: {
            action: function action() {
                if (confirm("You're about to clear the current Undo/Redo history.\nThis operation cannot be undone, are you sure you want to do that?")) {
                    that.artwork.clearHistory();
                }
            },
            modifies: { document: true }
        },

        // Drawing tools

        CPPencil: new ToolChangeAction(ChickenPaint.T_PENCIL),
        CPPen: new ToolChangeAction(ChickenPaint.T_PEN),
        CPEraser: new ToolChangeAction(ChickenPaint.T_ERASER),
        CPSoftEraser: new ToolChangeAction(ChickenPaint.T_SOFTERASER),
        CPAirbrush: new ToolChangeAction(ChickenPaint.T_AIRBRUSH),
        CPDodge: new ToolChangeAction(ChickenPaint.T_DODGE),
        CPBurn: new ToolChangeAction(ChickenPaint.T_BURN),
        CPWater: new ToolChangeAction(ChickenPaint.T_WATER),
        CPBlur: new ToolChangeAction(ChickenPaint.T_BLUR),
        CPSmudge: new ToolChangeAction(ChickenPaint.T_SMUDGE),
        CPBlender: new ToolChangeAction(ChickenPaint.T_BLENDER),

        // Modes

        CPFloodFill: new ModeChangeAction(ChickenPaint.M_FLOODFILL),
        CPGradientFill: new ModeChangeAction(ChickenPaint.M_GRADIENTFILL),
        CPRectSelection: new ModeChangeAction(ChickenPaint.M_RECT_SELECTION),
        CPMoveTool: new ModeChangeAction(ChickenPaint.M_MOVE_TOOL),
        CPRotateCanvas: new ModeChangeAction(ChickenPaint.M_ROTATE_CANVAS),
        CPColorPicker: new ModeChangeAction(ChickenPaint.M_COLOR_PICKER),

        // Layer transform

        CPTransform: {
            action: function action() {
                var layer = that.artwork.getActiveLayer(),
                    layerIndex = that.artwork.getActiveLayerIndex();

                if (!layer.visible) {
                    that.showLayerNotification(layerIndex, "Whoops! This layer is currently hidden", "layer");
                } else if (layer.alpha == 0) {
                    that.showLayerNotification(layerIndex, "Whoops! This layer's opacity is currently 0%", "opacity");
                } else if (that.artwork.transformAffineBegin() == null) {
                    that.showLayerNotification(layerIndex, "Whoops! All of the selected pixels are transparent!", "layer");
                } else {
                    setMode(ChickenPaint.M_TRANSFORM);
                }
            },
            modifies: { mode: true }
        },
        CPTransformAccept: {
            action: function action() {
                if (curMode == ChickenPaint.M_TRANSFORM) {
                    that.artwork.transformAffineFinish();
                    setMode(preTransformMode);
                }
            },
            modifies: { mode: true }
        },
        CPTransformReject: {
            action: function action() {
                if (curMode == ChickenPaint.M_TRANSFORM) {
                    that.artwork.transformAffineAbort();
                    setMode(preTransformMode);
                }
            },
            modifies: { document: true, mode: true }
        },

        // Stroke modes

        CPFreeHand: {
            action: function action() {
                tools[curBrush].strokeMode = _engineCPBrushInfo2["default"].SM_FREEHAND;
                callToolListeners();
            },
            modifies: { tool: true }
        },
        CPLine: {
            action: function action() {
                tools[curBrush].strokeMode = _engineCPBrushInfo2["default"].SM_LINE;
                callToolListeners();
            },
            modifies: { tool: true }
        },
        CPBezier: {
            action: function action() {
                tools[curBrush].strokeMode = _engineCPBrushInfo2["default"].SM_BEZIER;
                callToolListeners();
            },
            modifies: { tool: true }
        },

        // Help dialogs

        CPAbout: {
            action: function action() {
                new _guiCPAboutDialog2["default"](uiElem).show();
            },
            modifies: {}
        },
        CPShortcuts: {
            action: function action() {
                new _guiCPShortcutsDialog2["default"](uiElem).show();
            },
            modifies: {}
        },
        CPTabletSupport: {
            action: function action() {
                new _guiCPTabletDialog2["default"](uiElem).show();
            },
            modifies: {}
        },

        // Layer actions

        CPLayerDuplicate: {
            action: function action() {
                that.artwork.duplicateLayer();
            },
            modifies: { document: true }
        },
        CPLayerMergeDown: {
            action: function action() {
                that.artwork.mergeDown(true);
            },
            modifies: { document: true }
        },
        CPLayerMergeAll: {
            action: function action() {
                that.artwork.mergeAllLayers(true);
            },
            modifies: { document: true }
        },
        CPFill: {
            action: function action() {
                that.artwork.fill(that.getCurColorRgb() | 0xff000000);
            },
            modifies: { document: true }
        },
        CPClear: {
            action: function action() {
                that.artwork.clear();
            },
            modifies: { document: true }
        },
        CPSelectAll: {
            action: function action() {
                that.artwork.rectangleSelection(that.artwork.getBounds());
                canvas.repaintAll();
            },
            modifies: { document: true }
        },
        CPDeselectAll: {
            action: function action() {
                that.artwork.rectangleSelection(new _utilCPRect2["default"](0, 0, 0, 0));
                canvas.repaintAll();
            },
            modifies: { document: true }
        },
        CPHFlip: {
            action: function action() {
                that.artwork.hFlip();
            },
            modifies: { document: true }
        },
        CPVFlip: {
            action: function action() {
                that.artwork.vFlip();
            },
            modifies: { document: true }
        },
        CPMNoise: {
            action: function action() {
                that.artwork.monochromaticNoise();
            },
            modifies: { document: true }
        },
        CPCNoise: {
            action: function action() {
                that.artwork.colorNoise();
            },
            modifies: { document: true }
        },
        CPFXBoxBlur: {
            action: function action() {
                showBoxBlurDialog();
            },
            modifies: { document: true }
        },
        CPFXInvert: {
            action: function action() {
                that.artwork.invert();
            },
            modifies: { document: true }
        },

        CPCut: {
            action: function action() {
                that.artwork.cutSelection(true);
            },
            modifies: { document: true }
        },
        CPCopy: {
            action: function action() {
                that.artwork.copySelection();
            },
            modifies: { document: true }
        },
        CPCopyMerged: {
            action: function action() {
                that.artwork.copySelectionMerged();
            },
            modifies: { document: true }
        },
        CPPaste: {
            action: function action() {
                that.artwork.pasteClipboard(true);
            },
            modifies: { document: true }
        },

        CPToggleGrid: {
            action: function action(e) {
                canvas.showGrid(e.selected);
            },
            modifies: { gui: true }
        },
        CPGridOptions: {
            action: function action() {
                showGridOptionsDialog();
            },
            modifies: { gui: true }
        },

        CPLinearInterpolation: {
            action: function action(e) {
                canvas.setInterpolation(e.selected);
            },
            modifies: { gui: true },
            isSupported: function isSupported() {
                return (0, _utilCPPolyfill.isCanvasInterpolationSupported)();
            }
        },
        CPResetCanvasRotation: {
            action: function action() {
                canvas.resetRotation();
            },
            modifies: { gui: true }
        },

        // Layer palette

        CPAddLayer: {
            action: function action() {
                that.artwork.addLayer();
            },
            modifies: { document: true }
        },
        CPRemoveLayer: {
            action: function action() {
                if (!that.artwork.removeLayer()) {
                    alert("Sorry, you can't remove the last remaining layer in the drawing.");
                }
            },
            modifies: { document: true }
        },
        CPMoveLayer: {
            action: function action(e) {
                that.artwork.moveLayer(e.fromIndex, e.toIndex);
            },
            modifies: { document: true }
        },
        CPSetActiveLayerIndex: {
            action: function action(e) {
                that.artwork.setActiveLayerIndex(e.layerIndex);

                // Since this is a slow GUI operation, this is a good chance to get the canvas ready for drawing
                that.artwork.performIdleTasks();
            },
            modifies: { document: true }
        },
        CPSetLayerVisibility: {
            action: function action(e) {
                that.artwork.setLayerVisibility(e.layerIndex, e.visible);
            },
            modifies: { layerProp: true }
        },
        CPSetLayerName: {
            action: function action(e) {
                that.artwork.setLayerName(e.layerIndex, e.name);
            },
            modifies: { layerProp: true }
        },
        CPSetLayerBlendMode: {
            action: function action(e) {
                that.artwork.setLayerBlendMode(e.layerIndex, e.blendMode);
            },
            modifies: { layerProp: true }
        },
        CPSetLayerAlpha: {
            action: function action(e) {
                that.artwork.setLayerAlpha(e.layerIndex, e.alpha);
            },
            modifies: { layerProp: true }
        },

        // Palettes

        CPPalColor: new PaletteToggleAction("color"),
        CPPalBrush: new PaletteToggleAction("brush"),
        CPPalLayers: new PaletteToggleAction("layers"),
        CPPalStroke: new PaletteToggleAction("stroke"),
        CPPalSwatches: new PaletteToggleAction("swatches"),
        CPPalTool: new PaletteToggleAction("tool"),
        CPPalMisc: new PaletteToggleAction("misc"),
        CPPalTextures: new PaletteToggleAction("textures"),

        CPTogglePalettes: {
            action: function action() {
                mainGUI.togglePalettes();
            },
            modifies: { gui: true }
        },
        CPArrangePalettes: {
            action: function action() {
                mainGUI.arrangePalettes();
            },
            modifies: { gui: true }
        },

        // Saving

        CPSave: {
            action: function action() {
                saveDrawing();
            },
            isSupported: function isSupported() {
                return options.allowDownload !== false;
            },
            modifies: { document: true }
        },
        CPSend: {
            action: function action() {
                sendDrawing();
            },
            isSupported: function isSupported() {
                return !!options.saveUrl;
            },
            modifies: { document: true }
        },
        CPPost: {
            action: function action() {
                window.location = options.postUrl;
            },
            isSupported: function isSupported() {
                return !!options.postUrl;
            },
            modifies: { document: true }
        },
        CPExit: {
            action: function action() {
                // Exit the drawing session without posting the drawing to the forum
                window.location = options.exitUrl;
            },
            isSupported: function isSupported() {
                return !!options.exitUrl;
            },
            modifies: {}
        }
    };

    function PaletteToggleAction(palName) {
        this.palName = palName;
    }

    PaletteToggleAction.prototype.action = function (e) {
        mainGUI.showPalette(this.palName, e.selected);
    };
    PaletteToggleAction.prototype.modifies = { gui: true };

    function ToolChangeAction(toolNum) {
        this.toolNum = toolNum;
    }

    ToolChangeAction.prototype.action = function () {
        setTool(this.toolNum);
    };

    ToolChangeAction.prototype.modifies = { mode: true, tool: true };

    function ModeChangeAction(modeNum) {
        this.modeNum = modeNum;
    }

    ModeChangeAction.prototype.action = function () {
        setMode(this.modeNum);
    };
    ModeChangeAction.prototype.modifies = { mode: true };

    function showBoxBlurDialog() {
        if (!boxBlurDialog) {
            boxBlurDialog = new _guiCPBoxBlurDialog2["default"](uiElem, that);
        }

        boxBlurDialog.show();
    }

    function showGridOptionsDialog() {
        if (!gridDialog) {
            gridDialog = new _guiCPGridDialog2["default"](uiElem, canvas);
        }

        gridDialog.show();
    }

    function callToolListeners() {
        that.emitEvent('toolChange', [curBrush, tools[curBrush]]);
    }

    // TODO make me private
    this.callToolListeners = function () {
        callToolListeners();
    };

    function callModeListeners() {
        that.emitEvent('modeChange', [curMode]);
    }

    function callViewListeners(viewInfo) {
        that.emitEvent('viewChange', [viewInfo]);
    }

    this.getMainGUI = function () {
        return mainGUI;
    };

    this.getArtwork = function () {
        return this.artwork;
    };

    this.setCanvas = function (_canvas) {
        canvas = _canvas;
    };

    /**
        * Change the interpolation mode used by Free Transform operations
        * 
        * @param {string} interpolation - Either "sharp" or "smooth"
        */
    this.setTransformInterpolation = function (interpolation) {
        this.artwork.setTransformInterpolation(interpolation);
    };

    this.setCurColor = function (color) {
        if (!curColor.isEqual(color)) {
            this.artwork.setForegroundColor(color.getRgb());

            curColor.copyFrom(color);

            this.emitEvent('colorChange', [color]);
        }
    };

    this.getCurColor = function () {
        return curColor.clone();
    };

    this.getCurColorRgb = function () {
        return curColor.getRgb();
    };

    this.setCurColorRgb = function (color) {
        this.setCurColor(new _utilCPColor2["default"](color));
    };

    this.setCurGradient = function (gradient) {
        curGradient = gradient.slice(0); // Clone

        this.emitEvent('gradientChange', [curGradient]);
    };

    this.getCurGradient = function () {
        return curGradient.slice(0); // Clone
    };

    this.setBrushSize = function (size) {
        tools[curBrush].size = Math.max(1, Math.min(200, size));
        callToolListeners();
    };

    this.getBrushSize = function () {
        return tools[curBrush].size;
    };

    this.setAlpha = function (alpha) {
        tools[curBrush].alpha = alpha;
        callToolListeners();
    };

    this.getAlpha = function () {
        return tools[curBrush].alpha;
    };

    this.getCurMode = function () {
        return curMode;
    };

    function setMode(newMode) {
        if (curMode != newMode) {
            if (newMode == ChickenPaint.M_TRANSFORM) {
                preTransformMode = curMode;
            }
            curMode = newMode;
            callModeListeners();
        }
    }

    this.getCurTool = function () {
        return curBrush;
    };

    function setTool(tool) {
        setMode(ChickenPaint.M_DRAW);
        curBrush = tool;
        that.artwork.setBrush(tools[tool]);
        callToolListeners();
    }

    this.getBrushInfo = function () {
        return tools[curBrush];
    };

    function saveDrawing() {
        var saver = new _engineCPResourceSaver2["default"]({
            artwork: that.getArtwork(),
            rotation: canvas.getRotation90(),
            swatches: mainGUI.getSwatches()
        });

        saver.on("savingComplete", function () {
            that.artwork.setHasUnsavedChanges(false);
        });

        saver.on("savingFailure", function () {
            alert("An error occured while trying to save your drawing! Please try again!");
        });

        saver.save();
    }

    function sendDrawing() {
        var saver = new _engineCPResourceSaver2["default"]({
            artwork: that.getArtwork(),
            rotation: canvas.getRotation90(),
            swatches: mainGUI.getSwatches(),
            url: options.saveUrl
        }),
            sendDialog = new _guiCPSendDialog2["default"](that, uiElem, saver);

        saver.on("savingComplete", function () {
            that.artwork.setHasUnsavedChanges(false);
        });

        // Allow the dialog to show before we begin serialization
        sendDialog.on("shown", function () {
            saver.save();
        });

        sendDialog.show();
    }

    /**
     * Not all saving actions will be supported (depending on what options we're configured with). Use this function
     * to check for support for a given action.
     */
    this.isActionSupported = function (actionName) {
        if (actions[actionName]) {
            var supportedType = typeof actions[actionName].isSupported;

            if (supportedType == "function") {
                return actions[actionName].isSupported();
            } else if (supportedType == "undefined") {
                // If not otherwise specified, an action defaults to supported
                return true;
            } else {
                return actions[actionName].isSupported;
            }
        }

        return false;
    };

    this.showLayerNotification = function (layerIndex, message, where) {
        this.emitEvent("layerNotification", [layerIndex, message, where]);
    };

    this.actionPerformed = function (e) {
        if (this.artwork == null || canvas == null) {
            return; // this shouldn't happen, but just in case
        }

        var action = actions[e.action];

        if (action) {
            if (curMode == ChickenPaint.M_TRANSFORM && (action.modifies.document || action.modifies.mode) && ["CPTransformAccept", "CPTransformReject"].indexOf(e.action) == -1) {
                if (e.action == "CPUndo") {
                    actions.CPTransformReject.action();
                } else if (e.action == "CPTransform") {
                    // You're already transforming the selection!
                } else {
                        // Prompt the user to finish their transform before starting something else
                        var dialog = new _guiCPConfirmTransformDialog2["default"](uiElem, this);

                        /* If they decide to finish up with the transform, we can apply the original action they
                         * attempted afterwards.
                         */
                        dialog.on("accept", this.actionPerformed.bind(this, e));
                        dialog.on("reject", this.actionPerformed.bind(this, e));

                        dialog.show();
                    }
            } else {
                action.action(e);
            }
        }

        // callCPEventListeners(); TODO
    };

    function installUnsavedWarning() {
        if ((0, _utilCPPolyfill.isEventSupported)("onbeforeunload")) {
            window.addEventListener("beforeunload", function (e) {
                if (that.artwork.getHasUnsavedChanges()) {
                    var confirmMessage = "Your drawing has unsaved changes!";
                    e.returnValue = confirmMessage;
                    return confirmMessage;
                }
            });
        } else {
            // Fall back to just catching links
            $("a").click(function (e) {
                if (this.getAttribute("href") != "#" && that.artwork.getHasUnsavedChanges()) {
                    return confirm("Your drawing has unsaved changes! Are you sure to want to navigate away?");
                }
            });
        }
    }

    function startMainGUI(swatches, initialRotation90) {
        mainGUI = new _guiCPMainGUI2["default"](that, uiElem);

        setTool(ChickenPaint.T_PEN);
        mainGUI.arrangePalettes();

        if (swatches) {
            mainGUI.setSwatches(swatches);
        }

        if (initialRotation90) {
            mainGUI.setRotation(initialRotation90 * Math.PI / 2);
        }

        _utilCPWacomTablet2["default"].getRef().detectTablet();

        installUnsavedWarning();
    }

    this.getResourcesRoot = function () {
        return options.resourcesRoot;
    };

    if (!isBrowserSupported()) {
        throw new ChickenPaint.UnsupportedBrowserException();
    }

    if (typeof document.body.style.flexBasis != "string" && typeof document.body.style.msFlexDirection != "string" || /Presto/.test(navigator.userAgent)) {
        uiElem.className += " no-flexbox";
    }

    uiElem.className += " chickenpaint";

    options.resourcesRoot = options.resourcesRoot || "chickenpaint/";

    if (options.disableBootstrapAPI) {
        $(document).off('.data-api');
    }

    if (options.loadImageUrl || options.loadChibiFileUrl) {
        var loader = new _engineCPResourceLoader2["default"](options);

        new _guiCPSplashScreenJs2["default"](uiElem, loader, options.resourcesRoot);

        loader.on("loadingComplete", function (resources) {
            that.artwork = resources.layers || resources.flat;

            startMainGUI(resources.swatches, options.rotation);
        });

        loader.load();
    } else {
        this.artwork = new _engineCPArtwork2["default"](options.canvasWidth || 800, options.canvasHeight || 600);
        this.artwork.addBackgroundLayer();

        startMainGUI();
    }
}

ChickenPaint.prototype = Object.create(EventEmitter.prototype);
ChickenPaint.prototype.constructor = ChickenPaint;

ChickenPaint.UnsupportedBrowserException = function () {};

ChickenPaint.UnsupportedBrowserException.prototype.toString = function () {
    return "Sorry, your web browser does not support ChickenPaint. Please try a modern browser like Chrome, Safari, Firefox, or Edge";
};

//
// Definition of all the modes available
//

ChickenPaint.M_DRAW = 0;
ChickenPaint.M_FLOODFILL = 1;
ChickenPaint.M_RECT_SELECTION = 2;
ChickenPaint.M_MOVE_TOOL = 3;
ChickenPaint.M_ROTATE_CANVAS = 4;
ChickenPaint.M_COLOR_PICKER = 5;
ChickenPaint.M_GRADIENTFILL = 6;
ChickenPaint.M_TRANSFORM = 7;

//
// Definition of all the standard tools available
//
ChickenPaint.T_PENCIL = 0;
ChickenPaint.T_ERASER = 1;
ChickenPaint.T_PEN = 2;
ChickenPaint.T_SOFTERASER = 3;
ChickenPaint.T_AIRBRUSH = 4;
ChickenPaint.T_DODGE = 5;
ChickenPaint.T_BURN = 6;
ChickenPaint.T_WATER = 7;
ChickenPaint.T_BLUR = 8;
ChickenPaint.T_SMUDGE = 9;
ChickenPaint.T_BLENDER = 10;
ChickenPaint.T_MAX = 11;
module.exports = exports["default"];

},{"./engine/CPArtwork":2,"./engine/CPBrushInfo":5,"./engine/CPResourceLoader":13,"./engine/CPResourceSaver":14,"./gui/CPAboutDialog":16,"./gui/CPBoxBlurDialog":17,"./gui/CPConfirmTransformDialog":25,"./gui/CPGridDialog":27,"./gui/CPMainGUI":29,"./gui/CPSendDialog":35,"./gui/CPShortcutsDialog":36,"./gui/CPSplashScreen.js":38,"./gui/CPTabletDialog":41,"./util/CPColor":47,"./util/CPPolyfill":49,"./util/CPRect":52,"./util/CPWacomTablet":55}],2:[function(require,module,exports){
/*
    ChickenPaint
    
    ChickenPaint is a translation of ChibiPaint from Java to JavaScript
    by Nicholas Sherlock / Chicken Smoothie.
    
    ChibiPaint is Copyright (c) 2006-2008 Marc Schefer

    ChickenPaint is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    ChickenPaint is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with ChickenPaint. If not, see <http://www.gnu.org/licenses/>.
*/"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports["default"] = CPArtwork;function _interopRequireDefault(obj){return obj && obj.__esModule?obj:{"default":obj};}var _CPLayer=require("./CPLayer");var _CPLayer2=_interopRequireDefault(_CPLayer);var _CPGreyBmp=require("./CPGreyBmp");var _CPGreyBmp2=_interopRequireDefault(_CPGreyBmp);var _CPColorBmp=require("./CPColorBmp");var _CPColorBmp2=_interopRequireDefault(_CPColorBmp);var _CPBrushManager=require("./CPBrushManager");var _CPBrushManager2=_interopRequireDefault(_CPBrushManager);var _CPBrushInfo=require("./CPBrushInfo");var _CPBrushInfo2=_interopRequireDefault(_CPBrushInfo);var _CPUndo=require("./CPUndo");var _CPUndo2=_interopRequireDefault(_CPUndo);var _CPClip=require("./CPClip");var _CPClip2=_interopRequireDefault(_CPClip);var _utilCPColorFloat=require("../util/CPColorFloat");var _utilCPColorFloat2=_interopRequireDefault(_utilCPColorFloat);var _utilCPRect=require("../util/CPRect");var _utilCPRect2=_interopRequireDefault(_utilCPRect);var _utilCPRandom=require("../util/CPRandom");var _utilCPRandom2=_interopRequireDefault(_utilCPRandom);var _utilCPTransform=require("../util/CPTransform");var _utilCPTransform2=_interopRequireDefault(_utilCPTransform);var _utilCPPolyfill=require("../util/CPPolyfill"); // Polyfill, used in duplicateLayer
if(!String.prototype.endsWith){String.prototype.endsWith = function(searchString,position){var subjectString=this.toString();if(typeof position !== 'number' || !isFinite(position) || Math.floor(position) !== position || position > subjectString.length){position = subjectString.length;}position -= searchString.length;var lastIndex=subjectString.indexOf(searchString,position);return lastIndex !== -1 && lastIndex === position;};}function CPArtwork(_width,_height){_width = _width | 0;_height = _height | 0;var MAX_UNDO=30,EMPTY_BACKGROUND_COLOR=0xFFFFFFFF,EMPTY_LAYER_COLOR=0x00FFFFFF,BURN_CONSTANT=260,BLUR_MIN=64,BLUR_MAX=1;var layers=[],curLayer,hasUnsavedChanges=false,curSelection=new _utilCPRect2["default"](0,0,0,0), /**
         * Our buffer for storing all the layers merged together according to their blending modes.
         *
         * @type {CPLayer}
         */fusionBuffer=new _CPLayer2["default"](_width,_height), /**
         * Points to the buffer which represents all the layers merged together (either fusionBuffer or curLayer
         * depending on if the document is single-layered or not).
         *
         * @type {CPLayer}
         */fusion=fusionBuffer, /**
         * A copy of the current layer's data that can be used for undo operations.
         * 
         * @type {CPLayer}
         */undoBuffer=new _CPLayer2["default"](_width,_height), /**
         * The region of the undoBuffer which is out of date with respect to the content of the layer, and needs updated
         * with prepareForLayerUndo().
         *
         * @type {CPRect}
         */undoBufferInvalidRegion=new _utilCPRect2["default"](0,0,_width,_height), /**
         * We use this buffer so we can accurately accumulate small changes to layer opacity during a brush stroke.
         * 
         * Normally we use it as a 16-bit opacity channel per pixel, but some brushes use the full 32-bits per pixel
         * as ARGB.
         */opacityBuffer=new _CPGreyBmp2["default"](_width,_height,32), /**
         * The area of dirty data contained by opacityBuffer that should be merged by fusionLayers()
         */opacityArea=new _utilCPRect2["default"](0,0,0,0), /**
         * The area of dirty layer data that should be merged into the fusion by fusionLayers().
         */fusionArea=new _utilCPRect2["default"](0,0,_width,_height), /**
         * Used by CPUndoPaint to keep track of the area that has been dirtied by layer operations and should be
         * saved for undo.
         */undoArea=new _utilCPRect2["default"](0,0,0,0),rnd=new _utilCPRandom2["default"](),previewOperation=null,clipboard=null, // A CPClip
undoList=[],redoList=[],curBrush=null,brushManager=new _CPBrushManager2["default"](),lastX=0.0,lastY=0.0,lastPressure=0.0,brushBuffer=null,sampleAllLayers=false,lockAlpha=false,curColor=0x000000, // Black
transformInterpolation="smooth",that=this; // FIXME: 2007-01-13 I'm moving this to the CPRect class
// find where this version is used and change the
// code to use the CPRect version
function clipSourceDest(srcRect,dstRect){ // FIXME:
// /!\ dstRect bottom and right are ignored and instead we clip
// against the width, height of the layer. :/
//
// this version would be enough in most cases (when we don't need
// srcRect bottom and right to be clipped)
// it's left here in case it's needed to make a faster version
// of this function
// dstRect.right = Math.min(width, dstRect.left + srcRect.getWidth());
// dstRect.bottom = Math.min(height, dstRect.top + srcRect.getHeight());
// new dest bottom/right
dstRect.right = dstRect.left + srcRect.getWidth();if(dstRect.right > that.width){srcRect.right -= dstRect.right - that.width;dstRect.right = that.width;}dstRect.bottom = dstRect.top + srcRect.getHeight();if(dstRect.bottom > that.height){srcRect.bottom -= dstRect.bottom - that.height;dstRect.bottom = that.height;} // new src top/left
if(dstRect.left < 0){srcRect.left -= dstRect.left;dstRect.left = 0;}if(dstRect.top < 0){srcRect.top -= dstRect.top;dstRect.top = 0;}}function callListenersUpdateRegion(region){that.emitEvent("updateRegion",[region]);} // layerIndex is optional, provide when only one layer has been updated
function callListenersLayerChange(layerIndex){that.emitEvent("changeLayer",[layerIndex]);} // When the selected rectangle changes
function callListenersSelectionChange(){that.emitEvent("changeSelection",[]);}this.getLayers = function(){return layers;};this.getLayerCount = function(){return layers.length;}; //
// Selection methods
//
/**
     * Gets the current selection rect or a rectangle covering the whole canvas if there are no selections
     * 
     * @returns CPRect
     */this.getSelectionAutoSelect = function(){var r;if(!curSelection.isEmpty()){r = curSelection.clone();}else {r = this.getBounds();}return r;};this.getSelection = function(){return curSelection.clone();}; /**
     * Mark the given rectangle on the canvas as needing to be re-fused (i.e. we've drawn in this region).
     * Listeners are notified about our updated canvas region.
     *
     * @param rect CPRect Rect to invalidate
     */function invalidateFusionRect(rect){fusionArea.union(rect); // This updated area will need to be updated in our undo buffer later
undoBufferInvalidRegion.union(rect);callListenersUpdateRegion(rect);}; /**
     * Mark the entire canvas as needing to be re-fused (we've drawn to the whole canvas)
     */function invalidateFusion(){invalidateFusionRect(new _utilCPRect2["default"](0,0,that.width,that.height));};this.setHasUnsavedChanges = function(value){hasUnsavedChanges = value;};this.getHasUnsavedChanges = function(){return hasUnsavedChanges;};this.setLayerVisibility = function(layerIndex,visible){var layer=this.getLayer(layerIndex);addUndo(new CPUndoLayerVisible(layerIndex,layer.visible,visible));layer.visible = visible;invalidateFusion();callListenersLayerChange(layerIndex);};this.addLayer = function(){var newLayer=new _CPLayer2["default"](this.width,this.height,this.getDefaultLayerName()),activeLayerIndex=this.getActiveLayerIndex();newLayer.clearAll(EMPTY_LAYER_COLOR); // Transparent white
addUndo(new CPUndoAddLayer(activeLayerIndex));layers.splice(activeLayerIndex + 1,0,newLayer);this.setActiveLayerIndex(activeLayerIndex + 1);invalidateFusion();callListenersLayerChange();};this.addLayerObject = function(layer){layers.push(layer);if(layers.length == 1){curLayer = layers[0];}invalidateFusion();callListenersLayerChange();}; /**
     * Remove the currently selected layer.
     * 
     * Returns true if the layer was removed, or false when removal failed because there is currently only one layer in 
     * the document.
     */this.removeLayer = function(){if(layers.length > 1){var activeLayerIndex=this.getActiveLayerIndex();addUndo(new CPUndoRemoveLayer(activeLayerIndex,curLayer));layers.splice(activeLayerIndex,1);this.setActiveLayerIndex(activeLayerIndex < layers.length?activeLayerIndex:activeLayerIndex - 1);invalidateFusion();callListenersLayerChange();return true;}return false;};this.duplicateLayer = function(){var copySuffix=" Copy",newLayer=new _CPLayer2["default"](this.width,this.height),activeLayerIndex=this.getActiveLayerIndex();addUndo(new CPUndoDuplicateLayer(activeLayerIndex));newLayer.copyFrom(layers[activeLayerIndex]);if(!newLayer.name.endsWith(copySuffix)){newLayer.name += copySuffix;}layers.splice(activeLayerIndex + 1,0,newLayer);this.setActiveLayerIndex(activeLayerIndex + 1);invalidateFusion();callListenersLayerChange();};this.mergeDown = function(createUndo){var activeLayerIndex=this.getActiveLayerIndex();if(layers.length > 1 && activeLayerIndex > 0){if(createUndo){addUndo(new CPUndoMergeDownLayer(activeLayerIndex));}layers[activeLayerIndex].fusionWithFullAlpha(layers[activeLayerIndex - 1],this.getBounds());layers.splice(activeLayerIndex,1);this.setActiveLayerIndex(activeLayerIndex - 1);invalidateFusion();callListenersLayerChange();}};this.mergeAllLayers = function(createUndo){if(layers.length > 1){if(createUndo){addUndo(new CPUndoMergeAllLayers());}that.fusionLayers();layers = [];var layer=new _CPLayer2["default"](that.width,that.height,this.getDefaultLayerName());layer.copyDataFrom(fusion);layers.push(layer);this.setActiveLayerIndex(0);invalidateFusion();callListenersLayerChange();}};function moveLayerReal(from,to){var layer=layers.splice(from,1)[0];if(to <= from){layers.splice(to,0,layer);that.setActiveLayerIndex(to);}else {layers.splice(to - 1,0,layer);that.setActiveLayerIndex(to - 1);}invalidateFusion();callListenersLayerChange();} /**
     * Move a layer in the stack from one index to another.
     * 
     * @param from int
     * @param to int
     */this.moveLayer = function(from,to){if(from < 0 || from >= this.getLayerCount() || to < 0 || to > this.getLayerCount() || from == to){return;}addUndo(new CPUndoMoveLayer(from,to));moveLayerReal(from,to);};this.setLayerAlpha = function(layerIndex,alpha){var layer=this.getLayer(layerIndex);if(layer.getAlpha() != alpha){addUndo(new CPUndoLayerAlpha(layerIndex,alpha));layer.setAlpha(alpha);invalidateFusion();callListenersLayerChange(layerIndex);}};this.setLayerBlendMode = function(layerIndex,blendMode){var layer=this.getLayer(layerIndex);if(layer.getBlendMode() != blendMode){addUndo(new CPUndoLayerMode(layerIndex,blendMode));layer.setBlendMode(blendMode);invalidateFusion();callListenersLayerChange(layerIndex);}};this.setLayerName = function(layerIndex,name){var layer=this.getLayer(layerIndex);if(layer && layer.name != name){addUndo(new CPUndoLayerRename(layerIndex,name));layer.name = name;callListenersLayerChange(layerIndex);}};function CPBrushToolBase(){}CPBrushToolBase.prototype.beginStroke = function(x,y,pressure){prepareForLayerUndo();undoArea.makeEmpty();opacityBuffer.clearAll(0);opacityArea.makeEmpty();lastX = x;lastY = y;lastPressure = pressure;this.createAndPaintDab(x,y,pressure);};CPBrushToolBase.prototype.continueStroke = function(x,y,pressure){var dist=Math.sqrt((lastX - x) * (lastX - x) + (lastY - y) * (lastY - y)),spacing=Math.max(curBrush.minSpacing,curBrush.curSize * curBrush.spacing);if(dist > spacing){var nx=lastX,ny=lastY,np=lastPressure,df=(spacing - 0.001) / dist;for(var f=df;f <= 1.0;f += df) {nx = f * x + (1.0 - f) * lastX;ny = f * y + (1.0 - f) * lastY;np = f * pressure + (1.0 - f) * lastPressure;this.createAndPaintDab(nx,ny,np);}lastX = nx;lastY = ny;lastPressure = np;}};CPBrushToolBase.prototype.endStroke = function(){undoArea.clip(that.getBounds()); // Did we end up painting anything?
if(!undoArea.isEmpty()){mergeOpacityBuffer(curColor,false);addUndo(new CPUndoPaint()); /* Eagerly update the undo buffer for next time so we can avoid this lengthy
             * prepare at the beginning of a paint stroke
             */prepareForLayerUndo();}brushBuffer = null;}; /**
     * Create a paint dab at the given position using the current brush, and paint it.
     *
     * @param x float
     * @param y float
     * @param pressure float
     */CPBrushToolBase.prototype.createAndPaintDab = function(x,y,pressure){curBrush.applyPressure(pressure);if(curBrush.scattering > 0.0){x += rnd.nextGaussian() * curBrush.curScattering / 4.0;y += rnd.nextGaussian() * curBrush.curScattering / 4.0;}var dab=brushManager.getDab(x,y,curBrush);this.paintDab(dab);}; /**
     * Paint a dab returned by brushManager.getDab()
     *
     * @param dab {byte[] brush; int x, y, alpha, width, height}
     */CPBrushToolBase.prototype.paintDab = function(dab){var srcRect=new _utilCPRect2["default"](0,0,dab.width,dab.height),dstRect=new _utilCPRect2["default"](0,0,dab.width,dab.height);dstRect.translate(dab.x,dab.y);clipSourceDest(srcRect,dstRect); // drawing entirely outside the canvas
if(dstRect.isEmpty()){return;}undoArea.union(dstRect);opacityArea.union(dstRect);this.paintDabImplementation(srcRect,dstRect,dab);invalidateFusionRect(dstRect);};function CPBrushToolSimpleBrush(){}CPBrushToolSimpleBrush.prototype = Object.create(CPBrushToolBase.prototype);CPBrushToolSimpleBrush.prototype.constructor = CPBrushToolSimpleBrush;CPBrushToolSimpleBrush.prototype.paintDabImplementation = function(srcRect,dstRect,dab){ // FIXME: there should be no reference to a specific tool here
// create a new brush parameter instead
if(curBrush.isAirbrush){this.paintFlow(srcRect,dstRect,dab.brush,dab.width,Math.max(1,dab.alpha / 8));}else if(curBrush.toolNb == ChickenPaint.T_PEN){this.paintFlow(srcRect,dstRect,dab.brush,dab.width,Math.max(1,dab.alpha / 2));}else {this.paintOpacity(srcRect,dstRect,dab.brush,dab.width,dab.alpha);}};CPBrushToolSimpleBrush.prototype.mergeOpacityBuf = function(dstRect,color /* int */){var opacityData=opacityBuffer.data,undoData=undoBuffer.data,red=color >> 16 & 0xFF,green=color >> 8 & 0xFF,blue=color & 0xFF,width=dstRect.getWidth() | 0,height=dstRect.getHeight() | 0,dstOffset=curLayer.offsetOfPixel(dstRect.left,dstRect.top),srcOffset=opacityBuffer.offsetOfPixel(dstRect.left,dstRect.top),srcYStride=opacityBuffer.width - width | 0,dstYStride=(curLayer.width - width) * _CPColorBmp2["default"].BYTES_PER_PIXEL | 0;for(var y=0;y < height;y++,srcOffset += srcYStride,dstOffset += dstYStride) {for(var x=0;x < width;x++,srcOffset++,dstOffset += _CPColorBmp2["default"].BYTES_PER_PIXEL) {var opacityAlpha=opacityData[srcOffset] / 255 | 0;if(opacityAlpha > 0){var destAlpha=undoData[dstOffset + _CPColorBmp2["default"].ALPHA_BYTE_OFFSET],newLayerAlpha=opacityAlpha + destAlpha * (255 - opacityAlpha) / 255 | 0,realAlpha=255 * opacityAlpha / newLayerAlpha | 0,invAlpha=255 - realAlpha;curLayer.data[dstOffset] = (red * realAlpha + undoData[dstOffset] * invAlpha) / 255 & 0xff;curLayer.data[dstOffset + 1] = (green * realAlpha + undoData[dstOffset + 1] * invAlpha) / 255 & 0xff;curLayer.data[dstOffset + 2] = (blue * realAlpha + undoData[dstOffset + 2] * invAlpha) / 255 & 0xff;curLayer.data[dstOffset + 3] = newLayerAlpha;}}}}; /**
     *
     * @param srcRect CPRect
     * @param dstRect CPRect
     * @param brush int[]
     * @param brushWidth int
     * @param alpha float
     */CPBrushToolSimpleBrush.prototype.paintOpacity = function(srcRect,dstRect,brush,brushWidth,alpha){var opacityData=opacityBuffer.data,srcOffset=srcRect.left + srcRect.top * brushWidth,dstOffset=opacityBuffer.offsetOfPixel(dstRect.left,dstRect.top),dstWidth=dstRect.getWidth(),srcYStride=brushWidth - dstWidth,dstYStride=that.width - dstWidth;alpha = Math.min(255,alpha);for(var y=dstRect.top;y < dstRect.bottom;y++,srcOffset += srcYStride,dstOffset += dstYStride) {for(var x=0;x < dstWidth;x++,srcOffset++,dstOffset++) {opacityData[dstOffset] = Math.max(brush[srcOffset] * alpha,opacityData[dstOffset]);}}};CPBrushToolSimpleBrush.prototype.paintFlow = function(srcRect,dstRect,brush,brushWidth,alpha){var opacityData=opacityBuffer.data,srcOffset=srcRect.left + srcRect.top * brushWidth,dstOffset=opacityBuffer.offsetOfPixel(dstRect.left,dstRect.top),dstWidth=dstRect.getWidth(),srcYStride=brushWidth - dstWidth,dstYStride=that.width - dstWidth;for(var y=dstRect.top;y < dstRect.bottom;y++,srcOffset += srcYStride,dstOffset += dstYStride) {for(var x=0;x < dstWidth;x++,srcOffset++,dstOffset++) {var brushAlpha=brush[srcOffset] * alpha;if(brushAlpha != 0){var opacityAlpha=Math.min(255 * 255,opacityData[dstOffset] + (255 - opacityData[dstOffset] / 255) * brushAlpha / 255);opacityData[dstOffset] = opacityAlpha;}}}}; /*CPBrushToolSimpleBrush.prototype.paintOpacityFlow = function(srcRect, dstRect, brush, brushWidth, opacity, flow) {
        var 
            opacityData = opacityBuffer.data,

            by = srcRect.top;
        
        for (var y = dstRect.top; y < dstRect.bottom; y++, by++) {
            var 
                srcOffset = srcRect.left + by * brushWidth,
                dstOffset = dstRect.left + y * width;
            
            for (var x = dstRect.left; x < dstRect.right; x++, srcOffset++, dstOffset++) {
                var 
                    brushAlpha = brush[srcOffset] * flow;
                
                if (brushAlpha != 0) {
                    var
                        opacityAlpha = opacityData[dstOffset],
                        newAlpha = Math.min(255 * 255, opacityAlpha + (opacity - opacityAlpha / 255) * brushAlpha / 255);
                    
                    newAlpha = Math.min(opacity * brush[srcOffset], newAlpha);
                    
                    if (newAlpha > opacityAlpha) {
                        opacityData[dstOffset] = newAlpha;
                    }
                }
            }
        }
    };*/function CPBrushToolEraser(){}CPBrushToolEraser.prototype = Object.create(CPBrushToolSimpleBrush.prototype);CPBrushToolEraser.prototype.constructor = CPBrushToolEraser;CPBrushToolEraser.prototype.mergeOpacityBuf = function(dstRect,color){var opacityData=opacityBuffer.data,undoData=undoBuffer.data;for(var y=dstRect.top;y < dstRect.bottom;y++) {var dstOffset=curLayer.offsetOfPixel(dstRect.left,y) + _CPColorBmp2["default"].ALPHA_BYTE_OFFSET,srcOffset=opacityBuffer.offsetOfPixel(dstRect.left,y);for(var x=dstRect.left;x < dstRect.right;x++,dstOffset += _CPColorBmp2["default"].BYTES_PER_PIXEL) {var opacityAlpha=opacityData[srcOffset++] / 255 | 0;if(opacityAlpha > 0){var destAlpha=undoData[dstOffset],realAlpha=destAlpha * (255 - opacityAlpha) / 255;curLayer.data[dstOffset] = realAlpha;}}}};function CPBrushToolDodge(){}CPBrushToolDodge.prototype = Object.create(CPBrushToolSimpleBrush.prototype);CPBrushToolDodge.prototype.constructor = CPBrushToolDodge;CPBrushToolDodge.prototype.mergeOpacityBuf = function(dstRect,color){var opacityData=opacityBuffer.data,undoData=undoBuffer.data;for(var y=dstRect.top;y < dstRect.bottom;y++) {var dstOffset=curLayer.offsetOfPixel(dstRect.left,y),srcOffset=opacityBuffer.offsetOfPixel(dstRect.left,y);for(var x=dstRect.left;x < dstRect.right;x++,srcOffset++,dstOffset += _CPColorBmp2["default"].BYTES_PER_PIXEL) {var opacityAlpha=opacityData[srcOffset] / 255 | 0;if(opacityAlpha > 0 && undoData[dstOffset + _CPColorBmp2["default"].ALPHA_BYTE_OFFSET] != 0){opacityAlpha += 255;for(var i=0;i < 3;i++) {var channel=undoData[dstOffset + i] * opacityAlpha / 255 | 0;if(channel > 255){channel = 255;}curLayer.data[dstOffset + i] = channel;}}}}};function CPBrushToolBurn(){}CPBrushToolBurn.prototype = Object.create(CPBrushToolSimpleBrush.prototype);CPBrushToolBurn.prototype.constructor = CPBrushToolBurn;CPBrushToolBurn.prototype.mergeOpacityBuf = function(dstRect,color){var opacityData=opacityBuffer.data,undoData=undoBuffer.data;for(var y=dstRect.top;y < dstRect.bottom;y++) {var dstOffset=curLayer.offsetOfPixel(dstRect.left,y),srcOffset=opacityBuffer.offsetOfPixel(dstRect.left,y);for(var x=dstRect.left;x < dstRect.right;x++,srcOffset++,dstOffset += _CPColorBmp2["default"].BYTES_PER_PIXEL) {var opacityAlpha=opacityData[srcOffset] / 255 | 0;if(opacityAlpha > 0 && undoData[dstOffset + _CPColorBmp2["default"].ALPHA_BYTE_OFFSET] != 0){for(var i=0;i < 3;i++) {var channel=undoData[dstOffset + i];channel = channel - (BURN_CONSTANT - channel) * opacityAlpha / 255 | 0;if(channel < 0){channel = 0;}curLayer.data[dstOffset + i] = channel;}}}}};function CPBrushToolBlur(){}CPBrushToolBlur.prototype = Object.create(CPBrushToolSimpleBrush.prototype);CPBrushToolBlur.prototype.constructor = CPBrushToolBlur;CPBrushToolBlur.prototype.mergeOpacityBuf = function(dstRect,color){var opacityData=opacityBuffer.data,undoData=undoBuffer.data,dstYStride=undoBuffer.width * _CPColorBmp2["default"].BYTES_PER_PIXEL,r,g,b,a;function addSample(sampleOffset){r += undoData[sampleOffset + _CPColorBmp2["default"].RED_BYTE_OFFSET];g += undoData[sampleOffset + _CPColorBmp2["default"].GREEN_BYTE_OFFSET];b += undoData[sampleOffset + _CPColorBmp2["default"].BLUE_BYTE_OFFSET];a += undoData[sampleOffset + _CPColorBmp2["default"].ALPHA_BYTE_OFFSET];}for(var y=dstRect.top;y < dstRect.bottom;y++) {var dstOffset=undoBuffer.offsetOfPixel(dstRect.left,y),srcOffset=opacityBuffer.offsetOfPixel(dstRect.left,y);for(var x=dstRect.left;x < dstRect.right;x++,dstOffset += _CPColorBmp2["default"].BYTES_PER_PIXEL,srcOffset++) {var opacityAlpha=opacityData[srcOffset] / 255 | 0;if(opacityAlpha > 0){var blur=BLUR_MIN + (BLUR_MAX - BLUR_MIN) * opacityAlpha / 255 | 0,sum=blur + 4;r = blur * undoData[dstOffset + _CPColorBmp2["default"].RED_BYTE_OFFSET];g = blur * undoData[dstOffset + _CPColorBmp2["default"].GREEN_BYTE_OFFSET];b = blur * undoData[dstOffset + _CPColorBmp2["default"].BLUE_BYTE_OFFSET];a = blur * undoData[dstOffset + _CPColorBmp2["default"].ALPHA_BYTE_OFFSET];addSample(y > 0?dstOffset - dstYStride:dstOffset);addSample(y < undoBuffer.height - 1?dstOffset + dstYStride:dstOffset);addSample(x > 0?dstOffset - _CPColorBmp2["default"].BYTES_PER_PIXEL:dstOffset);addSample(x < undoBuffer.width - 1?dstOffset + _CPColorBmp2["default"].BYTES_PER_PIXEL:dstOffset);a /= sum;r /= sum;g /= sum;b /= sum;curLayer.data[dstOffset + _CPColorBmp2["default"].RED_BYTE_OFFSET] = r | 0;curLayer.data[dstOffset + _CPColorBmp2["default"].GREEN_BYTE_OFFSET] = g | 0;curLayer.data[dstOffset + _CPColorBmp2["default"].BLUE_BYTE_OFFSET] = b | 0;curLayer.data[dstOffset + _CPColorBmp2["default"].ALPHA_BYTE_OFFSET] = a | 0;}}}}; /* Brushes derived from this class use the opacity buffer as a simple alpha layer (32-bit pixels in ARGB order) */function CPBrushToolDirectBrush(){}CPBrushToolDirectBrush.prototype = Object.create(CPBrushToolSimpleBrush.prototype);CPBrushToolDirectBrush.prototype.constructor = CPBrushToolDirectBrush;CPBrushToolDirectBrush.prototype.mergeOpacityBuf = function(dstRect,color){var opacityData=opacityBuffer.data,undoData=undoBuffer.data,srcOffset=opacityBuffer.offsetOfPixel(dstRect.left,dstRect.top),dstOffset=curLayer.offsetOfPixel(dstRect.left,dstRect.top),width=dstRect.getWidth() | 0,height=dstRect.getHeight() | 0,srcYStride=opacityBuffer.width - width | 0,dstYStride=(curLayer.width - width) * _CPColorBmp2["default"].BYTES_PER_PIXEL | 0;for(var y=0;y < height;y++,srcOffset += srcYStride,dstOffset += dstYStride) {for(var x=0;x < width;x++,srcOffset++,dstOffset += _CPColorBmp2["default"].BYTES_PER_PIXEL) {var color1=opacityData[srcOffset],alpha1=color1 >>> 24;if(alpha1 == 0){continue;}var  // Pretty sure fusion.alpha is always 100 and the commented section is a copy/paste error
alpha2=undoData[dstOffset + _CPColorBmp2["default"].ALPHA_BYTE_OFFSET], /* * fusion.alpha / 100 */newAlpha=alpha1 + alpha2 - alpha1 * alpha2 / 255 | 0;if(newAlpha > 0){var realAlpha=alpha1 * 255 / newAlpha | 0,invAlpha=255 - realAlpha;curLayer.data[dstOffset] = ((color1 >> 16 & 0xFF) * realAlpha + undoData[dstOffset] * invAlpha) / 255 | 0;curLayer.data[dstOffset + 1] = ((color1 >> 8 & 0xFF) * realAlpha + undoData[dstOffset + 1] * invAlpha) / 255 | 0;curLayer.data[dstOffset + 2] = ((color1 & 0xFF) * realAlpha + undoData[dstOffset + 2] * invAlpha) / 255 | 0;curLayer.data[dstOffset + 3] = newAlpha;}}}};function CPBrushToolWatercolor(){var WCMEMORY=50,WXMAXSAMPLERADIUS=64;var previousSamples=[]; /**
         * Average out a bunch of samples around the given pixel (x, y).
         * 
         * dx, dy controls the spread of the samples.
         * 
         * @returns CPColorFloat
         */function sampleColor(x,y,dx,dy){var samples=[],layerToSample=sampleAllLayers?fusion:that.getActiveLayer();x = x | 0;y = y | 0;samples.push(_utilCPColorFloat2["default"].createFromInt(layerToSample.getPixel(x,y)));for(var r=0.25;r < 1.001;r += .25) {samples.push(_utilCPColorFloat2["default"].createFromInt(layerToSample.getPixel(~ ~(x + r * dx),y)));samples.push(_utilCPColorFloat2["default"].createFromInt(layerToSample.getPixel(~ ~(x - r * dx),y)));samples.push(_utilCPColorFloat2["default"].createFromInt(layerToSample.getPixel(x,~ ~(y + r * dy))));samples.push(_utilCPColorFloat2["default"].createFromInt(layerToSample.getPixel(x,~ ~(y - r * dy))));samples.push(_utilCPColorFloat2["default"].createFromInt(layerToSample.getPixel(~ ~(x + r * 0.7 * dx),~ ~(y + r * 0.7 * dy))));samples.push(_utilCPColorFloat2["default"].createFromInt(layerToSample.getPixel(~ ~(x + r * 0.7 * dx),~ ~(y - r * 0.7 * dy))));samples.push(_utilCPColorFloat2["default"].createFromInt(layerToSample.getPixel(~ ~(x - r * 0.7 * dx),~ ~(y + r * 0.7 * dy))));samples.push(_utilCPColorFloat2["default"].createFromInt(layerToSample.getPixel(~ ~(x - r * 0.7 * dx),~ ~(y - r * 0.7 * dy))));}var average=new _utilCPColorFloat2["default"](0,0,0);for(var i=0;i < samples.length;i++) {var sample=samples[i];average.r += sample.r;average.g += sample.g;average.b += sample.b;}average.r /= samples.length;average.g /= samples.length;average.b /= samples.length;return average;} // Blend the brush stroke with full color into the opacityBuffer
function paintDirect(srcRect,dstRect,brush,brushWidth,alpha,color1){var opacityData=opacityBuffer.data,by=srcRect.top;for(var y=dstRect.top;y < dstRect.bottom;y++,by++) {var srcOffset=srcRect.left + by * brushWidth,dstOffset=opacityBuffer.offsetOfPixel(dstRect.left,y);for(var x=dstRect.left;x < dstRect.right;x++,srcOffset++,dstOffset++) {var alpha1=(brush[srcOffset] & 0xff) * alpha / 255 | 0;if(alpha1 <= 0){continue;}var color2=opacityData[dstOffset],alpha2=color2 >>> 24,newAlpha=alpha1 + alpha2 - alpha1 * alpha2 / 255 | 0;if(newAlpha > 0){var realAlpha=alpha1 * 255 / newAlpha | 0,invAlpha=255 - realAlpha; // The usual alpha blending formula C = A * alpha + B * (1 - alpha)
// has to rewritten in the form C = A + (1 - alpha) * B - (1 - alpha) *A
// that way the rounding up errors won't cause problems
var newColor=newAlpha << 24 | (color1 >>> 16 & 0xff) + ((color2 >>> 16 & 0xff) * invAlpha - (color1 >>> 16 & 0xff) * invAlpha) / 255 << 16 | (color1 >>> 8 & 0xff) + ((color2 >>> 8 & 0xff) * invAlpha - (color1 >>> 8 & 0xff) * invAlpha) / 255 << 8 | (color1 & 0xff) + ((color2 & 0xff) * invAlpha - (color1 & 0xff) * invAlpha) / 255;opacityData[dstOffset] = newColor;}}}}this.beginStroke = function(x,y,pressure){previousSamples = null;CPBrushToolDirectBrush.prototype.beginStroke.call(this,x,y,pressure);};this.paintDabImplementation = function(srcRect,dstRect,dab){if(previousSamples == null){ // Seed the previousSamples list to capacity with a bunch of copies of one sample to get us started
var startColor=sampleColor(~ ~((dstRect.left + dstRect.right) / 2),~ ~((dstRect.top + dstRect.bottom) / 2),Math.max(1,Math.min(WXMAXSAMPLERADIUS,dstRect.getWidth() * 2 / 6)),Math.max(1,Math.min(WXMAXSAMPLERADIUS,dstRect.getHeight() * 2 / 6)));previousSamples = [];for(var i=0;i < WCMEMORY;i++) {previousSamples.push(startColor);}}var wcColor=new _utilCPColorFloat2["default"](0,0,0);for(var i=0;i < previousSamples.length;i++) {var sample=previousSamples[i];wcColor.r += sample.r;wcColor.g += sample.g;wcColor.b += sample.b;}wcColor.r /= previousSamples.length;wcColor.g /= previousSamples.length;wcColor.b /= previousSamples.length; // resaturation
wcColor.mixWith(_utilCPColorFloat2["default"].createFromInt(curColor),curBrush.resat * curBrush.resat);var newColor=wcColor.toInt(); // bleed
wcColor.mixWith(sampleColor((dstRect.left + dstRect.right) / 2,(dstRect.top + dstRect.bottom) / 2,Math.max(1,Math.min(WXMAXSAMPLERADIUS,dstRect.getWidth() * 2 / 6)),Math.max(1,Math.min(WXMAXSAMPLERADIUS,dstRect.getHeight() * 2 / 6))),curBrush.bleed);previousSamples.push(wcColor);previousSamples.shift();paintDirect(srcRect,dstRect,dab.brush,dab.width,Math.max(1,dab.alpha / 4),newColor);mergeOpacityBuffer(0,false);if(sampleAllLayers){that.fusionLayers();}};}CPBrushToolWatercolor.prototype = Object.create(CPBrushToolDirectBrush.prototype);CPBrushToolWatercolor.prototype.constructor = CPBrushToolWatercolor;function CPBrushToolOil(){function oilAccumBuffer(srcRect,dstRect,buffer,w,alpha){var layerToSample=sampleAllLayers?fusion:that.getActiveLayer(),by=srcRect.top;for(var y=dstRect.top;y < dstRect.bottom;y++,by++) {var srcOffset=srcRect.left + by * w,dstOffset=layerToSample.offsetOfPixel(dstRect.left,y);for(var x=dstRect.left;x < dstRect.right;x++,srcOffset++,dstOffset += _CPColorBmp2["default"].BYTES_PER_PIXEL) {var alpha1=layerToSample.data[dstOffset + _CPColorBmp2["default"].ALPHA_BYTE_OFFSET] * alpha / 255 | 0;if(alpha1 <= 0){continue;}var color2=buffer[srcOffset],alpha2=color2 >>> 24,newAlpha=alpha1 + alpha2 - alpha1 * alpha2 / 255 | 0;if(newAlpha > 0){var realAlpha=alpha1 * 255 / newAlpha | 0,invAlpha=255 - realAlpha,color1Red=layerToSample.data[dstOffset + _CPColorBmp2["default"].RED_BYTE_OFFSET],color1Green=layerToSample.data[dstOffset + _CPColorBmp2["default"].GREEN_BYTE_OFFSET],color1Blue=layerToSample.data[dstOffset + _CPColorBmp2["default"].BLUE_BYTE_OFFSET],newColor=newAlpha << 24 | color1Red + ((color2 >>> 16 & 0xff) * invAlpha - color1Red * invAlpha) / 255 << 16 | color1Green + ((color2 >>> 8 & 0xff) * invAlpha - color1Green * invAlpha) / 255 << 8 | color1Blue + ((color2 & 0xff) * invAlpha - color1Blue * invAlpha) / 255;buffer[srcOffset] = newColor;}}}}function oilResatBuffer(srcRect,dstRect,buffer,w,alpha1,color1){var by=srcRect.top;if(alpha1 <= 0){return;}for(var y=dstRect.top;y < dstRect.bottom;y++,by++) {var srcOffset=srcRect.left + by * w;for(var x=dstRect.left;x < dstRect.right;x++,srcOffset++) {var color2=buffer[srcOffset],alpha2=color2 >>> 24,newAlpha=alpha1 + alpha2 - alpha1 * alpha2 / 255 | 0;if(newAlpha > 0){var realAlpha=alpha1 * 255 / newAlpha | 0,invAlpha=255 - realAlpha,newColor=newAlpha << 24 | (color1 >>> 16 & 0xff) + ((color2 >>> 16 & 0xff) * invAlpha - (color1 >>> 16 & 0xff) * invAlpha) / 255 << 16 | (color1 >>> 8 & 0xff) + ((color2 >>> 8 & 0xff) * invAlpha - (color1 >>> 8 & 0xff) * invAlpha) / 255 << 8 | (color1 & 0xff) + ((color2 & 0xff) * invAlpha - (color1 & 0xff) * invAlpha) / 255;buffer[srcOffset] = newColor;}}}}function oilPasteBuffer(srcRect,dstRect,buffer,brush,w,alpha){var opacityData=opacityBuffer.data,by=srcRect.top;for(var y=dstRect.top;y < dstRect.bottom;y++,by++) {var bufferOffset=srcRect.left + by * w, // Brush buffer is 1 integer per pixel
opacityOffset=dstRect.left + y * that.width, // Opacity buffer is 1 integer per pixel
layerOffset=curLayer.offsetOfPixel(dstRect.left,y); // 4 bytes per pixel 
for(var x=dstRect.left;x < dstRect.right;x++,bufferOffset++,layerOffset += _CPColorBmp2["default"].BYTES_PER_PIXEL,opacityOffset++) {var color1=buffer[bufferOffset],alpha1=(color1 >>> 24) * (brush[bufferOffset] & 0xff) * alpha / (255 * 255) | 0;if(alpha1 <= 0){continue;}var alpha2=curLayer.data[layerOffset + _CPColorBmp2["default"].ALPHA_BYTE_OFFSET],newAlpha=alpha1 + alpha2 - alpha1 * alpha2 / 255 | 0;if(newAlpha > 0){var color2Red=curLayer.data[layerOffset + _CPColorBmp2["default"].RED_BYTE_OFFSET],color2Green=curLayer.data[layerOffset + _CPColorBmp2["default"].GREEN_BYTE_OFFSET],color2Blue=curLayer.data[layerOffset + _CPColorBmp2["default"].BLUE_BYTE_OFFSET],realAlpha=alpha1 * 255 / newAlpha | 0,invAlpha=255 - realAlpha,newColor=newAlpha << 24 | (color1 >>> 16 & 0xff) + (color2Red * invAlpha - (color1 >>> 16 & 0xff) * invAlpha) / 255 << 16 | (color1 >>> 8 & 0xff) + (color2Green * invAlpha - (color1 >>> 8 & 0xff) * invAlpha) / 255 << 8 | (color1 & 0xff) + (color2Blue * invAlpha - (color1 & 0xff) * invAlpha) / 255;opacityData[opacityOffset] = newColor;}}}}this.paintDabImplementation = function(srcRect,dstRect,dab){if(brushBuffer == null){brushBuffer = new Uint32Array(dab.width * dab.height); // Initialized to 0 for us by the browser
oilAccumBuffer(srcRect,dstRect,brushBuffer,dab.width,255);}else {oilResatBuffer(srcRect,dstRect,brushBuffer,dab.width,~ ~(curBrush.resat <= 0.0?0:Math.max(1,curBrush.resat * curBrush.resat * 255)),curColor & 0xFFFFFF);oilPasteBuffer(srcRect,dstRect,brushBuffer,dab.brush,dab.width,dab.alpha);oilAccumBuffer(srcRect,dstRect,brushBuffer,dab.width,~ ~(curBrush.bleed * 255));}mergeOpacityBuffer(0,false);if(sampleAllLayers){that.fusionLayers();}};}CPBrushToolOil.prototype = Object.create(CPBrushToolDirectBrush.prototype);CPBrushToolOil.prototype.constructor = CPBrushToolOil;function CPBrushToolSmudge(){ /**
         * 
         * @param srcRect
         * @param dstRect
         * @param buffer Uint32Array
         * @param w int
         * @param alpha int
         */function smudgeAccumBuffer(srcRect,dstRect,buffer,w,alpha){var layerToSample=sampleAllLayers?fusion:that.getActiveLayer(),by=srcRect.top;for(var y=dstRect.top;y < dstRect.bottom;y++,by++) {var srcOffset=srcRect.left + by * w,dstOffset=layerToSample.offsetOfPixel(dstRect.left,y);for(var x=dstRect.left;x < dstRect.right;x++,srcOffset++,dstOffset += _CPColorBmp2["default"].BYTES_PER_PIXEL) {var layerRed=layerToSample.data[dstOffset + _CPColorBmp2["default"].RED_BYTE_OFFSET],layerGreen=layerToSample.data[dstOffset + _CPColorBmp2["default"].GREEN_BYTE_OFFSET],layerBlue=layerToSample.data[dstOffset + _CPColorBmp2["default"].BLUE_BYTE_OFFSET],layerAlpha=layerToSample.data[dstOffset + _CPColorBmp2["default"].ALPHA_BYTE_OFFSET],opacityAlpha=255 - alpha;if(opacityAlpha > 0){var destColor=buffer[srcOffset],destAlpha=255,newLayerAlpha=opacityAlpha + destAlpha * (255 - opacityAlpha) / 255 | 0,realAlpha=255 * opacityAlpha / newLayerAlpha | 0,invAlpha=255 - realAlpha,newColor=(layerAlpha * realAlpha + (destColor >>> 24 & 0xff) * invAlpha) / 255 << 24 & 0xff000000 | (layerRed * realAlpha + (destColor >>> 16 & 0xff) * invAlpha) / 255 << 16 & 0xff0000 | (layerGreen * realAlpha + (destColor >>> 8 & 0xff) * invAlpha) / 255 << 8 & 0xff00 | (layerBlue * realAlpha + (destColor & 0xff) * invAlpha) / 255 & 0xff;if(newColor == destColor){if(layerRed > (destColor & 0xff0000)){newColor += 1 << 16;}else if(layerRed < (destColor & 0xff0000)){newColor -= 1 << 16;}if(layerGreen > (destColor & 0xff00)){newColor += 1 << 8;}else if(layerGreen < (destColor & 0xff00)){newColor -= 1 << 8;}if(layerBlue > (destColor & 0xff)){newColor += 1;}else if(layerBlue < (destColor & 0xff)){newColor -= 1;}}buffer[srcOffset] = newColor;}}}if(srcRect.left > 0){var fill=srcRect.left;for(var y=srcRect.top;y < srcRect.bottom;y++) {var offset=y * w,fillColor=buffer[offset + srcRect.left];for(var x=0;x < fill;x++) {buffer[offset++] = fillColor;}}}if(srcRect.right < w){var fill=w - srcRect.right;for(var y=srcRect.top;y < srcRect.bottom;y++) {var offset=y * w + srcRect.right,fillColor=buffer[offset - 1];for(var x=0;x < fill;x++) {buffer[offset++] = fillColor;}}}for(var y=0;y < srcRect.top;y++) {var srcOffset=srcRect.top * w,dstOffset=y * w;for(var x=0;x < w;x++,srcOffset++,dstOffset++) {buffer[dstOffset] = buffer[srcOffset];}}for(var y=srcRect.bottom;y < w;y++) {var srcOffset=(srcRect.bottom - 1) * w,dstOffset=y * w;for(var x=0;x < w;x++,srcOffset++,dstOffset++) {buffer[dstOffset] = buffer[srcOffset];}}} /**
         * 
         * @param srcRect CPRect
         * @param dstRect CPRect
         * @param buffer Uint32Array
         * @param brush Uint8Array
         * @param w int
         * @param alpha int
         */function smudgePasteBuffer(srcRect,dstRect,buffer,brush,w,alpha){var by=srcRect.top;for(var y=dstRect.top;y < dstRect.bottom;y++,by++) {var srcOffset=srcRect.left + by * w,dstOffset=curLayer.offsetOfPixel(dstRect.left,y);for(var x=dstRect.left;x < dstRect.right;x++,srcOffset++,dstOffset += _CPColorBmp2["default"].BYTES_PER_PIXEL) {var bufferColor=buffer[srcOffset],opacityAlpha=(bufferColor >>> 24) * (brush[srcOffset] & 0xff) / 255;if(opacityAlpha > 0){curLayer.data[dstOffset + _CPColorBmp2["default"].RED_BYTE_OFFSET] = bufferColor >> 16 & 0xff;curLayer.data[dstOffset + _CPColorBmp2["default"].GREEN_BYTE_OFFSET] = bufferColor >> 8 & 0xff;curLayer.data[dstOffset + _CPColorBmp2["default"].BLUE_BYTE_OFFSET] = bufferColor & 0xff;curLayer.data[dstOffset + _CPColorBmp2["default"].ALPHA_BYTE_OFFSET] = bufferColor >> 24 & 0xff;}}}} /**
         * @param srcRect CPRect
         * @param dstRect CPRect
         * @param dab CPBrushDab
         */this.paintDabImplementation = function(srcRect,dstRect,dab){if(brushBuffer == null){brushBuffer = new Uint32Array(dab.width * dab.height);smudgeAccumBuffer(srcRect,dstRect,brushBuffer,dab.width,0);}else {smudgeAccumBuffer(srcRect,dstRect,brushBuffer,dab.width,dab.alpha);smudgePasteBuffer(srcRect,dstRect,brushBuffer,dab.brush,dab.width,dab.alpha);if(lockAlpha){restoreAlpha(dstRect);}}opacityArea.makeEmpty();if(sampleAllLayers){that.fusionLayers();}};}CPBrushToolSmudge.prototype = Object.create(CPBrushToolDirectBrush.prototype);CPBrushToolSmudge.prototype.constructor = CPBrushToolSmudge;CPBrushToolSmudge.prototype.mergeOpacityBuf = function(dstRect,color){};var paintingModes=[new CPBrushToolSimpleBrush(),new CPBrushToolEraser(),new CPBrushToolDodge(),new CPBrushToolBurn(),new CPBrushToolWatercolor(),new CPBrushToolBlur(),new CPBrushToolSmudge(),new CPBrushToolOil()];this.width = _width;this.height = _height;this.getDefaultLayerName = function(){var prefix="Layer ",highestLayerNb=0;for(var i=0;i < layers.length;i++) {var layer=layers[i];if(/^Layer [0-9]+$/.test(layer.name)){highestLayerNb = Math.max(highestLayerNb,parseInt(layer.name.substring(prefix.length),10));}}return prefix + (highestLayerNb + 1);};function restoreAlpha(rect){that.getActiveLayer().copyAlphaFrom(undoBuffer,rect);} /**
     * Merge the opacity buffer from the current drawing operation to the active layer.
     */function mergeOpacityBuffer(color,clear){if(!opacityArea.isEmpty()){if(curBrush.paintMode != _CPBrushInfo2["default"].M_ERASE || !lockAlpha){paintingModes[curBrush.paintMode].mergeOpacityBuf(opacityArea,color);}else { // FIXME: it would be nice to be able to set the paper color
paintingModes[_CPBrushInfo2["default"].M_PAINT].mergeOpacityBuf(opacityArea,EMPTY_LAYER_COLOR);}if(lockAlpha){restoreAlpha(opacityArea);}if(clear){opacityBuffer.clearRect(opacityArea,0);}opacityArea.makeEmpty();}}this.addBackgroundLayer = function(){var layer=new _CPLayer2["default"](that.width,that.height,this.getDefaultLayerName());layer.clearAll(EMPTY_BACKGROUND_COLOR);this.addLayerObject(layer);}; /**
     * Merge together the visible layers and return the resulting ImageData for display to the screen.
     * 
     * The image is cached, so repeat calls are cheap.
     */this.fusionLayers = function(){ // Is there anything to update from last call?
if(!fusionArea.isEmpty()){ // The current brush renders out its buffers to the layer stack for us
mergeOpacityBuffer(curColor,false); // If the drawing is single-layered and opaque, just use the bottom-most layer as our fusion, we don't need to blend anything!
if(layers.length == 1 && layers[0].alpha >= 100 && layers[0].visible){fusion = layers[0];}else { // Fuse into the actual fusion buffer since we need to blend
fusion = fusionBuffer;var fusionIsSemiTransparent=true,first=true;layers.forEach(function(layer){if(!first){fusionIsSemiTransparent = fusionIsSemiTransparent && fusion.hasAlphaInRect(fusionArea);}if(layer.visible && layer.alpha > 0){if(first){first = false;if(layer.alpha == 100){ /*
                                 * Instead of blending the layer onto the empty transparent fusion, we can just copy the
                                 * layer data right into the fusion. This works for all of our blending modes.
                                 */fusion.copyBitmapRect(layer,fusionArea.left,fusionArea.top,fusionArea);return;}fusion.clearRect(fusionArea,0x00FFFFFF); // Transparent white
} // If we're merging onto a semi-transparent canvas then we need to blend our opacity values onto the existing ones
if(fusionIsSemiTransparent){layer.fusionWithFullAlpha(fusion,fusionArea);}else { // Most drawings will end up having 100% coverage and we can speed things up with this version instead
layer.fusionWith(fusion,fusionArea);}}});if(first){ // Didn't draw any layers? We have to clear the area, then
fusion.clearRect(fusionArea,0x00FFFFFF); // Transparent white
}}fusionArea.makeEmpty();}return fusion.getImageData();};this.setActiveLayerIndex = function(newIndex){if(newIndex < 0 || newIndex >= layers.length){return;}if(curLayer != layers[newIndex]){var oldIndex=this.getActiveLayerIndex();curLayer = layers[newIndex]; // Was the old layer deleted?
if(oldIndex == -1){callListenersLayerChange();}else {callListenersLayerChange(oldIndex); // Old layer has now been deselected
callListenersLayerChange(newIndex); // New layer has now been selected
}invalidateLayerUndo();}};this.getActiveLayerIndex = function(){for(var i=0;i < layers.length;i++) {if(layers[i] == curLayer){return i;}}return -1;}; /*
     * Get the index of the topmost visible layer, or 0.
     */this.getTopmostVisibleLayer = function(){for(var i=layers.length - 1;i >= 0;i--) {if(layers[i].visible){return i;}}return 0;}; /**
     * Get the layer with the specified index (no bounds checking)
     *
     * @param {int} i
     * @returns {CPLayer}
     */this.getLayer = function(i){return layers[i];}; /**
     * Get the currently active layer (the layer that drawing operations will be applied to))
     *
     * @returns {CPLayer}
     */this.getActiveLayer = function(){return curLayer;};this.getDocMemoryUsed = function(){var total=fusionBuffer.getMemorySize() * (3 + layers.length);if(clipboard != null){total += clipboard.bmp.getMemorySize();}return total;};this.getUndoMemoryUsed = function(){var total=0;for(var i=0;i < redoList.length;i++) {var undo=redoList[i];total += undo.getMemoryUsed(true,null);}for(var i=0;i < undoList.length;i++) {var undo=undoList[i];total += undo.getMemoryUsed(false,null);}return total;};function canUndo(){return undoList.length > 0;}function canRedo(){return redoList.length > 0;} //
// Undo / Redo
//
this.undo = function(){if(!canUndo()){return;}hasUnsavedChanges = true;var undo=undoList.pop();undo.undo();redoList.push(undo);};this.redo = function(){if(!canRedo()){return;}hasUnsavedChanges = true;var redo=redoList.pop();redo.redo();undoList.push(redo);}; /**
     * Ensures that the state of the current layer has been stored in undoBuffer so it can be undone later.
     */function prepareForLayerUndo(){if(!undoBufferInvalidRegion.isEmpty()){ //console.log("Copying " + undoBufferInvalidRegion + " to the undo buffer");
undoBuffer.copyBitmapRect(curLayer,undoBufferInvalidRegion.left,undoBufferInvalidRegion.top,undoBufferInvalidRegion);undoBufferInvalidRegion.makeEmpty();}} /**
     * Call when the undo buffer has become completely worthless (e.g. after the active layer index changes, the undo
     * buffer won't contain any data from the new layer to begin with).
     */function invalidateLayerUndo(){undoBufferInvalidRegion = that.getBounds();} /**
     * The result of some of our operations aren't needed until later, so we can defer them until the user is idle.
     *
     * You may call this routine at any time (or never, if you like) as a hint that the user is idle and we should
     * try to perform pending operations before we will need to block on their results.
     */this.performIdleTasks = function(){prepareForLayerUndo();};function addUndo(undo){hasUnsavedChanges = true;if(redoList.length > 0){redoList = [];}if(undoList.length == 0 || !undoList[undoList.length - 1].merge(undo)){if(undoList.length >= MAX_UNDO){undoList.unshift();}if(undoList.length > 0){undoList[undoList.length - 1].compact();}undoList.push(undo);}else if(undoList[undoList.length - 1].noChange()){ // Two merged changes can mean no change at all
// don't leave a useless undo in the list
undoList.pop();}}this.clearHistory = function(){undoList = [];redoList = [];};this.colorPicker = function(x,y){ // not really necessary and could potentially the repaint
// of the canvas to miss that area
// this.fusionLayers();
return fusion.getPixel(~ ~x,~ ~y) & 0xFFFFFF;};this.setSelection = function(rect){curSelection.set(rect);curSelection.clip(this.getBounds());};this.emptySelection = function(){curSelection.makeEmpty();};this.floodFill = function(x,y){prepareForLayerUndo();undoArea = this.getBounds();curLayer.floodFill(~ ~x,~ ~y,curColor | 0xff000000);addUndo(new CPUndoPaint());invalidateFusion();};this.gradientFill = function(fromX,fromY,toX,toY,gradientPoints){var r=this.getSelectionAutoSelect();prepareForLayerUndo();undoArea = r;curLayer.gradient(r,fromX,fromY,toX,toY,gradientPoints);if(lockAlpha){restoreAlpha(r);}addUndo(new CPUndoPaint());invalidateFusion();};this.fill = function(color){var r=this.getSelectionAutoSelect();prepareForLayerUndo();undoArea = r;curLayer.clearRect(r,color);addUndo(new CPUndoPaint());invalidateFusion();};this.clear = function(){this.fill(0xffffff);};this.hFlip = function(){var r=this.getSelectionAutoSelect();prepareForLayerUndo();undoArea = r;curLayer.copyRegionHFlip(r,undoBuffer);addUndo(new CPUndoPaint());invalidateFusion();};this.vFlip = function(){var r=this.getSelectionAutoSelect();prepareForLayerUndo();undoArea = r;curLayer.copyRegionVFlip(r,undoBuffer);addUndo(new CPUndoPaint());invalidateFusion();};this.monochromaticNoise = function(){var r=this.getSelectionAutoSelect();prepareForLayerUndo();undoArea = r;curLayer.fillWithNoise(r);addUndo(new CPUndoPaint());invalidateFusion();};this.colorNoise = function(){var r=this.getSelectionAutoSelect();prepareForLayerUndo();undoArea = r;curLayer.fillWithColorNoise(r);addUndo(new CPUndoPaint());invalidateFusion();};this.invert = function(){var r=this.getSelectionAutoSelect();prepareForLayerUndo();undoArea = r;curLayer.invert(r);addUndo(new CPUndoPaint());invalidateFusion();};this.boxBlur = function(radiusX,radiusY,iterations){var r=this.getSelectionAutoSelect();prepareForLayerUndo();undoArea = r;for(var i=0;i < iterations;i++) {curLayer.boxBlur(r,radiusX,radiusY);}addUndo(new CPUndoPaint());invalidateFusion();};this.rectangleSelection = function(r){var newSelection=r.clone();newSelection.clip(this.getBounds());addUndo(new CPUndoRectangleSelection(this.getSelection(),newSelection));this.setSelection(newSelection);}; /**
     * Get the most recently completed operation from the undo list, or null if the undo list is empty.
     *
     * @returns {*}
     */function getActiveOperation(){if(undoList.length > 0){return undoList[undoList.length - 1];}return null;} /**
     * Move the currently selected layer data by the given offset.
     *
     * @param {int} offsetX
     * @param {int} offsetY
     * @param {boolean} copy - Make a copy of the selection instead of moving it.
     */this.move = function(offsetX,offsetY,copy){ /*
         * Add rounding to ensure we haven't been given float coordinates (that would cause horrible flow-on effects like
         * the boundary of the undo rectangle having float coordinates)
         */offsetX |= 0;offsetY |= 0;if(offsetX == 0 && offsetY == 0){return;}opacityArea.makeEmpty(); // Prevents a drawing tool being called during layer fusion to draw itself to the layer
var activeOp=getActiveOperation(); // If we've changed layers since our last move, we want to move the new layer, not the old one, so can't amend
if(!copy && activeOp instanceof CPActionMoveSelection && activeOp.layerIndex == this.getActiveLayerIndex()){activeOp.amend(offsetX,offsetY);redoList = [];hasUnsavedChanges = true;}else {activeOp = new CPActionMoveSelection(this.getSelectionAutoSelect(),offsetX,offsetY,copy);addUndo(activeOp);}}; /**
     * Change the interpolation mode used by Free Transform operations
     *
     * @param {string} interpolation - Either "sharp" or "smooth"
     */this.setTransformInterpolation = function(interpolation){transformInterpolation = interpolation;if(previewOperation instanceof CPActionTransformSelection){previewOperation.setInterpolation(interpolation);}}; /**
     * If the current operation is an affine transform, roll it back and remove it from the undo history.
     */this.transformAffineAbort = function(){if(previewOperation instanceof CPActionTransformSelection){previewOperation.undo();previewOperation = null;}}; /**
     * Begins transforming the current selection/layer, and returns the initial source rectangle and initial transform.
     * You can update the transform by calling transformAffine().
     * 
     * You must call transformAffineFinish() or transformAffineAbort() to finish the transformation.
     * 
     * Returns null if the current selection/layer doesn't contain any non-transparent pixels, and doesn't start
     * transforming.
     */this.transformAffineBegin = function(){ // Are we already transforming? Continue that instead
if(previewOperation instanceof CPActionTransformSelection){return {transform:previewOperation.getTransform(),rect:previewOperation.getInitialTransformRect(),selection:previewOperation.getInitialSelectionRect()};} // Only transform the non-transparent pixels
var layer=this.getActiveLayer(),selection=this.getSelectionAutoSelect(),initialRect=layer.getNonTransparentBounds(selection),initialTransform=new _utilCPTransform2["default"]();if(initialRect.isEmpty()){return null;} /* If we introduce other previewOperations, we might want to check we aren't overwriting them here...
         * Though probably ChickenPaint's global exclusive mode will enforce this for us.
         */previewOperation = new CPActionTransformSelection(initialRect,initialTransform,transformInterpolation);opacityArea.makeEmpty(); // Prevents a drawing tool being called during layer fusion to draw itself to the layer
return {transform:initialTransform,rect:initialRect,selection:selection};}; /**
     * Finish and save the transform that is currently in progress.
     */this.transformAffineFinish = function(){if(previewOperation instanceof CPActionTransformSelection){addUndo(previewOperation);previewOperation = null;}}; /**
     * Transform the currently selected layer data using the given AffineTransform.
     *
     * @param {CPTransform} affineTransform
     */this.transformAffineAmend = function(affineTransform){if(previewOperation instanceof CPActionTransformSelection){previewOperation.amend(affineTransform);}}; // Copy/Paste functions
this.cutSelection = function(createUndo){var selection=this.getSelection();if(selection.isEmpty()){return;}clipboard = new _CPClip2["default"](curLayer.cloneRect(selection),selection.left,selection.top);if(createUndo){addUndo(new CPUndoCut(clipboard.bmp,this.getActiveLayerIndex(),selection));}curLayer.clearRect(selection,EMPTY_LAYER_COLOR);invalidateFusionRect(selection);};this.copySelection = function(){var selection=that.getSelection();if(selection.isEmpty()){return;}clipboard = new _CPClip2["default"](curLayer.cloneRect(selection),selection.left,selection.top);};this.copySelectionMerged = function(){var selection=that.getSelection();if(selection.isEmpty()){return;} // make sure the fusioned picture is up to date
this.fusionLayers();clipboard = new _CPClip2["default"](fusion.cloneRect(selection),selection.left,selection.top);}; /**
     *
     * @param createUndo boolean
     * @param clip CPClip
     */function pasteClip(createUndo,clip){var activeLayerIndex=that.getActiveLayerIndex();if(createUndo){addUndo(new CPUndoPaste(clip,activeLayerIndex,that.getSelection()));}var newLayer=new _CPLayer2["default"](that.width,that.height,that.getDefaultLayerName()),sourceRect=clip.bmp.getBounds(),x,y;layers.splice(activeLayerIndex + 1,0,newLayer);that.setActiveLayerIndex(activeLayerIndex + 1);if(sourceRect.isInside(that.getBounds())){x = clip.x;y = clip.y;}else {x = (that.width - clip.bmp.width) / 2 | 0;y = (that.height - clip.bmp.height) / 2 | 0;}curLayer.copyBitmapRect(clip.bmp,x,y,sourceRect);that.emptySelection();invalidateFusion();callListenersLayerChange();}this.pasteClipboard = function(createUndo){if(clipboard != null){pasteClip(createUndo,clipboard);}};this.setSampleAllLayers = function(b){sampleAllLayers = b;};this.setLockAlpha = function(b){lockAlpha = b;};this.setForegroundColor = function(color){curColor = color;};this.setBrush = function(brush){curBrush = brush;};this.setBrushTexture = function(texture){brushManager.setTexture(texture);}; // ///////////////////////////////////////////////////////////////////////////////////
// Paint engine
// ///////////////////////////////////////////////////////////////////////////////////
this.beginStroke = function(x,y,pressure){if(curBrush == null){return;}paintingModes[curBrush.paintMode].beginStroke(x,y,pressure);};this.continueStroke = function(x,y,pressure){if(curBrush == null){return;}paintingModes[curBrush.paintMode].continueStroke(x,y,pressure);};this.endStroke = function(){if(curBrush == null){return;}paintingModes[curBrush.paintMode].endStroke();};this.hasAlpha = function(){return fusion.hasAlpha();}; /**
     * Get the artwork as a single flat PNG image.
     * 
     * Rotation is [0..3] and selects a multiple of 90 degrees of clockwise rotation to be applied to the drawing before
     * saving.
     * 
     * @return A binary string of the PNG file data.
     */this.getFlatPNG = function(rotation){this.fusionLayers();return fusion.getAsPNG(rotation);}; /**
     * Returns true if this artwork can be exactly represented as a simple transparent PNG (i.e. doesn't have multiple 
     * layers, and base layer's opacity is set to 100%).
     */this.isSimpleDrawing = function(){return this.getLayerCount() == 1 && this.getLayer(0).getAlpha() == 100;}; // ////////////////////////////////////////////////////
// Undo classes
/**
     * Save the difference between the current layer and the undoBuffer (within the undoArea) for undo, and clear
     * the undoArea.
     *
     * @constructor
     */function CPUndoPaint(){var rect=undoArea.clone(),data=undoBuffer.copyRectXOR(curLayer,rect);this.layer = that.getActiveLayerIndex();undoArea.makeEmpty();this.undo = function(){that.getLayer(this.layer).setRectXOR(data,rect);invalidateFusionRect(rect);};this.redo = function(){that.getLayer(this.layer).setRectXOR(data,rect);invalidateFusionRect(rect);};this.getMemoryUsed = function(undone,param){return data.length;};}CPUndoPaint.prototype = Object.create(_CPUndo2["default"].prototype);CPUndoPaint.prototype.constructor = CPUndoPaint;function CPUndoLayerVisible(_layerIndex,_oldVis,_newVis){this.layerIndex = _layerIndex;this.oldVis = _oldVis;this.newVis = _newVis;}CPUndoLayerVisible.prototype = Object.create(_CPUndo2["default"].prototype);CPUndoLayerVisible.prototype.constructor = CPUndoLayerVisible;CPUndoLayerVisible.prototype.redo = function(){that.getLayer(this.layerIndex).visible = this.newVis;invalidateFusion();callListenersLayerChange(this.layerIndex);};CPUndoLayerVisible.prototype.undo = function(){that.getLayer(this.layerIndex).visible = this.oldVis;invalidateFusion();callListenersLayerChange(this.layerIndex);};CPUndoLayerVisible.prototype.merge = function(u){if(u instanceof CPUndoLayerVisible && this.layerIndex == u.layerIndex){this.newVis = u.newVis;return true;}return false;};CPUndoLayerVisible.prototype.noChange = function(){return this.oldVis == this.newVis;};function CPUndoAddLayer(layerIndex){this.undo = function(){layers.splice(layerIndex + 1,1);that.setActiveLayerIndex(layerIndex);invalidateFusion();callListenersLayerChange();};this.redo = function(){var newLayer=new _CPLayer2["default"](that.width,that.height,that.getDefaultLayerName());newLayer.clearAll(EMPTY_LAYER_COLOR);layers.splice(layerIndex + 1,0,newLayer);that.setActiveLayerIndex(layerIndex + 1);invalidateFusion();callListenersLayerChange();};}CPUndoAddLayer.prototype = Object.create(_CPUndo2["default"].prototype);CPUndoAddLayer.prototype.constructor = CPUndoAddLayer;function CPUndoDuplicateLayer(layerIndex){this.undo = function(){layers.splice(layerIndex + 1,1);that.setActiveLayerIndex(layerIndex);invalidateFusion();callListenersLayerChange();};this.redo = function(){var copySuffix=" Copy",sourceLayer=layers[layerIndex],newLayer=new _CPLayer2["default"](that.width,that.height),newLayerName=sourceLayer.name;if(!newLayerName.endsWith(copySuffix)){newLayerName += copySuffix;}newLayer.copyFrom(sourceLayer);newLayer.name = newLayerName;layers.splice(layerIndex + 1,0,newLayer);that.setActiveLayerIndex(layerIndex + 1);invalidateFusion();callListenersLayerChange();};}CPUndoDuplicateLayer.prototype = Object.create(_CPUndo2["default"].prototype);CPUndoDuplicateLayer.prototype.constructor = CPUndoDuplicateLayer; /**
     * @param layerIndex int
     * @param layer CPLayer
     */function CPUndoRemoveLayer(layerIndex,layer){this.undo = function(){layers.splice(layerIndex,0,layer);that.setActiveLayerIndex(layerIndex);invalidateFusion();callListenersLayerChange();};this.redo = function(){layers.splice(layerIndex,1);that.setActiveLayerIndex(layerIndex < layers.length?layerIndex:layerIndex - 1);invalidateFusion();callListenersLayerChange();};this.getMemoryUsed = function(undone){return undone?0:layer.width * layer.height * _CPColorBmp2["default"].BYTES_PER_PIXEL;};}CPUndoRemoveLayer.prototype = Object.create(_CPUndo2["default"].prototype);CPUndoRemoveLayer.prototype.constructor = CPUndoRemoveLayer;function CPUndoMergeDownLayer(layerIndex){var layerBottom=new _CPLayer2["default"](that.width,that.height),layerTop;layerBottom.copyFrom(layers[layerIndex - 1]);layerTop = layers[layerIndex];this.undo = function(){layers[layerIndex - 1].copyFrom(layerBottom);layers.splice(layerIndex,0,layerTop);that.setActiveLayerIndex(layerIndex);layerBottom = layerTop = null;invalidateFusion();callListenersLayerChange();};this.redo = function(){layerBottom = new _CPLayer2["default"](that.width,that.height);layerBottom.copyFrom(layers[layerIndex - 1]);layerTop = layers[layerIndex];that.setActiveLayerIndex(layerIndex);that.mergeDown(false);};this.getMemoryUsed = function(undone,param){return undone?0:that.width * that.height * _CPColorBmp2["default"].BYTES_PER_PIXEL * 2;};}CPUndoMergeDownLayer.prototype = Object.create(_CPUndo2["default"].prototype);CPUndoMergeDownLayer.prototype.constructor = CPUndoMergeDownLayer;function CPUndoMergeAllLayers(){var oldActiveLayerIndex=that.getActiveLayerIndex(),oldLayers=layers.slice(0); // Clone old layers array
this.undo = function(){layers = oldLayers.slice(0);that.setActiveLayerIndex(oldActiveLayerIndex);invalidateFusion();callListenersLayerChange();};this.redo = function(){that.mergeAllLayers(false);};this.getMemoryUsed = function(undone,param){return undone?0:oldLayers.length * width * height * _CPColorBmp2["default"].BYTES_PER_PIXEL;};}CPUndoMergeAllLayers.prototype = Object.create(_CPUndo2["default"].prototype);CPUndoMergeAllLayers.prototype.constructor = CPUndoMergeAllLayers;function CPUndoMoveLayer(from,to){this.undo = function(){if(to <= from){moveLayerReal(to,from + 1);}else {moveLayerReal(to - 1,from);}};this.redo = function(){moveLayerReal(from,to);};}CPUndoMoveLayer.prototype = Object.create(_CPUndo2["default"].prototype);CPUndoMoveLayer.prototype.constructor = CPUndoMoveLayer;function CPUndoLayerAlpha(layerIndex,alpha){this.from = that.getLayer(layerIndex).getAlpha();this.to = alpha;this.layerIndex = layerIndex;}CPUndoLayerAlpha.prototype = Object.create(_CPUndo2["default"].prototype);CPUndoLayerAlpha.prototype.constructor = CPUndoLayerAlpha;CPUndoLayerAlpha.prototype.undo = function(){that.getLayer(this.layerIndex).setAlpha(this.from);invalidateFusion();callListenersLayerChange(this.layerIndex);};CPUndoLayerAlpha.prototype.redo = function(){that.getLayer(this.layerIndex).setAlpha(this.to);invalidateFusion();callListenersLayerChange(this.layerIndex);};CPUndoLayerAlpha.prototype.merge = function(u){if(u instanceof CPUndoLayerAlpha && this.layerIndex == u.layerIndex){this.to = u.to;return true;}return false;};CPUndoLayerAlpha.prototype.noChange = function(){return this.from == this.to;};function CPUndoLayerMode(layerIndex,to){this.layerIndex = layerIndex;this.from = that.getLayer(layerIndex).getBlendMode();this.to = to;}CPUndoLayerMode.prototype = Object.create(_CPUndo2["default"].prototype);CPUndoLayerMode.prototype.constructor = CPUndoLayerMode;CPUndoLayerMode.prototype.undo = function(){that.getLayer(this.layerIndex).setBlendMode(this.from);invalidateFusion();callListenersLayerChange();};CPUndoLayerMode.prototype.redo = function(){that.getLayer(this.layerIndex).setBlendMode(this.to);invalidateFusion();callListenersLayerChange();};CPUndoLayerMode.prototype.merge = function(u){if(u instanceof CPUndoLayerMode && this.layerIndex == u.layerIndex){this.to = u.to;return true;}return false;};CPUndoLayerMode.prototype.noChange = function(){return this.from == this.to;};function CPUndoLayerRename(layerIndex,to){this.layerIndex = layerIndex;this.to = to;this.from = that.getLayer(layerIndex).name;}CPUndoLayerRename.prototype = Object.create(_CPUndo2["default"].prototype);CPUndoLayerRename.prototype.constructor = CPUndoLayerRename;CPUndoLayerRename.prototype.undo = function(){that.getLayer(this.layerIndex).name = this.from;callListenersLayerChange(this.layerIndex);};CPUndoLayerRename.prototype.redo = function(){that.getLayer(this.layerIndex).name = this.to;callListenersLayerChange(this.layerIndex);};CPUndoLayerRename.prototype.merge = function(u){if(u instanceof CPUndoLayerRename && this.layerIndex == u.layerIndex){this.to = u.to;return true;}return false;};CPUndoLayerRename.prototype.noChange = function(){return this.from == this.to;}; /**
     * @param from CPRect
     * @param to CPRect
     */function CPUndoRectangleSelection(from,to){from = from.clone();to = to.clone();this.undo = function(){that.setSelection(from);callListenersUpdateRegion(that.getBounds());};this.redo = function(){that.setSelection(to);callListenersUpdateRegion(that.getBounds());};this.noChange = function(){return from.equals(to);};}CPUndoRectangleSelection.prototype = Object.create(_CPUndo2["default"].prototype);CPUndoRectangleSelection.prototype.constructor = CPUndoRectangleSelection; /**
     * Upon creation, transforms the currently selected region of the current layer by the given affine transform.
     *
     * @param {CPRect} srcRect - Rectangle to transform
     * @param {CPTransform} affineTransform - Transform to apply
     * @param {string} interpolation - "smooth" or "sharp"
     */function CPActionTransformSelection(srcRect,affineTransform,interpolation){var fromSelection=that.getSelection(),dstRect=null,tempCanvas=document.createElement("canvas"),tempCanvasContext=tempCanvas.getContext("2d"),undoData, // A copy of the original layer within the undoDataRect
undoDataRect, // A canvas for composing the transform onto
fullUndoCanvas=document.createElement("canvas"),fullUndoCanvasContext=fullUndoCanvas.getContext("2d");affineTransform = affineTransform.clone();interpolation = interpolation || "smooth";this.undo = function(){var layer=that.getLayer(this.layerIndex),invalidateRegion=dstRect.clone(),undoSrcRegion;invalidateRegion.union(srcRect);undoSrcRegion = invalidateRegion.clone();undoSrcRegion.translate(-undoDataRect.left,-undoDataRect.top);layer.copyBitmapRect(undoData,invalidateRegion.left,invalidateRegion.top,undoSrcRegion);that.setSelection(fromSelection);that.setActiveLayerIndex(this.layerIndex);invalidateFusionRect(invalidateRegion); /*
             * Required because in the case of a copy, we don't invalidate the source rect in the fusion, so the canvas
             * won't end up repainting the selection rectangle there.
             */callListenersSelectionChange();};this.redo = function(){var layer=that.getLayer(this.layerIndex); // Make a fresh copy of the layer into a Canvas to compose onto
fullUndoCanvasContext.putImageData(layer.getImageData(),0,0); // Erase the region we moved from
fullUndoCanvasContext.clearRect(srcRect.left,srcRect.top,srcRect.getWidth(),srcRect.getHeight());(0,_utilCPPolyfill.setCanvasInterpolation)(fullUndoCanvasContext,interpolation == "smooth");fullUndoCanvasContext.save(); // Apply the transform when drawing the transformed fragment
fullUndoCanvasContext.setTransform(affineTransform.m[0],affineTransform.m[1],affineTransform.m[2],affineTransform.m[3],affineTransform.m[4],affineTransform.m[5]);fullUndoCanvasContext.drawImage(tempCanvas,srcRect.left,srcRect.top);fullUndoCanvasContext.restore(); // Copy back to the layer data
layer.setImageData(fullUndoCanvasContext.getImageData(0,0,layer.width,layer.height)); // Invalidate the source and destination regions we touched
var invalidateRegion=srcRect.clone(),dstCorners=srcRect.toPoints();affineTransform.transformPoints(dstCorners);dstRect = _utilCPRect2["default"].createBoundingBox(dstCorners);dstRect.roundContain();layer.getBounds().clip(dstRect);invalidateRegion.union(dstRect);invalidateFusionRect(invalidateRegion); // Transform the selection rect to enclose the transformed selection
if(!fromSelection.isEmpty()){var toSelectionPoints=fromSelection.toPoints(),toSelectionRect;affineTransform.transformPoints(toSelectionPoints);toSelectionRect = _utilCPRect2["default"].createBoundingBox(toSelectionPoints);toSelectionRect.roundNearest();layer.getBounds().clip(toSelectionRect);that.setSelection(toSelectionRect);callListenersSelectionChange();}}; /**
         * Replace the transform with the given one.
         *
         * @param {CPTransform} _affineTransform
         */this.amend = function(_affineTransform){var layer=that.getLayer(this.layerIndex);this.undo();if(undoDataRect.getWidth() < layer.width || undoDataRect.getHeight() < layer.height){ /*
                 * We need a complete copy of the layer in undoData to support further redo(). (As we probably previously
                 * only made a backup copy of the areas we erased using the old transform).
                 */undoData = layer.clone();undoDataRect = layer.getBounds();}affineTransform = _affineTransform.clone();this.redo();};this.setInterpolation = function(newInterpolation){if(newInterpolation != interpolation){interpolation = newInterpolation;this.undo();this.redo();}}; /**
         * Called when we're no longer the top operation in the undo stack, so that we can optimize for lower memory
         * usage instead of faster revision speed
         */this.compact = function(){var layer=that.getLayer(this.layerIndex); // If we have a full undo, and we don't need very much area for undo, trim it to just the area we need
if(undoDataRect.getWidth() == layer.width && undoDataRect.getHeight() == layer.height){var dirtyRect=srcRect.getUnion(dstRect);if(dirtyRect.getArea() * 2 < layer.width * layer.height){undoDataRect = dirtyRect;undoData = undoData.cloneRect(undoDataRect);}}};this.getMemoryUsed = function(undone,param){return undoData.getMemorySize();}; /**
         * Get a copy of the affine transform.
         */this.getTransform = function(){return affineTransform.clone();}; /**
         * Get a copy of the initial document rectangle (before the transform was applied)
         *
         * @returns {CPRect}
         */this.getInitialTransformRect = function(){return srcRect.clone();}; /**
         * Get a copy of the initial user selection rectangle (before the transform was applied). Can be empty if
         * the user didn't have anything selected before the transform began.
         *
         * @returns {CPRect}
         */this.getInitialSelectionRect = function(){return fromSelection.clone();};this.layerIndex = that.getActiveLayerIndex();var layer=that.getLayer(this.layerIndex);undoData = layer.clone();undoDataRect = layer.getBounds();fullUndoCanvas.width = layer.width;fullUndoCanvas.height = layer.height; // Make a copy of just the source rectangle in its own canvas so we have it as an image to be drawn later
tempCanvas.width = srcRect.getWidth();tempCanvas.height = srcRect.getHeight();tempCanvasContext.putImageData(undoData.getImageData(),-srcRect.left,-srcRect.top,srcRect.left,srcRect.top,srcRect.getWidth(),srcRect.getHeight());this.redo();}CPActionTransformSelection.prototype = Object.create(_CPUndo2["default"].prototype);CPActionTransformSelection.prototype.constructor = CPActionTransformSelection; /**
     * Upon creation, moves the currently selected region of the current layer by the given offset (or copies it if
     * 'copy' is true).
     *
     * @param srcRect
     * @param offsetX
     * @param offsetY
     * @param copy
     * @constructor
     */function CPActionMoveSelection(srcRect,offsetX,offsetY,copy){var fromSelection=that.getSelection(),dstRect=null,fullUndo, // A copy of the entire layer
srcData=null, // A copy of the original pixels at the srcRect, or null if we use a fullUndo instead
dstData=null // A copy of the original pixels at the dstRect, or null
;this.undo = function(){var layer=that.getLayer(this.layerIndex),invalidateRegion=dstRect.clone();if(!copy){invalidateRegion.union(srcRect);}if(fullUndo){layer.copyBitmapRect(fullUndo,invalidateRegion.left,invalidateRegion.top,invalidateRegion);}else {layer.copyBitmapRect(srcData,srcRect.left,srcRect.top,srcData.getBounds());if(dstData){layer.copyBitmapRect(dstData,dstRect.left,dstRect.top,dstData.getBounds());}}that.setSelection(fromSelection);that.setActiveLayerIndex(this.layerIndex);invalidateFusionRect(invalidateRegion); /*
             * Required because in the case of a copy, we don't invalidate the source rect in the fusion, so the canvas
             * won't end up repainting the selection rectangle there.
             */callListenersSelectionChange();};this.redo = function(){var layer=that.getLayer(this.layerIndex),invalidateRegion=new _utilCPRect2["default"](0,0,0,0);if(!copy){layer.clearRect(srcRect,0);invalidateRegion.set(srcRect);}dstRect = srcRect.clone();dstRect.translate(offsetX,offsetY);layer.getBounds().clip(dstRect); /* Note that while we could copy image data from the layer itself onto the layer (instead of sourcing that
             * data from the undo buffers), this would require that pasteAlphaRect do the right thing when source and
             * dest rects overlap, which it doesn't.
             */if(fullUndo){layer.pasteAlphaRect(fullUndo,srcRect,dstRect.left,dstRect.top);}else {layer.pasteAlphaRect(srcData,srcData.getBounds(),dstRect.left,dstRect.top);}invalidateRegion.union(dstRect);invalidateFusionRect(invalidateRegion);if(!fromSelection.isEmpty()){var toSelection=fromSelection.clone();toSelection.translate(offsetX,offsetY);that.setSelection(toSelection);callListenersSelectionChange();}}; /**
         * Move further by the given offset on top of the current offset.
         *
         * @param _offsetX {int}
         * @param _offsetY {int}
         */this.amend = function(_offsetX,_offsetY){var layer=that.getLayer(this.layerIndex);if(fullUndo){if(copy){this.undo();}else { /*
                     * We don't need to restore the image at the *source* location as a full undo would do, since
                     * we'll only erase that area again once we redo(). So just restore the data at the dest.
                     */layer.copyBitmapRect(fullUndo,dstRect.left,dstRect.top,dstRect);invalidateFusionRect(dstRect);}}else { /*
                 * We want to make a complete copy of the layer in fullUndo to support fast further amend() calls.
                 */this.undo();fullUndo = layer.clone();srcData = null;dstData = null;}offsetX += _offsetX;offsetY += _offsetY;this.redo();}; /**
         * Called when we're no longer the top operation in the undo stack, so that we can optimize for lower memory
         * usage instead of faster revision speed
         */this.compact = function(){if(fullUndo && srcRect.getArea() * 2 < that.width * that.height){ // Replace our copy of the entire layer with just a copy of the areas we damaged
srcData = fullUndo.cloneRect(srcRect);if(!copy && dstRect.isInside(srcRect)){dstData = null;}else {dstData = fullUndo.cloneRect(dstRect);}fullUndo = null;}};this.getMemoryUsed = function(){var size=0;if(fullUndo){size += fullUndo.getMemorySize();}if(srcData){size += srcData.getMemorySize();}if(dstData){size += dstData.getMemorySize();}return size;};this.layerIndex = that.getActiveLayerIndex();fullUndo = that.getLayer(this.layerIndex).clone();this.redo();}CPActionMoveSelection.prototype = Object.create(_CPUndo2["default"].prototype);CPActionMoveSelection.prototype.constructor = CPActionMoveSelection; /**
     * Used to encapsulate multiple undo operation as one
     * 
     * @param undoes CPUndo[] List of undo operations to encapsulate
     */function CPMultiUndo(undoes){this.undoes = undoes;}CPMultiUndo.prototype = Object.create(_CPUndo2["default"].prototype);CPMultiUndo.prototype.constructor = CPMultiUndo;CPMultiUndo.prototype.undo = function(){for(var i=this.undoes.length - 1;i >= 0;i--) {this.undoes[i].undo();}};CPMultiUndo.prototype.redo = function(){for(var i=0;i < this.undoes.length;i++) {this.undoes[i].redo();}};CPMultiUndo.prototype.noChange = function(){for(var i=0;i < undoes.length;i++) {if(!undoes[i].noChange()){return false;}}return true;};CPMultiUndo.prototype.getMemoryUsed = function(undone,param){var total=0;for(var i=0;i < undoes.length;i++) {total += undoes[i].getMemoryUsed(undone,param);}return total;}; /**
     * Store data to undo a cut operation
     * 
     * @param bmp CPColorBmp The rectangle of image data that was cut
     * @param layerIndex int Index of the layer the cut came from
     * @param selection CPRect The cut rectangle co-ordinates
     */function CPUndoCut(bmp,layerIndex,selection){selection = selection.clone();this.undo = function(){that.setActiveLayerIndex(layerIndex);curLayer.copyBitmapRect(bmp,selection.left,selection.top,bmp.getBounds());that.setSelection(selection);invalidateFusionRect(selection);};this.redo = function(){that.setActiveLayerIndex(layerIndex);curLayer.clearRect(selection,EMPTY_LAYER_COLOR);that.emptySelection();invalidateFusionRect(selection);};this.getMemoryUsed = function(undone,param){return bmp == param?0:bmp.width * bmp.height * _CPColorBmp2["default"].BYTES_PER_PIXEL;};}CPUndoCut.prototype = Object.create(_CPUndo2["default"].prototype);CPUndoCut.prototype.constructor = CPUndoCut; /**
     * Store data to undo a paste operation
     * 
     * @param clip CPClip
     * @param layerIndex int
     * @param selection CPRect
     */function CPUndoPaste(clip,layerIndex,selection){selection = selection.clone();this.undo = function(){layers.splice(layerIndex + 1,1);that.setActiveLayerIndex(layerIndex);that.setSelection(selection);invalidateFusionRect(selection);callListenersLayerChange();};this.redo = function(){that.setActiveLayerIndex(layerIndex);pasteClip(false,clip);};this.getMemoryUsed = function(undone,param){return clip.bmp == param?0:clip.bmp.width * clip.bmp.height * 4;};}CPUndoPaste.prototype = Object.create(_CPUndo2["default"].prototype);CPUndoPaste.prototype.constructor = CPUndoPaste;};CPArtwork.prototype = Object.create(EventEmitter.prototype);CPArtwork.prototype.constructor = CPArtwork;CPArtwork.prototype.getBounds = function(){return new _utilCPRect2["default"](0,0,this.width,this.height);};CPArtwork.prototype.isPointWithin = function(x,y){return x >= 0 && y >= 0 && x < this.width && y < this.height;};module.exports = exports["default"];

},{"../util/CPColorFloat":48,"../util/CPPolyfill":49,"../util/CPRandom":51,"../util/CPRect":52,"../util/CPTransform":53,"./CPBrushInfo":5,"./CPBrushManager":6,"./CPClip":8,"./CPColorBmp":9,"./CPGreyBmp":10,"./CPLayer":11,"./CPUndo":15}],3:[function(require,module,exports){
/*
    ChickenPaint
    
    ChickenPaint is a translation of ChibiPaint from Java to JavaScript
    by Nicholas Sherlock / Chicken Smoothie.
    
    ChibiPaint is Copyright (c) 2006-2008 Marc Schefer

    ChickenPaint is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    ChickenPaint is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with ChickenPaint. If not, see <http://www.gnu.org/licenses/>.
*/

"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports["default"] = CPBitmap;

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

var _utilCPRect = require("../util/CPRect");

var _utilCPRect2 = _interopRequireDefault(_utilCPRect);

function CPBitmap(width, height) {
    // Width and height forced to integers
    this.width = width | 0;
    this.height = height | 0;
}

CPBitmap.prototype.getBounds = function () {
    return new _utilCPRect2["default"](0, 0, this.width, this.height);
};

CPBitmap.prototype.isInside = function (x, y) {
    return x >= 0 && y >= 0 && x < this.width && y < this.height;
};
module.exports = exports["default"];

},{"../util/CPRect":52}],4:[function(require,module,exports){
// Layer blending functions
//
// The FullAlpha versions are the ones that work in all cases
// others need the bottom layer to be 100% opaque but are faster
"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports["default"] = CPBlend;

function CPBlend() {}

var BYTES_PER_PIXEL = 4,
    RED_BYTE_OFFSET = 0,
    GREEN_BYTE_OFFSET = 1,
    BLUE_BYTE_OFFSET = 2,
    ALPHA_BYTE_OFFSET = 3;

CPBlend.prototype.fusionWithMultiply = function (that, fusion, rect) {
    var yStride = (that.width - rect.getWidth()) * BYTES_PER_PIXEL,
        pixIndex = that.offsetOfPixel(rect.left, rect.top);

    for (var y = rect.top; y < rect.bottom; y++, pixIndex += yStride) {
        for (var x = rect.left; x < rect.right; x++) {
            var alpha = that.data[pixIndex + ALPHA_BYTE_OFFSET] * that.alpha / 100 | 0;

            if (alpha > 0) {
                for (var i = 0; i < 3; i++, pixIndex++) {
                    fusion.data[pixIndex] = fusion.data[pixIndex] - (that.data[pixIndex] ^ 0xFF) * fusion.data[pixIndex] * alpha / (255 * 255) | 0;
                }
                pixIndex++; // Don't need to update the alpha because it started out as 100%
            } else {
                    pixIndex += BYTES_PER_PIXEL;
                }
        }
    }
};

/* Blend onto an opaque fusion. Supports .alpha < 100 on this layer */
CPBlend.prototype.fusionWithNormal = function (that, fusion, rect) {
    var yStride = (that.width - rect.getWidth()) * BYTES_PER_PIXEL | 0,
        pixIndex = that.offsetOfPixel(rect.left, rect.top) | 0,
        h = rect.bottom - rect.top | 0,
        w = rect.right - rect.left | 0;

    for (var y = 0; y < h; y++, pixIndex += yStride) {
        for (var x = 0; x < w; x++) {
            var alpha = that.data[pixIndex + ALPHA_BYTE_OFFSET] * that.alpha / 100 | 0;

            if (alpha > 0) {
                if (alpha == 255) {
                    fusion.data[pixIndex] = that.data[pixIndex];
                    fusion.data[pixIndex + 1] = that.data[pixIndex + 1];
                    fusion.data[pixIndex + 2] = that.data[pixIndex + 2];
                    fusion.data[pixIndex + 3] = 255;
                } else {
                    var invAlpha = 255 - alpha;

                    fusion.data[pixIndex] = (that.data[pixIndex] * alpha + fusion.data[pixIndex] * invAlpha) / 255 | 0;
                    fusion.data[pixIndex + 1] = (that.data[pixIndex + 1] * alpha + fusion.data[pixIndex + 1] * invAlpha) / 255 | 0;
                    fusion.data[pixIndex + 2] = (that.data[pixIndex + 2] * alpha + fusion.data[pixIndex + 2] * invAlpha) / 255 | 0;
                }
            }

            pixIndex += BYTES_PER_PIXEL;
        }
    }
};

// Fusing onto an opaque layer when this layer has alpha set to 100
CPBlend.prototype.fusionWithNormalNoAlpha = function (that, fusion, rect) {
    var yStride = (that.width - rect.getWidth()) * BYTES_PER_PIXEL | 0,
        pixIndex = that.offsetOfPixel(rect.left, rect.top) | 0,
        h = rect.bottom - rect.top | 0,
        w = rect.right - rect.left | 0;

    for (var y = 0; y < h; y++, pixIndex += yStride) {
        for (var x = 0; x < w; x++) {
            var alpha = that.data[pixIndex + ALPHA_BYTE_OFFSET];

            if (alpha > 0) {
                if (alpha == 255) {
                    fusion.data[pixIndex] = that.data[pixIndex];
                    fusion.data[pixIndex + 1] = that.data[pixIndex + 1];
                    fusion.data[pixIndex + 2] = that.data[pixIndex + 2];
                    fusion.data[pixIndex + 3] = that.data[pixIndex + 3];
                } else {
                    var invAlpha = 255 - alpha;

                    fusion.data[pixIndex] = (that.data[pixIndex] * alpha + fusion.data[pixIndex] * invAlpha) / 255;
                    fusion.data[pixIndex + 1] = (that.data[pixIndex + 1] * alpha + fusion.data[pixIndex + 1] * invAlpha) / 255;
                    fusion.data[pixIndex + 2] = (that.data[pixIndex + 2] * alpha + fusion.data[pixIndex + 2] * invAlpha) / 255;
                }
            }

            pixIndex += BYTES_PER_PIXEL;
        }
    }
};

CPBlend.prototype.fusionWithAdd = function (that, fusion, rect) {
    var yStride = (that.width - rect.getWidth()) * BYTES_PER_PIXEL,
        pixIndex = that.offsetOfPixel(rect.left, rect.top);

    for (var y = rect.top; y < rect.bottom; y++, pixIndex += yStride) {
        for (var x = rect.left; x < rect.right; x++) {
            var alpha = that.data[pixIndex + ALPHA_BYTE_OFFSET] * that.alpha / 100 | 0;

            if (alpha > 0) {
                for (var i = 0; i < 3; i++, pixIndex++) {
                    fusion.data[pixIndex] = Math.min(255, fusion.data[pixIndex] + alpha * that.data[pixIndex] / 255 | 0);
                }
                pixIndex++; // Don't need to update the alpha because it started out as 100%
            } else {
                    pixIndex += BYTES_PER_PIXEL;
                }
        }
    }
};

// Normal Alpha Mode
// C = A*d + B*(1-d) and d = aa / (aa + ab - aa*ab)
CPBlend.prototype.fusionWithNormalFullAlpha = function (that, fusion, rect) {
    var yStride = (that.width - rect.getWidth()) * BYTES_PER_PIXEL | 0,
        pixIndex = that.offsetOfPixel(rect.left, rect.top) | 0,
        h = rect.bottom - rect.top | 0,
        w = rect.right - rect.left | 0;

    for (var y = 0; y < h; y++, pixIndex += yStride) {
        for (var x = 0; x < w; x++) {
            var alpha1 = that.data[pixIndex + ALPHA_BYTE_OFFSET] * that.alpha / 100,
                alpha2 = fusion.data[pixIndex + ALPHA_BYTE_OFFSET] * fusion.alpha / 100,
                newAlpha = alpha1 + alpha2 - alpha1 * alpha2 / 255 | 0;

            if (newAlpha > 0) {
                var realAlpha = alpha1 * 255 / newAlpha | 0,
                    invAlpha = 255 - realAlpha;

                fusion.data[pixIndex] = (that.data[pixIndex] * realAlpha + fusion.data[pixIndex] * invAlpha) / 255;
                fusion.data[pixIndex + 1] = (that.data[pixIndex + 1] * realAlpha + fusion.data[pixIndex + 1] * invAlpha) / 255;
                fusion.data[pixIndex + 2] = (that.data[pixIndex + 2] * realAlpha + fusion.data[pixIndex + 2] * invAlpha) / 255;
                fusion.data[pixIndex + 3] = newAlpha;
            }

            pixIndex += BYTES_PER_PIXEL;
        }
    }

    fusion.alpha = 100;
};

// Multiply Mode
// C = (A*aa*(1-ab) + B*ab*(1-aa) + A*B*aa*ab) / (aa + ab - aa*ab)

CPBlend.prototype.fusionWithMultiplyFullAlpha = function (that, fusion, rect) {
    var yStride = (that.width - rect.getWidth()) * BYTES_PER_PIXEL,
        pixIndex = that.offsetOfPixel(rect.left, rect.top);

    for (var y = rect.top; y < rect.bottom; y++, pixIndex += yStride) {
        for (var x = rect.left; x < rect.right; x++) {
            var alpha1 = that.data[pixIndex + ALPHA_BYTE_OFFSET] * that.alpha / 100,
                alpha2 = fusion.data[pixIndex + ALPHA_BYTE_OFFSET] * fusion.alpha / 100,
                newAlpha = alpha1 + alpha2 - alpha1 * alpha2 / 255 | 0;

            if (newAlpha > 0) {
                var alpha12 = alpha1 * alpha2 / 255 | 0,
                    alpha1n2 = alpha1 * (alpha2 ^ 0xFF) / 255 | 0,
                    alphan12 = (alpha1 ^ 0xff) * alpha2 / 255 | 0;

                for (var i = 0; i < 3; i++, pixIndex++) {
                    fusion.data[pixIndex] = (that.data[pixIndex] * alpha1n2 + fusion.data[pixIndex] * alphan12 + that.data[pixIndex] * fusion.data[pixIndex] * alpha12 / 255) / newAlpha | 0;
                }
                fusion.data[pixIndex++] = newAlpha;
            } else {
                pixIndex += BYTES_PER_PIXEL;
            }
        }
    }

    fusion.alpha = 100;
};

// Linear Dodge (Add) Mode
// C = (aa * A + ab * B) / (aa + ab - aa*ab)

CPBlend.prototype.fusionWithAddFullAlpha = function (that, fusion, rect) {
    var yStride = (that.width - rect.getWidth()) * BYTES_PER_PIXEL,
        pixIndex = that.offsetOfPixel(rect.left, rect.top);

    for (var y = rect.top; y < rect.bottom; y++, pixIndex += yStride) {
        for (var x = rect.left; x < rect.right; x++) {
            var alpha1 = that.data[pixIndex + ALPHA_BYTE_OFFSET] * that.alpha / 100,
                alpha2 = fusion.data[pixIndex + ALPHA_BYTE_OFFSET] * fusion.alpha / 100,
                newAlpha = alpha1 + alpha2 - alpha1 * alpha2 / 255 | 0;

            if (newAlpha > 0) {

                /*
                * // this version seems slower than the Math.min one int r = (alpha2 * (color2 >>> 16 & 0xff) +
                * alpha1 * (color1 >>> 16 & 0xff)) / newAlpha; r |= ((~((r & 0xffffff00) - 1) >> 16) | r) & 0xff;
                * int g = (alpha2 * (color2 >>> 8 & 0xff) + alpha1 * (color1 >>> 8 & 0xff)) / newAlpha; g |= ((~((g &
                * 0xffffff00) - 1) >> 16) | g) & 0xff; int b = (alpha2 * (color2 & 0xff) + alpha1 * (color1 &
                * 0xff)) / newAlpha; b |= ((~((b & 0xffffff00) - 1) >> 16) | b) & 0xff;
                */

                for (var i = 0; i < 3; i++, pixIndex++) {
                    fusion.data[pixIndex] = Math.min(255, (alpha2 * fusion.data[pixIndex] + alpha1 * that.data[pixIndex]) / newAlpha | 0);
                }
                fusion.data[pixIndex++] = newAlpha;
            } else {
                pixIndex += BYTES_PER_PIXEL;
            }
        }
    }

    fusion.alpha = 100;
};

// Linear Burn (Sub) Mode
// C = (aa * A + ab * B - aa*ab ) / (aa + ab - aa*ab)

CPBlend.prototype.fusionWithSubtractFullAlpha = function (that, fusion, rect) {
    var yStride = (that.width - rect.getWidth()) * BYTES_PER_PIXEL,
        pixIndex = that.offsetOfPixel(rect.left, rect.top);

    for (var y = rect.top; y < rect.bottom; y++, pixIndex += yStride) {
        for (var x = rect.left; x < rect.right; x++) {
            var alpha1 = that.data[pixIndex + ALPHA_BYTE_OFFSET] * that.alpha / 100 | 0,
                alpha2 = fusion.data[pixIndex + ALPHA_BYTE_OFFSET] * fusion.alpha / 100 | 0,
                newAlpha = alpha1 + alpha2 - alpha1 * alpha2 / 255 | 0;

            if (newAlpha > 0) {
                var alpha12 = alpha1 * alpha2;

                for (var i = 0; i < 3; i++, pixIndex++) {
                    var channel = (alpha2 * fusion.data[pixIndex] + alpha1 * that.data[pixIndex] - alpha12) / newAlpha;

                    // binary magic to clamp negative values to zero without using a condition
                    fusion.data[pixIndex] = channel & ~channel >>> 24;
                }
                fusion.data[pixIndex++] = newAlpha;
            } else {
                pixIndex += BYTES_PER_PIXEL;
            }
        }
    }

    fusion.alpha = 100;
};

// For opaque fusion
CPBlend.prototype.fusionWithSubtract = function (that, fusion, rect) {
    var yStride = (that.width - rect.getWidth()) * BYTES_PER_PIXEL | 0,
        pixIndex = that.offsetOfPixel(rect.left, rect.top) | 0;

    for (var y = rect.top; y < rect.bottom; y++, pixIndex += yStride) {
        for (var x = rect.left; x < rect.right; x++) {
            var alpha1 = that.data[pixIndex + ALPHA_BYTE_OFFSET] * that.alpha / 100 | 0,
                alpha12 = alpha1 * 255;

            for (var i = 0; i < 3; i++, pixIndex++) {
                var channel = (255 * fusion.data[pixIndex] + alpha1 * that.data[pixIndex] - alpha12) / 255;

                // binary magic to clamp negative values to zero without using a condition
                fusion.data[pixIndex] = channel & ~channel >>> 24;
            }
            pixIndex++; // Alpha stays the same
        }
    }

    fusion.alpha = 100;
};

// Screen Mode
// same as Multiply except all color channels are inverted and the result too
// C = 1 - (((1-A)*aa*(1-ab) + (1-B)*ab*(1-aa) + (1-A)*(1-B)*aa*ab) / (aa + ab - aa*ab))

CPBlend.prototype.fusionWithScreenFullAlpha = function (that, fusion, rect) {
    var yStride = (that.width - rect.getWidth()) * BYTES_PER_PIXEL,
        pixIndex = that.offsetOfPixel(rect.left, rect.top);

    for (var y = rect.top; y < rect.bottom; y++, pixIndex += yStride) {
        for (var x = rect.left; x < rect.right; x++) {
            var alpha1 = that.data[pixIndex + ALPHA_BYTE_OFFSET] * that.alpha / 100 | 0,
                alpha2 = fusion.data[pixIndex + ALPHA_BYTE_OFFSET] * fusion.alpha / 100 | 0,
                newAlpha = alpha1 + alpha2 - alpha1 * alpha2 / 255 | 0;

            if (newAlpha > 0) {
                var alpha12 = alpha1 * alpha2 / 255 | 0,
                    alpha1n2 = alpha1 * (alpha2 ^ 0xFF) / 255 | 0,
                    alphan12 = (alpha1 ^ 0xff) * alpha2 / 255 | 0;

                for (var i = 0; i < 3; i++, pixIndex++) {
                    fusion.data[pixIndex] = 0xFF ^ ((that.data[pixIndex] ^ 0xFF) * alpha1n2 + (fusion.data[pixIndex] ^ 0xFF) * alphan12 + (that.data[pixIndex] ^ 0xFF) * (fusion.data[pixIndex] ^ 0xFF) * alpha12 / 255) / newAlpha;
                }
                fusion.data[pixIndex++] = newAlpha;
            } else {
                pixIndex += BYTES_PER_PIXEL;
            }
        }
    }

    fusion.alpha = 100;
};

// For opaque fusion
CPBlend.prototype.fusionWithScreen = function (that, fusion, rect) {
    var yStride = (that.width - rect.getWidth()) * BYTES_PER_PIXEL | 0,
        pixIndex = that.offsetOfPixel(rect.left, rect.top) | 0;

    for (var y = rect.top; y < rect.bottom; y++, pixIndex += yStride) {
        for (var x = rect.left; x < rect.right; x++) {
            var alpha1 = that.data[pixIndex + ALPHA_BYTE_OFFSET] * that.alpha / 100 | 0,
                invAlpha1 = alpha1 ^ 0xff;

            for (var i = 0; i < 3; i++, pixIndex++) {
                fusion.data[pixIndex] = 0xFF ^ ((fusion.data[pixIndex] ^ 0xFF) * invAlpha1 + (that.data[pixIndex] ^ 0xFF) * (fusion.data[pixIndex] ^ 0xFF) * alpha1 / 255) / 255;
            }
            pixIndex++; // Alpha stays the same
        }
    }

    fusion.alpha = 100;
};

// Lighten Mode
// if B >= A: C = A*d + B*(1-d) and d = aa * (1-ab) / (aa + ab - aa*ab)
// if A > B: C = B*d + A*(1-d) and d = ab * (1-aa) / (aa + ab - aa*ab)

CPBlend.prototype.fusionWithLightenFullAlpha = function (that, fusion, rect) {
    var yStride = (that.width - rect.getWidth()) * BYTES_PER_PIXEL,
        pixIndex = that.offsetOfPixel(rect.left, rect.top);

    for (var y = rect.top; y < rect.bottom; y++, pixIndex += yStride) {
        for (var x = rect.left; x < rect.right; x++) {
            var alpha1 = that.data[pixIndex + ALPHA_BYTE_OFFSET] * that.alpha / 100 | 0,
                alpha2 = fusion.data[pixIndex + ALPHA_BYTE_OFFSET] * fusion.alpha / 100 | 0,
                newAlpha = alpha1 + alpha2 - alpha1 * alpha2 / 255 | 0;

            if (newAlpha > 0) {
                var
                // This alpha is used when color1 > color2
                alpha12 = alpha2 * (alpha1 ^ 0xff) / newAlpha | 0,
                    invAlpha12 = alpha12 ^ 0xFF,

                // This alpha is used when color2 > color1
                alpha21 = alpha1 * (alpha2 ^ 0xff) / newAlpha | 0,
                    invAlpha21 = alpha21 ^ 0xFF;

                for (var i = 0; i < 3; i++, pixIndex++) {
                    var c1 = that.data[pixIndex],
                        c2 = fusion.data[pixIndex];

                    fusion.data[pixIndex] = (c2 >= c1 ? c1 * alpha21 + c2 * invAlpha21 : c2 * alpha12 + c1 * invAlpha12) / 255 | 0;
                }
                fusion.data[pixIndex++] = newAlpha;
            } else {
                pixIndex += BYTES_PER_PIXEL;
            }
        }
    }

    fusion.alpha = 100;
};

// When fusion is opaque
CPBlend.prototype.fusionWithLighten = function (that, fusion, rect) {
    var yStride = (that.width - rect.getWidth()) * BYTES_PER_PIXEL,
        pixIndex = that.offsetOfPixel(rect.left, rect.top);

    for (var y = rect.top; y < rect.bottom; y++, pixIndex += yStride) {
        for (var x = rect.left; x < rect.right; x++) {
            var alpha1 = that.data[pixIndex + ALPHA_BYTE_OFFSET] * that.alpha / 100 | 0,
                invAlpha1 = alpha1 ^ 0xff;

            for (var i = 0; i < 3; i++, pixIndex++) {
                var c1 = that.data[pixIndex],
                    c2 = fusion.data[pixIndex];

                fusion.data[pixIndex] = c2 >= c1 ? c2 : (c2 * invAlpha1 + c1 * alpha1) / 255;
            }
            pixIndex++; // Opacity unchanged (still 255)
        }
    }
};

// Darken Mode
// if B >= A: C = B*d + A*(1-d) and d = ab * (1-aa) / (aa + ab - aa*ab)
// if A > B: C = A*d + B*(1-d) and d = aa * (1-ab) / (aa + ab - aa*ab)

CPBlend.prototype.fusionWithDarkenFullAlpha = function (that, fusion, rect) {
    var yStride = (that.width - rect.getWidth()) * BYTES_PER_PIXEL,
        pixIndex = that.offsetOfPixel(rect.left, rect.top);

    for (var y = rect.top; y < rect.bottom; y++, pixIndex += yStride) {
        for (var x = rect.left; x < rect.right; x++) {
            var alpha1 = that.data[pixIndex + ALPHA_BYTE_OFFSET] * that.alpha / 100 | 0,
                alpha2 = fusion.data[pixIndex + ALPHA_BYTE_OFFSET] * fusion.alpha / 100 | 0,
                newAlpha = alpha1 + alpha2 - alpha1 * alpha2 / 255 | 0;

            if (newAlpha > 0) {
                var
                // This alpha is used when color1 > color2
                alpha12 = alpha1 * (alpha2 ^ 0xff) / newAlpha | 0,
                    invAlpha12 = alpha12 ^ 0xff | 0,

                // This alpha is used when color2 > color1
                alpha21 = alpha2 * (alpha1 ^ 0xff) / newAlpha | 0,
                    invAlpha21 = alpha21 ^ 0xff | 0;

                for (var i = 0; i < 3; i++, pixIndex++) {
                    var c1 = that.data[pixIndex],
                        c2 = fusion.data[pixIndex];

                    fusion.data[pixIndex] = (c2 >= c1 ? c2 * alpha21 + c1 * invAlpha21 : c1 * alpha12 + c2 * invAlpha12) / 255 | 0;
                }
                fusion.data[pixIndex++] = newAlpha;
            } else {
                pixIndex += BYTES_PER_PIXEL;
            }
        }
    }

    fusion.alpha = 100;
};

// When fusion is opaque
CPBlend.prototype.fusionWithDarken = function (that, fusion, rect) {
    var yStride = (that.width - rect.getWidth()) * BYTES_PER_PIXEL | 0,
        pixIndex = that.offsetOfPixel(rect.left, rect.top) | 0;

    for (var y = rect.top; y < rect.bottom; y++, pixIndex += yStride) {
        for (var x = rect.left; x < rect.right; x++) {
            var alpha1 = that.data[pixIndex + ALPHA_BYTE_OFFSET] * that.alpha / 100 | 0,
                invAlpha1 = alpha1 ^ 0xff;

            for (var i = 0; i < 3; i++, pixIndex++) {
                var c1 = that.data[pixIndex],
                    c2 = fusion.data[pixIndex];

                fusion.data[pixIndex] = c2 >= c1 ? (c2 * invAlpha1 + c1 * alpha1) / 255 : c2;
            }

            pixIndex++; // Alpha stays the same
        }
    }

    fusion.alpha = 100;
};

// Dodge Mode
//
// C = (aa*(1-ab)*A + (1-aa)*ab*B + aa*ab*B/(1-A)) / (aa + ab - aa*ab)

CPBlend.prototype.fusionWithDodgeFullAlpha = function (that, fusion, rect) {
    var yStride = (that.width - rect.getWidth()) * BYTES_PER_PIXEL,
        pixIndex = that.offsetOfPixel(rect.left, rect.top);

    for (var y = rect.top; y < rect.bottom; y++, pixIndex += yStride) {
        for (var x = rect.left; x < rect.right; x++) {
            var alpha1 = that.data[pixIndex + ALPHA_BYTE_OFFSET] * that.alpha / 100 | 0;

            if (alpha1 == 0) {
                pixIndex += BYTES_PER_PIXEL;
                continue;
            }

            var alpha2 = fusion.data[pixIndex + ALPHA_BYTE_OFFSET] * fusion.alpha / 100 | 0,
                newAlpha = alpha1 + alpha2 - alpha1 * alpha2 / 255 | 0;

            if (newAlpha > 0) {
                var alpha12 = alpha1 * alpha2 / 255 | 0,
                    alpha1n2 = alpha1 * (alpha2 ^ 0xff) / 255 | 0,
                    alphan12 = (alpha1 ^ 0xff) * alpha2 / 255 | 0;

                for (var i = 0; i < 3; i++, pixIndex++) {
                    var color1 = that.data[pixIndex],
                        color2 = fusion.data[pixIndex],
                        invColor1 = color1 ^ 0xFF;

                    fusion.data[pixIndex] = (color1 * alpha1n2 + color2 * alphan12 + alpha12 * (invColor1 == 0 ? 255 : Math.min(255, 255 * color2 / invColor1 | 0))) / newAlpha | 0;
                }
                fusion.data[pixIndex++] = newAlpha;
            } else {
                pixIndex += BYTES_PER_PIXEL;
            }
        }
    }

    fusion.alpha = 100;
};

// When fusion is opaque
CPBlend.prototype.fusionWithDodge = function (that, fusion, rect) {
    var yStride = (that.width - rect.getWidth()) * BYTES_PER_PIXEL,
        pixIndex = that.offsetOfPixel(rect.left, rect.top);

    for (var y = rect.top; y < rect.bottom; y++, pixIndex += yStride) {
        for (var x = rect.left; x < rect.right; x++) {
            var alpha1 = that.data[pixIndex + ALPHA_BYTE_OFFSET] * that.alpha / 100 | 0;

            if (alpha1 == 0) {
                pixIndex += BYTES_PER_PIXEL;
                continue;
            }

            var invAlpha1 = alpha1 ^ 0xff;

            for (var i = 0; i < 3; i++, pixIndex++) {
                var color1 = that.data[pixIndex],
                    color2 = fusion.data[pixIndex],
                    invColor1 = color1 ^ 0xFF;

                fusion.data[pixIndex] = (color2 * invAlpha1 + alpha1 * (invColor1 == 0 ? 255 : Math.min(255, 255 * color2 / invColor1 | 0))) / 255 | 0;
            }
            pixIndex++; // Alpha stays the same
        }
    }
};

// Burn Mode
//
// C = (aa*(1-ab)*A + (1-aa)*ab*B + aa*ab*(1-(1-B)/A)) / (aa + ab - aa*ab)

CPBlend.prototype.fusionWithBurnFullAlpha = function (that, fusion, rect) {
    var yStride = (that.width - rect.getWidth()) * BYTES_PER_PIXEL,
        pixIndex = that.offsetOfPixel(rect.left, rect.top);

    for (var y = rect.top; y < rect.bottom; y++, pixIndex += yStride) {
        for (var x = rect.left; x < rect.right; x++) {
            var alpha1 = that.data[pixIndex + ALPHA_BYTE_OFFSET] * that.alpha / 100 | 0;

            if (alpha1 == 0) {
                pixIndex += BYTES_PER_PIXEL;
                continue;
            }

            var alpha2 = fusion.data[pixIndex + ALPHA_BYTE_OFFSET] * fusion.alpha / 100 | 0,
                newAlpha = alpha1 + alpha2 - alpha1 * alpha2 / 255 | 0;

            if (newAlpha > 0) {
                var alpha12 = alpha1 * alpha2 / 255 | 0,
                    alpha1n2 = alpha1 * (alpha2 ^ 0xff) / 255 | 0,
                    alphan12 = (alpha1 ^ 0xff) * alpha2 / 255 | 0;

                for (var i = 0; i < 3; i++, pixIndex++) {
                    var color1 = that.data[pixIndex],
                        color2 = fusion.data[pixIndex],
                        invColor2 = color2 ^ 0xFF;

                    fusion.data[pixIndex] = (color1 * alpha1n2 + color2 * alphan12 + alpha12 * (color1 == 0 ? 0 : Math.min(255, 255 * invColor2 / color1) ^ 0xff)) / newAlpha | 0;
                }
                fusion.data[pixIndex++] = newAlpha;
            } else {
                pixIndex += BYTES_PER_PIXEL;
            }
        }
    }

    fusion.alpha = 100;
};

// When fusion is opaque
CPBlend.prototype.fusionWithBurn = function (that, fusion, rect) {
    var yStride = (that.width - rect.getWidth()) * BYTES_PER_PIXEL | 0,
        pixIndex = that.offsetOfPixel(rect.left, rect.top) | 0;

    for (var y = rect.top; y < rect.bottom; y++, pixIndex += yStride) {
        for (var x = rect.left; x < rect.right; x++) {
            var alpha1 = that.data[pixIndex + ALPHA_BYTE_OFFSET] * that.alpha / 100 | 0;

            if (alpha1 == 0) {
                pixIndex += BYTES_PER_PIXEL;
                continue;
            }

            var invAlpha1 = alpha1 ^ 0xff;

            for (var i = 0; i < 3; i++, pixIndex++) {
                var color1 = that.data[pixIndex],
                    color2 = fusion.data[pixIndex],
                    invColor2 = color2 ^ 0xFF;

                fusion.data[pixIndex] = (color2 * invAlpha1 + alpha1 * (color1 == 0 ? 0 : Math.min(255, 255 * invColor2 / color1) ^ 0xff)) / 255 | 0;
            }
            pixIndex++; // Alpha stays the same
        }
    }

    fusion.alpha = 100;
};

// Overlay Mode
// If B <= 0.5 C = (A*aa*(1-ab) + B*ab*(1-aa) + aa*ab*(2*A*B) / (aa + ab - aa*ab)
// If B > 0.5 C = (A*aa*(1-ab) + B*ab*(1-aa) + aa*ab*(1 - 2*(1-A)*(1-B)) / (aa + ab - aa*ab)

CPBlend.prototype.fusionWithOverlayFullAlpha = function (that, fusion, rect) {
    var yStride = (that.width - rect.getWidth()) * BYTES_PER_PIXEL,
        pixIndex = that.offsetOfPixel(rect.left, rect.top);

    for (var y = rect.top; y < rect.bottom; y++, pixIndex += yStride) {
        for (var x = rect.left; x < rect.right; x++) {
            var alpha1 = that.data[pixIndex + ALPHA_BYTE_OFFSET] * that.alpha / 100 | 0;

            if (alpha1 == 0) {
                pixIndex += BYTES_PER_PIXEL;
                continue;
            }

            var alpha2 = fusion.data[pixIndex + ALPHA_BYTE_OFFSET] * fusion.alpha / 100 | 0,
                newAlpha = alpha1 + alpha2 - alpha1 * alpha2 / 255 | 0;

            if (newAlpha > 0) {
                var alpha12 = alpha1 * alpha2 / 255 | 0,
                    alpha1n2 = alpha1 * (alpha2 ^ 0xff) / 255 | 0,
                    alphan12 = (alpha1 ^ 0xff) * alpha2 / 255 | 0;

                for (var i = 0; i < 3; i++, pixIndex++) {
                    var c1 = that.data[pixIndex],
                        c2 = fusion.data[pixIndex];

                    fusion.data[pixIndex] = (alpha1n2 * c1 + alphan12 * c2 + (c2 <= 127 ? alpha12 * 2 * c1 * c2 / 255 : alpha12 * (2 * (c1 ^ 0xff) * (c2 ^ 0xff) / 255 ^ 0xff))) / newAlpha | 0;
                }
                fusion.data[pixIndex++] = newAlpha;
            } else {
                pixIndex += BYTES_PER_PIXEL;
            }
        }
    }

    fusion.alpha = 100;
};

// When fusion is opaque
CPBlend.prototype.fusionWithOverlay = function (that, fusion, rect) {
    var yStride = (that.width - rect.getWidth()) * BYTES_PER_PIXEL | 0,
        pixIndex = that.offsetOfPixel(rect.left, rect.top) | 0;

    for (var y = rect.top; y < rect.bottom; y++, pixIndex += yStride) {
        for (var x = rect.left; x < rect.right; x++) {
            var alpha1 = that.data[pixIndex + ALPHA_BYTE_OFFSET] * that.alpha / 100 | 0;

            if (alpha1 == 0) {
                pixIndex += BYTES_PER_PIXEL;
                continue;
            }

            var alphan12 = alpha1 ^ 0xff;

            for (var i = 0; i < 3; i++, pixIndex++) {
                var c1 = that.data[pixIndex],
                    c2 = fusion.data[pixIndex];

                fusion.data[pixIndex] = (alphan12 * c2 + (c2 <= 127 ? alpha1 * 2 * c1 * c2 / 255 : alpha1 * (2 * (c1 ^ 0xff) * (c2 ^ 0xff) / 255 ^ 0xff))) / 255 | 0;
            }
            pixIndex++; // Alpha stays 255
        }
    }
};

// Hard Light Mode (same as Overlay with A and B swapped)
// If A <= 0.5 C = (A*aa*(1-ab) + B*ab*(1-aa) + aa*ab*(2*A*B) / (aa + ab - aa*ab)
// If A > 0.5 C = (A*aa*(1-ab) + B*ab*(1-aa) + aa*ab*(1 - 2*(1-A)*(1-B)) / (aa + ab - aa*ab)

CPBlend.prototype.fusionWithHardLightFullAlpha = function (that, fusion, rect) {
    var yStride = (that.width - rect.getWidth()) * BYTES_PER_PIXEL,
        pixIndex = that.offsetOfPixel(rect.left, rect.top);

    for (var y = rect.top; y < rect.bottom; y++, pixIndex += yStride) {
        for (var x = rect.left; x < rect.right; x++) {
            var alpha1 = that.data[pixIndex + ALPHA_BYTE_OFFSET] * that.alpha / 100 | 0;

            if (alpha1 == 0) {
                pixIndex += BYTES_PER_PIXEL;
                continue;
            }

            var alpha2 = fusion.data[pixIndex + ALPHA_BYTE_OFFSET] * fusion.alpha / 100 | 0,
                newAlpha = alpha1 + alpha2 - alpha1 * alpha2 / 255 | 0;

            if (newAlpha > 0) {
                var alpha12 = alpha1 * alpha2 / 255 | 0,
                    alpha1n2 = alpha1 * (alpha2 ^ 0xff) / 255 | 0,
                    alphan12 = (alpha1 ^ 0xff) * alpha2 / 255 | 0;

                for (var i = 0; i < 3; i++, pixIndex++) {
                    var c1 = that.data[pixIndex],
                        c2 = fusion.data[pixIndex];

                    fusion.data[pixIndex] = (alpha1n2 * c1 + alphan12 * c2 + (c1 <= 127 ? alpha12 * 2 * c1 * c2 / 255 : alpha12 * (2 * (c1 ^ 0xff) * (c2 ^ 0xff) / 255 ^ 0xff))) / newAlpha | 0;
                }
                fusion.data[pixIndex++] = newAlpha;
            } else {
                pixIndex += BYTES_PER_PIXEL;
            }
        }
    }

    fusion.alpha = 100;
};

// Soft Light Mode
// A < 0.5 => C = (2*A - 1) * (B - B^2) + B
// A > 0.5 => C = (2*A - 1) * (sqrt(B) - B) + B

CPBlend.prototype.fusionWithSoftLightFullAlpha = function (that, fusion, rect) {
    var yStride = (that.width - rect.getWidth()) * BYTES_PER_PIXEL,
        pixIndex = that.offsetOfPixel(rect.left, rect.top);

    for (var y = rect.top; y < rect.bottom; y++, pixIndex += yStride) {
        for (var x = rect.left; x < rect.right; x++) {
            var alpha1 = that.data[pixIndex + ALPHA_BYTE_OFFSET] * that.alpha / 100 | 0;

            if (alpha1 == 0) {
                pixIndex += BYTES_PER_PIXEL;
                continue;
            }

            var alpha2 = fusion.data[pixIndex + ALPHA_BYTE_OFFSET] * fusion.alpha / 100 | 0,
                newAlpha = alpha1 + alpha2 - alpha1 * alpha2 / 255 | 0;

            if (newAlpha > 0) {
                var alpha12 = alpha1 * alpha2 / 255 | 0,
                    alpha1n2 = alpha1 * (alpha2 ^ 0xff) / 255 | 0,
                    alphan12 = (alpha1 ^ 0xff) * alpha2 / 255 | 0;

                for (var i = 0; i < 3; i++, pixIndex++) {
                    var c1 = that.data[pixIndex],
                        c2 = fusion.data[pixIndex];

                    fusion.data[pixIndex] = (alpha1n2 * c1 + alphan12 * c2 + (c1 <= 127 ? alpha12 * ((2 * c1 - 255) * that.softLightLUTSquare[c2] / 255 + c2) : alpha12 * ((2 * c1 - 255) * that.softLightLUTSquareRoot[c2] / 255 + c2))) / newAlpha | 0;
                }
                fusion.data[pixIndex++] = newAlpha;
            } else {
                pixIndex += BYTES_PER_PIXEL;
            }
        }
    }

    fusion.alpha = 100;
};

// Vivid Light Mode
// A < 0.5 => C = 1 - (1-B) / (2*A)
// A > 0.5 => C = B / (2*(1-A))

CPBlend.prototype.fusionWithVividLightFullAlpha = function (that, fusion, rect) {
    var yStride = (that.width - rect.getWidth()) * BYTES_PER_PIXEL,
        pixIndex = that.offsetOfPixel(rect.left, rect.top);

    for (var y = rect.top; y < rect.bottom; y++, pixIndex += yStride) {
        for (var x = rect.left; x < rect.right; x++) {
            var alpha1 = that.data[pixIndex + ALPHA_BYTE_OFFSET] * that.alpha / 100 | 0;

            if (alpha1 == 0) {
                pixIndex += BYTES_PER_PIXEL;
                continue;
            }

            var alpha2 = fusion.data[pixIndex + ALPHA_BYTE_OFFSET] * fusion.alpha / 100 | 0,
                newAlpha = alpha1 + alpha2 - alpha1 * alpha2 / 255 | 0;

            if (newAlpha > 0) {
                var alpha12 = alpha1 * alpha2 / 255 | 0,
                    alpha1n2 = alpha1 * (alpha2 ^ 0xff) / 255 | 0,
                    alphan12 = (alpha1 ^ 0xff) * alpha2 / 255 | 0;

                for (var i = 0; i < 3; i++, pixIndex++) {
                    var c1 = that.data[pixIndex],
                        c2 = fusion.data[pixIndex];

                    fusion.data[pixIndex] = (alpha1n2 * c1 + alphan12 * c2 + (c1 <= 127 ? alpha12 * (c1 == 0 ? 0 : 255 - Math.min(255, (255 - c2) * 255 / (2 * c1))) : alpha12 * (c1 == 255 ? 255 : Math.min(255, c2 * 255 / (2 * (255 - c1)))))) / newAlpha | 0;
                }
                fusion.data[pixIndex++] = newAlpha;
            } else {
                pixIndex += BYTES_PER_PIXEL;
            }
        }
    }

    fusion.alpha = 100;
};

// Linear Light Mode
// C = B + 2*A -1

CPBlend.prototype.fusionWithLinearLightFullAlpha = function (that, fusion, rect) {
    var yStride = (that.width - rect.getWidth()) * BYTES_PER_PIXEL,
        pixIndex = that.offsetOfPixel(rect.left, rect.top);

    for (var y = rect.top; y < rect.bottom; y++, pixIndex += yStride) {
        for (var x = rect.left; x < rect.right; x++) {
            var alpha1 = that.data[pixIndex + ALPHA_BYTE_OFFSET] * that.alpha / 100 | 0;

            if (alpha1 == 0) {
                pixIndex += BYTES_PER_PIXEL;
                continue;
            }

            var alpha2 = fusion.data[pixIndex + ALPHA_BYTE_OFFSET] * fusion.alpha / 100 | 0,
                newAlpha = alpha1 + alpha2 - alpha1 * alpha2 / 255 | 0;

            if (newAlpha > 0) {
                var alpha12 = alpha1 * alpha2 / 255 | 0,
                    alpha1n2 = alpha1 * (alpha2 ^ 0xff) / 255 | 0,
                    alphan12 = (alpha1 ^ 0xff) * alpha2 / 255 | 0;

                for (var i = 0; i < 3; i++, pixIndex++) {
                    var c1 = that.data[pixIndex],
                        c2 = fusion.data[pixIndex];

                    fusion.data[pixIndex] = (alpha1n2 * c1 + alphan12 * c2 + alpha12 * Math.min(255, Math.max(0, c2 + 2 * c1 - 255))) / newAlpha | 0;
                }
                fusion.data[pixIndex++] = newAlpha;
            } else {
                pixIndex += BYTES_PER_PIXEL;
            }
        }
    }

    fusion.alpha = 100;
};

// Pin Light Mode
// B > 2*A => C = 2*A
// B < 2*A-1 => C = 2*A-1
// else => C = B

CPBlend.prototype.fusionWithPinLightFullAlpha = function (that, fusion, rect) {
    var yStride = (that.width - rect.getWidth()) * BYTES_PER_PIXEL,
        pixIndex = that.offsetOfPixel(rect.left, rect.top);

    for (var y = rect.top; y < rect.bottom; y++, pixIndex += yStride) {
        for (var x = rect.left; x < rect.right; x++) {
            var alpha1 = that.data[pixIndex + ALPHA_BYTE_OFFSET] * that.alpha / 100 | 0;

            if (alpha1 == 0) {
                pixIndex += BYTES_PER_PIXEL;
                continue;
            }

            var alpha2 = fusion.data[pixIndex + ALPHA_BYTE_OFFSET] * fusion.alpha / 100 | 0,
                newAlpha = alpha1 + alpha2 - alpha1 * alpha2 / 255 | 0;

            if (newAlpha > 0) {
                var alpha12 = alpha1 * alpha2 / 255 | 0,
                    alpha1n2 = alpha1 * (alpha2 ^ 0xff) / 255 | 0,
                    alphan12 = (alpha1 ^ 0xff) * alpha2 / 255 | 0;

                for (var i = 0; i < 3; i++, pixIndex++) {
                    var c1 = that.data[pixIndex],
                        c2 = fusion.data[pixIndex],
                        c3 = c2 >= 2 * c1 ? 2 * c1 : c2 <= 2 * c1 - 255 ? 2 * c1 - 255 : c2;

                    fusion.data[pixIndex] = (alpha1n2 * c1 + alphan12 * c2 + alpha12 * c3) / newAlpha | 0;
                }
                fusion.data[pixIndex++] = newAlpha;
            } else {
                pixIndex += BYTES_PER_PIXEL;
            }
        }
    }

    fusion.alpha = 100;
};
module.exports = exports["default"];

},{}],5:[function(require,module,exports){
/*
    ChickenPaint
    
    ChickenPaint is a translation of ChibiPaint from Java to JavaScript
    by Nicholas Sherlock / Chicken Smoothie.
    
    ChibiPaint is Copyright (c) 2006-2008 Marc Schefer

    ChickenPaint is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    ChickenPaint is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with ChickenPaint. If not, see <http://www.gnu.org/licenses/>.
*/

"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports["default"] = CPBrushInfo;

function CPBrushInfo(properties) {
    // Set brush setting fields with default values, then apply the supplied 'properties' on top
    for (var propName in CPBrushInfo.DEFAULTS) {
        if (CPBrushInfo.DEFAULTS.hasOwnProperty(propName)) {
            this[propName] = CPBrushInfo.DEFAULTS[propName];
        }
    }

    for (var propName in properties) {
        if (properties.hasOwnProperty(propName)) {
            this[propName] = properties[propName];
        }
    }
}

// Stroke modes
CPBrushInfo.SM_FREEHAND = 0;
CPBrushInfo.SM_LINE = 1;
CPBrushInfo.SM_BEZIER = 2;

// Brush dab types
CPBrushInfo.B_ROUND_PIXEL = 0;
CPBrushInfo.B_ROUND_AA = 1;
CPBrushInfo.B_ROUND_AIRBRUSH = 2;
CPBrushInfo.B_SQUARE_PIXEL = 3;
CPBrushInfo.B_SQUARE_AA = 4;

// painting modes
CPBrushInfo.M_PAINT = 0;
CPBrushInfo.M_ERASE = 1;
CPBrushInfo.M_DODGE = 2;
CPBrushInfo.M_BURN = 3;
CPBrushInfo.M_WATER = 4;
CPBrushInfo.M_BLUR = 5;
CPBrushInfo.M_SMUDGE = 6;
CPBrushInfo.M_OIL = 7;

CPBrushInfo.DEFAULTS = {
    isAA: false, isAirbrush: false,
    minSpacing: 0, spacing: 0,

    pressureSize: true,
    pressureAlpha: false,
    pressureScattering: false,

    type: 0, paintMode: 0,
    strokeMode: CPBrushInfo.SM_FREEHAND,
    resat: 1.0, bleed: 0.0,

    texture: 1.0,

    // "cur" values are current brush settings (once tablet pressure and stuff is applied)
    size: 0, curSize: 0,
    alpha: 0, curAlpha: 0,
    scattering: 0.0, curScattering: 0,
    squeeze: 0.0, curSqueeze: 0,
    angle: Math.PI, curAngle: 0,

    smoothing: 0.0
};

CPBrushInfo.prototype.applyPressure = function (pressure) {
    // FIXME: no variable size for smudge and oil :(
    if (this.pressureSize && this.paintMode != CPBrushInfo.M_SMUDGE && this.paintMode != CPBrushInfo.M_OIL) {
        this.curSize = Math.max(0.1, this.size * pressure);
    } else {
        this.curSize = Math.max(0.1, this.size);
    }

    // FIXME: what is the point of doing that?
    if (this.curSize > 16) {
        this.curSize = Math.floor(this.curSize);
    }

    this.curAlpha = this.pressureAlpha ? Math.floor(this.alpha * Math.min(pressure, 1.0)) : this.alpha;
    this.curSqueeze = this.squeeze;
    this.curAngle = this.angle;
    this.curScattering = this.scattering * this.curSize * (this.pressureScattering ? pressure : 1.0);
};

CPBrushInfo.prototype.clone = function () {
    return new CPBrushInfo(this);
};
module.exports = exports["default"];

},{}],6:[function(require,module,exports){
/*
    ChickenPaint
    
    ChickenPaint is a translation of ChibiPaint from Java to JavaScript
    by Nicholas Sherlock / Chicken Smoothie.
    
    ChibiPaint is Copyright (c) 2006-2008 Marc Schefer

    ChickenPaint is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    ChickenPaint is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with ChickenPaint. If not, see <http://www.gnu.org/licenses/>.
*/

"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports["default"] = CPBrushManager;

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

var _CPBrushInfo = require("./CPBrushInfo");

var _CPBrushInfo2 = _interopRequireDefault(_CPBrushInfo);

function CPBrushManager() {
    var MAX_SQUEEZE = 10,
        BRUSH_MAX_DIM = 201,
        BRUSH_AA_MAX_DIM = 202;

    /*CPBrushDab {
        // the brush
        Uint8Array brush;
        int width, height;
        
        // and where and how to apply it
        int x, y, alpha;
    }*/

    var brush = new Uint8Array(BRUSH_MAX_DIM * BRUSH_MAX_DIM),
        brushAA = new Uint8Array(BRUSH_AA_MAX_DIM * BRUSH_AA_MAX_DIM),
        cacheBrush = null,
        cacheSize,
        cacheSqueeze,
        cacheAngle,
        cacheType,
        that = this;

    /**
     * Shift a brush by a positive sub-pixel amount (dx, dy) [0..1), and return the new brush. 
     * 
     * The resulting brush array is 1 pixel larger than the original one in both dimensions.
     */
    function getBrushWithAA(brushInfo, dx, dy) {
        var nonAABrush = getBrush(brushInfo),
            intSize = Math.ceil(brushInfo.curSize),
            intSizeAA = Math.ceil(brushInfo.curSize) + 1;

        for (var x = 0; x < intSizeAA * intSizeAA; x++) {
            brushAA[x] = 0;
        }

        var invdx_invdy = (1 - dx) * (1 - dy),
            dx_invdy = dx * (1 - dy),
            dx_dy = dx * dy,
            invdx_dy = (1 - dx) * dy,
            srcIndex = 0,
            dstIndex = 0;

        for (var y = 0; y < intSize; y++) {
            for (var x = 0; x < intSize; x++) {
                var brushAlpha = nonAABrush[srcIndex];

                /* 
                 * Use a weighted sum to shift the source pixels's position by a sub-pixel amount dx, dy and accumulate
                 * it into the final brushAA array.
                 */
                brushAA[dstIndex] += ~ ~(brushAlpha * invdx_invdy);
                brushAA[dstIndex + 1] += ~ ~(brushAlpha * dx_invdy);
                brushAA[dstIndex + 1 + intSizeAA] += ~ ~(brushAlpha * dx_dy);
                brushAA[dstIndex + intSizeAA] += ~ ~(brushAlpha * invdx_dy);

                srcIndex++;
                dstIndex++;
            }
            dstIndex += intSizeAA - intSize;
        }

        return brushAA;
    }

    function buildBrush(brush, brushInfo) {
        var intSize = Math.ceil(brushInfo.curSize),
            center = intSize / 2.0,
            sqrRadius = brushInfo.curSize / 2 * (brushInfo.curSize / 2),
            xFactor = 1.0 + brushInfo.curSqueeze * MAX_SQUEEZE,
            cosA = Math.cos(brushInfo.curAngle),
            sinA = Math.sin(brushInfo.curAngle),
            offset = 0;

        for (var j = 0; j < intSize; j++) {
            for (var i = 0; i < intSize; i++) {
                var x = i + 0.5 - center,
                    y = j + 0.5 - center,
                    dx = (x * cosA - y * sinA) * xFactor,
                    dy = y * cosA + x * sinA,
                    sqrDist = dx * dx + dy * dy;

                if (sqrDist <= sqrRadius) {
                    brush[offset++] = 0xFF;
                } else {
                    brush[offset++] = 0;
                }
            }
        }

        return brush;
    }

    function buildBrushAA(brush, brushInfo) {
        var intSize = Math.ceil(brushInfo.curSize),
            center = intSize / 2.0,
            sqrRadius = brushInfo.curSize / 2 * (brushInfo.curSize / 2),
            sqrRadiusInner = (brushInfo.curSize - 2) / 2 * ((brushInfo.curSize - 2) / 2),
            sqrRadiusOuter = (brushInfo.curSize + 2) / 2 * ((brushInfo.curSize + 2) / 2),
            xFactor = 1.0 + brushInfo.curSqueeze * MAX_SQUEEZE,
            cosA = Math.cos(brushInfo.curAngle),
            sinA = Math.sin(brushInfo.curAngle),
            offset = 0;

        for (var j = 0; j < intSize; j++) {
            for (var i = 0; i < intSize; i++) {
                var x = i + 0.5 - center,
                    y = j + 0.5 - center,
                    dx = (x * cosA - y * sinA) * xFactor,
                    dy = y * cosA + x * sinA,
                    sqrDist = dx * dx + dy * dy;

                if (sqrDist <= sqrRadiusInner) {
                    brush[offset++] = 0xFF;
                } else if (sqrDist > sqrRadiusOuter) {
                    brush[offset++] = 0;
                } else {
                    var count = 0;

                    for (var oy = 0; oy < 4; oy++) {
                        for (var ox = 0; ox < 4; ox++) {
                            x = i + ox * (1.0 / 4.0) - center;
                            y = j + oy * (1.0 / 4.0) - center;
                            dx = (x * cosA - y * sinA) * xFactor;
                            dy = y * cosA + x * sinA;

                            sqrDist = dx * dx + dy * dy;
                            if (sqrDist <= sqrRadius) {
                                count += 1;
                            }
                        }
                    }
                    brush[offset++] = Math.min(count * 16, 255);
                }
            }
        }

        return brush;
    }

    function buildBrushSquare(brush, brushInfo) {
        var intSize = Math.ceil(brushInfo.curSize),
            center = intSize / 2.0,
            size = brushInfo.curSize * Math.sin(Math.PI / 4),
            sizeX = size / 2 / (1.0 + brushInfo.curSqueeze * MAX_SQUEEZE),
            sizeY = size / 2,
            cosA = Math.cos(brushInfo.curAngle),
            sinA = Math.sin(brushInfo.curAngle),
            offset = 0;

        for (var j = 0; j < intSize; j++) {
            for (var i = 0; i < intSize; i++) {
                var x = i + 0.5 - center,
                    y = j + 0.5 - center,
                    dx = Math.abs(x * cosA - y * sinA),
                    dy = Math.abs(y * cosA + x * sinA);

                if (dx <= sizeX && dy <= sizeY) {
                    brush[offset++] = 0xFF;
                } else {
                    brush[offset++] = 0;
                }
            }
        }

        return brush;
    }

    function buildBrushSquareAA(brush, brushInfo) {
        var intSize = Math.ceil(brushInfo.curSize),
            center = intSize / 2.0,
            size = brushInfo.curSize * Math.sin(Math.PI / 4),
            sizeX = size / 2 / (1.0 + brushInfo.curSqueeze * MAX_SQUEEZE),
            sizeY = size / 2,
            sizeXInner = sizeX - 1,
            sizeYInner = sizeY - 1,
            sizeXOuter = sizeX + 1,
            sizeYOuter = sizeY + 1,
            cosA = Math.cos(brushInfo.curAngle),
            sinA = Math.sin(brushInfo.curAngle),
            offset = 0;

        for (var j = 0; j < intSize; j++) {
            for (var i = 0; i < intSize; i++) {
                var x = i + 0.5 - center,
                    y = j + 0.5 - center,
                    dx = Math.abs(x * cosA - y * sinA),
                    dy = Math.abs(y * cosA + x * sinA);

                if (dx <= sizeXInner && dy <= sizeYInner) {
                    brush[offset++] = 0xFF;
                } else if (dx > sizeXOuter || dy > sizeYOuter) {
                    brush[offset++] = 0;
                } else {
                    var count = 0;

                    for (var oy = 0; oy < 4; oy++) {
                        for (var ox = 0; ox < 4; ox++) {
                            x = i + ox * (1.0 / 4.0) - center;
                            y = j + oy * (1.0 / 4.0) - center;
                            dx = Math.abs(x * cosA - y * sinA);
                            dy = Math.abs(y * cosA + x * sinA);

                            if (dx <= sizeX && dy <= sizeY) {
                                count++;
                            }
                        }
                    }
                    brush[offset++] = Math.min(count * 16, 255);
                }
            }
        }

        return brush;
    }

    function buildBrushSoft(brush, brushInfo) {
        var intSize = Math.ceil(brushInfo.curSize),
            center = intSize / 2.0,
            sqrRadius = brushInfo.curSize / 2 * (brushInfo.curSize / 2),
            xFactor = 1.0 + brushInfo.curSqueeze * MAX_SQUEEZE,
            cosA = Math.cos(brushInfo.curAngle),
            sinA = Math.sin(brushInfo.curAngle),
            offset = 0;

        for (var j = 0; j < intSize; j++) {
            for (var i = 0; i < intSize; i++) {
                var x = i + 0.5 - center,
                    y = j + 0.5 - center,
                    dx = (x * cosA - y * sinA) * xFactor,
                    dy = y * cosA + x * sinA,
                    sqrDist = dx * dx + dy * dy;

                if (sqrDist <= sqrRadius) {
                    brush[offset++] = ~ ~(255 * (1 - sqrDist / sqrRadius));
                } else {
                    brush[offset++] = 0;
                }
            }
        }

        return brush;
    }

    /**
     * Build and return a brush that conforms to the given brush settings.
     * 
     * @returns a Uint8Array
     */
    function getBrush(brushInfo) {
        if (cacheBrush != null && brushInfo.curSize == cacheSize && brushInfo.curSqueeze == cacheSqueeze && brushInfo.curAngle == cacheAngle && brushInfo.type == cacheType) {
            return cacheBrush;
        }

        switch (brushInfo.type) {
            case _CPBrushInfo2["default"].B_ROUND_AIRBRUSH:
                brush = buildBrushSoft(brush, brushInfo);
                break;
            case _CPBrushInfo2["default"].B_ROUND_AA:
                brush = buildBrushAA(brush, brushInfo);
                break;
            case _CPBrushInfo2["default"].B_ROUND_PIXEL:
                brush = buildBrush(brush, brushInfo);
                break;
            case _CPBrushInfo2["default"].B_SQUARE_AA:
                brush = buildBrushSquareAA(brush, brushInfo);
                break;
            case _CPBrushInfo2["default"].B_SQUARE_PIXEL:
                brush = buildBrushSquare(brush, brushInfo);
                break;
        }

        cacheBrush = brush;
        cacheSize = brushInfo.curSize;
        cacheType = brushInfo.type;
        cacheSqueeze = brushInfo.curSqueeze;
        cacheAngle = brushInfo.curAngle;

        return brush;
    }

    function applyTexture(dab, textureAmount) {
        var amount = Math.floor(textureAmount * 255),
            texture = that.texture,
            textureX = dab.x % texture.width,
            textureY = dab.y % texture.height,
            brushPos = 0,
            texturePos,
            textureEOL;

        if (textureX < 0) {
            textureX += texture.width;
        }

        if (textureY < 0) {
            textureY += texture.height;
        }

        for (var y = 0; y < dab.height; y++) {
            texturePos = textureY * texture.width + textureX;
            textureEOL = textureY * texture.width + texture.width;

            for (var x = 0; x < dab.width; x++) {
                var brushValue = dab.brush[brushPos],
                    textureValue = texture.data[texturePos];

                dab.brush[brushPos] = ~ ~(brushValue * (textureValue * amount / 255 ^ 0xff) / 255);

                brushPos++;

                texturePos++;
                if (texturePos == textureEOL) {
                    // Wrap to left side of texture
                    texturePos -= texture.width;
                }
            }

            textureY++;
            if (textureY == texture.height) {
                textureY = 0;
            }
        }
    }

    /**
     * @param x float
     * @param y float
     * brushInfo - a CPBrushInfo object
     */
    this.getDab = function (x, y, brushInfo) {
        var dab = {
            alpha: brushInfo.curAlpha,
            width: Math.ceil(brushInfo.curSize),
            height: Math.ceil(brushInfo.curSize)
        };

        // FIXME: I don't like this special case for ROUND_PIXEL
        // it would be better to have brush presets for working with pixels
        var useAA = brushInfo.isAA && brushInfo.type != _CPBrushInfo2["default"].B_ROUND_PIXEL;

        if (useAA) {
            dab.width++;
            dab.height++;
        }

        var nx = x - dab.width / 2.0 + 0.5,
            ny = y - dab.height / 2.0 + 0.5;

        // this is necessary as Java uses convert towards zero float to int conversion
        if (nx < 0) {
            nx -= 1;
        }
        if (ny < 0) {
            ny -= 1;
        }

        if (useAA) {
            var dx = Math.abs(nx - ~ ~nx),
                dy = Math.abs(ny - ~ ~ny);

            dab.brush = getBrushWithAA(brushInfo, dx, dy);
        } else {
            dab.brush = getBrush(brushInfo);
        }

        dab.x = ~ ~nx;
        dab.y = ~ ~ny;

        if (brushInfo.texture > 0.0 && this.texture != null) {
            // we need a brush bitmap that can be modified everytime
            // the one in "brush" can be kept in cache so if we are using it, make a copy
            if (dab.brush == brush) {
                brushAA.set(brush);
                dab.brush = brushAA;
            }
            applyTexture(dab, brushInfo.texture);
        }

        return dab;
    };

    this.setTexture = function (texture) {
        this.texture = texture;
    };
}

module.exports = exports["default"];

},{"./CPBrushInfo":5}],7:[function(require,module,exports){
/*
    ChickenPaint

    ChickenPaint is a translation of ChibiPaint from Java to JavaScript
    by Nicholas Sherlock / Chicken Smoothie.

    ChibiPaint is Copyright (c) 2006-2008 Marc Schefer

    ChickenPaint is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    ChickenPaint is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with ChickenPaint. If not, see <http://www.gnu.org/licenses/>.
*/

"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports["default"] = CPChibiFile;

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

var _CPArtwork = require("./CPArtwork");

var _CPArtwork2 = _interopRequireDefault(_CPArtwork);

var _CPLayer = require("./CPLayer");

var _CPLayer2 = _interopRequireDefault(_CPLayer);

var _CPColorBmp = require("./CPColorBmp");

var _CPColorBmp2 = _interopRequireDefault(_CPColorBmp);

var _utilArrayDataStream = require("../util/ArrayDataStream");

var _utilArrayDataStream2 = _interopRequireDefault(_utilArrayDataStream);

function CPChibiFile() {

    function CPChibiHeader(stream, chunk) {
        this.version = stream.readU32BE();
        this.width = stream.readU32BE();
        this.height = stream.readU32BE();
        this.layersNb = stream.readU32BE();
    }

    CPChibiHeader.FIXED_HEADER_LENGTH = 4 * 4;

    function CPChibiChunkHeader(stream) {
        var chunkType = new Array(4);

        for (var i = 0; i < chunkType.length; i++) {
            chunkType[i] = String.fromCharCode(stream.readByte());
        }

        this.chunkType = chunkType.join("");
        this.chunkSize = stream.readU32BE();

        if (stream.eof) {
            throw "Truncated chunk";
        }
    }

    function CPChibiLayerChunkHeader() {
        var payloadOffset, titleLength;

        this.readFixedHeader = function (stream) {
            payloadOffset = stream.readU32BE();

            this.blendMode = stream.readU32BE();
            this.alpha = stream.readU32BE();
            this.visible = (stream.readU32BE() & 1) != 0;

            titleLength = stream.readU32BE();
        };

        /* 
         * After reading the fixed header, use this function to find out how many more bytes of header
         * need to be read.
         */
        this.getVariableHeaderLen = function () {
            return payloadOffset - CPChibiLayerChunkHeader.FIXED_HEADER_LENGTH;
        };

        this.getTotalHeaderLen = function () {
            return CPChibiLayerChunkHeader.FIXED_HEADER_LENGTH + this.getVariableHeaderLen();
        };

        this.readVariableHeader = function (stream) {
            this.name = stream.readString(titleLength);

            // Skip to the pixel data (allows additional header fields to be added that we don't yet support)
            stream.skip(payloadOffset - titleLength - CPChibiLayerChunkHeader.FIXED_HEADER_LENGTH);
        };
    }

    // The size of the initial, fixed-length portion of the header
    CPChibiLayerChunkHeader.FIXED_HEADER_LENGTH = 4 * 5;

    var CHI_MAGIC = "CHIBIOEK",
        CHUNK_TAG_HEAD = "HEAD",
        CHUNK_TAG_LAYER = "LAYR",
        CHUNK_TAG_END = "ZEND",
        BYTES_PER_PIXEL = _CPColorBmp2["default"].BYTES_PER_PIXEL,
        ALPHA_BYTE_OFFSET = _CPColorBmp2["default"].ALPHA_BYTE_OFFSET,
        RED_BYTE_OFFSET = _CPColorBmp2["default"].RED_BYTE_OFFSET,
        GREEN_BYTE_OFFSET = _CPColorBmp2["default"].GREEN_BYTE_OFFSET,
        BLUE_BYTE_OFFSET = _CPColorBmp2["default"].BLUE_BYTE_OFFSET;

    function serializeEndChunk() {
        var buffer = new Uint8Array(CHUNK_TAG_END.length + 4),
            stream = new _utilArrayDataStream2["default"](buffer);

        stream.writeString(CHUNK_TAG_END);
        stream.writeU32BE(0);

        return stream.getAsDataArray();
    }

    function serializeHeaderChunk(artwork) {
        var buffer = new Uint8Array(CHUNK_TAG_HEAD.length + 4 * 5),
            stream = new _utilArrayDataStream2["default"](buffer);

        stream.writeString(CHUNK_TAG_HEAD);
        stream.writeU32BE(16); // ChunkSize

        stream.writeU32BE(0); // Current Version: Major: 0 Minor: 0
        stream.writeU32BE(artwork.width);
        stream.writeU32BE(artwork.height);
        stream.writeU32BE(artwork.getLayerCount());

        return stream.getAsDataArray();
    }

    function serializeLayerChunk(layer) {
        var chunkSize = 20 + layer.name.length + layer.data.length,
            buffer = new Uint8Array(CHUNK_TAG_LAYER.length + 4 + chunkSize),
            stream = new _utilArrayDataStream2["default"](buffer),
            pos;

        stream.writeString(CHUNK_TAG_LAYER); // Chunk ID
        stream.writeU32BE(chunkSize); // ChunkSize

        stream.writeU32BE(20 + layer.name.length); // Offset to layer data from start of header

        stream.writeU32BE(layer.blendMode);
        stream.writeU32BE(layer.alpha);
        stream.writeU32BE(layer.visible ? 1 : 0); // layer visibility and future flags

        stream.writeU32BE(layer.name.length);
        stream.writeString(layer.name);

        // Convert layer bytes from RGBA to ARGB order to match the Chibi specs
        pos = stream.pos;
        for (var i = 0; i < layer.data.length; i += BYTES_PER_PIXEL) {
            buffer[pos++] = layer.data[i + ALPHA_BYTE_OFFSET];
            buffer[pos++] = layer.data[i + RED_BYTE_OFFSET];
            buffer[pos++] = layer.data[i + GREEN_BYTE_OFFSET];
            buffer[pos++] = layer.data[i + BLUE_BYTE_OFFSET];
        }

        return buffer;
    }

    /**
     * Serialize the given artwork to Chibifile format. Returns a promise which resolves to the serialized Blob.
     */
    this.serialize = function (artwork) {
        return new Promise(function (resolve, reject) {
            var deflator = new window.pako.Deflate({
                level: 7
            }),
                blobParts = [],
                magic = new Uint8Array(CHI_MAGIC.length);

            // The magic file signature is not ZLIB compressed:
            for (var i = 0; i < CHI_MAGIC.length; i++) {
                magic[i] = CHI_MAGIC.charCodeAt(i);
            }
            blobParts.push(magic);

            // The rest gets compressed
            deflator.push(serializeHeaderChunk(artwork), false);

            var layers = artwork.getLayers(),
                i = 0;

            // Insert a settimeout between each serialized layer, so we can maintain browser responsiveness

            function serializeLayer() {
                if (i == layers.length) {
                    deflator.push(serializeEndChunk(artwork), true);

                    blobParts.push(deflator.result);

                    resolve(new Blob(blobParts, { type: "application/octet-stream" }));
                } else {
                    deflator.push(serializeLayerChunk(layers[i++]), false);

                    setTimeout(serializeLayer, 10);
                }
            }

            setTimeout(serializeLayer, 10);
        });
    };

    function hasChibiMagicMarker(array) {
        for (var i = 0; i < CHI_MAGIC.length; i++) {
            if (array[i] != CHI_MAGIC.charCodeAt(i)) {
                return false;
            }
        }

        return true;
    }

    /**
     * Concat two Uint8Arrays to make a new one and return it.
     * 
     * Either one may be set to null. If either one is null, the other is returned. If both are null, null is
     * returned.
     */
    function concatBuffers(one, two) {
        if (one == null || one.length == 0) {
            return two;
        }
        if (two == null || two.length == 0) {
            return one;
        }

        var result = new Uint8Array(one.length + two.length);

        result.set(one, 0);
        result.set(two, one.length);

        return result;
    }

    /**
     * Attempt to load a chibifile from the given arraybuffer.
     *
     * @returns A CPArtwork on success, or null on failure.
     */
    this.read = function (arrayBuffer) {
        var STATE_WAIT_FOR_CHUNK = 0,
            STATE_DECODE_IMAGE_HEADER = 1,
            STATE_DECODE_LAYER_HEADER_FIXED = 2,
            STATE_DECODE_LAYER_HEADER_VARIABLE = 3,
            STATE_DECODE_LAYER = 4,
            STATE_SKIP_TRAILING_CHUNK_BYTES = 5,
            STATE_SUCCESS = 6,
            STATE_FATAL = 10;

        var pako = new window.pako.Inflate({}),
            state = STATE_WAIT_FOR_CHUNK,
            artwork = null,
            layerHeader,
            layer,
            layerBytesRead,
            layerBytesTotal,
            skipCount,
            headerChunk = null,
            header = null,
            chunk = null,
            buffer = null;

        /**
         * Decode A,R,G,B pixels from the given buffer into the R,G,B,A pixel array given by layerPix.
         * 
         * The layerBytesRead and layerBytesTotal variables are used to keep track of the decode process and to 
         * limit the number of bytes read, respectively.
         * 
         * Returns the buffer with the read bytes removed from the front, or null if the buffer was read in its entirety.
         */
        function decodePixels(buffer, layerPix) {
            var subpixel = layerBytesRead % BYTES_PER_PIXEL,
                dstPixelStartOffset = layerBytesRead - subpixel,
                bufferPos = 0,

            // Map from source channel order to CPLayer's dest order
            channelMap = [ALPHA_BYTE_OFFSET, RED_BYTE_OFFSET, GREEN_BYTE_OFFSET, BLUE_BYTE_OFFSET];

            // The first pixel might be a partial one since we might be continuing a pixel split over buffers
            for (; subpixel < BYTES_PER_PIXEL && bufferPos < buffer.length; subpixel++) {
                layerPix[dstPixelStartOffset + channelMap[subpixel]] = buffer[bufferPos];
                layerBytesRead++;
                bufferPos++;
            }

            // How many more pixels are we to read in this buffer?
            var bytesRemain = Math.min(buffer.length - bufferPos, layerBytesTotal - layerBytesRead) | 0,
                fullPixelsRemain = bytesRemain / BYTES_PER_PIXEL | 0,
                subpixelsRemain = bytesRemain % BYTES_PER_PIXEL;

            for (var i = 0; i < fullPixelsRemain; i++) {
                layerPix[layerBytesRead + ALPHA_BYTE_OFFSET] = buffer[bufferPos];
                layerPix[layerBytesRead + RED_BYTE_OFFSET] = buffer[bufferPos + 1];
                layerPix[layerBytesRead + GREEN_BYTE_OFFSET] = buffer[bufferPos + 2];
                layerPix[layerBytesRead + BLUE_BYTE_OFFSET] = buffer[bufferPos + 3];
                layerBytesRead += BYTES_PER_PIXEL;
                bufferPos += BYTES_PER_PIXEL;
            }

            // Read a fractional pixel at the end of the buffer
            dstPixelStartOffset = layerBytesRead;
            for (subpixel = 0; subpixel < subpixelsRemain; subpixel++) {
                layerPix[dstPixelStartOffset + channelMap[subpixel]] = buffer[bufferPos];
                layerBytesRead++;
                bufferPos++;
            }

            if (bufferPos < buffer.length) {
                // Layer was completed before the end of the buffer, there is buffer left over for someone else to use
                return buffer.subarray(bufferPos);
            } else {
                // Buffer exhausted
                return null;
            }
        }

        function processBlock(block) {
            var stream;

            // Add a loop here so we can re-enter the switch with 'continue'
            while (true) {
                switch (state) {
                    case STATE_WAIT_FOR_CHUNK:
                        buffer = concatBuffers(buffer, block);
                        block = null;

                        // Wait for whole chunk header to become available
                        if (buffer.length < 8) {
                            break;
                        }

                        // Decode chunk header
                        stream = new _utilArrayDataStream2["default"](buffer);
                        chunk = new CPChibiChunkHeader(stream);

                        // Remove the chunk header from the start of the buffer
                        buffer = buffer.subarray(stream.pos);

                        if (headerChunk) {
                            if (chunk.chunkType == CHUNK_TAG_END) {
                                state = STATE_SUCCESS;
                                break;
                            } else if (chunk.chunkType == CHUNK_TAG_LAYER) {
                                state = STATE_DECODE_LAYER_HEADER_FIXED;
                            } else {
                                console.log("Unknown chunk type '" + chunk.chunkType + "', attempting to skip...");

                                block = buffer;
                                buffer = null;

                                skipCount = chunk.chunkSize;
                                state = STATE_SKIP_TRAILING_CHUNK_BYTES;
                            }
                        } else if (chunk.chunkType == CHUNK_TAG_HEAD) {
                            headerChunk = chunk;

                            // Try to decode the header
                            state = STATE_DECODE_IMAGE_HEADER;
                            continue;
                        } else {
                            // File didn't start with image header chunk
                            state = STATE_FATAL;
                        }
                        break;
                    case STATE_DECODE_IMAGE_HEADER:
                        buffer = concatBuffers(buffer, block);
                        block = null;

                        // Wait for whole chunk to be available
                        if (buffer.length < headerChunk.chunkSize) {
                            break;
                        }

                        stream = new _utilArrayDataStream2["default"](buffer);
                        header = new CPChibiHeader(stream, headerChunk);

                        if (header.version >>> 16 > 0) {
                            state = STATE_FATAL; // the file version is higher than what we can deal with, bail out
                            break;
                        }

                        artwork = new _CPArtwork2["default"](header.width, header.height);

                        block = buffer;
                        buffer = null;

                        skipCount = headerChunk.chunkSize; // Skip the header chunk along with any trailing bytes
                        state = STATE_SKIP_TRAILING_CHUNK_BYTES;
                        continue;
                        break;
                    case STATE_DECODE_LAYER_HEADER_FIXED:
                        buffer = concatBuffers(buffer, block);
                        block = null;

                        // Wait for first part of header to arrive
                        if (buffer.length < CPChibiLayerChunkHeader.FIXED_HEADER_LENGTH) {
                            break;
                        }

                        layerHeader = new CPChibiLayerChunkHeader();

                        stream = new _utilArrayDataStream2["default"](buffer);
                        layerHeader.readFixedHeader(stream);

                        buffer = buffer.subarray(stream.pos);

                        state = STATE_DECODE_LAYER_HEADER_VARIABLE;
                        continue;
                        break;
                    case STATE_DECODE_LAYER_HEADER_VARIABLE:
                        buffer = concatBuffers(buffer, block);
                        block = null;

                        // Wait for variable part of header to arrive
                        if (buffer.length < layerHeader.getVariableHeaderLen()) {
                            break;
                        }

                        stream = new _utilArrayDataStream2["default"](buffer);
                        layerHeader.readVariableHeader(stream);

                        buffer = buffer.subarray(stream.pos);

                        layer = new _CPLayer2["default"](header.width, header.height, layerHeader.name);
                        layer.blendMode = layerHeader.blendMode;
                        layer.alpha = layerHeader.alpha;
                        layer.visible = layerHeader.visible;

                        layerBytesRead = 0;
                        layerBytesTotal = header.width * header.height * BYTES_PER_PIXEL;

                        /* 
                         * While decoding layers, we won't keep a persistent buffer around, so if we have any
                         * bytes left over, provide them to the next state as if they were a newly inflated block.
                         */
                        block = buffer;
                        buffer = null;

                        state = STATE_DECODE_LAYER;
                        continue;
                        break;
                    case STATE_DECODE_LAYER:
                        /* 
                         * When decoding layer data, we never concat blocks together, we are capable of decoding
                         * partial pixels that get split over block boundaries. So we don't use 'buffer' to accumulate
                         * data, and only read from incoming 'block's.
                         */
                        if (block != null) {
                            block = decodePixels(block, layer.data);

                            if (layerBytesRead >= layerBytesTotal) {
                                artwork.addLayerObject(layer);

                                // Skip any trailing bytes in the layer chunk
                                skipCount = chunk.chunkSize - layerHeader.getTotalHeaderLen() - layerBytesTotal;
                                state = STATE_SKIP_TRAILING_CHUNK_BYTES;
                                continue;
                            }
                        }
                        break;
                    case STATE_SKIP_TRAILING_CHUNK_BYTES:
                        if (block) {
                            if (skipCount < block.length) {
                                block = block.subarray(skipCount);
                                skipCount = 0;
                            } else {
                                skipCount -= block.length;
                                block = null;
                            }
                        }

                        if (skipCount == 0) {
                            state = STATE_WAIT_FOR_CHUNK;
                            continue;
                        }
                        break;
                }

                break;
            }
        }

        arrayBuffer = new Uint8Array(arrayBuffer);

        if (!hasChibiMagicMarker(arrayBuffer)) {
            return null; // not a ChibiPaint file
        }

        // Remove the magic header
        arrayBuffer = arrayBuffer.subarray(CHI_MAGIC.length);

        pako.onData = processBlock;

        pako.onEnd = function (status) {
            if (status === 0 && state == STATE_SUCCESS) {
                artwork.setActiveLayerIndex(artwork.getTopmostVisibleLayer());

                this.result = artwork;
            } else {
                console.log("Fatal error decoding ChibiFile");

                this.result = null;
            }
        };

        // Begin decompression/decoding
        pako.push(arrayBuffer);

        return pako.result;
    };
}

module.exports = exports["default"];

},{"../util/ArrayDataStream":45,"./CPArtwork":2,"./CPColorBmp":9,"./CPLayer":11}],8:[function(require,module,exports){
/*
    ChickenPaint

    ChickenPaint is a translation of ChibiPaint from Java to JavaScript
    by Nicholas Sherlock / Chicken Smoothie.

    ChibiPaint is Copyright (c) 2006-2008 Marc Schefer

    ChickenPaint is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    ChickenPaint is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with ChickenPaint. If not, see <http://www.gnu.org/licenses/>.
*/

"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports["default"] = CPClip;

function CPClip(bmp, x, y) {
    this.bmp = bmp;

    this.x = x;
    this.y = y;
}

;
module.exports = exports["default"];

},{}],9:[function(require,module,exports){
/*
    ChickenPaint
    
    ChickenPaint is a translation of ChibiPaint from Java to JavaScript
    by Nicholas Sherlock / Chicken Smoothie.
    
    ChibiPaint is Copyright (c) 2006-2008 Marc Schefer

    ChickenPaint is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    ChickenPaint is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with ChickenPaint. If not, see <http://www.gnu.org/licenses/>.
*/

"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports["default"] = CPColorBmp;

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

var _CPBitmap = require("./CPBitmap");

var _CPBitmap2 = _interopRequireDefault(_CPBitmap);

var _utilCPRect = require("../util/CPRect");

var _utilCPRect2 = _interopRequireDefault(_utilCPRect);

function createImageData(width, height) {
    // return new ImageData(this.width, this.height); // Doesn't work on old IE
    var canvas = document.createElement("canvas"),
        context = canvas.getContext("2d");

    return context.createImageData(width, height);
}

//
// A 32bpp bitmap class (one byte per channel in RGBA order)
//

function CPColorBmp(width, height) {
    _CPBitmap2["default"].call(this, width, height);

    // The ImageData object that holds the image data
    this.imageData = createImageData(this.width, this.height);

    // The bitmap data array (one byte per channel in RGBA order)
    this.data = this.imageData.data;
}

CPColorBmp.prototype = Object.create(_CPBitmap2["default"].prototype);
CPColorBmp.prototype.constructor = CPColorBmp;

CPColorBmp.BYTES_PER_PIXEL = 4;
CPColorBmp.RED_BYTE_OFFSET = 0;
CPColorBmp.GREEN_BYTE_OFFSET = 1;
CPColorBmp.BLUE_BYTE_OFFSET = 2;
CPColorBmp.ALPHA_BYTE_OFFSET = 3;

// Creates a CPBitmap from a portion of this bitmap
CPColorBmp.prototype.cloneRect = function (rect) {
    var result = new CPColorBmp(rect.getWidth(), rect.getHeight());

    result.copyBitmapRect(this, 0, 0, rect);

    return result;
};

//
// Pixel access with friendly clipping. Pixel will be 32-bit integer in ARGB format
//
CPColorBmp.prototype.getPixel = function (x, y) {
    x = Math.max(0, Math.min(this.width - 1, x));
    y = Math.max(0, Math.min(this.height - 1, y));

    var pixIndex = this.offsetOfPixel(x, y);

    return this.data[pixIndex + CPColorBmp.ALPHA_BYTE_OFFSET] << 24 | this.data[pixIndex + CPColorBmp.RED_BYTE_OFFSET] << 16 | this.data[pixIndex + CPColorBmp.GREEN_BYTE_OFFSET] << 8 | this.data[pixIndex + CPColorBmp.BLUE_BYTE_OFFSET];
};

/**
 * Get an r,g,b,a array of the xor of this bitmap and the given one, within the given rectangle
 *
 * @returns {Uint8Array}
 */
CPColorBmp.prototype.copyRectXOR = function (bmp, rect) {
    rect = this.getBounds().clip(rect);

    var w = rect.getWidth(),
        h = rect.getHeight(),
        buffer = new Uint8Array(w * h * CPColorBmp.BYTES_PER_PIXEL),
        outputIndex = 0,
        bmp1Index = this.offsetOfPixel(rect.left, rect.top),
        bmp2Index = bmp.offsetOfPixel(rect.left, rect.top),
        bmp1YSkip = (this.width - w) * CPColorBmp.BYTES_PER_PIXEL,
        bmp2YSkip = (bmp.width - w) * CPColorBmp.BYTES_PER_PIXEL,
        widthBytes = w * CPColorBmp.BYTES_PER_PIXEL;

    for (var y = rect.top; y < rect.bottom; y++, bmp1Index += bmp1YSkip, bmp2Index += bmp2YSkip) {
        for (var x = 0; x < widthBytes; x++, outputIndex++, bmp1Index++, bmp2Index++) {
            buffer[outputIndex] = this.data[bmp1Index] ^ bmp.data[bmp2Index];
        }
    }

    return buffer;
};

CPColorBmp.prototype.setRectXOR = function (buffer, rect) {
    rect = this.getBounds().clip(rect);

    var w = rect.getWidth(),
        h = rect.getHeight(),
        bmp1Index = this.offsetOfPixel(rect.left, rect.top),
        bufferIndex = 0,
        bmp1YSkip = (this.width - w) * CPColorBmp.BYTES_PER_PIXEL,
        widthBytes = w * CPColorBmp.BYTES_PER_PIXEL;

    for (var y = 0; y < h; y++) {
        for (var x = 0; x < widthBytes; x++) {
            this.data[bmp1Index++] ^= buffer[bufferIndex++];
        }
        bmp1Index += bmp1YSkip;
    }
};

//
// Copy another bitmap into this one using alpha blending
//
CPColorBmp.prototype.pasteAlphaRect = function (bmp, srcRect, x, y) {
    var srcRectCpy = srcRect.clone(),
        dstRect = new _utilCPRect2["default"](x, y, 0, 0);

    this.getBounds().clipSourceDest(srcRectCpy, dstRect);

    var srcYStride = (bmp.width - dstRect.getWidth()) * CPColorBmp.BYTES_PER_PIXEL,
        dstYStride = (this.width - dstRect.getWidth()) * CPColorBmp.BYTES_PER_PIXEL,
        srcOffset = bmp.offsetOfPixel(srcRectCpy.left, srcRectCpy.top),
        dstOffset = this.offsetOfPixel(dstRect.left, dstRect.top);

    for (var y = dstRect.top; y < dstRect.bottom; y++, srcOffset += srcYStride, dstOffset += dstYStride) {
        for (var x = dstRect.left; x < dstRect.right; x++) {
            var alpha1 = bmp.data[srcOffset + CPColorBmp.ALPHA_BYTE_OFFSET];

            if (alpha1 <= 0) {
                dstOffset += CPColorBmp.BYTES_PER_PIXEL;
                srcOffset += CPColorBmp.BYTES_PER_PIXEL;
                continue;
            }

            if (alpha1 == 255) {
                for (var i = 0; i < CPColorBmp.BYTES_PER_PIXEL; i++) {
                    this.data[dstOffset++] = bmp.data[srcOffset++];
                }
                continue;
            }

            var alpha2 = this.data[dstOffset + CPColorBmp.ALPHA_BYTE_OFFSET],
                newAlpha = alpha1 + alpha2 - alpha1 * alpha2 / 255 | 0;

            if (newAlpha > 0) {
                var realAlpha = alpha1 * 255 / newAlpha | 0,
                    invAlpha = 255 - realAlpha;

                for (var i = 0; i < 3; i++, dstOffset++, srcOffset++) {
                    this.data[dstOffset] = bmp.data[srcOffset] + (this.data[dstOffset] * invAlpha - bmp.data[srcOffset] * invAlpha) / 255 | 0;
                }
                this.data[dstOffset++] = newAlpha;
                srcOffset++;
            } else {
                dstOffset += CPColorBmp.BYTES_PER_PIXEL;
                srcOffset += CPColorBmp.BYTES_PER_PIXEL;
            }
        }
    }
};

/** 
 * Copy the rectangle at srcRect from bmp onto this image at (dstX, dstY).
 */
CPColorBmp.prototype.copyBitmapRect = function (bmp, dstX, dstY, srcRect) {
    var srcRect = srcRect.clone(),
        dstRect = new _utilCPRect2["default"](dstX, dstY, 0, 0);

    this.getBounds().clipSourceDest(srcRect, dstRect);

    var w = dstRect.getWidth() | 0,
        h = dstRect.getHeight() | 0;

    // Are we just trying to duplicate the bitmap?
    if (dstRect.left == 0 && dstRect.top == 0 && w == this.width && h == this.height && w == bmp.width && h == bmp.height) {
        this.copyDataFrom(bmp);
    } else {
        var dstIndex = this.offsetOfPixel(dstRect.left, dstRect.top),
            srcIndex = bmp.offsetOfPixel(srcRect.left, srcRect.top),
            dstYSkip = (this.width - w) * CPColorBmp.BYTES_PER_PIXEL,
            srcYSkip = (bmp.width - w) * CPColorBmp.BYTES_PER_PIXEL;

        for (var y = 0; y < h; y++) {
            for (var x = 0; x < w; x++) {
                this.data[dstIndex] = bmp.data[srcIndex];
                this.data[dstIndex + 1] = bmp.data[srcIndex + 1];
                this.data[dstIndex + 2] = bmp.data[srcIndex + 2];
                this.data[dstIndex + 3] = bmp.data[srcIndex + 3];
                dstIndex += 4;
                srcIndex += 4;
            }
            srcIndex += srcYSkip;
            dstIndex += dstYSkip;
        }
    }
};

//
// Copies the Alpha channel from another bitmap. Assumes both bitmaps are the same width.
//
CPColorBmp.prototype.copyAlphaFrom = function (bmp, rect) {
    rect = this.getBounds().clip(rect);

    var w = rect.getWidth(),
        h = rect.getHeight(),
        pixIndex = this.offsetOfPixel(rect.left, rect.top) + CPColorBmp.ALPHA_BYTE_OFFSET,
        /* Apply offset here so we don't have to do it per-pixel*/
    ySkip = (this.width - w) * CPColorBmp.BYTES_PER_PIXEL;

    for (var y = 0; y < h; y++) {
        for (var x = 0; x < w; x++) {
            this.data[pixIndex] = bmp.data[pixIndex];
            pixIndex += CPColorBmp.BYTES_PER_PIXEL;
        }
        pixIndex += ySkip;
    }
};

CPColorBmp.prototype.copyDataFrom = function (bmp) {
    if (bmp.width != this.width || bmp.height != this.height) {
        this.width = bmp.width;
        this.height = bmp.height;

        this.imageData = createImageData(this.width, this.height);
        this.data = this.imageData.data;
    }

    if ("set" in this.data) {
        this.data.set(bmp.data);
    } else {
        // IE doesn't use Uint8ClampedArray for ImageData, so set() isn't available
        for (var i = 0; i < this.data.length; i++) {
            this.data[i] = bmp.data[i];
        }
    }
};

/**
 * Flood fill the given color starting from the given point
 * @param x int
 * @param y int
 * @param color int
 */
CPColorBmp.prototype.floodFill = function (x, y, color) {
    if (!this.isInside(x, y)) {
        return;
    }

    var oldColor = this.getPixel(x, y),
        oldAlpha = oldColor >> 24 & 0xFF,
        oldRed = oldColor >> 16 & 0xFF,
        oldGreen = oldColor >> 8 & 0xFF,
        oldBlue = oldColor & 0xFF,
        colorAlpha = color >> 24 & 0xFF,
        colorRed = color >> 16 & 0xFF,
        colorGreen = color >> 8 & 0xFF,
        colorBlue = color & 0xFF,
        stack = [],
        clip = this.getBounds(),
        data = this.data;

    // Change the left and right bounds from pixel indexes into byte indexes for easy clipping
    clip.left *= CPColorBmp.BYTES_PER_PIXEL;
    clip.right *= CPColorBmp.BYTES_PER_PIXEL;

    stack.push({ x1: x * CPColorBmp.BYTES_PER_PIXEL, x2: x * CPColorBmp.BYTES_PER_PIXEL, y: y, dy: -1 });
    stack.push({ x1: x * CPColorBmp.BYTES_PER_PIXEL, x2: x * CPColorBmp.BYTES_PER_PIXEL, y: y + 1, dy: 1 });

    /* 
     * If we are filling 100% transparent areas then we need to ignore the residual color information
     * (it would also be possible to clear it when erasing, but then the performance impact would be on the eraser 
     * rather than on this low importance flood fill)
     */
    if (oldAlpha == 0) {
        if (colorAlpha == 0) {
            return;
        }

        while (stack.length > 0) {
            var line = stack.pop();

            if (line.y < clip.top || line.y >= clip.bottom) {
                continue;
            }

            var lineOffset = this.offsetOfPixel(0, line.y),
                left = line.x1,
                next;

            while (left >= clip.left && data[left + lineOffset + CPColorBmp.ALPHA_BYTE_OFFSET] == 0) {
                data[left + lineOffset + CPColorBmp.RED_BYTE_OFFSET] = colorRed;
                data[left + lineOffset + CPColorBmp.GREEN_BYTE_OFFSET] = colorGreen;
                data[left + lineOffset + CPColorBmp.BLUE_BYTE_OFFSET] = colorBlue;
                data[left + lineOffset + CPColorBmp.ALPHA_BYTE_OFFSET] = colorAlpha;

                left -= CPColorBmp.BYTES_PER_PIXEL;
            }

            if (left >= line.x1) {
                while (left <= line.x2 && data[left + lineOffset + CPColorBmp.ALPHA_BYTE_OFFSET] != oldAlpha) {
                    left += CPColorBmp.BYTES_PER_PIXEL;
                }
                next = left + CPColorBmp.BYTES_PER_PIXEL;
                if (left > line.x2) {
                    continue;
                }
            } else {
                left += CPColorBmp.BYTES_PER_PIXEL;
                if (left < line.x1) {
                    stack.push({ x1: left, x2: line.x1 - CPColorBmp.BYTES_PER_PIXEL, y: line.y - line.dy, dy: -line.dy });
                }
                next = line.x1 + CPColorBmp.BYTES_PER_PIXEL;
            }

            do {
                data[left + lineOffset + CPColorBmp.RED_BYTE_OFFSET] = colorRed;
                data[left + lineOffset + CPColorBmp.GREEN_BYTE_OFFSET] = colorGreen;
                data[left + lineOffset + CPColorBmp.BLUE_BYTE_OFFSET] = colorBlue;
                data[left + lineOffset + CPColorBmp.ALPHA_BYTE_OFFSET] = colorAlpha;

                while (next < clip.right && data[next + lineOffset + CPColorBmp.ALPHA_BYTE_OFFSET] == oldAlpha) {
                    data[next + lineOffset + CPColorBmp.RED_BYTE_OFFSET] = colorRed;
                    data[next + lineOffset + CPColorBmp.GREEN_BYTE_OFFSET] = colorGreen;
                    data[next + lineOffset + CPColorBmp.BLUE_BYTE_OFFSET] = colorBlue;
                    data[next + lineOffset + CPColorBmp.ALPHA_BYTE_OFFSET] = colorAlpha;

                    next += CPColorBmp.BYTES_PER_PIXEL;
                }
                stack.push({ x1: left, x2: next - CPColorBmp.BYTES_PER_PIXEL, y: line.y + line.dy, dy: line.dy });

                if (next - CPColorBmp.BYTES_PER_PIXEL > line.x2) {
                    stack.push({ x1: line.x2 + CPColorBmp.BYTES_PER_PIXEL, x2: next - CPColorBmp.BYTES_PER_PIXEL, y: line.y - line.dy, dy: -line.dy });
                }

                left = next + CPColorBmp.BYTES_PER_PIXEL;
                while (left <= line.x2 && data[left + lineOffset + CPColorBmp.ALPHA_BYTE_OFFSET] != oldAlpha) {
                    left += CPColorBmp.BYTES_PER_PIXEL;
                }

                next = left + CPColorBmp.BYTES_PER_PIXEL;
            } while (left <= line.x2);
        }
    } else {
        if (color == oldColor) {
            return;
        }

        while (stack.length > 0) {
            var line = stack.pop();

            if (line.y < clip.top || line.y >= clip.bottom) {
                continue;
            }

            var lineOffset = this.offsetOfPixel(0, line.y),
                left = line.x1,
                next;

            while (left >= clip.left && data[left + lineOffset + CPColorBmp.RED_BYTE_OFFSET] == oldRed && data[left + lineOffset + CPColorBmp.GREEN_BYTE_OFFSET] == oldGreen && data[left + lineOffset + CPColorBmp.BLUE_BYTE_OFFSET] == oldBlue && data[left + lineOffset + CPColorBmp.ALPHA_BYTE_OFFSET] == oldAlpha) {
                data[left + lineOffset + CPColorBmp.RED_BYTE_OFFSET] = colorRed;
                data[left + lineOffset + CPColorBmp.GREEN_BYTE_OFFSET] = colorGreen;
                data[left + lineOffset + CPColorBmp.BLUE_BYTE_OFFSET] = colorBlue;
                data[left + lineOffset + CPColorBmp.ALPHA_BYTE_OFFSET] = colorAlpha;

                left -= CPColorBmp.BYTES_PER_PIXEL;
            }

            if (left >= line.x1) {
                while (left <= line.x2 && !(data[left + lineOffset + CPColorBmp.RED_BYTE_OFFSET] == oldRed && data[left + lineOffset + CPColorBmp.GREEN_BYTE_OFFSET] == oldGreen && data[left + lineOffset + CPColorBmp.BLUE_BYTE_OFFSET] == oldBlue && data[left + lineOffset + CPColorBmp.ALPHA_BYTE_OFFSET] == oldAlpha)) {
                    left += CPColorBmp.BYTES_PER_PIXEL;
                }
                next = left + CPColorBmp.BYTES_PER_PIXEL;
                if (left > line.x2) {
                    continue;
                }
            } else {
                left += CPColorBmp.BYTES_PER_PIXEL;
                if (left < line.x1) {
                    stack.push({ x1: left, x2: line.x1 - CPColorBmp.BYTES_PER_PIXEL, y: line.y - line.dy, dy: -line.dy });
                }
                next = line.x1 + CPColorBmp.BYTES_PER_PIXEL;
            }

            do {
                data[left + lineOffset + CPColorBmp.RED_BYTE_OFFSET] = colorRed;
                data[left + lineOffset + CPColorBmp.GREEN_BYTE_OFFSET] = colorGreen;
                data[left + lineOffset + CPColorBmp.BLUE_BYTE_OFFSET] = colorBlue;
                data[left + lineOffset + CPColorBmp.ALPHA_BYTE_OFFSET] = colorAlpha;

                while (next < clip.right && data[next + lineOffset + CPColorBmp.RED_BYTE_OFFSET] == oldRed && data[next + lineOffset + CPColorBmp.GREEN_BYTE_OFFSET] == oldGreen && data[next + lineOffset + CPColorBmp.BLUE_BYTE_OFFSET] == oldBlue && data[next + lineOffset + CPColorBmp.ALPHA_BYTE_OFFSET] == oldAlpha) {
                    data[next + lineOffset + CPColorBmp.RED_BYTE_OFFSET] = colorRed;
                    data[next + lineOffset + CPColorBmp.GREEN_BYTE_OFFSET] = colorGreen;
                    data[next + lineOffset + CPColorBmp.BLUE_BYTE_OFFSET] = colorBlue;
                    data[next + lineOffset + CPColorBmp.ALPHA_BYTE_OFFSET] = colorAlpha;

                    next += CPColorBmp.BYTES_PER_PIXEL;
                }
                stack.push({ x1: left, x2: next - CPColorBmp.BYTES_PER_PIXEL, y: line.y + line.dy, dy: line.dy });

                if (next - CPColorBmp.BYTES_PER_PIXEL > line.x2) {
                    stack.push({ x1: line.x2 + CPColorBmp.BYTES_PER_PIXEL, x2: next - CPColorBmp.BYTES_PER_PIXEL, y: line.y - line.dy, dy: -line.dy });
                }

                left = next + CPColorBmp.BYTES_PER_PIXEL;
                while (left <= line.x2 && !(data[left + lineOffset + CPColorBmp.RED_BYTE_OFFSET] == oldRed && data[left + lineOffset + CPColorBmp.GREEN_BYTE_OFFSET] == oldGreen && data[left + lineOffset + CPColorBmp.BLUE_BYTE_OFFSET] == oldBlue && data[left + lineOffset + CPColorBmp.ALPHA_BYTE_OFFSET] == oldAlpha)) {
                    left += CPColorBmp.BYTES_PER_PIXEL;
                }

                next = left + CPColorBmp.BYTES_PER_PIXEL;
            } while (left <= line.x2);
        }
    }
};

/**
 * Premultiply the RGB channels in the given R,G,B,A channel buffer with the alpha channel.
 * 
 * @param buffer R,G,B,A channel array
 * @param len Number of pixels in buffer to modify
 */
function multiplyAlpha(buffer, len) {
    var pixIndex = 0;

    for (var i = 0; i < len; i++) {
        var alpha = buffer[pixIndex + CPColorBmp.ALPHA_BYTE_OFFSET];

        // Multiply the RGB channels by alpha
        for (var j = 0; j < 3; j++, pixIndex++) {
            buffer[pixIndex] = Math.round(buffer[pixIndex] * alpha / 255);
        }
        pixIndex++; // Don't modify alpha channel
    }
}

/**
 * Inverse of multiplyAlpha()
 */
function separateAlpha(buffer, len) {
    var pixIndex = 0;

    for (var i = 0; i < len; i++) {
        var alpha = buffer[pixIndex + CPColorBmp.ALPHA_BYTE_OFFSET];

        if (alpha != 0) {
            var invAlpha = 255 / alpha;

            for (var j = 0; j < 3; j++, pixIndex++) {
                buffer[pixIndex] = Math.min(Math.round(buffer[pixIndex] * invAlpha), 255);
            }
            // Don't modify alpha channel
            pixIndex++;
        } else {
            pixIndex += CPColorBmp.BYTES_PER_PIXEL;
        }
    }
}

function boxBlurLine(src, dst, len, radius) {
    var totalPixels = 0,
        totalChannels = [0, 0, 0, 0],
        pixIndex,
        dstIndex;

    pixIndex = 0;
    for (var i = 0; i < radius && i < len; i++) {
        for (var j = 0; j < CPColorBmp.BYTES_PER_PIXEL; j++) {
            totalChannels[j] += src[pixIndex++];
        }
        totalPixels++;
    }

    dstIndex = 0;
    for (var i = 0; i < len; i++) {
        // New pixel joins the window at the right
        if (i + radius < len) {
            pixIndex = (i + radius) * CPColorBmp.BYTES_PER_PIXEL;

            for (var j = 0; j < CPColorBmp.BYTES_PER_PIXEL; j++) {
                totalChannels[j] += src[pixIndex++];
            }
            totalPixels++;
        }

        for (var j = 0; j < CPColorBmp.BYTES_PER_PIXEL; j++) {
            dst[dstIndex++] = Math.round(totalChannels[j] / totalPixels);
        }

        // Old pixel leaves the window at the left
        if (i - radius >= 0) {
            pixIndex = (i - radius) * CPColorBmp.BYTES_PER_PIXEL;

            for (var j = 0; j < CPColorBmp.BYTES_PER_PIXEL; j++) {
                totalChannels[j] -= src[pixIndex++];
            }
            totalPixels--;
        }
    }
}

/**
 * Copy a column of pixels in the bitmap to the given R,G,B,A buffer.
 * 
 * @param x X-coordinate of column
 * @param y Y-coordinate of top of column to copy
 * @param len Number of pixels to copy
 * @param buffer R,G,B,A array
 */
CPColorBmp.prototype.copyPixelColumnToArray = function (x, y, len, buffer) {
    var yJump = (this.width - 1) * CPColorBmp.BYTES_PER_PIXEL,
        dstOffset = 0,
        srcOffset = this.offsetOfPixel(x, y);

    for (var i = 0; i < len; i++) {
        for (var j = 0; j < CPColorBmp.BYTES_PER_PIXEL; j++) {
            buffer[dstOffset++] = this.data[srcOffset++];
        }

        srcOffset += yJump;
    }
};

/**
 * Copy the pixels from the given R,G,B,A buffer to a column of pixels in the bitmap.
 * 
 * @param x X-coordinate of column
 * @param y Y-coordinate of top of column to copy
 * @param len Number of pixels to copy
 * @param buffer R,G,B,A array to copy from
 */
CPColorBmp.prototype.copyArrayToPixelColumn = function (x, y, len, buffer) {
    var yJump = (this.width - 1) * CPColorBmp.BYTES_PER_PIXEL,
        srcOffset = 0,
        dstOffset = this.offsetOfPixel(x, y);

    for (var i = 0; i < len; i++) {
        for (var j = 0; j < CPColorBmp.BYTES_PER_PIXEL; j++) {
            this.data[dstOffset++] = buffer[srcOffset++];
        }

        dstOffset += yJump;
    }
};

CPColorBmp.prototype.boxBlur = function (rect, radiusX, radiusY) {
    rect = this.getBounds().clip(rect);

    var rectWidth = rect.getWidth(),
        rectWidthBytes = rectWidth * CPColorBmp.BYTES_PER_PIXEL,
        rectHeight = rect.getHeight(),
        rectLength = Math.max(rectWidth, rectHeight),
        src = new Uint8Array(rectLength * CPColorBmp.BYTES_PER_PIXEL),
        dst = new Uint8Array(rectLength * CPColorBmp.BYTES_PER_PIXEL);

    for (var y = rect.top; y < rect.bottom; y++) {
        var pixOffset = this.offsetOfPixel(rect.left, y);

        for (var x = 0; x < rectWidthBytes; x++) {
            src[x] = this.data[pixOffset++];
        }

        multiplyAlpha(src, rectWidth);
        boxBlurLine(src, dst, rectWidth, radiusX);

        pixOffset = this.offsetOfPixel(rect.left, y);

        for (var x = 0; x < rectWidthBytes; x++) {
            this.data[pixOffset++] = dst[x];
        }
    }

    for (var x = rect.left; x < rect.right; x++) {
        this.copyPixelColumnToArray(x, rect.top, rectHeight, src);

        boxBlurLine(src, dst, rectHeight, radiusY);
        separateAlpha(dst, rectHeight);

        this.copyArrayToPixelColumn(x, rect.top, rectHeight, dst);
    }
};

CPColorBmp.prototype.offsetOfPixel = function (x, y) {
    return (y * this.width + x) * CPColorBmp.BYTES_PER_PIXEL | 0;
};

CPColorBmp.prototype.getMemorySize = function () {
    return this.data.length;
};

// Load from a loaded HTML Image object
CPColorBmp.prototype.loadFromImage = function (image) {
    var imageCanvas = document.createElement("canvas"),
        imageContext = imageCanvas.getContext("2d");

    imageCanvas.width = image.width;
    imageCanvas.height = image.height;

    imageContext.globalCompositeOperation = "copy";
    imageContext.drawImage(image, 0, 0);

    this.imageData = imageContext.getImageData(0, 0, this.width, this.height);
    this.data = this.imageData.data;
};

CPColorBmp.prototype.getImageData = function () {
    return this.imageData;
};

/**
 * Replace the image data with the provided ImageData object.
 *
 * @param imageData {ImageData}
 */
CPColorBmp.prototype.setImageData = function (imageData) {
    this.width = imageData.width;
    this.height = imageData.height;
    this.imageData = imageData;
    this.data = imageData.data;
};
module.exports = exports["default"];

},{"../util/CPRect":52,"./CPBitmap":3}],10:[function(require,module,exports){
/*
    ChickenPaint
    
    ChickenPaint is a translation of ChibiPaint from Java to JavaScript
    by Nicholas Sherlock / Chicken Smoothie.
    
    ChibiPaint is Copyright (c) 2006-2008 Marc Schefer

    ChickenPaint is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    ChickenPaint is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with ChickenPaint. If not, see <http://www.gnu.org/licenses/>.
*/

"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports["default"] = CPGreyBmp;

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

var _CPBitmap = require("./CPBitmap");

var _CPBitmap2 = _interopRequireDefault(_CPBitmap);

function CPGreyBmp(width, height, bitDepth) {

    _CPBitmap2["default"].call(this, width, height);

    this.bitDepth = bitDepth;

    switch (bitDepth) {
        case 32:
            this.data = new Uint32Array(width * height);
            break;
        case 16:
            this.data = new Uint16Array(width * height);
            break;
        case 8:
        default:
            this.data = new Uint8Array(width * height);
    }

    this.clone = function () {
        var result = new CPGreyBmp(this.width, this.height, this.bitDepth);

        result.data.set(this.data);

        return result;
    };

    this.clearAll = function (value) {
        for (var i = 0; i < this.data.length; i++) {
            this.data[i] = value;
        }
    };

    this.clearRect = function (rect, value) {
        var rect = this.getBounds().clip(rect),
            yStride = this.width - rect.getWidth(),
            pixIndex = this.offsetOfPixel(rect.left, rect.top);

        for (var y = rect.top; y < rect.bottom; y++, pixIndex += yStride) {
            for (var x = rect.left; x < rect.right; x++, pixIndex++) {
                this.data[pixIndex] = value;
            }
        }
    };

    this.mirrorHorizontally = function () {
        var newData = new Uint8Array(width * height);

        for (var y = 0; y < height; y++) {
            for (var x = 0; x < width; x++) {
                newData[y * width + x] = this.data[y * width + width - x - 1];
            }
        }

        this.data = newData;
    };

    this.applyLUT = function (lut) {
        for (var i = 0; i < this.data.length; i++) {
            this.data[i] = lut.table[this.data[i]];
        }
    };

    this.toCanvas = function () {
        var imageData = this.toImageData(),
            canvas = document.createElement("canvas"),
            context = canvas.getContext("2d");

        canvas.width = this.width;
        canvas.height = this.height;

        context.putImageData(imageData, 0, 0);

        return canvas;
    };

    this.toImageData = function () {
        var canvas = document.createElement("canvas"),
            context = canvas.getContext("2d"),
            imageData = context.createImageData(this.width, this.height),
            srcIndex = 0,
            dstIndex = 0;

        for (var y = 0; y < this.height; y++) {
            for (var x = 0; x < this.width; x++) {
                imageData.data[dstIndex++] = this.data[srcIndex];
                imageData.data[dstIndex++] = this.data[srcIndex];
                imageData.data[dstIndex++] = this.data[srcIndex];
                imageData.data[dstIndex++] = 0xFF;
                srcIndex++;
            }
        }

        return imageData;
    };
}

CPGreyBmp.prototype.offsetOfPixel = function (x, y) {
    return y * this.width + x;
};
module.exports = exports["default"];

},{"./CPBitmap":3}],11:[function(require,module,exports){
/*
    ChickenPaint
    
    ChickenPaint is a translation of ChibiPaint from Java to JavaScript
    by Nicholas Sherlock / Chicken Smoothie.
    
    ChibiPaint is Copyright (c) 2006-2008 Marc Schefer

    ChickenPaint is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    ChickenPaint is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with ChickenPaint. If not, see <http://www.gnu.org/licenses/>.
*/

'use strict';

Object.defineProperty(exports, '__esModule', {
    value: true
});
exports['default'] = CPLayer;

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }

var _CPColorBmp = require('./CPColorBmp');

var _CPColorBmp2 = _interopRequireDefault(_CPColorBmp);

var _CPBlend = require('./CPBlend');

var _CPBlend2 = _interopRequireDefault(_CPBlend);

/**
 * Note layer is not cleared to any specific values upon initial creation, use clearAll().
 */

function CPLayer(width, height, name) {
    // Super-constructor
    _CPColorBmp2['default'].call(this, width, height);

    this.name = name || "";

    this.alpha = 100;
    this.visible = true;
    this.blendMode = CPLayer.LM_NORMAL;
}

CPLayer.prototype = Object.create(_CPColorBmp2['default'].prototype);
CPLayer.prototype.constructor = CPLayer;

var BYTES_PER_PIXEL = 4,
    RED_BYTE_OFFSET = 0,
    GREEN_BYTE_OFFSET = 1,
    BLUE_BYTE_OFFSET = 2,
    ALPHA_BYTE_OFFSET = 3,
    blend = new _CPBlend2['default']();

CPLayer.prototype.fusionWith = function (fusion, rect) {
    if (this.alpha <= 0) {
        return;
    }

    rect = this.getBounds().clip(rect);

    switch (this.blendMode) {
        case CPLayer.LM_NORMAL:
            if (this.alpha >= 100) {
                blend.fusionWithNormalNoAlpha(this, fusion, rect);
            } else {
                blend.fusionWithNormal(this, fusion, rect);
            }
            break;

        case CPLayer.LM_MULTIPLY:
            blend.fusionWithMultiply(this, fusion, rect);
            break;

        case CPLayer.LM_ADD:
            blend.fusionWithAdd(this, fusion, rect);
            break;

        case CPLayer.LM_SCREEN:
            blend.fusionWithScreen(this, fusion, rect);
            break;

        case CPLayer.LM_LIGHTEN:
            blend.fusionWithLighten(this, fusion, rect);
            break;

        case CPLayer.LM_DARKEN:
            blend.fusionWithDarken(this, fusion, rect);
            break;

        case CPLayer.LM_SUBTRACT:
            blend.fusionWithSubtract(this, fusion, rect);
            break;

        case CPLayer.LM_DODGE:
            blend.fusionWithDodge(this, fusion, rect);
            break;

        case CPLayer.LM_BURN:
            blend.fusionWithBurn(this, fusion, rect);
            break;

        case CPLayer.LM_OVERLAY:
            blend.fusionWithOverlay(this, fusion, rect);
            break;

        case CPLayer.LM_HARDLIGHT:
            blend.fusionWithHardLightFullAlpha(this, fusion, rect);
            break;

        case CPLayer.LM_SOFTLIGHT:
            blend.fusionWithSoftLightFullAlpha(this, fusion, rect);
            break;

        case CPLayer.LM_VIVIDLIGHT:
            blend.fusionWithVividLightFullAlpha(this, fusion, rect);
            break;

        case CPLayer.LM_LINEARLIGHT:
            blend.fusionWithLinearLightFullAlpha(this, fusion, rect);
            break;

        case CPLayer.LM_PINLIGHT:
            blend.fusionWithPinLightFullAlpha(this, fusion, rect);
            break;
    }
};

CPLayer.prototype.fusionWithFullAlpha = function (fusion, rect) {
    if (this.alpha <= 0) {
        return;
    }

    rect = this.getBounds().clip(rect);

    switch (this.blendMode) {
        case CPLayer.LM_NORMAL:
            blend.fusionWithNormalFullAlpha(this, fusion, rect);
            break;

        case CPLayer.LM_MULTIPLY:
            blend.fusionWithMultiplyFullAlpha(this, fusion, rect);
            break;

        case CPLayer.LM_ADD:
            blend.fusionWithAddFullAlpha(this, fusion, rect);
            break;

        case CPLayer.LM_SCREEN:
            blend.fusionWithScreenFullAlpha(this, fusion, rect);
            break;

        case CPLayer.LM_LIGHTEN:
            blend.fusionWithLightenFullAlpha(this, fusion, rect);
            break;

        case CPLayer.LM_DARKEN:
            blend.fusionWithDarkenFullAlpha(this, fusion, rect);
            break;

        case CPLayer.LM_SUBTRACT:
            blend.fusionWithSubtractFullAlpha(this, fusion, rect);
            break;

        case CPLayer.LM_DODGE:
            blend.fusionWithDodgeFullAlpha(this, fusion, rect);
            break;

        case CPLayer.LM_BURN:
            blend.fusionWithBurnFullAlpha(this, fusion, rect);
            break;

        case CPLayer.LM_OVERLAY:
            blend.fusionWithOverlayFullAlpha(this, fusion, rect);
            break;

        case CPLayer.LM_HARDLIGHT:
            blend.fusionWithHardLightFullAlpha(this, fusion, rect);
            break;

        case CPLayer.LM_SOFTLIGHT:
            blend.fusionWithSoftLightFullAlpha(this, fusion, rect);
            break;

        case CPLayer.LM_VIVIDLIGHT:
            blend.fusionWithVividLightFullAlpha(this, fusion, rect);
            break;

        case CPLayer.LM_LINEARLIGHT:
            blend.fusionWithLinearLightFullAlpha(this, fusion, rect);
            break;

        case CPLayer.LM_PINLIGHT:
            blend.fusionWithPinLightFullAlpha(this, fusion, rect);
            break;
    }
};

CPLayer.prototype.clearAll = function (color) {
    var a = color >> 24 & 0xFF,
        r = color >> 16 & 0xFF,
        g = color >> 8 & 0xFF,
        b = color & 0xFF;

    for (var i = 0; i < this.width * this.height * BYTES_PER_PIXEL;) {
        this.data[i++] = r;
        this.data[i++] = g;
        this.data[i++] = b;
        this.data[i++] = a;
    }
};

CPLayer.prototype.clearRect = function (rect, color) {
    var a = color >> 24 & 0xFF,
        r = color >> 16 & 0xFF,
        g = color >> 8 & 0xFF,
        b = color & 0xFF;

    var rect = this.getBounds().clip(rect),
        yStride = (this.width - rect.getWidth()) * BYTES_PER_PIXEL,
        pixIndex = this.offsetOfPixel(rect.left, rect.top);

    for (var y = rect.top; y < rect.bottom; y++, pixIndex += yStride) {
        for (var x = rect.left; x < rect.right; x++) {
            this.data[pixIndex++] = r;
            this.data[pixIndex++] = g;
            this.data[pixIndex++] = b;
            this.data[pixIndex++] = a;
        }
    }
};

/**
 * @param rect CPRect
 * @param source CPLayer
 */
CPLayer.prototype.copyRegionHFlip = function (rect, source) {
    rect = this.getBounds().clip(rect);

    for (var y = rect.top; y < rect.bottom; y++) {
        var dstOffset = this.offsetOfPixel(rect.left, y),
            srcOffset = source.offsetOfPixel(rect.right - 1, y);

        for (var x = rect.left; x < rect.right; x++, srcOffset -= _CPColorBmp2['default'].BYTES_PER_PIXEL * 2) {
            for (var i = 0; i < _CPColorBmp2['default'].BYTES_PER_PIXEL; i++) {
                this.data[dstOffset++] = source.data[srcOffset++];
            }
        }
    }
};

/**
 * @param rect CPRect
 * @param source CPLayer
 */
CPLayer.prototype.copyRegionVFlip = function (rect, source) {
    rect = this.getBounds().clip(rect);

    var widthBytes = rect.getWidth() * _CPColorBmp2['default'].BYTES_PER_PIXEL;

    for (var y = rect.top; y < rect.bottom; y++) {
        var dstOffset = this.offsetOfPixel(rect.left, y),
            srcOffset = source.offsetOfPixel(rect.left, rect.bottom - 1 - (y - rect.top));

        for (var x = 0; x < widthBytes; x++) {
            this.data[dstOffset++] = source.data[srcOffset++];
        }
    }
};

/**
 * @param r CPRect
 */
CPLayer.prototype.fillWithNoise = function (rect) {
    rect = this.getBounds().clip(rect);

    var value,
        yStride = (this.width - rect.getWidth()) * _CPColorBmp2['default'].BYTES_PER_PIXEL,
        pixIndex = this.offsetOfPixel(rect.left, rect.top);

    for (var y = rect.top; y < rect.bottom; y++, pixIndex += yStride) {
        for (var x = rect.left; x < rect.right; x++, pixIndex += _CPColorBmp2['default'].BYTES_PER_PIXEL) {
            value = Math.random() * 0x100 | 0;

            this.data[pixIndex + _CPColorBmp2['default'].RED_BYTE_OFFSET] = value;
            this.data[pixIndex + _CPColorBmp2['default'].GREEN_BYTE_OFFSET] = value;
            this.data[pixIndex + _CPColorBmp2['default'].BLUE_BYTE_OFFSET] = value;
            this.data[pixIndex + _CPColorBmp2['default'].ALPHA_BYTE_OFFSET] = 0xFF;
        }
    }
};

/**
 * Replace the pixels in the given rect with the given horizontal gradient.
 *
 * @param rect CPRect
 * @param fromX int
 * @param toX int
 * @param gradientPoints int[]
 */
CPLayer.prototype.gradientHorzReplace = function (rect, fromX, toX, gradientPoints) {
    var fromColor = {
        r: gradientPoints[0] >> 16 & 0xFF,
        g: gradientPoints[0] >> 8 & 0xFF,
        b: gradientPoints[0] & 0xFF,
        a: gradientPoints[0] >> 24 & 0xFF
    },
        toColor = {
        r: gradientPoints[1] >> 16 & 0xFF,
        g: gradientPoints[1] >> 8 & 0xFF,
        b: gradientPoints[1] & 0xFF,
        a: gradientPoints[1] >> 24 & 0xFF
    },
        yStride = (this.width - rect.getWidth()) * _CPColorBmp2['default'].BYTES_PER_PIXEL,
        pixIndex = this.offsetOfPixel(rect.left, rect.top) | 0,
        h = rect.bottom - rect.top | 0;

    if (toX < fromX) {
        var temp = toX;
        toX = fromX;
        fromX = temp;

        temp = fromColor;
        fromColor = toColor;
        toColor = temp;
    }

    var gradientRange = toX - fromX | 0,
        rStep = (toColor.r - fromColor.r) / gradientRange,
        gStep = (toColor.g - fromColor.g) / gradientRange,
        bStep = (toColor.b - fromColor.b) / gradientRange,
        aStep = (toColor.a - fromColor.a) / gradientRange,
        jump = Math.max(rect.left - fromX, 0);

    for (var y = 0; y < h; y++, pixIndex += yStride) {
        // The solid color section before the gradient
        var x = rect.left;

        for (var xEnd = Math.min(fromX, rect.right) | 0; x < xEnd; x++, pixIndex += _CPColorBmp2['default'].BYTES_PER_PIXEL) {
            this.data[pixIndex + _CPColorBmp2['default'].RED_BYTE_OFFSET] = fromColor.r;
            this.data[pixIndex + _CPColorBmp2['default'].GREEN_BYTE_OFFSET] = fromColor.g;
            this.data[pixIndex + _CPColorBmp2['default'].BLUE_BYTE_OFFSET] = fromColor.b;
            this.data[pixIndex + _CPColorBmp2['default'].ALPHA_BYTE_OFFSET] = fromColor.a;
        }

        // In the gradient
        var r = fromColor.r + rStep * jump,
            g = fromColor.g + gStep * jump,
            b = fromColor.b + bStep * jump,
            a = fromColor.a + aStep * jump;

        for (xEnd = Math.min(toX, rect.right) | 0; x < xEnd; x++, pixIndex += _CPColorBmp2['default'].BYTES_PER_PIXEL) {
            this.data[pixIndex + _CPColorBmp2['default'].RED_BYTE_OFFSET] = r;
            this.data[pixIndex + _CPColorBmp2['default'].GREEN_BYTE_OFFSET] = g;
            this.data[pixIndex + _CPColorBmp2['default'].BLUE_BYTE_OFFSET] = b;
            this.data[pixIndex + _CPColorBmp2['default'].ALPHA_BYTE_OFFSET] = a;

            r += rStep;
            g += gStep;
            b += bStep;
            a += aStep;
        }

        // The section after the end of the gradient
        for (; x < rect.right; x++, pixIndex += _CPColorBmp2['default'].BYTES_PER_PIXEL) {
            this.data[pixIndex + _CPColorBmp2['default'].RED_BYTE_OFFSET] = toColor.r;
            this.data[pixIndex + _CPColorBmp2['default'].GREEN_BYTE_OFFSET] = toColor.g;
            this.data[pixIndex + _CPColorBmp2['default'].BLUE_BYTE_OFFSET] = toColor.b;
            this.data[pixIndex + _CPColorBmp2['default'].ALPHA_BYTE_OFFSET] = toColor.a;
        }
    }
};

/**
 * Replace the pixels in the given rect with the given vertical gradient.
 *
 * @param {CPRect} rect
 * @param fromY int
 * @param toY int
 * @param gradientPoints int[]
 */
CPLayer.prototype.gradientVertReplace = function (rect, fromY, toY, gradientPoints) {
    var fromColor = {
        r: gradientPoints[0] >> 16 & 0xFF,
        g: gradientPoints[0] >> 8 & 0xFF,
        b: gradientPoints[0] & 0xFF,
        a: gradientPoints[0] >> 24 & 0xFF
    },
        toColor = {
        r: gradientPoints[1] >> 16 & 0xFF,
        g: gradientPoints[1] >> 8 & 0xFF,
        b: gradientPoints[1] & 0xFF,
        a: gradientPoints[1] >> 24 & 0xFF
    },
        yStride = (this.width - rect.getWidth()) * _CPColorBmp2['default'].BYTES_PER_PIXEL,
        pixIndex = this.offsetOfPixel(rect.left, rect.top) | 0,
        w = rect.right - rect.left | 0;

    if (toY < fromY) {
        var temp = toY;
        toY = fromY;
        fromY = temp;

        temp = fromColor;
        fromColor = toColor;
        toColor = temp;
    }

    var y = rect.top;

    // The solid color section before the start of the gradient
    for (var yEnd = Math.min(rect.bottom, fromY) | 0; y < yEnd; y++, pixIndex += yStride) {
        for (var x = 0; x < w; x++, pixIndex += _CPColorBmp2['default'].BYTES_PER_PIXEL) {
            this.data[pixIndex + _CPColorBmp2['default'].RED_BYTE_OFFSET] = fromColor.r;
            this.data[pixIndex + _CPColorBmp2['default'].GREEN_BYTE_OFFSET] = fromColor.g;
            this.data[pixIndex + _CPColorBmp2['default'].BLUE_BYTE_OFFSET] = fromColor.b;
            this.data[pixIndex + _CPColorBmp2['default'].ALPHA_BYTE_OFFSET] = fromColor.a;
        }
    }

    // Inside the gradient
    var gradientRange = toY - fromY | 0,
        rStep = (toColor.r - fromColor.r) / gradientRange,
        gStep = (toColor.g - fromColor.g) / gradientRange,
        bStep = (toColor.b - fromColor.b) / gradientRange,
        aStep = (toColor.a - fromColor.a) / gradientRange,
        jump = Math.max(y - fromY, 0),
        r = fromColor.r + rStep * jump,
        g = fromColor.g + gStep * jump,
        b = fromColor.b + bStep * jump,
        a = fromColor.a + aStep * jump;

    for (var yEnd = Math.min(rect.bottom, toY) | 0; y < yEnd; y++, pixIndex += yStride) {
        for (var x = 0; x < w; x++, pixIndex += _CPColorBmp2['default'].BYTES_PER_PIXEL) {
            this.data[pixIndex + _CPColorBmp2['default'].RED_BYTE_OFFSET] = r;
            this.data[pixIndex + _CPColorBmp2['default'].GREEN_BYTE_OFFSET] = g;
            this.data[pixIndex + _CPColorBmp2['default'].BLUE_BYTE_OFFSET] = b;
            this.data[pixIndex + _CPColorBmp2['default'].ALPHA_BYTE_OFFSET] = a;
        }

        r += rStep;
        g += gStep;
        b += bStep;
        a += aStep;
    }

    // The section after the end of the gradient
    for (; y < rect.bottom; y++, pixIndex += yStride) {
        for (var x = 0; x < w; x++, pixIndex += _CPColorBmp2['default'].BYTES_PER_PIXEL) {
            this.data[pixIndex + _CPColorBmp2['default'].RED_BYTE_OFFSET] = toColor.r;
            this.data[pixIndex + _CPColorBmp2['default'].GREEN_BYTE_OFFSET] = toColor.g;
            this.data[pixIndex + _CPColorBmp2['default'].BLUE_BYTE_OFFSET] = toColor.b;
            this.data[pixIndex + _CPColorBmp2['default'].ALPHA_BYTE_OFFSET] = toColor.a;
        }
    }
};

/**
 * Replace the pixels in the given rect with the given gradient.
 *
 * @param rect CPRect
 * @param fromX int
 * @param fromY int
 * @param toX int
 * @param toY int
 * @param gradientPoints int[]
 */
CPLayer.prototype.gradientReplace = function (rect, fromX, fromY, toX, toY, gradientPoints) {
    var yStride = (this.width - rect.getWidth()) * _CPColorBmp2['default'].BYTES_PER_PIXEL,
        pixIndex = this.offsetOfPixel(rect.left, rect.top) | 0,
        w = rect.right - rect.left | 0,
        fromColor = {
        r: gradientPoints[0] >> 16 & 0xFF,
        g: gradientPoints[0] >> 8 & 0xFF,
        b: gradientPoints[0] & 0xFF,
        a: gradientPoints[0] >> 24 & 0xFF
    },
        toColor = {
        r: gradientPoints[1] >> 16 & 0xFF,
        g: gradientPoints[1] >> 8 & 0xFF,
        b: gradientPoints[1] & 0xFF,
        a: gradientPoints[1] >> 24 & 0xFF
    },

    // How many pixels vertically does the gradient sequence complete over (+infinity for horizontal gradients!)
    vertRange = toY - fromY + (toX - fromX) * (toX - fromX) / (toY - fromY),

    // Same for horizontal
    horzRange = toX - fromX + (toY - fromY) * (toY - fromY) / (toX - fromX),
        horzStep = 1 / horzRange;

    for (var y = rect.top; y < rect.bottom; y++, pixIndex += yStride) {
        var
        // The position the row starts at in the gradient [0.0 ... 1.0)
        prop = (rect.left - fromX) / horzRange + (y - fromY) / vertRange;

        for (var x = 0; x < w; x++, pixIndex += _CPColorBmp2['default'].BYTES_PER_PIXEL) {
            var propClamped = Math.min(Math.max(prop, 0.0), 1.0),
                invPropClamped = 1 - propClamped;

            this.data[pixIndex + _CPColorBmp2['default'].RED_BYTE_OFFSET] = fromColor.r * invPropClamped + toColor.r * propClamped;
            this.data[pixIndex + _CPColorBmp2['default'].GREEN_BYTE_OFFSET] = fromColor.g * invPropClamped + toColor.g * propClamped;
            this.data[pixIndex + _CPColorBmp2['default'].BLUE_BYTE_OFFSET] = fromColor.b * invPropClamped + toColor.b * propClamped;
            this.data[pixIndex + _CPColorBmp2['default'].ALPHA_BYTE_OFFSET] = fromColor.a * invPropClamped + toColor.a * propClamped;

            prop += horzStep;
        }
    }
};

/**
 * Alpha blend the given gradient onto the pixels in the given rect.
 *
 * @param rect CPRect
 * @param fromX int
 * @param fromY int
 * @param toX int
 * @param toY int
 * @param gradientPoints int[]
 */
CPLayer.prototype.gradientAlpha = function (rect, fromX, fromY, toX, toY, gradientPoints) {
    var yStride = (this.width - rect.getWidth()) * _CPColorBmp2['default'].BYTES_PER_PIXEL,
        pixIndex = this.offsetOfPixel(rect.left, rect.top) | 0,
        w = rect.right - rect.left | 0,
        fromColor = {
        r: gradientPoints[0] >> 16 & 0xFF,
        g: gradientPoints[0] >> 8 & 0xFF,
        b: gradientPoints[0] & 0xFF,
        a: gradientPoints[0] >> 24 & 0xFF
    },
        toColor = {
        r: gradientPoints[1] >> 16 & 0xFF,
        g: gradientPoints[1] >> 8 & 0xFF,
        b: gradientPoints[1] & 0xFF,
        a: gradientPoints[1] >> 24 & 0xFF
    },

    // How many pixels vertically does the gradient sequence complete over (+infinity for horizontal gradients!)
    vertRange = toY - fromY + (toX - fromX) * (toX - fromX) / (toY - fromY),

    // Same for horizontal
    horzRange = toX - fromX + (toY - fromY) * (toY - fromY) / (toX - fromX),
        horzStep = 1 / horzRange;

    for (var y = rect.top; y < rect.bottom; y++, pixIndex += yStride) {
        var
        // The position the row starts at in the gradient [0.0 ... 1.0)
        prop = (rect.left - fromX) / horzRange + (y - fromY) / vertRange;

        for (var x = 0; x < w; x++, pixIndex += _CPColorBmp2['default'].BYTES_PER_PIXEL) {
            var propClamped = Math.min(Math.max(prop, 0.0), 1.0),
                invPropClamped = 1 - propClamped,

            // The gradient color to draw
            r = fromColor.r * invPropClamped + toColor.r * propClamped,
                g = fromColor.g * invPropClamped + toColor.g * propClamped,
                b = fromColor.b * invPropClamped + toColor.b * propClamped,
                a = fromColor.a * invPropClamped + toColor.a * propClamped,
                alpha2 = this.data[pixIndex + ALPHA_BYTE_OFFSET],
                newAlpha = a + alpha2 - a * alpha2 / 255 | 0;

            if (newAlpha > 0) {
                var realAlpha = a * 255 / newAlpha | 0,
                    invAlpha = 255 - realAlpha;

                this.data[pixIndex + _CPColorBmp2['default'].RED_BYTE_OFFSET] = (r * realAlpha + this.data[pixIndex + _CPColorBmp2['default'].RED_BYTE_OFFSET] * invAlpha) / 255 | 0;
                this.data[pixIndex + _CPColorBmp2['default'].GREEN_BYTE_OFFSET] = (g * realAlpha + this.data[pixIndex + _CPColorBmp2['default'].GREEN_BYTE_OFFSET] * invAlpha) / 255 | 0;
                this.data[pixIndex + _CPColorBmp2['default'].BLUE_BYTE_OFFSET] = (b * realAlpha + this.data[pixIndex + _CPColorBmp2['default'].BLUE_BYTE_OFFSET] * invAlpha) / 255 | 0;
                this.data[pixIndex + _CPColorBmp2['default'].ALPHA_BYTE_OFFSET] = newAlpha;
            }

            prop += horzStep;
        }
    }
};

/**
 * Draw a gradient which begins at fromX, fromY and ends at toX, toY, clipped to the given rect, on top of the
 * pixels in the layer.
 *
 * @param gradientPoints Array with gradient colors (ARGB integers)
 * @param rect CPRect
 * @param replace Set to true to replace the pixels in the layer rather than blending the gradient on top of them.
 */
CPLayer.prototype.gradient = function (rect, fromX, fromY, toX, toY, gradientPoints, replace) {
    rect = this.getBounds().clip(rect);

    // Degenerate case
    if (fromX == toX && fromY == toY) {
        return;
    }

    // Opaque blend if possible
    if (replace || gradientPoints[0] >>> 24 == 255 && gradientPoints[1] >>> 24 == 255) {
        if (fromX == toX) {
            this.gradientVertReplace(rect, fromY, toY, gradientPoints);
        } else if (fromY == toY) {
            this.gradientHorzReplace(rect, fromX, toX, gradientPoints);
        } else {
            this.gradientReplace(rect, fromX, fromY, toX, toY, gradientPoints);
        }
    } else {
        this.gradientAlpha(rect, fromX, fromY, toX, toY, gradientPoints);
    }
};

/**
 * @param r CPRect
 */
CPLayer.prototype.fillWithColorNoise = function (rect) {
    rect = this.getBounds().clip(rect);

    var value,
        yStride = (this.width - rect.getWidth()) * _CPColorBmp2['default'].BYTES_PER_PIXEL,
        pixIndex = this.offsetOfPixel(rect.left, rect.top);

    for (var y = rect.top; y < rect.bottom; y++, pixIndex += yStride) {
        for (var x = rect.left; x < rect.right; x++, pixIndex += _CPColorBmp2['default'].BYTES_PER_PIXEL) {
            value = Math.random() * 0x1000000 | 0;

            this.data[pixIndex + _CPColorBmp2['default'].RED_BYTE_OFFSET] = value >> 16 & 0xFF;
            this.data[pixIndex + _CPColorBmp2['default'].GREEN_BYTE_OFFSET] = value >> 8 & 0xFF;
            this.data[pixIndex + _CPColorBmp2['default'].BLUE_BYTE_OFFSET] = value & 0xFF;
            this.data[pixIndex + _CPColorBmp2['default'].ALPHA_BYTE_OFFSET] = 0xFF;
        }
    }
};

/**
 * @param r CPRect
 */
CPLayer.prototype.invert = function (rect) {
    rect = this.getBounds().clip(rect);

    var yStride = (this.width - rect.getWidth()) * _CPColorBmp2['default'].BYTES_PER_PIXEL,
        pixIndex = this.offsetOfPixel(rect.left, rect.top);

    for (var y = rect.top; y < rect.bottom; y++, pixIndex += yStride) {
        for (var x = rect.left; x < rect.right; x++, pixIndex += _CPColorBmp2['default'].BYTES_PER_PIXEL) {
            this.data[pixIndex + _CPColorBmp2['default'].RED_BYTE_OFFSET] ^= 0xFF;
            this.data[pixIndex + _CPColorBmp2['default'].GREEN_BYTE_OFFSET] ^= 0xFF;
            this.data[pixIndex + _CPColorBmp2['default'].BLUE_BYTE_OFFSET] ^= 0xFF;
        }
    }
};

CPLayer.prototype.getAlpha = function () {
    return this.alpha;
};

CPLayer.prototype.getBlendMode = function () {
    return this.blendMode;
};

CPLayer.prototype.clone = function () {
    var result = new CPLayer(this.width, this.height, "");

    result.copyFrom(this);

    return result;
};

CPLayer.prototype.copyFrom = function (layer) {
    this.name = layer.name;
    this.blendMode = layer.blendMode;
    this.alpha = layer.alpha;
    this.visible = layer.visible;

    this.copyDataFrom(layer);
};

// Do we have any non-opaque pixels in the entire layer?
CPLayer.prototype.hasAlpha = function () {
    if (this.alpha != 100) {
        return true;
    }

    var pixIndex = ALPHA_BYTE_OFFSET;

    for (var y = 0; y < height; y++) {
        var alphaAnded = 0xFF;

        for (var x = 0; x < this.width; x++, pixIndex += BYTES_PER_PIXEL) {
            alphaAnded &= this.data[pixIndex];
        }

        // Only check once per row in order to reduce branching in the inner loop
        if (alphaAnded != 0xFF) {
            return true;
        }
    }

    return false;
};

// Do we have any semi-transparent pixels in the given rectangle?
CPLayer.prototype.hasAlphaInRect = function (rect) {
    if (this.alpha != 100) {
        return true;
    }

    rect = this.getBounds().clip(rect);

    var yStride = (this.width - rect.getWidth()) * BYTES_PER_PIXEL,
        pixIndex = this.offsetOfPixel(rect.left, rect.top) + ALPHA_BYTE_OFFSET;

    for (var y = rect.top; y < rect.bottom; y++, pixIndex += yStride) {
        var alphaAnded = 0xFF;

        for (var x = rect.left; x < rect.right; x++, pixIndex += BYTES_PER_PIXEL) {
            alphaAnded &= this.data[pixIndex];
        }

        // Only check once per row in order to reduce branching in the inner loop
        if (alphaAnded != 0xFF) {
            return true;
        }
    }

    return false;
};

/**
 * Get a rectangle that encloses any non-transparent pixels in the layer within the given initialBounds (or an empty
 * rect if the pixels inside the given bounds are 100% transparent).
 *
 * @param {CPRect} initialBounds - The rect to search within (pass getBounds() to search the whole layer)
 *
 * @returns {CPRect}
 */
CPLayer.prototype.getNonTransparentBounds = function (initialBounds) {
    var pixIndex,
        result = initialBounds.clone(),
        x,
        y,
        alphaOred,
        yStride;

    // Find the first non-transparent row
    yStride = (this.width - result.getWidth()) * BYTES_PER_PIXEL;
    pixIndex = this.offsetOfPixel(result.left, result.top) + ALPHA_BYTE_OFFSET;

    for (y = result.top; y < result.bottom; y++, pixIndex += yStride) {
        alphaOred = 0x00;

        for (var x = result.left; x < result.right; x++, pixIndex += BYTES_PER_PIXEL) {
            alphaOred |= this.data[pixIndex];
        }

        // Only check once per row in order to reduce branching in the inner loop
        if (alphaOred != 0x00) {
            break;
        }
    }

    result.top = y;

    if (result.top == result.bottom) {
        // Rect is empty, no opaque pixels in the initialBounds
        return result;
    }

    // Now the last non-transparent row
    pixIndex = this.offsetOfPixel(result.right - 1, result.bottom - 1) + ALPHA_BYTE_OFFSET;
    for (y = result.bottom - 1; y >= result.top; y--, pixIndex -= yStride) {
        alphaOred = 0x00;

        for (var x = result.right - 1; x >= result.left; x--, pixIndex -= BYTES_PER_PIXEL) {
            alphaOred |= this.data[pixIndex];
        }

        // Only check once per row in order to reduce branching in the inner loop
        if (alphaOred != 0x00) {
            break;
        }
    }

    result.bottom = y + 1; /* +1 since the bottom/right edges of the rect are exclusive */

    // Now columns from the left
    yStride = BYTES_PER_PIXEL * this.width;
    for (x = result.left; x < result.right; x++) {
        pixIndex = this.offsetOfPixel(x, result.top) + ALPHA_BYTE_OFFSET;
        alphaOred = 0x00;

        for (y = result.top; y < result.bottom; y++, pixIndex += yStride) {
            alphaOred |= this.data[pixIndex];
        }

        if (alphaOred != 0x00) {
            break;
        }
    }

    result.left = x;

    // And columns from the right
    for (x = result.right - 1; x >= result.left; x--) {
        pixIndex = this.offsetOfPixel(x, result.top) + ALPHA_BYTE_OFFSET;
        alphaOred = 0x00;

        for (y = result.top; y < result.bottom; y++, pixIndex += yStride) {
            alphaOred |= this.data[pixIndex];
        }

        if (alphaOred != 0x00) {
            break;
        }
    }

    result.right = x + 1;

    return result;
};

CPLayer.LM_NORMAL = 0;
CPLayer.LM_MULTIPLY = 1;
CPLayer.LM_ADD = 2;
CPLayer.LM_SCREEN = 3;
CPLayer.LM_LIGHTEN = 4;
CPLayer.LM_DARKEN = 5;
CPLayer.LM_SUBTRACT = 6;
CPLayer.LM_DODGE = 7;
CPLayer.LM_BURN = 8;
CPLayer.LM_OVERLAY = 9;
CPLayer.LM_HARDLIGHT = 10;
CPLayer.LM_SOFTLIGHT = 11;
CPLayer.LM_VIVIDLIGHT = 12;
CPLayer.LM_LINEARLIGHT = 13;
CPLayer.LM_PINLIGHT = 14;

CPLayer.prototype.makeLookUpTables = function () {
    // V - V^2 table
    CPLayer.prototype.softLightLUTSquare = new Array(256);

    for (var i = 0; i < 256; i++) {
        var v = i / 255.;

        CPLayer.prototype.softLightLUTSquare[i] = (v - v * v) * 255. | 0;
    }

    // sqrt(V) - V table
    CPLayer.prototype.softLightLUTSquareRoot = new Array(256);
    for (var i = 0; i < 256; i++) {
        var v = i / 255.;

        CPLayer.prototype.softLightLUTSquareRoot[i] = (Math.sqrt(v) - v) * 255. | 0;
    }
};

CPLayer.prototype.setAlpha = function (alpha) {
    this.alpha = alpha;
};

CPLayer.prototype.setBlendMode = function (blendMode) {
    this.blendMode = blendMode;
};

CPLayer.prototype.getAlpha = function () {
    return this.alpha;
};

CPLayer.prototype.getBlendMode = function () {
    return this.blendMode;
};

/**
 * Returns a new canvas with a rotated version of the given canvas.
 * 
 * Rotation is [0..3] and selects a multiple of 90 degrees of clockwise rotation to be applied.
 */
function getRotatedCanvas(canvas, rotation) {
    rotation = rotation % 4;

    if (rotation == 0) {
        return canvas;
    }

    var rotatedCanvas = document.createElement("canvas"),
        rotatedCanvasContext = rotatedCanvas.getContext("2d");

    if (rotation % 2 == 0) {
        rotatedCanvas.width = canvas.width;
        rotatedCanvas.height = canvas.height;
    } else {
        rotatedCanvas.width = canvas.height;
        rotatedCanvas.height = canvas.width;
    }

    switch (rotation) {
        case 1:
            // 90 degree clockwise:
            rotatedCanvasContext.rotate(Math.PI / 2);
            rotatedCanvasContext.drawImage(canvas, 0, -canvas.height);
            break;
        case 2:
            rotatedCanvasContext.rotate(Math.PI);
            rotatedCanvasContext.drawImage(canvas, -canvas.width, -canvas.height);
            break;
        case 3:
            // 90 degree counter-clockwise:
            rotatedCanvasContext.rotate(-Math.PI / 2);
            rotatedCanvasContext.drawImage(canvas, -canvas.width, 0);
            break;
        case 0:
        default:
            return canvas;
    }

    return rotatedCanvas;
}

function decodeBase64PNGDataURL(url) {
    if (typeof url !== "string" || !url.match(/^data:image\/png;base64,/i)) {
        return false;
    }

    return window.atob(url.substring("data:image\/png;base64,".length));
}

/**
 * Get the layer as a PNG image.
 * 
 * Rotation is [0..3] and selects a multiple of 90 degrees of clockwise rotation to be applied, or 0 to leave
 * unrotated.
 */
CPLayer.prototype.getAsPNG = function (rotation) {
    var canvas = document.createElement("canvas"),
        canvasContext = canvas.getContext("2d");

    // First draw our image data onto a canvas...
    canvas.width = this.imageData.width;
    canvas.height = this.imageData.height;

    canvasContext.putImageData(this.imageData, 0, 0);

    // Rotate it if needed
    canvas = getRotatedCanvas(canvas, rotation || 0);

    return decodeBase64PNGDataURL(canvas.toDataURL('image/png'));
};

CPLayer.prototype.makeLookUpTables();
module.exports = exports['default'];

},{"./CPBlend":4,"./CPColorBmp":9}],12:[function(require,module,exports){
/*
    ChickenPaint
    
    ChickenPaint is a translation of ChibiPaint from Java to JavaScript
    by Nicholas Sherlock / Chicken Smoothie.
    
    ChibiPaint is Copyright (c) 2006-2008 Marc Schefer

    ChickenPaint is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    ChickenPaint is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with ChickenPaint. If not, see <http://www.gnu.org/licenses/>.
*/

"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports["default"] = CPLookUpTable;

function CPLookUpTable() {
    this.table = new Uint8Array(256);

    this.loadIdentity = function () {
        for (var i = 0; i < 256; i++) {
            this.table[i] = i;
        }
    };

    this.loadBrightnessContrast = function (brightness, contrast) {
        var slope = contrast > 0.0 ? 1.0 / (1.0001 - contrast) : 1.0 + contrast,
            offset = 0.5 - slope * 0.5 + brightness;

        for (var i = 0; i < 256; i++) {
            var x = i / 255.0,
                y = x * slope + offset;

            this.table[i] = Math.min(255, Math.max(~ ~(y * 255.0), 0));
        }
    };

    this.invert = function () {
        for (var i = 0; i < 256; i++) {
            this.table[i] = 255 - this.table[i];
        }
    };
}

module.exports = exports["default"];

},{}],13:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports["default"] = CPResourceLoader;

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

var _CPChibiFile = require("./CPChibiFile");

var _CPChibiFile2 = _interopRequireDefault(_CPChibiFile);

var _CPArtwork = require("./CPArtwork");

var _CPArtwork2 = _interopRequireDefault(_CPArtwork);

var _CPLayer = require("./CPLayer");

var _CPLayer2 = _interopRequireDefault(_CPLayer);

var _utilAdobeColorTable = require("../util/AdobeColorTable");

var _utilAdobeColorTable2 = _interopRequireDefault(_utilAdobeColorTable);

/**
 * Loads ChickenPaint resources from a remote server and emits progress events.
 *
 * loadImageURL - URL of PNG/JPEG image to load for editing (optional)
 * loadChibiFileURL - URL of .chi file to load for editing (optional). Used in preference to loadImage.
 * loadSwatchesURL - URL of an .aco palette to load (optional)
 */

function CPResourceLoader(options) {
    var resources = [],
        completed = {},
        that = this;

    if (options.loadChibiFileUrl && ("" + options.loadChibiFileUrl).length > 0) {
        resources.push({
            url: options.loadChibiFileUrl,
            friendly: "drawing layers",
            name: "layers",
            required: true
        });
    } else {
        if (options.loadImageUrl && ("" + options.loadImageUrl).length > 0) {
            resources.push({
                url: options.loadImageUrl,
                friendly: "drawing",
                name: "flat",
                required: true
            });
        }
    }

    if (options.loadSwatchesUrl) {
        resources.push({
            url: options.loadSwatchesUrl,
            friendly: "color swatches",
            name: "swatches",
            required: false,
            noProgress: true // So short that we may as well keep the smoothie drained
        });
    }

    function decodeResource(resource, resourceData) {
        return new Promise(function (resolve, reject) {
            switch (resource.name) {
                case "flat":
                    var blob = new Blob([resourceData], { type: "image/png" }),
                        imageUrl = window.URL.createObjectURL(blob);

                    if (imageUrl) {
                        var image = new Image();

                        image.onload = function () {
                            var artwork = new _CPArtwork2["default"](this.width, this.height),
                                layer = new _CPLayer2["default"](this.width, this.height, "Layer 1");

                            layer.loadFromImage(image);
                            artwork.addLayerObject(layer);

                            image = null;
                            window.URL.revokeObjectURL(imageUrl);

                            resolve(artwork);
                        };

                        image.src = imageUrl;
                    } else {
                        resolve(null);
                    }
                    break;
                case "swatches":
                    var reader = new _utilAdobeColorTable2["default"](),
                        colors = reader.read(resourceData);

                    resolve(colors);
                    break;
                case "layers":
                    var reader = new _CPChibiFile2["default"](),
                        artwork = reader.read(resourceData);

                    resolve(artwork);
                    break;
                default:
                    resolve(null);
                    break;
            }
        });
    }

    function reportProgress(resource, progress) {
        if (progress === null) {
            that.emitEvent("loadingProgress", [1.0, "Loading your " + resource.friendly + "..."]);
        } else {
            that.emitEvent("loadingProgress", [progress, "Loading your " + resource.friendly + " (" + Math.round(progress * 100) + "%)..."]);
        }
    }

    this.load = function () {
        if (resources.length == 0) {
            that.emitEvent("loadingComplete", [completed]);
            return;
        }

        var resource = resources.shift(),
            xhr = new XMLHttpRequest();

        xhr.addEventListener("progress", function (evt) {
            var progress;

            if (evt.lengthComputable && !resource.noProgress) {
                progress = evt.loaded / evt.total;
            } else {
                progress = null;
            }

            reportProgress(resource, progress);
        }, false);

        function handleFatal() {
            if (resource.required) {
                that.emitEvent("loadingFailure", ["Failed to load your " + resource.friendly + ", please try again later."]);
            } else {
                // Skip unimportant resources
                that.load();
            }
        }

        xhr.addEventListener("load", function (evt) {
            if (this.status == 200) {
                var response = this.response;

                that.emitEvent("loadingProgress", [1.0, "Starting ChickenPaint..."]);

                // Yield to the DOM to give it a chance to paint the loaded message before we begin decoding
                setTimeout(function () {
                    decodeResource(resource, response).then(function (decoded) {
                        if (decoded) {
                            completed[resource.name] = decoded;

                            // Move on to the next file
                            that.load();
                        } else {
                            that.emitEvent("loadingFailure", ["Failed to read your " + resource.friendly]);
                        }
                    });
                }, 0);
            } else {
                handleFatal();
            }
        }, false);

        xhr.addEventListener("error", handleFatal);

        reportProgress(resource, resource.noProgress ? null : 0.0);

        xhr.open("GET", resource.url, true);

        xhr.responseType = 'arraybuffer';

        xhr.send();
    };
}

CPResourceLoader.prototype = Object.create(EventEmitter.prototype);
CPResourceLoader.prototype.constructor = CPResourceLoader;
module.exports = exports["default"];

},{"../util/AdobeColorTable":44,"./CPArtwork":2,"./CPChibiFile":7,"./CPLayer":11}],14:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports["default"] = CPResourceSaver;

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

var _CPChibiFile = require("./CPChibiFile");

var _CPChibiFile2 = _interopRequireDefault(_CPChibiFile);

var _CPArtwork = require("./CPArtwork");

var _CPArtwork2 = _interopRequireDefault(_CPArtwork);

var _utilAdobeColorTable = require("../util/AdobeColorTable");

var _utilAdobeColorTable2 = _interopRequireDefault(_utilAdobeColorTable);

/**
 * We generally can't do much with binary strings because various methods will try to UTF-8 mangle them.
 * This function converts such a string to a Uint8Array instead.
 */
function binaryStringToByteArray(s) {
    var result = new Uint8Array(s.length);

    for (var i = 0; i < s.length; i++) {
        result[i] = s.charCodeAt(i);
    }

    return result;
}

/**
 * Saves ChickenPaint resources to a remote server or to the disk and emits progress events.
 *
 * Options:
 *     url - URL to send to. If omitted, will save to the disk instead.
 *     artwork - Artwork to send
 *     rotation - Integer [0..3] of the number of 90 degree rotation steps that should be applied to canvas upon opening.
 *     swatches - Array of ARGB integer colors to save as the image swatches (optional)
 */

function CPResourceSaver(options) {
    var that = this,
        cancelled = false;

    options.rotation = options.rotation || 0;

    function reportProgress(progress) {
        if (progress === null) {
            that.emitEvent("savingProgress", [1.0, "Saving your drawing to the server..."]);
        } else {
            that.emitEvent("savingProgress", [progress, "Saving your drawing to the server...  (" + Math.round(progress * 100) + "%)"]);
        }
    }

    function reportFatal(serverMessage) {
        that.emitEvent("savingFailure", [serverMessage]);
    }

    function postDrawing(formData) {
        var xhr = new XMLHttpRequest();

        xhr.upload.addEventListener("progress", function (evt) {
            var progress;

            if (evt.lengthComputable) {
                progress = evt.loaded / evt.total;
            } else {
                progress = null;
            }

            reportProgress(progress);
        }, false);

        xhr.addEventListener("load", function (evt) {
            reportProgress(1.0);

            if (this.status == 200 && /^CHIBIOK/.test(this.response)) {
                that.emitEvent("savingComplete");
            } else {
                reportFatal(this.response);
            }
        }, false);

        xhr.addEventListener("error", function () {
            reportFatal(this.response);
        }, false);

        reportProgress(0);

        xhr.open("POST", options.url, true);

        xhr.responseType = "text";

        xhr.send(formData);
    }

    /**
     * Begin saving the data provided in the constructor. Returns immediately, and fires these events to report the
     * saving progress:
     * 
     * savingProgress(progress) - Progress is [0.0 ... 1.0] and reports how much has uploaded so far, or null if the 
     *                            total progress could not be determined.
     * savingFailure(error)     - When saving fails, along with a string error message to display to the user. 
     * savingComplete()         - When saving completes succesfully
     */
    this.save = function () {
        var flat, flatBlob, swatchesBlob;

        flat = binaryStringToByteArray(options.artwork.getFlatPNG(options.rotation));
        flatBlob = new Blob([flat], { type: "image/png" });
        flat = null; // Don't need this any more

        var serializeLayers;

        if (false) {
            serializeLayers = Promise.resolve(null);
        } else {
            serializeLayers = new _CPChibiFile2["default"]().serialize(options.artwork);
        }

        serializeLayers.then(function (chibiBlob) {
            if (cancelled) {
                that.emitEvent("savingFailure");
                return;
            }

            if (options.swatches) {
                var aco = new _utilAdobeColorTable2["default"]();

                swatchesBlob = new Blob([aco.write(options.swatches)], { type: "application/octet-stream" });
            } else {
                swatchesBlob = null;
            }

            if (options.url) {
                var marker = "This marker ensures the upload wasn't truncated",
                    formData = new FormData();

                formData.append("beginMarker", marker);

                formData.append("picture", flatBlob);
                flatBlob = null;

                if (chibiBlob) {
                    formData.append("chibifile", chibiBlob);
                    chibiBlob = null;

                    // Layers will need to be rotated upon opening
                    formData.append("rotation", "" + options.rotation);
                } else {
                    /*
                     * Because the image is a flat PNG, we rotate it before we saved it and it doesn't need further
                     * rotation upon opening.
                     */
                    formData.append("rotation", "0");
                }

                if (swatchesBlob) {
                    formData.append("swatches", swatchesBlob);
                    swatchesBlob = null;
                }

                formData.append("endMarker", marker);

                postDrawing(formData);
            } else {
                window.saveAs(flatBlob, "oekaki.png");

                if (chibiBlob) {
                    window.saveAs(chibiBlob, "oekaki.chi");
                }
                if (swatchesBlob) {
                    window.saveAs(swatchesBlob, "oekaki.aco");
                }
            }
        });
    };

    this.cancel = function () {
        cancelled = true;
    };
}

CPResourceSaver.prototype = Object.create(EventEmitter.prototype);
CPResourceSaver.prototype.constructor = CPResourceSaver;
module.exports = exports["default"];

},{"../util/AdobeColorTable":44,"./CPArtwork":2,"./CPChibiFile":7}],15:[function(require,module,exports){
/*
    ChickenPaint
    
    ChickenPaint is a translation of ChibiPaint from Java to JavaScript
    by Nicholas Sherlock / Chicken Smoothie.
    
    ChibiPaint is Copyright (c) 2006-2008 Marc Schefer

    ChickenPaint is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    ChickenPaint is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with ChickenPaint. If not, see <http://www.gnu.org/licenses/>.
*/

"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports["default"] = CPUndo;

function CPUndo() {}

/**
 * Attempt to merge the given undo into this one, and return true if successful.
 *
 * @param undo
 * @returns {boolean}
 */
CPUndo.prototype.merge = function (undo) {
    return false;
};

/**
 * Return true if this undo didn't modify the document.
 *
 * @returns {boolean}
 */
CPUndo.prototype.noChange = function () {
    return false;
};

/**
 * Return the number of bytes of memory used by this undo, or 0 if it cannot be estimated.
 *
 * @param undone
 * @param param
 * @returns {number}
 */
CPUndo.prototype.getMemoryUsed = function (undone, param) {
    return 0;
};

/**
 * Call when this undo is no longer on the top of the stack, so it can optimize its memory usage.
 */
CPUndo.prototype.compact = function () {};
module.exports = exports["default"];

},{}],16:[function(require,module,exports){
/*
    ChickenPaint
    
    ChickenPaint is a translation of ChibiPaint from Java to JavaScript
    by Nicholas Sherlock / Chicken Smoothie.
    
    ChibiPaint is Copyright (c) 2006-2008 Marc Schefer

    ChickenPaint is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    ChickenPaint is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with ChickenPaint. If not, see <http://www.gnu.org/licenses/>.
*/

"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports["default"] = CPAboutDialog;

function CPAboutDialog(parent) {
    var dialog = $("<div class=\"modal fade chickenpaint-about-dialog\" tabindex=\"-1\" role=\"dialog\">\n                <div class=\"modal-dialog\">\n                    <div class=\"modal-content\">\n                        <div class=\"modal-header\">\n                            <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\n                                <span aria-hidden=\"true\">&times;</span>\n                            </button>\n                            <h4 class=\"modal-title\">About ChickenPaint</h4>\n                        </div>\n                        <div class=\"modal-body\">\n                            <p>\n                                This app is adapted from ChickenPaint, a translation of <a href=\"http://www.chibipaint.com/\" target=\"_blank\">ChibiPaint</a>\n                                from Java to JavaScript by Nicholas Sherlock / Chicken Smoothie\n                            </p>\n                            <p>\n                                ChibiPaint is Copyright (c) 2006-2008 Marc Schefer. All Rights Reserved\n                            </p>\n                            <p>\n                                ChickenPaint is free software: you can redistribute it and/or modify\n                                it under the terms of the GNU General Public License as published by\n                                the Free Software Foundation, either version 3 of the License, or\n                                (at your option) any later version.\n                            </p>\n        \n                            <p>\n\n                                <a target=\"_blank\" href=\"http://www.gnu.org/licenses/\">GNU General Public License</a>\n                            </p>\n        \n                            <pre class=\"pre-scrollable chickenpaint-third-party-licenses\">Includes icons from the <a href=\"http://tango.freedesktop.org/\" target=\"_blank\">Tango Desktop Project</a>\n\nIncludes these MIT-licensed libraries:\n\n    Includes the <a target=\"_blank\" href=\"https://github.com/eligrey/FileSaver.js\">FileSaver.js library</a>\n    FileSaver.js Copyright  2015 <a target=\"_blank\" href=\"http://eligrey.com/\">Eli Grey</a>\n\n    Includes the <a target=\"_blank\" href=\"https://github.com/nodeca/pako\">Pako zlib compression library</a>\n    Copyright (C) 2014-2015 by Vitaly Puzrin\n    \n    Includes the <a target=\"_blank\" href=\"https://github.com/madrobby/keymaster\">keymaster.js</a> keyboard library\n    Copyright (c) 2011-2013 Thomas Fuchs\n\n    Includes the <a target=\"_blank\" href=\"https://github.com/stefanpenner/es6-promise\">es6-promise</a> library\n    Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors\n\n    Includes the <a target=\"_blank\" href=\"http://benalman.com/projects/jquery-throttle-debounce-plugin/\">jQuery throttle-debounce</a> library\n    Copyright (c) 2010 \"Cowboy\" Ben Alman\n\n    Permission is hereby granted, free of charge, to any person\n    obtaining a copy of this software and associated documentation\n    files (the \"Software\"), to deal in the Software without\n    restriction, including without limitation the rights to use,\n    copy, modify, merge, publish, distribute, sublicense, and/or\n    sell copies of the Software, and to permit persons to whom the\n    Software is furnished to do so, subject to the following\n    conditions:\n\n    The above copyright notice and this permission notice shall be\n    included in all copies or substantial portions of the Software.\n\n    THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n    EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES\n    OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n    NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT \n    HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,\n    WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n    FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR\n    OTHER DEALINGS IN THE SOFTWARE.\n\nIncludes the <a href=\"http://www.jquery.com/\" target=\"_blank\">JQuery library</a>\nCopyright <a href=\"https://jquery.org/\" target=\"_blank\">jQuery Foundation and other contributors</a>\n    \n    This software consists of voluntary contributions made by many\n    individuals. For exact contribution history, see the revision \n    history available at https://github.com/jquery/jquery\n    \n    The following license applies to all parts of this software \n    except as documented below:\n    \n    Permission is hereby granted, free of charge, to any person \n    obtaining a copy of this software and associated documentation\n    files (the \"Software\"), to deal in the Software without\n    restriction, including without limitation the rights to use, \n    copy, modify, merge, publish, distribute, sublicense, and/or\n    sell copies of the Software, and to permit persons to whom the\n    Software is furnished to do so, subject to the following\n    conditions:\n    \n    The above copyright notice and this permission notice shall be\n    included in all copies or substantial portions of the Software.\n    \n    THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n    EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES\n    OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n    NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n    HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,\n    WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n    FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR\n    OTHER DEALINGS IN THE SOFTWARE.\n                    </pre>\n                </div>\n            </div>\n        </div>\n    ");

    // Destroy the modal upon close
    dialog.on("hidden.bs.modal", function (e) {
        dialog.remove();
    });

    dialog.modal({
        show: false
    });

    // Fix the backdrop location in the DOM by reparenting it to the chickenpaint container
    dialog.data("bs.modal").$body = $(parent);

    parent.appendChild(dialog[0]);

    this.show = function () {
        dialog.modal("show");
    };
}

module.exports = exports["default"];

},{}],17:[function(require,module,exports){
/*
    ChickenPaint
    
    ChickenPaint is a translation of ChibiPaint from Java to JavaScript
    by Nicholas Sherlock / Chicken Smoothie.
    
    ChibiPaint is Copyright (c) 2006-2008 Marc Schefer

    ChickenPaint is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    ChickenPaint is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with ChickenPaint. If not, see <http://www.gnu.org/licenses/>.
*/

"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports["default"] = CPBoxBlurDialog;

function CPBoxBlurDialog(parent, controller) {
    var dialog = $("<div class=\"modal fade\" tabindex=\"-1\" role=\"dialog\">\n                <div class=\"modal-dialog\">\n                    <div class=\"modal-content\">\n                        <div class=\"modal-header\">\n                            <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\n                                <span aria-hidden=\"true\">&times;</span>\n                            </button>\n                            <h4 class=\"modal-title\">Box blur</h4>\n                        </div>\n                        <div class=\"modal-body\">\n                            <form>\n                                <div class=\"form-group\">\n                                    <label>Blur amount (pixels)</label>\n                                    <input type=\"text\" class=\"form-control chickenpaint-blur-amount\" value=\"3\">\n                                </div>\n                                <div class=\"form-group\">\n                                    <label>Iterations (1-8, larger gives smoother blur)</label>\n                                    <input type=\"text\" class=\"form-control chickenpaint-blur-iterations\" value=\"1\">\n                                </div>\n                            </form>\n                        </div>\n                        <div class=\"modal-footer\">\n                            <button type=\"button\" class=\"btn btn-default\" data-dismiss=\"modal\">Cancel</button>\n                            <button type=\"button\" class=\"btn btn-primary chickenpaint-apply-box-blur\" data-dismiss=\"modal\">Ok</button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        "),
        blurAmountElem = $(".chickenpaint-blur-amount", dialog),
        blurIterationsElem = $(".chickenpaint-blur-iterations", dialog),
        applyButton = $(".chickenpaint-apply-box-blur", dialog);

    this.show = function () {
        dialog.modal("show");
    };

    applyButton.click(function (e) {
        var blur = Math.max(parseInt(blurAmountElem.val(), 10), 1),
            iterations = Math.min(Math.max(parseInt(blurIterationsElem.val(), 10), 1), 8);

        controller.getArtwork().boxBlur(blur, blur, iterations);
    });

    dialog.modal({
        show: false
    }).on('shown.bs.modal', function () {
        blurAmountElem.focus();
    }).on('keypress', function (e) {
        if (e.keyCode == 13) {
            applyButton.click();
        }
    });

    // Fix the backdrop location in the DOM by reparenting it to the chickenpaint container
    dialog.data("bs.modal").$body = $(parent);

    parent.appendChild(dialog[0]);

    /* TODO
    panel.add(new JLabel("Blur amount:"));
    SpinnerModel blurXSM = new SpinnerNumberModel(3, 1, 100, 1);
    
    panel.add(new JLabel("Iterations:"));
    SpinnerModel iterSM = new SpinnerNumberModel(1, 1, 8, 1);
    */
}

module.exports = exports["default"];

},{}],18:[function(require,module,exports){
/*
    ChickenPaint
    
    ChickenPaint is a translation of ChibiPaint from Java to JavaScript
    by Nicholas Sherlock / Chicken Smoothie.
    
    ChibiPaint is Copyright (c) 2006-2008 Marc Schefer

    ChickenPaint is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    ChickenPaint is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with ChickenPaint. If not, see <http://www.gnu.org/licenses/>.
*/

"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports["default"] = CPBrushPalette;

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

var _ChickenPaint = require("../ChickenPaint");

var _ChickenPaint2 = _interopRequireDefault(_ChickenPaint);

var _CPPalette = require("./CPPalette");

var _CPPalette2 = _interopRequireDefault(_CPPalette);

var _CPCheckbox = require("./CPCheckbox");

var _CPCheckbox2 = _interopRequireDefault(_CPCheckbox);

var _CPColorSwatch = require("./CPColorSwatch");

var _CPColorSwatch2 = _interopRequireDefault(_CPColorSwatch);

var _CPSlider = require("./CPSlider");

var _CPSlider2 = _interopRequireDefault(_CPSlider);

var _CPGUIUtils = require("./CPGUIUtils");

var _engineCPLayer = require("../engine/CPLayer");

var _engineCPLayer2 = _interopRequireDefault(_engineCPLayer);

var _utilCPColor = require("../util/CPColor");

var _utilCPColor2 = _interopRequireDefault(_utilCPColor);

var _utilCPPolyfill = require("../util/CPPolyfill");

function sliderCheckboxGroup(checkbox, slider) {
    var group = document.createElement("div");

    group.className = "chickenpaint-checkbox-slider-group";

    group.appendChild(checkbox.getElement());
    group.appendChild(slider.getElement());

    return group;
}

function fillCombobox(combo, optionNames) {
    for (var key in optionNames) {
        var option = document.createElement("option");

        option.appendChild(document.createTextNode(optionNames[key]));
        option.value = key;

        combo.appendChild(option);
    }
}

function CPGradientPreview(controller) {
    var that = this,
        w = 150,
        h = 32,
        canvas = document.createElement("canvas"),
        canvasContext = canvas.getContext("2d"),
        checkerboard = (0, _CPGUIUtils.createCheckerboardPattern)(canvasContext),
        image = new _engineCPLayer2["default"](w, h, ""),
        imageCanvas = document.createElement("canvas"),
        imageCanvasContext = imageCanvas.getContext("2d"),
        gradient = controller.getCurGradient();

    function paint() {
        image.gradient(image.getBounds(), 0, 0, image.width, 0, gradient, true);
        imageCanvasContext.putImageData(image.imageData, 0, 0, 0, 0, w, h);

        canvasContext.fillRect(0, 0, canvas.width, canvas.height);
        canvasContext.drawImage(imageCanvas, 0, 0);
    }

    this.getElement = function () {
        return canvas;
    };

    controller.on("gradientChange", function (_gradient) {
        gradient = _gradient;

        paint();
    });

    canvas.width = imageCanvas.width = w;
    canvas.height = imageCanvas.height = h;

    canvas.className = 'chickenpaint-gradient-preview';

    canvasContext.fillStyle = checkerboard;

    paint();
}

function CPBrushPalette(controller) {
    _CPPalette2["default"].call(this, controller, "brush", "Tool options");

    var brushPanel = new CPBrushPanel(controller),
        gradientPanel = new CPGradientPanel(controller),
        transformPanel = new CPTransformPanel(controller),
        body = this.getBodyElement();

    body.appendChild(brushPanel.getElement());
    body.appendChild(gradientPanel.getElement());
    body.appendChild(transformPanel.getElement());

    controller.on('modeChange', function (mode) {
        brushPanel.getElement().style.display = "none";
        gradientPanel.getElement().style.display = "none";
        transformPanel.getElement().style.display = "none";

        switch (mode) {
            case _ChickenPaint2["default"].M_GRADIENTFILL:
                gradientPanel.getElement().style.display = "block";
                break;
            case _ChickenPaint2["default"].M_TRANSFORM:
                transformPanel.getElement().style.display = "block";
                break;
            default:
                brushPanel.getElement().style.display = "block";
                break;
        }
    });
}

CPBrushPalette.prototype = Object.create(_CPPalette2["default"].prototype);
CPBrushPalette.prototype.constructor = CPBrushPalette;

function CPBrushPanel(controller) {
    var TIP_NAMES = ["Round Pixelated", "Round Hard Edge", "Round Soft", "Square Pixelated", "Square Hard Edge"],
        BRUSH_SIZES = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 15, 20, 25, 30, 35, 40, 45, 50, 60, 70, 80, 90, 100, 125, 150, 175, 200];

    var panel = document.createElement("div"),
        tipCombo = document.createElement("select"),
        alphaCB = new _CPCheckbox2["default"](false, "Control brush opacity with pen pressure"),
        alphaSlider = new _CPSlider2["default"](1, 255),
        sizeCB = new _CPCheckbox2["default"](true, "Control brush size with pen pressure"),
        sizeSlider = new _CPSlider2["default"](1, 200, false, true),
        scatteringCB = new _CPCheckbox2["default"](false, "Control brush scattering with pen pressure"),
        scatteringSlider = new _CPSlider2["default"](0, 1000, false, true),
        resatSlider = new _CPSlider2["default"](0, 100, false, true),
        bleedSlider = new _CPSlider2["default"](0, 100, false, true),
        spacingSlider = new _CPSlider2["default"](0, 100, false, true),
        smoothingSlider = new _CPSlider2["default"](0, 100, false, true),
        brushPreview = new CPBrushPalette.CPBrushPreview(controller);

    function fillWithInitialValues() {
        alphaCB.setValue(controller.getBrushInfo().pressureAlpha);
        alphaSlider.setValue(controller.getAlpha());

        sizeCB.setValue(controller.getBrushInfo().pressureSize);
        sizeSlider.setValue(controller.getBrushSize());

        scatteringCB.setValue(controller.getBrushInfo().pressureScattering);
        scatteringSlider.setValue(~ ~(controller.getBrushInfo().scattering * 100));

        tipCombo.value = controller.getBrushInfo().type;

        resatSlider.setValue(~ ~(controller.getBrushInfo().resat * 100));
        bleedSlider.setValue(~ ~(controller.getBrushInfo().bleed * 100));
        spacingSlider.setValue(~ ~(controller.getBrushInfo().spacing * 100));
        smoothingSlider.setValue(~ ~(controller.getBrushInfo().smoothing * 100));
    }

    this.getElement = function () {
        return panel;
    };

    alphaSlider.title = function (value) {
        return "Opacity: " + value;
    };

    alphaSlider.on('valueChange', function (value) {
        controller.setAlpha(value);
    });

    sizeSlider.title = function (value) {
        return "Brush size: " + value;
    };

    sizeSlider.on('valueChange', function (value) {
        controller.setBrushSize(value);
    });

    resatSlider.title = function (value) {
        return "Color: " + value + "%";
    };

    resatSlider.on('valueChange', function (value) {
        controller.getBrushInfo().resat = value / 100.0;
        controller.callToolListeners();
    });

    bleedSlider.title = function (value) {
        return "Blend: " + value + "%";
    };

    bleedSlider.on('valueChange', function (value) {
        controller.getBrushInfo().bleed = value / 100.0;
        controller.callToolListeners();
    });

    spacingSlider.title = function (value) {
        return "Spacing: " + value + "%";
    };

    spacingSlider.on('valueChange', function (value) {
        controller.getBrushInfo().spacing = value / 100.0;
        controller.callToolListeners();
    });

    scatteringSlider.title = function (value) {
        return "Scattering: " + value + "%";
    };

    scatteringSlider.on('valueChange', function (value) {
        controller.getBrushInfo().scattering = value / 100.0;
        controller.callToolListeners();
    });

    smoothingSlider.title = function (value) {
        return "Smoothing: " + value + "%";
    };

    smoothingSlider.on('valueChange', function (value) {
        controller.getBrushInfo().smoothing = value / 100.0;
        controller.callToolListeners();
    });

    scatteringCB.on('valueChange', function (state) {
        controller.getBrushInfo().pressureScattering = state;
        controller.callToolListeners();
    });

    alphaCB.on('valueChange', function (state) {
        controller.getBrushInfo().pressureAlpha = state;
        controller.callToolListeners();
    });

    sizeCB.on('valueChange', function (state) {
        controller.getBrushInfo().pressureSize = state;
        controller.callToolListeners();
    });

    tipCombo.addEventListener("change", function (e) {
        controller.getBrushInfo().type = parseInt(tipCombo.value, 10);
    });

    tipCombo.className = 'form-control';
    fillCombobox(tipCombo, TIP_NAMES);

    panel.appendChild(tipCombo);

    panel.appendChild(brushPreview.getElement());

    panel.appendChild(sliderCheckboxGroup(sizeCB, sizeSlider));
    panel.appendChild(sliderCheckboxGroup(alphaCB, alphaSlider));
    panel.appendChild(resatSlider.getElement());
    panel.appendChild(bleedSlider.getElement());
    panel.appendChild(spacingSlider.getElement());
    panel.appendChild(sliderCheckboxGroup(scatteringCB, scatteringSlider));
    panel.appendChild(smoothingSlider.getElement());

    fillWithInitialValues();

    controller.on('toolChange', function (tool, toolInfo) {
        alphaSlider.setValue(toolInfo.alpha);
        sizeSlider.setValue(toolInfo.size);
        sizeCB.setValue(toolInfo.pressureSize);
        alphaCB.setValue(toolInfo.pressureAlpha);
        tipCombo.value = toolInfo.type;
        scatteringCB.setValue(toolInfo.pressureScattering);

        if (~ ~(toolInfo.resat * 100.0) != resatSlider.value) {
            resatSlider.setValue(~ ~(toolInfo.resat * 100.0));
        }

        if (~ ~(toolInfo.bleed * 100.0) != bleedSlider.value) {
            bleedSlider.setValue(~ ~(toolInfo.bleed * 100.0));
        }

        if (~ ~(toolInfo.spacing * 100.0) != spacingSlider.value) {
            spacingSlider.setValue(~ ~(toolInfo.spacing * 100.0));
        }

        if (~ ~(toolInfo.scattering * 100.0) != scatteringSlider.value) {
            scatteringSlider.setValue(~ ~(toolInfo.scattering * 100.0));
        }

        if (~ ~(toolInfo.smoothing * 100.0) != smoothingSlider.value) {
            smoothingSlider.setValue(~ ~(toolInfo.smoothing * 100.0));
        }
    });

    key("1,2,3,4,5,6,7,8,9,0", function (event, handler) {
        var shortcut = parseInt(handler.shortcut, 10);

        if (shortcut == 0) {
            shortcut = 10;
        }

        controller.setAlpha(Math.round(shortcut / 10 * 255));
    });

    key("{,[", function () {
        var size = controller.getBrushSize();

        for (var i = BRUSH_SIZES.length - 1; i >= 0; i--) {
            if (size > BRUSH_SIZES[i]) {
                controller.setBrushSize(BRUSH_SIZES[i]);
                break;
            }
        }
    });

    key("},]", function () {
        var size = controller.getBrushSize();

        for (var i = 0; i < BRUSH_SIZES.length; i++) {
            if (size < BRUSH_SIZES[i]) {
                controller.setBrushSize(BRUSH_SIZES[i]);
                break;
            }
        }
    });
}

CPBrushPalette.CPBrushPreview = function (controller) {
    var size = 16,
        canvas = document.createElement("canvas"),
        canvasContext = canvas.getContext("2d"),
        mouseCaptured = false;

    function paint() {
        canvasContext.clearRect(0, 0, canvas.width, canvas.height);

        canvasContext.beginPath();
        canvasContext.arc(canvas.width / 2, canvas.height / 2, size / 2 * window.devicePixelRatio, 0, Math.PI * 2);
        canvasContext.stroke();
    }

    function handleMouseDrag(e) {
        var offset = $(canvas).offset(),
            pt = { x: e.pageX - offset.left, y: e.pageY - offset.top },
            x = pt.x - $(canvas).width() / 2,
            y = pt.y - $(canvas).height() / 2,
            newSize = Math.round(Math.sqrt(x * x + y * y) * 2);

        size = Math.max(1, Math.min(200, newSize));

        paint();
        controller.setBrushSize(size);
    }

    function handleMouseUp(e) {
        if (mouseCaptured) {
            mouseCaptured = false;
            window.removeEventListener('mouseup', handleMouseUp);
            window.removeEventListener('mousemove', handleMouseDrag);
        }
    }

    this.getElement = function () {
        return canvas;
    };

    canvas.addEventListener('mousedown', function (e) {
        if (!mouseCaptured) {
            mouseCaptured = true;

            window.addEventListener('mouseup', handleMouseUp);
            window.addEventListener('mousemove', handleMouseDrag);

            handleMouseDrag(e);
        }
    });

    controller.on("toolChange", function (tool, toolInfo) {
        if (toolInfo.size != size) {
            size = toolInfo.size;
            paint();
        }
    });

    canvas.width = 64;
    canvas.height = 64;

    if (window.devicePixelRatio > 1) {
        canvas.style.width = canvas.width + 'px';
        canvas.style.height = canvas.height + 'px';

        canvas.width = canvas.width * window.devicePixelRatio;
        canvas.height = canvas.height * window.devicePixelRatio;
    }

    canvas.className = 'chickenpaint-brush-preview';

    canvasContext.strokeStyle = 'black';
    canvasContext.lineWidth = 1.0 * window.devicePixelRatio;

    paint();
};

function CPGradientPanel(controller) {
    var gradientPanel = document.createElement("div"),
        gradientPreview = new CPGradientPreview(controller),
        gradientStartSwatch = new _CPColorSwatch2["default"](new _utilCPColor2["default"](controller.getCurGradient()[0] & 0xFFFFFF)),
        gradientEndSwatch = new _CPColorSwatch2["default"](new _utilCPColor2["default"](controller.getCurGradient()[1] & 0xFFFFFF));

    function updateGradient() {
        var gradient = new Array(2);

        gradient[0] = gradientStartSwatch.getAlpha() << 24 | gradientStartSwatch.getColorRgb();
        gradient[1] = gradientEndSwatch.getAlpha() << 24 | gradientEndSwatch.getColorRgb();

        controller.setCurGradient(gradient);
    }

    this.getElement = function () {
        return gradientPanel;
    };

    gradientPanel.className = "chickenpaint-gradient-panel";
    gradientPanel.style.display = "none";

    gradientStartSwatch.on("colorChange", updateGradient);
    gradientStartSwatch.on("alphaChange", updateGradient);
    gradientEndSwatch.on("colorChange", updateGradient);
    gradientEndSwatch.on("alphaChange", updateGradient);

    var title, colorsGroup, colorGroup;

    title = document.createElement("p");
    title.innerHTML = "Gradient";

    gradientPanel.appendChild(title);
    gradientPanel.appendChild(gradientPreview.getElement());

    colorsGroup = document.createElement("div");
    colorsGroup.className = "chickenpaint-gradient-colors";

    colorGroup = document.createElement("div");
    colorGroup.className = "chickenpaint-gradient-start-color";

    colorGroup.appendChild(gradientStartSwatch.getElement());

    colorsGroup.appendChild(colorGroup);

    colorGroup = document.createElement("div");
    colorGroup.className = "chickenpaint-gradient-end-color";

    colorGroup.appendChild(gradientEndSwatch.getElement());

    colorsGroup.appendChild(colorGroup);

    gradientPanel.appendChild(colorsGroup);
}

function CPTransformPanel(controller) {
    var TRANSFORM_INTERPOLATION = { smooth: "Smooth", sharp: "Sharp" };

    var panel = document.createElement("div"),
        acceptButton = document.createElement("button"),
        rejectButton = document.createElement("button"),
        interpCombo = document.createElement("select");

    this.getElement = function () {
        return panel;
    };

    panel.className = "chickenpaint-transform-panel";
    panel.style.display = "none";

    acceptButton.type = "button";
    rejectButton.type = "button";

    acceptButton.className = "btn btn-primary btn-block";
    rejectButton.className = "btn btn-default btn-block";

    acceptButton.innerHTML = "Apply transform";
    rejectButton.innerHTML = "Cancel";

    interpCombo.addEventListener("change", function (e) {
        controller.setTransformInterpolation(this.value);
    });

    interpCombo.className = 'form-control chickenpaint-transform-interpolation';
    fillCombobox(interpCombo, TRANSFORM_INTERPOLATION);

    if ((0, _utilCPPolyfill.isCanvasInterpolationSupported)()) {
        var interpGroup = document.createElement("div"),
            interpLabel = document.createElement("label");

        interpLabel.innerHTML = "Transform style";

        interpGroup.className = "form-group";
        interpGroup.appendChild(interpLabel);
        interpGroup.appendChild(interpCombo);

        panel.appendChild(interpGroup);
    }

    var buttonGroup = document.createElement("div");

    buttonGroup.appendChild(acceptButton);
    buttonGroup.appendChild(rejectButton);

    buttonGroup.className = "form-group";

    panel.appendChild(buttonGroup);

    acceptButton.addEventListener("click", function (e) {
        controller.actionPerformed({ action: "CPTransformAccept" });
        e.preventDefault();
    });

    rejectButton.addEventListener("click", function (e) {
        controller.actionPerformed({ action: "CPTransformReject" });
        e.preventDefault();
    });
}
module.exports = exports["default"];

},{"../ChickenPaint":1,"../engine/CPLayer":11,"../util/CPColor":47,"../util/CPPolyfill":49,"./CPCheckbox":20,"./CPColorSwatch":24,"./CPGUIUtils":26,"./CPPalette":32,"./CPSlider":37}],19:[function(require,module,exports){
/*
    ChickenPaint
    
    ChickenPaint is a translation of ChibiPaint from Java to JavaScript
    by Nicholas Sherlock / Chicken Smoothie.
    
    ChibiPaint is Copyright (c) 2006-2008 Marc Schefer

    ChickenPaint is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    ChickenPaint is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with ChickenPaint. If not, see <http://www.gnu.org/licenses/>.
*/

"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports["default"] = CPCanvas;

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

var _utilCPRect = require("../util/CPRect");

var _utilCPRect2 = _interopRequireDefault(_utilCPRect);

var _utilCPTransform = require("../util/CPTransform");

var _utilCPTransform2 = _interopRequireDefault(_utilCPTransform);

var _utilCPWacomTablet = require("../util/CPWacomTablet");

var _utilCPWacomTablet2 = _interopRequireDefault(_utilCPWacomTablet);

var _utilCPBezier = require("../util/CPBezier");

var _utilCPBezier2 = _interopRequireDefault(_utilCPBezier);

var _utilThrottleDebounce = require("../util/throttle-debounce");

var _utilCPPolygon = require("../util/CPPolygon");

var _utilCPPolygon2 = _interopRequireDefault(_utilCPPolygon);

var _utilCPPolyfill = require("../util/CPPolyfill");

var _ChickenPaint = require("../ChickenPaint");

var _ChickenPaint2 = _interopRequireDefault(_ChickenPaint);

var _engineCPBrushInfo = require("../engine/CPBrushInfo");

var _engineCPBrushInfo2 = _interopRequireDefault(_engineCPBrushInfo);

var _CPGUIUtils = require("./CPGUIUtils");

var _CPScrollbar = require("./CPScrollbar");

var _CPScrollbar2 = _interopRequireDefault(_CPScrollbar);

var _utilCPVector = require("../util/CPVector");

var _utilCPVector2 = _interopRequireDefault(_utilCPVector);

function CPModeStack() {
    this.modes = [];
}

/* We have two distinguished mode indexes which correspond to the CPDefaultMode and the mode that the user has selected
 * in the tool palette (the global drawing mode). On top of that are other transient modes.
 */
CPModeStack.MODE_INDEX_DEFAULT = 0;
CPModeStack.MODE_INDEX_USER = 1;

CPModeStack.prototype.setMode = function (index, newMode) {
    var oldMode = this.modes[index];

    if (oldMode == newMode) {
        return;
    }

    if (oldMode) {
        oldMode.leave();
    }

    this.modes[index] = newMode;
    newMode.enter();
};

CPModeStack.prototype.setDefaultMode = function (newMode) {
    newMode.transient = false;
    newMode.capture = false;

    this.setMode(CPModeStack.MODE_INDEX_DEFAULT, newMode);
};

CPModeStack.prototype.setUserMode = function (newMode) {
    // Leave any transient modes that were on top of the user mode
    for (var i = this.modes.length - 1; i > CPModeStack.MODE_INDEX_USER; i--) {
        this.modes[i].leave();
        this.modes.splice(i, 1);
    }

    newMode.transient = false;
    newMode.capture = false;

    this.setMode(CPModeStack.MODE_INDEX_USER, newMode);
};

/**
 * Deliver the event with the given name and array of parameters to the mode stack.
 *
 * @param event
 * @param params
 * @returns {boolean} True if any mode captured the event
 */
CPModeStack.prototype.deliverEvent = function (event, params) {
    for (var i = this.modes.length - 1; i >= 0; i--) {
        var mode = this.modes[i];

        if (mode[event].apply(mode, params) || mode.capture && event != "paint") {
            /* If the event was handled, don't try to deliver it to anything further up the stack */
            return true;
        }
    }

    return false;
};

// We can call these routines to deliver events that bubble up the mode stack
var _arr = ["mouseDown", "mouseUp"];

var _loop = function () {
    var eventName = _arr[_i];
    CPModeStack.prototype[eventName] = function (e, button, pressure) {
        this.deliverEvent(eventName, [e, button, pressure]);
    };
};

for (var _i = 0; _i < _arr.length; _i++) {
    _loop();
}

var _arr2 = ["mouseDrag", "mouseMove"];

var _loop2 = function () {
    var eventName = _arr2[_i2];
    CPModeStack.prototype[eventName] = function (e, pressure) {
        this.deliverEvent(eventName, [e, pressure]);
    };
};

for (var _i2 = 0; _i2 < _arr2.length; _i2++) {
    _loop2();
}

var _arr3 = ["keyDown", "keyUp"];

var _loop3 = function () {
    var eventName = _arr3[_i3];
    CPModeStack.prototype[eventName] = function (e) {
        if (this.deliverEvent(eventName, [e])) {
            // Swallow handled keypresses
            e.preventDefault();
        }
    };
};

for (var _i3 = 0; _i3 < _arr3.length; _i3++) {
    _loop3();
}

CPModeStack.prototype.paint = function (context) {
    this.deliverEvent("paint", [context]);
};

/**
 * Add a mode to the top of the mode stack.
 *
 * @param mode {CPMode}
 * @param transient {boolean} Set to true if the mode is expected to remove itself from stack upon completion.
 */
CPModeStack.prototype.push = function (mode, transient) {
    var previousTop = this.peek();

    if (previousTop) {
        previousTop.suspend();
    }

    mode.transient = transient;
    mode.capture = false;

    mode.enter();

    this.modes.push(mode);
};

CPModeStack.prototype.peek = function () {
    if (this.modes.length > 0) {
        return this.modes[this.modes.length - 1];
    } else {
        return null;
    }
};

/**
 * Remove the node at the top of the stack and return the new top of the stack.
 *
 * @returns {*}
 */
CPModeStack.prototype.pop = function () {
    var outgoingMode = this.modes.pop(),
        newTop = this.peek();

    if (outgoingMode) {
        outgoingMode.leave();
    }

    if (newTop) {
        newTop.resume();
    }

    return newTop;
};

function CPCanvas(controller) {
    var BUTTON_PRIMARY = 0,
        BUTTON_WHEEL = 1,
        BUTTON_SECONDARY = 2,
        MIN_ZOOM = 0.10,
        MAX_ZOOM = 16.0,
        CURSOR_DEFAULT = "default",
        CURSOR_PANNABLE = "grab",
        CURSOR_PANNING = "grabbing",
        CURSOR_CROSSHAIR = "crosshair",
        CURSOR_MOVE = "move",
        CURSOR_NESW_RESIZE = "nesw-resize",
        CURSOR_NWSE_RESIZE = "nwse-resize",
        CURSOR_NS_RESIZE = "ns-resize",
        CURSOR_EW_RESIZE = "ew-resize";

    var that = this,
        canvasContainer = document.createElement("div"),
        canvasContainerTop = document.createElement("div"),
        canvasContainerBottom = document.createElement("div"),

    // Our canvas that fills the entire screen
    canvas = document.createElement("canvas"),
        canvasContext = canvas.getContext("2d"),

    // Our cache of the artwork's fusion to be drawn onto our main canvas using our current transform
    artworkCanvas = document.createElement("canvas"),
        artworkCanvasContext = artworkCanvas.getContext("2d"),
        checkerboardPattern = (0, _CPGUIUtils.createCheckerboardPattern)(canvasContext),
        artwork = controller.getArtwork(),

    // Canvas transformations
    zoom = 1,
        offsetX = 0,
        offsetY = 0,
        canvasRotation = 0.0,
        transform = new _utilCPTransform2["default"](),
        interpolation = false,

    // Grid options
    showGrid = false,
        gridSize = 32,
        mouseX = 0,
        mouseY = 0,
        mouseIn = false,
        mouseDown = [false, false, false],
        /* Track each button independently */wacomPenDown = false,

    /* The area of the document that should have its layers fused and repainted to the screen
     * (i.e. an area modified by drawing tools). 
     * 
     * Initially set to the size of the artwork so we can repaint the whole thing.
     */
    artworkUpdateRegion = new _utilCPRect2["default"](0, 0, artwork.width, artwork.height),

    /**
     * The area of the canvas that should be repainted to the screen during the next repaint internal (in canvas
     * coordinates).
     */
    repaintRegion = new _utilCPRect2["default"](0, 0, 0, 0),
        scheduledRepaint = false,

    //
    // Modes system: modes control the way the GUI is reacting to the user input
    // All the tools are implemented through modes
    //

    defaultMode,
        colorPickerMode,
        panMode,
        rotateCanvasMode,
        floodFillMode,
        gradientFillMode,
        rectSelectionMode,
        moveToolMode,
        transformMode,

    // this must correspond to the stroke modes defined in CPToolInfo
    drawingModes = [],
        modeStack = new CPModeStack(),
        curDrawMode,
        curSelectedMode,
        horzScroll = new _CPScrollbar2["default"](false),
        vertScroll = new _CPScrollbar2["default"](true),
        tablet = _utilCPWacomTablet2["default"].getRef();

    Math.sign = Math.sign || function (x) {
        x = +x; // convert to a number
        if (x === 0 || isNaN(x)) {
            return x;
        }
        return x > 0 ? 1 : -1;
    };

    // Parent class with empty event handlers for those drawing modes that don't need every event
    function CPMode() {}

    /**
        * True if this mode will be exiting the mode stack as soon as the current interation is complete.
        *
        * @type {boolean}
        */
    CPMode.prototype.transient = false;

    /**
        * If true, no input events will be sent to any modes underneath this one (event stream is captured).
        *
        * Painting events will continue to bubble.
        *
        * @type {boolean}
        */
    CPMode.prototype.capture = false;

    CPMode.prototype.enter = function () {
        setCursor(CURSOR_DEFAULT);
    };

    CPMode.prototype.leave = function () {
        this.capture = false;
    };

    CPMode.prototype.mouseMove = CPMode.prototype.paint = CPMode.prototype.mouseDown = CPMode.prototype.mouseDrag = CPMode.prototype.mouseUp = CPMode.prototype.keyDown = CPMode.prototype.suspend = CPMode.prototype.resume = CPMode.prototype.keyUp = function () {};

    //
    // Default UI Mode when not doing anything: used to start the other modes
    //

    function CPDefaultMode() {}

    CPDefaultMode.prototype = Object.create(CPMode.prototype);
    CPDefaultMode.prototype.constructor = CPDefaultMode;

    CPDefaultMode.prototype.mouseDown = function (e, button, pressure) {
        var spacePressed = key.isPressed("space");

        if (!spacePressed && (button == BUTTON_SECONDARY || button == BUTTON_PRIMARY && e.altKey)) {
            modeStack.push(colorPickerMode, true);
            // Avoid infinite recursion by only delivering the event to the new mode (don't let it bubble back to us!)
            modeStack.peek().mouseDown(e, button, pressure);
        } else if (button == BUTTON_WHEEL || spacePressed && button == BUTTON_PRIMARY) {
            if (e.altKey) {
                modeStack.push(rotateCanvasMode, true);
                modeStack.peek().mouseDown(e, button, pressure);
            } else {
                modeStack.push(panMode, true);
                modeStack.peek().mouseDown(e, button, pressure);
            }
        }
    };

    CPDefaultMode.prototype.keyDown = function (e) {
        if (e.keyCode == 32 /* Space */) {
                if (e.altKey) {
                    modeStack.push(rotateCanvasMode, true);
                    modeStack.peek().keyDown(e);
                } else {
                    // We can start the pan mode before the mouse button is even pressed, so that the "grabbable" cursor appears
                    modeStack.push(panMode, true);
                    modeStack.peek().keyDown(e);
                }
                return true;
            }
    };

    /**
        * A base for the three drawing modes, so they can all share the same brush-preview-circle drawing behaviour.
        *
        * @constructor
        */
    function CPDrawingMode() {
        this.shouldPaintBrushPreview = false;

        /* The last rectangle we dirtied with a brush preview circle, or null if one hasn't been drawn yet */
        this.oldPreviewRect = null;
    }

    CPDrawingMode.prototype = Object.create(CPMode.prototype);
    CPDrawingMode.prototype.constructor = CPDrawingMode;

    /**
     * Get a rectangle that encloses the preview brush, in screen coordinates.
     */
    CPDrawingMode.prototype.getBrushPreviewOval = function () {
        var brushSize = controller.getBrushSize() * zoom;

        return new _utilCPRect2["default"](mouseX - brushSize / 2, mouseY - brushSize / 2, mouseX + brushSize / 2, mouseY + brushSize / 2);
    };

    /**
     * Queues up the brush preview oval to be drawn.
     */
    CPDrawingMode.prototype.queueBrushPreview = function () {
        /* If we're not the top-most mode, it's unlikely that left clicking will drawing for us, so don't consider
         * painting the brush preview
         */
        if (modeStack.peek() != this) {
            return;
        }

        this.shouldPaintBrushPreview = true;

        var rect = this.getBrushPreviewOval();

        rect.grow(2, 2);

        // If a brush preview was drawn previously, stretch the repaint region to remove that old copy
        if (this.oldPreviewRect != null) {
            rect.union(this.oldPreviewRect);
            this.oldPreviewRect = null;
        }

        repaintRect(rect);
    };

    /**
        * Erase the brush preview if one had been drawn
        */
    CPDrawingMode.prototype.eraseBrushPreview = function () {
        this.shouldPaintBrushPreview = false;

        if (this.oldPreviewRect != null) {
            repaintRect(this.oldPreviewRect);
            this.oldPreviewRect = null;
        }
    };

    CPDrawingMode.prototype.mouseMove = function (e, pressure) {
        this.queueBrushPreview();
    };

    CPDrawingMode.prototype.enter = function () {
        CPMode.prototype.enter.call(this);

        if (mouseIn) {
            this.queueBrushPreview();
        }
    };

    CPDrawingMode.prototype.leave = function () {
        CPMode.prototype.leave.call(this);
        this.eraseBrushPreview();
    };

    CPDrawingMode.prototype.suspend = CPDrawingMode.prototype.leave;
    CPDrawingMode.prototype.resume = CPDrawingMode.prototype.enter;

    CPDrawingMode.prototype.paint = function () {
        if (this.shouldPaintBrushPreview) {
            this.shouldPaintBrushPreview = false;

            var r = this.getBrushPreviewOval();

            canvasContext.beginPath();

            canvasContext.arc((r.left + r.right) / 2, (r.top + r.bottom) / 2, r.getWidth() / 2, 0, Math.PI * 2);

            canvasContext.stroke();

            r.grow(2, 2);

            if (this.oldPreviewRect == null) {
                this.oldPreviewRect = r;
            } else {
                this.oldPreviewRect.union(r);
            }
        }
    };

    function CPFreehandMode() {
        CPDrawingMode.call(this);

        this.smoothMouse = { x: 0.0, y: 0.0 };
    }

    CPFreehandMode.prototype = Object.create(CPDrawingMode.prototype);
    CPFreehandMode.prototype.constructor = CPFreehandMode;

    CPFreehandMode.prototype.mouseDown = function (e, button, pressure) {
        if (!this.capture && button == BUTTON_PRIMARY && !e.altKey && !key.isPressed("space") && shouldDrawToThisLayer()) {
            var pf = coordToDocument({ x: mouseX, y: mouseY });

            this.eraseBrushPreview();

            this.capture = true;
            artwork.beginStroke(pf.x, pf.y, pressure);

            this.smoothMouse = pf;

            return true;
        }
    };

    CPFreehandMode.prototype.mouseDrag = function (e, pressure) {
        if (this.capture) {
            var pf = coordToDocument({ x: mouseX, y: mouseY }),
                smoothing = Math.min(0.999, Math.pow(controller.getBrushInfo().smoothing, 0.3));

            this.smoothMouse.x = (1.0 - smoothing) * pf.x + smoothing * this.smoothMouse.x;
            this.smoothMouse.y = (1.0 - smoothing) * pf.y + smoothing * this.smoothMouse.y;

            artwork.continueStroke(this.smoothMouse.x, this.smoothMouse.y, pressure);

            return true;
        } else {
            this.mouseMove(e);
        }
    };

    CPFreehandMode.prototype.mouseUp = function (e, button, pressure) {
        if (this.capture) {
            if (button == BUTTON_PRIMARY) {
                this.capture = false;
                artwork.endStroke();
            }
            return true;
        }
    };

    function CPLineMode() {
        var dragLineFrom,
            dragLineTo,
            LINE_PREVIEW_WIDTH = 1;

        this.mouseDown = function (e, button, pressure) {
            if (!this.capture && button == BUTTON_PRIMARY && !e.altKey && !key.isPressed("space") && shouldDrawToThisLayer()) {
                this.capture = true;
                dragLineFrom = dragLineTo = { x: mouseX + 0.5, y: mouseY + 0.5 };

                this.eraseBrushPreview();

                return true;
            }
        };

        this.mouseDrag = function (e) {
            if (this.capture) {
                var
                // The old line position that we'll invalidate for redraw
                invalidateRect = new _utilCPRect2["default"](Math.min(dragLineFrom.x, dragLineTo.x) - LINE_PREVIEW_WIDTH - 1, Math.min(dragLineFrom.y, dragLineTo.y) - LINE_PREVIEW_WIDTH - 1, Math.max(dragLineFrom.x, dragLineTo.x) + LINE_PREVIEW_WIDTH + 1 + 1, Math.max(dragLineFrom.y, dragLineTo.y) + LINE_PREVIEW_WIDTH + 1 + 1);

                dragLineTo = { x: mouseX + 0.5, y: mouseY + 0.5 }; // Target centre of pixel

                if (e.shiftKey) {
                    // Snap to nearest 45 degrees
                    var snap = Math.PI / 4,
                        angle = Math.round(Math.atan2(dragLineTo.y - dragLineFrom.y, dragLineTo.x - dragLineFrom.x) / snap);

                    switch (angle) {
                        case 0:
                        case 4:
                            dragLineTo.y = dragLineFrom.y;
                            break;

                        case 2:
                        case 6:
                            dragLineTo.x = dragLineFrom.x;
                            break;

                        default:
                            angle *= snap;

                            var length = Math.sqrt((dragLineTo.y - dragLineFrom.y) * (dragLineTo.y - dragLineFrom.y) + (dragLineTo.x - dragLineFrom.x) * (dragLineTo.x - dragLineFrom.x));

                            dragLineTo.x = dragLineFrom.x + length * Math.cos(angle);
                            dragLineTo.y = dragLineFrom.y + length * Math.sin(angle);
                    }
                }

                // The new line position
                invalidateRect.union(new _utilCPRect2["default"](Math.min(dragLineFrom.x, dragLineTo.x) - LINE_PREVIEW_WIDTH - 1, Math.min(dragLineFrom.y, dragLineTo.y) - LINE_PREVIEW_WIDTH - 1, Math.max(dragLineFrom.x, dragLineTo.x) + LINE_PREVIEW_WIDTH + 1 + 1, Math.max(dragLineFrom.y, dragLineTo.y) + LINE_PREVIEW_WIDTH + 1 + 1));

                repaintRect(invalidateRect);

                return true;
            } else {
                this.mouseMove.call(this, e);
            }
        };

        this.mouseUp = function (e, button, pressure) {
            if (this.capture && button == BUTTON_PRIMARY) {
                var from = coordToDocument(dragLineFrom),
                    to = coordToDocument(dragLineTo);

                this.capture = false;

                this.drawLine(from, to);

                var invalidateRect = new _utilCPRect2["default"](Math.min(dragLineFrom.x, dragLineTo.x) - LINE_PREVIEW_WIDTH - 1, Math.min(dragLineFrom.y, dragLineTo.y) - LINE_PREVIEW_WIDTH - 1, Math.max(dragLineFrom.x, dragLineTo.x) + LINE_PREVIEW_WIDTH + 1 + 1, Math.max(dragLineFrom.y, dragLineTo.y) + LINE_PREVIEW_WIDTH + 1 + 1);

                repaintRect(invalidateRect);

                return true;
            }
        };

        this.paint = function () {
            if (this.capture) {
                canvasContext.lineWidth = LINE_PREVIEW_WIDTH;
                canvasContext.beginPath();
                canvasContext.moveTo(dragLineFrom.x, dragLineFrom.y);
                canvasContext.lineTo(dragLineTo.x, dragLineTo.y);
                canvasContext.stroke();
            } else {
                // Draw the regular brush preview circle
                CPDrawingMode.prototype.paint.call(this);
            }
        };

        CPDrawingMode.call(this);
    }

    CPLineMode.prototype = Object.create(CPDrawingMode.prototype);
    CPLineMode.prototype.constructor = CPLineMode;

    CPLineMode.prototype.drawLine = function (from, to) {
        artwork.beginStroke(from.x, from.y, 1);
        artwork.continueStroke(to.x, to.y, 1);
        artwork.endStroke();
    };

    function CPBezierMode() {
        var BEZIER_POINTS = 500,
            BEZIER_POINTS_PREVIEW = 100;

        var dragBezierMode = 0,
            // 0 Initial drag, 1 first control point, 2 second point
        dragBezierP0,
            dragBezierP1,
            dragBezierP2,
            dragBezierP3;

        this.mouseDown = function (e, button, pressure) {
            if (!this.capture && button == BUTTON_PRIMARY && !e.altKey && !key.isPressed("space") && shouldDrawToThisLayer()) {
                var p = coordToDocument({ x: mouseX, y: mouseY });

                dragBezierMode = 0;
                dragBezierP0 = dragBezierP1 = dragBezierP2 = dragBezierP3 = p;

                this.eraseBrushPreview();

                return true;
            }
        };

        // Handles the first part of the Bezier where the user drags out a straight line
        this.mouseDrag = function (e) {
            if (this.capture && dragBezierMode == 0) {
                var p = coordToDocument({ x: mouseX, y: mouseY });

                dragBezierP2 = dragBezierP3 = p;

                that.repaintAll();

                return true;
            } else {
                this.mouseMove.call(this, e);
            }
        };

        this.mouseUp = function (e, button, pressure) {
            if (this.capture && button == BUTTON_PRIMARY) {
                if (dragBezierMode == 0) {
                    dragBezierMode = 1;
                } else if (dragBezierMode == 1) {
                    dragBezierMode = 2;
                } else if (dragBezierMode == 2) {
                    this.capture = false;

                    var p0 = dragBezierP0,
                        p1 = dragBezierP1,
                        p2 = dragBezierP2,
                        p3 = dragBezierP3,
                        bezier = new _utilCPBezier2["default"]();

                    bezier.x0 = p0.x;
                    bezier.y0 = p0.y;
                    bezier.x1 = p1.x;
                    bezier.y1 = p1.y;
                    bezier.x2 = p2.x;
                    bezier.y2 = p2.y;
                    bezier.x3 = p3.x;
                    bezier.y3 = p3.y;

                    var x = new Array(BEZIER_POINTS),
                        y = new Array(BEZIER_POINTS);

                    bezier.compute(x, y, BEZIER_POINTS);

                    artwork.beginStroke(x[0], y[0], 1);
                    for (var i = 1; i < BEZIER_POINTS; i++) {
                        artwork.continueStroke(x[i], y[i], 1);
                    }
                    artwork.endStroke();
                    that.repaintAll();
                }

                return true;
            }
        };

        this.mouseMove = function (e, pressure) {
            if (this.capture) {
                var p = coordToDocument({ x: mouseX, y: mouseY });

                if (dragBezierMode == 1) {
                    dragBezierP1 = p;
                } else if (dragBezierMode == 2) {
                    dragBezierP2 = p;
                }
                that.repaintAll(); // FIXME: repaint only the bezier region

                return true;
            } else {
                // Draw the normal brush preview while not in the middle of a bezier operation
                CPDrawingMode.prototype.mouseMove.call(this, e, pressure);
            }
        };

        this.paint = function () {
            if (this.capture) {
                var bezier = new _utilCPBezier2["default"](),
                    p0 = coordToDisplay(dragBezierP0),
                    p1 = coordToDisplay(dragBezierP1),
                    p2 = coordToDisplay(dragBezierP2),
                    p3 = coordToDisplay(dragBezierP3);

                bezier.x0 = p0.x;
                bezier.y0 = p0.y;
                bezier.x1 = p1.x;
                bezier.y1 = p1.y;
                bezier.x2 = p2.x;
                bezier.y2 = p2.y;
                bezier.x3 = p3.x;
                bezier.y3 = p3.y;

                var x = new Array(BEZIER_POINTS_PREVIEW),
                    y = new Array(BEZIER_POINTS_PREVIEW);

                bezier.compute(x, y, BEZIER_POINTS_PREVIEW);

                canvasContext.beginPath();

                canvasContext.moveTo(x[0], y[0]);
                for (var i = 1; i < BEZIER_POINTS_PREVIEW; i++) {
                    canvasContext.lineTo(x[i], y[i]);
                }

                canvasContext.moveTo(~ ~p0.x, ~ ~p0.y);
                canvasContext.lineTo(~ ~p1.x, ~ ~p1.y);

                canvasContext.moveTo(~ ~p2.x, ~ ~p2.y);
                canvasContext.lineTo(~ ~p3.x, ~ ~p3.y);

                canvasContext.stroke();
            } else {
                // Paint the regular brush preview
                CPDrawingMode.prototype.paint.call(this);
            }
        };

        CPDrawingMode.call(this);
    }

    CPBezierMode.prototype = Object.create(CPDrawingMode.prototype);
    CPBezierMode.prototype.constructor = CPBezierMode;

    function CPColorPickerMode() {
        var mouseButton;

        this.mouseDown = function (e, button, pressure) {
            if (this.capture) {
                return true;
            } else if (!key.isPressed("space") && (button == BUTTON_PRIMARY && (!this.transient || e.altKey) || button == BUTTON_SECONDARY)) {
                mouseButton = button;
                this.capture = true;

                setCursor(CURSOR_CROSSHAIR);

                this.mouseDrag(e);

                return true;
            } else if (this.transient) {
                // If we're not sampling and we get a button not intended for us, we probably shouldn't be on the stack
                modeStack.pop();
            }
        };

        this.mouseDrag = function (e) {
            if (this.capture) {
                var pf = coordToDocument({ x: mouseX, y: mouseY });

                if (artwork.isPointWithin(pf.x, pf.y)) {
                    controller.setCurColorRgb(artwork.colorPicker(pf.x, pf.y));
                }

                return true;
            }
        };

        this.mouseUp = function (e, button, pressure) {
            if (this.capture && button == mouseButton) {
                mouseButton = -1;
                this.capture = false;
                setCursor(CURSOR_DEFAULT);

                if (this.transient) {
                    modeStack.pop();
                }

                return true;
            }
        };

        this.enter = function () {
            CPMode.prototype.enter.call(this);
            mouseButton = -1;
        };
    }

    CPColorPickerMode.prototype = Object.create(CPMode.prototype);
    CPColorPickerMode.prototype.constructor = CPColorPickerMode;

    function CPPanMode() {
        var panningX, panningY, panningOffset, panningButton;

        this.keyDown = function (e) {
            if (e.keyCode == 32 /* Space */) {
                    // If we're not already panning, then advertise that a left-click would pan
                    if (!this.capture) {
                        setCursor(CURSOR_PANNABLE);
                    }

                    return true;
                }
        };

        this.keyUp = function (e) {
            if (this.transient && panningButton != BUTTON_WHEEL && e.keyCode == 32 /* Space */) {
                    setCursor(CURSOR_DEFAULT);

                    modeStack.pop(); // yield control to the default mode

                    return true;
                }
        };

        this.mouseDown = function (e, button, pressure) {
            if (this.capture) {
                return true;
            } else if (button == BUTTON_WHEEL || key.isPressed("space") && button == BUTTON_PRIMARY) {
                this.capture = true;
                panningButton = button;
                panningX = e.pageX;
                panningY = e.pageY;
                panningOffset = that.getOffset();
                setCursor(CURSOR_PANNING);

                return true;
            } else if (this.transient) {
                // If we're not panning and we get a button not intended for us, we probably shouldn't be on the stack
                modeStack.pop();
            }
        };

        this.mouseDrag = function (e) {
            if (this.capture) {
                that.setOffset(panningOffset.x + e.pageX - panningX, panningOffset.y + e.pageY - panningY);

                return true;
            }
        };

        this.mouseUp = function (e, button, pressure) {
            if (this.capture && button == panningButton) {
                panningButton = -1;
                this.capture = false;

                if (this.transient && !key.isPressed("space")) {
                    setCursor(CURSOR_DEFAULT);

                    modeStack.pop();
                }

                return true;
            }
        };

        this.enter = function () {
            setCursor(CURSOR_PANNABLE);
        };
    }

    CPPanMode.prototype = Object.create(CPMode.prototype);
    CPPanMode.prototype.constructor = CPFloodFillMode;

    function CPFloodFillMode() {}

    CPFloodFillMode.prototype = Object.create(CPMode.prototype);
    CPFloodFillMode.prototype.constructor = CPFloodFillMode;

    CPFloodFillMode.prototype.mouseDown = function (e, button, pressure) {
        if (button == BUTTON_PRIMARY && !e.altKey && !key.isPressed("space") && shouldDrawToThisLayer()) {
            var pf = coordToDocument({ x: mouseX, y: mouseY });

            if (artwork.isPointWithin(pf.x, pf.y)) {
                artwork.floodFill(pf.x, pf.y);
                that.repaintAll();
            }

            return true;
        }
    };

    function CPRectSelectionMode() {
        var firstClick,
            curRect = new _utilCPRect2["default"](0, 0, 0, 0),
            selectingButton = -1;

        this.mouseDown = function (e, button, pressure) {
            if (!this.capture && button == BUTTON_PRIMARY && !e.altKey && !key.isPressed("space")) {
                var p = coordToDocumentInt({ x: mouseX, y: mouseY });

                selectingButton = button;

                curRect.makeEmpty();
                firstClick = p;

                that.repaintAll();

                this.capture = true;

                return true;
            }
        };

        this.mouseDrag = function (e) {
            if (!this.capture) return false;

            var p = coordToDocumentInt({ x: mouseX, y: mouseY }),
                square = e.shiftKey,
                squareDist = ~ ~Math.max(Math.abs(p.x - firstClick.x), Math.abs(p.y - firstClick.y));

            if (p.x >= firstClick.x) {
                curRect.left = firstClick.x;
                curRect.right = (square ? firstClick.x + squareDist : p.x) + 1;
            } else {
                curRect.left = square ? firstClick.x - squareDist : p.x;
                curRect.right = firstClick.x + 1;
            }

            if (p.y >= firstClick.y) {
                curRect.top = firstClick.y;
                curRect.bottom = (square ? firstClick.y + squareDist : p.y) + 1;
            } else {
                curRect.top = square ? firstClick.y - squareDist : p.y;
                curRect.bottom = firstClick.y + 1;
            }

            that.repaintAll();

            return true;
        };

        this.mouseUp = function (e, button, pressure) {
            if (this.capture && button == selectingButton) {
                artwork.rectangleSelection(curRect);
                curRect.makeEmpty();

                that.repaintAll();

                this.capture = false;
                selectingButton = -1;

                return true;
            }
        };

        this.paint = function () {
            if (!curRect.isEmpty()) {
                canvasContext.lineWidth = 1;
                plotSelectionRect(canvasContext, curRect);
            }
        };
    };

    CPRectSelectionMode.prototype = Object.create(CPMode.prototype);
    CPRectSelectionMode.prototype.constructor = CPRectSelectionMode;

    function CPMoveToolMode() {
        var lastPoint,
            copyMode,
            firstMove = false;

        this.mouseDown = function (e, button, pressure) {
            if (!this.capture && button == BUTTON_PRIMARY && !e.altKey && !key.isPressed("space")) {
                lastPoint = coordToDocument({ x: mouseX, y: mouseY });

                copyMode = e.altKey;
                firstMove = true;
                this.capture = true;

                return true;
            }
        };

        this.mouseDrag = (0, _utilThrottleDebounce.throttle)(25, function (e) {
            if (this.capture) {
                var p = coordToDocument({ x: mouseX, y: mouseY }),
                    moveFloat = { x: p.x - lastPoint.x, y: p.y - lastPoint.y },
                    moveInt = { x: ~ ~moveFloat.x, y: ~ ~moveFloat.y }; // Round towards zero

                artwork.move(moveInt.x, moveInt.y, copyMode && firstMove);

                firstMove = false;

                /*
                 * Nudge the last point by the remainder we weren't able to move this iteration (due to move() only
                 * accepting integer offsets). This'll carry that fractional part of the move over for next iteration.
                 */
                lastPoint.x = p.x - (moveFloat.x - moveInt.x);
                lastPoint.y = p.y - (moveFloat.y - moveInt.y);

                return true;
            }
        });

        this.mouseUp = function (e, button, pressure) {
            if (this.capture && button == BUTTON_PRIMARY) {
                this.capture = false;
                if (this.transient) {
                    modeStack.pop();
                }
                return true;
            }
        };
    }

    CPMoveToolMode.prototype = Object.create(CPMode.prototype);
    CPMoveToolMode.prototype.constructor = CPMoveToolMode;

    CPMoveToolMode.prototype.mouseMove = function (e) {
        if (!key.isPressed("space") && !e.altKey) {
            setCursor(CURSOR_MOVE);
            return true;
        }
    };

    CPMoveToolMode.prototype.enter = function () {
        setCursor(CURSOR_MOVE);
    };

    function CPTransformMode() {
        var HANDLE_RADIUS = 3,
            DRAG_NONE = -1,
            DRAG_ROTATE = -2,
            DRAG_MOVE = -3,
            DRAG_NW_CORNER = 0,
            DRAG_N_EDGE = 1,
            DRAG_NE_CORNER = 2,
            DRAG_E_EDGE = 3,
            DRAG_SE_CORNER = 4,
            DRAG_S_EDGE = 5,
            DRAG_SW_CORNER = 6,
            DRAG_W_EDGE = 7;

        var
        /** @type {CPTransform} The current transformation */
        affine,

        /** @type {CPRect} The initial document rectangle to transform */
        srcRect,

        /** @type {CPPolygon} The initial transform rect */
        origCornerPoints,

        /** @type {CPPolygon} The current corners of the transform rect in document space */
        cornerPoints,
            draggingMode = DRAG_NONE,
            lastDragPointDisplay,
            lastDragPointDoc,

        // Keep track of how many degrees we've rotated so far during this transformation
        rotationAccumulator;

        /**
               * Get the polygon that represents the current transform result area in display coordinates.
               *
               * @returns {CPPolygon}
               */
        function cornersToDisplayPolygon() {
            return cornerPoints.getTransformed(transform);
        }

        function averagePoints(p1, p2) {
            return { x: (p1.x + p2.x) / 2, y: (p1.y + p2.y) / 2 };
        }

        function roundPoint(p) {
            return { x: Math.round(p.x), y: Math.round(p.y) };
        }

        /**
               * Decide which drag action should be taken if our mouse was pressed in the given position.
               *
               * @param {CPPolygon} corners - The corners of the current transform area
               * @param mouse - The mouse point
               * @returns {number} A DRAG_* constant
               */
        function classifyDragAction(corners, mouse) {
            var HANDLE_CAPTURE_RADIUS = 7,
                HANDLE_CAPTURE_RADIUS_SQR = HANDLE_CAPTURE_RADIUS * HANDLE_CAPTURE_RADIUS,
                EDGE_CAPTURE_RADIUS = HANDLE_CAPTURE_RADIUS,
                EDGE_CAPTURE_RADIUS_SQR = EDGE_CAPTURE_RADIUS * EDGE_CAPTURE_RADIUS;

            // Are we dragging a corner?
            for (var i = 0; i < corners.points.length; i++) {
                if ((mouse.x - corners.points[i].x) * (mouse.x - corners.points[i].x) + (mouse.y - corners.points[i].y) * (mouse.y - corners.points[i].y) <= HANDLE_CAPTURE_RADIUS_SQR) {
                    return i * 2;
                }
            }

            // Are we dragging an edge?
            for (var i = 0; i < corners.points.length; i++) {
                var edgeP1 = corners.points[i],
                    edgeP2 = corners.points[(i + 1) % corners.points.length],
                    vEdge = new _utilCPVector2["default"](edgeP2.x - edgeP1.x, edgeP2.y - edgeP1.y),
                    vMouse = new _utilCPVector2["default"](mouse.x - edgeP1.x, mouse.y - edgeP1.y),
                    vEdgeLen = vEdge.getLength(),
                    vEdgeScaled = vEdge.getScaled(1 / vEdgeLen),
                    vMouseScaled = vMouse.getScaled(1 / vEdgeLen),
                    mousePropOnLine = vEdgeScaled.getDotProduct(vMouseScaled);

                // If we're within the ends of the line (perpendicularly speaking)
                if (mousePropOnLine >= 0.0 && mousePropOnLine <= 1.0) {
                    // This gives us the point on the line closest to the mouse
                    vEdge.scale(mousePropOnLine);

                    if ((vEdge.x - vMouse.x) * (vEdge.x - vMouse.x) + (vEdge.y - vMouse.y) * (vEdge.y - vMouse.y) <= EDGE_CAPTURE_RADIUS_SQR) {
                        return i * 2 + 1;
                    }
                }
            }

            if (corners.containsPoint(mouse)) {
                return DRAG_MOVE;
            }

            return DRAG_ROTATE;
        }

        function setCursorForHandles() {
            var corners = cornersToDisplayPolygon(),
                mouse = { x: mouseX, y: mouseY },
                dragAction = classifyDragAction(corners, mouse);

            switch (dragAction) {
                case DRAG_NW_CORNER:
                case DRAG_NE_CORNER:
                case DRAG_SE_CORNER:
                case DRAG_SW_CORNER:
                    // Choose a cursor for a 45-degree resize from this corner
                    var cornerIndex = ~ ~(dragAction / 2),
                        cornerBefore = corners.points[(cornerIndex + 3) % 4],
                        corner = corners.points[cornerIndex],
                        cornerAfter = corners.points[(cornerIndex + 1) % 4],

                    // Get a vector which points 45 degrees toward the center of the box, this'll do for cursor direction
                    v45 = _utilCPVector2["default"].subtractPoints(cornerBefore, corner).normalize().add(_utilCPVector2["default"].subtractPoints(cornerAfter, corner).normalize());

                    setResizeCursorForVector(v45);
                    break;
                case DRAG_N_EDGE:
                case DRAG_E_EDGE:
                case DRAG_S_EDGE:
                case DRAG_W_EDGE:
                    // Resizing from here will move edge perpendicularly
                    var corner1 = corners.points[~ ~(dragAction / 2)],
                        corner2 = corners.points[(~ ~(dragAction / 2) + 1) % 4],
                        vPerp = _utilCPVector2["default"].subtractPoints(corner2, corner1).getPerpendicular();

                    setResizeCursorForVector(vPerp);
                    break;
                case DRAG_MOVE:
                    setCursor(CURSOR_MOVE);
                    break;
                case DRAG_ROTATE:
                    setCursor(CURSOR_DEFAULT); // TODO add a custom rotation cursor
                    break;
                default:
                    setCursor(CURSOR_DEFAULT);
            }
        }

        this.mouseDown = function (e, button, pressure) {
            if (!this.capture && button == BUTTON_PRIMARY && !e.altKey && !key.isPressed("space")) {
                var corners = cornersToDisplayPolygon();

                draggingMode = classifyDragAction(corners, { x: mouseX, y: mouseY });

                lastDragPointDisplay = { x: mouseX, y: mouseY };
                lastDragPointDoc = coordToDocument(lastDragPointDisplay);

                this.capture = true;

                setCursorForHandles();

                return true;
            }
        };

        this.mouseDrag = (0, _utilThrottleDebounce.throttle)(40, function (e) {
            var MIN_SCALE = 0.001;

            if (this.capture) {
                var dragPointDisplay = { x: mouseX, y: mouseY };

                switch (draggingMode) {
                    case DRAG_MOVE:
                        var dragPointDoc = roundPoint(coordToDocument(dragPointDisplay)),
                            translation = _utilCPVector2["default"].subtractPoints(dragPointDoc, lastDragPointDoc),

                        // Only translate in whole-pixel increments (in document space not canvas space)
                        translationRounded = translation.getTruncated(),
                            translationRemainder = translation.subtract(translationRounded),
                            translateInstance = new _utilCPTransform2["default"]();

                        /*
                         * Apply the translate *after* the current affine is applied.
                         */
                        translateInstance.translate(translationRounded.x, translationRounded.y);

                        affine.preMultiply(translateInstance);

                        // Accumulate the fractional move that we didn't apply for next time
                        lastDragPointDoc = _utilCPVector2["default"].subtractPoints(dragPointDoc, translationRemainder);
                        break;
                    case DRAG_ROTATE:
                        var DRAG_ROTATE_SNAP_ANGLE = Math.PI / 4;

                        var centerDoc = cornerPoints.getCenter(),
                            centerDisplay = coordToDisplay(centerDoc),
                            oldMouseAngle = Math.atan2(lastDragPointDisplay.y - centerDisplay.y, lastDragPointDisplay.x - centerDisplay.x),
                            newMouseAngle = Math.atan2(dragPointDisplay.y - centerDisplay.y, dragPointDisplay.x - centerDisplay.x),
                            deltaMouseAngle = newMouseAngle - oldMouseAngle,
                            rotateAngle = undefined,
                            rotateInstance = new _utilCPTransform2["default"]();

                        rotationAccumulator += deltaMouseAngle;

                        if (e.shiftKey) {
                            /*
                             * The rotation in the decomposition was made about the origin. We want to rotate about the
                             * center of the selection, so first rotate the selection to square it up with the axes,
                             * then we'll pivot the selection about its center to the new angle.
                             */
                            rotateAngle = -affine.decompose().rotate + Math.round(rotationAccumulator / DRAG_ROTATE_SNAP_ANGLE) * DRAG_ROTATE_SNAP_ANGLE;
                        } else {
                            rotateAngle = deltaMouseAngle;
                        }

                        /* Apply the rotation *after* the current affine instead of before it, so that we don't
                         * end up scaling on top of the rotated selection later (which would cause an unwanted shear)
                         */
                        rotateInstance.rotateAroundPoint(rotateAngle, centerDoc.x, centerDoc.y);

                        affine.preMultiply(rotateInstance);

                        lastDragPointDisplay = dragPointDisplay;
                        break;
                    case DRAG_NW_CORNER:
                    case DRAG_NE_CORNER:
                    case DRAG_SE_CORNER:
                    case DRAG_SW_CORNER:
                        {
                            var draggingCorner = ~ ~(draggingMode / 2),
                                oldCorner = origCornerPoints.points[draggingCorner],

                            // The corner we dragged will move into its new position
                            newCorner = affine.getInverted().getTransformedPoint(roundPoint(coordToDocument(dragPointDisplay))),

                            // The opposite corner to the one we dragged must not move
                            fixCorner = origCornerPoints.points[(draggingCorner + 2) % 4],

                            /* Now we can see how much we'd need to scale the original rectangle about the fixed corner
                             * for the other corner to reach the new position.
                             */
                            scaleX = (newCorner.x - fixCorner.x) / (oldCorner.x - fixCorner.x),
                                scaleY = (newCorner.y - fixCorner.y) / (oldCorner.y - fixCorner.y);

                            /*
                             * If the user resized it until it was zero-sized, just ignore that position and assume they'll move
                             * past it in a msec.
                             */
                            if (Math.abs(scaleX) < MIN_SCALE || Math.abs(scaleY) < MIN_SCALE || isNaN(scaleX) || isNaN(scaleY)) {
                                return true;
                            }

                            // Does user want proportional resize?
                            if (e.shiftKey) {
                                var largestScale = Math.max(scaleX, scaleY);

                                scaleX = largestScale;
                                scaleY = largestScale;
                            }

                            // The transform we do here will be performed first before any of the other transforms (scale, rotate, etc)
                            affine.scaleAroundPoint(scaleX, scaleY, fixCorner.x, fixCorner.y);
                        }
                        break;
                    case DRAG_N_EDGE:
                    case DRAG_S_EDGE:
                    case DRAG_E_EDGE:
                    case DRAG_W_EDGE:
                        {
                            var cornerIndex = ~ ~(draggingMode / 2),
                                oldHandle = averagePoints(origCornerPoints.points[cornerIndex], origCornerPoints.points[(cornerIndex + 1) % 4]),

                            // The handle we dragged will move into its new position
                            newHandle = affine.getInverted().getTransformedPoint(roundPoint(coordToDocument(dragPointDisplay))),

                            // The opposite handle to the one we dragged must not move
                            fixHandle = averagePoints(origCornerPoints.points[(cornerIndex + 2) % 4], origCornerPoints.points[(cornerIndex + 3) % 4]),
                                scaleX = undefined,
                                scaleY = undefined,
                                oldVector = _utilCPVector2["default"].subtractPoints(oldHandle, fixHandle),
                                newVector = _utilCPVector2["default"].subtractPoints(newHandle, fixHandle),
                                oldLength = oldVector.getLength(),

                            // We only take the length in the perpendicular direction to the transform edge:
                            newLength = oldVector.getDotProduct(newVector) / oldLength,
                                newScale = newLength / oldLength;

                            /*
                             * If the user resized it until it was zero-sized, just ignore that position and assume they'll move
                             * past it in a msec.
                             */
                            if (Math.abs(newScale) < MIN_SCALE || isNaN(newScale)) {
                                return true;
                            }

                            if (draggingMode == DRAG_N_EDGE || draggingMode == DRAG_S_EDGE) {
                                scaleX = 1.0;
                                scaleY = newScale;
                            } else {
                                scaleX = newScale;
                                scaleY = 1.0;
                            }

                            affine.scaleAroundPoint(scaleX, scaleY, fixHandle.x, fixHandle.y);
                        }
                        break;
                }

                cornerPoints = origCornerPoints.getTransformed(affine);

                artwork.transformAffineAmend(affine);

                // TODO make me more specific
                that.repaintAll();

                return true;
            }
        });

        this.mouseUp = function (e, button, pressure) {
            if (this.capture && button == BUTTON_PRIMARY) {
                this.capture = false;
                draggingMode = DRAG_NONE;
                return true;
            }
        };

        /*
         * Set an appropriate resize cursor for the specified vector from the center to the handle.
         */
        function setResizeCursorForVector(v) {
            var angle = Math.atan2(-v.y, v.x),

            /*
                 * Slice up into 45 degrees slices so that there are +-22.5 degrees centered around each corner,
                 * and a 45 degree segment for each edge
                 */
            slice = Math.floor(angle / (Math.PI / 4) + 0.5),
                cursor = undefined;

            // Wrap angles below the x-axis wrap to positive ones...
            if (slice < 0) {
                slice += 4;
            }

            switch (slice) {
                case 0:
                default:
                    cursor = CURSOR_EW_RESIZE;
                    break;
                case 1:
                    cursor = CURSOR_NESW_RESIZE;
                    break;
                case 2:
                    cursor = CURSOR_NS_RESIZE;
                    break;
                case 3:
                    cursor = CURSOR_NWSE_RESIZE;
                    break;
            }

            setCursor(cursor);
        }

        this.mouseMove = function () {
            // We want to stick with our choice of cursor throughout the drag operation
            if (!this.capture) {
                setCursorForHandles();
            }
        };

        this.paint = function () {
            var corners = cornersToDisplayPolygon().points,
                handles = new Array(corners.length * 2);

            // Collect the positions of the edge and corner handles...
            for (var i = 0; i < corners.length; i++) {
                handles[i] = corners[i];
            }

            for (var i = 0; i < corners.length; i++) {
                var edgeP1 = corners[i],
                    edgeP2 = corners[(i + 1) % corners.length],
                    midWay = { x: (edgeP1.x + edgeP2.x) / 2, y: (edgeP1.y + edgeP2.y) / 2 };

                handles[i + corners.length] = midWay;
            }

            setContrastingDrawStyle(canvasContext, "fill");
            for (var i = 0; i < handles.length; i++) {
                canvasContext.fillRect(handles[i].x - HANDLE_RADIUS, handles[i].y - HANDLE_RADIUS, HANDLE_RADIUS * 2 + 1, HANDLE_RADIUS * 2 + 1);
            }

            strokePolygon(canvasContext, corners);
        };

        this.keyDown = function (e) {
            if (e.keyCode == 13 /* Enter */) {
                    controller.actionPerformed({ action: "CPTransformAccept" });

                    return true;
                } else if (e.keyCode == 27 /* Escape */) {
                    controller.actionPerformed({ action: "CPTransformReject" });

                    return true;
                }
        };

        this.enter = function () {
            CPMode.prototype.enter.call(this);

            // Start off with the identity transform
            var initial = artwork.transformAffineBegin(),
                initialSelection;

            affine = initial.transform;
            srcRect = initial.rect;

            // Decide on the rectangle we'll show as the boundary of the transform area
            initialSelection = initial.selection;

            /* If the user didn't have anything selected, we'll use the actual shrink-wrapped transform area instead. */
            if (initialSelection.isEmpty()) {
                initialSelection = initial.rect.clone();
            }

            origCornerPoints = new _utilCPPolygon2["default"](initialSelection.toPoints());
            cornerPoints = origCornerPoints.getTransformed(affine);

            draggingMode = -1;
            rotationAccumulator = 0;

            that.repaintAll();
        };

        this.leave = function () {
            CPMode.prototype.leave.call(this);
            that.repaintAll();
        };
    }

    CPTransformMode.prototype = Object.create(CPMode.prototype);
    CPTransformMode.prototype.constructor = CPTransformMode;

    function CPRotateCanvasMode() {
        var firstClick,
            initAngle = 0.0,
            initTransform,
            dragged = false,
            rotateButton = -1;

        this.mouseDown = function (e, button, pressure) {
            if (this.capture) {
                return true;
            } else if (!this.transient && button == BUTTON_PRIMARY && !e.altKey && !key.isPressed("space") || e.altKey && (button == BUTTON_WHEEL || button == BUTTON_PRIMARY && key.isPressed("space"))) {
                firstClick = { x: mouseX, y: mouseY };

                initAngle = that.getRotation();
                initTransform = transform.clone();

                dragged = false;

                this.capture = true;
                rotateButton = button;

                return true;
            } else if (this.transient) {
                modeStack.pop();
            }
        };

        this.mouseDrag = function (e) {
            if (this.capture) {
                var p = { x: mouseX, y: mouseY },
                    displayCenter = { x: $(canvas).width() / 2, y: $(canvas).height() / 2 },
                    canvasCenter = { x: canvas.width / 2, y: canvas.height / 2 },
                    deltaAngle = Math.atan2(p.y - displayCenter.y, p.x - displayCenter.x) - Math.atan2(firstClick.y - displayCenter.y, firstClick.x - displayCenter.x),
                    rotTrans = new _utilCPTransform2["default"]();

                rotTrans.rotateAroundPoint(deltaAngle, canvasCenter.x, canvasCenter.y);

                rotTrans.multiply(initTransform);

                that.setRotation(initAngle + deltaAngle);
                that.setOffset(~ ~rotTrans.getTranslateX(), ~ ~rotTrans.getTranslateY());

                dragged = true;

                return true;
            }
        };

        /**
         * When the mouse is released after rotation, we might want to snap our angle to the nearest 90 degree mark.
         */
        function finishRotation() {
            var ROTATE_SNAP_DEGREES = 5;

            var nearest90 = Math.round(canvasRotation / (Math.PI / 2)) * Math.PI / 2;

            if (Math.abs(canvasRotation - nearest90) < ROTATE_SNAP_DEGREES / 180 * Math.PI) {
                var deltaAngle = nearest90 - initAngle,
                    center = { x: canvas.width / 2, y: canvas.height / 2 },
                    rotTrans = new _utilCPTransform2["default"]();

                rotTrans.rotateAroundPoint(deltaAngle, center.x, center.y);

                rotTrans.multiply(initTransform);

                that.setRotation(initAngle + deltaAngle);
                that.setOffset(~ ~rotTrans.getTranslateX(), ~ ~rotTrans.getTranslateY());

                that.repaintAll();
            }
        }

        this.mouseUp = function (e, button, pressure) {
            if (this.capture && button == rotateButton) {
                if (dragged) {
                    finishRotation();
                } else {
                    that.resetRotation();
                }

                this.capture = false;

                if (this.transient && !(key.isPressed("space") && key.alt)) {
                    modeStack.pop();
                }

                return true;
            }
        };

        this.keyUp = function (e) {
            if (this.transient && rotateButton != BUTTON_WHEEL && e.keyCode == 32 /* Space */) {
                    setCursor(CURSOR_DEFAULT);

                    modeStack.pop(); // yield control to the default mode

                    return true;
                }
        };

        this.keyDown = function (e) {
            if (e.keyCode == 32 /* Space */ && e.altKey) {
                // That's our hotkey, so stay in this mode (don't forward to CPDefaultMode)
                return true;
            }
        };
    }

    CPRotateCanvasMode.prototype = Object.create(CPMode.prototype);
    CPRotateCanvasMode.prototype.constructor = CPRotateCanvasMode;

    function CPGradientFillMode() {
        // Super constructor
        CPLineMode.call(this);
    }

    CPGradientFillMode.prototype = Object.create(CPLineMode.prototype);
    CPGradientFillMode.prototype.constructor = CPGradientFillMode;

    CPGradientFillMode.prototype.drawLine = function (from, to) {
        artwork.gradientFill(Math.round(from.x), Math.round(from.y), Math.round(to.x), Math.round(to.y), controller.getCurGradient());
    };

    CPGradientFillMode.prototype.queueBrushPreview = function () {
        //Suppress the drawing of the brush preview (inherited from CPDrawingMode)
    };

    function setCursor(cursor) {
        if (canvas.getAttribute("data-cursor") != cursor) {
            canvas.setAttribute("data-cursor", cursor);
        }
    }

    /**
        * Check that we should be drawing to the current layer, and let the user know if they are being blocked by the
        * layer settings.
        *
        * @returns {boolean} True if we should draw to the current layer
        */
    function shouldDrawToThisLayer() {
        var activeLayer = artwork.getActiveLayer();

        if (!activeLayer.visible) {
            controller.showLayerNotification(artwork.getActiveLayerIndex(), "Whoops! This layer is currently hidden", "layer");

            return false;
        } else if (activeLayer.alpha == 0) {
            controller.showLayerNotification(artwork.getActiveLayerIndex(), "Whoops! This layer's opacity is currently 0%", "opacity");

            return false;
        }

        return true;
    }

    /**
     * Update the scrollbar's range/position to match the current view settings for the document.
     *
     * @param scrollbar {CPScrollbar}
     * @param visMin The smallest coordinate in this axis in which the drawing appears
     * @param visWidth The extent of the drawing in this axis
     * @param viewSize The extent of the screen canvas in this axis
     * @param offset The present pixel offset of the drawing in this axis
     */
    function updateScrollBar(scrollbar, visMin, visWidth, viewSize, offset) {
        var xMin = visMin - viewSize - offset + visWidth / 4,
            xMax = visMin + visWidth - offset - visWidth / 4;

        scrollbar.setValues(-offset, viewSize, xMin, xMax);

        scrollbar.setBlockIncrement(Math.max(1, ~ ~(viewSize * .66)));
        scrollbar.setUnitIncrement(Math.max(1, ~ ~(viewSize * .05)));
    }

    function updateScrollBars() {
        if (horzScroll == null || vertScroll == null || horzScroll.getValueIsAdjusting() || vertScroll.getValueIsAdjusting()) {
            return;
        }

        var visibleRect = getRefreshArea(new _utilCPRect2["default"](0, 0, artworkCanvas.width, artworkCanvas.height));

        updateScrollBar(horzScroll, visibleRect.left, visibleRect.getWidth(), $(canvas).width(), that.getOffset().x);
        updateScrollBar(vertScroll, visibleRect.top, visibleRect.getHeight(), $(canvas).height(), that.getOffset().y);
    }

    function updateTransform() {
        transform.setToIdentity();
        transform.translate(offsetX, offsetY);
        transform.scale(zoom, zoom);
        transform.rotate(canvasRotation);

        updateScrollBars();
        that.repaintAll();
    }

    /**
     * Convert a canvas-relative coordinate into document coordinates and return the new coordinate.
     */
    function coordToDocument(coord) {
        // TODO cache inverted transform
        return transform.getInverted().getTransformedPoint(coord);
    }

    /**
     * Convert a canvas-relative coordinate into document coordinates.
     */
    function coordToDocumentInt(coord) {
        var result = coordToDocument(coord);

        result.x = Math.floor(result.x);
        result.y = Math.floor(result.y);

        return result;
    }

    /**
     * Convert a {x: pageX, y: pageY} co-ordinate pair from a mouse event to canvas-relative coordinates.
     */
    function mouseCoordToCanvas(coord) {
        var rect = canvas.getBoundingClientRect();

        return { x: coord.x - rect.left - window.pageXOffset, y: coord.y - rect.top - window.pageYOffset };
    }

    function coordToDisplay(p) {
        return transform.getTransformedPoint(p);
    }

    function coordToDisplayInt(p) {
        var result = coordToDisplay(p);

        result.x = Math.round(result.x);
        result.y = Math.round(result.y);

        return result;
    }

    /**
        * Convert a rectangle that encloses the given document pixels into a rectangle in display coordinates.
        *
        * @param rect {CPRect}
        * @returns {*[]}
        */
    function rectToDisplay(rect) {
        var center = coordToDisplay({ x: (rect.left + rect.right) / 2, y: (rect.top + rect.bottom) / 2 }),
            coords = rect.toPoints();

        for (var i = 0; i < coords.length; i++) {
            coords[i] = coordToDisplayInt(coords[i]);

            // Need to inset the co-ordinates by 0.5 display pixels for the line to pass through the middle of the display pixel
            coords[i].x += Math.sign(center.x - coords[i].x) * 0.5;
            coords[i].y += Math.sign(center.y - coords[i].y) * 0.5;
        }

        return coords;
    }

    function strokePolygon(context, coords) {
        context.beginPath();

        context.moveTo(coords[0].x, coords[0].y);
        for (var i = 1; i < coords.length; i++) {
            context.lineTo(coords[i].x, coords[i].y);
        }
        context.lineTo(coords[0].x, coords[0].y);

        context.stroke();
    }

    /**
     * Stroke a selection rectangle that encloses the pixels in the given rectangle (in document co-ordinates).
     */
    function plotSelectionRect(context, rect) {
        strokePolygon(context, rectToDisplay(rect));
    }

    /**
     * Take a CPRect of document coordinates and return a CPRect of canvas coordinates to repaint for that region.
     */
    function getRefreshArea(r) {
        var p1 = coordToDisplayInt({ x: r.left - 1, y: r.top - 1 }),
            p2 = coordToDisplayInt({ x: r.left - 1, y: r.bottom }),
            p3 = coordToDisplayInt({ x: r.right, y: r.top - 1 }),
            p4 = coordToDisplayInt({ x: r.right, y: r.bottom }),
            r2 = new _utilCPRect2["default"](Math.min(Math.min(p1.x, p2.x), Math.min(p3.x, p4.x)), Math.min(Math.min(p1.y, p2.y), Math.min(p3.y, p4.y)), Math.max(Math.max(p1.x, p2.x), Math.max(p3.x, p4.x)) + 1, Math.max(Math.max(p1.y, p2.y), Math.max(p3.y, p4.y)) + 1);

        r2.grow(2, 2); // to be sure to include everything

        return r2;
    }

    /**
     * Adjust the current offset to bring the center of the artwork to the center of the canvas
     */
    function centerCanvas() {
        var width = canvas.width,
            height = canvas.height,
            artworkCenter = coordToDisplay({ x: artwork.width / 2, y: artwork.height / 2 });

        that.setOffset(Math.round(offsetX + width / 2.0 - artworkCenter.x), Math.round(offsetY + height / 2.0 - artworkCenter.y));
    }

    this.setZoom = function (_zoom) {
        zoom = _zoom;
        updateTransform();
    };

    this.getZoom = function () {
        return zoom;
    };

    this.setGridSize = function (_gridSize) {
        gridSize = Math.max(Math.round(_gridSize), 1);
        this.repaintAll();
    };

    this.getGridSize = function () {
        return gridSize;
    };

    this.setOffset = function (x, y) {
        if (isNaN(x) || isNaN(y)) {
            console.log("Bad offset");
        } else {
            offsetX = x;
            offsetY = y;
            updateTransform();
        }
    };

    this.getOffset = function () {
        return { x: offsetX, y: offsetY };
    };

    this.setInterpolation = function (enabled) {
        interpolation = enabled;

        (0, _utilCPPolyfill.setCanvasInterpolation)(canvasContext, enabled);

        this.repaintAll();
    };

    this.setRotation = function (angle) {
        canvasRotation = angle % (2 * Math.PI);
        updateTransform();
    };

    /**
     * Get canvas rotation in radians.
     * 
     * @return float
     */
    this.getRotation = function () {
        return canvasRotation;
    };

    /**
     * Get the rotation as the nearest number of whole 90 degree clockwise rotations ([0..3])
     */
    this.getRotation90 = function () {
        var rotation = Math.round(this.getRotation() / Math.PI * 2);

        // Just in case:
        rotation %= 4;

        // We want [0..3] as output
        if (rotation < 0) {
            rotation += 4;
        }

        return rotation;
    };

    /**
     *
     * @param zoom float
     * @param centerX float X co-ordinate in the canvas space
     * @param centerY float Y co-ordinate in the canvas space
     */
    function zoomOnPoint(zoom, centerX, centerY) {
        zoom = Math.max(MIN_ZOOM, Math.min(MAX_ZOOM, zoom));

        if (that.getZoom() != zoom) {
            var offset = that.getOffset();

            that.setOffset(offset.x + ~ ~((centerX - offset.x) * (1 - zoom / that.getZoom())), offset.y + ~ ~((centerY - offset.y) * (1 - zoom / that.getZoom())));

            that.setZoom(zoom);

            /*CPController.CPViewInfo viewInfo = new CPController.CPViewInfo();
            viewInfo.zoom = zoom;
            viewInfo.offsetX = offsetX;
            viewInfo.offsetY = offsetY;
            controller.callViewListeners(viewInfo); TODO */

            that.repaintAll();
        }
    }

    // More advanced zoom methods
    function zoomOnCenter(zoom) {
        var width = $(canvas).width(),
            height = $(canvas).height();

        zoomOnPoint(zoom, width / 2, height / 2);
    }

    this.zoomIn = function () {
        zoomOnCenter(this.getZoom() * 2);
    };

    this.zoomOut = function () {
        zoomOnCenter(this.getZoom() * 0.5);
    };

    this.zoom100 = function () {
        zoomOnCenter(1);
        centerCanvas();
    };

    this.resetRotation = function () {
        var center = { x: canvas.width / 2, y: canvas.height / 2 },
            rotTrans = new _utilCPTransform2["default"]();

        rotTrans.rotateAroundPoint(-this.getRotation(), center.x, center.y);
        rotTrans.multiply(transform);

        this.setOffset(~ ~rotTrans.getTranslateX(), ~ ~rotTrans.getTranslateY());
        this.setRotation(0);
    };

    /**
     * Add the pointer pressure field to the given pointer event.
     */
    function getPointerPressure(e) {
        // Use Wacom pressure in preference to pointer event pressure (if present)
        if (wacomPenDown) {
            return tablet.getPressure();
        } else {
            /* In the Pointer Events API, mice have a default pressure of 0.5, but we want 1.0. Since we can't 
             * distinguish between mice and pens at this point, we don't have any better options:
             */
            return e.pressure * 2;
        }
    }

    var mouseWheelDebounce = false;

    function handleMouseWheel(e) {
        if (e.deltaY != 0) {
            if (!mouseWheelDebounce || Math.abs(e.deltaY) > 20) {
                var factor;

                if (e.deltaY > 0) {
                    factor = 1 / 1.15;
                } else {
                    factor = 1.15;
                }

                var canvasPoint = mouseCoordToCanvas({ x: e.pageX, y: e.pageY }),
                    docPoint = coordToDocument(canvasPoint);

                if (artwork.isPointWithin(docPoint.x, docPoint.y)) {
                    zoomOnPoint(that.getZoom() * factor, canvasPoint.x, canvasPoint.y);
                } else {
                    zoomOnPoint(that.getZoom() * factor, offsetX + ~ ~(artwork.width * zoom / 2), offsetY + ~ ~(artwork.height * zoom / 2));
                }

                mouseWheelDebounce = mouseWheelDebounce || setTimeout(function () {
                    mouseWheelDebounce = false;
                }, 50);
            }

            e.preventDefault();
        }
    }

    var canvasClientRect;

    function handlePointerMove(e) {
        // Use the cached position of the canvas on the page if possible
        if (!canvasClientRect) {
            canvasClientRect = canvas.getBoundingClientRect();
        }

        /* Store these globally for the event handlers to refer to (we'd write to the event itself but some browsers
         * don't enjoy that)
         */
        mouseX = e.clientX - canvasClientRect.left;
        mouseY = e.clientY - canvasClientRect.top;

        // Flags used by e.buttons
        var FLAG_PRIMARY = 1,
            FLAG_SECONDARY = 2,
            FLAG_WHEEL = 4;

        var isDragging = e.buttons != 0,
            pressure = getPointerPressure(e);

        // Did any of our buttons change state?
        if ((e.buttons & FLAG_PRIMARY) != 0 != mouseDown[BUTTON_PRIMARY]) {
            mouseDown[BUTTON_PRIMARY] = !mouseDown[BUTTON_PRIMARY];

            if (mouseDown[BUTTON_PRIMARY]) {
                modeStack.mouseDown(e, BUTTON_PRIMARY, pressure);
            } else {
                modeStack.mouseUp(e, BUTTON_PRIMARY, pressure);
            }
        }

        if ((e.buttons & FLAG_SECONDARY) != 0 != mouseDown[BUTTON_SECONDARY]) {
            mouseDown[BUTTON_SECONDARY] = !mouseDown[BUTTON_SECONDARY];

            if (mouseDown[BUTTON_SECONDARY]) {
                modeStack.mouseDown(e, BUTTON_SECONDARY, pressure);
            } else {
                modeStack.mouseUp(e, BUTTON_SECONDARY, pressure);
            }
        }

        if ((e.buttons & FLAG_WHEEL) != 0 != mouseDown[BUTTON_WHEEL]) {
            mouseDown[BUTTON_WHEEL] = !mouseDown[BUTTON_WHEEL];

            if (mouseDown[BUTTON_WHEEL]) {
                modeStack.mouseDown(e, BUTTON_WHEEL, pressure);
            } else {
                modeStack.mouseUp(e, BUTTON_WHEEL, pressure);
            }
        }

        if (isDragging) {
            modeStack.mouseDrag(e, pressure);
        } else {
            modeStack.mouseMove(e, pressure);
        }
    }

    // Called when all mouse/pointer buttons are released
    function handlePointerUp(e) {
        mouseDown[BUTTON_PRIMARY] = false;
        mouseDown[BUTTON_SECONDARY] = false;
        mouseDown[BUTTON_WHEEL] = false;

        wacomPenDown = false;
        modeStack.mouseUp(e, e.button, 0.0);
        canvas.releasePointerCapture(e.pointerId);
    }

    // Called when the first button on the pointer is depressed / pen touches the surface
    function handlePointerDown(e) {
        canvas.setPointerCapture(e.pointerId);

        canvasClientRect = canvas.getBoundingClientRect();

        // Store these globally for the event handlers to refer to
        mouseX = e.clientX - canvasClientRect.left;
        mouseY = e.clientY - canvasClientRect.top;

        wacomPenDown = tablet.isPen();

        mouseDown[BUTTON_PRIMARY] = false;
        mouseDown[BUTTON_SECONDARY] = false;
        mouseDown[BUTTON_WHEEL] = false;

        mouseDown[e.button] = true;

        modeStack.mouseDown(e, e.button, getPointerPressure(e));
    }

    function handleKeyDown(e) {
        modeStack.keyDown(e);
    }

    function handleKeyUp(e) {
        modeStack.keyUp(e);
    }

    // Get the DOM element for the canvas area
    this.getElement = function () {
        return canvasContainer;
    };

    /**
     * Schedule a repaint for the current repaint region.
     */
    function repaint() {
        if (!scheduledRepaint) {
            scheduledRepaint = true;
            window.requestAnimationFrame(function () {
                that.paint();
            });
        }
    }

    /**
     * Schedule a repaint for the entire screen.
     */
    this.repaintAll = function () {
        repaintRegion.left = 0;
        repaintRegion.top = 0;
        repaintRegion.right = canvas.width;
        repaintRegion.bottom = canvas.height;

        repaint();
    };

    /**
     * Schedule a repaint for an area of the screen for later.
     * 
     * @param rect CPRect Region that should be repainted using display coordinates
     */
    function repaintRect(rect) {
        repaintRegion.union(rect);

        repaint();
    }

    /**
        * Set the globalCompositeOperation and fill/stroke color up to maximize contrast for the drawn items
        * against arbitrary backgrounds.
        *
        * @param canvasContext
        * @param {string} kind - "stroke" or "fill" depending on which colour you'd like to set
        */
    function setContrastingDrawStyle(canvasContext, kind) {
        kind = kind + "Style";
        canvasContext.globalCompositeOperation = 'exclusion';

        if (canvasContext.globalCompositeOperation == "exclusion") {
            // White + exclusion inverts the colors underneath, giving us good contrast
            canvasContext[kind] = 'white';
        } else {
            // IE Edge doesn't support Exclusion, so how about Difference with mid-grey instead
            // This is visible on black and white, but disappears on a grey background
            canvasContext.globalCompositeOperation = 'difference';
            canvasContext[kind] = '#888';

            // For super dumb browsers (only support source-over), at least don't make the cursor invisible on a white BG!
            if (canvasContext.globalCompositeOperation != "difference") {
                canvasContext[kind] = 'black';
            }
        }
    }

    this.paint = function () {
        var drawingWasClipped = false;

        scheduledRepaint = false;

        /* Clip drawing to the area of the screen we want to repaint */
        if (!repaintRegion.isEmpty()) {
            canvasContext.save();

            if (canvasContext.clip) {
                canvasContext.beginPath();

                repaintRegion.left = repaintRegion.left | 0;
                repaintRegion.top = repaintRegion.top | 0;

                canvasContext.rect(repaintRegion.left, repaintRegion.top, Math.ceil(repaintRegion.getWidth()), Math.ceil(repaintRegion.getHeight()));

                canvasContext.clip();
            }

            drawingWasClipped = true;
        }

        /* Copy pixels that changed in the document into our local fused image cache */
        if (!artworkUpdateRegion.isEmpty()) {
            var imageData = artwork.fusionLayers();

            artworkCanvasContext.putImageData(imageData, 0, 0, artworkUpdateRegion.left, artworkUpdateRegion.top, artworkUpdateRegion.getWidth(), artworkUpdateRegion.getHeight());

            artworkUpdateRegion.makeEmpty();
        }

        canvasContext.fillStyle = '#606060';
        canvasContext.fillRect(0, 0, canvas.width, canvas.height);

        // Transform the coordinate system to bring the document into the right position on the screen (translate/zoom/etc)
        canvasContext.save();
        {
            canvasContext.setTransform(transform.m[0], transform.m[1], transform.m[2], transform.m[3], transform.m[4], transform.m[5]);

            canvasContext.fillStyle = checkerboardPattern;
            canvasContext.fillRect(0, 0, artwork.width, artwork.height);

            canvasContext.drawImage(artworkCanvas, 0, 0, artworkCanvas.width, artworkCanvas.height);
        }
        canvasContext.restore();

        // The rest of the drawing happens using the original screen coordinate system
        setContrastingDrawStyle(canvasContext, "stroke");

        canvasContext.lineWidth = 1.0;

        // Draw the artwork selection so long as we're not in the middle of selecting a new rectangle
        if (!artwork.getSelection().isEmpty() && !(modeStack.peek() instanceof CPRectSelectionMode && modeStack.peek().capture)) {
            canvasContext.setLineDash([3, 2]);

            plotSelectionRect(canvasContext, artwork.getSelection());

            canvasContext.setLineDash([]);
        }

        // Draw grid
        if (showGrid) {
            var bounds = artwork.getBounds(),
                gridVisualPitch = zoom * gridSize;

            /* If the grid is going to be miniscule on the screen (basically just covering/inverting the entire artwork,
             * do not paint it.
             */
            if (gridVisualPitch > 2) {
                canvasContext.beginPath();

                // Vertical lines
                for (var i = gridSize - 1; i < bounds.right; i += gridSize) {
                    var p1 = coordToDisplay({ x: i, y: bounds.top }),
                        p2 = coordToDisplay({ x: i, y: bounds.bottom });

                    canvasContext.moveTo(p1.x + 0.5, p1.y + 0.5);
                    canvasContext.lineTo(p2.x + 0.5, p2.y + 0.5);
                }

                // Horizontal lines
                for (var i = gridSize - 1; i < bounds.bottom; i += gridSize) {
                    var p1 = coordToDisplay({ x: 0, y: i }),
                        p2 = coordToDisplay({ x: bounds.right, y: i });

                    canvasContext.moveTo(p1.x + 0.5, p1.y + 0.5);
                    canvasContext.lineTo(p2.x + 0.5, p2.y + 0.5);
                }

                canvasContext.stroke();
            }
        }

        // Additional drawing by the current mode
        modeStack.paint(canvasContext);

        canvasContext.globalCompositeOperation = 'source-over';

        if (drawingWasClipped) {
            repaintRegion.makeEmpty();

            canvasContext.restore();
        }
    };

    this.showGrid = function (show) {
        showGrid = show;
        this.repaintAll();
    };

    /**
     * Resize the canvas area to the given height (in pixels)
     *
     * @param {int} height New canvas area height in CSS pixels
     * @param {boolean} skipCenter True if the canvas should not be re-centered
     */
    this.resize = function (height, skipCenter) {
        // Leave room for the bottom scrollbar
        height -= $(canvasContainerBottom).outerHeight();

        $(canvas).css('height', height + "px");

        canvas.width = $(canvas).width();
        canvas.height = height;

        canvasClientRect = null;

        if (!skipCenter) {
            centerCanvas();
        }

        // Interpolation property gets reset when canvas resizes
        this.setInterpolation(interpolation);

        this.repaintAll();
    };

    controller.on("toolChange", function (tool, toolInfo) {
        var newMode = drawingModes[toolInfo.strokeMode];

        // If we currently have any drawing modes active, switch them to the drawing mode of the new tool
        for (var i = 0; i < modeStack.modes.length; i++) {
            if (modeStack.modes[i] instanceof CPDrawingMode) {
                modeStack.modes[i].leave();
                modeStack.modes[i] = newMode;
                modeStack.modes[i].enter();

                break;
            }
        }

        curDrawMode = newMode;
    });

    controller.on("modeChange", function (mode) {
        var newMode;

        switch (mode) {
            case _ChickenPaint2["default"].M_DRAW:
                newMode = curDrawMode;
                break;

            case _ChickenPaint2["default"].M_FLOODFILL:
                newMode = floodFillMode;
                break;

            case _ChickenPaint2["default"].M_GRADIENTFILL:
                newMode = gradientFillMode;
                break;

            case _ChickenPaint2["default"].M_RECT_SELECTION:
                newMode = rectSelectionMode;
                break;

            case _ChickenPaint2["default"].M_MOVE_TOOL:
                newMode = moveToolMode;
                break;

            case _ChickenPaint2["default"].M_ROTATE_CANVAS:
                newMode = rotateCanvasMode;
                break;

            case _ChickenPaint2["default"].M_COLOR_PICKER:
                newMode = colorPickerMode;
                break;

            case _ChickenPaint2["default"].M_TRANSFORM:
                newMode = transformMode;
                break;
        }

        modeStack.setUserMode(newMode);
    });

    //
    // Modes system: modes control the way the GUI is reacting to the user input
    // All the tools are implemented through modes
    //

    defaultMode = new CPDefaultMode();
    colorPickerMode = new CPColorPickerMode();
    panMode = new CPPanMode();
    rotateCanvasMode = new CPRotateCanvasMode();
    floodFillMode = new CPFloodFillMode();
    gradientFillMode = new CPGradientFillMode();
    rectSelectionMode = new CPRectSelectionMode();
    moveToolMode = new CPMoveToolMode();
    transformMode = new CPTransformMode();

    // this must correspond to the stroke modes defined in CPToolInfo
    drawingModes = [new CPFreehandMode(), new CPLineMode(), new CPBezierMode()];

    curDrawMode = drawingModes[_engineCPBrushInfo2["default"].SM_FREEHAND];

    // The default mode will handle the events that no other modes are interested in
    modeStack.setDefaultMode(defaultMode);
    modeStack.setUserMode(curDrawMode);

    artworkCanvas.width = artwork.width;
    artworkCanvas.height = artwork.height;

    canvas.width = 800;
    canvas.height = 900;
    canvas.className = "chickenpaint-canvas";
    canvas.setAttribute("touch-action", "none");

    if (!canvasContext.setLineDash) {
        canvasContext.setLineDash = function () {}; // For IE 10 and older
    }

    canvas.addEventListener("contextmenu", function (e) {
        e.preventDefault();
    });

    canvas.addEventListener("mouseenter", function () {
        mouseIn = true;
    });

    canvas.addEventListener("mouseleave", function () {
        mouseIn = false;

        if (!mouseDown[BUTTON_PRIMARY] && !mouseDown[BUTTON_SECONDARY] && !mouseDown[BUTTON_WHEEL]) {
            that.repaintAll();
        }
    });

    canvas.addEventListener("pointerdown", handlePointerDown);
    canvas.addEventListener("pointermove", handlePointerMove);
    canvas.addEventListener("pointerup", handlePointerUp);
    canvas.addEventListener("wheel", handleMouseWheel);

    document.addEventListener("keydown", handleKeyDown);
    document.addEventListener("keyup", handleKeyUp);

    /* Workaround for Chrome Mac bug that causes canvas to be disposed and never recreated when tab is switched into the 
     * background https://bugs.chromium.org/p/chromium/issues/detail?id=588434
     */
    document.addEventListener("visibilitychange", function () {
        var oldHeight = canvas.height + $(canvasContainerBottom).outerHeight();

        canvas.width = 1;
        canvas.height = 1;

        that.resize(oldHeight, true);
    }, false);

    window.addEventListener("scroll", function () {
        canvasClientRect = null;
    });

    canvas.addEventListener("mousedown", function (e) {
        if (e.button == BUTTON_WHEEL) {
            // Prevent middle-mouse scrolling in Firefox
            e.preventDefault();
        }
    });

    artwork.on("changeSelection", function () {
        // We could keep track of our last-painted selection rect and only invalidate that here
        that.repaintAll();
    });

    artwork.on("updateRegion", function (region) {
        artworkUpdateRegion.union(region);

        repaintRect(getRefreshArea(artworkUpdateRegion));
    });

    horzScroll.on("valueChanged", function (value) {
        var p = that.getOffset();

        that.setOffset(-value, p.y);
    });

    vertScroll.on("valueChanged", function (value) {
        var p = that.getOffset();

        that.setOffset(p.x, -value);
    });

    this.setInterpolation(false);

    var canvasSpacingWrapper = document.createElement("div");

    canvasSpacingWrapper.className = 'chickenpaint-canvas-container-wrapper';
    canvasSpacingWrapper.appendChild(canvas);

    canvasContainerTop.className = 'chickenpaint-canvas-container-top';
    canvasContainerTop.appendChild(canvasSpacingWrapper);
    canvasContainerTop.appendChild(vertScroll.getElement());

    canvasContainerBottom.className = 'chickenpaint-canvas-container-bottom';
    canvasContainerBottom.appendChild(horzScroll.getElement());

    canvasContainer.appendChild(canvasContainerTop);
    canvasContainer.appendChild(canvasContainerBottom);

    controller.setCanvas(this);
}

module.exports = exports["default"];

},{"../ChickenPaint":1,"../engine/CPBrushInfo":5,"../util/CPBezier":46,"../util/CPPolyfill":49,"../util/CPPolygon":50,"../util/CPRect":52,"../util/CPTransform":53,"../util/CPVector":54,"../util/CPWacomTablet":55,"../util/throttle-debounce":56,"./CPGUIUtils":26,"./CPScrollbar":34}],20:[function(require,module,exports){
/*
    ChickenPaint
    
    ChickenPaint is a translation of ChibiPaint from Java to JavaScript
    by Nicholas Sherlock / Chicken Smoothie.
    
    ChibiPaint is Copyright (c) 2006-2008 Marc Schefer

    ChickenPaint is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    ChickenPaint is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with ChickenPaint. If not, see <http://www.gnu.org/licenses/>.
*/

'use strict';

Object.defineProperty(exports, '__esModule', {
    value: true
});
exports['default'] = CPCheckbox;

function CPCheckbox(state, title) {
    var canvas = document.createElement('canvas'),
        canvasContext = canvas.getContext('2d'),
        that = this;

    this.state = state || false;

    function paint() {
        var width = canvas.width,
            height = canvas.height;

        canvasContext.clearRect(0, 0, width, height);

        canvasContext.beginPath();
        canvasContext.arc(width / 2 + 1, width / 2 + 1, Math.max(width / 2, 1) - 2, 0, Math.PI * 2);

        if (that.state) {
            canvasContext.fill();
        } else {
            canvasContext.stroke();
        }
    }

    this.setValue = function (b) {
        if (this.state != b) {
            this.state = b;

            this.emitEvent('valueChange', [b]);

            paint();
        }
    };

    this.getElement = function () {
        return canvas;
    };

    canvas.addEventListener("mousedown", function (e) {
        that.setValue(!that.state);
    });

    canvas.title = title || "";
    canvas.className = 'chickenpaint-checkbox';

    canvas.width = 20;
    canvas.height = 20;

    canvas.fillStyle = 'black';
    canvas.strokeStyle = 'black';

    paint();
}

;

CPCheckbox.prototype = Object.create(EventEmitter.prototype);
CPCheckbox.prototype.constructor = CPCheckbox;
module.exports = exports['default'];

},{}],21:[function(require,module,exports){
/*
    ChickenPaint
    
    ChickenPaint is a translation of ChibiPaint from Java to JavaScript
    by Nicholas Sherlock / Chicken Smoothie.
    
    ChibiPaint is Copyright (c) 2006-2008 Marc Schefer

    ChickenPaint is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    ChickenPaint is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with ChickenPaint. If not, see <http://www.gnu.org/licenses/>.
*/

'use strict';

Object.defineProperty(exports, '__esModule', {
    value: true
});
exports['default'] = CPColorPalette;

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }

var _CPPalette = require('./CPPalette');

var _CPPalette2 = _interopRequireDefault(_CPPalette);

var _CPColorSelect = require('./CPColorSelect');

var _CPColorSelect2 = _interopRequireDefault(_CPColorSelect);

var _CPColorSlider = require('./CPColorSlider');

var _CPColorSlider2 = _interopRequireDefault(_CPColorSlider);

var _utilCPColor = require("../util/CPColor");

var _utilCPColor2 = _interopRequireDefault(_utilCPColor);

function CPColorPalette(cpController) {
    _CPPalette2['default'].call(this, cpController, "color", "Color");

    var colorSelect = new _CPColorSelect2['default'](cpController),
        colorSlider = new _CPColorSlider2['default'](cpController, colorSelect),
        colorShow = new CPColorShow(cpController),
        body = this.getBodyElement(),
        topSection = document.createElement("div");

    topSection.className = 'chickenpaint-colorpicker-top';

    topSection.appendChild(colorSelect.getElement());
    topSection.appendChild(colorSlider.getElement());

    body.appendChild(topSection);
    body.appendChild(colorShow.getElement());
}

function CPColorShow(cpController) {
    var color = 0,
        element = document.createElement("div");

    function padLeft(string, padding, len) {
        while (string.length < len) {
            string = padding + string;
        }
        return string;
    }

    function paint() {
        element.style.backgroundColor = '#' + padLeft(Number(color).toString(16), "0", 6);
    }

    function mouseClick(e) {
        e.preventDefault();

        var colHex = "#" + padLeft(Number(color).toString(16), "0", 6);

        colHex = window.prompt("Please enter a color in hex format", colHex);

        if (colHex != null) {
            try {
                if (colHex.match(/^#/) || colHex.match(/^$/)) {
                    colHex = colHex.substring(1);
                }

                var newColor = parseInt(colHex, 16);

                cpController.setCurColor(new _utilCPColor2['default'](newColor));
            } catch (e) {}
        }
    }

    this.getElement = function () {
        return element;
    };

    cpController.on("colorChange", function (_color) {
        color = _color.getRgb();
        paint();
    });

    element.className = 'chickenpaint-colorpicker-show';

    element.addEventListener("click", mouseClick);

    paint();
}

CPColorPalette.prototype = Object.create(_CPPalette2['default'].prototype);
CPColorPalette.prototype.constructor = CPColorPalette;
module.exports = exports['default'];

},{"../util/CPColor":47,"./CPColorSelect":22,"./CPColorSlider":23,"./CPPalette":32}],22:[function(require,module,exports){
/*
    ChickenPaint

    ChickenPaint is a translation of ChibiPaint from Java to JavaScript
    by Nicholas Sherlock / Chicken Smoothie.

    ChibiPaint is Copyright (c) 2006-2008 Marc Schefer

    ChickenPaint is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    ChickenPaint is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with ChickenPaint. If not, see <http://www.gnu.org/licenses/>.
*/

"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports["default"] = CPColorSelect;

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

var _utilCPColor = require("../util/CPColor");

var _utilCPColor2 = _interopRequireDefault(_utilCPColor);

var _engineCPColorBmp = require("../engine/CPColorBmp");

var _engineCPColorBmp2 = _interopRequireDefault(_engineCPColorBmp);

function CPColorSelect(cpController, initialColor) {
    var w = 128,
        h = 128,
        canvas = document.createElement("canvas"),
        canvasContext = canvas.getContext("2d"),
        imageData = canvasContext.createImageData(w, h),
        data = imageData.data,
        color = new _utilCPColor2["default"](),
        needRefresh = true,
        capturedMouse = false;

    function makeBitmap() {
        var col = color.clone(),
            pixIndex = 0;

        for (var y = 0; y < h; y++) {
            col.setValue(255 - y * 255 / h);

            for (var x = 0; x < w; x++) {
                col.setSaturation(x * 255 / w);

                data[pixIndex + _engineCPColorBmp2["default"].RED_BYTE_OFFSET] = col.rgb >> 16 & 0xFF;
                data[pixIndex + _engineCPColorBmp2["default"].GREEN_BYTE_OFFSET] = col.rgb >> 8 & 0xFF;
                data[pixIndex + _engineCPColorBmp2["default"].BLUE_BYTE_OFFSET] = col.rgb & 0xFF;
                data[pixIndex + _engineCPColorBmp2["default"].ALPHA_BYTE_OFFSET] = 0xFF;

                pixIndex += _engineCPColorBmp2["default"].BYTES_PER_PIXEL;
            }
        }

        needRefresh = false;
    }

    function paint() {
        if (needRefresh) {
            makeBitmap();
        }

        canvasContext.putImageData(imageData, 0, 0, 0, 0, w, h);

        var x = color.getSaturation() * w / 255,
            y = (255 - color.getValue()) * h / 255;

        canvasContext.globalCompositeOperation = 'exclusion';
        canvasContext.strokeStyle = 'white';
        canvasContext.lineWidth = 1.5;

        canvasContext.beginPath();
        canvasContext.arc(x, y, 5, 0, Math.PI * 2);
        canvasContext.stroke();

        canvasContext.globalCompositeOperation = 'source-over';
    }

    function mousePickColor(e) {
        var x = e.pageX - $(canvas).offset().left,
            y = e.pageY - $(canvas).offset().top,
            sat = x * 255 / w,
            value = 255 - y * 255 / h;

        color.setSaturation(Math.max(0, Math.min(255, sat)));
        color.setValue(Math.max(0, Math.min(255, value)));

        paint();
        cpController.setCurColor(color);
    }

    function continueDrag(e) {
        mousePickColor(e);
    }

    function endDrag(e) {
        canvas.releasePointerCapture(e.pointerId);
        capturedMouse = false;
        canvas.removeEventListener("pointerup", endDrag);
        canvas.removeEventListener("pointermove", continueDrag);
    }

    function startDrag(e) {
        if (!capturedMouse) {
            capturedMouse = true;
            canvas.setPointerCapture(e.pointerId);
            canvas.addEventListener("pointerup", endDrag);
            canvas.addEventListener("pointermove", continueDrag);
        }

        mousePickColor(e);
    }

    this.setHue = function (hue) {
        if (color.getHue() != hue) {
            color.setHue(hue);
            cpController.setCurColor(color);
        }
    };

    this.getElement = function () {
        return canvas;
    };

    cpController.on("colorChange", function (c) {
        color.copyFrom(c);

        needRefresh = true;
        paint();
    });

    canvas.addEventListener("pointerdown", startDrag);

    canvas.className = 'chickenpaint-colorpicker-select';
    canvas.setAttribute("touch-action", "none");

    canvas.width = w;
    canvas.height = h;

    if (initialColor) {
        color.copyFrom(initialColor);
    }

    paint();
}

module.exports = exports["default"];

},{"../engine/CPColorBmp":9,"../util/CPColor":47}],23:[function(require,module,exports){
/*
    ChickenPaint

    ChickenPaint is a translation of ChibiPaint from Java to JavaScript
    by Nicholas Sherlock / Chicken Smoothie.

    ChibiPaint is Copyright (c) 2006-2008 Marc Schefer

    ChickenPaint is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    ChickenPaint is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with ChickenPaint. If not, see <http://www.gnu.org/licenses/>.
*/

"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports["default"] = CPColorSlider;

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

var _utilCPColor = require("../util/CPColor");

var _utilCPColor2 = _interopRequireDefault(_utilCPColor);

var _engineCPColorBmp = require("../engine/CPColorBmp");

var _engineCPColorBmp2 = _interopRequireDefault(_engineCPColorBmp);

function CPColorSlider(cpController, selecter, initialHue) {
    var that = this,
        w = 24,
        h = 128,
        canvas = document.createElement("canvas"),
        canvasContext = canvas.getContext("2d"),
        imageData = canvasContext.createImageData(w, h),
        data = imageData.data,
        capturedMouse = false,
        hue = initialHue || 0;

    function makeBitmap() {
        var color = new _utilCPColor2["default"](),
            pixIndex = 0;

        color.setRgbComponents(0, 255, 255);

        for (var y = 0; y < h; y++) {
            color.setHue(y * 359 / h);

            for (var x = 0; x < w; x++) {
                data[pixIndex + _engineCPColorBmp2["default"].RED_BYTE_OFFSET] = color.rgb >> 16 & 0xFF;
                data[pixIndex + _engineCPColorBmp2["default"].GREEN_BYTE_OFFSET] = color.rgb >> 8 & 0xFF;
                data[pixIndex + _engineCPColorBmp2["default"].BLUE_BYTE_OFFSET] = color.rgb & 0xFF;
                data[pixIndex + _engineCPColorBmp2["default"].ALPHA_BYTE_OFFSET] = 0xFF;

                pixIndex += _engineCPColorBmp2["default"].BYTES_PER_PIXEL;
            }
        }
    }

    function paint() {
        canvasContext.putImageData(imageData, 0, 0, 0, 0, w, h);

        var y = hue * h / 360;

        canvasContext.globalCompositeOperation = 'exclusion';
        canvasContext.strokeStyle = 'white';
        canvasContext.lineWidth = 1.5;

        canvasContext.beginPath();
        canvasContext.moveTo(0, y);
        canvasContext.lineTo(w, y);
        canvasContext.stroke();

        canvasContext.globalCompositeOperation = 'source-over';
    }

    function mousePickColor(e) {
        var y = e.pageY - $(canvas).offset().top,
            _hue = ~ ~(y * 360 / h);

        hue = Math.max(0, Math.min(359, _hue));
        paint();

        if (selecter != null) {
            selecter.setHue(hue);
        }
    }

    function continueDrag(e) {
        mousePickColor(e);
    }

    function endDrag(e) {
        canvas.releasePointerCapture(e.pointerId);
        capturedMouse = false;
        canvas.removeEventListener("pointerup", endDrag);
        canvas.removeEventListener("pointermove", continueDrag);
    }

    function startDrag(e) {
        if (!capturedMouse) {
            capturedMouse = true;
            canvas.setPointerCapture(e.pointerId);
            canvas.addEventListener("pointerup", endDrag);
            canvas.addEventListener("pointermove", continueDrag);
        }

        mousePickColor(e);
    }

    this.getElement = function () {
        return canvas;
    };

    this.setHue = function (h) {
        hue = h;
        paint();
    };

    cpController.on("colorChange", function (color) {
        that.setHue(color.getHue());
    });

    canvas.setAttribute("touch-action", "none");

    canvas.addEventListener("pointerdown", startDrag);

    canvas.width = w;
    canvas.height = h;

    canvas.className = 'chickenpaint-colorpicker-slider';

    makeBitmap();
    paint();
}

module.exports = exports["default"];

},{"../engine/CPColorBmp":9,"../util/CPColor":47}],24:[function(require,module,exports){
/*
    ChickenPaint

    ChickenPaint is a translation of ChibiPaint from Java to JavaScript
    by Nicholas Sherlock / Chicken Smoothie.

    ChibiPaint is Copyright (c) 2006-2008 Marc Schefer

    ChickenPaint is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    ChickenPaint is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with ChickenPaint. If not, see <http://www.gnu.org/licenses/>.
*/

'use strict';

Object.defineProperty(exports, '__esModule', {
    value: true
});
exports['default'] = CPColorSwatch;

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }

var _utilCPColor = require('../util/CPColor');

var _utilCPColor2 = _interopRequireDefault(_utilCPColor);

var _CPSlider = require('./CPSlider');

var _CPSlider2 = _interopRequireDefault(_CPSlider);

var _CPColorSelect = require('./CPColorSelect');

var _CPColorSelect2 = _interopRequireDefault(_CPColorSelect);

var _CPColorSlider = require('./CPColorSlider');

var _CPColorSlider2 = _interopRequireDefault(_CPColorSlider);

function CPColorSwatch(initialColor, initialAlpha) {
    var that = this,
        color = new _utilCPColor2['default'](0),
        alpha = 255,
        element = document.createElement("div");

    function padLeft(string, padding, len) {
        while (string.length < len) {
            string = padding + string;
        }
        return string;
    }

    function paint() {
        element.style.backgroundColor = '#' + padLeft(Number(color.getRgb()).toString(16), "0", 6);
    }

    function mouseClick(e) {
        e.preventDefault();
    }

    this.getElement = function () {
        return element;
    };

    this.setColor = function (_color) {
        if (!color.isEqual(_color)) {
            color.copyFrom(_color);

            paint();

            this.emitEvent("colorChange", [color]);
        }
    };

    this.setAlpha = function (_alpha) {
        if (_alpha != alpha) {
            alpha = _alpha;

            paint();

            this.emitEvent("alphaChange", [alpha]);
        }
    };

    this.getColorRgb = function () {
        return color.getRgb();
    };

    this.getAlpha = function () {
        return alpha;
    };

    this.setCurColor = this.setColor;

    function buildColorEditPanel() {
        var panel = document.createElement("div"),
            group = document.createElement("div"),
            select = new _CPColorSelect2['default'](that, color),
            slider = new _CPColorSlider2['default'](that, select, color.getHue()),
            alphaSlider = new _CPSlider2['default'](0, 255);

        panel.className = "chickenpaint-color-pick-panel";

        group.className = "chickenpaint-colorpicker-top";

        group.appendChild(select.getElement());
        group.appendChild(slider.getElement());

        panel.appendChild(group);

        alphaSlider.value = alpha;
        alphaSlider.title = function (alpha) {
            return "Opacity: " + alpha;
        };
        alphaSlider.on("valueChange", function (alpha) {
            that.setAlpha(alpha);
        });

        panel.appendChild(alphaSlider.getElement());

        setTimeout(function () {
            alphaSlider.resize();
        }, 0);

        return panel;
    }

    element.className = 'chickenpaint-color-pick-swatch';

    element.addEventListener("click", mouseClick);

    if (initialColor) {
        color.copyFrom(initialColor);
    }

    if (initialAlpha) {
        alpha = initialAlpha;
    }

    // Clicking outside the popover will dismiss it
    function closeClickHandler(e) {
        if ($(e.target).closest(".popover").length == 0 && $(e.target).closest(".chickenpaint-color-pick-swatch")[0] != element) {
            $(element).popover("hide");
        }
    }

    $(element).popover({
        html: true,
        content: function content() {
            window.addEventListener("mousedown", closeClickHandler);

            return buildColorEditPanel();
        },
        trigger: "manual",
        placement: "bottom"

    }).on("click", function () {
        $(this).popover("toggle");
    }).on("hidden.bs.popover", function () {
        window.removeEventListener("mousedown", closeClickHandler);
    });

    paint();
}

CPColorSwatch.prototype = Object.create(EventEmitter.prototype);
CPColorSwatch.prototype.constructor = CPColorSwatch;
module.exports = exports['default'];

},{"../util/CPColor":47,"./CPColorSelect":22,"./CPColorSlider":23,"./CPSlider":37}],25:[function(require,module,exports){
/*
	ChickenPaint

	ChickenPaint is a translation of ChibiPaint from Java to JavaScript
	by Nicholas Sherlock / Chicken Smoothie.

	ChibiPaint is Copyright (c) 2006-2008 Marc Schefer

	ChickenPaint is free software: you can redistribute it and/or modify
	it under the terms of the GNU General Public License as published by
	the Free Software Foundation, either version 3 of the License, or
	(at your option) any later version.

	ChickenPaint is distributed in the hope that it will be useful,
	but WITHOUT ANY WARRANTY; without even the implied warranty of
	MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
	GNU General Public License for more details.

	You should have received a copy of the GNU General Public License
	along with ChickenPaint. If not, see <http://www.gnu.org/licenses/>.
*/
"use strict";

Object.defineProperty(exports, "__esModule", {
	value: true
});
exports["default"] = CPConfirmTransformDialog;

function CPConfirmTransformDialog(parent, controller) {
	var dialog = $("<div class=\"modal fade\" tabindex=\"-1\" role=\"dialog\">\n\t            <div class=\"modal-dialog\">\n\t                <div class=\"modal-content\">\n\t                    <div class=\"modal-header\">\n\t                        <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\n\t                            <span aria-hidden=\"true\">&times;</span>\n\t                        </button>\n\t                        <h4 class=\"modal-title\">Complete transform</h4>\n\t                    </div>\n\t                    <div class=\"modal-body\">\n\t                        <p>\n\t                            You need to finish transforming this layer before you can do that. What would you like to do with the transform?\n\t\t\t\t\t\t\t</p>\n\t                    </div>\n\t                    <div class=\"modal-footer\">\n\t                        <button type=\"button\" class=\"btn btn-default\" data-dismiss=\"modal\">Cancel</button>\n\t                        <button type=\"button\" class=\"btn btn-default chickenpaint-reject-transform\" data-dismiss=\"modal\">Undo transform</button>\n\t                        <button type=\"button\" class=\"btn btn-primary chickenpaint-accept-transform\" data-dismiss=\"modal\">Apply transform</button>\n\t                    </div>\n\t                </div>\n\t            </div>\n\t        </div>\n\t    "),
	    that = this,
	    applyButton = $(".chickenpaint-accept-transform", dialog),
	    rejectButton = $(".chickenpaint-reject-transform", dialog);

	applyButton.click(function (e) {
		controller.actionPerformed({ action: "CPTransformAccept" });
		that.emitEvent("accept");
	});

	rejectButton.click(function (e) {
		controller.actionPerformed({ action: "CPTransformReject" });
		that.emitEvent("reject");
	});

	dialog.modal({
		show: false
	}).on('shown.bs.modal', function () {
		applyButton.focus();
	}).on("hidden.bs.modal", function (e) {
		// Destroy the modal upon close
		dialog.remove();
	}).on('keypress', function (e) {
		if (e.keyCode == 13) {
			applyButton.click();
		}
	});

	// Fix the backdrop location in the DOM by reparenting it to the chickenpaint container
	dialog.data("bs.modal").$body = $(parent);

	parent.appendChild(dialog[0]);

	this.show = function () {
		dialog.modal("show");
	};
}

CPConfirmTransformDialog.prototype = Object.create(EventEmitter.prototype);
CPConfirmTransformDialog.prototype.constructor = CPConfirmTransformDialog;
module.exports = exports["default"];

},{}],26:[function(require,module,exports){
/**
 * Create a checkerboard HTML5 CanvasPattern (which can be used for fillStyle) using the given canvas context.
 * 
 * @param canvasContext
 * @returns {CanvasPattern}
 */
"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.createCheckerboardPattern = createCheckerboardPattern;

function createCheckerboardPattern(canvasContext) {
    var checkerboardCanvas = document.createElement("canvas"),
        checkerboardContext = checkerboardCanvas.getContext("2d"),
        imageData = checkerboardContext.createImageData(64, 64),
        data = imageData.data,
        pixelOffset = 0;

    for (var j = 0; j < 64; j++) {
        for (var i = 0; i < 64; i++) {
            if ((i & 0x8) != 0 ^ (j & 0x8) != 0) {
                // White
                data[pixelOffset++] = 0xff;
                data[pixelOffset++] = 0xff;
                data[pixelOffset++] = 0xff;
                data[pixelOffset++] = 0xff;
            } else {
                // Grey
                data[pixelOffset++] = 0xcc;
                data[pixelOffset++] = 0xcc;
                data[pixelOffset++] = 0xcc;
                data[pixelOffset++] = 0xff;
            }
        }
    }

    checkerboardCanvas.width = 64;
    checkerboardCanvas.height = 64;
    checkerboardContext.putImageData(imageData, 0, 0);

    return canvasContext.createPattern(checkerboardCanvas, 'repeat');
}

},{}],27:[function(require,module,exports){
/*
    ChickenPaint
    
    ChickenPaint is a translation of ChibiPaint from Java to JavaScript
    by Nicholas Sherlock / Chicken Smoothie.
    
    ChibiPaint is Copyright (c) 2006-2008 Marc Schefer

    ChickenPaint is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    ChickenPaint is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with ChickenPaint. If not, see <http://www.gnu.org/licenses/>.
*/

"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports["default"] = CPGridDialog;

function CPGridDialog(parent, canvas) {
    var dialog = $("<div class=\"modal fade\" tabindex=\"-1\" role=\"dialog\">\n                <div class=\"modal-dialog\">\n                    <div class=\"modal-content\">\n                        <div class=\"modal-header\">\n                            <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\n                                <span aria-hidden=\"true\">&times;</span>\n                            </button>\n                            <h4 class=\"modal-title\">Grid options</h4>\n                        </div>\n                        <div class=\"modal-body\">\n                            <form>\n                                <div class=\"form-group\">\n                                    <label>Grid size</label>\n                                    <input type=\"text\" class=\"form-control chickenpaint-grid-size\" value=\"\" autofocus>\n                                </div>\n                            </form>\n                        </div>\n                        <div class=\"modal-footer\">\n                            <button type=\"button\" class=\"btn btn-default\" data-dismiss=\"modal\">Cancel</button>\n                            <button type=\"button\" class=\"btn btn-primary chickenpaint-apply-grid-settings\" data-dismiss=\"modal\">Ok</button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        "),
        gridSizeElem = $(".chickenpaint-grid-size", dialog),
        applyButton = $(".chickenpaint-apply-grid-settings", dialog);

    gridSizeElem.val(canvas.getGridSize());

    $(".chickenpaint-apply-grid-settings", dialog).click(function (e) {
        var gridSize = parseInt(gridSizeElem.val(), 10);

        canvas.setGridSize(gridSize);
    });

    dialog.modal({
        show: false
    }).on('shown.bs.modal', function () {
        gridSizeElem.focus();
    }).on('keypress', function (e) {
        if (e.keyCode == 13) {
            applyButton.click();
        }
    });

    // Fix the backdrop location in the DOM by reparenting it to the chickenpaint container
    dialog.data("bs.modal").$body = $(parent);

    parent.appendChild(dialog[0]);

    this.show = function () {
        dialog.modal("show");
    };
}

module.exports = exports["default"];

},{}],28:[function(require,module,exports){
/*
    ChickenPaint
    
    ChickenPaint is a translation of ChibiPaint from Java to JavaScript
    by Nicholas Sherlock / Chicken Smoothie.
    
    ChibiPaint is Copyright (c) 2006-2008 Marc Schefer

    ChickenPaint is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    ChickenPaint is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with ChickenPaint. If not, see <http://www.gnu.org/licenses/>.
*/

"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports["default"] = CPLayersPalette;

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

var _CPPalette = require("./CPPalette");

var _CPPalette2 = _interopRequireDefault(_CPPalette);

var _CPSlider = require("./CPSlider");

var _CPSlider2 = _interopRequireDefault(_CPSlider);

function CPLayersPalette(controller) {
    _CPPalette2["default"].call(this, controller, "layers", "Layers", true);

    var MODE_NAMES = ["Normal", "Multiply", "Add", "Screen", "Lighten", "Darken", "Subtract", "Dodge", "Burn", "Overlay", "Hard Light", "Soft Light", "Vivid Light", "Linear Light", "Pin Light"];

    var palette = this,
        layerH = 32,
        eyeW = 24,
        body = this.getBodyElement(),
        layerWidget = new CPLayerWidget(),
        alphaSlider = new _CPSlider2["default"](0, 100),
        blendCombo = document.createElement("select"),
        renameField = new CPRenameField(),
        cbSampleAllLayers = document.createElement("input"),
        cbLockAlpha = document.createElement("input"),
        addButton = document.createElement("li"),
        removeButton = document.createElement("li");

    function fillCombobox(combo, optionNames) {
        for (var i = 0; i < optionNames.length; i++) {
            var option = document.createElement("option");

            option.appendChild(document.createTextNode(optionNames[i]));
            option.value = i;

            combo.appendChild(option);
        }
    }

    function wrapCheckboxWithLabel(checkbox, title) {
        var div = document.createElement("div"),
            label = document.createElement("label");

        div.className = "checkbox";

        label.appendChild(checkbox);
        label.appendChild(document.createTextNode(title));

        div.appendChild(label);

        return div;
    }

    function showRenameControl(layerIndex) {
        var d = layerWidget.getCSSSize(),
            artwork = controller.getArtwork(),
            layer = artwork.getLayer(layerIndex);

        renameField.show(eyeW / window.devicePixelRatio, d.height - (layerIndex + 1) * layerH / window.devicePixelRatio, layerIndex, layer.name);
    }

    var parentSetSize = this.setSize,
        parentSetHeight = this.setHeight;

    this.setSize = function (w, h) {
        parentSetSize.call(this, w, h);

        layerWidget.resize();
        alphaSlider.resize();
    };

    this.setHeight = function (h) {
        parentSetHeight.call(this, h);

        layerWidget.resize();
    };

    function CPLayerWidget() {
        var NOTIFICATION_HIDE_DELAY_MS_PER_CHAR = 70,
            NOTIFICATION_HIDE_DELAY_MIN = 3000;

        var layerDrag,
            layerDragReally,
            layerDragIndex,
            layerDragY,
            container = document.createElement("div"),
            canvas = document.createElement("canvas"),
            canvasContext = canvas.getContext("2d"),
            oldApplyPlacement,
            notificationMessage = "",
            notificationLayerIndex = -1,
            notificationLocation = "",
            dismissTimer = false,
            that = this;

        /**
         * Get the size of the component on screen in CSS pixels.
         */
        this.getCSSSize = function () {
            return { width: $(canvas).width(), height: $(canvas).height() };
        };

        function getLayerIndex(point) {
            return Math.floor((canvas.height - point.y / $(canvas).height() * canvas.height) / layerH);
        }

        /**
         * @param layer CPLayer
         * @param selected boolean
         */
        function drawLayer(layer, selected) {
            var d = { width: canvas.width, height: canvas.height };

            if (selected) {
                canvasContext.fillStyle = '#B0B0C0';
            } else {
                canvasContext.fillStyle = 'white';
            }
            canvasContext.fillRect(0, 0, d.width, layerH);

            canvasContext.beginPath();

            canvasContext.moveTo(0, 0);
            canvasContext.lineTo(d.width, 0);

            canvasContext.moveTo(eyeW, 0);
            canvasContext.lineTo(eyeW, layerH);

            canvasContext.moveTo(eyeW + 6 * window.devicePixelRatio, layerH / 2);
            canvasContext.lineTo(d.width - 6 * window.devicePixelRatio, layerH / 2);

            canvasContext.stroke();

            canvasContext.fillStyle = 'black';

            canvasContext.fillText(layer.name, eyeW + 6 * window.devicePixelRatio, 12 * window.devicePixelRatio);
            canvasContext.fillText(MODE_NAMES[layer.blendMode] + ": " + layer.alpha + "%", eyeW + 6 * window.devicePixelRatio, layerH - 5 * window.devicePixelRatio);

            canvasContext.beginPath();
            if (layer.visible) {
                canvasContext.arc(eyeW / 2, layerH / 2, 9 * window.devicePixelRatio, 0, Math.PI * 2);
                canvasContext.fill();
            } else {
                canvasContext.arc(eyeW / 2, layerH / 2, 9 * window.devicePixelRatio, 0, Math.PI * 2);
                canvasContext.stroke();
            }
        }

        function mouseUp(e) {
            if (e.button == 0) {
                var offset = $(canvas).offset(),
                    artwork = controller.getArtwork(),
                    layers = artwork.getLayers(),
                    mouseLoc = { x: e.pageX - offset.left, y: e.pageY - offset.top },
                    layerOver = getLayerIndex(mouseLoc);

                //layerDragY = e.pageY - offset.top;

                if (layerOver >= 0 && layerOver <= layers.length && layerOver != layerDragIndex && layerOver != layerDragIndex + 1) {
                    controller.actionPerformed({ action: "CPMoveLayer", fromIndex: layerDragIndex, toIndex: layerOver });
                }

                // Do we need to repaint to erase draglines?
                if (layerDragReally) {
                    layerDragReally = false;
                    that.paint();
                }

                layerDrag = false;

                window.removeEventListener("mousemove", mouseDragged);
                window.removeEventListener("mouseup", mouseUp);
            }
        }

        function mouseDragged(e) {
            if (layerDrag) {
                layerDragReally = true;
                layerDragY = e.pageY - $(canvas).offset().top;
                that.paint();
            }
        }

        /**
         * Repaint just the layer with the specified index
         */
        this.paintLayer = function (layerIndex) {
            var layer = artwork.getLayer(layerIndex),
                layerTop = canvas.height - layerH * (layerIndex + 1);

            canvasContext.save();

            canvasContext.fillStyle = '#606060';
            canvasContext.fillRect(0, layerTop, canvas.width, layerH);

            canvasContext.strokeStyle = 'black';

            canvasContext.translate(0, layerTop);
            drawLayer(layer, layerIndex == artwork.getActiveLayerIndex());

            canvasContext.restore();
        };

        /**
         * Repaint the entire control
         */
        this.paint = function () {
            var artwork = controller.getArtwork(),
                layers = artwork.getLayers(),
                d = { width: canvas.width, height: canvas.height },
                canvasScaleFactor = canvas.height / $(canvas).height();

            canvasContext.save();

            canvasContext.fillStyle = '#606060';
            canvasContext.fillRect(0, 0, d.width, d.height - layers.length * layerH);

            canvasContext.strokeStyle = 'black';

            // Draw the list of layers, with the first layer at the bottom of the control
            canvasContext.translate(0, d.height - layerH);

            for (var i = 0; i < layers.length; i++) {
                drawLayer(layers[i], i == artwork.getActiveLayerIndex());
                canvasContext.translate(0, -layerH);
            }

            if (layerDragReally) {
                canvasContext.translate(0, layers.length * layerH - (d.height - layerH));
                canvasContext.strokeRect(0, layerDragY * canvasScaleFactor - layerH / 2, d.width, layerH);

                var layerOver = getLayerIndex({ x: 0, y: layerDragY });

                if (layerOver <= layers.length && layerOver != layerDragIndex && layerOver != layerDragIndex + 1) {
                    canvasContext.fillRect(0, d.height - layerOver * layerH - 2, d.width, 4 * window.devicePixelRatio);
                }
            }

            canvasContext.restore();
        };

        this.resize = function () {
            var artwork = controller.getArtwork(),

            // Our parent container will act as our scrollbar clip area
            parent = $(canvas).parent(),
                parentHeight = parent.height(),
                parentWidth = parent.width(),
                newWidth,
                newHeight;

            layerH = 34 * window.devicePixelRatio;
            eyeW = 24 * window.devicePixelRatio;

            newWidth = parentWidth * window.devicePixelRatio;
            newHeight = Math.max(layerH * artwork.getLayerCount(), parentHeight * window.devicePixelRatio);

            // Should we trigger a scrollbar to appear?
            if (newHeight > parentHeight * window.devicePixelRatio) {
                // Take the scrollbar width into account in our width
                newWidth -= 15 * window.devicePixelRatio;
                parent[0].style.overflowY = 'scroll';
            } else {
                parent[0].style.overflowY = 'hidden';
            }

            canvas.width = newWidth;
            canvas.height = newHeight;

            canvas.style.width = newWidth / window.devicePixelRatio + "px";
            canvas.style.height = newHeight / window.devicePixelRatio + "px";

            canvasContext.font = layerH * 0.25 + "pt sans-serif";

            this.paint();
            this.dismissNotification();
        };

        this.getElement = function () {
            return container;
        };

        canvas.addEventListener("click", function (e) {
            if (renameField.isVisible()) {
                renameField.renameAndHide();
            }
        });

        canvas.addEventListener("dblclick", function (e) {
            var offset = $(canvas).offset(),
                mouseLoc = { x: e.pageX - offset.left, y: e.pageY - offset.top },
                layerIndex = getLayerIndex(mouseLoc);

            if (mouseLoc.x * window.devicePixelRatio > eyeW && layerIndex >= 0 && layerIndex < artwork.getLayerCount()) {
                showRenameControl(layerIndex);
            }
        });

        canvas.addEventListener("mousedown", function (e) {
            var offset = $(canvas).offset(),
                mouseLoc = { x: e.pageX - offset.left, y: e.pageY - offset.top };

            /* Click, moved from mouseClicked due to problems with focus and stuff */
            if (e.button == 0) {
                /* Left button */
                var artwork = controller.getArtwork(),
                    layers = artwork.getLayers(),
                    layerIndex = getLayerIndex(mouseLoc);

                if (layerIndex >= 0 && layerIndex < artwork.getLayerCount()) {
                    var layer = artwork.getLayer(layerIndex);

                    if (mouseLoc.x / $(canvas).width() * canvas.width < eyeW) {
                        controller.actionPerformed({ action: "CPSetLayerVisibility", layerIndex: layerIndex, visible: !layer.visible });
                    } else if (artwork.getActiveLayerIndex() != layerIndex) {
                        controller.actionPerformed({ action: "CPSetActiveLayerIndex", layerIndex: layerIndex });
                    }
                }

                if (layerIndex < layers.length) {
                    layerDrag = true;
                    layerDragY = mouseLoc.y;
                    layerDragIndex = layerIndex;

                    window.addEventListener("mousemove", mouseDragged);
                    window.addEventListener("mouseup", mouseUp);
                }
            }
        });

        /**
         * Scroll the layer widget until the layer with the given index is fully visible.
         *
         * @param layerIndex
         */
        function revealLayer(layerIndex) {
            var layerWidgetPos = canvas.getBoundingClientRect(),
                scrollBoxPos = container.getBoundingClientRect(),
                scrollBoxHeight = scrollBoxPos.bottom - scrollBoxPos.top,
                layerHeight = layerH / window.devicePixelRatio,
                layerTop = layerWidgetPos.bottom - layerHeight * (layerIndex + 1),
                layerBottom = layerTop + layerHeight;

            container.scrollTop = Math.max(Math.min(Math.max(container.scrollTop, layerBottom - layerWidgetPos.top - scrollBoxHeight), layerTop - layerWidgetPos.top), 0);
        }

        this.dismissNotification = function () {
            $(canvas).popover('hide');
        };

        this.showNotification = function (layerIndex, message, where) {
            notificationMessage = message;
            notificationLayerIndex = layerIndex;

            if (artwork.getActiveLayerIndex() == layerIndex && where == "opacity") {
                notificationLocation = "opacity";
            } else {
                notificationLocation = "layer";
                revealLayer(layerIndex);
            }

            $(canvas).popover("show");

            if (dismissTimer) {
                clearTimeout(dismissTimer);
            }
            dismissTimer = setTimeout(function () {
                dismissTimer = false;
                that.dismissNotification();
            }, Math.max(Math.round(notificationMessage.length * NOTIFICATION_HIDE_DELAY_MS_PER_CHAR), NOTIFICATION_HIDE_DELAY_MIN));
        };

        /* Reposition the popover to the layer/location that the notification applies to */
        function applyNotificationPlacement(offset, placement) {
            oldApplyPlacement.call(this, offset, placement);

            var $tip = this.tip(),
                $arrow = this.arrow(),
                layerWidgetPos = canvas.getBoundingClientRect(),
                scrollBoxPos = container.getBoundingClientRect();

            switch (notificationLocation) {
                case "layer":
                    var layerMiddle = layerWidgetPos.bottom - layerH / window.devicePixelRatio * (notificationLayerIndex + 0.5);

                    layerMiddle = Math.min(Math.max(layerMiddle, scrollBoxPos.top), scrollBoxPos.bottom);

                    $tip.offset({
                        top: layerMiddle + document.body.scrollTop - $tip.height() / 2,
                        left: layerWidgetPos.left - $tip.outerWidth() - $arrow.outerWidth()
                    });
                    break;
                case "opacity":
                    var alphaSliderPos = alphaSlider.getElement().getBoundingClientRect();

                    $tip.offset({
                        top: (alphaSliderPos.top + alphaSliderPos.bottom - $tip.height()) / 2 + document.body.scrollTop,
                        left: alphaSliderPos.left - $tip.outerWidth() - $arrow.outerWidth()
                    });
                    break;
            }

            $arrow.css("top", "50%");
        }

        controller.on("layerNotification", this.showNotification.bind(this));

        $(canvas).popover({
            html: false,
            content: function content() {
                return notificationMessage;
            },
            placement: "left",
            trigger: "manual",
            container: palette.getElement()
        });

        var popover = $(canvas).data('bs.popover');

        // Save the old positioning routine so we can call it later
        oldApplyPlacement = popover.applyPlacement;

        popover.applyPlacement = applyNotificationPlacement;

        if (!window.devicePixelRatio) {
            window.devicePixelRatio = 1.0;
        }

        canvasContext.strokeStyle = 'black';

        container.className = "chickenpaint-layers-widget";
        container.appendChild(canvas);
    }

    function CPRenameField() {
        var layerIndex = -1,
            textBox = document.createElement("input"),
            that = this;

        this.hide = function () {
            layerIndex = -1;
            textBox.style.display = 'none';
        };

        this.renameAndHide = function () {
            if (artwork.getLayer(layerIndex).name != textBox.value) {
                controller.actionPerformed({ action: "CPSetLayerName", layerIndex: layerIndex, name: textBox.value });
            }

            this.hide();
        };

        this.isVisible = function () {
            return textBox.style.display != 'none';
        };

        this.setLocation = function (positionX, positionY) {
            textBox.style.left = positionX + "px";
            textBox.style.top = positionY + "px";
        };

        this.show = function (x, y, _layerIndex, layerName) {
            layerIndex = _layerIndex;
            textBox.value = layerName;
            this.setLocation(x, y);

            textBox.style.display = 'block';
            textBox.select();
        };

        this.getElement = function () {
            return textBox;
        };

        textBox.type = "text";
        textBox.className = "chickenpaint-layer-new-name form-control input-sm";
        textBox.style.display = 'none';

        textBox.addEventListener("keydown", function (e) {
            // Prevent other keyhandlers (CPCanvas) from getting their grubby hands on the input
            e.stopPropagation();
        });

        textBox.addEventListener("keypress", function (e) {
            if (e.keyCode == 13) {
                // Enter
                that.renameAndHide();
            }
            e.stopPropagation();
        });

        textBox.addEventListener("keyup", function (e) {
            if (e.keyCode == 27) {
                // Escape
                that.hide();
            }
            e.stopPropagation();
        });

        textBox.addEventListener("blur", function (e) {
            if (layerIndex != -1) {
                that.renameAndHide();
            }
        });
    }

    blendCombo.className = "form-control";
    blendCombo.title = "Layer blending mode";
    blendCombo.addEventListener("change", function (e) {
        controller.actionPerformed({ action: "CPSetLayerBlendMode", layerIndex: artwork.getActiveLayerIndex(), blendMode: parseInt(blendCombo.value, 10) });
    });

    fillCombobox(blendCombo, MODE_NAMES);

    body.appendChild(blendCombo);

    alphaSlider.title = function (value) {
        return "Opacity: " + value + "%";
    };

    alphaSlider.on("valueChange", function (value) {
        controller.actionPerformed({ action: "CPSetLayerAlpha", layerIndex: artwork.getActiveLayerIndex(), alpha: value });
    });

    body.appendChild(alphaSlider.getElement());

    cbSampleAllLayers.type = "checkbox";
    cbSampleAllLayers.addEventListener("click", function (e) {
        var artwork = controller.getArtwork();

        artwork.setSampleAllLayers(cbSampleAllLayers.checked);
    });

    body.appendChild(wrapCheckboxWithLabel(cbSampleAllLayers, "Sample all layers"));

    cbLockAlpha.type = "checkbox";
    cbLockAlpha.addEventListener("click", function (e) {
        var artwork = controller.getArtwork();

        artwork.setLockAlpha(cbLockAlpha.checked);
    });

    body.appendChild(wrapCheckboxWithLabel(cbLockAlpha, "Lock alpha"));

    layerWidget.getElement().appendChild(renameField.getElement());

    body.appendChild(layerWidget.getElement());

    // Add/Remove layer buttons
    var addRemoveContainer = document.createElement("ul");

    addRemoveContainer.className = 'chickenpaint-layer-add-remove list-unstyled';

    addButton.className = 'chickenpaint-small-toolbar-button chickenpaint-add-layer';
    addButton.title = 'Add layer';
    addButton.addEventListener("click", function () {
        controller.actionPerformed({ action: "CPAddLayer" });
    });

    removeButton.className = 'chickenpaint-small-toolbar-button chickenpaint-remove-layer';
    removeButton.title = "Delete layer";
    removeButton.addEventListener("click", function () {
        controller.actionPerformed({ action: "CPRemoveLayer" });
    });

    addRemoveContainer.appendChild(addButton);
    addRemoveContainer.appendChild(removeButton);

    body.appendChild(addRemoveContainer);

    var artwork = controller.getArtwork();

    // Set initial values
    alphaSlider.setValue(artwork.getActiveLayer().getAlpha());
    blendCombo.value = artwork.getActiveLayer().getBlendMode();

    artwork.on("changeLayer", function (layerIndex) {
        var artwork = this;

        if (artwork.getActiveLayer().getAlpha() != alphaSlider.value) {
            alphaSlider.setValue(artwork.getActiveLayer().getAlpha());
        }

        if (artwork.getActiveLayer().getBlendMode() != parseInt(blendCombo.value, 10)) {
            blendCombo.value = artwork.getActiveLayer().getBlendMode();
        }

        if (layerIndex !== undefined) {
            layerWidget.paintLayer(layerIndex);
        } else {
            // We may have added or removed layers, resize as appropriate
            layerWidget.resize();
        }

        layerWidget.dismissNotification();
    });
}

CPLayersPalette.prototype = Object.create(_CPPalette2["default"].prototype);
CPLayersPalette.prototype.constructor = CPLayersPalette;
module.exports = exports["default"];

},{"./CPPalette":32,"./CPSlider":37}],29:[function(require,module,exports){
/*
    ChickenPaint
    
    ChickenPaint is a translation of ChibiPaint from Java to JavaScript
    by Nicholas Sherlock / Chicken Smoothie.
    
    ChibiPaint is Copyright (c) 2006-2008 Marc Schefer

    ChickenPaint is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    ChickenPaint is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with ChickenPaint. If not, see <http://www.gnu.org/licenses/>.
*/

"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports["default"] = CPMainGUI;

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

var _CPCanvas = require("./CPCanvas");

var _CPCanvas2 = _interopRequireDefault(_CPCanvas);

var _CPPaletteManager = require("./CPPaletteManager");

var _CPPaletteManager2 = _interopRequireDefault(_CPPaletteManager);

var _CPMainMenu = require("./CPMainMenu");

var _CPMainMenu2 = _interopRequireDefault(_CPMainMenu);

function CPMainGUI(controller, uiElem) {
    var lowerArea = document.createElement("div"),
        canvas = new _CPCanvas2["default"](controller),
        paletteManager = new _CPPaletteManager2["default"](controller),
        menuBar,
        fullScreenMode = false,
        that = this;

    this.togglePalettes = function () {
        paletteManager.togglePalettes();
    };

    this.arrangePalettes = function () {
        // Give the browser a chance to do the sizing of the palettes before we try to rearrange them
        setTimeout(paletteManager.arrangePalettes.bind(paletteManager), 0);
    };

    this.constrainPalettes = function () {
        paletteManager.constrainPalettes();
    };

    this.showPalette = function (paletteName, show) {
        paletteManager.showPaletteByName(paletteName, show);
    };

    this.getSwatches = function () {
        return paletteManager.palettes.swatches.getSwatches();
    };

    this.setSwatches = function (swatches) {
        paletteManager.palettes.swatches.setSwatches(swatches);
    };

    this.getPaletteManager = function () {
        return paletteManager;
    };

    this.setRotation = function (rotation) {
        canvas.setRotation(rotation);
    };

    this.setFullScreenMode = function (value) {
        fullScreenMode = value;

        that.resize();
        that.arrangePalettes();
    };

    this.resize = function () {
        var newHeight;

        if (fullScreenMode) {
            newHeight = $(window).height() - $(menuBar.getElement()).height();
        } else {
            newHeight = Math.min(Math.max($(window).height() - $(menuBar.getElement()).height() - 65, 500), 750);
        }

        canvas.resize(newHeight);
        that.constrainPalettes();
    };

    menuBar = new _CPMainMenu2["default"](controller, this);

    uiElem.appendChild(menuBar.getElement());

    lowerArea.className = 'chickenpaint-main-section';

    lowerArea.appendChild(canvas.getElement());
    lowerArea.appendChild(paletteManager.getElement());

    uiElem.appendChild(lowerArea);

    window.addEventListener("resize", this.resize.bind(this));

    setTimeout(this.resize.bind(this), 0);
}

CPMainGUI.prototype = Object.create(EventEmitter.prototype);
CPMainGUI.prototype.constructor = CPMainGUI;
module.exports = exports["default"];

},{"./CPCanvas":19,"./CPMainMenu":30,"./CPPaletteManager":33}],30:[function(require,module,exports){
/*
    ChickenPaint
    
    ChickenPaint is a translation of ChibiPaint from Java to JavaScript
    by Nicholas Sherlock / Chicken Smoothie.
    
    ChibiPaint is Copyright (c) 2006-2008 Marc Schefer

    ChickenPaint is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    ChickenPaint is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with ChickenPaint. If not, see <http://www.gnu.org/licenses/>.
*/

"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports["default"] = CPMainMenu;
var MENU_ENTRIES = [{
    name: "File",
    mnemonic: "F",
    children: [{
        name: "Save to my computer",
        action: "CPSave",
        mnemonic: "S",
        shortcut: "ctrl+s"
    }, {
        name: "Save image online",
        action: "CPSend",
        mnemonic: "S",
        shortcut: "ctrl+s"
    }]
}, {
    name: "Edit",
    mnemonic: "E",
    children: [{
        name: "Undo",
        action: "CPUndo",
        mnemonic: "U",
        shortcut: "ctrl+z",
        title: "Undoes the most recent action"
    }, {
        name: "Redo",
        action: "CPRedo",
        mnemonic: "R",
        shortcut: "shift+ctrl+z",
        title: "Redoes a previously undone action"
    }, {
        name: "Clear history",
        action: "CPClearHistory",
        mnemonic: "H",
        title: "Removes all undo/redo information to regain memory"
    }, {
        name: "-"
    }, {
        name: "Cut",
        action: "CPCut",
        mnemonic: "T",
        shortcut: "ctrl+x"
    }, {
        name: "Copy",
        action: "CPCopy",
        mnemonic: "C",
        shortcut: "ctrl+c"
    }, {
        name: "Copy merged",
        action: "CPCopyMerged",
        mnemonic: "Y",
        shortcut: "shift+ctrl+c"
    }, {
        name: "Paste",
        action: "CPPaste",
        mnemonic: "P",
        shortcut: "ctrl+v"
    }, {
        name: "-"
    }, {
        name: "Select all",
        action: "CPSelectAll",
        mnemonic: "A",
        shortcut: "ctrl+a"
    }, {
        name: "Deselect",
        action: "CPDeselectAll",
        mnemonic: "D",
        shortcut: "ctrl+d"
    }, {
        name: "-"
    }, {
        name: "Transform",
        action: "CPTransform",
        mnemonic: "T",
        shortcut: "ctrl+y"
    }]
}, {
    name: "Layers",
    mnemonic: "L",
    children: [{
        name: "Duplicate",
        action: "CPLayerDuplicate",
        mnemonic: "D",
        shortcut: "shift+ctrl+d",
        title: "Creates a copy of the currently selected layer"
    }, {
        name: "-"
    }, {
        name: "Merge down",
        action: "CPLayerMergeDown",
        mnemonic: "E",
        shortcut: "ctrl+e",
        title: "Merges the currently selected layer with the one directly below it"
    }, {
        name: "Merge all layers",
        action: "CPLayerMergeAll",
        mnemonic: "A",
        title: "Merges all the layers"
    }]
}, {
    name: "Effects",
    mnemonic: "E",
    children: [{
        name: "Clear",
        action: "CPClear",
        mnemonic: "D",
        shortcut: "del,backspace",
        title: "Clears the selected area"
    }, {
        name: "Fill",
        action: "CPFill",
        mnemonic: "F",
        shortcut: "ctrl+f",
        title: "Fills the selected area with the current color"
    }, {
        name: "Flip horizontal",
        action: "CPHFlip",
        mnemonic: "H",
        title: "Flips the current selected area horizontally"
    }, {
        name: "Flip vertical",
        action: "CPVFlip",
        mnemonic: "V",
        title: "Flips the current selected area vertically"
    }, {
        name: "Invert",
        action: "CPFXInvert",
        mnemonic: "I",
        title: "Invert the image colors"
    }, {
        name: "-"
    }, {
        name: "Box blur...",
        action: "CPFXBoxBlur",
        mnemonic: "B",
        title: "Blur effect"
    }, {
        name: "-"
    }, {
        name: "Monochromatic noise",
        action: "CPMNoise",
        mnemonic: "M",
        title: "Fills the selection with noise"
    }, {
        name: "Color noise",
        action: "CPCNoise",
        mnemonic: "C",
        title: "Fills the selection with colored noise"
    }]
}, {
    name: "View",
    mnemonic: "V",
    children: [{
        name: "Full-screen mode",
        action: "CPFullScreen",
        mnemonic: "F",
        checkbox: true,
        checked: false
    }, {
        name: "-"
    }, {
        name: "Zoom in",
        action: "CPZoomIn",
        mnemonic: "I",
        shortcut: "ctrl+=",
        title: "Zooms in"
    }, {
        name: "Zoom out",
        action: "CPZoomOut",
        mnemonic: "O",
        shortcut: "ctrl+-",
        title: "Zooms out"
    }, {
        name: "Zoom 100%",
        action: "CPZoom100",
        mnemonic: "1",
        shortcut: "ctrl+0",
        title: "Resets the zoom factor to 100%"
    }, {
        action: "CPLinearInterpolation",
        name: "-"
    }, {
        name: "Smooth-out zoomed canvas",
        action: "CPLinearInterpolation",
        mnemonic: "L",
        title: "Linear interpolation is used to give a smoothed looked to the picture when zoomed in",
        checkbox: true
    }, {
        name: "-"
    }, {
        name: "Show grid",
        action: "CPToggleGrid",
        mnemonic: "G",
        shortcut: "ctrl+g",
        title: "Displays a grid over the image",
        checkbox: true,
        checked: false
    }, {
        name: "Grid options...",
        action: "CPGridOptions",
        mnemonic: "D",
        title: "Shows the grid options dialog box"
    }]
}, {
    name: "Palettes",
    mnemonic: "P",
    children: [{
        name: "Rearrange",
        action: "CPArrangePalettes",
        title: "Rearrange the palette windows"
    }, {
        name: "Toggle palettes",
        action: "CPTogglePalettes",
        mnemonic: "P",
        shortcut: "tab",
        title: "Hides or shows all palettes"
    }, {
        name: "-"
    }, {
        name: "Show tool options",
        action: "CPPalBrush",
        mnemonic: "B",
        checkbox: true,
        checked: true
    }, {
        name: "Show color",
        action: "CPPalColor",
        mnemonic: "C",
        checkbox: true,
        checked: true
    }, {
        name: "Show layers",
        action: "CPPalLayers",
        mnemonic: "Y",
        checkbox: true,
        checked: true
    }, {
        name: "Show misc",
        action: "CPPalMisc",
        mnemonic: "M",
        checkbox: true,
        checked: true
    }, {
        name: "Show stroke",
        action: "CPPalStroke",
        mnemonic: "S",
        checkbox: true,
        checked: true
    }, {
        name: "Show swatches",
        action: "CPPalSwatches",
        mnemonic: "W",
        checkbox: true,
        checked: true
    }, {
        name: "Show textures",
        action: "CPPalTextures",
        mnemonic: "X",
        checkbox: true,
        checked: true
    }, {
        name: "Show tools",
        action: "CPPalTool",
        mnemonic: "T",
        checkbox: true,
        checked: true
    }]
}, {
    name: "Help",
    mnemonic: "H",
    children: [{
        name: "Tablet support",
        mnemonic: "T",
        action: "CPTabletSupport",
        title: "Help with getting a drawing tablet working"
    }, {
        name: "Shortcuts",
        mnemonic: "S",
        action: "CPShortcuts",
        title: "List of keyboard and mouse shortcuts"
    }, {
        name: "-"
    }, {
        name: "About",
        mnemonic: "A",
        action: "CPAbout",
        title: "Displays some information about ChickenPaint"
    }]
}];

function CPMainMenu(controller, mainGUI) {
    var bar = $('<nav class="navbar navbar-default">' + '<div class="container-fluid">' + '<div class="navbar-header">' + '<a class="navbar-brand" href="#">draw.</a>' + '</div>' + '<ul class="nav navbar-nav">' + '</ul>' + '</div>' + '</nav>'),
        macPlatform = /^Mac/i.test(navigator.platform);

    function menuItemClicked(target) {
        var action = target.data('action'),
            checkbox = target.data('checkbox'),
            selected;

        if (checkbox) {
            target.toggleClass("selected");
            selected = target.hasClass("selected");
        } else {
            selected = false;
        }

        controller.actionPerformed({
            action: action,
            checkbox: checkbox,
            selected: selected
        });
    }

    function presentShortcutText(shortcut) {
        shortcut = shortcut.toUpperCase();

        // Only show the first potential shortcut out of the comma-separated list
        shortcut = shortcut.replace(/(,.+)$/, "");

        // Although the keycode for zoom in is "=", we'll present it to the user as "+"
        shortcut = shortcut.replace("ctrl+=", "ctrl++");
        shortcut = shortcut.replace("+=", "++");

        if (macPlatform) {
            shortcut = shortcut.replace(/([^+])\+/g, "$1");
        } else {
            shortcut = shortcut.replace(/([^+])\+/g, "$1 ");
        }

        return shortcut;
    }

    function recurseFillMenu(menuElem, entries) {
        menuElem.append(entries.map(function (entry) {
            var entryElem;

            if (entry.action && !controller.isActionSupported(entry.action)) {
                return;
            }

            if (entry.children) {
                entryElem = $('<li class="dropdown">' + '<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">' + entry.name + ' <span class="caret"></span></a>' + '<ul class="dropdown-menu">' + '</ul>' + '</li>');

                $(".dropdown-toggle", entryElem).dropdown();

                entryElem.on("show.bs.dropdown", function () {
                    /* Instead of Bootstrap's extremely expensive data API, we'll only listen for dismiss clicks on the
                     * document *while the menu is open!*
                     */
                    $(document).one("click", function () {
                        if (entryElem.hasClass("open")) {
                            $(".dropdown-toggle", entryElem).dropdown("toggle");
                        }
                    });
                });

                recurseFillMenu($(".dropdown-menu", entryElem), entry.children);
            } else if (entry.name == '-') {
                entryElem = $('<li role="separator" class="divider"></li>');
            } else {
                entryElem = $('<li><a href="#" data-action="' + entry.action + '"><span>' + entry.name + '</span></a></li>');

                if (entry.checkbox) {
                    $("a", entryElem).data("checkbox", true).toggleClass("selected", !!entry.checked);
                }
            }

            if (entry.title) {
                entryElem.attr('title', entry.title);
            }

            if (entry.shortcut) {
                var menuLink = $("> a", entryElem),
                    shortcutDesc = document.createElement("small");

                // Rewrite the shortcuts to Mac-style
                if (macPlatform) {
                    entry.shortcut = entry.shortcut.replace(/SHIFT/im, "");
                    entry.shortcut = entry.shortcut.replace(/ALT/im, "");
                    entry.shortcut = entry.shortcut.replace(/CTRL/im, "");
                }

                shortcutDesc.className = "chickenpaint-shortcut";
                shortcutDesc.innerHTML = presentShortcutText(entry.shortcut);

                menuLink.append(shortcutDesc);

                key(entry.shortcut, function (e) {
                    menuItemClicked(menuLink);

                    e.preventDefault();
                    e.stopPropagation();

                    return false;
                });
            }

            return entryElem;
        }));
    }

    this.getElement = function () {
        return bar[0];
    };

    recurseFillMenu($(".navbar-nav", bar), MENU_ENTRIES);

    $(bar).on('click', 'a:not(.dropdown-toggle)', function (e) {
        menuItemClicked($(this));
        e.preventDefault();
    });

    function onPaletteVisChange(paletteName, show) {
        // Toggle the tickbox of the corresponding menu entry to match the new palette visibility
        var palMenuEntry = $('[data-action=\"CPPal' + paletteName.substring(0, 1).toUpperCase() + paletteName.substring(1) + '\"]', bar);

        palMenuEntry.toggleClass("selected", show);
    }

    mainGUI.getPaletteManager().on("paletteVisChange", onPaletteVisChange);
}

module.exports = exports["default"];

},{}],31:[function(require,module,exports){
/*
    ChickenPaint
    
    ChickenPaint is a translation of ChibiPaint from Java to JavaScript
    by Nicholas Sherlock / Chicken Smoothie.
    
    ChibiPaint is Copyright (c) 2006-2008 Marc Schefer

    ChickenPaint is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    ChickenPaint is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with ChickenPaint. If not, see <http://www.gnu.org/licenses/>.
*/

"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports["default"] = CPMiscPalette;

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

var _CPPalette = require('./CPPalette');

var _CPPalette2 = _interopRequireDefault(_CPPalette);

function CPMiscPalette(cpController) {
    _CPPalette2["default"].call(this, cpController, "misc", "Misc");

    var that = this,
        buttons = [{
        className: "chickenpaint-tool-zoom-in",
        command: "CPZoomIn",
        toolTip: "Zoom in"
    }, {
        className: "chickenpaint-tool-zoom-out",
        command: "CPZoomOut",
        toolTip: "Zoom out"
    }, {
        className: "chickenpaint-tool-zoom-100",
        command: "CPZoom100",
        toolTip: "Zoom 100%"
    }, {
        className: "chickenpaint-tool-undo",
        command: "CPUndo",
        toolTip: "Undo"
    }, {
        className: "chickenpaint-tool-redo",
        command: "CPRedo",
        toolTip: "Redo"
    }, {
        className: "chickenpaint-tool-send",
        command: "CPSend",
        toolTip: "Save pic"
    }];

    function buildButtons() {
        var body = that.getBodyElement(),
            listElem = document.createElement("ul");

        listElem.className = "chickenpaint-misc-tools list-unstyled";

        for (var i in buttons) {
            var button = buttons[i],
                buttonElem = document.createElement("li");

            buttonElem.className = "chickenpaint-toolbar-button " + button.className;
            buttonElem.setAttribute("data-buttonIndex", i);

            listElem.appendChild(buttonElem);
        }

        listElem.addEventListener("mousedown", function (e) {
            if (e.target && e.target.nodeName == "LI") {
                $(e.target).addClass("selected");
            }
        });

        listElem.addEventListener("mouseup", function (e) {
            if (e.target && e.target.nodeName == "LI") {
                $(e.target).removeClass("selected");
            }
        });

        listElem.addEventListener("click", function (e) {
            if (e.target && e.target.nodeName == "LI") {
                var button = buttons[parseInt(e.target.getAttribute("data-buttonIndex"), 10)];

                cpController.actionPerformed({ action: button.command });
            }
        });

        body.appendChild(listElem);
    }

    buildButtons();
}

CPMiscPalette.prototype = Object.create(_CPPalette2["default"].prototype);
CPMiscPalette.prototype.constructor = CPMiscPalette;
module.exports = exports["default"];

},{"./CPPalette":32}],32:[function(require,module,exports){
/*
    ChickenPaint
    
    ChickenPaint is a translation of ChibiPaint from Java to JavaScript
    by Nicholas Sherlock / Chicken Smoothie.
    
    ChibiPaint is Copyright (c) 2006-2008 Marc Schefer

    ChickenPaint is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    ChickenPaint is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with ChickenPaint. If not, see <http://www.gnu.org/licenses/>.
*/

"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports["default"] = CPPalette;

function CPPalette(cpController, className, title, resizeVert) {
    this.title = title;
    this.name = className;
    this.resizeVert = resizeVert || false;

    var containerElement = document.createElement("div"),
        headElement = document.createElement("div"),
        closeButton = document.createElement("button"),
        bodyElement = document.createElement("div"),
        vertHandle = null,
        dragOffset,
        that = this;

    this.getElement = function () {
        return containerElement;
    };

    this.getBodyElement = function () {
        return bodyElement;
    };

    this.getWidth = function () {
        return $(containerElement).outerWidth();
    };

    this.getHeight = function () {
        return $(containerElement).outerHeight();
    };

    this.getX = function () {
        return parseInt(containerElement.style.left, 10) || 0;
    };

    this.getY = function () {
        return parseInt(containerElement.style.top, 10) || 0;
    };

    this.setLocation = function (x, y) {
        containerElement.style.left = x + "px";
        containerElement.style.top = y + "px";
    };

    this.setWidth = function (width) {
        containerElement.style.width = width + "px";
    };

    this.setHeight = function (height) {
        containerElement.style.height = height + "px";
    };

    this.setSize = function (width, height) {
        this.setWidth(width);
        this.setHeight(height);
    };

    function mouseDrag(e) {
        that.setLocation(e.pageX - dragOffset.x, e.pageY - dragOffset.y);
    }

    function mouseDragRelease(e) {
        window.removeEventListener("mousemove", mouseDrag);
        window.removeEventListener("mouseup", mouseDragRelease);
    }

    function vertHandleDrag(e) {
        that.setHeight(e.pageY - $(containerElement).offset().top);
    }

    function vertHandleRelease(e) {
        window.removeEventListener("mousemove", vertHandleDrag);
        window.removeEventListener("mouseup", vertHandleRelease);
    }

    function vertHandleMouseDown(e) {
        window.addEventListener("mousemove", vertHandleDrag);
        window.addEventListener("mouseup", vertHandleRelease);
    }

    function addVertResizeHandle() {
        vertHandle = document.createElement("div");

        vertHandle.className = "chickenpaint-resize-handle-vert";

        vertHandle.addEventListener("mousedown", vertHandleMouseDown);

        containerElement.appendChild(vertHandle);
    }

    closeButton.type = "button";
    closeButton.className = "close";
    closeButton.innerHTML = "&times;";

    containerElement.className = "chickenpaint-palette chickenpaint-palette-" + className;

    headElement.className = "chickenpaint-palette-head";

    var headTitle = document.createElement("h4");

    headTitle.className = 'modal-title';
    headTitle.appendChild(document.createTextNode(this.title));

    headElement.appendChild(closeButton);
    headElement.appendChild(headTitle);

    bodyElement.className = "chickenpaint-palette-body";

    containerElement.appendChild(headElement);
    containerElement.appendChild(bodyElement);

    if (this.resizeVert) {
        addVertResizeHandle();
    }

    headElement.addEventListener("mousedown", function (e) {
        if (e.button == 0) {
            /* Left */
            if (e.target.nodeName == "BUTTON") {
                that.emitEvent("paletteVisChange", [that, false]);
            } else {
                window.addEventListener("mousemove", mouseDrag);
                window.addEventListener("mouseup", mouseDragRelease);

                dragOffset = { x: e.pageX - $(containerElement).position().left, y: e.pageY - $(containerElement).position().top };
            }
        }
    });
}

CPPalette.prototype = Object.create(EventEmitter.prototype);
CPPalette.prototype.constructor = EventEmitter;
module.exports = exports["default"];

},{}],33:[function(require,module,exports){
/*
    ChickenPaint
    
    ChickenPaint is a translation of ChibiPaint from Java to JavaScript
    by Nicholas Sherlock / Chicken Smoothie.
    
    ChibiPaint is Copyright (c) 2006-2008 Marc Schefer

    ChickenPaint is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    ChickenPaint is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with ChickenPaint. If not, see <http://www.gnu.org/licenses/>.
*/

"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports["default"] = CPPaletteManager;

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

var _CPToolPalette = require("./CPToolPalette");

var _CPToolPalette2 = _interopRequireDefault(_CPToolPalette);

var _CPMiscPalette = require("./CPMiscPalette");

var _CPMiscPalette2 = _interopRequireDefault(_CPMiscPalette);

var _CPStrokePalette = require("./CPStrokePalette");

var _CPStrokePalette2 = _interopRequireDefault(_CPStrokePalette);

var _CPColorPalette = require("./CPColorPalette");

var _CPColorPalette2 = _interopRequireDefault(_CPColorPalette);

var _CPBrushPalette = require("./CPBrushPalette");

var _CPBrushPalette2 = _interopRequireDefault(_CPBrushPalette);

var _CPLayersPalette = require("./CPLayersPalette");

var _CPLayersPalette2 = _interopRequireDefault(_CPLayersPalette);

var _CPTexturePalette = require("./CPTexturePalette");

var _CPTexturePalette2 = _interopRequireDefault(_CPTexturePalette);

var _CPSwatchesPalette = require("./CPSwatchesPalette");

var _CPSwatchesPalette2 = _interopRequireDefault(_CPSwatchesPalette);

function CPPaletteManager(cpController) {
    var palettes = {
        tool: new _CPToolPalette2["default"](cpController),
        misc: new _CPMiscPalette2["default"](cpController),
        stroke: new _CPStrokePalette2["default"](cpController),
        color: new _CPColorPalette2["default"](cpController),
        brush: new _CPBrushPalette2["default"](cpController),
        layers: new _CPLayersPalette2["default"](cpController),
        textures: new _CPTexturePalette2["default"](cpController),
        swatches: new _CPSwatchesPalette2["default"](cpController)
    },
        paletteFrames = [],
        hiddenFrames = [],
        parentElem = document.createElement("div"),
        that = this;

    this.palettes = palettes;

    function showPalette(palette, show) {
        var palElement = palette.getElement();

        if (show) {
            parentElem.appendChild(palElement);
        } else {
            parentElem.removeChild(palElement);
        }
        that.emitEvent("paletteVisChange", [palette.name, show]);

        // FIXME: focus hack
        // controller.canvas.grabFocus(); TODO
    }

    this.showPaletteByName = function (paletteName, show) {
        var palette = palettes[paletteName];

        if (palette) {
            showPalette(palette, show);
        }
    };

    this.togglePalettes = function () {
        if (hiddenFrames.length == 0) {
            $("> .chickenpaint-palette", parentElem).each(function () {
                that.showPaletteByName(this.getAttribute("data-paletteName"), false);
                hiddenFrames.push(this);
            });
        } else {
            for (var i = 0; i < hiddenFrames.length; i++) {
                var frame = hiddenFrames[i];

                that.showPaletteByName(frame.getAttribute("data-paletteName"), true);
            }
            hiddenFrames = [];
        }
    };

    /**
     * Pop palettes that are currently outside the visible area back into view.
     */
    this.constrainPalettes = function () {
        var windowWidth = $(parentElem).parents(".chickenpaint-main-section").width(),
            windowHeight = $(parentElem).parents(".chickenpaint-main-section").height();

        for (var i in palettes) {
            var palette = palettes[i];

            /* Move palettes that are more than half out of the frame back into it */
            if (palette.getX() + palette.getWidth() / 2 > windowWidth) {
                palette.setLocation(windowWidth - palette.getWidth(), palette.getY());
            }

            if (palette.getY() + palette.getHeight() / 2 > windowHeight) {
                palette.setLocation(palette.getX(), windowHeight - palette.getHeight());
            }
        }

        //Move small palettes to the front so that they aren't completely hidden
        //palettes.swatches.moveToFront();

        //Special handling for the swatches palette being under the brush palette:
        var widthToSpare = windowWidth - palettes.tool.getWidth() - palettes.misc.getWidth() - palettes.stroke.getWidth() - palettes.color.getWidth() - palettes.brush.getWidth() - 15 > 0;

        if (palettes.swatches.getX() + palettes.swatches.getWidth() == palettes.brush.getX() + palettes.brush.getWidth() && Math.abs(palettes.swatches.getY() - palettes.brush.getY()) < 20) {
            palettes.swatches.setLocation(palettes.brush.getX() - palettes.swatches.getWidth() - (widthToSpare ? 5 : 1), 0);
        }

        //Special handling for layers palette being too damn tall:
        if (palettes.layers.getY() + palettes.layers.getHeight() > windowHeight) {
            palettes.layers.setHeight(Math.max(windowHeight - palettes.layers.getY(), 200));
        }
    };

    /**
     * Rearrange the palettes from scratch into a useful arrangement.
     */
    this.arrangePalettes = function () {
        var windowWidth = $(parentElem).parents(".chickenpaint-main-section").width(),
            windowHeight = $(parentElem).parents(".chickenpaint-main-section").height(),
            haveWidthToSpare = windowWidth - palettes.tool.getWidth() - palettes.misc.getWidth() - palettes.stroke.getWidth() - palettes.color.getWidth() - palettes.brush.getWidth() - 15 > 0;

        palettes.brush.setLocation(windowWidth - palettes.brush.getWidth() - 15, 0);

        var bottomOfBrush = palettes.brush.getY() + palettes.brush.getHeight();

        palettes.layers.setLocation(palettes.brush.getX(), windowHeight - bottomOfBrush > 300 ? bottomOfBrush + 2 : bottomOfBrush);
        palettes.layers.setSize(palettes.brush.getWidth(), windowHeight - palettes.layers.getY());

        palettes.tool.setLocation(0, 0);

        palettes.misc.setLocation(palettes.tool.getX() + palettes.tool.getWidth() + (haveWidthToSpare ? 5 : 1), 0);

        if (haveWidthToSpare) {
            palettes.stroke.setLocation(palettes.misc.getX() + palettes.misc.getWidth() + (haveWidthToSpare ? 5 : 1), 0);
        } else {
            palettes.stroke.setLocation(palettes.misc.getX(), palettes.misc.getY() + palettes.misc.getHeight() + 1);
        }

        palettes.swatches.setLocation(palettes.brush.getX() - palettes.swatches.getWidth() - (haveWidthToSpare ? 5 : 1), 0);

        palettes.textures.setWidth(Math.min(palettes.layers.getX() - palettes.textures.getX(), 490));
        palettes.textures.setLocation(palettes.color.getX() + palettes.color.getWidth() + 4, windowHeight - palettes.textures.getHeight());

        palettes.color.setLocation(0, Math.max(palettes.tool.getY() + palettes.tool.getHeight(), windowHeight - palettes.color.getHeight()));
    };

    this.getElement = function () {
        return parentElem;
    };

    parentElem.className = "chickenpaint-palettes";

    for (var paletteName in palettes) {
        var palette = palettes[paletteName],
            palElement = palette.getElement();

        palette.on("paletteVisChange", function () {
            showPalette(this, false);
        });

        palElement.setAttribute("data-paletteName", paletteName);
        paletteFrames.push(palElement);
    }

    for (var paletteName in palettes) {
        var palElement = palettes[paletteName].getElement();

        parentElem.appendChild(palElement);
    }
}

CPPaletteManager.prototype = Object.create(EventEmitter.prototype);
CPPaletteManager.prototype.constructor = CPPaletteManager;
module.exports = exports["default"];

},{"./CPBrushPalette":18,"./CPColorPalette":21,"./CPLayersPalette":28,"./CPMiscPalette":31,"./CPStrokePalette":39,"./CPSwatchesPalette":40,"./CPTexturePalette":42,"./CPToolPalette":43}],34:[function(require,module,exports){
/*
    ChickenPaint
    
    ChickenPaint is a translation of ChibiPaint from Java to JavaScript
    by Nicholas Sherlock / Chicken Smoothie.
    
    ChibiPaint is Copyright (c) 2006-2008 Marc Schefer

    ChickenPaint is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    ChickenPaint is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with ChickenPaint. If not, see <http://www.gnu.org/licenses/>.
*/

/**
 * @param vertical boolean
 */
"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports["default"] = CPScrollbar;

function CPScrollbar(vertical) {
    var bar = document.createElement("div"),
        handle = document.createElement("div"),
        handleInner = document.createElement("div"),
        min = 0,
        max = 1,
        offset = 0,
        visibleRange = 1,
        blockIncrement = 10,
        unitIncrement = 1,
        valueIsAdjusting = false,
        handleSize = 1,
        dragLastOffset,
        that = this;

    function updateBar() {
        var longDimension = vertical ? $(bar).height() : $(bar).width();

        /* As the size of the document approaches the size of the container, handle size grows to fill the 
         * whole track:
         */
        handleSize = visibleRange / (max - min) * longDimension;

        var handleOffset = (offset - min) / (max - min) * (longDimension - handleSize);

        handleInner.style[vertical ? "height" : "width"] = handleSize + "px";
        handle.style[vertical ? "height" : "width"] = handleSize + "px";

        handle.style[vertical ? "top" : "left"] = handleOffset + "px";
    }

    this.setValues = function (_offset, _visibleRange, _min, _max) {
        offset = _offset;
        visibleRange = _visibleRange;
        min = _min;
        max = _max;

        updateBar();
    };

    this.setBlockIncrement = function (increment) {
        blockIncrement = increment;
    };

    this.setUnitIncrement = function (increment) {
        unitIncrement = increment;
    };

    this.getElement = function () {
        return bar;
    };

    this.getValueIsAdjusting = function () {
        return valueIsAdjusting;
    };

    function onBarClick(e) {
        if (this == bar) {
            var clickPos = vertical ? e.pageY - $(bar).offset().top : e.pageX - $(bar).offset().left,
                barPos = parseInt(handle.style[vertical ? "top" : "left"], 10);

            if (clickPos < barPos) {
                offset -= blockIncrement;
            } else {
                offset += blockIncrement;
            }

            that.emitEvent("valueChanged", [offset]);
            updateBar();
        }
    }

    function onHandlePress(e) {
        e.stopPropagation();
        dragLastOffset = vertical ? e.pageY - $(bar).offset().top : e.pageX - $(bar).offset().left;

        $(handle).addClass("dragging");
        window.addEventListener("mouseup", onHandleRelease);
        window.addEventListener("mousemove", onHandleDrag);
    }

    function onHandleClick(e) {
        e.stopPropagation();
    }

    function onHandleDrag(e) {
        valueIsAdjusting = true;

        var longDimension = vertical ? $(bar).height() : $(bar).width(),
            mouseOffset = vertical ? e.pageY - $(bar).offset().top : e.pageX - $(bar).offset().left;

        offset = offset + (mouseOffset - dragLastOffset) * (max - min) / (longDimension - handleSize);

        offset = Math.min(Math.max(offset, min), max);

        dragLastOffset = mouseOffset;

        that.emitEvent("valueChanged", [offset]);
        updateBar();

        valueIsAdjusting = false;
    }

    function onHandleRelease(e) {
        e.stopPropagation();
        $(handle).removeClass("dragging");
        window.removeEventListener("mouseup", onHandleRelease);
        window.removeEventListener("mousemove", onHandleDrag);
    }

    bar.className = "chickenpaint-scrollbar " + (vertical ? "chickenpaint-scrollbar-vertical" : "chickenpaint-scrollbar-horizontal");
    handle.className = "chickenpaint-scrollbar-handle";
    handleInner.className = "chickenpaint-scrollbar-handle-inner";

    handle.appendChild(handleInner);
    bar.appendChild(handle);

    handle.addEventListener("mousedown", onHandlePress);
    handle.addEventListener("click", onHandleClick);

    bar.addEventListener("click", onBarClick);
}

CPScrollbar.prototype = Object.create(EventEmitter.prototype);
CPScrollbar.prototype.constructor = CPScrollbar;
module.exports = exports["default"];

},{}],35:[function(require,module,exports){
/*
    ChickenPaint
    
    ChickenPaint is a translation of ChibiPaint from Java to JavaScript
    by Nicholas Sherlock / Chicken Smoothie.
    
    ChibiPaint is Copyright (c) 2006-2008 Marc Schefer

    ChickenPaint is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    ChickenPaint is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with ChickenPaint. If not, see <http://www.gnu.org/licenses/>.
*/

"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports["default"] = CPSendDialog;

function CPSendDialog(controller, parent, resourceSaver) {
    var dialog = $("<div class=\"modal fade\" tabindex=\"-1\" role=\"dialog\">\n                <div class=\"modal-dialog\">\n                \n                    <div class=\"modal-content\" data-stage=\"saving\">\n                        <div class=\"modal-header\">\n                            <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\n                                <span aria-hidden=\"true\">&times;</span>\n                            </button>\n                            <h4 class=\"modal-title\">Saving drawing...</h4>\n                        </div>\n                        <div class=\"modal-body\">\n                            <p class=\"chickenpaint-saving-progress-message\">Preparing your drawing to be saved, please wait...</p>\n                            <pre class=\"chickenpaint-saving-error-message pre-scrollable\"></pre>\n                            <div class=\"progress\">\n                                <div class=\"progress-bar\" role=\"progressbar\" aria-valuenow=\"0\" aria-valuemin=\"0\" aria-valuemax=\"100\" style=\"width: 0%;\"></div>\n                            </div>\n                        </div>\n                        <div class=\"modal-footer\">\n                            <button type=\"button\" class=\"btn btn-default chickenpaint-send-cancel\" data-dismiss=\"modal\">Cancel</button>\n                        </div>\n                    </div>\n                    <div class=\"modal-content\" data-stage=\"success-not-previously-posted\" style=\"display:none\">\n                        <div class=\"modal-header\">\n                            <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\n                                <span aria-hidden=\"true\">&times;</span>\n                            </button>\n                            <h4 class=\"modal-title\">Drawing saved!</h4>\n                        </div>\n                        <div class=\"modal-body\">\n                            <p>Your drawing has been saved, would you like to post it to the forum now?</p>\n                        </div>\n                        <div class=\"modal-footer\">\n                            <button type=\"button\" class=\"btn btn-primary chickenpaint-post-drawing\" data-dismiss=\"modal\">Yes, post it now</button>\n                            <button type=\"button\" class=\"btn btn-default\" data-dismiss=\"modal\">No, keep drawing</button>\n                            <button type=\"button\" class=\"btn btn-default chickenpaint-exit\" data-dismiss=\"modal\">No, quit and I'll finish it later</button>\n                        </div>\n                    </div>\n                    <div class=\"modal-content\" data-stage=\"success-already-posted\" style=\"display:none\">\n                        <div class=\"modal-header\">\n                            <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\n                                <span aria-hidden=\"true\">&times;</span>\n                            </button>\n                            <h4 class=\"modal-title\">Drawing saved!</h4>\n                        </div>\n                        <div class=\"modal-body\">\n                            <p>Your drawing has been saved, would you like to view it on the forum now?</p>\n                        </div>\n                        <div class=\"modal-footer\">\n                            <button type=\"button\" class=\"btn btn-primary chickenpaint-post-drawing\" data-dismiss=\"modal\">Yes, view the post</button>\n                            <button type=\"button\" class=\"btn btn-default\" data-dismiss=\"modal\">No, keep drawing</button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        "),
        progressMessageElem = $(".chickenpaint-saving-progress-message", dialog),
        progressError = $(".chickenpaint-saving-error-message", dialog),
        progressElem = $(".progress-bar", dialog),
        that = this;

    resourceSaver.on("savingProgress", function (progress, message) {
        progress *= 100;

        progressMessageElem.text(message);

        $(progressElem).attr("aria-valuenow", progress).css("width", progress + "%");
    });

    resourceSaver.on("savingComplete", function (progress) {
        $(".modal-content[data-stage='saving']", dialog).hide();

        if (controller.isActionSupported("CPExit")) {
            $(".modal-content[data-stage='success-not-previously-posted']", dialog).show();
        } else {
            $(".modal-content[data-stage='success-already-posted']", dialog).show();
        }
    });

    resourceSaver.on("savingFailure", function (serverMessage) {
        progressElem.addClass("progress-bar-danger");

        var errorMessage = "Sorry, your drawing could not be saved, please try again later.";

        if (serverMessage) {
            serverMessage = serverMessage.replace(/^CHIBIERROR\s*/, "");

            if (serverMessage.length > 0) {
                errorMessage += "<br><br>The error returned from the server was:";

                progressError.text(serverMessage).show();
            }

            progressMessageElem.html(errorMessage);
        }
    });

    $(".chickenpaint-post-drawing", dialog).click(function () {
        controller.actionPerformed({ action: "CPPost" });
    });

    $(".chickenpaint-exit", dialog).click(function () {
        alert("When you want to come back and finish your drawing, just click the 'new drawing' button again and " + "you can choose to continue this drawing.");
        controller.actionPerformed({ action: "CPExit" });
    });

    $(".chickenpaint-send-cancel", dialog).click(function () {
        resourceSaver.cancel();
    });

    // Destroy the modal upon close
    dialog.on("hidden.bs.modal", function (e) {
        dialog.remove();
    });

    dialog.modal({
        show: false
    });

    dialog.on('shown.bs.modal', function () {
        that.emitEvent("shown");
    });

    // Fix the backdrop location in the DOM by reparenting it to the chickenpaint container
    dialog.data("bs.modal").$body = $(parent);

    parent.appendChild(dialog[0]);

    this.show = function () {
        dialog.modal("show");
    };
}

CPSendDialog.prototype = Object.create(EventEmitter.prototype);
CPSendDialog.prototype.contructor = CPSendDialog;
module.exports = exports["default"];

},{}],36:[function(require,module,exports){
/*
    ChickenPaint
    
    ChickenPaint is a translation of ChibiPaint from Java to JavaScript
    by Nicholas Sherlock / Chicken Smoothie.
    
    ChibiPaint is Copyright (c) 2006-2008 Marc Schefer

    ChickenPaint is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    ChickenPaint is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with ChickenPaint. If not, see <http://www.gnu.org/licenses/>.
*/

"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports["default"] = CPShortcutsDialog;

function CPShortcutsDialog(parent) {
    var dialog = $("<div class=\"modal fade chickenpaint-shortcuts-dialog\" tabindex=\"-1\" role=\"dialog\">\n                <div class=\"modal-dialog modal-lg\">\n                    <div class=\"modal-content\">\n                        <div class=\"modal-header\">\n                            <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\n                                <span aria-hidden=\"true\">&times;</span>\n                            </button>\n                            <h4 class=\"modal-title\">Shortcuts</h4>\n                        </div>\n                        <div class=\"modal-body\">\n                            <p>\n                                Many of the menu options and painting tools have keyboard shortcuts which are\n                                written next to them or appear when you hover.\n                            </p>\n                            <p>\n                                Here are some other shortcuts which are not as obvious!\n                            </p>\n                            <div class=\"chickenpaint-shortcuts-sections\">\n                                <div class=\"chickenpaint-shortcuts-section\">\n                                    <h5>Color swatches palette</h5>\n                                    <ul class=\"chickenpaint-shortcuts-list list-unstyled\">\n                                        <li>\n                                            <dl>\n                                                <dt>\n                                                    <span class=\"chickenpaint-shortcut\"><span class=\"fa fa-mouse-pointer\"></span> Left</span>\n                                                </dt>\n                                                <dd>\n                                                    Use as the drawing color\n                                                </dd>\n                                                <dt>\n                                                    <span class=\"chickenpaint-shortcut\"><span class=\"fa fa-mouse-pointer\"></span> Right</span>\n                                                </dt>\n                                                <dd>\n                                                    Remove or replace a color swatch\n                                                </dd>\n                                             </dl>\n                                        </li>\n                                    </ul>\n                                </div>\n                                <div class=\"chickenpaint-shortcuts-section\">\n                                    <h5>Line drawing mode</h5>\n                                    <ul class=\"chickenpaint-shortcuts-list list-unstyled\">\n                                        <li>\n                                            <dl>\n                                                <dt>\n                                                    <span class=\"chickenpaint-shortcut\"><span class=\"chickenpaint-shortcut-key\">Shift</span> + <span class=\"fa fa-mouse-pointer\"></span> Left</span>\n                                                </dt>\n                                                <dd>\n                                                    Snap line to nearest 45 degrees\n                                                </dd>\n                                             </dl>\n                                        </li>\n                                    </ul>\n                                </div>\n                                <div class=\"chickenpaint-shortcuts-section\">\n                                    <h5>Painting tools</h5>\n                                    <ul class=\"chickenpaint-shortcuts-list list-unstyled\">\n                                        <li>\n                                            <dl>\n                                                <dt>\n                                                    <span class=\"chickenpaint-shortcut\"><span class=\"chickenpaint-shortcut-key\">1</span> - <span class=\"chickenpaint-shortcut-key\">9</span> , <span class=\"chickenpaint-shortcut-key\">0</span></span>\n                                                </dt>\n                                                <dd>\n                                                    Change brush opacity\n                                                </dd>\n                                                <dt>\n                                                    <span class=\"chickenpaint-shortcut\"><span class=\"chickenpaint-shortcut-key\">[</span> , <span class=\"chickenpaint-shortcut-key\">]</span></span>\n                                                </dt>\n                                                <dd>\n                                                    Change brush size\n                                                </dd>\n                                            </dl>\n                                        </li>\n                                    </ul>\n                                </div>\n                                <div class=\"chickenpaint-shortcuts-section\">\n                                    <h5>Brush palette</h5>\n                                    <ul class=\"chickenpaint-shortcuts-list list-unstyled\">\n                                        <li>\n                                            <dl>\n                                                <dt>\n                                                    <span class=\"chickenpaint-shortcut\"><span class=\"fa fa-mouse-pointer\"></span> Right drag</span>\n                                                </dt>\n                                                <dd>\n                                                    Adjust brush sliders more precisely\n                                                </dd>\n                                            </dl>\n                                        </li>\n                                    </ul>\n                                </div>\n                                <div class=\"chickenpaint-shortcuts-section\">\n                                    <h5>Drawing canvas</h5>\n                                    <ul class=\"chickenpaint-shortcuts-list list-unstyled\">\n                                        <li>\n                                            <dl>\n                                                <dt>\n                                                    <span class=\"chickenpaint-shortcut\"><span class=\"fa fa-mouse-pointer\"></span> Middle</span> <span class=\"chickenpaint-shortcut-alternate\">or</span> <span class=\"chickenpaint-shortcut\"><span class=\"chickenpaint-shortcut-key\">Space</span> + <span class=\"fa fa-mouse-pointer\"></span> Left</span>\n                                                </dt>\n                                                <dd>\n                                                    Move the canvas around\n                                                </dd>\n                                                <dt>\n                                                    <span class=\"chickenpaint-shortcut\"><span class=\"chickenpaint-shortcut-key\">Alt</span> + <span class=\"fa fa-mouse-pointer\"></span> Middle</span> <span class=\"chickenpaint-shortcut-alternate\">or</span> <span class=\"chickenpaint-shortcut\"><span class=\"chickenpaint-shortcut-key\">Alt</span> + <span class=\"chickenpaint-shortcut-key\">Space</span> + <span class=\"fa fa-mouse-pointer\"></span> Left</span>\n                                                </dt>\n                                                <dd>\n                                                    Rotate the canvas\n                                                </dd>\n                                                <dt>\n                                                    <span class=\"chickenpaint-shortcut\"><span class=\"fa fa-mouse-pointer\"></span> Right</span> <span class=\"chickenpaint-shortcut-alternate\">or</span> <span class=\"chickenpaint-shortcut\"><span class=\"chickenpaint-shortcut-key\">Alt</span> + <span class=\"fa fa-mouse-pointer\"></span> Left</span>\n                                                </dt>\n                                                <dd>\n                                                    Sample the color under the cursor\n                                                </dd>\n                                             </dl>\n                                        </li>\n                                    </ul>\n                                </div>\n                                <div class=\"chickenpaint-shortcuts-section\">\n                                    <h5>Layers palette</h5>\n                                    <ul class=\"chickenpaint-shortcuts-list list-unstyled\">\n                                        <li>\n                                            <dl>\n                                                <dt>\n                                                    <span class=\"chickenpaint-shortcut\"><span class=\"fa fa-mouse-pointer\"></span> Double click</span>\n                                                </dt>\n                                                <dd>\n                                                    Rename layer\n                                                </dd>\n                                             </dl>\n                                        </li>\n                                    </ul>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            ");

    // Destroy the modal upon close
    dialog.on("hidden.bs.modal", function (e) {
        dialog.remove();
    });

    dialog.modal({
        show: false
    });

    // Fix the backdrop location in the DOM by reparenting it to the chickenpaint container
    dialog.data("bs.modal").$body = $(parent);

    parent.appendChild(dialog[0]);

    this.show = function () {
        dialog.modal("show");
    };
}

module.exports = exports["default"];

},{}],37:[function(require,module,exports){
/*
    ChickenPaint
    
    ChickenPaint is a translation of ChibiPaint from Java to JavaScript
    by Nicholas Sherlock / Chicken Smoothie.
    
    ChibiPaint is Copyright (c) 2006-2008 Marc Schefer

    ChickenPaint is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    ChickenPaint is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with ChickenPaint. If not, see <http://www.gnu.org/licenses/>.
*/

/**
 * A simple slider control.
 */
"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports["default"] = CPSlider;

function CPSlider(minValue, maxValue, centerMode, expMode) {
    var PRECISE_DRAG_SCALE = 4,
        EXP_MODE_FACTOR = 1.5;

    var canvas = document.createElement("canvas"),
        canvasContext = canvas.getContext("2d"),
        valueRange = maxValue - minValue,
        dragNormal = false,
        dragPrecise = false,
        dragPreciseX,
        doneInitialPaint = false,
        that = this;

    this.value = undefined;

    /**
     * Either a string to draw on the slider, or a function(value) which receives the current value of the slider and
     * should return the string to be painted to the slider.
     *
     * @name CPSlider#title
     * @default ""
     */
    this.title = "";

    centerMode = centerMode || false;

    function paint() {
        var width = canvas.width,
            height = canvas.height,
            title = typeof that.title === "string" ? that.title : that.title(that.value),
            textX = 2 * window.devicePixelRatio,
            textY = canvas.height * 0.75;

        if (centerMode) {
            canvasContext.save();

            canvasContext.fillStyle = 'white';

            canvasContext.fillRect(0, 0, width, height);

            canvasContext.fillStyle = 'black';

            canvasContext.fillText(title, textX, textY);
            canvasContext.beginPath();

            if (that.value >= valueRange / 2) {
                canvasContext.rect(width / 2, 0, (that.value - valueRange / 2) * width / valueRange, height);
            } else {
                canvasContext.rect(that.value * width / valueRange, 0, (valueRange / 2 - that.value) * width / valueRange, height);
            }

            canvasContext.fill();
            canvasContext.clip();

            canvasContext.fillStyle = 'white';
            canvasContext.fillText(title, textX, textY);

            canvasContext.restore();
        } else {
            var barProp = (that.value - minValue) / valueRange,
                barWidth;

            if (expMode) {
                barProp = Math.pow(barProp, 1 / EXP_MODE_FACTOR);
            }

            barWidth = barProp * width;

            canvasContext.save();
            canvasContext.save();

            canvasContext.fillStyle = 'black';

            canvasContext.beginPath();
            canvasContext.rect(0, 0, barWidth, height);
            canvasContext.fill();

            canvasContext.clip();

            canvasContext.fillStyle = 'white';
            canvasContext.fillText(title, textX, textY);

            // Remove the clip region
            canvasContext.restore();

            canvasContext.fillStyle = 'white';

            canvasContext.beginPath();
            canvasContext.rect(barWidth, 0, width, height);
            canvasContext.fill();

            canvasContext.clip();

            canvasContext.fillStyle = 'black';
            canvasContext.fillText(title, textX, textY);

            canvasContext.restore();
        }
    }

    function mouseSelect(e) {
        var width = $(canvas).width(),
            left = $(canvas).offset().left,
            proportion = (e.pageX - left) / width;

        if (expMode) {
            // Give the user finer control over the low values
            proportion = Math.pow(Math.max(proportion, 0.0), EXP_MODE_FACTOR);
        }

        that.setValue(proportion * valueRange + minValue);
    }

    function mouseDragged(e) {
        if (dragNormal) {
            mouseSelect(e);
        } else if (dragPrecise) {
            var diff = (e.pageX - dragPreciseX) / PRECISE_DRAG_SCALE;

            if (diff != 0) {
                var unrounded = that.value + diff,
                    rounded = unrounded | 0;

                that.setValue(rounded);

                /* Tweak the "old mouseX" position such that the fractional part of the value we were unable to set
                 * will be accumulated
                 */
                dragPreciseX = e.pageX - (unrounded - rounded) * PRECISE_DRAG_SCALE;
            }
        }
    }

    function mouseUp(e) {
        if (dragNormal && e.button == 0) {
            dragNormal = false;
        } else if (dragPrecise && e.button == 2) {
            dragPrecise = false;
        } else {
            return;
        }

        canvas.releasePointerCapture(e.pointerId);
        canvas.removeEventListener("pointerup", mouseUp);
        canvas.removeEventListener("pointermove", mouseDragged);
    }

    this.setValue = function (_value) {
        _value = ~ ~Math.max(minValue, Math.min(maxValue, _value));

        if (this.value != _value) {
            this.value = _value;

            // The event listeners might like to update our title property at this point to reflect the new value
            this.emitEvent('valueChange', [this.value]);

            if (doneInitialPaint) {
                paint();
            } else {
                // We don't bother to do our canvas dimensioning until we're supplied with an initial value
                doneInitialPaint = true;
                this.resize();
            }
        }
    };

    /**
     * Get the DOM element for the slider component.
     */
    this.getElement = function () {
        return canvas;
    };

    this.resize = function () {
        canvas.width = $(canvas).width() || 150;
        canvas.height = $(canvas).height() || 20;

        if (window.devicePixelRatio > 1) {
            // Assume our width is set to 100% or similar, so we only need to the fix the height
            canvas.style.height = canvas.height + 'px';

            canvas.width = canvas.width * window.devicePixelRatio;
            canvas.height = canvas.height * window.devicePixelRatio;
        }

        canvasContext.font = canvas.height * 0.47 + 'pt sans-serif';

        paint();
    };

    canvas.addEventListener("pointerdown", function (e) {
        var dragging = dragNormal || dragPrecise;

        if (!dragging) {
            canvas.setPointerCapture(e.pointerId);

            switch (e.button) {
                case 0:
                    // Left
                    dragNormal = true;
                    mouseSelect(e);
                    break;
                case 2:
                    // Right
                    dragPrecise = true;
                    dragPreciseX = e.pageX;
                    break;
                default:
                    return;
            }

            canvas.addEventListener("pointerup", mouseUp);
            canvas.addEventListener("pointermove", mouseDragged);
        }
    });

    canvas.addEventListener("contextmenu", function (e) {
        e.preventDefault();
    });

    canvas.setAttribute("touch-action", "none");

    canvas.className = 'chickenpaint-slider';

    if (!window.devicePixelRatio) {
        // Old browsers
        window.devicePixelRatio = 1.0;
    }
}

CPSlider.prototype = Object.create(EventEmitter.prototype);
CPSlider.prototype.constructor = CPSlider;
module.exports = exports["default"];

},{}],38:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports["default"] = CPSplashScreen;

function CPSplashScreen(uiParent, loader, resourcesRoot) {
    var MAX_SMOOTHIE_OFFSET = 170;

    var canvas = document.createElement("canvas"),
        canvasContext = canvas.getContext("2d"),
        cup = new Image(),
        lid = new Image(),
        outlines = new Image(),
        text = new Image(),
        shading = new Image(),
        highlights = new Image(),
        smoothie = new Image(),
        images = [cup, lid, outlines, text, shading, highlights, smoothie],
        loadedCount = 0,
        cupComposite,
        smoothieComposite,
        cupCompositeContext,
        smoothieCompositeContext,
        progress = 0.0,
        message = "",
        fontHeight = 14;

    var imageRoot = resourcesRoot + "splash/";

    for (var i = 0; i < images.length; i++) {
        images[i].onload = function () {
            loadedCount++;

            if (loadedCount == images.length) {
                repaint();
            }
        };
    }

    cup.src = imageRoot + "cup.png";
    highlights.src = imageRoot + "highlights.png";
    lid.src = imageRoot + "lid.png";
    outlines.src = imageRoot + "lines.png";
    shading.src = imageRoot + "shading.png";
    smoothie.src = imageRoot + "smoothie.png";
    text.src = imageRoot + "text.png";

    function buildSmoothieComposite(imgWidth, imgHeight, progress) {
        if (!smoothieComposite) {
            smoothieComposite = document.createElement("canvas");

            smoothieComposite.width = imgWidth;
            smoothieComposite.height = imgHeight;

            smoothieCompositeContext = smoothieComposite.getContext("2d");
        }

        // First draw the smoothie in its mask position:
        smoothieCompositeContext.globalCompositeOperation = "copy";
        smoothieCompositeContext.drawImage(smoothie, 0, 0);

        // Now shift the smoothie downwards and use the original position as a mask
        smoothieCompositeContext.globalCompositeOperation = "source-in";
        smoothieCompositeContext.drawImage(smoothie, 0, Math.round(progress * MAX_SMOOTHIE_OFFSET));
    }

    function buildCupComposite(imgWidth, imgHeight, progress) {
        if (!cupComposite) {
            cupComposite = document.createElement("canvas");

            cupComposite.width = imgWidth;
            cupComposite.height = imgHeight;

            cupCompositeContext = cupComposite.getContext("2d");
        }

        cupCompositeContext.globalCompositeOperation = "copy";
        cupCompositeContext.drawImage(cup, 0, 0);

        buildSmoothieComposite(imgWidth, imgHeight, progress);

        cupCompositeContext.globalCompositeOperation = "source-over";
        cupCompositeContext.drawImage(smoothieComposite, 0, 0);

        cupCompositeContext.drawImage(lid, 0, 0);

        cupCompositeContext.globalCompositeOperation = "screen";
        cupCompositeContext.drawImage(highlights, 0, 0);

        cupCompositeContext.globalCompositeOperation = "multiply";
        cupCompositeContext.drawImage(shading, 0, 0);

        return cupComposite;
    }

    function repaint() {
        var centerX = canvas.width / 2,
            centerY = canvas.height / 2;

        canvasContext.fillStyle = 'white';
        canvasContext.fillRect(0, 0, canvas.width, canvas.height);

        if (loadedCount == images.length) {
            var imgWidth = text.width,
                imgHeight = text.height,
                left = Math.round(centerX - imgWidth / 2),
                top = Math.round(centerY - imgHeight / 2);

            canvasContext.drawImage(text, left, top);

            buildCupComposite(imgWidth, imgHeight, progress);

            //The whole cup composite is slightly transparent
            canvasContext.globalAlpha = 0.88;
            canvasContext.drawImage(cupComposite, left, top);

            canvasContext.globalAlpha = 1.0;

            canvasContext.drawImage(outlines, left, top);

            centerY = Math.round(centerY + imgHeight / 2 + 2);
        }

        if (message != "") {
            canvasContext.fillStyle = "black";

            var lines = message.split("\n");

            for (var i = 0; i < lines.length; i++) {
                var line = lines[i],
                    lineWidth = canvasContext.measureText(line).width;

                centerY += fontHeight * 2;

                canvasContext.fillText(line, centerX - lineWidth / 2, centerY);
            }
        }
    }

    function resize() {
        // Use the canvas dimensions set by the CSS styles
        canvas.width = canvas.clientWidth;
        canvas.height = canvas.clientHeight;

        canvasContext.font = fontHeight + "pt sans-serif";

        repaint();
    }

    loader.on("loadingProgress", function (_progress, _message) {
        progress = _progress;
        message = _message;

        repaint();
    });

    loader.on("loadingFailure", function (_message) {
        progress = 0;
        message = _message;

        repaint();
    });

    loader.on("loadingComplete", function () {
        window.removeEventListener("resize", resize);
        uiParent.removeChild(canvas);
    });

    window.addEventListener("resize", resize);

    canvas.className = "chickenpaint-splash-screen";

    uiParent.appendChild(canvas);

    resize();
}

module.exports = exports["default"];

},{}],39:[function(require,module,exports){
/*
    ChickenPaint
    
    ChickenPaint is a translation of ChibiPaint from Java to JavaScript
    by Nicholas Sherlock / Chicken Smoothie.
    
    ChibiPaint is Copyright (c) 2006-2008 Marc Schefer

    ChickenPaint is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    ChickenPaint is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with ChickenPaint. If not, see <http://www.gnu.org/licenses/>.
*/

'use strict';

Object.defineProperty(exports, '__esModule', {
    value: true
});
exports['default'] = CPStrokePalette;

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }

var _CPPalette = require('./CPPalette');

var _CPPalette2 = _interopRequireDefault(_CPPalette);

var _engineCPBrushInfo = require('../engine/CPBrushInfo');

var _engineCPBrushInfo2 = _interopRequireDefault(_engineCPBrushInfo);

function CPStrokePalette(cpController) {
    _CPPalette2['default'].call(this, cpController, "stroke", "Stroke");

    var that = this,
        buttons = [{
        className: "chickenpaint-tool-freehand",
        command: "CPFreeHand",
        toolTip: "Free-hand",
        selected: true
    }, {
        className: "chickenpaint-tool-line",
        command: "CPLine",
        toolTip: "Straight line"
    }, {
        className: "chickenpaint-tool-bezier",
        command: "CPBezier",
        toolTip: "Bezier curve"
    }],
        body = that.getBodyElement();

    function buildButtons() {
        var listElem = document.createElement("ul");

        listElem.className = "chickenpaint-stroke-tools list-unstyled";

        for (var i in buttons) {
            var button = buttons[i],
                buttonElem = document.createElement("li");

            buttonElem.className = "chickenpaint-toolbar-button " + button.className;
            buttonElem.setAttribute("data-buttonIndex", i);

            if (button.selected) {
                buttonElem.className = buttonElem.className + " selected";
            }

            listElem.appendChild(buttonElem);
        }

        listElem.addEventListener("click", function (e) {
            if (e.target && e.target.nodeName == "LI") {
                var button = buttons[parseInt(e.target.getAttribute("data-buttonIndex"), 10)];

                $("li", listElem).removeClass("selected");
                $(e.target).addClass("selected");

                cpController.actionPerformed({ action: button.command });
            }
        });

        body.appendChild(listElem);
    }

    buildButtons();

    cpController.on("toolChange", function (tool, toolInfo) {
        $(".chickenpaint-tool-freehand", body).toggleClass("selected", toolInfo.strokeMode == _engineCPBrushInfo2['default'].SM_FREEHAND);
        $(".chickenpaint-tool-line", body).toggleClass("selected", toolInfo.strokeMode == _engineCPBrushInfo2['default'].SM_LINE);
        $(".chickenpaint-tool-bezier", body).toggleClass("selected", toolInfo.strokeMode == _engineCPBrushInfo2['default'].SM_BEZIER);
    });
}

CPStrokePalette.prototype = Object.create(_CPPalette2['default'].prototype);
CPStrokePalette.prototype.constructor = CPStrokePalette;
module.exports = exports['default'];

},{"../engine/CPBrushInfo":5,"./CPPalette":32}],40:[function(require,module,exports){
/*
    ChickenPaint
    
    ChickenPaint is a translation of ChibiPaint from Java to JavaScript
    by Nicholas Sherlock / Chicken Smoothie.
    
    ChibiPaint is Copyright (c) 2006-2008 Marc Schefer

    ChickenPaint is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    ChickenPaint is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with ChickenPaint. If not, see <http://www.gnu.org/licenses/>.
*/

'use strict';

Object.defineProperty(exports, '__esModule', {
    value: true
});
exports['default'] = CPSwatchesPalette;

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }

var _CPPalette = require('./CPPalette');

var _CPPalette2 = _interopRequireDefault(_CPPalette);

var _utilCPColor = require('../util/CPColor');

var _utilCPColor2 = _interopRequireDefault(_utilCPColor);

var _utilAdobeColorTable = require('../util/AdobeColorTable');

var _utilAdobeColorTable2 = _interopRequireDefault(_utilAdobeColorTable);

function padLeft(string, padding, len) {
    while (string.length < len) {
        string = padding + string;
    }
    return string;
}

function wrapWithElem(e, wrapWithName) {
    var parent = document.createElement(wrapWithName);

    parent.appendChild(e);

    return parent;
}

function fileAPIsSupported() {
    return window.File && window.FileReader && window.FileList && window.Blob;
}

function CPSwatchesPalette(controller) {
    _CPPalette2['default'].call(this, controller, "swatches", "Color swatches");

    var INIT_COLORS = [0xffffff, 0x000000, 0xff0000, 0x00ff00, 0x0000ff, 0xffff00],
        modified = false,
        swatchPanel = document.createElement("ul"),
        buttonPanel = document.createElement("div"),
        fileInput,
        that = this;

    function CPColorSwatch(color) {
        var wrapper = document.createElement("div"),
            swatchElem = document.createElement("a"),
            swatchMenu = document.createElement("ul"),
            mnuRemove = document.createElement("a"),
            mnuSetToCurrent = document.createElement("a"),
            that = this;

        this.getElement = function () {
            return wrapper;
        };

        this.setColor = function (color) {
            swatchElem.setAttribute("data-color", color);
            swatchElem.style.backgroundColor = '#' + padLeft("" + Number(color).toString(16), "0", 6);
        };

        this.setColor(color);

        swatchElem.href = "#";
        swatchElem.className = "chickenpaint-color-swatch dropdown-toggle";
        swatchElem.setAttribute("data-toggle", "dropdown");

        mnuRemove.href = "#";
        mnuRemove.innerHTML = "Remove";

        mnuRemove.addEventListener("click", function (e) {
            e.preventDefault();
            $(wrapper).remove();

            modified = true;
        });

        mnuSetToCurrent.href = "#";
        mnuSetToCurrent.innerHTML = "Replace with current color";

        mnuSetToCurrent.addEventListener("click", function (e) {
            e.preventDefault();

            that.setColor(controller.getCurColor().getRgb());

            modified = true;
        });

        swatchMenu.className = "dropdown-menu";

        swatchMenu.appendChild(wrapWithElem(mnuRemove, "li"));
        swatchMenu.appendChild(wrapWithElem(mnuSetToCurrent, "li"));

        wrapper.className = "chickenpaint-color-swatch-wrapper";
        wrapper.appendChild(swatchElem);
        wrapper.appendChild(swatchMenu);

        $(wrapper).on("show.bs.dropdown", function () {
            var $btnDropDown = $(this).find(".dropdown-toggle"),
                $listHolder = $(this).find(".dropdown-menu");

            $listHolder.css({
                "top": $btnDropDown.position().top + $btnDropDown.outerHeight(true) + "px",
                "left": $btnDropDown.position().left + "px"
            });
        });
    }

    function clearSwatches() {
        while (swatchPanel.lastChild) {
            swatchPanel.removeChild(swatchPanel.lastChild);
        }
    }

    function addSwatch(color) {
        var swatch = new CPColorSwatch(color);

        swatchPanel.appendChild(swatch.getElement());
    }

    /**
     * Returns an array of colors in RGB 32-bit integer format
     */
    this.getSwatches = function () {
        var swatches = $(".chickenpaint-color-swatch", swatchPanel),
            colors = new Array(swatches.length);

        for (var i = 0; i < swatches.length; i++) {
            colors[i] = parseInt(swatches.get(i).getAttribute("data-color"), 10);
        }

        return colors;
    };

    this.setSwatches = function (swatches) {
        clearSwatches();

        for (var i = 0; i < swatches.length; i++) {
            addSwatch(swatches[i]);
        }

        modified = true;
    };

    this.isModified = function () {
        return modified;
    };

    function loadSwatches() {
        fileInput.onchange = function () {
            var fileList = this.files;

            if (fileList.length < 1) return;

            var file = fileList[0],
                reader = new FileReader();

            reader.onload = function () {
                var swatches = new _utilAdobeColorTable2['default']().read(this.result);

                if (swatches != null && swatches.length > 0) {
                    that.setSwatches(swatches);
                } else {
                    alert("The swatches could not be read, did you select an .aco file?");
                }
            };

            reader.readAsArrayBuffer(file);
        };

        fileInput.click();
    }

    function saveSwatches() {
        var aco = new _utilAdobeColorTable2['default']().write(that.getSwatches()),
            blob = new Blob([aco], { type: "application/octet-stream" });

        window.saveAs(blob, "oekakiswatches.aco");
    }

    function initSwatchPanel() {
        swatchPanel.className = "chickenpaint-color-swatches list-unstyled";

        for (var i = 0; i < INIT_COLORS.length; i++) {
            swatchPanel.appendChild(new CPColorSwatch(INIT_COLORS[i]).getElement());
        }

        swatchPanel.addEventListener("click", function (e) {
            var swatch = e.target;

            if (!/chickenpaint-color-swatch/.test(swatch.className)) {
                return;
            }

            if (e.button == 0 /* Left */ && swatch.getAttribute("data-color") !== undefined) {
                controller.setCurColor(new _utilCPColor2['default'](parseInt(swatch.getAttribute("data-color"), 10)));
                e.stopPropagation();
                e.preventDefault();
            }
        });

        swatchPanel.addEventListener("contextmenu", function (e) {
            var swatch = e.target;

            if (!/chickenpaint-color-swatch/.test(swatch.className)) {
                return;
            }

            e.preventDefault();

            $(swatch).dropdown("toggle").off("click.bs.dropdown"); // Remove Bootstrap's left-click handler installed by toggle
        });
    }

    function initButtonsPanel() {
        var btnSettings = document.createElement("div"),
            btnAdd = document.createElement("div"),
            settingsMenu = document.createElement("ul"),
            mnuSave = document.createElement("a"),
            mnuLoad = document.createElement("a");

        btnAdd.title = "Add the current brush color as a new swatch";
        btnAdd.className = "chickenpaint-small-toolbar-button chickenpaint-color-swatch-add";

        btnSettings.className = "chickenpaint-small-toolbar-button chickenpaint-color-swatch-settings";
        btnSettings.setAttribute("data-toggle", "dropdown");
        $(btnSettings).dropdown();

        mnuSave.href = "#";
        mnuSave.innerHTML = "Save swatches to your computer...";
        mnuSave.addEventListener("click", function (e) {
            e.preventDefault();

            saveSwatches();
        });

        mnuLoad.href = "#";
        mnuLoad.innerHTML = "Load swatches from your computer...";
        mnuLoad.addEventListener("click", function (e) {
            e.preventDefault();

            loadSwatches();
        });

        settingsMenu.className = "dropdown-menu dropdown-menu-right";

        settingsMenu.appendChild(wrapWithElem(mnuSave, "li"));
        settingsMenu.appendChild(wrapWithElem(mnuLoad, "li"));

        var btnSettingsContainer = document.createElement("div");

        btnSettingsContainer.className = 'dropdown';
        btnSettingsContainer.appendChild(btnSettings);
        btnSettingsContainer.appendChild(settingsMenu);

        $(btnSettingsContainer).on("show.bs.dropdown", function () {
            /* Instead of Bootstrap's extremely expensive data API, we'll only listen for dismiss clicks on the
             * document *while the menu is open!*
             */
            $(document).one("click", function () {
                if ($(btnSettingsContainer).hasClass("open")) {
                    $(btnSettings).dropdown("toggle");
                }
            });
        });

        btnAdd.addEventListener("click", function (e) {
            addSwatch(controller.getCurColor().getRgb());
            modified = true;
        });

        buttonPanel.className = 'chickenpaint-color-swatches-buttons';

        // Don't offer to load/save swatches if we don't have the file API needed for reading them
        if (fileAPIsSupported()) {
            fileInput = document.createElement("input");

            fileInput.type = "file";
            fileInput.multiple = false;
            fileInput.style.display = "none";

            buttonPanel.appendChild(btnSettingsContainer);
            buttonPanel.appendChild(fileInput);
        }

        buttonPanel.appendChild(btnAdd);
    }

    initSwatchPanel();
    this.getBodyElement().appendChild(swatchPanel);

    initButtonsPanel();
    this.getBodyElement().appendChild(buttonPanel);
}

CPSwatchesPalette.prototype = Object.create(_CPPalette2['default'].prototype);
CPSwatchesPalette.prototype.constructor = CPSwatchesPalette;
module.exports = exports['default'];

},{"../util/AdobeColorTable":44,"../util/CPColor":47,"./CPPalette":32}],41:[function(require,module,exports){
/*
    ChickenPaint
    
    ChickenPaint is a translation of ChibiPaint from Java to JavaScript
    by Nicholas Sherlock / Chicken Smoothie.
    
    ChibiPaint is Copyright (c) 2006-2008 Marc Schefer

    ChickenPaint is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    ChickenPaint is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with ChickenPaint. If not, see <http://www.gnu.org/licenses/>.
*/

"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports["default"] = CPTabletDialog;

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

var _utilCPWacomTablet = require("../util/CPWacomTablet");

var _utilCPWacomTablet2 = _interopRequireDefault(_utilCPWacomTablet);

function CPTabletDialog(parent) {
    var dialog = $("<div class=\"modal fade\" tabindex=\"-1\" role=\"dialog\">\n                <div class=\"modal-dialog\">\n                    <div class=\"modal-content\">\n                        <div class=\"modal-header\">\n                            <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\n                                <span aria-hidden=\"true\">&times;</span>\n                            </button>\n                            <h4 class=\"modal-title\">Drawing tablet support</h4>\n                        </div>\n                        <div class=\"modal-body\">\n                            <p class=\"chickenpaint-tablet-there-are-two-options\">\n                                There are two ways you could use your tablet's pen pressure support with ChickenPaint.\n                            </p>\n                            <div class=\"chickenpaint-tablet-support chickenpaint-wacom-support\">\n                                <h4>\n                                    Plugin for Wacom tablets\n                                </h4>\n                                <div class=\"chickenpaint-supported-browsers\">\n                                    <div class=\"chickenpaint-supported-browser\">\n                                        <span class=\"fa fa-internet-explorer\"></span>\n                                        IE 10, 11\n                                    </div>\n                                    <div class=\"chickenpaint-supported-browser\">\n                                        <span class=\"fa fa-firefox\"></span>\n                                        Firefox (32-bit only)\n                                    </div>\n                                    <div class=\"chickenpaint-supported-browser\">\n                                        <span class=\"fa fa-safari\"></span>\n                                        Safari\n                                    </div>\n                                        <div class=\"chickenpaint-supported-browser\">\n                                        <span class=\"fa fa-opera\"></span>\n                                        Opera\n                                    </div>\n                                </div>\n                                <p class=\"chickenpaint-not-installed\">\n                                    The plugin for Wacom tablets doesn't seem to be installed in your browser yet.\n                                </p>\n                                <p class=\"chickenpaint-not-installed\">\n                                    Please make sure that you've installed the latest drivers for your tablet from the \n                                    <a href=\"http://www.wacom.com/en-us/support/product-support/drivers\" target=\"_blank\">Wacom drivers page</a>,\n                                    then restart your browser.\n                                </p>\n                                <p class=\"chickenpaint-not-supported\">\n                                    Your browser doesn't support the Wacom tablet plugin, please \n                                    try one of the browsers listed above instead.\n                                </p>\n                                <p class=\"chickenpaint-supported alert alert-success\">\n                                    The Wacom tablet plugin is installed and working.\n                                </p>\n                            </div>\n                            <div class=\"chickenpaint-tablet-support chickenpaint-pointerevents-support\">\n                                <h4>\n                                    Built-in support for most tablets <small>including Wacom tablets</small>\n                                </h4>\n                                <div class=\"chickenpaint-supported-browsers\">\n                                    <div class=\"chickenpaint-supported-browser\">\n                                        <span class=\"fa fa-internet-explorer\"></span>\n                                        IE (Windows 8)\n                                    </div>\n                                        <div class=\"chickenpaint-supported-browser\">\n                                        <span class=\"fa fa-edge\"></span>\n                                        Edge (Windows 10)\n                                    </div>\n                                    <div class=\"chickenpaint-supported-browser\">\n                                        <span class=\"fa fa-firefox\"></span>\n                                        Firefox (<a href=\"https://github.com/thenickdude/chickenpaint/blob/master/help/Firefox pressure support.md\" target=\"_blank\">experimental <i class=\"glyphicon glyphicon-new-window\"></i></a>)\n                                    </div>\n                                    <div class=\"chickenpaint-supported-browser\">\n                                        <span class=\"fa fa-chrome\"></span>\n                                        Chrome (coming soon)\n                                    </div>\n                                </div>\n                                <p class=\"chickenpaint-not-supported\">\n                                    Your browser doesn't have built-in support for drawing tablets, please try\n                                    one of the other browsers listed above.\n                                </p>\n                                <p class=\"chickenpaint-supported alert alert-success\">\n                                    Your browser has built-in support for drawing tablets!\n                                </p>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n       ");

    var wacomSupportElem = $(".chickenpaint-wacom-support", dialog),
        peSupportElem = $(".chickenpaint-pointerevents-support", dialog),
        bothOptionsElem = $(".chickenpaint-tablet-there-are-two-options", dialog),
        wacomPresent = _utilCPWacomTablet2["default"].getRef().isTabletPresent(),
        peSupported = !!window.hasNativePointerEvents;

    wacomSupportElem.toggleClass("supported", wacomPresent);

    if (wacomPresent) {
        // Don't bother displaying info about Pointer Events if we have the Wacom plugin installed
        peSupportElem.hide();
        bothOptionsElem.hide();
    } else {
        // Chrome has dropped NPAPI support, so the Wacom plugin cannot be installed
        if (/Chrome/i.test(navigator.userAgent) && !/OPR/.test(navigator.userAgent) || /iPad/.test(navigator.userAgent) || /iPhone/.test(navigator.userAgent)) {
            wacomSupportElem.addClass("not-supported");
        }

        // Don't bother showing the Wacom plugin details if this browser supports pointer events
        if (peSupported) {
            wacomSupportElem.hide();
            bothOptionsElem.hide();
        }
    }

    peSupportElem.toggleClass("supported", peSupported);
    peSupportElem.toggleClass("not-supported", !peSupported);

    dialog.modal({
        show: false
    });

    // Fix the backdrop location in the DOM by reparenting it to the chickenpaint container
    dialog.data("bs.modal").$body = $(parent);

    parent.appendChild(dialog[0]);

    this.show = function () {
        dialog.modal("show");
    };
}

module.exports = exports["default"];

},{"../util/CPWacomTablet":55}],42:[function(require,module,exports){
/*
    ChickenPaint
    
    ChickenPaint is a translation of ChibiPaint from Java to JavaScript
    by Nicholas Sherlock / Chicken Smoothie.
    
    ChibiPaint is Copyright (c) 2006-2008 Marc Schefer

    ChickenPaint is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    ChickenPaint is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with ChickenPaint. If not, see <http://www.gnu.org/licenses/>.
*/

'use strict';

Object.defineProperty(exports, '__esModule', {
    value: true
});
exports['default'] = CPTexturePalette;

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }

var _engineCPGreyBmp = require('../engine/CPGreyBmp');

var _engineCPGreyBmp2 = _interopRequireDefault(_engineCPGreyBmp);

var _engineCPLookUpTable = require('../engine/CPLookUpTable');

var _engineCPLookUpTable2 = _interopRequireDefault(_engineCPLookUpTable);

var _CPPalette = require('./CPPalette');

var _CPPalette2 = _interopRequireDefault(_CPPalette);

var _CPSlider = require('./CPSlider');

var _CPSlider2 = _interopRequireDefault(_CPSlider);

function wrapCheckboxWithLabel(checkbox, title) {
    var div = document.createElement("div"),
        label = document.createElement("label");

    div.className = "checkbox";

    label.appendChild(checkbox);
    label.appendChild(document.createTextNode(title));

    div.appendChild(label);

    return div;
}

function loadTextures(textureFilename, width, height, textureCount, then) {
    var img = new Image(),
        textures = [];

    img.onload = function () {
        var canvas = document.createElement("canvas"),
            canvasContext = canvas.getContext("2d");

        canvas.width = img.width;
        canvas.height = img.height;

        for (var i = 0; i < textureCount; i++) {
            canvasContext.drawImage(img, 0, i * height, width, height, 0, 0, width, height);

            try {
                var imageData = canvasContext.getImageData(0, 0, width, height),
                    texture = new _engineCPGreyBmp2['default'](width, height);

                // Take just the red channel from the image to form the new grayscale texture
                for (var j = 0; j < width * height; j++) {
                    texture.data[j] = imageData.data[j * 4];
                }

                textures.push(texture);
            } catch (e) {
                // Quietly ignore errors that occur while loading the image (e.g. cross-origin security failures)
                console.log(e);
            }
        }

        then(textures);
    };

    img.src = textureFilename;
}

function CPTexturePalette(controller) {
    _CPPalette2['default'].call(this, controller, "textures", "Textures");

    var TEXTURE_PREVIEW_SIZE = 64,
        TEXTURE_SWATCH_BUTTON_SIZE = 32,
        textures = [],
        // Array of CPGreyBmp
    selectedTexture,
        processedTexture,
        //Both CPGreyBmp

    mirror = false,
        inverse = false,
        brightness = 0.0,
        contrast = 0.0,
        optionsPanel,
        texturesPanel = document.createElement("div"),
        body = this.getBodyElement();

    /**
     * Add an array of textures to the global texture list, and add swatches for them to the UI.
     */
    function addTextures(newTextures) {
        for (var i = 0; i < newTextures.length; i++) {
            var texture = newTextures[i];

            textures.push(texture);

            var button = new CPTextureSwatch(texture, TEXTURE_SWATCH_BUTTON_SIZE, TEXTURE_SWATCH_BUTTON_SIZE);

            button.on("click", function () {
                selectedTexture = this.texture;
                updateSelectedTexture();
            });

            texturesPanel.appendChild(button.getElement());
        }
    }

    /**
     * Generate and return an array of procedurally-generated textures
     * 
     * @returns CPGreyBmp[]
     */
    function makeProceduralTextures() {
        var result = [null];

        var texture = new _engineCPGreyBmp2['default'](2, 2);
        texture.data[0] = 0xFF;
        texture.data[3] = 0xFF;
        result.push(texture);

        result.push(makeDotTexture(2));
        result.push(makeDotTexture(3));
        result.push(makeDotTexture(4));
        result.push(makeDotTexture(6));
        result.push(makeDotTexture(8));

        result.push(makeVertLinesTexture(1, 2));
        result.push(makeVertLinesTexture(2, 4));

        result.push(makeHorizLinesTexture(1, 2));
        result.push(makeHorizLinesTexture(2, 4));

        result.push(makeCheckerBoardTexture(2));
        result.push(makeCheckerBoardTexture(4));
        result.push(makeCheckerBoardTexture(8));
        result.push(makeCheckerBoardTexture(16));

        return result;
    }

    /**
     * @param size int
     * 
     * @returns CPGreyBmp
     */
    function makeDotTexture(size) {
        var texture = new _engineCPGreyBmp2['default'](size, size);

        for (var i = 1; i < size * size; i++) {
            texture.data[i] = 0xFF;
        }
        return texture;
    }

    /**
     * Make a checkerboard texture of the given dimensions.
     * 
     * @param size int
     * 
     * @returns CPGreyBmp
     */
    function makeCheckerBoardTexture(size) {
        var textureSize = 2 * size,
            texture = new _engineCPGreyBmp2['default'](textureSize, textureSize);

        for (var i = 0; i < textureSize; i++) {
            for (var j = 0; j < textureSize; j++) {
                texture.data[i + j * textureSize] = (~ ~(i / size) + ~ ~(j / size)) % 2 == 0 ? 0 : 0xFF;
            }
        }

        return texture;
    }

    /**
     * Make a texture consisting of a series of evenly-spaced vertical lines
     * 
     * @param lineSize int
     * @param size int
     * 
     * @returns CPGreyBmp
     */
    function makeVertLinesTexture(lineSize, size) {
        var texture = new _engineCPGreyBmp2['default'](size, size);

        for (var i = 0; i < size * size; i++) {
            if (~ ~(i % size) >= lineSize) {
                texture.data[i] = 0xFF;
            }
        }

        return texture;
    }

    /**
     * Make a texture consisting of a series of evenly-spaced horizontal lines
     *
     * @param lineSize int
     * @param size int
     * 
     * @returns CPGreyBmp
     */
    function makeHorizLinesTexture(lineSize, size) {
        var texture = new _engineCPGreyBmp2['default'](size, size);

        for (var i = 0; i < size * size; i++) {
            if (i / size >= lineSize) {
                texture.data[i] = 0xFF;
            }
        }

        return texture;
    }

    function updateSelectedTexture() {
        if (selectedTexture != null) {
            processedTexture = selectedTexture.clone();

            if (mirror) {
                processedTexture.mirrorHorizontally();
            }

            var lut = new _engineCPLookUpTable2['default']();

            lut.loadBrightnessContrast(brightness, contrast);

            if (inverse) {
                lut.invert();
            }

            processedTexture.applyLUT(lut);
        } else {
            processedTexture = null;
        }

        controller.getArtwork().setBrushTexture(processedTexture);

        if (optionsPanel != null) {
            optionsPanel.updateTexture();
        }
    }

    function CPTextureOptionsPanel() {
        var panel = document.createElement("div"),
            cbInverse = document.createElement("input"),
            cbMirror = document.createElement("input"),
            slBrightness = new _CPSlider2['default'](0, 200, true),
            slContrast = new _CPSlider2['default'](0, 200, true),
            sampleSwatch = new CPTextureSwatch(null, TEXTURE_PREVIEW_SIZE, TEXTURE_PREVIEW_SIZE),
            btnCustomize = document.createElement("button"),
            textureControlsPanel;

        function updatePopoverControls() {
            cbInverse.checked = inverse;
            cbMirror.checked = mirror;

            slBrightness.setValue(brightness * 100 + 100);
            slContrast.setValue(contrast * 100 + 100);
        }

        function buildTextureControlsPanel() {
            var panel = document.createElement("div");

            cbInverse.type = "checkbox";
            cbInverse.addEventListener("click", function (e) {
                inverse = this.checked;
                updateSelectedTexture();
            });

            panel.appendChild(wrapCheckboxWithLabel(cbInverse, "Inverse"));

            cbMirror.type = "checkbox";
            cbMirror.addEventListener("click", function (e) {
                mirror = this.checked;
                updateSelectedTexture();
            });

            panel.appendChild(wrapCheckboxWithLabel(cbMirror, "Mirror"));

            slBrightness.title = function (value) {
                return "Brightness: " + (value - 100) + "%";
            };

            slBrightness.on("valueChange", function (value) {
                brightness = (value - 100) / 100.0;

                updateSelectedTexture();
            });

            panel.appendChild(slBrightness.getElement());

            slContrast.title = function (value) {
                return "Contrast: " + (value - 100) + "%";
            };

            slContrast.on("valueChange", function (value) {
                contrast = (value - 100) / 100;

                updateSelectedTexture();
            });

            panel.appendChild(slContrast.getElement());

            var okayButton = document.createElement("button"),
                resetButton = document.createElement("button");

            okayButton.innerHTML = "Ok";
            okayButton.className = "btn btn-primary btn-sm";
            okayButton.type = "button";

            okayButton.addEventListener("click", function (e) {
                $(btnCustomize).popover('hide');
            });

            panel.appendChild(okayButton);
            panel.appendChild(document.createTextNode(" "));

            resetButton.innerHTML = "Reset";
            resetButton.className = "btn btn-default btn-sm";
            resetButton.type = "button";

            resetButton.addEventListener("click", function (e) {
                brightness = 0;
                contrast = 0;
                mirror = false;
                inverse = false;

                updatePopoverControls();
                updateSelectedTexture();
            });

            panel.appendChild(resetButton);

            updatePopoverControls();

            return panel;
        }

        // TODO use events instead
        this.updateTexture = function () {
            btnCustomize.disabled = processedTexture == null;
            sampleSwatch.setTexture(processedTexture);
        };

        this.getElement = function () {
            return panel;
        };

        panel.className = "chickenpaint-texture-options";
        panel.appendChild(sampleSwatch.getElement());

        btnCustomize.type = "button";
        btnCustomize.className = "btn btn-default btn-sm";
        btnCustomize.innerHTML = "Customize";

        textureControlsPanel = buildTextureControlsPanel();

        $(btnCustomize).popover({
            html: true,
            content: function content() {
                return textureControlsPanel;
            },
            trigger: "manual"
        }).on("click", function () {
            $(this).popover("toggle");
        });

        panel.appendChild(btnCustomize);

        this.updateTexture();
    }

    function CPTextureSwatch(texture, width, height) {
        var canvas = document.createElement("canvas"),
            canvasContext = canvas.getContext("2d"),
            that = this;

        this.setTexture = function (texture) {
            this.texture = texture;

            this.paint();
        };

        this.getElement = function () {
            return canvas;
        };

        this.paint = function () {
            if (this.texture != null) {
                canvasContext.fillStyle = canvasContext.createPattern(this.texture.toCanvas(), "repeat");
            } else {
                canvasContext.fillStyle = 'white';
            }
            canvasContext.fillRect(0, 0, canvas.width, canvas.height);
        };

        canvas.addEventListener("click", function () {
            that.emit("click");
        });

        canvas.width = width;
        canvas.height = height;

        this.setTexture(texture);
    }

    CPTextureSwatch.prototype = Object.create(EventEmitter.prototype);
    CPTextureSwatch.prototype.constructor = CPTextureSwatch;

    optionsPanel = new CPTextureOptionsPanel();

    body.appendChild(optionsPanel.getElement());

    texturesPanel.className = 'chickenpaint-texture-swatches';

    body.appendChild(texturesPanel);

    addTextures(makeProceduralTextures());

    loadTextures(controller.getResourcesRoot() + "gfx/textures32.png", 32, 32, 2, function (loadedTextures) {
        addTextures(loadedTextures);
    });
}

CPTexturePalette.prototype = Object.create(_CPPalette2['default'].prototype);
CPTexturePalette.prototype.constructor = CPTexturePalette;
module.exports = exports['default'];

},{"../engine/CPGreyBmp":10,"../engine/CPLookUpTable":12,"./CPPalette":32,"./CPSlider":37}],43:[function(require,module,exports){
/*
    ChickenPaint
    
    ChickenPaint is a translation of ChibiPaint from Java to JavaScript
    by Nicholas Sherlock / Chicken Smoothie.
    
    ChibiPaint is Copyright (c) 2006-2008 Marc Schefer

    ChickenPaint is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    ChickenPaint is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with ChickenPaint. If not, see <http://www.gnu.org/licenses/>.
*/

'use strict';

Object.defineProperty(exports, '__esModule', {
    value: true
});
exports['default'] = CPToolPalette;

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }

var _CPPalette = require('./CPPalette');

var _CPPalette2 = _interopRequireDefault(_CPPalette);

var _ChickenPaint = require('../ChickenPaint');

var _ChickenPaint2 = _interopRequireDefault(_ChickenPaint);

function CPToolPalette(cpController) {
    _CPPalette2['default'].call(this, cpController, "tool", "Tools");

    var that = this,
        buttons = [{
        className: "chickenpaint-tool-rect-selection",
        command: "CPRectSelection",
        toolTip: "Marquee",
        shortcut: "m",
        mode: _ChickenPaint2['default'].M_RECT_SELECTION
    }, {
        className: "chickenpaint-tool-move",
        command: "CPMoveTool",
        toolTip: "Move tool",
        shortcut: "v",
        mode: _ChickenPaint2['default'].M_MOVE_TOOL
    }, {
        className: "chickenpaint-tool-flood-fill",
        command: "CPFloodFill",
        toolTip: "Flood fill",
        shortcut: "f",
        mode: _ChickenPaint2['default'].M_FLOODFILL
    }, {
        className: "chickenpaint-tool-gradient-fill",
        command: "CPGradientFill",
        toolTip: "Gradient fill",
        shortcut: "g",
        mode: _ChickenPaint2['default'].M_GRADIENTFILL
    }, {
        className: "chickenpaint-tool-color-picker",
        command: "CPColorPicker",
        toolTip: "Color picker",
        shortcut: "i",
        mode: _ChickenPaint2['default'].M_COLOR_PICKER
    }, {
        className: "chickenpaint-tool-rotate-canvas",
        command: "CPRotateCanvas",
        commandDoubleClick: "CPResetCanvasRotation",
        toolTip: "Rotate canvas",
        mode: _ChickenPaint2['default'].M_ROTATE_CANVAS
    }, {
        className: "chickenpaint-tool-pencil",
        command: "CPPencil",
        toolTip: "Pencil",
        mode: _ChickenPaint2['default'].M_DRAW,
        tool: _ChickenPaint2['default'].T_PENCIL
    }, {
        className: "chickenpaint-tool-pen",
        command: "CPPen",
        toolTip: "Pen",
        selected: true, // TODO a better mechanism for the controller to let us know the initial tool
        mode: _ChickenPaint2['default'].M_DRAW,
        tool: _ChickenPaint2['default'].T_PEN
    }, {
        className: "chickenpaint-tool-airbrush",
        command: "CPAirbrush",
        toolTip: "Airbrush",
        mode: _ChickenPaint2['default'].M_DRAW,
        tool: _ChickenPaint2['default'].T_AIRBRUSH
    }, {
        className: "chickenpaint-tool-water",
        command: "CPWater",
        toolTip: "Waterpaint",
        mode: _ChickenPaint2['default'].M_DRAW,
        tool: _ChickenPaint2['default'].T_WATER
    }, {
        className: "chickenpaint-tool-eraser",
        command: "CPEraser",
        toolTip: "Eraser",
        shortcut: "e",
        mode: _ChickenPaint2['default'].M_DRAW,
        tool: _ChickenPaint2['default'].T_ERASER
    }, {
        className: "chickenpaint-tool-soft-eraser",
        command: "CPSoftEraser",
        toolTip: "Soft eraser",
        mode: _ChickenPaint2['default'].M_DRAW,
        tool: _ChickenPaint2['default'].T_SOFTERASER
    }, {
        className: "chickenpaint-tool-smudge",
        command: "CPSmudge",
        toolTip: "Smudge",
        mode: _ChickenPaint2['default'].M_DRAW,
        tool: _ChickenPaint2['default'].T_SMUDGE
    }, {
        className: "chickenpaint-tool-blender",
        command: "CPBlender",
        toolTip: "Blender",
        mode: _ChickenPaint2['default'].M_DRAW,
        tool: _ChickenPaint2['default'].T_BLENDER
    }, {
        className: "chickenpaint-tool-dodge",
        command: "CPDodge",
        toolTip: "Dodge",
        shortcut: "o",
        mode: _ChickenPaint2['default'].M_DRAW,
        tool: _ChickenPaint2['default'].T_DODGE
    }, {
        className: "chickenpaint-tool-burn",
        command: "CPBurn",
        toolTip: "Burn",
        shortcut: "p",
        mode: _ChickenPaint2['default'].M_DRAW,
        tool: _ChickenPaint2['default'].T_BURN
    }, {
        className: "chickenpaint-tool-blur",
        command: "CPBlur",
        toolTip: "Blur",
        mode: _ChickenPaint2['default'].M_DRAW,
        tool: _ChickenPaint2['default'].T_BLUR
    }],
        listElem = document.createElement("ul");

    function buttonClicked(e) {
        if (this.nodeName == "LI") {
            var button = buttons[parseInt(this.getAttribute("data-buttonIndex"), 10)];

            cpController.actionPerformed({ action: button.command });
        }
    }

    function buildButtons() {
        var body = that.getBodyElement();

        listElem.className = "chickenpaint-tools list-unstyled";

        for (var i in buttons) {
            (function (i) {
                var button = buttons[i],
                    buttonElem = document.createElement("li");

                buttonElem.className = "chickenpaint-toolbar-button " + button.className;
                buttonElem.setAttribute("data-buttonIndex", i);

                buttonElem.setAttribute('data-mode', button.mode);
                if (button.tool !== undefined) {
                    buttonElem.setAttribute('data-tool', button.tool);
                }

                buttonElem.title = button.toolTip;

                if (button.shortcut) {
                    buttonElem.title += " (" + button.shortcut.toUpperCase() + ")";

                    key(button.shortcut, function () {
                        buttonClicked.call(buttonElem);

                        return false;
                    });
                }

                if (button.selected) {
                    buttonElem.className = buttonElem.className + " selected";
                }

                listElem.appendChild(buttonElem);
            })(i);
        }

        $(listElem).on("click", "li", buttonClicked);

        listElem.addEventListener("dblclick", function (e) {
            if (this.nodeName == "LI") {
                var button = buttons[parseInt(this.getAttribute("data-buttonIndex"), 10)];

                if (button.commandDoubleClick) {
                    cpController.actionPerformed({ action: button.commandDoubleClick });
                }
            }
        });

        body.appendChild(listElem);
    }

    cpController.on("modeChange", function (newMode) {
        var body = that.getBodyElement();

        $("li", body).removeClass("selected");

        if (newMode == _ChickenPaint2['default'].M_DRAW) {
            $("li[data-tool=" + cpController.getCurTool() + "]", body).addClass("selected");
        } else {
            $("li[data-mode=" + newMode + "]", body).addClass("selected");
        }
    });

    cpController.on("toolChange", function (newTool) {
        var body = that.getBodyElement();

        if (cpController.getCurMode() == _ChickenPaint2['default'].M_DRAW) {
            $("li", body).removeClass("selected");

            $("li[data-tool=" + newTool + "]", body).addClass("selected");
        }
    });

    buildButtons();
}

CPToolPalette.prototype = Object.create(_CPPalette2['default'].prototype);
CPToolPalette.prototype.constructor = CPToolPalette;
module.exports = exports['default'];

},{"../ChickenPaint":1,"./CPPalette":32}],44:[function(require,module,exports){
/* 
 * By Nicholas Sherlock <n.sherlock@gmail.com>
 * 
 * Released under the WTFPLv2 https://en.wikipedia.org/wiki/WTFPL
 */

"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports["default"] = AdobeColorTable;

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

var _ArrayDataStream = require("./ArrayDataStream");

var _ArrayDataStream2 = _interopRequireDefault(_ArrayDataStream);

var ACO_COLORSPACE_RGB = 0,
    ACO_COLORSPACE_HSB = 1,
    ACO_COLORSPACE_CMYK = 2,
    ACO_COLORSPACE_LAB = 7,
    ACO_COLORSPACE_GRAYSCALE = 8;

function AdobeColorTable() {}

/**
 * Read an .aco (Adobe COlor) swatches file and return an array of RGB colors.
 * 
 * Supports version 1 palettes, only RGB format.
 * 
 * @param input A Uint8Array of the .aco file contents
 * @return An array of colours, or null if the file was not supported.
 */
AdobeColorTable.prototype.read = function (input) {
    if (input == null) {
        return null;
    }

    var stream = new _ArrayDataStream2["default"](new Uint8Array(input)),
        version,
        count,
        result = [];

    version = stream.readU16BE();
    if (version != 1) {
        return null;
    }
    count = stream.readU16BE();

    for (var i = 0; i < count; i++) {
        var colourspace = stream.readU16BE();

        if (colourspace != ACO_COLORSPACE_RGB) {
            continue; // Drop unsupported colours silently
        }

        // Scale back down from 16-bit to 8-bit
        var r = stream.readU16BE() * 255 / 65535,
            g = stream.readU16BE() * 255 / 65535,
            b = stream.readU16BE() * 255 / 65535;

        stream.readU16BE(); // third value unused

        result.push(r << 16 | g << 8 | b);
    }

    return result;
};

/**
 * Write an .aco (Adobe COlor) swatches file of the given array of RGB colours (colors are integers with the
 * blue channel in the least-significant position).
 */
AdobeColorTable.prototype.write = function (colours) {
    var buffer = new Uint8Array(2 * 2 + colours.length * 10),
        stream = new _ArrayDataStream2["default"](buffer);

    stream.writeU16BE(1); // Version 1
    stream.writeU16BE(colours.length); // Number of colours

    for (var i = 0; i < colours.length; i++) {
        var colour = colours[i];

        stream.writeU16BE(ACO_COLORSPACE_RGB);

        // Scale up colours to 16-bits (65535/255 = 257)
        stream.writeU16BE((colour >> 16 & 0xFF) * 257);
        stream.writeU16BE((colour >> 8 & 0xFF) * 257);
        stream.writeU16BE((colour & 0xFF) * 257);
        stream.writeU16BE(0);
    }

    return stream.getAsDataArray();
};
module.exports = exports["default"];

},{"./ArrayDataStream":45}],45:[function(require,module,exports){
/**
 * A tool for presenting a Uint8Array as a stream for reading and writing some simple data types.
 * 
 * By Nicholas Sherlock <n.sherlock@gmail.com> 2016, released under the WTFPL license.
 */

"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports["default"] = ArrayDataStream;
var EOF = -1;

function signExtend16Bit(word) {
    //If sign bit is set, fill the top bits with 1s to sign-extend
    return word & 0x8000 ? word | 0xFFFF0000 : word;
}

function signExtend8Bit(byte) {
    //If sign bit is set, fill the top bits with 1s to sign-extend
    return byte & 0x80 ? byte | 0xFFFFFF00 : byte;
}

/**
 * Create a stream on existing array of unsigned byte data (i.e. hopefully Uint8Array).
 * 
 * @param data Uint8Array to stream data from
 * @param start The index of the byte in the array that will be read first, or leave undefined to begin at the
 *              beginning of the array
 * @param end The index of the end of the stream, or leave undefined to use the end of the array as the end of
 *            the stream.
 */

function ArrayDataStream(data, start, end) {
    this.data = data;
    this.eof = false;
    this.start = start === undefined ? 0 : start;
    this.end = end === undefined ? data.length : end;
    this.pos = this.start;
}

;

/**
 * Read a single byte from the stream and turn it into a JavaScript string (assuming ASCII).
 * 
 * @returns String containing one character, or EOF if the end of file was reached (eof flag
 * is set).
 */
ArrayDataStream.prototype.readChar = function () {
    if (this.pos < this.end) {
        return String.fromCharCode(this.data[this.pos++]);
    }

    this.eof = true;
    return EOF;
};

/**
 * Read one unsigned byte from the stream
 * 
 * @returns Unsigned byte, or EOF if the end of file was reached (eof flag is set).
 */
ArrayDataStream.prototype.readByte = function () {
    if (this.pos < this.end) {
        return this.data[this.pos++];
    }

    this.eof = true;
    return EOF;
};

//Synonym:
ArrayDataStream.prototype.readU8 = ArrayDataStream.prototype.readByte;

ArrayDataStream.prototype.readS8 = function () {
    return signExtend8Bit(this.readByte());
};

ArrayDataStream.prototype.unreadChar = function (c) {
    this.pos--;
};

ArrayDataStream.prototype.peekChar = function () {
    if (this.pos < this.end) {
        return String.fromCharCode(this.data[this.pos]);
    }

    this.eof = true;
    return EOF;
};

ArrayDataStream.prototype.readString = function (length) {
    var chars = new Array(length),
        i;

    for (i = 0; i < length; i++) {
        chars[i] = this.readChar();
    }

    return chars.join("");
};

ArrayDataStream.prototype.readS16 = function () {
    var b1 = this.readByte(),
        b2 = this.readByte();

    return signExtend16Bit(b1 << 8 | b2);
};

ArrayDataStream.prototype.readU16BE = function () {
    var b1 = this.readByte(),
        b2 = this.readByte();

    return b1 << 8 | b2;
};

ArrayDataStream.prototype.readU16LE = function () {
    var b1 = this.readByte(),
        b2 = this.readByte();

    return b2 << 8 | b1;
};

ArrayDataStream.prototype.readU32BE = function () {
    var b1 = this.readByte(),
        b2 = this.readByte(),
        b3 = this.readByte(),
        b4 = this.readByte();
    return (b1 << 24 | b2 << 16 | b3 << 8 | b4) >>> 0;
};

ArrayDataStream.prototype.readU32LE = function () {
    var b1 = this.readByte(),
        b2 = this.readByte(),
        b3 = this.readByte(),
        b4 = this.readByte();
    return (b4 << 24 | b3 << 16 | b2 << 8 | b1) >>> 0;
};

ArrayDataStream.prototype.readBytes = function (count) {
    var result = this.data.subarray(this.pos, this.pos + count);

    this.pos += count;

    if (this.pos > this.end) {
        this.eof = true;
    }

    return result;
};

ArrayDataStream.prototype.skip = function (numBytes) {
    this.pos += numBytes;

    if (this.pos > this.end) {
        this.eof = true;
    }
};

ArrayDataStream.prototype.seek = function (offset) {
    this.pos = offset;
};

ArrayDataStream.prototype.writeBytes = function (arr) {
    for (var i = 0; i < arr.length; i++) {
        this.data[this.pos++] = arr[i];
    }
};

ArrayDataStream.prototype.writeByte = function (b) {
    this.data[this.pos++] = b;
};

//Synonym:
ArrayDataStream.prototype.writeU8 = ArrayDataStream.prototype.writeByte;

ArrayDataStream.prototype.writeU16LE = function (u) {
    this.data[this.pos++] = u;
    this.data[this.pos++] = u >> 8;
};

ArrayDataStream.prototype.writeU16BE = function (u) {
    this.data[this.pos++] = u >> 8;
    this.data[this.pos++] = u;
};

ArrayDataStream.prototype.writeU32BE = function (u) {
    this.data[this.pos++] = u >> 24;
    this.data[this.pos++] = u >> 16;
    this.data[this.pos++] = u >> 8;
    this.data[this.pos++] = u;
};

ArrayDataStream.prototype.writeU32LE = function (u) {
    this.data[this.pos++] = u;
    this.data[this.pos++] = u >> 8;
    this.data[this.pos++] = u >> 16;
    this.data[this.pos++] = u >> 24;
};

ArrayDataStream.prototype.writeDoubleBE = function (d) {
    var bytes = new Uint8Array(new Float64Array([d]).buffer);

    for (var i = bytes.length - 1; i >= 0; i--) {
        this.writeByte(bytes[i]);
    }
};

ArrayDataStream.prototype.writeFloatBE = function (d) {
    var bytes = new Uint8Array(new Float32Array([d]).buffer);

    for (var i = bytes.length - 1; i >= 0; i--) {
        this.writeByte(bytes[i]);
    }
};

/**
 * Write an ASCII string to the stream
 */
ArrayDataStream.prototype.writeString = function (s) {
    for (var i = 0; i < s.length; i++) {
        this.data[this.pos++] = s.charCodeAt(i);
    }
};

/**
 * Write the given unsigned 32-bit integer to the stream in big-endian order using the given byte width.
 * No error checking is performed to ensure that the supplied width is correct for the integer.
 * 
 * Omit the width parameter to have it determined automatically for you.
 * 
 * @param u Unsigned integer to be written
 * @param width Number of bytes to write to the stream
 */
ArrayDataStream.prototype.writeUnsignedIntBE = function (u, width) {
    if (width === undefined) {
        width = this.measureUnsignedInt(u);
    }

    // Each case falls through:
    switch (width) {
        case 5:
            this.writeU8(Math.floor(u / 4294967296)); // Need to use division to access >32 bits of floating point var
        case 4:
            this.writeU8(u >> 24);
        case 3:
            this.writeU8(u >> 16);
        case 2:
            this.writeU8(u >> 8);
        case 1:
            this.writeU8(u);
            break;
        default:
            throw new RuntimeException("Bad UINT size " + width);
    }
};

/**
 * Return the number of bytes needed to hold the non-zero bits of the given unsigned integer.
 */
ArrayDataStream.prototype.measureUnsignedInt = function (val) {
    // Force to 32-bit unsigned integer
    if (val < 1 << 8) {
        return 1;
    } else if (val < 1 << 16) {
        return 2;
    } else if (val < 1 << 24) {
        return 3;
    } else if (val < 4294967296) {
        return 4;
    } else {
        return 5;
    }
};

/**
 * Return a view on the portion of the buffer from the beginning to the current seek position as a Uint8Array.
 */
ArrayDataStream.prototype.getAsDataArray = function () {
    if (this.pos < this.data.byteLength) {
        return this.data.subarray(0, this.pos);
    } else if (this.pos == this.data.byteLength) {
        return this.data;
    } else {
        throw "ArrayDataStream's pos lies beyond end of buffer";
        // Chance is pretty good that you overflowed the end of the buffer during writing and your file is trash
    }
};

ArrayDataStream.prototype.EOF = EOF;
module.exports = exports["default"];

},{}],46:[function(require,module,exports){
/*
    ChickenPaint
    
    ChickenPaint is a translation of ChibiPaint from Java to JavaScript
    by Nicholas Sherlock / Chicken Smoothie.
    
    ChibiPaint is Copyright (c) 2006-2008 Marc Schefer

    ChickenPaint is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    ChickenPaint is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with ChickenPaint. If not, see <http://www.gnu.org/licenses/>.
*/

"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports["default"] = CPBezier;

function CPBezier() {

    // How to use this class:
    //
    // 1 - set the 4 points coordinates (x0-3, y0-3)
    // two options:
    // 2a - call init() with desired dt then read the current coordinate (Bx, By) and use nextPoint() to compute the
    // next point
    // 2b - use one of the "compute" methods to compute the values for the whole curve in one step

    // The 4 points coordinates
    this.x0 = this.y0 = this.x1 = this.y1 = this.x2 = this.y2 = this.x3 = this.y3 = 0.0;

    // used to compute the Bezier curve with the forward differences method
    var Bx,
        dBx,
        ddBx,
        dddBx,
        By,
        dBy,
        ddBy,
        dddBy,
        that = this;

    function init(dt) {
        // Implements a fast degree-3 Bezier curve using the forward differences method
        //
        // Reference for this algorithm:
        // "Curves and Surfaces for Computer Graphics" by David Salomon, page 189

        var q1 = 3.0 * dt,
            q2 = q1 * dt,
            q3 = dt * dt * dt,
            q4 = 2.0 * q2,
            q5 = 6.0 * q3,
            q6x = that.x0 - 2.0 * that.x1 + that.x2,
            q6y = that.y0 - 2.0 * that.y1 + that.y2,
            q7x = 3.0 * (that.x1 - that.x2) - that.x0 + that.x3,
            q7y = 3.0 * (that.y1 - that.y2) - that.y0 + that.y3;

        Bx = that.x0;
        By = that.y0;

        dBx = (that.x1 - that.x0) * q1 + q6x * q2 + q7x * q3;
        dBy = (that.y1 - that.y0) * q1 + q6y * q2 + q7y * q3;

        ddBx = q6x * q4 + q7x * q5;
        ddBy = q6y * q4 + q7y * q5;

        dddBx = q7x * q5;
        dddBy = q7y * q5;
    }

    /**
     * Fill the given x,y arrays with a series of points on the curve.
     * 
     * @param x int[]
     * @param y int[]
     * @param elements int Count of elements to fill x and y arrays
     */
    this.compute = function (x, y, elements) {
        init(1.0 / elements);

        x[0] = ~ ~Bx;
        y[0] = ~ ~By;

        for (var i = 1; i < elements; i++) {
            Bx += dBx;
            By += dBy;
            dBx += ddBx;
            dBy += ddBy;
            ddBx += dddBx;
            ddBy += dddBy;

            x[i] = ~ ~Bx;
            y[i] = ~ ~By;
        }
    };
}

module.exports = exports["default"];

},{}],47:[function(require,module,exports){
/*
    ChickenPaint
    
    ChickenPaint is a translation of ChibiPaint from Java to JavaScript
    by Nicholas Sherlock / Chicken Smoothie.
    
    ChibiPaint is Copyright (c) 2006-2008 Marc Schefer

    ChickenPaint is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    ChickenPaint is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with ChickenPaint. If not, see <http://www.gnu.org/licenses/>.
*/

"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports["default"] = CPColor;

function CPColor(rgb) {
    var that = this;

    this.rgb = 0; // in RGB byte order

    this.hue = 0;
    this.saturation = 0;
    this.value = 0;

    function rgbToHsv() {
        var r = that.rgb >> 16 & 0xff,
            g = that.rgb >> 8 & 0xff,
            b = that.rgb & 0xff;

        // Value
        that.value = Math.max(r, Math.max(g, b));

        // Saturation
        var mini = Math.min(r, Math.min(g, b));

        if (that.value == 0) {
            that.saturation = 0;
        } else {
            that.saturation = ~ ~((that.value - mini) / that.value * 255);
        }

        // Hue
        if (that.saturation == 0) {
            that.hue = 0;
        } else {
            var cr = (that.value - r) / (that.value - mini),
                cg = (that.value - g) / (that.value - mini),
                cb = (that.value - b) / (that.value - mini);

            var _hue = 0;

            if (that.value == r) {
                _hue = cb - cg;
            }
            if (that.value == g) {
                _hue = 2 + cr - cb;
            }
            if (that.value == b) {
                _hue = 4 + cg - cr;
            }

            _hue *= 60;
            if (_hue < 0) {
                _hue += 360;
            }

            that.hue = ~ ~_hue;
        }
    }

    function hsvToRgb() {
        // no saturation means it's just a shade of grey
        if (that.saturation == 0) {
            that.rgb = that.value << 16 | that.value << 8 | that.value;
        } else {
            var f = that.hue / 60;

            f = f - Math.floor(f);

            var s = that.saturation / 255,
                m = ~ ~(that.value * (1 - s)),
                n = ~ ~(that.value * (1 - s * f)),
                k = ~ ~(that.value * (1 - s * (1 - f)));

            switch (~ ~(that.hue / 60)) {
                case 0:
                    that.rgb = that.value << 16 | k << 8 | m;
                    break;
                case 1:
                    that.rgb = n << 16 | that.value << 8 | m;
                    break;
                case 2:
                    that.rgb = m << 16 | that.value << 8 | k;
                    break;
                case 3:
                    that.rgb = m << 16 | n << 8 | that.value;
                    break;
                case 4:
                    that.rgb = k << 16 | m << 8 | that.value;
                    break;
                case 5:
                    that.rgb = that.value << 16 | m << 8 | n;
                    break;
                default:
                    that.rgb = 0; // invalid hue
                    break;
            }
        }
    }

    this.getRgb = function () {
        return this.rgb;
    };

    this.getSaturation = function () {
        return this.saturation;
    };

    this.getHue = function () {
        return this.hue;
    };

    this.getValue = function () {
        return this.value;
    };

    this.setRgbComponents = function (r, g, b) {
        this.setRgb(r << 16 | g << 8 | b);
    };

    this.setRgb = function (rgb) {
        this.rgb = rgb;
        rgbToHsv();
    };

    this.setHsv = function (hue, value, saturation) {
        this.hue = hue;
        this.saturation = saturation;
        this.value = value;

        hsvToRgb();
    };

    this.setHue = function (hue) {
        this.hue = hue;
        hsvToRgb();
    };

    this.setSaturation = function (saturation) {
        this.saturation = saturation;
        hsvToRgb();
    };

    this.setValue = function (value) {
        this.value = value;
        hsvToRgb();
    };

    this.clone = function () {
        var result = new CPColor();

        result.copyFrom(this);

        return result;
    };

    this.copyFrom = function (c) {
        this.rgb = c.rgb;
        this.hue = c.hue;
        this.saturation = c.saturation;
        this.value = c.value;
    };

    this.isEqual = function (color) {
        return this.rgb == color.rgb && this.hue == color.hue && this.saturation == color.saturation && this.value == color.value;
    };

    this.setRgb(rgb || 0);
}

module.exports = exports["default"];

},{}],48:[function(require,module,exports){
/*
    ChickenPaint
    
    ChickenPaint is a translation of ChibiPaint from Java to JavaScript
    by Nicholas Sherlock / Chicken Smoothie.
    
    ChibiPaint is Copyright (c) 2006-2008 Marc Schefer

    ChickenPaint is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    ChickenPaint is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with ChickenPaint. If not, see <http://www.gnu.org/licenses/>.
*/

// An RGB color with floating point values for each channel (between 0.0 and 1.0)
"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports["default"] = CPColorFloat;

function CPColorFloat(r, g, b) {
    this.r = r;
    this.g = g;
    this.b = b;
}

CPColorFloat.prototype.toInt = function () {
    return Math.max(0, Math.min(255, Math.round(this.r * 255))) << 16 | Math.max(0, Math.min(255, Math.round(this.g * 255))) << 8 | Math.max(0, Math.min(255, Math.round(this.b * 255)));
};

CPColorFloat.prototype.mixWith = function (color, alpha) {
    this.r = this.r * (1.0 - alpha) + color.r * alpha;
    this.g = this.g * (1.0 - alpha) + color.g * alpha;
    this.b = this.b * (1.0 - alpha) + color.b * alpha;
};

CPColorFloat.prototype.clone = function () {
    return new CPColorFloat(this.r, this.g, this.b);
};

CPColorFloat.createFromInt = function (color) {
    return new CPColorFloat((color >>> 16 & 0xff) / 255, (color >>> 8 & 0xff) / 255, (color & 0xff) / 255);
};
module.exports = exports["default"];

},{}],49:[function(require,module,exports){
/*
	ChickenPaint

	ChickenPaint is a translation of ChibiPaint from Java to JavaScript
	by Nicholas Sherlock / Chicken Smoothie.

	ChibiPaint is Copyright (c) 2006-2008 Marc Schefer

	ChickenPaint is free software: you can redistribute it and/or modify
	it under the terms of the GNU General Public License as published by
	the Free Software Foundation, either version 3 of the License, or
	(at your option) any later version.

	ChickenPaint is distributed in the hope that it will be useful,
	but WITHOUT ANY WARRANTY; without even the implied warranty of
	MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
	GNU General Public License for more details.

	You should have received a copy of the GNU General Public License
	along with ChickenPaint. If not, see <http://www.gnu.org/licenses/>.
*/

"use strict";

Object.defineProperty(exports, "__esModule", {
	value: true
});
exports.isCanvasInterpolationSupported = isCanvasInterpolationSupported;
exports.setCanvasInterpolation = setCanvasInterpolation;
exports.isEventSupported = isEventSupported;
exports.isCanvasSupported = isCanvasSupported;
function getCanvasInterpolationPropName(canvasContext) {
	var browserProperties = ["imageSmoothingEnabled", "mozImageSmoothingEnabled", "webkitImageSmoothingEnabled", "msImageSmoothingEnabled"];

	for (var i = 0; i < browserProperties.length; i++) {
		if (browserProperties[i] in canvasContext) {
			return browserProperties[i];
		}
	}

	return null;
}

function isCanvasInterpolationSupported() {
	var canvas = document.createElement("canvas"),
	    canvasContext = canvas.getContext("2d");

	return !!getCanvasInterpolationPropName(canvasContext);
}

function setCanvasInterpolation(canvasContext, enabled) {
	var propName = getCanvasInterpolationPropName(canvasContext);

	if (propName) {
		canvasContext[propName] = enabled;
	}
}

function isEventSupported(eventName) {
	var isSupported = (eventName in window);

	if (!isSupported) {
		var el = document.createElement('div');
		el.setAttribute(eventName, 'return;');

		isSupported = typeof el[eventName] == 'function';
	}

	return isSupported;
}

function isCanvasSupported() {
	var elem = document.createElement('canvas');
	return !!(elem.getContext && elem.getContext('2d'));
}

},{}],50:[function(require,module,exports){
/*
	ChickenPaint

	ChickenPaint is a translation of ChibiPaint from Java to JavaScript
	by Nicholas Sherlock / Chicken Smoothie.

	ChibiPaint is Copyright (c) 2006-2008 Marc Schefer

	ChickenPaint is free software: you can redistribute it and/or modify
	it under the terms of the GNU General Public License as published by
	the Free Software Foundation, either version 3 of the License, or
	(at your option) any later version.

	ChickenPaint is distributed in the hope that it will be useful,
	but WITHOUT ANY WARRANTY; without even the implied warranty of
	MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
	GNU General Public License for more details.

	You should have received a copy of the GNU General Public License
	along with ChickenPaint. If not, see <http://www.gnu.org/licenses/>.
*/

'use strict';

Object.defineProperty(exports, '__esModule', {
	value: true
});
exports['default'] = CPPolygon;

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }

var _CPTransform = require('./CPTransform');

var _CPTransform2 = _interopRequireDefault(_CPTransform);

function CPPolygon(points) {
	this.points = points || [];
}

CPPolygon.prototype.clone = function () {
	var result = new CPPolygon(new Array(this.points.length));

	for (var i = 0; i < this.points.length; i++) {
		// Deep clone
		result.points[i] = { x: this.points[i].x, y: this.points[i].y };
	}

	return result;
};

/**
 * Get a new polygon which is the result of transforming the points of this polygon with the given affine transform.
 *
 * @param {CPTransform} affineTransform
 * @returns {CPPolygon}
 */
CPPolygon.prototype.getTransformed = function (affineTransform) {
	var result = new CPPolygon(new Array(this.points.length));

	for (var i = 0; i < this.points.length; i++) {
		result.points[i] = affineTransform.getTransformedPoint(this.points[i]);
	}

	return result;
};

CPPolygon.prototype.getCenter = function () {
	var centerX = this.points[0].x,
	    centerY = this.points[0].y;

	for (var i = 1; i < this.points.length; i++) {
		centerX += this.points[i].x;
		centerY += this.points[i].y;
	}

	return { x: centerX / this.points.length, y: centerY / this.points.length };
};

/**
 * From https://www.ecse.rpi.edu/Homepages/wrf/Research/Short_Notes/pnpoly.html
 *
 * @param point
 * @returns {boolean}
 */
CPPolygon.prototype.containsPoint = function (point) {
	var i,
	    j,
	    contained = false;

	for (i = 0, j = this.points.length - 1; i < this.points.length; j = i++) {
		if (this.points[i].y > point.y != this.points[j].y > point.y && point.x < (this.points[j].x - this.points[i].x) * (point.y - this.points[i].y) / (this.points[j].y - this.points[i].y) + this.points[i].x) {
			contained = !contained;
		}
	}

	return contained;
};
module.exports = exports['default'];

},{"./CPTransform":53}],51:[function(require,module,exports){
/*
    ChickenPaint
    
    ChickenPaint is a translation of ChibiPaint from Java to JavaScript
    by Nicholas Sherlock / Chicken Smoothie.
    
    ChibiPaint is Copyright (c) 2006-2008 Marc Schefer

    ChickenPaint is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    ChickenPaint is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with ChickenPaint. If not, see <http://www.gnu.org/licenses/>.
*/

"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports["default"] = CPRandom;

function CPRandom() {
    var nextNextGaussian,
        haveNextNextGaussian = false;

    /**
     * Definition from Java, mean of 0.0 and standard deviation 1.0.
     */
    this.nextGaussian = function () {
        if (haveNextNextGaussian) {
            haveNextNextGaussian = false;
            return nextNextGaussian;
        } else {

            var v1, v2, s;

            do {
                v1 = 2 * Math.random() - 1; // between -1.0 and 1.0
                v2 = 2 * Math.random() - 1; // between -1.0 and 1.0
                s = v1 * v1 + v2 * v2;
            } while (s >= 1 || s == 0);

            var multiplier = Math.sqrt(-2 * Math.log(s) / s);

            nextNextGaussian = v2 * multiplier;
            haveNextNextGaussian = true;

            return v1 * multiplier;
        }
    };
}

;
module.exports = exports["default"];

},{}],52:[function(require,module,exports){
/*
    ChickenPaint
    
    ChickenPaint is a translation of ChibiPaint from Java to JavaScript
    by Nicholas Sherlock / Chicken Smoothie.
    
    ChibiPaint is Copyright (c) 2006-2008 Marc Schefer

    ChickenPaint is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    ChickenPaint is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with ChickenPaint. If not, see <http://www.gnu.org/licenses/>.
*/

"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports["default"] = CPRect;

function CPRect(left, top, right, bottom) {
    /*
    if (left === undefined || top === undefined || right === undefined || bottom === undefined) {
        throw "Bad rect";
    }
    
    if (~~left !== left || ~~top !== top || ~~right !== right || ~~bottom !== bottom) {
        throw "Bad rect";
    }
    */

    this.left = left;
    this.top = top;
    this.right = right;
    this.bottom = bottom;
}

CPRect.prototype.makeEmpty = function () {
    this.left = 0;
    this.top = 0;
    this.right = 0;
    this.bottom = 0;
};

CPRect.prototype.union = function (that) {
    if (this.isEmpty()) {
        this.set(that);
    } else {
        this.left = Math.min(this.left, that.left);
        this.top = Math.min(this.top, that.top);
        this.right = Math.max(this.right, that.right);
        this.bottom = Math.max(this.bottom, that.bottom);
    }
};

CPRect.prototype.getUnion = function (that) {
    var result = this.clone();

    result.union(that);

    return result;
};

/**
 * Clip this rectangle to fit within `that`.
 * 
 * @returns a reference to this rectangle for chaining
 */
CPRect.prototype.clip = function (that) {
    if (!this.isEmpty()) {
        if (that.isEmpty()) {
            this.makeEmpty();
        } else {
            this.left = Math.max(this.left, that.left);
            this.top = Math.max(this.top, that.top);
            this.right = Math.min(this.right, that.right);
            this.bottom = Math.min(this.bottom, that.bottom);
        }
    }

    return this;
};

CPRect.prototype.containsPoint = function (p) {
    return !(p.x < this.left || p.y < this.top || p.x >= this.right || p.y >= this.bottom);
};

CPRect.prototype.isInside = function (that) {
    return this.left >= that.left && this.top >= that.top && this.right <= that.right && this.bottom <= that.bottom;
};

/**
 * Use this rectangle as bounds to clip the placement of the area of srcRect at the position of dstRect inside
 * our bounds.
 *
 * dstRect has its right and bottom set by this operation to match the area that would be copied from the source.
 * srcRect has its coordinates tweaked to match the area that will be copied.
 */
CPRect.prototype.clipSourceDest = function (srcRect, dstRect) {
    dstRect.right = dstRect.left + srcRect.getWidth();
    dstRect.bottom = dstRect.top + srcRect.getHeight();

    if (this.isEmpty() || dstRect.left >= this.right || dstRect.top >= this.bottom || dstRect.right <= this.left || dstRect.bottom <= this.top) {
        srcRect.makeEmpty();
        dstRect.makeEmpty();
    } else {
        // bottom/right
        if (dstRect.right > this.right) {
            srcRect.right -= dstRect.right - this.right;
            dstRect.right = this.right;
        }

        if (dstRect.bottom > this.bottom) {
            srcRect.bottom -= dstRect.bottom - this.bottom;
            dstRect.bottom = this.bottom;
        }

        // top/left
        if (dstRect.left < this.left) {
            srcRect.left += this.left - dstRect.left;
            dstRect.left = this.left;
        }

        if (dstRect.top < this.top) {
            srcRect.top += this.top - dstRect.top;
            dstRect.top = this.top;
        }
    }
};

CPRect.prototype.getWidth = function () {
    return this.right - this.left;
};

CPRect.prototype.getHeight = function () {
    return this.bottom - this.top;
};

CPRect.prototype.getArea = function () {
    return this.getWidth() * this.getHeight();
};

CPRect.prototype.isEmpty = function () {
    return this.right <= this.left || this.bottom <= this.top;
};

CPRect.prototype.set = function (r) {
    this.left = r.left;
    this.top = r.top;
    this.right = r.right;
    this.bottom = r.bottom;
};

CPRect.prototype.clone = function () {
    return new CPRect(this.left, this.top, this.right, this.bottom);
};

CPRect.prototype.translate = function (x, y) {
    this.left += x;
    this.right += x;
    this.top += y;
    this.bottom += y;
};

CPRect.prototype.moveTo = function (x, y) {
    this.translate(x - this.left, y - this.top);
};

CPRect.prototype.equals = function (that) {
    return this.left == that.left && this.right == that.right && this.top == that.top && this.bottom == that.bottom;
};

/**
 * Add h pixels to both the left and right sides of the rectangle, and v pixels to both the top and bottom sides.
 *  
 * @param h
 * @param v
 */
CPRect.prototype.grow = function (h, v) {
    // TODO checks for rectangles with zero-extent
    this.left -= h;
    this.right += h;
    this.top -= v;
    this.bottom += v;
};

CPRect.prototype.toString = function () {
    return "(" + this.left + "," + this.top + "," + this.right + "," + this.bottom + ")";
};

/**
 * Convert the rectangle into an array of points of the corners of the rectangle (clockwise starting from the top left
 * point).
 */
CPRect.prototype.toPoints = function () {
    return [{ x: this.left, y: this.top }, { x: this.right, y: this.top }, { x: this.right, y: this.bottom }, { x: this.left, y: this.bottom }];
};

/**
 * Round the rectangle coordinates to the nearest integer.
 */
CPRect.prototype.roundNearest = function () {
    this.left = Math.round(this.left);
    this.top = Math.round(this.top);
    this.right = Math.round(this.right);
    this.bottom = Math.round(this.bottom);
};

/**
 * Round the rectangle coordinates to integers so that the old rectangle is contained by the new one.
 */
CPRect.prototype.roundContain = function () {
    this.left = Math.floor(this.left);
    this.top = Math.floor(this.top);
    this.right = Math.ceil(this.right);
    this.bottom = Math.ceil(this.bottom);
};

/**
 * Create an AABB CPRect which encloses the given array of points.
 */
CPRect.createBoundingBox = function (points) {
    var result = new CPRect(points[0].x, points[0].y, points[0].x, points[0].y);

    for (var i = 1; i < points.length; i++) {
        result.left = Math.min(result.left, points[i].x);
        result.top = Math.min(result.top, points[i].y);
        result.right = Math.max(result.right, points[i].x);
        result.bottom = Math.max(result.bottom, points[i].y);
    }

    return result;
};

/* 
 * Chrome is initially eager to optimize CPRect and users assuming that all the fields are SMIs, then later on decides
 * that they should be tagged numbers after all. This causes all the blending operation functions to be reoptimized
 * a couple of times. 
 * 
 * Avoid that mess by starting things off with floats in the members.  
 */
window.cpRectGarbage = new CPRect(1.5, 2.5, 3.5, 4.5);
module.exports = exports["default"];

},{}],53:[function(require,module,exports){
// Modifications by Nicholas Sherlock. Original docs below:

// Last updated November 2011
// By Simon Sarris
// www.simonsarris.com
// sarris@acm.org
//
// Free to use and distribute at will
// So long as you are nice to people, etc

// Simple class for keeping track of the current transformation matrix

// For instance:
//    var t = new Transform();
//    t.rotate(5);
//    var m = t.m;
//    ctx.setTransform(m[0], m[1], m[2], m[3], m[4], m[5]);

// Is equivalent to:
//    ctx.rotate(5);

// But now you can retrieve it :)

// Remember that this does not account for any CSS transforms applied to the canvas

"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports["default"] = CPTransform;

function CPTransform() {
    this.setToIdentity();
}

CPTransform.prototype.setToIdentity = function () {
    /* Matrix components are stored in this order in 'm':
     * [0 2 4]
     * [1 3 5]
     * [x x x]
     *
     * Last row is always 0, 0, 1 so we don't store it.
     */
    this.m = [1, 0, 0, 1, 0, 0];
};

/**
 * Multiply this matrix with the given transformation one like so:
 *
 * [this] = [this] * [matrix]
 *
 * @param {CPTransform} matrix
 */
CPTransform.prototype.multiply = function (matrix) {
    var m11 = this.m[0] * matrix.m[0] + this.m[2] * matrix.m[1],
        m12 = this.m[1] * matrix.m[0] + this.m[3] * matrix.m[1],
        m21 = this.m[0] * matrix.m[2] + this.m[2] * matrix.m[3],
        m22 = this.m[1] * matrix.m[2] + this.m[3] * matrix.m[3],
        dx = this.m[0] * matrix.m[4] + this.m[2] * matrix.m[5] + this.m[4],
        dy = this.m[1] * matrix.m[4] + this.m[3] * matrix.m[5] + this.m[5];

    this.m[0] = m11;
    this.m[1] = m12;
    this.m[2] = m21;
    this.m[3] = m22;
    this.m[4] = dx;
    this.m[5] = dy;
};

/**
 * Multiply this matrix with the given transformation one like so:
 *
 * [this] = [matrix] * [this]
 *
 * @param {CPTransform} matrix
 */
CPTransform.prototype.preMultiply = function (matrix) {
    var m11 = matrix.m[0] * this.m[0] + matrix.m[2] * this.m[1],
        m12 = matrix.m[1] * this.m[0] + matrix.m[3] * this.m[1],
        m21 = matrix.m[0] * this.m[2] + matrix.m[2] * this.m[3],
        m22 = matrix.m[1] * this.m[2] + matrix.m[3] * this.m[3],
        dx = matrix.m[0] * this.m[4] + matrix.m[2] * this.m[5] + matrix.m[4],
        dy = matrix.m[1] * this.m[4] + matrix.m[3] * this.m[5] + matrix.m[5];

    this.m[0] = m11;
    this.m[1] = m12;
    this.m[2] = m21;
    this.m[3] = m22;
    this.m[4] = dx;
    this.m[5] = dy;
};

CPTransform.prototype.invert = function () {
    var d = 1 / (this.m[0] * this.m[3] - this.m[1] * this.m[2]),
        m0 = this.m[3] * d,
        m1 = -this.m[1] * d,
        m2 = -this.m[2] * d,
        m3 = this.m[0] * d,
        m4 = d * (this.m[2] * this.m[5] - this.m[3] * this.m[4]),
        m5 = d * (this.m[1] * this.m[4] - this.m[0] * this.m[5]);

    this.m[0] = m0;
    this.m[1] = m1;
    this.m[2] = m2;
    this.m[3] = m3;
    this.m[4] = m4;
    this.m[5] = m5;
};

CPTransform.prototype.getInverted = function () {
    var result = new CPTransform();

    result.m[0] = this.m[0];
    result.m[1] = this.m[1];
    result.m[2] = this.m[2];
    result.m[3] = this.m[3];
    result.m[4] = this.m[4];
    result.m[5] = this.m[5];

    result.invert();

    return result;
};

/**
 * Multiply this transform by a rotation matrix for the given angle:
 *
 * [ cos(a) -sin(a) 0]
 * [ sin(a)  cos(a) 0]
 * [   0       0    1]
 */
CPTransform.prototype.rotate = function (rad) {
    var c = Math.cos(rad),
        s = Math.sin(rad),
        m11 = this.m[0] * c + this.m[2] * s,
        m12 = this.m[1] * c + this.m[3] * s,
        m21 = this.m[0] * -s + this.m[2] * c,
        m22 = this.m[1] * -s + this.m[3] * c;

    this.m[0] = m11;
    this.m[1] = m12;
    this.m[2] = m21;
    this.m[3] = m22;
};

CPTransform.prototype.rotateAroundPoint = function (rad, x, y) {
    this.translate(x, y);
    this.rotate(rad);
    this.translate(-x, -y);
};

/**
 * Multiply this transform by a translation matrix:
 *
 * [1  0  x]
 * [0  1  y]
 * [0  0  1]
 *
 * @param x
 * @param y
 */
CPTransform.prototype.translate = function (x, y) {
    this.m[4] += this.m[0] * x + this.m[2] * y;
    this.m[5] += this.m[1] * x + this.m[3] * y;
};

/**
 * Multiply this transform by a scale matrix:
 *
 * [sx 0  0]
 * [0  sy 0]
 * [0  0  1]
 *
 * @param sx
 * @param sy
 */
CPTransform.prototype.scale = function (sx, sy) {
    this.m[0] *= sx;
    this.m[1] *= sx;
    this.m[2] *= sy;
    this.m[3] *= sy;
};

CPTransform.prototype.scaleAroundPoint = function (sx, sy, px, py) {
    this.translate(px, py);
    this.scale(sx, sy);
    this.translate(-px, -py);
};

/**
 * Multiply this transform by a shear matrix:
 *
 * [1  sx 0]
 * [sy 1  0]
 * [0  0  1]
 *
 * @param sx
 * @param sy
 */
CPTransform.prototype.shear = function (x, y) {
    var m11 = this.m[0] + this.m[2] * y,
        m12 = this.m[1] + this.m[3] * y,
        m21 = this.m[2] + this.m[0] * x,
        m22 = this.m[3] + this.m[1] * x;

    this.m[0] = m11;
    this.m[1] = m12;
    this.m[2] = m21;
    this.m[3] = m22;
};

CPTransform.prototype.getTransformedPoint = function (p) {
    return {
        x: p.x * this.m[0] + p.y * this.m[2] + this.m[4],
        y: p.x * this.m[1] + p.y * this.m[3] + this.m[5]
    };
};

CPTransform.prototype.transformPoints = function (points) {
    for (var i = 0; i < points.length; i++) {
        points[i] = this.getTransformedPoint(points[i]);
    }
};

CPTransform.prototype.getTranslateX = function () {
    return this.m[4];
};

CPTransform.prototype.getTranslateY = function () {
    return this.m[5];
};

CPTransform.prototype.clone = function () {
    var result = new CPTransform();

    result.m[0] = this.m[0];
    result.m[1] = this.m[1];
    result.m[2] = this.m[2];
    result.m[3] = this.m[3];
    result.m[4] = this.m[4];
    result.m[5] = this.m[5];

    return result;
};

CPTransform.prototype.getDeterminant = function () {
    return this.m[0] * this.m[3] - this.m[1] * this.m[2];
};

/**
 * Break down the matrix into a translation, scale, rotation, then shear operation.
 *
 * x or y scale must not be zero.
 *
 * http://www.maths-informatique-jeux.com/blog/frederic/?post/2013/12/01/Decomposition-of-2D-transform-matrices
 */
CPTransform.prototype.decompose = function () {
    var determinant = this.getDeterminant(),
        r = Math.sqrt(this.m[0] * this.m[0] + this.m[1] * this.m[1]);

    return {
        translate: { x: this.m[4], y: this.m[5] },
        rotate: Math.sign(this.m[1]) * Math.acos(this.m[0] / r),
        scale: { x: r, y: determinant / r },
        shear: { x: Math.atan((this.m[0] * this.m[2] + this.m[1] * this.m[3]) / (r * r)), y: 0 }
    };
};

CPTransform.prototype.toString = function () {
    var PLACES = 2;

    return "[" + this.m[0].toFixed(PLACES) + " " + this.m[2].toFixed(PLACES) + " " + this.m[4].toFixed(PLACES) + "]\n" + "[" + this.m[1].toFixed(PLACES) + " " + this.m[3].toFixed(PLACES) + " " + this.m[5].toFixed(PLACES) + "]\n" + "[0.00 0.00 1.00]";
};

Math.sign = Math.sign || function (x) {
    x = +x; // convert to a number
    if (x === 0 || isNaN(x)) {
        return x;
    }
    return x > 0 ? 1 : -1;
};
module.exports = exports["default"];

},{}],54:[function(require,module,exports){
/*
	ChickenPaint

	ChickenPaint is a translation of ChibiPaint from Java to JavaScript
	by Nicholas Sherlock / Chicken Smoothie.

	ChibiPaint is Copyright (c) 2006-2008 Marc Schefer

	ChickenPaint is free software: you can redistribute it and/or modify
	it under the terms of the GNU General Public License as published by
	the Free Software Foundation, either version 3 of the License, or
	(at your option) any later version.

	ChickenPaint is distributed in the hope that it will be useful,
	but WITHOUT ANY WARRANTY; without even the implied warranty of
	MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
	GNU General Public License for more details.

	You should have received a copy of the GNU General Public License
	along with ChickenPaint. If not, see <http://www.gnu.org/licenses/>.
*/

"use strict";

Object.defineProperty(exports, "__esModule", {
	value: true
});
exports["default"] = CPVector;

function CPVector(x, y) {
	this.x = x;
	this.y = y;
}

CPVector.prototype.getLength = function () {
	return Math.sqrt(this.x * this.x + this.y * this.y);
};

/**
 *
 * @returns {CPVector} This vector for chaining
 */
CPVector.prototype.normalize = function () {
	var length = this.getLength();

	this.x /= length;
	this.y /= length;

	return this;
};

/**
 *
 * @param {CPVector} that
 */
CPVector.prototype.getDotProduct = function (that) {
	return this.x * that.x + this.y * that.y;
};

/**
 *
 * @param scaleFactor
 * @returns {CPVector} This vector for chaining
 */
CPVector.prototype.scale = function (scaleFactor) {
	this.x *= scaleFactor;
	this.y *= scaleFactor;

	return this;
};

CPVector.prototype.getScaled = function (scaleFactor) {
	var result = new CPVector(this.x, this.y);

	result.scale(scaleFactor);

	return result;
};

CPVector.prototype.getRounded = function () {
	return new CPVector(Math.round(this.x), Math.round(this.y));
};

CPVector.prototype.getTruncated = function () {
	return new CPVector(~ ~this.x, ~ ~this.y);
};

CPVector.prototype.getPerpendicular = function () {
	return new CPVector(-this.y, this.x);
};

/**
 * Add that vector to this one
 *
 * @param {CPVector} that
 * @returns {CPVector} This vector for chaining
 */
CPVector.prototype.add = function (that) {
	this.x += that.x;
	this.y += that.y;

	return this;
};

/**
 * Subtract that vector from this one
 *
 * @param {CPVector} that
 * @returns {CPVector} This vector for chaining
 */
CPVector.prototype.subtract = function (that) {
	this.x -= that.x;
	this.y -= that.y;

	return this;
};

/**
 * Get the sum of this vector and that one.
 *
 * @param {CPVector} that
 * @returns {CPVector}
 */
CPVector.prototype.getSum = function (that) {
	return new CPVector(this.x + that.x, this.y + that.y);
};

/**
 * Create a new vector by p1 - p2
 *
 * @param p1
 * @param p2
 *
 * @returns {CPVector}
 */
CPVector.subtractPoints = function (p1, p2) {
	return new CPVector(p1.x - p2.x, p1.y - p2.y);
};
module.exports = exports["default"];

},{}],55:[function(require,module,exports){
/*
    ChickenPaint
    
    ChickenPaint is a translation of ChibiPaint from Java to JavaScript
    by Nicholas Sherlock / Chicken Smoothie.
    
    ChibiPaint is Copyright (c) 2006-2008 Marc Schefer

    ChickenPaint is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    ChickenPaint is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with ChickenPaint. If not, see <http://www.gnu.org/licenses/>.
*/

"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports["default"] = CPWacomTablet;

function CPWacomTablet() {
    var penAPI = null,
        pluginObject,
        that = this;

    /**
     * Is the pen currently interacting with the tablet surface?
     */
    this.isPen = function () {
        var pointerType;

        if (penAPI) {
            pointerType = penAPI.pointerType;

            return pointerType == 1 /* Pen */ || pointerType == 3 /* Eraser */;
        }

        return false;
    };

    this.getPressure = function () {
        if (penAPI) {
            return penAPI.pressure;
        }

        return 1.0;
    };

    this.pluginLoaded = function () {
        console.log("Wacom tablet support loaded!");

        penAPI = pluginObject.penAPI;
    };

    this.isTabletPresent = function () {
        return !!penAPI;
    };

    /**
     * Call after the document body is ready (needs DOM to be ready for loading the Wacom plugin).
     */
    this.detectTablet = function () {
        // Chrome has dropped NPAPI support, so the Wacom plugin cannot be installed
        if (/Chrome/i.test(navigator.userAgent) && !/OPR/.test(navigator.userAgent)) {
            // Prevent an ugly "this page has tried to load a plugin which is not supported" error message
            console.log("Not attempting to load Wacom tablet plugin, since this is Chrome");
            return;
        }

        console.log("Attempting to load Wacom tablet support...");

        pluginObject = document.createElement("object");

        if ("classid" in pluginObject) {
            // IE
            pluginObject.classid = "CLSID:092dfa86-5807-5a94-bf3b-5a53ba9e5308";
        } else {
            var param = document.createElement("param");

            param.name = "onload";
            param.value = "onWacomPluginLoaded";

            pluginObject.appendChild(param);

            pluginObject.type = "application/x-wacomtabletplugin";
        }

        pluginObject.style.position = "absolute";
        pluginObject.style.visibility = "hidden";
        pluginObject.onload = "onWacomPluginLoaded";

        document.body.appendChild(pluginObject);

        setTimeout(function () {
            if (!that.isTabletPresent()) {
                console.log("Looks like the Wacom plugin isn't installed, or failed to load.");
            }
        }, 5000);
    };
}

CPWacomTablet.getRef = function () {
    if (CPWacomTablet.instance == null) {
        CPWacomTablet.instance = new CPWacomTablet();
    }
    return CPWacomTablet.instance;
};

window.onWacomPluginLoaded = function () {
    CPWacomTablet.getRef().pluginLoaded();
};
module.exports = exports["default"];

},{}],56:[function(require,module,exports){
/*!
 * jQuery throttle / debounce - v1.1 - 3/7/2010
 * http://benalman.com/projects/jquery-throttle-debounce-plugin/
 * 
 * Copyright (c) 2010 "Cowboy" Ben Alman
 * Dual licensed under the MIT and GPL licenses.
 * http://benalman.com/about/license/
 */

// Script: jQuery throttle / debounce: Sometimes, less is more!
//
// *Version: 1.1, Last updated: 3/7/2010*
//
// Project Home - http://benalman.com/projects/jquery-throttle-debounce-plugin/
// GitHub       - http://github.com/cowboy/jquery-throttle-debounce/
// Source       - http://github.com/cowboy/jquery-throttle-debounce/raw/master/jquery.ba-throttle-debounce.js
// (Minified)   - http://github.com/cowboy/jquery-throttle-debounce/raw/master/jquery.ba-throttle-debounce.min.js (0.7kb)
//
// About: License
//
// Copyright (c) 2010 "Cowboy" Ben Alman,
// Dual licensed under the MIT and GPL licenses.
// http://benalman.com/about/license/
//
// About: Examples
//
// These working examples, complete with fully commented code, illustrate a few
// ways in which this plugin can be used.
//
// Throttle - http://benalman.com/code/projects/jquery-throttle-debounce/examples/throttle/
// Debounce - http://benalman.com/code/projects/jquery-throttle-debounce/examples/debounce/
//
// About: Support and Testing
//
// Information about what version or versions of jQuery this plugin has been
// tested with, what browsers it has been tested in, and where the unit tests
// reside (so you can test it yourself).
//
// jQuery Versions - none, 1.3.2, 1.4.2
// Browsers Tested - Internet Explorer 6-8, Firefox 2-3.6, Safari 3-4, Chrome 4-5, Opera 9.6-10.1.
// Unit Tests      - http://benalman.com/code/projects/jquery-throttle-debounce/unit/
//
// About: Release History
//
// 1.1 - (3/7/2010) Fixed a bug in <jQuery.throttle> where trailing callbacks
//       executed later than they should. Reworked a fair amount of internal
//       logic as well.
// 1.0 - (3/6/2010) Initial release as a stand-alone project. Migrated over
//       from jquery-misc repo v0.4 to jquery-throttle repo v1.0, added the
//       no_trailing throttle parameter and debounce functionality.

// Method: throttle
//
// Throttle execution of a function. Especially useful for rate limiting
// execution of handlers on events like resize and scroll. If you want to
// rate-limit execution of a function to a single time, see the
// <jQuery.debounce> method.
//
// In this visualization, | is a throttled-function call and X is the actual
// callback execution:
//
// > Throttled with `no_trailing` specified as false or unspecified:
// > ||||||||||||||||||||||||| (pause) |||||||||||||||||||||||||
// > X    X    X    X    X    X        X    X    X    X    X    X
// >
// > Throttled with `no_trailing` specified as true:
// > ||||||||||||||||||||||||| (pause) |||||||||||||||||||||||||
// > X    X    X    X    X             X    X    X    X    X
//
// Usage:
//
// > var throttled = jQuery.throttle( delay, [ no_trailing, ] callback );
// >
// > jQuery('selector').bind( 'someevent', throttled );
// > jQuery('selector').unbind( 'someevent', throttled );
//
// This also works in jQuery 1.4+:
//
// > jQuery('selector').bind( 'someevent', jQuery.throttle( delay, [ no_trailing, ] callback ) );
// > jQuery('selector').unbind( 'someevent', callback );
//
// Arguments:
//
//  delay - (Number) A zero-or-greater delay in milliseconds. For event
//    callbacks, values around 100 or 250 (or even higher) are most useful.
//  no_trailing - (Boolean) Optional, defaults to false. If no_trailing is
//    true, callback will only execute every `delay` milliseconds while the
//    throttled-function is being called. If no_trailing is false or
//    unspecified, callback will be executed one final time after the last
//    throttled-function call. (After the throttled-function has not been
//    called for `delay` milliseconds, the internal counter is reset)
//  callback - (Function) A function to be executed after delay milliseconds.
//    The `this` context and all arguments are passed through, as-is, to
//    `callback` when the throttled-function is executed.
//
// Returns:
//
//  (Function) A new, throttled, function.

'use strict';

Object.defineProperty(exports, '__esModule', {
	value: true
});
exports.throttle = throttle;
exports.debounce = debounce;

function throttle(delay, no_trailing, callback, debounce_mode) {
	// After wrapper has stopped being called, this timeout ensures that
	// `callback` is executed at the proper times in `throttle` and `end`
	// debounce modes.
	var timeout_id,
	   

	// Keep track of the last time `callback` was executed.
	last_exec = 0;

	// `no_trailing` defaults to falsy.
	if (typeof no_trailing !== 'boolean') {
		debounce_mode = callback;
		callback = no_trailing;
		no_trailing = undefined;
	}

	// The `wrapper` function encapsulates all of the throttling / debouncing
	// functionality and when executed will limit the rate at which `callback`
	// is executed.
	function wrapper() {
		var that = this,
		    elapsed = +new Date() - last_exec,
		    args = arguments;

		// Execute `callback` and update the `last_exec` timestamp.
		function exec() {
			last_exec = +new Date();
			callback.apply(that, args);
		}

		// If `debounce_mode` is true (at_begin) this is used to clear the flag
		// to allow future `callback` executions.
		function clear() {
			timeout_id = undefined;
		}

		if (debounce_mode && !timeout_id) {
			// Since `wrapper` is being called for the first time and
			// `debounce_mode` is true (at_begin), execute `callback`.
			exec();
		}

		// Clear any existing timeout.
		timeout_id && clearTimeout(timeout_id);

		if (debounce_mode === undefined && elapsed > delay) {
			// In throttle mode, if `delay` time has been exceeded, execute
			// `callback`.
			exec();
		} else if (no_trailing !== true) {
			// In trailing throttle mode, since `delay` time has not been
			// exceeded, schedule `callback` to execute `delay` ms after most
			// recent execution.
			//
			// If `debounce_mode` is true (at_begin), schedule `clear` to execute
			// after `delay` ms.
			//
			// If `debounce_mode` is false (at end), schedule `callback` to
			// execute after `delay` ms.
			timeout_id = setTimeout(debounce_mode ? clear : exec, debounce_mode === undefined ? delay - elapsed : delay);
		}
	}

	// Return the wrapper function.
	return wrapper;
}

// Method: jQuery.debounce
//
// Debounce execution of a function. Debouncing, unlike throttling,
// guarantees that a function is only executed a single time, either at the
// very beginning of a series of calls, or at the very end. If you want to
// simply rate-limit execution of a function, see the <jQuery.throttle>
// method.
//
// In this visualization, | is a debounced-function call and X is the actual
// callback execution:
//
// > Debounced with `at_begin` specified as false or unspecified:
// > ||||||||||||||||||||||||| (pause) |||||||||||||||||||||||||
// >                          X                                 X
// >
// > Debounced with `at_begin` specified as true:
// > ||||||||||||||||||||||||| (pause) |||||||||||||||||||||||||
// > X                                 X
//
// Usage:
//
// > var debounced = jQuery.debounce( delay, [ at_begin, ] callback );
// >
// > jQuery('selector').bind( 'someevent', debounced );
// > jQuery('selector').unbind( 'someevent', debounced );
//
// This also works in jQuery 1.4+:
//
// > jQuery('selector').bind( 'someevent', jQuery.debounce( delay, [ at_begin, ] callback ) );
// > jQuery('selector').unbind( 'someevent', callback );
//
// Arguments:
//
//  delay - (Number) A zero-or-greater delay in milliseconds. For event
//    callbacks, values around 100 or 250 (or even higher) are most useful.
//  at_begin - (Boolean) Optional, defaults to false. If at_begin is false or
//    unspecified, callback will only be executed `delay` milliseconds after
//    the last debounced-function call. If at_begin is true, callback will be
//    executed only at the first debounced-function call. (After the
//    throttled-function has not been called for `delay` milliseconds, the
//    internal counter is reset)
//  callback - (Function) A function to be executed after delay milliseconds.
//    The `this` context and all arguments are passed through, as-is, to
//    `callback` when the debounced-function is executed.
//
// Returns:
//
//  (Function) A new, debounced, function.

function debounce(delay, at_begin, callback) {
	return callback === undefined ? throttle(delay, at_begin, false) : throttle(delay, callback, at_begin !== false);
}

},{}]},{},[1])(1)
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL3Vzci9sb2NhbC9saWIvbm9kZV9tb2R1bGVzL2Jyb3dzZXJpZnkvbm9kZV9tb2R1bGVzL2Jyb3dzZXItcGFjay9fcHJlbHVkZS5qcyIsIi9Vc2Vycy9uaWNvbGViZWd1ZXNzZS9EZXNrdG9wL3BhaW50LWJicy9wdWJsaWMvcGFpbnQvanMvQ2hpY2tlblBhaW50LmpzIiwiL1VzZXJzL25pY29sZWJlZ3Vlc3NlL0Rlc2t0b3AvcGFpbnQtYmJzL3B1YmxpYy9wYWludC9qcy9lbmdpbmUvQ1BBcnR3b3JrLmpzIiwiL1VzZXJzL25pY29sZWJlZ3Vlc3NlL0Rlc2t0b3AvcGFpbnQtYmJzL3B1YmxpYy9wYWludC9qcy9lbmdpbmUvQ1BCaXRtYXAuanMiLCIvVXNlcnMvbmljb2xlYmVndWVzc2UvRGVza3RvcC9wYWludC1iYnMvcHVibGljL3BhaW50L2pzL2VuZ2luZS9DUEJsZW5kLmpzIiwiL1VzZXJzL25pY29sZWJlZ3Vlc3NlL0Rlc2t0b3AvcGFpbnQtYmJzL3B1YmxpYy9wYWludC9qcy9lbmdpbmUvQ1BCcnVzaEluZm8uanMiLCIvVXNlcnMvbmljb2xlYmVndWVzc2UvRGVza3RvcC9wYWludC1iYnMvcHVibGljL3BhaW50L2pzL2VuZ2luZS9DUEJydXNoTWFuYWdlci5qcyIsIi9Vc2Vycy9uaWNvbGViZWd1ZXNzZS9EZXNrdG9wL3BhaW50LWJicy9wdWJsaWMvcGFpbnQvanMvZW5naW5lL0NQQ2hpYmlGaWxlLmpzIiwiL1VzZXJzL25pY29sZWJlZ3Vlc3NlL0Rlc2t0b3AvcGFpbnQtYmJzL3B1YmxpYy9wYWludC9qcy9lbmdpbmUvQ1BDbGlwLmpzIiwiL1VzZXJzL25pY29sZWJlZ3Vlc3NlL0Rlc2t0b3AvcGFpbnQtYmJzL3B1YmxpYy9wYWludC9qcy9lbmdpbmUvQ1BDb2xvckJtcC5qcyIsIi9Vc2Vycy9uaWNvbGViZWd1ZXNzZS9EZXNrdG9wL3BhaW50LWJicy9wdWJsaWMvcGFpbnQvanMvZW5naW5lL0NQR3JleUJtcC5qcyIsIi9Vc2Vycy9uaWNvbGViZWd1ZXNzZS9EZXNrdG9wL3BhaW50LWJicy9wdWJsaWMvcGFpbnQvanMvZW5naW5lL0NQTGF5ZXIuanMiLCIvVXNlcnMvbmljb2xlYmVndWVzc2UvRGVza3RvcC9wYWludC1iYnMvcHVibGljL3BhaW50L2pzL2VuZ2luZS9DUExvb2tVcFRhYmxlLmpzIiwiL1VzZXJzL25pY29sZWJlZ3Vlc3NlL0Rlc2t0b3AvcGFpbnQtYmJzL3B1YmxpYy9wYWludC9qcy9lbmdpbmUvQ1BSZXNvdXJjZUxvYWRlci5qcyIsIi9Vc2Vycy9uaWNvbGViZWd1ZXNzZS9EZXNrdG9wL3BhaW50LWJicy9wdWJsaWMvcGFpbnQvanMvZW5naW5lL0NQUmVzb3VyY2VTYXZlci5qcyIsIi9Vc2Vycy9uaWNvbGViZWd1ZXNzZS9EZXNrdG9wL3BhaW50LWJicy9wdWJsaWMvcGFpbnQvanMvZW5naW5lL0NQVW5kby5qcyIsIi9Vc2Vycy9uaWNvbGViZWd1ZXNzZS9EZXNrdG9wL3BhaW50LWJicy9wdWJsaWMvcGFpbnQvanMvZ3VpL0NQQWJvdXREaWFsb2cuanMiLCIvVXNlcnMvbmljb2xlYmVndWVzc2UvRGVza3RvcC9wYWludC1iYnMvcHVibGljL3BhaW50L2pzL2d1aS9DUEJveEJsdXJEaWFsb2cuanMiLCIvVXNlcnMvbmljb2xlYmVndWVzc2UvRGVza3RvcC9wYWludC1iYnMvcHVibGljL3BhaW50L2pzL2d1aS9DUEJydXNoUGFsZXR0ZS5qcyIsIi9Vc2Vycy9uaWNvbGViZWd1ZXNzZS9EZXNrdG9wL3BhaW50LWJicy9wdWJsaWMvcGFpbnQvanMvZ3VpL0NQQ2FudmFzLmpzIiwiL1VzZXJzL25pY29sZWJlZ3Vlc3NlL0Rlc2t0b3AvcGFpbnQtYmJzL3B1YmxpYy9wYWludC9qcy9ndWkvQ1BDaGVja2JveC5qcyIsIi9Vc2Vycy9uaWNvbGViZWd1ZXNzZS9EZXNrdG9wL3BhaW50LWJicy9wdWJsaWMvcGFpbnQvanMvZ3VpL0NQQ29sb3JQYWxldHRlLmpzIiwiL1VzZXJzL25pY29sZWJlZ3Vlc3NlL0Rlc2t0b3AvcGFpbnQtYmJzL3B1YmxpYy9wYWludC9qcy9ndWkvQ1BDb2xvclNlbGVjdC5qcyIsIi9Vc2Vycy9uaWNvbGViZWd1ZXNzZS9EZXNrdG9wL3BhaW50LWJicy9wdWJsaWMvcGFpbnQvanMvZ3VpL0NQQ29sb3JTbGlkZXIuanMiLCIvVXNlcnMvbmljb2xlYmVndWVzc2UvRGVza3RvcC9wYWludC1iYnMvcHVibGljL3BhaW50L2pzL2d1aS9DUENvbG9yU3dhdGNoLmpzIiwiL1VzZXJzL25pY29sZWJlZ3Vlc3NlL0Rlc2t0b3AvcGFpbnQtYmJzL3B1YmxpYy9wYWludC9qcy9ndWkvQ1BDb25maXJtVHJhbnNmb3JtRGlhbG9nLmpzIiwiL1VzZXJzL25pY29sZWJlZ3Vlc3NlL0Rlc2t0b3AvcGFpbnQtYmJzL3B1YmxpYy9wYWludC9qcy9ndWkvQ1BHVUlVdGlscy5qcyIsIi9Vc2Vycy9uaWNvbGViZWd1ZXNzZS9EZXNrdG9wL3BhaW50LWJicy9wdWJsaWMvcGFpbnQvanMvZ3VpL0NQR3JpZERpYWxvZy5qcyIsIi9Vc2Vycy9uaWNvbGViZWd1ZXNzZS9EZXNrdG9wL3BhaW50LWJicy9wdWJsaWMvcGFpbnQvanMvZ3VpL0NQTGF5ZXJzUGFsZXR0ZS5qcyIsIi9Vc2Vycy9uaWNvbGViZWd1ZXNzZS9EZXNrdG9wL3BhaW50LWJicy9wdWJsaWMvcGFpbnQvanMvZ3VpL0NQTWFpbkdVSS5qcyIsIi9Vc2Vycy9uaWNvbGViZWd1ZXNzZS9EZXNrdG9wL3BhaW50LWJicy9wdWJsaWMvcGFpbnQvanMvZ3VpL0NQTWFpbk1lbnUuanMiLCIvVXNlcnMvbmljb2xlYmVndWVzc2UvRGVza3RvcC9wYWludC1iYnMvcHVibGljL3BhaW50L2pzL2d1aS9DUE1pc2NQYWxldHRlLmpzIiwiL1VzZXJzL25pY29sZWJlZ3Vlc3NlL0Rlc2t0b3AvcGFpbnQtYmJzL3B1YmxpYy9wYWludC9qcy9ndWkvQ1BQYWxldHRlLmpzIiwiL1VzZXJzL25pY29sZWJlZ3Vlc3NlL0Rlc2t0b3AvcGFpbnQtYmJzL3B1YmxpYy9wYWludC9qcy9ndWkvQ1BQYWxldHRlTWFuYWdlci5qcyIsIi9Vc2Vycy9uaWNvbGViZWd1ZXNzZS9EZXNrdG9wL3BhaW50LWJicy9wdWJsaWMvcGFpbnQvanMvZ3VpL0NQU2Nyb2xsYmFyLmpzIiwiL1VzZXJzL25pY29sZWJlZ3Vlc3NlL0Rlc2t0b3AvcGFpbnQtYmJzL3B1YmxpYy9wYWludC9qcy9ndWkvQ1BTZW5kRGlhbG9nLmpzIiwiL1VzZXJzL25pY29sZWJlZ3Vlc3NlL0Rlc2t0b3AvcGFpbnQtYmJzL3B1YmxpYy9wYWludC9qcy9ndWkvQ1BTaG9ydGN1dHNEaWFsb2cuanMiLCIvVXNlcnMvbmljb2xlYmVndWVzc2UvRGVza3RvcC9wYWludC1iYnMvcHVibGljL3BhaW50L2pzL2d1aS9DUFNsaWRlci5qcyIsIi9Vc2Vycy9uaWNvbGViZWd1ZXNzZS9EZXNrdG9wL3BhaW50LWJicy9wdWJsaWMvcGFpbnQvanMvZ3VpL0NQU3BsYXNoU2NyZWVuLmpzIiwiL1VzZXJzL25pY29sZWJlZ3Vlc3NlL0Rlc2t0b3AvcGFpbnQtYmJzL3B1YmxpYy9wYWludC9qcy9ndWkvQ1BTdHJva2VQYWxldHRlLmpzIiwiL1VzZXJzL25pY29sZWJlZ3Vlc3NlL0Rlc2t0b3AvcGFpbnQtYmJzL3B1YmxpYy9wYWludC9qcy9ndWkvQ1BTd2F0Y2hlc1BhbGV0dGUuanMiLCIvVXNlcnMvbmljb2xlYmVndWVzc2UvRGVza3RvcC9wYWludC1iYnMvcHVibGljL3BhaW50L2pzL2d1aS9DUFRhYmxldERpYWxvZy5qcyIsIi9Vc2Vycy9uaWNvbGViZWd1ZXNzZS9EZXNrdG9wL3BhaW50LWJicy9wdWJsaWMvcGFpbnQvanMvZ3VpL0NQVGV4dHVyZVBhbGV0dGUuanMiLCIvVXNlcnMvbmljb2xlYmVndWVzc2UvRGVza3RvcC9wYWludC1iYnMvcHVibGljL3BhaW50L2pzL2d1aS9DUFRvb2xQYWxldHRlLmpzIiwiL1VzZXJzL25pY29sZWJlZ3Vlc3NlL0Rlc2t0b3AvcGFpbnQtYmJzL3B1YmxpYy9wYWludC9qcy91dGlsL0Fkb2JlQ29sb3JUYWJsZS5qcyIsIi9Vc2Vycy9uaWNvbGViZWd1ZXNzZS9EZXNrdG9wL3BhaW50LWJicy9wdWJsaWMvcGFpbnQvanMvdXRpbC9BcnJheURhdGFTdHJlYW0uanMiLCIvVXNlcnMvbmljb2xlYmVndWVzc2UvRGVza3RvcC9wYWludC1iYnMvcHVibGljL3BhaW50L2pzL3V0aWwvQ1BCZXppZXIuanMiLCIvVXNlcnMvbmljb2xlYmVndWVzc2UvRGVza3RvcC9wYWludC1iYnMvcHVibGljL3BhaW50L2pzL3V0aWwvQ1BDb2xvci5qcyIsIi9Vc2Vycy9uaWNvbGViZWd1ZXNzZS9EZXNrdG9wL3BhaW50LWJicy9wdWJsaWMvcGFpbnQvanMvdXRpbC9DUENvbG9yRmxvYXQuanMiLCIvVXNlcnMvbmljb2xlYmVndWVzc2UvRGVza3RvcC9wYWludC1iYnMvcHVibGljL3BhaW50L2pzL3V0aWwvQ1BQb2x5ZmlsbC5qcyIsIi9Vc2Vycy9uaWNvbGViZWd1ZXNzZS9EZXNrdG9wL3BhaW50LWJicy9wdWJsaWMvcGFpbnQvanMvdXRpbC9DUFBvbHlnb24uanMiLCIvVXNlcnMvbmljb2xlYmVndWVzc2UvRGVza3RvcC9wYWludC1iYnMvcHVibGljL3BhaW50L2pzL3V0aWwvQ1BSYW5kb20uanMiLCIvVXNlcnMvbmljb2xlYmVndWVzc2UvRGVza3RvcC9wYWludC1iYnMvcHVibGljL3BhaW50L2pzL3V0aWwvQ1BSZWN0LmpzIiwiL1VzZXJzL25pY29sZWJlZ3Vlc3NlL0Rlc2t0b3AvcGFpbnQtYmJzL3B1YmxpYy9wYWludC9qcy91dGlsL0NQVHJhbnNmb3JtLmpzIiwiL1VzZXJzL25pY29sZWJlZ3Vlc3NlL0Rlc2t0b3AvcGFpbnQtYmJzL3B1YmxpYy9wYWludC9qcy91dGlsL0NQVmVjdG9yLmpzIiwiL1VzZXJzL25pY29sZWJlZ3Vlc3NlL0Rlc2t0b3AvcGFpbnQtYmJzL3B1YmxpYy9wYWludC9qcy91dGlsL0NQV2Fjb21UYWJsZXQuanMiLCIvVXNlcnMvbmljb2xlYmVndWVzc2UvRGVza3RvcC9wYWludC1iYnMvcHVibGljL3BhaW50L2pz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QWUsQ0FBQyxTQUFTLENBQUMsY0FBYyxHQUFHLFNBQVMsQ0FBQyxDQUFFLENBQUMsQ0FBRSxRQUFRLENBQUUsQ0FDaEUsSUFDSSxJQUFJLENBQUcsSUFBSSxDQUFDLElBQUksQ0FBRSxDQUFDLEtBQUssR0FBRyxDQUFDLENBQUEsSUFBSyxLQUFLLEdBQUcsQ0FBQyxDQUFBLEFBQUMsR0FBRyxDQUFDLEtBQUssR0FBRyxDQUFDLENBQUEsSUFBSyxLQUFLLEdBQUcsQ0FBQyxDQUFBLEFBQUMsQ0FBRSxDQUN6RSxPQUFPLENBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxRQUFRLENBQUMsVUFBVSxDQUFFLFFBQVEsQ0FBQyxPQUFPLEdBQUcsUUFBUSxDQUFDLE9BQU8sQ0FBQyxDQUFDLEFBRWpGLEdBQUksSUFBSSxHQUFHLE9BQU8sQ0FBRSxDQUNoQixJQUNJLEVBQUUsQ0FBRyxLQUFLLENBQUUsRUFBRSxDQUFHLEtBQUssQ0FBRSxFQUFFLENBQUcsWUFBWSxDQUN6QyxFQUFFLENBQUcsQ0FBQyxPQUFPLEdBQUcsS0FBSyxDQUFBLEdBQUksSUFBSSxDQUFDLEFBRWxDLElBQUssSUFBSSxDQUFDLENBQUcsRUFBRSxDQUFFLENBQUMsSUFBSSxHQUFHLENBQUUsQ0FBQyxJQUFJLEVBQUUsRUFBRSxDQUNoQyxFQUFFLEdBQUcsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLEdBQUcsR0FBRyxDQUFDLENBQUEsR0FBSSxLQUFLLENBQUMsQUFDL0IsRUFBRSxHQUFHLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxDQUFBLEdBQUksS0FBSyxDQUFDLEFBQy9CLEVBQUUsR0FBRyxDQUFDLEdBQUcsUUFBUSxHQUFHLENBQUMsR0FBRyxHQUFHLENBQUMsQ0FBQSxHQUFJLFlBQVksQ0FBQyxBQUM3QyxJQUFJLENBQUMsaUJBQWlCLENBQUMsRUFBRSxDQUFFLEVBQUUsQ0FBRSxFQUFFLENBQUMsQ0FBQyxDQUN0QyxBQUNELEtBQUssR0FBRyxFQUFFLENBQUMsQUFDWCxLQUFLLEdBQUcsRUFBRSxDQUFD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RyxLQUFLLENBQUEsR0FBSSx3QkFBVyxlQUFlLEdBQUksQ0FBQyxDQUFDLEFBRTdFLElBQUssSUFBSSxDQUFDLENBQUcsQ0FBQyxDQUFFLENBQUMsR0FBRyxNQUFNLENBQUUsQ0FBQyxFQUFFLENBQUUsU0FBUyxJQUFJLFVBQVUsQ0FBRSxTQUFTLElBQUksVUFBVSxFQUFFLENBQy9FLElBQUssSUFBSSxDQUFDLENBQUcsQ0FBQyxDQUFFLENBQUMsR0FBRyxLQUFLLENBQUUsQ0FBQyxFQUFFLENBQUUsU0FBUyxFQUFFLENBQUUsU0FBUyxJQUFJLHdCQUFXLGVBQWUsRUFBRSxDQUNsRixJQUNJLFlBQVksQ0FBRyxBQUFDLFdBQVcsQ0FBQyxTQUFTLENBQUMsR0FBRyxHQUFHLEdBQUksQ0FBQyxDQUFDLEFBRXRELEdBQUksWUFBWSxHQUFHLENBQUMsQ0FBRSxDQUNsQixJQUNJLFNBQVMsQ0FBRyxRQUFRLENBQUMsU0FBUyxHQUFHLHdCQUFXLGlCQUFpQixDQUFDLENBRTlELGFBQWEsQ0FBRyxBQUFDLFlBQVksR0FBRyxTQUFTLElBQUksR0FBRyxHQUFHLFlBQVksQ0FBQSxBQUFDLEdBQUcsR0FBRyxHQUFJLENBQUMsQ0FDM0UsU0FBUyxDQUFHLEFBQUMsR0FBRyxHQUFHLFlBQVksR0FBRyxhQUFhLEdBQUksQ0FBQyxDQUNwRCxRQUFRLENBQUcsR0FBRyxHQUFHLFNBQVMsQ0FBQyxBQUUvQixRQUFRLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxHQUFHLEFBQUMsQ0FBQyxHQUFHLEdBQUcsU0FBUyxHQUFHLFFBQVEsQ0FBQyxTQUFTLENBQUMsR0FBRyxRQUFRLENBQUEsR0FBSSxHQUFHLEdBQUksSUFBSSxDQUFDLEFBQzdGLFFBQVEsQ0FBQyxJQUFJLENBQUMsU0FBUyxHQUFHLENBQUMsQ0FBQyxHQUFHLEFBQUMsQ0FBQyxLQUFLLEdBQUcsU0FBUyxHQUFHLFFBQVEsQ0FBQyxTQUFTLEdBQUcsQ0FBQyxDQUFDLEdBQUcsUUFBUSxDQUFBLEdBQUksR0FBRyxHQUFJLElBQUksQ0FBQyxBQUN2RyxRQUFRLENB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QUMsR0FBRyxHQUFHLEdBQUksQ0FBQyxDQUFDLEFBRXRELEdBQUksWUFBWSxHQUFHLENBQUMsQ0FBRSxDQUNsQixJQUNJLElBQUksQ0FBRyxBQUFDLFFBQVEsR0FBRyxDQUFDLFFBQVEsR0FBRyxRQUFRLENBQUEsR0FBSSxZQUFZLEdBQUcsR0FBRyxHQUFJLENBQUMsQ0FFbEUsR0FBRyxDQUFHLElBQUksR0FBRyxDQUFDLENBQUMsQUFFbkIsQ0FBQyxHQUFHLElBQUksR0FBRyxRQUFRLENBQUMsU0FBUyxHQUFHLHdCQUFXLGVBQWUsQ0FBQyxDQUFDLEFBQzVELENBQUMsR0FBRyxJQUFJLEdBQUcsUUFBUSxDQUFDLFNBQVMsR0FBRyx3QkFBVyxpQkFBaUIsQ0FBQyxDQUFDLEFBQzlELENBQUMsR0FBRyxJQUFJLEdBQUcsUUFBUSxDQUFDLFNBQVMsR0FBRyx3QkFBVyxnQkFBZ0IsQ0FBQyxDQUFDLEFBQzdELENBQUMsR0FBRyxJQUFJLEdBQUcsUUFBUSxDQUFDLFNBQVMsR0FBRyx3QkFBVyxpQkFBaUIsQ0FBQyxDQUFDLEFBRTlELFNBQVMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFHLFNBQVMsR0FBRyxVQUFVLENBQUcsU0FBUyxDQUFDLENBQUMsQUFDdEQsU0FBUyxDQUFDLENBQUMsR0FBRyxVQUFVLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBRyxTQUFTLEdBQUcsVUFBVSxDQUFHLFNBQVMsQ0FBQyxDQUFDLEFBQzFFLFNBQVMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFHLFNBQVMsR0FBRyx3QkFBVyxlQUFlLENBQUcsU0FBUyxDQUFDLENBQUMsQUFDdEUsU0FBUyxDQUFDLENBQUMsR0FBRyxVQUFVLENBQUMsS0FBSyxHQUFHLENBQUMsQ0FBRyxTQUFTLEdBQUcsd0JBQVcsZUFBZSxDQUFHLFNBQVMsQ0FBQyxDQUFDLEFBRXpGLENBQUMsSUFBSSxHQUFHLENBQUMsQUFDVCxDQUFDLElBQUksR0FBRyxDQUFDLEFBQ1QsQ0FBQyxJQUFJLEdBQUcsQ0FBQyxBQUNULENBQUMsSUFBSSxHQUFHLENBQUMsQUFFVCxRQUFRLENBQUMsSUFBSSxDQUFDLFNBQVMsR0FBRyx3QkFBVyxlQUFlLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEFBQzlELFFBQVEsQ0FBQyxJQUFJLENBQUMsU0FBUyxHQUFHLHdCQUFXLGlCQUFpQixDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxBQUNoRSxRQUFRLENBQUMsSUFBSSxDQUFDLFNBQVMsR0FBRyx3QkFBVyxnQkFBZ0IsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsQUFDL0QsUUFBUSxDQUFDLElBQUksQ0FBQyxTQUFTLEdBQUcsd0JBQVcsaUJBQWlCLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQ25FLENBQ0osQ0FDSixDQUNKLENBQUEsbUhBR0QsU0FBUyxzQkFBc0IsRUFBRyxFQUNqQyxBQUVELHNCQUFzQixDQUFDLFNBQVMsR0FBRyxNQUFNLENBQUMsTUFBTSxDQUFDLHNCQUFzQixDQUFDLFNBQVMsQ0FBQyxDQUFDLEFBQ25GLHNCQUFzQixDQUFDLFNBQVMsQ0FBQyxXQUFXLEdBQUcsc0JBQXNCLENBQUMsQUFFdEUsc0JBQXNCLENBQUMsU0FBUyxDQUFDLGVBQWUsR0FBRyxTQUFTLE9BQU8sQ0FBRSxLQUFLLENBQUUsQ0FDeEUsSUFDSSxXQUFXLENBQUcsYUFBYSxDQUFDLElBQUksQ0FDaEMsUUFBUSxDQUFHLFVBQVUsQ0FBQyxJQUFJLENBRTFCLFNBQVMsQ0FBRyxhQUFhLENBQUMsYUFBYSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUUsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUNsRSxTQUFTLENBQUcsUUFBUSxDQUFDLGFBQWEsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFFLE9BQU8sQ0FBQyxHQUFHLENBQUMsQ0FFN0QsS0FBSyxDQUFHLE9BQU8sQ0FBQyxRQUFRLEVBQUUsR0FBRyxDQUFDLENBQzlCLE1BQU0sQ0FBRyxPQUFPLENBQUMsU0FBUyxFQUFFLEdBQUcsQ0FBQyxDQUVoQyxVQUFVLENBQUcsQUFBQyxhQUFhLENBQUMsS0FBSyxHQUFHLEtBQUssR0FBSSxDQUFDLENBQzlDLFVBQVUsQ0FBRyxBQUFDLENBQUMsUUFBUSxDQUFDLEtBQUssR0FBRyxLQUFLLENBQUEsR0FBSSx3QkFBVyxlQUFlLEdBQUksQ0FBQyxDQUFDLEFBRTdFLElBQUssSUFBSSxDQUFDLENBQUcsQ0FBQyxDQUFFLENBQUMsR0FBRyxNQUFNLENBQUUsQ0FBQyxFQUFFLENBQUUsU0FBUyxJQUFJLFVBQVUsQ0FBRSxTQUFTLElBQUksVUFBVSxFQUFFLENBQy9FLElBQUssSUFBSSxDQUFDLENBQUcsQ0FBQyxDQUFFLENBQUMsR0FBRyxLQUFLLENBQUUsQ0FBQyxFQUFFLENBQUUsU0FBUyxFQUFFLENBQUUsU0FBUyxJQUFJLHdCQUFXLGVBQWUsRUFBRSxDQUNsRixJQUNJLE1BQU0sQ0FBRyxXQUFXLENBQUMsU0FBUyxDQUFDLENBQy9CLE1BQU0sQ0FBRyxNQUFNLEtBQUssRUFBRSxDQUFDLEFBRTNCLEdBQUksTUFBTSxJQUFJLENBQUMsQ0FBRSxDQUNiLFNBQVMsQ0FDWixBQUVEO0FBRUksTUFBTSxDQUFHLFFBQVEsQ0FBQyxTQUFTLEdBQUcsd0JBQVcsaUJBQWlCLENBQUMsNEJBQzNELFFBQVEsQ0FBRyxBQUFDLE1BQU0sR0FBRyxNQUFNLEdBQUcsTUFBTSxHQUFHLE1BQU0sR0FBRyxHQUFHLEdBQUksQ0FBQyxDQUFDLEFBRTdELEdBQUksUUFBUSxHQUFHLENBQUMsQ0FBRSxDQUNkLElBQ0ksU0FBUyxDQUFHLEFBQUMsTUFBTSxHQUFHLEdBQUcsR0FBRyxRQUFRLEdBQUksQ0FBQyxDQUN6QyxRQUFRLENBQUcsR0FBRyxHQUFHLFNBQVMsQ0FBQyxBQUUvQixRQUFRLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxHQUFHLEFBQUMsQ0FBQyxDQUFDLEFBQUMsTUFBTSxJQUFJLEVBQUUsR0FBSSxJQUFJLENBQUEsR0FBSSxTQUFTLEdBQUcsUUFBUSxDQUFDLFNBQVMsQ0FBQyxHQUFHLFFBQVEsQ0FBQSxHQUFJLEdBQUcsR0FBSSxDQUFDLENBQUMsQUFDOUcsUUFBUSxDQUFDLElBQUksQ0FBQyxTQUFTLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQUFBQyxDQUFDLENBQUMsQUFBQyxNQUFNLElBQUksQ0FBQyxHQUFJLElBQUksQ0FBQSxHQUFJLFNBQVMsR0FBRyxRQUFRLENBQUMsU0FBUyxHQUFHLENBQUMsQ0FBQyxHQUFHLFFBQVEsQ0FBQSxHQUFJLEdBQUcsR0FBSSxDQUFDLENBQUMsQUFDckgsUUFBUSxDQUFDLElBQUksQ0FBQyxTQUFTLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQUFBQyxDQUFDLENBQUMsTUFBTSxHQUFHLElBQUksQ0FBQSxHQUFJLFNBQVMsR0FBRyxRQUFRLENBQUMsU0FBUyxHQUFHLENBQUMsQ0FBQyxHQUFHLFFBQVEsQ0FBQSxHQUFJLEdBQUcsR0FBSSxDQUFDLENBQUMsQUFDOUcsUUFBUSxDQUFDLElBQUksQ0FBQyxTQUFTLEdBQUcsQ0FBQyxDQUFDLEdBQUcsUUFBUSxDQUFDLENBQzNDLENBQ0osQ0FDSixDQUNKLENBQUMsQUFFRixTQUFTLHFCQUFxQixFQUFHLENBQzdCLElBQ0ksUUFBUSxDQUFHLEVBQUUsQ0FDYixpQkFBaUIsQ0FBRyxFQUFFLENBQUMsQUFFM0IsSUFDSSxlQUFlLENBQUcsRUFBRSxDQUFDOzs7Ozs7V0FTekIsU0FBUyxXQUFXLENBQUMsQ0FBQyxDQUFFLENBQUMsQ0FBRSxFQUFFLENBQUUsRUFBRSxDQUFFLENBQy9CLElBQ0ksT0FBTyxDQUFHLEVBQUUsQ0FFWixhQUFhLENBQUcsZUFBZSxDQUFHLE1BQU0sQ0FBRyxJQUFJLENBQUMsY0FBYyxFQUFFLENBQUMsQUFFckUsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsQUFDVixDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxBQUVWLE9BQU8sQ0FBQyxJQUFJLENBQUMsOEJBQWEsYUFBYSxDQUFDLGFBQWEsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxBQUV2RSxJQUFLLElBQUksQ0FBQyxDQUFHLElBQUksQ0FBRSxDQUFDLEdBQUcsS0FBSyxDQUFFLENBQUMsSUFBSSxHQUFHLEVBQUUsQ0FDcEMsT0FBTyxDQUFDLElBQUksQ0FBQyw4QkFBYSxhQUFhLENBQUMsYUFBYSxDQUFDLFFBQVEsQ0FBQyxFQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsR0FBRyxFQUFFLENBQUEsQUFBQyxDQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxBQUNwRixPQUFPLENBQUMsSUFBSSxDQUFDLDhCQUFhLGFBQWEsQ0FBQyxhQUFhLENBQUMsUUFBUSxDQUFDLEVBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxHQUFHLEVBQUUsQ0FBQSxBQUFDLENBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEFBQ3BGLE9BQU8sQ0FBQyxJQUFJLENBQUMsOEJBQWEsYUFBYSxDQUFDLGFBQWEsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFFLEVBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxHQUFHLEVBQUUsQ0FBQSxBQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQUFDcEYsT0FBTyxDQUFDLElBQUksQ0FBQyw4QkFBYSxhQUFhLENBQUMsYUFBYSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUUsRUFBQyxFQUFFLENBQUMsR0FBRyxDQUFDLEdBQUcsRUFBRSxDQUFBLEFBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxBQUVwRixPQUFPLENBQUMsSUFBSSxDQUFDLDhCQUFhLGFBQWEsQ0FBQyxhQUFhLENBQUMsUUFBUSxDQUFDLEVBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxHQUFHLEdBQUcsR0FBRyxFQUFFLENBQUEsQUFBQyxDQUFFLEVBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxHQUFHLEdBQUcsR0FBRyxFQUFFLENBQUEsQUFBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEFBQzdHLE9BQU8sQ0FBQyxJQUFJLENBQUMsOEJBQWEsYUFBYSxDQUFDLGFBQWEsQ0FBQyxRQUFRLENBQUMsRUFBQyxFQUFFLENBQUMsR0FBRyxDQUFDLEdBQUcsR0FBRyxHQUFHLEVBQUUsQ0FBQSxBQUFDLENBQUUsRUFB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QVMsRUFBRSxDQUFFLFNBQVMsSUFBSSx3QkFBVyxlQUFlLEVBQUUsQ0FDckcsSUFDSSxNQUFNLENBQUcsQUFBQyxhQUFhLENBQUMsSUFBSSxDQUFDLFNBQVMsR0FBRyx3QkFBVyxpQkFBaUIsQ0FBQyxHQUFHLEtBQUssR0FBRyxHQUFHLEdBQUksQ0FBQyxDQUFDLEFBRTlGLEdBQUksTUFBTSxJQUFJLENBQUMsQ0FBRSxDQUNiLFNBQVMsQ0FDWixBQUVELElBQ0ksTUFBTSxDQUFHLE1BQU0sQ0FBQyxTQUFTLENBQUMsQ0FDMUIsTUFBTSxDQUFHLE1BQU0sS0FBSyxFQUFFLENBRXRCLFFBQVEsQ0FBRyxBQUFDLE1BQU0sR0FBRyxNQUFNLEdBQUcsTUFBTSxHQUFHLE1BQU0sR0FBRyxHQUFHLEdBQUksQ0FBQyxDQUFDLEFBRTdELEdBQUksUUFBUSxHQUFHLENBQUMsQ0FBRSxDQUNkLElBQ0ksU0FBUyxDQUFHLEFBQUMsTUFBTSxHQUFHLEdBQUcsR0FBRyxRQUFRLEdBQUksQ0FBQyxDQUN6QyxRQUFRLENBQUcsR0FBRyxHQUFHLFNBQVMsQ0FFMUIsU0FBUyxDQUFHLGFBQWEsQ0FBQyxJQUFJLENBQUMsU0FBUyxHQUFHLHdCQUFXLGVBQWUsQ0FBQyxDQUN0RSxXQUFXLENBQUcsYUFBYSxDQUFDLElBQUksQ0FBQyxTQUFTLEdBQUcsd0JBQVcsaUJBQWlCLENBQUMsQ0FDMUUsVUFBVSxDQUFHLGFBQWEsQ0FBQyxJQUFJLENBQUMsU0FBUyxHQUFHLHdCQUFXLGdCQUFnQixDQUFDLENBRXhFLFFBQVEsQ0FBRyxRQUFRLElBQUksRUFBRSxHQUNuQixBQUFDLFNBQVMsR0FBSSxDQUFDLENBQUMsTUFBTSxLQUFLLEVBQUUsR0FBRyxJQUFJLENBQUEsR0FBSSxRQUFRLEdBQUcsU0FBUyxHQUFHLFFBQVEsQ0FBQSxHQUFJLEdBQUcsQUFBQyxJQUFLLEVBQUUsR0FDdEYsQUFBQyxXQUFXLEdBQUksQ0FBQyxDQUFDLE1BQU0sS0FBSyxDQUFDLEdBQUcsSUFBSSxDQUFBLEdBQUksUUFBUSxHQUFHLFdBQVcsR0FBRyxRQUFR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RyxpQkFBaUIsQ0FBQyxFQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsS0FBSyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsTUFBTSxFQUFDLENBQUM7WUFFakQsRUFBRSxHQUFHLDRCQUNELElBQUksQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQ3BELElBQUksQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQ3BELElBQUksQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxFQUN4RCxJQUFJLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FDM0QsQ0FBQzs7QUFFTixVQUFFLENBQUMsSUFBSSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQzs7QUFFZCxlQUFPLEVBQUUsQ0FBQztLQUNiOzs7OztBQUtELGFBQVMsWUFBWSxHQUFHO0FBQ3BCLFlBQ0ksS0FBSyxHQUFHLE1BQU0sQ0FBQyxLQUFLO1lBQ3BCLE1B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TUFBTSxDQUFDLElBQUksRUFBRSxDQUFDLENBQUM7O0FBRTFGLGdCQUFRLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7O0FBRWhDLGdCQUFRLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxHQUFHLFFBQVEsQ0FBQyxJQUFJLENBQUMsUUFBUSxFQUFFLElBQUksZ0JBQWdCLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQSxBQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7O0FBRTNHLFlBQUksZ0JBQWdCLEVBQUU7QUFDbEIsb0JBQVEsQ0FBQyxNQUFNLENBQUMsV0FBVyxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFFLEdBQUcsUUFBUSxDQUFDLElBQUksQ0FBQyxRQUFRLEVBQUUsSUFBSSxnQkFBZ0IsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFBLEFBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztTQUNoSCxNQUFNO0FBQ0gsb0JBQVEsQ0FBQyxNQUFNLENBQUMsV0FBVyxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFFLEVBQUUsUUFBUSxDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUUsR0FBRyxRQUFRLENBQUMsSUFBSSxDQUFDLFNBQVMsRUFBRSxHQUFHLENBQUMsQ0FBQyxDQUFDO1NBQzNHOztBQUVELGdCQUFRLENBQUMsUUFBUSxDQUFDLFdBQVcsQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLElBQUksRUFBRSxHQUFHLFFBQVEsQ0FBQyxRQUFRLENBQUMsUUFBUSxFQUFFLElBQUksZ0JBQWdCLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQSxBQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7O0FBRXBILGdCQUFRLENBQUMsUUFBUSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsSUFBSSxFQUFFLEdBQUcsUUFBUSxDQUFDLFFBQVEsQ0FBQyxJQUFJ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QUFNLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLEdBQUcsRUFBRSxJQUFJLENBQUMsR0FBRyxHQUFHLEtBQUssQ0FBQyxDQUFDOztBQUU1RCxRQUFJLENBQUMsR0FBRyxJQUFJLEtBQUssQ0FBQzs7QUFFbEIsUUFBSSxJQUFJLENBQUMsR0FBRyxHQUFHLElBQUksQ0FBQyxHQUFHLEVBQUU7QUFDckIsWUFBSSxDQUFDLEdBQUcsR0FBRyxJQUFJLENBQUM7S0FDbkI7O0FBRUQsV0FBTyxNQUFNLENBQUM7Q0FDakIsQ0FBQTs7QUFFRCxlQUFlLENBQUMsU0FBUyxDQUFDLElBQUksR0FBRyxVQUFTLFFBQVEsRUFBRTtBQUNoRCxRQUFJLENBQUMsR0FBRyxJQUFJLFFBQVEsQ0FBQzs7QUFFckIsUUFBSSxJQUFJLENBQUMsR0FBRyxHQUFHLElBQUksQ0FBQyxHQUFHLEVBQUU7QUFDckIsWUFBSSxDQUFDLEdBQUcsR0FBRyxJQUFJLENBQUM7S0FDbkI7Q0FDSixDQUFDOztBQUVGLGVBQWUsQ0FBQyxTQUFTLENBQUMsSUFBSSxHQUFHLFVBQVMsTUFBTSxFQUFFO0FBQzlDLFFBQUksQ0FBQyxHQUFHLEdBQUcsTUFBTSxDQUFDO0NBQ3JCLENBQUM7O0FBRUYsZUFBZSxDQUFDLFNBQVMsQ0FBQyxVQUFVLEdBQUcsVUFBUyxHQUFHLEVBQUU7QUFDakQsU0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLEVBQUU7QUFDakMsWUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxFQUFFLENBQUMsR0FBRyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7S0FDbEM7Q0FDSixDQUFDOztBQUVGLGVBQWUsQ0FBQyxTQUFTLENBQUMsU0FBUyxHQUFHLFVBQVMsQ0FBQyxFQUFFO0FBQzlDLFFBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDO0NBQzdCLENBQUM7OztBQUdGLGVBQWUsQ0FBQyxTQUFTLENBQUMsT0FBTyxHQUFHLGVBQWUsQ0FBQyxTQUFTLENBQUMsU0FBUyxDQUFDOztBQUV4RSxlQUFlLENBQUMsU0FBUyxDQUFDLFVBQVUsR0FBRyxVQUFTLENBQUMsRUFBRTtBQUMvQyxRQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLEVBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQztBQUMxQixRQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLEVBQUUsQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUM7Q0FDbEMsQ0FBQzs7QUFFRixlQUFlLENBQUMsU0FBUyxDQUFDLFVBQVUsR0FBRyxVQUFTLENBQUMsRUFBRTtBQUMvQyxRQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLEVBQUUsQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUM7QUFDL0IsUUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUM7Q0FDN0IsQ0FBQzs7QUFFRixlQUFlLENBQUMsU0FBUyxDQUFDLFVBQVUsR0FBRyxVQUFTLENBQUMsRUFBRTtBQUMvQyxRQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLEVBQUUsQ0FBQyxHQUFHLENBQUMsSUFBSSxFQUFFLENBQUM7QUFDaEMsUUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxFQUFFLENBQUMsR0FBRyxDQUFDLElBQUksRUFBRSxDQUFDO0FBQ2hDLFFBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsRUFBRSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQztBQUMvQixRQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLEVBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQztDQUM3QixDQUFDOztBQUVGLGVBQWUsQ0FBQyxTQUFTLENBQUMsVUFBVSxHQUFHLFVBQVMsQ0FBQyxFQUFFO0FBQy9DLFFBQUksQ0FB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Q0FBQyxNQUFNLENBQUMsTUFBTSxFQUFFLENBQUMsRUFBRSxPQUFPLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxNQUFNLEVBQUMsQ0FBQztDQUMxRSxDQUFDOzs7Ozs7OztBQVFGLFNBQVMsQ0FBQyxTQUFTLENBQUMsYUFBYSxHQUFHLFVBQVMsS0FBSyxFQUFFO0FBQ25ELEtBQUksQ0FBQztLQUFFLENBQUM7S0FBRSxTQUFTLEdBQUcsS0FBSyxDQUFDOztBQUU1QixNQUFLLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsTUFBTSxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxNQUFNLEVBQUUsQ0FBQyxHQUFHLENBQUMsRUFBRSxFQUFFO0FBQ3hFLE1BQUksQUFBQyxBQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLElBQU0sSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsQUFBQyxJQUM5RCxLQUFLLENBQUMsQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUEsSUFBSyxLQUFLLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFBLEFBQUMsSUFBSSxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQSxBQUFDLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEFBQUMsRUFBRTtBQUM5SSxZQUFTLEdBQUcsQ0FBQyxTQUFTLENBQUM7R0FDdkI7RUFDRDs7QUFFRCxRQUFP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QWEsR0FBRyxZQUFXOzs7Ozs7OztBQVE3QyxRQUFJLENBQUMsQ0FBQyxHQUFHLENBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUUsQ0FBQztDQUNqQyxDQUFDOzs7Ozs7Ozs7QUFTRixXQUFXLENBQUMsU0FBUyxDQUFDLFFBQVEsR0FBRyxVQUFTLE1BQU0sRUFBRTtBQUM5QyxRQUNJLEdBQUcsR0FBRyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUN2RCxHQUFHLEdBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFFdkQsR0FBRyxHQUFHLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ3ZELEdBQUcsR0FBRyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUV2RCxFQUFFLEdBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNsRSxFQUFFLEdBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDOztBQUV2RSxRQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQztBQUNoQixRQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQztBQUNoQixRQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQztBQUNoQixRQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQztBQUNoQixRQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQztBQUNmLFFBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDO0NBQ2xCLENBQUM7Ozs7Ozs7OztBQVNGLFdBQVcsQ0FBQyxTQUFTLENBQUMsV0FBVyxHQUFHLFVBQVMsTUFBTSxFQUFFO0FBQ2pELFFBQ0ksR0FBRyxHQUFHLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ3ZELEdBQUcsR0FBRyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUV2RCxHQUFHLEdBQUcsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDdkQsR0FBRyxHQUFHLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBRXZELEVBQUUsR0FBRyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ3BFLEVBQUUsR0FBRyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7O0FBRXpFLFFBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsR0FBRyxDQUFDO0FBQ2hCLFFBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsR0FBRyxDQUFDO0FBQ2hCLFFBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsR0FBRyxDQUFDO0FBQ2hCLFFBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsR0FBRyxDQUFDO0FBQ2hCLFFBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDO0FBQ2YsUUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUM7Q0FDbEIsQ0FBQzs7QUFFRixXQUFXLENBQUMsU0FBUyxDQUFDLE1BQU0sR0FBRyxZQUFXO0FBQ3RDLFFBQ0ksQ0FBQyxHQUFHLENBQUMsSUFBSSxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFBLEFBQUM7UUFDdkQsRUFBRSxHQUFHLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQztRQUNsQixFQUFFLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUM7UUFDbkIsRUFBRSxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDO1FBQ25CLEVBQUUsR0FBRyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUM7UUFDbEIsRUFBRSxHQUFHLENBQUMsSUFBSSxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFBLEFBQUM7UUFDeEQsRUFBRSxHQUFHLENBQUMsSUFBSSxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FB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LFdBQVcsS0FBSyxJQUFJLEVBQUU7Ozs7Ozs7Ozs7QUFVaEMsYUFBVSxHQUFHLFVBQVUsQ0FBQyxhQUFhLEdBQUcsS0FBSyxHQUFHLElBQUksRUFBRSxhQUFhLEtBQUssU0FBUyxHQUFHLEtBQUssR0FBRyxPQUFPLEdBQUcsS0FBSyxDQUFDLENBQUM7R0FDN0c7RUFDRDs7O0FBR0QsUUFBTyxPQUFPLENBQUM7Q0FDZjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBbURNLFNBQVMsUUFBUSxDQUFDLEtBQUssRUFBRSxRQUFRLEVBQUUsUUFBUSxFQUFFO0FBQ25ELFFBQU8sUUFBUSxLQUFLLFNBQVMsR0FDMUIsUUFBUSxDQUFDLEtBQUssRUFBRSxRQUFRLEVBQUUsS0FBSyxDQUFDLEdBQ2hDLFFBQVEsQ0FBQyxLQUFLLEVBQUUsUUFBUSxFQUFFLFFBQVEsS0FBSyxLQUFLLENBQUMsQ0FBQztDQUNqRCIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCIvKlxuICAgIENoaWNrZW5QYWludFxuXG4gICAgQ2hpY2tlblBhaW50IGlzIGEgdHJhbnNsYXRpb24gb2YgQ2hpYmlQYWludCBmcm9tIEphdmEgdG8gSmF2YVNjcmlwdFxuICAgIGJ5IE5pY2hvbGFzIFNoZXJsb2NrIC8gQ2hpY2tlbiBTbW9vdGhpZS5cblxuICAgIENoaWJpUGFpbnQgaXMgQ29weXJpZ2h0IChjKSAyMDA2LTIwMDggTWFyYyBTY2hlZmVyXG5cbiAgICBDaGlja2VuUGFpbnQgaXMgZnJlZSBzb2Z0d2FyZTogeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yIG1vZGlmeVxuICAgIGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgYXMgcHVibGlzaGVkIGJ5XG4gICAgdGhlIEZyZWUgU29mdHdhcmUgRm91bmRhdGlvbiwgZWl0aGVyIHZlcnNpb24gMyBvZiB0aGUgTGljZW5zZSwgb3JcbiAgICAoYXQgeW91ciBvcHRpb24pIGFueSBsYXRlciB2ZXJzaW9uLlxuXG4gICAgQ2hpY2tlblBhaW50IGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsXG4gICAgYnV0IFdJVEhPVVQgQU5ZIFdBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2ZcbiAgICBNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuICBTZWUgdGhlXG4gICAgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy5cblxuICAgIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXG4gICAgYWxvbmcgd2l0aCBDaGlja2VuUGFpbnQuIElmIG5vdCwgc2VlIDxodHRwOi8vd3d3LmdudS5vcmcvbGljZW5zZXMvPi5cbiovXG5cbmltcG9ydCBDUEJydXNoSW5mbyBmcm9tIFwiLi9lbmdpbmUvQ1BCcnVzaEluZm9cIjtcbmltcG9ydCBDUEFydHdvcmsgZnJvbSBcIi4vZW5naW5lL0NQQXJ0d29ya1wiO1xuaW1wb3J0IENQUmVzb3VyY2VMb2FkZXIgZnJvbSBcIi4vZW5naW5lL0NQUmVzb3VyY2VMb2FkZXJcIjtcbmltcG9ydCBDUFJlc291cmNlU2F2ZXIgZnJvbSBcIi4vZW5naW5lL0NQUmVzb3VyY2VTYXZlclwiO1xuXG5pbXBvcnQgQ1BTcGFzaFNjcmVlbiBmcm9tIFwiLi9ndWkvQ1BTcGxhc2hTY3JlZW4uanNcIjtcblxuaW1wb3J0IENQTWFpbkdVSSBmcm9tIFwiLi9ndWkvQ1BNYWluR1VJXCI7XG5cbmltcG9ydCBDUEFib3V0RGlhbG9nIGZyb20gXCIuL2d1aS9DUEFib3V0RGlhbG9nXCI7XG5pbXBvcnQgQ1BDb25maXJtVHJhbnNmb3JtRGlhbG9nIGZyb20gXCIuL2d1aS9DUENvbmZpcm1UcmFuc2Zvcm1EaWFsb2dcIjtcbmltcG9ydCBDUFNob3J0Y3V0c0RpYWxvZyBmcm9tIFwiLi9ndWkvQ1BTaG9ydGN1dHNEaWFsb2dcIjtcbmltcG9ydCBDUEJveEJsdXJEaWFsb2cgZnJvbSBcIi4vZ3VpL0NQQm94Qmx1ckRpYWxvZ1wiO1xuaW1wb3J0IENQVGFibGV0RGlhbG9nIGZyb20gXCIuL2d1aS9DUFRhYmxldERpYWxvZ1wiO1xuaW1wb3J0IENQR3JpZERpYWxvZyBmcm9tIFwiLi9ndWkvQ1BHcmlkRGlhbG9nXCI7XG5pbXBvcnQgQ1BTZW5kRGlhbG9nIGZyb20gXCIuL2d1aS9DUFNlbmREaWFsb2dcIjtcblxuXG5pbXBvcnQge2lzQ2FudmFzSW50ZXJwb2xhdGlvblN1cHBvcnRlZCwgaXNFdmVudFN1cHBvcnRlZCwgaXNDYW52YXNTdXBwb3J0ZWR9IGZyb20gXCIuL3V0aWwvQ1BQb2x5ZmlsbFwiO1xuaW1wb3J0IENQQ29sb3IgZnJvbSBcIi4vdXRpbC9DUENvbG9yXCI7XG5pbXBvcnQgQ1BXYWNvbVRhYmxldCBmcm9tIFwiLi91dGlsL0NQV2Fjb21UYWJsZXRcIjtcbmltcG9ydCBDUFJlY3QgZnJvbSBcIi4vdXRpbC9DUFJlY3RcIjtcblxuZnVuY3Rpb24gaXNCcm93c2VyU3VwcG9ydGVkKCkge1xuICAgIHJldHVybiBpc0NhbnZhc1N1cHBvcnRlZCgpICYmIFwiVWludDhBcnJheVwiIGluIHdpbmRvdztcbn1cblxuZnVuY3Rpb24gY3JlYXRlRHJhd2luZ1Rvb2xzKCkge1xuICAgIHZhclxuICAgICAgICB0b29scyA9IG5ldyBBcnJheShDaGlja2VuUGFpbnQuVF9NQVgpO1xuXG4gICAgdG9vbHNbQ2hpY2tlblBhaW50LlRfUEVOQ0lMXSA9IG5ldyBDUEJydXNoSW5mbyh7XG4gICAgICAgIHRvb2xOYjogQ2hpY2tlblBhaW50LlRfUEVOQ0lMLFxuICAgICAgICBzaXplOiAxNixcbiAgICAgICAgYWxwaGE6IDI1NSxcbiAgICAgICAgaXNBQTogdHJ1ZSxcbiAgICAgICAgbWluU3BhY2luZzogMC41LFxuICAgICAgICBzcGFjaW5nOiAwLjA1LFxuICAgICAgICBwcmVzc3VyZVNpemU6IGZhbHNlLFxuICAgICAgICBwcmVzc3VyZUFscGhhOiB0cnVlLFxuICAgICAgICB0eXBlOiBDUEJydXNoSW5mby5CX1JPVU5EX0FBLFxuICAgICAgICBwYWludE1vZGU6IENQQnJ1c2hJbmZvLk1fUEFJTlRcbiAgICB9KTtcblxuICAgIHRvb2xzW0NoaWNrZW5QYWludC5UX0VSQVNFUl0gPSBuZXcgQ1BCcnVzaEluZm8oe1xuICAgICAgICB0b29sTmI6IENoaWNrZW5QYWludC5UX0VSQVNFUixcbiAgICAgICAgc2l6ZTogMTYsXG4gICAgICAgIGFscGhhOiAyNTUsXG4gICAgICAgIGlzQUE6IHRydWUsXG4gICAgICAgIG1pblNwYWNpbmc6IDAuNSxcbiAgICAgICAgc3BhY2luZzogMC4wNSxcbiAgICAgICAgcHJlc3N1cmVTaXplOiBmYWxzZSxcbiAgICAgICAgcHJlc3N1cmVBbHBoYTogZmFsc2UsXG4gICAgICAgIHR5cGU6IENQQnJ1c2hJbmZvLkJfUk9VTkRfQUEsXG4gICAgICAgIHBhaW50TW9kZTogQ1BCcnVzaEluZm8uTV9FUkFTRVxuICAgIH0pO1xuXG4gICAgdG9vbHNbQ2hpY2tlblBhaW50LlRfUEVOXSA9IG5ldyBDUEJydXNoSW5mbyh7XG4gICAgICAgIHRvb2xOYjogQ2hpY2tlblBhaW50LlRfUEVOLFxuICAgICAgICBzaXplOiAyLFxuICAgICAgICBhbHBoYTogMTI4LFxuICAgICAgICBpc0FBOiB0cnVlLFxuICAgICAgICBtaW5TcGFjaW5nOiAwLjUsXG4gICAgICAgIHNwYWNpbmc6IDAuMDUsXG4gICAgICAgIHByZXNzdXJlU2l6ZTogdHJ1ZSxcbiAgICAgICAgcHJlc3N1cmVBbHBoYTogZmFsc2UsXG4gICAgICAgIHR5cGU6IENQQnJ1c2hJbmZvLkJfUk9VTkRfQUEsXG4gICAgICAgIHBhaW50TW9kZTogQ1BCcnVzaEluZm8uTV9QQUlOVFxuICAgIH0pO1xuXG4gICAgdG9vbHNbQ2hpY2tlblBhaW50LlRfU09GVEVSQVNFUl0gPSBuZXcgQ1BCcnVzaEluZm8oe1xuICAgICAgICB0b29sTmI6IENoaWNrZW5QYWludC5UX1NPRlRFUkFTRVIsXG4gICAgICAgIHNpemU6IDE2LFxuICAgICAgICBhbHBoYTogNjQsXG4gICAgICAgIGlzQUE6IGZhbHNlLFxuICAgICAgICBpc0FpcmJydXNoOiB0cnVlLFxuICAgICAgICBtaW5TcGFjaW5nOiAwLjUsXG4gICAgICAgIHNwYWNpbmc6IDAuMDUsXG4gICAgICAgIHByZXNzdXJlU2l6ZTogZmFsc2UsXG4gICAgICAgIHByZXNzdXJlQWxwaGE6IHRydWUsXG4gICAgICAgIHR5cGU6IENQQnJ1c2hJbmZvLkJfUk9VTkRfQUlSQlJVU0gsXG4gICAgICAgIHBhaW50TW9kZTogQ1BCcnVzaEluZm8uTV9FUkFTRVxuICAgIH0pO1xuXG4gICAgdG9vbHNbQ2hpY2tlblBhaW50LlRfQUlSQlJVU0hdID0gbmV3IENQQnJ1c2hJbmZvKHtcbiAgICAgICAgdG9vbE5iOiBDaGlja2VuUGFpbnQuVF9BSVJCUlVTSCxcbiAgICAgICAgc2l6ZTogNTAsXG4gICAgICAgIGFscGhhOiAzMixcbiAgICAgICAgaXNBQTogZmFsc2UsXG4gICAgICAgIGlzQWlyYnJ1c2g6IHRydWUsXG4gICAgICAgIG1pblNwYWNpbmc6IDAuNSxcbiAgICAgICAgc3BhY2luZzogMC4wNSxcbiAgICAgICAgcHJlc3N1cmVTaXplOiBmYWxzZSxcbiAgICAgICAgcHJlc3N1cmVBbHBoYTogdHJ1ZSxcbiAgICAgICAgdHlwZTogQ1BCcnVzaEluZm8uQl9ST1VORF9BSVJCUlVTSCxcbiAgICAgICAgcGFpbnRNb2RlOiBDUEJydXNoSW5mby5NX1BBSU5UXG4gICAgfSk7XG5cbiAgICB0b29sc1tDaGlja2VuUGFpbnQuVF9ET0RHRV0gPSBuZXcgQ1BCcnVzaEluZm8oe1xuICAgICAgICB0b29sTmI6IENoaWNrZW5QYWludC5UX0RPREdFLFxuICAgICAgICBzaXplOiAzMCxcbiAgICAgICAgYWxwaGE6IDMyLFxuICAgICAgICBpc0FBOiBmYWxzZSxcbiAgICAgICAgaXNBaXJicnVzaDogdHJ1ZSxcbiAgICAgICAgbWluU3BhY2luZzogMC41LFxuICAgICAgICBzcGFjaW5nOiAwLjA1LFxuICAgICAgICBwcmVzc3VyZVNpemU6IGZhbHNlLFxuICAgICAgICBwcmVzc3VyZUFscGhhOiB0cnVlLFxuICAgICAgICB0eXBlOiBDUEJydXNoSW5mby5CX1JPVU5EX0FJUkJSVVNILFxuICAgICAgICBwYWludE1vZGU6IENQQnJ1c2hJbmZvLk1fRE9ER0VcbiAgICB9KTtcblxuICAgIHRvb2xzW0NoaWNrZW5QYWludC5UX0JVUk5dID0gbmV3IENQQnJ1c2hJbmZvKHtcbiAgICAgICAgdG9vbE5iOiBDaGlja2VuUGFpbnQuVF9CVVJOLFxuICAgICAgICBzaXplOiAzMCxcbiAgICAgICAgYWxwaGE6IDMyLFxuICAgICAgICBpc0FBOiBmYWxzZSxcbiAgICAgICAgaXNBaXJicnVzaDogdHJ1ZSxcbiAgICAgICAgbWluU3BhY2luZzogMC41LFxuICAgICAgICBzcGFjaW5nOiAwLjA1LFxuICAgICAgICBwcmVzc3VyZVNpemU6IGZhbHNlLFxuICAgICAgICBwcmVzc3VyZUFscGhhOiB0cnVlLFxuICAgICAgICB0eXBlOiBDUEJydXNoSW5mby5CX1JPVU5EX0FJUkJSVVNILFxuICAgICAgICBwYWludE1vZGU6IENQQnJ1c2hJbmZvLk1fQlVSTlxuICAgIH0pO1xuXG4gICAgdG9vbHNbQ2hpY2tlblBhaW50LlRfV0FURVJdID0gbmV3IENQQnJ1c2hJbmZvKHtcbiAgICAgICAgdG9vbE5iOiBDaGlja2VuUGFpbnQuVF9XQVRFUixcbiAgICAgICAgc2l6ZTogMzAsXG4gICAgICAgIGFscGhhOiA3MCxcbiAgICAgICAgaXNBQTogZmFsc2UsXG4gICAgICAgIGlzQWlyYnJ1c2g6IHRydWUsXG4gICAgICAgIG1pblNwYWNpbmc6IDAuNSxcbiAgICAgICAgc3BhY2luZzogMC4wMixcbiAgICAgICAgcHJlc3N1cmVTaXplOiBmYWxzZSxcbiAgICAgICAgcHJlc3N1cmVBbHBoYTogdHJ1ZSxcbiAgICAgICAgdHlwZTogQ1BCcnVzaEluZm8uQl9ST1VORF9BQSxcbiAgICAgICAgcGFpbnRNb2RlOiBDUEJydXNoSW5mby5NX1dBVEVSLFxuICAgICAgICByZXNhdDogMC4zLFxuICAgICAgICBibGVlZDogMC42XG4gICAgfSk7XG5cbiAgICB0b29sc1tDaGlja2VuUGFpbnQuVF9CTFVSXSA9IG5ldyBDUEJydXNoSW5mbyh7XG4gICAgICAgIHRvb2xOYjogQ2hpY2tlblBhaW50LlRfQkxVUixcbiAgICAgICAgc2l6ZTogMjAsXG4gICAgICAgIGFscGhhOiAyNTUsXG4gICAgICAgIGlzQUE6IGZhbHNlLFxuICAgICAgICBpc0FpcmJydXNoOiB0cnVlLFxuICAgICAgICBtaW5TcGFjaW5nOiAwLjUsXG4gICAgICAgIHNwYWNpbmc6IDAuMDUsXG4gICAgICAgIHByZXNzdXJlU2l6ZTogZmFsc2UsXG4gICAgICAgIHByZXNzdXJlQWxwaGE6IHRydWUsXG4gICAgICAgIHR5cGU6IENQQnJ1c2hJbmZvLkJfUk9VTkRfUElYRUwsXG4gICAgICAgIHBhaW50TW9kZTogQ1BCcnVzaEluZm8uTV9CTFVSXG4gICAgfSk7XG5cbiAgICB0b29sc1tDaGlja2VuUGFpbnQuVF9TTVVER0VdID0gbmV3IENQQnJ1c2hJbmZvKHtcbiAgICAgICAgdG9vbE5iOiBDaGlja2VuUGFpbnQuVF9TTVVER0UsXG4gICAgICAgIHNpemU6IDIwLFxuICAgICAgICBhbHBoYTogMTI4LFxuICAgICAgICBpc0FBOiBmYWxzZSxcbiAgICAgICAgaXNBaXJicnVzaDogdHJ1ZSxcbiAgICAgICAgbWluU3BhY2luZzogMC41LFxuICAgICAgICBzcGFjaW5nOiAwLjAxLFxuICAgICAgICBwcmVzc3VyZVNpemU6IGZhbHNlLFxuICAgICAgICBwcmVzc3VyZUFscGhhOiB0cnVlLFxuICAgICAgICB0eXBlOiBDUEJydXNoSW5mby5CX1JPVU5EX0FJUkJSVVNILFxuICAgICAgICBwYWludE1vZGU6IENQQnJ1c2hJbmZvLk1fU01VREdFLFxuICAgICAgICByZXNhdDogMC4wLFxuICAgICAgICBibGVlZDogMS4wXG4gICAgfSk7XG5cbiAgICB0b29sc1tDaGlja2VuUGFpbnQuVF9CTEVOREVSXSA9IG5ldyBDUEJydXNoSW5mbyh7XG4gICAgICAgIHRvb2xOYjogQ2hpY2tlblBhaW50LlRfQkxFTkRFUixcbiAgICAgICAgc2l6ZTogMjAsXG4gICAgICAgIGFscGhhOiA2MCxcbiAgICAgICAgaXNBQTogZmFsc2UsXG4gICAgICAgIGlzQWlyYnJ1c2g6IHRydWUsXG4gICAgICAgIG1pblNwYWNpbmc6IDAuNSxcbiAgICAgICAgc3BhY2luZzogMC4xLFxuICAgICAgICBwcmVzc3VyZVNpemU6IGZhbHNlLFxuICAgICAgICBwcmVzc3VyZUFscGhhOiB0cnVlLFxuICAgICAgICB0eXBlOiBDUEJydXNoSW5mby5CX1JPVU5EX0FJUkJSVVNILFxuICAgICAgICBwYWludE1vZGU6IENQQnJ1c2hJbmZvLk1fT0lMLFxuICAgICAgICByZXNhdDogMC4wLFxuICAgICAgICBibGVlZDogMC4wN1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIHRvb2xzO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYW4gaW5zdGFuY2Ugb2YgdGhlIENoaWNrZW5QYWludCBkcmF3aW5nIGFwcC4gT3B0aW9ucyBpcyBhbiBvYmplY3Qgd2l0aCB0aGVzZSBrZXlzOlxuICpcbiAqIHVpRWxlbSAgICAgICAtIERPTSBlbGVtZW50IHRvIGluc2VydCBDaGlja2VuUGFpbnQgaW50byAocmVxdWlyZWQpXG4gKiBjYW52YXNXaWR0aCAgLSBXaWR0aCBpbiBwaXhlbHMgdG8gdXNlIHdoZW4gY3JlYXRpbmcgYmxhbmsgY2FudmFzZXMgKGRlZmF1bHRzIHRvIDgwMClcbiAqIGNhbnZhc0hlaWdodCAtIEhlaWdodCBpbiBwaXhlbHMgdG8gdXNlIHdoZW4gY3JlYXRpbmcgYmxhbmsgY2FudmFzZXMgKGRlZmF1bHRzIHRvIDYwMClcbiAqIHJvdGF0aW9uICAgICAtIEludGVnZXIgZnJvbSBbMC4uM10sIG51bWJlciBvZiA5MCBkZWdyZWUgcmlnaHQgcm90YXRpb25zIHRoYXQgc2hvdWxkIGJlIGFwcGxpZWQgdG8gdGhlIGNhbnZhcyBhZnRlclxuICogICAgICAgICAgICAgICAgbG9hZGluZ1xuICpcbiAqIHNhdmVVcmwgICAtIFVSTCB0byBQT1NUIHRoZSBkcmF3aW5nIHRvIHRvIHNhdmUgaXRcbiAqIHBvc3RVcmwgICAtIFVSTCB0byBuYXZpZ2F0ZSB0byBhZnRlciBzYXZpbmcgaXMgc3VjY2Vzc2Z1bCBhbmQgdGhlIHVzZXIgY2hvb3NlcyB0byBzZWUvcHVibGlzaCB0aGVpciBmaW5pc2hlZCBwcm9kdWN0XG4gKiBleGl0VXJsICAgLSBVUkwgdG8gbmF2aWdhdGUgdG8gYWZ0ZXIgc2F2aW5nIGlzIHN1Y2Nlc3NmdWwgYW5kIHRoZSB1c2VyIGNob29zZXMgdG8gZXhpdCAob3B0aW9uYWwpXG4gKiB0ZXN0VXJsICAgLSBVUkwgdGhhdCBDaGlja2VuUGFpbnQgY2FuIHNpbXVsYXRlIGEgZHJhd2luZyB1cGxvYWQgdG8gdG8gdGVzdCB0aGUgdXNlcidzIHBlcm1pc3Npb25zL2Nvbm5lY3Rpb24gKG9wdGlvbmFsKVxuICpcbiAqIGxvYWRJbWFnZVVybCAgICAgLSBVUkwgb2YgUE5HL0pQRUcgaW1hZ2UgdG8gbG9hZCBmb3IgZWRpdGluZyAob3B0aW9uYWwpXG4gKiBsb2FkQ2hpYmlGaWxlVXJsIC0gVVJMIG9mIC5jaGkgZmlsZSB0byBsb2FkIGZvciBlZGl0aW5nIChvcHRpb25hbCkuIFVzZWQgaW4gcHJlZmVyZW5jZSB0byBsb2FkSW1hZ2UuXG4gKiBsb2FkU3dhdGNoZXNVcmwgIC0gVVJMIG9mIGFuIC5hY28gcGFsZXR0ZSB0byBsb2FkIChvcHRpb25hbClcbiAqIFxuICogYWxsb3dEb3dubG9hZCAtIEFsbG93IHRoZSBkcmF3aW5nIHRvIGJlIHNhdmVkIHRvIHRoZSB1c2VyJ3MgY29tcHV0ZXJcbiAqIGFsbG93RnVsbFNjcmVlbiAtIEFsbG93IHRoZSBkcmF3aW5nIHRvb2wgdG8gZW50ZXIgXCJmdWxsIHNjcmVlblwiIG1vZGUsIHdoZXJlIHRoZSByZXN0IG9mIHRoZSBwYWdlIGNvbnRlbnRzIHdpbGwgYmUgaGlkZGVuXG4gKlxuICogZGlzYWJsZUJvb3RzdHJhcEFQSSAtIERpc2FibGUgQm9vdHN0cmFwJ3MgZGF0YSBBUEkgb24gdGhlIHJvb3Qgb2YgdGhlIGRvY3VtZW50LiBUaGlzIHNwZWVkcyB1cCB0aGluZ3MgY29uc2lkZXJhYmx5LlxuICogXG4gKiByZXNvdXJjZXNSb290IC0gVVJMIHRvIHRoZSBkaXJlY3RvcnkgdGhhdCBjb250YWlucyB0aGUgZ2Z4L2NzcyBldGMgZGlyZWN0b3JpZXMgKHJlbGF0aXZlIHRvIHRoZSBwYWdlIHRoYXQgXG4gKiAgICAgICAgICAgICAgICAgQ2hpY2tlblBhaW50IGlzIGxvYWRlZCBvbilcbiAqXG4gKiBAdGhyb3dzIENoaWNrZW5QYWludC5VbnN1cHBvcnRlZEJyb3dzZXJFeGNlcHRpb24gaWYgdGhlIHdlYiBicm93c2VyIGRvZXMgbm90IHN1cHBvcnQgQ2hpY2tlblBhaW50XG4gKi9cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIENoaWNrZW5QYWludChvcHRpb25zKSB7XG4gICAgdmFyXG4gICAgICAgIHRoYXQgPSB0aGlzLFxuXG4gICAgICAgIHVpRWxlbSA9IG9wdGlvbnMudWlFbGVtLFxuXG4gICAgICAgIGNhbnZhcyxcbiAgICAgICAgbWFpbkdVSSxcblxuICAgICAgICBjdXJDb2xvciA9IG5ldyBDUENvbG9yKDApLFxuICAgICAgICBjdXJCcnVzaCA9IENoaWNrZW5QYWludC5UX1BFTkNJTCxcbiAgICAgICAgY3VyTW9kZSA9IENoaWNrZW5QYWludC5NX0RSQVcsXG4gICAgICAgIHByZVRyYW5zZm9ybU1vZGUgPSBjdXJNb2RlLFxuICAgICAgICBjdXJHcmFkaWVudCA9IFsweEZGMDAwMDAwLCAweEZGRkZGRkZGXSxcblxuICAgICAgICBmdWxsU2NyZWVuTW9kZSA9IGZhbHNlLFxuXG4gICAgICAgIHRvb2xzID0gY3JlYXRlRHJhd2luZ1Rvb2xzKCksXG5cbiAgICAgICAgYm94Qmx1ckRpYWxvZywgZ3JpZERpYWxvZyxcblxuICAgICAgICBhY3Rpb25zID0ge1xuICAgICAgICAgICAgLy8gR1VJIGFjdGlvbnNcblxuICAgICAgICAgICAgQ1BGdWxsU2NyZWVuOiB7XG4gICAgICAgICAgICAgICAgYWN0aW9uOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIGZ1bGxTY3JlZW5Nb2RlID0gIWZ1bGxTY3JlZW5Nb2RlO1xuXG4gICAgICAgICAgICAgICAgICAgICQoXCJib2R5XCIpLnRvZ2dsZUNsYXNzKFwiY2hpY2tlbnBhaW50LWZ1bGwtc2NyZWVuXCIsIGZ1bGxTY3JlZW5Nb2RlKTtcbiAgICAgICAgICAgICAgICAgICAgJCh1aUVsZW0pLnRvZ2dsZUNsYXNzKFwiY2hpY2tlbnBhaW50LWZ1bGwtc2NyZWVuXCIsIGZ1bGxTY3JlZW5Nb2RlKTtcblxuICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1haW5HVUkuc2V0RnVsbFNjcmVlbk1vZGUoZnVsbFNjcmVlbk1vZGUpO1xuICAgICAgICAgICAgICAgICAgICB9LCAyMDApO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgaXNTdXBwb3J0ZWQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gb3B0aW9ucy5hbGxvd0Z1bGxTY3JlZW4gIT09IGZhbHNlO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgbW9kaWZpZXM6IHtndWk6IHRydWV9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgQ1Bab29tSW46IHtcbiAgICAgICAgICAgICAgICBhY3Rpb246IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FudmFzLnpvb21JbigpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgbW9kaWZpZXM6IHtndWk6IHRydWV9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgQ1Bab29tT3V0OiB7XG4gICAgICAgICAgICAgICAgYWN0aW9uOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhbnZhcy56b29tT3V0KCk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBtb2RpZmllczoge2d1aTogdHJ1ZX1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBDUFpvb20xMDA6IHtcbiAgICAgICAgICAgICAgICBhY3Rpb246IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FudmFzLnpvb20xMDAoKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIG1vZGlmaWVzOiB7Z3VpOiB0cnVlfVxuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgLy8gSGlzdG9yeSBhY3Rpb25zXG5cbiAgICAgICAgICAgIENQVW5kbzoge1xuICAgICAgICAgICAgICAgIGFjdGlvbjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICB0aGF0LmFydHdvcmsudW5kbygpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgbW9kaWZpZXM6IHtkb2N1bWVudDogdHJ1ZX1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBDUFJlZG86IHtcbiAgICAgICAgICAgICAgICBhY3Rpb246IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhhdC5hcnR3b3JrLnJlZG8oKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIG1vZGlmaWVzOiB7ZG9jdW1lbnQ6IHRydWV9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgQ1BDbGVhckhpc3Rvcnk6IHtcbiAgICAgICAgICAgICAgICBhY3Rpb246IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbmZpcm0oXCJZb3UncmUgYWJvdXQgdG8gY2xlYXIgdGhlIGN1cnJlbnQgVW5kby9SZWRvIGhpc3RvcnkuXFxuVGhpcyBvcGVyYXRpb24gY2Fubm90IGJlIHVuZG9uZSwgYXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIGRvIHRoYXQ/XCIpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGF0LmFydHdvcmsuY2xlYXJIaXN0b3J5KCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIG1vZGlmaWVzOiB7ZG9jdW1lbnQ6IHRydWV9XG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAvLyBEcmF3aW5nIHRvb2xzXG5cbiAgICAgICAgICAgIENQUGVuY2lsOiAgICAgbmV3IFRvb2xDaGFuZ2VBY3Rpb24oQ2hpY2tlblBhaW50LlRfUEVOQ0lMKSxcbiAgICAgICAgICAgIENQUGVuOiAgICAgICAgbmV3IFRvb2xDaGFuZ2VBY3Rpb24oQ2hpY2tlblBhaW50LlRfUEVOKSxcbiAgICAgICAgICAgIENQRXJhc2VyOiAgICAgbmV3IFRvb2xDaGFuZ2VBY3Rpb24oQ2hpY2tlblBhaW50LlRfRVJBU0VSKSxcbiAgICAgICAgICAgIENQU29mdEVyYXNlcjogbmV3IFRvb2xDaGFuZ2VBY3Rpb24oQ2hpY2tlblBhaW50LlRfU09GVEVSQVNFUiksXG4gICAgICAgICAgICBDUEFpcmJydXNoICA6IG5ldyBUb29sQ2hhbmdlQWN0aW9uKENoaWNrZW5QYWludC5UX0FJUkJSVVNIKSxcbiAgICAgICAgICAgIENQRG9kZ2U6ICAgICAgbmV3IFRvb2xDaGFuZ2VBY3Rpb24oQ2hpY2tlblBhaW50LlRfRE9ER0UpLFxuICAgICAgICAgICAgQ1BCdXJuOiAgICAgICBuZXcgVG9vbENoYW5nZUFjdGlvbihDaGlja2VuUGFpbnQuVF9CVVJOKSxcbiAgICAgICAgICAgIENQV2F0ZXI6ICAgICAgbmV3IFRvb2xDaGFuZ2VBY3Rpb24oQ2hpY2tlblBhaW50LlRfV0FURVIpLFxuICAgICAgICAgICAgQ1BCbHVyOiAgICAgICBuZXcgVG9vbENoYW5nZUFjdGlvbihDaGlja2VuUGFpbnQuVF9CTFVSKSxcbiAgICAgICAgICAgIENQU211ZGdlOiAgICAgbmV3IFRvb2xDaGFuZ2VBY3Rpb24oQ2hpY2tlblBhaW50LlRfU01VREdFKSxcbiAgICAgICAgICAgIENQQmxlbmRlcjogICAgbmV3IFRvb2xDaGFuZ2VBY3Rpb24oQ2hpY2tlblBhaW50LlRfQkxFTkRFUiksXG5cbiAgICAgICAgICAgIC8vIE1vZGVzXG5cbiAgICAgICAgICAgIENQRmxvb2RGaWxsOiAgICAgbmV3IE1vZGVDaGFuZ2VBY3Rpb24oQ2hpY2tlblBhaW50Lk1fRkxPT0RGSUxMKSxcbiAgICAgICAgICAgIENQR3JhZGllbnRGaWxsOiAgbmV3IE1vZGVDaGFuZ2VBY3Rpb24oQ2hpY2tlblBhaW50Lk1fR1JBRElFTlRGSUxMKSxcbiAgICAgICAgICAgIENQUmVjdFNlbGVjdGlvbjogbmV3IE1vZGVDaGFuZ2VBY3Rpb24oQ2hpY2tlblBhaW50Lk1fUkVDVF9TRUxFQ1RJT04pLFxuICAgICAgICAgICAgQ1BNb3ZlVG9vbDogICAgICBuZXcgTW9kZUNoYW5nZUFjdGlvbihDaGlja2VuUGFpbnQuTV9NT1ZFX1RPT0wpLFxuICAgICAgICAgICAgQ1BSb3RhdGVDYW52YXM6ICBuZXcgTW9kZUNoYW5nZUFjdGlvbihDaGlja2VuUGFpbnQuTV9ST1RBVEVfQ0FOVkFTKSxcbiAgICAgICAgICAgIENQQ29sb3JQaWNrZXI6ICAgbmV3IE1vZGVDaGFuZ2VBY3Rpb24oQ2hpY2tlblBhaW50Lk1fQ09MT1JfUElDS0VSKSxcblxuICAgICAgICAgICAgLy8gTGF5ZXIgdHJhbnNmb3JtXG5cbiAgICAgICAgICAgIENQVHJhbnNmb3JtOiB7XG4gICAgICAgICAgICAgICAgYWN0aW9uOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgICAgICAgICAgbGF5ZXIgPSB0aGF0LmFydHdvcmsuZ2V0QWN0aXZlTGF5ZXIoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGxheWVySW5kZXggPSB0aGF0LmFydHdvcmsuZ2V0QWN0aXZlTGF5ZXJJbmRleCgpO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFsYXllci52aXNpYmxlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGF0LnNob3dMYXllck5vdGlmaWNhdGlvbihsYXllckluZGV4LCBcIldob29wcyEgVGhpcyBsYXllciBpcyBjdXJyZW50bHkgaGlkZGVuXCIsIFwibGF5ZXJcIik7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobGF5ZXIuYWxwaGEgPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC5zaG93TGF5ZXJOb3RpZmljYXRpb24obGF5ZXJJbmRleCwgXCJXaG9vcHMhIFRoaXMgbGF5ZXIncyBvcGFjaXR5IGlzIGN1cnJlbnRseSAwJVwiLCBcIm9wYWNpdHlcIik7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhhdC5hcnR3b3JrLnRyYW5zZm9ybUFmZmluZUJlZ2luKCkgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC5zaG93TGF5ZXJOb3RpZmljYXRpb24obGF5ZXJJbmRleCwgXCJXaG9vcHMhIEFsbCBvZiB0aGUgc2VsZWN0ZWQgcGl4ZWxzIGFyZSB0cmFuc3BhcmVudCFcIiwgXCJsYXllclwiKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldE1vZGUoQ2hpY2tlblBhaW50Lk1fVFJBTlNGT1JNKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgbW9kaWZpZXM6IHttb2RlOiB0cnVlfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIENQVHJhbnNmb3JtQWNjZXB0OiB7XG4gICAgICAgICAgICAgICAgYWN0aW9uOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjdXJNb2RlID09IENoaWNrZW5QYWludC5NX1RSQU5TRk9STSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC5hcnR3b3JrLnRyYW5zZm9ybUFmZmluZUZpbmlzaCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0TW9kZShwcmVUcmFuc2Zvcm1Nb2RlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgbW9kaWZpZXM6IHttb2RlOiB0cnVlfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIENQVHJhbnNmb3JtUmVqZWN0OiB7XG4gICAgICAgICAgICAgICAgYWN0aW9uOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjdXJNb2RlID09IENoaWNrZW5QYWludC5NX1RSQU5TRk9STSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC5hcnR3b3JrLnRyYW5zZm9ybUFmZmluZUFib3J0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRNb2RlKHByZVRyYW5zZm9ybU1vZGUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBtb2RpZmllczoge2RvY3VtZW50OiB0cnVlLCBtb2RlOiB0cnVlfVxuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgLy8gU3Ryb2tlIG1vZGVzXG5cbiAgICAgICAgICAgIENQRnJlZUhhbmQ6IHtcbiAgICAgICAgICAgICAgICBhY3Rpb246IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgdG9vbHNbY3VyQnJ1c2hdLnN0cm9rZU1vZGUgPSBDUEJydXNoSW5mby5TTV9GUkVFSEFORDtcbiAgICAgICAgICAgICAgICAgICAgY2FsbFRvb2xMaXN0ZW5lcnMoKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIG1vZGlmaWVzOiB7dG9vbDogdHJ1ZX1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBDUExpbmU6IHtcbiAgICAgICAgICAgICAgICBhY3Rpb246IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgdG9vbHNbY3VyQnJ1c2hdLnN0cm9rZU1vZGUgPSBDUEJydXNoSW5mby5TTV9MSU5FO1xuICAgICAgICAgICAgICAgICAgICBjYWxsVG9vbExpc3RlbmVycygpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgbW9kaWZpZXM6IHt0b29sOiB0cnVlfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIENQQmV6aWVyOiB7XG4gICAgICAgICAgICAgICAgYWN0aW9uOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHRvb2xzW2N1ckJydXNoXS5zdHJva2VNb2RlID0gQ1BCcnVzaEluZm8uU01fQkVaSUVSO1xuICAgICAgICAgICAgICAgICAgICBjYWxsVG9vbExpc3RlbmVycygpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgbW9kaWZpZXM6IHt0b29sOiB0cnVlfVxuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgLy8gSGVscCBkaWFsb2dzXG5cbiAgICAgICAgICAgIENQQWJvdXQ6IHtcbiAgICAgICAgICAgICAgICBhY3Rpb246IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3IENQQWJvdXREaWFsb2codWlFbGVtKS5zaG93KCk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBtb2RpZmllczoge31cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBDUFNob3J0Y3V0czoge1xuICAgICAgICAgICAgICAgIGFjdGlvbjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBuZXcgQ1BTaG9ydGN1dHNEaWFsb2codWlFbGVtKS5zaG93KCk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBtb2RpZmllczoge31cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBDUFRhYmxldFN1cHBvcnQ6IHtcbiAgICAgICAgICAgICAgICBhY3Rpb246IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3IENQVGFibGV0RGlhbG9nKHVpRWxlbSkuc2hvdygpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgbW9kaWZpZXM6IHt9XG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAvLyBMYXllciBhY3Rpb25zXG5cbiAgICAgICAgICAgIENQTGF5ZXJEdXBsaWNhdGU6IHtcbiAgICAgICAgICAgICAgICBhY3Rpb246IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhhdC5hcnR3b3JrLmR1cGxpY2F0ZUxheWVyKCk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBtb2RpZmllczoge2RvY3VtZW50OiB0cnVlfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIENQTGF5ZXJNZXJnZURvd246IHtcbiAgICAgICAgICAgICAgICBhY3Rpb246IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhhdC5hcnR3b3JrLm1lcmdlRG93bih0cnVlKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIG1vZGlmaWVzOiB7ZG9jdW1lbnQ6IHRydWV9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgQ1BMYXllck1lcmdlQWxsOiB7XG4gICAgICAgICAgICAgICAgYWN0aW9uOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoYXQuYXJ0d29yay5tZXJnZUFsbExheWVycyh0cnVlKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIG1vZGlmaWVzOiB7ZG9jdW1lbnQ6IHRydWV9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgQ1BGaWxsOiB7XG4gICAgICAgICAgICAgICAgYWN0aW9uOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoYXQuYXJ0d29yay5maWxsKHRoYXQuZ2V0Q3VyQ29sb3JSZ2IoKSB8IDB4ZmYwMDAwMDApO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgbW9kaWZpZXM6IHtkb2N1bWVudDogdHJ1ZX1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBDUENsZWFyOiB7XG4gICAgICAgICAgICAgICAgYWN0aW9uOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoYXQuYXJ0d29yay5jbGVhcigpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgbW9kaWZpZXM6IHtkb2N1bWVudDogdHJ1ZX1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBDUFNlbGVjdEFsbDoge1xuICAgICAgICAgICAgICAgIGFjdGlvbjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICB0aGF0LmFydHdvcmsucmVjdGFuZ2xlU2VsZWN0aW9uKHRoYXQuYXJ0d29yay5nZXRCb3VuZHMoKSk7XG4gICAgICAgICAgICAgICAgICAgIGNhbnZhcy5yZXBhaW50QWxsKCk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBtb2RpZmllczoge2RvY3VtZW50OiB0cnVlfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIENQRGVzZWxlY3RBbGw6IHtcbiAgICAgICAgICAgICAgICBhY3Rpb246IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhhdC5hcnR3b3JrLnJlY3RhbmdsZVNlbGVjdGlvbihuZXcgQ1BSZWN0KDAsIDAsIDAsIDApKTtcbiAgICAgICAgICAgICAgICAgICAgY2FudmFzLnJlcGFpbnRBbGwoKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIG1vZGlmaWVzOiB7ZG9jdW1lbnQ6IHRydWV9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgQ1BIRmxpcDoge1xuICAgICAgICAgICAgICAgIGFjdGlvbjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICB0aGF0LmFydHdvcmsuaEZsaXAoKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIG1vZGlmaWVzOiB7ZG9jdW1lbnQ6IHRydWV9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgQ1BWRmxpcDoge1xuICAgICAgICAgICAgICAgIGFjdGlvbjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICB0aGF0LmFydHdvcmsudkZsaXAoKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIG1vZGlmaWVzOiB7ZG9jdW1lbnQ6IHRydWV9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgQ1BNTm9pc2U6IHtcbiAgICAgICAgICAgICAgICBhY3Rpb246IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhhdC5hcnR3b3JrLm1vbm9jaHJvbWF0aWNOb2lzZSgpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgbW9kaWZpZXM6IHtkb2N1bWVudDogdHJ1ZX1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBDUENOb2lzZToge1xuICAgICAgICAgICAgICAgIGFjdGlvbjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICB0aGF0LmFydHdvcmsuY29sb3JOb2lzZSgpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgbW9kaWZpZXM6IHtkb2N1bWVudDogdHJ1ZX1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBDUEZYQm94Qmx1cjoge1xuICAgICAgICAgICAgICAgIGFjdGlvbjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBzaG93Qm94Qmx1ckRpYWxvZygpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgbW9kaWZpZXM6IHtkb2N1bWVudDogdHJ1ZX1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBDUEZYSW52ZXJ0OiB7XG4gICAgICAgICAgICAgICAgYWN0aW9uOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoYXQuYXJ0d29yay5pbnZlcnQoKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIG1vZGlmaWVzOiB7ZG9jdW1lbnQ6IHRydWV9XG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICBDUEN1dDoge1xuICAgICAgICAgICAgICAgIGFjdGlvbjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICB0aGF0LmFydHdvcmsuY3V0U2VsZWN0aW9uKHRydWUpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgbW9kaWZpZXM6IHtkb2N1bWVudDogdHJ1ZX1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBDUENvcHk6IHtcbiAgICAgICAgICAgICAgICBhY3Rpb246IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhhdC5hcnR3b3JrLmNvcHlTZWxlY3Rpb24oKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIG1vZGlmaWVzOiB7ZG9jdW1lbnQ6IHRydWV9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgQ1BDb3B5TWVyZ2VkOiB7XG4gICAgICAgICAgICAgICAgYWN0aW9uOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoYXQuYXJ0d29yay5jb3B5U2VsZWN0aW9uTWVyZ2VkKCk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBtb2RpZmllczoge2RvY3VtZW50OiB0cnVlfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIENQUGFzdGU6IHtcbiAgICAgICAgICAgICAgICBhY3Rpb246IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhhdC5hcnR3b3JrLnBhc3RlQ2xpcGJvYXJkKHRydWUpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgbW9kaWZpZXM6IHtkb2N1bWVudDogdHJ1ZX1cbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIENQVG9nZ2xlR3JpZDoge1xuICAgICAgICAgICAgICAgIGFjdGlvbjogZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgICAgICAgICBjYW52YXMuc2hvd0dyaWQoZS5zZWxlY3RlZCk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBtb2RpZmllczoge2d1aTogdHJ1ZX1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBDUEdyaWRPcHRpb25zOiB7XG4gICAgICAgICAgICAgICAgYWN0aW9uOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHNob3dHcmlkT3B0aW9uc0RpYWxvZygpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgbW9kaWZpZXM6IHtndWk6IHRydWV9XG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICBDUExpbmVhckludGVycG9sYXRpb246IHtcbiAgICAgICAgICAgICAgICBhY3Rpb246IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FudmFzLnNldEludGVycG9sYXRpb24oZS5zZWxlY3RlZCk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBtb2RpZmllczoge2d1aTogdHJ1ZX0sXG4gICAgICAgICAgICAgICAgaXNTdXBwb3J0ZWQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXNDYW52YXNJbnRlcnBvbGF0aW9uU3VwcG9ydGVkKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIENQUmVzZXRDYW52YXNSb3RhdGlvbjoge1xuICAgICAgICAgICAgICAgIGFjdGlvbjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBjYW52YXMucmVzZXRSb3RhdGlvbigpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgbW9kaWZpZXM6IHtndWk6IHRydWV9XG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAvLyBMYXllciBwYWxldHRlXG5cbiAgICAgICAgICAgIENQQWRkTGF5ZXI6IHtcbiAgICAgICAgICAgICAgICBhY3Rpb246IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICB0aGF0LmFydHdvcmsuYWRkTGF5ZXIoKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIG1vZGlmaWVzOiB7ZG9jdW1lbnQ6IHRydWV9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgQ1BSZW1vdmVMYXllcjoge1xuICAgICAgICAgICAgICAgIGFjdGlvbjogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghdGhhdC5hcnR3b3JrLnJlbW92ZUxheWVyKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0KFwiU29ycnksIHlvdSBjYW4ndCByZW1vdmUgdGhlIGxhc3QgcmVtYWluaW5nIGxheWVyIGluIHRoZSBkcmF3aW5nLlwiKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgbW9kaWZpZXM6IHtkb2N1bWVudDogdHJ1ZX1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBDUE1vdmVMYXllcjoge1xuICAgICAgICAgICAgICAgIGFjdGlvbjogZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgICAgICAgICB0aGF0LmFydHdvcmsubW92ZUxheWVyKGUuZnJvbUluZGV4LCBlLnRvSW5kZXgpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgbW9kaWZpZXM6IHtkb2N1bWVudDogdHJ1ZX1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBDUFNldEFjdGl2ZUxheWVySW5kZXg6IHtcbiAgICAgICAgICAgICAgICBhY3Rpb246IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhhdC5hcnR3b3JrLnNldEFjdGl2ZUxheWVySW5kZXgoZS5sYXllckluZGV4KTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBTaW5jZSB0aGlzIGlzIGEgc2xvdyBHVUkgb3BlcmF0aW9uLCB0aGlzIGlzIGEgZ29vZCBjaGFuY2UgdG8gZ2V0IHRoZSBjYW52YXMgcmVhZHkgZm9yIGRyYXdpbmdcbiAgICAgICAgICAgICAgICAgICAgdGhhdC5hcnR3b3JrLnBlcmZvcm1JZGxlVGFza3MoKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIG1vZGlmaWVzOiB7ZG9jdW1lbnQ6IHRydWV9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgQ1BTZXRMYXllclZpc2liaWxpdHk6IHtcbiAgICAgICAgICAgICAgICBhY3Rpb246IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhhdC5hcnR3b3JrLnNldExheWVyVmlzaWJpbGl0eShlLmxheWVySW5kZXgsIGUudmlzaWJsZSk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBtb2RpZmllczoge2xheWVyUHJvcDogdHJ1ZX1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBDUFNldExheWVyTmFtZToge1xuICAgICAgICAgICAgICAgIGFjdGlvbjogZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgICAgICAgICB0aGF0LmFydHdvcmsuc2V0TGF5ZXJOYW1lKGUubGF5ZXJJbmRleCwgZS5uYW1lKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIG1vZGlmaWVzOiB7bGF5ZXJQcm9wOiB0cnVlfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIENQU2V0TGF5ZXJCbGVuZE1vZGU6IHtcbiAgICAgICAgICAgICAgICBhY3Rpb246IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhhdC5hcnR3b3JrLnNldExheWVyQmxlbmRNb2RlKGUubGF5ZXJJbmRleCwgZS5ibGVuZE1vZGUpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgbW9kaWZpZXM6IHtsYXllclByb3A6IHRydWV9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgQ1BTZXRMYXllckFscGhhOiB7XG4gICAgICAgICAgICAgICAgYWN0aW9uOiBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoYXQuYXJ0d29yay5zZXRMYXllckFscGhhKGUubGF5ZXJJbmRleCwgZS5hbHBoYSk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBtb2RpZmllczoge2xheWVyUHJvcDogdHJ1ZX1cbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIC8vIFBhbGV0dGVzXG5cbiAgICAgICAgICAgIENQUGFsQ29sb3I6IG5ldyBQYWxldHRlVG9nZ2xlQWN0aW9uKFwiY29sb3JcIiksXG4gICAgICAgICAgICBDUFBhbEJydXNoOiBuZXcgUGFsZXR0ZVRvZ2dsZUFjdGlvbihcImJydXNoXCIpLFxuICAgICAgICAgICAgQ1BQYWxMYXllcnM6IG5ldyBQYWxldHRlVG9nZ2xlQWN0aW9uKFwibGF5ZXJzXCIpLFxuICAgICAgICAgICAgQ1BQYWxTdHJva2U6IG5ldyBQYWxldHRlVG9nZ2xlQWN0aW9uKFwic3Ryb2tlXCIpLFxuICAgICAgICAgICAgQ1BQYWxTd2F0Y2hlczogbmV3IFBhbGV0dGVUb2dnbGVBY3Rpb24oXCJzd2F0Y2hlc1wiKSxcbiAgICAgICAgICAgIENQUGFsVG9vbDogbmV3IFBhbGV0dGVUb2dnbGVBY3Rpb24oXCJ0b29sXCIpLFxuICAgICAgICAgICAgQ1BQYWxNaXNjOiBuZXcgUGFsZXR0ZVRvZ2dsZUFjdGlvbihcIm1pc2NcIiksXG4gICAgICAgICAgICBDUFBhbFRleHR1cmVzOiBuZXcgUGFsZXR0ZVRvZ2dsZUFjdGlvbihcInRleHR1cmVzXCIpLFxuXG4gICAgICAgICAgICBDUFRvZ2dsZVBhbGV0dGVzOiB7XG4gICAgICAgICAgICAgICAgYWN0aW9uOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIG1haW5HVUkudG9nZ2xlUGFsZXR0ZXMoKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIG1vZGlmaWVzOiB7Z3VpOiB0cnVlfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIENQQXJyYW5nZVBhbGV0dGVzOiB7XG4gICAgICAgICAgICAgICAgYWN0aW9uOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIG1haW5HVUkuYXJyYW5nZVBhbGV0dGVzKCk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBtb2RpZmllczoge2d1aTogdHJ1ZX1cbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIC8vIFNhdmluZ1xuXG4gICAgICAgICAgICBDUFNhdmU6IHtcbiAgICAgICAgICAgICAgICBhY3Rpb246IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgc2F2ZURyYXdpbmcoKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGlzU3VwcG9ydGVkOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9wdGlvbnMuYWxsb3dEb3dubG9hZCAhPT0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBtb2RpZmllczoge2RvY3VtZW50OiB0cnVlfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIENQU2VuZDoge1xuICAgICAgICAgICAgICAgIGFjdGlvbjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBzZW5kRHJhd2luZygpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgaXNTdXBwb3J0ZWQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gISFvcHRpb25zLnNhdmVVcmw7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBtb2RpZmllczoge2RvY3VtZW50OiB0cnVlfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIENQUG9zdDoge1xuICAgICAgICAgICAgICAgIGFjdGlvbjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24gPSBvcHRpb25zLnBvc3RVcmw7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBpc1N1cHBvcnRlZDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAhIW9wdGlvbnMucG9zdFVybDtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIG1vZGlmaWVzOiB7ZG9jdW1lbnQ6IHRydWV9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgQ1BFeGl0OiB7XG4gICAgICAgICAgICAgICAgYWN0aW9uOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIEV4aXQgdGhlIGRyYXdpbmcgc2Vzc2lvbiB3aXRob3V0IHBvc3RpbmcgdGhlIGRyYXdpbmcgdG8gdGhlIGZvcnVtXG4gICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbiA9IG9wdGlvbnMuZXhpdFVybDtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGlzU3VwcG9ydGVkOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICEhb3B0aW9ucy5leGl0VXJsO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgbW9kaWZpZXM6IHt9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICBmdW5jdGlvbiBQYWxldHRlVG9nZ2xlQWN0aW9uKHBhbE5hbWUpIHtcbiAgICAgICAgdGhpcy5wYWxOYW1lID0gcGFsTmFtZTtcbiAgICB9XG5cbiAgICBQYWxldHRlVG9nZ2xlQWN0aW9uLnByb3RvdHlwZS5hY3Rpb24gPSBmdW5jdGlvbihlKSB7XG4gICAgICAgIG1haW5HVUkuc2hvd1BhbGV0dGUodGhpcy5wYWxOYW1lLCBlLnNlbGVjdGVkKTtcbiAgICB9O1xuICAgIFBhbGV0dGVUb2dnbGVBY3Rpb24ucHJvdG90eXBlLm1vZGlmaWVzID0ge2d1aTogdHJ1ZX07XG5cbiAgICBmdW5jdGlvbiBUb29sQ2hhbmdlQWN0aW9uKHRvb2xOdW0pIHtcbiAgICAgICAgdGhpcy50b29sTnVtID0gdG9vbE51bTtcbiAgICB9XG5cbiAgICBUb29sQ2hhbmdlQWN0aW9uLnByb3RvdHlwZS5hY3Rpb24gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgc2V0VG9vbCh0aGlzLnRvb2xOdW0pO1xuICAgIH07XG5cbiAgICBUb29sQ2hhbmdlQWN0aW9uLnByb3RvdHlwZS5tb2RpZmllcyA9IHttb2RlOiB0cnVlLCB0b29sOiB0cnVlfTtcblxuICAgIGZ1bmN0aW9uIE1vZGVDaGFuZ2VBY3Rpb24obW9kZU51bSkge1xuICAgICAgICB0aGlzLm1vZGVOdW0gPSBtb2RlTnVtO1xuICAgIH1cblxuICAgIE1vZGVDaGFuZ2VBY3Rpb24ucHJvdG90eXBlLmFjdGlvbiA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBzZXRNb2RlKHRoaXMubW9kZU51bSk7XG4gICAgfTtcbiAgICBNb2RlQ2hhbmdlQWN0aW9uLnByb3RvdHlwZS5tb2RpZmllcyA9IHttb2RlOiB0cnVlfTtcblxuICAgIGZ1bmN0aW9uIHNob3dCb3hCbHVyRGlhbG9nKCkge1xuICAgICAgICBpZiAoIWJveEJsdXJEaWFsb2cpIHtcbiAgICAgICAgICAgIGJveEJsdXJEaWFsb2cgPSBuZXcgQ1BCb3hCbHVyRGlhbG9nKHVpRWxlbSwgdGhhdCk7XG4gICAgICAgIH1cblxuICAgICAgICBib3hCbHVyRGlhbG9nLnNob3coKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzaG93R3JpZE9wdGlvbnNEaWFsb2coKSB7XG4gICAgICAgIGlmICghZ3JpZERpYWxvZykge1xuICAgICAgICAgICAgZ3JpZERpYWxvZyA9IG5ldyBDUEdyaWREaWFsb2codWlFbGVtLCBjYW52YXMpO1xuICAgICAgICB9XG5cbiAgICAgICAgZ3JpZERpYWxvZy5zaG93KCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY2FsbFRvb2xMaXN0ZW5lcnMoKSB7XG4gICAgICAgIHRoYXQuZW1pdEV2ZW50KCd0b29sQ2hhbmdlJywgW2N1ckJydXNoLCB0b29sc1tjdXJCcnVzaF1dKTtcbiAgICB9XG5cbiAgICAvLyBUT0RPIG1ha2UgbWUgcHJpdmF0ZVxuICAgIHRoaXMuY2FsbFRvb2xMaXN0ZW5lcnMgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgY2FsbFRvb2xMaXN0ZW5lcnMoKTtcbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gY2FsbE1vZGVMaXN0ZW5lcnMoKSB7XG4gICAgICAgIHRoYXQuZW1pdEV2ZW50KCdtb2RlQ2hhbmdlJywgW2N1ck1vZGVdKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjYWxsVmlld0xpc3RlbmVycyh2aWV3SW5mbykge1xuICAgICAgICB0aGF0LmVtaXRFdmVudCgndmlld0NoYW5nZScsIFt2aWV3SW5mb10pO1xuICAgIH1cbiAgICBcbiAgICB0aGlzLmdldE1haW5HVUkgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIG1haW5HVUk7XG4gICAgfTtcblxuICAgIHRoaXMuZ2V0QXJ0d29yayA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5hcnR3b3JrO1xuICAgIH07XG5cbiAgICB0aGlzLnNldENhbnZhcyA9IGZ1bmN0aW9uKF9jYW52YXMpIHtcbiAgICAgICAgY2FudmFzID0gX2NhbnZhcztcbiAgICB9O1xuXHRcblx0LyoqXG4gICAgICogQ2hhbmdlIHRoZSBpbnRlcnBvbGF0aW9uIG1vZGUgdXNlZCBieSBGcmVlIFRyYW5zZm9ybSBvcGVyYXRpb25zXG4gICAgICogXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGludGVycG9sYXRpb24gLSBFaXRoZXIgXCJzaGFycFwiIG9yIFwic21vb3RoXCJcbiAgICAgKi9cbiAgICB0aGlzLnNldFRyYW5zZm9ybUludGVycG9sYXRpb24gPSBmdW5jdGlvbihpbnRlcnBvbGF0aW9uKSB7XG4gICAgICAgIHRoaXMuYXJ0d29yay5zZXRUcmFuc2Zvcm1JbnRlcnBvbGF0aW9uKGludGVycG9sYXRpb24pO1xuICAgIH07XG4gICAgXG4gICAgdGhpcy5zZXRDdXJDb2xvciA9IGZ1bmN0aW9uKGNvbG9yKSB7XG4gICAgICAgIGlmICghY3VyQ29sb3IuaXNFcXVhbChjb2xvcikpIHtcbiAgICAgICAgICAgIHRoaXMuYXJ0d29yay5zZXRGb3JlZ3JvdW5kQ29sb3IoY29sb3IuZ2V0UmdiKCkpO1xuXG4gICAgICAgICAgICBjdXJDb2xvci5jb3B5RnJvbShjb2xvcik7XG5cbiAgICAgICAgICAgIHRoaXMuZW1pdEV2ZW50KCdjb2xvckNoYW5nZScsIFtjb2xvcl0pO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIHRoaXMuZ2V0Q3VyQ29sb3IgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIGN1ckNvbG9yLmNsb25lKCk7XG4gICAgfTtcblxuICAgIHRoaXMuZ2V0Q3VyQ29sb3JSZ2IgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIGN1ckNvbG9yLmdldFJnYigpO1xuICAgIH07XG5cbiAgICB0aGlzLnNldEN1ckNvbG9yUmdiID0gZnVuY3Rpb24oY29sb3IpIHtcbiAgICAgICAgdGhpcy5zZXRDdXJDb2xvcihuZXcgQ1BDb2xvcihjb2xvcikpO1xuICAgIH07XG5cbiAgICB0aGlzLnNldEN1ckdyYWRpZW50ID0gZnVuY3Rpb24oZ3JhZGllbnQpIHtcbiAgICAgICAgY3VyR3JhZGllbnQgPSBncmFkaWVudC5zbGljZSgwKTsgLy8gQ2xvbmVcblxuICAgICAgICB0aGlzLmVtaXRFdmVudCgnZ3JhZGllbnRDaGFuZ2UnLCBbY3VyR3JhZGllbnRdKTtcbiAgICB9O1xuXG4gICAgdGhpcy5nZXRDdXJHcmFkaWVudCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gY3VyR3JhZGllbnQuc2xpY2UoMCk7IC8vIENsb25lXG4gICAgfTtcblxuICAgIHRoaXMuc2V0QnJ1c2hTaXplID0gZnVuY3Rpb24oc2l6ZSkge1xuICAgICAgICB0b29sc1tjdXJCcnVzaF0uc2l6ZSA9IE1hdGgubWF4KDEsIE1hdGgubWluKDIwMCwgc2l6ZSkpO1xuICAgICAgICBjYWxsVG9vbExpc3RlbmVycygpO1xuICAgIH07XG5cbiAgICB0aGlzLmdldEJydXNoU2l6ZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdG9vbHNbY3VyQnJ1c2hdLnNpemU7XG4gICAgfTtcblxuICAgIHRoaXMuc2V0QWxwaGEgPSBmdW5jdGlvbihhbHBoYSkge1xuICAgICAgICB0b29sc1tjdXJCcnVzaF0uYWxwaGEgPSBhbHBoYTtcbiAgICAgICAgY2FsbFRvb2xMaXN0ZW5lcnMoKTtcbiAgICB9O1xuXG4gICAgdGhpcy5nZXRBbHBoYSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdG9vbHNbY3VyQnJ1c2hdLmFscGhhO1xuICAgIH07XG5cbiAgICB0aGlzLmdldEN1ck1vZGUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIGN1ck1vZGU7XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIHNldE1vZGUobmV3TW9kZSkge1xuICAgICAgICBpZiAoY3VyTW9kZSAhPSBuZXdNb2RlKSB7XG4gICAgICAgICAgICBpZiAobmV3TW9kZSA9PSBDaGlja2VuUGFpbnQuTV9UUkFOU0ZPUk0pIHtcbiAgICAgICAgICAgICAgICBwcmVUcmFuc2Zvcm1Nb2RlID0gY3VyTW9kZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGN1ck1vZGUgPSBuZXdNb2RlO1xuICAgICAgICAgICAgY2FsbE1vZGVMaXN0ZW5lcnMoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuZ2V0Q3VyVG9vbCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gY3VyQnJ1c2g7XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIHNldFRvb2wodG9vbCkge1xuICAgICAgICBzZXRNb2RlKENoaWNrZW5QYWludC5NX0RSQVcpO1xuICAgICAgICBjdXJCcnVzaCA9IHRvb2w7XG4gICAgICAgIHRoYXQuYXJ0d29yay5zZXRCcnVzaCh0b29sc1t0b29sXSk7XG4gICAgICAgIGNhbGxUb29sTGlzdGVuZXJzKCk7XG4gICAgfVxuXG4gICAgdGhpcy5nZXRCcnVzaEluZm8gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRvb2xzW2N1ckJydXNoXTtcbiAgICB9O1xuICAgIFxuICAgIGZ1bmN0aW9uIHNhdmVEcmF3aW5nKCkge1xuICAgICAgICB2YXJcbiAgICAgICAgICAgIHNhdmVyID0gbmV3IENQUmVzb3VyY2VTYXZlcih7XG4gICAgICAgICAgICAgICAgYXJ0d29yazogdGhhdC5nZXRBcnR3b3JrKCksXG4gICAgICAgICAgICAgICAgcm90YXRpb246IGNhbnZhcy5nZXRSb3RhdGlvbjkwKCksXG4gICAgICAgICAgICAgICAgc3dhdGNoZXM6IG1haW5HVUkuZ2V0U3dhdGNoZXMoKVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICBzYXZlci5vbihcInNhdmluZ0NvbXBsZXRlXCIsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdGhhdC5hcnR3b3JrLnNldEhhc1Vuc2F2ZWRDaGFuZ2VzKGZhbHNlKTtcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICBzYXZlci5vbihcInNhdmluZ0ZhaWx1cmVcIiwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBhbGVydChcIkFuIGVycm9yIG9jY3VyZWQgd2hpbGUgdHJ5aW5nIHRvIHNhdmUgeW91ciBkcmF3aW5nISBQbGVhc2UgdHJ5IGFnYWluIVwiKTtcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICBzYXZlci5zYXZlKCk7XG4gICAgfVxuICAgIFxuICAgIGZ1bmN0aW9uIHNlbmREcmF3aW5nKCkge1xuICAgICAgICB2YXJcbiAgICAgICAgICAgIHNhdmVyID0gbmV3IENQUmVzb3VyY2VTYXZlcih7XG4gICAgICAgICAgICAgICAgYXJ0d29yazogdGhhdC5nZXRBcnR3b3JrKCksXG4gICAgICAgICAgICAgICAgcm90YXRpb246IGNhbnZhcy5nZXRSb3RhdGlvbjkwKCksXG4gICAgICAgICAgICAgICAgc3dhdGNoZXM6IG1haW5HVUkuZ2V0U3dhdGNoZXMoKSxcbiAgICAgICAgICAgICAgICB1cmw6IG9wdGlvbnMuc2F2ZVVybFxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICBzZW5kRGlhbG9nID0gbmV3IENQU2VuZERpYWxvZyh0aGF0LCB1aUVsZW0sIHNhdmVyKTtcbiAgICAgICAgXG4gICAgICAgIHNhdmVyLm9uKFwic2F2aW5nQ29tcGxldGVcIiwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB0aGF0LmFydHdvcmsuc2V0SGFzVW5zYXZlZENoYW5nZXMoZmFsc2UpO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBBbGxvdyB0aGUgZGlhbG9nIHRvIHNob3cgYmVmb3JlIHdlIGJlZ2luIHNlcmlhbGl6YXRpb25cbiAgICAgICAgc2VuZERpYWxvZy5vbihcInNob3duXCIsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgc2F2ZXIuc2F2ZSgpO1xuICAgICAgICB9KTtcblxuICAgICAgICBzZW5kRGlhbG9nLnNob3coKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBOb3QgYWxsIHNhdmluZyBhY3Rpb25zIHdpbGwgYmUgc3VwcG9ydGVkIChkZXBlbmRpbmcgb24gd2hhdCBvcHRpb25zIHdlJ3JlIGNvbmZpZ3VyZWQgd2l0aCkuIFVzZSB0aGlzIGZ1bmN0aW9uXG4gICAgICogdG8gY2hlY2sgZm9yIHN1cHBvcnQgZm9yIGEgZ2l2ZW4gYWN0aW9uLlxuICAgICAqL1xuICAgIHRoaXMuaXNBY3Rpb25TdXBwb3J0ZWQgPSBmdW5jdGlvbihhY3Rpb25OYW1lKSB7XG4gICAgICAgIGlmIChhY3Rpb25zW2FjdGlvbk5hbWVdKSB7XG4gICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICBzdXBwb3J0ZWRUeXBlID0gdHlwZW9mIGFjdGlvbnNbYWN0aW9uTmFtZV0uaXNTdXBwb3J0ZWQ7XG5cbiAgICAgICAgICAgIGlmIChzdXBwb3J0ZWRUeXBlID09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgICAgIHJldHVybiBhY3Rpb25zW2FjdGlvbk5hbWVdLmlzU3VwcG9ydGVkKCk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHN1cHBvcnRlZFR5cGUgPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgICAgICAgIC8vIElmIG5vdCBvdGhlcndpc2Ugc3BlY2lmaWVkLCBhbiBhY3Rpb24gZGVmYXVsdHMgdG8gc3VwcG9ydGVkXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiBhY3Rpb25zW2FjdGlvbk5hbWVdLmlzU3VwcG9ydGVkO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH07XG5cbiAgICB0aGlzLnNob3dMYXllck5vdGlmaWNhdGlvbiA9IGZ1bmN0aW9uKGxheWVySW5kZXgsIG1lc3NhZ2UsIHdoZXJlKSB7XG4gICAgICAgIHRoaXMuZW1pdEV2ZW50KFwibGF5ZXJOb3RpZmljYXRpb25cIiwgW2xheWVySW5kZXgsIG1lc3NhZ2UsIHdoZXJlXSk7XG4gICAgfTtcbiAgICBcbiAgICB0aGlzLmFjdGlvblBlcmZvcm1lZCA9IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgaWYgKHRoaXMuYXJ0d29yayA9PSBudWxsIHx8IGNhbnZhcyA9PSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm47IC8vIHRoaXMgc2hvdWxkbid0IGhhcHBlbiwgYnV0IGp1c3QgaW4gY2FzZVxuICAgICAgICB9XG5cbiAgICAgICAgdmFyXG4gICAgICAgICAgICBhY3Rpb24gPSBhY3Rpb25zW2UuYWN0aW9uXTtcblxuICAgICAgICBpZiAoYWN0aW9uKSB7XG4gICAgICAgICAgICBpZiAoY3VyTW9kZSA9PSBDaGlja2VuUGFpbnQuTV9UUkFOU0ZPUk0gJiYgKGFjdGlvbi5tb2RpZmllcy5kb2N1bWVudCB8fCBhY3Rpb24ubW9kaWZpZXMubW9kZSlcbiAgICAgICAgICAgICAgICAgICAgJiYgW1wiQ1BUcmFuc2Zvcm1BY2NlcHRcIiwgXCJDUFRyYW5zZm9ybVJlamVjdFwiXS5pbmRleE9mKGUuYWN0aW9uKSA9PSAtMSkge1xuICAgICAgICAgICAgICAgIGlmIChlLmFjdGlvbiA9PSBcIkNQVW5kb1wiKSB7XG4gICAgICAgICAgICAgICAgICAgIGFjdGlvbnMuQ1BUcmFuc2Zvcm1SZWplY3QuYWN0aW9uKCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChlLmFjdGlvbiA9PSBcIkNQVHJhbnNmb3JtXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gWW91J3JlIGFscmVhZHkgdHJhbnNmb3JtaW5nIHRoZSBzZWxlY3Rpb24hXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gUHJvbXB0IHRoZSB1c2VyIHRvIGZpbmlzaCB0aGVpciB0cmFuc2Zvcm0gYmVmb3JlIHN0YXJ0aW5nIHNvbWV0aGluZyBlbHNlXG4gICAgICAgICAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgICAgICAgICAgZGlhbG9nID0gbmV3IENQQ29uZmlybVRyYW5zZm9ybURpYWxvZyh1aUVsZW0sIHRoaXMpO1xuXG4gICAgICAgICAgICAgICAgICAgIC8qIElmIHRoZXkgZGVjaWRlIHRvIGZpbmlzaCB1cCB3aXRoIHRoZSB0cmFuc2Zvcm0sIHdlIGNhbiBhcHBseSB0aGUgb3JpZ2luYWwgYWN0aW9uIHRoZXlcbiAgICAgICAgICAgICAgICAgICAgICogYXR0ZW1wdGVkIGFmdGVyd2FyZHMuXG4gICAgICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgICAgICBkaWFsb2cub24oXCJhY2NlcHRcIiwgdGhpcy5hY3Rpb25QZXJmb3JtZWQuYmluZCh0aGlzLCBlKSk7XG4gICAgICAgICAgICAgICAgICAgIGRpYWxvZy5vbihcInJlamVjdFwiLCB0aGlzLmFjdGlvblBlcmZvcm1lZC5iaW5kKHRoaXMsIGUpKTtcblxuICAgICAgICAgICAgICAgICAgICBkaWFsb2cuc2hvdygpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgYWN0aW9uLmFjdGlvbihlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGNhbGxDUEV2ZW50TGlzdGVuZXJzKCk7IFRPRE9cbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gaW5zdGFsbFVuc2F2ZWRXYXJuaW5nKCkge1xuICAgICAgICBpZiAoaXNFdmVudFN1cHBvcnRlZChcIm9uYmVmb3JldW5sb2FkXCIpKSB7XG4gICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImJlZm9yZXVubG9hZFwiLCBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoYXQuYXJ0d29yay5nZXRIYXNVbnNhdmVkQ2hhbmdlcygpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlybU1lc3NhZ2UgPSBcIllvdXIgZHJhd2luZyBoYXMgdW5zYXZlZCBjaGFuZ2VzIVwiO1xuICAgICAgICAgICAgICAgICAgICBlLnJldHVyblZhbHVlID0gY29uZmlybU1lc3NhZ2U7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjb25maXJtTWVzc2FnZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIEZhbGwgYmFjayB0byBqdXN0IGNhdGNoaW5nIGxpbmtzXG4gICAgICAgICAgICAkKFwiYVwiKS5jbGljayhmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZ2V0QXR0cmlidXRlKFwiaHJlZlwiKSAhPSBcIiNcIiAmJiB0aGF0LmFydHdvcmsuZ2V0SGFzVW5zYXZlZENoYW5nZXMoKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY29uZmlybShcIllvdXIgZHJhd2luZyBoYXMgdW5zYXZlZCBjaGFuZ2VzISBBcmUgeW91IHN1cmUgdG8gd2FudCB0byBuYXZpZ2F0ZSBhd2F5P1wiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBcbiAgICBmdW5jdGlvbiBzdGFydE1haW5HVUkoc3dhdGNoZXMsIGluaXRpYWxSb3RhdGlvbjkwKSB7XG4gICAgICAgIG1haW5HVUkgPSBuZXcgQ1BNYWluR1VJKHRoYXQsIHVpRWxlbSk7XG5cbiAgICAgICAgc2V0VG9vbChDaGlja2VuUGFpbnQuVF9QRU4pO1xuICAgICAgICBtYWluR1VJLmFycmFuZ2VQYWxldHRlcygpO1xuICAgICAgICBcbiAgICAgICAgaWYgKHN3YXRjaGVzKSB7XG4gICAgICAgICAgICBtYWluR1VJLnNldFN3YXRjaGVzKHN3YXRjaGVzKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgaWYgKGluaXRpYWxSb3RhdGlvbjkwKSB7XG4gICAgICAgICAgICBtYWluR1VJLnNldFJvdGF0aW9uKGluaXRpYWxSb3RhdGlvbjkwICogTWF0aC5QSSAvIDIpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBDUFdhY29tVGFibGV0LmdldFJlZigpLmRldGVjdFRhYmxldCgpO1xuICAgICAgICBcbiAgICAgICAgaW5zdGFsbFVuc2F2ZWRXYXJuaW5nKCk7XG4gICAgfVxuICAgIFxuICAgIHRoaXMuZ2V0UmVzb3VyY2VzUm9vdCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gb3B0aW9ucy5yZXNvdXJjZXNSb290O1xuICAgIH07XG5cbiAgICBpZiAoIWlzQnJvd3NlclN1cHBvcnRlZCgpKSB7XG4gICAgICAgIHRocm93IG5ldyBDaGlja2VuUGFpbnQuVW5zdXBwb3J0ZWRCcm93c2VyRXhjZXB0aW9uKCk7XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiBkb2N1bWVudC5ib2R5LnN0eWxlLmZsZXhCYXNpcyAhPSBcInN0cmluZ1wiICYmIHR5cGVvZiBkb2N1bWVudC5ib2R5LnN0eWxlLm1zRmxleERpcmVjdGlvbiAhPSBcInN0cmluZ1wiIHx8IC9QcmVzdG8vLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkpIHtcbiAgICAgICAgdWlFbGVtLmNsYXNzTmFtZSArPSBcIiBuby1mbGV4Ym94XCI7XG4gICAgfVxuXG4gICAgdWlFbGVtLmNsYXNzTmFtZSArPSBcIiBjaGlja2VucGFpbnRcIjtcblxuICAgIG9wdGlvbnMucmVzb3VyY2VzUm9vdCA9IG9wdGlvbnMucmVzb3VyY2VzUm9vdCB8fCBcImNoaWNrZW5wYWludC9cIjtcblxuICAgIGlmIChvcHRpb25zLmRpc2FibGVCb290c3RyYXBBUEkpIHtcbiAgICAgICAgJChkb2N1bWVudCkub2ZmKCcuZGF0YS1hcGknKTtcbiAgICB9XG5cbiAgICBpZiAob3B0aW9ucy5sb2FkSW1hZ2VVcmwgfHwgb3B0aW9ucy5sb2FkQ2hpYmlGaWxlVXJsKSB7XG4gICAgICAgIHZhclxuICAgICAgICAgICAgbG9hZGVyID0gbmV3IENQUmVzb3VyY2VMb2FkZXIob3B0aW9ucyk7XG4gICAgICAgIFxuICAgICAgICBuZXcgQ1BTcGFzaFNjcmVlbih1aUVsZW0sIGxvYWRlciwgb3B0aW9ucy5yZXNvdXJjZXNSb290KTtcblxuICAgICAgICBsb2FkZXIub24oXCJsb2FkaW5nQ29tcGxldGVcIiwgZnVuY3Rpb24ocmVzb3VyY2VzKSB7XG4gICAgICAgICAgICB0aGF0LmFydHdvcmsgPSByZXNvdXJjZXMubGF5ZXJzIHx8IHJlc291cmNlcy5mbGF0O1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBzdGFydE1haW5HVUkocmVzb3VyY2VzLnN3YXRjaGVzLCBvcHRpb25zLnJvdGF0aW9uKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgbG9hZGVyLmxvYWQoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmFydHdvcmsgPSBuZXcgQ1BBcnR3b3JrKG9wdGlvbnMuY2FudmFzV2lkdGggfHwgODAwLCBvcHRpb25zLmNhbnZhc0hlaWdodCB8fCA2MDApO1xuICAgICAgICB0aGlzLmFydHdvcmsuYWRkQmFja2dyb3VuZExheWVyKCk7XG4gICAgICAgIFxuICAgICAgICBzdGFydE1haW5HVUkoKTtcbiAgICB9XG59XG5cbkNoaWNrZW5QYWludC5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKEV2ZW50RW1pdHRlci5wcm90b3R5cGUpO1xuQ2hpY2tlblBhaW50LnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IENoaWNrZW5QYWludDtcblxuQ2hpY2tlblBhaW50LlVuc3VwcG9ydGVkQnJvd3NlckV4Y2VwdGlvbiA9IGZ1bmN0aW9uKCkge1xufTtcblxuQ2hpY2tlblBhaW50LlVuc3VwcG9ydGVkQnJvd3NlckV4Y2VwdGlvbi5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gXCJTb3JyeSwgeW91ciB3ZWIgYnJvd3NlciBkb2VzIG5vdCBzdXBwb3J0IENoaWNrZW5QYWludC4gUGxlYXNlIHRyeSBhIG1vZGVybiBicm93c2VyIGxpa2UgQ2hyb21lLCBTYWZhcmksIEZpcmVmb3gsIG9yIEVkZ2VcIjtcbn07XG5cbi8vXG4vLyBEZWZpbml0aW9uIG9mIGFsbCB0aGUgbW9kZXMgYXZhaWxhYmxlXG4vL1xuXG5DaGlja2VuUGFpbnQuTV9EUkFXID0gMDtcbkNoaWNrZW5QYWludC5NX0ZMT09ERklMTCA9IDE7XG5DaGlja2VuUGFpbnQuTV9SRUNUX1NFTEVDVElPTiA9IDI7XG5DaGlja2VuUGFpbnQuTV9NT1ZFX1RPT0wgPSAzO1xuQ2hpY2tlblBhaW50Lk1fUk9UQVRFX0NBTlZBUyA9IDQ7XG5DaGlja2VuUGFpbnQuTV9DT0xPUl9QSUNLRVIgPSA1O1xuQ2hpY2tlblBhaW50Lk1fR1JBRElFTlRGSUxMID0gNjtcbkNoaWNrZW5QYWludC5NX1RSQU5TRk9STSA9IDc7XG5cbi8vXG4vLyBEZWZpbml0aW9uIG9mIGFsbCB0aGUgc3RhbmRhcmQgdG9vbHMgYXZhaWxhYmxlXG4vL1xuQ2hpY2tlblBhaW50LlRfUEVOQ0lMID0gMDtcbkNoaWNrZW5QYWludC5UX0VSQVNFUiA9IDE7XG5DaGlja2VuUGFpbnQuVF9QRU4gPSAyO1xuQ2hpY2tlblBhaW50LlRfU09GVEVSQVNFUiA9IDM7XG5DaGlja2VuUGFpbnQuVF9BSVJCUlVTSCA9IDQ7XG5DaGlja2VuUGFpbnQuVF9ET0RHRSA9IDU7XG5DaGlja2VuUGFpbnQuVF9CVVJOID0gNjtcbkNoaWNrZW5QYWludC5UX1dBVEVSID0gNztcbkNoaWNrZW5QYWludC5UX0JMVVIgPSA4O1xuQ2hpY2tlblBhaW50LlRfU01VREdFID0gOTtcbkNoaWNrZW5QYWludC5UX0JMRU5ERVIgPSAxMDtcbkNoaWNrZW5QYWludC5UX01BWCA9IDExO1xuIiwiLypcbiAgICBDaGlja2VuUGFpbnRcbiAgICBcbiAgICBDaGlja2VuUGFpbnQgaXMgYSB0cmFuc2xhdGlvbiBvZiBDaGliaVBhaW50IGZyb20gSmF2YSB0byBKYXZhU2NyaXB0XG4gICAgYnkgTmljaG9sYXMgU2hlcmxvY2sgLyBDaGlja2VuIFNtb290aGllLlxuICAgIFxuICAgIENoaWJpUGFpbnQgaXMgQ29weXJpZ2h0IChjKSAyMDA2LTIwMDggTWFyYyBTY2hlZmVyXG5cbiAgICBDaGlja2VuUGFpbnQgaXMgZnJlZSBzb2Z0d2FyZTogeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yIG1vZGlmeVxuICAgIGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgYXMgcHVibGlzaGVkIGJ5XG4gICAgdGhlIEZyZWUgU29mdHdhcmUgRm91bmRhdGlvbiwgZWl0aGVyIHZlcnNpb24gMyBvZiB0aGUgTGljZW5zZSwgb3JcbiAgICAoYXQgeW91ciBvcHRpb24pIGFueSBsYXRlciB2ZXJzaW9uLlxuXG4gICAgQ2hpY2tlblBhaW50IGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsXG4gICAgYnV0IFdJVEhPVVQgQU5ZIFdBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2ZcbiAgICBNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuICBTZWUgdGhlXG4gICAgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy5cblxuICAgIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXG4gICAgYWxvbmcgd2l0aCBDaGlja2VuUGFpbnQuIElmIG5vdCwgc2VlIDxodHRwOi8vd3d3LmdudS5vcmcvbGljZW5zZXMvPi5cbiovXG5cbmltcG9ydCBDUExheWVyIGZyb20gXCIuL0NQTGF5ZXJcIjtcbmltcG9ydCBDUEdyZXlCbXAgZnJvbSBcIi4vQ1BHcmV5Qm1wXCI7XG5pbXBvcnQgQ1BDb2xvckJtcCBmcm9tIFwiLi9DUENvbG9yQm1wXCI7XG5pbXBvcnQgQ1BCcnVzaE1hbmFnZXIgZnJvbSBcIi4vQ1BCcnVzaE1hbmFnZXJcIjtcbmltcG9ydCBDUEJydXNoSW5mbyBmcm9tIFwiLi9DUEJydXNoSW5mb1wiO1xuaW1wb3J0IENQVW5kbyBmcm9tIFwiLi9DUFVuZG9cIjtcbmltcG9ydCBDUENsaXAgZnJvbSBcIi4vQ1BDbGlwXCI7XG5cbmltcG9ydCBDUENvbG9yRmxvYXQgZnJvbSBcIi4uL3V0aWwvQ1BDb2xvckZsb2F0XCI7XG5pbXBvcnQgQ1BSZWN0IGZyb20gXCIuLi91dGlsL0NQUmVjdFwiO1xuaW1wb3J0IENQUmFuZG9tIGZyb20gXCIuLi91dGlsL0NQUmFuZG9tXCI7XG5pbXBvcnQgQ1BUcmFuc2Zvcm0gZnJvbSBcIi4uL3V0aWwvQ1BUcmFuc2Zvcm1cIjtcbmltcG9ydCB7c2V0Q2FudmFzSW50ZXJwb2xhdGlvbn0gZnJvbSBcIi4uL3V0aWwvQ1BQb2x5ZmlsbFwiO1xuXG4vLyBQb2x5ZmlsbCwgdXNlZCBpbiBkdXBsaWNhdGVMYXllclxuaWYgKCFTdHJpbmcucHJvdG90eXBlLmVuZHNXaXRoKSB7XG4gICAgU3RyaW5nLnByb3RvdHlwZS5lbmRzV2l0aCA9IGZ1bmN0aW9uKHNlYXJjaFN0cmluZywgcG9zaXRpb24pIHtcbiAgICAgICAgdmFyIHN1YmplY3RTdHJpbmcgPSB0aGlzLnRvU3RyaW5nKCk7XG4gICAgICAgIGlmICh0eXBlb2YgcG9zaXRpb24gIT09ICdudW1iZXInIHx8ICFpc0Zpbml0ZShwb3NpdGlvbikgfHwgTWF0aC5mbG9vcihwb3NpdGlvbikgIT09IHBvc2l0aW9uIHx8IHBvc2l0aW9uID4gc3ViamVjdFN0cmluZy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHBvc2l0aW9uID0gc3ViamVjdFN0cmluZy5sZW5ndGg7XG4gICAgICAgIH1cbiAgICAgICAgcG9zaXRpb24gLT0gc2VhcmNoU3RyaW5nLmxlbmd0aDtcbiAgICAgICAgdmFyIGxhc3RJbmRleCA9IHN1YmplY3RTdHJpbmcuaW5kZXhPZihzZWFyY2hTdHJpbmcsIHBvc2l0aW9uKTtcbiAgICAgICAgcmV0dXJuIGxhc3RJbmRleCAhPT0gLTEgJiYgbGFzdEluZGV4ID09PSBwb3NpdGlvbjtcbiAgICB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBDUEFydHdvcmsoX3dpZHRoLCBfaGVpZ2h0KSB7XG4gICAgXG4gICAgX3dpZHRoID0gX3dpZHRoIHwgMDtcbiAgICBfaGVpZ2h0ID0gX2hlaWdodCB8IDA7XG4gICAgXG4gICAgY29uc3RcbiAgICAgICAgTUFYX1VORE8gPSAzMCxcbiAgICAgICAgRU1QVFlfQkFDS0dST1VORF9DT0xPUiA9IDB4RkZGRkZGRkYsXG4gICAgICAgIEVNUFRZX0xBWUVSX0NPTE9SID0gMHgwMEZGRkZGRixcbiAgICAgICAgXG4gICAgICAgIEJVUk5fQ09OU1RBTlQgPSAyNjAsXG4gICAgICAgIEJMVVJfTUlOID0gNjQsXG4gICAgICAgIEJMVVJfTUFYID0gMTtcbiAgICBcbiAgICB2YXJcbiAgICAgICAgbGF5ZXJzID0gW10sXG4gICAgICAgIGN1ckxheWVyLFxuICAgICAgICBcbiAgICAgICAgaGFzVW5zYXZlZENoYW5nZXMgPSBmYWxzZSxcbiAgICAgICAgXG4gICAgICAgIGN1clNlbGVjdGlvbiA9IG5ldyBDUFJlY3QoMCwgMCwgMCwgMCksXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIE91ciBidWZmZXIgZm9yIHN0b3JpbmcgYWxsIHRoZSBsYXllcnMgbWVyZ2VkIHRvZ2V0aGVyIGFjY29yZGluZyB0byB0aGVpciBibGVuZGluZyBtb2Rlcy5cbiAgICAgICAgICpcbiAgICAgICAgICogQHR5cGUge0NQTGF5ZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBmdXNpb25CdWZmZXIgPSBuZXcgQ1BMYXllcihfd2lkdGgsIF9oZWlnaHQpLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBQb2ludHMgdG8gdGhlIGJ1ZmZlciB3aGljaCByZXByZXNlbnRzIGFsbCB0aGUgbGF5ZXJzIG1lcmdlZCB0b2dldGhlciAoZWl0aGVyIGZ1c2lvbkJ1ZmZlciBvciBjdXJMYXllclxuICAgICAgICAgKiBkZXBlbmRpbmcgb24gaWYgdGhlIGRvY3VtZW50IGlzIHNpbmdsZS1sYXllcmVkIG9yIG5vdCkuXG4gICAgICAgICAqXG4gICAgICAgICAqIEB0eXBlIHtDUExheWVyfVxuICAgICAgICAgKi9cbiAgICAgICAgZnVzaW9uID0gZnVzaW9uQnVmZmVyLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIGNvcHkgb2YgdGhlIGN1cnJlbnQgbGF5ZXIncyBkYXRhIHRoYXQgY2FuIGJlIHVzZWQgZm9yIHVuZG8gb3BlcmF0aW9ucy5cbiAgICAgICAgICogXG4gICAgICAgICAqIEB0eXBlIHtDUExheWVyfVxuICAgICAgICAgKi9cbiAgICAgICAgdW5kb0J1ZmZlciA9IG5ldyBDUExheWVyKF93aWR0aCwgX2hlaWdodCksXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSByZWdpb24gb2YgdGhlIHVuZG9CdWZmZXIgd2hpY2ggaXMgb3V0IG9mIGRhdGUgd2l0aCByZXNwZWN0IHRvIHRoZSBjb250ZW50IG9mIHRoZSBsYXllciwgYW5kIG5lZWRzIHVwZGF0ZWRcbiAgICAgICAgICogd2l0aCBwcmVwYXJlRm9yTGF5ZXJVbmRvKCkuXG4gICAgICAgICAqXG4gICAgICAgICAqIEB0eXBlIHtDUFJlY3R9XG4gICAgICAgICAqL1xuICAgICAgICB1bmRvQnVmZmVySW52YWxpZFJlZ2lvbiA9IG5ldyBDUFJlY3QoMCwgMCwgX3dpZHRoLCBfaGVpZ2h0KSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogV2UgdXNlIHRoaXMgYnVmZmVyIHNvIHdlIGNhbiBhY2N1cmF0ZWx5IGFjY3VtdWxhdGUgc21hbGwgY2hhbmdlcyB0byBsYXllciBvcGFjaXR5IGR1cmluZyBhIGJydXNoIHN0cm9rZS5cbiAgICAgICAgICogXG4gICAgICAgICAqIE5vcm1hbGx5IHdlIHVzZSBpdCBhcyBhIDE2LWJpdCBvcGFjaXR5IGNoYW5uZWwgcGVyIHBpeGVsLCBidXQgc29tZSBicnVzaGVzIHVzZSB0aGUgZnVsbCAzMi1iaXRzIHBlciBwaXhlbFxuICAgICAgICAgKiBhcyBBUkdCLlxuICAgICAgICAgKi9cbiAgICAgICAgb3BhY2l0eUJ1ZmZlciA9IG5ldyBDUEdyZXlCbXAoX3dpZHRoLCBfaGVpZ2h0LCAzMiksXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBhcmVhIG9mIGRpcnR5IGRhdGEgY29udGFpbmVkIGJ5IG9wYWNpdHlCdWZmZXIgdGhhdCBzaG91bGQgYmUgbWVyZ2VkIGJ5IGZ1c2lvbkxheWVycygpXG4gICAgICAgICAqL1xuICAgICAgICBvcGFjaXR5QXJlYSA9IG5ldyBDUFJlY3QoMCwgMCwgMCwgMCksXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBhcmVhIG9mIGRpcnR5IGxheWVyIGRhdGEgdGhhdCBzaG91bGQgYmUgbWVyZ2VkIGludG8gdGhlIGZ1c2lvbiBieSBmdXNpb25MYXllcnMoKS5cbiAgICAgICAgICovXG4gICAgICAgIGZ1c2lvbkFyZWEgPSBuZXcgQ1BSZWN0KDAsIDAsIF93aWR0aCwgX2hlaWdodCksXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFVzZWQgYnkgQ1BVbmRvUGFpbnQgdG8ga2VlcCB0cmFjayBvZiB0aGUgYXJlYSB0aGF0IGhhcyBiZWVuIGRpcnRpZWQgYnkgbGF5ZXIgb3BlcmF0aW9ucyBhbmQgc2hvdWxkIGJlXG4gICAgICAgICAqIHNhdmVkIGZvciB1bmRvLlxuICAgICAgICAgKi9cbiAgICAgICAgdW5kb0FyZWEgPSBuZXcgQ1BSZWN0KDAsIDAsIDAsIDApLFxuXG4gICAgICAgIHJuZCA9IG5ldyBDUFJhbmRvbSgpLFxuXG4gICAgICAgIHByZXZpZXdPcGVyYXRpb24gPSBudWxsLFxuICAgICAgICBcbiAgICAgICAgY2xpcGJvYXJkID0gbnVsbCwgLy8gQSBDUENsaXBcbiAgICAgICAgdW5kb0xpc3QgPSBbXSwgcmVkb0xpc3QgPSBbXSxcbiAgICAgICAgXG4gICAgICAgIGN1ckJydXNoID0gbnVsbCxcbiAgICAgICAgXG4gICAgICAgIGJydXNoTWFuYWdlciA9IG5ldyBDUEJydXNoTWFuYWdlcigpLFxuICAgICAgICBcbiAgICAgICAgbGFzdFggPSAwLjAsIGxhc3RZID0gMC4wLCBsYXN0UHJlc3N1cmUgPSAwLjAsXG4gICAgICAgIGJydXNoQnVmZmVyID0gbnVsbCxcbiAgICAgICAgXG4gICAgICAgIHNhbXBsZUFsbExheWVycyA9IGZhbHNlLFxuICAgICAgICBsb2NrQWxwaGEgPSBmYWxzZSxcbiAgICAgICAgXG4gICAgICAgIGN1ckNvbG9yID0gMHgwMDAwMDAsIC8vIEJsYWNrXG4gICAgICAgIHRyYW5zZm9ybUludGVycG9sYXRpb24gPSBcInNtb290aFwiLFxuICAgICAgICBcbiAgICAgICAgdGhhdCA9IHRoaXM7XG4gICAgXG4gICAgLy8gRklYTUU6IDIwMDctMDEtMTMgSSdtIG1vdmluZyB0aGlzIHRvIHRoZSBDUFJlY3QgY2xhc3NcbiAgICAvLyBmaW5kIHdoZXJlIHRoaXMgdmVyc2lvbiBpcyB1c2VkIGFuZCBjaGFuZ2UgdGhlXG4gICAgLy8gY29kZSB0byB1c2UgdGhlIENQUmVjdCB2ZXJzaW9uXG4gICAgZnVuY3Rpb24gY2xpcFNvdXJjZURlc3Qoc3JjUmVjdCwgZHN0UmVjdCkge1xuICAgICAgICAvLyBGSVhNRTpcbiAgICAgICAgLy8gLyFcXCBkc3RSZWN0IGJvdHRvbSBhbmQgcmlnaHQgYXJlIGlnbm9yZWQgYW5kIGluc3RlYWQgd2UgY2xpcFxuICAgICAgICAvLyBhZ2FpbnN0IHRoZSB3aWR0aCwgaGVpZ2h0IG9mIHRoZSBsYXllci4gOi9cbiAgICAgICAgLy9cblxuICAgICAgICAvLyB0aGlzIHZlcnNpb24gd291bGQgYmUgZW5vdWdoIGluIG1vc3QgY2FzZXMgKHdoZW4gd2UgZG9uJ3QgbmVlZFxuICAgICAgICAvLyBzcmNSZWN0IGJvdHRvbSBhbmQgcmlnaHQgdG8gYmUgY2xpcHBlZClcbiAgICAgICAgLy8gaXQncyBsZWZ0IGhlcmUgaW4gY2FzZSBpdCdzIG5lZWRlZCB0byBtYWtlIGEgZmFzdGVyIHZlcnNpb25cbiAgICAgICAgLy8gb2YgdGhpcyBmdW5jdGlvblxuICAgICAgICAvLyBkc3RSZWN0LnJpZ2h0ID0gTWF0aC5taW4od2lkdGgsIGRzdFJlY3QubGVmdCArIHNyY1JlY3QuZ2V0V2lkdGgoKSk7XG4gICAgICAgIC8vIGRzdFJlY3QuYm90dG9tID0gTWF0aC5taW4oaGVpZ2h0LCBkc3RSZWN0LnRvcCArIHNyY1JlY3QuZ2V0SGVpZ2h0KCkpO1xuXG4gICAgICAgIC8vIG5ldyBkZXN0IGJvdHRvbS9yaWdodFxuICAgICAgICBkc3RSZWN0LnJpZ2h0ID0gZHN0UmVjdC5sZWZ0ICsgc3JjUmVjdC5nZXRXaWR0aCgpO1xuICAgICAgICBpZiAoZHN0UmVjdC5yaWdodCA+IHRoYXQud2lkdGgpIHtcbiAgICAgICAgICAgIHNyY1JlY3QucmlnaHQgLT0gZHN0UmVjdC5yaWdodCAtIHRoYXQud2lkdGg7XG4gICAgICAgICAgICBkc3RSZWN0LnJpZ2h0ID0gdGhhdC53aWR0aDtcbiAgICAgICAgfVxuXG4gICAgICAgIGRzdFJlY3QuYm90dG9tID0gZHN0UmVjdC50b3AgKyBzcmNSZWN0LmdldEhlaWdodCgpO1xuICAgICAgICBpZiAoZHN0UmVjdC5ib3R0b20gPiB0aGF0LmhlaWdodCkge1xuICAgICAgICAgICAgc3JjUmVjdC5ib3R0b20gLT0gZHN0UmVjdC5ib3R0b20gLSB0aGF0LmhlaWdodDtcbiAgICAgICAgICAgIGRzdFJlY3QuYm90dG9tID0gdGhhdC5oZWlnaHQ7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBuZXcgc3JjIHRvcC9sZWZ0XG4gICAgICAgIGlmIChkc3RSZWN0LmxlZnQgPCAwKSB7XG4gICAgICAgICAgICBzcmNSZWN0LmxlZnQgLT0gZHN0UmVjdC5sZWZ0O1xuICAgICAgICAgICAgZHN0UmVjdC5sZWZ0ID0gMDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChkc3RSZWN0LnRvcCA8IDApIHtcbiAgICAgICAgICAgIHNyY1JlY3QudG9wIC09IGRzdFJlY3QudG9wO1xuICAgICAgICAgICAgZHN0UmVjdC50b3AgPSAwO1xuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIGZ1bmN0aW9uIGNhbGxMaXN0ZW5lcnNVcGRhdGVSZWdpb24ocmVnaW9uKSB7XG4gICAgICAgIHRoYXQuZW1pdEV2ZW50KFwidXBkYXRlUmVnaW9uXCIsIFtyZWdpb25dKTtcbiAgICB9XG5cbiAgICAvLyBsYXllckluZGV4IGlzIG9wdGlvbmFsLCBwcm92aWRlIHdoZW4gb25seSBvbmUgbGF5ZXIgaGFzIGJlZW4gdXBkYXRlZFxuICAgIGZ1bmN0aW9uIGNhbGxMaXN0ZW5lcnNMYXllckNoYW5nZShsYXllckluZGV4KSB7XG4gICAgICAgIHRoYXQuZW1pdEV2ZW50KFwiY2hhbmdlTGF5ZXJcIiwgW2xheWVySW5kZXhdKTtcbiAgICB9XG5cbiAgICAvLyBXaGVuIHRoZSBzZWxlY3RlZCByZWN0YW5nbGUgY2hhbmdlc1xuICAgIGZ1bmN0aW9uIGNhbGxMaXN0ZW5lcnNTZWxlY3Rpb25DaGFuZ2UoKSB7XG4gICAgICAgIHRoYXQuZW1pdEV2ZW50KFwiY2hhbmdlU2VsZWN0aW9uXCIsIFtdKTtcbiAgICB9XG4gICAgXG4gICAgdGhpcy5nZXRMYXllcnMgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIGxheWVycztcbiAgICB9O1xuXG4gICAgdGhpcy5nZXRMYXllckNvdW50ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBsYXllcnMubGVuZ3RoO1xuICAgIH07XG4gICAgXG4gICAgLy9cbiAgICAvLyBTZWxlY3Rpb24gbWV0aG9kc1xuICAgIC8vXG5cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBjdXJyZW50IHNlbGVjdGlvbiByZWN0IG9yIGEgcmVjdGFuZ2xlIGNvdmVyaW5nIHRoZSB3aG9sZSBjYW52YXMgaWYgdGhlcmUgYXJlIG5vIHNlbGVjdGlvbnNcbiAgICAgKiBcbiAgICAgKiBAcmV0dXJucyBDUFJlY3RcbiAgICAgKi9cbiAgICB0aGlzLmdldFNlbGVjdGlvbkF1dG9TZWxlY3QgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyXG4gICAgICAgICAgICByO1xuXG4gICAgICAgIGlmICghY3VyU2VsZWN0aW9uLmlzRW1wdHkoKSkge1xuICAgICAgICAgICAgciA9IGN1clNlbGVjdGlvbi5jbG9uZSgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgciA9IHRoaXMuZ2V0Qm91bmRzKCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcjtcbiAgICB9O1xuICAgIFxuICAgIHRoaXMuZ2V0U2VsZWN0aW9uID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBjdXJTZWxlY3Rpb24uY2xvbmUoKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogTWFyayB0aGUgZ2l2ZW4gcmVjdGFuZ2xlIG9uIHRoZSBjYW52YXMgYXMgbmVlZGluZyB0byBiZSByZS1mdXNlZCAoaS5lLiB3ZSd2ZSBkcmF3biBpbiB0aGlzIHJlZ2lvbikuXG4gICAgICogTGlzdGVuZXJzIGFyZSBub3RpZmllZCBhYm91dCBvdXIgdXBkYXRlZCBjYW52YXMgcmVnaW9uLlxuICAgICAqXG4gICAgICogQHBhcmFtIHJlY3QgQ1BSZWN0IFJlY3QgdG8gaW52YWxpZGF0ZVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGludmFsaWRhdGVGdXNpb25SZWN0KHJlY3QpIHtcbiAgICAgICAgZnVzaW9uQXJlYS51bmlvbihyZWN0KTtcblxuICAgICAgICAvLyBUaGlzIHVwZGF0ZWQgYXJlYSB3aWxsIG5lZWQgdG8gYmUgdXBkYXRlZCBpbiBvdXIgdW5kbyBidWZmZXIgbGF0ZXJcbiAgICAgICAgdW5kb0J1ZmZlckludmFsaWRSZWdpb24udW5pb24ocmVjdCk7XG5cbiAgICAgICAgY2FsbExpc3RlbmVyc1VwZGF0ZVJlZ2lvbihyZWN0KTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogTWFyayB0aGUgZW50aXJlIGNhbnZhcyBhcyBuZWVkaW5nIHRvIGJlIHJlLWZ1c2VkICh3ZSd2ZSBkcmF3biB0byB0aGUgd2hvbGUgY2FudmFzKVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGludmFsaWRhdGVGdXNpb24oKSB7XG4gICAgICAgIGludmFsaWRhdGVGdXNpb25SZWN0KG5ldyBDUFJlY3QoMCwgMCwgdGhhdC53aWR0aCwgdGhhdC5oZWlnaHQpKTtcbiAgICB9O1xuICAgIFxuICAgIHRoaXMuc2V0SGFzVW5zYXZlZENoYW5nZXMgPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICBoYXNVbnNhdmVkQ2hhbmdlcyA9IHZhbHVlO1xuICAgIH07XG4gICAgXG4gICAgdGhpcy5nZXRIYXNVbnNhdmVkQ2hhbmdlcyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gaGFzVW5zYXZlZENoYW5nZXM7XG4gICAgfTtcbiAgICBcbiAgICB0aGlzLnNldExheWVyVmlzaWJpbGl0eSA9IGZ1bmN0aW9uKGxheWVySW5kZXgsIHZpc2libGUpIHtcbiAgICAgICAgdmFyXG4gICAgICAgICAgICBsYXllciA9IHRoaXMuZ2V0TGF5ZXIobGF5ZXJJbmRleCk7XG4gICAgICAgIFxuICAgICAgICBhZGRVbmRvKG5ldyBDUFVuZG9MYXllclZpc2libGUobGF5ZXJJbmRleCwgbGF5ZXIudmlzaWJsZSwgdmlzaWJsZSkpO1xuICAgICAgICBsYXllci52aXNpYmxlID0gdmlzaWJsZTtcbiAgICAgICAgXG4gICAgICAgIGludmFsaWRhdGVGdXNpb24oKTtcbiAgICAgICAgY2FsbExpc3RlbmVyc0xheWVyQ2hhbmdlKGxheWVySW5kZXgpO1xuICAgIH07XG5cbiAgICB0aGlzLmFkZExheWVyID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhclxuICAgICAgICAgICAgbmV3TGF5ZXIgPSBuZXcgQ1BMYXllcih0aGlzLndpZHRoLCB0aGlzLmhlaWdodCwgdGhpcy5nZXREZWZhdWx0TGF5ZXJOYW1lKCkpLFxuICAgICAgICAgICAgYWN0aXZlTGF5ZXJJbmRleCA9IHRoaXMuZ2V0QWN0aXZlTGF5ZXJJbmRleCgpO1xuICAgICAgICBcbiAgICAgICAgbmV3TGF5ZXIuY2xlYXJBbGwoRU1QVFlfTEFZRVJfQ09MT1IpOyAvLyBUcmFuc3BhcmVudCB3aGl0ZVxuICAgICAgICBcbiAgICAgICAgYWRkVW5kbyhuZXcgQ1BVbmRvQWRkTGF5ZXIoYWN0aXZlTGF5ZXJJbmRleCkpO1xuXG4gICAgICAgIGxheWVycy5zcGxpY2UoYWN0aXZlTGF5ZXJJbmRleCArIDEsIDAsIG5ld0xheWVyKTtcbiAgICAgICAgdGhpcy5zZXRBY3RpdmVMYXllckluZGV4KGFjdGl2ZUxheWVySW5kZXggKyAxKTtcblxuICAgICAgICBpbnZhbGlkYXRlRnVzaW9uKCk7XG4gICAgICAgIGNhbGxMaXN0ZW5lcnNMYXllckNoYW5nZSgpO1xuICAgIH07XG4gICAgXG4gICAgdGhpcy5hZGRMYXllck9iamVjdCA9IGZ1bmN0aW9uKGxheWVyKSB7XG4gICAgICAgIGxheWVycy5wdXNoKGxheWVyKTtcbiAgICAgICAgXG4gICAgICAgIGlmIChsYXllcnMubGVuZ3RoID09IDEpIHtcbiAgICAgICAgICAgIGN1ckxheWVyID0gbGF5ZXJzWzBdO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBpbnZhbGlkYXRlRnVzaW9uKCk7XG4gICAgICAgIGNhbGxMaXN0ZW5lcnNMYXllckNoYW5nZSgpO1xuICAgIH07XG4gICAgXG4gICAgLyoqXG4gICAgICogUmVtb3ZlIHRoZSBjdXJyZW50bHkgc2VsZWN0ZWQgbGF5ZXIuXG4gICAgICogXG4gICAgICogUmV0dXJucyB0cnVlIGlmIHRoZSBsYXllciB3YXMgcmVtb3ZlZCwgb3IgZmFsc2Ugd2hlbiByZW1vdmFsIGZhaWxlZCBiZWNhdXNlIHRoZXJlIGlzIGN1cnJlbnRseSBvbmx5IG9uZSBsYXllciBpbiBcbiAgICAgKiB0aGUgZG9jdW1lbnQuXG4gICAgICovXG4gICAgdGhpcy5yZW1vdmVMYXllciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAobGF5ZXJzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgIGFjdGl2ZUxheWVySW5kZXggPSB0aGlzLmdldEFjdGl2ZUxheWVySW5kZXgoKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgYWRkVW5kbyhuZXcgQ1BVbmRvUmVtb3ZlTGF5ZXIoYWN0aXZlTGF5ZXJJbmRleCwgY3VyTGF5ZXIpKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgbGF5ZXJzLnNwbGljZShhY3RpdmVMYXllckluZGV4LCAxKTtcbiAgICAgICAgICAgIHRoaXMuc2V0QWN0aXZlTGF5ZXJJbmRleChhY3RpdmVMYXllckluZGV4IDwgbGF5ZXJzLmxlbmd0aCA/IGFjdGl2ZUxheWVySW5kZXggOiBhY3RpdmVMYXllckluZGV4IC0gMSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGludmFsaWRhdGVGdXNpb24oKTtcbiAgICAgICAgICAgIGNhbGxMaXN0ZW5lcnNMYXllckNoYW5nZSgpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH07XG5cbiAgICB0aGlzLmR1cGxpY2F0ZUxheWVyID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBcbiAgICAgICAgICAgIGNvcHlTdWZmaXggPSBcIiBDb3B5XCIsXG4gICAgICAgICAgICBuZXdMYXllciA9IG5ldyBDUExheWVyKHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0KSxcbiAgICAgICAgICAgIGFjdGl2ZUxheWVySW5kZXggPSB0aGlzLmdldEFjdGl2ZUxheWVySW5kZXgoKTtcblxuICAgICAgICBhZGRVbmRvKG5ldyBDUFVuZG9EdXBsaWNhdGVMYXllcihhY3RpdmVMYXllckluZGV4KSk7XG4gICAgICAgIFxuICAgICAgICBuZXdMYXllci5jb3B5RnJvbShsYXllcnNbYWN0aXZlTGF5ZXJJbmRleF0pO1xuICAgICAgICBcbiAgICAgICAgaWYgKCFuZXdMYXllci5uYW1lLmVuZHNXaXRoKGNvcHlTdWZmaXgpKSB7XG4gICAgICAgICAgICBuZXdMYXllci5uYW1lICs9IGNvcHlTdWZmaXg7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGxheWVycy5zcGxpY2UoYWN0aXZlTGF5ZXJJbmRleCArIDEsIDAsIG5ld0xheWVyKTtcbiAgICAgICAgdGhpcy5zZXRBY3RpdmVMYXllckluZGV4KGFjdGl2ZUxheWVySW5kZXggKyAxKTtcbiAgICAgICAgXG4gICAgICAgIGludmFsaWRhdGVGdXNpb24oKTtcbiAgICAgICAgY2FsbExpc3RlbmVyc0xheWVyQ2hhbmdlKCk7XG4gICAgfTtcbiAgICBcbiAgICB0aGlzLm1lcmdlRG93biA9IGZ1bmN0aW9uKGNyZWF0ZVVuZG8pIHtcbiAgICAgICAgdmFyXG4gICAgICAgICAgICBhY3RpdmVMYXllckluZGV4ID0gdGhpcy5nZXRBY3RpdmVMYXllckluZGV4KCk7XG4gICAgICAgIFxuICAgICAgICBpZiAobGF5ZXJzLmxlbmd0aCA+IDEgJiYgYWN0aXZlTGF5ZXJJbmRleCA+IDApIHtcbiAgICAgICAgICAgIGlmIChjcmVhdGVVbmRvKSB7XG4gICAgICAgICAgICAgICAgYWRkVW5kbyhuZXcgQ1BVbmRvTWVyZ2VEb3duTGF5ZXIoYWN0aXZlTGF5ZXJJbmRleCkpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBsYXllcnNbYWN0aXZlTGF5ZXJJbmRleF0uZnVzaW9uV2l0aEZ1bGxBbHBoYShsYXllcnNbYWN0aXZlTGF5ZXJJbmRleCAtIDFdLCB0aGlzLmdldEJvdW5kcygpKTtcbiAgICAgICAgICAgIGxheWVycy5zcGxpY2UoYWN0aXZlTGF5ZXJJbmRleCwgMSk7XG4gICAgICAgICAgICB0aGlzLnNldEFjdGl2ZUxheWVySW5kZXgoYWN0aXZlTGF5ZXJJbmRleCAtIDEpO1xuXG4gICAgICAgICAgICBpbnZhbGlkYXRlRnVzaW9uKCk7XG4gICAgICAgICAgICBjYWxsTGlzdGVuZXJzTGF5ZXJDaGFuZ2UoKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICB0aGlzLm1lcmdlQWxsTGF5ZXJzID0gZnVuY3Rpb24oY3JlYXRlVW5kbykge1xuICAgICAgICBpZiAobGF5ZXJzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgIGlmIChjcmVhdGVVbmRvKSB7XG4gICAgICAgICAgICAgICAgYWRkVW5kbyhuZXcgQ1BVbmRvTWVyZ2VBbGxMYXllcnMoKSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoYXQuZnVzaW9uTGF5ZXJzKCk7XG4gICAgICAgICAgICBsYXllcnMgPSBbXTtcblxuICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgbGF5ZXIgPSBuZXcgQ1BMYXllcih0aGF0LndpZHRoLCB0aGF0LmhlaWdodCwgdGhpcy5nZXREZWZhdWx0TGF5ZXJOYW1lKCkpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBsYXllci5jb3B5RGF0YUZyb20oZnVzaW9uKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgbGF5ZXJzLnB1c2gobGF5ZXIpO1xuICAgICAgICAgICAgdGhpcy5zZXRBY3RpdmVMYXllckluZGV4KDApO1xuXG4gICAgICAgICAgICBpbnZhbGlkYXRlRnVzaW9uKCk7XG4gICAgICAgICAgICBjYWxsTGlzdGVuZXJzTGF5ZXJDaGFuZ2UoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgXG4gICAgZnVuY3Rpb24gbW92ZUxheWVyUmVhbChmcm9tLCB0bykge1xuICAgICAgICB2YXJcbiAgICAgICAgICAgIGxheWVyID0gbGF5ZXJzLnNwbGljZShmcm9tLCAxKVswXTtcbiAgICAgICAgXG4gICAgICAgIGlmICh0byA8PSBmcm9tKSB7XG4gICAgICAgICAgICBsYXllcnMuc3BsaWNlKHRvLCAwLCBsYXllcik7XG4gICAgICAgICAgICB0aGF0LnNldEFjdGl2ZUxheWVySW5kZXgodG8pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbGF5ZXJzLnNwbGljZSh0byAtIDEsIDAsIGxheWVyKTtcbiAgICAgICAgICAgIHRoYXQuc2V0QWN0aXZlTGF5ZXJJbmRleCh0byAtIDEpO1xuICAgICAgICB9XG5cbiAgICAgICAgaW52YWxpZGF0ZUZ1c2lvbigpO1xuICAgICAgICBjYWxsTGlzdGVuZXJzTGF5ZXJDaGFuZ2UoKTtcbiAgICB9XG4gICAgXG4gICAgLyoqXG4gICAgICogTW92ZSBhIGxheWVyIGluIHRoZSBzdGFjayBmcm9tIG9uZSBpbmRleCB0byBhbm90aGVyLlxuICAgICAqIFxuICAgICAqIEBwYXJhbSBmcm9tIGludFxuICAgICAqIEBwYXJhbSB0byBpbnRcbiAgICAgKi9cbiAgICB0aGlzLm1vdmVMYXllciA9IGZ1bmN0aW9uKGZyb20sIHRvKSB7XG4gICAgICAgIGlmIChmcm9tIDwgMCB8fCBmcm9tID49IHRoaXMuZ2V0TGF5ZXJDb3VudCgpIHx8IHRvIDwgMCB8fCB0byA+IHRoaXMuZ2V0TGF5ZXJDb3VudCgpIHx8IGZyb20gPT0gdG8pIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgYWRkVW5kbyhuZXcgQ1BVbmRvTW92ZUxheWVyKGZyb20sIHRvKSk7XG4gICAgICAgIG1vdmVMYXllclJlYWwoZnJvbSwgdG8pO1xuICAgIH1cbiAgICBcbiAgICB0aGlzLnNldExheWVyQWxwaGEgPSBmdW5jdGlvbihsYXllckluZGV4LCBhbHBoYSkge1xuICAgICAgICB2YXJcbiAgICAgICAgICAgIGxheWVyID0gdGhpcy5nZXRMYXllcihsYXllckluZGV4KTtcbiAgICAgICAgXG4gICAgICAgIGlmIChsYXllci5nZXRBbHBoYSgpICE9IGFscGhhKSB7XG4gICAgICAgICAgICBhZGRVbmRvKG5ldyBDUFVuZG9MYXllckFscGhhKGxheWVySW5kZXgsIGFscGhhKSk7XG4gICAgICAgICAgICBsYXllci5zZXRBbHBoYShhbHBoYSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGludmFsaWRhdGVGdXNpb24oKTtcbiAgICAgICAgICAgIGNhbGxMaXN0ZW5lcnNMYXllckNoYW5nZShsYXllckluZGV4KTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICB0aGlzLnNldExheWVyQmxlbmRNb2RlID0gZnVuY3Rpb24obGF5ZXJJbmRleCwgYmxlbmRNb2RlKSB7XG4gICAgICAgIHZhclxuICAgICAgICAgICAgbGF5ZXIgPSB0aGlzLmdldExheWVyKGxheWVySW5kZXgpO1xuICAgIFxuICAgICAgICBpZiAobGF5ZXIuZ2V0QmxlbmRNb2RlKCkgIT0gYmxlbmRNb2RlKSB7XG4gICAgICAgICAgICBhZGRVbmRvKG5ldyBDUFVuZG9MYXllck1vZGUobGF5ZXJJbmRleCwgYmxlbmRNb2RlKSk7XG4gICAgICAgICAgICBsYXllci5zZXRCbGVuZE1vZGUoYmxlbmRNb2RlKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaW52YWxpZGF0ZUZ1c2lvbigpO1xuICAgICAgICAgICAgY2FsbExpc3RlbmVyc0xheWVyQ2hhbmdlKGxheWVySW5kZXgpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIHRoaXMuc2V0TGF5ZXJOYW1lID0gZnVuY3Rpb24obGF5ZXJJbmRleCwgbmFtZSkge1xuICAgICAgICB2YXJcbiAgICAgICAgICAgIGxheWVyID0gdGhpcy5nZXRMYXllcihsYXllckluZGV4KTtcbiAgICAgICAgXG4gICAgICAgIGlmIChsYXllciAmJiBsYXllci5uYW1lICE9IG5hbWUpIHtcbiAgICAgICAgICAgIGFkZFVuZG8obmV3IENQVW5kb0xheWVyUmVuYW1lKGxheWVySW5kZXgsIG5hbWUpKTtcbiAgICAgICAgICAgIGxheWVyLm5hbWUgPSBuYW1lO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjYWxsTGlzdGVuZXJzTGF5ZXJDaGFuZ2UobGF5ZXJJbmRleCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFxuICAgIGZ1bmN0aW9uIENQQnJ1c2hUb29sQmFzZSgpIHtcbiAgICB9XG4gICAgXG4gICAgQ1BCcnVzaFRvb2xCYXNlLnByb3RvdHlwZS5iZWdpblN0cm9rZSA9IGZ1bmN0aW9uKHgsIHksIHByZXNzdXJlKSB7XG4gICAgICAgIHByZXBhcmVGb3JMYXllclVuZG8oKTtcbiAgICAgICAgdW5kb0FyZWEubWFrZUVtcHR5KCk7XG5cbiAgICAgICAgb3BhY2l0eUJ1ZmZlci5jbGVhckFsbCgwKTtcbiAgICAgICAgb3BhY2l0eUFyZWEubWFrZUVtcHR5KCk7XG5cbiAgICAgICAgbGFzdFggPSB4O1xuICAgICAgICBsYXN0WSA9IHk7XG4gICAgICAgIGxhc3RQcmVzc3VyZSA9IHByZXNzdXJlO1xuICAgICAgICBcbiAgICAgICAgdGhpcy5jcmVhdGVBbmRQYWludERhYih4LCB5LCBwcmVzc3VyZSk7XG4gICAgfTtcblxuICAgIENQQnJ1c2hUb29sQmFzZS5wcm90b3R5cGUuY29udGludWVTdHJva2UgPSBmdW5jdGlvbih4LCB5LCBwcmVzc3VyZSkge1xuICAgICAgICB2YXIgXG4gICAgICAgICAgICBkaXN0ID0gTWF0aC5zcXJ0KCgobGFzdFggLSB4KSAqIChsYXN0WCAtIHgpICsgKGxhc3RZIC0geSkgKiAobGFzdFkgLSB5KSkpLFxuICAgICAgICAgICAgc3BhY2luZyA9IE1hdGgubWF4KGN1ckJydXNoLm1pblNwYWNpbmcsIGN1ckJydXNoLmN1clNpemUgKiBjdXJCcnVzaC5zcGFjaW5nKTtcblxuICAgICAgICBpZiAoZGlzdCA+IHNwYWNpbmcpIHtcbiAgICAgICAgICAgIHZhciBcbiAgICAgICAgICAgICAgICBueCA9IGxhc3RYLCBueSA9IGxhc3RZLCBucCA9IGxhc3RQcmVzc3VyZSxcbiAgICAgICAgICAgICAgICBkZiA9IChzcGFjaW5nIC0gMC4wMDEpIC8gZGlzdDtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZm9yICh2YXIgZiA9IGRmOyBmIDw9IDEuMDsgZiArPSBkZikge1xuICAgICAgICAgICAgICAgIG54ID0gZiAqIHggKyAoMS4wIC0gZikgKiBsYXN0WDtcbiAgICAgICAgICAgICAgICBueSA9IGYgKiB5ICsgKDEuMCAtIGYpICogbGFzdFk7XG4gICAgICAgICAgICAgICAgbnAgPSBmICogcHJlc3N1cmUgKyAoMS4wIC0gZikgKiBsYXN0UHJlc3N1cmU7XG4gICAgICAgICAgICAgICAgdGhpcy5jcmVhdGVBbmRQYWludERhYihueCwgbnksIG5wKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxhc3RYID0gbng7XG4gICAgICAgICAgICBsYXN0WSA9IG55O1xuICAgICAgICAgICAgbGFzdFByZXNzdXJlID0gbnA7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgQ1BCcnVzaFRvb2xCYXNlLnByb3RvdHlwZS5lbmRTdHJva2UgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdW5kb0FyZWEuY2xpcCh0aGF0LmdldEJvdW5kcygpKTtcblxuICAgICAgICAvLyBEaWQgd2UgZW5kIHVwIHBhaW50aW5nIGFueXRoaW5nP1xuICAgICAgICBpZiAoIXVuZG9BcmVhLmlzRW1wdHkoKSkge1xuICAgICAgICAgICAgbWVyZ2VPcGFjaXR5QnVmZmVyKGN1ckNvbG9yLCBmYWxzZSk7XG4gICAgICAgICAgICBhZGRVbmRvKG5ldyBDUFVuZG9QYWludCgpKTtcblxuICAgICAgICAgICAgLyogRWFnZXJseSB1cGRhdGUgdGhlIHVuZG8gYnVmZmVyIGZvciBuZXh0IHRpbWUgc28gd2UgY2FuIGF2b2lkIHRoaXMgbGVuZ3RoeVxuICAgICAgICAgICAgICogcHJlcGFyZSBhdCB0aGUgYmVnaW5uaW5nIG9mIGEgcGFpbnQgc3Ryb2tlXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIHByZXBhcmVGb3JMYXllclVuZG8oKTsgXG4gICAgICAgIH1cbiAgICAgICAgYnJ1c2hCdWZmZXIgPSBudWxsO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSBwYWludCBkYWIgYXQgdGhlIGdpdmVuIHBvc2l0aW9uIHVzaW5nIHRoZSBjdXJyZW50IGJydXNoLCBhbmQgcGFpbnQgaXQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0geCBmbG9hdFxuICAgICAqIEBwYXJhbSB5IGZsb2F0XG4gICAgICogQHBhcmFtIHByZXNzdXJlIGZsb2F0XG4gICAgICovXG4gICAgQ1BCcnVzaFRvb2xCYXNlLnByb3RvdHlwZS5jcmVhdGVBbmRQYWludERhYiA9IGZ1bmN0aW9uKHgsIHksIHByZXNzdXJlKSB7XG4gICAgICAgIGN1ckJydXNoLmFwcGx5UHJlc3N1cmUocHJlc3N1cmUpO1xuICAgICAgICBcbiAgICAgICAgaWYgKGN1ckJydXNoLnNjYXR0ZXJpbmcgPiAwLjApIHtcbiAgICAgICAgICAgIHggKz0gcm5kLm5leHRHYXVzc2lhbigpICogY3VyQnJ1c2guY3VyU2NhdHRlcmluZyAvIDQuMDtcbiAgICAgICAgICAgIHkgKz0gcm5kLm5leHRHYXVzc2lhbigpICogY3VyQnJ1c2guY3VyU2NhdHRlcmluZyAvIDQuMDtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgdmFyIFxuICAgICAgICAgICAgZGFiID0gYnJ1c2hNYW5hZ2VyLmdldERhYih4LCB5LCBjdXJCcnVzaCk7XG4gICAgICAgIFxuICAgICAgICB0aGlzLnBhaW50RGFiKGRhYik7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFBhaW50IGEgZGFiIHJldHVybmVkIGJ5IGJydXNoTWFuYWdlci5nZXREYWIoKVxuICAgICAqXG4gICAgICogQHBhcmFtIGRhYiB7Ynl0ZVtdIGJydXNoOyBpbnQgeCwgeSwgYWxwaGEsIHdpZHRoLCBoZWlnaHR9XG4gICAgICovXG4gICAgQ1BCcnVzaFRvb2xCYXNlLnByb3RvdHlwZS5wYWludERhYiA9IGZ1bmN0aW9uKGRhYikge1xuICAgICAgICB2YXJcbiAgICAgICAgICAgIHNyY1JlY3QgPSBuZXcgQ1BSZWN0KDAsIDAsIGRhYi53aWR0aCwgZGFiLmhlaWdodCksXG4gICAgICAgICAgICBkc3RSZWN0ID0gbmV3IENQUmVjdCgwLCAwLCBkYWIud2lkdGgsIGRhYi5oZWlnaHQpO1xuICAgICAgICBcbiAgICAgICAgZHN0UmVjdC50cmFuc2xhdGUoZGFiLngsIGRhYi55KTtcblxuICAgICAgICBjbGlwU291cmNlRGVzdChzcmNSZWN0LCBkc3RSZWN0KTtcblxuICAgICAgICAvLyBkcmF3aW5nIGVudGlyZWx5IG91dHNpZGUgdGhlIGNhbnZhc1xuICAgICAgICBpZiAoZHN0UmVjdC5pc0VtcHR5KCkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHVuZG9BcmVhLnVuaW9uKGRzdFJlY3QpO1xuICAgICAgICBvcGFjaXR5QXJlYS51bmlvbihkc3RSZWN0KTtcblxuICAgICAgICB0aGlzLnBhaW50RGFiSW1wbGVtZW50YXRpb24oc3JjUmVjdCwgZHN0UmVjdCwgZGFiKTtcbiAgICAgICAgXG4gICAgICAgIGludmFsaWRhdGVGdXNpb25SZWN0KGRzdFJlY3QpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIENQQnJ1c2hUb29sU2ltcGxlQnJ1c2goKSB7XG4gICAgfVxuXG4gICAgQ1BCcnVzaFRvb2xTaW1wbGVCcnVzaC5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKENQQnJ1c2hUb29sQmFzZS5wcm90b3R5cGUpO1xuICAgIENQQnJ1c2hUb29sU2ltcGxlQnJ1c2gucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gQ1BCcnVzaFRvb2xTaW1wbGVCcnVzaDsgXG4gICAgXG4gICAgQ1BCcnVzaFRvb2xTaW1wbGVCcnVzaC5wcm90b3R5cGUucGFpbnREYWJJbXBsZW1lbnRhdGlvbiA9IGZ1bmN0aW9uKHNyY1JlY3QsIGRzdFJlY3QsIGRhYikge1xuICAgICAgICAvLyBGSVhNRTogdGhlcmUgc2hvdWxkIGJlIG5vIHJlZmVyZW5jZSB0byBhIHNwZWNpZmljIHRvb2wgaGVyZVxuICAgICAgICAvLyBjcmVhdGUgYSBuZXcgYnJ1c2ggcGFyYW1ldGVyIGluc3RlYWRcbiAgICAgICAgaWYgKGN1ckJydXNoLmlzQWlyYnJ1c2gpIHtcbiAgICAgICAgICAgIHRoaXMucGFpbnRGbG93KHNyY1JlY3QsIGRzdFJlY3QsIGRhYi5icnVzaCwgZGFiLndpZHRoLCBNYXRoLm1heCgxLCBkYWIuYWxwaGEgLyA4KSk7XG4gICAgICAgIH0gZWxzZSBpZiAoY3VyQnJ1c2gudG9vbE5iID09IENoaWNrZW5QYWludC5UX1BFTikge1xuICAgICAgICAgICAgdGhpcy5wYWludEZsb3coc3JjUmVjdCwgZHN0UmVjdCwgZGFiLmJydXNoLCBkYWIud2lkdGgsIE1hdGgubWF4KDEsIGRhYi5hbHBoYSAvIDIpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMucGFpbnRPcGFjaXR5KHNyY1JlY3QsIGRzdFJlY3QsIGRhYi5icnVzaCwgZGFiLndpZHRoLCBkYWIuYWxwaGEpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIENQQnJ1c2hUb29sU2ltcGxlQnJ1c2gucHJvdG90eXBlLm1lcmdlT3BhY2l0eUJ1ZiA9IGZ1bmN0aW9uKGRzdFJlY3QsIGNvbG9yIC8qIGludCAqLykge1xuICAgICAgICB2YXIgXG4gICAgICAgICAgICBvcGFjaXR5RGF0YSA9IG9wYWNpdHlCdWZmZXIuZGF0YSxcbiAgICAgICAgICAgIHVuZG9EYXRhID0gdW5kb0J1ZmZlci5kYXRhLFxuICAgICAgICAgICAgXG4gICAgICAgICAgICByZWQgPSAoY29sb3IgPj4gMTYpICYgMHhGRixcbiAgICAgICAgICAgIGdyZWVuID0gKGNvbG9yID4+IDgpICYgMHhGRixcbiAgICAgICAgICAgIGJsdWUgPSBjb2xvciAmIDB4RkYsXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHdpZHRoID0gZHN0UmVjdC5nZXRXaWR0aCgpIHwgMCxcbiAgICAgICAgICAgIGhlaWdodCA9IGRzdFJlY3QuZ2V0SGVpZ2h0KCkgfCAwLFxuICAgICAgICAgICAgXG4gICAgICAgICAgICBkc3RPZmZzZXQgPSBjdXJMYXllci5vZmZzZXRPZlBpeGVsKGRzdFJlY3QubGVmdCwgZHN0UmVjdC50b3ApLFxuICAgICAgICAgICAgc3JjT2Zmc2V0ID0gb3BhY2l0eUJ1ZmZlci5vZmZzZXRPZlBpeGVsKGRzdFJlY3QubGVmdCwgZHN0UmVjdC50b3ApLFxuICAgICAgICBcbiAgICAgICAgICAgIHNyY1lTdHJpZGUgPSAob3BhY2l0eUJ1ZmZlci53aWR0aCAtIHdpZHRoKSB8IDAsXG4gICAgICAgICAgICBkc3RZU3RyaWRlID0gKChjdXJMYXllci53aWR0aCAtIHdpZHRoKSAqIENQQ29sb3JCbXAuQllURVNfUEVSX1BJWEVMKSB8IDA7XG5cbiAgICAgICAgZm9yICh2YXIgeSA9IDA7IHkgPCBoZWlnaHQ7IHkrKywgc3JjT2Zmc2V0ICs9IHNyY1lTdHJpZGUsIGRzdE9mZnNldCArPSBkc3RZU3RyaWRlKSB7XG4gICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IHdpZHRoOyB4KyssIHNyY09mZnNldCsrLCBkc3RPZmZzZXQgKz0gQ1BDb2xvckJtcC5CWVRFU19QRVJfUElYRUwpIHtcbiAgICAgICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eUFscGhhID0gKG9wYWNpdHlEYXRhW3NyY09mZnNldF0gLyAyNTUpIHwgMDtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBpZiAob3BhY2l0eUFscGhhID4gMCkge1xuICAgICAgICAgICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlc3RBbHBoYSA9IHVuZG9EYXRhW2RzdE9mZnNldCArIENQQ29sb3JCbXAuQUxQSEFfQllURV9PRkZTRVRdLFxuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld0xheWVyQWxwaGEgPSAob3BhY2l0eUFscGhhICsgZGVzdEFscGhhICogKDI1NSAtIG9wYWNpdHlBbHBoYSkgLyAyNTUpIHwgMCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlYWxBbHBoYSA9ICgyNTUgKiBvcGFjaXR5QWxwaGEgLyBuZXdMYXllckFscGhhKSB8IDAsXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnZBbHBoYSA9IDI1NSAtIHJlYWxBbHBoYTtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGN1ckxheWVyLmRhdGFbZHN0T2Zmc2V0XSA9ICgocmVkICogcmVhbEFscGhhICsgdW5kb0RhdGFbZHN0T2Zmc2V0XSAqIGludkFscGhhKSAvIDI1NSkgJiAweGZmO1xuICAgICAgICAgICAgICAgICAgICBjdXJMYXllci5kYXRhW2RzdE9mZnNldCArIDFdID0gKChncmVlbiAqIHJlYWxBbHBoYSArIHVuZG9EYXRhW2RzdE9mZnNldCArIDFdICogaW52QWxwaGEpIC8gMjU1KSAmIDB4ZmY7XG4gICAgICAgICAgICAgICAgICAgIGN1ckxheWVyLmRhdGFbZHN0T2Zmc2V0ICsgMl0gPSAoKGJsdWUgKiByZWFsQWxwaGEgKyB1bmRvRGF0YVtkc3RPZmZzZXQgKyAyXSAqIGludkFscGhhKSAvIDI1NSkgJiAweGZmO1xuICAgICAgICAgICAgICAgICAgICBjdXJMYXllci5kYXRhW2RzdE9mZnNldCArIDNdID0gbmV3TGF5ZXJBbHBoYTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBAcGFyYW0gc3JjUmVjdCBDUFJlY3RcbiAgICAgKiBAcGFyYW0gZHN0UmVjdCBDUFJlY3RcbiAgICAgKiBAcGFyYW0gYnJ1c2ggaW50W11cbiAgICAgKiBAcGFyYW0gYnJ1c2hXaWR0aCBpbnRcbiAgICAgKiBAcGFyYW0gYWxwaGEgZmxvYXRcbiAgICAgKi9cbiAgICBDUEJydXNoVG9vbFNpbXBsZUJydXNoLnByb3RvdHlwZS5wYWludE9wYWNpdHkgPSBmdW5jdGlvbihzcmNSZWN0LCBkc3RSZWN0LCBicnVzaCwgYnJ1c2hXaWR0aCwgYWxwaGEpIHtcbiAgICAgICAgdmFyIFxuICAgICAgICAgICAgb3BhY2l0eURhdGEgPSBvcGFjaXR5QnVmZmVyLmRhdGEsXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHNyY09mZnNldCA9IHNyY1JlY3QubGVmdCArIHNyY1JlY3QudG9wICogYnJ1c2hXaWR0aCxcbiAgICAgICAgICAgIGRzdE9mZnNldCA9IG9wYWNpdHlCdWZmZXIub2Zmc2V0T2ZQaXhlbChkc3RSZWN0LmxlZnQsIGRzdFJlY3QudG9wKSxcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZHN0V2lkdGggPSBkc3RSZWN0LmdldFdpZHRoKCksXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHNyY1lTdHJpZGUgPSBicnVzaFdpZHRoIC0gZHN0V2lkdGgsXG4gICAgICAgICAgICBkc3RZU3RyaWRlID0gdGhhdC53aWR0aCAtIGRzdFdpZHRoO1xuXG4gICAgICAgIGFscGhhID0gTWF0aC5taW4oMjU1LCBhbHBoYSk7XG5cbiAgICAgICAgZm9yICh2YXIgeSA9IGRzdFJlY3QudG9wOyB5IDwgZHN0UmVjdC5ib3R0b207IHkrKywgc3JjT2Zmc2V0ICs9IHNyY1lTdHJpZGUsIGRzdE9mZnNldCArPSBkc3RZU3RyaWRlKSB7XG4gICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IGRzdFdpZHRoOyB4KyssIHNyY09mZnNldCsrLCBkc3RPZmZzZXQrKykge1xuICAgICAgICAgICAgICAgIG9wYWNpdHlEYXRhW2RzdE9mZnNldF0gPSBNYXRoLm1heChicnVzaFtzcmNPZmZzZXRdICogYWxwaGEsIG9wYWNpdHlEYXRhW2RzdE9mZnNldF0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcblxuICAgIENQQnJ1c2hUb29sU2ltcGxlQnJ1c2gucHJvdG90eXBlLnBhaW50RmxvdyA9IGZ1bmN0aW9uKHNyY1JlY3QsIGRzdFJlY3QsIGJydXNoLCBicnVzaFdpZHRoLCBhbHBoYSkge1xuICAgICAgICB2YXIgXG4gICAgICAgICAgICBvcGFjaXR5RGF0YSA9IG9wYWNpdHlCdWZmZXIuZGF0YSxcblxuICAgICAgICAgICAgc3JjT2Zmc2V0ID0gc3JjUmVjdC5sZWZ0ICsgc3JjUmVjdC50b3AgKiBicnVzaFdpZHRoLFxuICAgICAgICAgICAgZHN0T2Zmc2V0ID0gb3BhY2l0eUJ1ZmZlci5vZmZzZXRPZlBpeGVsKGRzdFJlY3QubGVmdCwgZHN0UmVjdC50b3ApLFxuICAgICAgICAgICAgXG4gICAgICAgICAgICBkc3RXaWR0aCA9IGRzdFJlY3QuZ2V0V2lkdGgoKSxcblxuICAgICAgICAgICAgc3JjWVN0cmlkZSA9IGJydXNoV2lkdGggLSBkc3RXaWR0aCxcbiAgICAgICAgICAgIGRzdFlTdHJpZGUgPSB0aGF0LndpZHRoIC0gZHN0V2lkdGg7XG4gICAgICAgIFxuICAgICAgICBmb3IgKHZhciB5ID0gZHN0UmVjdC50b3A7IHkgPCBkc3RSZWN0LmJvdHRvbTsgeSsrLCBzcmNPZmZzZXQgKz0gc3JjWVN0cmlkZSwgZHN0T2Zmc2V0ICs9IGRzdFlTdHJpZGUpIHtcbiAgICAgICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgZHN0V2lkdGg7IHgrKywgc3JjT2Zmc2V0KyssIGRzdE9mZnNldCsrKSB7XG4gICAgICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgICAgIGJydXNoQWxwaGEgPSBicnVzaFtzcmNPZmZzZXRdICogYWxwaGE7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgaWYgKGJydXNoQWxwaGEgIT0gMCkge1xuICAgICAgICAgICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wYWNpdHlBbHBoYSA9IE1hdGgubWluKDI1NSAqIDI1NSwgb3BhY2l0eURhdGFbZHN0T2Zmc2V0XSArICgyNTUgLSBvcGFjaXR5RGF0YVtkc3RPZmZzZXRdIC8gMjU1KSAqIGJydXNoQWxwaGEgLyAyNTUpO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eURhdGFbZHN0T2Zmc2V0XSA9IG9wYWNpdHlBbHBoYTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgLypDUEJydXNoVG9vbFNpbXBsZUJydXNoLnByb3RvdHlwZS5wYWludE9wYWNpdHlGbG93ID0gZnVuY3Rpb24oc3JjUmVjdCwgZHN0UmVjdCwgYnJ1c2gsIGJydXNoV2lkdGgsIG9wYWNpdHksIGZsb3cpIHtcbiAgICAgICAgdmFyIFxuICAgICAgICAgICAgb3BhY2l0eURhdGEgPSBvcGFjaXR5QnVmZmVyLmRhdGEsXG5cbiAgICAgICAgICAgIGJ5ID0gc3JjUmVjdC50b3A7XG4gICAgICAgIFxuICAgICAgICBmb3IgKHZhciB5ID0gZHN0UmVjdC50b3A7IHkgPCBkc3RSZWN0LmJvdHRvbTsgeSsrLCBieSsrKSB7XG4gICAgICAgICAgICB2YXIgXG4gICAgICAgICAgICAgICAgc3JjT2Zmc2V0ID0gc3JjUmVjdC5sZWZ0ICsgYnkgKiBicnVzaFdpZHRoLFxuICAgICAgICAgICAgICAgIGRzdE9mZnNldCA9IGRzdFJlY3QubGVmdCArIHkgKiB3aWR0aDtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZm9yICh2YXIgeCA9IGRzdFJlY3QubGVmdDsgeCA8IGRzdFJlY3QucmlnaHQ7IHgrKywgc3JjT2Zmc2V0KyssIGRzdE9mZnNldCsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIFxuICAgICAgICAgICAgICAgICAgICBicnVzaEFscGhhID0gYnJ1c2hbc3JjT2Zmc2V0XSAqIGZsb3c7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgaWYgKGJydXNoQWxwaGEgIT0gMCkge1xuICAgICAgICAgICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wYWNpdHlBbHBoYSA9IG9wYWNpdHlEYXRhW2RzdE9mZnNldF0sXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdBbHBoYSA9IE1hdGgubWluKDI1NSAqIDI1NSwgb3BhY2l0eUFscGhhICsgKG9wYWNpdHkgLSBvcGFjaXR5QWxwaGEgLyAyNTUpICogYnJ1c2hBbHBoYSAvIDI1NSk7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBuZXdBbHBoYSA9IE1hdGgubWluKG9wYWNpdHkgKiBicnVzaFtzcmNPZmZzZXRdLCBuZXdBbHBoYSk7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAobmV3QWxwaGEgPiBvcGFjaXR5QWxwaGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wYWNpdHlEYXRhW2RzdE9mZnNldF0gPSBuZXdBbHBoYTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07Ki9cblxuICAgIGZ1bmN0aW9uIENQQnJ1c2hUb29sRXJhc2VyKCkge1xuICAgIH1cbiAgICBcbiAgICBDUEJydXNoVG9vbEVyYXNlci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKENQQnJ1c2hUb29sU2ltcGxlQnJ1c2gucHJvdG90eXBlKTtcbiAgICBDUEJydXNoVG9vbEVyYXNlci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBDUEJydXNoVG9vbEVyYXNlcjtcbiAgICBcbiAgICBDUEJydXNoVG9vbEVyYXNlci5wcm90b3R5cGUubWVyZ2VPcGFjaXR5QnVmID0gZnVuY3Rpb24oZHN0UmVjdCwgY29sb3IpIHtcbiAgICAgICAgdmFyIFxuICAgICAgICAgICAgb3BhY2l0eURhdGEgPSBvcGFjaXR5QnVmZmVyLmRhdGEsXG4gICAgICAgICAgICB1bmRvRGF0YSA9IHVuZG9CdWZmZXIuZGF0YTtcbiAgICBcbiAgICAgICAgZm9yICh2YXIgeSA9IGRzdFJlY3QudG9wOyB5IDwgZHN0UmVjdC5ib3R0b207IHkrKykge1xuICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgZHN0T2Zmc2V0ID0gY3VyTGF5ZXIub2Zmc2V0T2ZQaXhlbChkc3RSZWN0LmxlZnQsIHkpICsgQ1BDb2xvckJtcC5BTFBIQV9CWVRFX09GRlNFVCxcbiAgICAgICAgICAgICAgICBzcmNPZmZzZXQgPSBvcGFjaXR5QnVmZmVyLm9mZnNldE9mUGl4ZWwoZHN0UmVjdC5sZWZ0LCB5KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZm9yICh2YXIgeCA9IGRzdFJlY3QubGVmdDsgeCA8IGRzdFJlY3QucmlnaHQ7IHgrKywgZHN0T2Zmc2V0ICs9IENQQ29sb3JCbXAuQllURVNfUEVSX1BJWEVMKSB7XG4gICAgICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgICAgIG9wYWNpdHlBbHBoYSA9IChvcGFjaXR5RGF0YVtzcmNPZmZzZXQrK10gLyAyNTUpIHwgMDtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBpZiAob3BhY2l0eUFscGhhID4gMCkge1xuICAgICAgICAgICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlc3RBbHBoYSA9IHVuZG9EYXRhW2RzdE9mZnNldF0sXG4gICAgICAgICAgICAgICAgICAgICAgICByZWFsQWxwaGEgPSBkZXN0QWxwaGEgKiAoMjU1IC0gb3BhY2l0eUFscGhhKSAvIDI1NTtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGN1ckxheWVyLmRhdGFbZHN0T2Zmc2V0XSA9IHJlYWxBbHBoYTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gQ1BCcnVzaFRvb2xEb2RnZSgpIHtcbiAgICB9XG4gICAgXG4gICAgQ1BCcnVzaFRvb2xEb2RnZS5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKENQQnJ1c2hUb29sU2ltcGxlQnJ1c2gucHJvdG90eXBlKTtcbiAgICBDUEJydXNoVG9vbERvZGdlLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IENQQnJ1c2hUb29sRG9kZ2U7XG4gICAgXG4gICAgQ1BCcnVzaFRvb2xEb2RnZS5wcm90b3R5cGUubWVyZ2VPcGFjaXR5QnVmID0gZnVuY3Rpb24oZHN0UmVjdCwgY29sb3IpIHtcbiAgICAgICAgdmFyIFxuICAgICAgICAgICAgb3BhY2l0eURhdGEgPSBvcGFjaXR5QnVmZmVyLmRhdGEsXG4gICAgICAgICAgICB1bmRvRGF0YSA9IHVuZG9CdWZmZXIuZGF0YTtcbiAgICBcbiAgICAgICAgZm9yICh2YXIgeSA9IGRzdFJlY3QudG9wOyB5IDwgZHN0UmVjdC5ib3R0b207IHkrKykge1xuICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgZHN0T2Zmc2V0ID0gY3VyTGF5ZXIub2Zmc2V0T2ZQaXhlbChkc3RSZWN0LmxlZnQsIHkpLFxuICAgICAgICAgICAgICAgIHNyY09mZnNldCA9IG9wYWNpdHlCdWZmZXIub2Zmc2V0T2ZQaXhlbChkc3RSZWN0LmxlZnQsIHkpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBmb3IgKHZhciB4ID0gZHN0UmVjdC5sZWZ0OyB4IDwgZHN0UmVjdC5yaWdodDsgeCsrLCBzcmNPZmZzZXQrKywgZHN0T2Zmc2V0ICs9IENQQ29sb3JCbXAuQllURVNfUEVSX1BJWEVMKSB7XG4gICAgICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgICAgIG9wYWNpdHlBbHBoYSA9IChvcGFjaXR5RGF0YVtzcmNPZmZzZXRdIC8gMjU1KSB8IDA7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgaWYgKG9wYWNpdHlBbHBoYSA+IDAgJiYgdW5kb0RhdGFbZHN0T2Zmc2V0ICsgQ1BDb2xvckJtcC5BTFBIQV9CWVRFX09GRlNFVF0gIT0gMCkge1xuICAgICAgICAgICAgICAgICAgICBvcGFjaXR5QWxwaGEgKz0gMjU1O1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAzOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjaGFubmVsID0gKHVuZG9EYXRhW2RzdE9mZnNldCArIGldICogb3BhY2l0eUFscGhhIC8gMjU1KSB8IDA7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNoYW5uZWwgPiAyNTUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFubmVsID0gMjU1O1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJMYXllci5kYXRhW2RzdE9mZnNldCArIGldID0gY2hhbm5lbDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBmdW5jdGlvbiBDUEJydXNoVG9vbEJ1cm4oKSB7XG4gICAgfVxuICAgIFxuICAgIENQQnJ1c2hUb29sQnVybi5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKENQQnJ1c2hUb29sU2ltcGxlQnJ1c2gucHJvdG90eXBlKTtcbiAgICBDUEJydXNoVG9vbEJ1cm4ucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gQ1BCcnVzaFRvb2xCdXJuO1xuICAgIFxuICAgIENQQnJ1c2hUb29sQnVybi5wcm90b3R5cGUubWVyZ2VPcGFjaXR5QnVmID0gZnVuY3Rpb24oZHN0UmVjdCwgY29sb3IpIHtcbiAgICAgICAgdmFyIFxuICAgICAgICAgICAgb3BhY2l0eURhdGEgPSBvcGFjaXR5QnVmZmVyLmRhdGEsXG4gICAgICAgICAgICB1bmRvRGF0YSA9IHVuZG9CdWZmZXIuZGF0YTtcbiAgICBcbiAgICAgICAgZm9yICh2YXIgeSA9IGRzdFJlY3QudG9wOyB5IDwgZHN0UmVjdC5ib3R0b207IHkrKykge1xuICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgZHN0T2Zmc2V0ID0gY3VyTGF5ZXIub2Zmc2V0T2ZQaXhlbChkc3RSZWN0LmxlZnQsIHkpLFxuICAgICAgICAgICAgICAgIHNyY09mZnNldCA9IG9wYWNpdHlCdWZmZXIub2Zmc2V0T2ZQaXhlbChkc3RSZWN0LmxlZnQsIHkpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBmb3IgKHZhciB4ID0gZHN0UmVjdC5sZWZ0OyB4IDwgZHN0UmVjdC5yaWdodDsgeCsrLCBzcmNPZmZzZXQrKywgZHN0T2Zmc2V0ICs9IENQQ29sb3JCbXAuQllURVNfUEVSX1BJWEVMKSB7XG4gICAgICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgICAgIG9wYWNpdHlBbHBoYSA9IChvcGFjaXR5RGF0YVtzcmNPZmZzZXRdIC8gMjU1KSB8IDA7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgaWYgKG9wYWNpdHlBbHBoYSA+IDAgJiYgdW5kb0RhdGFbZHN0T2Zmc2V0ICsgQ1BDb2xvckJtcC5BTFBIQV9CWVRFX09GRlNFVF0gIT0gMCkge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IDM7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNoYW5uZWwgPSB1bmRvRGF0YVtkc3RPZmZzZXQgKyBpXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgY2hhbm5lbCA9IChjaGFubmVsIC0gKEJVUk5fQ09OU1RBTlQgLSBjaGFubmVsKSAqIG9wYWNpdHlBbHBoYSAvIDI1NSkgfCAwO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjaGFubmVsIDwgMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5uZWwgPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJMYXllci5kYXRhW2RzdE9mZnNldCArIGldID0gY2hhbm5lbDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgXG4gICAgZnVuY3Rpb24gQ1BCcnVzaFRvb2xCbHVyKCkge1xuICAgIH1cbiAgICBcbiAgICBDUEJydXNoVG9vbEJsdXIucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShDUEJydXNoVG9vbFNpbXBsZUJydXNoLnByb3RvdHlwZSk7XG4gICAgQ1BCcnVzaFRvb2xCbHVyLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IENQQnJ1c2hUb29sQmx1cjtcblxuICAgIENQQnJ1c2hUb29sQmx1ci5wcm90b3R5cGUubWVyZ2VPcGFjaXR5QnVmID0gZnVuY3Rpb24oZHN0UmVjdCwgY29sb3IpIHtcbiAgICAgICAgdmFyIFxuICAgICAgICAgICAgb3BhY2l0eURhdGEgPSBvcGFjaXR5QnVmZmVyLmRhdGEsXG4gICAgICAgICAgICB1bmRvRGF0YSA9IHVuZG9CdWZmZXIuZGF0YSxcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZHN0WVN0cmlkZSA9IHVuZG9CdWZmZXIud2lkdGggKiBDUENvbG9yQm1wLkJZVEVTX1BFUl9QSVhFTCxcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgciwgZywgYiwgYTtcblxuICAgICAgICBmdW5jdGlvbiBhZGRTYW1wbGUoc2FtcGxlT2Zmc2V0KSB7XG4gICAgICAgICAgICByICs9IHVuZG9EYXRhW3NhbXBsZU9mZnNldCArIENQQ29sb3JCbXAuUkVEX0JZVEVfT0ZGU0VUXTtcbiAgICAgICAgICAgIGcgKz0gdW5kb0RhdGFbc2FtcGxlT2Zmc2V0ICsgQ1BDb2xvckJtcC5HUkVFTl9CWVRFX09GRlNFVF07XG4gICAgICAgICAgICBiICs9IHVuZG9EYXRhW3NhbXBsZU9mZnNldCArIENQQ29sb3JCbXAuQkxVRV9CWVRFX09GRlNFVF07XG4gICAgICAgICAgICBhICs9IHVuZG9EYXRhW3NhbXBsZU9mZnNldCArIENQQ29sb3JCbXAuQUxQSEFfQllURV9PRkZTRVRdO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBmb3IgKHZhciB5ID0gZHN0UmVjdC50b3A7IHkgPCBkc3RSZWN0LmJvdHRvbTsgeSsrKSB7XG4gICAgICAgICAgICB2YXIgXG4gICAgICAgICAgICAgICAgZHN0T2Zmc2V0ID0gdW5kb0J1ZmZlci5vZmZzZXRPZlBpeGVsKGRzdFJlY3QubGVmdCwgeSksXG4gICAgICAgICAgICAgICAgc3JjT2Zmc2V0ID0gb3BhY2l0eUJ1ZmZlci5vZmZzZXRPZlBpeGVsKGRzdFJlY3QubGVmdCwgeSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGZvciAodmFyIHggPSBkc3RSZWN0LmxlZnQ7IHggPCBkc3RSZWN0LnJpZ2h0OyB4KyssIGRzdE9mZnNldCArPSBDUENvbG9yQm1wLkJZVEVTX1BFUl9QSVhFTCwgc3JjT2Zmc2V0KyspIHtcbiAgICAgICAgICAgICAgICB2YXIgXG4gICAgICAgICAgICAgICAgICAgIG9wYWNpdHlBbHBoYSA9IChvcGFjaXR5RGF0YVtzcmNPZmZzZXRdIC8gMjU1KSB8IDA7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgaWYgKG9wYWNpdHlBbHBoYSA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgICAgICAgICBibHVyID0gKEJMVVJfTUlOICsgKEJMVVJfTUFYIC0gQkxVUl9NSU4pICogb3BhY2l0eUFscGhhIC8gMjU1KSB8IDAsXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHN1bSA9IGJsdXIgKyA0O1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgciA9IGJsdXIgKiB1bmRvRGF0YVtkc3RPZmZzZXQgKyBDUENvbG9yQm1wLlJFRF9CWVRFX09GRlNFVF07XG4gICAgICAgICAgICAgICAgICAgIGcgPSBibHVyICogdW5kb0RhdGFbZHN0T2Zmc2V0ICsgQ1BDb2xvckJtcC5HUkVFTl9CWVRFX09GRlNFVF07XG4gICAgICAgICAgICAgICAgICAgIGIgPSBibHVyICogdW5kb0RhdGFbZHN0T2Zmc2V0ICsgQ1BDb2xvckJtcC5CTFVFX0JZVEVfT0ZGU0VUXTtcbiAgICAgICAgICAgICAgICAgICAgYSA9IGJsdXIgKiB1bmRvRGF0YVtkc3RPZmZzZXQgKyBDUENvbG9yQm1wLkFMUEhBX0JZVEVfT0ZGU0VUXTtcblxuICAgICAgICAgICAgICAgICAgICBhZGRTYW1wbGUoeSA+IDAgPyBkc3RPZmZzZXQgLSBkc3RZU3RyaWRlIDogZHN0T2Zmc2V0KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkU2FtcGxlKHkgPCB1bmRvQnVmZmVyLmhlaWdodCAtIDEgPyBkc3RPZmZzZXQgKyBkc3RZU3RyaWRlIDogZHN0T2Zmc2V0KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkU2FtcGxlKHggPiAwID8gZHN0T2Zmc2V0IC0gQ1BDb2xvckJtcC5CWVRFU19QRVJfUElYRUwgOiBkc3RPZmZzZXQpO1xuICAgICAgICAgICAgICAgICAgICBhZGRTYW1wbGUoeCA8IHVuZG9CdWZmZXIud2lkdGggLSAxID8gZHN0T2Zmc2V0ICsgQ1BDb2xvckJtcC5CWVRFU19QRVJfUElYRUwgOiBkc3RPZmZzZXQpO1xuXG4gICAgICAgICAgICAgICAgICAgIGEgLz0gc3VtO1xuICAgICAgICAgICAgICAgICAgICByIC89IHN1bTtcbiAgICAgICAgICAgICAgICAgICAgZyAvPSBzdW07XG4gICAgICAgICAgICAgICAgICAgIGIgLz0gc3VtO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgY3VyTGF5ZXIuZGF0YVtkc3RPZmZzZXQgKyBDUENvbG9yQm1wLlJFRF9CWVRFX09GRlNFVF0gPSByIHwgMDtcbiAgICAgICAgICAgICAgICAgICAgY3VyTGF5ZXIuZGF0YVtkc3RPZmZzZXQgKyBDUENvbG9yQm1wLkdSRUVOX0JZVEVfT0ZGU0VUXSA9IGcgfCAwO1xuICAgICAgICAgICAgICAgICAgICBjdXJMYXllci5kYXRhW2RzdE9mZnNldCArIENQQ29sb3JCbXAuQkxVRV9CWVRFX09GRlNFVF0gPSBiIHwgMDtcbiAgICAgICAgICAgICAgICAgICAgY3VyTGF5ZXIuZGF0YVtkc3RPZmZzZXQgKyBDUENvbG9yQm1wLkFMUEhBX0JZVEVfT0ZGU0VUXSA9IGEgfCAwO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBcbiAgICAvKiBCcnVzaGVzIGRlcml2ZWQgZnJvbSB0aGlzIGNsYXNzIHVzZSB0aGUgb3BhY2l0eSBidWZmZXIgYXMgYSBzaW1wbGUgYWxwaGEgbGF5ZXIgKDMyLWJpdCBwaXhlbHMgaW4gQVJHQiBvcmRlcikgKi9cbiAgICBmdW5jdGlvbiBDUEJydXNoVG9vbERpcmVjdEJydXNoKCkge1xuICAgIH1cbiAgICBcbiAgICBDUEJydXNoVG9vbERpcmVjdEJydXNoLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoQ1BCcnVzaFRvb2xTaW1wbGVCcnVzaC5wcm90b3R5cGUpO1xuICAgIENQQnJ1c2hUb29sRGlyZWN0QnJ1c2gucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gQ1BCcnVzaFRvb2xEaXJlY3RCcnVzaDtcblxuICAgIENQQnJ1c2hUb29sRGlyZWN0QnJ1c2gucHJvdG90eXBlLm1lcmdlT3BhY2l0eUJ1ZiA9IGZ1bmN0aW9uKGRzdFJlY3QsIGNvbG9yKSB7XG4gICAgICAgIHZhciBcbiAgICAgICAgICAgIG9wYWNpdHlEYXRhID0gb3BhY2l0eUJ1ZmZlci5kYXRhLFxuICAgICAgICAgICAgdW5kb0RhdGEgPSB1bmRvQnVmZmVyLmRhdGEsXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHNyY09mZnNldCA9IG9wYWNpdHlCdWZmZXIub2Zmc2V0T2ZQaXhlbChkc3RSZWN0LmxlZnQsIGRzdFJlY3QudG9wKSxcbiAgICAgICAgICAgIGRzdE9mZnNldCA9IGN1ckxheWVyLm9mZnNldE9mUGl4ZWwoZHN0UmVjdC5sZWZ0LCBkc3RSZWN0LnRvcCksXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHdpZHRoID0gZHN0UmVjdC5nZXRXaWR0aCgpIHwgMCxcbiAgICAgICAgICAgIGhlaWdodCA9IGRzdFJlY3QuZ2V0SGVpZ2h0KCkgfCAwLFxuICAgICAgICAgICAgXG4gICAgICAgICAgICBzcmNZU3RyaWRlID0gKG9wYWNpdHlCdWZmZXIud2lkdGggLSB3aWR0aCkgfCAwLFxuICAgICAgICAgICAgZHN0WVN0cmlkZSA9ICgoY3VyTGF5ZXIud2lkdGggLSB3aWR0aCkgKiBDUENvbG9yQm1wLkJZVEVTX1BFUl9QSVhFTCkgfCAwO1xuXG4gICAgICAgIGZvciAodmFyIHkgPSAwOyB5IDwgaGVpZ2h0OyB5KyssIHNyY09mZnNldCArPSBzcmNZU3RyaWRlLCBkc3RPZmZzZXQgKz0gZHN0WVN0cmlkZSkge1xuICAgICAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCB3aWR0aDsgeCsrLCBzcmNPZmZzZXQrKywgZHN0T2Zmc2V0ICs9IENQQ29sb3JCbXAuQllURVNfUEVSX1BJWEVMKSB7XG4gICAgICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgICAgIGNvbG9yMSA9IG9wYWNpdHlEYXRhW3NyY09mZnNldF0sXG4gICAgICAgICAgICAgICAgICAgIGFscGhhMSA9IGNvbG9yMSA+Pj4gMjQ7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgaWYgKGFscGhhMSA9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB2YXIgXG4gICAgICAgICAgICAgICAgLy8gUHJldHR5IHN1cmUgZnVzaW9uLmFscGhhIGlzIGFsd2F5cyAxMDAgYW5kIHRoZSBjb21tZW50ZWQgc2VjdGlvbiBpcyBhIGNvcHkvcGFzdGUgZXJyb3JcbiAgICAgICAgICAgICAgICAgICAgYWxwaGEyID0gdW5kb0RhdGFbZHN0T2Zmc2V0ICsgQ1BDb2xvckJtcC5BTFBIQV9CWVRFX09GRlNFVF0gLyogKiBmdXNpb24uYWxwaGEgLyAxMDAgKi8sIFxuICAgICAgICAgICAgICAgICAgICBuZXdBbHBoYSA9IChhbHBoYTEgKyBhbHBoYTIgLSBhbHBoYTEgKiBhbHBoYTIgLyAyNTUpIHwgMDtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBpZiAobmV3QWxwaGEgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVhbEFscGhhID0gKGFscGhhMSAqIDI1NSAvIG5ld0FscGhhKSB8IDAsXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnZBbHBoYSA9IDI1NSAtIHJlYWxBbHBoYTtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGN1ckxheWVyLmRhdGFbZHN0T2Zmc2V0XSA9ICgoKChjb2xvcjEgPj4gMTYpICYgMHhGRikgKiByZWFsQWxwaGEgKyB1bmRvRGF0YVtkc3RPZmZzZXRdICogaW52QWxwaGEpIC8gMjU1KSB8IDA7XG4gICAgICAgICAgICAgICAgICAgIGN1ckxheWVyLmRhdGFbZHN0T2Zmc2V0ICsgMV0gPSAoKCgoY29sb3IxID4+IDgpICYgMHhGRikgKiByZWFsQWxwaGEgKyB1bmRvRGF0YVtkc3RPZmZzZXQgKyAxXSAqIGludkFscGhhKSAvIDI1NSkgfCAwO1xuICAgICAgICAgICAgICAgICAgICBjdXJMYXllci5kYXRhW2RzdE9mZnNldCArIDJdID0gKCgoY29sb3IxICYgMHhGRikgKiByZWFsQWxwaGEgKyB1bmRvRGF0YVtkc3RPZmZzZXQgKyAyXSAqIGludkFscGhhKSAvIDI1NSkgfCAwO1xuICAgICAgICAgICAgICAgICAgICBjdXJMYXllci5kYXRhW2RzdE9mZnNldCArIDNdID0gbmV3QWxwaGE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICBcbiAgICBmdW5jdGlvbiBDUEJydXNoVG9vbFdhdGVyY29sb3IoKSB7XG4gICAgICAgIGNvbnN0XG4gICAgICAgICAgICBXQ01FTU9SWSA9IDUwLFxuICAgICAgICAgICAgV1hNQVhTQU1QTEVSQURJVVMgPSA2NDtcblxuICAgICAgICB2YXJcbiAgICAgICAgICAgIHByZXZpb3VzU2FtcGxlcyA9IFtdO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBdmVyYWdlIG91dCBhIGJ1bmNoIG9mIHNhbXBsZXMgYXJvdW5kIHRoZSBnaXZlbiBwaXhlbCAoeCwgeSkuXG4gICAgICAgICAqIFxuICAgICAgICAgKiBkeCwgZHkgY29udHJvbHMgdGhlIHNwcmVhZCBvZiB0aGUgc2FtcGxlcy5cbiAgICAgICAgICogXG4gICAgICAgICAqIEByZXR1cm5zIENQQ29sb3JGbG9hdFxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gc2FtcGxlQ29sb3IoeCwgeSwgZHgsIGR5KSB7XG4gICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICBzYW1wbGVzID0gW10sXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgbGF5ZXJUb1NhbXBsZSA9IHNhbXBsZUFsbExheWVycyA/IGZ1c2lvbiA6IHRoYXQuZ2V0QWN0aXZlTGF5ZXIoKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgeCA9IHggfCAwO1xuICAgICAgICAgICAgeSA9IHkgfCAwO1xuXG4gICAgICAgICAgICBzYW1wbGVzLnB1c2goQ1BDb2xvckZsb2F0LmNyZWF0ZUZyb21JbnQobGF5ZXJUb1NhbXBsZS5nZXRQaXhlbCh4LCB5KSkpO1xuXG4gICAgICAgICAgICBmb3IgKHZhciByID0gMC4yNTsgciA8IDEuMDAxOyByICs9IC4yNSkge1xuICAgICAgICAgICAgICAgIHNhbXBsZXMucHVzaChDUENvbG9yRmxvYXQuY3JlYXRlRnJvbUludChsYXllclRvU2FtcGxlLmdldFBpeGVsKH5+KHggKyByICogZHgpLCB5KSkpO1xuICAgICAgICAgICAgICAgIHNhbXBsZXMucHVzaChDUENvbG9yRmxvYXQuY3JlYXRlRnJvbUludChsYXllclRvU2FtcGxlLmdldFBpeGVsKH5+KHggLSByICogZHgpLCB5KSkpO1xuICAgICAgICAgICAgICAgIHNhbXBsZXMucHVzaChDUENvbG9yRmxvYXQuY3JlYXRlRnJvbUludChsYXllclRvU2FtcGxlLmdldFBpeGVsKHgsIH5+KHkgKyByICogZHkpKSkpO1xuICAgICAgICAgICAgICAgIHNhbXBsZXMucHVzaChDUENvbG9yRmxvYXQuY3JlYXRlRnJvbUludChsYXllclRvU2FtcGxlLmdldFBpeGVsKHgsIH5+KHkgLSByICogZHkpKSkpO1xuXG4gICAgICAgICAgICAgICAgc2FtcGxlcy5wdXNoKENQQ29sb3JGbG9hdC5jcmVhdGVGcm9tSW50KGxheWVyVG9TYW1wbGUuZ2V0UGl4ZWwofn4oeCArIHIgKiAwLjcgKiBkeCksIH5+KHkgKyByICogMC43ICogZHkpKSkpO1xuICAgICAgICAgICAgICAgIHNhbXBsZXMucHVzaChDUENvbG9yRmxvYXQuY3JlYXRlRnJvbUludChsYXllclRvU2FtcGxlLmdldFBpeGVsKH5+KHggKyByICogMC43ICogZHgpLCB+fih5IC0gciAqIDAuNyAqIGR5KSkpKTtcbiAgICAgICAgICAgICAgICBzYW1wbGVzLnB1c2goQ1BDb2xvckZsb2F0LmNyZWF0ZUZyb21JbnQobGF5ZXJUb1NhbXBsZS5nZXRQaXhlbCh+fih4IC0gciAqIDAuNyAqIGR4KSwgfn4oeSArIHIgKiAwLjcgKiBkeSkpKSk7XG4gICAgICAgICAgICAgICAgc2FtcGxlcy5wdXNoKENQQ29sb3JGbG9hdC5jcmVhdGVGcm9tSW50KGxheWVyVG9TYW1wbGUuZ2V0UGl4ZWwofn4oeCAtIHIgKiAwLjcgKiBkeCksIH5+KHkgLSByICogMC43ICogZHkpKSkpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICBhdmVyYWdlID0gbmV3IENQQ29sb3JGbG9hdCgwLCAwLCAwKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzYW1wbGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgICAgIHNhbXBsZSA9IHNhbXBsZXNbaV07XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgYXZlcmFnZS5yICs9IHNhbXBsZS5yO1xuICAgICAgICAgICAgICAgIGF2ZXJhZ2UuZyArPSBzYW1wbGUuZztcbiAgICAgICAgICAgICAgICBhdmVyYWdlLmIgKz0gc2FtcGxlLmI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGF2ZXJhZ2UuciAvPSBzYW1wbGVzLmxlbmd0aDtcbiAgICAgICAgICAgIGF2ZXJhZ2UuZyAvPSBzYW1wbGVzLmxlbmd0aDtcbiAgICAgICAgICAgIGF2ZXJhZ2UuYiAvPSBzYW1wbGVzLmxlbmd0aDtcblxuICAgICAgICAgICAgcmV0dXJuIGF2ZXJhZ2U7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIEJsZW5kIHRoZSBicnVzaCBzdHJva2Ugd2l0aCBmdWxsIGNvbG9yIGludG8gdGhlIG9wYWNpdHlCdWZmZXJcbiAgICAgICAgZnVuY3Rpb24gcGFpbnREaXJlY3Qoc3JjUmVjdCwgZHN0UmVjdCwgYnJ1c2gsIGJydXNoV2lkdGgsIGFscGhhLCBjb2xvcjEpIHtcbiAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgIG9wYWNpdHlEYXRhID0gb3BhY2l0eUJ1ZmZlci5kYXRhLFxuXG4gICAgICAgICAgICAgICAgYnkgPSBzcmNSZWN0LnRvcDtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZm9yICh2YXIgeSA9IGRzdFJlY3QudG9wOyB5IDwgZHN0UmVjdC5ib3R0b207IHkrKywgYnkrKykge1xuICAgICAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgICAgICBzcmNPZmZzZXQgPSBzcmNSZWN0LmxlZnQgKyBieSAqIGJydXNoV2lkdGgsXG4gICAgICAgICAgICAgICAgICAgIGRzdE9mZnNldCA9IG9wYWNpdHlCdWZmZXIub2Zmc2V0T2ZQaXhlbChkc3RSZWN0LmxlZnQsIHkpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGZvciAodmFyIHggPSBkc3RSZWN0LmxlZnQ7IHggPCBkc3RSZWN0LnJpZ2h0OyB4KyssIHNyY09mZnNldCsrLCBkc3RPZmZzZXQrKykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgXG4gICAgICAgICAgICAgICAgICAgICAgICBhbHBoYTEgPSAoKGJydXNoW3NyY09mZnNldF0gJiAweGZmKSAqIGFscGhhIC8gMjU1KSB8IDA7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAoYWxwaGExIDw9IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjIgPSBvcGFjaXR5RGF0YVtkc3RPZmZzZXRdLFxuICAgICAgICAgICAgICAgICAgICAgICAgYWxwaGEyID0gY29sb3IyID4+PiAyNCxcblxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3QWxwaGEgPSAoYWxwaGExICsgYWxwaGEyIC0gYWxwaGExICogYWxwaGEyIC8gMjU1KSB8IDA7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAobmV3QWxwaGEgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhbEFscGhhID0gKGFscGhhMSAqIDI1NSAvIG5ld0FscGhhKSB8IDAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW52QWxwaGEgPSAyNTUgLSByZWFsQWxwaGE7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoZSB1c3VhbCBhbHBoYSBibGVuZGluZyBmb3JtdWxhIEMgPSBBICogYWxwaGEgKyBCICogKDEgLSBhbHBoYSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGhhcyB0byByZXdyaXR0ZW4gaW4gdGhlIGZvcm0gQyA9IEEgKyAoMSAtIGFscGhhKSAqIEIgLSAoMSAtIGFscGhhKSAqQVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhhdCB3YXkgdGhlIHJvdW5kaW5nIHVwIGVycm9ycyB3b24ndCBjYXVzZSBwcm9ibGVtc1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3Q29sb3IgPSBuZXdBbHBoYSA8PCAyNFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICgoY29sb3IxID4+PiAxNiAmIDB4ZmYpICsgKCgoY29sb3IyID4+PiAxNiAmIDB4ZmYpICogaW52QWxwaGEgLSAoY29sb3IxID4+PiAxNiAmIDB4ZmYpICogaW52QWxwaGEpIC8gMjU1KSkgPDwgMTZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAoKGNvbG9yMSA+Pj4gOCAmIDB4ZmYpICsgKCgoY29sb3IyID4+PiA4ICYgMHhmZikgKiBpbnZBbHBoYSAtIChjb2xvcjEgPj4+IDggJiAweGZmKSAqIGludkFscGhhKSAvIDI1NSkpIDw8IDhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAoKGNvbG9yMSAmIDB4ZmYpICsgKCgoY29sb3IyICYgMHhmZikgKiBpbnZBbHBoYSAtIChjb2xvcjEgJiAweGZmKSAqIGludkFscGhhKSAvIDI1NSkpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBvcGFjaXR5RGF0YVtkc3RPZmZzZXRdID0gbmV3Q29sb3I7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHRoaXMuYmVnaW5TdHJva2UgPSBmdW5jdGlvbih4LCB5LCBwcmVzc3VyZSkge1xuICAgICAgICAgICAgcHJldmlvdXNTYW1wbGVzID0gbnVsbDtcblxuICAgICAgICAgICAgQ1BCcnVzaFRvb2xEaXJlY3RCcnVzaC5wcm90b3R5cGUuYmVnaW5TdHJva2UuY2FsbCh0aGlzLCB4LCB5LCBwcmVzc3VyZSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5wYWludERhYkltcGxlbWVudGF0aW9uID0gZnVuY3Rpb24oc3JjUmVjdCwgZHN0UmVjdCwgZGFiKSB7XG4gICAgICAgICAgICBpZiAocHJldmlvdXNTYW1wbGVzID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAvLyBTZWVkIHRoZSBwcmV2aW91c1NhbXBsZXMgbGlzdCB0byBjYXBhY2l0eSB3aXRoIGEgYnVuY2ggb2YgY29waWVzIG9mIG9uZSBzYW1wbGUgdG8gZ2V0IHVzIHN0YXJ0ZWRcbiAgICAgICAgICAgICAgICB2YXIgXG4gICAgICAgICAgICAgICAgICAgIHN0YXJ0Q29sb3IgPSBzYW1wbGVDb2xvcihcbiAgICAgICAgICAgICAgICAgICAgICAgIH5+KChkc3RSZWN0LmxlZnQgKyBkc3RSZWN0LnJpZ2h0KSAvIDIpLFxuICAgICAgICAgICAgICAgICAgICAgICAgfn4oKGRzdFJlY3QudG9wICsgZHN0UmVjdC5ib3R0b20pIC8gMiksIFxuICAgICAgICAgICAgICAgICAgICAgICAgTWF0aC5tYXgoMSwgTWF0aC5taW4oV1hNQVhTQU1QTEVSQURJVVMsIGRzdFJlY3QuZ2V0V2lkdGgoKSAqIDIgLyA2KSksIFxuICAgICAgICAgICAgICAgICAgICAgICAgTWF0aC5tYXgoMSwgTWF0aC5taW4oV1hNQVhTQU1QTEVSQURJVVMsIGRzdFJlY3QuZ2V0SGVpZ2h0KCkgKiAyIC8gNikpXG4gICAgICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICBwcmV2aW91c1NhbXBsZXMgPSBbXTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IFdDTUVNT1JZOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgcHJldmlvdXNTYW1wbGVzLnB1c2goc3RhcnRDb2xvcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICB2YXIgXG4gICAgICAgICAgICAgICAgd2NDb2xvciA9IG5ldyBDUENvbG9yRmxvYXQoMCwgMCwgMCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcHJldmlvdXNTYW1wbGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgICAgIHNhbXBsZSA9IHByZXZpb3VzU2FtcGxlc1tpXTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB3Y0NvbG9yLnIgKz0gc2FtcGxlLnI7XG4gICAgICAgICAgICAgICAgd2NDb2xvci5nICs9IHNhbXBsZS5nO1xuICAgICAgICAgICAgICAgIHdjQ29sb3IuYiArPSBzYW1wbGUuYjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHdjQ29sb3IuciAvPSBwcmV2aW91c1NhbXBsZXMubGVuZ3RoO1xuICAgICAgICAgICAgd2NDb2xvci5nIC89IHByZXZpb3VzU2FtcGxlcy5sZW5ndGg7XG4gICAgICAgICAgICB3Y0NvbG9yLmIgLz0gcHJldmlvdXNTYW1wbGVzLmxlbmd0aDtcblxuICAgICAgICAgICAgLy8gcmVzYXR1cmF0aW9uXG4gICAgICAgICAgICB3Y0NvbG9yLm1peFdpdGgoQ1BDb2xvckZsb2F0LmNyZWF0ZUZyb21JbnQoY3VyQ29sb3IpLCBjdXJCcnVzaC5yZXNhdCAqIGN1ckJydXNoLnJlc2F0KTtcblxuICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgbmV3Q29sb3IgPSB3Y0NvbG9yLnRvSW50KCk7XG5cbiAgICAgICAgICAgIC8vIGJsZWVkXG4gICAgICAgICAgICB3Y0NvbG9yLm1peFdpdGgoXG4gICAgICAgICAgICAgICAgc2FtcGxlQ29sb3IoXG4gICAgICAgICAgICAgICAgICAgIChkc3RSZWN0LmxlZnQgKyBkc3RSZWN0LnJpZ2h0KSAvIDIsXG4gICAgICAgICAgICAgICAgICAgIChkc3RSZWN0LnRvcCArIGRzdFJlY3QuYm90dG9tKSAvIDIsXG4gICAgICAgICAgICAgICAgICAgIE1hdGgubWF4KDEsIE1hdGgubWluKFdYTUFYU0FNUExFUkFESVVTLCBkc3RSZWN0LmdldFdpZHRoKCkgKiAyIC8gNikpLFxuICAgICAgICAgICAgICAgICAgICBNYXRoLm1heCgxLCBNYXRoLm1pbihXWE1BWFNBTVBMRVJBRElVUywgZHN0UmVjdC5nZXRIZWlnaHQoKSAqIDIgLyA2KSlcbiAgICAgICAgICAgICAgICApLCBcbiAgICAgICAgICAgICAgICBjdXJCcnVzaC5ibGVlZFxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgcHJldmlvdXNTYW1wbGVzLnB1c2god2NDb2xvcik7XG4gICAgICAgICAgICBwcmV2aW91c1NhbXBsZXMuc2hpZnQoKTtcblxuICAgICAgICAgICAgcGFpbnREaXJlY3Qoc3JjUmVjdCwgZHN0UmVjdCwgZGFiLmJydXNoLCBkYWIud2lkdGgsIE1hdGgubWF4KDEsIGRhYi5hbHBoYSAvIDQpLCBuZXdDb2xvcik7XG4gICAgICAgICAgICBtZXJnZU9wYWNpdHlCdWZmZXIoMCwgZmFsc2UpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoc2FtcGxlQWxsTGF5ZXJzKSB7XG4gICAgICAgICAgICAgICAgdGhhdC5mdXNpb25MYXllcnMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9XG4gICAgXG4gICAgQ1BCcnVzaFRvb2xXYXRlcmNvbG9yLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoQ1BCcnVzaFRvb2xEaXJlY3RCcnVzaC5wcm90b3R5cGUpO1xuICAgIENQQnJ1c2hUb29sV2F0ZXJjb2xvci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBDUEJydXNoVG9vbFdhdGVyY29sb3I7XG4gICAgXG4gICAgZnVuY3Rpb24gQ1BCcnVzaFRvb2xPaWwoKSB7XG5cbiAgICAgICAgZnVuY3Rpb24gb2lsQWNjdW1CdWZmZXIoc3JjUmVjdCwgZHN0UmVjdCwgYnVmZmVyLCB3LCBhbHBoYSkge1xuICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgbGF5ZXJUb1NhbXBsZSA9IHNhbXBsZUFsbExheWVycyA/IGZ1c2lvbiA6IHRoYXQuZ2V0QWN0aXZlTGF5ZXIoKSxcblxuICAgICAgICAgICAgICAgIGJ5ID0gc3JjUmVjdC50b3A7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGZvciAodmFyIHkgPSBkc3RSZWN0LnRvcDsgeSA8IGRzdFJlY3QuYm90dG9tOyB5KyssIGJ5KyspIHtcbiAgICAgICAgICAgICAgICB2YXIgXG4gICAgICAgICAgICAgICAgICAgIHNyY09mZnNldCA9IHNyY1JlY3QubGVmdCArIGJ5ICogdyxcbiAgICAgICAgICAgICAgICAgICAgZHN0T2Zmc2V0ID0gbGF5ZXJUb1NhbXBsZS5vZmZzZXRPZlBpeGVsKGRzdFJlY3QubGVmdCwgeSk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgeCA9IGRzdFJlY3QubGVmdDsgeCA8IGRzdFJlY3QucmlnaHQ7IHgrKywgc3JjT2Zmc2V0KyssIGRzdE9mZnNldCArPSBDUENvbG9yQm1wLkJZVEVTX1BFUl9QSVhFTCkge1xuICAgICAgICAgICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFscGhhMSA9IChsYXllclRvU2FtcGxlLmRhdGFbZHN0T2Zmc2V0ICsgQ1BDb2xvckJtcC5BTFBIQV9CWVRFX09GRlNFVF0gKiBhbHBoYSAvIDI1NSkgfCAwO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFscGhhMSA8PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgICAgICAgICAgY29sb3IyID0gYnVmZmVyW3NyY09mZnNldF0sXG4gICAgICAgICAgICAgICAgICAgICAgICBhbHBoYTIgPSBjb2xvcjIgPj4+IDI0LFxuXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdBbHBoYSA9IChhbHBoYTEgKyBhbHBoYTIgLSBhbHBoYTEgKiBhbHBoYTIgLyAyNTUpIHwgMDtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGlmIChuZXdBbHBoYSA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFsQWxwaGEgPSAoYWxwaGExICogMjU1IC8gbmV3QWxwaGEpIHwgMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnZBbHBoYSA9IDI1NSAtIHJlYWxBbHBoYSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjFSZWQgPSBsYXllclRvU2FtcGxlLmRhdGFbZHN0T2Zmc2V0ICsgQ1BDb2xvckJtcC5SRURfQllURV9PRkZTRVRdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yMUdyZWVuID0gbGF5ZXJUb1NhbXBsZS5kYXRhW2RzdE9mZnNldCArIENQQ29sb3JCbXAuR1JFRU5fQllURV9PRkZTRVRdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yMUJsdWUgPSBsYXllclRvU2FtcGxlLmRhdGFbZHN0T2Zmc2V0ICsgQ1BDb2xvckJtcC5CTFVFX0JZVEVfT0ZGU0VUXSxcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld0NvbG9yID0gbmV3QWxwaGEgPDwgMjRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAoY29sb3IxUmVkICsgKCgoY29sb3IyID4+PiAxNiAmIDB4ZmYpICogaW52QWxwaGEgLSBjb2xvcjFSZWQgKiBpbnZBbHBoYSkgLyAyNTUpKSA8PCAxNlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IChjb2xvcjFHcmVlbiArICgoKGNvbG9yMiA+Pj4gOCAmIDB4ZmYpICogaW52QWxwaGEgLSBjb2xvcjFHcmVlbiAqIGludkFscGhhKSAvIDI1NSkpIDw8IDhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAoY29sb3IxQmx1ZSArICgoKGNvbG9yMiAmIDB4ZmYpICogaW52QWxwaGEgLSBjb2xvcjFCbHVlICogaW52QWxwaGEpIC8gMjU1KSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1ZmZlcltzcmNPZmZzZXRdID0gbmV3Q29sb3I7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBvaWxSZXNhdEJ1ZmZlcihzcmNSZWN0LCBkc3RSZWN0LCBidWZmZXIsIHcsIGFscGhhMSwgY29sb3IxKSB7XG4gICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICBieSA9IHNyY1JlY3QudG9wO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoYWxwaGExIDw9IDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGZvciAodmFyIHkgPSBkc3RSZWN0LnRvcDsgeSA8IGRzdFJlY3QuYm90dG9tOyB5KyssIGJ5KyspIHtcbiAgICAgICAgICAgICAgICB2YXIgXG4gICAgICAgICAgICAgICAgICAgIHNyY09mZnNldCA9IHNyY1JlY3QubGVmdCArIGJ5ICogdztcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBmb3IgKHZhciB4ID0gZHN0UmVjdC5sZWZ0OyB4IDwgZHN0UmVjdC5yaWdodDsgeCsrLCBzcmNPZmZzZXQrKykge1xuICAgICAgICAgICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yMiA9IGJ1ZmZlcltzcmNPZmZzZXRdLFxuICAgICAgICAgICAgICAgICAgICAgICAgYWxwaGEyID0gKGNvbG9yMiA+Pj4gMjQpLFxuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3QWxwaGEgPSAoYWxwaGExICsgYWxwaGEyIC0gYWxwaGExICogYWxwaGEyIC8gMjU1KSB8IDA7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAobmV3QWxwaGEgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhbEFscGhhID0gKGFscGhhMSAqIDI1NSAvIG5ld0FscGhhKSB8IDAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW52QWxwaGEgPSAyNTUgLSByZWFsQWxwaGEsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3Q29sb3IgPSBuZXdBbHBoYSA8PCAyNFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICgoY29sb3IxID4+PiAxNiAmIDB4ZmYpICsgKCgoY29sb3IyID4+PiAxNiAmIDB4ZmYpICogaW52QWxwaGEgLSAoY29sb3IxID4+PiAxNiAmIDB4ZmYpICogaW52QWxwaGEpIC8gMjU1KSkgPDwgMTZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAoKGNvbG9yMSA+Pj4gOCAmIDB4ZmYpICsgKCgoY29sb3IyID4+PiA4ICYgMHhmZikgKiBpbnZBbHBoYSAtIChjb2xvcjEgPj4+IDggJiAweGZmKSAqIGludkFscGhhKSAvIDI1NSkpIDw8IDhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAoKGNvbG9yMSAmIDB4ZmYpICsgKCgoY29sb3IyICYgMHhmZikgKiBpbnZBbHBoYSAtIChjb2xvcjEgJiAweGZmKSAqIGludkFscGhhKSAvIDI1NSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBidWZmZXJbc3JjT2Zmc2V0XSA9IG5ld0NvbG9yO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gb2lsUGFzdGVCdWZmZXIoc3JjUmVjdCwgZHN0UmVjdCwgYnVmZmVyLCBicnVzaCwgdywgYWxwaGEpIHtcbiAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgIG9wYWNpdHlEYXRhID0gb3BhY2l0eUJ1ZmZlci5kYXRhLFxuICAgIFxuICAgICAgICAgICAgICAgIGJ5ID0gc3JjUmVjdC50b3A7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGZvciAodmFyIHkgPSBkc3RSZWN0LnRvcDsgeSA8IGRzdFJlY3QuYm90dG9tOyB5KyssIGJ5KyspIHtcbiAgICAgICAgICAgICAgICB2YXIgXG4gICAgICAgICAgICAgICAgICAgIGJ1ZmZlck9mZnNldCA9IHNyY1JlY3QubGVmdCArIGJ5ICogdywgLy8gQnJ1c2ggYnVmZmVyIGlzIDEgaW50ZWdlciBwZXIgcGl4ZWxcbiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eU9mZnNldCA9IGRzdFJlY3QubGVmdCArIHkgKiB0aGF0LndpZHRoLCAvLyBPcGFjaXR5IGJ1ZmZlciBpcyAxIGludGVnZXIgcGVyIHBpeGVsXG4gICAgICAgICAgICAgICAgICAgIGxheWVyT2Zmc2V0ID0gY3VyTGF5ZXIub2Zmc2V0T2ZQaXhlbChkc3RSZWN0LmxlZnQsIHkpOyAvLyA0IGJ5dGVzIHBlciBwaXhlbCBcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBmb3IgKHZhciB4ID0gZHN0UmVjdC5sZWZ0OyB4IDwgZHN0UmVjdC5yaWdodDsgeCsrLCBidWZmZXJPZmZzZXQrKywgbGF5ZXJPZmZzZXQgKz0gQ1BDb2xvckJtcC5CWVRFU19QRVJfUElYRUwsIG9wYWNpdHlPZmZzZXQrKykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjEgPSBidWZmZXJbYnVmZmVyT2Zmc2V0XSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGFscGhhMSA9ICgoY29sb3IxID4+PiAyNCkgKiAoYnJ1c2hbYnVmZmVyT2Zmc2V0XSAmIDB4ZmYpICogYWxwaGEgLyAoMjU1ICogMjU1KSkgfCAwO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFscGhhMSA8PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgICAgICAgICAgYWxwaGEyID0gY3VyTGF5ZXIuZGF0YVtsYXllck9mZnNldCArIENQQ29sb3JCbXAuQUxQSEFfQllURV9PRkZTRVRdLFxuXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdBbHBoYSA9IChhbHBoYTEgKyBhbHBoYTIgLSBhbHBoYTEgKiBhbHBoYTIgLyAyNTUpIHwgMDtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGlmIChuZXdBbHBoYSA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjJSZWQgPSBjdXJMYXllci5kYXRhW2xheWVyT2Zmc2V0ICsgQ1BDb2xvckJtcC5SRURfQllURV9PRkZTRVRdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yMkdyZWVuID0gY3VyTGF5ZXIuZGF0YVtsYXllck9mZnNldCArIENQQ29sb3JCbXAuR1JFRU5fQllURV9PRkZTRVRdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yMkJsdWUgPSBjdXJMYXllci5kYXRhW2xheWVyT2Zmc2V0ICsgQ1BDb2xvckJtcC5CTFVFX0JZVEVfT0ZGU0VUXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFsQWxwaGEgPSAoYWxwaGExICogMjU1IC8gbmV3QWxwaGEpIHwgMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnZBbHBoYSA9IDI1NSAtIHJlYWxBbHBoYSxcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld0NvbG9yID0gbmV3QWxwaGEgPDwgMjRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAoKGNvbG9yMSA+Pj4gMTYgJiAweGZmKSArICgoY29sb3IyUmVkICogaW52QWxwaGEgLSAoY29sb3IxID4+PiAxNiAmIDB4ZmYpICogaW52QWxwaGEpIC8gMjU1KSkgPDwgMTZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAoKGNvbG9yMSA+Pj4gOCAmIDB4ZmYpICsgKChjb2xvcjJHcmVlbiAqIGludkFscGhhIC0gKGNvbG9yMSA+Pj4gOCAmIDB4ZmYpICogaW52QWxwaGEpIC8gMjU1KSkgPDwgOFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICgoY29sb3IxICYgMHhmZikgKyAoKGNvbG9yMkJsdWUgKiBpbnZBbHBoYSAtIChjb2xvcjEgJiAweGZmKSAqIGludkFscGhhKSAvIDI1NSkpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBvcGFjaXR5RGF0YVtvcGFjaXR5T2Zmc2V0XSA9IG5ld0NvbG9yO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICB0aGlzLnBhaW50RGFiSW1wbGVtZW50YXRpb24gPSBmdW5jdGlvbihzcmNSZWN0LCBkc3RSZWN0LCBkYWIpIHtcbiAgICAgICAgICAgIGlmIChicnVzaEJ1ZmZlciA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgYnJ1c2hCdWZmZXIgPSBuZXcgVWludDMyQXJyYXkoZGFiLndpZHRoICogZGFiLmhlaWdodCk7IC8vIEluaXRpYWxpemVkIHRvIDAgZm9yIHVzIGJ5IHRoZSBicm93c2VyXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgb2lsQWNjdW1CdWZmZXIoc3JjUmVjdCwgZHN0UmVjdCwgYnJ1c2hCdWZmZXIsIGRhYi53aWR0aCwgMjU1KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgb2lsUmVzYXRCdWZmZXIoc3JjUmVjdCwgZHN0UmVjdCwgYnJ1c2hCdWZmZXIsIGRhYi53aWR0aCwgfn4oKGN1ckJydXNoLnJlc2F0IDw9IDAuMCkgPyAwIDogTWF0aC5tYXgoMSwgKGN1ckJydXNoLnJlc2F0ICogY3VyQnJ1c2gucmVzYXQpICogMjU1KSksIGN1ckNvbG9yICYgMHhGRkZGRkYpO1xuICAgICAgICAgICAgICAgIG9pbFBhc3RlQnVmZmVyKHNyY1JlY3QsIGRzdFJlY3QsIGJydXNoQnVmZmVyLCBkYWIuYnJ1c2gsIGRhYi53aWR0aCwgZGFiLmFscGhhKTtcbiAgICAgICAgICAgICAgICBvaWxBY2N1bUJ1ZmZlcihzcmNSZWN0LCBkc3RSZWN0LCBicnVzaEJ1ZmZlciwgZGFiLndpZHRoLCB+fihjdXJCcnVzaC5ibGVlZCAqIDI1NSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBtZXJnZU9wYWNpdHlCdWZmZXIoMCwgZmFsc2UpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoc2FtcGxlQWxsTGF5ZXJzKSB7XG4gICAgICAgICAgICAgICAgdGhhdC5mdXNpb25MYXllcnMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9XG4gICAgXG4gICAgQ1BCcnVzaFRvb2xPaWwucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShDUEJydXNoVG9vbERpcmVjdEJydXNoLnByb3RvdHlwZSk7XG4gICAgQ1BCcnVzaFRvb2xPaWwucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gQ1BCcnVzaFRvb2xPaWw7XG4gICAgXG4gICAgZnVuY3Rpb24gQ1BCcnVzaFRvb2xTbXVkZ2UoKSB7XG4gICAgICAgIFxuICAgICAgICAvKipcbiAgICAgICAgICogXG4gICAgICAgICAqIEBwYXJhbSBzcmNSZWN0XG4gICAgICAgICAqIEBwYXJhbSBkc3RSZWN0XG4gICAgICAgICAqIEBwYXJhbSBidWZmZXIgVWludDMyQXJyYXlcbiAgICAgICAgICogQHBhcmFtIHcgaW50XG4gICAgICAgICAqIEBwYXJhbSBhbHBoYSBpbnRcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIHNtdWRnZUFjY3VtQnVmZmVyKHNyY1JlY3QsIGRzdFJlY3QsIGJ1ZmZlciwgdywgYWxwaGEpIHtcbiAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgIGxheWVyVG9TYW1wbGUgPSBzYW1wbGVBbGxMYXllcnMgPyBmdXNpb24gOiB0aGF0LmdldEFjdGl2ZUxheWVyKCksXG5cbiAgICAgICAgICAgICAgICBieSA9IHNyY1JlY3QudG9wO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBmb3IgKHZhciB5ID0gZHN0UmVjdC50b3A7IHkgPCBkc3RSZWN0LmJvdHRvbTsgeSsrLCBieSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgICAgIHNyY09mZnNldCA9IHNyY1JlY3QubGVmdCArIGJ5ICogdyxcbiAgICAgICAgICAgICAgICAgICAgZHN0T2Zmc2V0ID0gbGF5ZXJUb1NhbXBsZS5vZmZzZXRPZlBpeGVsKGRzdFJlY3QubGVmdCwgeSk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgeCA9IGRzdFJlY3QubGVmdDsgeCA8IGRzdFJlY3QucmlnaHQ7IHgrKywgc3JjT2Zmc2V0KyssIGRzdE9mZnNldCArPSBDUENvbG9yQm1wLkJZVEVTX1BFUl9QSVhFTCkge1xuICAgICAgICAgICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxheWVyUmVkID0gbGF5ZXJUb1NhbXBsZS5kYXRhW2RzdE9mZnNldCArIENQQ29sb3JCbXAuUkVEX0JZVEVfT0ZGU0VUXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGxheWVyR3JlZW4gPSBsYXllclRvU2FtcGxlLmRhdGFbZHN0T2Zmc2V0ICsgQ1BDb2xvckJtcC5HUkVFTl9CWVRFX09GRlNFVF0sXG4gICAgICAgICAgICAgICAgICAgICAgICBsYXllckJsdWUgPSBsYXllclRvU2FtcGxlLmRhdGFbZHN0T2Zmc2V0ICsgQ1BDb2xvckJtcC5CTFVFX0JZVEVfT0ZGU0VUXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGxheWVyQWxwaGEgPSBsYXllclRvU2FtcGxlLmRhdGFbZHN0T2Zmc2V0ICsgQ1BDb2xvckJtcC5BTFBIQV9CWVRFX09GRlNFVF0sXG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wYWNpdHlBbHBoYSA9IDI1NSAtIGFscGhhO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wYWNpdHlBbHBoYSA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlc3RDb2xvciA9IGJ1ZmZlcltzcmNPZmZzZXRdLFxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVzdEFscGhhID0gMjU1LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld0xheWVyQWxwaGEgPSAob3BhY2l0eUFscGhhICsgZGVzdEFscGhhICogKDI1NSAtIG9wYWNpdHlBbHBoYSkgLyAyNTUpIHwgMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFsQWxwaGEgPSAoMjU1ICogb3BhY2l0eUFscGhhIC8gbmV3TGF5ZXJBbHBoYSkgfCAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGludkFscGhhID0gMjU1IC0gcmVhbEFscGhhLFxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3Q29sb3IgPSBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKChsYXllckFscGhhICogcmVhbEFscGhhICsgKGRlc3RDb2xvciA+Pj4gMjQgJiAweGZmKSAqIGludkFscGhhKSAvIDI1NSkgPDwgMjQgJiAweGZmMDAwMDAwXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgKChsYXllclJlZCAqIHJlYWxBbHBoYSArIChkZXN0Q29sb3IgPj4+IDE2ICYgMHhmZikgKiBpbnZBbHBoYSkgLyAyNTUpIDw8IDE2ICYgMHhmZjAwMDBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAoKGxheWVyR3JlZW4gKiByZWFsQWxwaGEgKyAoZGVzdENvbG9yID4+PiA4ICYgMHhmZikgKiBpbnZBbHBoYSkgLyAyNTUpIDw8IDggJiAweGZmMDBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAoKGxheWVyQmx1ZSAqIHJlYWxBbHBoYSArIChkZXN0Q29sb3IgJiAweGZmKSAqIGludkFscGhhKSAvIDI1NSkgJiAweGZmO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobmV3Q29sb3IgPT0gZGVzdENvbG9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGxheWVyUmVkID4gKGRlc3RDb2xvciAmIDB4ZmYwMDAwKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdDb2xvciArPSAxIDw8IDE2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobGF5ZXJSZWQgPCAoZGVzdENvbG9yICYgMHhmZjAwMDApKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld0NvbG9yIC09IDEgPDwgMTY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGxheWVyR3JlZW4+IChkZXN0Q29sb3IgJiAweGZmMDApKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld0NvbG9yICs9IDEgPDwgODtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGxheWVyR3JlZW4gPCAoZGVzdENvbG9yICYgMHhmZjAwKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdDb2xvciAtPSAxIDw8IDg7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGxheWVyQmx1ZSA+IChkZXN0Q29sb3IgJiAweGZmKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdDb2xvciArPSAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobGF5ZXJCbHVlIDwgKGRlc3RDb2xvciAmIDB4ZmYpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld0NvbG9yIC09IDE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBidWZmZXJbc3JjT2Zmc2V0XSA9IG5ld0NvbG9yO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoc3JjUmVjdC5sZWZ0ID4gMCkge1xuICAgICAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgICAgICBmaWxsID0gc3JjUmVjdC5sZWZ0O1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGZvciAodmFyIHkgPSBzcmNSZWN0LnRvcDsgeSA8IHNyY1JlY3QuYm90dG9tOyB5KyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIFxuICAgICAgICAgICAgICAgICAgICAgICAgb2Zmc2V0ID0geSAqIHcsXG4gICAgICAgICAgICAgICAgICAgICAgICBmaWxsQ29sb3IgPSBidWZmZXJbb2Zmc2V0ICsgc3JjUmVjdC5sZWZ0XTtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgZmlsbDsgeCsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBidWZmZXJbb2Zmc2V0KytdID0gZmlsbENvbG9yO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoc3JjUmVjdC5yaWdodCA8IHcpIHtcbiAgICAgICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICAgICAgZmlsbCA9IHcgLSBzcmNSZWN0LnJpZ2h0O1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGZvciAodmFyIHkgPSBzcmNSZWN0LnRvcDsgeSA8IHNyY1JlY3QuYm90dG9tOyB5KyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgICAgICAgICBvZmZzZXQgPSB5ICogdyArIHNyY1JlY3QucmlnaHQsXG4gICAgICAgICAgICAgICAgICAgICAgICBmaWxsQ29sb3IgPSBidWZmZXJbb2Zmc2V0IC0gMV07XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IGZpbGw7IHgrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgYnVmZmVyW29mZnNldCsrXSA9IGZpbGxDb2xvcjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZm9yICh2YXIgeSA9IDA7IHkgPCBzcmNSZWN0LnRvcDsgeSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIFxuICAgICAgICAgICAgICAgICAgICBzcmNPZmZzZXQgPSBzcmNSZWN0LnRvcCAqIHcsXG4gICAgICAgICAgICAgICAgICAgIGRzdE9mZnNldCA9IHkgKiB3O1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgdzsgeCsrLCBzcmNPZmZzZXQrKywgZHN0T2Zmc2V0KyspIHtcbiAgICAgICAgICAgICAgICAgICAgYnVmZmVyW2RzdE9mZnNldF0gPSBidWZmZXJbc3JjT2Zmc2V0XTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGZvciAodmFyIHkgPSBzcmNSZWN0LmJvdHRvbTsgeSA8IHc7IHkrKykge1xuICAgICAgICAgICAgICAgIHZhciBcbiAgICAgICAgICAgICAgICAgICAgc3JjT2Zmc2V0ID0gKHNyY1JlY3QuYm90dG9tIC0gMSkgKiB3LFxuICAgICAgICAgICAgICAgICAgICBkc3RPZmZzZXQgPSB5ICogdztcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IHc7IHgrKywgc3JjT2Zmc2V0KyssIGRzdE9mZnNldCsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGJ1ZmZlcltkc3RPZmZzZXRdID0gYnVmZmVyW3NyY09mZnNldF07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFxuICAgICAgICAgKiBAcGFyYW0gc3JjUmVjdCBDUFJlY3RcbiAgICAgICAgICogQHBhcmFtIGRzdFJlY3QgQ1BSZWN0XG4gICAgICAgICAqIEBwYXJhbSBidWZmZXIgVWludDMyQXJyYXlcbiAgICAgICAgICogQHBhcmFtIGJydXNoIFVpbnQ4QXJyYXlcbiAgICAgICAgICogQHBhcmFtIHcgaW50XG4gICAgICAgICAqIEBwYXJhbSBhbHBoYSBpbnRcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIHNtdWRnZVBhc3RlQnVmZmVyKHNyY1JlY3QsIGRzdFJlY3QsIGJ1ZmZlciwgYnJ1c2gsIHcsIGFscGhhKSB7XG4gICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICBieSA9IHNyY1JlY3QudG9wO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBmb3IgKHZhciB5ID0gZHN0UmVjdC50b3A7IHkgPCBkc3RSZWN0LmJvdHRvbTsgeSsrLCBieSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIFxuICAgICAgICAgICAgICAgICAgICBzcmNPZmZzZXQgPSBzcmNSZWN0LmxlZnQgKyBieSAqIHcsXG4gICAgICAgICAgICAgICAgICAgIGRzdE9mZnNldCA9IGN1ckxheWVyLm9mZnNldE9mUGl4ZWwoZHN0UmVjdC5sZWZ0LCB5KTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBmb3IgKHZhciB4ID0gZHN0UmVjdC5sZWZ0OyB4IDwgZHN0UmVjdC5yaWdodDsgeCsrLCBzcmNPZmZzZXQrKywgZHN0T2Zmc2V0ICs9IENQQ29sb3JCbXAuQllURVNfUEVSX1BJWEVMKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgICAgICAgICAgYnVmZmVyQ29sb3IgPSBidWZmZXJbc3JjT2Zmc2V0XSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wYWNpdHlBbHBoYSA9IChidWZmZXJDb2xvciA+Pj4gMjQpICogKGJydXNoW3NyY09mZnNldF0gJiAweGZmKSAvIDI1NTtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcGFjaXR5QWxwaGEgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJMYXllci5kYXRhW2RzdE9mZnNldCArIENQQ29sb3JCbXAuUkVEX0JZVEVfT0ZGU0VUXSA9IChidWZmZXJDb2xvciA+PiAxNikgJiAweGZmO1xuICAgICAgICAgICAgICAgICAgICAgICAgY3VyTGF5ZXIuZGF0YVtkc3RPZmZzZXQgKyBDUENvbG9yQm1wLkdSRUVOX0JZVEVfT0ZGU0VUXSA9IChidWZmZXJDb2xvciA+PiA4KSAmIDB4ZmY7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJMYXllci5kYXRhW2RzdE9mZnNldCArIENQQ29sb3JCbXAuQkxVRV9CWVRFX09GRlNFVF0gPSBidWZmZXJDb2xvciAmIDB4ZmY7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJMYXllci5kYXRhW2RzdE9mZnNldCArIENQQ29sb3JCbXAuQUxQSEFfQllURV9PRkZTRVRdID0gKGJ1ZmZlckNvbG9yID4+IDI0KSAmIDB4ZmY7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcGFyYW0gc3JjUmVjdCBDUFJlY3RcbiAgICAgICAgICogQHBhcmFtIGRzdFJlY3QgQ1BSZWN0XG4gICAgICAgICAqIEBwYXJhbSBkYWIgQ1BCcnVzaERhYlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5wYWludERhYkltcGxlbWVudGF0aW9uID0gZnVuY3Rpb24oc3JjUmVjdCwgZHN0UmVjdCwgZGFiKSB7XG4gICAgICAgICAgICBpZiAoYnJ1c2hCdWZmZXIgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGJydXNoQnVmZmVyID0gbmV3IFVpbnQzMkFycmF5KGRhYi53aWR0aCAqIGRhYi5oZWlnaHQpO1xuICAgICAgICAgICAgICAgIHNtdWRnZUFjY3VtQnVmZmVyKHNyY1JlY3QsIGRzdFJlY3QsIGJydXNoQnVmZmVyLCBkYWIud2lkdGgsIDApO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBzbXVkZ2VBY2N1bUJ1ZmZlcihzcmNSZWN0LCBkc3RSZWN0LCBicnVzaEJ1ZmZlciwgZGFiLndpZHRoLCBkYWIuYWxwaGEpO1xuICAgICAgICAgICAgICAgIHNtdWRnZVBhc3RlQnVmZmVyKHNyY1JlY3QsIGRzdFJlY3QsIGJydXNoQnVmZmVyLCBkYWIuYnJ1c2gsIGRhYi53aWR0aCwgZGFiLmFscGhhKTtcblxuICAgICAgICAgICAgICAgIGlmIChsb2NrQWxwaGEpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzdG9yZUFscGhhKGRzdFJlY3QpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgb3BhY2l0eUFyZWEubWFrZUVtcHR5KCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChzYW1wbGVBbGxMYXllcnMpIHtcbiAgICAgICAgICAgICAgICB0aGF0LmZ1c2lvbkxheWVycygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH1cbiAgICBcbiAgICBDUEJydXNoVG9vbFNtdWRnZS5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKENQQnJ1c2hUb29sRGlyZWN0QnJ1c2gucHJvdG90eXBlKTtcbiAgICBDUEJydXNoVG9vbFNtdWRnZS5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBDUEJydXNoVG9vbFNtdWRnZTtcblxuICAgIENQQnJ1c2hUb29sU211ZGdlLnByb3RvdHlwZS5tZXJnZU9wYWNpdHlCdWYgPSBmdW5jdGlvbihkc3RSZWN0LCBjb2xvcikge1xuICAgIH07XG4gICAgXG4gICAgdmFyIHBhaW50aW5nTW9kZXMgPSBbXG4gICAgICAgIG5ldyBDUEJydXNoVG9vbFNpbXBsZUJydXNoKCksIG5ldyBDUEJydXNoVG9vbEVyYXNlcigpLCBuZXcgQ1BCcnVzaFRvb2xEb2RnZSgpLFxuICAgICAgICBuZXcgQ1BCcnVzaFRvb2xCdXJuKCksIG5ldyBDUEJydXNoVG9vbFdhdGVyY29sb3IoKSwgbmV3IENQQnJ1c2hUb29sQmx1cigpLCBuZXcgQ1BCcnVzaFRvb2xTbXVkZ2UoKSxcbiAgICAgICAgbmV3IENQQnJ1c2hUb29sT2lsKClcbiAgICBdO1xuICAgIFxuICAgIHRoaXMud2lkdGggPSBfd2lkdGg7XG4gICAgdGhpcy5oZWlnaHQgPSBfaGVpZ2h0O1xuXG4gICAgdGhpcy5nZXREZWZhdWx0TGF5ZXJOYW1lID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhclxuICAgICAgICAgICAgcHJlZml4ID0gXCJMYXllciBcIixcbiAgICAgICAgICAgIGhpZ2hlc3RMYXllck5iID0gMDtcbiAgICAgICAgXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGF5ZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICBsYXllciA9IGxheWVyc1tpXTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKC9eTGF5ZXIgWzAtOV0rJC8udGVzdChsYXllci5uYW1lKSkge1xuICAgICAgICAgICAgICAgIGhpZ2hlc3RMYXllck5iID0gTWF0aC5tYXgoaGlnaGVzdExheWVyTmIsIHBhcnNlSW50KGxheWVyLm5hbWUuc3Vic3RyaW5nKHByZWZpeC5sZW5ndGgpLCAxMCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBwcmVmaXggKyAoaGlnaGVzdExheWVyTmIgKyAxKTtcbiAgICB9O1xuICAgIFxuICAgIGZ1bmN0aW9uIHJlc3RvcmVBbHBoYShyZWN0KSB7XG4gICAgICAgIHRoYXQuZ2V0QWN0aXZlTGF5ZXIoKS5jb3B5QWxwaGFGcm9tKHVuZG9CdWZmZXIsIHJlY3QpO1xuICAgIH1cbiAgICBcbiAgICAvKipcbiAgICAgKiBNZXJnZSB0aGUgb3BhY2l0eSBidWZmZXIgZnJvbSB0aGUgY3VycmVudCBkcmF3aW5nIG9wZXJhdGlvbiB0byB0aGUgYWN0aXZlIGxheWVyLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIG1lcmdlT3BhY2l0eUJ1ZmZlcihjb2xvciwgY2xlYXIpIHtcbiAgICAgICAgaWYgKCFvcGFjaXR5QXJlYS5pc0VtcHR5KCkpIHtcbiAgICAgICAgICAgIGlmIChjdXJCcnVzaC5wYWludE1vZGUgIT0gQ1BCcnVzaEluZm8uTV9FUkFTRSB8fCAhbG9ja0FscGhhKSB7XG4gICAgICAgICAgICAgICAgcGFpbnRpbmdNb2Rlc1tjdXJCcnVzaC5wYWludE1vZGVdLm1lcmdlT3BhY2l0eUJ1ZihvcGFjaXR5QXJlYSwgY29sb3IpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBGSVhNRTogaXQgd291bGQgYmUgbmljZSB0byBiZSBhYmxlIHRvIHNldCB0aGUgcGFwZXIgY29sb3JcbiAgICAgICAgICAgICAgICBwYWludGluZ01vZGVzW0NQQnJ1c2hJbmZvLk1fUEFJTlRdLm1lcmdlT3BhY2l0eUJ1ZihvcGFjaXR5QXJlYSwgRU1QVFlfTEFZRVJfQ09MT1IpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAobG9ja0FscGhhKSB7XG4gICAgICAgICAgICAgICAgcmVzdG9yZUFscGhhKG9wYWNpdHlBcmVhKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGNsZWFyKSB7XG4gICAgICAgICAgICAgICAgb3BhY2l0eUJ1ZmZlci5jbGVhclJlY3Qob3BhY2l0eUFyZWEsIDApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBvcGFjaXR5QXJlYS5tYWtlRW1wdHkoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBcbiAgICB0aGlzLmFkZEJhY2tncm91bmRMYXllciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXJcbiAgICAgICAgICAgIGxheWVyID0gbmV3IENQTGF5ZXIodGhhdC53aWR0aCwgdGhhdC5oZWlnaHQsIHRoaXMuZ2V0RGVmYXVsdExheWVyTmFtZSgpKTtcbiAgICAgICAgXG4gICAgICAgIGxheWVyLmNsZWFyQWxsKEVNUFRZX0JBQ0tHUk9VTkRfQ09MT1IpO1xuICAgICAgICBcbiAgICAgICAgdGhpcy5hZGRMYXllck9iamVjdChsYXllcik7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIE1lcmdlIHRvZ2V0aGVyIHRoZSB2aXNpYmxlIGxheWVycyBhbmQgcmV0dXJuIHRoZSByZXN1bHRpbmcgSW1hZ2VEYXRhIGZvciBkaXNwbGF5IHRvIHRoZSBzY3JlZW4uXG4gICAgICogXG4gICAgICogVGhlIGltYWdlIGlzIGNhY2hlZCwgc28gcmVwZWF0IGNhbGxzIGFyZSBjaGVhcC5cbiAgICAgKi9cbiAgICB0aGlzLmZ1c2lvbkxheWVycyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAvLyBJcyB0aGVyZSBhbnl0aGluZyB0byB1cGRhdGUgZnJvbSBsYXN0IGNhbGw/XG4gICAgICAgIGlmICghZnVzaW9uQXJlYS5pc0VtcHR5KCkpIHtcbiAgICAgICAgICAgIC8vIFRoZSBjdXJyZW50IGJydXNoIHJlbmRlcnMgb3V0IGl0cyBidWZmZXJzIHRvIHRoZSBsYXllciBzdGFjayBmb3IgdXNcbiAgICAgICAgICAgIG1lcmdlT3BhY2l0eUJ1ZmZlcihjdXJDb2xvciwgZmFsc2UpO1xuXG4gICAgICAgICAgICAvLyBJZiB0aGUgZHJhd2luZyBpcyBzaW5nbGUtbGF5ZXJlZCBhbmQgb3BhcXVlLCBqdXN0IHVzZSB0aGUgYm90dG9tLW1vc3QgbGF5ZXIgYXMgb3VyIGZ1c2lvbiwgd2UgZG9uJ3QgbmVlZCB0byBibGVuZCBhbnl0aGluZyFcbiAgICAgICAgICAgIGlmIChsYXllcnMubGVuZ3RoID09IDEgJiYgbGF5ZXJzWzBdLmFscGhhID49IDEwMCAmJiBsYXllcnNbMF0udmlzaWJsZSkge1xuICAgICAgICAgICAgICAgIGZ1c2lvbiA9IGxheWVyc1swXTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gRnVzZSBpbnRvIHRoZSBhY3R1YWwgZnVzaW9uIGJ1ZmZlciBzaW5jZSB3ZSBuZWVkIHRvIGJsZW5kXG4gICAgICAgICAgICAgICAgZnVzaW9uID0gZnVzaW9uQnVmZmVyO1xuXG4gICAgICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgICAgIGZ1c2lvbklzU2VtaVRyYW5zcGFyZW50ID0gdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgZmlyc3QgPSB0cnVlO1xuXG4gICAgICAgICAgICAgICAgbGF5ZXJzLmZvckVhY2goZnVuY3Rpb24gKGxheWVyKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghZmlyc3QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZ1c2lvbklzU2VtaVRyYW5zcGFyZW50ID0gZnVzaW9uSXNTZW1pVHJhbnNwYXJlbnQgJiYgZnVzaW9uLmhhc0FscGhhSW5SZWN0KGZ1c2lvbkFyZWEpO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGxheWVyLnZpc2libGUgJiYgbGF5ZXIuYWxwaGEgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZmlyc3QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaXJzdCA9IGZhbHNlO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGxheWVyLmFscGhhID09IDEwMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBJbnN0ZWFkIG9mIGJsZW5kaW5nIHRoZSBsYXllciBvbnRvIHRoZSBlbXB0eSB0cmFuc3BhcmVudCBmdXNpb24sIHdlIGNhbiBqdXN0IGNvcHkgdGhlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIGxheWVyIGRhdGEgcmlnaHQgaW50byB0aGUgZnVzaW9uLiBUaGlzIHdvcmtzIGZvciBhbGwgb2Ygb3VyIGJsZW5kaW5nIG1vZGVzLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdXNpb24uY29weUJpdG1hcFJlY3QobGF5ZXIsIGZ1c2lvbkFyZWEubGVmdCwgZnVzaW9uQXJlYS50b3AsIGZ1c2lvbkFyZWEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVzaW9uLmNsZWFyUmVjdChmdXNpb25BcmVhLCAweDAwRkZGRkZGKTsgLy8gVHJhbnNwYXJlbnQgd2hpdGVcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgd2UncmUgbWVyZ2luZyBvbnRvIGEgc2VtaS10cmFuc3BhcmVudCBjYW52YXMgdGhlbiB3ZSBuZWVkIHRvIGJsZW5kIG91ciBvcGFjaXR5IHZhbHVlcyBvbnRvIHRoZSBleGlzdGluZyBvbmVzXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZnVzaW9uSXNTZW1pVHJhbnNwYXJlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXllci5mdXNpb25XaXRoRnVsbEFscGhhKGZ1c2lvbiwgZnVzaW9uQXJlYSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE1vc3QgZHJhd2luZ3Mgd2lsbCBlbmQgdXAgaGF2aW5nIDEwMCUgY292ZXJhZ2UgYW5kIHdlIGNhbiBzcGVlZCB0aGluZ3MgdXAgd2l0aCB0aGlzIHZlcnNpb24gaW5zdGVhZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxheWVyLmZ1c2lvbldpdGgoZnVzaW9uLCBmdXNpb25BcmVhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgaWYgKGZpcnN0KSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIERpZG4ndCBkcmF3IGFueSBsYXllcnM/IFdlIGhhdmUgdG8gY2xlYXIgdGhlIGFyZWEsIHRoZW5cbiAgICAgICAgICAgICAgICAgICAgZnVzaW9uLmNsZWFyUmVjdChmdXNpb25BcmVhLCAweDAwRkZGRkZGKTsgLy8gVHJhbnNwYXJlbnQgd2hpdGVcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1c2lvbkFyZWEubWFrZUVtcHR5KCk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHJldHVybiBmdXNpb24uZ2V0SW1hZ2VEYXRhKCk7XG4gICAgfVxuICAgIFxuICAgIHRoaXMuc2V0QWN0aXZlTGF5ZXJJbmRleCA9IGZ1bmN0aW9uKG5ld0luZGV4KSB7XG4gICAgICAgIGlmIChuZXdJbmRleCA8IDAgfHwgbmV3SW5kZXggPj0gbGF5ZXJzLmxlbmd0aCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGN1ckxheWVyICE9IGxheWVyc1tuZXdJbmRleF0pIHtcbiAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgIG9sZEluZGV4ID0gdGhpcy5nZXRBY3RpdmVMYXllckluZGV4KCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGN1ckxheWVyID0gbGF5ZXJzW25ld0luZGV4XTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gV2FzIHRoZSBvbGQgbGF5ZXIgZGVsZXRlZD9cbiAgICAgICAgICAgIGlmIChvbGRJbmRleCA9PSAtMSkge1xuICAgICAgICAgICAgICAgIGNhbGxMaXN0ZW5lcnNMYXllckNoYW5nZSgpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjYWxsTGlzdGVuZXJzTGF5ZXJDaGFuZ2Uob2xkSW5kZXgpOyAvLyBPbGQgbGF5ZXIgaGFzIG5vdyBiZWVuIGRlc2VsZWN0ZWRcbiAgICAgICAgICAgICAgICBjYWxsTGlzdGVuZXJzTGF5ZXJDaGFuZ2UobmV3SW5kZXgpOyAvLyBOZXcgbGF5ZXIgaGFzIG5vdyBiZWVuIHNlbGVjdGVkXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGludmFsaWRhdGVMYXllclVuZG8oKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgXG4gICAgdGhpcy5nZXRBY3RpdmVMYXllckluZGV4ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGF5ZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAobGF5ZXJzW2ldID09IGN1ckxheWVyKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHJldHVybiAtMTtcbiAgICB9O1xuICAgIFxuICAgIC8qXG4gICAgICogR2V0IHRoZSBpbmRleCBvZiB0aGUgdG9wbW9zdCB2aXNpYmxlIGxheWVyLCBvciAwLlxuICAgICAqL1xuICAgIHRoaXMuZ2V0VG9wbW9zdFZpc2libGVMYXllciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBmb3IgKHZhciBpID0gbGF5ZXJzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgICAgICBpZiAobGF5ZXJzW2ldLnZpc2libGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gaTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgcmV0dXJuIDA7XG4gICAgfTtcblxuXHQvKipcbiAgICAgKiBHZXQgdGhlIGxheWVyIHdpdGggdGhlIHNwZWNpZmllZCBpbmRleCAobm8gYm91bmRzIGNoZWNraW5nKVxuICAgICAqXG4gICAgICogQHBhcmFtIHtpbnR9IGlcbiAgICAgKiBAcmV0dXJucyB7Q1BMYXllcn1cbiAgICAgKi9cbiAgICB0aGlzLmdldExheWVyID0gZnVuY3Rpb24oaSkge1xuICAgICAgICByZXR1cm4gbGF5ZXJzW2ldO1xuICAgIH07XG5cblx0LyoqXG4gICAgICogR2V0IHRoZSBjdXJyZW50bHkgYWN0aXZlIGxheWVyICh0aGUgbGF5ZXIgdGhhdCBkcmF3aW5nIG9wZXJhdGlvbnMgd2lsbCBiZSBhcHBsaWVkIHRvKSlcbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHtDUExheWVyfVxuICAgICAqL1xuICAgIHRoaXMuZ2V0QWN0aXZlTGF5ZXIgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIGN1ckxheWVyO1xuICAgIH07XG5cbiAgICB0aGlzLmdldERvY01lbW9yeVVzZWQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyXG4gICAgICAgICAgICB0b3RhbCA9IGZ1c2lvbkJ1ZmZlci5nZXRNZW1vcnlTaXplKCkgKiAoMyArIGxheWVycy5sZW5ndGgpO1xuXG4gICAgICAgIGlmIChjbGlwYm9hcmQgIT0gbnVsbCkge1xuICAgICAgICAgICAgdG90YWwgKz0gY2xpcGJvYXJkLmJtcC5nZXRNZW1vcnlTaXplKCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdG90YWw7XG4gICAgfTtcblxuICAgIHRoaXMuZ2V0VW5kb01lbW9yeVVzZWQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyXG4gICAgICAgICAgICB0b3RhbCA9IDA7XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCByZWRvTGlzdC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgdW5kbyA9IHJlZG9MaXN0W2ldO1xuXG4gICAgICAgICAgICB0b3RhbCArPSB1bmRvLmdldE1lbW9yeVVzZWQodHJ1ZSwgbnVsbCk7XG4gICAgICAgIH1cblxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHVuZG9MaXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICB1bmRvID0gdW5kb0xpc3RbaV07XG5cbiAgICAgICAgICAgIHRvdGFsICs9IHVuZG8uZ2V0TWVtb3J5VXNlZChmYWxzZSwgbnVsbCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdG90YWw7XG4gICAgfTtcbiAgICBcbiAgICBmdW5jdGlvbiBjYW5VbmRvKCkge1xuICAgICAgICByZXR1cm4gdW5kb0xpc3QubGVuZ3RoID4gMDtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjYW5SZWRvKCkge1xuICAgICAgICByZXR1cm4gcmVkb0xpc3QubGVuZ3RoID4gMDtcbiAgICB9XG5cbiAgICAvL1xuICAgIC8vIFVuZG8gLyBSZWRvXG4gICAgLy9cblxuICAgIHRoaXMudW5kbyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAoIWNhblVuZG8oKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGhhc1Vuc2F2ZWRDaGFuZ2VzID0gdHJ1ZTtcbiAgICAgICAgXG4gICAgICAgIHZhclxuICAgICAgICAgICAgdW5kbyA9IHVuZG9MaXN0LnBvcCgpO1xuICAgICAgICBcbiAgICAgICAgdW5kby51bmRvKCk7XG4gICAgICAgIFxuICAgICAgICByZWRvTGlzdC5wdXNoKHVuZG8pO1xuICAgIH1cblxuICAgIHRoaXMucmVkbyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAoIWNhblJlZG8oKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGhhc1Vuc2F2ZWRDaGFuZ2VzID0gdHJ1ZTtcblxuICAgICAgICB2YXJcbiAgICAgICAgICAgIHJlZG8gPSByZWRvTGlzdC5wb3AoKTtcbiAgICAgICAgXG4gICAgICAgIHJlZG8ucmVkbygpO1xuICAgICAgICBcbiAgICAgICAgdW5kb0xpc3QucHVzaChyZWRvKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBFbnN1cmVzIHRoYXQgdGhlIHN0YXRlIG9mIHRoZSBjdXJyZW50IGxheWVyIGhhcyBiZWVuIHN0b3JlZCBpbiB1bmRvQnVmZmVyIHNvIGl0IGNhbiBiZSB1bmRvbmUgbGF0ZXIuXG4gICAgICovXG4gICAgZnVuY3Rpb24gcHJlcGFyZUZvckxheWVyVW5kbygpIHtcbiAgICAgICAgaWYgKCF1bmRvQnVmZmVySW52YWxpZFJlZ2lvbi5pc0VtcHR5KCkpIHtcbiAgICAgICAgICAgIC8vY29uc29sZS5sb2coXCJDb3B5aW5nIFwiICsgdW5kb0J1ZmZlckludmFsaWRSZWdpb24gKyBcIiB0byB0aGUgdW5kbyBidWZmZXJcIik7XG4gICAgICAgICAgICB1bmRvQnVmZmVyLmNvcHlCaXRtYXBSZWN0KGN1ckxheWVyLCB1bmRvQnVmZmVySW52YWxpZFJlZ2lvbi5sZWZ0LCB1bmRvQnVmZmVySW52YWxpZFJlZ2lvbi50b3AsIHVuZG9CdWZmZXJJbnZhbGlkUmVnaW9uKTtcbiAgICAgICAgICAgIHVuZG9CdWZmZXJJbnZhbGlkUmVnaW9uLm1ha2VFbXB0eSgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2FsbCB3aGVuIHRoZSB1bmRvIGJ1ZmZlciBoYXMgYmVjb21lIGNvbXBsZXRlbHkgd29ydGhsZXNzIChlLmcuIGFmdGVyIHRoZSBhY3RpdmUgbGF5ZXIgaW5kZXggY2hhbmdlcywgdGhlIHVuZG9cbiAgICAgKiBidWZmZXIgd29uJ3QgY29udGFpbiBhbnkgZGF0YSBmcm9tIHRoZSBuZXcgbGF5ZXIgdG8gYmVnaW4gd2l0aCkuXG4gICAgICovXG4gICAgZnVuY3Rpb24gaW52YWxpZGF0ZUxheWVyVW5kbygpIHtcbiAgICAgICAgdW5kb0J1ZmZlckludmFsaWRSZWdpb24gPSB0aGF0LmdldEJvdW5kcygpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoZSByZXN1bHQgb2Ygc29tZSBvZiBvdXIgb3BlcmF0aW9ucyBhcmVuJ3QgbmVlZGVkIHVudGlsIGxhdGVyLCBzbyB3ZSBjYW4gZGVmZXIgdGhlbSB1bnRpbCB0aGUgdXNlciBpcyBpZGxlLlxuICAgICAqXG4gICAgICogWW91IG1heSBjYWxsIHRoaXMgcm91dGluZSBhdCBhbnkgdGltZSAob3IgbmV2ZXIsIGlmIHlvdSBsaWtlKSBhcyBhIGhpbnQgdGhhdCB0aGUgdXNlciBpcyBpZGxlIGFuZCB3ZSBzaG91bGRcbiAgICAgKiB0cnkgdG8gcGVyZm9ybSBwZW5kaW5nIG9wZXJhdGlvbnMgYmVmb3JlIHdlIHdpbGwgbmVlZCB0byBibG9jayBvbiB0aGVpciByZXN1bHRzLlxuICAgICAqL1xuICAgIHRoaXMucGVyZm9ybUlkbGVUYXNrcyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBwcmVwYXJlRm9yTGF5ZXJVbmRvKCk7XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIGFkZFVuZG8odW5kbykge1xuICAgICAgICBoYXNVbnNhdmVkQ2hhbmdlcyA9IHRydWU7XG5cbiAgICAgICAgaWYgKHJlZG9MaXN0Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHJlZG9MaXN0ID0gW107XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodW5kb0xpc3QubGVuZ3RoID09IDAgfHwgIXVuZG9MaXN0W3VuZG9MaXN0Lmxlbmd0aCAtIDFdLm1lcmdlKHVuZG8pKSB7XG4gICAgICAgICAgICBpZiAodW5kb0xpc3QubGVuZ3RoID49IE1BWF9VTkRPKSB7XG4gICAgICAgICAgICAgICAgdW5kb0xpc3QudW5zaGlmdCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHVuZG9MaXN0Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICB1bmRvTGlzdFt1bmRvTGlzdC5sZW5ndGggLSAxXS5jb21wYWN0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB1bmRvTGlzdC5wdXNoKHVuZG8pO1xuICAgICAgICB9IGVsc2UgaWYgKHVuZG9MaXN0W3VuZG9MaXN0Lmxlbmd0aCAtIDFdLm5vQ2hhbmdlKCkpIHtcbiAgICAgICAgICAgIC8vIFR3byBtZXJnZWQgY2hhbmdlcyBjYW4gbWVhbiBubyBjaGFuZ2UgYXQgYWxsXG4gICAgICAgICAgICAvLyBkb24ndCBsZWF2ZSBhIHVzZWxlc3MgdW5kbyBpbiB0aGUgbGlzdFxuICAgICAgICAgICAgdW5kb0xpc3QucG9wKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLmNsZWFySGlzdG9yeSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB1bmRvTGlzdCA9IFtdO1xuICAgICAgICByZWRvTGlzdCA9IFtdO1xuICAgIH07XG4gICAgXG4gICAgdGhpcy5jb2xvclBpY2tlciA9IGZ1bmN0aW9uKHgsIHkpIHtcbiAgICAgICAgLy8gbm90IHJlYWxseSBuZWNlc3NhcnkgYW5kIGNvdWxkIHBvdGVudGlhbGx5IHRoZSByZXBhaW50XG4gICAgICAgIC8vIG9mIHRoZSBjYW52YXMgdG8gbWlzcyB0aGF0IGFyZWFcbiAgICAgICAgLy8gdGhpcy5mdXNpb25MYXllcnMoKTtcblxuICAgICAgICByZXR1cm4gZnVzaW9uLmdldFBpeGVsKH5+eCwgfn55KSAmIDB4RkZGRkZGO1xuICAgIH1cblxuICAgIHRoaXMuc2V0U2VsZWN0aW9uID0gZnVuY3Rpb24ocmVjdCkge1xuICAgICAgICBjdXJTZWxlY3Rpb24uc2V0KHJlY3QpO1xuICAgICAgICBjdXJTZWxlY3Rpb24uY2xpcCh0aGlzLmdldEJvdW5kcygpKTtcbiAgICB9O1xuXG4gICAgdGhpcy5lbXB0eVNlbGVjdGlvbiA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBjdXJTZWxlY3Rpb24ubWFrZUVtcHR5KCk7XG4gICAgfTtcblxuICAgIHRoaXMuZmxvb2RGaWxsID0gZnVuY3Rpb24oeCwgeSkge1xuICAgICAgICBwcmVwYXJlRm9yTGF5ZXJVbmRvKCk7XG4gICAgICAgIHVuZG9BcmVhID0gdGhpcy5nZXRCb3VuZHMoKTtcblxuICAgICAgICBjdXJMYXllci5mbG9vZEZpbGwofn54LCB+fnksIGN1ckNvbG9yIHwgMHhmZjAwMDAwMCk7XG5cbiAgICAgICAgYWRkVW5kbyhuZXcgQ1BVbmRvUGFpbnQoKSk7XG4gICAgICAgIGludmFsaWRhdGVGdXNpb24oKTtcbiAgICB9O1xuXG4gICAgdGhpcy5ncmFkaWVudEZpbGwgPSBmdW5jdGlvbihmcm9tWCwgZnJvbVksIHRvWCwgdG9ZLCBncmFkaWVudFBvaW50cykge1xuICAgICAgICB2YXJcbiAgICAgICAgICAgIHIgPSB0aGlzLmdldFNlbGVjdGlvbkF1dG9TZWxlY3QoKTtcblxuICAgICAgICBwcmVwYXJlRm9yTGF5ZXJVbmRvKCk7XG4gICAgICAgIHVuZG9BcmVhID0gcjtcblxuICAgICAgICBjdXJMYXllci5ncmFkaWVudChyLCBmcm9tWCwgZnJvbVksIHRvWCwgdG9ZLCBncmFkaWVudFBvaW50cyk7XG5cbiAgICAgICAgaWYgKGxvY2tBbHBoYSkge1xuICAgICAgICAgICAgcmVzdG9yZUFscGhhKHIpO1xuICAgICAgICB9XG5cbiAgICAgICAgYWRkVW5kbyhuZXcgQ1BVbmRvUGFpbnQoKSk7XG4gICAgICAgIGludmFsaWRhdGVGdXNpb24oKTtcbiAgICB9O1xuXG4gICAgdGhpcy5maWxsID0gZnVuY3Rpb24oY29sb3IpIHtcbiAgICAgICAgdmFyXG4gICAgICAgICAgICByID0gdGhpcy5nZXRTZWxlY3Rpb25BdXRvU2VsZWN0KCk7XG5cbiAgICAgICAgcHJlcGFyZUZvckxheWVyVW5kbygpO1xuICAgICAgICB1bmRvQXJlYSA9IHI7XG5cbiAgICAgICAgY3VyTGF5ZXIuY2xlYXJSZWN0KHIsIGNvbG9yKTtcblxuICAgICAgICBhZGRVbmRvKG5ldyBDUFVuZG9QYWludCgpKTtcbiAgICAgICAgaW52YWxpZGF0ZUZ1c2lvbigpO1xuICAgIH07XG5cbiAgICB0aGlzLmNsZWFyID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHRoaXMuZmlsbCgweGZmZmZmZik7XG4gICAgfTtcblxuICAgIHRoaXMuaEZsaXAgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyXG4gICAgICAgICAgICByID0gdGhpcy5nZXRTZWxlY3Rpb25BdXRvU2VsZWN0KCk7XG5cbiAgICAgICAgcHJlcGFyZUZvckxheWVyVW5kbygpO1xuICAgICAgICB1bmRvQXJlYSA9IHI7XG5cbiAgICAgICAgY3VyTGF5ZXIuY29weVJlZ2lvbkhGbGlwKHIsIHVuZG9CdWZmZXIpO1xuXG4gICAgICAgIGFkZFVuZG8obmV3IENQVW5kb1BhaW50KCkpO1xuICAgICAgICBpbnZhbGlkYXRlRnVzaW9uKCk7XG4gICAgfTtcblxuICAgIHRoaXMudkZsaXAgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyXG4gICAgICAgICAgICByID0gdGhpcy5nZXRTZWxlY3Rpb25BdXRvU2VsZWN0KCk7XG5cbiAgICAgICAgcHJlcGFyZUZvckxheWVyVW5kbygpO1xuICAgICAgICB1bmRvQXJlYSA9IHI7XG5cbiAgICAgICAgY3VyTGF5ZXIuY29weVJlZ2lvblZGbGlwKHIsIHVuZG9CdWZmZXIpO1xuXG4gICAgICAgIGFkZFVuZG8obmV3IENQVW5kb1BhaW50KCkpO1xuICAgICAgICBpbnZhbGlkYXRlRnVzaW9uKCk7XG4gICAgfTtcblxuICAgIHRoaXMubW9ub2Nocm9tYXRpY05vaXNlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhclxuICAgICAgICAgICAgciA9IHRoaXMuZ2V0U2VsZWN0aW9uQXV0b1NlbGVjdCgpO1xuXG4gICAgICAgIHByZXBhcmVGb3JMYXllclVuZG8oKTtcbiAgICAgICAgdW5kb0FyZWEgPSByO1xuXG4gICAgICAgIGN1ckxheWVyLmZpbGxXaXRoTm9pc2Uocik7XG5cbiAgICAgICAgYWRkVW5kbyhuZXcgQ1BVbmRvUGFpbnQoKSk7XG4gICAgICAgIGludmFsaWRhdGVGdXNpb24oKTtcbiAgICB9O1xuXG4gICAgdGhpcy5jb2xvck5vaXNlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhclxuICAgICAgICAgICAgciA9IHRoaXMuZ2V0U2VsZWN0aW9uQXV0b1NlbGVjdCgpO1xuXG4gICAgICAgIHByZXBhcmVGb3JMYXllclVuZG8oKTtcbiAgICAgICAgdW5kb0FyZWEgPSByO1xuXG4gICAgICAgIGN1ckxheWVyLmZpbGxXaXRoQ29sb3JOb2lzZShyKTtcblxuICAgICAgICBhZGRVbmRvKG5ldyBDUFVuZG9QYWludCgpKTtcbiAgICAgICAgaW52YWxpZGF0ZUZ1c2lvbigpO1xuICAgIH07XG4gICAgXG4gICAgdGhpcy5pbnZlcnQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyXG4gICAgICAgICAgICByID0gdGhpcy5nZXRTZWxlY3Rpb25BdXRvU2VsZWN0KCk7XG5cbiAgICAgICAgcHJlcGFyZUZvckxheWVyVW5kbygpO1xuICAgICAgICB1bmRvQXJlYSA9IHI7XG5cbiAgICAgICAgY3VyTGF5ZXIuaW52ZXJ0KHIpO1xuXG4gICAgICAgIGFkZFVuZG8obmV3IENQVW5kb1BhaW50KCkpO1xuICAgICAgICBpbnZhbGlkYXRlRnVzaW9uKCk7XG4gICAgfTtcbiAgICBcbiAgICB0aGlzLmJveEJsdXIgPSBmdW5jdGlvbihyYWRpdXNYLCByYWRpdXNZLCBpdGVyYXRpb25zKSB7XG4gICAgICAgIHZhclxuICAgICAgICAgICAgciA9IHRoaXMuZ2V0U2VsZWN0aW9uQXV0b1NlbGVjdCgpO1xuXG4gICAgICAgIHByZXBhcmVGb3JMYXllclVuZG8oKTtcbiAgICAgICAgdW5kb0FyZWEgPSByO1xuXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaXRlcmF0aW9uczsgaSsrKSB7XG4gICAgICAgICAgICBjdXJMYXllci5ib3hCbHVyKHIsIHJhZGl1c1gsIHJhZGl1c1kpO1xuICAgICAgICB9XG5cbiAgICAgICAgYWRkVW5kbyhuZXcgQ1BVbmRvUGFpbnQoKSk7XG4gICAgICAgIGludmFsaWRhdGVGdXNpb24oKTtcbiAgICB9O1xuICAgIFxuICAgIHRoaXMucmVjdGFuZ2xlU2VsZWN0aW9uID0gZnVuY3Rpb24ocikge1xuICAgICAgICB2YXJcbiAgICAgICAgICAgIG5ld1NlbGVjdGlvbiA9IHIuY2xvbmUoKTtcbiAgICAgICAgXG4gICAgICAgIG5ld1NlbGVjdGlvbi5jbGlwKHRoaXMuZ2V0Qm91bmRzKCkpO1xuXG4gICAgICAgIGFkZFVuZG8obmV3IENQVW5kb1JlY3RhbmdsZVNlbGVjdGlvbih0aGlzLmdldFNlbGVjdGlvbigpLCBuZXdTZWxlY3Rpb24pKTtcblxuICAgICAgICB0aGlzLnNldFNlbGVjdGlvbihuZXdTZWxlY3Rpb24pO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIG1vc3QgcmVjZW50bHkgY29tcGxldGVkIG9wZXJhdGlvbiBmcm9tIHRoZSB1bmRvIGxpc3QsIG9yIG51bGwgaWYgdGhlIHVuZG8gbGlzdCBpcyBlbXB0eS5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHsqfVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGdldEFjdGl2ZU9wZXJhdGlvbigpIHtcbiAgICAgICAgaWYgKHVuZG9MaXN0Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHJldHVybiB1bmRvTGlzdFt1bmRvTGlzdC5sZW5ndGggLSAxXTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE1vdmUgdGhlIGN1cnJlbnRseSBzZWxlY3RlZCBsYXllciBkYXRhIGJ5IHRoZSBnaXZlbiBvZmZzZXQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge2ludH0gb2Zmc2V0WFxuICAgICAqIEBwYXJhbSB7aW50fSBvZmZzZXRZXG4gICAgICogQHBhcmFtIHtib29sZWFufSBjb3B5IC0gTWFrZSBhIGNvcHkgb2YgdGhlIHNlbGVjdGlvbiBpbnN0ZWFkIG9mIG1vdmluZyBpdC5cbiAgICAgKi9cbiAgICB0aGlzLm1vdmUgPSBmdW5jdGlvbihvZmZzZXRYLCBvZmZzZXRZLCBjb3B5KSB7XG4gICAgICAgIC8qXG4gICAgICAgICAqIEFkZCByb3VuZGluZyB0byBlbnN1cmUgd2UgaGF2ZW4ndCBiZWVuIGdpdmVuIGZsb2F0IGNvb3JkaW5hdGVzICh0aGF0IHdvdWxkIGNhdXNlIGhvcnJpYmxlIGZsb3ctb24gZWZmZWN0cyBsaWtlXG4gICAgICAgICAqIHRoZSBib3VuZGFyeSBvZiB0aGUgdW5kbyByZWN0YW5nbGUgaGF2aW5nIGZsb2F0IGNvb3JkaW5hdGVzKVxuICAgICAgICAgKi9cbiAgICAgICAgb2Zmc2V0WCB8PSAwO1xuICAgICAgICBvZmZzZXRZIHw9IDA7XG5cbiAgICAgICAgaWYgKG9mZnNldFggPT0gMCAmJiBvZmZzZXRZID09IDApIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIG9wYWNpdHlBcmVhLm1ha2VFbXB0eSgpOyAvLyBQcmV2ZW50cyBhIGRyYXdpbmcgdG9vbCBiZWluZyBjYWxsZWQgZHVyaW5nIGxheWVyIGZ1c2lvbiB0byBkcmF3IGl0c2VsZiB0byB0aGUgbGF5ZXJcblxuICAgICAgICB2YXJcbiAgICAgICAgICAgIGFjdGl2ZU9wID0gZ2V0QWN0aXZlT3BlcmF0aW9uKCk7XG5cbiAgICAgICAgLy8gSWYgd2UndmUgY2hhbmdlZCBsYXllcnMgc2luY2Ugb3VyIGxhc3QgbW92ZSwgd2Ugd2FudCB0byBtb3ZlIHRoZSBuZXcgbGF5ZXIsIG5vdCB0aGUgb2xkIG9uZSwgc28gY2FuJ3QgYW1lbmRcbiAgICAgICAgaWYgKCFjb3B5ICYmIGFjdGl2ZU9wIGluc3RhbmNlb2YgQ1BBY3Rpb25Nb3ZlU2VsZWN0aW9uICYmIGFjdGl2ZU9wLmxheWVySW5kZXggPT0gdGhpcy5nZXRBY3RpdmVMYXllckluZGV4KCkpIHtcbiAgICAgICAgICAgIGFjdGl2ZU9wLmFtZW5kKG9mZnNldFgsIG9mZnNldFkpO1xuICAgICAgICAgICAgcmVkb0xpc3QgPSBbXTtcbiAgICAgICAgICAgIGhhc1Vuc2F2ZWRDaGFuZ2VzID0gdHJ1ZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGFjdGl2ZU9wID0gbmV3IENQQWN0aW9uTW92ZVNlbGVjdGlvbih0aGlzLmdldFNlbGVjdGlvbkF1dG9TZWxlY3QoKSwgb2Zmc2V0WCwgb2Zmc2V0WSwgY29weSk7XG5cbiAgICAgICAgICAgIGFkZFVuZG8oYWN0aXZlT3ApO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIENoYW5nZSB0aGUgaW50ZXJwb2xhdGlvbiBtb2RlIHVzZWQgYnkgRnJlZSBUcmFuc2Zvcm0gb3BlcmF0aW9uc1xuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGludGVycG9sYXRpb24gLSBFaXRoZXIgXCJzaGFycFwiIG9yIFwic21vb3RoXCJcbiAgICAgKi9cbiAgICB0aGlzLnNldFRyYW5zZm9ybUludGVycG9sYXRpb24gPSBmdW5jdGlvbihpbnRlcnBvbGF0aW9uKSB7XG4gICAgICAgIHRyYW5zZm9ybUludGVycG9sYXRpb24gPSBpbnRlcnBvbGF0aW9uO1xuICAgICAgICBpZiAocHJldmlld09wZXJhdGlvbiBpbnN0YW5jZW9mIENQQWN0aW9uVHJhbnNmb3JtU2VsZWN0aW9uKSB7XG4gICAgICAgICAgICBwcmV2aWV3T3BlcmF0aW9uLnNldEludGVycG9sYXRpb24oaW50ZXJwb2xhdGlvbik7XG4gICAgICAgIH1cbiAgICB9O1xuXG5cdC8qKlxuICAgICAqIElmIHRoZSBjdXJyZW50IG9wZXJhdGlvbiBpcyBhbiBhZmZpbmUgdHJhbnNmb3JtLCByb2xsIGl0IGJhY2sgYW5kIHJlbW92ZSBpdCBmcm9tIHRoZSB1bmRvIGhpc3RvcnkuXG4gICAgICovXG4gICAgdGhpcy50cmFuc2Zvcm1BZmZpbmVBYm9ydCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAocHJldmlld09wZXJhdGlvbiBpbnN0YW5jZW9mIENQQWN0aW9uVHJhbnNmb3JtU2VsZWN0aW9uKSB7XG4gICAgICAgICAgICBwcmV2aWV3T3BlcmF0aW9uLnVuZG8oKTtcbiAgICAgICAgICAgIHByZXZpZXdPcGVyYXRpb24gPSBudWxsO1xuICAgICAgICB9XG4gICAgfTtcblxuXHQvKipcbiAgICAgKiBCZWdpbnMgdHJhbnNmb3JtaW5nIHRoZSBjdXJyZW50IHNlbGVjdGlvbi9sYXllciwgYW5kIHJldHVybnMgdGhlIGluaXRpYWwgc291cmNlIHJlY3RhbmdsZSBhbmQgaW5pdGlhbCB0cmFuc2Zvcm0uXG4gICAgICogWW91IGNhbiB1cGRhdGUgdGhlIHRyYW5zZm9ybSBieSBjYWxsaW5nIHRyYW5zZm9ybUFmZmluZSgpLlxuICAgICAqIFxuICAgICAqIFlvdSBtdXN0IGNhbGwgdHJhbnNmb3JtQWZmaW5lRmluaXNoKCkgb3IgdHJhbnNmb3JtQWZmaW5lQWJvcnQoKSB0byBmaW5pc2ggdGhlIHRyYW5zZm9ybWF0aW9uLlxuICAgICAqIFxuICAgICAqIFJldHVybnMgbnVsbCBpZiB0aGUgY3VycmVudCBzZWxlY3Rpb24vbGF5ZXIgZG9lc24ndCBjb250YWluIGFueSBub24tdHJhbnNwYXJlbnQgcGl4ZWxzLCBhbmQgZG9lc24ndCBzdGFydFxuICAgICAqIHRyYW5zZm9ybWluZy5cbiAgICAgKi9cbiAgICB0aGlzLnRyYW5zZm9ybUFmZmluZUJlZ2luID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIC8vIEFyZSB3ZSBhbHJlYWR5IHRyYW5zZm9ybWluZz8gQ29udGludWUgdGhhdCBpbnN0ZWFkXG4gICAgICAgIGlmIChwcmV2aWV3T3BlcmF0aW9uIGluc3RhbmNlb2YgQ1BBY3Rpb25UcmFuc2Zvcm1TZWxlY3Rpb24pIHtcbiAgICAgICAgICAgIHJldHVybiB7dHJhbnNmb3JtOiBwcmV2aWV3T3BlcmF0aW9uLmdldFRyYW5zZm9ybSgpLCByZWN0OiBwcmV2aWV3T3BlcmF0aW9uLmdldEluaXRpYWxUcmFuc2Zvcm1SZWN0KCksIHNlbGVjdGlvbjogcHJldmlld09wZXJhdGlvbi5nZXRJbml0aWFsU2VsZWN0aW9uUmVjdCgpfTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIE9ubHkgdHJhbnNmb3JtIHRoZSBub24tdHJhbnNwYXJlbnQgcGl4ZWxzXG4gICAgICAgIHZhclxuICAgICAgICAgICAgbGF5ZXIgPSB0aGlzLmdldEFjdGl2ZUxheWVyKCksXG4gICAgICAgICAgICBzZWxlY3Rpb24gPSB0aGlzLmdldFNlbGVjdGlvbkF1dG9TZWxlY3QoKSxcbiAgICAgICAgICAgIGluaXRpYWxSZWN0ID0gbGF5ZXIuZ2V0Tm9uVHJhbnNwYXJlbnRCb3VuZHMoc2VsZWN0aW9uKSxcbiAgICAgICAgICAgIGluaXRpYWxUcmFuc2Zvcm0gPSBuZXcgQ1BUcmFuc2Zvcm0oKTtcblxuICAgICAgICBpZiAoaW5pdGlhbFJlY3QuaXNFbXB0eSgpKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qIElmIHdlIGludHJvZHVjZSBvdGhlciBwcmV2aWV3T3BlcmF0aW9ucywgd2UgbWlnaHQgd2FudCB0byBjaGVjayB3ZSBhcmVuJ3Qgb3ZlcndyaXRpbmcgdGhlbSBoZXJlLi4uXG4gICAgICAgICAqIFRob3VnaCBwcm9iYWJseSBDaGlja2VuUGFpbnQncyBnbG9iYWwgZXhjbHVzaXZlIG1vZGUgd2lsbCBlbmZvcmNlIHRoaXMgZm9yIHVzLlxuICAgICAgICAgKi9cbiAgICAgICAgcHJldmlld09wZXJhdGlvbiA9IG5ldyBDUEFjdGlvblRyYW5zZm9ybVNlbGVjdGlvbihpbml0aWFsUmVjdCwgaW5pdGlhbFRyYW5zZm9ybSwgdHJhbnNmb3JtSW50ZXJwb2xhdGlvbik7XG4gICAgXG4gICAgICAgIG9wYWNpdHlBcmVhLm1ha2VFbXB0eSgpOyAvLyBQcmV2ZW50cyBhIGRyYXdpbmcgdG9vbCBiZWluZyBjYWxsZWQgZHVyaW5nIGxheWVyIGZ1c2lvbiB0byBkcmF3IGl0c2VsZiB0byB0aGUgbGF5ZXJcbiAgICBcbiAgICAgICAgcmV0dXJuIHt0cmFuc2Zvcm06IGluaXRpYWxUcmFuc2Zvcm0sIHJlY3Q6IGluaXRpYWxSZWN0LCBzZWxlY3Rpb246IHNlbGVjdGlvbn07XG4gICAgfTtcblxuXHQvKipcbiAgICAgKiBGaW5pc2ggYW5kIHNhdmUgdGhlIHRyYW5zZm9ybSB0aGF0IGlzIGN1cnJlbnRseSBpbiBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICB0aGlzLnRyYW5zZm9ybUFmZmluZUZpbmlzaCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAocHJldmlld09wZXJhdGlvbiBpbnN0YW5jZW9mIENQQWN0aW9uVHJhbnNmb3JtU2VsZWN0aW9uKSB7XG4gICAgICAgICAgICBhZGRVbmRvKHByZXZpZXdPcGVyYXRpb24pO1xuICAgICAgICAgICAgcHJldmlld09wZXJhdGlvbiA9IG51bGw7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogVHJhbnNmb3JtIHRoZSBjdXJyZW50bHkgc2VsZWN0ZWQgbGF5ZXIgZGF0YSB1c2luZyB0aGUgZ2l2ZW4gQWZmaW5lVHJhbnNmb3JtLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtDUFRyYW5zZm9ybX0gYWZmaW5lVHJhbnNmb3JtXG4gICAgICovXG4gICAgdGhpcy50cmFuc2Zvcm1BZmZpbmVBbWVuZCA9IGZ1bmN0aW9uKGFmZmluZVRyYW5zZm9ybSkge1xuICAgICAgICBpZiAocHJldmlld09wZXJhdGlvbiBpbnN0YW5jZW9mIENQQWN0aW9uVHJhbnNmb3JtU2VsZWN0aW9uKSB7XG4gICAgICAgICAgICBwcmV2aWV3T3BlcmF0aW9uLmFtZW5kKGFmZmluZVRyYW5zZm9ybSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFxuICAgIC8vIENvcHkvUGFzdGUgZnVuY3Rpb25zXG4gICAgXG4gICAgdGhpcy5jdXRTZWxlY3Rpb24gPSBmdW5jdGlvbihjcmVhdGVVbmRvKSB7XG4gICAgICAgIHZhclxuICAgICAgICAgICAgc2VsZWN0aW9uID0gdGhpcy5nZXRTZWxlY3Rpb24oKTtcbiAgICAgICAgXG4gICAgICAgIGlmIChzZWxlY3Rpb24uaXNFbXB0eSgpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBjbGlwYm9hcmQgPSBuZXcgQ1BDbGlwKGN1ckxheWVyLmNsb25lUmVjdChzZWxlY3Rpb24pLCBzZWxlY3Rpb24ubGVmdCwgc2VsZWN0aW9uLnRvcCk7XG5cbiAgICAgICAgaWYgKGNyZWF0ZVVuZG8pIHtcbiAgICAgICAgICAgIGFkZFVuZG8obmV3IENQVW5kb0N1dChjbGlwYm9hcmQuYm1wLCB0aGlzLmdldEFjdGl2ZUxheWVySW5kZXgoKSwgc2VsZWN0aW9uKSk7XG4gICAgICAgIH1cblxuICAgICAgICBjdXJMYXllci5jbGVhclJlY3Qoc2VsZWN0aW9uLCBFTVBUWV9MQVlFUl9DT0xPUik7XG4gICAgICAgIGludmFsaWRhdGVGdXNpb25SZWN0KHNlbGVjdGlvbik7XG4gICAgfTtcblxuICAgIHRoaXMuY29weVNlbGVjdGlvbiA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXJcbiAgICAgICAgICAgIHNlbGVjdGlvbiA9IHRoYXQuZ2V0U2VsZWN0aW9uKCk7XG4gICAgICAgIFxuICAgICAgICBpZiAoc2VsZWN0aW9uLmlzRW1wdHkoKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgY2xpcGJvYXJkID0gbmV3IENQQ2xpcChjdXJMYXllci5jbG9uZVJlY3Qoc2VsZWN0aW9uKSwgc2VsZWN0aW9uLmxlZnQsIHNlbGVjdGlvbi50b3ApO1xuICAgIH07XG5cbiAgICB0aGlzLmNvcHlTZWxlY3Rpb25NZXJnZWQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIFxuICAgICAgICAgICAgc2VsZWN0aW9uID0gdGhhdC5nZXRTZWxlY3Rpb24oKTtcbiAgICAgICAgXG4gICAgICAgIGlmIChzZWxlY3Rpb24uaXNFbXB0eSgpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyBtYWtlIHN1cmUgdGhlIGZ1c2lvbmVkIHBpY3R1cmUgaXMgdXAgdG8gZGF0ZVxuICAgICAgICB0aGlzLmZ1c2lvbkxheWVycygpO1xuICAgICAgICBjbGlwYm9hcmQgPSBuZXcgQ1BDbGlwKGZ1c2lvbi5jbG9uZVJlY3Qoc2VsZWN0aW9uKSwgc2VsZWN0aW9uLmxlZnQsIHNlbGVjdGlvbi50b3ApO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEBwYXJhbSBjcmVhdGVVbmRvIGJvb2xlYW5cbiAgICAgKiBAcGFyYW0gY2xpcCBDUENsaXBcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBwYXN0ZUNsaXAoY3JlYXRlVW5kbywgY2xpcCkge1xuICAgICAgICB2YXJcbiAgICAgICAgICAgIGFjdGl2ZUxheWVySW5kZXggPSB0aGF0LmdldEFjdGl2ZUxheWVySW5kZXgoKTtcbiAgICAgICAgXG4gICAgICAgIGlmIChjcmVhdGVVbmRvKSB7XG4gICAgICAgICAgICBhZGRVbmRvKG5ldyBDUFVuZG9QYXN0ZShjbGlwLCBhY3RpdmVMYXllckluZGV4LCB0aGF0LmdldFNlbGVjdGlvbigpKSk7XG4gICAgICAgIH1cblxuICAgICAgICB2YXJcbiAgICAgICAgICAgIG5ld0xheWVyID0gbmV3IENQTGF5ZXIodGhhdC53aWR0aCwgdGhhdC5oZWlnaHQsIHRoYXQuZ2V0RGVmYXVsdExheWVyTmFtZSgpKSxcbiAgICAgICAgICAgIHNvdXJjZVJlY3QgPSBjbGlwLmJtcC5nZXRCb3VuZHMoKSxcbiAgICAgICAgICAgIHgsIHk7XG4gICAgICAgIFxuICAgICAgICBsYXllcnMuc3BsaWNlKGFjdGl2ZUxheWVySW5kZXggKyAxLCAwLCBuZXdMYXllcik7XG4gICAgICAgIHRoYXQuc2V0QWN0aXZlTGF5ZXJJbmRleChhY3RpdmVMYXllckluZGV4ICsgMSk7XG5cbiAgICAgICAgaWYgKHNvdXJjZVJlY3QuaXNJbnNpZGUodGhhdC5nZXRCb3VuZHMoKSkpIHtcbiAgICAgICAgICAgIHggPSBjbGlwLng7XG4gICAgICAgICAgICB5ID0gY2xpcC55O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgeCA9ICgodGhhdC53aWR0aCAtIGNsaXAuYm1wLndpZHRoKSAvIDIpIHwgMDtcbiAgICAgICAgICAgIHkgPSAoKHRoYXQuaGVpZ2h0IC0gY2xpcC5ibXAuaGVpZ2h0KSAvIDIpIHwgMDtcbiAgICAgICAgfVxuXG4gICAgICAgIGN1ckxheWVyLmNvcHlCaXRtYXBSZWN0KGNsaXAuYm1wLCB4LCB5LCBzb3VyY2VSZWN0KTtcbiAgICAgICAgdGhhdC5lbXB0eVNlbGVjdGlvbigpO1xuXG4gICAgICAgIGludmFsaWRhdGVGdXNpb24oKTtcbiAgICAgICAgY2FsbExpc3RlbmVyc0xheWVyQ2hhbmdlKCk7XG4gICAgfVxuICAgIFxuICAgIHRoaXMucGFzdGVDbGlwYm9hcmQgPSBmdW5jdGlvbihjcmVhdGVVbmRvKSB7XG4gICAgICAgIGlmIChjbGlwYm9hcmQgIT0gbnVsbCkge1xuICAgICAgICAgICAgcGFzdGVDbGlwKGNyZWF0ZVVuZG8sIGNsaXBib2FyZCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFxuICAgIHRoaXMuc2V0U2FtcGxlQWxsTGF5ZXJzID0gZnVuY3Rpb24oYikge1xuICAgICAgICBzYW1wbGVBbGxMYXllcnMgPSBiO1xuICAgIH07XG5cbiAgICB0aGlzLnNldExvY2tBbHBoYSA9IGZ1bmN0aW9uKGIpIHtcbiAgICAgICAgbG9ja0FscGhhID0gYjtcbiAgICB9O1xuXG4gICAgdGhpcy5zZXRGb3JlZ3JvdW5kQ29sb3IgPSBmdW5jdGlvbihjb2xvcikge1xuICAgICAgICBjdXJDb2xvciA9IGNvbG9yO1xuICAgIH07XG4gICAgXG4gICAgdGhpcy5zZXRCcnVzaCA9IGZ1bmN0aW9uKGJydXNoKSB7XG4gICAgICAgIGN1ckJydXNoID0gYnJ1c2g7XG4gICAgfTtcbiAgICBcbiAgICB0aGlzLnNldEJydXNoVGV4dHVyZSA9IGZ1bmN0aW9uKHRleHR1cmUpIHtcbiAgICAgICAgYnJ1c2hNYW5hZ2VyLnNldFRleHR1cmUodGV4dHVyZSk7XG4gICAgfVxuICAgIFxuICAgIC8vIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4gICAgLy8gUGFpbnQgZW5naW5lXG4gICAgLy8gLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblxuICAgIHRoaXMuYmVnaW5TdHJva2UgPSBmdW5jdGlvbih4LCB5LCBwcmVzc3VyZSkge1xuICAgICAgICBpZiAoY3VyQnJ1c2ggPT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgcGFpbnRpbmdNb2Rlc1tjdXJCcnVzaC5wYWludE1vZGVdLmJlZ2luU3Ryb2tlKHgsIHksIHByZXNzdXJlKTtcbiAgICB9O1xuXG4gICAgdGhpcy5jb250aW51ZVN0cm9rZSA9IGZ1bmN0aW9uKHgsIHksIHByZXNzdXJlKSB7XG4gICAgICAgIGlmIChjdXJCcnVzaCA9PSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBwYWludGluZ01vZGVzW2N1ckJydXNoLnBhaW50TW9kZV0uY29udGludWVTdHJva2UoeCwgeSwgcHJlc3N1cmUpO1xuICAgIH07XG5cbiAgICB0aGlzLmVuZFN0cm9rZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAoY3VyQnJ1c2ggPT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgcGFpbnRpbmdNb2Rlc1tjdXJCcnVzaC5wYWludE1vZGVdLmVuZFN0cm9rZSgpO1xuICAgIH07XG4gICAgXG4gICAgdGhpcy5oYXNBbHBoYSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gZnVzaW9uLmhhc0FscGhhKCk7XG4gICAgfTtcbiAgICBcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGFydHdvcmsgYXMgYSBzaW5nbGUgZmxhdCBQTkcgaW1hZ2UuXG4gICAgICogXG4gICAgICogUm90YXRpb24gaXMgWzAuLjNdIGFuZCBzZWxlY3RzIGEgbXVsdGlwbGUgb2YgOTAgZGVncmVlcyBvZiBjbG9ja3dpc2Ugcm90YXRpb24gdG8gYmUgYXBwbGllZCB0byB0aGUgZHJhd2luZyBiZWZvcmVcbiAgICAgKiBzYXZpbmcuXG4gICAgICogXG4gICAgICogQHJldHVybiBBIGJpbmFyeSBzdHJpbmcgb2YgdGhlIFBORyBmaWxlIGRhdGEuXG4gICAgICovXG4gICAgdGhpcy5nZXRGbGF0UE5HID0gZnVuY3Rpb24ocm90YXRpb24pIHtcbiAgICAgICAgdGhpcy5mdXNpb25MYXllcnMoKTtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiBmdXNpb24uZ2V0QXNQTkcocm90YXRpb24pO1xuICAgIH07XG4gICAgXG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0cnVlIGlmIHRoaXMgYXJ0d29yayBjYW4gYmUgZXhhY3RseSByZXByZXNlbnRlZCBhcyBhIHNpbXBsZSB0cmFuc3BhcmVudCBQTkcgKGkuZS4gZG9lc24ndCBoYXZlIG11bHRpcGxlIFxuICAgICAqIGxheWVycywgYW5kIGJhc2UgbGF5ZXIncyBvcGFjaXR5IGlzIHNldCB0byAxMDAlKS5cbiAgICAgKi9cbiAgICB0aGlzLmlzU2ltcGxlRHJhd2luZyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRMYXllckNvdW50KCkgPT0gMSAmJiB0aGlzLmdldExheWVyKDApLmdldEFscGhhKCkgPT0gMTAwO1xuICAgIH07XG4gICAgXG4gICAgLy8gLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuICAgIC8vIFVuZG8gY2xhc3Nlc1xuXG4gICAgLyoqXG4gICAgICogU2F2ZSB0aGUgZGlmZmVyZW5jZSBiZXR3ZWVuIHRoZSBjdXJyZW50IGxheWVyIGFuZCB0aGUgdW5kb0J1ZmZlciAod2l0aGluIHRoZSB1bmRvQXJlYSkgZm9yIHVuZG8sIGFuZCBjbGVhclxuICAgICAqIHRoZSB1bmRvQXJlYS5cbiAgICAgKlxuICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAqL1xuICAgIGZ1bmN0aW9uIENQVW5kb1BhaW50KCkge1xuICAgICAgICB2YXJcbiAgICAgICAgICAgIHJlY3QgPSB1bmRvQXJlYS5jbG9uZSgpLFxuICAgICAgICAgICAgZGF0YSA9IHVuZG9CdWZmZXIuY29weVJlY3RYT1IoY3VyTGF5ZXIsIHJlY3QpO1xuICAgICAgICBcbiAgICAgICAgdGhpcy5sYXllciA9IHRoYXQuZ2V0QWN0aXZlTGF5ZXJJbmRleCgpO1xuXG4gICAgICAgIHVuZG9BcmVhLm1ha2VFbXB0eSgpO1xuXG4gICAgICAgIHRoaXMudW5kbyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdGhhdC5nZXRMYXllcih0aGlzLmxheWVyKS5zZXRSZWN0WE9SKGRhdGEsIHJlY3QpO1xuICAgICAgICAgICAgaW52YWxpZGF0ZUZ1c2lvblJlY3QocmVjdCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5yZWRvID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB0aGF0LmdldExheWVyKHRoaXMubGF5ZXIpLnNldFJlY3RYT1IoZGF0YSwgcmVjdCk7XG4gICAgICAgICAgICBpbnZhbGlkYXRlRnVzaW9uUmVjdChyZWN0KTtcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLmdldE1lbW9yeVVzZWQgPSBmdW5jdGlvbih1bmRvbmUsIHBhcmFtKSB7XG4gICAgICAgICAgICByZXR1cm4gZGF0YS5sZW5ndGg7XG4gICAgICAgIH07XG4gICAgfVxuICAgIFxuICAgIENQVW5kb1BhaW50LnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoQ1BVbmRvLnByb3RvdHlwZSk7XG4gICAgQ1BVbmRvUGFpbnQucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gQ1BVbmRvUGFpbnQ7XG4gICAgXG4gICAgZnVuY3Rpb24gQ1BVbmRvTGF5ZXJWaXNpYmxlKF9sYXllckluZGV4LCBfb2xkVmlzLCBfbmV3VmlzKSB7XG4gICAgICAgIHRoaXMubGF5ZXJJbmRleCA9IF9sYXllckluZGV4O1xuICAgICAgICB0aGlzLm9sZFZpcyA9IF9vbGRWaXM7XG4gICAgICAgIHRoaXMubmV3VmlzID0gX25ld1ZpcztcbiAgICB9XG4gICAgXG4gICAgQ1BVbmRvTGF5ZXJWaXNpYmxlLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoQ1BVbmRvLnByb3RvdHlwZSk7XG4gICAgQ1BVbmRvTGF5ZXJWaXNpYmxlLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IENQVW5kb0xheWVyVmlzaWJsZTtcbiAgICBcbiAgICBDUFVuZG9MYXllclZpc2libGUucHJvdG90eXBlLnJlZG8gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdGhhdC5nZXRMYXllcih0aGlzLmxheWVySW5kZXgpLnZpc2libGUgPSB0aGlzLm5ld1ZpcztcbiAgICAgICAgXG4gICAgICAgIGludmFsaWRhdGVGdXNpb24oKTtcbiAgICAgICAgY2FsbExpc3RlbmVyc0xheWVyQ2hhbmdlKHRoaXMubGF5ZXJJbmRleCk7XG4gICAgfTtcblxuICAgIENQVW5kb0xheWVyVmlzaWJsZS5wcm90b3R5cGUudW5kbyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB0aGF0LmdldExheWVyKHRoaXMubGF5ZXJJbmRleCkudmlzaWJsZSA9IHRoaXMub2xkVmlzO1xuICAgICAgICBcbiAgICAgICAgaW52YWxpZGF0ZUZ1c2lvbigpO1xuICAgICAgICBjYWxsTGlzdGVuZXJzTGF5ZXJDaGFuZ2UodGhpcy5sYXllckluZGV4KTtcbiAgICB9O1xuXG4gICAgQ1BVbmRvTGF5ZXJWaXNpYmxlLnByb3RvdHlwZS5tZXJnZSA9IGZ1bmN0aW9uKHUpIHtcbiAgICAgICAgaWYgKHUgaW5zdGFuY2VvZiBDUFVuZG9MYXllclZpc2libGUgJiYgdGhpcy5sYXllckluZGV4ID09IHUubGF5ZXJJbmRleCkge1xuICAgICAgICAgICAgdGhpcy5uZXdWaXMgPSB1Lm5ld1ZpcztcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9O1xuXG4gICAgQ1BVbmRvTGF5ZXJWaXNpYmxlLnByb3RvdHlwZS5ub0NoYW5nZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5vbGRWaXMgPT0gdGhpcy5uZXdWaXM7XG4gICAgfTtcbiAgICBcbiAgICBmdW5jdGlvbiBDUFVuZG9BZGRMYXllcihsYXllckluZGV4KSB7XG4gICAgICAgIHRoaXMudW5kbyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgbGF5ZXJzLnNwbGljZShsYXllckluZGV4ICsgMSwgMSk7XG4gICAgICAgICAgICB0aGF0LnNldEFjdGl2ZUxheWVySW5kZXgobGF5ZXJJbmRleCk7XG4gICAgICAgICAgICBpbnZhbGlkYXRlRnVzaW9uKCk7XG4gICAgICAgICAgICBjYWxsTGlzdGVuZXJzTGF5ZXJDaGFuZ2UoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMucmVkbyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgbmV3TGF5ZXIgPSBuZXcgQ1BMYXllcih0aGF0LndpZHRoLCB0aGF0LmhlaWdodCwgdGhhdC5nZXREZWZhdWx0TGF5ZXJOYW1lKCkpO1xuICAgICAgICAgICAgbmV3TGF5ZXIuY2xlYXJBbGwoRU1QVFlfTEFZRVJfQ09MT1IpO1xuICAgICAgICAgICAgbGF5ZXJzLnNwbGljZShsYXllckluZGV4ICsgMSwgMCwgbmV3TGF5ZXIpO1xuICAgICAgICAgICAgdGhhdC5zZXRBY3RpdmVMYXllckluZGV4KGxheWVySW5kZXggKyAxKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaW52YWxpZGF0ZUZ1c2lvbigpO1xuICAgICAgICAgICAgY2FsbExpc3RlbmVyc0xheWVyQ2hhbmdlKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgQ1BVbmRvQWRkTGF5ZXIucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShDUFVuZG8ucHJvdG90eXBlKTtcbiAgICBDUFVuZG9BZGRMYXllci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBDUFVuZG9BZGRMYXllcjtcblxuICAgIGZ1bmN0aW9uIENQVW5kb0R1cGxpY2F0ZUxheWVyKGxheWVySW5kZXgpIHtcbiAgICAgICAgdGhpcy51bmRvID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBsYXllcnMuc3BsaWNlKGxheWVySW5kZXggKyAxLCAxKTtcbiAgICAgICAgICAgIHRoYXQuc2V0QWN0aXZlTGF5ZXJJbmRleChsYXllckluZGV4KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaW52YWxpZGF0ZUZ1c2lvbigpO1xuICAgICAgICAgICAgY2FsbExpc3RlbmVyc0xheWVyQ2hhbmdlKCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5yZWRvID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICBjb3B5U3VmZml4ID0gXCIgQ29weVwiLFxuXG4gICAgICAgICAgICAgICAgc291cmNlTGF5ZXIgPSBsYXllcnNbbGF5ZXJJbmRleF0sXG4gICAgICAgICAgICAgICAgbmV3TGF5ZXIgPSBuZXcgQ1BMYXllcih0aGF0LndpZHRoLCB0aGF0LmhlaWdodCksXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgbmV3TGF5ZXJOYW1lID0gc291cmNlTGF5ZXIubmFtZTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKCFuZXdMYXllck5hbWUuZW5kc1dpdGgoY29weVN1ZmZpeCkpIHtcbiAgICAgICAgICAgICAgICBuZXdMYXllck5hbWUgKz0gY29weVN1ZmZpeDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgbmV3TGF5ZXIuY29weUZyb20oc291cmNlTGF5ZXIpO1xuICAgICAgICAgICAgbmV3TGF5ZXIubmFtZSA9IG5ld0xheWVyTmFtZTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgbGF5ZXJzLnNwbGljZShsYXllckluZGV4ICsgMSwgMCwgbmV3TGF5ZXIpO1xuXG4gICAgICAgICAgICB0aGF0LnNldEFjdGl2ZUxheWVySW5kZXgobGF5ZXJJbmRleCArIDEpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpbnZhbGlkYXRlRnVzaW9uKCk7XG4gICAgICAgICAgICBjYWxsTGlzdGVuZXJzTGF5ZXJDaGFuZ2UoKTtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgXG4gICAgQ1BVbmRvRHVwbGljYXRlTGF5ZXIucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShDUFVuZG8ucHJvdG90eXBlKTtcbiAgICBDUFVuZG9EdXBsaWNhdGVMYXllci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBDUFVuZG9EdXBsaWNhdGVMYXllcjtcblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSBsYXllckluZGV4IGludFxuICAgICAqIEBwYXJhbSBsYXllciBDUExheWVyXG4gICAgICovXG4gICAgZnVuY3Rpb24gQ1BVbmRvUmVtb3ZlTGF5ZXIobGF5ZXJJbmRleCwgbGF5ZXIpIHtcbiAgICAgICAgdGhpcy51bmRvID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBsYXllcnMuc3BsaWNlKGxheWVySW5kZXgsIDAsIGxheWVyKTtcbiAgICAgICAgICAgIHRoYXQuc2V0QWN0aXZlTGF5ZXJJbmRleChsYXllckluZGV4KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaW52YWxpZGF0ZUZ1c2lvbigpO1xuICAgICAgICAgICAgY2FsbExpc3RlbmVyc0xheWVyQ2hhbmdlKCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5yZWRvID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBsYXllcnMuc3BsaWNlKGxheWVySW5kZXgsIDEpO1xuICAgICAgICAgICAgdGhhdC5zZXRBY3RpdmVMYXllckluZGV4KGxheWVySW5kZXggPCBsYXllcnMubGVuZ3RoID8gbGF5ZXJJbmRleCA6IGxheWVySW5kZXggLSAxKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaW52YWxpZGF0ZUZ1c2lvbigpO1xuICAgICAgICAgICAgY2FsbExpc3RlbmVyc0xheWVyQ2hhbmdlKCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5nZXRNZW1vcnlVc2VkID0gZnVuY3Rpb24odW5kb25lKSB7XG4gICAgICAgICAgICByZXR1cm4gdW5kb25lID8gMCA6IGxheWVyLndpZHRoICogbGF5ZXIuaGVpZ2h0ICogQ1BDb2xvckJtcC5CWVRFU19QRVJfUElYRUw7XG4gICAgICAgIH07XG4gICAgfVxuICAgIFxuICAgIENQVW5kb1JlbW92ZUxheWVyLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoQ1BVbmRvLnByb3RvdHlwZSk7XG4gICAgQ1BVbmRvUmVtb3ZlTGF5ZXIucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gQ1BVbmRvUmVtb3ZlTGF5ZXI7XG4gICAgXG4gICAgZnVuY3Rpb24gQ1BVbmRvTWVyZ2VEb3duTGF5ZXIobGF5ZXJJbmRleCkge1xuICAgICAgICB2YXJcbiAgICAgICAgICAgIGxheWVyQm90dG9tID0gbmV3IENQTGF5ZXIodGhhdC53aWR0aCwgdGhhdC5oZWlnaHQpLFxuICAgICAgICAgICAgbGF5ZXJUb3A7XG5cbiAgICAgICAgbGF5ZXJCb3R0b20uY29weUZyb20obGF5ZXJzW2xheWVySW5kZXggLSAxXSk7XG4gICAgICAgIGxheWVyVG9wID0gbGF5ZXJzW2xheWVySW5kZXhdO1xuXG4gICAgICAgIHRoaXMudW5kbyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgbGF5ZXJzW2xheWVySW5kZXggLSAxXS5jb3B5RnJvbShsYXllckJvdHRvbSk7XG4gICAgICAgICAgICBsYXllcnMuc3BsaWNlKGxheWVySW5kZXgsIDAsIGxheWVyVG9wKTtcbiAgICAgICAgICAgIHRoYXQuc2V0QWN0aXZlTGF5ZXJJbmRleChsYXllckluZGV4KTtcblxuICAgICAgICAgICAgbGF5ZXJCb3R0b20gPSBsYXllclRvcCA9IG51bGw7XG5cbiAgICAgICAgICAgIGludmFsaWRhdGVGdXNpb24oKTtcbiAgICAgICAgICAgIGNhbGxMaXN0ZW5lcnNMYXllckNoYW5nZSgpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMucmVkbyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgbGF5ZXJCb3R0b20gPSBuZXcgQ1BMYXllcih0aGF0LndpZHRoLCB0aGF0LmhlaWdodCk7XG4gICAgICAgICAgICBsYXllckJvdHRvbS5jb3B5RnJvbShsYXllcnNbbGF5ZXJJbmRleCAtIDFdKTtcbiAgICAgICAgICAgIGxheWVyVG9wID0gbGF5ZXJzW2xheWVySW5kZXhdO1xuXG4gICAgICAgICAgICB0aGF0LnNldEFjdGl2ZUxheWVySW5kZXgobGF5ZXJJbmRleCk7XG4gICAgICAgICAgICB0aGF0Lm1lcmdlRG93bihmYWxzZSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5nZXRNZW1vcnlVc2VkID0gZnVuY3Rpb24odW5kb25lLCBwYXJhbSkge1xuICAgICAgICAgICAgcmV0dXJuIHVuZG9uZSA/IDAgOiB0aGF0LndpZHRoICogdGhhdC5oZWlnaHQgKiBDUENvbG9yQm1wLkJZVEVTX1BFUl9QSVhFTCAqIDI7XG4gICAgICAgIH07XG4gICAgfVxuICAgIFxuICAgIENQVW5kb01lcmdlRG93bkxheWVyLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoQ1BVbmRvLnByb3RvdHlwZSk7XG4gICAgQ1BVbmRvTWVyZ2VEb3duTGF5ZXIucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gQ1BVbmRvTWVyZ2VEb3duTGF5ZXI7XG5cbiAgICBmdW5jdGlvbiBDUFVuZG9NZXJnZUFsbExheWVycygpIHtcbiAgICAgICAgdmFyIFxuICAgICAgICAgICAgb2xkQWN0aXZlTGF5ZXJJbmRleCA9IHRoYXQuZ2V0QWN0aXZlTGF5ZXJJbmRleCgpLFxuICAgICAgICAgICAgb2xkTGF5ZXJzID0gbGF5ZXJzLnNsaWNlKDApOyAvLyBDbG9uZSBvbGQgbGF5ZXJzIGFycmF5XG5cbiAgICAgICAgdGhpcy51bmRvID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBsYXllcnMgPSBvbGRMYXllcnMuc2xpY2UoMCk7XG4gICAgICAgICAgICB0aGF0LnNldEFjdGl2ZUxheWVySW5kZXgob2xkQWN0aXZlTGF5ZXJJbmRleCk7XG5cbiAgICAgICAgICAgIGludmFsaWRhdGVGdXNpb24oKTtcbiAgICAgICAgICAgIGNhbGxMaXN0ZW5lcnNMYXllckNoYW5nZSgpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMucmVkbyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdGhhdC5tZXJnZUFsbExheWVycyhmYWxzZSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5nZXRNZW1vcnlVc2VkID0gZnVuY3Rpb24odW5kb25lLCBwYXJhbSkge1xuICAgICAgICAgICAgcmV0dXJuIHVuZG9uZSA/IDAgOiBvbGRMYXllcnMubGVuZ3RoICogd2lkdGggKiBoZWlnaHQgKiBDUENvbG9yQm1wLkJZVEVTX1BFUl9QSVhFTDtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgXG4gICAgQ1BVbmRvTWVyZ2VBbGxMYXllcnMucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShDUFVuZG8ucHJvdG90eXBlKTtcbiAgICBDUFVuZG9NZXJnZUFsbExheWVycy5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBDUFVuZG9NZXJnZUFsbExheWVycztcbiAgICBcbiAgICBmdW5jdGlvbiBDUFVuZG9Nb3ZlTGF5ZXIoZnJvbSwgdG8pIHtcbiAgICAgICAgdGhpcy51bmRvID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpZiAodG8gPD0gZnJvbSkge1xuICAgICAgICAgICAgICAgIG1vdmVMYXllclJlYWwodG8sIGZyb20gKyAxKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgbW92ZUxheWVyUmVhbCh0byAtIDEsIGZyb20pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMucmVkbyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgbW92ZUxheWVyUmVhbChmcm9tLCB0byk7XG4gICAgICAgIH07XG4gICAgfVxuICAgIFxuICAgIENQVW5kb01vdmVMYXllci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKENQVW5kby5wcm90b3R5cGUpO1xuICAgIENQVW5kb01vdmVMYXllci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBDUFVuZG9Nb3ZlTGF5ZXI7XG5cbiAgICBmdW5jdGlvbiBDUFVuZG9MYXllckFscGhhKGxheWVySW5kZXgsIGFscGhhKSB7XG4gICAgICAgIHRoaXMuZnJvbSA9IHRoYXQuZ2V0TGF5ZXIobGF5ZXJJbmRleCkuZ2V0QWxwaGEoKTtcbiAgICAgICAgdGhpcy50byA9IGFscGhhO1xuICAgICAgICB0aGlzLmxheWVySW5kZXggPSBsYXllckluZGV4O1xuICAgIH1cbiAgICBcbiAgICBDUFVuZG9MYXllckFscGhhLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoQ1BVbmRvLnByb3RvdHlwZSk7XG4gICAgQ1BVbmRvTGF5ZXJBbHBoYS5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBDUFVuZG9MYXllckFscGhhO1xuXG4gICAgQ1BVbmRvTGF5ZXJBbHBoYS5wcm90b3R5cGUudW5kbyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB0aGF0LmdldExheWVyKHRoaXMubGF5ZXJJbmRleCkuc2V0QWxwaGEodGhpcy5mcm9tKTtcbiAgICAgICAgXG4gICAgICAgIGludmFsaWRhdGVGdXNpb24oKTtcbiAgICAgICAgY2FsbExpc3RlbmVyc0xheWVyQ2hhbmdlKHRoaXMubGF5ZXJJbmRleCk7XG4gICAgfTtcblxuICAgIENQVW5kb0xheWVyQWxwaGEucHJvdG90eXBlLnJlZG8gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdGhhdC5nZXRMYXllcih0aGlzLmxheWVySW5kZXgpLnNldEFscGhhKHRoaXMudG8pO1xuICAgICAgICBcbiAgICAgICAgaW52YWxpZGF0ZUZ1c2lvbigpO1xuICAgICAgICBjYWxsTGlzdGVuZXJzTGF5ZXJDaGFuZ2UodGhpcy5sYXllckluZGV4KTtcbiAgICB9XG5cbiAgICBDUFVuZG9MYXllckFscGhhLnByb3RvdHlwZS5tZXJnZSA9IGZ1bmN0aW9uKHUpIHtcbiAgICAgICAgaWYgKHUgaW5zdGFuY2VvZiBDUFVuZG9MYXllckFscGhhICYmIHRoaXMubGF5ZXJJbmRleCA9PSB1LmxheWVySW5kZXgpIHtcbiAgICAgICAgICAgIHRoaXMudG8gPSB1LnRvO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH07XG5cbiAgICBDUFVuZG9MYXllckFscGhhLnByb3RvdHlwZS5ub0NoYW5nZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5mcm9tID09IHRoaXMudG87XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gQ1BVbmRvTGF5ZXJNb2RlKGxheWVySW5kZXgsIHRvKSB7XG4gICAgICAgIHRoaXMubGF5ZXJJbmRleCA9IGxheWVySW5kZXg7XG4gICAgICAgIHRoaXMuZnJvbSA9IHRoYXQuZ2V0TGF5ZXIobGF5ZXJJbmRleCkuZ2V0QmxlbmRNb2RlKCk7XG4gICAgICAgIHRoaXMudG8gPSB0bztcbiAgICB9XG4gICAgXG4gICAgQ1BVbmRvTGF5ZXJNb2RlLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoQ1BVbmRvLnByb3RvdHlwZSk7XG4gICAgQ1BVbmRvTGF5ZXJNb2RlLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IENQVW5kb0xheWVyTW9kZTtcblxuICAgIENQVW5kb0xheWVyTW9kZS5wcm90b3R5cGUudW5kbyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB0aGF0LmdldExheWVyKHRoaXMubGF5ZXJJbmRleCkuc2V0QmxlbmRNb2RlKHRoaXMuZnJvbSk7XG4gICAgICAgIFxuICAgICAgICBpbnZhbGlkYXRlRnVzaW9uKCk7XG4gICAgICAgIGNhbGxMaXN0ZW5lcnNMYXllckNoYW5nZSgpO1xuICAgIH07XG5cbiAgICBDUFVuZG9MYXllck1vZGUucHJvdG90eXBlLnJlZG8gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdGhhdC5nZXRMYXllcih0aGlzLmxheWVySW5kZXgpLnNldEJsZW5kTW9kZSh0aGlzLnRvKTtcbiAgICAgICAgXG4gICAgICAgIGludmFsaWRhdGVGdXNpb24oKTtcbiAgICAgICAgY2FsbExpc3RlbmVyc0xheWVyQ2hhbmdlKCk7XG4gICAgfTtcblxuICAgIENQVW5kb0xheWVyTW9kZS5wcm90b3R5cGUubWVyZ2UgPSBmdW5jdGlvbih1KSB7XG4gICAgICAgIGlmICh1IGluc3RhbmNlb2YgQ1BVbmRvTGF5ZXJNb2RlICYmIHRoaXMubGF5ZXJJbmRleCA9PSB1LmxheWVySW5kZXgpIHtcbiAgICAgICAgICAgIHRoaXMudG8gPSB1LnRvO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH07XG5cbiAgICBDUFVuZG9MYXllck1vZGUucHJvdG90eXBlLm5vQ2hhbmdlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmZyb20gPT0gdGhpcy50bztcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBDUFVuZG9MYXllclJlbmFtZShsYXllckluZGV4LCB0bykge1xuICAgICAgICB0aGlzLmxheWVySW5kZXggPSBsYXllckluZGV4O1xuICAgICAgICB0aGlzLnRvID0gdG87XG4gICAgICAgIHRoaXMuZnJvbSA9IHRoYXQuZ2V0TGF5ZXIobGF5ZXJJbmRleCkubmFtZTtcbiAgICB9XG4gICAgXG4gICAgQ1BVbmRvTGF5ZXJSZW5hbWUucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShDUFVuZG8ucHJvdG90eXBlKTtcbiAgICBDUFVuZG9MYXllclJlbmFtZS5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBDUFVuZG9MYXllclJlbmFtZTtcbiAgICBcbiAgICBDUFVuZG9MYXllclJlbmFtZS5wcm90b3R5cGUudW5kbyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB0aGF0LmdldExheWVyKHRoaXMubGF5ZXJJbmRleCkubmFtZSA9IHRoaXMuZnJvbTtcbiAgICAgICAgY2FsbExpc3RlbmVyc0xheWVyQ2hhbmdlKHRoaXMubGF5ZXJJbmRleCk7XG4gICAgfTtcblxuICAgIENQVW5kb0xheWVyUmVuYW1lLnByb3RvdHlwZS5yZWRvID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHRoYXQuZ2V0TGF5ZXIodGhpcy5sYXllckluZGV4KS5uYW1lID0gdGhpcy50bztcbiAgICAgICAgY2FsbExpc3RlbmVyc0xheWVyQ2hhbmdlKHRoaXMubGF5ZXJJbmRleCk7XG4gICAgfTtcblxuICAgIENQVW5kb0xheWVyUmVuYW1lLnByb3RvdHlwZS5tZXJnZSA9IGZ1bmN0aW9uKHUpIHtcbiAgICAgICAgaWYgKHUgaW5zdGFuY2VvZiBDUFVuZG9MYXllclJlbmFtZSAmJiB0aGlzLmxheWVySW5kZXggPT0gdS5sYXllckluZGV4KSB7XG4gICAgICAgICAgICB0aGlzLnRvID0gdS50bztcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9O1xuXG4gICAgQ1BVbmRvTGF5ZXJSZW5hbWUucHJvdG90eXBlLm5vQ2hhbmdlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmZyb20gPT0gdGhpcy50bztcbiAgICB9O1xuICAgIFxuICAgIC8qKlxuICAgICAqIEBwYXJhbSBmcm9tIENQUmVjdFxuICAgICAqIEBwYXJhbSB0byBDUFJlY3RcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBDUFVuZG9SZWN0YW5nbGVTZWxlY3Rpb24oZnJvbSwgdG8pIHtcbiAgICAgICAgZnJvbSA9IGZyb20uY2xvbmUoKTtcbiAgICAgICAgdG8gPSB0by5jbG9uZSgpO1xuXG4gICAgICAgIHRoaXMudW5kbyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdGhhdC5zZXRTZWxlY3Rpb24oZnJvbSk7XG4gICAgICAgICAgICBjYWxsTGlzdGVuZXJzVXBkYXRlUmVnaW9uKHRoYXQuZ2V0Qm91bmRzKCkpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMucmVkbyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdGhhdC5zZXRTZWxlY3Rpb24odG8pO1xuICAgICAgICAgICAgY2FsbExpc3RlbmVyc1VwZGF0ZVJlZ2lvbih0aGF0LmdldEJvdW5kcygpKTtcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLm5vQ2hhbmdlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gZnJvbS5lcXVhbHModG8pO1xuICAgICAgICB9O1xuICAgIH1cbiAgICBcbiAgICBDUFVuZG9SZWN0YW5nbGVTZWxlY3Rpb24ucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShDUFVuZG8ucHJvdG90eXBlKTtcbiAgICBDUFVuZG9SZWN0YW5nbGVTZWxlY3Rpb24ucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gQ1BVbmRvUmVjdGFuZ2xlU2VsZWN0aW9uO1xuXG4gICAgLyoqXG4gICAgICogVXBvbiBjcmVhdGlvbiwgdHJhbnNmb3JtcyB0aGUgY3VycmVudGx5IHNlbGVjdGVkIHJlZ2lvbiBvZiB0aGUgY3VycmVudCBsYXllciBieSB0aGUgZ2l2ZW4gYWZmaW5lIHRyYW5zZm9ybS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7Q1BSZWN0fSBzcmNSZWN0IC0gUmVjdGFuZ2xlIHRvIHRyYW5zZm9ybVxuICAgICAqIEBwYXJhbSB7Q1BUcmFuc2Zvcm19IGFmZmluZVRyYW5zZm9ybSAtIFRyYW5zZm9ybSB0byBhcHBseVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBpbnRlcnBvbGF0aW9uIC0gXCJzbW9vdGhcIiBvciBcInNoYXJwXCJcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBDUEFjdGlvblRyYW5zZm9ybVNlbGVjdGlvbihzcmNSZWN0LCBhZmZpbmVUcmFuc2Zvcm0sIGludGVycG9sYXRpb24pIHtcbiAgICAgICAgdmFyXG4gICAgICAgICAgICBmcm9tU2VsZWN0aW9uID0gdGhhdC5nZXRTZWxlY3Rpb24oKSxcbiAgICAgICAgICAgIGRzdFJlY3QgPSBudWxsLFxuXG4gICAgICAgICAgICB0ZW1wQ2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKSxcbiAgICAgICAgICAgIHRlbXBDYW52YXNDb250ZXh0ID0gdGVtcENhbnZhcy5nZXRDb250ZXh0KFwiMmRcIiksXG5cbiAgICAgICAgICAgIHVuZG9EYXRhLCAvLyBBIGNvcHkgb2YgdGhlIG9yaWdpbmFsIGxheWVyIHdpdGhpbiB0aGUgdW5kb0RhdGFSZWN0XG4gICAgICAgICAgICB1bmRvRGF0YVJlY3QsXG5cbiAgICAgICAgICAgIC8vIEEgY2FudmFzIGZvciBjb21wb3NpbmcgdGhlIHRyYW5zZm9ybSBvbnRvXG4gICAgICAgICAgICBmdWxsVW5kb0NhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIiksXG4gICAgICAgICAgICBmdWxsVW5kb0NhbnZhc0NvbnRleHQgPSBmdWxsVW5kb0NhbnZhcy5nZXRDb250ZXh0KFwiMmRcIik7XG5cbiAgICAgICAgYWZmaW5lVHJhbnNmb3JtID0gYWZmaW5lVHJhbnNmb3JtLmNsb25lKCk7XG4gICAgICAgIGludGVycG9sYXRpb24gPSBpbnRlcnBvbGF0aW9uIHx8IFwic21vb3RoXCI7XG5cbiAgICAgICAgdGhpcy51bmRvID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICBsYXllciA9IHRoYXQuZ2V0TGF5ZXIodGhpcy5sYXllckluZGV4KSxcbiAgICAgICAgICAgICAgICBpbnZhbGlkYXRlUmVnaW9uID0gZHN0UmVjdC5jbG9uZSgpLFxuICAgICAgICAgICAgICAgIHVuZG9TcmNSZWdpb247XG5cbiAgICAgICAgICAgIGludmFsaWRhdGVSZWdpb24udW5pb24oc3JjUmVjdCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHVuZG9TcmNSZWdpb24gPSBpbnZhbGlkYXRlUmVnaW9uLmNsb25lKCk7XG4gICAgICAgICAgICB1bmRvU3JjUmVnaW9uLnRyYW5zbGF0ZSgtdW5kb0RhdGFSZWN0LmxlZnQsIC11bmRvRGF0YVJlY3QudG9wKTtcblxuICAgICAgICAgICAgbGF5ZXIuY29weUJpdG1hcFJlY3QodW5kb0RhdGEsIGludmFsaWRhdGVSZWdpb24ubGVmdCwgaW52YWxpZGF0ZVJlZ2lvbi50b3AsIHVuZG9TcmNSZWdpb24pO1xuXG4gICAgICAgICAgICB0aGF0LnNldFNlbGVjdGlvbihmcm9tU2VsZWN0aW9uKTtcbiAgICAgICAgICAgIHRoYXQuc2V0QWN0aXZlTGF5ZXJJbmRleCh0aGlzLmxheWVySW5kZXgpO1xuXG4gICAgICAgICAgICBpbnZhbGlkYXRlRnVzaW9uUmVjdChpbnZhbGlkYXRlUmVnaW9uKTtcblxuICAgICAgICAgICAgLypcbiAgICAgICAgICAgICAqIFJlcXVpcmVkIGJlY2F1c2UgaW4gdGhlIGNhc2Ugb2YgYSBjb3B5LCB3ZSBkb24ndCBpbnZhbGlkYXRlIHRoZSBzb3VyY2UgcmVjdCBpbiB0aGUgZnVzaW9uLCBzbyB0aGUgY2FudmFzXG4gICAgICAgICAgICAgKiB3b24ndCBlbmQgdXAgcmVwYWludGluZyB0aGUgc2VsZWN0aW9uIHJlY3RhbmdsZSB0aGVyZS5cbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgY2FsbExpc3RlbmVyc1NlbGVjdGlvbkNoYW5nZSgpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMucmVkbyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgbGF5ZXIgPSB0aGF0LmdldExheWVyKHRoaXMubGF5ZXJJbmRleCk7XG5cbiAgICAgICAgICAgIC8vIE1ha2UgYSBmcmVzaCBjb3B5IG9mIHRoZSBsYXllciBpbnRvIGEgQ2FudmFzIHRvIGNvbXBvc2Ugb250b1xuICAgICAgICAgICAgZnVsbFVuZG9DYW52YXNDb250ZXh0LnB1dEltYWdlRGF0YShsYXllci5nZXRJbWFnZURhdGEoKSwgMCwgMCk7XG5cbiAgICAgICAgICAgIC8vIEVyYXNlIHRoZSByZWdpb24gd2UgbW92ZWQgZnJvbVxuICAgICAgICAgICAgZnVsbFVuZG9DYW52YXNDb250ZXh0LmNsZWFyUmVjdChzcmNSZWN0LmxlZnQsIHNyY1JlY3QudG9wLCBzcmNSZWN0LmdldFdpZHRoKCksIHNyY1JlY3QuZ2V0SGVpZ2h0KCkpO1xuXG4gICAgICAgICAgICBzZXRDYW52YXNJbnRlcnBvbGF0aW9uKGZ1bGxVbmRvQ2FudmFzQ29udGV4dCwgaW50ZXJwb2xhdGlvbiA9PSBcInNtb290aFwiKTtcblxuICAgICAgICAgICAgZnVsbFVuZG9DYW52YXNDb250ZXh0LnNhdmUoKTtcblxuICAgICAgICAgICAgLy8gQXBwbHkgdGhlIHRyYW5zZm9ybSB3aGVuIGRyYXdpbmcgdGhlIHRyYW5zZm9ybWVkIGZyYWdtZW50XG4gICAgICAgICAgICBmdWxsVW5kb0NhbnZhc0NvbnRleHQuc2V0VHJhbnNmb3JtKFxuICAgICAgICAgICAgICAgIGFmZmluZVRyYW5zZm9ybS5tWzBdLCBhZmZpbmVUcmFuc2Zvcm0ubVsxXSwgYWZmaW5lVHJhbnNmb3JtLm1bMl0sXG4gICAgICAgICAgICAgICAgYWZmaW5lVHJhbnNmb3JtLm1bM10sIGFmZmluZVRyYW5zZm9ybS5tWzRdLCBhZmZpbmVUcmFuc2Zvcm0ubVs1XVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGZ1bGxVbmRvQ2FudmFzQ29udGV4dC5kcmF3SW1hZ2UodGVtcENhbnZhcywgc3JjUmVjdC5sZWZ0LCBzcmNSZWN0LnRvcCk7XG5cbiAgICAgICAgICAgIGZ1bGxVbmRvQ2FudmFzQ29udGV4dC5yZXN0b3JlKCk7XG5cbiAgICAgICAgICAgIC8vIENvcHkgYmFjayB0byB0aGUgbGF5ZXIgZGF0YVxuICAgICAgICAgICAgbGF5ZXIuc2V0SW1hZ2VEYXRhKGZ1bGxVbmRvQ2FudmFzQ29udGV4dC5nZXRJbWFnZURhdGEoMCwgMCwgbGF5ZXIud2lkdGgsIGxheWVyLmhlaWdodCkpO1xuXG4gICAgICAgICAgICAvLyBJbnZhbGlkYXRlIHRoZSBzb3VyY2UgYW5kIGRlc3RpbmF0aW9uIHJlZ2lvbnMgd2UgdG91Y2hlZFxuICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgaW52YWxpZGF0ZVJlZ2lvbiA9IHNyY1JlY3QuY2xvbmUoKSxcbiAgICAgICAgICAgICAgICBkc3RDb3JuZXJzID0gc3JjUmVjdC50b1BvaW50cygpO1xuXG4gICAgICAgICAgICBhZmZpbmVUcmFuc2Zvcm0udHJhbnNmb3JtUG9pbnRzKGRzdENvcm5lcnMpO1xuXG4gICAgICAgICAgICBkc3RSZWN0ID0gQ1BSZWN0LmNyZWF0ZUJvdW5kaW5nQm94KGRzdENvcm5lcnMpO1xuICAgICAgICAgICAgZHN0UmVjdC5yb3VuZENvbnRhaW4oKTtcbiAgICAgICAgICAgIGxheWVyLmdldEJvdW5kcygpLmNsaXAoZHN0UmVjdCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGludmFsaWRhdGVSZWdpb24udW5pb24oZHN0UmVjdCk7XG5cbiAgICAgICAgICAgIGludmFsaWRhdGVGdXNpb25SZWN0KGludmFsaWRhdGVSZWdpb24pO1xuXG4gICAgICAgICAgICAvLyBUcmFuc2Zvcm0gdGhlIHNlbGVjdGlvbiByZWN0IHRvIGVuY2xvc2UgdGhlIHRyYW5zZm9ybWVkIHNlbGVjdGlvblxuICAgICAgICAgICAgaWYgKCFmcm9tU2VsZWN0aW9uLmlzRW1wdHkoKSkge1xuICAgICAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgICAgICB0b1NlbGVjdGlvblBvaW50cyA9IGZyb21TZWxlY3Rpb24udG9Qb2ludHMoKSxcbiAgICAgICAgICAgICAgICAgICAgdG9TZWxlY3Rpb25SZWN0O1xuXG4gICAgICAgICAgICAgICAgYWZmaW5lVHJhbnNmb3JtLnRyYW5zZm9ybVBvaW50cyh0b1NlbGVjdGlvblBvaW50cyk7XG5cbiAgICAgICAgICAgICAgICB0b1NlbGVjdGlvblJlY3QgPSBDUFJlY3QuY3JlYXRlQm91bmRpbmdCb3godG9TZWxlY3Rpb25Qb2ludHMpO1xuICAgICAgICAgICAgICAgIHRvU2VsZWN0aW9uUmVjdC5yb3VuZE5lYXJlc3QoKTtcbiAgICAgICAgICAgICAgICBsYXllci5nZXRCb3VuZHMoKS5jbGlwKHRvU2VsZWN0aW9uUmVjdCk7XG5cbiAgICAgICAgICAgICAgICB0aGF0LnNldFNlbGVjdGlvbih0b1NlbGVjdGlvblJlY3QpO1xuICAgICAgICAgICAgICAgIGNhbGxMaXN0ZW5lcnNTZWxlY3Rpb25DaGFuZ2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogUmVwbGFjZSB0aGUgdHJhbnNmb3JtIHdpdGggdGhlIGdpdmVuIG9uZS5cbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIHtDUFRyYW5zZm9ybX0gX2FmZmluZVRyYW5zZm9ybVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5hbWVuZCA9IGZ1bmN0aW9uKF9hZmZpbmVUcmFuc2Zvcm0pIHtcbiAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgIGxheWVyID0gdGhhdC5nZXRMYXllcih0aGlzLmxheWVySW5kZXgpO1xuXG4gICAgICAgICAgICB0aGlzLnVuZG8oKTtcblxuICAgICAgICAgICAgaWYgKHVuZG9EYXRhUmVjdC5nZXRXaWR0aCgpIDwgbGF5ZXIud2lkdGggfHwgdW5kb0RhdGFSZWN0LmdldEhlaWdodCgpIDwgbGF5ZXIuaGVpZ2h0KSB7XG4gICAgICAgICAgICAgICAgLypcbiAgICAgICAgICAgICAgICAgKiBXZSBuZWVkIGEgY29tcGxldGUgY29weSBvZiB0aGUgbGF5ZXIgaW4gdW5kb0RhdGEgdG8gc3VwcG9ydCBmdXJ0aGVyIHJlZG8oKS4gKEFzIHdlIHByb2JhYmx5IHByZXZpb3VzbHlcbiAgICAgICAgICAgICAgICAgKiBvbmx5IG1hZGUgYSBiYWNrdXAgY29weSBvZiB0aGUgYXJlYXMgd2UgZXJhc2VkIHVzaW5nIHRoZSBvbGQgdHJhbnNmb3JtKS5cbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICB1bmRvRGF0YSA9IGxheWVyLmNsb25lKCk7XG4gICAgICAgICAgICAgICAgdW5kb0RhdGFSZWN0ID0gbGF5ZXIuZ2V0Qm91bmRzKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGFmZmluZVRyYW5zZm9ybSA9IF9hZmZpbmVUcmFuc2Zvcm0uY2xvbmUoKTtcbiAgICAgICAgICAgIHRoaXMucmVkbygpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMuc2V0SW50ZXJwb2xhdGlvbiA9IGZ1bmN0aW9uKG5ld0ludGVycG9sYXRpb24pIHtcbiAgICAgICAgICAgIGlmIChuZXdJbnRlcnBvbGF0aW9uICE9IGludGVycG9sYXRpb24pIHtcbiAgICAgICAgICAgICAgICBpbnRlcnBvbGF0aW9uID0gbmV3SW50ZXJwb2xhdGlvbjtcblxuICAgICAgICAgICAgICAgIHRoaXMudW5kbygpO1xuICAgICAgICAgICAgICAgIHRoaXMucmVkbygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDYWxsZWQgd2hlbiB3ZSdyZSBubyBsb25nZXIgdGhlIHRvcCBvcGVyYXRpb24gaW4gdGhlIHVuZG8gc3RhY2ssIHNvIHRoYXQgd2UgY2FuIG9wdGltaXplIGZvciBsb3dlciBtZW1vcnlcbiAgICAgICAgICogdXNhZ2UgaW5zdGVhZCBvZiBmYXN0ZXIgcmV2aXNpb24gc3BlZWRcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuY29tcGFjdCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgbGF5ZXIgPSB0aGF0LmdldExheWVyKHRoaXMubGF5ZXJJbmRleCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIElmIHdlIGhhdmUgYSBmdWxsIHVuZG8sIGFuZCB3ZSBkb24ndCBuZWVkIHZlcnkgbXVjaCBhcmVhIGZvciB1bmRvLCB0cmltIGl0IHRvIGp1c3QgdGhlIGFyZWEgd2UgbmVlZFxuICAgICAgICAgICAgaWYgKHVuZG9EYXRhUmVjdC5nZXRXaWR0aCgpID09IGxheWVyLndpZHRoICYmIHVuZG9EYXRhUmVjdC5nZXRIZWlnaHQoKSA9PSBsYXllci5oZWlnaHQpIHtcbiAgICAgICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICAgICAgZGlydHlSZWN0ID0gc3JjUmVjdC5nZXRVbmlvbihkc3RSZWN0KTtcblxuICAgICAgICAgICAgICAgIGlmIChkaXJ0eVJlY3QuZ2V0QXJlYSgpICogMiA8IGxheWVyLndpZHRoICogbGF5ZXIuaGVpZ2h0KSB7XG4gICAgICAgICAgICAgICAgICAgIHVuZG9EYXRhUmVjdCA9IGRpcnR5UmVjdDtcbiAgICAgICAgICAgICAgICAgICAgdW5kb0RhdGEgPSB1bmRvRGF0YS5jbG9uZVJlY3QodW5kb0RhdGFSZWN0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5nZXRNZW1vcnlVc2VkID0gZnVuY3Rpb24odW5kb25lLCBwYXJhbSkge1xuICAgICAgICAgICAgcmV0dXJuIHVuZG9EYXRhLmdldE1lbW9yeVNpemUoKTtcbiAgICAgICAgfTtcblxuXHQgICAgLyoqXG4gICAgICAgICAqIEdldCBhIGNvcHkgb2YgdGhlIGFmZmluZSB0cmFuc2Zvcm0uXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmdldFRyYW5zZm9ybSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIGFmZmluZVRyYW5zZm9ybS5jbG9uZSgpO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBHZXQgYSBjb3B5IG9mIHRoZSBpbml0aWFsIGRvY3VtZW50IHJlY3RhbmdsZSAoYmVmb3JlIHRoZSB0cmFuc2Zvcm0gd2FzIGFwcGxpZWQpXG4gICAgICAgICAqXG4gICAgICAgICAqIEByZXR1cm5zIHtDUFJlY3R9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmdldEluaXRpYWxUcmFuc2Zvcm1SZWN0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gc3JjUmVjdC5jbG9uZSgpO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBHZXQgYSBjb3B5IG9mIHRoZSBpbml0aWFsIHVzZXIgc2VsZWN0aW9uIHJlY3RhbmdsZSAoYmVmb3JlIHRoZSB0cmFuc2Zvcm0gd2FzIGFwcGxpZWQpLiBDYW4gYmUgZW1wdHkgaWZcbiAgICAgICAgICogdGhlIHVzZXIgZGlkbid0IGhhdmUgYW55dGhpbmcgc2VsZWN0ZWQgYmVmb3JlIHRoZSB0cmFuc2Zvcm0gYmVnYW4uXG4gICAgICAgICAqXG4gICAgICAgICAqIEByZXR1cm5zIHtDUFJlY3R9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmdldEluaXRpYWxTZWxlY3Rpb25SZWN0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gZnJvbVNlbGVjdGlvbi5jbG9uZSgpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMubGF5ZXJJbmRleCA9IHRoYXQuZ2V0QWN0aXZlTGF5ZXJJbmRleCgpO1xuXG4gICAgICAgIGxldFxuICAgICAgICAgICAgbGF5ZXIgPSB0aGF0LmdldExheWVyKHRoaXMubGF5ZXJJbmRleCk7XG5cbiAgICAgICAgdW5kb0RhdGEgPSBsYXllci5jbG9uZSgpO1xuICAgICAgICB1bmRvRGF0YVJlY3QgPSBsYXllci5nZXRCb3VuZHMoKTtcbiAgICAgICAgZnVsbFVuZG9DYW52YXMud2lkdGggPSBsYXllci53aWR0aDtcbiAgICAgICAgZnVsbFVuZG9DYW52YXMuaGVpZ2h0ID0gbGF5ZXIuaGVpZ2h0O1xuXG4gICAgICAgIC8vIE1ha2UgYSBjb3B5IG9mIGp1c3QgdGhlIHNvdXJjZSByZWN0YW5nbGUgaW4gaXRzIG93biBjYW52YXMgc28gd2UgaGF2ZSBpdCBhcyBhbiBpbWFnZSB0byBiZSBkcmF3biBsYXRlclxuICAgICAgICB0ZW1wQ2FudmFzLndpZHRoID0gc3JjUmVjdC5nZXRXaWR0aCgpO1xuICAgICAgICB0ZW1wQ2FudmFzLmhlaWdodCA9IHNyY1JlY3QuZ2V0SGVpZ2h0KCk7XG4gICAgICAgIHRlbXBDYW52YXNDb250ZXh0LnB1dEltYWdlRGF0YSh1bmRvRGF0YS5nZXRJbWFnZURhdGEoKSwgLXNyY1JlY3QubGVmdCwgLXNyY1JlY3QudG9wLCBzcmNSZWN0LmxlZnQsIHNyY1JlY3QudG9wLCBzcmNSZWN0LmdldFdpZHRoKCksIHNyY1JlY3QuZ2V0SGVpZ2h0KCkpO1xuXG4gICAgICAgIHRoaXMucmVkbygpO1xuICAgIH1cblxuICAgIENQQWN0aW9uVHJhbnNmb3JtU2VsZWN0aW9uLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoQ1BVbmRvLnByb3RvdHlwZSk7XG4gICAgQ1BBY3Rpb25UcmFuc2Zvcm1TZWxlY3Rpb24ucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gQ1BBY3Rpb25UcmFuc2Zvcm1TZWxlY3Rpb247XG5cbiAgICAvKipcbiAgICAgKiBVcG9uIGNyZWF0aW9uLCBtb3ZlcyB0aGUgY3VycmVudGx5IHNlbGVjdGVkIHJlZ2lvbiBvZiB0aGUgY3VycmVudCBsYXllciBieSB0aGUgZ2l2ZW4gb2Zmc2V0IChvciBjb3BpZXMgaXQgaWZcbiAgICAgKiAnY29weScgaXMgdHJ1ZSkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gc3JjUmVjdFxuICAgICAqIEBwYXJhbSBvZmZzZXRYXG4gICAgICogQHBhcmFtIG9mZnNldFlcbiAgICAgKiBAcGFyYW0gY29weVxuICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAqL1xuICAgIGZ1bmN0aW9uIENQQWN0aW9uTW92ZVNlbGVjdGlvbihzcmNSZWN0LCBvZmZzZXRYLCBvZmZzZXRZLCBjb3B5KSB7XG4gICAgICAgIHZhclxuICAgICAgICAgICAgZnJvbVNlbGVjdGlvbiA9IHRoYXQuZ2V0U2VsZWN0aW9uKCksXG4gICAgICAgICAgICBkc3RSZWN0ID0gbnVsbCxcblxuICAgICAgICAgICAgZnVsbFVuZG8sIC8vIEEgY29weSBvZiB0aGUgZW50aXJlIGxheWVyXG4gICAgICAgICAgICBzcmNEYXRhID0gbnVsbCwgLy8gQSBjb3B5IG9mIHRoZSBvcmlnaW5hbCBwaXhlbHMgYXQgdGhlIHNyY1JlY3QsIG9yIG51bGwgaWYgd2UgdXNlIGEgZnVsbFVuZG8gaW5zdGVhZFxuICAgICAgICAgICAgZHN0RGF0YSA9IG51bGwgLy8gQSBjb3B5IG9mIHRoZSBvcmlnaW5hbCBwaXhlbHMgYXQgdGhlIGRzdFJlY3QsIG9yIG51bGxcbiAgICAgICAgO1xuICAgICAgICBcbiAgICAgICAgdGhpcy51bmRvID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICBsYXllciA9IHRoYXQuZ2V0TGF5ZXIodGhpcy5sYXllckluZGV4KSxcbiAgICAgICAgICAgICAgICBpbnZhbGlkYXRlUmVnaW9uID0gZHN0UmVjdC5jbG9uZSgpO1xuXG4gICAgICAgICAgICBpZiAoIWNvcHkpIHtcbiAgICAgICAgICAgICAgICBpbnZhbGlkYXRlUmVnaW9uLnVuaW9uKHNyY1JlY3QpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoZnVsbFVuZG8pIHtcbiAgICAgICAgICAgICAgICBsYXllci5jb3B5Qml0bWFwUmVjdChmdWxsVW5kbywgaW52YWxpZGF0ZVJlZ2lvbi5sZWZ0LCBpbnZhbGlkYXRlUmVnaW9uLnRvcCwgaW52YWxpZGF0ZVJlZ2lvbik7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGxheWVyLmNvcHlCaXRtYXBSZWN0KHNyY0RhdGEsIHNyY1JlY3QubGVmdCwgc3JjUmVjdC50b3AsIHNyY0RhdGEuZ2V0Qm91bmRzKCkpO1xuXG4gICAgICAgICAgICAgICAgaWYgKGRzdERhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgbGF5ZXIuY29weUJpdG1hcFJlY3QoZHN0RGF0YSwgZHN0UmVjdC5sZWZ0LCBkc3RSZWN0LnRvcCwgZHN0RGF0YS5nZXRCb3VuZHMoKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGF0LnNldFNlbGVjdGlvbihmcm9tU2VsZWN0aW9uKTtcbiAgICAgICAgICAgIHRoYXQuc2V0QWN0aXZlTGF5ZXJJbmRleCh0aGlzLmxheWVySW5kZXgpO1xuXG4gICAgICAgICAgICBpbnZhbGlkYXRlRnVzaW9uUmVjdChpbnZhbGlkYXRlUmVnaW9uKTtcblxuICAgICAgICAgICAgLypcbiAgICAgICAgICAgICAqIFJlcXVpcmVkIGJlY2F1c2UgaW4gdGhlIGNhc2Ugb2YgYSBjb3B5LCB3ZSBkb24ndCBpbnZhbGlkYXRlIHRoZSBzb3VyY2UgcmVjdCBpbiB0aGUgZnVzaW9uLCBzbyB0aGUgY2FudmFzXG4gICAgICAgICAgICAgKiB3b24ndCBlbmQgdXAgcmVwYWludGluZyB0aGUgc2VsZWN0aW9uIHJlY3RhbmdsZSB0aGVyZS5cbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgY2FsbExpc3RlbmVyc1NlbGVjdGlvbkNoYW5nZSgpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMucmVkbyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgbGF5ZXIgPSB0aGF0LmdldExheWVyKHRoaXMubGF5ZXJJbmRleCksXG4gICAgICAgICAgICAgICAgaW52YWxpZGF0ZVJlZ2lvbiA9IG5ldyBDUFJlY3QoMCwgMCwgMCwgMCk7XG5cbiAgICAgICAgICAgIGlmICghY29weSkge1xuICAgICAgICAgICAgICAgIGxheWVyLmNsZWFyUmVjdChzcmNSZWN0LCAwKTtcbiAgICAgICAgICAgICAgICBpbnZhbGlkYXRlUmVnaW9uLnNldChzcmNSZWN0KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZHN0UmVjdCA9IHNyY1JlY3QuY2xvbmUoKTtcbiAgICAgICAgICAgIGRzdFJlY3QudHJhbnNsYXRlKG9mZnNldFgsIG9mZnNldFkpO1xuICAgICAgICAgICAgbGF5ZXIuZ2V0Qm91bmRzKCkuY2xpcChkc3RSZWN0KTtcblxuICAgICAgICAgICAgLyogTm90ZSB0aGF0IHdoaWxlIHdlIGNvdWxkIGNvcHkgaW1hZ2UgZGF0YSBmcm9tIHRoZSBsYXllciBpdHNlbGYgb250byB0aGUgbGF5ZXIgKGluc3RlYWQgb2Ygc291cmNpbmcgdGhhdFxuICAgICAgICAgICAgICogZGF0YSBmcm9tIHRoZSB1bmRvIGJ1ZmZlcnMpLCB0aGlzIHdvdWxkIHJlcXVpcmUgdGhhdCBwYXN0ZUFscGhhUmVjdCBkbyB0aGUgcmlnaHQgdGhpbmcgd2hlbiBzb3VyY2UgYW5kXG4gICAgICAgICAgICAgKiBkZXN0IHJlY3RzIG92ZXJsYXAsIHdoaWNoIGl0IGRvZXNuJ3QuXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGlmIChmdWxsVW5kbykge1xuICAgICAgICAgICAgICAgIGxheWVyLnBhc3RlQWxwaGFSZWN0KGZ1bGxVbmRvLCBzcmNSZWN0LCBkc3RSZWN0LmxlZnQsIGRzdFJlY3QudG9wKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgbGF5ZXIucGFzdGVBbHBoYVJlY3Qoc3JjRGF0YSwgc3JjRGF0YS5nZXRCb3VuZHMoKSwgZHN0UmVjdC5sZWZ0LCBkc3RSZWN0LnRvcCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGludmFsaWRhdGVSZWdpb24udW5pb24oZHN0UmVjdCk7XG5cbiAgICAgICAgICAgIGludmFsaWRhdGVGdXNpb25SZWN0KGludmFsaWRhdGVSZWdpb24pO1xuXG4gICAgICAgICAgICBpZiAoIWZyb21TZWxlY3Rpb24uaXNFbXB0eSgpKSB7XG4gICAgICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgICAgIHRvU2VsZWN0aW9uID0gZnJvbVNlbGVjdGlvbi5jbG9uZSgpO1xuICAgICAgICAgICAgICAgIHRvU2VsZWN0aW9uLnRyYW5zbGF0ZShvZmZzZXRYLCBvZmZzZXRZKTtcbiAgICAgICAgICAgICAgICB0aGF0LnNldFNlbGVjdGlvbih0b1NlbGVjdGlvbik7XG4gICAgICAgICAgICAgICAgY2FsbExpc3RlbmVyc1NlbGVjdGlvbkNoYW5nZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBNb3ZlIGZ1cnRoZXIgYnkgdGhlIGdpdmVuIG9mZnNldCBvbiB0b3Agb2YgdGhlIGN1cnJlbnQgb2Zmc2V0LlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0gX29mZnNldFgge2ludH1cbiAgICAgICAgICogQHBhcmFtIF9vZmZzZXRZIHtpbnR9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmFtZW5kID0gZnVuY3Rpb24oX29mZnNldFgsIF9vZmZzZXRZKSB7XG4gICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICBsYXllciA9IHRoYXQuZ2V0TGF5ZXIodGhpcy5sYXllckluZGV4KTtcblxuICAgICAgICAgICAgaWYgKGZ1bGxVbmRvKSB7XG4gICAgICAgICAgICAgICAgaWYgKGNvcHkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51bmRvKCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLypcbiAgICAgICAgICAgICAgICAgICAgICogV2UgZG9uJ3QgbmVlZCB0byByZXN0b3JlIHRoZSBpbWFnZSBhdCB0aGUgKnNvdXJjZSogbG9jYXRpb24gYXMgYSBmdWxsIHVuZG8gd291bGQgZG8sIHNpbmNlXG4gICAgICAgICAgICAgICAgICAgICAqIHdlJ2xsIG9ubHkgZXJhc2UgdGhhdCBhcmVhIGFnYWluIG9uY2Ugd2UgcmVkbygpLiBTbyBqdXN0IHJlc3RvcmUgdGhlIGRhdGEgYXQgdGhlIGRlc3QuXG4gICAgICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgICAgICBsYXllci5jb3B5Qml0bWFwUmVjdChmdWxsVW5kbywgZHN0UmVjdC5sZWZ0LCBkc3RSZWN0LnRvcCwgZHN0UmVjdCk7XG4gICAgICAgICAgICAgICAgICAgIGludmFsaWRhdGVGdXNpb25SZWN0KGRzdFJlY3QpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLypcbiAgICAgICAgICAgICAgICAgKiBXZSB3YW50IHRvIG1ha2UgYSBjb21wbGV0ZSBjb3B5IG9mIHRoZSBsYXllciBpbiBmdWxsVW5kbyB0byBzdXBwb3J0IGZhc3QgZnVydGhlciBhbWVuZCgpIGNhbGxzLlxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIHRoaXMudW5kbygpO1xuXG4gICAgICAgICAgICAgICAgZnVsbFVuZG8gPSBsYXllci5jbG9uZSgpO1xuICAgICAgICAgICAgICAgIHNyY0RhdGEgPSBudWxsO1xuICAgICAgICAgICAgICAgIGRzdERhdGEgPSBudWxsO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBvZmZzZXRYICs9IF9vZmZzZXRYO1xuICAgICAgICAgICAgb2Zmc2V0WSArPSBfb2Zmc2V0WTtcbiAgICAgICAgICAgIHRoaXMucmVkbygpO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDYWxsZWQgd2hlbiB3ZSdyZSBubyBsb25nZXIgdGhlIHRvcCBvcGVyYXRpb24gaW4gdGhlIHVuZG8gc3RhY2ssIHNvIHRoYXQgd2UgY2FuIG9wdGltaXplIGZvciBsb3dlciBtZW1vcnlcbiAgICAgICAgICogdXNhZ2UgaW5zdGVhZCBvZiBmYXN0ZXIgcmV2aXNpb24gc3BlZWRcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuY29tcGFjdCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaWYgKGZ1bGxVbmRvICYmIHNyY1JlY3QuZ2V0QXJlYSgpICogMiA8IHRoYXQud2lkdGggKiB0aGF0LmhlaWdodCkge1xuICAgICAgICAgICAgICAgIC8vIFJlcGxhY2Ugb3VyIGNvcHkgb2YgdGhlIGVudGlyZSBsYXllciB3aXRoIGp1c3QgYSBjb3B5IG9mIHRoZSBhcmVhcyB3ZSBkYW1hZ2VkXG5cbiAgICAgICAgICAgICAgICBzcmNEYXRhID0gZnVsbFVuZG8uY2xvbmVSZWN0KHNyY1JlY3QpO1xuXG4gICAgICAgICAgICAgICAgaWYgKCFjb3B5ICYmIGRzdFJlY3QuaXNJbnNpZGUoc3JjUmVjdCkpIHtcbiAgICAgICAgICAgICAgICAgICAgZHN0RGF0YSA9IG51bGw7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZHN0RGF0YSA9IGZ1bGxVbmRvLmNsb25lUmVjdChkc3RSZWN0KTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBmdWxsVW5kbyA9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5nZXRNZW1vcnlVc2VkID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICBzaXplID0gMDtcblxuICAgICAgICAgICAgaWYgKGZ1bGxVbmRvKSB7XG4gICAgICAgICAgICAgICAgc2l6ZSArPSBmdWxsVW5kby5nZXRNZW1vcnlTaXplKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoc3JjRGF0YSkge1xuICAgICAgICAgICAgICAgIHNpemUgKz0gc3JjRGF0YS5nZXRNZW1vcnlTaXplKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZHN0RGF0YSkge1xuICAgICAgICAgICAgICAgIHNpemUgKz0gZHN0RGF0YS5nZXRNZW1vcnlTaXplKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBzaXplO1xuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMubGF5ZXJJbmRleCA9IHRoYXQuZ2V0QWN0aXZlTGF5ZXJJbmRleCgpO1xuICAgICAgICBmdWxsVW5kbyA9IHRoYXQuZ2V0TGF5ZXIodGhpcy5sYXllckluZGV4KS5jbG9uZSgpO1xuXG4gICAgICAgIHRoaXMucmVkbygpO1xuICAgIH1cblxuICAgIENQQWN0aW9uTW92ZVNlbGVjdGlvbi5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKENQVW5kby5wcm90b3R5cGUpO1xuICAgIENQQWN0aW9uTW92ZVNlbGVjdGlvbi5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBDUEFjdGlvbk1vdmVTZWxlY3Rpb247XG5cbiAgICAvKipcbiAgICAgKiBVc2VkIHRvIGVuY2Fwc3VsYXRlIG11bHRpcGxlIHVuZG8gb3BlcmF0aW9uIGFzIG9uZVxuICAgICAqIFxuICAgICAqIEBwYXJhbSB1bmRvZXMgQ1BVbmRvW10gTGlzdCBvZiB1bmRvIG9wZXJhdGlvbnMgdG8gZW5jYXBzdWxhdGVcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBDUE11bHRpVW5kbyh1bmRvZXMpIHtcbiAgICAgICAgdGhpcy51bmRvZXMgPSB1bmRvZXM7XG4gICAgfVxuXG4gICAgQ1BNdWx0aVVuZG8ucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShDUFVuZG8ucHJvdG90eXBlKTtcbiAgICBDUE11bHRpVW5kby5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBDUE11bHRpVW5kbztcblxuICAgIENQTXVsdGlVbmRvLnByb3RvdHlwZS51bmRvID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSB0aGlzLnVuZG9lcy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgICAgICAgdGhpcy51bmRvZXNbaV0udW5kbygpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIENQTXVsdGlVbmRvLnByb3RvdHlwZS5yZWRvID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy51bmRvZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHRoaXMudW5kb2VzW2ldLnJlZG8oKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBDUE11bHRpVW5kby5wcm90b3R5cGUubm9DaGFuZ2UgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB1bmRvZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmICghdW5kb2VzW2ldLm5vQ2hhbmdlKCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH07XG5cbiAgICBDUE11bHRpVW5kby5wcm90b3R5cGUuZ2V0TWVtb3J5VXNlZCA9IGZ1bmN0aW9uKHVuZG9uZSwgcGFyYW0pIHtcbiAgICAgICAgdmFyXG4gICAgICAgICAgICB0b3RhbCA9IDA7XG4gICAgICAgIFxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHVuZG9lcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdG90YWwgKz0gdW5kb2VzW2ldLmdldE1lbW9yeVVzZWQodW5kb25lLCBwYXJhbSk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHJldHVybiB0b3RhbDtcbiAgICB9O1xuICAgIFxuICAgIC8qKlxuICAgICAqIFN0b3JlIGRhdGEgdG8gdW5kbyBhIGN1dCBvcGVyYXRpb25cbiAgICAgKiBcbiAgICAgKiBAcGFyYW0gYm1wIENQQ29sb3JCbXAgVGhlIHJlY3RhbmdsZSBvZiBpbWFnZSBkYXRhIHRoYXQgd2FzIGN1dFxuICAgICAqIEBwYXJhbSBsYXllckluZGV4IGludCBJbmRleCBvZiB0aGUgbGF5ZXIgdGhlIGN1dCBjYW1lIGZyb21cbiAgICAgKiBAcGFyYW0gc2VsZWN0aW9uIENQUmVjdCBUaGUgY3V0IHJlY3RhbmdsZSBjby1vcmRpbmF0ZXNcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBDUFVuZG9DdXQoYm1wLCBsYXllckluZGV4LCBzZWxlY3Rpb24pIHtcbiAgICAgICAgc2VsZWN0aW9uID0gc2VsZWN0aW9uLmNsb25lKCk7XG5cbiAgICAgICAgdGhpcy51bmRvID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB0aGF0LnNldEFjdGl2ZUxheWVySW5kZXgobGF5ZXJJbmRleCk7XG4gICAgICAgICAgICBjdXJMYXllci5jb3B5Qml0bWFwUmVjdChibXAsIHNlbGVjdGlvbi5sZWZ0LCBzZWxlY3Rpb24udG9wLCBibXAuZ2V0Qm91bmRzKCkpO1xuICAgICAgICAgICAgdGhhdC5zZXRTZWxlY3Rpb24oc2VsZWN0aW9uKTtcbiAgICAgICAgICAgIGludmFsaWRhdGVGdXNpb25SZWN0KHNlbGVjdGlvbik7XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5yZWRvID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB0aGF0LnNldEFjdGl2ZUxheWVySW5kZXgobGF5ZXJJbmRleCk7XG4gICAgICAgICAgICBjdXJMYXllci5jbGVhclJlY3Qoc2VsZWN0aW9uLCBFTVBUWV9MQVlFUl9DT0xPUik7XG4gICAgICAgICAgICB0aGF0LmVtcHR5U2VsZWN0aW9uKCk7XG4gICAgICAgICAgICBpbnZhbGlkYXRlRnVzaW9uUmVjdChzZWxlY3Rpb24pO1xuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMuZ2V0TWVtb3J5VXNlZCA9IGZ1bmN0aW9uKHVuZG9uZSwgcGFyYW0pIHtcbiAgICAgICAgICAgIHJldHVybiBibXAgPT0gcGFyYW0gPyAwIDogYm1wLndpZHRoICogYm1wLmhlaWdodCAqIENQQ29sb3JCbXAuQllURVNfUEVSX1BJWEVMO1xuICAgICAgICB9O1xuICAgIH1cbiAgICBcbiAgICBDUFVuZG9DdXQucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShDUFVuZG8ucHJvdG90eXBlKTtcbiAgICBDUFVuZG9DdXQucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gQ1BVbmRvQ3V0O1xuXG4gICAgLyoqXG4gICAgICogU3RvcmUgZGF0YSB0byB1bmRvIGEgcGFzdGUgb3BlcmF0aW9uXG4gICAgICogXG4gICAgICogQHBhcmFtIGNsaXAgQ1BDbGlwXG4gICAgICogQHBhcmFtIGxheWVySW5kZXggaW50XG4gICAgICogQHBhcmFtIHNlbGVjdGlvbiBDUFJlY3RcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBDUFVuZG9QYXN0ZShjbGlwLCBsYXllckluZGV4LCBzZWxlY3Rpb24pIHtcbiAgICAgICAgc2VsZWN0aW9uID0gc2VsZWN0aW9uLmNsb25lKCk7XG5cbiAgICAgICAgdGhpcy51bmRvID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBsYXllcnMuc3BsaWNlKGxheWVySW5kZXggKyAxLCAxKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhhdC5zZXRBY3RpdmVMYXllckluZGV4KGxheWVySW5kZXgpO1xuICAgICAgICAgICAgdGhhdC5zZXRTZWxlY3Rpb24oc2VsZWN0aW9uKTtcblxuICAgICAgICAgICAgaW52YWxpZGF0ZUZ1c2lvblJlY3Qoc2VsZWN0aW9uKTtcbiAgICAgICAgICAgIGNhbGxMaXN0ZW5lcnNMYXllckNoYW5nZSgpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMucmVkbyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdGhhdC5zZXRBY3RpdmVMYXllckluZGV4KGxheWVySW5kZXgpO1xuICAgICAgICAgICAgcGFzdGVDbGlwKGZhbHNlLCBjbGlwKTtcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLmdldE1lbW9yeVVzZWQgPSBmdW5jdGlvbih1bmRvbmUsIHBhcmFtKSB7XG4gICAgICAgICAgICByZXR1cm4gY2xpcC5ibXAgPT0gcGFyYW0gPyAwIDogY2xpcC5ibXAud2lkdGggKiBjbGlwLmJtcC5oZWlnaHQgKiA0O1xuICAgICAgICB9O1xuICAgIH1cbiAgICBcbiAgICBDUFVuZG9QYXN0ZS5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKENQVW5kby5wcm90b3R5cGUpO1xuICAgIENQVW5kb1Bhc3RlLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IENQVW5kb1Bhc3RlO1xufTtcblxuQ1BBcnR3b3JrLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoRXZlbnRFbWl0dGVyLnByb3RvdHlwZSk7XG5DUEFydHdvcmsucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gQ1BBcnR3b3JrO1xuXG5DUEFydHdvcmsucHJvdG90eXBlLmdldEJvdW5kcyA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBuZXcgQ1BSZWN0KDAsIDAsIHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0KTtcbn1cblxuQ1BBcnR3b3JrLnByb3RvdHlwZS5pc1BvaW50V2l0aGluID0gZnVuY3Rpb24oeCwgeSkge1xuICAgIHJldHVybiB4ID49IDAgJiYgeSA+PSAwICYmIHggPCB0aGlzLndpZHRoICYmIHkgPCB0aGlzLmhlaWdodDtcbn07IiwiLypcbiAgICBDaGlja2VuUGFpbnRcbiAgICBcbiAgICBDaGlja2VuUGFpbnQgaXMgYSB0cmFuc2xhdGlvbiBvZiBDaGliaVBhaW50IGZyb20gSmF2YSB0byBKYXZhU2NyaXB0XG4gICAgYnkgTmljaG9sYXMgU2hlcmxvY2sgLyBDaGlja2VuIFNtb290aGllLlxuICAgIFxuICAgIENoaWJpUGFpbnQgaXMgQ29weXJpZ2h0IChjKSAyMDA2LTIwMDggTWFyYyBTY2hlZmVyXG5cbiAgICBDaGlja2VuUGFpbnQgaXMgZnJlZSBzb2Z0d2FyZTogeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yIG1vZGlmeVxuICAgIGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgYXMgcHVibGlzaGVkIGJ5XG4gICAgdGhlIEZyZWUgU29mdHdhcmUgRm91bmRhdGlvbiwgZWl0aGVyIHZlcnNpb24gMyBvZiB0aGUgTGljZW5zZSwgb3JcbiAgICAoYXQgeW91ciBvcHRpb24pIGFueSBsYXRlciB2ZXJzaW9uLlxuXG4gICAgQ2hpY2tlblBhaW50IGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsXG4gICAgYnV0IFdJVEhPVVQgQU5ZIFdBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2ZcbiAgICBNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuICBTZWUgdGhlXG4gICAgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy5cblxuICAgIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXG4gICAgYWxvbmcgd2l0aCBDaGlja2VuUGFpbnQuIElmIG5vdCwgc2VlIDxodHRwOi8vd3d3LmdudS5vcmcvbGljZW5zZXMvPi5cbiovXG5cbmltcG9ydCBDUFJlY3QgZnJvbSBcIi4uL3V0aWwvQ1BSZWN0XCI7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIENQQml0bWFwKHdpZHRoLCBoZWlnaHQpIHtcbiAgICAvLyBXaWR0aCBhbmQgaGVpZ2h0IGZvcmNlZCB0byBpbnRlZ2Vyc1xuICAgIHRoaXMud2lkdGggPSB3aWR0aCB8IDA7XG4gICAgdGhpcy5oZWlnaHQgPSBoZWlnaHQgfCAwO1xufVxuXG5DUEJpdG1hcC5wcm90b3R5cGUuZ2V0Qm91bmRzID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIG5ldyBDUFJlY3QoMCwgMCwgdGhpcy53aWR0aCwgdGhpcy5oZWlnaHQpO1xufTtcblxuQ1BCaXRtYXAucHJvdG90eXBlLmlzSW5zaWRlID0gZnVuY3Rpb24oeCwgeSkge1xuICAgIHJldHVybiB4ID49IDAgJiYgeSA+PSAwICYmIHggPCB0aGlzLndpZHRoICYmIHkgPCB0aGlzLmhlaWdodDtcbn07IiwiLy8gTGF5ZXIgYmxlbmRpbmcgZnVuY3Rpb25zXG4vL1xuLy8gVGhlIEZ1bGxBbHBoYSB2ZXJzaW9ucyBhcmUgdGhlIG9uZXMgdGhhdCB3b3JrIGluIGFsbCBjYXNlc1xuLy8gb3RoZXJzIG5lZWQgdGhlIGJvdHRvbSBsYXllciB0byBiZSAxMDAlIG9wYXF1ZSBidXQgYXJlIGZhc3RlclxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gQ1BCbGVuZCgpIHtcbn1cblxuY29uc3RcbiAgICBCWVRFU19QRVJfUElYRUwgPSA0LFxuICAgIFxuICAgIFJFRF9CWVRFX09GRlNFVCA9IDAsXG4gICAgR1JFRU5fQllURV9PRkZTRVQgPSAxLFxuICAgIEJMVUVfQllURV9PRkZTRVQgPSAyLFxuICAgIEFMUEhBX0JZVEVfT0ZGU0VUID0gMztcblxuQ1BCbGVuZC5wcm90b3R5cGUuZnVzaW9uV2l0aE11bHRpcGx5ID0gZnVuY3Rpb24odGhhdCwgZnVzaW9uLCByZWN0KSB7XG4gICAgdmFyIFxuICAgICAgICB5U3RyaWRlID0gKHRoYXQud2lkdGggLSByZWN0LmdldFdpZHRoKCkpICogQllURVNfUEVSX1BJWEVMLFxuICAgICAgICBwaXhJbmRleCA9IHRoYXQub2Zmc2V0T2ZQaXhlbChyZWN0LmxlZnQsIHJlY3QudG9wKTtcblxuICAgIGZvciAodmFyIHkgPSByZWN0LnRvcDsgeSA8IHJlY3QuYm90dG9tOyB5KyssIHBpeEluZGV4ICs9IHlTdHJpZGUpIHtcbiAgICAgICAgZm9yICh2YXIgeCA9IHJlY3QubGVmdDsgeCA8IHJlY3QucmlnaHQ7IHgrKykge1xuICAgICAgICAgICAgdmFyIFxuICAgICAgICAgICAgICAgIGFscGhhID0gKHRoYXQuZGF0YVtwaXhJbmRleCArIEFMUEhBX0JZVEVfT0ZGU0VUXSAqIHRoYXQuYWxwaGEgLyAxMDApIHwgMDtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKGFscGhhID4gMCkge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgMzsgaSsrLCBwaXhJbmRleCsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGZ1c2lvbi5kYXRhW3BpeEluZGV4XSA9IChmdXNpb24uZGF0YVtwaXhJbmRleF0gLSAodGhhdC5kYXRhW3BpeEluZGV4XSBeIDB4RkYpICogZnVzaW9uLmRhdGFbcGl4SW5kZXhdICogYWxwaGEgLyAoMjU1ICogMjU1KSkgfCAwO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBwaXhJbmRleCsrOyAvLyBEb24ndCBuZWVkIHRvIHVwZGF0ZSB0aGUgYWxwaGEgYmVjYXVzZSBpdCBzdGFydGVkIG91dCBhcyAxMDAlXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHBpeEluZGV4ICs9IEJZVEVTX1BFUl9QSVhFTDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn07XG5cbi8qIEJsZW5kIG9udG8gYW4gb3BhcXVlIGZ1c2lvbi4gU3VwcG9ydHMgLmFscGhhIDwgMTAwIG9uIHRoaXMgbGF5ZXIgKi9cbkNQQmxlbmQucHJvdG90eXBlLmZ1c2lvbldpdGhOb3JtYWwgPSBmdW5jdGlvbih0aGF0LCBmdXNpb24sIHJlY3QpIHtcbiAgICB2YXJcbiAgICAgICAgeVN0cmlkZSA9ICgodGhhdC53aWR0aCAtIHJlY3QuZ2V0V2lkdGgoKSkgKiBCWVRFU19QRVJfUElYRUwpIHwgMCxcbiAgICAgICAgcGl4SW5kZXggPSB0aGF0Lm9mZnNldE9mUGl4ZWwocmVjdC5sZWZ0LCByZWN0LnRvcCkgfCAwLFxuICAgICAgICBoID0gKHJlY3QuYm90dG9tIC0gcmVjdC50b3ApIHwgMCxcbiAgICAgICAgdyA9IChyZWN0LnJpZ2h0IC0gcmVjdC5sZWZ0KSB8IDA7XG5cbiAgICBmb3IgKHZhciB5ID0gMCA7IHkgPCBoOyB5KyssIHBpeEluZGV4ICs9IHlTdHJpZGUpIHtcbiAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCB3OyB4KyspIHtcbiAgICAgICAgICAgIHZhciBcbiAgICAgICAgICAgICAgICBhbHBoYSA9ICh0aGF0LmRhdGFbcGl4SW5kZXggKyBBTFBIQV9CWVRFX09GRlNFVF0gKiB0aGF0LmFscGhhIC8gMTAwKSB8IDA7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChhbHBoYSA+IDApIHtcbiAgICAgICAgICAgICAgICBpZiAoYWxwaGEgPT0gMjU1KSB7XG4gICAgICAgICAgICAgICAgICAgIGZ1c2lvbi5kYXRhW3BpeEluZGV4XSA9IHRoYXQuZGF0YVtwaXhJbmRleF07XG4gICAgICAgICAgICAgICAgICAgIGZ1c2lvbi5kYXRhW3BpeEluZGV4ICsgMV0gPSB0aGF0LmRhdGFbcGl4SW5kZXggKyAxXTtcbiAgICAgICAgICAgICAgICAgICAgZnVzaW9uLmRhdGFbcGl4SW5kZXggKyAyXSA9IHRoYXQuZGF0YVtwaXhJbmRleCArIDJdO1xuICAgICAgICAgICAgICAgICAgICBmdXNpb24uZGF0YVtwaXhJbmRleCArIDNdID0gMjU1O1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgICAgICAgICAgaW52QWxwaGEgPSAyNTUgLSBhbHBoYTtcblxuICAgICAgICAgICAgICAgICAgICBmdXNpb24uZGF0YVtwaXhJbmRleF0gPSAoKHRoYXQuZGF0YVtwaXhJbmRleF0gKiBhbHBoYSArIGZ1c2lvbi5kYXRhW3BpeEluZGV4XSAqIGludkFscGhhKSAvIDI1NSkgfCAwO1xuICAgICAgICAgICAgICAgICAgICBmdXNpb24uZGF0YVtwaXhJbmRleCArIDFdID0gKCh0aGF0LmRhdGFbcGl4SW5kZXggKyAxXSAqIGFscGhhICsgZnVzaW9uLmRhdGFbcGl4SW5kZXggKyAxXSAqIGludkFscGhhKSAvIDI1NSkgfCAwO1xuICAgICAgICAgICAgICAgICAgICBmdXNpb24uZGF0YVtwaXhJbmRleCArIDJdID0gKCh0aGF0LmRhdGFbcGl4SW5kZXggKyAyXSAqIGFscGhhICsgZnVzaW9uLmRhdGFbcGl4SW5kZXggKyAyXSAqIGludkFscGhhKSAvIDI1NSkgfCAwO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcGl4SW5kZXggKz0gQllURVNfUEVSX1BJWEVMO1xuICAgICAgICB9XG4gICAgfVxufTtcblxuLy8gRnVzaW5nIG9udG8gYW4gb3BhcXVlIGxheWVyIHdoZW4gdGhpcyBsYXllciBoYXMgYWxwaGEgc2V0IHRvIDEwMFxuQ1BCbGVuZC5wcm90b3R5cGUuZnVzaW9uV2l0aE5vcm1hbE5vQWxwaGEgPSBmdW5jdGlvbih0aGF0LCBmdXNpb24sIHJlY3QpIHtcbiAgICB2YXIgXG4gICAgICAgIHlTdHJpZGUgPSAoKHRoYXQud2lkdGggLSByZWN0LmdldFdpZHRoKCkpICogQllURVNfUEVSX1BJWEVMKSB8IDAsXG4gICAgICAgIHBpeEluZGV4ID0gdGhhdC5vZmZzZXRPZlBpeGVsKHJlY3QubGVmdCwgcmVjdC50b3ApIHwgMCxcbiAgICAgICAgaCA9IChyZWN0LmJvdHRvbSAtIHJlY3QudG9wKSB8IDAsXG4gICAgICAgIHcgPSAocmVjdC5yaWdodCAtIHJlY3QubGVmdCkgfCAwO1xuICAgIFxuICAgIGZvciAodmFyIHkgPSAwIDsgeSA8IGg7IHkrKywgcGl4SW5kZXggKz0geVN0cmlkZSkge1xuICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IHc7IHgrKykge1xuICAgICAgICAgICAgdmFyIFxuICAgICAgICAgICAgICAgIGFscGhhID0gdGhhdC5kYXRhW3BpeEluZGV4ICsgQUxQSEFfQllURV9PRkZTRVRdO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoYWxwaGEgPiAwKSB7XG4gICAgICAgICAgICAgICAgaWYgKGFscGhhID09IDI1NSkge1xuICAgICAgICAgICAgICAgICAgICBmdXNpb24uZGF0YVtwaXhJbmRleF0gPSB0aGF0LmRhdGFbcGl4SW5kZXhdO1xuICAgICAgICAgICAgICAgICAgICBmdXNpb24uZGF0YVtwaXhJbmRleCArIDFdID0gdGhhdC5kYXRhW3BpeEluZGV4ICsgMV07XG4gICAgICAgICAgICAgICAgICAgIGZ1c2lvbi5kYXRhW3BpeEluZGV4ICsgMl0gPSB0aGF0LmRhdGFbcGl4SW5kZXggKyAyXTtcbiAgICAgICAgICAgICAgICAgICAgZnVzaW9uLmRhdGFbcGl4SW5kZXggKyAzXSA9IHRoYXQuZGF0YVtwaXhJbmRleCArIDNdO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBcbiAgICAgICAgICAgICAgICAgICAgICAgIGludkFscGhhID0gMjU1IC0gYWxwaGE7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGZ1c2lvbi5kYXRhW3BpeEluZGV4XSA9ICh0aGF0LmRhdGFbcGl4SW5kZXhdICogYWxwaGEgKyBmdXNpb24uZGF0YVtwaXhJbmRleF0gKiBpbnZBbHBoYSkgLyAyNTU7XG4gICAgICAgICAgICAgICAgICAgIGZ1c2lvbi5kYXRhW3BpeEluZGV4ICsgMV0gPSAodGhhdC5kYXRhW3BpeEluZGV4ICsgMV0gKiBhbHBoYSArIGZ1c2lvbi5kYXRhW3BpeEluZGV4ICsgMV0gKiBpbnZBbHBoYSkgLyAyNTU7XG4gICAgICAgICAgICAgICAgICAgIGZ1c2lvbi5kYXRhW3BpeEluZGV4ICsgMl0gPSAodGhhdC5kYXRhW3BpeEluZGV4ICsgMl0gKiBhbHBoYSArIGZ1c2lvbi5kYXRhW3BpeEluZGV4ICsgMl0gKiBpbnZBbHBoYSkgLyAyNTU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBwaXhJbmRleCArPSBCWVRFU19QRVJfUElYRUw7XG4gICAgICAgIH1cbiAgICB9XG59O1xuXG5DUEJsZW5kLnByb3RvdHlwZS5mdXNpb25XaXRoQWRkID0gZnVuY3Rpb24odGhhdCwgZnVzaW9uLCByZWN0KSB7XG4gICAgdmFyIFxuICAgICAgICB5U3RyaWRlID0gKHRoYXQud2lkdGggLSByZWN0LmdldFdpZHRoKCkpICogQllURVNfUEVSX1BJWEVMLFxuICAgICAgICBwaXhJbmRleCA9IHRoYXQub2Zmc2V0T2ZQaXhlbChyZWN0LmxlZnQsIHJlY3QudG9wKTtcblxuICAgIGZvciAodmFyIHkgPSByZWN0LnRvcDsgeSA8IHJlY3QuYm90dG9tOyB5KyssIHBpeEluZGV4ICs9IHlTdHJpZGUpIHtcbiAgICAgICAgZm9yICh2YXIgeCA9IHJlY3QubGVmdDsgeCA8IHJlY3QucmlnaHQ7IHgrKykge1xuICAgICAgICAgICAgdmFyIFxuICAgICAgICAgICAgICAgIGFscGhhID0gKHRoYXQuZGF0YVtwaXhJbmRleCArIEFMUEhBX0JZVEVfT0ZGU0VUXSAqIHRoYXQuYWxwaGEgLyAxMDApIHwgMDtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKGFscGhhID4gMCkge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgMzsgaSsrLCBwaXhJbmRleCsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGZ1c2lvbi5kYXRhW3BpeEluZGV4XSA9IE1hdGgubWluKDI1NSwgKGZ1c2lvbi5kYXRhW3BpeEluZGV4XSArIGFscGhhICogdGhhdC5kYXRhW3BpeEluZGV4XSAvIDI1NSkgfCAwKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcGl4SW5kZXgrKzsgLy8gRG9uJ3QgbmVlZCB0byB1cGRhdGUgdGhlIGFscGhhIGJlY2F1c2UgaXQgc3RhcnRlZCBvdXQgYXMgMTAwJVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBwaXhJbmRleCArPSBCWVRFU19QRVJfUElYRUw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59O1xuXG4vLyBOb3JtYWwgQWxwaGEgTW9kZVxuLy8gQyA9IEEqZCArIEIqKDEtZCkgYW5kIGQgPSBhYSAvIChhYSArIGFiIC0gYWEqYWIpXG5DUEJsZW5kLnByb3RvdHlwZS5mdXNpb25XaXRoTm9ybWFsRnVsbEFscGhhID0gZnVuY3Rpb24odGhhdCwgZnVzaW9uLCByZWN0KSB7XG4gICAgdmFyXG4gICAgICAgIHlTdHJpZGUgPSAoKHRoYXQud2lkdGggLSByZWN0LmdldFdpZHRoKCkpICogQllURVNfUEVSX1BJWEVMKSB8IDAsXG4gICAgICAgIHBpeEluZGV4ID0gdGhhdC5vZmZzZXRPZlBpeGVsKHJlY3QubGVmdCwgcmVjdC50b3ApIHwgMCxcbiAgICAgICAgaCA9IChyZWN0LmJvdHRvbSAtIHJlY3QudG9wKSB8IDAsXG4gICAgICAgIHcgPSAocmVjdC5yaWdodCAtIHJlY3QubGVmdCkgfCAwO1xuXG4gICAgZm9yICh2YXIgeSA9IDAgOyB5IDwgaDsgeSsrLCBwaXhJbmRleCArPSB5U3RyaWRlKSB7XG4gICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgdzsgeCsrKSB7XG4gICAgICAgICAgICB2YXIgXG4gICAgICAgICAgICAgICAgYWxwaGExID0gKHRoYXQuZGF0YVtwaXhJbmRleCArIEFMUEhBX0JZVEVfT0ZGU0VUXSAqIHRoYXQuYWxwaGEpIC8gMTAwLFxuICAgICAgICAgICAgICAgIGFscGhhMiA9IChmdXNpb24uZGF0YVtwaXhJbmRleCArIEFMUEhBX0JZVEVfT0ZGU0VUXSAqIGZ1c2lvbi5hbHBoYSkgLyAxMDAsXG5cbiAgICAgICAgICAgICAgICBuZXdBbHBoYSA9IChhbHBoYTEgKyBhbHBoYTIgLSBhbHBoYTEgKiBhbHBoYTIgLyAyNTUpIHwgMDtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKG5ld0FscGhhID4gMCkge1xuICAgICAgICAgICAgICAgIHZhciBcbiAgICAgICAgICAgICAgICAgICAgcmVhbEFscGhhID0gKGFscGhhMSAqIDI1NSAvIG5ld0FscGhhKSB8IDAsXG4gICAgICAgICAgICAgICAgICAgIGludkFscGhhID0gMjU1IC0gcmVhbEFscGhhO1xuXG4gICAgICAgICAgICAgICAgZnVzaW9uLmRhdGFbcGl4SW5kZXhdID0gKHRoYXQuZGF0YVtwaXhJbmRleF0gKiByZWFsQWxwaGEgKyBmdXNpb24uZGF0YVtwaXhJbmRleF0gKiBpbnZBbHBoYSkgLyAyNTU7XG4gICAgICAgICAgICAgICAgZnVzaW9uLmRhdGFbcGl4SW5kZXggKyAxXSA9ICh0aGF0LmRhdGFbcGl4SW5kZXggKyAxXSAqIHJlYWxBbHBoYSArIGZ1c2lvbi5kYXRhW3BpeEluZGV4ICsgMV0gKiBpbnZBbHBoYSkgLyAyNTU7XG4gICAgICAgICAgICAgICAgZnVzaW9uLmRhdGFbcGl4SW5kZXggKyAyXSA9ICh0aGF0LmRhdGFbcGl4SW5kZXggKyAyXSAqIHJlYWxBbHBoYSArIGZ1c2lvbi5kYXRhW3BpeEluZGV4ICsgMl0gKiBpbnZBbHBoYSkgLyAyNTU7XG4gICAgICAgICAgICAgICAgZnVzaW9uLmRhdGFbcGl4SW5kZXggKyAzXSA9IG5ld0FscGhhO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBwaXhJbmRleCArPSBCWVRFU19QRVJfUElYRUw7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdXNpb24uYWxwaGEgPSAxMDA7XG59O1xuXG4vLyBNdWx0aXBseSBNb2RlXG4vLyBDID0gKEEqYWEqKDEtYWIpICsgQiphYiooMS1hYSkgKyBBKkIqYWEqYWIpIC8gKGFhICsgYWIgLSBhYSphYilcblxuQ1BCbGVuZC5wcm90b3R5cGUuZnVzaW9uV2l0aE11bHRpcGx5RnVsbEFscGhhID0gZnVuY3Rpb24odGhhdCwgZnVzaW9uLCByZWN0KSB7XG4gICAgdmFyXG4gICAgICAgIHlTdHJpZGUgPSAodGhhdC53aWR0aCAtIHJlY3QuZ2V0V2lkdGgoKSkgKiBCWVRFU19QRVJfUElYRUwsXG4gICAgICAgIHBpeEluZGV4ID0gdGhhdC5vZmZzZXRPZlBpeGVsKHJlY3QubGVmdCwgcmVjdC50b3ApO1xuXG4gICAgZm9yICh2YXIgeSA9IHJlY3QudG9wOyB5IDwgcmVjdC5ib3R0b207IHkrKywgcGl4SW5kZXggKz0geVN0cmlkZSkge1xuICAgICAgICBmb3IgKHZhciB4ID0gcmVjdC5sZWZ0OyB4IDwgcmVjdC5yaWdodDsgeCsrKSB7XG4gICAgICAgICAgICB2YXIgXG4gICAgICAgICAgICAgICAgYWxwaGExID0gKHRoYXQuZGF0YVtwaXhJbmRleCArIEFMUEhBX0JZVEVfT0ZGU0VUXSAqIHRoYXQuYWxwaGEpIC8gMTAwLFxuICAgICAgICAgICAgICAgIGFscGhhMiA9IChmdXNpb24uZGF0YVtwaXhJbmRleCArIEFMUEhBX0JZVEVfT0ZGU0VUXSAqIGZ1c2lvbi5hbHBoYSkgLyAxMDAsXG5cbiAgICAgICAgICAgICAgICBuZXdBbHBoYSA9IChhbHBoYTEgKyBhbHBoYTIgLSBhbHBoYTEgKiBhbHBoYTIgLyAyNTUpIHwgMDtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKG5ld0FscGhhID4gMCkge1xuICAgICAgICAgICAgICAgIHZhciBcbiAgICAgICAgICAgICAgICAgICAgYWxwaGExMiA9IChhbHBoYTEgKiBhbHBoYTIgLyAyNTUpIHwgMCxcbiAgICAgICAgICAgICAgICAgICAgYWxwaGExbjIgPSAoYWxwaGExICogKGFscGhhMiBeIDB4RkYpIC8gMjU1KSB8IDAsXG4gICAgICAgICAgICAgICAgICAgIGFscGhhbjEyID0gKChhbHBoYTEgXiAweGZmKSAqIGFscGhhMiAvIDI1NSkgfCAwO1xuXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAzOyBpKyssIHBpeEluZGV4KyspIHtcbiAgICAgICAgICAgICAgICAgICAgZnVzaW9uLmRhdGFbcGl4SW5kZXhdID0gKCh0aGF0LmRhdGFbcGl4SW5kZXhdICogYWxwaGExbjIgKyBmdXNpb24uZGF0YVtwaXhJbmRleF0gKiBhbHBoYW4xMiArIHRoYXQuZGF0YVtwaXhJbmRleF1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIGZ1c2lvbi5kYXRhW3BpeEluZGV4XSAqIGFscGhhMTIgLyAyNTUpIC8gbmV3QWxwaGEpIHwgMDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZnVzaW9uLmRhdGFbcGl4SW5kZXgrK10gPSBuZXdBbHBoYTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcGl4SW5kZXggKz0gQllURVNfUEVSX1BJWEVMO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIGZ1c2lvbi5hbHBoYSA9IDEwMDtcbn07XG5cbi8vIExpbmVhciBEb2RnZSAoQWRkKSBNb2RlXG4vLyBDID0gKGFhICogQSArIGFiICogQikgLyAoYWEgKyBhYiAtIGFhKmFiKVxuXG5DUEJsZW5kLnByb3RvdHlwZS5mdXNpb25XaXRoQWRkRnVsbEFscGhhID0gZnVuY3Rpb24odGhhdCwgZnVzaW9uLCByZWN0KSB7XG4gICAgdmFyXG4gICAgICAgIHlTdHJpZGUgPSAodGhhdC53aWR0aCAtIHJlY3QuZ2V0V2lkdGgoKSkgKiBCWVRFU19QRVJfUElYRUwsXG4gICAgICAgIHBpeEluZGV4ID0gdGhhdC5vZmZzZXRPZlBpeGVsKHJlY3QubGVmdCwgcmVjdC50b3ApO1xuXG4gICAgZm9yICh2YXIgeSA9IHJlY3QudG9wOyB5IDwgcmVjdC5ib3R0b207IHkrKywgcGl4SW5kZXggKz0geVN0cmlkZSkge1xuICAgICAgICBmb3IgKHZhciB4ID0gcmVjdC5sZWZ0OyB4IDwgcmVjdC5yaWdodDsgeCsrKSB7XG4gICAgICAgICAgICB2YXIgXG4gICAgICAgICAgICAgICAgYWxwaGExID0gKHRoYXQuZGF0YVtwaXhJbmRleCArIEFMUEhBX0JZVEVfT0ZGU0VUXSAqIHRoYXQuYWxwaGEpIC8gMTAwLFxuICAgICAgICAgICAgICAgIGFscGhhMiA9IChmdXNpb24uZGF0YVtwaXhJbmRleCArIEFMUEhBX0JZVEVfT0ZGU0VUXSAqIGZ1c2lvbi5hbHBoYSkgLyAxMDAsXG5cbiAgICAgICAgICAgICAgICBuZXdBbHBoYSA9IChhbHBoYTEgKyBhbHBoYTIgLSBhbHBoYTEgKiBhbHBoYTIgLyAyNTUpIHwgMDtcblxuICAgICAgICAgICAgaWYgKG5ld0FscGhhID4gMCkge1xuXG4gICAgICAgICAgICAgICAgLypcbiAgICAgICAgICAgICAqIC8vIHRoaXMgdmVyc2lvbiBzZWVtcyBzbG93ZXIgdGhhbiB0aGUgTWF0aC5taW4gb25lIGludCByID0gKGFscGhhMiAqIChjb2xvcjIgPj4+IDE2ICYgMHhmZikgK1xuICAgICAgICAgICAgICogYWxwaGExICogKGNvbG9yMSA+Pj4gMTYgJiAweGZmKSkgLyBuZXdBbHBoYTsgciB8PSAoKH4oKHIgJiAweGZmZmZmZjAwKSAtIDEpID4+IDE2KSB8IHIpICYgMHhmZjtcbiAgICAgICAgICAgICAqIGludCBnID0gKGFscGhhMiAqIChjb2xvcjIgPj4+IDggJiAweGZmKSArIGFscGhhMSAqIChjb2xvcjEgPj4+IDggJiAweGZmKSkgLyBuZXdBbHBoYTsgZyB8PSAoKH4oKGcgJlxuICAgICAgICAgICAgICogMHhmZmZmZmYwMCkgLSAxKSA+PiAxNikgfCBnKSAmIDB4ZmY7IGludCBiID0gKGFscGhhMiAqIChjb2xvcjIgJiAweGZmKSArIGFscGhhMSAqIChjb2xvcjEgJlxuICAgICAgICAgICAgICogMHhmZikpIC8gbmV3QWxwaGE7IGIgfD0gKCh+KChiICYgMHhmZmZmZmYwMCkgLSAxKSA+PiAxNikgfCBiKSAmIDB4ZmY7XG4gICAgICAgICAgICAgKi9cblxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgMzsgaSsrLCBwaXhJbmRleCsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGZ1c2lvbi5kYXRhW3BpeEluZGV4XSA9IE1hdGgubWluKDI1NSwgKChhbHBoYTIgKiBmdXNpb24uZGF0YVtwaXhJbmRleF0gKyBhbHBoYTEgKiB0aGF0LmRhdGFbcGl4SW5kZXhdKSAvIG5ld0FscGhhKSB8IDApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBmdXNpb24uZGF0YVtwaXhJbmRleCsrXSA9IG5ld0FscGhhO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBwaXhJbmRleCArPSBCWVRFU19QRVJfUElYRUw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgZnVzaW9uLmFscGhhID0gMTAwO1xufTtcblxuLy8gTGluZWFyIEJ1cm4gKFN1YikgTW9kZVxuLy8gQyA9IChhYSAqIEEgKyBhYiAqIEIgLSBhYSphYiApIC8gKGFhICsgYWIgLSBhYSphYilcblxuQ1BCbGVuZC5wcm90b3R5cGUuZnVzaW9uV2l0aFN1YnRyYWN0RnVsbEFscGhhID0gZnVuY3Rpb24odGhhdCwgZnVzaW9uLCByZWN0KSB7XG4gICAgdmFyXG4gICAgICAgIHlTdHJpZGUgPSAodGhhdC53aWR0aCAtIHJlY3QuZ2V0V2lkdGgoKSkgKiBCWVRFU19QRVJfUElYRUwsXG4gICAgICAgIHBpeEluZGV4ID0gdGhhdC5vZmZzZXRPZlBpeGVsKHJlY3QubGVmdCwgcmVjdC50b3ApO1xuXG4gICAgZm9yICh2YXIgeSA9IHJlY3QudG9wOyB5IDwgcmVjdC5ib3R0b207IHkrKywgcGl4SW5kZXggKz0geVN0cmlkZSkge1xuICAgICAgICBmb3IgKHZhciB4ID0gcmVjdC5sZWZ0OyB4IDwgcmVjdC5yaWdodDsgeCsrKSB7XG4gICAgICAgICAgICB2YXIgXG4gICAgICAgICAgICAgICAgYWxwaGExID0gKCh0aGF0LmRhdGFbcGl4SW5kZXggKyBBTFBIQV9CWVRFX09GRlNFVF0gKiB0aGF0LmFscGhhKSAvIDEwMCkgfCAwLFxuICAgICAgICAgICAgICAgIGFscGhhMiA9ICgoZnVzaW9uLmRhdGFbcGl4SW5kZXggKyBBTFBIQV9CWVRFX09GRlNFVF0gKiBmdXNpb24uYWxwaGEpIC8gMTAwKSB8IDAsXG5cbiAgICAgICAgICAgICAgICBuZXdBbHBoYSA9IChhbHBoYTEgKyBhbHBoYTIgLSBhbHBoYTEgKiBhbHBoYTIgLyAyNTUpIHwgMDtcblxuICAgICAgICAgICAgaWYgKG5ld0FscGhhID4gMCkge1xuICAgICAgICAgICAgICAgIHZhciBcbiAgICAgICAgICAgICAgICAgICAgYWxwaGExMiA9IGFscGhhMSAqIGFscGhhMjtcblxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgMzsgaSsrLCBwaXhJbmRleCsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5uZWwgPSAoYWxwaGEyICogZnVzaW9uLmRhdGFbcGl4SW5kZXhdICsgYWxwaGExICogdGhhdC5kYXRhW3BpeEluZGV4XSAtIGFscGhhMTIpIC8gbmV3QWxwaGE7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAvLyBiaW5hcnkgbWFnaWMgdG8gY2xhbXAgbmVnYXRpdmUgdmFsdWVzIHRvIHplcm8gd2l0aG91dCB1c2luZyBhIGNvbmRpdGlvblxuICAgICAgICAgICAgICAgICAgICBmdXNpb24uZGF0YVtwaXhJbmRleF0gPSBjaGFubmVsICYgKH5jaGFubmVsID4+PiAyNCk7IFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBmdXNpb24uZGF0YVtwaXhJbmRleCsrXSA9IG5ld0FscGhhO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBwaXhJbmRleCArPSBCWVRFU19QRVJfUElYRUw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgZnVzaW9uLmFscGhhID0gMTAwO1xufTtcblxuLy8gRm9yIG9wYXF1ZSBmdXNpb25cbkNQQmxlbmQucHJvdG90eXBlLmZ1c2lvbldpdGhTdWJ0cmFjdCA9IGZ1bmN0aW9uKHRoYXQsIGZ1c2lvbiwgcmVjdCkge1xuICAgIHZhclxuICAgICAgICB5U3RyaWRlID0gKCh0aGF0LndpZHRoIC0gcmVjdC5nZXRXaWR0aCgpKSAqIEJZVEVTX1BFUl9QSVhFTCkgfCAwLFxuICAgICAgICBwaXhJbmRleCA9IHRoYXQub2Zmc2V0T2ZQaXhlbChyZWN0LmxlZnQsIHJlY3QudG9wKSB8IDA7XG5cbiAgICBmb3IgKHZhciB5ID0gcmVjdC50b3A7IHkgPCByZWN0LmJvdHRvbTsgeSsrLCBwaXhJbmRleCArPSB5U3RyaWRlKSB7XG4gICAgICAgIGZvciAodmFyIHggPSByZWN0LmxlZnQ7IHggPCByZWN0LnJpZ2h0OyB4KyspIHtcbiAgICAgICAgICAgIHZhciBcbiAgICAgICAgICAgICAgICBhbHBoYTEgPSAoKHRoYXQuZGF0YVtwaXhJbmRleCArIEFMUEhBX0JZVEVfT0ZGU0VUXSAqIHRoYXQuYWxwaGEpIC8gMTAwKSB8IDAsXG4gICAgICAgICAgICAgICAgYWxwaGExMiA9IGFscGhhMSAqIDI1NTtcblxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAzOyBpKyssIHBpeEluZGV4KyspIHtcbiAgICAgICAgICAgICAgICB2YXIgXG4gICAgICAgICAgICAgICAgICAgIGNoYW5uZWwgPSAoMjU1ICogZnVzaW9uLmRhdGFbcGl4SW5kZXhdICsgYWxwaGExICogdGhhdC5kYXRhW3BpeEluZGV4XSAtIGFscGhhMTIpIC8gMjU1O1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIGJpbmFyeSBtYWdpYyB0byBjbGFtcCBuZWdhdGl2ZSB2YWx1ZXMgdG8gemVybyB3aXRob3V0IHVzaW5nIGEgY29uZGl0aW9uXG4gICAgICAgICAgICAgICAgZnVzaW9uLmRhdGFbcGl4SW5kZXhdID0gY2hhbm5lbCAmICh+Y2hhbm5lbCA+Pj4gMjQpOyBcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHBpeEluZGV4Kys7IC8vIEFscGhhIHN0YXlzIHRoZSBzYW1lXG4gICAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgZnVzaW9uLmFscGhhID0gMTAwO1xufTtcblxuLy8gU2NyZWVuIE1vZGVcbi8vIHNhbWUgYXMgTXVsdGlwbHkgZXhjZXB0IGFsbCBjb2xvciBjaGFubmVscyBhcmUgaW52ZXJ0ZWQgYW5kIHRoZSByZXN1bHQgdG9vXG4vLyBDID0gMSAtICgoKDEtQSkqYWEqKDEtYWIpICsgKDEtQikqYWIqKDEtYWEpICsgKDEtQSkqKDEtQikqYWEqYWIpIC8gKGFhICsgYWIgLSBhYSphYikpXG5cbkNQQmxlbmQucHJvdG90eXBlLmZ1c2lvbldpdGhTY3JlZW5GdWxsQWxwaGEgPSBmdW5jdGlvbih0aGF0LCBmdXNpb24sIHJlY3QpIHtcbiAgICB2YXJcbiAgICAgICAgeVN0cmlkZSA9ICh0aGF0LndpZHRoIC0gcmVjdC5nZXRXaWR0aCgpKSAqIEJZVEVTX1BFUl9QSVhFTCxcbiAgICAgICAgcGl4SW5kZXggPSB0aGF0Lm9mZnNldE9mUGl4ZWwocmVjdC5sZWZ0LCByZWN0LnRvcCk7XG5cbiAgICBmb3IgKHZhciB5ID0gcmVjdC50b3A7IHkgPCByZWN0LmJvdHRvbTsgeSsrLCBwaXhJbmRleCArPSB5U3RyaWRlKSB7XG4gICAgICAgIGZvciAodmFyIHggPSByZWN0LmxlZnQ7IHggPCByZWN0LnJpZ2h0OyB4KyspIHtcbiAgICAgICAgICAgIHZhciBcbiAgICAgICAgICAgICAgICBhbHBoYTEgPSAoKHRoYXQuZGF0YVtwaXhJbmRleCArIEFMUEhBX0JZVEVfT0ZGU0VUXSAqIHRoYXQuYWxwaGEpIC8gMTAwKSB8IDAsXG4gICAgICAgICAgICAgICAgYWxwaGEyID0gKChmdXNpb24uZGF0YVtwaXhJbmRleCArIEFMUEhBX0JZVEVfT0ZGU0VUXSAqIGZ1c2lvbi5hbHBoYSkgLyAxMDApIHwgMCxcblxuICAgICAgICAgICAgICAgIG5ld0FscGhhID0gKGFscGhhMSArIGFscGhhMiAtIGFscGhhMSAqIGFscGhhMiAvIDI1NSkgfCAwO1xuXG4gICAgICAgICAgICBpZiAobmV3QWxwaGEgPiAwKSB7XG4gICAgICAgICAgICAgICAgdmFyIFxuICAgICAgICAgICAgICAgICAgICBhbHBoYTEyID0gKGFscGhhMSAqIGFscGhhMiAvIDI1NSkgfCAwLFxuICAgICAgICAgICAgICAgICAgICBhbHBoYTFuMiA9IChhbHBoYTEgKiAoYWxwaGEyIF4gMHhGRikgLyAyNTUpIHwgMCxcbiAgICAgICAgICAgICAgICAgICAgYWxwaGFuMTIgPSAoKGFscGhhMSBeIDB4ZmYpICogYWxwaGEyIC8gMjU1KSB8IDA7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAzOyBpKyssIHBpeEluZGV4KyspIHtcbiAgICAgICAgICAgICAgICAgICAgZnVzaW9uLmRhdGFbcGl4SW5kZXhdID0gMHhGRiBeIChcbiAgICAgICAgICAgICAgICAgICAgICAgIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAodGhhdC5kYXRhW3BpeEluZGV4XSBeIDB4RkYpICogYWxwaGExbjJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICArIChmdXNpb24uZGF0YVtwaXhJbmRleF0gXiAweEZGKSAqIGFscGhhbjEyIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgKHRoYXQuZGF0YVtwaXhJbmRleF0gXiAweEZGKSAqIChmdXNpb24uZGF0YVtwaXhJbmRleF0gXiAweEZGKSAqIGFscGhhMTIgLyAyNTVcbiAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgIC8gbmV3QWxwaGFcbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZnVzaW9uLmRhdGFbcGl4SW5kZXgrK10gPSBuZXdBbHBoYTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcGl4SW5kZXggKz0gQllURVNfUEVSX1BJWEVMO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIGZ1c2lvbi5hbHBoYSA9IDEwMDtcbn07XG5cbi8vIEZvciBvcGFxdWUgZnVzaW9uXG5DUEJsZW5kLnByb3RvdHlwZS5mdXNpb25XaXRoU2NyZWVuID0gZnVuY3Rpb24odGhhdCwgZnVzaW9uLCByZWN0KSB7XG4gICAgdmFyXG4gICAgICAgIHlTdHJpZGUgPSAoKHRoYXQud2lkdGggLSByZWN0LmdldFdpZHRoKCkpICogQllURVNfUEVSX1BJWEVMKSB8IDAsXG4gICAgICAgIHBpeEluZGV4ID0gdGhhdC5vZmZzZXRPZlBpeGVsKHJlY3QubGVmdCwgcmVjdC50b3ApIHwgMDtcblxuICAgIGZvciAodmFyIHkgPSByZWN0LnRvcDsgeSA8IHJlY3QuYm90dG9tOyB5KyssIHBpeEluZGV4ICs9IHlTdHJpZGUpIHtcbiAgICAgICAgZm9yICh2YXIgeCA9IHJlY3QubGVmdDsgeCA8IHJlY3QucmlnaHQ7IHgrKykge1xuICAgICAgICAgICAgdmFyIFxuICAgICAgICAgICAgICAgIGFscGhhMSA9ICgodGhhdC5kYXRhW3BpeEluZGV4ICsgQUxQSEFfQllURV9PRkZTRVRdICogdGhhdC5hbHBoYSkgLyAxMDApIHwgMCxcbiAgICAgICAgICAgICAgICBpbnZBbHBoYTEgPSBhbHBoYTEgXiAweGZmO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IDM7IGkrKywgcGl4SW5kZXgrKykge1xuICAgICAgICAgICAgICAgIGZ1c2lvbi5kYXRhW3BpeEluZGV4XSA9IDB4RkYgXiAoXG4gICAgICAgICAgICAgICAgICAgIChcbiAgICAgICAgICAgICAgICAgICAgICAgIChmdXNpb24uZGF0YVtwaXhJbmRleF0gXiAweEZGKSAqIGludkFscGhhMVxuICAgICAgICAgICAgICAgICAgICAgICAgKyAodGhhdC5kYXRhW3BpeEluZGV4XSBeIDB4RkYpICogKGZ1c2lvbi5kYXRhW3BpeEluZGV4XSBeIDB4RkYpICogYWxwaGExIC8gMjU1XG4gICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgLyAyNTVcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcGl4SW5kZXgrKzsgLy8gQWxwaGEgc3RheXMgdGhlIHNhbWVcbiAgICAgICAgfVxuICAgIH1cbiAgICBcbiAgICBmdXNpb24uYWxwaGEgPSAxMDA7XG59O1xuXG4vLyBMaWdodGVuIE1vZGVcbi8vIGlmIEIgPj0gQTogQyA9IEEqZCArIEIqKDEtZCkgYW5kIGQgPSBhYSAqICgxLWFiKSAvIChhYSArIGFiIC0gYWEqYWIpXG4vLyBpZiBBID4gQjogQyA9IEIqZCArIEEqKDEtZCkgYW5kIGQgPSBhYiAqICgxLWFhKSAvIChhYSArIGFiIC0gYWEqYWIpXG5cbkNQQmxlbmQucHJvdG90eXBlLmZ1c2lvbldpdGhMaWdodGVuRnVsbEFscGhhID0gZnVuY3Rpb24odGhhdCwgZnVzaW9uLCByZWN0KSB7XG4gICAgdmFyXG4gICAgICAgIHlTdHJpZGUgPSAodGhhdC53aWR0aCAtIHJlY3QuZ2V0V2lkdGgoKSkgKiBCWVRFU19QRVJfUElYRUwsXG4gICAgICAgIHBpeEluZGV4ID0gdGhhdC5vZmZzZXRPZlBpeGVsKHJlY3QubGVmdCwgcmVjdC50b3ApO1xuXG4gICAgZm9yICh2YXIgeSA9IHJlY3QudG9wOyB5IDwgcmVjdC5ib3R0b207IHkrKywgcGl4SW5kZXggKz0geVN0cmlkZSkge1xuICAgICAgICBmb3IgKHZhciB4ID0gcmVjdC5sZWZ0OyB4IDwgcmVjdC5yaWdodDsgeCsrKSB7XG4gICAgICAgICAgICB2YXIgXG4gICAgICAgICAgICAgICAgYWxwaGExID0gKCh0aGF0LmRhdGFbcGl4SW5kZXggKyBBTFBIQV9CWVRFX09GRlNFVF0gKiB0aGF0LmFscGhhKSAvIDEwMCkgfCAwLFxuICAgICAgICAgICAgICAgIGFscGhhMiA9ICgoZnVzaW9uLmRhdGFbcGl4SW5kZXggKyBBTFBIQV9CWVRFX09GRlNFVF0gKiBmdXNpb24uYWxwaGEpIC8gMTAwKSB8IDAsXG5cbiAgICAgICAgICAgICAgICBuZXdBbHBoYSA9IChhbHBoYTEgKyBhbHBoYTIgLSBhbHBoYTEgKiBhbHBoYTIgLyAyNTUpIHwgMDtcblxuICAgICAgICAgICAgaWYgKG5ld0FscGhhID4gMCkge1xuICAgICAgICAgICAgICAgIHZhciBcbiAgICAgICAgICAgICAgICAvLyBUaGlzIGFscGhhIGlzIHVzZWQgd2hlbiBjb2xvcjEgPiBjb2xvcjJcbiAgICAgICAgICAgICAgICAgICAgYWxwaGExMiA9IChhbHBoYTIgKiAoYWxwaGExIF4gMHhmZikgLyBuZXdBbHBoYSkgfCAwLFxuICAgICAgICAgICAgICAgICAgICBpbnZBbHBoYTEyID0gYWxwaGExMiBeIDB4RkYsXG5cbiAgICAgICAgICAgICAgICAvLyBUaGlzIGFscGhhIGlzIHVzZWQgd2hlbiBjb2xvcjIgPiBjb2xvcjFcbiAgICAgICAgICAgICAgICAgICAgYWxwaGEyMSA9IChhbHBoYTEgKiAoYWxwaGEyIF4gMHhmZikgLyBuZXdBbHBoYSkgfCAwLFxuICAgICAgICAgICAgICAgICAgICBpbnZBbHBoYTIxID0gYWxwaGEyMSBeIDB4RkY7XG5cbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IDM7IGkrKywgcGl4SW5kZXgrKykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgXG4gICAgICAgICAgICAgICAgICAgICAgICBjMSA9IHRoYXQuZGF0YVtwaXhJbmRleF0sXG4gICAgICAgICAgICAgICAgICAgICAgICBjMiA9IGZ1c2lvbi5kYXRhW3BpeEluZGV4XTtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGZ1c2lvbi5kYXRhW3BpeEluZGV4XSA9ICgoKGMyID49IGMxKSA/IChjMSAqIGFscGhhMjEgKyBjMiAqIGludkFscGhhMjEpIDogKGMyICogYWxwaGExMiArIGMxICogaW52QWxwaGExMikpIC8gMjU1KSB8IDA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZ1c2lvbi5kYXRhW3BpeEluZGV4KytdID0gbmV3QWxwaGE7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHBpeEluZGV4ICs9IEJZVEVTX1BFUl9QSVhFTDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBcbiAgICBmdXNpb24uYWxwaGEgPSAxMDA7XG59XG5cbi8vIFdoZW4gZnVzaW9uIGlzIG9wYXF1ZVxuQ1BCbGVuZC5wcm90b3R5cGUuZnVzaW9uV2l0aExpZ2h0ZW4gPSBmdW5jdGlvbih0aGF0LCBmdXNpb24sIHJlY3QpIHtcbiAgICB2YXJcbiAgICAgICAgeVN0cmlkZSA9ICh0aGF0LndpZHRoIC0gcmVjdC5nZXRXaWR0aCgpKSAqIEJZVEVTX1BFUl9QSVhFTCxcbiAgICAgICAgcGl4SW5kZXggPSB0aGF0Lm9mZnNldE9mUGl4ZWwocmVjdC5sZWZ0LCByZWN0LnRvcCk7XG5cbiAgICBmb3IgKHZhciB5ID0gcmVjdC50b3A7IHkgPCByZWN0LmJvdHRvbTsgeSsrLCBwaXhJbmRleCArPSB5U3RyaWRlKSB7XG4gICAgICAgIGZvciAodmFyIHggPSByZWN0LmxlZnQ7IHggPCByZWN0LnJpZ2h0OyB4KyspIHtcbiAgICAgICAgICAgIHZhciBcbiAgICAgICAgICAgICAgICBhbHBoYTEgPSAoKHRoYXQuZGF0YVtwaXhJbmRleCArIEFMUEhBX0JZVEVfT0ZGU0VUXSAqIHRoYXQuYWxwaGEpIC8gMTAwKSB8IDAsXG4gICAgICAgICAgICAgICAgaW52QWxwaGExID0gYWxwaGExIF4gMHhmZjtcblxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAzOyBpKyssIHBpeEluZGV4KyspIHtcbiAgICAgICAgICAgICAgICB2YXIgXG4gICAgICAgICAgICAgICAgICAgIGMxID0gdGhhdC5kYXRhW3BpeEluZGV4XSxcbiAgICAgICAgICAgICAgICAgICAgYzIgPSBmdXNpb24uZGF0YVtwaXhJbmRleF07XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgZnVzaW9uLmRhdGFbcGl4SW5kZXhdID0gYzIgPj0gYzEgPyBjMiA6IChjMiAqIGludkFscGhhMSArIGMxICogYWxwaGExKSAvIDI1NTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHBpeEluZGV4Kys7IC8vIE9wYWNpdHkgdW5jaGFuZ2VkIChzdGlsbCAyNTUpXG4gICAgICAgIH1cbiAgICB9XG59XG5cbi8vIERhcmtlbiBNb2RlXG4vLyBpZiBCID49IEE6IEMgPSBCKmQgKyBBKigxLWQpIGFuZCBkID0gYWIgKiAoMS1hYSkgLyAoYWEgKyBhYiAtIGFhKmFiKVxuLy8gaWYgQSA+IEI6IEMgPSBBKmQgKyBCKigxLWQpIGFuZCBkID0gYWEgKiAoMS1hYikgLyAoYWEgKyBhYiAtIGFhKmFiKVxuXG5DUEJsZW5kLnByb3RvdHlwZS5mdXNpb25XaXRoRGFya2VuRnVsbEFscGhhID0gZnVuY3Rpb24odGhhdCwgZnVzaW9uLCByZWN0KSB7XG4gICAgdmFyXG4gICAgICAgIHlTdHJpZGUgPSAodGhhdC53aWR0aCAtIHJlY3QuZ2V0V2lkdGgoKSkgKiBCWVRFU19QRVJfUElYRUwsXG4gICAgICAgIHBpeEluZGV4ID0gdGhhdC5vZmZzZXRPZlBpeGVsKHJlY3QubGVmdCwgcmVjdC50b3ApO1xuXG4gICAgZm9yICh2YXIgeSA9IHJlY3QudG9wOyB5IDwgcmVjdC5ib3R0b207IHkrKywgcGl4SW5kZXggKz0geVN0cmlkZSkge1xuICAgICAgICBmb3IgKHZhciB4ID0gcmVjdC5sZWZ0OyB4IDwgcmVjdC5yaWdodDsgeCsrKSB7XG4gICAgICAgICAgICB2YXIgXG4gICAgICAgICAgICAgICAgYWxwaGExID0gKCh0aGF0LmRhdGFbcGl4SW5kZXggKyBBTFBIQV9CWVRFX09GRlNFVF0gKiB0aGF0LmFscGhhKSAvIDEwMCkgfCAwLFxuICAgICAgICAgICAgICAgIGFscGhhMiA9ICgoZnVzaW9uLmRhdGFbcGl4SW5kZXggKyBBTFBIQV9CWVRFX09GRlNFVF0gKiBmdXNpb24uYWxwaGEpIC8gMTAwKSB8IDAsXG5cbiAgICAgICAgICAgICAgICBuZXdBbHBoYSA9IChhbHBoYTEgKyBhbHBoYTIgLSBhbHBoYTEgKiBhbHBoYTIgLyAyNTUpIHwgMDtcblxuICAgICAgICAgICAgaWYgKG5ld0FscGhhID4gMCkge1xuICAgICAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgICAgICAvLyBUaGlzIGFscGhhIGlzIHVzZWQgd2hlbiBjb2xvcjEgPiBjb2xvcjJcbiAgICAgICAgICAgICAgICBhbHBoYTEyID0gKGFscGhhMSAqIChhbHBoYTIgXiAweGZmKSAvIG5ld0FscGhhKSB8IDAsXG4gICAgICAgICAgICAgICAgaW52QWxwaGExMiA9IChhbHBoYTEyIF4gMHhmZikgfCAwLFxuXG4gICAgICAgICAgICAgICAgLy8gVGhpcyBhbHBoYSBpcyB1c2VkIHdoZW4gY29sb3IyID4gY29sb3IxXG4gICAgICAgICAgICAgICAgICAgIGFscGhhMjEgPSAoYWxwaGEyICogKGFscGhhMSBeIDB4ZmYpIC8gbmV3QWxwaGEpIHwgMCxcbiAgICAgICAgICAgICAgICAgICAgaW52QWxwaGEyMSA9IChhbHBoYTIxIF4gMHhmZikgfCAwO1xuXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAzOyBpKyssIHBpeEluZGV4KyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIFxuICAgICAgICAgICAgICAgICAgICAgICAgYzEgPSB0aGF0LmRhdGFbcGl4SW5kZXhdLFxuICAgICAgICAgICAgICAgICAgICAgICAgYzIgPSBmdXNpb24uZGF0YVtwaXhJbmRleF07XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBmdXNpb24uZGF0YVtwaXhJbmRleF0gPSAoKChjMiA+PSBjMSkgPyAoYzIgKiBhbHBoYTIxICsgYzEgKiBpbnZBbHBoYTIxKSA6IChjMSAqIGFscGhhMTIgKyBjMiAqIGludkFscGhhMTIpKSAvIDI1NSkgfCAwO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBmdXNpb24uZGF0YVtwaXhJbmRleCsrXSA9IG5ld0FscGhhO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBwaXhJbmRleCArPSBCWVRFU19QRVJfUElYRUw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgZnVzaW9uLmFscGhhID0gMTAwO1xufTtcblxuLy8gV2hlbiBmdXNpb24gaXMgb3BhcXVlXG5DUEJsZW5kLnByb3RvdHlwZS5mdXNpb25XaXRoRGFya2VuID0gZnVuY3Rpb24odGhhdCwgZnVzaW9uLCByZWN0KSB7XG4gICAgdmFyXG4gICAgICAgIHlTdHJpZGUgPSAoKHRoYXQud2lkdGggLSByZWN0LmdldFdpZHRoKCkpICogQllURVNfUEVSX1BJWEVMKSB8IDAsXG4gICAgICAgIHBpeEluZGV4ID0gdGhhdC5vZmZzZXRPZlBpeGVsKHJlY3QubGVmdCwgcmVjdC50b3ApIHwgMDtcblxuICAgIGZvciAodmFyIHkgPSByZWN0LnRvcDsgeSA8IHJlY3QuYm90dG9tOyB5KyssIHBpeEluZGV4ICs9IHlTdHJpZGUpIHtcbiAgICAgICAgZm9yICh2YXIgeCA9IHJlY3QubGVmdDsgeCA8IHJlY3QucmlnaHQ7IHgrKykge1xuICAgICAgICAgICAgdmFyIFxuICAgICAgICAgICAgICAgIGFscGhhMSA9ICgodGhhdC5kYXRhW3BpeEluZGV4ICsgQUxQSEFfQllURV9PRkZTRVRdICogdGhhdC5hbHBoYSkgLyAxMDApIHwgMCxcbiAgICAgICAgICAgICAgICBpbnZBbHBoYTEgPSBhbHBoYTEgXiAweGZmO1xuXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IDM7IGkrKywgcGl4SW5kZXgrKykge1xuICAgICAgICAgICAgICAgIHZhciBcbiAgICAgICAgICAgICAgICAgICAgYzEgPSB0aGF0LmRhdGFbcGl4SW5kZXhdLFxuICAgICAgICAgICAgICAgICAgICBjMiA9IGZ1c2lvbi5kYXRhW3BpeEluZGV4XTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBmdXNpb24uZGF0YVtwaXhJbmRleF0gPSBjMiA+PSBjMSA/IChjMiAqIGludkFscGhhMSArIGMxICogYWxwaGExKSAvIDI1NSA6IGMyO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBwaXhJbmRleCsrOyAvLyBBbHBoYSBzdGF5cyB0aGUgc2FtZVxuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIGZ1c2lvbi5hbHBoYSA9IDEwMDtcbn07XG5cbi8vIERvZGdlIE1vZGVcbi8vXG4vLyBDID0gKGFhKigxLWFiKSpBICsgKDEtYWEpKmFiKkIgKyBhYSphYipCLygxLUEpKSAvIChhYSArIGFiIC0gYWEqYWIpXG5cbkNQQmxlbmQucHJvdG90eXBlLmZ1c2lvbldpdGhEb2RnZUZ1bGxBbHBoYSA9IGZ1bmN0aW9uKHRoYXQsIGZ1c2lvbiwgcmVjdCkge1xuICAgIHZhclxuICAgICAgICB5U3RyaWRlID0gKHRoYXQud2lkdGggLSByZWN0LmdldFdpZHRoKCkpICogQllURVNfUEVSX1BJWEVMLFxuICAgICAgICBwaXhJbmRleCA9IHRoYXQub2Zmc2V0T2ZQaXhlbChyZWN0LmxlZnQsIHJlY3QudG9wKTtcblxuICAgIGZvciAodmFyIHkgPSByZWN0LnRvcDsgeSA8IHJlY3QuYm90dG9tOyB5KyssIHBpeEluZGV4ICs9IHlTdHJpZGUpIHtcbiAgICAgICAgZm9yICh2YXIgeCA9IHJlY3QubGVmdDsgeCA8IHJlY3QucmlnaHQ7IHgrKykge1xuICAgICAgICAgICAgdmFyIFxuICAgICAgICAgICAgICAgIGFscGhhMSA9ICgodGhhdC5kYXRhW3BpeEluZGV4ICsgQUxQSEFfQllURV9PRkZTRVRdICogdGhhdC5hbHBoYSkgLyAxMDApIHwgMDtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKGFscGhhMSA9PSAwKSB7XG4gICAgICAgICAgICAgICAgcGl4SW5kZXggKz0gQllURVNfUEVSX1BJWEVMO1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICBhbHBoYTIgPSAoKGZ1c2lvbi5kYXRhW3BpeEluZGV4ICsgQUxQSEFfQllURV9PRkZTRVRdICogZnVzaW9uLmFscGhhKSAvIDEwMCkgfCAwLFxuICAgICAgICAgICAgICAgIG5ld0FscGhhID0gKGFscGhhMSArIGFscGhhMiAtIGFscGhhMSAqIGFscGhhMiAvIDI1NSkgfCAwO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAobmV3QWxwaGEgPiAwKSB7XG4gICAgICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgICAgIGFscGhhMTIgPSAoYWxwaGExICogYWxwaGEyIC8gMjU1KSB8IDAsXG4gICAgICAgICAgICAgICAgICAgIGFscGhhMW4yID0gKGFscGhhMSAqIChhbHBoYTIgXiAweGZmKSAvIDI1NSkgfCAwLFxuICAgICAgICAgICAgICAgICAgICBhbHBoYW4xMiA9ICgoYWxwaGExIF4gMHhmZikgKiBhbHBoYTIgLyAyNTUpIHwgMDtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IDM7IGkrKywgcGl4SW5kZXgrKykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjEgPSB0aGF0LmRhdGFbcGl4SW5kZXhdLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29sb3IyID0gZnVzaW9uLmRhdGFbcGl4SW5kZXhdLFxuICAgICAgICAgICAgICAgICAgICAgICAgaW52Q29sb3IxID0gY29sb3IxIF4gMHhGRjtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGZ1c2lvbi5kYXRhW3BpeEluZGV4XSA9IFxuICAgICAgICAgICAgICAgICAgICAgICAgKChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoY29sb3IxICogYWxwaGExbjIpIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgKGNvbG9yMiAqIGFscGhhbjEyKSBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICArIGFscGhhMTIgKiAoaW52Q29sb3IxID09IDAgPyAyNTUgOiBNYXRoLm1pbigyNTUsICgyNTUgKiBjb2xvcjIgLyBpbnZDb2xvcjEpIHwgMCkpXG4gICAgICAgICAgICAgICAgICAgICAgICApIC8gbmV3QWxwaGEpIHwgMDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZnVzaW9uLmRhdGFbcGl4SW5kZXgrK10gPSBuZXdBbHBoYTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcGl4SW5kZXggKz0gQllURVNfUEVSX1BJWEVMO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIGZ1c2lvbi5hbHBoYSA9IDEwMDtcbn07XG5cbi8vIFdoZW4gZnVzaW9uIGlzIG9wYXF1ZVxuQ1BCbGVuZC5wcm90b3R5cGUuZnVzaW9uV2l0aERvZGdlID0gZnVuY3Rpb24odGhhdCwgZnVzaW9uLCByZWN0KSB7XG4gICAgdmFyXG4gICAgICAgIHlTdHJpZGUgPSAodGhhdC53aWR0aCAtIHJlY3QuZ2V0V2lkdGgoKSkgKiBCWVRFU19QRVJfUElYRUwsXG4gICAgICAgIHBpeEluZGV4ID0gdGhhdC5vZmZzZXRPZlBpeGVsKHJlY3QubGVmdCwgcmVjdC50b3ApO1xuXG4gICAgZm9yICh2YXIgeSA9IHJlY3QudG9wOyB5IDwgcmVjdC5ib3R0b207IHkrKywgcGl4SW5kZXggKz0geVN0cmlkZSkge1xuICAgICAgICBmb3IgKHZhciB4ID0gcmVjdC5sZWZ0OyB4IDwgcmVjdC5yaWdodDsgeCsrKSB7XG4gICAgICAgICAgICB2YXIgXG4gICAgICAgICAgICAgICAgYWxwaGExID0gKCh0aGF0LmRhdGFbcGl4SW5kZXggKyBBTFBIQV9CWVRFX09GRlNFVF0gKiB0aGF0LmFscGhhKSAvIDEwMCkgfCAwO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoYWxwaGExID09IDApIHtcbiAgICAgICAgICAgICAgICBwaXhJbmRleCArPSBCWVRFU19QRVJfUElYRUw7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgIGludkFscGhhMSA9IGFscGhhMSBeIDB4ZmY7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgMzsgaSsrLCBwaXhJbmRleCsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIFxuICAgICAgICAgICAgICAgICAgICBjb2xvcjEgPSB0aGF0LmRhdGFbcGl4SW5kZXhdLFxuICAgICAgICAgICAgICAgICAgICBjb2xvcjIgPSBmdXNpb24uZGF0YVtwaXhJbmRleF0sXG4gICAgICAgICAgICAgICAgICAgIGludkNvbG9yMSA9IGNvbG9yMSBeIDB4RkY7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgZnVzaW9uLmRhdGFbcGl4SW5kZXhdID0gXG4gICAgICAgICAgICAgICAgICAgICgoXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjIgKiBpbnZBbHBoYTEgXG4gICAgICAgICAgICAgICAgICAgICAgICArIGFscGhhMSAqIChpbnZDb2xvcjEgPT0gMCA/IDI1NSA6IE1hdGgubWluKDI1NSwgKDI1NSAqIGNvbG9yMiAvIGludkNvbG9yMSkgfCAwKSlcbiAgICAgICAgICAgICAgICAgICAgKSAvIDI1NSkgfCAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcGl4SW5kZXgrKzsgLy8gQWxwaGEgc3RheXMgdGhlIHNhbWVcbiAgICAgICAgfVxuICAgIH1cbn07XG5cbi8vIEJ1cm4gTW9kZVxuLy9cbi8vIEMgPSAoYWEqKDEtYWIpKkEgKyAoMS1hYSkqYWIqQiArIGFhKmFiKigxLSgxLUIpL0EpKSAvIChhYSArIGFiIC0gYWEqYWIpXG5cbkNQQmxlbmQucHJvdG90eXBlLmZ1c2lvbldpdGhCdXJuRnVsbEFscGhhID0gZnVuY3Rpb24odGhhdCwgZnVzaW9uLCByZWN0KSB7XG4gICAgdmFyXG4gICAgICAgIHlTdHJpZGUgPSAodGhhdC53aWR0aCAtIHJlY3QuZ2V0V2lkdGgoKSkgKiBCWVRFU19QRVJfUElYRUwsXG4gICAgICAgIHBpeEluZGV4ID0gdGhhdC5vZmZzZXRPZlBpeGVsKHJlY3QubGVmdCwgcmVjdC50b3ApO1xuXG4gICAgZm9yICh2YXIgeSA9IHJlY3QudG9wOyB5IDwgcmVjdC5ib3R0b207IHkrKywgcGl4SW5kZXggKz0geVN0cmlkZSkge1xuICAgICAgICBmb3IgKHZhciB4ID0gcmVjdC5sZWZ0OyB4IDwgcmVjdC5yaWdodDsgeCsrKSB7XG4gICAgICAgICAgICB2YXIgXG4gICAgICAgICAgICAgICAgYWxwaGExID0gKCh0aGF0LmRhdGFbcGl4SW5kZXggKyBBTFBIQV9CWVRFX09GRlNFVF0gKiB0aGF0LmFscGhhKSAvIDEwMCkgfCAwO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoYWxwaGExID09IDApIHtcbiAgICAgICAgICAgICAgICBwaXhJbmRleCArPSBCWVRFU19QRVJfUElYRUw7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgIGFscGhhMiA9ICgoZnVzaW9uLmRhdGFbcGl4SW5kZXggKyBBTFBIQV9CWVRFX09GRlNFVF0gKiBmdXNpb24uYWxwaGEpIC8gMTAwKSB8IDAsXG4gICAgICAgICAgICAgICAgbmV3QWxwaGEgPSAoYWxwaGExICsgYWxwaGEyIC0gYWxwaGExICogYWxwaGEyIC8gMjU1KSB8IDA7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChuZXdBbHBoYSA+IDApIHtcbiAgICAgICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICAgICAgYWxwaGExMiA9IChhbHBoYTEgKiBhbHBoYTIgLyAyNTUpIHwgMCxcbiAgICAgICAgICAgICAgICAgICAgYWxwaGExbjIgPSAoYWxwaGExICogKGFscGhhMiBeIDB4ZmYpIC8gMjU1KSB8IDAsXG4gICAgICAgICAgICAgICAgICAgIGFscGhhbjEyID0gKChhbHBoYTEgXiAweGZmKSAqIGFscGhhMiAvIDI1NSkgfCAwO1xuXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAzOyBpKyssIHBpeEluZGV4KyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIFxuICAgICAgICAgICAgICAgICAgICAgICAgY29sb3IxID0gdGhhdC5kYXRhW3BpeEluZGV4XSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yMiA9IGZ1c2lvbi5kYXRhW3BpeEluZGV4XSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGludkNvbG9yMiA9IGNvbG9yMiBeIDB4RkY7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBmdXNpb24uZGF0YVtwaXhJbmRleF0gPSBcbiAgICAgICAgICAgICAgICAgICAgICAgICgoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3IxICogYWxwaGExbjIgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKyBjb2xvcjIgKiBhbHBoYW4xMiBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICArIGFscGhhMTIgKiAoY29sb3IxID09IDAgPyAwIDogTWF0aC5taW4oMjU1LCAyNTUgKiBpbnZDb2xvcjIgLyBjb2xvcjEpIF4gMHhmZilcbiAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgIC8gbmV3QWxwaGEpIHwgMDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZnVzaW9uLmRhdGFbcGl4SW5kZXgrK10gPSBuZXdBbHBoYTsgIFxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBwaXhJbmRleCArPSBCWVRFU19QRVJfUElYRUw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgZnVzaW9uLmFscGhhID0gMTAwO1xufTtcblxuLy8gV2hlbiBmdXNpb24gaXMgb3BhcXVlXG5DUEJsZW5kLnByb3RvdHlwZS5mdXNpb25XaXRoQnVybiA9IGZ1bmN0aW9uKHRoYXQsIGZ1c2lvbiwgcmVjdCkge1xuICAgIHZhclxuICAgICAgICB5U3RyaWRlID0gKCh0aGF0LndpZHRoIC0gcmVjdC5nZXRXaWR0aCgpKSAqIEJZVEVTX1BFUl9QSVhFTCkgfCAwLFxuICAgICAgICBwaXhJbmRleCA9IHRoYXQub2Zmc2V0T2ZQaXhlbChyZWN0LmxlZnQsIHJlY3QudG9wKSB8IDA7XG5cbiAgICBmb3IgKHZhciB5ID0gcmVjdC50b3A7IHkgPCByZWN0LmJvdHRvbTsgeSsrLCBwaXhJbmRleCArPSB5U3RyaWRlKSB7XG4gICAgICAgIGZvciAodmFyIHggPSByZWN0LmxlZnQ7IHggPCByZWN0LnJpZ2h0OyB4KyspIHtcbiAgICAgICAgICAgIHZhciBcbiAgICAgICAgICAgICAgICBhbHBoYTEgPSAoKHRoYXQuZGF0YVtwaXhJbmRleCArIEFMUEhBX0JZVEVfT0ZGU0VUXSAqIHRoYXQuYWxwaGEpIC8gMTAwKSB8IDA7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChhbHBoYTEgPT0gMCkge1xuICAgICAgICAgICAgICAgIHBpeEluZGV4ICs9IEJZVEVTX1BFUl9QSVhFTDtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgaW52QWxwaGExID0gYWxwaGExIF4gMHhmZjtcblxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAzOyBpKyssIHBpeEluZGV4KyspIHtcbiAgICAgICAgICAgICAgICB2YXIgXG4gICAgICAgICAgICAgICAgICAgIGNvbG9yMSA9IHRoYXQuZGF0YVtwaXhJbmRleF0sXG4gICAgICAgICAgICAgICAgICAgIGNvbG9yMiA9IGZ1c2lvbi5kYXRhW3BpeEluZGV4XSxcbiAgICAgICAgICAgICAgICAgICAgaW52Q29sb3IyID0gY29sb3IyIF4gMHhGRjtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBmdXNpb24uZGF0YVtwaXhJbmRleF0gPSBcbiAgICAgICAgICAgICAgICAgICAgKChcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yMiAqIGludkFscGhhMSBcbiAgICAgICAgICAgICAgICAgICAgICAgICsgYWxwaGExICogKGNvbG9yMSA9PSAwID8gMCA6IE1hdGgubWluKDI1NSwgMjU1ICogaW52Q29sb3IyIC8gY29sb3IxKSBeIDB4ZmYpXG4gICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgLyAyNTUpIHwgMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHBpeEluZGV4Kys7IC8vIEFscGhhIHN0YXlzIHRoZSBzYW1lXG4gICAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgZnVzaW9uLmFscGhhID0gMTAwO1xufTtcblxuLy8gT3ZlcmxheSBNb2RlXG4vLyBJZiBCIDw9IDAuNSBDID0gKEEqYWEqKDEtYWIpICsgQiphYiooMS1hYSkgKyBhYSphYiooMipBKkIpIC8gKGFhICsgYWIgLSBhYSphYilcbi8vIElmIEIgPiAwLjUgQyA9IChBKmFhKigxLWFiKSArIEIqYWIqKDEtYWEpICsgYWEqYWIqKDEgLSAyKigxLUEpKigxLUIpKSAvIChhYSArIGFiIC0gYWEqYWIpXG5cbkNQQmxlbmQucHJvdG90eXBlLmZ1c2lvbldpdGhPdmVybGF5RnVsbEFscGhhID0gZnVuY3Rpb24odGhhdCwgZnVzaW9uLCByZWN0KSB7XG4gICAgdmFyXG4gICAgICAgIHlTdHJpZGUgPSAodGhhdC53aWR0aCAtIHJlY3QuZ2V0V2lkdGgoKSkgKiBCWVRFU19QRVJfUElYRUwsXG4gICAgICAgIHBpeEluZGV4ID0gdGhhdC5vZmZzZXRPZlBpeGVsKHJlY3QubGVmdCwgcmVjdC50b3ApO1xuXG4gICAgZm9yICh2YXIgeSA9IHJlY3QudG9wOyB5IDwgcmVjdC5ib3R0b207IHkrKywgcGl4SW5kZXggKz0geVN0cmlkZSkge1xuICAgICAgICBmb3IgKHZhciB4ID0gcmVjdC5sZWZ0OyB4IDwgcmVjdC5yaWdodDsgeCsrKSB7XG4gICAgICAgICAgICB2YXIgXG4gICAgICAgICAgICAgICAgYWxwaGExID0gKCh0aGF0LmRhdGFbcGl4SW5kZXggKyBBTFBIQV9CWVRFX09GRlNFVF0gKiB0aGF0LmFscGhhKSAvIDEwMCkgfCAwO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoYWxwaGExID09IDApIHtcbiAgICAgICAgICAgICAgICBwaXhJbmRleCArPSBCWVRFU19QRVJfUElYRUw7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgIGFscGhhMiA9ICgoZnVzaW9uLmRhdGFbcGl4SW5kZXggKyBBTFBIQV9CWVRFX09GRlNFVF0gKiBmdXNpb24uYWxwaGEpIC8gMTAwKSB8IDAsXG4gICAgICAgICAgICAgICAgbmV3QWxwaGEgPSAoYWxwaGExICsgYWxwaGEyIC0gYWxwaGExICogYWxwaGEyIC8gMjU1KSB8IDA7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChuZXdBbHBoYSA+IDApIHtcbiAgICAgICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICAgICAgYWxwaGExMiA9IChhbHBoYTEgKiBhbHBoYTIgLyAyNTUpIHwgMCxcbiAgICAgICAgICAgICAgICAgICAgYWxwaGExbjIgPSAoYWxwaGExICogKGFscGhhMiBeIDB4ZmYpIC8gMjU1KSB8IDAsXG4gICAgICAgICAgICAgICAgICAgIGFscGhhbjEyID0gKChhbHBoYTEgXiAweGZmKSAqIGFscGhhMiAvIDI1NSkgfCAwO1xuXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAzOyBpKyssIHBpeEluZGV4KyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIFxuICAgICAgICAgICAgICAgICAgICAgICAgYzEgPSB0aGF0LmRhdGFbcGl4SW5kZXhdLFxuICAgICAgICAgICAgICAgICAgICAgICAgYzIgPSBmdXNpb24uZGF0YVtwaXhJbmRleF07XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBmdXNpb24uZGF0YVtwaXhJbmRleF0gPSBcbiAgICAgICAgICAgICAgICAgICAgICAgICgoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxwaGExbjIgKiBjMSBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICArIGFscGhhbjEyICogYzIgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKyAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGMyIDw9IDEyN1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyAoYWxwaGExMiAqIDIgKiBjMSAqIGMyIC8gMjU1KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiAoYWxwaGExMiAqICgoMiAqIChjMSBeIDB4ZmYpICogKGMyIF4gMHhmZikgLyAyNTUpIF4gMHhmZikpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgKSAvIG5ld0FscGhhKSB8IDA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZ1c2lvbi5kYXRhW3BpeEluZGV4KytdID0gbmV3QWxwaGE7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHBpeEluZGV4ICs9IEJZVEVTX1BFUl9QSVhFTDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBcbiAgICBmdXNpb24uYWxwaGEgPSAxMDA7XG59O1xuXG4vLyBXaGVuIGZ1c2lvbiBpcyBvcGFxdWVcbkNQQmxlbmQucHJvdG90eXBlLmZ1c2lvbldpdGhPdmVybGF5ID0gZnVuY3Rpb24odGhhdCwgZnVzaW9uLCByZWN0KSB7XG4gICAgdmFyXG4gICAgICAgIHlTdHJpZGUgPSAoKHRoYXQud2lkdGggLSByZWN0LmdldFdpZHRoKCkpICogQllURVNfUEVSX1BJWEVMKSB8IDAsXG4gICAgICAgIHBpeEluZGV4ID0gdGhhdC5vZmZzZXRPZlBpeGVsKHJlY3QubGVmdCwgcmVjdC50b3ApIHwgMDtcblxuICAgIGZvciAodmFyIHkgPSByZWN0LnRvcDsgeSA8IHJlY3QuYm90dG9tOyB5KyssIHBpeEluZGV4ICs9IHlTdHJpZGUpIHtcbiAgICAgICAgZm9yICh2YXIgeCA9IHJlY3QubGVmdDsgeCA8IHJlY3QucmlnaHQ7IHgrKykge1xuICAgICAgICAgICAgdmFyIFxuICAgICAgICAgICAgICAgIGFscGhhMSA9ICgodGhhdC5kYXRhW3BpeEluZGV4ICsgQUxQSEFfQllURV9PRkZTRVRdICogdGhhdC5hbHBoYSkgLyAxMDApIHwgMDtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKGFscGhhMSA9PSAwKSB7XG4gICAgICAgICAgICAgICAgcGl4SW5kZXggKz0gQllURVNfUEVSX1BJWEVMO1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICBhbHBoYW4xMiA9IGFscGhhMSBeIDB4ZmY7XG5cbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgMzsgaSsrLCBwaXhJbmRleCsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIFxuICAgICAgICAgICAgICAgICAgICBjMSA9IHRoYXQuZGF0YVtwaXhJbmRleF0sXG4gICAgICAgICAgICAgICAgICAgIGMyID0gZnVzaW9uLmRhdGFbcGl4SW5kZXhdO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGZ1c2lvbi5kYXRhW3BpeEluZGV4XSA9IFxuICAgICAgICAgICAgICAgICAgICAoKFxuICAgICAgICAgICAgICAgICAgICAgICAgYWxwaGFuMTIgKiBjMiBcbiAgICAgICAgICAgICAgICAgICAgICAgICsgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGMyIDw9IDEyN1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IChhbHBoYTEgKiAyICogYzEgKiBjMiAvIDI1NSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiAoYWxwaGExICogKCgyICogKGMxIF4gMHhmZikgKiAoYzIgXiAweGZmKSAvIDI1NSkgXiAweGZmKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgKSAvIDI1NSkgfCAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcGl4SW5kZXgrKzsgLy8gQWxwaGEgc3RheXMgMjU1XG4gICAgICAgIH1cbiAgICB9XG59O1xuXG4vLyBIYXJkIExpZ2h0IE1vZGUgKHNhbWUgYXMgT3ZlcmxheSB3aXRoIEEgYW5kIEIgc3dhcHBlZClcbi8vIElmIEEgPD0gMC41IEMgPSAoQSphYSooMS1hYikgKyBCKmFiKigxLWFhKSArIGFhKmFiKigyKkEqQikgLyAoYWEgKyBhYiAtIGFhKmFiKVxuLy8gSWYgQSA+IDAuNSBDID0gKEEqYWEqKDEtYWIpICsgQiphYiooMS1hYSkgKyBhYSphYiooMSAtIDIqKDEtQSkqKDEtQikpIC8gKGFhICsgYWIgLSBhYSphYilcblxuQ1BCbGVuZC5wcm90b3R5cGUuZnVzaW9uV2l0aEhhcmRMaWdodEZ1bGxBbHBoYSA9IGZ1bmN0aW9uKHRoYXQsIGZ1c2lvbiwgcmVjdCkge1xuICAgIHZhclxuICAgICAgICB5U3RyaWRlID0gKHRoYXQud2lkdGggLSByZWN0LmdldFdpZHRoKCkpICogQllURVNfUEVSX1BJWEVMLFxuICAgICAgICBwaXhJbmRleCA9IHRoYXQub2Zmc2V0T2ZQaXhlbChyZWN0LmxlZnQsIHJlY3QudG9wKTtcblxuICAgIGZvciAodmFyIHkgPSByZWN0LnRvcDsgeSA8IHJlY3QuYm90dG9tOyB5KyssIHBpeEluZGV4ICs9IHlTdHJpZGUpIHtcbiAgICAgICAgZm9yICh2YXIgeCA9IHJlY3QubGVmdDsgeCA8IHJlY3QucmlnaHQ7IHgrKykge1xuICAgICAgICAgICAgdmFyIFxuICAgICAgICAgICAgICAgIGFscGhhMSA9ICgodGhhdC5kYXRhW3BpeEluZGV4ICsgQUxQSEFfQllURV9PRkZTRVRdICogdGhhdC5hbHBoYSkgLyAxMDApIHwgMDtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKGFscGhhMSA9PSAwKSB7XG4gICAgICAgICAgICAgICAgcGl4SW5kZXggKz0gQllURVNfUEVSX1BJWEVMO1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICBhbHBoYTIgPSAoKGZ1c2lvbi5kYXRhW3BpeEluZGV4ICsgQUxQSEFfQllURV9PRkZTRVRdICogZnVzaW9uLmFscGhhKSAvIDEwMCkgfCAwLFxuICAgICAgICAgICAgICAgIG5ld0FscGhhID0gKGFscGhhMSArIGFscGhhMiAtIGFscGhhMSAqIGFscGhhMiAvIDI1NSkgfCAwO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAobmV3QWxwaGEgPiAwKSB7XG4gICAgICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgICAgIGFscGhhMTIgPSAoYWxwaGExICogYWxwaGEyIC8gMjU1KSB8IDAsXG4gICAgICAgICAgICAgICAgICAgIGFscGhhMW4yID0gKGFscGhhMSAqIChhbHBoYTIgXiAweGZmKSAvIDI1NSkgfCAwLFxuICAgICAgICAgICAgICAgICAgICBhbHBoYW4xMiA9ICgoYWxwaGExIF4gMHhmZikgKiBhbHBoYTIgLyAyNTUpIHwgMDtcblxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgMzsgaSsrLCBwaXhJbmRleCsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBcbiAgICAgICAgICAgICAgICAgICAgICAgIGMxID0gdGhhdC5kYXRhW3BpeEluZGV4XSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGMyID0gZnVzaW9uLmRhdGFbcGl4SW5kZXhdO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgZnVzaW9uLmRhdGFbcGl4SW5kZXhdID0gXG4gICAgICAgICAgICAgICAgICAgICAgICAoKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFscGhhMW4yICogYzEgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKyBhbHBoYW4xMiAqIGMyIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjMSA8PSAxMjdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gKGFscGhhMTIgKiAyICogYzEgKiBjMiAvIDI1NSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogKGFscGhhMTIgKiAoKDIgKiAoYzEgXiAweGZmKSAqIChjMiBeIDB4ZmYpIC8gMjU1KSBeIDB4ZmYpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICkgLyBuZXdBbHBoYSkgfCAwO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBmdXNpb24uZGF0YVtwaXhJbmRleCsrXSA9IG5ld0FscGhhO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBwaXhJbmRleCArPSBCWVRFU19QRVJfUElYRUw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgZnVzaW9uLmFscGhhID0gMTAwO1xufTtcblxuLy8gU29mdCBMaWdodCBNb2RlXG4vLyBBIDwgMC41ID0+IEMgPSAoMipBIC0gMSkgKiAoQiAtIEJeMikgKyBCXG4vLyBBID4gMC41ID0+IEMgPSAoMipBIC0gMSkgKiAoc3FydChCKSAtIEIpICsgQlxuXG5DUEJsZW5kLnByb3RvdHlwZS5mdXNpb25XaXRoU29mdExpZ2h0RnVsbEFscGhhID0gZnVuY3Rpb24odGhhdCwgZnVzaW9uLCByZWN0KSB7XG4gICAgdmFyXG4gICAgICAgIHlTdHJpZGUgPSAodGhhdC53aWR0aCAtIHJlY3QuZ2V0V2lkdGgoKSkgKiBCWVRFU19QRVJfUElYRUwsXG4gICAgICAgIHBpeEluZGV4ID0gdGhhdC5vZmZzZXRPZlBpeGVsKHJlY3QubGVmdCwgcmVjdC50b3ApO1xuXG4gICAgZm9yICh2YXIgeSA9IHJlY3QudG9wOyB5IDwgcmVjdC5ib3R0b207IHkrKywgcGl4SW5kZXggKz0geVN0cmlkZSkge1xuICAgICAgICBmb3IgKHZhciB4ID0gcmVjdC5sZWZ0OyB4IDwgcmVjdC5yaWdodDsgeCsrKSB7XG4gICAgICAgICAgICB2YXIgXG4gICAgICAgICAgICAgICAgYWxwaGExID0gKCh0aGF0LmRhdGFbcGl4SW5kZXggKyBBTFBIQV9CWVRFX09GRlNFVF0gKiB0aGF0LmFscGhhKSAvIDEwMCkgfCAwO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoYWxwaGExID09IDApIHtcbiAgICAgICAgICAgICAgICBwaXhJbmRleCArPSBCWVRFU19QRVJfUElYRUw7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgIGFscGhhMiA9ICgoZnVzaW9uLmRhdGFbcGl4SW5kZXggKyBBTFBIQV9CWVRFX09GRlNFVF0gKiBmdXNpb24uYWxwaGEpIC8gMTAwKSB8IDAsXG4gICAgICAgICAgICAgICAgbmV3QWxwaGEgPSAoYWxwaGExICsgYWxwaGEyIC0gYWxwaGExICogYWxwaGEyIC8gMjU1KSB8IDA7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChuZXdBbHBoYSA+IDApIHtcbiAgICAgICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICAgICAgYWxwaGExMiA9IChhbHBoYTEgKiBhbHBoYTIgLyAyNTUpIHwgMCxcbiAgICAgICAgICAgICAgICAgICAgYWxwaGExbjIgPSAoYWxwaGExICogKGFscGhhMiBeIDB4ZmYpIC8gMjU1KSB8IDAsXG4gICAgICAgICAgICAgICAgICAgIGFscGhhbjEyID0gKChhbHBoYTEgXiAweGZmKSAqIGFscGhhMiAvIDI1NSkgfCAwO1xuXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAzOyBpKyssIHBpeEluZGV4KyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIFxuICAgICAgICAgICAgICAgICAgICAgICAgYzEgPSB0aGF0LmRhdGFbcGl4SW5kZXhdLFxuICAgICAgICAgICAgICAgICAgICAgICAgYzIgPSBmdXNpb24uZGF0YVtwaXhJbmRleF07XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBmdXNpb24uZGF0YVtwaXhJbmRleF0gPSBcbiAgICAgICAgICAgICAgICAgICAgICAgICgoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxwaGExbjIgKiBjMSBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICArIGFscGhhbjEyICogYzIgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKyAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGMxIDw9IDEyN1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBhbHBoYTEyICogKCgyICogYzEgLSAyNTUpICogdGhhdC5zb2Z0TGlnaHRMVVRTcXVhcmVbYzJdIC8gMjU1ICsgYzIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IGFscGhhMTIgKiAoKDIgKiBjMSAtIDI1NSkgKiB0aGF0LnNvZnRMaWdodExVVFNxdWFyZVJvb3RbYzJdIC8gMjU1ICsgYzIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgKSAvIG5ld0FscGhhKSB8IDA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZ1c2lvbi5kYXRhW3BpeEluZGV4KytdID0gbmV3QWxwaGE7XG5cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcGl4SW5kZXggKz0gQllURVNfUEVSX1BJWEVMO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIGZ1c2lvbi5hbHBoYSA9IDEwMDtcbn07XG5cbi8vIFZpdmlkIExpZ2h0IE1vZGVcbi8vIEEgPCAwLjUgPT4gQyA9IDEgLSAoMS1CKSAvICgyKkEpXG4vLyBBID4gMC41ID0+IEMgPSBCIC8gKDIqKDEtQSkpXG5cbkNQQmxlbmQucHJvdG90eXBlLmZ1c2lvbldpdGhWaXZpZExpZ2h0RnVsbEFscGhhID0gZnVuY3Rpb24odGhhdCwgZnVzaW9uLCByZWN0KSB7XG4gICAgdmFyXG4gICAgICAgIHlTdHJpZGUgPSAodGhhdC53aWR0aCAtIHJlY3QuZ2V0V2lkdGgoKSkgKiBCWVRFU19QRVJfUElYRUwsXG4gICAgICAgIHBpeEluZGV4ID0gdGhhdC5vZmZzZXRPZlBpeGVsKHJlY3QubGVmdCwgcmVjdC50b3ApO1xuXG4gICAgZm9yICh2YXIgeSA9IHJlY3QudG9wOyB5IDwgcmVjdC5ib3R0b207IHkrKywgcGl4SW5kZXggKz0geVN0cmlkZSkge1xuICAgICAgICBmb3IgKHZhciB4ID0gcmVjdC5sZWZ0OyB4IDwgcmVjdC5yaWdodDsgeCsrKSB7XG4gICAgICAgICAgICB2YXIgXG4gICAgICAgICAgICAgICAgYWxwaGExID0gKCh0aGF0LmRhdGFbcGl4SW5kZXggKyBBTFBIQV9CWVRFX09GRlNFVF0gKiB0aGF0LmFscGhhKSAvIDEwMCkgfCAwO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoYWxwaGExID09IDApIHtcbiAgICAgICAgICAgICAgICBwaXhJbmRleCArPSBCWVRFU19QRVJfUElYRUw7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgIGFscGhhMiA9ICgoZnVzaW9uLmRhdGFbcGl4SW5kZXggKyBBTFBIQV9CWVRFX09GRlNFVF0gKiBmdXNpb24uYWxwaGEpIC8gMTAwKSB8IDAsXG4gICAgICAgICAgICAgICAgbmV3QWxwaGEgPSAoYWxwaGExICsgYWxwaGEyIC0gYWxwaGExICogYWxwaGEyIC8gMjU1KSB8IDA7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChuZXdBbHBoYSA+IDApIHtcbiAgICAgICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICAgICAgYWxwaGExMiA9IChhbHBoYTEgKiBhbHBoYTIgLyAyNTUpIHwgMCxcbiAgICAgICAgICAgICAgICAgICAgYWxwaGExbjIgPSAoYWxwaGExICogKGFscGhhMiBeIDB4ZmYpIC8gMjU1KSB8IDAsXG4gICAgICAgICAgICAgICAgICAgIGFscGhhbjEyID0gKChhbHBoYTEgXiAweGZmKSAqIGFscGhhMiAvIDI1NSkgfCAwO1xuXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAzOyBpKyssIHBpeEluZGV4KyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIFxuICAgICAgICAgICAgICAgICAgICAgICAgYzEgPSB0aGF0LmRhdGFbcGl4SW5kZXhdLFxuICAgICAgICAgICAgICAgICAgICAgICAgYzIgPSBmdXNpb24uZGF0YVtwaXhJbmRleF07XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBmdXNpb24uZGF0YVtwaXhJbmRleF0gPSBcbiAgICAgICAgICAgICAgICAgICAgICAgICgoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxwaGExbjIgKiBjMSBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICArIGFscGhhbjEyICogYzIgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKyAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGMxIDw9IDEyN1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyAoYWxwaGExMiAqICgoYzEgPT0gMCkgPyAwIDogMjU1IC0gTWF0aC5taW4oMjU1LCAoMjU1IC0gYzIpICogMjU1IC8gKDIgKiBjMSkpKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogKGFscGhhMTIgKiAoYzEgPT0gMjU1ID8gMjU1IDogTWF0aC5taW4oMjU1LCBjMiAqIDI1NSAvICgyICogKDI1NSAtIGMxKSkpKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICApIC8gbmV3QWxwaGEpIHwgMDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZnVzaW9uLmRhdGFbcGl4SW5kZXgrK10gPSBuZXdBbHBoYTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcGl4SW5kZXggKz0gQllURVNfUEVSX1BJWEVMO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIGZ1c2lvbi5hbHBoYSA9IDEwMDtcbn07XG5cbi8vIExpbmVhciBMaWdodCBNb2RlXG4vLyBDID0gQiArIDIqQSAtMVxuXG5DUEJsZW5kLnByb3RvdHlwZS5mdXNpb25XaXRoTGluZWFyTGlnaHRGdWxsQWxwaGEgPSBmdW5jdGlvbih0aGF0LCBmdXNpb24sIHJlY3QpIHtcbiAgICB2YXJcbiAgICAgICAgeVN0cmlkZSA9ICh0aGF0LndpZHRoIC0gcmVjdC5nZXRXaWR0aCgpKSAqIEJZVEVTX1BFUl9QSVhFTCxcbiAgICAgICAgcGl4SW5kZXggPSB0aGF0Lm9mZnNldE9mUGl4ZWwocmVjdC5sZWZ0LCByZWN0LnRvcCk7XG5cbiAgICBmb3IgKHZhciB5ID0gcmVjdC50b3A7IHkgPCByZWN0LmJvdHRvbTsgeSsrLCBwaXhJbmRleCArPSB5U3RyaWRlKSB7XG4gICAgICAgIGZvciAodmFyIHggPSByZWN0LmxlZnQ7IHggPCByZWN0LnJpZ2h0OyB4KyspIHtcbiAgICAgICAgICAgIHZhciBcbiAgICAgICAgICAgICAgICBhbHBoYTEgPSAoKHRoYXQuZGF0YVtwaXhJbmRleCArIEFMUEhBX0JZVEVfT0ZGU0VUXSAqIHRoYXQuYWxwaGEpIC8gMTAwKSB8IDA7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChhbHBoYTEgPT0gMCkge1xuICAgICAgICAgICAgICAgIHBpeEluZGV4ICs9IEJZVEVTX1BFUl9QSVhFTDtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgYWxwaGEyID0gKChmdXNpb24uZGF0YVtwaXhJbmRleCArIEFMUEhBX0JZVEVfT0ZGU0VUXSAqIGZ1c2lvbi5hbHBoYSkgLyAxMDApIHwgMCxcbiAgICAgICAgICAgICAgICBuZXdBbHBoYSA9IChhbHBoYTEgKyBhbHBoYTIgLSBhbHBoYTEgKiBhbHBoYTIgLyAyNTUpIHwgMDtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKG5ld0FscGhhID4gMCkge1xuICAgICAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgICAgICBhbHBoYTEyID0gKGFscGhhMSAqIGFscGhhMiAvIDI1NSkgfCAwLFxuICAgICAgICAgICAgICAgICAgICBhbHBoYTFuMiA9IChhbHBoYTEgKiAoYWxwaGEyIF4gMHhmZikgLyAyNTUpIHwgMCxcbiAgICAgICAgICAgICAgICAgICAgYWxwaGFuMTIgPSAoKGFscGhhMSBeIDB4ZmYpICogYWxwaGEyIC8gMjU1KSB8IDA7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgMzsgaSsrLCBwaXhJbmRleCsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBcbiAgICAgICAgICAgICAgICAgICAgICAgIGMxID0gdGhhdC5kYXRhW3BpeEluZGV4XSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGMyID0gZnVzaW9uLmRhdGFbcGl4SW5kZXhdO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgZnVzaW9uLmRhdGFbcGl4SW5kZXhdID0gXG4gICAgICAgICAgICAgICAgICAgICAgICAoKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFscGhhMW4yICogYzEgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKyBhbHBoYW4xMiAqIGMyIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgYWxwaGExMiAqIE1hdGgubWluKDI1NSwgTWF0aC5tYXgoMCwgYzIgKyAyICogYzEgLSAyNTUpKVxuICAgICAgICAgICAgICAgICAgICAgICAgKSAvIG5ld0FscGhhKSB8IDA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZ1c2lvbi5kYXRhW3BpeEluZGV4KytdID0gbmV3QWxwaGE7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHBpeEluZGV4ICs9IEJZVEVTX1BFUl9QSVhFTDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBcbiAgICBmdXNpb24uYWxwaGEgPSAxMDA7XG59O1xuXG4vLyBQaW4gTGlnaHQgTW9kZVxuLy8gQiA+IDIqQSA9PiBDID0gMipBXG4vLyBCIDwgMipBLTEgPT4gQyA9IDIqQS0xXG4vLyBlbHNlID0+IEMgPSBCXG5cbkNQQmxlbmQucHJvdG90eXBlLmZ1c2lvbldpdGhQaW5MaWdodEZ1bGxBbHBoYSA9IGZ1bmN0aW9uKHRoYXQsIGZ1c2lvbiwgcmVjdCkge1xuICAgIHZhclxuICAgICAgICB5U3RyaWRlID0gKHRoYXQud2lkdGggLSByZWN0LmdldFdpZHRoKCkpICogQllURVNfUEVSX1BJWEVMLFxuICAgICAgICBwaXhJbmRleCA9IHRoYXQub2Zmc2V0T2ZQaXhlbChyZWN0LmxlZnQsIHJlY3QudG9wKTtcblxuICAgIGZvciAodmFyIHkgPSByZWN0LnRvcDsgeSA8IHJlY3QuYm90dG9tOyB5KyssIHBpeEluZGV4ICs9IHlTdHJpZGUpIHtcbiAgICAgICAgZm9yICh2YXIgeCA9IHJlY3QubGVmdDsgeCA8IHJlY3QucmlnaHQ7IHgrKykge1xuICAgICAgICAgICAgdmFyIFxuICAgICAgICAgICAgICAgIGFscGhhMSA9ICgodGhhdC5kYXRhW3BpeEluZGV4ICsgQUxQSEFfQllURV9PRkZTRVRdICogdGhhdC5hbHBoYSkgLyAxMDApIHwgMDtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKGFscGhhMSA9PSAwKSB7XG4gICAgICAgICAgICAgICAgcGl4SW5kZXggKz0gQllURVNfUEVSX1BJWEVMO1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICBhbHBoYTIgPSAoKGZ1c2lvbi5kYXRhW3BpeEluZGV4ICsgQUxQSEFfQllURV9PRkZTRVRdICogZnVzaW9uLmFscGhhKSAvIDEwMCkgfCAwLFxuICAgICAgICAgICAgICAgIG5ld0FscGhhID0gKGFscGhhMSArIGFscGhhMiAtIGFscGhhMSAqIGFscGhhMiAvIDI1NSkgfCAwO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAobmV3QWxwaGEgPiAwKSB7XG4gICAgICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgICAgIGFscGhhMTIgPSAoYWxwaGExICogYWxwaGEyIC8gMjU1KSB8IDAsXG4gICAgICAgICAgICAgICAgICAgIGFscGhhMW4yID0gKGFscGhhMSAqIChhbHBoYTIgXiAweGZmKSAvIDI1NSkgfCAwLFxuICAgICAgICAgICAgICAgICAgICBhbHBoYW4xMiA9ICgoYWxwaGExIF4gMHhmZikgKiBhbHBoYTIgLyAyNTUpIHwgMDtcblxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgMzsgaSsrLCBwaXhJbmRleCsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBcbiAgICAgICAgICAgICAgICAgICAgICAgIGMxID0gdGhhdC5kYXRhW3BpeEluZGV4XSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGMyID0gZnVzaW9uLmRhdGFbcGl4SW5kZXhdLFxuICAgICAgICAgICAgICAgICAgICAgICAgYzMgPSAoYzIgPj0gMiAqIGMxKSA/ICgyICogYzEpIDogKGMyIDw9IDIgKiBjMSAtIDI1NSkgPyAoMiAqIGMxIC0gMjU1KSA6IGMyO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgZnVzaW9uLmRhdGFbcGl4SW5kZXhdID0gKChcbiAgICAgICAgICAgICAgICAgICAgICAgIGFscGhhMW4yICogYzEgXG4gICAgICAgICAgICAgICAgICAgICAgICArIGFscGhhbjEyICogYzIgXG4gICAgICAgICAgICAgICAgICAgICAgICArIGFscGhhMTIgKiBjM1xuICAgICAgICAgICAgICAgICAgICApIC8gbmV3QWxwaGEpIHwgMDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZnVzaW9uLmRhdGFbcGl4SW5kZXgrK10gPSBuZXdBbHBoYTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcGl4SW5kZXggKz0gQllURVNfUEVSX1BJWEVMO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIGZ1c2lvbi5hbHBoYSA9IDEwMDtcbn07IiwiLypcbiAgICBDaGlja2VuUGFpbnRcbiAgICBcbiAgICBDaGlja2VuUGFpbnQgaXMgYSB0cmFuc2xhdGlvbiBvZiBDaGliaVBhaW50IGZyb20gSmF2YSB0byBKYXZhU2NyaXB0XG4gICAgYnkgTmljaG9sYXMgU2hlcmxvY2sgLyBDaGlja2VuIFNtb290aGllLlxuICAgIFxuICAgIENoaWJpUGFpbnQgaXMgQ29weXJpZ2h0IChjKSAyMDA2LTIwMDggTWFyYyBTY2hlZmVyXG5cbiAgICBDaGlja2VuUGFpbnQgaXMgZnJlZSBzb2Z0d2FyZTogeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yIG1vZGlmeVxuICAgIGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgYXMgcHVibGlzaGVkIGJ5XG4gICAgdGhlIEZyZWUgU29mdHdhcmUgRm91bmRhdGlvbiwgZWl0aGVyIHZlcnNpb24gMyBvZiB0aGUgTGljZW5zZSwgb3JcbiAgICAoYXQgeW91ciBvcHRpb24pIGFueSBsYXRlciB2ZXJzaW9uLlxuXG4gICAgQ2hpY2tlblBhaW50IGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsXG4gICAgYnV0IFdJVEhPVVQgQU5ZIFdBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2ZcbiAgICBNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuICBTZWUgdGhlXG4gICAgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy5cblxuICAgIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXG4gICAgYWxvbmcgd2l0aCBDaGlja2VuUGFpbnQuIElmIG5vdCwgc2VlIDxodHRwOi8vd3d3LmdudS5vcmcvbGljZW5zZXMvPi5cbiovXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIENQQnJ1c2hJbmZvKHByb3BlcnRpZXMpIHtcbiAgICAvLyBTZXQgYnJ1c2ggc2V0dGluZyBmaWVsZHMgd2l0aCBkZWZhdWx0IHZhbHVlcywgdGhlbiBhcHBseSB0aGUgc3VwcGxpZWQgJ3Byb3BlcnRpZXMnIG9uIHRvcFxuICAgIGZvciAodmFyIHByb3BOYW1lIGluIENQQnJ1c2hJbmZvLkRFRkFVTFRTKSB7XG4gICAgICAgIGlmIChDUEJydXNoSW5mby5ERUZBVUxUUy5oYXNPd25Qcm9wZXJ0eShwcm9wTmFtZSkpIHtcbiAgICAgICAgICAgIHRoaXNbcHJvcE5hbWVdID0gQ1BCcnVzaEluZm8uREVGQVVMVFNbcHJvcE5hbWVdO1xuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIGZvciAodmFyIHByb3BOYW1lIGluIHByb3BlcnRpZXMpIHtcbiAgICAgICAgaWYgKHByb3BlcnRpZXMuaGFzT3duUHJvcGVydHkocHJvcE5hbWUpKSB7XG4gICAgICAgICAgICB0aGlzW3Byb3BOYW1lXSA9IHByb3BlcnRpZXNbcHJvcE5hbWVdO1xuICAgICAgICB9XG4gICAgfVxufVxuXG4vLyBTdHJva2UgbW9kZXNcbkNQQnJ1c2hJbmZvLlNNX0ZSRUVIQU5EID0gMDtcbkNQQnJ1c2hJbmZvLlNNX0xJTkUgPSAxO1xuQ1BCcnVzaEluZm8uU01fQkVaSUVSID0gMjtcblxuLy8gQnJ1c2ggZGFiIHR5cGVzXG5DUEJydXNoSW5mby5CX1JPVU5EX1BJWEVMID0gMDtcbkNQQnJ1c2hJbmZvLkJfUk9VTkRfQUEgPSAxO1xuQ1BCcnVzaEluZm8uQl9ST1VORF9BSVJCUlVTSCA9IDI7XG5DUEJydXNoSW5mby5CX1NRVUFSRV9QSVhFTCA9IDM7XG5DUEJydXNoSW5mby5CX1NRVUFSRV9BQSA9IDQ7XG5cbi8vIHBhaW50aW5nIG1vZGVzXG5DUEJydXNoSW5mby5NX1BBSU5UID0gMDtcbkNQQnJ1c2hJbmZvLk1fRVJBU0UgPSAxO1xuQ1BCcnVzaEluZm8uTV9ET0RHRSA9IDI7XG5DUEJydXNoSW5mby5NX0JVUk4gPSAzO1xuQ1BCcnVzaEluZm8uTV9XQVRFUiA9IDQ7XG5DUEJydXNoSW5mby5NX0JMVVIgPSA1O1xuQ1BCcnVzaEluZm8uTV9TTVVER0UgPSA2O1xuQ1BCcnVzaEluZm8uTV9PSUwgPSA3O1xuXG5DUEJydXNoSW5mby5ERUZBVUxUUyA9IHtcbiAgICBpc0FBOiBmYWxzZSwgaXNBaXJicnVzaDogZmFsc2UsXG4gICAgbWluU3BhY2luZzogMCwgc3BhY2luZzogMCxcbiAgICBcbiAgICBwcmVzc3VyZVNpemU6IHRydWUsXG4gICAgcHJlc3N1cmVBbHBoYTogZmFsc2UsXG4gICAgcHJlc3N1cmVTY2F0dGVyaW5nOiBmYWxzZSxcbiAgICBcbiAgICB0eXBlOiAwLCBwYWludE1vZGU6IDAsXG4gICAgc3Ryb2tlTW9kZTogQ1BCcnVzaEluZm8uU01fRlJFRUhBTkQsXG4gICAgcmVzYXQ6IDEuMCwgYmxlZWQ6IDAuMCxcblxuICAgIHRleHR1cmU6IDEuMCxcbiAgICBcbiAgICAvLyBcImN1clwiIHZhbHVlcyBhcmUgY3VycmVudCBicnVzaCBzZXR0aW5ncyAob25jZSB0YWJsZXQgcHJlc3N1cmUgYW5kIHN0dWZmIGlzIGFwcGxpZWQpXG4gICAgc2l6ZTogMCwgY3VyU2l6ZTogMCxcbiAgICBhbHBoYTogMCwgY3VyQWxwaGE6IDAsXG4gICAgc2NhdHRlcmluZzogMC4wLCBjdXJTY2F0dGVyaW5nOiAwLFxuICAgIHNxdWVlemU6IDAuMCwgY3VyU3F1ZWV6ZTogMCxcbiAgICBhbmdsZTogTWF0aC5QSSwgY3VyQW5nbGU6IDAsXG4gICAgXG4gICAgc21vb3RoaW5nOiAwLjBcbn07XG5cbkNQQnJ1c2hJbmZvLnByb3RvdHlwZS5hcHBseVByZXNzdXJlID0gZnVuY3Rpb24ocHJlc3N1cmUpIHtcbiAgICAvLyBGSVhNRTogbm8gdmFyaWFibGUgc2l6ZSBmb3Igc211ZGdlIGFuZCBvaWwgOihcbiAgICBpZiAodGhpcy5wcmVzc3VyZVNpemUgJiYgdGhpcy5wYWludE1vZGUgIT0gQ1BCcnVzaEluZm8uTV9TTVVER0UgJiYgdGhpcy5wYWludE1vZGUgIT0gQ1BCcnVzaEluZm8uTV9PSUwpIHtcbiAgICAgICAgdGhpcy5jdXJTaXplID0gTWF0aC5tYXgoMC4xLCB0aGlzLnNpemUgKiBwcmVzc3VyZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5jdXJTaXplID0gTWF0aC5tYXgoMC4xLCB0aGlzLnNpemUpO1xuICAgIH1cblxuICAgIC8vIEZJWE1FOiB3aGF0IGlzIHRoZSBwb2ludCBvZiBkb2luZyB0aGF0P1xuICAgIGlmICh0aGlzLmN1clNpemUgPiAxNikge1xuICAgICAgICB0aGlzLmN1clNpemUgPSBNYXRoLmZsb29yKHRoaXMuY3VyU2l6ZSk7XG4gICAgfVxuXG4gICAgdGhpcy5jdXJBbHBoYSA9IHRoaXMucHJlc3N1cmVBbHBoYSA/IE1hdGguZmxvb3IodGhpcy5hbHBoYSAqIE1hdGgubWluKHByZXNzdXJlLCAxLjApKSA6IHRoaXMuYWxwaGE7XG4gICAgdGhpcy5jdXJTcXVlZXplID0gdGhpcy5zcXVlZXplO1xuICAgIHRoaXMuY3VyQW5nbGUgPSB0aGlzLmFuZ2xlO1xuICAgIHRoaXMuY3VyU2NhdHRlcmluZyA9IHRoaXMuc2NhdHRlcmluZyAqIHRoaXMuY3VyU2l6ZSAqICh0aGlzLnByZXNzdXJlU2NhdHRlcmluZyA/IHByZXNzdXJlIDogMS4wKTtcbn07XG5cbkNQQnJ1c2hJbmZvLnByb3RvdHlwZS5jbG9uZSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBuZXcgQ1BCcnVzaEluZm8odGhpcyk7XG59O1xuIiwiLypcbiAgICBDaGlja2VuUGFpbnRcbiAgICBcbiAgICBDaGlja2VuUGFpbnQgaXMgYSB0cmFuc2xhdGlvbiBvZiBDaGliaVBhaW50IGZyb20gSmF2YSB0byBKYXZhU2NyaXB0XG4gICAgYnkgTmljaG9sYXMgU2hlcmxvY2sgLyBDaGlja2VuIFNtb290aGllLlxuICAgIFxuICAgIENoaWJpUGFpbnQgaXMgQ29weXJpZ2h0IChjKSAyMDA2LTIwMDggTWFyYyBTY2hlZmVyXG5cbiAgICBDaGlja2VuUGFpbnQgaXMgZnJlZSBzb2Z0d2FyZTogeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yIG1vZGlmeVxuICAgIGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgYXMgcHVibGlzaGVkIGJ5XG4gICAgdGhlIEZyZWUgU29mdHdhcmUgRm91bmRhdGlvbiwgZWl0aGVyIHZlcnNpb24gMyBvZiB0aGUgTGljZW5zZSwgb3JcbiAgICAoYXQgeW91ciBvcHRpb24pIGFueSBsYXRlciB2ZXJzaW9uLlxuXG4gICAgQ2hpY2tlblBhaW50IGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsXG4gICAgYnV0IFdJVEhPVVQgQU5ZIFdBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2ZcbiAgICBNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuICBTZWUgdGhlXG4gICAgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy5cblxuICAgIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXG4gICAgYWxvbmcgd2l0aCBDaGlja2VuUGFpbnQuIElmIG5vdCwgc2VlIDxodHRwOi8vd3d3LmdudS5vcmcvbGljZW5zZXMvPi5cbiovXG5cbmltcG9ydCBDUEJydXNoSW5mbyBmcm9tIFwiLi9DUEJydXNoSW5mb1wiO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBDUEJydXNoTWFuYWdlcigpIHtcbiAgICBjb25zdFxuICAgICAgICBNQVhfU1FVRUVaRSA9IDEwLFxuICAgICAgICBCUlVTSF9NQVhfRElNID0gMjAxLFxuICAgICAgICBCUlVTSF9BQV9NQVhfRElNID0gMjAyO1xuICAgIFxuICAgIC8qQ1BCcnVzaERhYiB7XG4gICAgICAgIC8vIHRoZSBicnVzaFxuICAgICAgICBVaW50OEFycmF5IGJydXNoO1xuICAgICAgICBpbnQgd2lkdGgsIGhlaWdodDtcbiAgICAgICAgXG4gICAgICAgIC8vIGFuZCB3aGVyZSBhbmQgaG93IHRvIGFwcGx5IGl0XG4gICAgICAgIGludCB4LCB5LCBhbHBoYTtcbiAgICB9Ki9cbiAgICBcbiAgICB2YXJcbiAgICAgICAgYnJ1c2ggPSBuZXcgVWludDhBcnJheShCUlVTSF9NQVhfRElNICogQlJVU0hfTUFYX0RJTSksXG4gICAgICAgIGJydXNoQUEgPSBuZXcgVWludDhBcnJheShCUlVTSF9BQV9NQVhfRElNICogQlJVU0hfQUFfTUFYX0RJTSksXG5cbiAgICAgICAgY2FjaGVCcnVzaCA9IG51bGwsXG4gICAgICAgIGNhY2hlU2l6ZSwgY2FjaGVTcXVlZXplLCBjYWNoZUFuZ2xlLFxuICAgICAgICBjYWNoZVR5cGUsXG5cbiAgICAgICAgdGhhdCA9IHRoaXM7IFxuXG4gICAgLyoqXG4gICAgICogU2hpZnQgYSBicnVzaCBieSBhIHBvc2l0aXZlIHN1Yi1waXhlbCBhbW91bnQgKGR4LCBkeSkgWzAuLjEpLCBhbmQgcmV0dXJuIHRoZSBuZXcgYnJ1c2guIFxuICAgICAqIFxuICAgICAqIFRoZSByZXN1bHRpbmcgYnJ1c2ggYXJyYXkgaXMgMSBwaXhlbCBsYXJnZXIgdGhhbiB0aGUgb3JpZ2luYWwgb25lIGluIGJvdGggZGltZW5zaW9ucy5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBnZXRCcnVzaFdpdGhBQShicnVzaEluZm8sIGR4LCBkeSkge1xuICAgICAgICB2YXJcbiAgICAgICAgICAgIG5vbkFBQnJ1c2ggPSBnZXRCcnVzaChicnVzaEluZm8pLFxuXG4gICAgICAgICAgICBpbnRTaXplID0gTWF0aC5jZWlsKGJydXNoSW5mby5jdXJTaXplKSxcbiAgICAgICAgICAgIGludFNpemVBQSA9IE1hdGguY2VpbChicnVzaEluZm8uY3VyU2l6ZSkgKyAxO1xuICAgICAgICBcbiAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCBpbnRTaXplQUEgKiBpbnRTaXplQUE7IHgrKykge1xuICAgICAgICAgICAgYnJ1c2hBQVt4XSA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHZhclxuICAgICAgICAgICAgaW52ZHhfaW52ZHkgPSAoMSAtIGR4KSAqICgxIC0gZHkpLFxuICAgICAgICAgICAgZHhfaW52ZHkgPSBkeCAqICgxIC0gZHkpLFxuICAgICAgICAgICAgZHhfZHkgPSBkeCAqIGR5LFxuICAgICAgICAgICAgaW52ZHhfZHkgPSAoMSAtIGR4KSAqIGR5LFxuICAgICAgICAgICAgXG4gICAgICAgICAgICBzcmNJbmRleCA9IDAsXG4gICAgICAgICAgICBkc3RJbmRleCA9IDA7XG4gICAgICAgIFxuICAgICAgICBmb3IgKHZhciB5ID0gMDsgeSA8IGludFNpemU7IHkrKykge1xuICAgICAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCBpbnRTaXplOyB4KyspIHtcbiAgICAgICAgICAgICAgICB2YXIgXG4gICAgICAgICAgICAgICAgICAgIGJydXNoQWxwaGEgPSBub25BQUJydXNoW3NyY0luZGV4XTtcblxuICAgICAgICAgICAgICAgIC8qIFxuICAgICAgICAgICAgICAgICAqIFVzZSBhIHdlaWdodGVkIHN1bSB0byBzaGlmdCB0aGUgc291cmNlIHBpeGVscydzIHBvc2l0aW9uIGJ5IGEgc3ViLXBpeGVsIGFtb3VudCBkeCwgZHkgYW5kIGFjY3VtdWxhdGVcbiAgICAgICAgICAgICAgICAgKiBpdCBpbnRvIHRoZSBmaW5hbCBicnVzaEFBIGFycmF5LlxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIGJydXNoQUFbZHN0SW5kZXhdICs9IH5+KGJydXNoQWxwaGEgKiBpbnZkeF9pbnZkeSk7XG4gICAgICAgICAgICAgICAgYnJ1c2hBQVtkc3RJbmRleCArIDFdICs9IH5+KGJydXNoQWxwaGEgKiBkeF9pbnZkeSk7XG4gICAgICAgICAgICAgICAgYnJ1c2hBQVtkc3RJbmRleCArIDEgKyBpbnRTaXplQUFdICs9IH5+KGJydXNoQWxwaGEgKiBkeF9keSk7XG4gICAgICAgICAgICAgICAgYnJ1c2hBQVtkc3RJbmRleCArIGludFNpemVBQV0gKz0gfn4oYnJ1c2hBbHBoYSAqIGludmR4X2R5KTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBzcmNJbmRleCsrO1xuICAgICAgICAgICAgICAgIGRzdEluZGV4Kys7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkc3RJbmRleCArPSBpbnRTaXplQUEgLSBpbnRTaXplO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGJydXNoQUE7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYnVpbGRCcnVzaChicnVzaCwgYnJ1c2hJbmZvKSB7XG4gICAgICAgIHZhclxuICAgICAgICAgICAgaW50U2l6ZSA9IE1hdGguY2VpbChicnVzaEluZm8uY3VyU2l6ZSksXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNlbnRlciA9IGludFNpemUgLyAyLjAsXG4gICAgICAgICAgICBzcXJSYWRpdXMgPSAoYnJ1c2hJbmZvLmN1clNpemUgLyAyKSAqIChicnVzaEluZm8uY3VyU2l6ZSAvIDIpLFxuICAgIFxuICAgICAgICAgICAgeEZhY3RvciA9IDEuMCArIGJydXNoSW5mby5jdXJTcXVlZXplICogTUFYX1NRVUVFWkUsXG4gICAgICAgICAgICBjb3NBID0gTWF0aC5jb3MoYnJ1c2hJbmZvLmN1ckFuZ2xlKSxcbiAgICAgICAgICAgIHNpbkEgPSBNYXRoLnNpbihicnVzaEluZm8uY3VyQW5nbGUpLFxuICAgIFxuICAgICAgICAgICAgb2Zmc2V0ID0gMDtcbiAgICAgICAgXG4gICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgaW50U2l6ZTsgaisrKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGludFNpemU7IGkrKykge1xuICAgICAgICAgICAgICAgIHZhciBcbiAgICAgICAgICAgICAgICAgICAgeCA9IChpICsgMC41IC0gY2VudGVyKSxcbiAgICAgICAgICAgICAgICAgICAgeSA9IChqICsgMC41IC0gY2VudGVyKSxcbiAgICAgICAgICAgICAgICAgICAgZHggPSAoeCAqIGNvc0EgLSB5ICogc2luQSkgKiB4RmFjdG9yLFxuICAgICAgICAgICAgICAgICAgICBkeSA9ICh5ICogY29zQSArIHggKiBzaW5BKSxcblxuICAgICAgICAgICAgICAgICAgICBzcXJEaXN0ID0gZHggKiBkeCArIGR5ICogZHk7XG5cbiAgICAgICAgICAgICAgICBpZiAoc3FyRGlzdCA8PSBzcXJSYWRpdXMpIHtcbiAgICAgICAgICAgICAgICAgICAgYnJ1c2hbb2Zmc2V0KytdID0gMHhGRjtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBicnVzaFtvZmZzZXQrK10gPSAwO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBicnVzaDtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBidWlsZEJydXNoQUEoYnJ1c2gsIGJydXNoSW5mbykge1xuICAgICAgICB2YXJcbiAgICAgICAgICAgIGludFNpemUgPSBNYXRoLmNlaWwoYnJ1c2hJbmZvLmN1clNpemUpLFxuICAgICAgICAgICAgXG4gICAgICAgICAgICBjZW50ZXIgPSBpbnRTaXplIC8gMi4wLFxuICAgICAgICAgICAgc3FyUmFkaXVzID0gKGJydXNoSW5mby5jdXJTaXplIC8gMikgKiAoYnJ1c2hJbmZvLmN1clNpemUgLyAyKSxcbiAgICAgICAgICAgIHNxclJhZGl1c0lubmVyID0gKChicnVzaEluZm8uY3VyU2l6ZSAtIDIpIC8gMikgKiAoKGJydXNoSW5mby5jdXJTaXplIC0gMikgLyAyKSxcbiAgICAgICAgICAgIHNxclJhZGl1c091dGVyID0gKChicnVzaEluZm8uY3VyU2l6ZSArIDIpIC8gMikgKiAoKGJydXNoSW5mby5jdXJTaXplICsgMikgLyAyKSxcblxuICAgICAgICAgICAgeEZhY3RvciA9IDEuMCArIGJydXNoSW5mby5jdXJTcXVlZXplICogTUFYX1NRVUVFWkUsXG4gICAgICAgICAgICBjb3NBID0gTWF0aC5jb3MoYnJ1c2hJbmZvLmN1ckFuZ2xlKSxcbiAgICAgICAgICAgIHNpbkEgPSBNYXRoLnNpbihicnVzaEluZm8uY3VyQW5nbGUpLFxuXG4gICAgICAgICAgICBvZmZzZXQgPSAwO1xuICAgICAgICBcbiAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBpbnRTaXplOyBqKyspIHtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaW50U2l6ZTsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIFxuICAgICAgICAgICAgICAgICAgICB4ID0gKGkgKyAwLjUgLSBjZW50ZXIpLFxuICAgICAgICAgICAgICAgICAgICB5ID0gKGogKyAwLjUgLSBjZW50ZXIpLFxuICAgICAgICAgICAgICAgICAgICBkeCA9ICh4ICogY29zQSAtIHkgKiBzaW5BKSAqIHhGYWN0b3IsXG4gICAgICAgICAgICAgICAgICAgIGR5ID0gKHkgKiBjb3NBICsgeCAqIHNpbkEpLFxuXG4gICAgICAgICAgICAgICAgICAgIHNxckRpc3QgPSBkeCAqIGR4ICsgZHkgKiBkeTtcblxuICAgICAgICAgICAgICAgIGlmIChzcXJEaXN0IDw9IHNxclJhZGl1c0lubmVyKSB7XG4gICAgICAgICAgICAgICAgICAgIGJydXNoW29mZnNldCsrXSA9IDB4RkY7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChzcXJEaXN0ID4gc3FyUmFkaXVzT3V0ZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgYnJ1c2hbb2Zmc2V0KytdID0gMDtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB2YXIgXG4gICAgICAgICAgICAgICAgICAgICAgICBjb3VudCA9IDA7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBveSA9IDA7IG95IDwgNDsgb3krKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgb3ggPSAwOyBveCA8IDQ7IG94KyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB4ID0gaSArIG94ICogKDEuMCAvIDQuMCkgLSBjZW50ZXI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeSA9IGogKyBveSAqICgxLjAgLyA0LjApIC0gY2VudGVyO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGR4ID0gKHggKiBjb3NBIC0geSAqIHNpbkEpICogeEZhY3RvcjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkeSA9ICh5ICogY29zQSArIHggKiBzaW5BKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNxckRpc3QgPSBkeCAqIGR4ICsgZHkgKiBkeTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3FyRGlzdCA8PSBzcXJSYWRpdXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY291bnQgKz0gMTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJ1c2hbb2Zmc2V0KytdID0gTWF0aC5taW4oY291bnQgKiAxNiwgMjU1KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gYnJ1c2g7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYnVpbGRCcnVzaFNxdWFyZShicnVzaCwgYnJ1c2hJbmZvKSB7XG4gICAgICAgIHZhclxuICAgICAgICAgICAgaW50U2l6ZSA9IE1hdGguY2VpbChicnVzaEluZm8uY3VyU2l6ZSksXG4gICAgICAgICAgICBjZW50ZXIgPSBpbnRTaXplIC8gMi4wLFxuXG4gICAgICAgICAgICBzaXplID0gYnJ1c2hJbmZvLmN1clNpemUgKiBNYXRoLnNpbihNYXRoLlBJIC8gNCksXG4gICAgICAgICAgICBzaXplWCA9IChzaXplIC8gMikgLyAoMS4wICsgYnJ1c2hJbmZvLmN1clNxdWVlemUgKiBNQVhfU1FVRUVaRSksXG4gICAgICAgICAgICBzaXplWSA9IChzaXplIC8gMiksXG5cbiAgICAgICAgICAgIGNvc0EgPSBNYXRoLmNvcyhicnVzaEluZm8uY3VyQW5nbGUpLFxuICAgICAgICAgICAgc2luQSA9IE1hdGguc2luKGJydXNoSW5mby5jdXJBbmdsZSksXG5cbiAgICAgICAgICAgIG9mZnNldCA9IDA7XG4gICAgICAgIFxuICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGludFNpemU7IGorKykge1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpbnRTaXplOyBpKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgXG4gICAgICAgICAgICAgICAgICAgIHggPSAoaSArIDAuNSAtIGNlbnRlciksXG4gICAgICAgICAgICAgICAgICAgIHkgPSAoaiArIDAuNSAtIGNlbnRlciksXG4gICAgICAgICAgICAgICAgICAgIGR4ID0gTWF0aC5hYnMoeCAqIGNvc0EgLSB5ICogc2luQSksXG4gICAgICAgICAgICAgICAgICAgIGR5ID0gTWF0aC5hYnMoeSAqIGNvc0EgKyB4ICogc2luQSk7XG5cbiAgICAgICAgICAgICAgICBpZiAoZHggPD0gc2l6ZVggJiYgZHkgPD0gc2l6ZVkpIHtcbiAgICAgICAgICAgICAgICAgICAgYnJ1c2hbb2Zmc2V0KytdID0gMHhGRjtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBicnVzaFtvZmZzZXQrK10gPSAwO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBicnVzaDtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBidWlsZEJydXNoU3F1YXJlQUEoYnJ1c2gsIGJydXNoSW5mbykge1xuICAgICAgICB2YXJcbiAgICAgICAgICAgIGludFNpemUgPSBNYXRoLmNlaWwoYnJ1c2hJbmZvLmN1clNpemUpLFxuICAgICAgICAgICAgY2VudGVyID0gaW50U2l6ZSAvIDIuMCxcblxuICAgICAgICAgICAgc2l6ZSA9IGJydXNoSW5mby5jdXJTaXplICogTWF0aC5zaW4oTWF0aC5QSSAvIDQpLFxuICAgICAgICAgICAgc2l6ZVggPSAoc2l6ZSAvIDIpIC8gKDEuMCArIGJydXNoSW5mby5jdXJTcXVlZXplICogTUFYX1NRVUVFWkUpLFxuICAgICAgICAgICAgc2l6ZVkgPSAoc2l6ZSAvIDIpLFxuXG4gICAgICAgICAgICBzaXplWElubmVyID0gc2l6ZVggLSAxLFxuICAgICAgICAgICAgc2l6ZVlJbm5lciA9IHNpemVZIC0gMSxcblxuICAgICAgICAgICAgc2l6ZVhPdXRlciA9IHNpemVYICsgMSxcbiAgICAgICAgICAgIHNpemVZT3V0ZXIgPSBzaXplWSArIDEsXG5cbiAgICAgICAgICAgIGNvc0EgPSBNYXRoLmNvcyhicnVzaEluZm8uY3VyQW5nbGUpLFxuICAgICAgICAgICAgc2luQSA9IE1hdGguc2luKGJydXNoSW5mby5jdXJBbmdsZSksXG5cbiAgICAgICAgICAgIG9mZnNldCA9IDA7XG4gICAgICAgIFxuICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGludFNpemU7IGorKykge1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpbnRTaXplOyBpKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgXG4gICAgICAgICAgICAgICAgICAgIHggPSAoaSArIDAuNSAtIGNlbnRlciksXG4gICAgICAgICAgICAgICAgICAgIHkgPSAoaiArIDAuNSAtIGNlbnRlciksXG4gICAgICAgICAgICAgICAgICAgIGR4ID0gTWF0aC5hYnMoeCAqIGNvc0EgLSB5ICogc2luQSksXG4gICAgICAgICAgICAgICAgICAgIGR5ID0gTWF0aC5hYnMoeSAqIGNvc0EgKyB4ICogc2luQSk7XG5cbiAgICAgICAgICAgICAgICBpZiAoZHggPD0gc2l6ZVhJbm5lciAmJiBkeSA8PSBzaXplWUlubmVyKSB7XG4gICAgICAgICAgICAgICAgICAgIGJydXNoW29mZnNldCsrXSA9IDB4RkY7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChkeCA+IHNpemVYT3V0ZXIgfHwgZHkgPiBzaXplWU91dGVyKSB7XG4gICAgICAgICAgICAgICAgICAgIGJydXNoW29mZnNldCsrXSA9IDA7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb3VudCA9IDA7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBveSA9IDA7IG95IDwgNDsgb3krKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgb3ggPSAwOyBveCA8IDQ7IG94KyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB4ID0gaSArIG94ICogKDEuMCAvIDQuMCkgLSBjZW50ZXI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeSA9IGogKyBveSAqICgxLjAgLyA0LjApIC0gY2VudGVyO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGR4ID0gTWF0aC5hYnMoeCAqIGNvc0EgLSB5ICogc2luQSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZHkgPSBNYXRoLmFicyh5ICogY29zQSArIHggKiBzaW5BKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkeCA8PSBzaXplWCAmJiBkeSA8PSBzaXplWSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3VudCsrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicnVzaFtvZmZzZXQrK10gPSBNYXRoLm1pbihjb3VudCAqIDE2LCAyNTUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBicnVzaDtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBidWlsZEJydXNoU29mdChicnVzaCwgYnJ1c2hJbmZvKSB7XG4gICAgICAgIHZhclxuICAgICAgICAgICAgaW50U2l6ZSA9IE1hdGguY2VpbChicnVzaEluZm8uY3VyU2l6ZSksXG4gICAgICAgICAgICBjZW50ZXIgPSBpbnRTaXplIC8gMi4wLFxuICAgICAgICAgICAgc3FyUmFkaXVzID0gKGJydXNoSW5mby5jdXJTaXplIC8gMikgKiAoYnJ1c2hJbmZvLmN1clNpemUgLyAyKSxcblxuICAgICAgICAgICAgeEZhY3RvciA9IDEuMCArIGJydXNoSW5mby5jdXJTcXVlZXplICogTUFYX1NRVUVFWkUsXG4gICAgICAgICAgICBjb3NBID0gTWF0aC5jb3MoYnJ1c2hJbmZvLmN1ckFuZ2xlKSxcbiAgICAgICAgICAgIHNpbkEgPSBNYXRoLnNpbihicnVzaEluZm8uY3VyQW5nbGUpLFxuXG4gICAgICAgICAgICBvZmZzZXQgPSAwO1xuICAgICAgICBcbiAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBpbnRTaXplOyBqKyspIHtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaW50U2l6ZTsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIFxuICAgICAgICAgICAgICAgICAgICB4ID0gKGkgKyAwLjUgLSBjZW50ZXIpLFxuICAgICAgICAgICAgICAgICAgICB5ID0gKGogKyAwLjUgLSBjZW50ZXIpLFxuICAgICAgICAgICAgICAgICAgICBkeCA9ICh4ICogY29zQSAtIHkgKiBzaW5BKSAqIHhGYWN0b3IsXG4gICAgICAgICAgICAgICAgICAgIGR5ID0gKHkgKiBjb3NBICsgeCAqIHNpbkEpLFxuXG4gICAgICAgICAgICAgICAgICAgIHNxckRpc3QgPSBkeCAqIGR4ICsgZHkgKiBkeTtcblxuICAgICAgICAgICAgICAgIGlmIChzcXJEaXN0IDw9IHNxclJhZGl1cykge1xuICAgICAgICAgICAgICAgICAgICBicnVzaFtvZmZzZXQrK10gPSB+figyNTUgKiAoMSAtIChzcXJEaXN0IC8gc3FyUmFkaXVzKSkpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGJydXNoW29mZnNldCsrXSA9IDA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGJydXNoO1xuICAgIH0gXG4gICAgXG4gICAgLyoqXG4gICAgICogQnVpbGQgYW5kIHJldHVybiBhIGJydXNoIHRoYXQgY29uZm9ybXMgdG8gdGhlIGdpdmVuIGJydXNoIHNldHRpbmdzLlxuICAgICAqIFxuICAgICAqIEByZXR1cm5zIGEgVWludDhBcnJheVxuICAgICAqLyBcbiAgICBmdW5jdGlvbiBnZXRCcnVzaChicnVzaEluZm8pIHtcbiAgICAgICAgaWYgKGNhY2hlQnJ1c2ggIT0gbnVsbCAmJiBicnVzaEluZm8uY3VyU2l6ZSA9PSBjYWNoZVNpemUgJiYgYnJ1c2hJbmZvLmN1clNxdWVlemUgPT0gY2FjaGVTcXVlZXplXG4gICAgICAgICAgICAgICAgJiYgYnJ1c2hJbmZvLmN1ckFuZ2xlID09IGNhY2hlQW5nbGUgJiYgYnJ1c2hJbmZvLnR5cGUgPT0gY2FjaGVUeXBlKSB7XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVCcnVzaDtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgc3dpdGNoIChicnVzaEluZm8udHlwZSkge1xuICAgICAgICAgICAgY2FzZSBDUEJydXNoSW5mby5CX1JPVU5EX0FJUkJSVVNIOlxuICAgICAgICAgICAgICAgIGJydXNoID0gYnVpbGRCcnVzaFNvZnQoYnJ1c2gsIGJydXNoSW5mbyk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgQ1BCcnVzaEluZm8uQl9ST1VORF9BQTpcbiAgICAgICAgICAgICAgICBicnVzaCA9IGJ1aWxkQnJ1c2hBQShicnVzaCwgYnJ1c2hJbmZvKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBDUEJydXNoSW5mby5CX1JPVU5EX1BJWEVMOlxuICAgICAgICAgICAgICAgIGJydXNoID0gYnVpbGRCcnVzaChicnVzaCwgYnJ1c2hJbmZvKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBDUEJydXNoSW5mby5CX1NRVUFSRV9BQTpcbiAgICAgICAgICAgICAgICBicnVzaCA9IGJ1aWxkQnJ1c2hTcXVhcmVBQShicnVzaCwgYnJ1c2hJbmZvKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBDUEJydXNoSW5mby5CX1NRVUFSRV9QSVhFTDpcbiAgICAgICAgICAgICAgICBicnVzaCA9IGJ1aWxkQnJ1c2hTcXVhcmUoYnJ1c2gsIGJydXNoSW5mbyk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuXG4gICAgICAgIGNhY2hlQnJ1c2ggPSBicnVzaDtcbiAgICAgICAgY2FjaGVTaXplID0gYnJ1c2hJbmZvLmN1clNpemU7XG4gICAgICAgIGNhY2hlVHlwZSA9IGJydXNoSW5mby50eXBlO1xuICAgICAgICBjYWNoZVNxdWVlemUgPSBicnVzaEluZm8uY3VyU3F1ZWV6ZTtcbiAgICAgICAgY2FjaGVBbmdsZSA9IGJydXNoSW5mby5jdXJBbmdsZTtcblxuICAgICAgICByZXR1cm4gYnJ1c2g7XG4gICAgfVxuICAgIFxuICAgIGZ1bmN0aW9uIGFwcGx5VGV4dHVyZShkYWIsIHRleHR1cmVBbW91bnQpIHtcbiAgICAgICAgdmFyIFxuICAgICAgICAgICAgYW1vdW50ID0gTWF0aC5mbG9vcih0ZXh0dXJlQW1vdW50ICogMjU1KSxcbiAgICAgICAgICAgIHRleHR1cmUgPSB0aGF0LnRleHR1cmUsXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRleHR1cmVYID0gZGFiLnggJSB0ZXh0dXJlLndpZHRoLFxuICAgICAgICAgICAgdGV4dHVyZVkgPSBkYWIueSAlIHRleHR1cmUuaGVpZ2h0LFxuICAgICAgICAgICAgXG4gICAgICAgICAgICBicnVzaFBvcyA9IDAsXG4gICAgICAgICAgICB0ZXh0dXJlUG9zLCB0ZXh0dXJlRU9MO1xuXG4gICAgICAgIGlmICh0ZXh0dXJlWCA8IDApIHtcbiAgICAgICAgICAgIHRleHR1cmVYICs9IHRleHR1cmUud2lkdGg7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGV4dHVyZVkgPCAwKSB7XG4gICAgICAgICAgICB0ZXh0dXJlWSArPSB0ZXh0dXJlLmhlaWdodDtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgZm9yICh2YXIgeSA9IDA7IHkgPCBkYWIuaGVpZ2h0OyB5KyspIHtcbiAgICAgICAgICAgIHRleHR1cmVQb3MgPSB0ZXh0dXJlWSAqIHRleHR1cmUud2lkdGggKyB0ZXh0dXJlWDtcbiAgICAgICAgICAgIHRleHR1cmVFT0wgPSB0ZXh0dXJlWSAqIHRleHR1cmUud2lkdGggKyB0ZXh0dXJlLndpZHRoO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IGRhYi53aWR0aDsgeCsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIFxuICAgICAgICAgICAgICAgICAgICBicnVzaFZhbHVlID0gZGFiLmJydXNoW2JydXNoUG9zXSxcbiAgICAgICAgICAgICAgICAgICAgdGV4dHVyZVZhbHVlID0gdGV4dHVyZS5kYXRhW3RleHR1cmVQb3NdO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGRhYi5icnVzaFticnVzaFBvc10gPSB+fihicnVzaFZhbHVlICogKCh0ZXh0dXJlVmFsdWUgKiBhbW91bnQgLyAyNTUpIF4gMHhmZikgLyAyNTUpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGJydXNoUG9zKys7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgdGV4dHVyZVBvcysrO1xuICAgICAgICAgICAgICAgIGlmICh0ZXh0dXJlUG9zID09IHRleHR1cmVFT0wpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gV3JhcCB0byBsZWZ0IHNpZGUgb2YgdGV4dHVyZVxuICAgICAgICAgICAgICAgICAgICB0ZXh0dXJlUG9zIC09IHRleHR1cmUud2lkdGg7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICB0ZXh0dXJlWSsrO1xuICAgICAgICAgICAgaWYgKHRleHR1cmVZID09IHRleHR1cmUuaGVpZ2h0KSB7XG4gICAgICAgICAgICAgICAgdGV4dHVyZVkgPSAwO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB4IGZsb2F0XG4gICAgICogQHBhcmFtIHkgZmxvYXRcbiAgICAgKiBicnVzaEluZm8gLSBhIENQQnJ1c2hJbmZvIG9iamVjdFxuICAgICAqL1xuICAgIHRoaXMuZ2V0RGFiID0gZnVuY3Rpb24oeCwgeSwgYnJ1c2hJbmZvKSB7XG4gICAgICAgIHZhciBcbiAgICAgICAgICAgIGRhYiA9IHtcbiAgICAgICAgICAgICAgICBhbHBoYTogYnJ1c2hJbmZvLmN1ckFscGhhLFxuICAgICAgICAgICAgICAgIHdpZHRoOiBNYXRoLmNlaWwoYnJ1c2hJbmZvLmN1clNpemUpLFxuICAgICAgICAgICAgICAgIGhlaWdodDogTWF0aC5jZWlsKGJydXNoSW5mby5jdXJTaXplKVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAvLyBGSVhNRTogSSBkb24ndCBsaWtlIHRoaXMgc3BlY2lhbCBjYXNlIGZvciBST1VORF9QSVhFTFxuICAgICAgICAvLyBpdCB3b3VsZCBiZSBiZXR0ZXIgdG8gaGF2ZSBicnVzaCBwcmVzZXRzIGZvciB3b3JraW5nIHdpdGggcGl4ZWxzXG4gICAgICAgIHZhciB1c2VBQSA9IGJydXNoSW5mby5pc0FBICYmIGJydXNoSW5mby50eXBlICE9IENQQnJ1c2hJbmZvLkJfUk9VTkRfUElYRUw7XG5cbiAgICAgICAgaWYgKHVzZUFBKSB7XG4gICAgICAgICAgICBkYWIud2lkdGgrKztcbiAgICAgICAgICAgIGRhYi5oZWlnaHQrKztcbiAgICAgICAgfVxuXG4gICAgICAgIHZhclxuICAgICAgICAgICAgbnggPSB4IC0gZGFiLndpZHRoIC8gMi4wICsgMC41LFxuICAgICAgICAgICAgbnkgPSB5IC0gZGFiLmhlaWdodCAvIDIuMCArIDAuNTtcblxuICAgICAgICAvLyB0aGlzIGlzIG5lY2Vzc2FyeSBhcyBKYXZhIHVzZXMgY29udmVydCB0b3dhcmRzIHplcm8gZmxvYXQgdG8gaW50IGNvbnZlcnNpb25cbiAgICAgICAgaWYgKG54IDwgMCkge1xuICAgICAgICAgICAgbnggLT0gMTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobnkgPCAwKSB7XG4gICAgICAgICAgICBueSAtPSAxO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHVzZUFBKSB7XG4gICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICBkeCA9IE1hdGguYWJzKG54IC0gfn5ueCksXG4gICAgICAgICAgICAgICAgZHkgPSBNYXRoLmFicyhueSAtIH5+bnkpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBkYWIuYnJ1c2ggPSBnZXRCcnVzaFdpdGhBQShicnVzaEluZm8sIGR4LCBkeSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBkYWIuYnJ1c2ggPSBnZXRCcnVzaChicnVzaEluZm8pO1xuICAgICAgICB9XG5cbiAgICAgICAgZGFiLnggPSB+fm54O1xuICAgICAgICBkYWIueSA9IH5+bnk7XG5cbiAgICAgICAgaWYgKGJydXNoSW5mby50ZXh0dXJlID4gMC4wICYmIHRoaXMudGV4dHVyZSAhPSBudWxsKSB7XG4gICAgICAgICAgICAvLyB3ZSBuZWVkIGEgYnJ1c2ggYml0bWFwIHRoYXQgY2FuIGJlIG1vZGlmaWVkIGV2ZXJ5dGltZVxuICAgICAgICAgICAgLy8gdGhlIG9uZSBpbiBcImJydXNoXCIgY2FuIGJlIGtlcHQgaW4gY2FjaGUgc28gaWYgd2UgYXJlIHVzaW5nIGl0LCBtYWtlIGEgY29weVxuICAgICAgICAgICAgaWYgKGRhYi5icnVzaCA9PSBicnVzaCkge1xuICAgICAgICAgICAgICAgIGJydXNoQUEuc2V0KGJydXNoKTtcbiAgICAgICAgICAgICAgICBkYWIuYnJ1c2ggPSBicnVzaEFBO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYXBwbHlUZXh0dXJlKGRhYiwgYnJ1c2hJbmZvLnRleHR1cmUpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gZGFiO1xuICAgIH1cblxuICAgIHRoaXMuc2V0VGV4dHVyZSA9IGZ1bmN0aW9uKHRleHR1cmUpIHtcbiAgICAgICAgdGhpcy50ZXh0dXJlID0gdGV4dHVyZTtcbiAgICB9XG59XG4iLCIvKlxuICAgIENoaWNrZW5QYWludFxuXG4gICAgQ2hpY2tlblBhaW50IGlzIGEgdHJhbnNsYXRpb24gb2YgQ2hpYmlQYWludCBmcm9tIEphdmEgdG8gSmF2YVNjcmlwdFxuICAgIGJ5IE5pY2hvbGFzIFNoZXJsb2NrIC8gQ2hpY2tlbiBTbW9vdGhpZS5cblxuICAgIENoaWJpUGFpbnQgaXMgQ29weXJpZ2h0IChjKSAyMDA2LTIwMDggTWFyYyBTY2hlZmVyXG5cbiAgICBDaGlja2VuUGFpbnQgaXMgZnJlZSBzb2Z0d2FyZTogeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yIG1vZGlmeVxuICAgIGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgYXMgcHVibGlzaGVkIGJ5XG4gICAgdGhlIEZyZWUgU29mdHdhcmUgRm91bmRhdGlvbiwgZWl0aGVyIHZlcnNpb24gMyBvZiB0aGUgTGljZW5zZSwgb3JcbiAgICAoYXQgeW91ciBvcHRpb24pIGFueSBsYXRlciB2ZXJzaW9uLlxuXG4gICAgQ2hpY2tlblBhaW50IGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsXG4gICAgYnV0IFdJVEhPVVQgQU5ZIFdBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2ZcbiAgICBNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuICBTZWUgdGhlXG4gICAgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy5cblxuICAgIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXG4gICAgYWxvbmcgd2l0aCBDaGlja2VuUGFpbnQuIElmIG5vdCwgc2VlIDxodHRwOi8vd3d3LmdudS5vcmcvbGljZW5zZXMvPi5cbiovXG5cbmltcG9ydCBDUEFydHdvcmsgZnJvbSBcIi4vQ1BBcnR3b3JrXCI7XG5pbXBvcnQgQ1BMYXllciBmcm9tIFwiLi9DUExheWVyXCI7XG5pbXBvcnQgQ1BDb2xvckJtcCBmcm9tIFwiLi9DUENvbG9yQm1wXCI7XG5pbXBvcnQgQXJyYXlEYXRhU3RyZWFtIGZyb20gXCIuLi91dGlsL0FycmF5RGF0YVN0cmVhbVwiO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBDUENoaWJpRmlsZSgpIHtcblxuICAgIGZ1bmN0aW9uIENQQ2hpYmlIZWFkZXIoc3RyZWFtLCBjaHVuaykge1xuICAgICAgICB0aGlzLnZlcnNpb24gPSBzdHJlYW0ucmVhZFUzMkJFKCk7XG4gICAgICAgIHRoaXMud2lkdGggPSBzdHJlYW0ucmVhZFUzMkJFKCk7XG4gICAgICAgIHRoaXMuaGVpZ2h0ID0gc3RyZWFtLnJlYWRVMzJCRSgpO1xuICAgICAgICB0aGlzLmxheWVyc05iID0gc3RyZWFtLnJlYWRVMzJCRSgpO1xuICAgIH1cbiAgICBcbiAgICBDUENoaWJpSGVhZGVyLkZJWEVEX0hFQURFUl9MRU5HVEggPSA0ICogNDtcblxuICAgIGZ1bmN0aW9uIENQQ2hpYmlDaHVua0hlYWRlcihzdHJlYW0pIHtcbiAgICAgICAgdmFyXG4gICAgICAgICAgICBjaHVua1R5cGUgPSBuZXcgQXJyYXkoNCk7XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjaHVua1R5cGUubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGNodW5rVHlwZVtpXSA9IFN0cmluZy5mcm9tQ2hhckNvZGUoc3RyZWFtLnJlYWRCeXRlKCkpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICB0aGlzLmNodW5rVHlwZSA9IGNodW5rVHlwZS5qb2luKFwiXCIpO1xuICAgICAgICB0aGlzLmNodW5rU2l6ZSA9IHN0cmVhbS5yZWFkVTMyQkUoKTtcblxuICAgICAgICBpZiAoc3RyZWFtLmVvZikge1xuICAgICAgICAgICAgdGhyb3cgXCJUcnVuY2F0ZWQgY2h1bmtcIjtcbiAgICAgICAgfVxuICAgIH1cbiAgICBcbiAgICBmdW5jdGlvbiBDUENoaWJpTGF5ZXJDaHVua0hlYWRlcigpIHtcbiAgICAgICAgdmFyXG4gICAgICAgICAgICBwYXlsb2FkT2Zmc2V0LFxuICAgICAgICAgICAgdGl0bGVMZW5ndGg7XG4gICAgICAgIFxuICAgICAgICB0aGlzLnJlYWRGaXhlZEhlYWRlciA9IGZ1bmN0aW9uKHN0cmVhbSkge1xuICAgICAgICAgICAgcGF5bG9hZE9mZnNldCA9IHN0cmVhbS5yZWFkVTMyQkUoKTtcbiAgICBcbiAgICAgICAgICAgIHRoaXMuYmxlbmRNb2RlID0gc3RyZWFtLnJlYWRVMzJCRSgpO1xuICAgICAgICAgICAgdGhpcy5hbHBoYSA9IHN0cmVhbS5yZWFkVTMyQkUoKTtcbiAgICAgICAgICAgIHRoaXMudmlzaWJsZSA9IChzdHJlYW0ucmVhZFUzMkJFKCkgJiAxKSAhPSAwO1xuICAgIFxuICAgICAgICAgICAgdGl0bGVMZW5ndGggPSBzdHJlYW0ucmVhZFUzMkJFKCk7XG4gICAgICAgIH07XG4gICAgICAgIFxuICAgICAgICAvKiBcbiAgICAgICAgICogQWZ0ZXIgcmVhZGluZyB0aGUgZml4ZWQgaGVhZGVyLCB1c2UgdGhpcyBmdW5jdGlvbiB0byBmaW5kIG91dCBob3cgbWFueSBtb3JlIGJ5dGVzIG9mIGhlYWRlclxuICAgICAgICAgKiBuZWVkIHRvIGJlIHJlYWQuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmdldFZhcmlhYmxlSGVhZGVyTGVuID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gcGF5bG9hZE9mZnNldCAtIENQQ2hpYmlMYXllckNodW5rSGVhZGVyLkZJWEVEX0hFQURFUl9MRU5HVEg7XG4gICAgICAgIH07XG4gICAgICAgIFxuICAgICAgICB0aGlzLmdldFRvdGFsSGVhZGVyTGVuID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gQ1BDaGliaUxheWVyQ2h1bmtIZWFkZXIuRklYRURfSEVBREVSX0xFTkdUSCArIHRoaXMuZ2V0VmFyaWFibGVIZWFkZXJMZW4oKTtcbiAgICAgICAgfTtcbiAgICAgICAgXG4gICAgICAgIHRoaXMucmVhZFZhcmlhYmxlSGVhZGVyID0gZnVuY3Rpb24oc3RyZWFtKSB7XG4gICAgICAgICAgICB0aGlzLm5hbWUgPSBzdHJlYW0ucmVhZFN0cmluZyh0aXRsZUxlbmd0aCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFNraXAgdG8gdGhlIHBpeGVsIGRhdGEgKGFsbG93cyBhZGRpdGlvbmFsIGhlYWRlciBmaWVsZHMgdG8gYmUgYWRkZWQgdGhhdCB3ZSBkb24ndCB5ZXQgc3VwcG9ydClcbiAgICAgICAgICAgIHN0cmVhbS5za2lwKHBheWxvYWRPZmZzZXQgLSB0aXRsZUxlbmd0aCAtIENQQ2hpYmlMYXllckNodW5rSGVhZGVyLkZJWEVEX0hFQURFUl9MRU5HVEgpO1xuICAgICAgICB9O1xuICAgIH1cbiAgICBcbiAgICAvLyBUaGUgc2l6ZSBvZiB0aGUgaW5pdGlhbCwgZml4ZWQtbGVuZ3RoIHBvcnRpb24gb2YgdGhlIGhlYWRlclxuICAgIENQQ2hpYmlMYXllckNodW5rSGVhZGVyLkZJWEVEX0hFQURFUl9MRU5HVEggPSA0ICogNTtcblxuICAgIGNvbnN0XG4gICAgICAgIENISV9NQUdJQyA9IFwiQ0hJQklPRUtcIixcblxuICAgICAgICBDSFVOS19UQUdfSEVBRCA9IFwiSEVBRFwiLFxuICAgICAgICBDSFVOS19UQUdfTEFZRVIgPSBcIkxBWVJcIixcbiAgICAgICAgQ0hVTktfVEFHX0VORCA9IFwiWkVORFwiLFxuICAgICAgICBcbiAgICAgICAgQllURVNfUEVSX1BJWEVMID0gQ1BDb2xvckJtcC5CWVRFU19QRVJfUElYRUwsXG4gICAgICAgIEFMUEhBX0JZVEVfT0ZGU0VUID0gQ1BDb2xvckJtcC5BTFBIQV9CWVRFX09GRlNFVCxcbiAgICAgICAgUkVEX0JZVEVfT0ZGU0VUID0gQ1BDb2xvckJtcC5SRURfQllURV9PRkZTRVQsXG4gICAgICAgIEdSRUVOX0JZVEVfT0ZGU0VUID0gQ1BDb2xvckJtcC5HUkVFTl9CWVRFX09GRlNFVCxcbiAgICAgICAgQkxVRV9CWVRFX09GRlNFVCA9IENQQ29sb3JCbXAuQkxVRV9CWVRFX09GRlNFVDtcblxuICAgIGZ1bmN0aW9uIHNlcmlhbGl6ZUVuZENodW5rKCkge1xuICAgICAgICB2YXJcbiAgICAgICAgICAgIGJ1ZmZlciA9IG5ldyBVaW50OEFycmF5KENIVU5LX1RBR19FTkQubGVuZ3RoICsgNCksXG4gICAgICAgICAgICBzdHJlYW0gPSBuZXcgQXJyYXlEYXRhU3RyZWFtKGJ1ZmZlcik7XG5cbiAgICAgICAgc3RyZWFtLndyaXRlU3RyaW5nKENIVU5LX1RBR19FTkQpO1xuICAgICAgICBzdHJlYW0ud3JpdGVVMzJCRSgwKTtcblxuICAgICAgICByZXR1cm4gc3RyZWFtLmdldEFzRGF0YUFycmF5KCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2VyaWFsaXplSGVhZGVyQ2h1bmsoYXJ0d29yaykge1xuICAgICAgICB2YXJcbiAgICAgICAgICAgIGJ1ZmZlciA9IG5ldyBVaW50OEFycmF5KENIVU5LX1RBR19IRUFELmxlbmd0aCArIDQgKiA1KSxcbiAgICAgICAgICAgIHN0cmVhbSA9IG5ldyBBcnJheURhdGFTdHJlYW0oYnVmZmVyKTtcblxuICAgICAgICBzdHJlYW0ud3JpdGVTdHJpbmcoQ0hVTktfVEFHX0hFQUQpO1xuICAgICAgICBzdHJlYW0ud3JpdGVVMzJCRSgxNik7IC8vIENodW5rU2l6ZVxuXG4gICAgICAgIHN0cmVhbS53cml0ZVUzMkJFKDApOyAvLyBDdXJyZW50IFZlcnNpb246IE1ham9yOiAwIE1pbm9yOiAwXG4gICAgICAgIHN0cmVhbS53cml0ZVUzMkJFKGFydHdvcmsud2lkdGgpO1xuICAgICAgICBzdHJlYW0ud3JpdGVVMzJCRShhcnR3b3JrLmhlaWdodCk7XG4gICAgICAgIHN0cmVhbS53cml0ZVUzMkJFKGFydHdvcmsuZ2V0TGF5ZXJDb3VudCgpKTtcblxuICAgICAgICByZXR1cm4gc3RyZWFtLmdldEFzRGF0YUFycmF5KCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2VyaWFsaXplTGF5ZXJDaHVuayhsYXllcikge1xuICAgICAgICB2YXJcbiAgICAgICAgICAgIGNodW5rU2l6ZSA9IDIwICsgbGF5ZXIubmFtZS5sZW5ndGggKyBsYXllci5kYXRhLmxlbmd0aCxcblxuICAgICAgICAgICAgYnVmZmVyID0gbmV3IFVpbnQ4QXJyYXkoQ0hVTktfVEFHX0xBWUVSLmxlbmd0aCArIDQgKyBjaHVua1NpemUpLFxuICAgICAgICAgICAgc3RyZWFtID0gbmV3IEFycmF5RGF0YVN0cmVhbShidWZmZXIpLFxuICAgICAgICAgICAgcG9zO1xuXG4gICAgICAgIHN0cmVhbS53cml0ZVN0cmluZyhDSFVOS19UQUdfTEFZRVIpOyAvLyBDaHVuayBJRFxuICAgICAgICBzdHJlYW0ud3JpdGVVMzJCRShjaHVua1NpemUpOyAvLyBDaHVua1NpemVcblxuICAgICAgICBzdHJlYW0ud3JpdGVVMzJCRSgyMCArIGxheWVyLm5hbWUubGVuZ3RoKTsgLy8gT2Zmc2V0IHRvIGxheWVyIGRhdGEgZnJvbSBzdGFydCBvZiBoZWFkZXJcblxuICAgICAgICBzdHJlYW0ud3JpdGVVMzJCRShsYXllci5ibGVuZE1vZGUpO1xuICAgICAgICBzdHJlYW0ud3JpdGVVMzJCRShsYXllci5hbHBoYSk7XG4gICAgICAgIHN0cmVhbS53cml0ZVUzMkJFKGxheWVyLnZpc2libGUgPyAxIDogMCk7IC8vIGxheWVyIHZpc2liaWxpdHkgYW5kIGZ1dHVyZSBmbGFnc1xuXG4gICAgICAgIHN0cmVhbS53cml0ZVUzMkJFKGxheWVyLm5hbWUubGVuZ3RoKTtcbiAgICAgICAgc3RyZWFtLndyaXRlU3RyaW5nKGxheWVyLm5hbWUpO1xuXG4gICAgICAgIC8vIENvbnZlcnQgbGF5ZXIgYnl0ZXMgZnJvbSBSR0JBIHRvIEFSR0Igb3JkZXIgdG8gbWF0Y2ggdGhlIENoaWJpIHNwZWNzXG4gICAgICAgIHBvcyA9IHN0cmVhbS5wb3M7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGF5ZXIuZGF0YS5sZW5ndGg7IGkgKz0gQllURVNfUEVSX1BJWEVMKSB7XG4gICAgICAgICAgICBidWZmZXJbcG9zKytdID0gbGF5ZXIuZGF0YVtpICsgQUxQSEFfQllURV9PRkZTRVRdO1xuICAgICAgICAgICAgYnVmZmVyW3BvcysrXSA9IGxheWVyLmRhdGFbaSArIFJFRF9CWVRFX09GRlNFVF07XG4gICAgICAgICAgICBidWZmZXJbcG9zKytdID0gbGF5ZXIuZGF0YVtpICsgR1JFRU5fQllURV9PRkZTRVRdO1xuICAgICAgICAgICAgYnVmZmVyW3BvcysrXSA9IGxheWVyLmRhdGFbaSArIEJMVUVfQllURV9PRkZTRVRdO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGJ1ZmZlcjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXJpYWxpemUgdGhlIGdpdmVuIGFydHdvcmsgdG8gQ2hpYmlmaWxlIGZvcm1hdC4gUmV0dXJucyBhIHByb21pc2Ugd2hpY2ggcmVzb2x2ZXMgdG8gdGhlIHNlcmlhbGl6ZWQgQmxvYi5cbiAgICAgKi9cbiAgICB0aGlzLnNlcmlhbGl6ZSA9IGZ1bmN0aW9uKGFydHdvcmspIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgZGVmbGF0b3IgPSBuZXcgd2luZG93LnBha28uRGVmbGF0ZSh7XG4gICAgICAgICAgICAgICAgICAgIGxldmVsOiA3XG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgYmxvYlBhcnRzID0gW10sXG4gICAgICAgICAgICAgICAgbWFnaWMgPSBuZXcgVWludDhBcnJheShDSElfTUFHSUMubGVuZ3RoKTtcbiAgICBcbiAgICAgICAgICAgIC8vIFRoZSBtYWdpYyBmaWxlIHNpZ25hdHVyZSBpcyBub3QgWkxJQiBjb21wcmVzc2VkOlxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBDSElfTUFHSUMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBtYWdpY1tpXSA9IENISV9NQUdJQy5jaGFyQ29kZUF0KGkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYmxvYlBhcnRzLnB1c2gobWFnaWMpO1xuICAgIFxuICAgICAgICAgICAgLy8gVGhlIHJlc3QgZ2V0cyBjb21wcmVzc2VkXG4gICAgICAgICAgICBkZWZsYXRvci5wdXNoKHNlcmlhbGl6ZUhlYWRlckNodW5rKGFydHdvcmspLCBmYWxzZSk7XG4gICAgXG4gICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICBsYXllcnMgPSBhcnR3b3JrLmdldExheWVycygpLFxuICAgICAgICAgICAgICAgIGkgPSAwO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBJbnNlcnQgYSBzZXR0aW1lb3V0IGJldHdlZW4gZWFjaCBzZXJpYWxpemVkIGxheWVyLCBzbyB3ZSBjYW4gbWFpbnRhaW4gYnJvd3NlciByZXNwb25zaXZlbmVzc1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBmdW5jdGlvbiBzZXJpYWxpemVMYXllcigpIHtcbiAgICAgICAgICAgICAgICBpZiAoaSA9PSBsYXllcnMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIGRlZmxhdG9yLnB1c2goc2VyaWFsaXplRW5kQ2h1bmsoYXJ0d29yayksIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgYmxvYlBhcnRzLnB1c2goZGVmbGF0b3IucmVzdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUobmV3IEJsb2IoYmxvYlBhcnRzLCB7dHlwZTogXCJhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW1cIn0pKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBkZWZsYXRvci5wdXNoKHNlcmlhbGl6ZUxheWVyQ2h1bmsobGF5ZXJzW2krK10pLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KHNlcmlhbGl6ZUxheWVyLCAxMCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBzZXRUaW1lb3V0KHNlcmlhbGl6ZUxheWVyLCAxMCk7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICBmdW5jdGlvbiBoYXNDaGliaU1hZ2ljTWFya2VyKGFycmF5KSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgQ0hJX01BR0lDLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAoYXJyYXlbaV0gIT0gQ0hJX01BR0lDLmNoYXJDb2RlQXQoaSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDb25jYXQgdHdvIFVpbnQ4QXJyYXlzIHRvIG1ha2UgYSBuZXcgb25lIGFuZCByZXR1cm4gaXQuXG4gICAgICogXG4gICAgICogRWl0aGVyIG9uZSBtYXkgYmUgc2V0IHRvIG51bGwuIElmIGVpdGhlciBvbmUgaXMgbnVsbCwgdGhlIG90aGVyIGlzIHJldHVybmVkLiBJZiBib3RoIGFyZSBudWxsLCBudWxsIGlzXG4gICAgICogcmV0dXJuZWQuXG4gICAgICovXG4gICAgZnVuY3Rpb24gY29uY2F0QnVmZmVycyhvbmUsIHR3bykge1xuICAgICAgICBpZiAob25lID09IG51bGwgfHwgb25lLmxlbmd0aCA9PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gdHdvO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0d28gPT0gbnVsbCB8fCB0d28ubGVuZ3RoID09IDApIHtcbiAgICAgICAgICAgIHJldHVybiBvbmU7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHZhclxuICAgICAgICAgICAgcmVzdWx0ID0gbmV3IFVpbnQ4QXJyYXkob25lLmxlbmd0aCArIHR3by5sZW5ndGgpO1xuICAgICAgICBcbiAgICAgICAgcmVzdWx0LnNldChvbmUsIDApO1xuICAgICAgICByZXN1bHQuc2V0KHR3bywgb25lLmxlbmd0aCk7XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICBcbiAgICAvKipcbiAgICAgKiBBdHRlbXB0IHRvIGxvYWQgYSBjaGliaWZpbGUgZnJvbSB0aGUgZ2l2ZW4gYXJyYXlidWZmZXIuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBBIENQQXJ0d29yayBvbiBzdWNjZXNzLCBvciBudWxsIG9uIGZhaWx1cmUuXG4gICAgICovXG4gICAgdGhpcy5yZWFkID0gZnVuY3Rpb24oYXJyYXlCdWZmZXIpIHtcbiAgICAgICAgY29uc3RcbiAgICAgICAgICAgIFNUQVRFX1dBSVRfRk9SX0NIVU5LICAgICAgICAgICAgICAgPSAwLFxuICAgICAgICAgICAgU1RBVEVfREVDT0RFX0lNQUdFX0hFQURFUiAgICAgICAgICA9IDEsXG4gICAgICAgICAgICBTVEFURV9ERUNPREVfTEFZRVJfSEVBREVSX0ZJWEVEICAgID0gMixcbiAgICAgICAgICAgIFNUQVRFX0RFQ09ERV9MQVlFUl9IRUFERVJfVkFSSUFCTEUgPSAzLFxuICAgICAgICAgICAgU1RBVEVfREVDT0RFX0xBWUVSICAgICAgICAgICAgICAgICA9IDQsXG4gICAgICAgICAgICBTVEFURV9TS0lQX1RSQUlMSU5HX0NIVU5LX0JZVEVTICAgID0gNSxcbiAgICAgICAgICAgIFNUQVRFX1NVQ0NFU1MgICAgICAgICAgICAgICAgICAgICAgPSA2LFxuICAgICAgICAgICAgU1RBVEVfRkFUQUwgICAgICAgICAgICAgICAgICAgICAgICA9IDEwO1xuICAgICAgICBcbiAgICAgICAgdmFyXG4gICAgICAgICAgICBwYWtvID0gbmV3IHdpbmRvdy5wYWtvLkluZmxhdGUoe30pLFxuICAgICAgICAgICAgc3RhdGUgPSBTVEFURV9XQUlUX0ZPUl9DSFVOSyxcbiAgICAgICAgICAgIGFydHdvcmsgPSBudWxsLFxuICAgICAgICAgICAgbGF5ZXJIZWFkZXIsIGxheWVyLCBcbiAgICAgICAgICAgIGxheWVyQnl0ZXNSZWFkLCBsYXllckJ5dGVzVG90YWwsIHNraXBDb3VudCxcbiAgICAgICAgICAgIGhlYWRlckNodW5rID0gbnVsbCwgaGVhZGVyID0gbnVsbCxcbiAgICAgICAgICAgIGNodW5rID0gbnVsbCxcbiAgICAgICAgICAgIGJ1ZmZlciA9IG51bGw7XG4gICAgICAgIFxuICAgICAgICAvKipcbiAgICAgICAgICogRGVjb2RlIEEsUixHLEIgcGl4ZWxzIGZyb20gdGhlIGdpdmVuIGJ1ZmZlciBpbnRvIHRoZSBSLEcsQixBIHBpeGVsIGFycmF5IGdpdmVuIGJ5IGxheWVyUGl4LlxuICAgICAgICAgKiBcbiAgICAgICAgICogVGhlIGxheWVyQnl0ZXNSZWFkIGFuZCBsYXllckJ5dGVzVG90YWwgdmFyaWFibGVzIGFyZSB1c2VkIHRvIGtlZXAgdHJhY2sgb2YgdGhlIGRlY29kZSBwcm9jZXNzIGFuZCB0byBcbiAgICAgICAgICogbGltaXQgdGhlIG51bWJlciBvZiBieXRlcyByZWFkLCByZXNwZWN0aXZlbHkuXG4gICAgICAgICAqIFxuICAgICAgICAgKiBSZXR1cm5zIHRoZSBidWZmZXIgd2l0aCB0aGUgcmVhZCBieXRlcyByZW1vdmVkIGZyb20gdGhlIGZyb250LCBvciBudWxsIGlmIHRoZSBidWZmZXIgd2FzIHJlYWQgaW4gaXRzIGVudGlyZXR5LlxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gZGVjb2RlUGl4ZWxzKGJ1ZmZlciwgbGF5ZXJQaXgpIHtcbiAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgIHN1YnBpeGVsID0gbGF5ZXJCeXRlc1JlYWQgJSBCWVRFU19QRVJfUElYRUwsXG4gICAgICAgICAgICAgICAgZHN0UGl4ZWxTdGFydE9mZnNldCA9IGxheWVyQnl0ZXNSZWFkIC0gc3VicGl4ZWwsXG4gICAgICAgICAgICAgICAgYnVmZmVyUG9zID0gMCxcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBNYXAgZnJvbSBzb3VyY2UgY2hhbm5lbCBvcmRlciB0byBDUExheWVyJ3MgZGVzdCBvcmRlclxuICAgICAgICAgICAgICAgIGNoYW5uZWxNYXAgPSBbXG4gICAgICAgICAgICAgICAgICAgIEFMUEhBX0JZVEVfT0ZGU0VULCBSRURfQllURV9PRkZTRVQsIEdSRUVOX0JZVEVfT0ZGU0VULCBCTFVFX0JZVEVfT0ZGU0VUXG4gICAgICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gVGhlIGZpcnN0IHBpeGVsIG1pZ2h0IGJlIGEgcGFydGlhbCBvbmUgc2luY2Ugd2UgbWlnaHQgYmUgY29udGludWluZyBhIHBpeGVsIHNwbGl0IG92ZXIgYnVmZmVyc1xuICAgICAgICAgICAgZm9yICg7IHN1YnBpeGVsIDwgQllURVNfUEVSX1BJWEVMICYmIGJ1ZmZlclBvcyA8IGJ1ZmZlci5sZW5ndGg7IHN1YnBpeGVsKyspIHtcbiAgICAgICAgICAgICAgICBsYXllclBpeFtkc3RQaXhlbFN0YXJ0T2Zmc2V0ICsgY2hhbm5lbE1hcFtzdWJwaXhlbF1dID0gYnVmZmVyW2J1ZmZlclBvc107XG4gICAgICAgICAgICAgICAgbGF5ZXJCeXRlc1JlYWQrKztcbiAgICAgICAgICAgICAgICBidWZmZXJQb3MrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gSG93IG1hbnkgbW9yZSBwaXhlbHMgYXJlIHdlIHRvIHJlYWQgaW4gdGhpcyBidWZmZXI/XG4gICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICBieXRlc1JlbWFpbiA9IE1hdGgubWluKGJ1ZmZlci5sZW5ndGggLSBidWZmZXJQb3MsIGxheWVyQnl0ZXNUb3RhbCAtIGxheWVyQnl0ZXNSZWFkKSB8IDAsXG4gICAgICAgICAgICAgICAgZnVsbFBpeGVsc1JlbWFpbiA9IChieXRlc1JlbWFpbiAvIEJZVEVTX1BFUl9QSVhFTCkgfCAwLFxuICAgICAgICAgICAgICAgIHN1YnBpeGVsc1JlbWFpbiA9IGJ5dGVzUmVtYWluICUgQllURVNfUEVSX1BJWEVMO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGZ1bGxQaXhlbHNSZW1haW47IGkrKykge1xuICAgICAgICAgICAgICAgIGxheWVyUGl4W2xheWVyQnl0ZXNSZWFkICsgQUxQSEFfQllURV9PRkZTRVRdID0gYnVmZmVyW2J1ZmZlclBvc107XG4gICAgICAgICAgICAgICAgbGF5ZXJQaXhbbGF5ZXJCeXRlc1JlYWQgKyBSRURfQllURV9PRkZTRVRdID0gYnVmZmVyW2J1ZmZlclBvcyArIDFdO1xuICAgICAgICAgICAgICAgIGxheWVyUGl4W2xheWVyQnl0ZXNSZWFkICsgR1JFRU5fQllURV9PRkZTRVRdID0gYnVmZmVyW2J1ZmZlclBvcyArIDJdO1xuICAgICAgICAgICAgICAgIGxheWVyUGl4W2xheWVyQnl0ZXNSZWFkICsgQkxVRV9CWVRFX09GRlNFVF0gPSBidWZmZXJbYnVmZmVyUG9zICsgM107XG4gICAgICAgICAgICAgICAgbGF5ZXJCeXRlc1JlYWQgKz0gQllURVNfUEVSX1BJWEVMO1xuICAgICAgICAgICAgICAgIGJ1ZmZlclBvcyArPSBCWVRFU19QRVJfUElYRUw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFJlYWQgYSBmcmFjdGlvbmFsIHBpeGVsIGF0IHRoZSBlbmQgb2YgdGhlIGJ1ZmZlclxuICAgICAgICAgICAgZHN0UGl4ZWxTdGFydE9mZnNldCA9IGxheWVyQnl0ZXNSZWFkO1xuICAgICAgICAgICAgZm9yIChzdWJwaXhlbCA9IDA7IHN1YnBpeGVsIDwgc3VicGl4ZWxzUmVtYWluOyBzdWJwaXhlbCsrKSB7XG4gICAgICAgICAgICAgICAgbGF5ZXJQaXhbZHN0UGl4ZWxTdGFydE9mZnNldCArIGNoYW5uZWxNYXBbc3VicGl4ZWxdXSA9IGJ1ZmZlcltidWZmZXJQb3NdO1xuICAgICAgICAgICAgICAgIGxheWVyQnl0ZXNSZWFkKys7XG4gICAgICAgICAgICAgICAgYnVmZmVyUG9zKys7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChidWZmZXJQb3MgPCBidWZmZXIubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgLy8gTGF5ZXIgd2FzIGNvbXBsZXRlZCBiZWZvcmUgdGhlIGVuZCBvZiB0aGUgYnVmZmVyLCB0aGVyZSBpcyBidWZmZXIgbGVmdCBvdmVyIGZvciBzb21lb25lIGVsc2UgdG8gdXNlXG4gICAgICAgICAgICAgICAgcmV0dXJuIGJ1ZmZlci5zdWJhcnJheShidWZmZXJQb3MpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBCdWZmZXIgZXhoYXVzdGVkXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGZ1bmN0aW9uIHByb2Nlc3NCbG9jayhibG9jaykge1xuICAgICAgICAgICAgdmFyIFxuICAgICAgICAgICAgICAgIHN0cmVhbTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gQWRkIGEgbG9vcCBoZXJlIHNvIHdlIGNhbiByZS1lbnRlciB0aGUgc3dpdGNoIHdpdGggJ2NvbnRpbnVlJ1xuICAgICAgICAgICAgd2hpbGUgKHRydWUpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKHN0YXRlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgU1RBVEVfV0FJVF9GT1JfQ0hVTks6XG4gICAgICAgICAgICAgICAgICAgICAgICBidWZmZXIgPSBjb25jYXRCdWZmZXJzKGJ1ZmZlciwgYmxvY2spO1xuICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2sgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBXYWl0IGZvciB3aG9sZSBjaHVuayBoZWFkZXIgdG8gYmVjb21lIGF2YWlsYWJsZVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGJ1ZmZlci5sZW5ndGggPCA4KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIERlY29kZSBjaHVuayBoZWFkZXJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0cmVhbSA9IG5ldyBBcnJheURhdGFTdHJlYW0oYnVmZmVyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNodW5rID0gbmV3IENQQ2hpYmlDaHVua0hlYWRlcihzdHJlYW0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBSZW1vdmUgdGhlIGNodW5rIGhlYWRlciBmcm9tIHRoZSBzdGFydCBvZiB0aGUgYnVmZmVyXG4gICAgICAgICAgICAgICAgICAgICAgICBidWZmZXIgPSBidWZmZXIuc3ViYXJyYXkoc3RyZWFtLnBvcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChoZWFkZXJDaHVuaykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjaHVuay5jaHVua1R5cGUgPT0gQ0hVTktfVEFHX0VORCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZSA9IFNUQVRFX1NVQ0NFU1M7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoY2h1bmsuY2h1bmtUeXBlID09IENIVU5LX1RBR19MQVlFUikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZSA9IFNUQVRFX0RFQ09ERV9MQVlFUl9IRUFERVJfRklYRUQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJVbmtub3duIGNodW5rIHR5cGUgJ1wiICsgY2h1bmsuY2h1bmtUeXBlICsgXCInLCBhdHRlbXB0aW5nIHRvIHNraXAuLi5cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9jayA9IGJ1ZmZlcjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnVmZmVyID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNraXBDb3VudCA9IGNodW5rLmNodW5rU2l6ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUgPSBTVEFURV9TS0lQX1RSQUlMSU5HX0NIVU5LX0JZVEVTO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoY2h1bmsuY2h1bmtUeXBlID09IENIVU5LX1RBR19IRUFEKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyQ2h1bmsgPSBjaHVuaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBUcnkgdG8gZGVjb2RlIHRoZSBoZWFkZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZSA9IFNUQVRFX0RFQ09ERV9JTUFHRV9IRUFERVI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZpbGUgZGlkbid0IHN0YXJ0IHdpdGggaW1hZ2UgaGVhZGVyIGNodW5rXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUgPSBTVEFURV9GQVRBTDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgU1RBVEVfREVDT0RFX0lNQUdFX0hFQURFUjpcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1ZmZlciA9IGNvbmNhdEJ1ZmZlcnMoYnVmZmVyLCBibG9jayk7XG4gICAgICAgICAgICAgICAgICAgICAgICBibG9jayA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFdhaXQgZm9yIHdob2xlIGNodW5rIHRvIGJlIGF2YWlsYWJsZVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGJ1ZmZlci5sZW5ndGggPCBoZWFkZXJDaHVuay5jaHVua1NpemUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgc3RyZWFtID0gbmV3IEFycmF5RGF0YVN0cmVhbShidWZmZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyID0gbmV3IENQQ2hpYmlIZWFkZXIoc3RyZWFtLCBoZWFkZXJDaHVuayk7XG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgoaGVhZGVyLnZlcnNpb24gPj4+IDE2KSA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZSA9IFNUQVRFX0ZBVEFMOyAvLyB0aGUgZmlsZSB2ZXJzaW9uIGlzIGhpZ2hlciB0aGFuIHdoYXQgd2UgY2FuIGRlYWwgd2l0aCwgYmFpbCBvdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgYXJ0d29yayA9IG5ldyBDUEFydHdvcmsoaGVhZGVyLndpZHRoLCBoZWFkZXIuaGVpZ2h0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2sgPSBidWZmZXI7XG4gICAgICAgICAgICAgICAgICAgICAgICBidWZmZXIgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBza2lwQ291bnQgPSBoZWFkZXJDaHVuay5jaHVua1NpemU7IC8vIFNraXAgdGhlIGhlYWRlciBjaHVuayBhbG9uZyB3aXRoIGFueSB0cmFpbGluZyBieXRlc1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUgPSBTVEFURV9TS0lQX1RSQUlMSU5HX0NIVU5LX0JZVEVTO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFNUQVRFX0RFQ09ERV9MQVlFUl9IRUFERVJfRklYRUQ6XG4gICAgICAgICAgICAgICAgICAgICAgICBidWZmZXIgPSBjb25jYXRCdWZmZXJzKGJ1ZmZlciwgYmxvY2spO1xuICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2sgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBXYWl0IGZvciBmaXJzdCBwYXJ0IG9mIGhlYWRlciB0byBhcnJpdmVcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChidWZmZXIubGVuZ3RoIDwgQ1BDaGliaUxheWVyQ2h1bmtIZWFkZXIuRklYRURfSEVBREVSX0xFTkdUSCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBsYXllckhlYWRlciA9IG5ldyBDUENoaWJpTGF5ZXJDaHVua0hlYWRlcigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHJlYW0gPSBuZXcgQXJyYXlEYXRhU3RyZWFtKGJ1ZmZlcik7XG4gICAgICAgICAgICAgICAgICAgICAgICBsYXllckhlYWRlci5yZWFkRml4ZWRIZWFkZXIoc3RyZWFtKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgYnVmZmVyID0gYnVmZmVyLnN1YmFycmF5KHN0cmVhbS5wb3MpO1xuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZSA9IFNUQVRFX0RFQ09ERV9MQVlFUl9IRUFERVJfVkFSSUFCTEVcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBTVEFURV9ERUNPREVfTEFZRVJfSEVBREVSX1ZBUklBQkxFOlxuICAgICAgICAgICAgICAgICAgICAgICAgYnVmZmVyID0gY29uY2F0QnVmZmVycyhidWZmZXIsIGJsb2NrKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gV2FpdCBmb3IgdmFyaWFibGUgcGFydCBvZiBoZWFkZXIgdG8gYXJyaXZlXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYnVmZmVyLmxlbmd0aCA8IGxheWVySGVhZGVyLmdldFZhcmlhYmxlSGVhZGVyTGVuKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgc3RyZWFtID0gbmV3IEFycmF5RGF0YVN0cmVhbShidWZmZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbGF5ZXJIZWFkZXIucmVhZFZhcmlhYmxlSGVhZGVyKHN0cmVhbSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1ZmZlciA9IGJ1ZmZlci5zdWJhcnJheShzdHJlYW0ucG9zKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgbGF5ZXIgPSBuZXcgQ1BMYXllcihoZWFkZXIud2lkdGgsIGhlYWRlci5oZWlnaHQsIGxheWVySGVhZGVyLm5hbWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbGF5ZXIuYmxlbmRNb2RlID0gbGF5ZXJIZWFkZXIuYmxlbmRNb2RlO1xuICAgICAgICAgICAgICAgICAgICAgICAgbGF5ZXIuYWxwaGEgPSBsYXllckhlYWRlci5hbHBoYTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxheWVyLnZpc2libGUgPSBsYXllckhlYWRlci52aXNpYmxlO1xuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBsYXllckJ5dGVzUmVhZCA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICBsYXllckJ5dGVzVG90YWwgPSBoZWFkZXIud2lkdGggKiBoZWFkZXIuaGVpZ2h0ICogQllURVNfUEVSX1BJWEVMO1xuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAvKiBcbiAgICAgICAgICAgICAgICAgICAgICAgICAqIFdoaWxlIGRlY29kaW5nIGxheWVycywgd2Ugd29uJ3Qga2VlcCBhIHBlcnNpc3RlbnQgYnVmZmVyIGFyb3VuZCwgc28gaWYgd2UgaGF2ZSBhbnlcbiAgICAgICAgICAgICAgICAgICAgICAgICAqIGJ5dGVzIGxlZnQgb3ZlciwgcHJvdmlkZSB0aGVtIHRvIHRoZSBuZXh0IHN0YXRlIGFzIGlmIHRoZXkgd2VyZSBhIG5ld2x5IGluZmxhdGVkIGJsb2NrLlxuICAgICAgICAgICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgICAgICAgICBibG9jayA9IGJ1ZmZlcjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1ZmZlciA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlID0gU1RBVEVfREVDT0RFX0xBWUVSO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFNUQVRFX0RFQ09ERV9MQVlFUjpcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qIFxuICAgICAgICAgICAgICAgICAgICAgICAgICogV2hlbiBkZWNvZGluZyBsYXllciBkYXRhLCB3ZSBuZXZlciBjb25jYXQgYmxvY2tzIHRvZ2V0aGVyLCB3ZSBhcmUgY2FwYWJsZSBvZiBkZWNvZGluZ1xuICAgICAgICAgICAgICAgICAgICAgICAgICogcGFydGlhbCBwaXhlbHMgdGhhdCBnZXQgc3BsaXQgb3ZlciBibG9jayBib3VuZGFyaWVzLiBTbyB3ZSBkb24ndCB1c2UgJ2J1ZmZlcicgdG8gYWNjdW11bGF0ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICogZGF0YSwgYW5kIG9ubHkgcmVhZCBmcm9tIGluY29taW5nICdibG9jaydzLlxuICAgICAgICAgICAgICAgICAgICAgICAgICovIFxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGJsb2NrICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9jayA9IGRlY29kZVBpeGVscyhibG9jaywgbGF5ZXIuZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGxheWVyQnl0ZXNSZWFkID49IGxheWVyQnl0ZXNUb3RhbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcnR3b3JrLmFkZExheWVyT2JqZWN0KGxheWVyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNraXAgYW55IHRyYWlsaW5nIGJ5dGVzIGluIHRoZSBsYXllciBjaHVua1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBza2lwQ291bnQgPSBjaHVuay5jaHVua1NpemUgLSBsYXllckhlYWRlci5nZXRUb3RhbEhlYWRlckxlbigpIC0gbGF5ZXJCeXRlc1RvdGFsO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZSA9IFNUQVRFX1NLSVBfVFJBSUxJTkdfQ0hVTktfQllURVM7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgU1RBVEVfU0tJUF9UUkFJTElOR19DSFVOS19CWVRFUzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChibG9jaykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChza2lwQ291bnQgPCBibG9jay5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2sgPSBibG9jay5zdWJhcnJheShza2lwQ291bnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBza2lwQ291bnQgPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNraXBDb3VudCAtPSBibG9jay5sZW5ndGg7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChza2lwQ291bnQgPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlID0gU1RBVEVfV0FJVF9GT1JfQ0hVTks7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgYXJyYXlCdWZmZXIgPSBuZXcgVWludDhBcnJheShhcnJheUJ1ZmZlcik7XG5cbiAgICAgICAgaWYgKCFoYXNDaGliaU1hZ2ljTWFya2VyKGFycmF5QnVmZmVyKSkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7IC8vIG5vdCBhIENoaWJpUGFpbnQgZmlsZVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBSZW1vdmUgdGhlIG1hZ2ljIGhlYWRlclxuICAgICAgICBhcnJheUJ1ZmZlciA9IGFycmF5QnVmZmVyLnN1YmFycmF5KENISV9NQUdJQy5sZW5ndGgpO1xuICAgICAgICBcbiAgICAgICAgcGFrby5vbkRhdGEgPSBwcm9jZXNzQmxvY2s7XG4gICAgICAgIFxuICAgICAgICBwYWtvLm9uRW5kID0gZnVuY3Rpb24oc3RhdHVzKSB7XG4gICAgICAgICAgICBpZiAoc3RhdHVzID09PSAwICYmIHN0YXRlID09IFNUQVRFX1NVQ0NFU1MpIHtcbiAgICAgICAgICAgICAgICBhcnR3b3JrLnNldEFjdGl2ZUxheWVySW5kZXgoYXJ0d29yay5nZXRUb3Btb3N0VmlzaWJsZUxheWVyKCkpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHRoaXMucmVzdWx0ID0gYXJ0d29yaztcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJGYXRhbCBlcnJvciBkZWNvZGluZyBDaGliaUZpbGVcIik7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgdGhpcy5yZXN1bHQgPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIC8vIEJlZ2luIGRlY29tcHJlc3Npb24vZGVjb2RpbmdcbiAgICAgICAgcGFrby5wdXNoKGFycmF5QnVmZmVyKTtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiBwYWtvLnJlc3VsdDtcbiAgICB9O1xufVxuIiwiLypcbiAgICBDaGlja2VuUGFpbnRcblxuICAgIENoaWNrZW5QYWludCBpcyBhIHRyYW5zbGF0aW9uIG9mIENoaWJpUGFpbnQgZnJvbSBKYXZhIHRvIEphdmFTY3JpcHRcbiAgICBieSBOaWNob2xhcyBTaGVybG9jayAvIENoaWNrZW4gU21vb3RoaWUuXG5cbiAgICBDaGliaVBhaW50IGlzIENvcHlyaWdodCAoYykgMjAwNi0yMDA4IE1hcmMgU2NoZWZlclxuXG4gICAgQ2hpY2tlblBhaW50IGlzIGZyZWUgc29mdHdhcmU6IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vciBtb2RpZnlcbiAgICBpdCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGFzIHB1Ymxpc2hlZCBieVxuICAgIHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb24sIGVpdGhlciB2ZXJzaW9uIDMgb2YgdGhlIExpY2Vuc2UsIG9yXG4gICAgKGF0IHlvdXIgb3B0aW9uKSBhbnkgbGF0ZXIgdmVyc2lvbi5cblxuICAgIENoaWNrZW5QYWludCBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLFxuICAgIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mXG4gICAgTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiAgU2VlIHRoZVxuICAgIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuXG5cbiAgICBZb3Ugc2hvdWxkIGhhdmUgcmVjZWl2ZWQgYSBjb3B5IG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZVxuICAgIGFsb25nIHdpdGggQ2hpY2tlblBhaW50LiBJZiBub3QsIHNlZSA8aHR0cDovL3d3dy5nbnUub3JnL2xpY2Vuc2VzLz4uXG4qL1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBDUENsaXAoYm1wLCB4LCB5KSB7XG4gICAgdGhpcy5ibXAgPSBibXA7XG4gICAgXG4gICAgdGhpcy54ID0geDtcbiAgICB0aGlzLnkgPSB5O1xufTsiLCIvKlxuICAgIENoaWNrZW5QYWludFxuICAgIFxuICAgIENoaWNrZW5QYWludCBpcyBhIHRyYW5zbGF0aW9uIG9mIENoaWJpUGFpbnQgZnJvbSBKYXZhIHRvIEphdmFTY3JpcHRcbiAgICBieSBOaWNob2xhcyBTaGVybG9jayAvIENoaWNrZW4gU21vb3RoaWUuXG4gICAgXG4gICAgQ2hpYmlQYWludCBpcyBDb3B5cmlnaHQgKGMpIDIwMDYtMjAwOCBNYXJjIFNjaGVmZXJcblxuICAgIENoaWNrZW5QYWludCBpcyBmcmVlIHNvZnR3YXJlOiB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3IgbW9kaWZ5XG4gICAgaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBhcyBwdWJsaXNoZWQgYnlcbiAgICB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uLCBlaXRoZXIgdmVyc2lvbiAzIG9mIHRoZSBMaWNlbnNlLCBvclxuICAgIChhdCB5b3VyIG9wdGlvbikgYW55IGxhdGVyIHZlcnNpb24uXG5cbiAgICBDaGlja2VuUGFpbnQgaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCxcbiAgICBidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZlxuICAgIE1FUkNIQU5UQUJJTElUWSBvciBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS4gIFNlZSB0aGVcbiAgICBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9yZSBkZXRhaWxzLlxuXG4gICAgWW91IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2VcbiAgICBhbG9uZyB3aXRoIENoaWNrZW5QYWludC4gSWYgbm90LCBzZWUgPGh0dHA6Ly93d3cuZ251Lm9yZy9saWNlbnNlcy8+LlxuKi9cblxuaW1wb3J0IENQQml0bWFwIGZyb20gXCIuL0NQQml0bWFwXCI7XG5pbXBvcnQgQ1BSZWN0IGZyb20gXCIuLi91dGlsL0NQUmVjdFwiO1xuXG5mdW5jdGlvbiBjcmVhdGVJbWFnZURhdGEod2lkdGgsIGhlaWdodCkge1xuICAgIC8vIHJldHVybiBuZXcgSW1hZ2VEYXRhKHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0KTsgLy8gRG9lc24ndCB3b3JrIG9uIG9sZCBJRVxuICAgIHZhclxuICAgICAgICBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpLFxuICAgICAgICBjb250ZXh0ID0gY2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcbiAgICBcbiAgICByZXR1cm4gY29udGV4dC5jcmVhdGVJbWFnZURhdGEod2lkdGgsIGhlaWdodCk7XG59XG5cbi8vXG4vLyBBIDMyYnBwIGJpdG1hcCBjbGFzcyAob25lIGJ5dGUgcGVyIGNoYW5uZWwgaW4gUkdCQSBvcmRlcilcbi8vXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIENQQ29sb3JCbXAod2lkdGgsIGhlaWdodCkge1xuICAgIENQQml0bWFwLmNhbGwodGhpcywgd2lkdGgsIGhlaWdodCk7XG5cbiAgICAvLyBUaGUgSW1hZ2VEYXRhIG9iamVjdCB0aGF0IGhvbGRzIHRoZSBpbWFnZSBkYXRhXG4gICAgdGhpcy5pbWFnZURhdGEgPSBjcmVhdGVJbWFnZURhdGEodGhpcy53aWR0aCwgdGhpcy5oZWlnaHQpO1xuICAgIFxuICAgIC8vIFRoZSBiaXRtYXAgZGF0YSBhcnJheSAob25lIGJ5dGUgcGVyIGNoYW5uZWwgaW4gUkdCQSBvcmRlcilcbiAgICB0aGlzLmRhdGEgPSB0aGlzLmltYWdlRGF0YS5kYXRhO1xufVxuXG5DUENvbG9yQm1wLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoQ1BCaXRtYXAucHJvdG90eXBlKTtcbkNQQ29sb3JCbXAucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gQ1BDb2xvckJtcDtcblxuQ1BDb2xvckJtcC5CWVRFU19QRVJfUElYRUwgPSA0O1xuQ1BDb2xvckJtcC5SRURfQllURV9PRkZTRVQgPSAwO1xuQ1BDb2xvckJtcC5HUkVFTl9CWVRFX09GRlNFVCA9IDE7XG5DUENvbG9yQm1wLkJMVUVfQllURV9PRkZTRVQgPSAyO1xuQ1BDb2xvckJtcC5BTFBIQV9CWVRFX09GRlNFVCA9IDM7XG5cbi8vIENyZWF0ZXMgYSBDUEJpdG1hcCBmcm9tIGEgcG9ydGlvbiBvZiB0aGlzIGJpdG1hcFxuQ1BDb2xvckJtcC5wcm90b3R5cGUuY2xvbmVSZWN0ID0gZnVuY3Rpb24ocmVjdCkge1xuICAgIHZhclxuICAgICAgICByZXN1bHQgPSBuZXcgQ1BDb2xvckJtcChyZWN0LmdldFdpZHRoKCksIHJlY3QuZ2V0SGVpZ2h0KCkpO1xuICAgIFxuICAgIHJlc3VsdC5jb3B5Qml0bWFwUmVjdCh0aGlzLCAwLCAwLCByZWN0KTtcbiAgICBcbiAgICByZXR1cm4gcmVzdWx0O1xufTtcblxuLy9cbi8vIFBpeGVsIGFjY2VzcyB3aXRoIGZyaWVuZGx5IGNsaXBwaW5nLiBQaXhlbCB3aWxsIGJlIDMyLWJpdCBpbnRlZ2VyIGluIEFSR0IgZm9ybWF0XG4vL1xuQ1BDb2xvckJtcC5wcm90b3R5cGUuZ2V0UGl4ZWwgPSBmdW5jdGlvbih4LCB5KSB7XG4gICAgeCA9IE1hdGgubWF4KDAsIE1hdGgubWluKHRoaXMud2lkdGggLSAxLCB4KSk7XG4gICAgeSA9IE1hdGgubWF4KDAsIE1hdGgubWluKHRoaXMuaGVpZ2h0IC0gMSwgeSkpO1xuXG4gICAgdmFyXG4gICAgICAgIHBpeEluZGV4ID0gdGhpcy5vZmZzZXRPZlBpeGVsKHgsIHkpO1xuICAgIFxuICAgIHJldHVybiAodGhpcy5kYXRhW3BpeEluZGV4ICsgQ1BDb2xvckJtcC5BTFBIQV9CWVRFX09GRlNFVF0gPDwgMjQpIFxuICAgICAgICB8ICh0aGlzLmRhdGFbcGl4SW5kZXggKyBDUENvbG9yQm1wLlJFRF9CWVRFX09GRlNFVF0gICAgPDwgMTYpIFxuICAgICAgICB8ICh0aGlzLmRhdGFbcGl4SW5kZXggKyBDUENvbG9yQm1wLkdSRUVOX0JZVEVfT0ZGU0VUXSAgPDwgOCkgXG4gICAgICAgIHwgdGhpcy5kYXRhW3BpeEluZGV4ICsgQ1BDb2xvckJtcC5CTFVFX0JZVEVfT0ZGU0VUXTtcbn07XG5cbi8qKlxuICogR2V0IGFuIHIsZyxiLGEgYXJyYXkgb2YgdGhlIHhvciBvZiB0aGlzIGJpdG1hcCBhbmQgdGhlIGdpdmVuIG9uZSwgd2l0aGluIHRoZSBnaXZlbiByZWN0YW5nbGVcbiAqXG4gKiBAcmV0dXJucyB7VWludDhBcnJheX1cbiAqL1xuQ1BDb2xvckJtcC5wcm90b3R5cGUuY29weVJlY3RYT1IgPSBmdW5jdGlvbihibXAsIHJlY3QpIHtcbiAgICByZWN0ID0gdGhpcy5nZXRCb3VuZHMoKS5jbGlwKHJlY3QpO1xuICAgIFxuICAgIHZhciBcbiAgICAgICAgdyA9IHJlY3QuZ2V0V2lkdGgoKSxcbiAgICAgICAgaCA9IHJlY3QuZ2V0SGVpZ2h0KCksXG4gICAgICAgIFxuICAgICAgICBidWZmZXIgPSBuZXcgVWludDhBcnJheSh3ICogaCAqIENQQ29sb3JCbXAuQllURVNfUEVSX1BJWEVMKSxcbiAgICAgICAgXG4gICAgICAgIG91dHB1dEluZGV4ID0gMCxcbiAgICAgICAgYm1wMUluZGV4ID0gdGhpcy5vZmZzZXRPZlBpeGVsKHJlY3QubGVmdCwgcmVjdC50b3ApLCBcbiAgICAgICAgYm1wMkluZGV4ID0gYm1wLm9mZnNldE9mUGl4ZWwocmVjdC5sZWZ0LCByZWN0LnRvcCksXG4gICAgICAgIFxuICAgICAgICBibXAxWVNraXAgPSAodGhpcy53aWR0aCAtIHcpICogQ1BDb2xvckJtcC5CWVRFU19QRVJfUElYRUwsXG4gICAgICAgIGJtcDJZU2tpcCA9IChibXAud2lkdGggLSB3KSAqIENQQ29sb3JCbXAuQllURVNfUEVSX1BJWEVMLFxuICAgICAgICBcbiAgICAgICAgd2lkdGhCeXRlcyA9IHcgKiBDUENvbG9yQm1wLkJZVEVTX1BFUl9QSVhFTDtcbiAgICBcbiAgICBmb3IgKHZhciB5ID0gcmVjdC50b3A7IHkgPCByZWN0LmJvdHRvbTsgeSsrLCBibXAxSW5kZXggKz0gYm1wMVlTa2lwLCBibXAySW5kZXggKz0gYm1wMllTa2lwKSB7XG4gICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgd2lkdGhCeXRlczsgeCsrLCBvdXRwdXRJbmRleCsrLCBibXAxSW5kZXgrKywgYm1wMkluZGV4KyspIHtcbiAgICAgICAgICAgIGJ1ZmZlcltvdXRwdXRJbmRleF0gPSB0aGlzLmRhdGFbYm1wMUluZGV4XSBeIGJtcC5kYXRhW2JtcDJJbmRleF07XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gYnVmZmVyO1xufTtcblxuQ1BDb2xvckJtcC5wcm90b3R5cGUuc2V0UmVjdFhPUiA9IGZ1bmN0aW9uKGJ1ZmZlciwgcmVjdCkge1xuICAgIHJlY3QgPSB0aGlzLmdldEJvdW5kcygpLmNsaXAocmVjdCk7XG4gICAgXG4gICAgdmFyIFxuICAgICAgICB3ID0gcmVjdC5nZXRXaWR0aCgpLFxuICAgICAgICBoID0gcmVjdC5nZXRIZWlnaHQoKSxcbiAgICAgICAgXG4gICAgICAgIGJtcDFJbmRleCA9IHRoaXMub2Zmc2V0T2ZQaXhlbChyZWN0LmxlZnQsIHJlY3QudG9wKSxcbiAgICAgICAgYnVmZmVySW5kZXggPSAwLFxuICAgICAgICBcbiAgICAgICAgYm1wMVlTa2lwID0gKHRoaXMud2lkdGggLSB3KSAqIENQQ29sb3JCbXAuQllURVNfUEVSX1BJWEVMLFxuICAgICAgICBcbiAgICAgICAgd2lkdGhCeXRlcyA9IHcgKiBDUENvbG9yQm1wLkJZVEVTX1BFUl9QSVhFTDtcbiAgICBcbiAgICBmb3IgKHZhciB5ID0gMDsgeSA8IGg7IHkrKykge1xuICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IHdpZHRoQnl0ZXM7IHgrKykge1xuICAgICAgICAgICAgdGhpcy5kYXRhW2JtcDFJbmRleCsrXSBePSBidWZmZXJbYnVmZmVySW5kZXgrK107XG4gICAgICAgIH1cbiAgICAgICAgYm1wMUluZGV4ICs9IGJtcDFZU2tpcDtcbiAgICB9XG59O1xuXG4vL1xuLy8gQ29weSBhbm90aGVyIGJpdG1hcCBpbnRvIHRoaXMgb25lIHVzaW5nIGFscGhhIGJsZW5kaW5nXG4vL1xuQ1BDb2xvckJtcC5wcm90b3R5cGUucGFzdGVBbHBoYVJlY3QgPSBmdW5jdGlvbihibXAsIHNyY1JlY3QsIHgsIHkpIHtcbiAgICB2YXJcbiAgICAgICAgc3JjUmVjdENweSA9IHNyY1JlY3QuY2xvbmUoKSxcbiAgICAgICAgZHN0UmVjdCA9IG5ldyBDUFJlY3QoeCwgeSwgMCwgMCk7XG4gICAgXG4gICAgdGhpcy5nZXRCb3VuZHMoKS5jbGlwU291cmNlRGVzdChzcmNSZWN0Q3B5LCBkc3RSZWN0KTtcblxuICAgIHZhclxuICAgICAgICBzcmNZU3RyaWRlID0gKGJtcC53aWR0aCAtIGRzdFJlY3QuZ2V0V2lkdGgoKSkgKiBDUENvbG9yQm1wLkJZVEVTX1BFUl9QSVhFTCxcbiAgICAgICAgZHN0WVN0cmlkZSA9ICh0aGlzLndpZHRoIC0gZHN0UmVjdC5nZXRXaWR0aCgpKSAqIENQQ29sb3JCbXAuQllURVNfUEVSX1BJWEVMLFxuICAgICAgICBcbiAgICAgICAgc3JjT2Zmc2V0ID0gYm1wLm9mZnNldE9mUGl4ZWwoc3JjUmVjdENweS5sZWZ0LCBzcmNSZWN0Q3B5LnRvcCksXG4gICAgICAgIGRzdE9mZnNldCA9IHRoaXMub2Zmc2V0T2ZQaXhlbChkc3RSZWN0LmxlZnQsIGRzdFJlY3QudG9wKTtcblxuICAgIGZvciAodmFyIHkgPSBkc3RSZWN0LnRvcDsgeSA8IGRzdFJlY3QuYm90dG9tOyB5KyssIHNyY09mZnNldCArPSBzcmNZU3RyaWRlLCBkc3RPZmZzZXQgKz0gZHN0WVN0cmlkZSkge1xuICAgICAgICBmb3IgKHZhciB4ID0gZHN0UmVjdC5sZWZ0OyB4IDwgZHN0UmVjdC5yaWdodDsgeCsrKSB7XG4gICAgICAgICAgICB2YXIgXG4gICAgICAgICAgICAgICAgYWxwaGExID0gYm1wLmRhdGFbc3JjT2Zmc2V0ICsgQ1BDb2xvckJtcC5BTFBIQV9CWVRFX09GRlNFVF07XG5cbiAgICAgICAgICAgIGlmIChhbHBoYTEgPD0gMCkge1xuICAgICAgICAgICAgICAgIGRzdE9mZnNldCArPSBDUENvbG9yQm1wLkJZVEVTX1BFUl9QSVhFTDtcbiAgICAgICAgICAgICAgICBzcmNPZmZzZXQgKz0gQ1BDb2xvckJtcC5CWVRFU19QRVJfUElYRUw7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChhbHBoYTEgPT0gMjU1KSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBDUENvbG9yQm1wLkJZVEVTX1BFUl9QSVhFTDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGF0YVtkc3RPZmZzZXQrK10gPSBibXAuZGF0YVtzcmNPZmZzZXQrK107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICBhbHBoYTIgPSB0aGlzLmRhdGFbZHN0T2Zmc2V0ICsgQ1BDb2xvckJtcC5BTFBIQV9CWVRFX09GRlNFVF0sXG4gICAgICAgICAgICAgICAgbmV3QWxwaGEgPSAoYWxwaGExICsgYWxwaGEyIC0gYWxwaGExICogYWxwaGEyIC8gMjU1KSB8IDA7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChuZXdBbHBoYSA+IDApIHtcbiAgICAgICAgICAgICAgICB2YXIgXG4gICAgICAgICAgICAgICAgICAgIHJlYWxBbHBoYSA9IChhbHBoYTEgKiAyNTUgLyBuZXdBbHBoYSkgfCAwLFxuICAgICAgICAgICAgICAgICAgICBpbnZBbHBoYSA9IDI1NSAtIHJlYWxBbHBoYTtcblxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgMzsgaSsrLCBkc3RPZmZzZXQrKywgc3JjT2Zmc2V0KyspIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kYXRhW2RzdE9mZnNldF0gPSAoYm1wLmRhdGFbc3JjT2Zmc2V0XSArICh0aGlzLmRhdGFbZHN0T2Zmc2V0XSAqIGludkFscGhhIC0gYm1wLmRhdGFbc3JjT2Zmc2V0XSAqIGludkFscGhhKSAvIDI1NSkgfCAwO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLmRhdGFbZHN0T2Zmc2V0KytdID0gbmV3QWxwaGE7XG4gICAgICAgICAgICAgICAgc3JjT2Zmc2V0Kys7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGRzdE9mZnNldCArPSBDUENvbG9yQm1wLkJZVEVTX1BFUl9QSVhFTDtcbiAgICAgICAgICAgICAgICBzcmNPZmZzZXQgKz0gQ1BDb2xvckJtcC5CWVRFU19QRVJfUElYRUw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59O1xuXG4vKiogXG4gKiBDb3B5IHRoZSByZWN0YW5nbGUgYXQgc3JjUmVjdCBmcm9tIGJtcCBvbnRvIHRoaXMgaW1hZ2UgYXQgKGRzdFgsIGRzdFkpLlxuICovIFxuQ1BDb2xvckJtcC5wcm90b3R5cGUuY29weUJpdG1hcFJlY3QgPSBmdW5jdGlvbihibXAsIGRzdFgsIGRzdFksIHNyY1JlY3QpIHtcbiAgICB2YXJcbiAgICAgICAgc3JjUmVjdCA9IHNyY1JlY3QuY2xvbmUoKSxcbiAgICAgICAgZHN0UmVjdCA9IG5ldyBDUFJlY3QoZHN0WCwgZHN0WSwgMCwgMCk7XG5cbiAgICB0aGlzLmdldEJvdW5kcygpLmNsaXBTb3VyY2VEZXN0KHNyY1JlY3QsIGRzdFJlY3QpO1xuXG4gICAgdmFyIFxuICAgICAgICB3ID0gZHN0UmVjdC5nZXRXaWR0aCgpIHwgMCxcbiAgICAgICAgaCA9IGRzdFJlY3QuZ2V0SGVpZ2h0KCkgfCAwO1xuXG4gICAgLy8gQXJlIHdlIGp1c3QgdHJ5aW5nIHRvIGR1cGxpY2F0ZSB0aGUgYml0bWFwP1xuICAgIGlmIChkc3RSZWN0LmxlZnQgPT0gMCAmJiBkc3RSZWN0LnRvcCA9PSAwICYmIHcgPT0gdGhpcy53aWR0aCAmJiBoID09IHRoaXMuaGVpZ2h0ICYmIHcgPT0gYm1wLndpZHRoICYmIGggPT0gYm1wLmhlaWdodCkge1xuICAgICAgICB0aGlzLmNvcHlEYXRhRnJvbShibXApO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHZhclxuICAgICAgICAgICAgZHN0SW5kZXggPSB0aGlzLm9mZnNldE9mUGl4ZWwoZHN0UmVjdC5sZWZ0LCBkc3RSZWN0LnRvcCksXG4gICAgICAgICAgICBzcmNJbmRleCA9IGJtcC5vZmZzZXRPZlBpeGVsKHNyY1JlY3QubGVmdCwgc3JjUmVjdC50b3ApLFxuXG4gICAgICAgICAgICBkc3RZU2tpcCA9ICh0aGlzLndpZHRoIC0gdykgKiBDUENvbG9yQm1wLkJZVEVTX1BFUl9QSVhFTCxcbiAgICAgICAgICAgIHNyY1lTa2lwID0gKGJtcC53aWR0aCAtIHcpICogQ1BDb2xvckJtcC5CWVRFU19QRVJfUElYRUw7XG5cbiAgICAgICAgZm9yICh2YXIgeSA9IDA7IHkgPCBoOyB5KyspIHtcbiAgICAgICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgdzsgeCsrKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kYXRhW2RzdEluZGV4XSA9IGJtcC5kYXRhW3NyY0luZGV4XTtcbiAgICAgICAgICAgICAgICB0aGlzLmRhdGFbZHN0SW5kZXggKyAxXSA9IGJtcC5kYXRhW3NyY0luZGV4ICsgMV07XG4gICAgICAgICAgICAgICAgdGhpcy5kYXRhW2RzdEluZGV4ICsgMl0gPSBibXAuZGF0YVtzcmNJbmRleCArIDJdO1xuICAgICAgICAgICAgICAgIHRoaXMuZGF0YVtkc3RJbmRleCArIDNdID0gYm1wLmRhdGFbc3JjSW5kZXggKyAzXTtcbiAgICAgICAgICAgICAgICBkc3RJbmRleCArPSA0O1xuICAgICAgICAgICAgICAgIHNyY0luZGV4ICs9IDQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzcmNJbmRleCArPSBzcmNZU2tpcDtcbiAgICAgICAgICAgIGRzdEluZGV4ICs9IGRzdFlTa2lwO1xuICAgICAgICB9XG4gICAgfVxufTtcblxuLy9cbi8vIENvcGllcyB0aGUgQWxwaGEgY2hhbm5lbCBmcm9tIGFub3RoZXIgYml0bWFwLiBBc3N1bWVzIGJvdGggYml0bWFwcyBhcmUgdGhlIHNhbWUgd2lkdGguXG4vL1xuQ1BDb2xvckJtcC5wcm90b3R5cGUuY29weUFscGhhRnJvbSA9IGZ1bmN0aW9uKGJtcCwgcmVjdCkge1xuICAgIHJlY3QgPSB0aGlzLmdldEJvdW5kcygpLmNsaXAocmVjdCk7XG5cbiAgICB2YXIgXG4gICAgICAgIHcgPSByZWN0LmdldFdpZHRoKCksXG4gICAgICAgIGggPSByZWN0LmdldEhlaWdodCgpLFxuICAgICAgICBcbiAgICAgICAgcGl4SW5kZXggPSB0aGlzLm9mZnNldE9mUGl4ZWwocmVjdC5sZWZ0LCByZWN0LnRvcCkgKyBDUENvbG9yQm1wLkFMUEhBX0JZVEVfT0ZGU0VUIC8qIEFwcGx5IG9mZnNldCBoZXJlIHNvIHdlIGRvbid0IGhhdmUgdG8gZG8gaXQgcGVyLXBpeGVsKi8sXG4gICAgICAgIHlTa2lwID0gKHRoaXMud2lkdGggLSB3KSAqIENQQ29sb3JCbXAuQllURVNfUEVSX1BJWEVMO1xuICAgIFxuICAgIGZvciAodmFyIHkgPSAwOyB5IDwgaDsgeSsrKSB7XG4gICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgdzsgeCsrKSB7XG4gICAgICAgICAgICB0aGlzLmRhdGFbcGl4SW5kZXhdID0gYm1wLmRhdGFbcGl4SW5kZXhdO1xuICAgICAgICAgICAgcGl4SW5kZXggKz0gQ1BDb2xvckJtcC5CWVRFU19QRVJfUElYRUw7XG4gICAgICAgIH1cbiAgICAgICAgcGl4SW5kZXggKz0geVNraXA7XG4gICAgfVxufTtcblxuQ1BDb2xvckJtcC5wcm90b3R5cGUuY29weURhdGFGcm9tID0gZnVuY3Rpb24oYm1wKSB7XG4gICAgaWYgKGJtcC53aWR0aCAhPSB0aGlzLndpZHRoIHx8IGJtcC5oZWlnaHQgIT0gdGhpcy5oZWlnaHQpIHtcbiAgICAgICAgdGhpcy53aWR0aCA9IGJtcC53aWR0aDtcbiAgICAgICAgdGhpcy5oZWlnaHQgPSBibXAuaGVpZ2h0O1xuICAgICAgICBcbiAgICAgICAgdGhpcy5pbWFnZURhdGEgPSBjcmVhdGVJbWFnZURhdGEodGhpcy53aWR0aCwgdGhpcy5oZWlnaHQpO1xuICAgICAgICB0aGlzLmRhdGEgPSB0aGlzLmltYWdlRGF0YS5kYXRhO1xuICAgIH1cblxuICAgIGlmIChcInNldFwiIGluIHRoaXMuZGF0YSkge1xuICAgICAgICB0aGlzLmRhdGEuc2V0KGJtcC5kYXRhKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICAvLyBJRSBkb2Vzbid0IHVzZSBVaW50OENsYW1wZWRBcnJheSBmb3IgSW1hZ2VEYXRhLCBzbyBzZXQoKSBpc24ndCBhdmFpbGFibGVcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmRhdGEubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHRoaXMuZGF0YVtpXSA9IGJtcC5kYXRhW2ldO1xuICAgICAgICB9XG4gICAgfVxufTtcblxuLyoqXG4gKiBGbG9vZCBmaWxsIHRoZSBnaXZlbiBjb2xvciBzdGFydGluZyBmcm9tIHRoZSBnaXZlbiBwb2ludFxuICogQHBhcmFtIHggaW50XG4gKiBAcGFyYW0geSBpbnRcbiAqIEBwYXJhbSBjb2xvciBpbnRcbiAqL1xuQ1BDb2xvckJtcC5wcm90b3R5cGUuZmxvb2RGaWxsID0gZnVuY3Rpb24oeCwgeSwgY29sb3IpIHtcbiAgICBpZiAoIXRoaXMuaXNJbnNpZGUoeCwgeSkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhclxuICAgICAgICBvbGRDb2xvciA9IHRoaXMuZ2V0UGl4ZWwoeCwgeSksXG4gICAgICAgIFxuICAgICAgICBvbGRBbHBoYSA9IChvbGRDb2xvciA+PiAyNCkgJiAweEZGLFxuICAgICAgICBvbGRSZWQgPSAob2xkQ29sb3IgPj4gMTYpICYgMHhGRixcbiAgICAgICAgb2xkR3JlZW4gPSAob2xkQ29sb3IgPj4gOCkgJiAweEZGLFxuICAgICAgICBvbGRCbHVlID0gb2xkQ29sb3IgJiAweEZGLFxuICAgICAgICBcbiAgICAgICAgY29sb3JBbHBoYSA9IChjb2xvciA+PiAyNCkgJiAweEZGLFxuICAgICAgICBjb2xvclJlZCA9IChjb2xvciA+PiAxNikgJiAweEZGLFxuICAgICAgICBjb2xvckdyZWVuID0gKGNvbG9yID4+IDgpICYgMHhGRixcbiAgICAgICAgY29sb3JCbHVlID0gY29sb3IgJiAweEZGLFxuICAgICAgICBcbiAgICAgICAgc3RhY2sgPSBbXSxcbiAgICAgICAgY2xpcCA9IHRoaXMuZ2V0Qm91bmRzKCksXG4gICAgICAgIFxuICAgICAgICBkYXRhID0gdGhpcy5kYXRhO1xuICAgIFxuICAgIC8vIENoYW5nZSB0aGUgbGVmdCBhbmQgcmlnaHQgYm91bmRzIGZyb20gcGl4ZWwgaW5kZXhlcyBpbnRvIGJ5dGUgaW5kZXhlcyBmb3IgZWFzeSBjbGlwcGluZ1xuICAgIGNsaXAubGVmdCAqPSBDUENvbG9yQm1wLkJZVEVTX1BFUl9QSVhFTDtcbiAgICBjbGlwLnJpZ2h0ICo9IENQQ29sb3JCbXAuQllURVNfUEVSX1BJWEVMO1xuICAgIFxuICAgIHN0YWNrLnB1c2goe3gxOiB4ICogQ1BDb2xvckJtcC5CWVRFU19QRVJfUElYRUwsIHgyOiB4ICogQ1BDb2xvckJtcC5CWVRFU19QRVJfUElYRUwsIHk6IHksIGR5OiAtMX0pO1xuICAgIHN0YWNrLnB1c2goe3gxOiB4ICogQ1BDb2xvckJtcC5CWVRFU19QRVJfUElYRUwsIHgyOiB4ICogQ1BDb2xvckJtcC5CWVRFU19QRVJfUElYRUwsIHk6IHkgKyAxLCBkeTogMX0pO1xuICAgIFxuICAgIC8qIFxuICAgICAqIElmIHdlIGFyZSBmaWxsaW5nIDEwMCUgdHJhbnNwYXJlbnQgYXJlYXMgdGhlbiB3ZSBuZWVkIHRvIGlnbm9yZSB0aGUgcmVzaWR1YWwgY29sb3IgaW5mb3JtYXRpb25cbiAgICAgKiAoaXQgd291bGQgYWxzbyBiZSBwb3NzaWJsZSB0byBjbGVhciBpdCB3aGVuIGVyYXNpbmcsIGJ1dCB0aGVuIHRoZSBwZXJmb3JtYW5jZSBpbXBhY3Qgd291bGQgYmUgb24gdGhlIGVyYXNlciBcbiAgICAgKiByYXRoZXIgdGhhbiBvbiB0aGlzIGxvdyBpbXBvcnRhbmNlIGZsb29kIGZpbGwpXG4gICAgICovXG4gICAgaWYgKG9sZEFscGhhID09IDApIHtcbiAgICAgICAgaWYgKGNvbG9yQWxwaGEgPT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICB3aGlsZSAoc3RhY2subGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgbGluZSA9IHN0YWNrLnBvcCgpO1xuICAgIFxuICAgICAgICAgICAgaWYgKGxpbmUueSA8IGNsaXAudG9wIHx8IGxpbmUueSA+PSBjbGlwLmJvdHRvbSkge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgbGluZU9mZnNldCA9IHRoaXMub2Zmc2V0T2ZQaXhlbCgwLCBsaW5lLnkpLFxuICAgIFxuICAgICAgICAgICAgICAgIGxlZnQgPSBsaW5lLngxLCBuZXh0O1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB3aGlsZSAoXG4gICAgICAgICAgICAgICAgbGVmdCA+PSBjbGlwLmxlZnQgXG4gICAgICAgICAgICAgICAgJiYgZGF0YVtsZWZ0ICsgbGluZU9mZnNldCArIENQQ29sb3JCbXAuQUxQSEFfQllURV9PRkZTRVRdID09IDBcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIGRhdGFbbGVmdCArIGxpbmVPZmZzZXQgKyBDUENvbG9yQm1wLlJFRF9CWVRFX09GRlNFVF0gPSBjb2xvclJlZDtcbiAgICAgICAgICAgICAgICBkYXRhW2xlZnQgKyBsaW5lT2Zmc2V0ICsgQ1BDb2xvckJtcC5HUkVFTl9CWVRFX09GRlNFVF0gPSBjb2xvckdyZWVuO1xuICAgICAgICAgICAgICAgIGRhdGFbbGVmdCArIGxpbmVPZmZzZXQgKyBDUENvbG9yQm1wLkJMVUVfQllURV9PRkZTRVRdID0gY29sb3JCbHVlO1xuICAgICAgICAgICAgICAgIGRhdGFbbGVmdCArIGxpbmVPZmZzZXQgKyBDUENvbG9yQm1wLkFMUEhBX0JZVEVfT0ZGU0VUXSA9IGNvbG9yQWxwaGE7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgbGVmdCAtPSBDUENvbG9yQm1wLkJZVEVTX1BFUl9QSVhFTDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKGxlZnQgPj0gbGluZS54MSkge1xuICAgICAgICAgICAgICAgIHdoaWxlIChcbiAgICAgICAgICAgICAgICAgICAgbGVmdCA8PSBsaW5lLngyIFxuICAgICAgICAgICAgICAgICAgICAmJiBkYXRhW2xlZnQgKyBsaW5lT2Zmc2V0ICsgQ1BDb2xvckJtcC5BTFBIQV9CWVRFX09GRlNFVF0gIT0gb2xkQWxwaGFcbiAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgbGVmdCArPSBDUENvbG9yQm1wLkJZVEVTX1BFUl9QSVhFTDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbmV4dCA9IGxlZnQgKyBDUENvbG9yQm1wLkJZVEVTX1BFUl9QSVhFTDtcbiAgICAgICAgICAgICAgICBpZiAobGVmdCA+IGxpbmUueDIpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBsZWZ0ICs9IENQQ29sb3JCbXAuQllURVNfUEVSX1BJWEVMO1xuICAgICAgICAgICAgICAgIGlmIChsZWZ0IDwgbGluZS54MSkge1xuICAgICAgICAgICAgICAgICAgICBzdGFjay5wdXNoKHt4MTogbGVmdCwgeDI6IGxpbmUueDEgLSBDUENvbG9yQm1wLkJZVEVTX1BFUl9QSVhFTCwgeTogbGluZS55IC0gbGluZS5keSwgZHk6IC1saW5lLmR5fSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIG5leHQgPSBsaW5lLngxICsgQ1BDb2xvckJtcC5CWVRFU19QRVJfUElYRUw7XG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICBkbyB7XG4gICAgICAgICAgICAgICAgZGF0YVtsZWZ0ICsgbGluZU9mZnNldCArIENQQ29sb3JCbXAuUkVEX0JZVEVfT0ZGU0VUXSA9IGNvbG9yUmVkO1xuICAgICAgICAgICAgICAgIGRhdGFbbGVmdCArIGxpbmVPZmZzZXQgKyBDUENvbG9yQm1wLkdSRUVOX0JZVEVfT0ZGU0VUXSA9IGNvbG9yR3JlZW47XG4gICAgICAgICAgICAgICAgZGF0YVtsZWZ0ICsgbGluZU9mZnNldCArIENQQ29sb3JCbXAuQkxVRV9CWVRFX09GRlNFVF0gPSBjb2xvckJsdWU7XG4gICAgICAgICAgICAgICAgZGF0YVtsZWZ0ICsgbGluZU9mZnNldCArIENQQ29sb3JCbXAuQUxQSEFfQllURV9PRkZTRVRdID0gY29sb3JBbHBoYTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB3aGlsZSAoXG4gICAgICAgICAgICAgICAgICAgIG5leHQgPCBjbGlwLnJpZ2h0IFxuICAgICAgICAgICAgICAgICAgICAmJiBkYXRhW25leHQgKyBsaW5lT2Zmc2V0ICsgQ1BDb2xvckJtcC5BTFBIQV9CWVRFX09GRlNFVF0gPT0gb2xkQWxwaGFcbiAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YVtuZXh0ICsgbGluZU9mZnNldCArIENQQ29sb3JCbXAuUkVEX0JZVEVfT0ZGU0VUXSA9IGNvbG9yUmVkO1xuICAgICAgICAgICAgICAgICAgICBkYXRhW25leHQgKyBsaW5lT2Zmc2V0ICsgQ1BDb2xvckJtcC5HUkVFTl9CWVRFX09GRlNFVF0gPSBjb2xvckdyZWVuO1xuICAgICAgICAgICAgICAgICAgICBkYXRhW25leHQgKyBsaW5lT2Zmc2V0ICsgQ1BDb2xvckJtcC5CTFVFX0JZVEVfT0ZGU0VUXSA9IGNvbG9yQmx1ZTtcbiAgICAgICAgICAgICAgICAgICAgZGF0YVtuZXh0ICsgbGluZU9mZnNldCArIENQQ29sb3JCbXAuQUxQSEFfQllURV9PRkZTRVRdID0gY29sb3JBbHBoYTtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIG5leHQgKz0gQ1BDb2xvckJtcC5CWVRFU19QRVJfUElYRUw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHN0YWNrLnB1c2goe3gxOiBsZWZ0LCB4MjogbmV4dCAtIENQQ29sb3JCbXAuQllURVNfUEVSX1BJWEVMLCB5OiBsaW5lLnkgKyBsaW5lLmR5LCBkeTogbGluZS5keX0pO1xuICAgIFxuICAgICAgICAgICAgICAgIGlmIChuZXh0IC0gQ1BDb2xvckJtcC5CWVRFU19QRVJfUElYRUwgPiBsaW5lLngyKSB7XG4gICAgICAgICAgICAgICAgICAgIHN0YWNrLnB1c2goe3gxOiBsaW5lLngyICsgQ1BDb2xvckJtcC5CWVRFU19QRVJfUElYRUwsIHgyOiBuZXh0IC0gQ1BDb2xvckJtcC5CWVRFU19QRVJfUElYRUwsIHk6IGxpbmUueSAtIGxpbmUuZHksIGR5OiAtbGluZS5keX0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICBsZWZ0ID0gbmV4dCArIENQQ29sb3JCbXAuQllURVNfUEVSX1BJWEVMO1xuICAgICAgICAgICAgICAgIHdoaWxlIChcbiAgICAgICAgICAgICAgICAgICAgbGVmdCA8PSBsaW5lLngyICYmIGRhdGFbbGVmdCArIGxpbmVPZmZzZXQgKyBDUENvbG9yQm1wLkFMUEhBX0JZVEVfT0ZGU0VUXSAhPSBvbGRBbHBoYVxuICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICBsZWZ0ICs9IENQQ29sb3JCbXAuQllURVNfUEVSX1BJWEVMO1xuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICBuZXh0ID0gbGVmdCArIENQQ29sb3JCbXAuQllURVNfUEVSX1BJWEVMO1xuICAgICAgICAgICAgfSB3aGlsZSAobGVmdCA8PSBsaW5lLngyKTtcbiAgICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChjb2xvciA9PSBvbGRDb2xvcikge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgd2hpbGUgKHN0YWNrLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgIGxpbmUgPSBzdGFjay5wb3AoKTtcblxuICAgICAgICAgICAgaWYgKGxpbmUueSA8IGNsaXAudG9wIHx8IGxpbmUueSA+PSBjbGlwLmJvdHRvbSkge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICBsaW5lT2Zmc2V0ID0gdGhpcy5vZmZzZXRPZlBpeGVsKDAsIGxpbmUueSksXG5cbiAgICAgICAgICAgICAgICBsZWZ0ID0gbGluZS54MSwgbmV4dDtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgd2hpbGUgKFxuICAgICAgICAgICAgICAgIGxlZnQgPj0gY2xpcC5sZWZ0IFxuICAgICAgICAgICAgICAgICYmIGRhdGFbbGVmdCArIGxpbmVPZmZzZXQgKyBDUENvbG9yQm1wLlJFRF9CWVRFX09GRlNFVF0gPT0gb2xkUmVkXG4gICAgICAgICAgICAgICAgJiYgZGF0YVtsZWZ0ICsgbGluZU9mZnNldCArIENQQ29sb3JCbXAuR1JFRU5fQllURV9PRkZTRVRdID09IG9sZEdyZWVuXG4gICAgICAgICAgICAgICAgJiYgZGF0YVtsZWZ0ICsgbGluZU9mZnNldCArIENQQ29sb3JCbXAuQkxVRV9CWVRFX09GRlNFVF0gPT0gb2xkQmx1ZVxuICAgICAgICAgICAgICAgICYmIGRhdGFbbGVmdCArIGxpbmVPZmZzZXQgKyBDUENvbG9yQm1wLkFMUEhBX0JZVEVfT0ZGU0VUXSA9PSBvbGRBbHBoYVxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgZGF0YVtsZWZ0ICsgbGluZU9mZnNldCArIENQQ29sb3JCbXAuUkVEX0JZVEVfT0ZGU0VUXSA9IGNvbG9yUmVkO1xuICAgICAgICAgICAgICAgIGRhdGFbbGVmdCArIGxpbmVPZmZzZXQgKyBDUENvbG9yQm1wLkdSRUVOX0JZVEVfT0ZGU0VUXSA9IGNvbG9yR3JlZW47XG4gICAgICAgICAgICAgICAgZGF0YVtsZWZ0ICsgbGluZU9mZnNldCArIENQQ29sb3JCbXAuQkxVRV9CWVRFX09GRlNFVF0gPSBjb2xvckJsdWU7XG4gICAgICAgICAgICAgICAgZGF0YVtsZWZ0ICsgbGluZU9mZnNldCArIENQQ29sb3JCbXAuQUxQSEFfQllURV9PRkZTRVRdID0gY29sb3JBbHBoYTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBsZWZ0IC09IENQQ29sb3JCbXAuQllURVNfUEVSX1BJWEVMO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAobGVmdCA+PSBsaW5lLngxKSB7XG4gICAgICAgICAgICAgICAgd2hpbGUgKFxuICAgICAgICAgICAgICAgICAgICBsZWZ0IDw9IGxpbmUueDIgXG4gICAgICAgICAgICAgICAgICAgICYmICEoXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhW2xlZnQgKyBsaW5lT2Zmc2V0ICsgQ1BDb2xvckJtcC5SRURfQllURV9PRkZTRVRdID09IG9sZFJlZFxuICAgICAgICAgICAgICAgICAgICAgICAgJiYgZGF0YVtsZWZ0ICsgbGluZU9mZnNldCArIENQQ29sb3JCbXAuR1JFRU5fQllURV9PRkZTRVRdID09IG9sZEdyZWVuXG4gICAgICAgICAgICAgICAgICAgICAgICAmJiBkYXRhW2xlZnQgKyBsaW5lT2Zmc2V0ICsgQ1BDb2xvckJtcC5CTFVFX0JZVEVfT0ZGU0VUXSA9PSBvbGRCbHVlXG4gICAgICAgICAgICAgICAgICAgICAgICAmJiBkYXRhW2xlZnQgKyBsaW5lT2Zmc2V0ICsgQ1BDb2xvckJtcC5BTFBIQV9CWVRFX09GRlNFVF0gPT0gb2xkQWxwaGFcbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICBsZWZ0ICs9IENQQ29sb3JCbXAuQllURVNfUEVSX1BJWEVMO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBuZXh0ID0gbGVmdCArIENQQ29sb3JCbXAuQllURVNfUEVSX1BJWEVMO1xuICAgICAgICAgICAgICAgIGlmIChsZWZ0ID4gbGluZS54Mikge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGxlZnQgKz0gQ1BDb2xvckJtcC5CWVRFU19QRVJfUElYRUw7XG4gICAgICAgICAgICAgICAgaWYgKGxlZnQgPCBsaW5lLngxKSB7XG4gICAgICAgICAgICAgICAgICAgIHN0YWNrLnB1c2goe3gxOiBsZWZ0LCB4MjogbGluZS54MSAtIENQQ29sb3JCbXAuQllURVNfUEVSX1BJWEVMLCB5OiBsaW5lLnkgLSBsaW5lLmR5LCBkeTogLWxpbmUuZHl9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbmV4dCA9IGxpbmUueDEgKyBDUENvbG9yQm1wLkJZVEVTX1BFUl9QSVhFTDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZG8ge1xuICAgICAgICAgICAgICAgIGRhdGFbbGVmdCArIGxpbmVPZmZzZXQgKyBDUENvbG9yQm1wLlJFRF9CWVRFX09GRlNFVF0gPSBjb2xvclJlZDtcbiAgICAgICAgICAgICAgICBkYXRhW2xlZnQgKyBsaW5lT2Zmc2V0ICsgQ1BDb2xvckJtcC5HUkVFTl9CWVRFX09GRlNFVF0gPSBjb2xvckdyZWVuO1xuICAgICAgICAgICAgICAgIGRhdGFbbGVmdCArIGxpbmVPZmZzZXQgKyBDUENvbG9yQm1wLkJMVUVfQllURV9PRkZTRVRdID0gY29sb3JCbHVlO1xuICAgICAgICAgICAgICAgIGRhdGFbbGVmdCArIGxpbmVPZmZzZXQgKyBDUENvbG9yQm1wLkFMUEhBX0JZVEVfT0ZGU0VUXSA9IGNvbG9yQWxwaGE7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgd2hpbGUgKFxuICAgICAgICAgICAgICAgICAgICBuZXh0IDwgY2xpcC5yaWdodCBcbiAgICAgICAgICAgICAgICAgICAgJiYgZGF0YVtuZXh0ICsgbGluZU9mZnNldCArIENQQ29sb3JCbXAuUkVEX0JZVEVfT0ZGU0VUXSA9PSBvbGRSZWRcbiAgICAgICAgICAgICAgICAgICAgJiYgZGF0YVtuZXh0ICsgbGluZU9mZnNldCArIENQQ29sb3JCbXAuR1JFRU5fQllURV9PRkZTRVRdID09IG9sZEdyZWVuXG4gICAgICAgICAgICAgICAgICAgICYmIGRhdGFbbmV4dCArIGxpbmVPZmZzZXQgKyBDUENvbG9yQm1wLkJMVUVfQllURV9PRkZTRVRdID09IG9sZEJsdWVcbiAgICAgICAgICAgICAgICAgICAgJiYgZGF0YVtuZXh0ICsgbGluZU9mZnNldCArIENQQ29sb3JCbXAuQUxQSEFfQllURV9PRkZTRVRdID09IG9sZEFscGhhXG4gICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgIGRhdGFbbmV4dCArIGxpbmVPZmZzZXQgKyBDUENvbG9yQm1wLlJFRF9CWVRFX09GRlNFVF0gPSBjb2xvclJlZDtcbiAgICAgICAgICAgICAgICAgICAgZGF0YVtuZXh0ICsgbGluZU9mZnNldCArIENQQ29sb3JCbXAuR1JFRU5fQllURV9PRkZTRVRdID0gY29sb3JHcmVlbjtcbiAgICAgICAgICAgICAgICAgICAgZGF0YVtuZXh0ICsgbGluZU9mZnNldCArIENQQ29sb3JCbXAuQkxVRV9CWVRFX09GRlNFVF0gPSBjb2xvckJsdWU7XG4gICAgICAgICAgICAgICAgICAgIGRhdGFbbmV4dCArIGxpbmVPZmZzZXQgKyBDUENvbG9yQm1wLkFMUEhBX0JZVEVfT0ZGU0VUXSA9IGNvbG9yQWxwaGE7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBuZXh0ICs9IENQQ29sb3JCbXAuQllURVNfUEVSX1BJWEVMO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBzdGFjay5wdXNoKHt4MTogbGVmdCwgeDI6IG5leHQgLSBDUENvbG9yQm1wLkJZVEVTX1BFUl9QSVhFTCwgeTogbGluZS55ICsgbGluZS5keSwgZHk6IGxpbmUuZHl9KTtcblxuICAgICAgICAgICAgICAgIGlmIChuZXh0IC0gQ1BDb2xvckJtcC5CWVRFU19QRVJfUElYRUwgPiBsaW5lLngyKSB7XG4gICAgICAgICAgICAgICAgICAgIHN0YWNrLnB1c2goe3gxOiBsaW5lLngyICsgQ1BDb2xvckJtcC5CWVRFU19QRVJfUElYRUwsIHgyOiBuZXh0IC0gQ1BDb2xvckJtcC5CWVRFU19QRVJfUElYRUwsIHk6IGxpbmUueSAtIGxpbmUuZHksIGR5OiAtbGluZS5keX0pO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGxlZnQgPSBuZXh0ICsgQ1BDb2xvckJtcC5CWVRFU19QRVJfUElYRUw7XG4gICAgICAgICAgICAgICAgd2hpbGUgKFxuICAgICAgICAgICAgICAgICAgICBsZWZ0IDw9IGxpbmUueDIgJiYgIShcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFbbGVmdCArIGxpbmVPZmZzZXQgKyBDUENvbG9yQm1wLlJFRF9CWVRFX09GRlNFVF0gPT0gb2xkUmVkXG4gICAgICAgICAgICAgICAgICAgICAgICAmJiBkYXRhW2xlZnQgKyBsaW5lT2Zmc2V0ICsgQ1BDb2xvckJtcC5HUkVFTl9CWVRFX09GRlNFVF0gPT0gb2xkR3JlZW5cbiAgICAgICAgICAgICAgICAgICAgICAgICYmIGRhdGFbbGVmdCArIGxpbmVPZmZzZXQgKyBDUENvbG9yQm1wLkJMVUVfQllURV9PRkZTRVRdID09IG9sZEJsdWVcbiAgICAgICAgICAgICAgICAgICAgICAgICYmIGRhdGFbbGVmdCArIGxpbmVPZmZzZXQgKyBDUENvbG9yQm1wLkFMUEhBX0JZVEVfT0ZGU0VUXSA9PSBvbGRBbHBoYVxuICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgIGxlZnQgKz0gQ1BDb2xvckJtcC5CWVRFU19QRVJfUElYRUw7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgbmV4dCA9IGxlZnQgKyBDUENvbG9yQm1wLkJZVEVTX1BFUl9QSVhFTDtcbiAgICAgICAgICAgIH0gd2hpbGUgKGxlZnQgPD0gbGluZS54Mik7XG4gICAgICAgIH1cbiAgICB9XG59O1xuXG4vKipcbiAqIFByZW11bHRpcGx5IHRoZSBSR0IgY2hhbm5lbHMgaW4gdGhlIGdpdmVuIFIsRyxCLEEgY2hhbm5lbCBidWZmZXIgd2l0aCB0aGUgYWxwaGEgY2hhbm5lbC5cbiAqIFxuICogQHBhcmFtIGJ1ZmZlciBSLEcsQixBIGNoYW5uZWwgYXJyYXlcbiAqIEBwYXJhbSBsZW4gTnVtYmVyIG9mIHBpeGVscyBpbiBidWZmZXIgdG8gbW9kaWZ5XG4gKi9cbmZ1bmN0aW9uIG11bHRpcGx5QWxwaGEoYnVmZmVyLCBsZW4pIHtcbiAgICB2YXJcbiAgICAgICAgcGl4SW5kZXggPSAwO1xuICAgIFxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgdmFyXG4gICAgICAgICAgICBhbHBoYSA9IGJ1ZmZlcltwaXhJbmRleCArIENQQ29sb3JCbXAuQUxQSEFfQllURV9PRkZTRVRdO1xuICAgICAgICBcbiAgICAgICAgLy8gTXVsdGlwbHkgdGhlIFJHQiBjaGFubmVscyBieSBhbHBoYVxuICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IDM7IGorKywgcGl4SW5kZXgrKykge1xuICAgICAgICAgICAgYnVmZmVyW3BpeEluZGV4XSA9IE1hdGgucm91bmQoYnVmZmVyW3BpeEluZGV4XSAqIGFscGhhIC8gMjU1KTtcbiAgICAgICAgfVxuICAgICAgICBwaXhJbmRleCsrOyAvLyBEb24ndCBtb2RpZnkgYWxwaGEgY2hhbm5lbFxuICAgIH1cbn1cblxuLyoqXG4gKiBJbnZlcnNlIG9mIG11bHRpcGx5QWxwaGEoKVxuICovXG5mdW5jdGlvbiBzZXBhcmF0ZUFscGhhKGJ1ZmZlciwgbGVuKSB7XG4gICAgdmFyXG4gICAgICAgIHBpeEluZGV4ID0gMDtcbiAgICBcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgIHZhclxuICAgICAgICAgICAgYWxwaGEgPSBidWZmZXJbcGl4SW5kZXggKyBDUENvbG9yQm1wLkFMUEhBX0JZVEVfT0ZGU0VUXTtcbiAgICAgICAgXG4gICAgICAgIGlmIChhbHBoYSAhPSAwKSB7XG4gICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICBpbnZBbHBoYSA9IDI1NSAvIGFscGhhO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IDM7IGorKywgcGl4SW5kZXgrKykge1xuICAgICAgICAgICAgICAgIGJ1ZmZlcltwaXhJbmRleF0gPSBNYXRoLm1pbihNYXRoLnJvdW5kKGJ1ZmZlcltwaXhJbmRleF0gKiBpbnZBbHBoYSksIDI1NSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBEb24ndCBtb2RpZnkgYWxwaGEgY2hhbm5lbFxuICAgICAgICAgICAgcGl4SW5kZXgrKztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHBpeEluZGV4ICs9IENQQ29sb3JCbXAuQllURVNfUEVSX1BJWEVMO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5mdW5jdGlvbiBib3hCbHVyTGluZShzcmMsIGRzdCwgbGVuLCByYWRpdXMpIHtcbiAgICB2YXJcbiAgICAgICAgdG90YWxQaXhlbHMgPSAwLCB0b3RhbENoYW5uZWxzID0gWzAsIDAsIDAsIDBdLFxuICAgICAgICBwaXhJbmRleCwgZHN0SW5kZXg7XG4gICAgXG4gICAgcGl4SW5kZXggPSAwO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmFkaXVzICYmIGkgPCBsZW47IGkrKykge1xuICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IENQQ29sb3JCbXAuQllURVNfUEVSX1BJWEVMOyBqKyspIHtcbiAgICAgICAgICAgIHRvdGFsQ2hhbm5lbHNbal0gKz0gc3JjW3BpeEluZGV4KytdO1xuICAgICAgICB9XG4gICAgICAgIHRvdGFsUGl4ZWxzKys7XG4gICAgfVxuICAgIFxuICAgIGRzdEluZGV4ID0gMDtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgIC8vIE5ldyBwaXhlbCBqb2lucyB0aGUgd2luZG93IGF0IHRoZSByaWdodFxuICAgICAgICBpZiAoaSArIHJhZGl1cyA8IGxlbikge1xuICAgICAgICAgICAgcGl4SW5kZXggPSAoaSArIHJhZGl1cykgKiBDUENvbG9yQm1wLkJZVEVTX1BFUl9QSVhFTDtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBDUENvbG9yQm1wLkJZVEVTX1BFUl9QSVhFTDsgaisrKSB7XG4gICAgICAgICAgICAgICAgdG90YWxDaGFubmVsc1tqXSArPSBzcmNbcGl4SW5kZXgrK107XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0b3RhbFBpeGVscysrO1xuICAgICAgICB9XG5cbiAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBDUENvbG9yQm1wLkJZVEVTX1BFUl9QSVhFTDsgaisrKSB7XG4gICAgICAgICAgICBkc3RbZHN0SW5kZXgrK10gPSBNYXRoLnJvdW5kKHRvdGFsQ2hhbm5lbHNbal0gLyB0b3RhbFBpeGVscyk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBPbGQgcGl4ZWwgbGVhdmVzIHRoZSB3aW5kb3cgYXQgdGhlIGxlZnRcbiAgICAgICAgaWYgKGkgLSByYWRpdXMgPj0gMCkge1xuICAgICAgICAgICAgcGl4SW5kZXggPSAoaSAtIHJhZGl1cykgKiBDUENvbG9yQm1wLkJZVEVTX1BFUl9QSVhFTDtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBDUENvbG9yQm1wLkJZVEVTX1BFUl9QSVhFTDsgaisrKSB7XG4gICAgICAgICAgICAgICAgdG90YWxDaGFubmVsc1tqXSAtPSBzcmNbcGl4SW5kZXgrK107XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0b3RhbFBpeGVscy0tO1xuICAgICAgICB9XG4gICAgfVxufVxuXG4vKipcbiAqIENvcHkgYSBjb2x1bW4gb2YgcGl4ZWxzIGluIHRoZSBiaXRtYXAgdG8gdGhlIGdpdmVuIFIsRyxCLEEgYnVmZmVyLlxuICogXG4gKiBAcGFyYW0geCBYLWNvb3JkaW5hdGUgb2YgY29sdW1uXG4gKiBAcGFyYW0geSBZLWNvb3JkaW5hdGUgb2YgdG9wIG9mIGNvbHVtbiB0byBjb3B5XG4gKiBAcGFyYW0gbGVuIE51bWJlciBvZiBwaXhlbHMgdG8gY29weVxuICogQHBhcmFtIGJ1ZmZlciBSLEcsQixBIGFycmF5XG4gKi9cbkNQQ29sb3JCbXAucHJvdG90eXBlLmNvcHlQaXhlbENvbHVtblRvQXJyYXkgPSBmdW5jdGlvbih4LCB5LCBsZW4sIGJ1ZmZlcikge1xuICAgIHZhclxuICAgICAgICB5SnVtcCA9ICh0aGlzLndpZHRoIC0gMSkgKiBDUENvbG9yQm1wLkJZVEVTX1BFUl9QSVhFTCxcbiAgICAgICAgZHN0T2Zmc2V0ID0gMCxcbiAgICAgICAgc3JjT2Zmc2V0ID0gdGhpcy5vZmZzZXRPZlBpeGVsKHgsIHkpO1xuICAgIFxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBDUENvbG9yQm1wLkJZVEVTX1BFUl9QSVhFTDsgaisrKSB7XG4gICAgICAgICAgICBidWZmZXJbZHN0T2Zmc2V0KytdID0gdGhpcy5kYXRhW3NyY09mZnNldCsrXTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgc3JjT2Zmc2V0ICs9IHlKdW1wO1xuICAgIH1cbn1cblxuLyoqXG4gKiBDb3B5IHRoZSBwaXhlbHMgZnJvbSB0aGUgZ2l2ZW4gUixHLEIsQSBidWZmZXIgdG8gYSBjb2x1bW4gb2YgcGl4ZWxzIGluIHRoZSBiaXRtYXAuXG4gKiBcbiAqIEBwYXJhbSB4IFgtY29vcmRpbmF0ZSBvZiBjb2x1bW5cbiAqIEBwYXJhbSB5IFktY29vcmRpbmF0ZSBvZiB0b3Agb2YgY29sdW1uIHRvIGNvcHlcbiAqIEBwYXJhbSBsZW4gTnVtYmVyIG9mIHBpeGVscyB0byBjb3B5XG4gKiBAcGFyYW0gYnVmZmVyIFIsRyxCLEEgYXJyYXkgdG8gY29weSBmcm9tXG4gKi9cbkNQQ29sb3JCbXAucHJvdG90eXBlLmNvcHlBcnJheVRvUGl4ZWxDb2x1bW4gPSBmdW5jdGlvbih4LCB5LCBsZW4sIGJ1ZmZlcikge1xuICAgIHZhclxuICAgICAgICB5SnVtcCA9ICh0aGlzLndpZHRoIC0gMSkgKiBDUENvbG9yQm1wLkJZVEVTX1BFUl9QSVhFTCxcbiAgICAgICAgc3JjT2Zmc2V0ID0gMCxcbiAgICAgICAgZHN0T2Zmc2V0ID0gdGhpcy5vZmZzZXRPZlBpeGVsKHgsIHkpO1xuICAgIFxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBDUENvbG9yQm1wLkJZVEVTX1BFUl9QSVhFTDsgaisrKSB7XG4gICAgICAgICAgICB0aGlzLmRhdGFbZHN0T2Zmc2V0KytdID0gYnVmZmVyW3NyY09mZnNldCsrXTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgZHN0T2Zmc2V0ICs9IHlKdW1wO1xuICAgIH1cbn1cblxuQ1BDb2xvckJtcC5wcm90b3R5cGUuYm94Qmx1ciA9IGZ1bmN0aW9uKHJlY3QsIHJhZGl1c1gsIHJhZGl1c1kpIHtcbiAgICByZWN0ID0gdGhpcy5nZXRCb3VuZHMoKS5jbGlwKHJlY3QpO1xuXG4gICAgdmFyXG4gICAgICAgIHJlY3RXaWR0aCA9IHJlY3QuZ2V0V2lkdGgoKSxcbiAgICAgICAgcmVjdFdpZHRoQnl0ZXMgPSByZWN0V2lkdGggKiBDUENvbG9yQm1wLkJZVEVTX1BFUl9QSVhFTCxcbiAgICAgICAgcmVjdEhlaWdodCA9IHJlY3QuZ2V0SGVpZ2h0KCksXG4gICAgICAgIHJlY3RMZW5ndGggPSBNYXRoLm1heChyZWN0V2lkdGgsIHJlY3RIZWlnaHQpLFxuXG4gICAgICAgIHNyYyA9IG5ldyBVaW50OEFycmF5KHJlY3RMZW5ndGggKiBDUENvbG9yQm1wLkJZVEVTX1BFUl9QSVhFTCksXG4gICAgICAgIGRzdCA9IG5ldyBVaW50OEFycmF5KHJlY3RMZW5ndGggKiBDUENvbG9yQm1wLkJZVEVTX1BFUl9QSVhFTCk7XG5cbiAgICBmb3IgKHZhciB5ID0gcmVjdC50b3A7IHkgPCByZWN0LmJvdHRvbTsgeSsrKSB7XG4gICAgICAgIHZhclxuICAgICAgICAgICAgcGl4T2Zmc2V0ID0gdGhpcy5vZmZzZXRPZlBpeGVsKHJlY3QubGVmdCwgeSk7XG4gICAgICAgIFxuICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IHJlY3RXaWR0aEJ5dGVzOyB4KyspIHtcbiAgICAgICAgICAgIHNyY1t4XSA9IHRoaXMuZGF0YVtwaXhPZmZzZXQrK107XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIG11bHRpcGx5QWxwaGEoc3JjLCByZWN0V2lkdGgpO1xuICAgICAgICBib3hCbHVyTGluZShzcmMsIGRzdCwgcmVjdFdpZHRoLCByYWRpdXNYKTtcbiAgICAgICAgXG4gICAgICAgIHBpeE9mZnNldCA9IHRoaXMub2Zmc2V0T2ZQaXhlbChyZWN0LmxlZnQsIHkpO1xuICAgICAgICBcbiAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCByZWN0V2lkdGhCeXRlczsgeCsrKSB7XG4gICAgICAgICAgICB0aGlzLmRhdGFbcGl4T2Zmc2V0KytdID0gZHN0W3hdO1xuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIGZvciAodmFyIHggPSByZWN0LmxlZnQ7IHggPCByZWN0LnJpZ2h0OyB4KyspIHtcbiAgICAgICAgdGhpcy5jb3B5UGl4ZWxDb2x1bW5Ub0FycmF5KHgsIHJlY3QudG9wLCByZWN0SGVpZ2h0LCBzcmMpO1xuICAgICAgICBcbiAgICAgICAgYm94Qmx1ckxpbmUoc3JjLCBkc3QsIHJlY3RIZWlnaHQsIHJhZGl1c1kpO1xuICAgICAgICBzZXBhcmF0ZUFscGhhKGRzdCwgcmVjdEhlaWdodCk7XG4gICAgICAgIFxuICAgICAgICB0aGlzLmNvcHlBcnJheVRvUGl4ZWxDb2x1bW4oeCwgcmVjdC50b3AsIHJlY3RIZWlnaHQsIGRzdCk7XG4gICAgfVxufTtcblxuQ1BDb2xvckJtcC5wcm90b3R5cGUub2Zmc2V0T2ZQaXhlbCA9IGZ1bmN0aW9uKHgsIHkpIHtcbiAgICByZXR1cm4gKCh5ICogdGhpcy53aWR0aCArIHgpICogQ1BDb2xvckJtcC5CWVRFU19QRVJfUElYRUwpIHwgMDtcbn07XG5cbkNQQ29sb3JCbXAucHJvdG90eXBlLmdldE1lbW9yeVNpemUgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5kYXRhLmxlbmd0aDtcbn07XG5cbi8vIExvYWQgZnJvbSBhIGxvYWRlZCBIVE1MIEltYWdlIG9iamVjdFxuQ1BDb2xvckJtcC5wcm90b3R5cGUubG9hZEZyb21JbWFnZSA9IGZ1bmN0aW9uKGltYWdlKSB7XG4gICAgdmFyXG4gICAgICAgIGltYWdlQ2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKSxcbiAgICAgICAgaW1hZ2VDb250ZXh0ID0gaW1hZ2VDYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpO1xuXG4gICAgaW1hZ2VDYW52YXMud2lkdGggPSBpbWFnZS53aWR0aDtcbiAgICBpbWFnZUNhbnZhcy5oZWlnaHQgPSBpbWFnZS5oZWlnaHQ7XG4gICAgXG4gICAgaW1hZ2VDb250ZXh0Lmdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbiA9IFwiY29weVwiO1xuICAgIGltYWdlQ29udGV4dC5kcmF3SW1hZ2UoaW1hZ2UsIDAsIDApO1xuICAgIFxuICAgIHRoaXMuaW1hZ2VEYXRhID0gaW1hZ2VDb250ZXh0LmdldEltYWdlRGF0YSgwLCAwLCB0aGlzLndpZHRoLCB0aGlzLmhlaWdodCk7XG4gICAgdGhpcy5kYXRhID0gdGhpcy5pbWFnZURhdGEuZGF0YTtcbn07XG5cbkNQQ29sb3JCbXAucHJvdG90eXBlLmdldEltYWdlRGF0YSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLmltYWdlRGF0YTtcbn07XG5cbi8qKlxuICogUmVwbGFjZSB0aGUgaW1hZ2UgZGF0YSB3aXRoIHRoZSBwcm92aWRlZCBJbWFnZURhdGEgb2JqZWN0LlxuICpcbiAqIEBwYXJhbSBpbWFnZURhdGEge0ltYWdlRGF0YX1cbiAqL1xuQ1BDb2xvckJtcC5wcm90b3R5cGUuc2V0SW1hZ2VEYXRhID0gZnVuY3Rpb24oaW1hZ2VEYXRhKSB7XG4gICAgdGhpcy53aWR0aCA9IGltYWdlRGF0YS53aWR0aDtcbiAgICB0aGlzLmhlaWdodCA9IGltYWdlRGF0YS5oZWlnaHQ7XG4gICAgdGhpcy5pbWFnZURhdGEgPSBpbWFnZURhdGE7XG4gICAgdGhpcy5kYXRhID0gaW1hZ2VEYXRhLmRhdGE7XG59OyIsIi8qXG4gICAgQ2hpY2tlblBhaW50XG4gICAgXG4gICAgQ2hpY2tlblBhaW50IGlzIGEgdHJhbnNsYXRpb24gb2YgQ2hpYmlQYWludCBmcm9tIEphdmEgdG8gSmF2YVNjcmlwdFxuICAgIGJ5IE5pY2hvbGFzIFNoZXJsb2NrIC8gQ2hpY2tlbiBTbW9vdGhpZS5cbiAgICBcbiAgICBDaGliaVBhaW50IGlzIENvcHlyaWdodCAoYykgMjAwNi0yMDA4IE1hcmMgU2NoZWZlclxuXG4gICAgQ2hpY2tlblBhaW50IGlzIGZyZWUgc29mdHdhcmU6IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vciBtb2RpZnlcbiAgICBpdCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGFzIHB1Ymxpc2hlZCBieVxuICAgIHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb24sIGVpdGhlciB2ZXJzaW9uIDMgb2YgdGhlIExpY2Vuc2UsIG9yXG4gICAgKGF0IHlvdXIgb3B0aW9uKSBhbnkgbGF0ZXIgdmVyc2lvbi5cblxuICAgIENoaWNrZW5QYWludCBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLFxuICAgIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mXG4gICAgTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiAgU2VlIHRoZVxuICAgIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuXG5cbiAgICBZb3Ugc2hvdWxkIGhhdmUgcmVjZWl2ZWQgYSBjb3B5IG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZVxuICAgIGFsb25nIHdpdGggQ2hpY2tlblBhaW50LiBJZiBub3QsIHNlZSA8aHR0cDovL3d3dy5nbnUub3JnL2xpY2Vuc2VzLz4uXG4qL1xuXG5pbXBvcnQgQ1BCaXRtYXAgZnJvbSBcIi4vQ1BCaXRtYXBcIjtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gQ1BHcmV5Qm1wKHdpZHRoLCBoZWlnaHQsIGJpdERlcHRoKSB7XG5cbiAgICBDUEJpdG1hcC5jYWxsKHRoaXMsIHdpZHRoLCBoZWlnaHQpO1xuXG4gICAgdGhpcy5iaXREZXB0aCA9IGJpdERlcHRoO1xuICAgIFxuICAgIHN3aXRjaCAoYml0RGVwdGgpIHtcbiAgICAgICAgY2FzZSAzMjpcbiAgICAgICAgICAgIHRoaXMuZGF0YSA9IG5ldyBVaW50MzJBcnJheSh3aWR0aCAqIGhlaWdodCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDE2OlxuICAgICAgICAgICAgdGhpcy5kYXRhID0gbmV3IFVpbnQxNkFycmF5KHdpZHRoICogaGVpZ2h0KTtcbiAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgODpcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHRoaXMuZGF0YSA9IG5ldyBVaW50OEFycmF5KHdpZHRoICogaGVpZ2h0KTtcbiAgICB9XG5cbiAgICB0aGlzLmNsb25lID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhclxuICAgICAgICAgICAgcmVzdWx0ID0gbmV3IENQR3JleUJtcCh0aGlzLndpZHRoLCB0aGlzLmhlaWdodCwgdGhpcy5iaXREZXB0aCk7XG4gICAgICAgIFxuICAgICAgICByZXN1bHQuZGF0YS5zZXQodGhpcy5kYXRhKTtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfTtcbiAgICBcbiAgICB0aGlzLmNsZWFyQWxsID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmRhdGEubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHRoaXMuZGF0YVtpXSA9IHZhbHVlO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBcbiAgICB0aGlzLmNsZWFyUmVjdCA9IGZ1bmN0aW9uKHJlY3QsIHZhbHVlKSB7XG4gICAgICAgIHZhclxuICAgICAgICAgICAgcmVjdCA9IHRoaXMuZ2V0Qm91bmRzKCkuY2xpcChyZWN0KSxcbiAgICAgICAgICAgIHlTdHJpZGUgPSB0aGlzLndpZHRoIC0gcmVjdC5nZXRXaWR0aCgpLFxuICAgICAgICAgICAgcGl4SW5kZXggPSB0aGlzLm9mZnNldE9mUGl4ZWwocmVjdC5sZWZ0LCByZWN0LnRvcCk7XG4gICAgICAgIFxuICAgICAgICBmb3IgKHZhciB5ID0gcmVjdC50b3A7IHkgPCByZWN0LmJvdHRvbTsgeSsrLCBwaXhJbmRleCArPSB5U3RyaWRlKSB7XG4gICAgICAgICAgICBmb3IgKHZhciB4ID0gcmVjdC5sZWZ0OyB4IDwgcmVjdC5yaWdodDsgeCsrLCBwaXhJbmRleCsrKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kYXRhW3BpeEluZGV4XSA9IHZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcblxuICAgIHRoaXMubWlycm9ySG9yaXpvbnRhbGx5ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhclxuICAgICAgICAgICAgbmV3RGF0YSA9IG5ldyBVaW50OEFycmF5KHdpZHRoICogaGVpZ2h0KTtcblxuICAgICAgICBmb3IgKHZhciB5ID0gMDsgeSA8IGhlaWdodDsgeSsrKSB7XG4gICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IHdpZHRoOyB4KyspIHtcbiAgICAgICAgICAgICAgICBuZXdEYXRhW3kgKiB3aWR0aCArIHhdID0gdGhpcy5kYXRhW3kgKiB3aWR0aCArIHdpZHRoIC0geCAtIDFdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5kYXRhID0gbmV3RGF0YTtcbiAgICB9O1xuXG4gICAgdGhpcy5hcHBseUxVVCA9IGZ1bmN0aW9uKGx1dCkge1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuZGF0YS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdGhpcy5kYXRhW2ldID0gbHV0LnRhYmxlW3RoaXMuZGF0YVtpXV07XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFxuICAgIHRoaXMudG9DYW52YXMgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyXG4gICAgICAgICAgICBpbWFnZURhdGEgPSB0aGlzLnRvSW1hZ2VEYXRhKCksXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIiksXG4gICAgICAgICAgICBjb250ZXh0ID0gY2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcbiAgICAgICAgXG4gICAgICAgIGNhbnZhcy53aWR0aCA9IHRoaXMud2lkdGg7XG4gICAgICAgIGNhbnZhcy5oZWlnaHQgPSB0aGlzLmhlaWdodDtcbiAgICAgICAgXG4gICAgICAgIGNvbnRleHQucHV0SW1hZ2VEYXRhKGltYWdlRGF0YSwgMCwgMCk7XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gY2FudmFzO1xuICAgIH07XG4gICAgXG4gICAgdGhpcy50b0ltYWdlRGF0YSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXJcbiAgICAgICAgICAgIGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIiksXG4gICAgICAgICAgICBjb250ZXh0ID0gY2FudmFzLmdldENvbnRleHQoXCIyZFwiKSxcbiAgICAgICAgICAgIGltYWdlRGF0YSA9IGNvbnRleHQuY3JlYXRlSW1hZ2VEYXRhKHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0KSxcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgc3JjSW5kZXggPSAwLFxuICAgICAgICAgICAgZHN0SW5kZXggPSAwO1xuICAgICAgICBcbiAgICAgICAgZm9yICh2YXIgeSA9IDA7IHkgPCB0aGlzLmhlaWdodDsgeSsrKSB7XG4gICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IHRoaXMud2lkdGg7IHgrKykge1xuICAgICAgICAgICAgICAgIGltYWdlRGF0YS5kYXRhW2RzdEluZGV4KytdID0gdGhpcy5kYXRhW3NyY0luZGV4XTtcbiAgICAgICAgICAgICAgICBpbWFnZURhdGEuZGF0YVtkc3RJbmRleCsrXSA9IHRoaXMuZGF0YVtzcmNJbmRleF07XG4gICAgICAgICAgICAgICAgaW1hZ2VEYXRhLmRhdGFbZHN0SW5kZXgrK10gPSB0aGlzLmRhdGFbc3JjSW5kZXhdO1xuICAgICAgICAgICAgICAgIGltYWdlRGF0YS5kYXRhW2RzdEluZGV4KytdID0gMHhGRjtcbiAgICAgICAgICAgICAgICBzcmNJbmRleCsrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gaW1hZ2VEYXRhO1xuICAgIH07XG59XG5cbkNQR3JleUJtcC5wcm90b3R5cGUub2Zmc2V0T2ZQaXhlbCA9IGZ1bmN0aW9uKHgsIHkpIHtcbiAgICByZXR1cm4geSAqIHRoaXMud2lkdGggKyB4O1xufSIsIi8qXG4gICAgQ2hpY2tlblBhaW50XG4gICAgXG4gICAgQ2hpY2tlblBhaW50IGlzIGEgdHJhbnNsYXRpb24gb2YgQ2hpYmlQYWludCBmcm9tIEphdmEgdG8gSmF2YVNjcmlwdFxuICAgIGJ5IE5pY2hvbGFzIFNoZXJsb2NrIC8gQ2hpY2tlbiBTbW9vdGhpZS5cbiAgICBcbiAgICBDaGliaVBhaW50IGlzIENvcHlyaWdodCAoYykgMjAwNi0yMDA4IE1hcmMgU2NoZWZlclxuXG4gICAgQ2hpY2tlblBhaW50IGlzIGZyZWUgc29mdHdhcmU6IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vciBtb2RpZnlcbiAgICBpdCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGFzIHB1Ymxpc2hlZCBieVxuICAgIHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb24sIGVpdGhlciB2ZXJzaW9uIDMgb2YgdGhlIExpY2Vuc2UsIG9yXG4gICAgKGF0IHlvdXIgb3B0aW9uKSBhbnkgbGF0ZXIgdmVyc2lvbi5cblxuICAgIENoaWNrZW5QYWludCBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLFxuICAgIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mXG4gICAgTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiAgU2VlIHRoZVxuICAgIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuXG5cbiAgICBZb3Ugc2hvdWxkIGhhdmUgcmVjZWl2ZWQgYSBjb3B5IG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZVxuICAgIGFsb25nIHdpdGggQ2hpY2tlblBhaW50LiBJZiBub3QsIHNlZSA8aHR0cDovL3d3dy5nbnUub3JnL2xpY2Vuc2VzLz4uXG4qL1xuXG5pbXBvcnQgQ1BDb2xvckJtcCBmcm9tICcuL0NQQ29sb3JCbXAnO1xuaW1wb3J0IENQQmxlbmQgZnJvbSAnLi9DUEJsZW5kJztcblxuLyoqXG4gKiBOb3RlIGxheWVyIGlzIG5vdCBjbGVhcmVkIHRvIGFueSBzcGVjaWZpYyB2YWx1ZXMgdXBvbiBpbml0aWFsIGNyZWF0aW9uLCB1c2UgY2xlYXJBbGwoKS5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gQ1BMYXllcih3aWR0aCwgaGVpZ2h0LCBuYW1lKSB7XG4gICAgLy8gU3VwZXItY29uc3RydWN0b3JcbiAgICBDUENvbG9yQm1wLmNhbGwodGhpcywgd2lkdGgsIGhlaWdodCk7XG4gICAgXG4gICAgdGhpcy5uYW1lID0gbmFtZSB8fCBcIlwiO1xuICAgIFxuICAgIHRoaXMuYWxwaGEgPSAxMDA7XG4gICAgdGhpcy52aXNpYmxlID0gdHJ1ZTtcbiAgICB0aGlzLmJsZW5kTW9kZSA9IENQTGF5ZXIuTE1fTk9STUFMO1xufVxuXG5DUExheWVyLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoQ1BDb2xvckJtcC5wcm90b3R5cGUpO1xuQ1BMYXllci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBDUExheWVyO1xuXG5jb25zdFxuICAgIEJZVEVTX1BFUl9QSVhFTCA9IDQsXG4gICAgXG4gICAgUkVEX0JZVEVfT0ZGU0VUID0gMCxcbiAgICBHUkVFTl9CWVRFX09GRlNFVCA9IDEsXG4gICAgQkxVRV9CWVRFX09GRlNFVCA9IDIsXG4gICAgQUxQSEFfQllURV9PRkZTRVQgPSAzLFxuICAgIFxuICAgIGJsZW5kID0gbmV3IENQQmxlbmQoKTtcblxuQ1BMYXllci5wcm90b3R5cGUuZnVzaW9uV2l0aCA9IGZ1bmN0aW9uKGZ1c2lvbiwgcmVjdCkge1xuICAgIGlmICh0aGlzLmFscGhhIDw9IDApIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBcbiAgICByZWN0ID0gdGhpcy5nZXRCb3VuZHMoKS5jbGlwKHJlY3QpO1xuICAgIFxuICAgIHN3aXRjaCAodGhpcy5ibGVuZE1vZGUpIHtcbiAgICAgICAgY2FzZSBDUExheWVyLkxNX05PUk1BTDpcbiAgICAgICAgICAgIGlmICh0aGlzLmFscGhhID49IDEwMCkge1xuICAgICAgICAgICAgICAgIGJsZW5kLmZ1c2lvbldpdGhOb3JtYWxOb0FscGhhKHRoaXMsIGZ1c2lvbiwgcmVjdCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGJsZW5kLmZ1c2lvbldpdGhOb3JtYWwodGhpcywgZnVzaW9uLCByZWN0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBcbiAgICAgICAgY2FzZSBDUExheWVyLkxNX01VTFRJUExZOlxuICAgICAgICAgICAgYmxlbmQuZnVzaW9uV2l0aE11bHRpcGx5KHRoaXMsIGZ1c2lvbiwgcmVjdCk7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlIENQTGF5ZXIuTE1fQUREOlxuICAgICAgICAgICAgYmxlbmQuZnVzaW9uV2l0aEFkZCh0aGlzLCBmdXNpb24sIHJlY3QpO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSBDUExheWVyLkxNX1NDUkVFTjpcbiAgICAgICAgICAgIGJsZW5kLmZ1c2lvbldpdGhTY3JlZW4odGhpcywgZnVzaW9uLCByZWN0KTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgQ1BMYXllci5MTV9MSUdIVEVOOlxuICAgICAgICAgICAgYmxlbmQuZnVzaW9uV2l0aExpZ2h0ZW4odGhpcywgZnVzaW9uLCByZWN0KTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgQ1BMYXllci5MTV9EQVJLRU46XG4gICAgICAgICAgICBibGVuZC5mdXNpb25XaXRoRGFya2VuKHRoaXMsIGZ1c2lvbiwgcmVjdCk7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlIENQTGF5ZXIuTE1fU1VCVFJBQ1Q6XG4gICAgICAgICAgICBibGVuZC5mdXNpb25XaXRoU3VidHJhY3QodGhpcywgZnVzaW9uLCByZWN0KTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgQ1BMYXllci5MTV9ET0RHRTpcbiAgICAgICAgICAgIGJsZW5kLmZ1c2lvbldpdGhEb2RnZSh0aGlzLCBmdXNpb24sIHJlY3QpO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSBDUExheWVyLkxNX0JVUk46XG4gICAgICAgICAgICBibGVuZC5mdXNpb25XaXRoQnVybih0aGlzLCBmdXNpb24sIHJlY3QpO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSBDUExheWVyLkxNX09WRVJMQVk6XG4gICAgICAgICAgICBibGVuZC5mdXNpb25XaXRoT3ZlcmxheSh0aGlzLCBmdXNpb24sIHJlY3QpO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSBDUExheWVyLkxNX0hBUkRMSUdIVDpcbiAgICAgICAgICAgIGJsZW5kLmZ1c2lvbldpdGhIYXJkTGlnaHRGdWxsQWxwaGEodGhpcywgZnVzaW9uLCByZWN0KTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgQ1BMYXllci5MTV9TT0ZUTElHSFQ6XG4gICAgICAgICAgICBibGVuZC5mdXNpb25XaXRoU29mdExpZ2h0RnVsbEFscGhhKHRoaXMsIGZ1c2lvbiwgcmVjdCk7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlIENQTGF5ZXIuTE1fVklWSURMSUdIVDpcbiAgICAgICAgICAgIGJsZW5kLmZ1c2lvbldpdGhWaXZpZExpZ2h0RnVsbEFscGhhKHRoaXMsIGZ1c2lvbiwgcmVjdCk7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlIENQTGF5ZXIuTE1fTElORUFSTElHSFQ6XG4gICAgICAgICAgICBibGVuZC5mdXNpb25XaXRoTGluZWFyTGlnaHRGdWxsQWxwaGEodGhpcywgZnVzaW9uLCByZWN0KTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgQ1BMYXllci5MTV9QSU5MSUdIVDpcbiAgICAgICAgICAgIGJsZW5kLmZ1c2lvbldpdGhQaW5MaWdodEZ1bGxBbHBoYSh0aGlzLCBmdXNpb24sIHJlY3QpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgfVxufTtcblxuQ1BMYXllci5wcm90b3R5cGUuZnVzaW9uV2l0aEZ1bGxBbHBoYSA9IGZ1bmN0aW9uKGZ1c2lvbiwgcmVjdCkge1xuICAgIGlmICh0aGlzLmFscGhhIDw9IDApIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBcbiAgICByZWN0ID0gdGhpcy5nZXRCb3VuZHMoKS5jbGlwKHJlY3QpO1xuXG4gICAgc3dpdGNoICh0aGlzLmJsZW5kTW9kZSkge1xuICAgICAgICBjYXNlIENQTGF5ZXIuTE1fTk9STUFMOlxuICAgICAgICAgICAgYmxlbmQuZnVzaW9uV2l0aE5vcm1hbEZ1bGxBbHBoYSh0aGlzLCBmdXNpb24sIHJlY3QpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIFxuICAgICAgICBjYXNlIENQTGF5ZXIuTE1fTVVMVElQTFk6XG4gICAgICAgICAgICBibGVuZC5mdXNpb25XaXRoTXVsdGlwbHlGdWxsQWxwaGEodGhpcywgZnVzaW9uLCByZWN0KTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgQ1BMYXllci5MTV9BREQ6XG4gICAgICAgICAgICBibGVuZC5mdXNpb25XaXRoQWRkRnVsbEFscGhhKHRoaXMsIGZ1c2lvbiwgcmVjdCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIFxuICAgICAgICBjYXNlIENQTGF5ZXIuTE1fU0NSRUVOOlxuICAgICAgICAgICAgYmxlbmQuZnVzaW9uV2l0aFNjcmVlbkZ1bGxBbHBoYSh0aGlzLCBmdXNpb24sIHJlY3QpO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSBDUExheWVyLkxNX0xJR0hURU46XG4gICAgICAgICAgICBibGVuZC5mdXNpb25XaXRoTGlnaHRlbkZ1bGxBbHBoYSh0aGlzLCBmdXNpb24sIHJlY3QpO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSBDUExheWVyLkxNX0RBUktFTjpcbiAgICAgICAgICAgIGJsZW5kLmZ1c2lvbldpdGhEYXJrZW5GdWxsQWxwaGEodGhpcywgZnVzaW9uLCByZWN0KTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgQ1BMYXllci5MTV9TVUJUUkFDVDpcbiAgICAgICAgICAgIGJsZW5kLmZ1c2lvbldpdGhTdWJ0cmFjdEZ1bGxBbHBoYSh0aGlzLCBmdXNpb24sIHJlY3QpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBcbiAgICAgICAgY2FzZSBDUExheWVyLkxNX0RPREdFOlxuICAgICAgICAgICAgYmxlbmQuZnVzaW9uV2l0aERvZGdlRnVsbEFscGhhKHRoaXMsIGZ1c2lvbiwgcmVjdCk7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlIENQTGF5ZXIuTE1fQlVSTjpcbiAgICAgICAgICAgIGJsZW5kLmZ1c2lvbldpdGhCdXJuRnVsbEFscGhhKHRoaXMsIGZ1c2lvbiwgcmVjdCk7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlIENQTGF5ZXIuTE1fT1ZFUkxBWTpcbiAgICAgICAgICAgIGJsZW5kLmZ1c2lvbldpdGhPdmVybGF5RnVsbEFscGhhKHRoaXMsIGZ1c2lvbiwgcmVjdCk7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlIENQTGF5ZXIuTE1fSEFSRExJR0hUOlxuICAgICAgICAgICAgYmxlbmQuZnVzaW9uV2l0aEhhcmRMaWdodEZ1bGxBbHBoYSh0aGlzLCBmdXNpb24sIHJlY3QpO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSBDUExheWVyLkxNX1NPRlRMSUdIVDpcbiAgICAgICAgICAgIGJsZW5kLmZ1c2lvbldpdGhTb2Z0TGlnaHRGdWxsQWxwaGEodGhpcywgZnVzaW9uLCByZWN0KTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgQ1BMYXllci5MTV9WSVZJRExJR0hUOlxuICAgICAgICAgICAgYmxlbmQuZnVzaW9uV2l0aFZpdmlkTGlnaHRGdWxsQWxwaGEodGhpcywgZnVzaW9uLCByZWN0KTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgQ1BMYXllci5MTV9MSU5FQVJMSUdIVDpcbiAgICAgICAgICAgIGJsZW5kLmZ1c2lvbldpdGhMaW5lYXJMaWdodEZ1bGxBbHBoYSh0aGlzLCBmdXNpb24sIHJlY3QpO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSBDUExheWVyLkxNX1BJTkxJR0hUOlxuICAgICAgICAgICAgYmxlbmQuZnVzaW9uV2l0aFBpbkxpZ2h0RnVsbEFscGhhKHRoaXMsIGZ1c2lvbiwgcmVjdCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICB9XG59O1xuXG5DUExheWVyLnByb3RvdHlwZS5jbGVhckFsbCA9IGZ1bmN0aW9uKGNvbG9yKSB7XG4gICAgdmFyXG4gICAgICAgIGEgPSAoY29sb3IgPj4gMjQpICYgMHhGRixcbiAgICAgICAgciA9IChjb2xvciA+PiAxNikgJiAweEZGLFxuICAgICAgICBnID0gKGNvbG9yID4+IDgpICYgMHhGRixcbiAgICAgICAgYiA9IGNvbG9yICYgMHhGRjtcbiAgICBcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMud2lkdGggKiB0aGlzLmhlaWdodCAqIEJZVEVTX1BFUl9QSVhFTDsgKSB7XG4gICAgICAgIHRoaXMuZGF0YVtpKytdID0gcjtcbiAgICAgICAgdGhpcy5kYXRhW2krK10gPSBnO1xuICAgICAgICB0aGlzLmRhdGFbaSsrXSA9IGI7XG4gICAgICAgIHRoaXMuZGF0YVtpKytdID0gYTtcbiAgICB9XG59O1xuXG5DUExheWVyLnByb3RvdHlwZS5jbGVhclJlY3QgPSBmdW5jdGlvbihyZWN0LCBjb2xvcikge1xuICAgIHZhclxuICAgICAgICBhID0gKGNvbG9yID4+IDI0KSAmIDB4RkYsXG4gICAgICAgIHIgPSAoY29sb3IgPj4gMTYpICYgMHhGRixcbiAgICAgICAgZyA9IChjb2xvciA+PiA4KSAmIDB4RkYsXG4gICAgICAgIGIgPSBjb2xvciAmIDB4RkY7XG4gICAgXG4gICAgdmFyXG4gICAgICAgIHJlY3QgPSB0aGlzLmdldEJvdW5kcygpLmNsaXAocmVjdCksXG4gICAgICAgIHlTdHJpZGUgPSAodGhpcy53aWR0aCAtIHJlY3QuZ2V0V2lkdGgoKSkgKiBCWVRFU19QRVJfUElYRUwsXG4gICAgICAgIFxuICAgICAgICBwaXhJbmRleCA9IHRoaXMub2Zmc2V0T2ZQaXhlbChyZWN0LmxlZnQsIHJlY3QudG9wKTtcbiAgICBcbiAgICBmb3IgKHZhciB5ID0gcmVjdC50b3A7IHkgPCByZWN0LmJvdHRvbTsgeSsrLCBwaXhJbmRleCArPSB5U3RyaWRlKSB7XG4gICAgICAgIGZvciAodmFyIHggPSByZWN0LmxlZnQ7IHggPCByZWN0LnJpZ2h0OyB4KyspIHtcbiAgICAgICAgICAgIHRoaXMuZGF0YVtwaXhJbmRleCsrXSA9IHI7XG4gICAgICAgICAgICB0aGlzLmRhdGFbcGl4SW5kZXgrK10gPSBnO1xuICAgICAgICAgICAgdGhpcy5kYXRhW3BpeEluZGV4KytdID0gYjtcbiAgICAgICAgICAgIHRoaXMuZGF0YVtwaXhJbmRleCsrXSA9IGE7XG4gICAgICAgIH1cbiAgICB9XG59O1xuXG4vKipcbiAqIEBwYXJhbSByZWN0IENQUmVjdFxuICogQHBhcmFtIHNvdXJjZSBDUExheWVyXG4gKi9cbkNQTGF5ZXIucHJvdG90eXBlLmNvcHlSZWdpb25IRmxpcCA9IGZ1bmN0aW9uKHJlY3QsIHNvdXJjZSkge1xuICAgIHJlY3QgPSB0aGlzLmdldEJvdW5kcygpLmNsaXAocmVjdCk7XG5cbiAgICBmb3IgKHZhciB5ID0gcmVjdC50b3A7IHkgPCByZWN0LmJvdHRvbTsgeSsrKSB7XG4gICAgICAgIHZhclxuICAgICAgICAgICAgZHN0T2Zmc2V0ID0gdGhpcy5vZmZzZXRPZlBpeGVsKHJlY3QubGVmdCwgeSksXG4gICAgICAgICAgICBzcmNPZmZzZXQgPSBzb3VyY2Uub2Zmc2V0T2ZQaXhlbChyZWN0LnJpZ2h0IC0gMSwgeSk7XG4gICAgICAgIFxuICAgICAgICBmb3IgKHZhciB4ID0gcmVjdC5sZWZ0OyB4IDwgcmVjdC5yaWdodDsgeCsrLCBzcmNPZmZzZXQgLT0gQ1BDb2xvckJtcC5CWVRFU19QRVJfUElYRUwgKiAyKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IENQQ29sb3JCbXAuQllURVNfUEVSX1BJWEVMOyBpKyspIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRhdGFbZHN0T2Zmc2V0KytdID0gc291cmNlLmRhdGFbc3JjT2Zmc2V0KytdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufTtcblxuLyoqXG4gKiBAcGFyYW0gcmVjdCBDUFJlY3RcbiAqIEBwYXJhbSBzb3VyY2UgQ1BMYXllclxuICovXG5DUExheWVyLnByb3RvdHlwZS5jb3B5UmVnaW9uVkZsaXAgPSBmdW5jdGlvbihyZWN0LCBzb3VyY2UpIHtcbiAgICByZWN0ID0gdGhpcy5nZXRCb3VuZHMoKS5jbGlwKHJlY3QpO1xuICAgIFxuICAgIHZhclxuICAgICAgICB3aWR0aEJ5dGVzID0gcmVjdC5nZXRXaWR0aCgpICogQ1BDb2xvckJtcC5CWVRFU19QRVJfUElYRUw7XG5cbiAgICBmb3IgKHZhciB5ID0gcmVjdC50b3A7IHkgPCByZWN0LmJvdHRvbTsgeSsrKSB7XG4gICAgICAgIHZhclxuICAgICAgICAgICAgZHN0T2Zmc2V0ID0gdGhpcy5vZmZzZXRPZlBpeGVsKHJlY3QubGVmdCwgeSksXG4gICAgICAgICAgICBzcmNPZmZzZXQgPSBzb3VyY2Uub2Zmc2V0T2ZQaXhlbChyZWN0LmxlZnQsIHJlY3QuYm90dG9tIC0gMSAtICh5IC0gcmVjdC50b3ApKTtcbiAgICAgICAgXG4gICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgd2lkdGhCeXRlczsgeCsrKSB7XG4gICAgICAgICAgICB0aGlzLmRhdGFbZHN0T2Zmc2V0KytdID0gc291cmNlLmRhdGFbc3JjT2Zmc2V0KytdO1xuICAgICAgICB9XG4gICAgfVxufVxuXG4vKipcbiAqIEBwYXJhbSByIENQUmVjdFxuICovXG5DUExheWVyLnByb3RvdHlwZS5maWxsV2l0aE5vaXNlID0gZnVuY3Rpb24ocmVjdCkge1xuICAgIHJlY3QgPSB0aGlzLmdldEJvdW5kcygpLmNsaXAocmVjdCk7XG5cbiAgICB2YXJcbiAgICAgICAgdmFsdWUsXG4gICAgICAgIHlTdHJpZGUgPSAodGhpcy53aWR0aCAtIHJlY3QuZ2V0V2lkdGgoKSkgKiBDUENvbG9yQm1wLkJZVEVTX1BFUl9QSVhFTCxcbiAgICAgICAgXG4gICAgICAgIHBpeEluZGV4ID0gdGhpcy5vZmZzZXRPZlBpeGVsKHJlY3QubGVmdCwgcmVjdC50b3ApO1xuXG4gICAgZm9yICh2YXIgeSA9IHJlY3QudG9wOyB5IDwgcmVjdC5ib3R0b207IHkrKywgcGl4SW5kZXggKz0geVN0cmlkZSkge1xuICAgICAgICBmb3IgKHZhciB4ID0gcmVjdC5sZWZ0OyB4IDwgcmVjdC5yaWdodDsgeCsrLCBwaXhJbmRleCArPSBDUENvbG9yQm1wLkJZVEVTX1BFUl9QSVhFTCkge1xuICAgICAgICAgICAgdmFsdWUgPSAoTWF0aC5yYW5kb20oKSAqIDB4MTAwKSB8IDA7XG5cbiAgICAgICAgICAgIHRoaXMuZGF0YVtwaXhJbmRleCArIENQQ29sb3JCbXAuUkVEX0JZVEVfT0ZGU0VUXSA9IHZhbHVlO1xuICAgICAgICAgICAgdGhpcy5kYXRhW3BpeEluZGV4ICsgQ1BDb2xvckJtcC5HUkVFTl9CWVRFX09GRlNFVF0gPSB2YWx1ZTtcbiAgICAgICAgICAgIHRoaXMuZGF0YVtwaXhJbmRleCArIENQQ29sb3JCbXAuQkxVRV9CWVRFX09GRlNFVF0gPSB2YWx1ZTtcbiAgICAgICAgICAgIHRoaXMuZGF0YVtwaXhJbmRleCArIENQQ29sb3JCbXAuQUxQSEFfQllURV9PRkZTRVRdID0gMHhGRjtcbiAgICAgICAgfVxuICAgIH1cbn07XG5cbi8qKlxuICogUmVwbGFjZSB0aGUgcGl4ZWxzIGluIHRoZSBnaXZlbiByZWN0IHdpdGggdGhlIGdpdmVuIGhvcml6b250YWwgZ3JhZGllbnQuXG4gKlxuICogQHBhcmFtIHJlY3QgQ1BSZWN0XG4gKiBAcGFyYW0gZnJvbVggaW50XG4gKiBAcGFyYW0gdG9YIGludFxuICogQHBhcmFtIGdyYWRpZW50UG9pbnRzIGludFtdXG4gKi9cbkNQTGF5ZXIucHJvdG90eXBlLmdyYWRpZW50SG9yelJlcGxhY2UgPSBmdW5jdGlvbihyZWN0LCBmcm9tWCwgdG9YLCBncmFkaWVudFBvaW50cykge1xuICAgIHZhclxuICAgICAgICBmcm9tQ29sb3IgPSB7XG4gICAgICAgICAgICByOiAoZ3JhZGllbnRQb2ludHNbMF0gPj4gMTYpICYgMHhGRixcbiAgICAgICAgICAgIGc6IChncmFkaWVudFBvaW50c1swXSA+PiA4KSAmIDB4RkYsXG4gICAgICAgICAgICBiOiBncmFkaWVudFBvaW50c1swXSAmIDB4RkYsXG4gICAgICAgICAgICBhOiAoZ3JhZGllbnRQb2ludHNbMF0gPj4gMjQpICYgMHhGRlxuICAgICAgICB9LFxuICAgICAgICB0b0NvbG9yID0ge1xuICAgICAgICAgICAgcjogKGdyYWRpZW50UG9pbnRzWzFdID4+IDE2KSAmIDB4RkYsXG4gICAgICAgICAgICBnOiAoZ3JhZGllbnRQb2ludHNbMV0gPj4gOCkgJiAweEZGLFxuICAgICAgICAgICAgYjogZ3JhZGllbnRQb2ludHNbMV0gJiAweEZGLFxuICAgICAgICAgICAgYTogKGdyYWRpZW50UG9pbnRzWzFdID4+IDI0KSAmIDB4RkZcbiAgICAgICAgfSxcblxuICAgICAgICB5U3RyaWRlID0gKHRoaXMud2lkdGggLSByZWN0LmdldFdpZHRoKCkpICogQ1BDb2xvckJtcC5CWVRFU19QRVJfUElYRUwsXG4gICAgICAgIHBpeEluZGV4ID0gdGhpcy5vZmZzZXRPZlBpeGVsKHJlY3QubGVmdCwgcmVjdC50b3ApIHwgMCxcbiAgICAgICAgaCA9IChyZWN0LmJvdHRvbSAtIHJlY3QudG9wKSB8IDA7XG5cbiAgICBpZiAodG9YIDwgZnJvbVgpIHtcbiAgICAgICAgdmFyXG4gICAgICAgICAgICB0ZW1wID0gdG9YO1xuICAgICAgICB0b1ggPSBmcm9tWDtcbiAgICAgICAgZnJvbVggPSB0ZW1wO1xuXG4gICAgICAgIHRlbXAgPSBmcm9tQ29sb3I7XG4gICAgICAgIGZyb21Db2xvciA9IHRvQ29sb3I7XG4gICAgICAgIHRvQ29sb3IgPSB0ZW1wO1xuICAgIH1cbiAgICBcbiAgICB2YXJcbiAgICAgICAgZ3JhZGllbnRSYW5nZSA9ICh0b1ggLSBmcm9tWCkgfCAwLFxuICAgICAgICByU3RlcCA9ICh0b0NvbG9yLnIgLSBmcm9tQ29sb3IucikgLyBncmFkaWVudFJhbmdlLFxuICAgICAgICBnU3RlcCA9ICh0b0NvbG9yLmcgLSBmcm9tQ29sb3IuZykgLyBncmFkaWVudFJhbmdlLFxuICAgICAgICBiU3RlcCA9ICh0b0NvbG9yLmIgLSBmcm9tQ29sb3IuYikgLyBncmFkaWVudFJhbmdlLFxuICAgICAgICBhU3RlcCA9ICh0b0NvbG9yLmEgLSBmcm9tQ29sb3IuYSkgLyBncmFkaWVudFJhbmdlLFxuICAgIFxuICAgICAgICBqdW1wID0gTWF0aC5tYXgocmVjdC5sZWZ0IC0gZnJvbVgsIDApO1xuXG4gICAgZm9yICh2YXIgeSA9IDA7IHkgPCBoOyB5KyssIHBpeEluZGV4ICs9IHlTdHJpZGUpIHtcbiAgICAgICAgLy8gVGhlIHNvbGlkIGNvbG9yIHNlY3Rpb24gYmVmb3JlIHRoZSBncmFkaWVudFxuICAgICAgICB2YXJcbiAgICAgICAgICAgIHggPSByZWN0LmxlZnQ7XG5cbiAgICAgICAgZm9yICh2YXIgeEVuZCA9IE1hdGgubWluKGZyb21YLCByZWN0LnJpZ2h0KSB8IDA7IHggPCB4RW5kOyB4KyssIHBpeEluZGV4ICs9IENQQ29sb3JCbXAuQllURVNfUEVSX1BJWEVMKSB7XG4gICAgICAgICAgICB0aGlzLmRhdGFbcGl4SW5kZXggKyBDUENvbG9yQm1wLlJFRF9CWVRFX09GRlNFVF0gPSBmcm9tQ29sb3IucjtcbiAgICAgICAgICAgIHRoaXMuZGF0YVtwaXhJbmRleCArIENQQ29sb3JCbXAuR1JFRU5fQllURV9PRkZTRVRdID0gZnJvbUNvbG9yLmc7XG4gICAgICAgICAgICB0aGlzLmRhdGFbcGl4SW5kZXggKyBDUENvbG9yQm1wLkJMVUVfQllURV9PRkZTRVRdID0gZnJvbUNvbG9yLmI7XG4gICAgICAgICAgICB0aGlzLmRhdGFbcGl4SW5kZXggKyBDUENvbG9yQm1wLkFMUEhBX0JZVEVfT0ZGU0VUXSA9IGZyb21Db2xvci5hO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gSW4gdGhlIGdyYWRpZW50XG4gICAgICAgIHZhclxuICAgICAgICAgICAgciA9IGZyb21Db2xvci5yICsgclN0ZXAgKiBqdW1wLFxuICAgICAgICAgICAgZyA9IGZyb21Db2xvci5nICsgZ1N0ZXAgKiBqdW1wLFxuICAgICAgICAgICAgYiA9IGZyb21Db2xvci5iICsgYlN0ZXAgKiBqdW1wLFxuICAgICAgICAgICAgYSA9IGZyb21Db2xvci5hICsgYVN0ZXAgKiBqdW1wO1xuXG4gICAgICAgIGZvciAoeEVuZCA9IE1hdGgubWluKHRvWCwgcmVjdC5yaWdodCkgfCAwOyB4IDwgeEVuZDsgeCsrLCBwaXhJbmRleCArPSBDUENvbG9yQm1wLkJZVEVTX1BFUl9QSVhFTCkge1xuICAgICAgICAgICAgdGhpcy5kYXRhW3BpeEluZGV4ICsgQ1BDb2xvckJtcC5SRURfQllURV9PRkZTRVRdID0gcjtcbiAgICAgICAgICAgIHRoaXMuZGF0YVtwaXhJbmRleCArIENQQ29sb3JCbXAuR1JFRU5fQllURV9PRkZTRVRdID0gZztcbiAgICAgICAgICAgIHRoaXMuZGF0YVtwaXhJbmRleCArIENQQ29sb3JCbXAuQkxVRV9CWVRFX09GRlNFVF0gPSBiO1xuICAgICAgICAgICAgdGhpcy5kYXRhW3BpeEluZGV4ICsgQ1BDb2xvckJtcC5BTFBIQV9CWVRFX09GRlNFVF0gPSBhO1xuXG4gICAgICAgICAgICByICs9IHJTdGVwO1xuICAgICAgICAgICAgZyArPSBnU3RlcDtcbiAgICAgICAgICAgIGIgKz0gYlN0ZXA7XG4gICAgICAgICAgICBhICs9IGFTdGVwO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gVGhlIHNlY3Rpb24gYWZ0ZXIgdGhlIGVuZCBvZiB0aGUgZ3JhZGllbnRcbiAgICAgICAgZm9yICg7IHggPCByZWN0LnJpZ2h0OyB4KyssIHBpeEluZGV4ICs9IENQQ29sb3JCbXAuQllURVNfUEVSX1BJWEVMKSB7XG4gICAgICAgICAgICB0aGlzLmRhdGFbcGl4SW5kZXggKyBDUENvbG9yQm1wLlJFRF9CWVRFX09GRlNFVF0gPSB0b0NvbG9yLnI7XG4gICAgICAgICAgICB0aGlzLmRhdGFbcGl4SW5kZXggKyBDUENvbG9yQm1wLkdSRUVOX0JZVEVfT0ZGU0VUXSA9IHRvQ29sb3IuZztcbiAgICAgICAgICAgIHRoaXMuZGF0YVtwaXhJbmRleCArIENQQ29sb3JCbXAuQkxVRV9CWVRFX09GRlNFVF0gPSB0b0NvbG9yLmI7XG4gICAgICAgICAgICB0aGlzLmRhdGFbcGl4SW5kZXggKyBDUENvbG9yQm1wLkFMUEhBX0JZVEVfT0ZGU0VUXSA9IHRvQ29sb3IuYTtcbiAgICAgICAgfVxuICAgIH1cbn07XG5cbi8qKlxuICogUmVwbGFjZSB0aGUgcGl4ZWxzIGluIHRoZSBnaXZlbiByZWN0IHdpdGggdGhlIGdpdmVuIHZlcnRpY2FsIGdyYWRpZW50LlxuICpcbiAqIEBwYXJhbSB7Q1BSZWN0fSByZWN0XG4gKiBAcGFyYW0gZnJvbVkgaW50XG4gKiBAcGFyYW0gdG9ZIGludFxuICogQHBhcmFtIGdyYWRpZW50UG9pbnRzIGludFtdXG4gKi9cbkNQTGF5ZXIucHJvdG90eXBlLmdyYWRpZW50VmVydFJlcGxhY2UgPSBmdW5jdGlvbihyZWN0LCBmcm9tWSwgdG9ZLCBncmFkaWVudFBvaW50cykge1xuICAgIHZhclxuICAgICAgICBmcm9tQ29sb3IgPSB7XG4gICAgICAgICAgICByOiAoZ3JhZGllbnRQb2ludHNbMF0gPj4gMTYpICYgMHhGRixcbiAgICAgICAgICAgIGc6IChncmFkaWVudFBvaW50c1swXSA+PiA4KSAmIDB4RkYsXG4gICAgICAgICAgICBiOiBncmFkaWVudFBvaW50c1swXSAmIDB4RkYsXG4gICAgICAgICAgICBhOiAoZ3JhZGllbnRQb2ludHNbMF0gPj4gMjQpICYgMHhGRlxuICAgICAgICB9LFxuICAgICAgICB0b0NvbG9yID0ge1xuICAgICAgICAgICAgcjogKGdyYWRpZW50UG9pbnRzWzFdID4+IDE2KSAmIDB4RkYsXG4gICAgICAgICAgICBnOiAoZ3JhZGllbnRQb2ludHNbMV0gPj4gOCkgJiAweEZGLFxuICAgICAgICAgICAgYjogZ3JhZGllbnRQb2ludHNbMV0gJiAweEZGLFxuICAgICAgICAgICAgYTogKGdyYWRpZW50UG9pbnRzWzFdID4+IDI0KSAmIDB4RkZcbiAgICAgICAgfSxcblxuICAgICAgICB5U3RyaWRlID0gKHRoaXMud2lkdGggLSByZWN0LmdldFdpZHRoKCkpICogQ1BDb2xvckJtcC5CWVRFU19QRVJfUElYRUwsXG4gICAgICAgIHBpeEluZGV4ID0gdGhpcy5vZmZzZXRPZlBpeGVsKHJlY3QubGVmdCwgcmVjdC50b3ApIHwgMCxcbiAgICAgICAgdyA9IChyZWN0LnJpZ2h0IC0gcmVjdC5sZWZ0KSB8IDA7XG5cbiAgICBpZiAodG9ZIDwgZnJvbVkpIHtcbiAgICAgICAgdmFyXG4gICAgICAgICAgICB0ZW1wID0gdG9ZO1xuICAgICAgICB0b1kgPSBmcm9tWTtcbiAgICAgICAgZnJvbVkgPSB0ZW1wO1xuXG4gICAgICAgIHRlbXAgPSBmcm9tQ29sb3I7XG4gICAgICAgIGZyb21Db2xvciA9IHRvQ29sb3I7XG4gICAgICAgIHRvQ29sb3IgPSB0ZW1wO1xuICAgIH1cblxuICAgIHZhclxuICAgICAgICB5ID0gcmVjdC50b3A7XG5cbiAgICAvLyBUaGUgc29saWQgY29sb3Igc2VjdGlvbiBiZWZvcmUgdGhlIHN0YXJ0IG9mIHRoZSBncmFkaWVudFxuICAgIGZvciAodmFyIHlFbmQgPSBNYXRoLm1pbihyZWN0LmJvdHRvbSwgZnJvbVkpIHwgMDsgeSA8IHlFbmQ7IHkrKywgcGl4SW5kZXggKz0geVN0cmlkZSkge1xuICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IHc7IHgrKywgcGl4SW5kZXggKz0gQ1BDb2xvckJtcC5CWVRFU19QRVJfUElYRUwpIHtcbiAgICAgICAgICAgIHRoaXMuZGF0YVtwaXhJbmRleCArIENQQ29sb3JCbXAuUkVEX0JZVEVfT0ZGU0VUXSA9IGZyb21Db2xvci5yO1xuICAgICAgICAgICAgdGhpcy5kYXRhW3BpeEluZGV4ICsgQ1BDb2xvckJtcC5HUkVFTl9CWVRFX09GRlNFVF0gPSBmcm9tQ29sb3IuZztcbiAgICAgICAgICAgIHRoaXMuZGF0YVtwaXhJbmRleCArIENQQ29sb3JCbXAuQkxVRV9CWVRFX09GRlNFVF0gPSBmcm9tQ29sb3IuYjtcbiAgICAgICAgICAgIHRoaXMuZGF0YVtwaXhJbmRleCArIENQQ29sb3JCbXAuQUxQSEFfQllURV9PRkZTRVRdID0gZnJvbUNvbG9yLmE7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBJbnNpZGUgdGhlIGdyYWRpZW50XG4gICAgdmFyXG4gICAgICAgIGdyYWRpZW50UmFuZ2UgPSAodG9ZIC0gZnJvbVkpIHwgMCxcbiAgICAgICAgclN0ZXAgPSAodG9Db2xvci5yIC0gZnJvbUNvbG9yLnIpIC8gZ3JhZGllbnRSYW5nZSxcbiAgICAgICAgZ1N0ZXAgPSAodG9Db2xvci5nIC0gZnJvbUNvbG9yLmcpIC8gZ3JhZGllbnRSYW5nZSxcbiAgICAgICAgYlN0ZXAgPSAodG9Db2xvci5iIC0gZnJvbUNvbG9yLmIpIC8gZ3JhZGllbnRSYW5nZSxcbiAgICAgICAgYVN0ZXAgPSAodG9Db2xvci5hIC0gZnJvbUNvbG9yLmEpIC8gZ3JhZGllbnRSYW5nZSxcbiAgICAgICAgXG4gICAgICAgIGp1bXAgPSBNYXRoLm1heCh5IC0gZnJvbVksIDApLFxuICAgICAgICByID0gZnJvbUNvbG9yLnIgKyByU3RlcCAqIGp1bXAsXG4gICAgICAgIGcgPSBmcm9tQ29sb3IuZyArIGdTdGVwICoganVtcCxcbiAgICAgICAgYiA9IGZyb21Db2xvci5iICsgYlN0ZXAgKiBqdW1wLFxuICAgICAgICBhID0gZnJvbUNvbG9yLmEgKyBhU3RlcCAqIGp1bXA7XG5cbiAgICBmb3IgKHZhciB5RW5kID0gTWF0aC5taW4ocmVjdC5ib3R0b20sIHRvWSkgfCAwOyB5IDwgeUVuZDsgeSsrLCBwaXhJbmRleCArPSB5U3RyaWRlKSB7XG4gICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgdzsgeCsrLCBwaXhJbmRleCArPSBDUENvbG9yQm1wLkJZVEVTX1BFUl9QSVhFTCkge1xuICAgICAgICAgICAgdGhpcy5kYXRhW3BpeEluZGV4ICsgQ1BDb2xvckJtcC5SRURfQllURV9PRkZTRVRdID0gcjtcbiAgICAgICAgICAgIHRoaXMuZGF0YVtwaXhJbmRleCArIENQQ29sb3JCbXAuR1JFRU5fQllURV9PRkZTRVRdID0gZztcbiAgICAgICAgICAgIHRoaXMuZGF0YVtwaXhJbmRleCArIENQQ29sb3JCbXAuQkxVRV9CWVRFX09GRlNFVF0gPSBiO1xuICAgICAgICAgICAgdGhpcy5kYXRhW3BpeEluZGV4ICsgQ1BDb2xvckJtcC5BTFBIQV9CWVRFX09GRlNFVF0gPSBhO1xuICAgICAgICB9XG5cbiAgICAgICAgciArPSByU3RlcDtcbiAgICAgICAgZyArPSBnU3RlcDtcbiAgICAgICAgYiArPSBiU3RlcDtcbiAgICAgICAgYSArPSBhU3RlcDtcbiAgICB9XG5cbiAgICAvLyBUaGUgc2VjdGlvbiBhZnRlciB0aGUgZW5kIG9mIHRoZSBncmFkaWVudFxuICAgIGZvciAoOyB5IDwgcmVjdC5ib3R0b207IHkrKywgcGl4SW5kZXggKz0geVN0cmlkZSkge1xuICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IHc7IHgrKywgcGl4SW5kZXggKz0gQ1BDb2xvckJtcC5CWVRFU19QRVJfUElYRUwpIHtcbiAgICAgICAgICAgIHRoaXMuZGF0YVtwaXhJbmRleCArIENQQ29sb3JCbXAuUkVEX0JZVEVfT0ZGU0VUXSA9IHRvQ29sb3IucjtcbiAgICAgICAgICAgIHRoaXMuZGF0YVtwaXhJbmRleCArIENQQ29sb3JCbXAuR1JFRU5fQllURV9PRkZTRVRdID0gdG9Db2xvci5nO1xuICAgICAgICAgICAgdGhpcy5kYXRhW3BpeEluZGV4ICsgQ1BDb2xvckJtcC5CTFVFX0JZVEVfT0ZGU0VUXSA9IHRvQ29sb3IuYjtcbiAgICAgICAgICAgIHRoaXMuZGF0YVtwaXhJbmRleCArIENQQ29sb3JCbXAuQUxQSEFfQllURV9PRkZTRVRdID0gdG9Db2xvci5hO1xuICAgICAgICB9XG4gICAgfVxufTtcblxuLyoqXG4gKiBSZXBsYWNlIHRoZSBwaXhlbHMgaW4gdGhlIGdpdmVuIHJlY3Qgd2l0aCB0aGUgZ2l2ZW4gZ3JhZGllbnQuXG4gKlxuICogQHBhcmFtIHJlY3QgQ1BSZWN0XG4gKiBAcGFyYW0gZnJvbVggaW50XG4gKiBAcGFyYW0gZnJvbVkgaW50XG4gKiBAcGFyYW0gdG9YIGludFxuICogQHBhcmFtIHRvWSBpbnRcbiAqIEBwYXJhbSBncmFkaWVudFBvaW50cyBpbnRbXVxuICovXG5DUExheWVyLnByb3RvdHlwZS5ncmFkaWVudFJlcGxhY2UgPSBmdW5jdGlvbihyZWN0LCBmcm9tWCwgZnJvbVksIHRvWCwgdG9ZLCBncmFkaWVudFBvaW50cykge1xuICAgIHZhclxuICAgICAgICB5U3RyaWRlID0gKHRoaXMud2lkdGggLSByZWN0LmdldFdpZHRoKCkpICogQ1BDb2xvckJtcC5CWVRFU19QRVJfUElYRUwsXG4gICAgICAgIHBpeEluZGV4ID0gdGhpcy5vZmZzZXRPZlBpeGVsKHJlY3QubGVmdCwgcmVjdC50b3ApIHwgMCxcbiAgICAgICAgdyA9IChyZWN0LnJpZ2h0IC0gcmVjdC5sZWZ0KSB8IDAsXG5cbiAgICAgICAgZnJvbUNvbG9yID0ge1xuICAgICAgICAgICAgcjogKGdyYWRpZW50UG9pbnRzWzBdID4+IDE2KSAmIDB4RkYsXG4gICAgICAgICAgICBnOiAoZ3JhZGllbnRQb2ludHNbMF0gPj4gOCkgJiAweEZGLFxuICAgICAgICAgICAgYjogZ3JhZGllbnRQb2ludHNbMF0gJiAweEZGLFxuICAgICAgICAgICAgYTogKGdyYWRpZW50UG9pbnRzWzBdID4+IDI0KSAmIDB4RkZcbiAgICAgICAgfSxcbiAgICAgICAgdG9Db2xvciA9IHtcbiAgICAgICAgICAgIHI6IChncmFkaWVudFBvaW50c1sxXSA+PiAxNikgJiAweEZGLFxuICAgICAgICAgICAgZzogKGdyYWRpZW50UG9pbnRzWzFdID4+IDgpICYgMHhGRixcbiAgICAgICAgICAgIGI6IGdyYWRpZW50UG9pbnRzWzFdICYgMHhGRixcbiAgICAgICAgICAgIGE6IChncmFkaWVudFBvaW50c1sxXSA+PiAyNCkgJiAweEZGXG4gICAgICAgIH0sXG5cbiAgICAvLyBIb3cgbWFueSBwaXhlbHMgdmVydGljYWxseSBkb2VzIHRoZSBncmFkaWVudCBzZXF1ZW5jZSBjb21wbGV0ZSBvdmVyICgraW5maW5pdHkgZm9yIGhvcml6b250YWwgZ3JhZGllbnRzISlcbiAgICAgICAgdmVydFJhbmdlID0gKHRvWSAtIGZyb21ZKSArICgodG9YIC0gZnJvbVgpICogKHRvWCAtIGZyb21YKSkgLyAodG9ZIC0gZnJvbVkpLFxuICAgIC8vIFNhbWUgZm9yIGhvcml6b250YWxcbiAgICAgICAgaG9yelJhbmdlID0gKHRvWCAtIGZyb21YKSArICgodG9ZIC0gZnJvbVkpICogKHRvWSAtIGZyb21ZKSkgLyAodG9YIC0gZnJvbVgpLFxuICAgICAgICBob3J6U3RlcCA9IDEgLyBob3J6UmFuZ2U7XG5cbiAgICBmb3IgKHZhciB5ID0gcmVjdC50b3A7IHkgPCByZWN0LmJvdHRvbTsgeSsrLCBwaXhJbmRleCArPSB5U3RyaWRlKSB7XG4gICAgICAgIHZhclxuICAgICAgICAvLyBUaGUgcG9zaXRpb24gdGhlIHJvdyBzdGFydHMgYXQgaW4gdGhlIGdyYWRpZW50IFswLjAgLi4uIDEuMClcbiAgICAgICAgICAgIHByb3AgPSAocmVjdC5sZWZ0IC0gZnJvbVgpIC8gaG9yelJhbmdlICsgKHkgLSBmcm9tWSkgLyB2ZXJ0UmFuZ2U7XG5cbiAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCB3OyB4KyssIHBpeEluZGV4ICs9IENQQ29sb3JCbXAuQllURVNfUEVSX1BJWEVMKSB7XG4gICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICBwcm9wQ2xhbXBlZCA9IE1hdGgubWluKE1hdGgubWF4KHByb3AsIDAuMCksIDEuMCksXG4gICAgICAgICAgICAgICAgaW52UHJvcENsYW1wZWQgPSAxIC0gcHJvcENsYW1wZWQ7XG5cbiAgICAgICAgICAgIHRoaXMuZGF0YVtwaXhJbmRleCArIENQQ29sb3JCbXAuUkVEX0JZVEVfT0ZGU0VUXSA9IGZyb21Db2xvci5yICogaW52UHJvcENsYW1wZWQgKyB0b0NvbG9yLnIgKiBwcm9wQ2xhbXBlZDtcbiAgICAgICAgICAgIHRoaXMuZGF0YVtwaXhJbmRleCArIENQQ29sb3JCbXAuR1JFRU5fQllURV9PRkZTRVRdID0gZnJvbUNvbG9yLmcgKiBpbnZQcm9wQ2xhbXBlZCArIHRvQ29sb3IuZyAqIHByb3BDbGFtcGVkO1xuICAgICAgICAgICAgdGhpcy5kYXRhW3BpeEluZGV4ICsgQ1BDb2xvckJtcC5CTFVFX0JZVEVfT0ZGU0VUXSA9IGZyb21Db2xvci5iICogaW52UHJvcENsYW1wZWQgKyB0b0NvbG9yLmIgKiBwcm9wQ2xhbXBlZDtcbiAgICAgICAgICAgIHRoaXMuZGF0YVtwaXhJbmRleCArIENQQ29sb3JCbXAuQUxQSEFfQllURV9PRkZTRVRdID0gZnJvbUNvbG9yLmEgKiBpbnZQcm9wQ2xhbXBlZCArIHRvQ29sb3IuYSAqIHByb3BDbGFtcGVkO1xuXG4gICAgICAgICAgICBwcm9wICs9IGhvcnpTdGVwO1xuICAgICAgICB9XG4gICAgfVxufTtcblxuLyoqXG4gKiBBbHBoYSBibGVuZCB0aGUgZ2l2ZW4gZ3JhZGllbnQgb250byB0aGUgcGl4ZWxzIGluIHRoZSBnaXZlbiByZWN0LlxuICpcbiAqIEBwYXJhbSByZWN0IENQUmVjdFxuICogQHBhcmFtIGZyb21YIGludFxuICogQHBhcmFtIGZyb21ZIGludFxuICogQHBhcmFtIHRvWCBpbnRcbiAqIEBwYXJhbSB0b1kgaW50XG4gKiBAcGFyYW0gZ3JhZGllbnRQb2ludHMgaW50W11cbiAqL1xuQ1BMYXllci5wcm90b3R5cGUuZ3JhZGllbnRBbHBoYSA9IGZ1bmN0aW9uKHJlY3QsIGZyb21YLCBmcm9tWSwgdG9YLCB0b1ksIGdyYWRpZW50UG9pbnRzKSB7XG4gICAgdmFyXG4gICAgICAgIHlTdHJpZGUgPSAodGhpcy53aWR0aCAtIHJlY3QuZ2V0V2lkdGgoKSkgKiBDUENvbG9yQm1wLkJZVEVTX1BFUl9QSVhFTCxcbiAgICAgICAgcGl4SW5kZXggPSB0aGlzLm9mZnNldE9mUGl4ZWwocmVjdC5sZWZ0LCByZWN0LnRvcCkgfCAwLFxuICAgICAgICB3ID0gKHJlY3QucmlnaHQgLSByZWN0LmxlZnQpIHwgMCxcblxuICAgICAgICBmcm9tQ29sb3IgPSB7XG4gICAgICAgICAgICByOiAoZ3JhZGllbnRQb2ludHNbMF0gPj4gMTYpICYgMHhGRixcbiAgICAgICAgICAgIGc6IChncmFkaWVudFBvaW50c1swXSA+PiA4KSAmIDB4RkYsXG4gICAgICAgICAgICBiOiBncmFkaWVudFBvaW50c1swXSAmIDB4RkYsXG4gICAgICAgICAgICBhOiAoZ3JhZGllbnRQb2ludHNbMF0gPj4gMjQpICYgMHhGRlxuICAgICAgICB9LFxuICAgICAgICB0b0NvbG9yID0ge1xuICAgICAgICAgICAgcjogKGdyYWRpZW50UG9pbnRzWzFdID4+IDE2KSAmIDB4RkYsXG4gICAgICAgICAgICBnOiAoZ3JhZGllbnRQb2ludHNbMV0gPj4gOCkgJiAweEZGLFxuICAgICAgICAgICAgYjogZ3JhZGllbnRQb2ludHNbMV0gJiAweEZGLFxuICAgICAgICAgICAgYTogKGdyYWRpZW50UG9pbnRzWzFdID4+IDI0KSAmIDB4RkZcbiAgICAgICAgfSxcblxuICAgIC8vIEhvdyBtYW55IHBpeGVscyB2ZXJ0aWNhbGx5IGRvZXMgdGhlIGdyYWRpZW50IHNlcXVlbmNlIGNvbXBsZXRlIG92ZXIgKCtpbmZpbml0eSBmb3IgaG9yaXpvbnRhbCBncmFkaWVudHMhKVxuICAgICAgICB2ZXJ0UmFuZ2UgPSAodG9ZIC0gZnJvbVkpICsgKCh0b1ggLSBmcm9tWCkgKiAodG9YIC0gZnJvbVgpKSAvICh0b1kgLSBmcm9tWSksXG4gICAgLy8gU2FtZSBmb3IgaG9yaXpvbnRhbFxuICAgICAgICBob3J6UmFuZ2UgPSAodG9YIC0gZnJvbVgpICsgKCh0b1kgLSBmcm9tWSkgKiAodG9ZIC0gZnJvbVkpKSAvICh0b1ggLSBmcm9tWCksXG4gICAgICAgIGhvcnpTdGVwID0gMSAvIGhvcnpSYW5nZTtcblxuICAgIGZvciAodmFyIHkgPSByZWN0LnRvcDsgeSA8IHJlY3QuYm90dG9tOyB5KyssIHBpeEluZGV4ICs9IHlTdHJpZGUpIHtcbiAgICAgICAgdmFyXG4gICAgICAgIC8vIFRoZSBwb3NpdGlvbiB0aGUgcm93IHN0YXJ0cyBhdCBpbiB0aGUgZ3JhZGllbnQgWzAuMCAuLi4gMS4wKVxuICAgICAgICAgICAgcHJvcCA9IChyZWN0LmxlZnQgLSBmcm9tWCkgLyBob3J6UmFuZ2UgKyAoeSAtIGZyb21ZKSAvIHZlcnRSYW5nZTtcblxuICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IHc7IHgrKywgcGl4SW5kZXggKz0gQ1BDb2xvckJtcC5CWVRFU19QRVJfUElYRUwpIHtcbiAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgIHByb3BDbGFtcGVkID0gTWF0aC5taW4oTWF0aC5tYXgocHJvcCwgMC4wKSwgMS4wKSxcbiAgICAgICAgICAgICAgICBpbnZQcm9wQ2xhbXBlZCA9IDEgLSBwcm9wQ2xhbXBlZCxcblxuICAgICAgICAgICAgICAgIC8vIFRoZSBncmFkaWVudCBjb2xvciB0byBkcmF3XG4gICAgICAgICAgICAgICAgciA9IGZyb21Db2xvci5yICogaW52UHJvcENsYW1wZWQgKyB0b0NvbG9yLnIgKiBwcm9wQ2xhbXBlZCxcbiAgICAgICAgICAgICAgICBnID0gZnJvbUNvbG9yLmcgKiBpbnZQcm9wQ2xhbXBlZCArIHRvQ29sb3IuZyAqIHByb3BDbGFtcGVkLFxuICAgICAgICAgICAgICAgIGIgPSBmcm9tQ29sb3IuYiAqIGludlByb3BDbGFtcGVkICsgdG9Db2xvci5iICogcHJvcENsYW1wZWQsXG4gICAgICAgICAgICAgICAgYSA9IGZyb21Db2xvci5hICogaW52UHJvcENsYW1wZWQgKyB0b0NvbG9yLmEgKiBwcm9wQ2xhbXBlZCxcblxuICAgICAgICAgICAgICAgIGFscGhhMiA9IHRoaXMuZGF0YVtwaXhJbmRleCArIEFMUEhBX0JZVEVfT0ZGU0VUXSxcbiAgICAgICAgICAgICAgICBuZXdBbHBoYSA9IChhICsgYWxwaGEyIC0gYSAqIGFscGhhMiAvIDI1NSkgfCAwO1xuXG4gICAgICAgICAgICBpZiAobmV3QWxwaGEgPiAwKSB7XG4gICAgICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgICAgIHJlYWxBbHBoYSA9IChhICogMjU1IC8gbmV3QWxwaGEpIHwgMCxcbiAgICAgICAgICAgICAgICAgICAgaW52QWxwaGEgPSAyNTUgLSByZWFsQWxwaGE7XG5cbiAgICAgICAgICAgICAgICB0aGlzLmRhdGFbcGl4SW5kZXggKyBDUENvbG9yQm1wLlJFRF9CWVRFX09GRlNFVF0gPSAgICgociAqIHJlYWxBbHBoYSArIHRoaXMuZGF0YVtwaXhJbmRleCArIENQQ29sb3JCbXAuUkVEX0JZVEVfT0ZGU0VUXSAqIGludkFscGhhKSAvIDI1NSkgfCAwO1xuICAgICAgICAgICAgICAgIHRoaXMuZGF0YVtwaXhJbmRleCArIENQQ29sb3JCbXAuR1JFRU5fQllURV9PRkZTRVRdID0gKChnICogcmVhbEFscGhhICsgdGhpcy5kYXRhW3BpeEluZGV4ICsgQ1BDb2xvckJtcC5HUkVFTl9CWVRFX09GRlNFVF0gKiBpbnZBbHBoYSkgLyAyNTUpIHwgMDtcbiAgICAgICAgICAgICAgICB0aGlzLmRhdGFbcGl4SW5kZXggKyBDUENvbG9yQm1wLkJMVUVfQllURV9PRkZTRVRdID0gICgoYiAqIHJlYWxBbHBoYSArIHRoaXMuZGF0YVtwaXhJbmRleCArIENQQ29sb3JCbXAuQkxVRV9CWVRFX09GRlNFVF0gKiBpbnZBbHBoYSkgLyAyNTUpIHwgMDtcbiAgICAgICAgICAgICAgICB0aGlzLmRhdGFbcGl4SW5kZXggKyBDUENvbG9yQm1wLkFMUEhBX0JZVEVfT0ZGU0VUXSA9IG5ld0FscGhhO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBwcm9wICs9IGhvcnpTdGVwO1xuICAgICAgICB9XG4gICAgfVxufTtcblxuLyoqXG4gKiBEcmF3IGEgZ3JhZGllbnQgd2hpY2ggYmVnaW5zIGF0IGZyb21YLCBmcm9tWSBhbmQgZW5kcyBhdCB0b1gsIHRvWSwgY2xpcHBlZCB0byB0aGUgZ2l2ZW4gcmVjdCwgb24gdG9wIG9mIHRoZVxuICogcGl4ZWxzIGluIHRoZSBsYXllci5cbiAqXG4gKiBAcGFyYW0gZ3JhZGllbnRQb2ludHMgQXJyYXkgd2l0aCBncmFkaWVudCBjb2xvcnMgKEFSR0IgaW50ZWdlcnMpXG4gKiBAcGFyYW0gcmVjdCBDUFJlY3RcbiAqIEBwYXJhbSByZXBsYWNlIFNldCB0byB0cnVlIHRvIHJlcGxhY2UgdGhlIHBpeGVscyBpbiB0aGUgbGF5ZXIgcmF0aGVyIHRoYW4gYmxlbmRpbmcgdGhlIGdyYWRpZW50IG9uIHRvcCBvZiB0aGVtLlxuICovXG5DUExheWVyLnByb3RvdHlwZS5ncmFkaWVudCA9IGZ1bmN0aW9uKHJlY3QsIGZyb21YLCBmcm9tWSwgdG9YLCB0b1ksIGdyYWRpZW50UG9pbnRzLCByZXBsYWNlKSB7XG4gICAgcmVjdCA9IHRoaXMuZ2V0Qm91bmRzKCkuY2xpcChyZWN0KTtcblxuICAgIC8vIERlZ2VuZXJhdGUgY2FzZVxuICAgIGlmIChmcm9tWCA9PSB0b1ggJiYgZnJvbVkgPT0gdG9ZKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBPcGFxdWUgYmxlbmQgaWYgcG9zc2libGVcbiAgICBpZiAocmVwbGFjZSB8fCBncmFkaWVudFBvaW50c1swXSA+Pj4gMjQgPT0gMjU1ICYmIGdyYWRpZW50UG9pbnRzWzFdID4+PiAyNCA9PSAyNTUpIHtcbiAgICAgICAgaWYgKGZyb21YID09IHRvWCkge1xuICAgICAgICAgICAgdGhpcy5ncmFkaWVudFZlcnRSZXBsYWNlKHJlY3QsIGZyb21ZLCB0b1ksIGdyYWRpZW50UG9pbnRzKTtcbiAgICAgICAgfSBlbHNlIGlmIChmcm9tWSA9PSB0b1kpIHtcbiAgICAgICAgICAgIHRoaXMuZ3JhZGllbnRIb3J6UmVwbGFjZShyZWN0LCBmcm9tWCwgdG9YLCBncmFkaWVudFBvaW50cyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmdyYWRpZW50UmVwbGFjZShyZWN0LCBmcm9tWCwgZnJvbVksIHRvWCwgdG9ZLCBncmFkaWVudFBvaW50cyk7XG4gICAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmdyYWRpZW50QWxwaGEocmVjdCwgZnJvbVgsIGZyb21ZLCB0b1gsIHRvWSwgZ3JhZGllbnRQb2ludHMpO1xuICAgIH1cbn07XG5cbi8qKlxuICogQHBhcmFtIHIgQ1BSZWN0XG4gKi9cbkNQTGF5ZXIucHJvdG90eXBlLmZpbGxXaXRoQ29sb3JOb2lzZSA9IGZ1bmN0aW9uKHJlY3QpIHtcbiAgICByZWN0ID0gdGhpcy5nZXRCb3VuZHMoKS5jbGlwKHJlY3QpO1xuXG4gICAgdmFyXG4gICAgICAgIHZhbHVlLFxuICAgICAgICB5U3RyaWRlID0gKHRoaXMud2lkdGggLSByZWN0LmdldFdpZHRoKCkpICogQ1BDb2xvckJtcC5CWVRFU19QRVJfUElYRUwsXG4gICAgICAgIFxuICAgICAgICBwaXhJbmRleCA9IHRoaXMub2Zmc2V0T2ZQaXhlbChyZWN0LmxlZnQsIHJlY3QudG9wKTtcblxuICAgIGZvciAodmFyIHkgPSByZWN0LnRvcDsgeSA8IHJlY3QuYm90dG9tOyB5KyssIHBpeEluZGV4ICs9IHlTdHJpZGUpIHtcbiAgICAgICAgZm9yICh2YXIgeCA9IHJlY3QubGVmdDsgeCA8IHJlY3QucmlnaHQ7IHgrKywgcGl4SW5kZXggKz0gQ1BDb2xvckJtcC5CWVRFU19QRVJfUElYRUwpIHtcbiAgICAgICAgICAgIHZhbHVlID0gKE1hdGgucmFuZG9tKCkgKiAweDEwMDAwMDApIHwgMDtcblxuICAgICAgICAgICAgdGhpcy5kYXRhW3BpeEluZGV4ICsgQ1BDb2xvckJtcC5SRURfQllURV9PRkZTRVRdID0gKHZhbHVlID4+IDE2KSAmIDB4RkY7XG4gICAgICAgICAgICB0aGlzLmRhdGFbcGl4SW5kZXggKyBDUENvbG9yQm1wLkdSRUVOX0JZVEVfT0ZGU0VUXSA9ICh2YWx1ZSA+PiA4KSAmIDB4RkY7XG4gICAgICAgICAgICB0aGlzLmRhdGFbcGl4SW5kZXggKyBDUENvbG9yQm1wLkJMVUVfQllURV9PRkZTRVRdID0gdmFsdWUgJiAweEZGO1xuICAgICAgICAgICAgdGhpcy5kYXRhW3BpeEluZGV4ICsgQ1BDb2xvckJtcC5BTFBIQV9CWVRFX09GRlNFVF0gPSAweEZGO1xuICAgICAgICB9XG4gICAgfVxufTtcblxuLyoqXG4gKiBAcGFyYW0gciBDUFJlY3RcbiAqL1xuQ1BMYXllci5wcm90b3R5cGUuaW52ZXJ0ID0gZnVuY3Rpb24ocmVjdCkge1xuICAgIHJlY3QgPSB0aGlzLmdldEJvdW5kcygpLmNsaXAocmVjdCk7XG5cbiAgICB2YXJcbiAgICAgICAgeVN0cmlkZSA9ICh0aGlzLndpZHRoIC0gcmVjdC5nZXRXaWR0aCgpKSAqIENQQ29sb3JCbXAuQllURVNfUEVSX1BJWEVMLFxuICAgICAgICBcbiAgICAgICAgcGl4SW5kZXggPSB0aGlzLm9mZnNldE9mUGl4ZWwocmVjdC5sZWZ0LCByZWN0LnRvcCk7XG5cbiAgICBmb3IgKHZhciB5ID0gcmVjdC50b3A7IHkgPCByZWN0LmJvdHRvbTsgeSsrLCBwaXhJbmRleCArPSB5U3RyaWRlKSB7XG4gICAgICAgIGZvciAodmFyIHggPSByZWN0LmxlZnQ7IHggPCByZWN0LnJpZ2h0OyB4KyssIHBpeEluZGV4ICs9IENQQ29sb3JCbXAuQllURVNfUEVSX1BJWEVMKSB7XG4gICAgICAgICAgICB0aGlzLmRhdGFbcGl4SW5kZXggKyBDUENvbG9yQm1wLlJFRF9CWVRFX09GRlNFVF0gXj0gMHhGRjtcbiAgICAgICAgICAgIHRoaXMuZGF0YVtwaXhJbmRleCArIENQQ29sb3JCbXAuR1JFRU5fQllURV9PRkZTRVRdIF49IDB4RkY7XG4gICAgICAgICAgICB0aGlzLmRhdGFbcGl4SW5kZXggKyBDUENvbG9yQm1wLkJMVUVfQllURV9PRkZTRVRdIF49IDB4RkY7XG4gICAgICAgIH1cbiAgICB9XG59O1xuXG5DUExheWVyLnByb3RvdHlwZS5nZXRBbHBoYSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLmFscGhhO1xufTtcblxuQ1BMYXllci5wcm90b3R5cGUuZ2V0QmxlbmRNb2RlID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuYmxlbmRNb2RlO1xufTtcblxuQ1BMYXllci5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbigpIHtcbiAgICB2YXJcbiAgICAgICAgcmVzdWx0ID0gbmV3IENQTGF5ZXIodGhpcy53aWR0aCwgdGhpcy5oZWlnaHQsIFwiXCIpO1xuXG4gICAgcmVzdWx0LmNvcHlGcm9tKHRoaXMpO1xuXG4gICAgcmV0dXJuIHJlc3VsdDtcbn07XG5cbkNQTGF5ZXIucHJvdG90eXBlLmNvcHlGcm9tID0gZnVuY3Rpb24obGF5ZXIpIHtcbiAgICB0aGlzLm5hbWUgPSBsYXllci5uYW1lO1xuICAgIHRoaXMuYmxlbmRNb2RlID0gbGF5ZXIuYmxlbmRNb2RlO1xuICAgIHRoaXMuYWxwaGEgPSBsYXllci5hbHBoYTtcbiAgICB0aGlzLnZpc2libGUgPSBsYXllci52aXNpYmxlO1xuXG4gICAgdGhpcy5jb3B5RGF0YUZyb20obGF5ZXIpO1xufTtcblxuLy8gRG8gd2UgaGF2ZSBhbnkgbm9uLW9wYXF1ZSBwaXhlbHMgaW4gdGhlIGVudGlyZSBsYXllcj9cbkNQTGF5ZXIucHJvdG90eXBlLmhhc0FscGhhID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKHRoaXMuYWxwaGEgIT0gMTAwKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBcbiAgICB2YXIgXG4gICAgICAgIHBpeEluZGV4ID0gQUxQSEFfQllURV9PRkZTRVQ7XG4gICAgXG4gICAgZm9yICh2YXIgeSA9IDA7IHkgPCBoZWlnaHQ7IHkrKykge1xuICAgICAgICB2YXJcbiAgICAgICAgICAgIGFscGhhQW5kZWQgPSAweEZGO1xuICAgICAgICBcbiAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCB0aGlzLndpZHRoOyB4KyssIHBpeEluZGV4ICs9IEJZVEVTX1BFUl9QSVhFTCkge1xuICAgICAgICAgICAgYWxwaGFBbmRlZCAmPSB0aGlzLmRhdGFbcGl4SW5kZXhdO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBPbmx5IGNoZWNrIG9uY2UgcGVyIHJvdyBpbiBvcmRlciB0byByZWR1Y2UgYnJhbmNoaW5nIGluIHRoZSBpbm5lciBsb29wXG4gICAgICAgIGlmIChhbHBoYUFuZGVkICE9IDB4RkYpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIHJldHVybiBmYWxzZTtcbn07XG5cbi8vIERvIHdlIGhhdmUgYW55IHNlbWktdHJhbnNwYXJlbnQgcGl4ZWxzIGluIHRoZSBnaXZlbiByZWN0YW5nbGU/XG5DUExheWVyLnByb3RvdHlwZS5oYXNBbHBoYUluUmVjdCA9IGZ1bmN0aW9uKHJlY3QpIHtcbiAgICBpZiAodGhpcy5hbHBoYSAhPSAxMDApIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgcmVjdCA9IHRoaXMuZ2V0Qm91bmRzKCkuY2xpcChyZWN0KTtcblxuICAgIHZhciBcbiAgICAgICAgeVN0cmlkZSA9ICh0aGlzLndpZHRoIC0gcmVjdC5nZXRXaWR0aCgpKSAqIEJZVEVTX1BFUl9QSVhFTCxcbiAgICAgICAgcGl4SW5kZXggPSB0aGlzLm9mZnNldE9mUGl4ZWwocmVjdC5sZWZ0LCByZWN0LnRvcCkgKyBBTFBIQV9CWVRFX09GRlNFVDtcbiAgICBcbiAgICBmb3IgKHZhciB5ID0gcmVjdC50b3A7IHkgPCByZWN0LmJvdHRvbTsgeSsrLCBwaXhJbmRleCArPSB5U3RyaWRlKSB7XG4gICAgICAgIHZhclxuICAgICAgICAgICAgYWxwaGFBbmRlZCA9IDB4RkY7XG4gICAgICAgIFxuICAgICAgICBmb3IgKHZhciB4ID0gcmVjdC5sZWZ0OyB4IDwgcmVjdC5yaWdodDsgeCsrLCBwaXhJbmRleCArPSBCWVRFU19QRVJfUElYRUwpIHtcbiAgICAgICAgICAgIGFscGhhQW5kZWQgJj0gdGhpcy5kYXRhW3BpeEluZGV4XTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gT25seSBjaGVjayBvbmNlIHBlciByb3cgaW4gb3JkZXIgdG8gcmVkdWNlIGJyYW5jaGluZyBpbiB0aGUgaW5uZXIgbG9vcFxuICAgICAgICBpZiAoYWxwaGFBbmRlZCAhPSAweEZGKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBcbiAgICByZXR1cm4gZmFsc2U7XG59O1xuXG4vKipcbiAqIEdldCBhIHJlY3RhbmdsZSB0aGF0IGVuY2xvc2VzIGFueSBub24tdHJhbnNwYXJlbnQgcGl4ZWxzIGluIHRoZSBsYXllciB3aXRoaW4gdGhlIGdpdmVuIGluaXRpYWxCb3VuZHMgKG9yIGFuIGVtcHR5XG4gKiByZWN0IGlmIHRoZSBwaXhlbHMgaW5zaWRlIHRoZSBnaXZlbiBib3VuZHMgYXJlIDEwMCUgdHJhbnNwYXJlbnQpLlxuICpcbiAqIEBwYXJhbSB7Q1BSZWN0fSBpbml0aWFsQm91bmRzIC0gVGhlIHJlY3QgdG8gc2VhcmNoIHdpdGhpbiAocGFzcyBnZXRCb3VuZHMoKSB0byBzZWFyY2ggdGhlIHdob2xlIGxheWVyKVxuICpcbiAqIEByZXR1cm5zIHtDUFJlY3R9XG4gKi9cbkNQTGF5ZXIucHJvdG90eXBlLmdldE5vblRyYW5zcGFyZW50Qm91bmRzID0gZnVuY3Rpb24oaW5pdGlhbEJvdW5kcykge1xuICAgIHZhclxuICAgICAgICBwaXhJbmRleCxcbiAgICAgICAgcmVzdWx0ID0gaW5pdGlhbEJvdW5kcy5jbG9uZSgpLFxuICAgICAgICB4LCB5LFxuICAgICAgICBhbHBoYU9yZWQsXG4gICAgICAgIHlTdHJpZGU7XG5cbiAgICAvLyBGaW5kIHRoZSBmaXJzdCBub24tdHJhbnNwYXJlbnQgcm93XG4gICAgeVN0cmlkZSA9ICh0aGlzLndpZHRoIC0gcmVzdWx0LmdldFdpZHRoKCkpICogQllURVNfUEVSX1BJWEVMO1xuICAgIHBpeEluZGV4ID0gdGhpcy5vZmZzZXRPZlBpeGVsKHJlc3VsdC5sZWZ0LCByZXN1bHQudG9wKSArIEFMUEhBX0JZVEVfT0ZGU0VUO1xuXG4gICAgZm9yICh5ID0gcmVzdWx0LnRvcDsgeSA8IHJlc3VsdC5ib3R0b207IHkrKywgcGl4SW5kZXggKz0geVN0cmlkZSkge1xuICAgICAgICBhbHBoYU9yZWQgPSAweDAwO1xuXG4gICAgICAgIGZvciAodmFyIHggPSByZXN1bHQubGVmdDsgeCA8IHJlc3VsdC5yaWdodDsgeCsrLCBwaXhJbmRleCArPSBCWVRFU19QRVJfUElYRUwpIHtcbiAgICAgICAgICAgIGFscGhhT3JlZCB8PSB0aGlzLmRhdGFbcGl4SW5kZXhdO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gT25seSBjaGVjayBvbmNlIHBlciByb3cgaW4gb3JkZXIgdG8gcmVkdWNlIGJyYW5jaGluZyBpbiB0aGUgaW5uZXIgbG9vcFxuICAgICAgICBpZiAoYWxwaGFPcmVkICE9IDB4MDApIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmVzdWx0LnRvcCA9IHk7XG5cbiAgICBpZiAocmVzdWx0LnRvcCA9PSByZXN1bHQuYm90dG9tKSB7XG4gICAgICAgIC8vIFJlY3QgaXMgZW1wdHksIG5vIG9wYXF1ZSBwaXhlbHMgaW4gdGhlIGluaXRpYWxCb3VuZHNcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICAvLyBOb3cgdGhlIGxhc3Qgbm9uLXRyYW5zcGFyZW50IHJvd1xuICAgIHBpeEluZGV4ID0gdGhpcy5vZmZzZXRPZlBpeGVsKHJlc3VsdC5yaWdodCAtIDEsIHJlc3VsdC5ib3R0b20gLSAxKSArIEFMUEhBX0JZVEVfT0ZGU0VUO1xuICAgIGZvciAoeSA9IHJlc3VsdC5ib3R0b20gLSAxOyB5ID49IHJlc3VsdC50b3A7IHktLSwgcGl4SW5kZXggLT0geVN0cmlkZSkge1xuICAgICAgICBhbHBoYU9yZWQgPSAweDAwO1xuXG4gICAgICAgIGZvciAodmFyIHggPSByZXN1bHQucmlnaHQgLSAxOyB4ID49IHJlc3VsdC5sZWZ0OyB4LS0sIHBpeEluZGV4IC09IEJZVEVTX1BFUl9QSVhFTCkge1xuICAgICAgICAgICAgYWxwaGFPcmVkIHw9IHRoaXMuZGF0YVtwaXhJbmRleF07XG4gICAgICAgIH1cblxuICAgICAgICAvLyBPbmx5IGNoZWNrIG9uY2UgcGVyIHJvdyBpbiBvcmRlciB0byByZWR1Y2UgYnJhbmNoaW5nIGluIHRoZSBpbm5lciBsb29wXG4gICAgICAgIGlmIChhbHBoYU9yZWQgIT0gMHgwMCkge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZXN1bHQuYm90dG9tID0geSArIDE7IC8qICsxIHNpbmNlIHRoZSBib3R0b20vcmlnaHQgZWRnZXMgb2YgdGhlIHJlY3QgYXJlIGV4Y2x1c2l2ZSAqL1xuXG4gICAgLy8gTm93IGNvbHVtbnMgZnJvbSB0aGUgbGVmdFxuICAgIHlTdHJpZGUgPSBCWVRFU19QRVJfUElYRUwgKiB0aGlzLndpZHRoO1xuICAgIGZvciAoeCA9IHJlc3VsdC5sZWZ0OyB4IDwgcmVzdWx0LnJpZ2h0OyB4KyspIHtcbiAgICAgICAgcGl4SW5kZXggPSB0aGlzLm9mZnNldE9mUGl4ZWwoeCwgcmVzdWx0LnRvcCkgKyBBTFBIQV9CWVRFX09GRlNFVDtcbiAgICAgICAgYWxwaGFPcmVkID0gMHgwMDtcblxuICAgICAgICBmb3IgKHkgPSByZXN1bHQudG9wOyB5IDwgcmVzdWx0LmJvdHRvbTsgeSsrLCBwaXhJbmRleCArPSB5U3RyaWRlKSB7XG4gICAgICAgICAgICBhbHBoYU9yZWQgfD0gdGhpcy5kYXRhW3BpeEluZGV4XTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChhbHBoYU9yZWQgIT0gMHgwMCkge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZXN1bHQubGVmdCA9IHg7XG5cbiAgICAvLyBBbmQgY29sdW1ucyBmcm9tIHRoZSByaWdodFxuICAgIGZvciAoeCA9IHJlc3VsdC5yaWdodCAtIDE7IHggPj0gcmVzdWx0LmxlZnQ7IHgtLSkge1xuICAgICAgICBwaXhJbmRleCA9IHRoaXMub2Zmc2V0T2ZQaXhlbCh4LCByZXN1bHQudG9wKSArIEFMUEhBX0JZVEVfT0ZGU0VUO1xuICAgICAgICBhbHBoYU9yZWQgPSAweDAwXG5cbiAgICAgICAgZm9yICh5ID0gcmVzdWx0LnRvcDsgeSA8IHJlc3VsdC5ib3R0b207IHkrKywgcGl4SW5kZXggKz0geVN0cmlkZSkge1xuICAgICAgICAgICAgYWxwaGFPcmVkIHw9IHRoaXMuZGF0YVtwaXhJbmRleF07XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoYWxwaGFPcmVkICE9IDB4MDApIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmVzdWx0LnJpZ2h0ID0geCArIDE7XG5cbiAgICByZXR1cm4gcmVzdWx0O1xufTtcblxuXG5DUExheWVyLkxNX05PUk1BTCA9IDA7XG5DUExheWVyLkxNX01VTFRJUExZID0gMTtcbkNQTGF5ZXIuTE1fQUREID0gMjtcbkNQTGF5ZXIuTE1fU0NSRUVOID0gMztcbkNQTGF5ZXIuTE1fTElHSFRFTiA9IDQ7XG5DUExheWVyLkxNX0RBUktFTiA9IDU7XG5DUExheWVyLkxNX1NVQlRSQUNUID0gNjtcbkNQTGF5ZXIuTE1fRE9ER0UgPSA3O1xuQ1BMYXllci5MTV9CVVJOID0gODtcbkNQTGF5ZXIuTE1fT1ZFUkxBWSA9IDk7XG5DUExheWVyLkxNX0hBUkRMSUdIVCA9IDEwO1xuQ1BMYXllci5MTV9TT0ZUTElHSFQgPSAxMTtcbkNQTGF5ZXIuTE1fVklWSURMSUdIVCA9IDEyO1xuQ1BMYXllci5MTV9MSU5FQVJMSUdIVCA9IDEzO1xuQ1BMYXllci5MTV9QSU5MSUdIVCA9IDE0O1xuXG5DUExheWVyLnByb3RvdHlwZS5tYWtlTG9va1VwVGFibGVzID0gZnVuY3Rpb24oKSB7XG4gICAgLy8gViAtIFZeMiB0YWJsZVxuICAgIENQTGF5ZXIucHJvdG90eXBlLnNvZnRMaWdodExVVFNxdWFyZSA9IG5ldyBBcnJheSgyNTYpO1xuICAgIFxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgMjU2OyBpKyspIHtcbiAgICAgICAgdmFyIFxuICAgICAgICAgICAgdiA9IGkgLyAyNTUuO1xuICAgICAgICBcbiAgICAgICAgQ1BMYXllci5wcm90b3R5cGUuc29mdExpZ2h0TFVUU3F1YXJlW2ldID0gKCh2IC0gdiAqIHYpICogMjU1LikgfCAwO1xuICAgIH1cblxuICAgIC8vIHNxcnQoVikgLSBWIHRhYmxlXG4gICAgQ1BMYXllci5wcm90b3R5cGUuc29mdExpZ2h0TFVUU3F1YXJlUm9vdCA9IG5ldyBBcnJheSgyNTYpO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgMjU2OyBpKyspIHtcbiAgICAgICAgdmFyXG4gICAgICAgICAgICB2ID0gaSAvIDI1NS47XG4gICAgICAgIFxuICAgICAgICBDUExheWVyLnByb3RvdHlwZS5zb2Z0TGlnaHRMVVRTcXVhcmVSb290W2ldID0gKChNYXRoLnNxcnQodikgLSB2KSAqIDI1NS4pIHwgMDtcbiAgICB9XG59O1xuXG5DUExheWVyLnByb3RvdHlwZS5zZXRBbHBoYSA9IGZ1bmN0aW9uKGFscGhhKSB7XG4gICAgdGhpcy5hbHBoYSA9IGFscGhhO1xufTtcblxuQ1BMYXllci5wcm90b3R5cGUuc2V0QmxlbmRNb2RlID0gZnVuY3Rpb24oYmxlbmRNb2RlKSB7XG4gICAgdGhpcy5ibGVuZE1vZGUgPSBibGVuZE1vZGU7XG59O1xuXG5DUExheWVyLnByb3RvdHlwZS5nZXRBbHBoYSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLmFscGhhO1xufTtcblxuQ1BMYXllci5wcm90b3R5cGUuZ2V0QmxlbmRNb2RlID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuYmxlbmRNb2RlO1xufTtcblxuLyoqXG4gKiBSZXR1cm5zIGEgbmV3IGNhbnZhcyB3aXRoIGEgcm90YXRlZCB2ZXJzaW9uIG9mIHRoZSBnaXZlbiBjYW52YXMuXG4gKiBcbiAqIFJvdGF0aW9uIGlzIFswLi4zXSBhbmQgc2VsZWN0cyBhIG11bHRpcGxlIG9mIDkwIGRlZ3JlZXMgb2YgY2xvY2t3aXNlIHJvdGF0aW9uIHRvIGJlIGFwcGxpZWQuXG4gKi9cbmZ1bmN0aW9uIGdldFJvdGF0ZWRDYW52YXMoY2FudmFzLCByb3RhdGlvbikge1xuICAgIHJvdGF0aW9uID0gcm90YXRpb24gJSA0O1xuICAgIFxuICAgIGlmIChyb3RhdGlvbiA9PSAwKSB7XG4gICAgICAgIHJldHVybiBjYW52YXM7XG4gICAgfVxuICAgIFxuICAgIHZhclxuICAgICAgICByb3RhdGVkQ2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKSxcbiAgICAgICAgcm90YXRlZENhbnZhc0NvbnRleHQgPSByb3RhdGVkQ2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcblxuICAgIGlmIChyb3RhdGlvbiAlIDIgPT0gMCkge1xuICAgICAgICByb3RhdGVkQ2FudmFzLndpZHRoID0gY2FudmFzLndpZHRoO1xuICAgICAgICByb3RhdGVkQ2FudmFzLmhlaWdodCA9IGNhbnZhcy5oZWlnaHQ7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcm90YXRlZENhbnZhcy53aWR0aCA9IGNhbnZhcy5oZWlnaHQ7XG4gICAgICAgIHJvdGF0ZWRDYW52YXMuaGVpZ2h0ID0gY2FudmFzLndpZHRoO1xuICAgIH1cbiAgICBcbiAgICBzd2l0Y2ggKHJvdGF0aW9uKSB7XG4gICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgIC8vIDkwIGRlZ3JlZSBjbG9ja3dpc2U6XG4gICAgICAgICAgICByb3RhdGVkQ2FudmFzQ29udGV4dC5yb3RhdGUoTWF0aC5QSSAvIDIpO1xuICAgICAgICAgICAgcm90YXRlZENhbnZhc0NvbnRleHQuZHJhd0ltYWdlKGNhbnZhcywgMCwgLWNhbnZhcy5oZWlnaHQpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgIHJvdGF0ZWRDYW52YXNDb250ZXh0LnJvdGF0ZShNYXRoLlBJKTtcbiAgICAgICAgICAgIHJvdGF0ZWRDYW52YXNDb250ZXh0LmRyYXdJbWFnZShjYW52YXMsIC1jYW52YXMud2lkdGgsIC1jYW52YXMuaGVpZ2h0KTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAvLyA5MCBkZWdyZWUgY291bnRlci1jbG9ja3dpc2U6XG4gICAgICAgICAgICByb3RhdGVkQ2FudmFzQ29udGV4dC5yb3RhdGUoLU1hdGguUEkgLyAyKTtcbiAgICAgICAgICAgIHJvdGF0ZWRDYW52YXNDb250ZXh0LmRyYXdJbWFnZShjYW52YXMsIC1jYW52YXMud2lkdGgsIDApO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMDpcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiBjYW52YXM7XG4gICAgfVxuICAgIFxuICAgIHJldHVybiByb3RhdGVkQ2FudmFzO1xufVxuXG5mdW5jdGlvbiBkZWNvZGVCYXNlNjRQTkdEYXRhVVJMKHVybCkge1xuICAgIGlmICh0eXBlb2YgdXJsICE9PSBcInN0cmluZ1wiIHx8ICF1cmwubWF0Y2goL15kYXRhOmltYWdlXFwvcG5nO2Jhc2U2NCwvaSkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4gd2luZG93LmF0b2IodXJsLnN1YnN0cmluZyhcImRhdGE6aW1hZ2VcXC9wbmc7YmFzZTY0LFwiLmxlbmd0aCkpO1xufVxuXG4vKipcbiAqIEdldCB0aGUgbGF5ZXIgYXMgYSBQTkcgaW1hZ2UuXG4gKiBcbiAqIFJvdGF0aW9uIGlzIFswLi4zXSBhbmQgc2VsZWN0cyBhIG11bHRpcGxlIG9mIDkwIGRlZ3JlZXMgb2YgY2xvY2t3aXNlIHJvdGF0aW9uIHRvIGJlIGFwcGxpZWQsIG9yIDAgdG8gbGVhdmVcbiAqIHVucm90YXRlZC5cbiAqL1xuQ1BMYXllci5wcm90b3R5cGUuZ2V0QXNQTkcgPSBmdW5jdGlvbihyb3RhdGlvbikge1xuICAgIHZhclxuICAgICAgICBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpLFxuICAgICAgICBjYW52YXNDb250ZXh0ID0gY2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcbiAgICBcbiAgICAvLyBGaXJzdCBkcmF3IG91ciBpbWFnZSBkYXRhIG9udG8gYSBjYW52YXMuLi5cbiAgICBjYW52YXMud2lkdGggPSB0aGlzLmltYWdlRGF0YS53aWR0aDtcbiAgICBjYW52YXMuaGVpZ2h0ID0gdGhpcy5pbWFnZURhdGEuaGVpZ2h0O1xuICAgIFxuICAgIGNhbnZhc0NvbnRleHQucHV0SW1hZ2VEYXRhKHRoaXMuaW1hZ2VEYXRhLCAwLCAwKTtcbiAgICBcbiAgICAvLyBSb3RhdGUgaXQgaWYgbmVlZGVkXG4gICAgY2FudmFzID0gZ2V0Um90YXRlZENhbnZhcyhjYW52YXMsIHJvdGF0aW9uIHx8IDApO1xuICAgIFxuICAgIHJldHVybiBkZWNvZGVCYXNlNjRQTkdEYXRhVVJMKGNhbnZhcy50b0RhdGFVUkwoJ2ltYWdlL3BuZycpKTtcbn07XG5cbkNQTGF5ZXIucHJvdG90eXBlLm1ha2VMb29rVXBUYWJsZXMoKTsiLCIvKlxuICAgIENoaWNrZW5QYWludFxuICAgIFxuICAgIENoaWNrZW5QYWludCBpcyBhIHRyYW5zbGF0aW9uIG9mIENoaWJpUGFpbnQgZnJvbSBKYXZhIHRvIEphdmFTY3JpcHRcbiAgICBieSBOaWNob2xhcyBTaGVybG9jayAvIENoaWNrZW4gU21vb3RoaWUuXG4gICAgXG4gICAgQ2hpYmlQYWludCBpcyBDb3B5cmlnaHQgKGMpIDIwMDYtMjAwOCBNYXJjIFNjaGVmZXJcblxuICAgIENoaWNrZW5QYWludCBpcyBmcmVlIHNvZnR3YXJlOiB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3IgbW9kaWZ5XG4gICAgaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBhcyBwdWJsaXNoZWQgYnlcbiAgICB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uLCBlaXRoZXIgdmVyc2lvbiAzIG9mIHRoZSBMaWNlbnNlLCBvclxuICAgIChhdCB5b3VyIG9wdGlvbikgYW55IGxhdGVyIHZlcnNpb24uXG5cbiAgICBDaGlja2VuUGFpbnQgaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCxcbiAgICBidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZlxuICAgIE1FUkNIQU5UQUJJTElUWSBvciBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS4gIFNlZSB0aGVcbiAgICBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9yZSBkZXRhaWxzLlxuXG4gICAgWW91IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2VcbiAgICBhbG9uZyB3aXRoIENoaWNrZW5QYWludC4gSWYgbm90LCBzZWUgPGh0dHA6Ly93d3cuZ251Lm9yZy9saWNlbnNlcy8+LlxuKi9cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gQ1BMb29rVXBUYWJsZSgpIHtcbiAgICB0aGlzLnRhYmxlID0gbmV3IFVpbnQ4QXJyYXkoMjU2KTtcblxuICAgIHRoaXMubG9hZElkZW50aXR5ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgMjU2OyBpKyspIHtcbiAgICAgICAgICAgIHRoaXMudGFibGVbaV0gPSBpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIHRoaXMubG9hZEJyaWdodG5lc3NDb250cmFzdCA9IGZ1bmN0aW9uKGJyaWdodG5lc3MsIGNvbnRyYXN0KSB7XG4gICAgICAgIHZhciBcbiAgICAgICAgICAgIHNsb3BlID0gY29udHJhc3QgPiAwLjAgPyAoMS4wIC8gKDEuMDAwMSAtIGNvbnRyYXN0KSk6IDEuMCArIGNvbnRyYXN0LFxuICAgICAgICAgICAgb2Zmc2V0ID0gMC41IC0gc2xvcGUgKiAwLjUgKyBicmlnaHRuZXNzO1xuICAgICAgICAgICAgXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgMjU2OyBpKyspIHtcbiAgICAgICAgICAgIHZhciBcbiAgICAgICAgICAgICAgICB4ID0gaSAvIDI1NS4wLFxuICAgICAgICAgICAgICAgIHkgPSB4ICogc2xvcGUgKyBvZmZzZXQ7XG5cbiAgICAgICAgICAgIHRoaXMudGFibGVbaV0gPSBNYXRoLm1pbigyNTUsIE1hdGgubWF4KH5+KHkgKiAyNTUuMCksIDApKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICB0aGlzLmludmVydCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IDI1NjsgaSsrKSB7XG4gICAgICAgICAgICB0aGlzLnRhYmxlW2ldID0gMjU1IC0gdGhpcy50YWJsZVtpXTtcbiAgICAgICAgfVxuICAgIH07XG59XG4iLCJpbXBvcnQgQ1BDaGliaUZpbGUgZnJvbSBcIi4vQ1BDaGliaUZpbGVcIjtcbmltcG9ydCBDUEFydHdvcmsgZnJvbSBcIi4vQ1BBcnR3b3JrXCI7XG5pbXBvcnQgQ1BMYXllciBmcm9tIFwiLi9DUExheWVyXCI7XG5pbXBvcnQgQWRvYmVDb2xvclRhYmxlIGZyb20gXCIuLi91dGlsL0Fkb2JlQ29sb3JUYWJsZVwiO1xuXG4vKipcbiAqIExvYWRzIENoaWNrZW5QYWludCByZXNvdXJjZXMgZnJvbSBhIHJlbW90ZSBzZXJ2ZXIgYW5kIGVtaXRzIHByb2dyZXNzIGV2ZW50cy5cbiAqXG4gKiBsb2FkSW1hZ2VVUkwgLSBVUkwgb2YgUE5HL0pQRUcgaW1hZ2UgdG8gbG9hZCBmb3IgZWRpdGluZyAob3B0aW9uYWwpXG4gKiBsb2FkQ2hpYmlGaWxlVVJMIC0gVVJMIG9mIC5jaGkgZmlsZSB0byBsb2FkIGZvciBlZGl0aW5nIChvcHRpb25hbCkuIFVzZWQgaW4gcHJlZmVyZW5jZSB0byBsb2FkSW1hZ2UuXG4gKiBsb2FkU3dhdGNoZXNVUkwgLSBVUkwgb2YgYW4gLmFjbyBwYWxldHRlIHRvIGxvYWQgKG9wdGlvbmFsKVxuICovXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBDUFJlc291cmNlTG9hZGVyKG9wdGlvbnMpIHtcbiAgICB2YXJcbiAgICAgICAgcmVzb3VyY2VzID0gW10sXG4gICAgICAgIGNvbXBsZXRlZCA9IHt9LFxuICAgICAgICB0aGF0ID0gdGhpcztcblxuICAgIGlmIChvcHRpb25zLmxvYWRDaGliaUZpbGVVcmwgJiYgKFwiXCIgKyBvcHRpb25zLmxvYWRDaGliaUZpbGVVcmwpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgcmVzb3VyY2VzLnB1c2goe1xuICAgICAgICAgICAgdXJsOiBvcHRpb25zLmxvYWRDaGliaUZpbGVVcmwsXG4gICAgICAgICAgICBmcmllbmRseTogXCJkcmF3aW5nIGxheWVyc1wiLFxuICAgICAgICAgICAgbmFtZTogXCJsYXllcnNcIixcbiAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlXG4gICAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChvcHRpb25zLmxvYWRJbWFnZVVybCAmJiAoXCJcIiArIG9wdGlvbnMubG9hZEltYWdlVXJsKS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICByZXNvdXJjZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgdXJsOiBvcHRpb25zLmxvYWRJbWFnZVVybCxcbiAgICAgICAgICAgICAgICBmcmllbmRseTogXCJkcmF3aW5nXCIsXG4gICAgICAgICAgICAgICAgbmFtZTogXCJmbGF0XCIsXG4gICAgICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWVcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIGlmIChvcHRpb25zLmxvYWRTd2F0Y2hlc1VybCkge1xuICAgICAgICByZXNvdXJjZXMucHVzaCh7XG4gICAgICAgICAgICB1cmw6IG9wdGlvbnMubG9hZFN3YXRjaGVzVXJsLFxuICAgICAgICAgICAgZnJpZW5kbHk6IFwiY29sb3Igc3dhdGNoZXNcIixcbiAgICAgICAgICAgIG5hbWU6IFwic3dhdGNoZXNcIixcbiAgICAgICAgICAgIHJlcXVpcmVkOiBmYWxzZSxcbiAgICAgICAgICAgIG5vUHJvZ3Jlc3M6IHRydWUgLy8gU28gc2hvcnQgdGhhdCB3ZSBtYXkgYXMgd2VsbCBrZWVwIHRoZSBzbW9vdGhpZSBkcmFpbmVkXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGRlY29kZVJlc291cmNlKHJlc291cmNlLCByZXNvdXJjZURhdGEpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgICAgc3dpdGNoIChyZXNvdXJjZS5uYW1lKSB7XG4gICAgICAgICAgICAgICAgY2FzZSBcImZsYXRcIjpcbiAgICAgICAgICAgICAgICAgICAgdmFyIFxuICAgICAgICAgICAgICAgICAgICAgICAgYmxvYiA9IG5ldyBCbG9iKFtyZXNvdXJjZURhdGFdLCB7dHlwZTogXCJpbWFnZS9wbmdcIn0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgaW1hZ2VVcmwgPSB3aW5kb3cuVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGlmIChpbWFnZVVybCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGltYWdlID0gbmV3IEltYWdlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGltYWdlLm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcnR3b3JrID0gbmV3IENQQXJ0d29yayh0aGlzLndpZHRoLCB0aGlzLmhlaWdodCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxheWVyID0gbmV3IENQTGF5ZXIodGhpcy53aWR0aCwgdGhpcy5oZWlnaHQsIFwiTGF5ZXIgMVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXllci5sb2FkRnJvbUltYWdlKGltYWdlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcnR3b3JrLmFkZExheWVyT2JqZWN0KGxheWVyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbWFnZSA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LlVSTC5yZXZva2VPYmplY3RVUkwoaW1hZ2VVcmwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoYXJ0d29yayk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBpbWFnZS5zcmMgPSBpbWFnZVVybDtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUobnVsbCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwic3dhdGNoZXNcIjpcbiAgICAgICAgICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWFkZXIgPSBuZXcgQWRvYmVDb2xvclRhYmxlKCksXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xvcnMgPSByZWFkZXIucmVhZChyZXNvdXJjZURhdGEpO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShjb2xvcnMpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgXCJsYXllcnNcIjpcbiAgICAgICAgICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWFkZXIgPSBuZXcgQ1BDaGliaUZpbGUoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGFydHdvcmsgPSByZWFkZXIucmVhZChyZXNvdXJjZURhdGEpO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKGFydHdvcmspO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUobnVsbCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHJlcG9ydFByb2dyZXNzKHJlc291cmNlLCBwcm9ncmVzcykge1xuICAgICAgICBpZiAocHJvZ3Jlc3MgPT09IG51bGwpIHtcbiAgICAgICAgICAgIHRoYXQuZW1pdEV2ZW50KFwibG9hZGluZ1Byb2dyZXNzXCIsIFsxLjAsIFwiTG9hZGluZyB5b3VyIFwiICsgcmVzb3VyY2UuZnJpZW5kbHkgKyBcIi4uLlwiXSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGF0LmVtaXRFdmVudChcImxvYWRpbmdQcm9ncmVzc1wiLCBbcHJvZ3Jlc3MsIFwiTG9hZGluZyB5b3VyIFwiICsgcmVzb3VyY2UuZnJpZW5kbHkgKyBcIiAoXCIgKyBNYXRoLnJvdW5kKHByb2dyZXNzICogMTAwKSArIFwiJSkuLi5cIl0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIHRoaXMubG9hZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAocmVzb3VyY2VzLmxlbmd0aCA9PSAwKSB7XG4gICAgICAgICAgICB0aGF0LmVtaXRFdmVudChcImxvYWRpbmdDb21wbGV0ZVwiLCBbY29tcGxldGVkXSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB2YXJcbiAgICAgICAgICAgIHJlc291cmNlID0gcmVzb3VyY2VzLnNoaWZ0KCksXG4gICAgICAgICAgICB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcblxuICAgICAgICB4aHIuYWRkRXZlbnRMaXN0ZW5lcihcInByb2dyZXNzXCIsIGZ1bmN0aW9uKGV2dCkge1xuICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgcHJvZ3Jlc3M7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChldnQubGVuZ3RoQ29tcHV0YWJsZSAmJiAhcmVzb3VyY2Uubm9Qcm9ncmVzcykge1xuICAgICAgICAgICAgICAgIHByb2dyZXNzID0gZXZ0LmxvYWRlZCAvIGV2dC50b3RhbDtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcHJvZ3Jlc3MgPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICByZXBvcnRQcm9ncmVzcyhyZXNvdXJjZSwgcHJvZ3Jlc3MpO1xuICAgICAgICB9LCBmYWxzZSk7XG5cbiAgICAgICAgZnVuY3Rpb24gaGFuZGxlRmF0YWwoKSB7XG4gICAgICAgICAgICBpZiAocmVzb3VyY2UucmVxdWlyZWQpIHtcbiAgICAgICAgICAgICAgICB0aGF0LmVtaXRFdmVudChcImxvYWRpbmdGYWlsdXJlXCIsIFtcIkZhaWxlZCB0byBsb2FkIHlvdXIgXCIgKyByZXNvdXJjZS5mcmllbmRseSArIFwiLCBwbGVhc2UgdHJ5IGFnYWluIGxhdGVyLlwiXSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIFNraXAgdW5pbXBvcnRhbnQgcmVzb3VyY2VzXG4gICAgICAgICAgICAgICAgdGhhdC5sb2FkKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHhoci5hZGRFdmVudExpc3RlbmVyKFwibG9hZFwiLCBmdW5jdGlvbihldnQpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnN0YXR1cyA9PSAyMDApIHtcbiAgICAgICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UgPSB0aGlzLnJlc3BvbnNlO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHRoYXQuZW1pdEV2ZW50KFwibG9hZGluZ1Byb2dyZXNzXCIsIFsxLjAsIFwiU3RhcnRpbmcgQ2hpY2tlblBhaW50Li4uXCJdKTtcbiAgICBcbiAgICAgICAgICAgICAgICAvLyBZaWVsZCB0byB0aGUgRE9NIHRvIGdpdmUgaXQgYSBjaGFuY2UgdG8gcGFpbnQgdGhlIGxvYWRlZCBtZXNzYWdlIGJlZm9yZSB3ZSBiZWdpbiBkZWNvZGluZ1xuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVjb2RlUmVzb3VyY2UocmVzb3VyY2UsIHJlc3BvbnNlKS50aGVuKGZ1bmN0aW9uKGRlY29kZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGVjb2RlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21wbGV0ZWRbcmVzb3VyY2UubmFtZV0gPSBkZWNvZGVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTW92ZSBvbiB0byB0aGUgbmV4dCBmaWxlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQubG9hZCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQuZW1pdEV2ZW50KFwibG9hZGluZ0ZhaWx1cmVcIiwgW1wiRmFpbGVkIHRvIHJlYWQgeW91ciBcIiArIHJlc291cmNlLmZyaWVuZGx5XSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIDBcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBoYW5kbGVGYXRhbCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LCBmYWxzZSk7XG5cbiAgICAgICAgeGhyLmFkZEV2ZW50TGlzdGVuZXIoXCJlcnJvclwiLCBoYW5kbGVGYXRhbCk7XG5cbiAgICAgICAgcmVwb3J0UHJvZ3Jlc3MocmVzb3VyY2UsIHJlc291cmNlLm5vUHJvZ3Jlc3MgPyBudWxsIDogMC4wKTtcblxuICAgICAgICB4aHIub3BlbihcIkdFVFwiLCByZXNvdXJjZS51cmwsIHRydWUpO1xuICAgICAgICBcbiAgICAgICAgeGhyLnJlc3BvbnNlVHlwZSA9ICdhcnJheWJ1ZmZlcic7XG5cbiAgICAgICAgeGhyLnNlbmQoKTtcbiAgICB9XG59XG5cbkNQUmVzb3VyY2VMb2FkZXIucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShFdmVudEVtaXR0ZXIucHJvdG90eXBlKTtcbkNQUmVzb3VyY2VMb2FkZXIucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gQ1BSZXNvdXJjZUxvYWRlcjtcbiIsImltcG9ydCBDUENoaWJpRmlsZSBmcm9tIFwiLi9DUENoaWJpRmlsZVwiO1xuaW1wb3J0IENQQXJ0d29yayBmcm9tIFwiLi9DUEFydHdvcmtcIjtcbmltcG9ydCBBZG9iZUNvbG9yVGFibGUgZnJvbSBcIi4uL3V0aWwvQWRvYmVDb2xvclRhYmxlXCI7XG5cbi8qKlxuICogV2UgZ2VuZXJhbGx5IGNhbid0IGRvIG11Y2ggd2l0aCBiaW5hcnkgc3RyaW5ncyBiZWNhdXNlIHZhcmlvdXMgbWV0aG9kcyB3aWxsIHRyeSB0byBVVEYtOCBtYW5nbGUgdGhlbS5cbiAqIFRoaXMgZnVuY3Rpb24gY29udmVydHMgc3VjaCBhIHN0cmluZyB0byBhIFVpbnQ4QXJyYXkgaW5zdGVhZC5cbiAqL1xuZnVuY3Rpb24gYmluYXJ5U3RyaW5nVG9CeXRlQXJyYXkocykge1xuICAgIHZhclxuICAgICAgICByZXN1bHQgPSBuZXcgVWludDhBcnJheShzLmxlbmd0aCk7XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgcmVzdWx0W2ldID0gcy5jaGFyQ29kZUF0KGkpO1xuICAgIH1cblxuICAgIHJldHVybiByZXN1bHQ7XG59XG5cbi8qKlxuICogU2F2ZXMgQ2hpY2tlblBhaW50IHJlc291cmNlcyB0byBhIHJlbW90ZSBzZXJ2ZXIgb3IgdG8gdGhlIGRpc2sgYW5kIGVtaXRzIHByb2dyZXNzIGV2ZW50cy5cbiAqXG4gKiBPcHRpb25zOlxuICogICAgIHVybCAtIFVSTCB0byBzZW5kIHRvLiBJZiBvbWl0dGVkLCB3aWxsIHNhdmUgdG8gdGhlIGRpc2sgaW5zdGVhZC5cbiAqICAgICBhcnR3b3JrIC0gQXJ0d29yayB0byBzZW5kXG4gKiAgICAgcm90YXRpb24gLSBJbnRlZ2VyIFswLi4zXSBvZiB0aGUgbnVtYmVyIG9mIDkwIGRlZ3JlZSByb3RhdGlvbiBzdGVwcyB0aGF0IHNob3VsZCBiZSBhcHBsaWVkIHRvIGNhbnZhcyB1cG9uIG9wZW5pbmcuXG4gKiAgICAgc3dhdGNoZXMgLSBBcnJheSBvZiBBUkdCIGludGVnZXIgY29sb3JzIHRvIHNhdmUgYXMgdGhlIGltYWdlIHN3YXRjaGVzIChvcHRpb25hbClcbiAqL1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gQ1BSZXNvdXJjZVNhdmVyKG9wdGlvbnMpIHtcbiAgICB2YXJcbiAgICAgICAgdGhhdCA9IHRoaXMsXG4gICAgICAgIFxuICAgICAgICBjYW5jZWxsZWQgPSBmYWxzZTtcbiAgICBcbiAgICBvcHRpb25zLnJvdGF0aW9uID0gb3B0aW9ucy5yb3RhdGlvbiB8fCAwO1xuICAgIFxuICAgIGZ1bmN0aW9uIHJlcG9ydFByb2dyZXNzKHByb2dyZXNzKSB7XG4gICAgICAgIGlmIChwcm9ncmVzcyA9PT0gbnVsbCkge1xuICAgICAgICAgICAgdGhhdC5lbWl0RXZlbnQoXCJzYXZpbmdQcm9ncmVzc1wiLCBbMS4wLCBcIlNhdmluZyB5b3VyIGRyYXdpbmcgdG8gdGhlIHNlcnZlci4uLlwiXSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGF0LmVtaXRFdmVudChcInNhdmluZ1Byb2dyZXNzXCIsIFtwcm9ncmVzcywgXCJTYXZpbmcgeW91ciBkcmF3aW5nIHRvIHRoZSBzZXJ2ZXIuLi4gIChcIiArIE1hdGgucm91bmQocHJvZ3Jlc3MgKiAxMDApICsgXCIlKVwiXSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgZnVuY3Rpb24gcmVwb3J0RmF0YWwoc2VydmVyTWVzc2FnZSkge1xuICAgICAgICB0aGF0LmVtaXRFdmVudChcInNhdmluZ0ZhaWx1cmVcIiwgW3NlcnZlck1lc3NhZ2VdKTtcbiAgICB9XG4gICAgXG4gICAgZnVuY3Rpb24gcG9zdERyYXdpbmcoZm9ybURhdGEpIHtcbiAgICAgICAgdmFyXG4gICAgICAgICAgICB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgICBcbiAgICAgICAgeGhyLnVwbG9hZC5hZGRFdmVudExpc3RlbmVyKFwicHJvZ3Jlc3NcIiwgZnVuY3Rpb24oZXZ0KSB7XG4gICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICBwcm9ncmVzcztcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKGV2dC5sZW5ndGhDb21wdXRhYmxlKSB7XG4gICAgICAgICAgICAgICAgcHJvZ3Jlc3MgPSBldnQubG9hZGVkIC8gZXZ0LnRvdGFsO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBwcm9ncmVzcyA9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzKHByb2dyZXNzKTtcbiAgICAgICAgfSwgZmFsc2UpO1xuICAgIFxuICAgICAgICB4aHIuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIiwgZnVuY3Rpb24oZXZ0KSB7XG4gICAgICAgICAgICByZXBvcnRQcm9ncmVzcygxLjApO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAodGhpcy5zdGF0dXMgPT0gMjAwICYmIC9eQ0hJQklPSy8udGVzdCh0aGlzLnJlc3BvbnNlKSkge1xuICAgICAgICAgICAgICAgIHRoYXQuZW1pdEV2ZW50KFwic2F2aW5nQ29tcGxldGVcIik7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJlcG9ydEZhdGFsKHRoaXMucmVzcG9uc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LCBmYWxzZSk7XG4gICAgXG4gICAgICAgIHhoci5hZGRFdmVudExpc3RlbmVyKFwiZXJyb3JcIiwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXBvcnRGYXRhbCh0aGlzLnJlc3BvbnNlKTtcbiAgICAgICAgfSwgZmFsc2UpO1xuICAgIFxuICAgICAgICByZXBvcnRQcm9ncmVzcygwKTtcbiAgICBcbiAgICAgICAgeGhyLm9wZW4oXCJQT1NUXCIsIG9wdGlvbnMudXJsLCB0cnVlKTtcbiAgICAgICAgXG4gICAgICAgIHhoci5yZXNwb25zZVR5cGUgPSBcInRleHRcIjtcbiAgICAgICAgXG4gICAgICAgIHhoci5zZW5kKGZvcm1EYXRhKTtcbiAgICB9XG4gICAgXG4gICAgLyoqXG4gICAgICogQmVnaW4gc2F2aW5nIHRoZSBkYXRhIHByb3ZpZGVkIGluIHRoZSBjb25zdHJ1Y3Rvci4gUmV0dXJucyBpbW1lZGlhdGVseSwgYW5kIGZpcmVzIHRoZXNlIGV2ZW50cyB0byByZXBvcnQgdGhlXG4gICAgICogc2F2aW5nIHByb2dyZXNzOlxuICAgICAqIFxuICAgICAqIHNhdmluZ1Byb2dyZXNzKHByb2dyZXNzKSAtIFByb2dyZXNzIGlzIFswLjAgLi4uIDEuMF0gYW5kIHJlcG9ydHMgaG93IG11Y2ggaGFzIHVwbG9hZGVkIHNvIGZhciwgb3IgbnVsbCBpZiB0aGUgXG4gICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgdG90YWwgcHJvZ3Jlc3MgY291bGQgbm90IGJlIGRldGVybWluZWQuXG4gICAgICogc2F2aW5nRmFpbHVyZShlcnJvcikgICAgIC0gV2hlbiBzYXZpbmcgZmFpbHMsIGFsb25nIHdpdGggYSBzdHJpbmcgZXJyb3IgbWVzc2FnZSB0byBkaXNwbGF5IHRvIHRoZSB1c2VyLiBcbiAgICAgKiBzYXZpbmdDb21wbGV0ZSgpICAgICAgICAgLSBXaGVuIHNhdmluZyBjb21wbGV0ZXMgc3VjY2VzZnVsbHlcbiAgICAgKi9cbiAgICB0aGlzLnNhdmUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyXG4gICAgICAgICAgICBmbGF0LFxuICAgICAgICAgICAgZmxhdEJsb2IsXG4gICAgICAgICAgICBzd2F0Y2hlc0Jsb2I7XG5cbiAgICAgICAgZmxhdCA9IGJpbmFyeVN0cmluZ1RvQnl0ZUFycmF5KG9wdGlvbnMuYXJ0d29yay5nZXRGbGF0UE5HKG9wdGlvbnMucm90YXRpb24pKTtcbiAgICAgICAgZmxhdEJsb2IgPSBuZXcgQmxvYihbZmxhdF0sIHt0eXBlOiBcImltYWdlL3BuZ1wifSk7XG4gICAgICAgIGZsYXQgPSBudWxsOyAvLyBEb24ndCBuZWVkIHRoaXMgYW55IG1vcmVcbiAgICAgICAgXG4gICAgICAgIHZhclxuICAgICAgICAgICAgc2VyaWFsaXplTGF5ZXJzO1xuXG4gICAgICAgIGlmIChmYWxzZSkge1xuICAgICAgICAgICAgc2VyaWFsaXplTGF5ZXJzID0gUHJvbWlzZS5yZXNvbHZlKG51bGwpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc2VyaWFsaXplTGF5ZXJzID0gKG5ldyBDUENoaWJpRmlsZSgpKS5zZXJpYWxpemUob3B0aW9ucy5hcnR3b3JrKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgc2VyaWFsaXplTGF5ZXJzLnRoZW4oZnVuY3Rpb24oY2hpYmlCbG9iKSB7XG4gICAgICAgICAgICBpZiAoY2FuY2VsbGVkKSB7XG4gICAgICAgICAgICAgICAgdGhhdC5lbWl0RXZlbnQoXCJzYXZpbmdGYWlsdXJlXCIpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKG9wdGlvbnMuc3dhdGNoZXMpIHtcbiAgICAgICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICAgICAgYWNvID0gbmV3IEFkb2JlQ29sb3JUYWJsZSgpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHN3YXRjaGVzQmxvYiA9IG5ldyBCbG9iKFthY28ud3JpdGUob3B0aW9ucy5zd2F0Y2hlcyldLCB7dHlwZTogXCJhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW1cIn0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBzd2F0Y2hlc0Jsb2IgPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKG9wdGlvbnMudXJsKSB7XG4gICAgICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgICAgIG1hcmtlciA9IFwiVGhpcyBtYXJrZXIgZW5zdXJlcyB0aGUgdXBsb2FkIHdhc24ndCB0cnVuY2F0ZWRcIixcbiAgICAgICAgICAgICAgICAgICAgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKTtcblxuICAgICAgICAgICAgICAgIGZvcm1EYXRhLmFwcGVuZChcImJlZ2luTWFya2VyXCIsIG1hcmtlcik7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgZm9ybURhdGEuYXBwZW5kKFwicGljdHVyZVwiLCBmbGF0QmxvYik7XG4gICAgICAgICAgICAgICAgZmxhdEJsb2IgPSBudWxsO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGlmIChjaGliaUJsb2IpIHtcbiAgICAgICAgICAgICAgICAgICAgZm9ybURhdGEuYXBwZW5kKFwiY2hpYmlmaWxlXCIsIGNoaWJpQmxvYik7XG4gICAgICAgICAgICAgICAgICAgIGNoaWJpQmxvYiA9IG51bGw7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gTGF5ZXJzIHdpbGwgbmVlZCB0byBiZSByb3RhdGVkIHVwb24gb3BlbmluZ1xuICAgICAgICAgICAgICAgICAgICBmb3JtRGF0YS5hcHBlbmQoXCJyb3RhdGlvblwiLCBcIlwiICsgb3B0aW9ucy5yb3RhdGlvbik7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLypcbiAgICAgICAgICAgICAgICAgICAgICogQmVjYXVzZSB0aGUgaW1hZ2UgaXMgYSBmbGF0IFBORywgd2Ugcm90YXRlIGl0IGJlZm9yZSB3ZSBzYXZlZCBpdCBhbmQgaXQgZG9lc24ndCBuZWVkIGZ1cnRoZXJcbiAgICAgICAgICAgICAgICAgICAgICogcm90YXRpb24gdXBvbiBvcGVuaW5nLlxuICAgICAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAgICAgZm9ybURhdGEuYXBwZW5kKFwicm90YXRpb25cIiwgXCIwXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBpZiAoc3dhdGNoZXNCbG9iKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvcm1EYXRhLmFwcGVuZChcInN3YXRjaGVzXCIsIHN3YXRjaGVzQmxvYik7XG4gICAgICAgICAgICAgICAgICAgIHN3YXRjaGVzQmxvYiA9IG51bGw7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgZm9ybURhdGEuYXBwZW5kKFwiZW5kTWFya2VyXCIsIG1hcmtlcik7XG5cbiAgICAgICAgICAgICAgICBwb3N0RHJhd2luZyhmb3JtRGF0YSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHdpbmRvdy5zYXZlQXMoZmxhdEJsb2IsIFwib2VrYWtpLnBuZ1wiKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBpZiAoY2hpYmlCbG9iKSB7XG4gICAgICAgICAgICAgICAgICAgIHdpbmRvdy5zYXZlQXMoY2hpYmlCbG9iLCBcIm9la2FraS5jaGlcIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChzd2F0Y2hlc0Jsb2IpIHtcbiAgICAgICAgICAgICAgICAgICAgd2luZG93LnNhdmVBcyhzd2F0Y2hlc0Jsb2IsIFwib2VrYWtpLmFjb1wiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgXG4gICAgdGhpcy5jYW5jZWwgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgY2FuY2VsbGVkID0gdHJ1ZTtcbiAgICB9O1xufVxuXG5DUFJlc291cmNlU2F2ZXIucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShFdmVudEVtaXR0ZXIucHJvdG90eXBlKTtcbkNQUmVzb3VyY2VTYXZlci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBDUFJlc291cmNlU2F2ZXI7XG4iLCIvKlxuICAgIENoaWNrZW5QYWludFxuICAgIFxuICAgIENoaWNrZW5QYWludCBpcyBhIHRyYW5zbGF0aW9uIG9mIENoaWJpUGFpbnQgZnJvbSBKYXZhIHRvIEphdmFTY3JpcHRcbiAgICBieSBOaWNob2xhcyBTaGVybG9jayAvIENoaWNrZW4gU21vb3RoaWUuXG4gICAgXG4gICAgQ2hpYmlQYWludCBpcyBDb3B5cmlnaHQgKGMpIDIwMDYtMjAwOCBNYXJjIFNjaGVmZXJcblxuICAgIENoaWNrZW5QYWludCBpcyBmcmVlIHNvZnR3YXJlOiB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3IgbW9kaWZ5XG4gICAgaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBhcyBwdWJsaXNoZWQgYnlcbiAgICB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uLCBlaXRoZXIgdmVyc2lvbiAzIG9mIHRoZSBMaWNlbnNlLCBvclxuICAgIChhdCB5b3VyIG9wdGlvbikgYW55IGxhdGVyIHZlcnNpb24uXG5cbiAgICBDaGlja2VuUGFpbnQgaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCxcbiAgICBidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZlxuICAgIE1FUkNIQU5UQUJJTElUWSBvciBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS4gIFNlZSB0aGVcbiAgICBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9yZSBkZXRhaWxzLlxuXG4gICAgWW91IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2VcbiAgICBhbG9uZyB3aXRoIENoaWNrZW5QYWludC4gSWYgbm90LCBzZWUgPGh0dHA6Ly93d3cuZ251Lm9yZy9saWNlbnNlcy8+LlxuKi9cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gQ1BVbmRvKCkge1xufVxuXG4vKipcbiAqIEF0dGVtcHQgdG8gbWVyZ2UgdGhlIGdpdmVuIHVuZG8gaW50byB0aGlzIG9uZSwgYW5kIHJldHVybiB0cnVlIGlmIHN1Y2Nlc3NmdWwuXG4gKlxuICogQHBhcmFtIHVuZG9cbiAqIEByZXR1cm5zIHtib29sZWFufVxuICovXG5DUFVuZG8ucHJvdG90eXBlLm1lcmdlID0gZnVuY3Rpb24odW5kbykge1xuICAgIHJldHVybiBmYWxzZTtcbn07XG5cbi8qKlxuICogUmV0dXJuIHRydWUgaWYgdGhpcyB1bmRvIGRpZG4ndCBtb2RpZnkgdGhlIGRvY3VtZW50LlxuICpcbiAqIEByZXR1cm5zIHtib29sZWFufVxuICovXG5DUFVuZG8ucHJvdG90eXBlLm5vQ2hhbmdlID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xufTtcblxuLyoqXG4gKiBSZXR1cm4gdGhlIG51bWJlciBvZiBieXRlcyBvZiBtZW1vcnkgdXNlZCBieSB0aGlzIHVuZG8sIG9yIDAgaWYgaXQgY2Fubm90IGJlIGVzdGltYXRlZC5cbiAqXG4gKiBAcGFyYW0gdW5kb25lXG4gKiBAcGFyYW0gcGFyYW1cbiAqIEByZXR1cm5zIHtudW1iZXJ9XG4gKi9cbkNQVW5kby5wcm90b3R5cGUuZ2V0TWVtb3J5VXNlZCA9IGZ1bmN0aW9uKHVuZG9uZSwgcGFyYW0pIHtcbiAgICByZXR1cm4gMDtcbn07XG5cbi8qKlxuICogQ2FsbCB3aGVuIHRoaXMgdW5kbyBpcyBubyBsb25nZXIgb24gdGhlIHRvcCBvZiB0aGUgc3RhY2ssIHNvIGl0IGNhbiBvcHRpbWl6ZSBpdHMgbWVtb3J5IHVzYWdlLlxuICovXG5DUFVuZG8ucHJvdG90eXBlLmNvbXBhY3QgPSBmdW5jdGlvbigpIHtcbn07XG4iLCIvKlxuICAgIENoaWNrZW5QYWludFxuICAgIFxuICAgIENoaWNrZW5QYWludCBpcyBhIHRyYW5zbGF0aW9uIG9mIENoaWJpUGFpbnQgZnJvbSBKYXZhIHRvIEphdmFTY3JpcHRcbiAgICBieSBOaWNob2xhcyBTaGVybG9jayAvIENoaWNrZW4gU21vb3RoaWUuXG4gICAgXG4gICAgQ2hpYmlQYWludCBpcyBDb3B5cmlnaHQgKGMpIDIwMDYtMjAwOCBNYXJjIFNjaGVmZXJcblxuICAgIENoaWNrZW5QYWludCBpcyBmcmVlIHNvZnR3YXJlOiB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3IgbW9kaWZ5XG4gICAgaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBhcyBwdWJsaXNoZWQgYnlcbiAgICB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uLCBlaXRoZXIgdmVyc2lvbiAzIG9mIHRoZSBMaWNlbnNlLCBvclxuICAgIChhdCB5b3VyIG9wdGlvbikgYW55IGxhdGVyIHZlcnNpb24uXG5cbiAgICBDaGlja2VuUGFpbnQgaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCxcbiAgICBidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZlxuICAgIE1FUkNIQU5UQUJJTElUWSBvciBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS4gIFNlZSB0aGVcbiAgICBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9yZSBkZXRhaWxzLlxuXG4gICAgWW91IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2VcbiAgICBhbG9uZyB3aXRoIENoaWNrZW5QYWludC4gSWYgbm90LCBzZWUgPGh0dHA6Ly93d3cuZ251Lm9yZy9saWNlbnNlcy8+LlxuKi9cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gQ1BBYm91dERpYWxvZyhwYXJlbnQpIHtcbiAgICB2YXJcbiAgICAgICAgZGlhbG9nID0gXG4gICAgICAgICAgICAkKGA8ZGl2IGNsYXNzPVwibW9kYWwgZmFkZSBjaGlja2VucGFpbnQtYWJvdXQtZGlhbG9nXCIgdGFiaW5kZXg9XCItMVwiIHJvbGU9XCJkaWFsb2dcIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibW9kYWwtZGlhbG9nXCI+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtb2RhbC1jb250ZW50XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibW9kYWwtaGVhZGVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJjbG9zZVwiIGRhdGEtZGlzbWlzcz1cIm1vZGFsXCIgYXJpYS1sYWJlbD1cIkNsb3NlXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPiZ0aW1lczs8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGg0IGNsYXNzPVwibW9kYWwtdGl0bGVcIj5BYm91dCBDaGlja2VuUGFpbnQ8L2g0PlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibW9kYWwtYm9keVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUaGlzIGFwcCBpcyBhZGFwdGVkIGZyb20gQ2hpY2tlblBhaW50LCBhIHRyYW5zbGF0aW9uIG9mIDxhIGhyZWY9XCJodHRwOi8vd3d3LmNoaWJpcGFpbnQuY29tL1wiIHRhcmdldD1cIl9ibGFua1wiPkNoaWJpUGFpbnQ8L2E+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZyb20gSmF2YSB0byBKYXZhU2NyaXB0IGJ5IE5pY2hvbGFzIFNoZXJsb2NrIC8gQ2hpY2tlbiBTbW9vdGhpZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ2hpYmlQYWludCBpcyBDb3B5cmlnaHQgKGMpIDIwMDYtMjAwOCBNYXJjIFNjaGVmZXIuIEFsbCBSaWdodHMgUmVzZXJ2ZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENoaWNrZW5QYWludCBpcyBmcmVlIHNvZnR3YXJlOiB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3IgbW9kaWZ5XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgYXMgcHVibGlzaGVkIGJ5XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb24sIGVpdGhlciB2ZXJzaW9uIDMgb2YgdGhlIExpY2Vuc2UsIG9yXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChhdCB5b3VyIG9wdGlvbikgYW55IGxhdGVyIHZlcnNpb24uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cD5cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YSB0YXJnZXQ9XCJfYmxhbmtcIiBocmVmPVwiaHR0cDovL3d3dy5nbnUub3JnL2xpY2Vuc2VzL1wiPkdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlPC9hPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHByZSBjbGFzcz1cInByZS1zY3JvbGxhYmxlIGNoaWNrZW5wYWludC10aGlyZC1wYXJ0eS1saWNlbnNlc1wiPkluY2x1ZGVzIGljb25zIGZyb20gdGhlIDxhIGhyZWY9XCJodHRwOi8vdGFuZ28uZnJlZWRlc2t0b3Aub3JnL1wiIHRhcmdldD1cIl9ibGFua1wiPlRhbmdvIERlc2t0b3AgUHJvamVjdDwvYT5cblxuSW5jbHVkZXMgdGhlc2UgTUlULWxpY2Vuc2VkIGxpYnJhcmllczpcblxuICAgIEluY2x1ZGVzIHRoZSA8YSB0YXJnZXQ9XCJfYmxhbmtcIiBocmVmPVwiaHR0cHM6Ly9naXRodWIuY29tL2VsaWdyZXkvRmlsZVNhdmVyLmpzXCI+RmlsZVNhdmVyLmpzIGxpYnJhcnk8L2E+XG4gICAgRmlsZVNhdmVyLmpzIENvcHlyaWdodCDCqSAyMDE1IDxhIHRhcmdldD1cIl9ibGFua1wiIGhyZWY9XCJodHRwOi8vZWxpZ3JleS5jb20vXCI+RWxpIEdyZXk8L2E+XG5cbiAgICBJbmNsdWRlcyB0aGUgPGEgdGFyZ2V0PVwiX2JsYW5rXCIgaHJlZj1cImh0dHBzOi8vZ2l0aHViLmNvbS9ub2RlY2EvcGFrb1wiPlBha28gemxpYiBjb21wcmVzc2lvbiBsaWJyYXJ5PC9hPlxuICAgIENvcHlyaWdodCAoQykgMjAxNC0yMDE1IGJ5IFZpdGFseSBQdXpyaW5cbiAgICBcbiAgICBJbmNsdWRlcyB0aGUgPGEgdGFyZ2V0PVwiX2JsYW5rXCIgaHJlZj1cImh0dHBzOi8vZ2l0aHViLmNvbS9tYWRyb2JieS9rZXltYXN0ZXJcIj5rZXltYXN0ZXIuanM8L2E+IGtleWJvYXJkIGxpYnJhcnlcbiAgICBDb3B5cmlnaHQgKGMpIDIwMTEtMjAxMyBUaG9tYXMgRnVjaHNcblxuICAgIEluY2x1ZGVzIHRoZSA8YSB0YXJnZXQ9XCJfYmxhbmtcIiBocmVmPVwiaHR0cHM6Ly9naXRodWIuY29tL3N0ZWZhbnBlbm5lci9lczYtcHJvbWlzZVwiPmVzNi1wcm9taXNlPC9hPiBsaWJyYXJ5XG4gICAgQ29weXJpZ2h0IChjKSAyMDE0IFllaHVkYSBLYXR6LCBUb20gRGFsZSwgU3RlZmFuIFBlbm5lciBhbmQgY29udHJpYnV0b3JzXG5cbiAgICBJbmNsdWRlcyB0aGUgPGEgdGFyZ2V0PVwiX2JsYW5rXCIgaHJlZj1cImh0dHA6Ly9iZW5hbG1hbi5jb20vcHJvamVjdHMvanF1ZXJ5LXRocm90dGxlLWRlYm91bmNlLXBsdWdpbi9cIj5qUXVlcnkgdGhyb3R0bGUtZGVib3VuY2U8L2E+IGxpYnJhcnlcbiAgICBDb3B5cmlnaHQgKGMpIDIwMTAgXCJDb3dib3lcIiBCZW4gQWxtYW5cblxuICAgIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uXG4gICAgb2J0YWluaW5nIGEgY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb25cbiAgICBmaWxlcyAodGhlIFwiU29mdHdhcmVcIiksIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXRcbiAgICByZXN0cmljdGlvbiwgaW5jbHVkaW5nIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzIHRvIHVzZSxcbiAgICBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLCBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3JcbiAgICBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZVxuICAgIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nXG4gICAgY29uZGl0aW9uczpcblxuICAgIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlXG4gICAgaW5jbHVkZWQgaW4gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG5cbiAgICBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELFxuICAgIEVYUFJFU1MgT1IgSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFU1xuICAgIE9GIE1FUkNIQU5UQUJJTElUWSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EXG4gICAgTk9OSU5GUklOR0VNRU5ULiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgXG4gICAgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUiBMSUFCSUxJVFksXG4gICAgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLCBBUklTSU5HXG4gICAgRlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFIFVTRSBPUlxuICAgIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cblxuSW5jbHVkZXMgdGhlIDxhIGhyZWY9XCJodHRwOi8vd3d3LmpxdWVyeS5jb20vXCIgdGFyZ2V0PVwiX2JsYW5rXCI+SlF1ZXJ5IGxpYnJhcnk8L2E+XG5Db3B5cmlnaHQgPGEgaHJlZj1cImh0dHBzOi8vanF1ZXJ5Lm9yZy9cIiB0YXJnZXQ9XCJfYmxhbmtcIj5qUXVlcnkgRm91bmRhdGlvbiBhbmQgb3RoZXIgY29udHJpYnV0b3JzPC9hPlxuICAgIFxuICAgIFRoaXMgc29mdHdhcmUgY29uc2lzdHMgb2Ygdm9sdW50YXJ5IGNvbnRyaWJ1dGlvbnMgbWFkZSBieSBtYW55XG4gICAgaW5kaXZpZHVhbHMuIEZvciBleGFjdCBjb250cmlidXRpb24gaGlzdG9yeSwgc2VlIHRoZSByZXZpc2lvbiBcbiAgICBoaXN0b3J5IGF2YWlsYWJsZSBhdCBodHRwczovL2dpdGh1Yi5jb20vanF1ZXJ5L2pxdWVyeVxuICAgIFxuICAgIFRoZSBmb2xsb3dpbmcgbGljZW5zZSBhcHBsaWVzIHRvIGFsbCBwYXJ0cyBvZiB0aGlzIHNvZnR3YXJlIFxuICAgIGV4Y2VwdCBhcyBkb2N1bWVudGVkIGJlbG93OlxuICAgIFxuICAgIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIFxuICAgIG9idGFpbmluZyBhIGNvcHkgb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uXG4gICAgZmlsZXMgKHRoZSBcIlNvZnR3YXJlXCIpLCB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0XG4gICAgcmVzdHJpY3Rpb24sIGluY2x1ZGluZyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsIFxuICAgIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vclxuICAgIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhlXG4gICAgU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmdcbiAgICBjb25kaXRpb25zOlxuICAgIFxuICAgIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlXG4gICAgaW5jbHVkZWQgaW4gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG4gICAgXG4gICAgVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCxcbiAgICBFWFBSRVNTIE9SIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVNcbiAgICBPRiBNRVJDSEFOVEFCSUxJVFksIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORFxuICAgIE5PTklORlJJTkdFTUVOVC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUlMgT1IgQ09QWVJJR0hUXG4gICAgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUiBMSUFCSUxJVFksXG4gICAgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLCBBUklTSU5HXG4gICAgRlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFIFVTRSBPUlxuICAgIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cbiAgICAgICAgICAgICAgICAgICAgPC9wcmU+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgYCk7XG4gICAgXG4gICAgLy8gRGVzdHJveSB0aGUgbW9kYWwgdXBvbiBjbG9zZVxuICAgIGRpYWxvZy5vbihcImhpZGRlbi5icy5tb2RhbFwiLCBmdW5jdGlvbihlKSB7XG4gICAgICAgIGRpYWxvZy5yZW1vdmUoKTtcbiAgICB9KTtcbiAgICBcbiAgICBkaWFsb2cubW9kYWwoe1xuICAgICAgICBzaG93OiBmYWxzZVxuICAgIH0pO1xuICAgIFxuICAgIC8vIEZpeCB0aGUgYmFja2Ryb3AgbG9jYXRpb24gaW4gdGhlIERPTSBieSByZXBhcmVudGluZyBpdCB0byB0aGUgY2hpY2tlbnBhaW50IGNvbnRhaW5lclxuICAgIGRpYWxvZy5kYXRhKFwiYnMubW9kYWxcIikuJGJvZHkgPSAkKHBhcmVudCk7XG4gICAgXG4gICAgcGFyZW50LmFwcGVuZENoaWxkKGRpYWxvZ1swXSk7XG5cbiAgICB0aGlzLnNob3cgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgZGlhbG9nLm1vZGFsKFwic2hvd1wiKTtcbiAgICB9O1xufSIsIi8qXG4gICAgQ2hpY2tlblBhaW50XG4gICAgXG4gICAgQ2hpY2tlblBhaW50IGlzIGEgdHJhbnNsYXRpb24gb2YgQ2hpYmlQYWludCBmcm9tIEphdmEgdG8gSmF2YVNjcmlwdFxuICAgIGJ5IE5pY2hvbGFzIFNoZXJsb2NrIC8gQ2hpY2tlbiBTbW9vdGhpZS5cbiAgICBcbiAgICBDaGliaVBhaW50IGlzIENvcHlyaWdodCAoYykgMjAwNi0yMDA4IE1hcmMgU2NoZWZlclxuXG4gICAgQ2hpY2tlblBhaW50IGlzIGZyZWUgc29mdHdhcmU6IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vciBtb2RpZnlcbiAgICBpdCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGFzIHB1Ymxpc2hlZCBieVxuICAgIHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb24sIGVpdGhlciB2ZXJzaW9uIDMgb2YgdGhlIExpY2Vuc2UsIG9yXG4gICAgKGF0IHlvdXIgb3B0aW9uKSBhbnkgbGF0ZXIgdmVyc2lvbi5cblxuICAgIENoaWNrZW5QYWludCBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLFxuICAgIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mXG4gICAgTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiAgU2VlIHRoZVxuICAgIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuXG5cbiAgICBZb3Ugc2hvdWxkIGhhdmUgcmVjZWl2ZWQgYSBjb3B5IG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZVxuICAgIGFsb25nIHdpdGggQ2hpY2tlblBhaW50LiBJZiBub3QsIHNlZSA8aHR0cDovL3d3dy5nbnUub3JnL2xpY2Vuc2VzLz4uXG4qL1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBDUEJveEJsdXJEaWFsb2cocGFyZW50LCBjb250cm9sbGVyKSB7XG4gICAgdmFyXG4gICAgICAgIGRpYWxvZyA9IFxuICAgICAgICAgICAgJChgPGRpdiBjbGFzcz1cIm1vZGFsIGZhZGVcIiB0YWJpbmRleD1cIi0xXCIgcm9sZT1cImRpYWxvZ1wiPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtb2RhbC1kaWFsb2dcIj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm1vZGFsLWNvbnRlbnRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtb2RhbC1oZWFkZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImNsb3NlXCIgZGF0YS1kaXNtaXNzPVwibW9kYWxcIiBhcmlhLWxhYmVsPVwiQ2xvc2VcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gYXJpYS1oaWRkZW49XCJ0cnVlXCI+JnRpbWVzOzwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDQgY2xhc3M9XCJtb2RhbC10aXRsZVwiPkJveCBibHVyPC9oND5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm1vZGFsLWJvZHlcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Zm9ybT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImZvcm0tZ3JvdXBcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD5CbHVyIGFtb3VudCAocGl4ZWxzKTwvbGFiZWw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cInRleHRcIiBjbGFzcz1cImZvcm0tY29udHJvbCBjaGlja2VucGFpbnQtYmx1ci1hbW91bnRcIiB2YWx1ZT1cIjNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJmb3JtLWdyb3VwXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+SXRlcmF0aW9ucyAoMS04LCBsYXJnZXIgZ2l2ZXMgc21vb3RoZXIgYmx1cik8L2xhYmVsPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgY2xhc3M9XCJmb3JtLWNvbnRyb2wgY2hpY2tlbnBhaW50LWJsdXItaXRlcmF0aW9uc1wiIHZhbHVlPVwiMVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Zvcm0+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtb2RhbC1mb290ZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImJ0biBidG4tZGVmYXVsdFwiIGRhdGEtZGlzbWlzcz1cIm1vZGFsXCI+Q2FuY2VsPC9idXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJidG4gYnRuLXByaW1hcnkgY2hpY2tlbnBhaW50LWFwcGx5LWJveC1ibHVyXCIgZGF0YS1kaXNtaXNzPVwibW9kYWxcIj5PazwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgIGApLFxuICAgICAgICBcbiAgICAgICAgYmx1ckFtb3VudEVsZW0gPSAkKFwiLmNoaWNrZW5wYWludC1ibHVyLWFtb3VudFwiLCBkaWFsb2cpLFxuICAgICAgICBibHVySXRlcmF0aW9uc0VsZW0gPSAkKFwiLmNoaWNrZW5wYWludC1ibHVyLWl0ZXJhdGlvbnNcIiwgZGlhbG9nKSxcbiAgICAgICAgYXBwbHlCdXR0b24gPSAkKFwiLmNoaWNrZW5wYWludC1hcHBseS1ib3gtYmx1clwiLCBkaWFsb2cpO1xuXG4gICAgdGhpcy5zaG93ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGRpYWxvZy5tb2RhbChcInNob3dcIik7XG4gICAgfTtcbiAgICBcbiAgICBhcHBseUJ1dHRvbi5jbGljayhmdW5jdGlvbihlKSB7XG4gICAgICAgIHZhclxuICAgICAgICAgICAgYmx1ciA9IE1hdGgubWF4KHBhcnNlSW50KGJsdXJBbW91bnRFbGVtLnZhbCgpLCAxMCksIDEpLFxuICAgICAgICAgICAgaXRlcmF0aW9ucyA9IE1hdGgubWluKE1hdGgubWF4KHBhcnNlSW50KGJsdXJJdGVyYXRpb25zRWxlbS52YWwoKSwgMTApLCAxKSwgOCk7XG4gICAgICAgIFxuICAgICAgICBjb250cm9sbGVyLmdldEFydHdvcmsoKS5ib3hCbHVyKGJsdXIsIGJsdXIsIGl0ZXJhdGlvbnMpO1xuICAgIH0pO1xuICAgIFxuICAgIGRpYWxvZ1xuICAgICAgICAubW9kYWwoe1xuICAgICAgICAgICAgc2hvdzogZmFsc2VcbiAgICAgICAgfSlcbiAgICAgICAgLm9uKCdzaG93bi5icy5tb2RhbCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgYmx1ckFtb3VudEVsZW0uZm9jdXMoKTtcbiAgICAgICAgfSlcbiAgICAgICAgLm9uKCdrZXlwcmVzcycsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgIGlmIChlLmtleUNvZGUgPT0gMTMpIHtcbiAgICAgICAgICAgICAgICBhcHBseUJ1dHRvbi5jbGljaygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICBcbiAgICAvLyBGaXggdGhlIGJhY2tkcm9wIGxvY2F0aW9uIGluIHRoZSBET00gYnkgcmVwYXJlbnRpbmcgaXQgdG8gdGhlIGNoaWNrZW5wYWludCBjb250YWluZXJcbiAgICBkaWFsb2cuZGF0YShcImJzLm1vZGFsXCIpLiRib2R5ID0gJChwYXJlbnQpO1xuICAgIFxuICAgIHBhcmVudC5hcHBlbmRDaGlsZChkaWFsb2dbMF0pO1xuICAgIFxuICAgIC8qIFRPRE9cbiAgICBwYW5lbC5hZGQobmV3IEpMYWJlbChcIkJsdXIgYW1vdW50OlwiKSk7XG4gICAgU3Bpbm5lck1vZGVsIGJsdXJYU00gPSBuZXcgU3Bpbm5lck51bWJlck1vZGVsKDMsIDEsIDEwMCwgMSk7XG4gICAgXG4gICAgcGFuZWwuYWRkKG5ldyBKTGFiZWwoXCJJdGVyYXRpb25zOlwiKSk7XG4gICAgU3Bpbm5lck1vZGVsIGl0ZXJTTSA9IG5ldyBTcGlubmVyTnVtYmVyTW9kZWwoMSwgMSwgOCwgMSk7XG4gICAgKi9cbn0iLCIvKlxuICAgIENoaWNrZW5QYWludFxuICAgIFxuICAgIENoaWNrZW5QYWludCBpcyBhIHRyYW5zbGF0aW9uIG9mIENoaWJpUGFpbnQgZnJvbSBKYXZhIHRvIEphdmFTY3JpcHRcbiAgICBieSBOaWNob2xhcyBTaGVybG9jayAvIENoaWNrZW4gU21vb3RoaWUuXG4gICAgXG4gICAgQ2hpYmlQYWludCBpcyBDb3B5cmlnaHQgKGMpIDIwMDYtMjAwOCBNYXJjIFNjaGVmZXJcblxuICAgIENoaWNrZW5QYWludCBpcyBmcmVlIHNvZnR3YXJlOiB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3IgbW9kaWZ5XG4gICAgaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBhcyBwdWJsaXNoZWQgYnlcbiAgICB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uLCBlaXRoZXIgdmVyc2lvbiAzIG9mIHRoZSBMaWNlbnNlLCBvclxuICAgIChhdCB5b3VyIG9wdGlvbikgYW55IGxhdGVyIHZlcnNpb24uXG5cbiAgICBDaGlja2VuUGFpbnQgaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCxcbiAgICBidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZlxuICAgIE1FUkNIQU5UQUJJTElUWSBvciBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS4gIFNlZSB0aGVcbiAgICBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9yZSBkZXRhaWxzLlxuXG4gICAgWW91IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2VcbiAgICBhbG9uZyB3aXRoIENoaWNrZW5QYWludC4gSWYgbm90LCBzZWUgPGh0dHA6Ly93d3cuZ251Lm9yZy9saWNlbnNlcy8+LlxuKi9cblxuaW1wb3J0IENoaWNrZW5QYWludCBmcm9tIFwiLi4vQ2hpY2tlblBhaW50XCI7XG5cbmltcG9ydCBDUFBhbGV0dGUgZnJvbSBcIi4vQ1BQYWxldHRlXCI7XG5pbXBvcnQgQ1BDaGVja2JveCBmcm9tIFwiLi9DUENoZWNrYm94XCI7XG5pbXBvcnQgQ1BDb2xvclN3YXRjaCBmcm9tIFwiLi9DUENvbG9yU3dhdGNoXCI7XG5pbXBvcnQgQ1BTbGlkZXIgZnJvbSBcIi4vQ1BTbGlkZXJcIjtcbmltcG9ydCB7Y3JlYXRlQ2hlY2tlcmJvYXJkUGF0dGVybn0gZnJvbSBcIi4vQ1BHVUlVdGlsc1wiO1xuXG5pbXBvcnQgQ1BMYXllciBmcm9tIFwiLi4vZW5naW5lL0NQTGF5ZXJcIjtcblxuaW1wb3J0IENQQ29sb3IgZnJvbSBcIi4uL3V0aWwvQ1BDb2xvclwiO1xuaW1wb3J0IHtpc0NhbnZhc0ludGVycG9sYXRpb25TdXBwb3J0ZWR9IGZyb20gXCIuLi91dGlsL0NQUG9seWZpbGxcIjtcblxuZnVuY3Rpb24gc2xpZGVyQ2hlY2tib3hHcm91cChjaGVja2JveCwgc2xpZGVyKSB7XG4gICAgdmFyXG4gICAgICAgIGdyb3VwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcblxuICAgIGdyb3VwLmNsYXNzTmFtZSA9IFwiY2hpY2tlbnBhaW50LWNoZWNrYm94LXNsaWRlci1ncm91cFwiO1xuXG4gICAgZ3JvdXAuYXBwZW5kQ2hpbGQoY2hlY2tib3guZ2V0RWxlbWVudCgpKTtcbiAgICBncm91cC5hcHBlbmRDaGlsZChzbGlkZXIuZ2V0RWxlbWVudCgpKTtcblxuICAgIHJldHVybiBncm91cDtcbn1cblxuZnVuY3Rpb24gZmlsbENvbWJvYm94KGNvbWJvLCBvcHRpb25OYW1lcykge1xuICAgIGZvciAodmFyIGtleSBpbiBvcHRpb25OYW1lcykge1xuICAgICAgICB2YXJcbiAgICAgICAgICAgIG9wdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJvcHRpb25cIik7XG5cbiAgICAgICAgb3B0aW9uLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKG9wdGlvbk5hbWVzW2tleV0pKTtcbiAgICAgICAgb3B0aW9uLnZhbHVlID0ga2V5O1xuXG4gICAgICAgIGNvbWJvLmFwcGVuZENoaWxkKG9wdGlvbik7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBDUEdyYWRpZW50UHJldmlldyhjb250cm9sbGVyKSB7XG4gICAgdmFyXG4gICAgICAgIHRoYXQgPSB0aGlzLFxuXG4gICAgICAgIHcgPSAxNTAsIGggPSAzMixcblxuICAgICAgICBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpLFxuICAgICAgICBjYW52YXNDb250ZXh0ID0gY2FudmFzLmdldENvbnRleHQoXCIyZFwiKSxcblxuICAgICAgICBjaGVja2VyYm9hcmQgPSBjcmVhdGVDaGVja2VyYm9hcmRQYXR0ZXJuKGNhbnZhc0NvbnRleHQpLFxuXG4gICAgICAgIGltYWdlID0gbmV3IENQTGF5ZXIodywgaCwgXCJcIiksXG4gICAgICAgIGltYWdlQ2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKSxcbiAgICAgICAgaW1hZ2VDYW52YXNDb250ZXh0ID0gaW1hZ2VDYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpLFxuXG4gICAgICAgIGdyYWRpZW50ID0gY29udHJvbGxlci5nZXRDdXJHcmFkaWVudCgpO1xuXG4gICAgZnVuY3Rpb24gcGFpbnQoKSB7XG4gICAgICAgIGltYWdlLmdyYWRpZW50KGltYWdlLmdldEJvdW5kcygpLCAwLCAwLCBpbWFnZS53aWR0aCwgMCwgZ3JhZGllbnQsIHRydWUpO1xuICAgICAgICBpbWFnZUNhbnZhc0NvbnRleHQucHV0SW1hZ2VEYXRhKGltYWdlLmltYWdlRGF0YSwgMCwgMCwgMCwgMCwgdywgaCk7XG5cbiAgICAgICAgY2FudmFzQ29udGV4dC5maWxsUmVjdCgwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpO1xuICAgICAgICBjYW52YXNDb250ZXh0LmRyYXdJbWFnZShpbWFnZUNhbnZhcywgMCwgMCk7XG4gICAgfVxuXG4gICAgdGhpcy5nZXRFbGVtZW50ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBjYW52YXM7XG4gICAgfTtcblxuICAgIGNvbnRyb2xsZXIub24oXCJncmFkaWVudENoYW5nZVwiLCBmdW5jdGlvbihfZ3JhZGllbnQpIHtcbiAgICAgICAgZ3JhZGllbnQgPSBfZ3JhZGllbnQ7XG5cbiAgICAgICAgcGFpbnQoKTtcbiAgICB9KTtcblxuICAgIGNhbnZhcy53aWR0aCA9IGltYWdlQ2FudmFzLndpZHRoID0gdztcbiAgICBjYW52YXMuaGVpZ2h0ID0gaW1hZ2VDYW52YXMuaGVpZ2h0ID0gaDtcblxuICAgIGNhbnZhcy5jbGFzc05hbWUgPSAnY2hpY2tlbnBhaW50LWdyYWRpZW50LXByZXZpZXcnO1xuXG4gICAgY2FudmFzQ29udGV4dC5maWxsU3R5bGUgPSBjaGVja2VyYm9hcmQ7XG5cbiAgICBwYWludCgpO1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBDUEJydXNoUGFsZXR0ZShjb250cm9sbGVyKSB7XG4gICAgQ1BQYWxldHRlLmNhbGwodGhpcywgY29udHJvbGxlciwgXCJicnVzaFwiLCBcIlRvb2wgb3B0aW9uc1wiKTtcblxuICAgIHZhclxuICAgICAgICBicnVzaFBhbmVsID0gbmV3IENQQnJ1c2hQYW5lbChjb250cm9sbGVyKSxcbiAgICAgICAgZ3JhZGllbnRQYW5lbCA9IG5ldyBDUEdyYWRpZW50UGFuZWwoY29udHJvbGxlciksXG4gICAgICAgIHRyYW5zZm9ybVBhbmVsID0gbmV3IENQVHJhbnNmb3JtUGFuZWwoY29udHJvbGxlciksXG5cbiAgICAgICAgYm9keSA9IHRoaXMuZ2V0Qm9keUVsZW1lbnQoKTtcblxuICAgIGJvZHkuYXBwZW5kQ2hpbGQoYnJ1c2hQYW5lbC5nZXRFbGVtZW50KCkpO1xuICAgIGJvZHkuYXBwZW5kQ2hpbGQoZ3JhZGllbnRQYW5lbC5nZXRFbGVtZW50KCkpO1xuICAgIGJvZHkuYXBwZW5kQ2hpbGQodHJhbnNmb3JtUGFuZWwuZ2V0RWxlbWVudCgpKTtcblxuICAgIGNvbnRyb2xsZXIub24oJ21vZGVDaGFuZ2UnLCBmdW5jdGlvbihtb2RlKSB7XG4gICAgICAgIGJydXNoUGFuZWwuZ2V0RWxlbWVudCgpLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgICAgZ3JhZGllbnRQYW5lbC5nZXRFbGVtZW50KCkuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgICB0cmFuc2Zvcm1QYW5lbC5nZXRFbGVtZW50KCkuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuXG4gICAgICAgIHN3aXRjaCAobW9kZSkge1xuICAgICAgICAgICAgY2FzZSBDaGlja2VuUGFpbnQuTV9HUkFESUVOVEZJTEw6XG4gICAgICAgICAgICAgICAgZ3JhZGllbnRQYW5lbC5nZXRFbGVtZW50KCkuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBDaGlja2VuUGFpbnQuTV9UUkFOU0ZPUk06XG4gICAgICAgICAgICAgICAgdHJhbnNmb3JtUGFuZWwuZ2V0RWxlbWVudCgpLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgYnJ1c2hQYW5lbC5nZXRFbGVtZW50KCkuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgIH1cbiAgICB9KTtcbn1cblxuQ1BCcnVzaFBhbGV0dGUucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShDUFBhbGV0dGUucHJvdG90eXBlKTtcbkNQQnJ1c2hQYWxldHRlLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IENQQnJ1c2hQYWxldHRlO1xuXG5mdW5jdGlvbiBDUEJydXNoUGFuZWwoY29udHJvbGxlcikge1xuICAgIGNvbnN0XG4gICAgICAgIFRJUF9OQU1FUyA9IFtcIlJvdW5kIFBpeGVsYXRlZFwiLCBcIlJvdW5kIEhhcmQgRWRnZVwiLCBcIlJvdW5kIFNvZnRcIiwgXCJTcXVhcmUgUGl4ZWxhdGVkXCIsIFwiU3F1YXJlIEhhcmQgRWRnZVwiXSxcbiAgICAgICAgQlJVU0hfU0laRVMgPSBbMSwgMiwgMywgNCwgNSwgNiwgNywgOCwgOSwgMTAsIDE1LCAyMCwgMjUsIDMwLCAzNSwgNDAsIDQ1LCA1MCwgNjAsIDcwLCA4MCwgOTAsIDEwMCwgMTI1LCAxNTAsIDE3NSwgMjAwXTtcblxuICAgIHZhclxuICAgICAgICBwYW5lbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksXG5cbiAgICAgICAgdGlwQ29tYm8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic2VsZWN0XCIpLFxuXG4gICAgICAgIGFscGhhQ0IgPSBuZXcgQ1BDaGVja2JveChmYWxzZSwgXCJDb250cm9sIGJydXNoIG9wYWNpdHkgd2l0aCBwZW4gcHJlc3N1cmVcIiksXG4gICAgICAgIGFscGhhU2xpZGVyID0gbmV3IENQU2xpZGVyKDEsIDI1NSksXG5cbiAgICAgICAgc2l6ZUNCID0gbmV3IENQQ2hlY2tib3godHJ1ZSwgXCJDb250cm9sIGJydXNoIHNpemUgd2l0aCBwZW4gcHJlc3N1cmVcIiksXG4gICAgICAgIHNpemVTbGlkZXIgPSBuZXcgQ1BTbGlkZXIoMSwgMjAwLCBmYWxzZSwgdHJ1ZSksXG5cbiAgICAgICAgc2NhdHRlcmluZ0NCICA9IG5ldyBDUENoZWNrYm94KGZhbHNlLCBcIkNvbnRyb2wgYnJ1c2ggc2NhdHRlcmluZyB3aXRoIHBlbiBwcmVzc3VyZVwiKSxcbiAgICAgICAgc2NhdHRlcmluZ1NsaWRlciA9IG5ldyBDUFNsaWRlcigwLCAxMDAwLCBmYWxzZSwgdHJ1ZSksXG5cbiAgICAgICAgcmVzYXRTbGlkZXIgPSBuZXcgQ1BTbGlkZXIoMCwgMTAwLCBmYWxzZSwgdHJ1ZSksXG4gICAgICAgIGJsZWVkU2xpZGVyID0gbmV3IENQU2xpZGVyKDAsIDEwMCwgZmFsc2UsIHRydWUpLFxuICAgICAgICBzcGFjaW5nU2xpZGVyID0gbmV3IENQU2xpZGVyKDAsIDEwMCwgZmFsc2UsIHRydWUpLFxuICAgICAgICBzbW9vdGhpbmdTbGlkZXIgPSBuZXcgQ1BTbGlkZXIoMCwgMTAwLCBmYWxzZSwgdHJ1ZSksXG5cbiAgICAgICAgYnJ1c2hQcmV2aWV3ID0gbmV3IENQQnJ1c2hQYWxldHRlLkNQQnJ1c2hQcmV2aWV3KGNvbnRyb2xsZXIpO1xuXG4gICAgZnVuY3Rpb24gZmlsbFdpdGhJbml0aWFsVmFsdWVzKCkge1xuICAgICAgICBhbHBoYUNCLnNldFZhbHVlKGNvbnRyb2xsZXIuZ2V0QnJ1c2hJbmZvKCkucHJlc3N1cmVBbHBoYSk7XG4gICAgICAgIGFscGhhU2xpZGVyLnNldFZhbHVlKGNvbnRyb2xsZXIuZ2V0QWxwaGEoKSk7XG5cbiAgICAgICAgc2l6ZUNCLnNldFZhbHVlKGNvbnRyb2xsZXIuZ2V0QnJ1c2hJbmZvKCkucHJlc3N1cmVTaXplKTtcbiAgICAgICAgc2l6ZVNsaWRlci5zZXRWYWx1ZShjb250cm9sbGVyLmdldEJydXNoU2l6ZSgpKTtcblxuICAgICAgICBzY2F0dGVyaW5nQ0Iuc2V0VmFsdWUoY29udHJvbGxlci5nZXRCcnVzaEluZm8oKS5wcmVzc3VyZVNjYXR0ZXJpbmcpO1xuICAgICAgICBzY2F0dGVyaW5nU2xpZGVyLnNldFZhbHVlKH5+KGNvbnRyb2xsZXIuZ2V0QnJ1c2hJbmZvKCkuc2NhdHRlcmluZyAqIDEwMCkpO1xuXG4gICAgICAgIHRpcENvbWJvLnZhbHVlID0gY29udHJvbGxlci5nZXRCcnVzaEluZm8oKS50eXBlO1xuXG4gICAgICAgIHJlc2F0U2xpZGVyLnNldFZhbHVlKH5+KGNvbnRyb2xsZXIuZ2V0QnJ1c2hJbmZvKCkucmVzYXQgKiAxMDApKTtcbiAgICAgICAgYmxlZWRTbGlkZXIuc2V0VmFsdWUofn4oY29udHJvbGxlci5nZXRCcnVzaEluZm8oKS5ibGVlZCAqIDEwMCkpO1xuICAgICAgICBzcGFjaW5nU2xpZGVyLnNldFZhbHVlKH5+KGNvbnRyb2xsZXIuZ2V0QnJ1c2hJbmZvKCkuc3BhY2luZyAqIDEwMCkpO1xuICAgICAgICBzbW9vdGhpbmdTbGlkZXIuc2V0VmFsdWUofn4oY29udHJvbGxlci5nZXRCcnVzaEluZm8oKS5zbW9vdGhpbmcgKiAxMDApKTtcbiAgICB9XG5cbiAgICB0aGlzLmdldEVsZW1lbnQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHBhbmVsO1xuICAgIH07XG5cbiAgICBhbHBoYVNsaWRlci50aXRsZSA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICByZXR1cm4gXCJPcGFjaXR5OiBcIiArIHZhbHVlO1xuICAgIH07XG5cbiAgICBhbHBoYVNsaWRlci5vbigndmFsdWVDaGFuZ2UnLCBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgY29udHJvbGxlci5zZXRBbHBoYSh2YWx1ZSk7XG4gICAgfSk7XG5cbiAgICBzaXplU2xpZGVyLnRpdGxlID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIHJldHVybiBcIkJydXNoIHNpemU6IFwiICsgdmFsdWU7XG4gICAgfVxuXG4gICAgc2l6ZVNsaWRlci5vbigndmFsdWVDaGFuZ2UnLCBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgY29udHJvbGxlci5zZXRCcnVzaFNpemUodmFsdWUpO1xuICAgIH0pO1xuXG4gICAgcmVzYXRTbGlkZXIudGl0bGUgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIFwiQ29sb3I6IFwiICsgdmFsdWUgKyBcIiVcIjtcbiAgICB9O1xuXG4gICAgcmVzYXRTbGlkZXIub24oJ3ZhbHVlQ2hhbmdlJywgZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIGNvbnRyb2xsZXIuZ2V0QnJ1c2hJbmZvKCkucmVzYXQgPSB2YWx1ZSAvIDEwMC4wO1xuICAgICAgICBjb250cm9sbGVyLmNhbGxUb29sTGlzdGVuZXJzKCk7XG4gICAgfSk7XG5cbiAgICBibGVlZFNsaWRlci50aXRsZSA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICByZXR1cm4gXCJCbGVuZDogXCIgKyB2YWx1ZSArIFwiJVwiO1xuICAgIH07XG5cbiAgICBibGVlZFNsaWRlci5vbigndmFsdWVDaGFuZ2UnLCBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgY29udHJvbGxlci5nZXRCcnVzaEluZm8oKS5ibGVlZCA9IHZhbHVlIC8gMTAwLjA7XG4gICAgICAgIGNvbnRyb2xsZXIuY2FsbFRvb2xMaXN0ZW5lcnMoKTtcbiAgICB9KTtcblxuICAgIHNwYWNpbmdTbGlkZXIudGl0bGUgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIFwiU3BhY2luZzogXCIgKyB2YWx1ZSArIFwiJVwiO1xuICAgIH07XG5cbiAgICBzcGFjaW5nU2xpZGVyLm9uKCd2YWx1ZUNoYW5nZScsIGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICBjb250cm9sbGVyLmdldEJydXNoSW5mbygpLnNwYWNpbmcgPSB2YWx1ZSAvIDEwMC4wO1xuICAgICAgICBjb250cm9sbGVyLmNhbGxUb29sTGlzdGVuZXJzKCk7XG4gICAgfSk7XG5cbiAgICBzY2F0dGVyaW5nU2xpZGVyLnRpdGxlID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIHJldHVybiBcIlNjYXR0ZXJpbmc6IFwiICsgdmFsdWUgKyBcIiVcIjtcbiAgICB9O1xuXG4gICAgc2NhdHRlcmluZ1NsaWRlci5vbigndmFsdWVDaGFuZ2UnLCBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgY29udHJvbGxlci5nZXRCcnVzaEluZm8oKS5zY2F0dGVyaW5nID0gdmFsdWUgLyAxMDAuMDtcbiAgICAgICAgY29udHJvbGxlci5jYWxsVG9vbExpc3RlbmVycygpO1xuICAgIH0pO1xuXG4gICAgc21vb3RoaW5nU2xpZGVyLnRpdGxlID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIHJldHVybiBcIlNtb290aGluZzogXCIgKyB2YWx1ZSArIFwiJVwiO1xuICAgIH07XG5cbiAgICBzbW9vdGhpbmdTbGlkZXIub24oJ3ZhbHVlQ2hhbmdlJywgZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIGNvbnRyb2xsZXIuZ2V0QnJ1c2hJbmZvKCkuc21vb3RoaW5nID0gdmFsdWUgLyAxMDAuMDtcbiAgICAgICAgY29udHJvbGxlci5jYWxsVG9vbExpc3RlbmVycygpO1xuICAgIH0pO1xuXG4gICAgc2NhdHRlcmluZ0NCLm9uKCd2YWx1ZUNoYW5nZScsIGZ1bmN0aW9uIChzdGF0ZSkge1xuICAgICAgICBjb250cm9sbGVyLmdldEJydXNoSW5mbygpLnByZXNzdXJlU2NhdHRlcmluZyA9IHN0YXRlO1xuICAgICAgICBjb250cm9sbGVyLmNhbGxUb29sTGlzdGVuZXJzKCk7XG4gICAgfSk7XG5cbiAgICBhbHBoYUNCLm9uKCd2YWx1ZUNoYW5nZScsIGZ1bmN0aW9uIChzdGF0ZSkge1xuICAgICAgICBjb250cm9sbGVyLmdldEJydXNoSW5mbygpLnByZXNzdXJlQWxwaGEgPSBzdGF0ZTtcbiAgICAgICAgY29udHJvbGxlci5jYWxsVG9vbExpc3RlbmVycygpO1xuICAgIH0pO1xuXG4gICAgc2l6ZUNCLm9uKCd2YWx1ZUNoYW5nZScsIGZ1bmN0aW9uIChzdGF0ZSkge1xuICAgICAgICBjb250cm9sbGVyLmdldEJydXNoSW5mbygpLnByZXNzdXJlU2l6ZSA9IHN0YXRlO1xuICAgICAgICBjb250cm9sbGVyLmNhbGxUb29sTGlzdGVuZXJzKCk7XG4gICAgfSk7XG5cbiAgICB0aXBDb21iby5hZGRFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgY29udHJvbGxlci5nZXRCcnVzaEluZm8oKS50eXBlID0gcGFyc2VJbnQodGlwQ29tYm8udmFsdWUsIDEwKTtcbiAgICB9KTtcblxuICAgIHRpcENvbWJvLmNsYXNzTmFtZSA9ICdmb3JtLWNvbnRyb2wnO1xuICAgIGZpbGxDb21ib2JveCh0aXBDb21ibywgVElQX05BTUVTKTtcblxuICAgIHBhbmVsLmFwcGVuZENoaWxkKHRpcENvbWJvKTtcblxuICAgIHBhbmVsLmFwcGVuZENoaWxkKGJydXNoUHJldmlldy5nZXRFbGVtZW50KCkpO1xuXG4gICAgcGFuZWwuYXBwZW5kQ2hpbGQoc2xpZGVyQ2hlY2tib3hHcm91cChzaXplQ0IsIHNpemVTbGlkZXIpKTtcbiAgICBwYW5lbC5hcHBlbmRDaGlsZChzbGlkZXJDaGVja2JveEdyb3VwKGFscGhhQ0IsIGFscGhhU2xpZGVyKSk7XG4gICAgcGFuZWwuYXBwZW5kQ2hpbGQocmVzYXRTbGlkZXIuZ2V0RWxlbWVudCgpKTtcbiAgICBwYW5lbC5hcHBlbmRDaGlsZChibGVlZFNsaWRlci5nZXRFbGVtZW50KCkpO1xuICAgIHBhbmVsLmFwcGVuZENoaWxkKHNwYWNpbmdTbGlkZXIuZ2V0RWxlbWVudCgpKTtcbiAgICBwYW5lbC5hcHBlbmRDaGlsZChzbGlkZXJDaGVja2JveEdyb3VwKHNjYXR0ZXJpbmdDQiwgc2NhdHRlcmluZ1NsaWRlcikpO1xuICAgIHBhbmVsLmFwcGVuZENoaWxkKHNtb290aGluZ1NsaWRlci5nZXRFbGVtZW50KCkpO1xuXG4gICAgZmlsbFdpdGhJbml0aWFsVmFsdWVzKCk7XG5cbiAgICBjb250cm9sbGVyLm9uKCd0b29sQ2hhbmdlJywgZnVuY3Rpb24odG9vbCwgdG9vbEluZm8pIHtcbiAgICAgICAgYWxwaGFTbGlkZXIuc2V0VmFsdWUodG9vbEluZm8uYWxwaGEpO1xuICAgICAgICBzaXplU2xpZGVyLnNldFZhbHVlKHRvb2xJbmZvLnNpemUpO1xuICAgICAgICBzaXplQ0Iuc2V0VmFsdWUodG9vbEluZm8ucHJlc3N1cmVTaXplKTtcbiAgICAgICAgYWxwaGFDQi5zZXRWYWx1ZSh0b29sSW5mby5wcmVzc3VyZUFscGhhKTtcbiAgICAgICAgdGlwQ29tYm8udmFsdWUgPSB0b29sSW5mby50eXBlO1xuICAgICAgICBzY2F0dGVyaW5nQ0Iuc2V0VmFsdWUodG9vbEluZm8ucHJlc3N1cmVTY2F0dGVyaW5nKTtcblxuICAgICAgICBpZiAofn4odG9vbEluZm8ucmVzYXQgKiAxMDAuMCkgIT0gcmVzYXRTbGlkZXIudmFsdWUpIHtcbiAgICAgICAgICAgIHJlc2F0U2xpZGVyLnNldFZhbHVlKH5+KHRvb2xJbmZvLnJlc2F0ICogMTAwLjApKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh+fih0b29sSW5mby5ibGVlZCAqIDEwMC4wKSAhPSBibGVlZFNsaWRlci52YWx1ZSkge1xuICAgICAgICAgICAgYmxlZWRTbGlkZXIuc2V0VmFsdWUofn4odG9vbEluZm8uYmxlZWQgKiAxMDAuMCkpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKH5+KHRvb2xJbmZvLnNwYWNpbmcgKiAxMDAuMCkgIT0gc3BhY2luZ1NsaWRlci52YWx1ZSkge1xuICAgICAgICAgICAgc3BhY2luZ1NsaWRlci5zZXRWYWx1ZSh+fih0b29sSW5mby5zcGFjaW5nICogMTAwLjApKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh+fih0b29sSW5mby5zY2F0dGVyaW5nICogMTAwLjApICE9IHNjYXR0ZXJpbmdTbGlkZXIudmFsdWUpIHtcbiAgICAgICAgICAgIHNjYXR0ZXJpbmdTbGlkZXIuc2V0VmFsdWUofn4odG9vbEluZm8uc2NhdHRlcmluZyAqIDEwMC4wKSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAofn4odG9vbEluZm8uc21vb3RoaW5nICogMTAwLjApICE9IHNtb290aGluZ1NsaWRlci52YWx1ZSkge1xuICAgICAgICAgICAgc21vb3RoaW5nU2xpZGVyLnNldFZhbHVlKH5+KHRvb2xJbmZvLnNtb290aGluZyAqIDEwMC4wKSk7XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIGtleShcIjEsMiwzLDQsNSw2LDcsOCw5LDBcIiwgZnVuY3Rpb24oZXZlbnQsIGhhbmRsZXIpIHtcbiAgICAgICAgdmFyXG4gICAgICAgICAgICBzaG9ydGN1dCA9IHBhcnNlSW50KGhhbmRsZXIuc2hvcnRjdXQsIDEwKTtcblxuICAgICAgICBpZiAoc2hvcnRjdXQgPT0gMCkge1xuICAgICAgICAgICAgc2hvcnRjdXQgPSAxMDtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnRyb2xsZXIuc2V0QWxwaGEoTWF0aC5yb3VuZChzaG9ydGN1dCAvIDEwICogMjU1KSk7XG4gICAgfSk7XG5cbiAgICBrZXkoXCJ7LFtcIiwgZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhclxuICAgICAgICAgICAgc2l6ZSA9IGNvbnRyb2xsZXIuZ2V0QnJ1c2hTaXplKCk7XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IEJSVVNIX1NJWkVTLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgICAgICBpZiAoc2l6ZSA+IEJSVVNIX1NJWkVTW2ldKSB7XG4gICAgICAgICAgICAgICAgY29udHJvbGxlci5zZXRCcnVzaFNpemUoQlJVU0hfU0laRVNbaV0pO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICBrZXkoXCJ9LF1cIiwgZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhclxuICAgICAgICAgICAgc2l6ZSA9IGNvbnRyb2xsZXIuZ2V0QnJ1c2hTaXplKCk7XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBCUlVTSF9TSVpFUy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKHNpemUgPCBCUlVTSF9TSVpFU1tpXSkge1xuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIuc2V0QnJ1c2hTaXplKEJSVVNIX1NJWkVTW2ldKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pO1xufVxuXG5DUEJydXNoUGFsZXR0ZS5DUEJydXNoUHJldmlldyA9IGZ1bmN0aW9uKGNvbnRyb2xsZXIpIHtcbiAgICB2YXJcbiAgICAgICAgc2l6ZSA9IDE2LFxuICAgICAgICBcbiAgICAgICAgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKSxcbiAgICAgICAgY2FudmFzQ29udGV4dCA9IGNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIiksXG4gICAgICAgIFxuICAgICAgICBtb3VzZUNhcHR1cmVkID0gZmFsc2U7XG4gICAgXG4gICAgZnVuY3Rpb24gcGFpbnQoKSB7XG4gICAgICAgIGNhbnZhc0NvbnRleHQuY2xlYXJSZWN0KDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7XG4gICAgICAgIFxuICAgICAgICBjYW52YXNDb250ZXh0LmJlZ2luUGF0aCgpO1xuICAgICAgICBjYW52YXNDb250ZXh0LmFyYyhjYW52YXMud2lkdGggLyAyLCBjYW52YXMuaGVpZ2h0IC8gMiwgc2l6ZSAvIDIgKiB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbywgMCwgTWF0aC5QSSAqIDIpO1xuICAgICAgICBjYW52YXNDb250ZXh0LnN0cm9rZSgpO1xuICAgIH1cbiAgICBcbiAgICBmdW5jdGlvbiBoYW5kbGVNb3VzZURyYWcoZSkge1xuICAgICAgICB2YXIgXG4gICAgICAgICAgICBvZmZzZXQgPSAkKGNhbnZhcykub2Zmc2V0KCksXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHB0ID0ge3g6IGUucGFnZVggLSBvZmZzZXQubGVmdCwgeTogZS5wYWdlWSAtIG9mZnNldC50b3B9LFxuICAgICAgICBcbiAgICAgICAgICAgIHggPSBwdC54IC0gJChjYW52YXMpLndpZHRoKCkgLyAyLFxuICAgICAgICAgICAgeSA9IHB0LnkgLSAkKGNhbnZhcykuaGVpZ2h0KCkgLyAyLFxuXG4gICAgICAgICAgICBuZXdTaXplID0gTWF0aC5yb3VuZChNYXRoLnNxcnQoeCAqIHggKyB5ICogeSkgKiAyKTtcbiAgICAgICAgXG4gICAgICAgIHNpemUgPSBNYXRoLm1heCgxLCBNYXRoLm1pbigyMDAsIG5ld1NpemUpKTtcblxuICAgICAgICBwYWludCgpO1xuICAgICAgICBjb250cm9sbGVyLnNldEJydXNoU2l6ZShzaXplKTtcbiAgICB9XG4gICAgXG4gICAgZnVuY3Rpb24gaGFuZGxlTW91c2VVcChlKSB7XG4gICAgICAgIGlmIChtb3VzZUNhcHR1cmVkKSB7XG4gICAgICAgICAgICBtb3VzZUNhcHR1cmVkID0gZmFsc2U7XG4gICAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIGhhbmRsZU1vdXNlVXApO1xuICAgICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIGhhbmRsZU1vdXNlRHJhZyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgdGhpcy5nZXRFbGVtZW50ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBjYW52YXM7XG4gICAgfTtcbiAgICBcbiAgICBjYW52YXMuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgZnVuY3Rpb24oZSkge1xuICAgICAgICBpZiAoIW1vdXNlQ2FwdHVyZWQpIHtcbiAgICAgICAgICAgIG1vdXNlQ2FwdHVyZWQgPSB0cnVlO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIGhhbmRsZU1vdXNlVXApO1xuICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIGhhbmRsZU1vdXNlRHJhZyk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGhhbmRsZU1vdXNlRHJhZyhlKTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIFxuICAgIGNvbnRyb2xsZXIub24oXCJ0b29sQ2hhbmdlXCIsIGZ1bmN0aW9uKHRvb2wsIHRvb2xJbmZvKSB7XG4gICAgICAgIGlmICh0b29sSW5mby5zaXplICE9IHNpemUpIHtcbiAgICAgICAgICAgIHNpemUgPSB0b29sSW5mby5zaXplO1xuICAgICAgICAgICAgcGFpbnQoKTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIFxuICAgIGNhbnZhcy53aWR0aCA9IDY0OyBcbiAgICBjYW52YXMuaGVpZ2h0ID0gNjQ7XG4gICAgXG4gICAgaWYgKHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvID4gMSkge1xuICAgICAgICBjYW52YXMuc3R5bGUud2lkdGggPSBjYW52YXMud2lkdGggKyAncHgnO1xuICAgICAgICBjYW52YXMuc3R5bGUuaGVpZ2h0ID0gY2FudmFzLmhlaWdodCArICdweCc7XG4gICAgICAgIFxuICAgICAgICBjYW52YXMud2lkdGggPSBjYW52YXMud2lkdGggKiB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbztcbiAgICAgICAgY2FudmFzLmhlaWdodCA9IGNhbnZhcy5oZWlnaHQgKiB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbztcbiAgICB9XG4gICAgXG4gICAgY2FudmFzLmNsYXNzTmFtZSA9ICdjaGlja2VucGFpbnQtYnJ1c2gtcHJldmlldyc7XG5cbiAgICBjYW52YXNDb250ZXh0LnN0cm9rZVN0eWxlID0gJ2JsYWNrJztcbiAgICBjYW52YXNDb250ZXh0LmxpbmVXaWR0aCA9IDEuMCAqIHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvO1xuICAgIFxuICAgIHBhaW50KCk7XG59XG5cbmZ1bmN0aW9uIENQR3JhZGllbnRQYW5lbChjb250cm9sbGVyKSB7XG4gICAgdmFyXG4gICAgICAgIGdyYWRpZW50UGFuZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLFxuXG4gICAgICAgIGdyYWRpZW50UHJldmlldyA9IG5ldyBDUEdyYWRpZW50UHJldmlldyhjb250cm9sbGVyKSxcblxuICAgICAgICBncmFkaWVudFN0YXJ0U3dhdGNoID0gbmV3IENQQ29sb3JTd2F0Y2gobmV3IENQQ29sb3IoY29udHJvbGxlci5nZXRDdXJHcmFkaWVudCgpWzBdICYgMHhGRkZGRkYpKSxcbiAgICAgICAgZ3JhZGllbnRFbmRTd2F0Y2ggPSBuZXcgQ1BDb2xvclN3YXRjaChuZXcgQ1BDb2xvcihjb250cm9sbGVyLmdldEN1ckdyYWRpZW50KClbMV0gJiAweEZGRkZGRikpO1xuXG4gICAgZnVuY3Rpb24gdXBkYXRlR3JhZGllbnQoKSB7XG4gICAgICAgIHZhclxuICAgICAgICAgICAgZ3JhZGllbnQgPSBuZXcgQXJyYXkoMik7XG5cbiAgICAgICAgZ3JhZGllbnRbMF0gPSAoZ3JhZGllbnRTdGFydFN3YXRjaC5nZXRBbHBoYSgpIDw8IDI0KSB8IGdyYWRpZW50U3RhcnRTd2F0Y2guZ2V0Q29sb3JSZ2IoKTtcbiAgICAgICAgZ3JhZGllbnRbMV0gPSAoZ3JhZGllbnRFbmRTd2F0Y2guZ2V0QWxwaGEoKSA8PCAyNCkgfCAgZ3JhZGllbnRFbmRTd2F0Y2guZ2V0Q29sb3JSZ2IoKTtcblxuICAgICAgICBjb250cm9sbGVyLnNldEN1ckdyYWRpZW50KGdyYWRpZW50KTtcbiAgICB9XG5cbiAgICB0aGlzLmdldEVsZW1lbnQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIGdyYWRpZW50UGFuZWw7XG4gICAgfTtcblxuICAgIGdyYWRpZW50UGFuZWwuY2xhc3NOYW1lID0gXCJjaGlja2VucGFpbnQtZ3JhZGllbnQtcGFuZWxcIjtcbiAgICBncmFkaWVudFBhbmVsLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcblxuICAgIGdyYWRpZW50U3RhcnRTd2F0Y2gub24oXCJjb2xvckNoYW5nZVwiLCB1cGRhdGVHcmFkaWVudCk7XG4gICAgZ3JhZGllbnRTdGFydFN3YXRjaC5vbihcImFscGhhQ2hhbmdlXCIsIHVwZGF0ZUdyYWRpZW50KTtcbiAgICBncmFkaWVudEVuZFN3YXRjaC5vbihcImNvbG9yQ2hhbmdlXCIsIHVwZGF0ZUdyYWRpZW50KTtcbiAgICBncmFkaWVudEVuZFN3YXRjaC5vbihcImFscGhhQ2hhbmdlXCIsIHVwZGF0ZUdyYWRpZW50KTtcblxuICAgIHZhclxuICAgICAgICB0aXRsZSwgY29sb3JzR3JvdXAsIGNvbG9yR3JvdXA7XG5cbiAgICB0aXRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpO1xuICAgIHRpdGxlLmlubmVySFRNTCA9IFwiR3JhZGllbnRcIjtcblxuICAgIGdyYWRpZW50UGFuZWwuYXBwZW5kQ2hpbGQodGl0bGUpO1xuICAgIGdyYWRpZW50UGFuZWwuYXBwZW5kQ2hpbGQoZ3JhZGllbnRQcmV2aWV3LmdldEVsZW1lbnQoKSk7XG5cbiAgICBjb2xvcnNHcm91cCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgY29sb3JzR3JvdXAuY2xhc3NOYW1lID0gXCJjaGlja2VucGFpbnQtZ3JhZGllbnQtY29sb3JzXCI7XG5cbiAgICBjb2xvckdyb3VwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICBjb2xvckdyb3VwLmNsYXNzTmFtZSA9IFwiY2hpY2tlbnBhaW50LWdyYWRpZW50LXN0YXJ0LWNvbG9yXCI7XG5cbiAgICBjb2xvckdyb3VwLmFwcGVuZENoaWxkKGdyYWRpZW50U3RhcnRTd2F0Y2guZ2V0RWxlbWVudCgpKTtcblxuICAgIGNvbG9yc0dyb3VwLmFwcGVuZENoaWxkKGNvbG9yR3JvdXApO1xuXG4gICAgY29sb3JHcm91cCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgY29sb3JHcm91cC5jbGFzc05hbWUgPSBcImNoaWNrZW5wYWludC1ncmFkaWVudC1lbmQtY29sb3JcIjtcblxuICAgIGNvbG9yR3JvdXAuYXBwZW5kQ2hpbGQoZ3JhZGllbnRFbmRTd2F0Y2guZ2V0RWxlbWVudCgpKTtcblxuICAgIGNvbG9yc0dyb3VwLmFwcGVuZENoaWxkKGNvbG9yR3JvdXApO1xuXG4gICAgZ3JhZGllbnRQYW5lbC5hcHBlbmRDaGlsZChjb2xvcnNHcm91cCk7XG59XG5cbmZ1bmN0aW9uIENQVHJhbnNmb3JtUGFuZWwoY29udHJvbGxlcikge1xuICAgIGNvbnN0XG4gICAgICAgIFRSQU5TRk9STV9JTlRFUlBPTEFUSU9OID0ge3Ntb290aDogXCJTbW9vdGhcIiwgc2hhcnA6IFwiU2hhcnBcIn07XG5cbiAgICB2YXJcbiAgICAgICAgcGFuZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLFxuXG4gICAgICAgIGFjY2VwdEJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIiksXG4gICAgICAgIHJlamVjdEJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIiksXG4gICAgICAgIGludGVycENvbWJvID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNlbGVjdFwiKTtcblxuICAgIHRoaXMuZ2V0RWxlbWVudCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gcGFuZWw7XG4gICAgfTtcblxuICAgIHBhbmVsLmNsYXNzTmFtZSA9IFwiY2hpY2tlbnBhaW50LXRyYW5zZm9ybS1wYW5lbFwiO1xuICAgIHBhbmVsLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcblxuICAgIGFjY2VwdEJ1dHRvbi50eXBlID0gXCJidXR0b25cIjtcbiAgICByZWplY3RCdXR0b24udHlwZSA9IFwiYnV0dG9uXCI7XG5cbiAgICBhY2NlcHRCdXR0b24uY2xhc3NOYW1lID0gXCJidG4gYnRuLXByaW1hcnkgYnRuLWJsb2NrXCI7XG4gICAgcmVqZWN0QnV0dG9uLmNsYXNzTmFtZSA9IFwiYnRuIGJ0bi1kZWZhdWx0IGJ0bi1ibG9ja1wiO1xuXG4gICAgYWNjZXB0QnV0dG9uLmlubmVySFRNTCA9IFwiQXBwbHkgdHJhbnNmb3JtXCI7XG4gICAgcmVqZWN0QnV0dG9uLmlubmVySFRNTCA9IFwiQ2FuY2VsXCI7XG5cbiAgICBpbnRlcnBDb21iby5hZGRFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgY29udHJvbGxlci5zZXRUcmFuc2Zvcm1JbnRlcnBvbGF0aW9uKHRoaXMudmFsdWUpO1xuICAgIH0pO1xuXG4gICAgaW50ZXJwQ29tYm8uY2xhc3NOYW1lID0gJ2Zvcm0tY29udHJvbCBjaGlja2VucGFpbnQtdHJhbnNmb3JtLWludGVycG9sYXRpb24nO1xuICAgIGZpbGxDb21ib2JveChpbnRlcnBDb21ibywgVFJBTlNGT1JNX0lOVEVSUE9MQVRJT04pO1xuXG4gICAgaWYgKGlzQ2FudmFzSW50ZXJwb2xhdGlvblN1cHBvcnRlZCgpKSB7XG4gICAgICAgIHZhclxuICAgICAgICAgICAgaW50ZXJwR3JvdXAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLFxuICAgICAgICAgICAgaW50ZXJwTGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGFiZWxcIik7XG5cbiAgICAgICAgaW50ZXJwTGFiZWwuaW5uZXJIVE1MID0gXCJUcmFuc2Zvcm0gc3R5bGVcIjtcblxuICAgICAgICBpbnRlcnBHcm91cC5jbGFzc05hbWUgPSBcImZvcm0tZ3JvdXBcIjtcbiAgICAgICAgaW50ZXJwR3JvdXAuYXBwZW5kQ2hpbGQoaW50ZXJwTGFiZWwpO1xuICAgICAgICBpbnRlcnBHcm91cC5hcHBlbmRDaGlsZChpbnRlcnBDb21ibyk7XG5cbiAgICAgICAgcGFuZWwuYXBwZW5kQ2hpbGQoaW50ZXJwR3JvdXApO1xuICAgIH1cblxuICAgIHZhclxuICAgICAgICBidXR0b25Hcm91cCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG5cbiAgICBidXR0b25Hcm91cC5hcHBlbmRDaGlsZChhY2NlcHRCdXR0b24pO1xuICAgIGJ1dHRvbkdyb3VwLmFwcGVuZENoaWxkKHJlamVjdEJ1dHRvbik7XG5cbiAgICBidXR0b25Hcm91cC5jbGFzc05hbWUgPSBcImZvcm0tZ3JvdXBcIjtcblxuICAgIHBhbmVsLmFwcGVuZENoaWxkKGJ1dHRvbkdyb3VwKTtcblxuICAgIGFjY2VwdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24oZSkge1xuICAgICAgICBjb250cm9sbGVyLmFjdGlvblBlcmZvcm1lZCh7YWN0aW9uOiBcIkNQVHJhbnNmb3JtQWNjZXB0XCJ9KTtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH0pO1xuXG4gICAgcmVqZWN0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbihlKSB7XG4gICAgICAgIGNvbnRyb2xsZXIuYWN0aW9uUGVyZm9ybWVkKHthY3Rpb246IFwiQ1BUcmFuc2Zvcm1SZWplY3RcIn0pO1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgfSk7XG59XG4iLCIvKlxuICAgIENoaWNrZW5QYWludFxuICAgIFxuICAgIENoaWNrZW5QYWludCBpcyBhIHRyYW5zbGF0aW9uIG9mIENoaWJpUGFpbnQgZnJvbSBKYXZhIHRvIEphdmFTY3JpcHRcbiAgICBieSBOaWNob2xhcyBTaGVybG9jayAvIENoaWNrZW4gU21vb3RoaWUuXG4gICAgXG4gICAgQ2hpYmlQYWludCBpcyBDb3B5cmlnaHQgKGMpIDIwMDYtMjAwOCBNYXJjIFNjaGVmZXJcblxuICAgIENoaWNrZW5QYWludCBpcyBmcmVlIHNvZnR3YXJlOiB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3IgbW9kaWZ5XG4gICAgaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBhcyBwdWJsaXNoZWQgYnlcbiAgICB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uLCBlaXRoZXIgdmVyc2lvbiAzIG9mIHRoZSBMaWNlbnNlLCBvclxuICAgIChhdCB5b3VyIG9wdGlvbikgYW55IGxhdGVyIHZlcnNpb24uXG5cbiAgICBDaGlja2VuUGFpbnQgaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCxcbiAgICBidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZlxuICAgIE1FUkNIQU5UQUJJTElUWSBvciBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS4gIFNlZSB0aGVcbiAgICBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9yZSBkZXRhaWxzLlxuXG4gICAgWW91IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2VcbiAgICBhbG9uZyB3aXRoIENoaWNrZW5QYWludC4gSWYgbm90LCBzZWUgPGh0dHA6Ly93d3cuZ251Lm9yZy9saWNlbnNlcy8+LlxuKi9cblxuaW1wb3J0IENQUmVjdCBmcm9tIFwiLi4vdXRpbC9DUFJlY3RcIjtcbmltcG9ydCBDUFRyYW5zZm9ybSBmcm9tIFwiLi4vdXRpbC9DUFRyYW5zZm9ybVwiO1xuaW1wb3J0IENQV2Fjb21UYWJsZXQgZnJvbSBcIi4uL3V0aWwvQ1BXYWNvbVRhYmxldFwiO1xuaW1wb3J0IENQQmV6aWVyIGZyb20gXCIuLi91dGlsL0NQQmV6aWVyXCI7XG5pbXBvcnQge3Rocm90dGxlfSBmcm9tIFwiLi4vdXRpbC90aHJvdHRsZS1kZWJvdW5jZVwiO1xuaW1wb3J0IENQUG9seWdvbiBmcm9tIFwiLi4vdXRpbC9DUFBvbHlnb25cIjtcbmltcG9ydCB7c2V0Q2FudmFzSW50ZXJwb2xhdGlvbn0gZnJvbSBcIi4uL3V0aWwvQ1BQb2x5ZmlsbFwiO1xuXG5pbXBvcnQgQ2hpY2tlblBhaW50IGZyb20gXCIuLi9DaGlja2VuUGFpbnRcIjtcblxuaW1wb3J0IENQQnJ1c2hJbmZvIGZyb20gXCIuLi9lbmdpbmUvQ1BCcnVzaEluZm9cIjtcblxuaW1wb3J0IHtjcmVhdGVDaGVja2VyYm9hcmRQYXR0ZXJufSBmcm9tIFwiLi9DUEdVSVV0aWxzXCI7XG5pbXBvcnQgQ1BTY3JvbGxiYXIgZnJvbSBcIi4vQ1BTY3JvbGxiYXJcIjtcbmltcG9ydCBDUFZlY3RvciBmcm9tIFwiLi4vdXRpbC9DUFZlY3RvclwiO1xuXG5mdW5jdGlvbiBDUE1vZGVTdGFjaygpIHtcbiAgICB0aGlzLm1vZGVzID0gW107XG59XG5cbi8qIFdlIGhhdmUgdHdvIGRpc3Rpbmd1aXNoZWQgbW9kZSBpbmRleGVzIHdoaWNoIGNvcnJlc3BvbmQgdG8gdGhlIENQRGVmYXVsdE1vZGUgYW5kIHRoZSBtb2RlIHRoYXQgdGhlIHVzZXIgaGFzIHNlbGVjdGVkXG4gKiBpbiB0aGUgdG9vbCBwYWxldHRlICh0aGUgZ2xvYmFsIGRyYXdpbmcgbW9kZSkuIE9uIHRvcCBvZiB0aGF0IGFyZSBvdGhlciB0cmFuc2llbnQgbW9kZXMuXG4gKi9cbkNQTW9kZVN0YWNrLk1PREVfSU5ERVhfREVGQVVMVCA9IDA7XG5DUE1vZGVTdGFjay5NT0RFX0lOREVYX1VTRVIgPSAxO1xuXG5DUE1vZGVTdGFjay5wcm90b3R5cGUuc2V0TW9kZSA9IGZ1bmN0aW9uKGluZGV4LCBuZXdNb2RlKSB7XG4gICAgdmFyXG4gICAgICAgIG9sZE1vZGUgPSB0aGlzLm1vZGVzW2luZGV4XTtcblxuICAgIGlmIChvbGRNb2RlID09IG5ld01vZGUpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChvbGRNb2RlKSB7XG4gICAgICAgIG9sZE1vZGUubGVhdmUoKTtcbiAgICB9XG5cbiAgICB0aGlzLm1vZGVzW2luZGV4XSA9IG5ld01vZGU7XG4gICAgbmV3TW9kZS5lbnRlcigpO1xufTtcblxuQ1BNb2RlU3RhY2sucHJvdG90eXBlLnNldERlZmF1bHRNb2RlID0gZnVuY3Rpb24obmV3TW9kZSkge1xuICAgIG5ld01vZGUudHJhbnNpZW50ID0gZmFsc2U7XG4gICAgbmV3TW9kZS5jYXB0dXJlID0gZmFsc2U7XG5cbiAgICB0aGlzLnNldE1vZGUoQ1BNb2RlU3RhY2suTU9ERV9JTkRFWF9ERUZBVUxULCBuZXdNb2RlKTtcbn07XG5cbkNQTW9kZVN0YWNrLnByb3RvdHlwZS5zZXRVc2VyTW9kZSA9IGZ1bmN0aW9uKG5ld01vZGUpIHtcbiAgICAvLyBMZWF2ZSBhbnkgdHJhbnNpZW50IG1vZGVzIHRoYXQgd2VyZSBvbiB0b3Agb2YgdGhlIHVzZXIgbW9kZVxuICAgIGZvciAodmFyIGkgPSB0aGlzLm1vZGVzLmxlbmd0aCAtIDE7IGkgPiBDUE1vZGVTdGFjay5NT0RFX0lOREVYX1VTRVI7IGktLSkge1xuICAgICAgICB0aGlzLm1vZGVzW2ldLmxlYXZlKCk7XG4gICAgICAgIHRoaXMubW9kZXMuc3BsaWNlKGksIDEpO1xuICAgIH1cblxuICAgIG5ld01vZGUudHJhbnNpZW50ID0gZmFsc2U7XG4gICAgbmV3TW9kZS5jYXB0dXJlID0gZmFsc2U7XG5cbiAgICB0aGlzLnNldE1vZGUoQ1BNb2RlU3RhY2suTU9ERV9JTkRFWF9VU0VSLCBuZXdNb2RlKTtcbn07XG5cbi8qKlxuICogRGVsaXZlciB0aGUgZXZlbnQgd2l0aCB0aGUgZ2l2ZW4gbmFtZSBhbmQgYXJyYXkgb2YgcGFyYW1ldGVycyB0byB0aGUgbW9kZSBzdGFjay5cbiAqXG4gKiBAcGFyYW0gZXZlbnRcbiAqIEBwYXJhbSBwYXJhbXNcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIGFueSBtb2RlIGNhcHR1cmVkIHRoZSBldmVudFxuICovXG5DUE1vZGVTdGFjay5wcm90b3R5cGUuZGVsaXZlckV2ZW50ID0gZnVuY3Rpb24oZXZlbnQsIHBhcmFtcykge1xuICAgIGZvciAodmFyIGkgPSB0aGlzLm1vZGVzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgIHZhclxuICAgICAgICAgICAgbW9kZSA9IHRoaXMubW9kZXNbaV07XG5cbiAgICAgICAgaWYgKG1vZGVbZXZlbnRdLmFwcGx5KG1vZGUsIHBhcmFtcykgfHwgbW9kZS5jYXB0dXJlICYmIGV2ZW50ICE9IFwicGFpbnRcIikge1xuICAgICAgICAgICAgLyogSWYgdGhlIGV2ZW50IHdhcyBoYW5kbGVkLCBkb24ndCB0cnkgdG8gZGVsaXZlciBpdCB0byBhbnl0aGluZyBmdXJ0aGVyIHVwIHRoZSBzdGFjayAqL1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gZmFsc2U7XG59O1xuXG4vLyBXZSBjYW4gY2FsbCB0aGVzZSByb3V0aW5lcyB0byBkZWxpdmVyIGV2ZW50cyB0aGF0IGJ1YmJsZSB1cCB0aGUgbW9kZSBzdGFja1xuZm9yIChsZXQgZXZlbnROYW1lIG9mIFtcIm1vdXNlRG93blwiLCBcIm1vdXNlVXBcIl0pIHtcbiAgICBDUE1vZGVTdGFjay5wcm90b3R5cGVbZXZlbnROYW1lXSA9IGZ1bmN0aW9uIChlLCBidXR0b24sIHByZXNzdXJlKSB7XG4gICAgICAgIHRoaXMuZGVsaXZlckV2ZW50KGV2ZW50TmFtZSwgW2UsIGJ1dHRvbiwgcHJlc3N1cmVdKTtcbiAgICB9O1xufVxuXG5mb3IgKGxldCBldmVudE5hbWUgb2YgW1wibW91c2VEcmFnXCIsIFwibW91c2VNb3ZlXCJdKSB7XG4gICAgQ1BNb2RlU3RhY2sucHJvdG90eXBlW2V2ZW50TmFtZV0gPSBmdW5jdGlvbiAoZSwgcHJlc3N1cmUpIHtcbiAgICAgICAgdGhpcy5kZWxpdmVyRXZlbnQoZXZlbnROYW1lLCBbZSwgcHJlc3N1cmVdKTtcbiAgICB9O1xufVxuXG5mb3IgKGxldCBldmVudE5hbWUgb2YgW1wia2V5RG93blwiLCBcImtleVVwXCJdKSB7XG4gICAgQ1BNb2RlU3RhY2sucHJvdG90eXBlW2V2ZW50TmFtZV0gPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICBpZiAodGhpcy5kZWxpdmVyRXZlbnQoZXZlbnROYW1lLCBbZV0pKSB7XG4gICAgICAgICAgICAvLyBTd2FsbG93IGhhbmRsZWQga2V5cHJlc3Nlc1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB9XG4gICAgfTtcbn1cblxuQ1BNb2RlU3RhY2sucHJvdG90eXBlLnBhaW50ID0gZnVuY3Rpb24oY29udGV4dCkge1xuICAgIHRoaXMuZGVsaXZlckV2ZW50KFwicGFpbnRcIiwgW2NvbnRleHRdKTtcbn07XG5cbi8qKlxuICogQWRkIGEgbW9kZSB0byB0aGUgdG9wIG9mIHRoZSBtb2RlIHN0YWNrLlxuICpcbiAqIEBwYXJhbSBtb2RlIHtDUE1vZGV9XG4gKiBAcGFyYW0gdHJhbnNpZW50IHtib29sZWFufSBTZXQgdG8gdHJ1ZSBpZiB0aGUgbW9kZSBpcyBleHBlY3RlZCB0byByZW1vdmUgaXRzZWxmIGZyb20gc3RhY2sgdXBvbiBjb21wbGV0aW9uLlxuICovXG5DUE1vZGVTdGFjay5wcm90b3R5cGUucHVzaCA9IGZ1bmN0aW9uKG1vZGUsIHRyYW5zaWVudCkge1xuICAgIHZhclxuICAgICAgICBwcmV2aW91c1RvcCA9IHRoaXMucGVlaygpO1xuXG4gICAgaWYgKHByZXZpb3VzVG9wKSB7XG4gICAgICAgIHByZXZpb3VzVG9wLnN1c3BlbmQoKTtcbiAgICB9XG5cbiAgICBtb2RlLnRyYW5zaWVudCA9IHRyYW5zaWVudDtcbiAgICBtb2RlLmNhcHR1cmUgPSBmYWxzZTtcblxuICAgIG1vZGUuZW50ZXIoKTtcblxuICAgIHRoaXMubW9kZXMucHVzaChtb2RlKTtcbn07XG5cbkNQTW9kZVN0YWNrLnByb3RvdHlwZS5wZWVrID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKHRoaXMubW9kZXMubGVuZ3RoID4gMCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tb2Rlc1t0aGlzLm1vZGVzLmxlbmd0aCAtIDFdO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbn07XG5cbi8qKlxuICogUmVtb3ZlIHRoZSBub2RlIGF0IHRoZSB0b3Agb2YgdGhlIHN0YWNrIGFuZCByZXR1cm4gdGhlIG5ldyB0b3Agb2YgdGhlIHN0YWNrLlxuICpcbiAqIEByZXR1cm5zIHsqfVxuICovXG5DUE1vZGVTdGFjay5wcm90b3R5cGUucG9wID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyXG4gICAgICAgIG91dGdvaW5nTW9kZSA9IHRoaXMubW9kZXMucG9wKCksXG4gICAgICAgIG5ld1RvcCA9IHRoaXMucGVlaygpO1xuXG4gICAgaWYgKG91dGdvaW5nTW9kZSkge1xuICAgICAgICBvdXRnb2luZ01vZGUubGVhdmUoKTtcbiAgICB9XG5cbiAgICBpZiAobmV3VG9wKSB7XG4gICAgICAgIG5ld1RvcC5yZXN1bWUoKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbmV3VG9wO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gQ1BDYW52YXMoY29udHJvbGxlcikge1xuICAgIGNvbnN0XG4gICAgICAgIEJVVFRPTl9QUklNQVJZID0gMCxcbiAgICAgICAgQlVUVE9OX1dIRUVMID0gMSxcbiAgICAgICAgQlVUVE9OX1NFQ09OREFSWSA9IDIsXG5cbiAgICAgICAgTUlOX1pPT00gPSAwLjEwLFxuICAgICAgICBNQVhfWk9PTSA9IDE2LjAsXG5cbiAgICAgICAgQ1VSU09SX0RFRkFVTFQgPSBcImRlZmF1bHRcIiwgQ1VSU09SX1BBTk5BQkxFID0gXCJncmFiXCIsIENVUlNPUl9QQU5OSU5HID0gXCJncmFiYmluZ1wiLCBDVVJTT1JfQ1JPU1NIQUlSID0gXCJjcm9zc2hhaXJcIixcbiAgICAgICAgQ1VSU09SX01PVkUgPSBcIm1vdmVcIiwgQ1VSU09SX05FU1dfUkVTSVpFID0gXCJuZXN3LXJlc2l6ZVwiLCBDVVJTT1JfTldTRV9SRVNJWkUgPSBcIm53c2UtcmVzaXplXCIsXG4gICAgICAgIENVUlNPUl9OU19SRVNJWkUgPSBcIm5zLXJlc2l6ZVwiLCBDVVJTT1JfRVdfUkVTSVpFID0gXCJldy1yZXNpemVcIjtcblxuICAgIHZhclxuICAgICAgICB0aGF0ID0gdGhpcyxcbiAgICBcbiAgICAgICAgY2FudmFzQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSxcbiAgICAgICAgY2FudmFzQ29udGFpbmVyVG9wID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSxcbiAgICAgICAgY2FudmFzQ29udGFpbmVyQm90dG9tID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSxcbiAgICAgICAgXG4gICAgICAgIC8vIE91ciBjYW52YXMgdGhhdCBmaWxscyB0aGUgZW50aXJlIHNjcmVlblxuICAgICAgICBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpLFxuICAgICAgICBjYW52YXNDb250ZXh0ID0gY2FudmFzLmdldENvbnRleHQoXCIyZFwiKSxcbiAgICAgICAgXG4gICAgICAgIC8vIE91ciBjYWNoZSBvZiB0aGUgYXJ0d29yaydzIGZ1c2lvbiB0byBiZSBkcmF3biBvbnRvIG91ciBtYWluIGNhbnZhcyB1c2luZyBvdXIgY3VycmVudCB0cmFuc2Zvcm1cbiAgICAgICAgYXJ0d29ya0NhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIiksXG4gICAgICAgIGFydHdvcmtDYW52YXNDb250ZXh0ID0gYXJ0d29ya0NhbnZhcy5nZXRDb250ZXh0KFwiMmRcIiksXG4gICAgICAgIFxuICAgICAgICBjaGVja2VyYm9hcmRQYXR0ZXJuID0gY3JlYXRlQ2hlY2tlcmJvYXJkUGF0dGVybihjYW52YXNDb250ZXh0KSxcbiAgICAgICAgXG4gICAgICAgIGFydHdvcmsgPSBjb250cm9sbGVyLmdldEFydHdvcmsoKSxcblxuICAgICAgICAvLyBDYW52YXMgdHJhbnNmb3JtYXRpb25zXG4gICAgICAgIHpvb20gPSAxLFxuICAgICAgICBvZmZzZXRYID0gMCwgb2Zmc2V0WSA9IDAsXG4gICAgICAgIGNhbnZhc1JvdGF0aW9uID0gMC4wLFxuICAgICAgICB0cmFuc2Zvcm0gPSBuZXcgQ1BUcmFuc2Zvcm0oKSxcbiAgICAgICAgaW50ZXJwb2xhdGlvbiA9IGZhbHNlLFxuXG4gICAgICAgIC8vIEdyaWQgb3B0aW9uc1xuICAgICAgICBzaG93R3JpZCA9IGZhbHNlLFxuICAgICAgICBncmlkU2l6ZSA9IDMyLFxuICAgICAgICBcbiAgICAgICAgbW91c2VYID0gMCwgbW91c2VZID0gMCxcblxuICAgICAgICBtb3VzZUluID0gZmFsc2UsIG1vdXNlRG93biA9IFtmYWxzZSwgZmFsc2UsIGZhbHNlXSAvKiBUcmFjayBlYWNoIGJ1dHRvbiBpbmRlcGVuZGVudGx5ICovLCB3YWNvbVBlbkRvd24gPSBmYWxzZSxcbiAgICAgICAgXG4gICAgICAgIC8qIFRoZSBhcmVhIG9mIHRoZSBkb2N1bWVudCB0aGF0IHNob3VsZCBoYXZlIGl0cyBsYXllcnMgZnVzZWQgYW5kIHJlcGFpbnRlZCB0byB0aGUgc2NyZWVuXG4gICAgICAgICAqIChpLmUuIGFuIGFyZWEgbW9kaWZpZWQgYnkgZHJhd2luZyB0b29scykuIFxuICAgICAgICAgKiBcbiAgICAgICAgICogSW5pdGlhbGx5IHNldCB0byB0aGUgc2l6ZSBvZiB0aGUgYXJ0d29yayBzbyB3ZSBjYW4gcmVwYWludCB0aGUgd2hvbGUgdGhpbmcuXG4gICAgICAgICAqL1xuICAgICAgICBhcnR3b3JrVXBkYXRlUmVnaW9uID0gbmV3IENQUmVjdCgwLCAwLCBhcnR3b3JrLndpZHRoLCBhcnR3b3JrLmhlaWdodCksXG4gICAgICAgIFxuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIGFyZWEgb2YgdGhlIGNhbnZhcyB0aGF0IHNob3VsZCBiZSByZXBhaW50ZWQgdG8gdGhlIHNjcmVlbiBkdXJpbmcgdGhlIG5leHQgcmVwYWludCBpbnRlcm5hbCAoaW4gY2FudmFzXG4gICAgICAgICAqIGNvb3JkaW5hdGVzKS5cbiAgICAgICAgICovXG4gICAgICAgIHJlcGFpbnRSZWdpb24gPSBuZXcgQ1BSZWN0KDAsIDAsIDAsIDApLFxuICAgICAgICBzY2hlZHVsZWRSZXBhaW50ID0gZmFsc2UsXG4gICAgICAgIFxuICAgICAgICAvL1xuICAgICAgICAvLyBNb2RlcyBzeXN0ZW06IG1vZGVzIGNvbnRyb2wgdGhlIHdheSB0aGUgR1VJIGlzIHJlYWN0aW5nIHRvIHRoZSB1c2VyIGlucHV0XG4gICAgICAgIC8vIEFsbCB0aGUgdG9vbHMgYXJlIGltcGxlbWVudGVkIHRocm91Z2ggbW9kZXNcbiAgICAgICAgLy9cbiAgICAgICAgXG4gICAgICAgIGRlZmF1bHRNb2RlLFxuICAgICAgICBjb2xvclBpY2tlck1vZGUsXG4gICAgICAgIHBhbk1vZGUsXG4gICAgICAgIHJvdGF0ZUNhbnZhc01vZGUsXG4gICAgICAgIGZsb29kRmlsbE1vZGUsXG4gICAgICAgIGdyYWRpZW50RmlsbE1vZGUsXG4gICAgICAgIHJlY3RTZWxlY3Rpb25Nb2RlLFxuICAgICAgICBtb3ZlVG9vbE1vZGUsXG4gICAgICAgIHRyYW5zZm9ybU1vZGUsXG5cbiAgICAgICAgLy8gdGhpcyBtdXN0IGNvcnJlc3BvbmQgdG8gdGhlIHN0cm9rZSBtb2RlcyBkZWZpbmVkIGluIENQVG9vbEluZm9cbiAgICAgICAgZHJhd2luZ01vZGVzID0gW10sXG5cbiAgICAgICAgbW9kZVN0YWNrID0gbmV3IENQTW9kZVN0YWNrKCksXG5cbiAgICAgICAgY3VyRHJhd01vZGUsIGN1clNlbGVjdGVkTW9kZSxcbiAgICAgICAgXG4gICAgICAgIGhvcnpTY3JvbGwgPSBuZXcgQ1BTY3JvbGxiYXIoZmFsc2UpLCBcbiAgICAgICAgdmVydFNjcm9sbCA9IG5ldyBDUFNjcm9sbGJhcih0cnVlKSxcbiAgICAgICAgXG4gICAgICAgIHRhYmxldCA9IENQV2Fjb21UYWJsZXQuZ2V0UmVmKCk7XG5cbiAgICBNYXRoLnNpZ24gPSBNYXRoLnNpZ24gfHwgZnVuY3Rpb24oeCkge1xuICAgICAgICB4ID0gK3g7IC8vIGNvbnZlcnQgdG8gYSBudW1iZXJcbiAgICAgICAgaWYgKHggPT09IDAgfHwgaXNOYU4oeCkpIHtcbiAgICAgICAgICAgIHJldHVybiB4O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB4ID4gMCA/IDEgOiAtMTtcbiAgICB9O1xuXG4gICAgLy8gUGFyZW50IGNsYXNzIHdpdGggZW1wdHkgZXZlbnQgaGFuZGxlcnMgZm9yIHRob3NlIGRyYXdpbmcgbW9kZXMgdGhhdCBkb24ndCBuZWVkIGV2ZXJ5IGV2ZW50XG4gICAgZnVuY3Rpb24gQ1BNb2RlKCkge1xuICAgIH1cblxuXHQvKipcbiAgICAgKiBUcnVlIGlmIHRoaXMgbW9kZSB3aWxsIGJlIGV4aXRpbmcgdGhlIG1vZGUgc3RhY2sgYXMgc29vbiBhcyB0aGUgY3VycmVudCBpbnRlcmF0aW9uIGlzIGNvbXBsZXRlLlxuICAgICAqXG4gICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICovXG4gICAgQ1BNb2RlLnByb3RvdHlwZS50cmFuc2llbnQgPSBmYWxzZTtcblxuXHQvKipcbiAgICAgKiBJZiB0cnVlLCBubyBpbnB1dCBldmVudHMgd2lsbCBiZSBzZW50IHRvIGFueSBtb2RlcyB1bmRlcm5lYXRoIHRoaXMgb25lIChldmVudCBzdHJlYW0gaXMgY2FwdHVyZWQpLlxuICAgICAqXG4gICAgICogUGFpbnRpbmcgZXZlbnRzIHdpbGwgY29udGludWUgdG8gYnViYmxlLlxuICAgICAqXG4gICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICovXG4gICAgQ1BNb2RlLnByb3RvdHlwZS5jYXB0dXJlID0gZmFsc2U7XG4gICAgXG4gICAgQ1BNb2RlLnByb3RvdHlwZS5lbnRlciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBzZXRDdXJzb3IoQ1VSU09SX0RFRkFVTFQpO1xuICAgIH07XG5cbiAgICBDUE1vZGUucHJvdG90eXBlLmxlYXZlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHRoaXMuY2FwdHVyZSA9IGZhbHNlO1xuICAgIH07XG5cbiAgICBDUE1vZGUucHJvdG90eXBlLm1vdXNlTW92ZSA9IENQTW9kZS5wcm90b3R5cGUucGFpbnQgPSBDUE1vZGUucHJvdG90eXBlLm1vdXNlRG93blxuICAgICAgICA9IENQTW9kZS5wcm90b3R5cGUubW91c2VEcmFnID0gQ1BNb2RlLnByb3RvdHlwZS5tb3VzZVVwID0gQ1BNb2RlLnByb3RvdHlwZS5rZXlEb3duXG4gICAgICAgID0gQ1BNb2RlLnByb3RvdHlwZS5zdXNwZW5kID0gQ1BNb2RlLnByb3RvdHlwZS5yZXN1bWUgPSBDUE1vZGUucHJvdG90eXBlLmtleVVwID0gZnVuY3Rpb24oKSB7fTtcblxuICAgIC8vXG4gICAgLy8gRGVmYXVsdCBVSSBNb2RlIHdoZW4gbm90IGRvaW5nIGFueXRoaW5nOiB1c2VkIHRvIHN0YXJ0IHRoZSBvdGhlciBtb2Rlc1xuICAgIC8vXG5cbiAgICBmdW5jdGlvbiBDUERlZmF1bHRNb2RlKCkge1xuICAgIH1cbiAgICBcbiAgICBDUERlZmF1bHRNb2RlLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoQ1BNb2RlLnByb3RvdHlwZSk7XG4gICAgQ1BEZWZhdWx0TW9kZS5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBDUERlZmF1bHRNb2RlO1xuICAgIFxuICAgIENQRGVmYXVsdE1vZGUucHJvdG90eXBlLm1vdXNlRG93biA9IGZ1bmN0aW9uKGUsIGJ1dHRvbiwgcHJlc3N1cmUpIHtcbiAgICAgICAgdmFyXG4gICAgICAgICAgICBzcGFjZVByZXNzZWQgPSBrZXkuaXNQcmVzc2VkKFwic3BhY2VcIik7XG4gICAgICAgIFxuICAgICAgICBpZiAoIXNwYWNlUHJlc3NlZFxuICAgICAgICAgICAgICAgICYmIChidXR0b24gPT0gQlVUVE9OX1NFQ09OREFSWSB8fCBidXR0b24gPT0gQlVUVE9OX1BSSU1BUlkgJiYgZS5hbHRLZXkpKSB7XG4gICAgICAgICAgICBtb2RlU3RhY2sucHVzaChjb2xvclBpY2tlck1vZGUsIHRydWUpO1xuICAgICAgICAgICAgLy8gQXZvaWQgaW5maW5pdGUgcmVjdXJzaW9uIGJ5IG9ubHkgZGVsaXZlcmluZyB0aGUgZXZlbnQgdG8gdGhlIG5ldyBtb2RlIChkb24ndCBsZXQgaXQgYnViYmxlIGJhY2sgdG8gdXMhKVxuICAgICAgICAgICAgbW9kZVN0YWNrLnBlZWsoKS5tb3VzZURvd24oZSwgYnV0dG9uLCBwcmVzc3VyZSk7XG4gICAgICAgIH0gZWxzZSBpZiAoYnV0dG9uID09IEJVVFRPTl9XSEVFTCB8fCBzcGFjZVByZXNzZWQgJiYgYnV0dG9uID09IEJVVFRPTl9QUklNQVJZKSB7XG4gICAgICAgICAgICBpZiAoZS5hbHRLZXkpIHtcbiAgICAgICAgICAgICAgICBtb2RlU3RhY2sucHVzaChyb3RhdGVDYW52YXNNb2RlLCB0cnVlKTtcbiAgICAgICAgICAgICAgICBtb2RlU3RhY2sucGVlaygpLm1vdXNlRG93bihlLCBidXR0b24sIHByZXNzdXJlKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgbW9kZVN0YWNrLnB1c2gocGFuTW9kZSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgbW9kZVN0YWNrLnBlZWsoKS5tb3VzZURvd24oZSwgYnV0dG9uLCBwcmVzc3VyZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFxuICAgIENQRGVmYXVsdE1vZGUucHJvdG90eXBlLmtleURvd24gPSBmdW5jdGlvbihlKSB7XG4gICAgICAgIGlmIChlLmtleUNvZGUgPT0gMzIgLyogU3BhY2UgKi8pIHtcbiAgICAgICAgICAgIGlmIChlLmFsdEtleSkge1xuICAgICAgICAgICAgICAgIG1vZGVTdGFjay5wdXNoKHJvdGF0ZUNhbnZhc01vZGUsIHRydWUpO1xuICAgICAgICAgICAgICAgIG1vZGVTdGFjay5wZWVrKCkua2V5RG93bihlKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gV2UgY2FuIHN0YXJ0IHRoZSBwYW4gbW9kZSBiZWZvcmUgdGhlIG1vdXNlIGJ1dHRvbiBpcyBldmVuIHByZXNzZWQsIHNvIHRoYXQgdGhlIFwiZ3JhYmJhYmxlXCIgY3Vyc29yIGFwcGVhcnNcbiAgICAgICAgICAgICAgICBtb2RlU3RhY2sucHVzaChwYW5Nb2RlLCB0cnVlKTtcbiAgICAgICAgICAgICAgICBtb2RlU3RhY2sucGVlaygpLmtleURvd24oZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH07XG5cblx0LyoqXG4gICAgICogQSBiYXNlIGZvciB0aGUgdGhyZWUgZHJhd2luZyBtb2Rlcywgc28gdGhleSBjYW4gYWxsIHNoYXJlIHRoZSBzYW1lIGJydXNoLXByZXZpZXctY2lyY2xlIGRyYXdpbmcgYmVoYXZpb3VyLlxuICAgICAqXG4gICAgICogQGNvbnN0cnVjdG9yXG4gICAgICovXG4gICAgZnVuY3Rpb24gQ1BEcmF3aW5nTW9kZSgpIHtcbiAgICAgICAgdGhpcy5zaG91bGRQYWludEJydXNoUHJldmlldyA9IGZhbHNlO1xuXG4gICAgICAgIC8qIFRoZSBsYXN0IHJlY3RhbmdsZSB3ZSBkaXJ0aWVkIHdpdGggYSBicnVzaCBwcmV2aWV3IGNpcmNsZSwgb3IgbnVsbCBpZiBvbmUgaGFzbid0IGJlZW4gZHJhd24geWV0ICovXG4gICAgICAgIHRoaXMub2xkUHJldmlld1JlY3QgPSBudWxsO1xuICAgIH1cblxuICAgIENQRHJhd2luZ01vZGUucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShDUE1vZGUucHJvdG90eXBlKTtcbiAgICBDUERyYXdpbmdNb2RlLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IENQRHJhd2luZ01vZGU7XG5cbiAgICAvKipcbiAgICAgKiBHZXQgYSByZWN0YW5nbGUgdGhhdCBlbmNsb3NlcyB0aGUgcHJldmlldyBicnVzaCwgaW4gc2NyZWVuIGNvb3JkaW5hdGVzLlxuICAgICAqL1xuICAgIENQRHJhd2luZ01vZGUucHJvdG90eXBlLmdldEJydXNoUHJldmlld092YWwgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyXG4gICAgICAgICAgICBicnVzaFNpemUgPSBjb250cm9sbGVyLmdldEJydXNoU2l6ZSgpICogem9vbTtcblxuICAgICAgICByZXR1cm4gbmV3IENQUmVjdChcbiAgICAgICAgICAgIG1vdXNlWCAtIGJydXNoU2l6ZSAvIDIsXG4gICAgICAgICAgICBtb3VzZVkgLSBicnVzaFNpemUgLyAyLFxuICAgICAgICAgICAgbW91c2VYICsgYnJ1c2hTaXplIC8gMixcbiAgICAgICAgICAgIG1vdXNlWSArIGJydXNoU2l6ZSAvIDJcbiAgICAgICAgKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogUXVldWVzIHVwIHRoZSBicnVzaCBwcmV2aWV3IG92YWwgdG8gYmUgZHJhd24uXG4gICAgICovXG4gICAgQ1BEcmF3aW5nTW9kZS5wcm90b3R5cGUucXVldWVCcnVzaFByZXZpZXcgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgLyogSWYgd2UncmUgbm90IHRoZSB0b3AtbW9zdCBtb2RlLCBpdCdzIHVubGlrZWx5IHRoYXQgbGVmdCBjbGlja2luZyB3aWxsIGRyYXdpbmcgZm9yIHVzLCBzbyBkb24ndCBjb25zaWRlclxuICAgICAgICAgKiBwYWludGluZyB0aGUgYnJ1c2ggcHJldmlld1xuICAgICAgICAgKi9cbiAgICAgICAgaWYgKG1vZGVTdGFjay5wZWVrKCkgIT0gdGhpcykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5zaG91bGRQYWludEJydXNoUHJldmlldyA9IHRydWU7XG5cbiAgICAgICAgdmFyXG4gICAgICAgICAgICByZWN0ID0gdGhpcy5nZXRCcnVzaFByZXZpZXdPdmFsKCk7XG5cbiAgICAgICAgcmVjdC5ncm93KDIsIDIpO1xuXG4gICAgICAgIC8vIElmIGEgYnJ1c2ggcHJldmlldyB3YXMgZHJhd24gcHJldmlvdXNseSwgc3RyZXRjaCB0aGUgcmVwYWludCByZWdpb24gdG8gcmVtb3ZlIHRoYXQgb2xkIGNvcHlcbiAgICAgICAgaWYgKHRoaXMub2xkUHJldmlld1JlY3QgIT0gbnVsbCkge1xuICAgICAgICAgICAgcmVjdC51bmlvbih0aGlzLm9sZFByZXZpZXdSZWN0KTtcbiAgICAgICAgICAgIHRoaXMub2xkUHJldmlld1JlY3QgPSBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgcmVwYWludFJlY3QocmVjdCk7XG4gICAgfTtcblxuXHQvKipcbiAgICAgKiBFcmFzZSB0aGUgYnJ1c2ggcHJldmlldyBpZiBvbmUgaGFkIGJlZW4gZHJhd25cbiAgICAgKi9cbiAgICBDUERyYXdpbmdNb2RlLnByb3RvdHlwZS5lcmFzZUJydXNoUHJldmlldyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB0aGlzLnNob3VsZFBhaW50QnJ1c2hQcmV2aWV3ID0gZmFsc2U7XG5cbiAgICAgICAgaWYgKHRoaXMub2xkUHJldmlld1JlY3QgIT0gbnVsbCkge1xuICAgICAgICAgICAgcmVwYWludFJlY3QodGhpcy5vbGRQcmV2aWV3UmVjdCk7XG4gICAgICAgICAgICB0aGlzLm9sZFByZXZpZXdSZWN0ID0gbnVsbDtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBDUERyYXdpbmdNb2RlLnByb3RvdHlwZS5tb3VzZU1vdmUgPSBmdW5jdGlvbihlLCBwcmVzc3VyZSkge1xuICAgICAgICB0aGlzLnF1ZXVlQnJ1c2hQcmV2aWV3KCk7XG4gICAgfTtcblxuICAgIENQRHJhd2luZ01vZGUucHJvdG90eXBlLmVudGVyID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIENQTW9kZS5wcm90b3R5cGUuZW50ZXIuY2FsbCh0aGlzKTtcblxuICAgICAgICBpZiAobW91c2VJbikge1xuICAgICAgICAgICAgdGhpcy5xdWV1ZUJydXNoUHJldmlldygpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIENQRHJhd2luZ01vZGUucHJvdG90eXBlLmxlYXZlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIENQTW9kZS5wcm90b3R5cGUubGVhdmUuY2FsbCh0aGlzKTtcbiAgICAgICAgdGhpcy5lcmFzZUJydXNoUHJldmlldygpO1xuICAgIH07XG5cbiAgICBDUERyYXdpbmdNb2RlLnByb3RvdHlwZS5zdXNwZW5kID0gQ1BEcmF3aW5nTW9kZS5wcm90b3R5cGUubGVhdmU7XG4gICAgQ1BEcmF3aW5nTW9kZS5wcm90b3R5cGUucmVzdW1lID0gQ1BEcmF3aW5nTW9kZS5wcm90b3R5cGUuZW50ZXI7XG5cbiAgICBDUERyYXdpbmdNb2RlLnByb3RvdHlwZS5wYWludCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAodGhpcy5zaG91bGRQYWludEJydXNoUHJldmlldykge1xuICAgICAgICAgICAgdGhpcy5zaG91bGRQYWludEJydXNoUHJldmlldyA9IGZhbHNlO1xuXG4gICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICByID0gdGhpcy5nZXRCcnVzaFByZXZpZXdPdmFsKCk7XG5cbiAgICAgICAgICAgIGNhbnZhc0NvbnRleHQuYmVnaW5QYXRoKCk7XG5cbiAgICAgICAgICAgIGNhbnZhc0NvbnRleHQuYXJjKFxuICAgICAgICAgICAgICAgIChyLmxlZnQgKyByLnJpZ2h0KSAvIDIsXG4gICAgICAgICAgICAgICAgKHIudG9wICsgci5ib3R0b20pIC8gMixcbiAgICAgICAgICAgICAgICByLmdldFdpZHRoKCkgLyAyLFxuICAgICAgICAgICAgICAgIDAsXG4gICAgICAgICAgICAgICAgTWF0aC5QSSAqIDJcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGNhbnZhc0NvbnRleHQuc3Ryb2tlKCk7XG5cbiAgICAgICAgICAgIHIuZ3JvdygyLCAyKTtcblxuICAgICAgICAgICAgaWYgKHRoaXMub2xkUHJldmlld1JlY3QgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHRoaXMub2xkUHJldmlld1JlY3QgPSByO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLm9sZFByZXZpZXdSZWN0LnVuaW9uKHIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIENQRnJlZWhhbmRNb2RlKCkge1xuICAgICAgICBDUERyYXdpbmdNb2RlLmNhbGwodGhpcyk7XG5cbiAgICAgICAgdGhpcy5zbW9vdGhNb3VzZSA9IHt4OjAuMCwgeTowLjB9O1xuICAgIH1cbiAgICBcbiAgICBDUEZyZWVoYW5kTW9kZS5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKENQRHJhd2luZ01vZGUucHJvdG90eXBlKTtcbiAgICBDUEZyZWVoYW5kTW9kZS5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBDUEZyZWVoYW5kTW9kZTtcbiAgICBcbiAgICBDUEZyZWVoYW5kTW9kZS5wcm90b3R5cGUubW91c2VEb3duID0gZnVuY3Rpb24oZSwgYnV0dG9uLCBwcmVzc3VyZSkge1xuICAgICAgICBpZiAoIXRoaXMuY2FwdHVyZSAmJiBidXR0b24gPT0gQlVUVE9OX1BSSU1BUlkgJiYgIWUuYWx0S2V5ICYmICFrZXkuaXNQcmVzc2VkKFwic3BhY2VcIikgJiYgc2hvdWxkRHJhd1RvVGhpc0xheWVyKCkpIHtcbiAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgIHBmID0gY29vcmRUb0RvY3VtZW50KHt4OiBtb3VzZVgsIHk6bW91c2VZfSk7XG5cbiAgICAgICAgICAgIHRoaXMuZXJhc2VCcnVzaFByZXZpZXcoKTtcblxuICAgICAgICAgICAgdGhpcy5jYXB0dXJlID0gdHJ1ZTtcbiAgICAgICAgICAgIGFydHdvcmsuYmVnaW5TdHJva2UocGYueCwgcGYueSwgcHJlc3N1cmUpO1xuXG4gICAgICAgICAgICB0aGlzLnNtb290aE1vdXNlID0gcGY7XG5cbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIENQRnJlZWhhbmRNb2RlLnByb3RvdHlwZS5tb3VzZURyYWcgPSBmdW5jdGlvbihlLCBwcmVzc3VyZSkge1xuICAgICAgICBpZiAodGhpcy5jYXB0dXJlKSB7XG4gICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICBwZiA9IGNvb3JkVG9Eb2N1bWVudCh7eDogbW91c2VYLCB5OiBtb3VzZVl9KSxcbiAgICAgICAgICAgICAgICBzbW9vdGhpbmcgPSBNYXRoLm1pbigwLjk5OSwgTWF0aC5wb3coY29udHJvbGxlci5nZXRCcnVzaEluZm8oKS5zbW9vdGhpbmcsIDAuMykpO1xuXG4gICAgICAgICAgICB0aGlzLnNtb290aE1vdXNlLnggPSAoMS4wIC0gc21vb3RoaW5nKSAqIHBmLnggKyBzbW9vdGhpbmcgKiB0aGlzLnNtb290aE1vdXNlLng7XG4gICAgICAgICAgICB0aGlzLnNtb290aE1vdXNlLnkgPSAoMS4wIC0gc21vb3RoaW5nKSAqIHBmLnkgKyBzbW9vdGhpbmcgKiB0aGlzLnNtb290aE1vdXNlLnk7XG5cbiAgICAgICAgICAgIGFydHdvcmsuY29udGludWVTdHJva2UodGhpcy5zbW9vdGhNb3VzZS54LCB0aGlzLnNtb290aE1vdXNlLnksIHByZXNzdXJlKTtcblxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLm1vdXNlTW92ZShlKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBDUEZyZWVoYW5kTW9kZS5wcm90b3R5cGUubW91c2VVcCA9IGZ1bmN0aW9uKGUsIGJ1dHRvbiwgcHJlc3N1cmUpIHtcbiAgICAgICAgaWYgKHRoaXMuY2FwdHVyZSkge1xuICAgICAgICAgICAgaWYgKGJ1dHRvbiA9PSBCVVRUT05fUFJJTUFSWSkge1xuICAgICAgICAgICAgICAgIHRoaXMuY2FwdHVyZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIGFydHdvcmsuZW5kU3Ryb2tlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgICAgIFxuICAgIGZ1bmN0aW9uIENQTGluZU1vZGUoKSB7XG4gICAgICAgIHZhclxuICAgICAgICAgICAgZHJhZ0xpbmVGcm9tLCBkcmFnTGluZVRvLFxuICAgICAgICAgICAgTElORV9QUkVWSUVXX1dJRFRIID0gMTtcblxuICAgICAgICB0aGlzLm1vdXNlRG93biA9IGZ1bmN0aW9uKGUsIGJ1dHRvbiwgcHJlc3N1cmUpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5jYXB0dXJlICYmIGJ1dHRvbiA9PSBCVVRUT05fUFJJTUFSWSAmJiAhZS5hbHRLZXkgJiYgIWtleS5pc1ByZXNzZWQoXCJzcGFjZVwiKSAmJiBzaG91bGREcmF3VG9UaGlzTGF5ZXIoKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuY2FwdHVyZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgZHJhZ0xpbmVGcm9tID0gZHJhZ0xpbmVUbyA9IHt4OiBtb3VzZVggKyAwLjUsIHk6IG1vdXNlWSArIDAuNX07XG5cbiAgICAgICAgICAgICAgICB0aGlzLmVyYXNlQnJ1c2hQcmV2aWV3KCk7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLm1vdXNlRHJhZyA9IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmNhcHR1cmUpIHtcbiAgICAgICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICAvLyBUaGUgb2xkIGxpbmUgcG9zaXRpb24gdGhhdCB3ZSdsbCBpbnZhbGlkYXRlIGZvciByZWRyYXdcbiAgICAgICAgICAgICAgICAgICAgaW52YWxpZGF0ZVJlY3QgPSBuZXcgQ1BSZWN0KFxuICAgICAgICAgICAgICAgICAgICAgICAgTWF0aC5taW4oZHJhZ0xpbmVGcm9tLngsIGRyYWdMaW5lVG8ueCkgLSBMSU5FX1BSRVZJRVdfV0lEVEggLSAxLFxuICAgICAgICAgICAgICAgICAgICAgICAgTWF0aC5taW4oZHJhZ0xpbmVGcm9tLnksIGRyYWdMaW5lVG8ueSkgLSBMSU5FX1BSRVZJRVdfV0lEVEggLSAxLFxuICAgICAgICAgICAgICAgICAgICAgICAgTWF0aC5tYXgoZHJhZ0xpbmVGcm9tLngsIGRyYWdMaW5lVG8ueCkgKyBMSU5FX1BSRVZJRVdfV0lEVEggKyAxICsgMSxcbiAgICAgICAgICAgICAgICAgICAgICAgIE1hdGgubWF4KGRyYWdMaW5lRnJvbS55LCBkcmFnTGluZVRvLnkpICsgTElORV9QUkVWSUVXX1dJRFRIICsgMSArIDFcbiAgICAgICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgIGRyYWdMaW5lVG8gPSB7eDogbW91c2VYICsgMC41LCB5OiBtb3VzZVkgKyAwLjV9OyAvLyBUYXJnZXQgY2VudHJlIG9mIHBpeGVsXG5cbiAgICAgICAgICAgICAgICBpZiAoZS5zaGlmdEtleSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBTbmFwIHRvIG5lYXJlc3QgNDUgZGVncmVlc1xuICAgICAgICAgICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNuYXAgPSBNYXRoLlBJIC8gNCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGFuZ2xlID0gTWF0aC5yb3VuZChNYXRoLmF0YW4yKGRyYWdMaW5lVG8ueSAtIGRyYWdMaW5lRnJvbS55LCBkcmFnTGluZVRvLnggLSBkcmFnTGluZUZyb20ueCkgLyBzbmFwKTtcblxuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKGFuZ2xlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZHJhZ0xpbmVUby55ID0gZHJhZ0xpbmVGcm9tLnk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkcmFnTGluZVRvLnggPSBkcmFnTGluZUZyb20ueDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbmdsZSAqPSBzbmFwO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxlbmd0aCA9IE1hdGguc3FydCgoZHJhZ0xpbmVUby55IC0gZHJhZ0xpbmVGcm9tLnkpICogKGRyYWdMaW5lVG8ueSAtIGRyYWdMaW5lRnJvbS55KSArIChkcmFnTGluZVRvLnggLSBkcmFnTGluZUZyb20ueCkgKiAoZHJhZ0xpbmVUby54IC0gZHJhZ0xpbmVGcm9tLngpKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRyYWdMaW5lVG8ueCA9IGRyYWdMaW5lRnJvbS54ICsgbGVuZ3RoICogTWF0aC5jb3MoYW5nbGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRyYWdMaW5lVG8ueSA9IGRyYWdMaW5lRnJvbS55ICsgbGVuZ3RoICogTWF0aC5zaW4oYW5nbGUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gVGhlIG5ldyBsaW5lIHBvc2l0aW9uXG4gICAgICAgICAgICAgICAgaW52YWxpZGF0ZVJlY3QudW5pb24obmV3IENQUmVjdChcbiAgICAgICAgICAgICAgICAgICAgTWF0aC5taW4oZHJhZ0xpbmVGcm9tLngsIGRyYWdMaW5lVG8ueCkgLSBMSU5FX1BSRVZJRVdfV0lEVEggLSAxLFxuICAgICAgICAgICAgICAgICAgICBNYXRoLm1pbihkcmFnTGluZUZyb20ueSwgZHJhZ0xpbmVUby55KSAtIExJTkVfUFJFVklFV19XSURUSCAtIDEsXG4gICAgICAgICAgICAgICAgICAgIE1hdGgubWF4KGRyYWdMaW5lRnJvbS54LCBkcmFnTGluZVRvLngpICsgTElORV9QUkVWSUVXX1dJRFRIICsgMSArIDEsXG4gICAgICAgICAgICAgICAgICAgIE1hdGgubWF4KGRyYWdMaW5lRnJvbS55LCBkcmFnTGluZVRvLnkpICsgTElORV9QUkVWSUVXX1dJRFRIICsgMSArIDFcbiAgICAgICAgICAgICAgICApKTtcblxuICAgICAgICAgICAgICAgIHJlcGFpbnRSZWN0KGludmFsaWRhdGVSZWN0KTtcblxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLm1vdXNlTW92ZS5jYWxsKHRoaXMsIGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMubW91c2VVcCA9IGZ1bmN0aW9uKGUsIGJ1dHRvbiwgcHJlc3N1cmUpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmNhcHR1cmUgJiYgYnV0dG9uID09IEJVVFRPTl9QUklNQVJZKSB7XG4gICAgICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgICAgIGZyb20gPSBjb29yZFRvRG9jdW1lbnQoZHJhZ0xpbmVGcm9tKSxcbiAgICAgICAgICAgICAgICAgICAgdG8gPSBjb29yZFRvRG9jdW1lbnQoZHJhZ0xpbmVUbyk7XG5cbiAgICAgICAgICAgICAgICB0aGlzLmNhcHR1cmUgPSBmYWxzZTtcblxuICAgICAgICAgICAgICAgIHRoaXMuZHJhd0xpbmUoZnJvbSwgdG8pO1xuXG4gICAgICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgICAgIGludmFsaWRhdGVSZWN0ID0gbmV3IENQUmVjdChcbiAgICAgICAgICAgICAgICAgICAgICAgIE1hdGgubWluKGRyYWdMaW5lRnJvbS54LCBkcmFnTGluZVRvLngpIC0gTElORV9QUkVWSUVXX1dJRFRIIC0gMSxcbiAgICAgICAgICAgICAgICAgICAgICAgIE1hdGgubWluKGRyYWdMaW5lRnJvbS55LCBkcmFnTGluZVRvLnkpIC0gTElORV9QUkVWSUVXX1dJRFRIIC0gMSxcbiAgICAgICAgICAgICAgICAgICAgICAgIE1hdGgubWF4KGRyYWdMaW5lRnJvbS54LCBkcmFnTGluZVRvLngpICsgTElORV9QUkVWSUVXX1dJRFRIICsgMSArIDEsXG4gICAgICAgICAgICAgICAgICAgICAgICBNYXRoLm1heChkcmFnTGluZUZyb20ueSwgZHJhZ0xpbmVUby55KSArIExJTkVfUFJFVklFV19XSURUSCArIDEgKyAxXG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgcmVwYWludFJlY3QoaW52YWxpZGF0ZVJlY3QpO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5wYWludCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuY2FwdHVyZSkge1xuICAgICAgICAgICAgICAgIGNhbnZhc0NvbnRleHQubGluZVdpZHRoID0gTElORV9QUkVWSUVXX1dJRFRIO1xuICAgICAgICAgICAgICAgIGNhbnZhc0NvbnRleHQuYmVnaW5QYXRoKCk7XG4gICAgICAgICAgICAgICAgY2FudmFzQ29udGV4dC5tb3ZlVG8oZHJhZ0xpbmVGcm9tLngsIGRyYWdMaW5lRnJvbS55KTtcbiAgICAgICAgICAgICAgICBjYW52YXNDb250ZXh0LmxpbmVUbyhkcmFnTGluZVRvLngsIGRyYWdMaW5lVG8ueSk7XG4gICAgICAgICAgICAgICAgY2FudmFzQ29udGV4dC5zdHJva2UoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gRHJhdyB0aGUgcmVndWxhciBicnVzaCBwcmV2aWV3IGNpcmNsZVxuICAgICAgICAgICAgICAgIENQRHJhd2luZ01vZGUucHJvdG90eXBlLnBhaW50LmNhbGwodGhpcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgQ1BEcmF3aW5nTW9kZS5jYWxsKHRoaXMpO1xuICAgIH1cbiAgICBcbiAgICBDUExpbmVNb2RlLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoQ1BEcmF3aW5nTW9kZS5wcm90b3R5cGUpO1xuICAgIENQTGluZU1vZGUucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gQ1BMaW5lTW9kZTtcblxuICAgIENQTGluZU1vZGUucHJvdG90eXBlLmRyYXdMaW5lID0gZnVuY3Rpb24oZnJvbSwgdG8pIHtcbiAgICAgICAgYXJ0d29yay5iZWdpblN0cm9rZShmcm9tLngsIGZyb20ueSwgMSk7XG4gICAgICAgIGFydHdvcmsuY29udGludWVTdHJva2UodG8ueCwgdG8ueSwgMSk7XG4gICAgICAgIGFydHdvcmsuZW5kU3Ryb2tlKCk7XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIENQQmV6aWVyTW9kZSgpIHtcbiAgICAgICAgY29uc3RcbiAgICAgICAgICAgIEJFWklFUl9QT0lOVFMgPSA1MDAsXG4gICAgICAgICAgICBCRVpJRVJfUE9JTlRTX1BSRVZJRVcgPSAxMDA7XG5cbiAgICAgICAgdmFyXG4gICAgICAgICAgICBkcmFnQmV6aWVyTW9kZSA9IDAsIC8vIDAgSW5pdGlhbCBkcmFnLCAxIGZpcnN0IGNvbnRyb2wgcG9pbnQsIDIgc2Vjb25kIHBvaW50XG4gICAgICAgICAgICBkcmFnQmV6aWVyUDAsIGRyYWdCZXppZXJQMSwgZHJhZ0JlemllclAyLCBkcmFnQmV6aWVyUDM7XG5cbiAgICAgICAgdGhpcy5tb3VzZURvd24gPSBmdW5jdGlvbihlLCBidXR0b24sIHByZXNzdXJlKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuY2FwdHVyZSAmJiBidXR0b24gPT0gQlVUVE9OX1BSSU1BUlkgJiYgIWUuYWx0S2V5ICYmICFrZXkuaXNQcmVzc2VkKFwic3BhY2VcIikgJiYgc2hvdWxkRHJhd1RvVGhpc0xheWVyKCkpIHtcbiAgICAgICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICAgICAgcCA9IGNvb3JkVG9Eb2N1bWVudCh7eDogbW91c2VYLCB5OiBtb3VzZVl9KTtcblxuICAgICAgICAgICAgICAgIGRyYWdCZXppZXJNb2RlID0gMDtcbiAgICAgICAgICAgICAgICBkcmFnQmV6aWVyUDAgPSBkcmFnQmV6aWVyUDEgPSBkcmFnQmV6aWVyUDIgPSBkcmFnQmV6aWVyUDMgPSBwO1xuXG4gICAgICAgICAgICAgICAgdGhpcy5lcmFzZUJydXNoUHJldmlldygpO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gSGFuZGxlcyB0aGUgZmlyc3QgcGFydCBvZiB0aGUgQmV6aWVyIHdoZXJlIHRoZSB1c2VyIGRyYWdzIG91dCBhIHN0cmFpZ2h0IGxpbmVcbiAgICAgICAgdGhpcy5tb3VzZURyYWcgPSBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5jYXB0dXJlICYmIGRyYWdCZXppZXJNb2RlID09IDApIHtcbiAgICAgICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICAgICAgcCA9IGNvb3JkVG9Eb2N1bWVudCh7eDogbW91c2VYLCB5OiBtb3VzZVl9KTtcblxuICAgICAgICAgICAgICAgIGRyYWdCZXppZXJQMiA9IGRyYWdCZXppZXJQMyA9IHA7XG5cbiAgICAgICAgICAgICAgICB0aGF0LnJlcGFpbnRBbGwoKTtcblxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLm1vdXNlTW92ZS5jYWxsKHRoaXMsIGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMubW91c2VVcCA9IGZ1bmN0aW9uKGUsIGJ1dHRvbiwgcHJlc3N1cmUpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmNhcHR1cmUgJiYgYnV0dG9uID09IEJVVFRPTl9QUklNQVJZKSB7XG4gICAgICAgICAgICAgICAgaWYgKGRyYWdCZXppZXJNb2RlID09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgZHJhZ0Jlemllck1vZGUgPSAxO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZHJhZ0Jlemllck1vZGUgPT0gMSkge1xuICAgICAgICAgICAgICAgICAgICBkcmFnQmV6aWVyTW9kZSA9IDI7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChkcmFnQmV6aWVyTW9kZSA9PSAyKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2FwdHVyZSA9IGZhbHNlO1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciBcbiAgICAgICAgICAgICAgICAgICAgICAgIHAwID0gZHJhZ0JlemllclAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgcDEgPSBkcmFnQmV6aWVyUDEsXG4gICAgICAgICAgICAgICAgICAgICAgICBwMiA9IGRyYWdCZXppZXJQMixcbiAgICAgICAgICAgICAgICAgICAgICAgIHAzID0gZHJhZ0JlemllclAzLFxuXG4gICAgICAgICAgICAgICAgICAgICAgICBiZXppZXIgPSBuZXcgQ1BCZXppZXIoKTtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGJlemllci54MCA9IHAwLng7XG4gICAgICAgICAgICAgICAgICAgIGJlemllci55MCA9IHAwLnk7XG4gICAgICAgICAgICAgICAgICAgIGJlemllci54MSA9IHAxLng7XG4gICAgICAgICAgICAgICAgICAgIGJlemllci55MSA9IHAxLnk7XG4gICAgICAgICAgICAgICAgICAgIGJlemllci54MiA9IHAyLng7XG4gICAgICAgICAgICAgICAgICAgIGJlemllci55MiA9IHAyLnk7XG4gICAgICAgICAgICAgICAgICAgIGJlemllci54MyA9IHAzLng7XG4gICAgICAgICAgICAgICAgICAgIGJlemllci55MyA9IHAzLnk7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIFxuICAgICAgICAgICAgICAgICAgICAgICAgeCA9IG5ldyBBcnJheShCRVpJRVJfUE9JTlRTKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHkgPSBuZXcgQXJyYXkoQkVaSUVSX1BPSU5UUyk7XG5cbiAgICAgICAgICAgICAgICAgICAgYmV6aWVyLmNvbXB1dGUoeCwgeSwgQkVaSUVSX1BPSU5UUyk7XG5cbiAgICAgICAgICAgICAgICAgICAgYXJ0d29yay5iZWdpblN0cm9rZSh4WzBdLCB5WzBdLCAxKTtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBCRVpJRVJfUE9JTlRTOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFydHdvcmsuY29udGludWVTdHJva2UoeFtpXSwgeVtpXSwgMSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYXJ0d29yay5lbmRTdHJva2UoKTtcbiAgICAgICAgICAgICAgICAgICAgdGhhdC5yZXBhaW50QWxsKCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5tb3VzZU1vdmUgPSBmdW5jdGlvbihlLCBwcmVzc3VyZSkge1xuICAgICAgICAgICAgaWYgKHRoaXMuY2FwdHVyZSkge1xuICAgICAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgICAgICBwID0gY29vcmRUb0RvY3VtZW50KHt4OiBtb3VzZVgsIHk6IG1vdXNlWX0pO1xuXG4gICAgICAgICAgICAgICAgaWYgKGRyYWdCZXppZXJNb2RlID09IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgZHJhZ0JlemllclAxID0gcDtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGRyYWdCZXppZXJNb2RlID09IDIpIHtcbiAgICAgICAgICAgICAgICAgICAgZHJhZ0JlemllclAyID0gcDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhhdC5yZXBhaW50QWxsKCk7IC8vIEZJWE1FOiByZXBhaW50IG9ubHkgdGhlIGJlemllciByZWdpb25cblxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBEcmF3IHRoZSBub3JtYWwgYnJ1c2ggcHJldmlldyB3aGlsZSBub3QgaW4gdGhlIG1pZGRsZSBvZiBhIGJlemllciBvcGVyYXRpb25cbiAgICAgICAgICAgICAgICBDUERyYXdpbmdNb2RlLnByb3RvdHlwZS5tb3VzZU1vdmUuY2FsbCh0aGlzLCBlLCBwcmVzc3VyZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5wYWludCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuY2FwdHVyZSkge1xuICAgICAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgICAgICBiZXppZXIgPSBuZXcgQ1BCZXppZXIoKSxcblxuICAgICAgICAgICAgICAgICAgICBwMCA9IGNvb3JkVG9EaXNwbGF5KGRyYWdCZXppZXJQMCksXG4gICAgICAgICAgICAgICAgICAgIHAxID0gY29vcmRUb0Rpc3BsYXkoZHJhZ0JlemllclAxKSxcbiAgICAgICAgICAgICAgICAgICAgcDIgPSBjb29yZFRvRGlzcGxheShkcmFnQmV6aWVyUDIpLFxuICAgICAgICAgICAgICAgICAgICBwMyA9IGNvb3JkVG9EaXNwbGF5KGRyYWdCZXppZXJQMyk7XG5cbiAgICAgICAgICAgICAgICBiZXppZXIueDAgPSBwMC54O1xuICAgICAgICAgICAgICAgIGJlemllci55MCA9IHAwLnk7XG4gICAgICAgICAgICAgICAgYmV6aWVyLngxID0gcDEueDtcbiAgICAgICAgICAgICAgICBiZXppZXIueTEgPSBwMS55O1xuICAgICAgICAgICAgICAgIGJlemllci54MiA9IHAyLng7XG4gICAgICAgICAgICAgICAgYmV6aWVyLnkyID0gcDIueTtcbiAgICAgICAgICAgICAgICBiZXppZXIueDMgPSBwMy54O1xuICAgICAgICAgICAgICAgIGJlemllci55MyA9IHAzLnk7XG5cbiAgICAgICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICAgICAgeCA9IG5ldyBBcnJheShCRVpJRVJfUE9JTlRTX1BSRVZJRVcpLFxuICAgICAgICAgICAgICAgICAgICB5ID0gbmV3IEFycmF5KEJFWklFUl9QT0lOVFNfUFJFVklFVyk7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGJlemllci5jb21wdXRlKHgsIHksIEJFWklFUl9QT0lOVFNfUFJFVklFVyk7XG5cbiAgICAgICAgICAgICAgICBjYW52YXNDb250ZXh0LmJlZ2luUGF0aCgpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGNhbnZhc0NvbnRleHQubW92ZVRvKHhbMF0sIHlbMF0pO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgQkVaSUVSX1BPSU5UU19QUkVWSUVXOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgY2FudmFzQ29udGV4dC5saW5lVG8oeFtpXSwgeVtpXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGNhbnZhc0NvbnRleHQubW92ZVRvKH5+cDAueCwgfn5wMC55KTtcbiAgICAgICAgICAgICAgICBjYW52YXNDb250ZXh0LmxpbmVUbyh+fnAxLngsIH5+cDEueSk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgY2FudmFzQ29udGV4dC5tb3ZlVG8ofn5wMi54LCB+fnAyLnkpO1xuICAgICAgICAgICAgICAgIGNhbnZhc0NvbnRleHQubGluZVRvKH5+cDMueCwgfn5wMy55KTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBjYW52YXNDb250ZXh0LnN0cm9rZSgpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBQYWludCB0aGUgcmVndWxhciBicnVzaCBwcmV2aWV3XG4gICAgICAgICAgICAgICAgQ1BEcmF3aW5nTW9kZS5wcm90b3R5cGUucGFpbnQuY2FsbCh0aGlzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICBDUERyYXdpbmdNb2RlLmNhbGwodGhpcyk7XG4gICAgfVxuICAgIFxuICAgIENQQmV6aWVyTW9kZS5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKENQRHJhd2luZ01vZGUucHJvdG90eXBlKTtcbiAgICBDUEJlemllck1vZGUucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gQ1BCZXppZXJNb2RlO1xuXG4gICAgZnVuY3Rpb24gQ1BDb2xvclBpY2tlck1vZGUoKSB7XG4gICAgICAgIHZhciBcbiAgICAgICAgICAgIG1vdXNlQnV0dG9uO1xuXG4gICAgICAgIHRoaXMubW91c2VEb3duID0gZnVuY3Rpb24oZSwgYnV0dG9uLCBwcmVzc3VyZSkge1xuICAgICAgICAgICAgaWYgKHRoaXMuY2FwdHVyZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfSBlbHNlIGlmICgha2V5LmlzUHJlc3NlZChcInNwYWNlXCIpICYmIChidXR0b24gPT0gQlVUVE9OX1BSSU1BUlkgJiYgKCF0aGlzLnRyYW5zaWVudCB8fCBlLmFsdEtleSkgfHwgYnV0dG9uID09IEJVVFRPTl9TRUNPTkRBUlkpKSB7XG4gICAgICAgICAgICAgICAgbW91c2VCdXR0b24gPSBidXR0b247XG4gICAgICAgICAgICAgICAgdGhpcy5jYXB0dXJlID0gdHJ1ZTtcblxuICAgICAgICAgICAgICAgIHNldEN1cnNvcihDVVJTT1JfQ1JPU1NIQUlSKTtcblxuICAgICAgICAgICAgICAgIHRoaXMubW91c2VEcmFnKGUpO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMudHJhbnNpZW50KSB7XG4gICAgICAgICAgICAgICAgLy8gSWYgd2UncmUgbm90IHNhbXBsaW5nIGFuZCB3ZSBnZXQgYSBidXR0b24gbm90IGludGVuZGVkIGZvciB1cywgd2UgcHJvYmFibHkgc2hvdWxkbid0IGJlIG9uIHRoZSBzdGFja1xuICAgICAgICAgICAgICAgIG1vZGVTdGFjay5wb3AoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLm1vdXNlRHJhZyA9IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmNhcHR1cmUpIHtcbiAgICAgICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICAgICAgcGYgPSBjb29yZFRvRG9jdW1lbnQoe3g6IG1vdXNlWCwgeTogbW91c2VZfSk7XG5cbiAgICAgICAgICAgICAgICBpZiAoYXJ0d29yay5pc1BvaW50V2l0aGluKHBmLngsIHBmLnkpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIuc2V0Q3VyQ29sb3JSZ2IoYXJ0d29yay5jb2xvclBpY2tlcihwZi54LCBwZi55KSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5tb3VzZVVwID0gZnVuY3Rpb24oZSwgYnV0dG9uLCBwcmVzc3VyZSkge1xuICAgICAgICAgICAgaWYgKHRoaXMuY2FwdHVyZSAmJiBidXR0b24gPT0gbW91c2VCdXR0b24pIHtcbiAgICAgICAgICAgICAgICBtb3VzZUJ1dHRvbiA9IC0xO1xuICAgICAgICAgICAgICAgIHRoaXMuY2FwdHVyZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHNldEN1cnNvcihDVVJTT1JfREVGQVVMVCk7XG5cbiAgICAgICAgICAgICAgICBpZiAodGhpcy50cmFuc2llbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgbW9kZVN0YWNrLnBvcCgpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMuZW50ZXIgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIENQTW9kZS5wcm90b3R5cGUuZW50ZXIuY2FsbCh0aGlzKTtcbiAgICAgICAgICAgIG1vdXNlQnV0dG9uID0gLTE7XG4gICAgICAgIH07XG4gICAgfVxuICAgIFxuICAgIENQQ29sb3JQaWNrZXJNb2RlLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoQ1BNb2RlLnByb3RvdHlwZSk7XG4gICAgQ1BDb2xvclBpY2tlck1vZGUucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gQ1BDb2xvclBpY2tlck1vZGU7XG5cbiAgICBmdW5jdGlvbiBDUFBhbk1vZGUoKSB7XG4gICAgICAgIHZhclxuICAgICAgICAgICAgcGFubmluZ1gsIHBhbm5pbmdZLFxuICAgICAgICAgICAgcGFubmluZ09mZnNldCxcbiAgICAgICAgICAgIHBhbm5pbmdCdXR0b247XG5cbiAgICAgICAgdGhpcy5rZXlEb3duID0gZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgaWYgKGUua2V5Q29kZSA9PSAzMiAvKiBTcGFjZSAqLykge1xuICAgICAgICAgICAgICAgIC8vIElmIHdlJ3JlIG5vdCBhbHJlYWR5IHBhbm5pbmcsIHRoZW4gYWR2ZXJ0aXNlIHRoYXQgYSBsZWZ0LWNsaWNrIHdvdWxkIHBhblxuICAgICAgICAgICAgICAgIGlmICghdGhpcy5jYXB0dXJlKSB7XG4gICAgICAgICAgICAgICAgICAgIHNldEN1cnNvcihDVVJTT1JfUEFOTkFCTEUpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMua2V5VXAgPSBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICBpZiAodGhpcy50cmFuc2llbnQgJiYgcGFubmluZ0J1dHRvbiAhPSBCVVRUT05fV0hFRUwgJiYgZS5rZXlDb2RlID09IDMyIC8qIFNwYWNlICovKSB7XG4gICAgICAgICAgICAgICAgc2V0Q3Vyc29yKENVUlNPUl9ERUZBVUxUKTtcblxuICAgICAgICAgICAgICAgIG1vZGVTdGFjay5wb3AoKTsgLy8geWllbGQgY29udHJvbCB0byB0aGUgZGVmYXVsdCBtb2RlXG5cbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLm1vdXNlRG93biA9IGZ1bmN0aW9uKGUsIGJ1dHRvbiwgcHJlc3N1cmUpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmNhcHR1cmUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoYnV0dG9uID09IEJVVFRPTl9XSEVFTCB8fCBrZXkuaXNQcmVzc2VkKFwic3BhY2VcIikgJiYgYnV0dG9uID09IEJVVFRPTl9QUklNQVJZKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jYXB0dXJlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBwYW5uaW5nQnV0dG9uID0gYnV0dG9uO1xuICAgICAgICAgICAgICAgIHBhbm5pbmdYID0gZS5wYWdlWDtcbiAgICAgICAgICAgICAgICBwYW5uaW5nWSA9IGUucGFnZVk7XG4gICAgICAgICAgICAgICAgcGFubmluZ09mZnNldCA9IHRoYXQuZ2V0T2Zmc2V0KCk7XG4gICAgICAgICAgICAgICAgc2V0Q3Vyc29yKENVUlNPUl9QQU5OSU5HKTtcblxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnRyYW5zaWVudCkge1xuICAgICAgICAgICAgICAgIC8vIElmIHdlJ3JlIG5vdCBwYW5uaW5nIGFuZCB3ZSBnZXQgYSBidXR0b24gbm90IGludGVuZGVkIGZvciB1cywgd2UgcHJvYmFibHkgc2hvdWxkbid0IGJlIG9uIHRoZSBzdGFja1xuICAgICAgICAgICAgICAgIG1vZGVTdGFjay5wb3AoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLm1vdXNlRHJhZyA9IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmNhcHR1cmUpIHtcbiAgICAgICAgICAgICAgICB0aGF0LnNldE9mZnNldChwYW5uaW5nT2Zmc2V0LnggKyBlLnBhZ2VYIC0gcGFubmluZ1gsIHBhbm5pbmdPZmZzZXQueSArIGUucGFnZVkgLSBwYW5uaW5nWSk7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLm1vdXNlVXAgPSBmdW5jdGlvbihlLCBidXR0b24sIHByZXNzdXJlKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5jYXB0dXJlICYmIGJ1dHRvbiA9PSBwYW5uaW5nQnV0dG9uKSB7XG4gICAgICAgICAgICAgICAgcGFubmluZ0J1dHRvbiA9IC0xO1xuICAgICAgICAgICAgICAgIHRoaXMuY2FwdHVyZSA9IGZhbHNlO1xuXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMudHJhbnNpZW50ICYmICFrZXkuaXNQcmVzc2VkKFwic3BhY2VcIikpIHtcbiAgICAgICAgICAgICAgICAgICAgc2V0Q3Vyc29yKENVUlNPUl9ERUZBVUxUKTtcblxuICAgICAgICAgICAgICAgICAgICBtb2RlU3RhY2sucG9wKCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5lbnRlciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgc2V0Q3Vyc29yKENVUlNPUl9QQU5OQUJMRSk7XG4gICAgICAgIH07XG4gICAgfVxuICAgIFxuICAgIENQUGFuTW9kZS5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKENQTW9kZS5wcm90b3R5cGUpO1xuICAgIENQUGFuTW9kZS5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBDUEZsb29kRmlsbE1vZGU7XG5cbiAgICBmdW5jdGlvbiBDUEZsb29kRmlsbE1vZGUoKSB7XG4gICAgfVxuICAgIFxuICAgIENQRmxvb2RGaWxsTW9kZS5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKENQTW9kZS5wcm90b3R5cGUpO1xuICAgIENQRmxvb2RGaWxsTW9kZS5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBDUEZsb29kRmlsbE1vZGU7XG5cbiAgICBDUEZsb29kRmlsbE1vZGUucHJvdG90eXBlLm1vdXNlRG93biA9IGZ1bmN0aW9uKGUsIGJ1dHRvbiwgcHJlc3N1cmUpIHtcbiAgICAgICAgaWYgKGJ1dHRvbiA9PSBCVVRUT05fUFJJTUFSWSAmJiAhZS5hbHRLZXkgJiYgIWtleS5pc1ByZXNzZWQoXCJzcGFjZVwiKSAmJiBzaG91bGREcmF3VG9UaGlzTGF5ZXIoKSkge1xuICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgcGYgPSBjb29yZFRvRG9jdW1lbnQoe3g6IG1vdXNlWCwgeTogbW91c2VZfSk7XG5cbiAgICAgICAgICAgIGlmIChhcnR3b3JrLmlzUG9pbnRXaXRoaW4ocGYueCwgcGYueSkpIHtcbiAgICAgICAgICAgICAgICBhcnR3b3JrLmZsb29kRmlsbChwZi54LCBwZi55KTtcbiAgICAgICAgICAgICAgICB0aGF0LnJlcGFpbnRBbGwoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gQ1BSZWN0U2VsZWN0aW9uTW9kZSgpIHtcbiAgICAgICAgdmFyXG4gICAgICAgICAgICBmaXJzdENsaWNrLFxuICAgICAgICAgICAgY3VyUmVjdCA9IG5ldyBDUFJlY3QoMCwgMCwgMCwgMCksXG4gICAgICAgICAgICBzZWxlY3RpbmdCdXR0b24gPSAtMTtcblxuICAgICAgICB0aGlzLm1vdXNlRG93biA9IGZ1bmN0aW9uIChlLCBidXR0b24sIHByZXNzdXJlKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuY2FwdHVyZSAmJiBidXR0b24gPT0gQlVUVE9OX1BSSU1BUlkgJiYgIWUuYWx0S2V5ICYmICFrZXkuaXNQcmVzc2VkKFwic3BhY2VcIikpIHtcbiAgICAgICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICAgICAgcCA9IGNvb3JkVG9Eb2N1bWVudEludCh7eDogbW91c2VYLCB5OiBtb3VzZVl9KTtcblxuICAgICAgICAgICAgICAgIHNlbGVjdGluZ0J1dHRvbiA9IGJ1dHRvbjtcblxuICAgICAgICAgICAgICAgIGN1clJlY3QubWFrZUVtcHR5KCk7XG4gICAgICAgICAgICAgICAgZmlyc3RDbGljayA9IHA7XG5cbiAgICAgICAgICAgICAgICB0aGF0LnJlcGFpbnRBbGwoKTtcblxuICAgICAgICAgICAgICAgIHRoaXMuY2FwdHVyZSA9IHRydWU7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLm1vdXNlRHJhZyA9IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5jYXB0dXJlKVxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcblxuICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgcCA9IGNvb3JkVG9Eb2N1bWVudEludCh7eDogbW91c2VYLCB5OiBtb3VzZVl9KSxcbiAgICAgICAgICAgICAgICBzcXVhcmUgPSBlLnNoaWZ0S2V5LFxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHNxdWFyZURpc3QgPSB+fk1hdGgubWF4KE1hdGguYWJzKHAueCAtIGZpcnN0Q2xpY2sueCksIE1hdGguYWJzKHAueSAtIGZpcnN0Q2xpY2sueSkpO1xuXG4gICAgICAgICAgICBpZiAocC54ID49IGZpcnN0Q2xpY2sueCkge1xuICAgICAgICAgICAgICAgIGN1clJlY3QubGVmdCA9IGZpcnN0Q2xpY2sueDtcbiAgICAgICAgICAgICAgICBjdXJSZWN0LnJpZ2h0ID0gKHNxdWFyZSA/IGZpcnN0Q2xpY2sueCArIHNxdWFyZURpc3QgOiBwLngpICsgMTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY3VyUmVjdC5sZWZ0ID0gc3F1YXJlID8gZmlyc3RDbGljay54IC0gc3F1YXJlRGlzdCA6IHAueDtcbiAgICAgICAgICAgICAgICBjdXJSZWN0LnJpZ2h0ID0gZmlyc3RDbGljay54ICsgMTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHAueSA+PSBmaXJzdENsaWNrLnkpIHtcbiAgICAgICAgICAgICAgICBjdXJSZWN0LnRvcCA9IGZpcnN0Q2xpY2sueTtcbiAgICAgICAgICAgICAgICBjdXJSZWN0LmJvdHRvbSA9IChzcXVhcmUgPyBmaXJzdENsaWNrLnkgKyBzcXVhcmVEaXN0IDogcC55KSArIDE7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGN1clJlY3QudG9wID0gc3F1YXJlID8gZmlyc3RDbGljay55IC0gc3F1YXJlRGlzdCA6IHAueTtcbiAgICAgICAgICAgICAgICBjdXJSZWN0LmJvdHRvbSA9IGZpcnN0Q2xpY2sueSArIDE7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoYXQucmVwYWludEFsbCgpO1xuXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLm1vdXNlVXAgPSBmdW5jdGlvbiAoZSwgYnV0dG9uLCBwcmVzc3VyZSkge1xuICAgICAgICAgICAgaWYgKHRoaXMuY2FwdHVyZSAmJiBidXR0b24gPT0gc2VsZWN0aW5nQnV0dG9uKSB7XG4gICAgICAgICAgICAgICAgYXJ0d29yay5yZWN0YW5nbGVTZWxlY3Rpb24oY3VyUmVjdCk7XG4gICAgICAgICAgICAgICAgY3VyUmVjdC5tYWtlRW1wdHkoKTtcblxuICAgICAgICAgICAgICAgIHRoYXQucmVwYWludEFsbCgpO1xuXG4gICAgICAgICAgICAgICAgdGhpcy5jYXB0dXJlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgc2VsZWN0aW5nQnV0dG9uID0gLTE7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLnBhaW50ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpZiAoIWN1clJlY3QuaXNFbXB0eSgpKSB7XG4gICAgICAgICAgICAgICAgY2FudmFzQ29udGV4dC5saW5lV2lkdGggPSAxO1xuICAgICAgICAgICAgICAgIHBsb3RTZWxlY3Rpb25SZWN0KGNhbnZhc0NvbnRleHQsIGN1clJlY3QpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH07XG5cbiAgICBDUFJlY3RTZWxlY3Rpb25Nb2RlLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoQ1BNb2RlLnByb3RvdHlwZSk7XG4gICAgQ1BSZWN0U2VsZWN0aW9uTW9kZS5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBDUFJlY3RTZWxlY3Rpb25Nb2RlO1xuXG4gICAgZnVuY3Rpb24gQ1BNb3ZlVG9vbE1vZGUoKSB7XG4gICAgICAgIHZhciBcbiAgICAgICAgICAgIGxhc3RQb2ludCxcbiAgICAgICAgICAgIGNvcHlNb2RlLFxuICAgICAgICAgICAgZmlyc3RNb3ZlID0gZmFsc2U7XG5cbiAgICAgICAgdGhpcy5tb3VzZURvd24gPSBmdW5jdGlvbihlLCBidXR0b24sIHByZXNzdXJlKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuY2FwdHVyZSAmJiBidXR0b24gPT0gQlVUVE9OX1BSSU1BUlkgJiYgIWUuYWx0S2V5ICYmICFrZXkuaXNQcmVzc2VkKFwic3BhY2VcIikpIHtcbiAgICAgICAgICAgICAgICBsYXN0UG9pbnQgPSBjb29yZFRvRG9jdW1lbnQoe3g6IG1vdXNlWCwgeTogbW91c2VZfSk7XG5cbiAgICAgICAgICAgICAgICBjb3B5TW9kZSA9IGUuYWx0S2V5O1xuICAgICAgICAgICAgICAgIGZpcnN0TW92ZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgdGhpcy5jYXB0dXJlID0gdHJ1ZTtcblxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMubW91c2VEcmFnID0gdGhyb3R0bGUoMjUsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmNhcHR1cmUpIHtcbiAgICAgICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICAgICAgcCA9IGNvb3JkVG9Eb2N1bWVudCh7eDogbW91c2VYLCB5OiBtb3VzZVl9KSxcblxuICAgICAgICAgICAgICAgICAgICBtb3ZlRmxvYXQgPSB7eDogcC54IC0gbGFzdFBvaW50LngsIHk6IHAueSAtIGxhc3RQb2ludC55fSxcbiAgICAgICAgICAgICAgICAgICAgbW92ZUludCA9IHt4OiB+fm1vdmVGbG9hdC54LCB5OiB+fm1vdmVGbG9hdC55fTsgLy8gUm91bmQgdG93YXJkcyB6ZXJvXG5cbiAgICAgICAgICAgICAgICBhcnR3b3JrLm1vdmUobW92ZUludC54LCBtb3ZlSW50LnksIGNvcHlNb2RlICYmIGZpcnN0TW92ZSk7XG5cbiAgICAgICAgICAgICAgICBmaXJzdE1vdmUgPSBmYWxzZTtcblxuICAgICAgICAgICAgICAgIC8qXG4gICAgICAgICAgICAgICAgICogTnVkZ2UgdGhlIGxhc3QgcG9pbnQgYnkgdGhlIHJlbWFpbmRlciB3ZSB3ZXJlbid0IGFibGUgdG8gbW92ZSB0aGlzIGl0ZXJhdGlvbiAoZHVlIHRvIG1vdmUoKSBvbmx5XG4gICAgICAgICAgICAgICAgICogYWNjZXB0aW5nIGludGVnZXIgb2Zmc2V0cykuIFRoaXMnbGwgY2FycnkgdGhhdCBmcmFjdGlvbmFsIHBhcnQgb2YgdGhlIG1vdmUgb3ZlciBmb3IgbmV4dCBpdGVyYXRpb24uXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgbGFzdFBvaW50LnggPSBwLnggLSAobW92ZUZsb2F0LnggLSBtb3ZlSW50LngpO1xuICAgICAgICAgICAgICAgIGxhc3RQb2ludC55ID0gcC55IC0gKG1vdmVGbG9hdC55IC0gbW92ZUludC55KTtcblxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLm1vdXNlVXAgPSBmdW5jdGlvbihlLCBidXR0b24sIHByZXNzdXJlKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5jYXB0dXJlICYmIGJ1dHRvbiA9PSBCVVRUT05fUFJJTUFSWSkge1xuICAgICAgICAgICAgICAgIHRoaXMuY2FwdHVyZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnRyYW5zaWVudCkge1xuICAgICAgICAgICAgICAgICAgICBtb2RlU3RhY2sucG9wKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH1cblxuICAgIENQTW92ZVRvb2xNb2RlLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoQ1BNb2RlLnByb3RvdHlwZSk7XG4gICAgQ1BNb3ZlVG9vbE1vZGUucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gQ1BNb3ZlVG9vbE1vZGU7XG5cbiAgICBDUE1vdmVUb29sTW9kZS5wcm90b3R5cGUubW91c2VNb3ZlID0gZnVuY3Rpb24oZSkge1xuICAgICAgICBpZiAoIWtleS5pc1ByZXNzZWQoXCJzcGFjZVwiKSAmJiAhZS5hbHRLZXkpIHtcbiAgICAgICAgICAgIHNldEN1cnNvcihDVVJTT1JfTU9WRSk7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBDUE1vdmVUb29sTW9kZS5wcm90b3R5cGUuZW50ZXIgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgc2V0Q3Vyc29yKENVUlNPUl9NT1ZFKTtcbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gQ1BUcmFuc2Zvcm1Nb2RlKCkge1xuICAgICAgICBjb25zdFxuICAgICAgICAgICAgSEFORExFX1JBRElVUyA9IDMsXG5cbiAgICAgICAgICAgIERSQUdfTk9ORSA9IC0xLFxuICAgICAgICAgICAgRFJBR19ST1RBVEUgPSAtMixcbiAgICAgICAgICAgIERSQUdfTU9WRSA9IC0zLFxuICAgICAgICAgICAgRFJBR19OV19DT1JORVIgPSAwLFxuICAgICAgICAgICAgRFJBR19OX0VER0UgPSAxLFxuICAgICAgICAgICAgRFJBR19ORV9DT1JORVIgPSAyLFxuICAgICAgICAgICAgRFJBR19FX0VER0UgPSAzLFxuICAgICAgICAgICAgRFJBR19TRV9DT1JORVIgPSA0LFxuICAgICAgICAgICAgRFJBR19TX0VER0UgPSA1LFxuICAgICAgICAgICAgRFJBR19TV19DT1JORVIgPSA2LFxuICAgICAgICAgICAgRFJBR19XX0VER0UgPSA3O1xuXG4gICAgICAgIHZhclxuICAgICAgICAgICAgLyoqIEB0eXBlIHtDUFRyYW5zZm9ybX0gVGhlIGN1cnJlbnQgdHJhbnNmb3JtYXRpb24gKi9cbiAgICAgICAgICAgIGFmZmluZSxcbiAgICAgICAgICAgIC8qKiBAdHlwZSB7Q1BSZWN0fSBUaGUgaW5pdGlhbCBkb2N1bWVudCByZWN0YW5nbGUgdG8gdHJhbnNmb3JtICovXG4gICAgICAgICAgICBzcmNSZWN0LFxuICAgICAgICAgICAgLyoqIEB0eXBlIHtDUFBvbHlnb259IFRoZSBpbml0aWFsIHRyYW5zZm9ybSByZWN0ICovXG4gICAgICAgICAgICBvcmlnQ29ybmVyUG9pbnRzLFxuICAgICAgICAgICAgLyoqIEB0eXBlIHtDUFBvbHlnb259IFRoZSBjdXJyZW50IGNvcm5lcnMgb2YgdGhlIHRyYW5zZm9ybSByZWN0IGluIGRvY3VtZW50IHNwYWNlICovXG4gICAgICAgICAgICBjb3JuZXJQb2ludHMsXG5cbiAgICAgICAgICAgIGRyYWdnaW5nTW9kZSA9IERSQUdfTk9ORSxcblxuICAgICAgICAgICAgbGFzdERyYWdQb2ludERpc3BsYXksXG4gICAgICAgICAgICBsYXN0RHJhZ1BvaW50RG9jLFxuXG4gICAgICAgICAgICAvLyBLZWVwIHRyYWNrIG9mIGhvdyBtYW55IGRlZ3JlZXMgd2UndmUgcm90YXRlZCBzbyBmYXIgZHVyaW5nIHRoaXMgdHJhbnNmb3JtYXRpb25cbiAgICAgICAgICAgIHJvdGF0aW9uQWNjdW11bGF0b3I7XG5cblx0XHQvKipcbiAgICAgICAgICogR2V0IHRoZSBwb2x5Z29uIHRoYXQgcmVwcmVzZW50cyB0aGUgY3VycmVudCB0cmFuc2Zvcm0gcmVzdWx0IGFyZWEgaW4gZGlzcGxheSBjb29yZGluYXRlcy5cbiAgICAgICAgICpcbiAgICAgICAgICogQHJldHVybnMge0NQUG9seWdvbn1cbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIGNvcm5lcnNUb0Rpc3BsYXlQb2x5Z29uKCkge1xuICAgICAgICAgICAgcmV0dXJuIGNvcm5lclBvaW50cy5nZXRUcmFuc2Zvcm1lZCh0cmFuc2Zvcm0pO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gYXZlcmFnZVBvaW50cyhwMSwgcDIpIHtcbiAgICAgICAgICAgIHJldHVybiB7eDogKHAxLnggKyBwMi54KSAvIDIsIHk6IChwMS55ICsgcDIueSkgLyAyfTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHJvdW5kUG9pbnQocCkge1xuICAgICAgICAgICAgcmV0dXJuIHt4IDogTWF0aC5yb3VuZChwLngpLCB5OiBNYXRoLnJvdW5kKHAueSl9O1xuICAgICAgICB9XG5cblx0XHQvKipcbiAgICAgICAgICogRGVjaWRlIHdoaWNoIGRyYWcgYWN0aW9uIHNob3VsZCBiZSB0YWtlbiBpZiBvdXIgbW91c2Ugd2FzIHByZXNzZWQgaW4gdGhlIGdpdmVuIHBvc2l0aW9uLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0ge0NQUG9seWdvbn0gY29ybmVycyAtIFRoZSBjb3JuZXJzIG9mIHRoZSBjdXJyZW50IHRyYW5zZm9ybSBhcmVhXG4gICAgICAgICAqIEBwYXJhbSBtb3VzZSAtIFRoZSBtb3VzZSBwb2ludFxuICAgICAgICAgKiBAcmV0dXJucyB7bnVtYmVyfSBBIERSQUdfKiBjb25zdGFudFxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gY2xhc3NpZnlEcmFnQWN0aW9uKGNvcm5lcnMsIG1vdXNlKSB7XG4gICAgICAgICAgICBjb25zdFxuICAgICAgICAgICAgICAgIEhBTkRMRV9DQVBUVVJFX1JBRElVUyA9IDcsXG4gICAgICAgICAgICAgICAgSEFORExFX0NBUFRVUkVfUkFESVVTX1NRUiA9IEhBTkRMRV9DQVBUVVJFX1JBRElVUyAqIEhBTkRMRV9DQVBUVVJFX1JBRElVUyxcbiAgICAgICAgICAgICAgICBFREdFX0NBUFRVUkVfUkFESVVTID0gSEFORExFX0NBUFRVUkVfUkFESVVTLFxuICAgICAgICAgICAgICAgIEVER0VfQ0FQVFVSRV9SQURJVVNfU1FSID0gRURHRV9DQVBUVVJFX1JBRElVUyAqIEVER0VfQ0FQVFVSRV9SQURJVVM7XG5cbiAgICAgICAgICAgIC8vIEFyZSB3ZSBkcmFnZ2luZyBhIGNvcm5lcj9cbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY29ybmVycy5wb2ludHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoKG1vdXNlLnggLSBjb3JuZXJzLnBvaW50c1tpXS54KSAqIChtb3VzZS54IC0gY29ybmVycy5wb2ludHNbaV0ueCkgKyAobW91c2UueSAtIGNvcm5lcnMucG9pbnRzW2ldLnkpICogKG1vdXNlLnkgLSBjb3JuZXJzLnBvaW50c1tpXS55KSA8PSBIQU5ETEVfQ0FQVFVSRV9SQURJVVNfU1FSKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBpICogMjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIEFyZSB3ZSBkcmFnZ2luZyBhbiBlZGdlP1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjb3JuZXJzLnBvaW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgICAgICBlZGdlUDEgPSBjb3JuZXJzLnBvaW50c1tpXSxcbiAgICAgICAgICAgICAgICAgICAgZWRnZVAyID0gY29ybmVycy5wb2ludHNbKGkgKyAxKSAlIGNvcm5lcnMucG9pbnRzLmxlbmd0aF0sXG5cbiAgICAgICAgICAgICAgICAgICAgdkVkZ2UgPSBuZXcgQ1BWZWN0b3IoZWRnZVAyLnggLSBlZGdlUDEueCwgZWRnZVAyLnkgLSBlZGdlUDEueSksXG4gICAgICAgICAgICAgICAgICAgIHZNb3VzZSA9IG5ldyBDUFZlY3Rvcihtb3VzZS54IC0gZWRnZVAxLngsIG1vdXNlLnkgLSBlZGdlUDEueSksXG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICB2RWRnZUxlbiA9IHZFZGdlLmdldExlbmd0aCgpLFxuXG4gICAgICAgICAgICAgICAgICAgIHZFZGdlU2NhbGVkID0gdkVkZ2UuZ2V0U2NhbGVkKDEgLyB2RWRnZUxlbiksXG4gICAgICAgICAgICAgICAgICAgIHZNb3VzZVNjYWxlZCA9IHZNb3VzZS5nZXRTY2FsZWQoMSAvIHZFZGdlTGVuKSxcblxuICAgICAgICAgICAgICAgICAgICBtb3VzZVByb3BPbkxpbmUgPSB2RWRnZVNjYWxlZC5nZXREb3RQcm9kdWN0KHZNb3VzZVNjYWxlZCk7XG5cbiAgICAgICAgICAgICAgICAvLyBJZiB3ZSdyZSB3aXRoaW4gdGhlIGVuZHMgb2YgdGhlIGxpbmUgKHBlcnBlbmRpY3VsYXJseSBzcGVha2luZylcbiAgICAgICAgICAgICAgICBpZiAobW91c2VQcm9wT25MaW5lID49IDAuMCAmJiBtb3VzZVByb3BPbkxpbmUgPD0gMS4wKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFRoaXMgZ2l2ZXMgdXMgdGhlIHBvaW50IG9uIHRoZSBsaW5lIGNsb3Nlc3QgdG8gdGhlIG1vdXNlXG4gICAgICAgICAgICAgICAgICAgIHZFZGdlLnNjYWxlKG1vdXNlUHJvcE9uTGluZSk7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAoKHZFZGdlLnggLSB2TW91c2UueCkgKiAodkVkZ2UueCAtIHZNb3VzZS54KSArICh2RWRnZS55IC0gdk1vdXNlLnkpICogKHZFZGdlLnkgLSB2TW91c2UueSkgPD0gRURHRV9DQVBUVVJFX1JBRElVU19TUVIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpICogMiArIDE7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChjb3JuZXJzLmNvbnRhaW5zUG9pbnQobW91c2UpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIERSQUdfTU9WRTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIERSQUdfUk9UQVRFO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gc2V0Q3Vyc29yRm9ySGFuZGxlcygpIHtcbiAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgIGNvcm5lcnMgPSBjb3JuZXJzVG9EaXNwbGF5UG9seWdvbigpLFxuICAgICAgICAgICAgICAgIG1vdXNlID0ge3g6IG1vdXNlWCwgeTogbW91c2VZfSxcbiAgICAgICAgICAgICAgICBkcmFnQWN0aW9uID0gY2xhc3NpZnlEcmFnQWN0aW9uKGNvcm5lcnMsIG1vdXNlKTtcblxuICAgICAgICAgICAgc3dpdGNoIChkcmFnQWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgY2FzZSBEUkFHX05XX0NPUk5FUjpcbiAgICAgICAgICAgICAgICBjYXNlIERSQUdfTkVfQ09STkVSOlxuICAgICAgICAgICAgICAgIGNhc2UgRFJBR19TRV9DT1JORVI6XG4gICAgICAgICAgICAgICAgY2FzZSBEUkFHX1NXX0NPUk5FUjpcbiAgICAgICAgICAgICAgICAgICAgLy8gQ2hvb3NlIGEgY3Vyc29yIGZvciBhIDQ1LWRlZ3JlZSByZXNpemUgZnJvbSB0aGlzIGNvcm5lclxuICAgICAgICAgICAgICAgICAgICBsZXRcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvcm5lckluZGV4ID0gfn4oZHJhZ0FjdGlvbiAvIDIpLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29ybmVyQmVmb3JlID0gY29ybmVycy5wb2ludHNbKGNvcm5lckluZGV4ICsgMykgJSA0XSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvcm5lciA9IGNvcm5lcnMucG9pbnRzW2Nvcm5lckluZGV4XSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvcm5lckFmdGVyID0gY29ybmVycy5wb2ludHNbKGNvcm5lckluZGV4ICsgMSkgJSA0XSxcblxuICAgICAgICAgICAgICAgICAgICAvLyBHZXQgYSB2ZWN0b3Igd2hpY2ggcG9pbnRzIDQ1IGRlZ3JlZXMgdG93YXJkIHRoZSBjZW50ZXIgb2YgdGhlIGJveCwgdGhpcydsbCBkbyBmb3IgY3Vyc29yIGRpcmVjdGlvblxuICAgICAgICAgICAgICAgICAgICAgICAgdjQ1ID0gQ1BWZWN0b3Iuc3VidHJhY3RQb2ludHMoY29ybmVyQmVmb3JlLCBjb3JuZXIpLm5vcm1hbGl6ZSgpLmFkZChDUFZlY3Rvci5zdWJ0cmFjdFBvaW50cyhjb3JuZXJBZnRlciwgY29ybmVyKS5ub3JtYWxpemUoKSk7XG5cbiAgICAgICAgICAgICAgICAgICAgc2V0UmVzaXplQ3Vyc29yRm9yVmVjdG9yKHY0NSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgRFJBR19OX0VER0U6XG4gICAgICAgICAgICAgICAgY2FzZSBEUkFHX0VfRURHRTpcbiAgICAgICAgICAgICAgICBjYXNlIERSQUdfU19FREdFOlxuICAgICAgICAgICAgICAgIGNhc2UgRFJBR19XX0VER0U6XG4gICAgICAgICAgICAgICAgICAgIC8vIFJlc2l6aW5nIGZyb20gaGVyZSB3aWxsIG1vdmUgZWRnZSBwZXJwZW5kaWN1bGFybHlcbiAgICAgICAgICAgICAgICAgICAgbGV0XG4gICAgICAgICAgICAgICAgICAgICAgICBjb3JuZXIxID0gY29ybmVycy5wb2ludHNbfn4oZHJhZ0FjdGlvbiAvIDIpXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvcm5lcjIgPSBjb3JuZXJzLnBvaW50c1sofn4oZHJhZ0FjdGlvbiAvIDIpICsgMSkgJSA0XSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZQZXJwID0gQ1BWZWN0b3Iuc3VidHJhY3RQb2ludHMoY29ybmVyMiwgY29ybmVyMSkuZ2V0UGVycGVuZGljdWxhcigpO1xuXG4gICAgICAgICAgICAgICAgICAgIHNldFJlc2l6ZUN1cnNvckZvclZlY3Rvcih2UGVycCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgRFJBR19NT1ZFOlxuICAgICAgICAgICAgICAgICAgICBzZXRDdXJzb3IoQ1VSU09SX01PVkUpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIERSQUdfUk9UQVRFOlxuICAgICAgICAgICAgICAgICAgICBzZXRDdXJzb3IoQ1VSU09SX0RFRkFVTFQpOyAvLyBUT0RPIGFkZCBhIGN1c3RvbSByb3RhdGlvbiBjdXJzb3JcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgc2V0Q3Vyc29yKENVUlNPUl9ERUZBVUxUKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMubW91c2VEb3duID0gZnVuY3Rpb24oZSwgYnV0dG9uLCBwcmVzc3VyZSkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmNhcHR1cmUgJiYgYnV0dG9uID09IEJVVFRPTl9QUklNQVJZICYmICFlLmFsdEtleSAmJiAha2V5LmlzUHJlc3NlZChcInNwYWNlXCIpKSB7XG4gICAgICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgICAgIGNvcm5lcnMgPSBjb3JuZXJzVG9EaXNwbGF5UG9seWdvbigpO1xuXG4gICAgICAgICAgICAgICAgZHJhZ2dpbmdNb2RlID0gY2xhc3NpZnlEcmFnQWN0aW9uKGNvcm5lcnMsIHt4OiBtb3VzZVgsIHk6IG1vdXNlWX0pO1xuXG4gICAgICAgICAgICAgICAgbGFzdERyYWdQb2ludERpc3BsYXkgPSB7eDogbW91c2VYLCB5OiBtb3VzZVl9O1xuICAgICAgICAgICAgICAgIGxhc3REcmFnUG9pbnREb2MgPSBjb29yZFRvRG9jdW1lbnQobGFzdERyYWdQb2ludERpc3BsYXkpO1xuXG4gICAgICAgICAgICAgICAgdGhpcy5jYXB0dXJlID0gdHJ1ZTtcblxuICAgICAgICAgICAgICAgIHNldEN1cnNvckZvckhhbmRsZXMoKTtcblxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMubW91c2VEcmFnID0gdGhyb3R0bGUoNDAsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgIGNvbnN0XG4gICAgICAgICAgICAgICAgTUlOX1NDQUxFID0gMC4wMDE7XG5cbiAgICAgICAgICAgIGlmICh0aGlzLmNhcHR1cmUpIHtcbiAgICAgICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICAgICAgZHJhZ1BvaW50RGlzcGxheSA9IHt4OiBtb3VzZVgsIHk6IG1vdXNlWX07XG5cbiAgICAgICAgICAgICAgICBzd2l0Y2ggKGRyYWdnaW5nTW9kZSkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIERSQUdfTU9WRTpcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRyYWdQb2ludERvYyA9IHJvdW5kUG9pbnQoY29vcmRUb0RvY3VtZW50KGRyYWdQb2ludERpc3BsYXkpKSxcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zbGF0aW9uID0gQ1BWZWN0b3Iuc3VidHJhY3RQb2ludHMoZHJhZ1BvaW50RG9jLCBsYXN0RHJhZ1BvaW50RG9jKSxcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE9ubHkgdHJhbnNsYXRlIGluIHdob2xlLXBpeGVsIGluY3JlbWVudHMgKGluIGRvY3VtZW50IHNwYWNlIG5vdCBjYW52YXMgc3BhY2UpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNsYXRpb25Sb3VuZGVkID0gdHJhbnNsYXRpb24uZ2V0VHJ1bmNhdGVkKCksXG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2xhdGlvblJlbWFpbmRlciA9IHRyYW5zbGF0aW9uLnN1YnRyYWN0KHRyYW5zbGF0aW9uUm91bmRlZCksXG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2xhdGVJbnN0YW5jZSA9IG5ldyBDUFRyYW5zZm9ybSgpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvKlxuICAgICAgICAgICAgICAgICAgICAgICAgICogQXBwbHkgdGhlIHRyYW5zbGF0ZSAqYWZ0ZXIqIHRoZSBjdXJyZW50IGFmZmluZSBpcyBhcHBsaWVkLlxuICAgICAgICAgICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2xhdGVJbnN0YW5jZS50cmFuc2xhdGUodHJhbnNsYXRpb25Sb3VuZGVkLngsIHRyYW5zbGF0aW9uUm91bmRlZC55KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgYWZmaW5lLnByZU11bHRpcGx5KHRyYW5zbGF0ZUluc3RhbmNlKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQWNjdW11bGF0ZSB0aGUgZnJhY3Rpb25hbCBtb3ZlIHRoYXQgd2UgZGlkbid0IGFwcGx5IGZvciBuZXh0IHRpbWVcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhc3REcmFnUG9pbnREb2MgPSBDUFZlY3Rvci5zdWJ0cmFjdFBvaW50cyhkcmFnUG9pbnREb2MsIHRyYW5zbGF0aW9uUmVtYWluZGVyKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgRFJBR19ST1RBVEU6XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIERSQUdfUk9UQVRFX1NOQVBfQU5HTEUgPSBNYXRoLlBJIC8gNDtcblxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2VudGVyRG9jID0gY29ybmVyUG9pbnRzLmdldENlbnRlcigpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNlbnRlckRpc3BsYXkgPSBjb29yZFRvRGlzcGxheShjZW50ZXJEb2MpLFxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb2xkTW91c2VBbmdsZSA9IE1hdGguYXRhbjIobGFzdERyYWdQb2ludERpc3BsYXkueSAtIGNlbnRlckRpc3BsYXkueSwgbGFzdERyYWdQb2ludERpc3BsYXkueCAtIGNlbnRlckRpc3BsYXkueCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3TW91c2VBbmdsZSA9IE1hdGguYXRhbjIoZHJhZ1BvaW50RGlzcGxheS55IC0gY2VudGVyRGlzcGxheS55LCBkcmFnUG9pbnREaXNwbGF5LnggLSBjZW50ZXJEaXNwbGF5LngpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbHRhTW91c2VBbmdsZSA9IG5ld01vdXNlQW5nbGUgLSBvbGRNb3VzZUFuZ2xlLFxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcm90YXRlQW5nbGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcm90YXRlSW5zdGFuY2UgPSBuZXcgQ1BUcmFuc2Zvcm0oKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgcm90YXRpb25BY2N1bXVsYXRvciArPSBkZWx0YU1vdXNlQW5nbGU7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlLnNoaWZ0S2V5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLypcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBUaGUgcm90YXRpb24gaW4gdGhlIGRlY29tcG9zaXRpb24gd2FzIG1hZGUgYWJvdXQgdGhlIG9yaWdpbi4gV2Ugd2FudCB0byByb3RhdGUgYWJvdXQgdGhlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICogY2VudGVyIG9mIHRoZSBzZWxlY3Rpb24sIHNvIGZpcnN0IHJvdGF0ZSB0aGUgc2VsZWN0aW9uIHRvIHNxdWFyZSBpdCB1cCB3aXRoIHRoZSBheGVzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIHRoZW4gd2UnbGwgcGl2b3QgdGhlIHNlbGVjdGlvbiBhYm91dCBpdHMgY2VudGVyIHRvIHRoZSBuZXcgYW5nbGUuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcm90YXRlQW5nbGUgPSAtYWZmaW5lLmRlY29tcG9zZSgpLnJvdGF0ZSArIE1hdGgucm91bmQocm90YXRpb25BY2N1bXVsYXRvciAvIERSQUdfUk9UQVRFX1NOQVBfQU5HTEUpICogRFJBR19ST1RBVEVfU05BUF9BTkdMRTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcm90YXRlQW5nbGUgPSBkZWx0YU1vdXNlQW5nbGU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8qIEFwcGx5IHRoZSByb3RhdGlvbiAqYWZ0ZXIqIHRoZSBjdXJyZW50IGFmZmluZSBpbnN0ZWFkIG9mIGJlZm9yZSBpdCwgc28gdGhhdCB3ZSBkb24ndFxuICAgICAgICAgICAgICAgICAgICAgICAgICogZW5kIHVwIHNjYWxpbmcgb24gdG9wIG9mIHRoZSByb3RhdGVkIHNlbGVjdGlvbiBsYXRlciAod2hpY2ggd291bGQgY2F1c2UgYW4gdW53YW50ZWQgc2hlYXIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAgICAgICAgIHJvdGF0ZUluc3RhbmNlLnJvdGF0ZUFyb3VuZFBvaW50KHJvdGF0ZUFuZ2xlLCBjZW50ZXJEb2MueCwgY2VudGVyRG9jLnkpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBhZmZpbmUucHJlTXVsdGlwbHkocm90YXRlSW5zdGFuY2UpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBsYXN0RHJhZ1BvaW50RGlzcGxheSA9IGRyYWdQb2ludERpc3BsYXk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIERSQUdfTldfQ09STkVSOlxuICAgICAgICAgICAgICAgICAgICBjYXNlIERSQUdfTkVfQ09STkVSOlxuICAgICAgICAgICAgICAgICAgICBjYXNlIERSQUdfU0VfQ09STkVSOlxuICAgICAgICAgICAgICAgICAgICBjYXNlIERSQUdfU1dfQ09STkVSOlxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkcmFnZ2luZ0Nvcm5lciA9IH5+KGRyYWdnaW5nTW9kZSAvIDIpLFxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb2xkQ29ybmVyID0gb3JpZ0Nvcm5lclBvaW50cy5wb2ludHNbZHJhZ2dpbmdDb3JuZXJdLFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhlIGNvcm5lciB3ZSBkcmFnZ2VkIHdpbGwgbW92ZSBpbnRvIGl0cyBuZXcgcG9zaXRpb25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdDb3JuZXIgPSBhZmZpbmUuZ2V0SW52ZXJ0ZWQoKS5nZXRUcmFuc2Zvcm1lZFBvaW50KHJvdW5kUG9pbnQoY29vcmRUb0RvY3VtZW50KGRyYWdQb2ludERpc3BsYXkpKSksXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoZSBvcHBvc2l0ZSBjb3JuZXIgdG8gdGhlIG9uZSB3ZSBkcmFnZ2VkIG11c3Qgbm90IG1vdmVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaXhDb3JuZXIgPSBvcmlnQ29ybmVyUG9pbnRzLnBvaW50c1soZHJhZ2dpbmdDb3JuZXIgKyAyKSAlIDRdLFxuXG4gICAgICAgICAgICAgICAgICAgICAgICAvKiBOb3cgd2UgY2FuIHNlZSBob3cgbXVjaCB3ZSdkIG5lZWQgdG8gc2NhbGUgdGhlIG9yaWdpbmFsIHJlY3RhbmdsZSBhYm91dCB0aGUgZml4ZWQgY29ybmVyXG4gICAgICAgICAgICAgICAgICAgICAgICAgKiBmb3IgdGhlIG90aGVyIGNvcm5lciB0byByZWFjaCB0aGUgbmV3IHBvc2l0aW9uLlxuICAgICAgICAgICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NhbGVYID0gKG5ld0Nvcm5lci54IC0gZml4Q29ybmVyLngpIC8gKG9sZENvcm5lci54IC0gZml4Q29ybmVyLngpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjYWxlWSA9IChuZXdDb3JuZXIueSAtIGZpeENvcm5lci55KSAvIChvbGRDb3JuZXIueSAtIGZpeENvcm5lci55KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLypcbiAgICAgICAgICAgICAgICAgICAgICAgICAqIElmIHRoZSB1c2VyIHJlc2l6ZWQgaXQgdW50aWwgaXQgd2FzIHplcm8tc2l6ZWQsIGp1c3QgaWdub3JlIHRoYXQgcG9zaXRpb24gYW5kIGFzc3VtZSB0aGV5J2xsIG1vdmVcbiAgICAgICAgICAgICAgICAgICAgICAgICAqIHBhc3QgaXQgaW4gYSBtc2VjLlxuICAgICAgICAgICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoTWF0aC5hYnMoc2NhbGVYKSA8IE1JTl9TQ0FMRSB8fCBNYXRoLmFicyhzY2FsZVkpIDwgTUlOX1NDQUxFIHx8IGlzTmFOKHNjYWxlWCkgfHwgaXNOYU4oc2NhbGVZKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBEb2VzIHVzZXIgd2FudCBwcm9wb3J0aW9uYWwgcmVzaXplP1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUuc2hpZnRLZXkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFyZ2VzdFNjYWxlID0gTWF0aC5tYXgoc2NhbGVYLCBzY2FsZVkpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NhbGVYID0gbGFyZ2VzdFNjYWxlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjYWxlWSA9IGxhcmdlc3RTY2FsZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhlIHRyYW5zZm9ybSB3ZSBkbyBoZXJlIHdpbGwgYmUgcGVyZm9ybWVkIGZpcnN0IGJlZm9yZSBhbnkgb2YgdGhlIG90aGVyIHRyYW5zZm9ybXMgKHNjYWxlLCByb3RhdGUsIGV0YylcbiAgICAgICAgICAgICAgICAgICAgICAgIGFmZmluZS5zY2FsZUFyb3VuZFBvaW50KHNjYWxlWCwgc2NhbGVZLCBmaXhDb3JuZXIueCwgZml4Q29ybmVyLnkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIERSQUdfTl9FREdFOlxuICAgICAgICAgICAgICAgICAgICBjYXNlIERSQUdfU19FREdFOlxuICAgICAgICAgICAgICAgICAgICBjYXNlIERSQUdfRV9FREdFOlxuICAgICAgICAgICAgICAgICAgICBjYXNlIERSQUdfV19FREdFOlxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3JuZXJJbmRleCA9IH5+KGRyYWdnaW5nTW9kZSAvIDIpLFxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb2xkSGFuZGxlID0gYXZlcmFnZVBvaW50cyhvcmlnQ29ybmVyUG9pbnRzLnBvaW50c1tjb3JuZXJJbmRleF0sIG9yaWdDb3JuZXJQb2ludHMucG9pbnRzWyhjb3JuZXJJbmRleCArIDEpICUgNF0pLFxuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBUaGUgaGFuZGxlIHdlIGRyYWdnZWQgd2lsbCBtb3ZlIGludG8gaXRzIG5ldyBwb3NpdGlvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld0hhbmRsZSA9IGFmZmluZS5nZXRJbnZlcnRlZCgpLmdldFRyYW5zZm9ybWVkUG9pbnQocm91bmRQb2ludChjb29yZFRvRG9jdW1lbnQoZHJhZ1BvaW50RGlzcGxheSkpKSxcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhlIG9wcG9zaXRlIGhhbmRsZSB0byB0aGUgb25lIHdlIGRyYWdnZWQgbXVzdCBub3QgbW92ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpeEhhbmRsZSA9IGF2ZXJhZ2VQb2ludHMob3JpZ0Nvcm5lclBvaW50cy5wb2ludHNbKGNvcm5lckluZGV4ICsgMikgJSA0XSwgb3JpZ0Nvcm5lclBvaW50cy5wb2ludHNbKGNvcm5lckluZGV4ICsgMykgJSA0XSksXG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY2FsZVgsIHNjYWxlWSxcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9sZFZlY3RvciA9IENQVmVjdG9yLnN1YnRyYWN0UG9pbnRzKG9sZEhhbmRsZSwgZml4SGFuZGxlKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdWZWN0b3IgPSBDUFZlY3Rvci5zdWJ0cmFjdFBvaW50cyhuZXdIYW5kbGUsIGZpeEhhbmRsZSksXG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbGRMZW5ndGggPSBvbGRWZWN0b3IuZ2V0TGVuZ3RoKCksXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBXZSBvbmx5IHRha2UgdGhlIGxlbmd0aCBpbiB0aGUgcGVycGVuZGljdWxhciBkaXJlY3Rpb24gdG8gdGhlIHRyYW5zZm9ybSBlZGdlOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld0xlbmd0aCA9IG9sZFZlY3Rvci5nZXREb3RQcm9kdWN0KG5ld1ZlY3RvcikgLyBvbGRMZW5ndGgsXG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdTY2FsZSA9IG5ld0xlbmd0aCAvIG9sZExlbmd0aDtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLypcbiAgICAgICAgICAgICAgICAgICAgICAgICAqIElmIHRoZSB1c2VyIHJlc2l6ZWQgaXQgdW50aWwgaXQgd2FzIHplcm8tc2l6ZWQsIGp1c3QgaWdub3JlIHRoYXQgcG9zaXRpb24gYW5kIGFzc3VtZSB0aGV5J2xsIG1vdmVcbiAgICAgICAgICAgICAgICAgICAgICAgICAqIHBhc3QgaXQgaW4gYSBtc2VjLlxuICAgICAgICAgICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoTWF0aC5hYnMobmV3U2NhbGUpIDwgTUlOX1NDQUxFIHx8IGlzTmFOKG5ld1NjYWxlKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZHJhZ2dpbmdNb2RlID09IERSQUdfTl9FREdFIHx8IGRyYWdnaW5nTW9kZSA9PSBEUkFHX1NfRURHRSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjYWxlWCA9IDEuMDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY2FsZVkgPSBuZXdTY2FsZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NhbGVYID0gbmV3U2NhbGU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NhbGVZID0gMS4wO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBhZmZpbmUuc2NhbGVBcm91bmRQb2ludChzY2FsZVgsIHNjYWxlWSwgZml4SGFuZGxlLngsIGZpeEhhbmRsZS55KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBjb3JuZXJQb2ludHMgPSBvcmlnQ29ybmVyUG9pbnRzLmdldFRyYW5zZm9ybWVkKGFmZmluZSk7XG5cbiAgICAgICAgICAgICAgICBhcnR3b3JrLnRyYW5zZm9ybUFmZmluZUFtZW5kKGFmZmluZSk7XG5cbiAgICAgICAgICAgICAgICAvLyBUT0RPIG1ha2UgbWUgbW9yZSBzcGVjaWZpY1xuICAgICAgICAgICAgICAgIHRoYXQucmVwYWludEFsbCgpO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMubW91c2VVcCA9IGZ1bmN0aW9uKGUsIGJ1dHRvbiwgcHJlc3N1cmUpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmNhcHR1cmUgJiYgYnV0dG9uID09IEJVVFRPTl9QUklNQVJZKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jYXB0dXJlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgZHJhZ2dpbmdNb2RlID0gRFJBR19OT05FO1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIC8qXG4gICAgICAgICAqIFNldCBhbiBhcHByb3ByaWF0ZSByZXNpemUgY3Vyc29yIGZvciB0aGUgc3BlY2lmaWVkIHZlY3RvciBmcm9tIHRoZSBjZW50ZXIgdG8gdGhlIGhhbmRsZS5cbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIHNldFJlc2l6ZUN1cnNvckZvclZlY3Rvcih2KSB7XG4gICAgICAgICAgICBsZXRcbiAgICAgICAgICAgICAgICBhbmdsZSA9IE1hdGguYXRhbjIoLXYueSwgdi54KSxcbiAgICAgICAgICAgIC8qXG4gICAgICAgICAgICAgICAgICogU2xpY2UgdXAgaW50byA0NSBkZWdyZWVzIHNsaWNlcyBzbyB0aGF0IHRoZXJlIGFyZSArLTIyLjUgZGVncmVlcyBjZW50ZXJlZCBhcm91bmQgZWFjaCBjb3JuZXIsXG4gICAgICAgICAgICAgICAgICogYW5kIGEgNDUgZGVncmVlIHNlZ21lbnQgZm9yIGVhY2ggZWRnZVxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIHNsaWNlID0gTWF0aC5mbG9vcihhbmdsZSAvIChNYXRoLlBJIC8gNCkgKyAwLjUpLFxuICAgICAgICAgICAgICAgIGN1cnNvcjtcblxuICAgICAgICAgICAgLy8gV3JhcCBhbmdsZXMgYmVsb3cgdGhlIHgtYXhpcyB3cmFwIHRvIHBvc2l0aXZlIG9uZXMuLi5cbiAgICAgICAgICAgIGlmIChzbGljZSA8IDApIHtcbiAgICAgICAgICAgICAgICBzbGljZSArPSA0O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBzd2l0Y2ggKHNsaWNlKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIGN1cnNvciA9IENVUlNPUl9FV19SRVNJWkU7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICBjdXJzb3IgPSBDVVJTT1JfTkVTV19SRVNJWkU7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICBjdXJzb3IgPSBDVVJTT1JfTlNfUkVTSVpFO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgY3Vyc29yID0gQ1VSU09SX05XU0VfUkVTSVpFO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBzZXRDdXJzb3IoY3Vyc29yKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMubW91c2VNb3ZlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAvLyBXZSB3YW50IHRvIHN0aWNrIHdpdGggb3VyIGNob2ljZSBvZiBjdXJzb3IgdGhyb3VnaG91dCB0aGUgZHJhZyBvcGVyYXRpb25cbiAgICAgICAgICAgIGlmICghdGhpcy5jYXB0dXJlKSB7XG4gICAgICAgICAgICAgICAgc2V0Q3Vyc29yRm9ySGFuZGxlcygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMucGFpbnQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgIGNvcm5lcnMgPSBjb3JuZXJzVG9EaXNwbGF5UG9seWdvbigpLnBvaW50cyxcbiAgICAgICAgICAgICAgICBoYW5kbGVzID0gbmV3IEFycmF5KGNvcm5lcnMubGVuZ3RoICogMik7XG5cbiAgICAgICAgICAgIC8vIENvbGxlY3QgdGhlIHBvc2l0aW9ucyBvZiB0aGUgZWRnZSBhbmQgY29ybmVyIGhhbmRsZXMuLi5cbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY29ybmVycy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGhhbmRsZXNbaV0gPSBjb3JuZXJzW2ldO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNvcm5lcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICAgICAgZWRnZVAxID0gY29ybmVyc1tpXSxcbiAgICAgICAgICAgICAgICAgICAgZWRnZVAyID0gY29ybmVyc1soaSArIDEpICUgY29ybmVycy5sZW5ndGhdLFxuXG4gICAgICAgICAgICAgICAgICAgIG1pZFdheSA9IHt4OiAoZWRnZVAxLnggKyBlZGdlUDIueCkgLyAyLCB5OiAoZWRnZVAxLnkgKyBlZGdlUDIueSkgLyAyfTtcblxuICAgICAgICAgICAgICAgIGhhbmRsZXNbaSArIGNvcm5lcnMubGVuZ3RoXSA9IG1pZFdheTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgc2V0Q29udHJhc3RpbmdEcmF3U3R5bGUoY2FudmFzQ29udGV4dCwgXCJmaWxsXCIpO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBoYW5kbGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgY2FudmFzQ29udGV4dC5maWxsUmVjdChoYW5kbGVzW2ldLnggLSBIQU5ETEVfUkFESVVTLCBoYW5kbGVzW2ldLnkgLSBIQU5ETEVfUkFESVVTLCBIQU5ETEVfUkFESVVTICogMiArIDEsIEhBTkRMRV9SQURJVVMgKiAyICsgMSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHN0cm9rZVBvbHlnb24oY2FudmFzQ29udGV4dCwgY29ybmVycyk7XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5rZXlEb3duID0gZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgaWYgKGUua2V5Q29kZSA9PSAxMyAvKiBFbnRlciAqLykge1xuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIuYWN0aW9uUGVyZm9ybWVkKHthY3Rpb246IFwiQ1BUcmFuc2Zvcm1BY2NlcHRcIn0pO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGUua2V5Q29kZSA9PSAyNyAvKiBFc2NhcGUgKi8pIHtcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyLmFjdGlvblBlcmZvcm1lZCh7YWN0aW9uOiBcIkNQVHJhbnNmb3JtUmVqZWN0XCJ9KTtcblxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMuZW50ZXIgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIENQTW9kZS5wcm90b3R5cGUuZW50ZXIuY2FsbCh0aGlzKTtcblxuICAgICAgICAgICAgLy8gU3RhcnQgb2ZmIHdpdGggdGhlIGlkZW50aXR5IHRyYW5zZm9ybVxuICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgaW5pdGlhbCA9IGFydHdvcmsudHJhbnNmb3JtQWZmaW5lQmVnaW4oKSxcbiAgICAgICAgICAgICAgICBpbml0aWFsU2VsZWN0aW9uO1xuXG4gICAgICAgICAgICBhZmZpbmUgPSBpbml0aWFsLnRyYW5zZm9ybTtcbiAgICAgICAgICAgIHNyY1JlY3QgPSBpbml0aWFsLnJlY3Q7XG5cbiAgICAgICAgICAgIC8vIERlY2lkZSBvbiB0aGUgcmVjdGFuZ2xlIHdlJ2xsIHNob3cgYXMgdGhlIGJvdW5kYXJ5IG9mIHRoZSB0cmFuc2Zvcm0gYXJlYVxuICAgICAgICAgICAgaW5pdGlhbFNlbGVjdGlvbiA9IGluaXRpYWwuc2VsZWN0aW9uO1xuXG4gICAgICAgICAgICAvKiBJZiB0aGUgdXNlciBkaWRuJ3QgaGF2ZSBhbnl0aGluZyBzZWxlY3RlZCwgd2UnbGwgdXNlIHRoZSBhY3R1YWwgc2hyaW5rLXdyYXBwZWQgdHJhbnNmb3JtIGFyZWEgaW5zdGVhZC4gKi9cbiAgICAgICAgICAgIGlmIChpbml0aWFsU2VsZWN0aW9uLmlzRW1wdHkoKSkge1xuICAgICAgICAgICAgICAgIGluaXRpYWxTZWxlY3Rpb24gPSBpbml0aWFsLnJlY3QuY2xvbmUoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgb3JpZ0Nvcm5lclBvaW50cyA9IG5ldyBDUFBvbHlnb24oaW5pdGlhbFNlbGVjdGlvbi50b1BvaW50cygpKTtcbiAgICAgICAgICAgIGNvcm5lclBvaW50cyA9IG9yaWdDb3JuZXJQb2ludHMuZ2V0VHJhbnNmb3JtZWQoYWZmaW5lKTtcblxuICAgICAgICAgICAgZHJhZ2dpbmdNb2RlID0gLTE7XG4gICAgICAgICAgICByb3RhdGlvbkFjY3VtdWxhdG9yID0gMDtcblxuICAgICAgICAgICAgdGhhdC5yZXBhaW50QWxsKCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5sZWF2ZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgQ1BNb2RlLnByb3RvdHlwZS5sZWF2ZS5jYWxsKHRoaXMpO1xuICAgICAgICAgICAgdGhhdC5yZXBhaW50QWxsKCk7XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgQ1BUcmFuc2Zvcm1Nb2RlLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoQ1BNb2RlLnByb3RvdHlwZSk7XG4gICAgQ1BUcmFuc2Zvcm1Nb2RlLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IENQVHJhbnNmb3JtTW9kZTtcblxuICAgIGZ1bmN0aW9uIENQUm90YXRlQ2FudmFzTW9kZSgpIHtcbiAgICAgICAgdmFyIFxuICAgICAgICAgICAgZmlyc3RDbGljayxcbiAgICAgICAgICAgIGluaXRBbmdsZSA9IDAuMCxcbiAgICAgICAgICAgIGluaXRUcmFuc2Zvcm0sXG4gICAgICAgICAgICBkcmFnZ2VkID0gZmFsc2UsXG5cbiAgICAgICAgICAgIHJvdGF0ZUJ1dHRvbiA9IC0xO1xuXG4gICAgICAgIHRoaXMubW91c2VEb3duID0gZnVuY3Rpb24oZSwgYnV0dG9uLCBwcmVzc3VyZSkge1xuICAgICAgICAgICAgaWYgKHRoaXMuY2FwdHVyZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfSBlbHNlIGlmICghdGhpcy50cmFuc2llbnQgJiYgYnV0dG9uID09IEJVVFRPTl9QUklNQVJZICYmICFlLmFsdEtleSAmJiAha2V5LmlzUHJlc3NlZChcInNwYWNlXCIpXG4gICAgICAgICAgICAgICAgICAgIHx8IGUuYWx0S2V5ICYmIChidXR0b24gPT0gQlVUVE9OX1dIRUVMIHx8IGJ1dHRvbiA9PSBCVVRUT05fUFJJTUFSWSAmJiBrZXkuaXNQcmVzc2VkKFwic3BhY2VcIikpKSB7XG4gICAgICAgICAgICAgICAgZmlyc3RDbGljayA9IHt4OiBtb3VzZVgsIHk6IG1vdXNlWX07XG5cbiAgICAgICAgICAgICAgICBpbml0QW5nbGUgPSB0aGF0LmdldFJvdGF0aW9uKCk7XG4gICAgICAgICAgICAgICAgaW5pdFRyYW5zZm9ybSA9IHRyYW5zZm9ybS5jbG9uZSgpO1xuXG4gICAgICAgICAgICAgICAgZHJhZ2dlZCA9IGZhbHNlO1xuXG4gICAgICAgICAgICAgICAgdGhpcy5jYXB0dXJlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICByb3RhdGVCdXR0b24gPSBidXR0b247XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy50cmFuc2llbnQpIHtcbiAgICAgICAgICAgICAgICBtb2RlU3RhY2sucG9wKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5tb3VzZURyYWcgPSBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5jYXB0dXJlKSB7XG4gICAgICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgICAgIHAgPSB7eDogbW91c2VYLCB5OiBtb3VzZVl9LFxuXG4gICAgICAgICAgICAgICAgICAgIGRpc3BsYXlDZW50ZXIgPSB7eDogJChjYW52YXMpLndpZHRoKCkgLyAyLCB5OiAkKGNhbnZhcykuaGVpZ2h0KCkgLyAyfSxcbiAgICAgICAgICAgICAgICAgICAgY2FudmFzQ2VudGVyID0ge3g6IGNhbnZhcy53aWR0aCAvIDIsIHk6IGNhbnZhcy5oZWlnaHQgLyAyfSxcblxuICAgICAgICAgICAgICAgICAgICBkZWx0YUFuZ2xlID0gTWF0aC5hdGFuMihwLnkgLSBkaXNwbGF5Q2VudGVyLnksIHAueCAtIGRpc3BsYXlDZW50ZXIueCkgLSBNYXRoLmF0YW4yKGZpcnN0Q2xpY2sueSAtIGRpc3BsYXlDZW50ZXIueSwgZmlyc3RDbGljay54IC0gZGlzcGxheUNlbnRlci54KSxcblxuICAgICAgICAgICAgICAgICAgICByb3RUcmFucyA9IG5ldyBDUFRyYW5zZm9ybSgpO1xuXG4gICAgICAgICAgICAgICAgcm90VHJhbnMucm90YXRlQXJvdW5kUG9pbnQoZGVsdGFBbmdsZSwgY2FudmFzQ2VudGVyLngsIGNhbnZhc0NlbnRlci55KTtcblxuICAgICAgICAgICAgICAgIHJvdFRyYW5zLm11bHRpcGx5KGluaXRUcmFuc2Zvcm0pO1xuXG4gICAgICAgICAgICAgICAgdGhhdC5zZXRSb3RhdGlvbihpbml0QW5nbGUgKyBkZWx0YUFuZ2xlKTtcbiAgICAgICAgICAgICAgICB0aGF0LnNldE9mZnNldCh+fnJvdFRyYW5zLmdldFRyYW5zbGF0ZVgoKSwgfn5yb3RUcmFucy5nZXRUcmFuc2xhdGVZKCkpO1xuXG4gICAgICAgICAgICAgICAgZHJhZ2dlZCA9IHRydWU7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogV2hlbiB0aGUgbW91c2UgaXMgcmVsZWFzZWQgYWZ0ZXIgcm90YXRpb24sIHdlIG1pZ2h0IHdhbnQgdG8gc25hcCBvdXIgYW5nbGUgdG8gdGhlIG5lYXJlc3QgOTAgZGVncmVlIG1hcmsuXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBmaW5pc2hSb3RhdGlvbigpIHtcbiAgICAgICAgICAgIGNvbnN0XG4gICAgICAgICAgICAgICAgUk9UQVRFX1NOQVBfREVHUkVFUyA9IDU7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHZhciBcbiAgICAgICAgICAgICAgICBuZWFyZXN0OTAgPSBNYXRoLnJvdW5kKGNhbnZhc1JvdGF0aW9uIC8gKE1hdGguUEkgLyAyKSkgKiBNYXRoLlBJIC8gMjtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKE1hdGguYWJzKGNhbnZhc1JvdGF0aW9uIC0gbmVhcmVzdDkwKSA8IFJPVEFURV9TTkFQX0RFR1JFRVMgLyAxODAgKiBNYXRoLlBJKSB7XG4gICAgICAgICAgICAgICAgdmFyIFxuICAgICAgICAgICAgICAgICAgICBkZWx0YUFuZ2xlID0gbmVhcmVzdDkwIC0gaW5pdEFuZ2xlLFxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBjZW50ZXIgPSB7eDogY2FudmFzLndpZHRoIC8gMiwgeTogY2FudmFzLmhlaWdodCAvIDJ9LFxuXG4gICAgICAgICAgICAgICAgICAgIHJvdFRyYW5zID0gbmV3IENQVHJhbnNmb3JtKCk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgcm90VHJhbnMucm90YXRlQXJvdW5kUG9pbnQoZGVsdGFBbmdsZSwgY2VudGVyLngsIGNlbnRlci55KTtcblxuICAgICAgICAgICAgICAgIHJvdFRyYW5zLm11bHRpcGx5KGluaXRUcmFuc2Zvcm0pO1xuXG4gICAgICAgICAgICAgICAgdGhhdC5zZXRSb3RhdGlvbihpbml0QW5nbGUgKyBkZWx0YUFuZ2xlKTtcbiAgICAgICAgICAgICAgICB0aGF0LnNldE9mZnNldCh+fnJvdFRyYW5zLmdldFRyYW5zbGF0ZVgoKSwgfn5yb3RUcmFucy5nZXRUcmFuc2xhdGVZKCkpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHRoYXQucmVwYWludEFsbCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICB0aGlzLm1vdXNlVXAgPSBmdW5jdGlvbihlLCBidXR0b24sIHByZXNzdXJlKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5jYXB0dXJlICYmIGJ1dHRvbiA9PSByb3RhdGVCdXR0b24pIHtcbiAgICAgICAgICAgICAgICBpZiAoZHJhZ2dlZCkge1xuICAgICAgICAgICAgICAgICAgICBmaW5pc2hSb3RhdGlvbigpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoYXQucmVzZXRSb3RhdGlvbigpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHRoaXMuY2FwdHVyZSA9IGZhbHNlO1xuXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMudHJhbnNpZW50ICYmICEoa2V5LmlzUHJlc3NlZChcInNwYWNlXCIpICYmIGtleS5hbHQpKSB7XG4gICAgICAgICAgICAgICAgICAgIG1vZGVTdGFjay5wb3AoKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLmtleVVwID0gZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgaWYgKHRoaXMudHJhbnNpZW50ICYmIHJvdGF0ZUJ1dHRvbiAhPSBCVVRUT05fV0hFRUwgJiYgZS5rZXlDb2RlID09IDMyIC8qIFNwYWNlICovKSB7XG4gICAgICAgICAgICAgICAgc2V0Q3Vyc29yKENVUlNPUl9ERUZBVUxUKTtcblxuICAgICAgICAgICAgICAgIG1vZGVTdGFjay5wb3AoKTsgLy8geWllbGQgY29udHJvbCB0byB0aGUgZGVmYXVsdCBtb2RlXG5cbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLmtleURvd24gPSBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICBpZiAoZS5rZXlDb2RlID09IDMyIC8qIFNwYWNlICovICYmIGUuYWx0S2V5KSB7XG4gICAgICAgICAgICAgICAgLy8gVGhhdCdzIG91ciBob3RrZXksIHNvIHN0YXkgaW4gdGhpcyBtb2RlIChkb24ndCBmb3J3YXJkIHRvIENQRGVmYXVsdE1vZGUpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxuICAgIFxuICAgIENQUm90YXRlQ2FudmFzTW9kZS5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKENQTW9kZS5wcm90b3R5cGUpO1xuICAgIENQUm90YXRlQ2FudmFzTW9kZS5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBDUFJvdGF0ZUNhbnZhc01vZGU7XG5cbiAgICBmdW5jdGlvbiBDUEdyYWRpZW50RmlsbE1vZGUoKSB7XG4gICAgICAgIC8vIFN1cGVyIGNvbnN0cnVjdG9yXG4gICAgICAgIENQTGluZU1vZGUuY2FsbCh0aGlzKTtcbiAgICB9XG4gICAgXG4gICAgQ1BHcmFkaWVudEZpbGxNb2RlLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoQ1BMaW5lTW9kZS5wcm90b3R5cGUpO1xuICAgIENQR3JhZGllbnRGaWxsTW9kZS5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBDUEdyYWRpZW50RmlsbE1vZGU7XG5cbiAgICBDUEdyYWRpZW50RmlsbE1vZGUucHJvdG90eXBlLmRyYXdMaW5lID0gZnVuY3Rpb24oZnJvbSwgdG8pIHtcbiAgICAgICAgYXJ0d29yay5ncmFkaWVudEZpbGwoTWF0aC5yb3VuZChmcm9tLngpLCBNYXRoLnJvdW5kKGZyb20ueSksIE1hdGgucm91bmQodG8ueCksIE1hdGgucm91bmQodG8ueSksIGNvbnRyb2xsZXIuZ2V0Q3VyR3JhZGllbnQoKSk7XG4gICAgfTtcblxuICAgIENQR3JhZGllbnRGaWxsTW9kZS5wcm90b3R5cGUucXVldWVCcnVzaFByZXZpZXcgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgLy9TdXBwcmVzcyB0aGUgZHJhd2luZyBvZiB0aGUgYnJ1c2ggcHJldmlldyAoaW5oZXJpdGVkIGZyb20gQ1BEcmF3aW5nTW9kZSlcbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gc2V0Q3Vyc29yKGN1cnNvcikge1xuICAgICAgICBpZiAoY2FudmFzLmdldEF0dHJpYnV0ZShcImRhdGEtY3Vyc29yXCIpICE9IGN1cnNvcikge1xuICAgICAgICAgICAgY2FudmFzLnNldEF0dHJpYnV0ZShcImRhdGEtY3Vyc29yXCIsIGN1cnNvcik7XG4gICAgICAgIH1cbiAgICB9XG5cblx0LyoqXG4gICAgICogQ2hlY2sgdGhhdCB3ZSBzaG91bGQgYmUgZHJhd2luZyB0byB0aGUgY3VycmVudCBsYXllciwgYW5kIGxldCB0aGUgdXNlciBrbm93IGlmIHRoZXkgYXJlIGJlaW5nIGJsb2NrZWQgYnkgdGhlXG4gICAgICogbGF5ZXIgc2V0dGluZ3MuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB3ZSBzaG91bGQgZHJhdyB0byB0aGUgY3VycmVudCBsYXllclxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHNob3VsZERyYXdUb1RoaXNMYXllcigpIHtcbiAgICAgICAgdmFyXG4gICAgICAgICAgICBhY3RpdmVMYXllciA9IGFydHdvcmsuZ2V0QWN0aXZlTGF5ZXIoKTtcblxuICAgICAgICBpZiAoIWFjdGl2ZUxheWVyLnZpc2libGUpIHtcbiAgICAgICAgICAgIGNvbnRyb2xsZXIuc2hvd0xheWVyTm90aWZpY2F0aW9uKGFydHdvcmsuZ2V0QWN0aXZlTGF5ZXJJbmRleCgpLCBcIldob29wcyEgVGhpcyBsYXllciBpcyBjdXJyZW50bHkgaGlkZGVuXCIsIFwibGF5ZXJcIik7XG5cbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfSBlbHNlIGlmIChhY3RpdmVMYXllci5hbHBoYSA9PSAwKSB7XG4gICAgICAgICAgICBjb250cm9sbGVyLnNob3dMYXllck5vdGlmaWNhdGlvbihhcnR3b3JrLmdldEFjdGl2ZUxheWVySW5kZXgoKSwgXCJXaG9vcHMhIFRoaXMgbGF5ZXIncyBvcGFjaXR5IGlzIGN1cnJlbnRseSAwJVwiLCBcIm9wYWNpdHlcIik7XG5cbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFVwZGF0ZSB0aGUgc2Nyb2xsYmFyJ3MgcmFuZ2UvcG9zaXRpb24gdG8gbWF0Y2ggdGhlIGN1cnJlbnQgdmlldyBzZXR0aW5ncyBmb3IgdGhlIGRvY3VtZW50LlxuICAgICAqXG4gICAgICogQHBhcmFtIHNjcm9sbGJhciB7Q1BTY3JvbGxiYXJ9XG4gICAgICogQHBhcmFtIHZpc01pbiBUaGUgc21hbGxlc3QgY29vcmRpbmF0ZSBpbiB0aGlzIGF4aXMgaW4gd2hpY2ggdGhlIGRyYXdpbmcgYXBwZWFyc1xuICAgICAqIEBwYXJhbSB2aXNXaWR0aCBUaGUgZXh0ZW50IG9mIHRoZSBkcmF3aW5nIGluIHRoaXMgYXhpc1xuICAgICAqIEBwYXJhbSB2aWV3U2l6ZSBUaGUgZXh0ZW50IG9mIHRoZSBzY3JlZW4gY2FudmFzIGluIHRoaXMgYXhpc1xuICAgICAqIEBwYXJhbSBvZmZzZXQgVGhlIHByZXNlbnQgcGl4ZWwgb2Zmc2V0IG9mIHRoZSBkcmF3aW5nIGluIHRoaXMgYXhpc1xuICAgICAqL1xuICAgIGZ1bmN0aW9uIHVwZGF0ZVNjcm9sbEJhcihzY3JvbGxiYXIsIHZpc01pbiwgdmlzV2lkdGgsIHZpZXdTaXplLCBvZmZzZXQpIHtcbiAgICAgICAgdmFyXG4gICAgICAgICAgICB4TWluID0gdmlzTWluIC0gdmlld1NpemUgLSBvZmZzZXQgKyB2aXNXaWR0aCAvIDQsXG4gICAgICAgICAgICB4TWF4ID0gdmlzTWluICsgdmlzV2lkdGggLSBvZmZzZXQgLSB2aXNXaWR0aCAvIDQ7XG4gICAgICAgIFxuICAgICAgICBzY3JvbGxiYXIuc2V0VmFsdWVzKC1vZmZzZXQsIHZpZXdTaXplLCB4TWluLCB4TWF4KTtcbiAgICAgICAgXG4gICAgICAgIHNjcm9sbGJhci5zZXRCbG9ja0luY3JlbWVudChNYXRoLm1heCgxLCB+fih2aWV3U2l6ZSAqIC42NikpKTtcbiAgICAgICAgc2Nyb2xsYmFyLnNldFVuaXRJbmNyZW1lbnQoTWF0aC5tYXgoMSwgfn4odmlld1NpemUgKiAuMDUpKSk7XG4gICAgfVxuICAgIFxuICAgIGZ1bmN0aW9uIHVwZGF0ZVNjcm9sbEJhcnMoKSB7XG4gICAgICAgIGlmIChob3J6U2Nyb2xsID09IG51bGwgfHwgdmVydFNjcm9sbCA9PSBudWxsXG4gICAgICAgICAgICAgICAgfHwgaG9yelNjcm9sbC5nZXRWYWx1ZUlzQWRqdXN0aW5nKCkgfHwgdmVydFNjcm9sbC5nZXRWYWx1ZUlzQWRqdXN0aW5nKCkgKSB7XG4gICAgICAgICAgIHJldHVybjtcbiAgICAgICB9XG5cbiAgICAgICB2YXJcbiAgICAgICAgICAgdmlzaWJsZVJlY3QgPSBnZXRSZWZyZXNoQXJlYShuZXcgQ1BSZWN0KDAsIDAsIGFydHdvcmtDYW52YXMud2lkdGgsIGFydHdvcmtDYW52YXMuaGVpZ2h0KSk7XG5cbiAgICAgICB1cGRhdGVTY3JvbGxCYXIoaG9yelNjcm9sbCwgdmlzaWJsZVJlY3QubGVmdCwgdmlzaWJsZVJlY3QuZ2V0V2lkdGgoKSwgJChjYW52YXMpLndpZHRoKCksIHRoYXQuZ2V0T2Zmc2V0KCkueCk7XG4gICAgICAgdXBkYXRlU2Nyb2xsQmFyKHZlcnRTY3JvbGwsIHZpc2libGVSZWN0LnRvcCwgdmlzaWJsZVJlY3QuZ2V0SGVpZ2h0KCksICQoY2FudmFzKS5oZWlnaHQoKSwgdGhhdC5nZXRPZmZzZXQoKS55KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiB1cGRhdGVUcmFuc2Zvcm0oKSB7XG4gICAgICAgIHRyYW5zZm9ybS5zZXRUb0lkZW50aXR5KCk7XG4gICAgICAgIHRyYW5zZm9ybS50cmFuc2xhdGUob2Zmc2V0WCwgb2Zmc2V0WSk7XG4gICAgICAgIHRyYW5zZm9ybS5zY2FsZSh6b29tLCB6b29tKTtcbiAgICAgICAgdHJhbnNmb3JtLnJvdGF0ZShjYW52YXNSb3RhdGlvbik7XG5cbiAgICAgICAgdXBkYXRlU2Nyb2xsQmFycygpO1xuICAgICAgICB0aGF0LnJlcGFpbnRBbGwoKTtcbiAgICB9XG4gICAgXG4gICAgLyoqXG4gICAgICogQ29udmVydCBhIGNhbnZhcy1yZWxhdGl2ZSBjb29yZGluYXRlIGludG8gZG9jdW1lbnQgY29vcmRpbmF0ZXMgYW5kIHJldHVybiB0aGUgbmV3IGNvb3JkaW5hdGUuXG4gICAgICovXG4gICAgZnVuY3Rpb24gY29vcmRUb0RvY3VtZW50KGNvb3JkKSB7XG4gICAgICAgIC8vIFRPRE8gY2FjaGUgaW52ZXJ0ZWQgdHJhbnNmb3JtXG4gICAgICAgIHJldHVybiB0cmFuc2Zvcm0uZ2V0SW52ZXJ0ZWQoKS5nZXRUcmFuc2Zvcm1lZFBvaW50KGNvb3JkKTtcbiAgICB9XG4gICAgXG4gICAgLyoqXG4gICAgICogQ29udmVydCBhIGNhbnZhcy1yZWxhdGl2ZSBjb29yZGluYXRlIGludG8gZG9jdW1lbnQgY29vcmRpbmF0ZXMuXG4gICAgICovXG4gICAgZnVuY3Rpb24gY29vcmRUb0RvY3VtZW50SW50KGNvb3JkKSB7XG4gICAgICAgIHZhclxuICAgICAgICAgICAgcmVzdWx0ID0gY29vcmRUb0RvY3VtZW50KGNvb3JkKTtcbiAgICAgICAgXG4gICAgICAgIHJlc3VsdC54ID0gTWF0aC5mbG9vcihyZXN1bHQueCk7XG4gICAgICAgIHJlc3VsdC55ID0gTWF0aC5mbG9vcihyZXN1bHQueSk7XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICBcbiAgICAvKipcbiAgICAgKiBDb252ZXJ0IGEge3g6IHBhZ2VYLCB5OiBwYWdlWX0gY28tb3JkaW5hdGUgcGFpciBmcm9tIGEgbW91c2UgZXZlbnQgdG8gY2FudmFzLXJlbGF0aXZlIGNvb3JkaW5hdGVzLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIG1vdXNlQ29vcmRUb0NhbnZhcyhjb29yZCkge1xuICAgICAgICB2YXJcbiAgICAgICAgICAgIHJlY3QgPSBjYW52YXMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG5cbiAgICAgICAgcmV0dXJuIHt4OiBjb29yZC54IC0gcmVjdC5sZWZ0IC0gd2luZG93LnBhZ2VYT2Zmc2V0LCB5OiBjb29yZC55IC0gcmVjdC50b3AgLSB3aW5kb3cucGFnZVlPZmZzZXR9O1xuICAgIH1cbiAgICBcbiAgICBmdW5jdGlvbiBjb29yZFRvRGlzcGxheShwKSB7XG4gICAgICAgIHJldHVybiB0cmFuc2Zvcm0uZ2V0VHJhbnNmb3JtZWRQb2ludChwKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjb29yZFRvRGlzcGxheUludChwKSB7XG4gICAgICAgIHZhclxuICAgICAgICAgICAgcmVzdWx0ID0gY29vcmRUb0Rpc3BsYXkocCk7XG4gICAgICAgIFxuICAgICAgICByZXN1bHQueCA9IE1hdGgucm91bmQocmVzdWx0LngpO1xuICAgICAgICByZXN1bHQueSA9IE1hdGgucm91bmQocmVzdWx0LnkpO1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gICAgXG5cdC8qKlxuICAgICAqIENvbnZlcnQgYSByZWN0YW5nbGUgdGhhdCBlbmNsb3NlcyB0aGUgZ2l2ZW4gZG9jdW1lbnQgcGl4ZWxzIGludG8gYSByZWN0YW5nbGUgaW4gZGlzcGxheSBjb29yZGluYXRlcy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSByZWN0IHtDUFJlY3R9XG4gICAgICogQHJldHVybnMgeypbXX1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiByZWN0VG9EaXNwbGF5KHJlY3QpIHtcbiAgICAgICAgdmFyXG4gICAgICAgICAgICBjZW50ZXIgPSBjb29yZFRvRGlzcGxheSh7eDogKHJlY3QubGVmdCArIHJlY3QucmlnaHQpIC8gMiwgeTogKHJlY3QudG9wICsgcmVjdC5ib3R0b20pIC8gMn0pLFxuICAgICAgICAgICAgY29vcmRzID0gcmVjdC50b1BvaW50cygpO1xuXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY29vcmRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBjb29yZHNbaV0gPSBjb29yZFRvRGlzcGxheUludChjb29yZHNbaV0pO1xuXG4gICAgICAgICAgICAvLyBOZWVkIHRvIGluc2V0IHRoZSBjby1vcmRpbmF0ZXMgYnkgMC41IGRpc3BsYXkgcGl4ZWxzIGZvciB0aGUgbGluZSB0byBwYXNzIHRocm91Z2ggdGhlIG1pZGRsZSBvZiB0aGUgZGlzcGxheSBwaXhlbFxuICAgICAgICAgICAgY29vcmRzW2ldLnggKz0gIE1hdGguc2lnbihjZW50ZXIueCAtIGNvb3Jkc1tpXS54KSAqIDAuNTtcbiAgICAgICAgICAgIGNvb3Jkc1tpXS55ICs9ICBNYXRoLnNpZ24oY2VudGVyLnkgLSBjb29yZHNbaV0ueSkgKiAwLjU7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gY29vcmRzO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHN0cm9rZVBvbHlnb24oY29udGV4dCwgY29vcmRzKSB7XG4gICAgICAgIGNvbnRleHQuYmVnaW5QYXRoKCk7XG5cbiAgICAgICAgY29udGV4dC5tb3ZlVG8oY29vcmRzWzBdLngsIGNvb3Jkc1swXS55KTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBjb29yZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnRleHQubGluZVRvKGNvb3Jkc1tpXS54LCBjb29yZHNbaV0ueSk7XG4gICAgICAgIH1cbiAgICAgICAgY29udGV4dC5saW5lVG8oY29vcmRzWzBdLngsIGNvb3Jkc1swXS55KTtcblxuICAgICAgICBjb250ZXh0LnN0cm9rZSgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFN0cm9rZSBhIHNlbGVjdGlvbiByZWN0YW5nbGUgdGhhdCBlbmNsb3NlcyB0aGUgcGl4ZWxzIGluIHRoZSBnaXZlbiByZWN0YW5nbGUgKGluIGRvY3VtZW50IGNvLW9yZGluYXRlcykuXG4gICAgICovXG4gICAgZnVuY3Rpb24gcGxvdFNlbGVjdGlvblJlY3QoY29udGV4dCwgcmVjdCkge1xuICAgICAgICBzdHJva2VQb2x5Z29uKGNvbnRleHQsIHJlY3RUb0Rpc3BsYXkocmVjdCkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRha2UgYSBDUFJlY3Qgb2YgZG9jdW1lbnQgY29vcmRpbmF0ZXMgYW5kIHJldHVybiBhIENQUmVjdCBvZiBjYW52YXMgY29vcmRpbmF0ZXMgdG8gcmVwYWludCBmb3IgdGhhdCByZWdpb24uXG4gICAgICovXG4gICAgZnVuY3Rpb24gZ2V0UmVmcmVzaEFyZWEocikge1xuICAgICAgICB2YXJcbiAgICAgICAgICAgIHAxID0gY29vcmRUb0Rpc3BsYXlJbnQoe3g6IHIubGVmdCAtIDEsIHk6IHIudG9wIC0gMX0pLFxuICAgICAgICAgICAgcDIgPSBjb29yZFRvRGlzcGxheUludCh7eDogci5sZWZ0IC0gMSwgeTogci5ib3R0b219KSxcbiAgICAgICAgICAgIHAzID0gY29vcmRUb0Rpc3BsYXlJbnQoe3g6IHIucmlnaHQsIHk6IHIudG9wIC0gMX0pLFxuICAgICAgICAgICAgcDQgPSBjb29yZFRvRGlzcGxheUludCh7eDogci5yaWdodCwgeTogci5ib3R0b219KSxcblxuICAgICAgICAgICAgcjIgPSBuZXcgQ1BSZWN0KFxuICAgICAgICAgICAgICAgIE1hdGgubWluKE1hdGgubWluKHAxLngsIHAyLngpLCBNYXRoLm1pbihwMy54LCBwNC54KSksXG4gICAgICAgICAgICAgICAgTWF0aC5taW4oTWF0aC5taW4ocDEueSwgcDIueSksIE1hdGgubWluKHAzLnksIHA0LnkpKSxcbiAgICAgICAgICAgICAgICBNYXRoLm1heChNYXRoLm1heChwMS54LCBwMi54KSwgTWF0aC5tYXgocDMueCwgcDQueCkpICsgMSxcbiAgICAgICAgICAgICAgICBNYXRoLm1heChNYXRoLm1heChwMS55LCBwMi55KSwgTWF0aC5tYXgocDMueSwgcDQueSkpICsgMVxuICAgICAgICAgICAgKTtcblxuICAgICAgICByMi5ncm93KDIsIDIpOyAvLyB0byBiZSBzdXJlIHRvIGluY2x1ZGUgZXZlcnl0aGluZ1xuXG4gICAgICAgIHJldHVybiByMjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBZGp1c3QgdGhlIGN1cnJlbnQgb2Zmc2V0IHRvIGJyaW5nIHRoZSBjZW50ZXIgb2YgdGhlIGFydHdvcmsgdG8gdGhlIGNlbnRlciBvZiB0aGUgY2FudmFzXG4gICAgICovXG4gICAgZnVuY3Rpb24gY2VudGVyQ2FudmFzKCkge1xuICAgICAgICB2YXJcbiAgICAgICAgICAgIHdpZHRoID0gY2FudmFzLndpZHRoLFxuICAgICAgICAgICAgaGVpZ2h0ID0gY2FudmFzLmhlaWdodCxcbiAgICAgICAgXG4gICAgICAgICAgICBhcnR3b3JrQ2VudGVyID0gY29vcmRUb0Rpc3BsYXkoe3g6IGFydHdvcmsud2lkdGggLyAyLCB5OiBhcnR3b3JrLmhlaWdodCAvIDJ9KTtcbiAgICAgICAgXG4gICAgICAgIHRoYXQuc2V0T2Zmc2V0KFxuICAgICAgICAgICAgTWF0aC5yb3VuZChvZmZzZXRYICsgd2lkdGggLyAyLjAgLSBhcnR3b3JrQ2VudGVyLngpLFxuICAgICAgICAgICAgTWF0aC5yb3VuZChvZmZzZXRZICsgaGVpZ2h0IC8gMi4wIC0gYXJ0d29ya0NlbnRlci55KVxuICAgICAgICApO1xuICAgIH1cbiAgICBcbiAgICB0aGlzLnNldFpvb20gPSBmdW5jdGlvbihfem9vbSkge1xuICAgICAgICB6b29tID0gX3pvb207XG4gICAgICAgIHVwZGF0ZVRyYW5zZm9ybSgpO1xuICAgIH07XG5cbiAgICB0aGlzLmdldFpvb20gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHpvb207XG4gICAgfTtcbiAgICBcbiAgICB0aGlzLnNldEdyaWRTaXplID0gZnVuY3Rpb24oX2dyaWRTaXplKSB7XG4gICAgICAgIGdyaWRTaXplID0gTWF0aC5tYXgoTWF0aC5yb3VuZChfZ3JpZFNpemUpLCAxKTtcbiAgICAgICAgdGhpcy5yZXBhaW50QWxsKCk7XG4gICAgfTtcblxuICAgIHRoaXMuZ2V0R3JpZFNpemUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIGdyaWRTaXplO1xuICAgIH07XG5cbiAgICB0aGlzLnNldE9mZnNldCA9IGZ1bmN0aW9uKHgsIHkpIHtcbiAgICAgICAgaWYgKGlzTmFOKHgpIHx8IGlzTmFOKHkpKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIkJhZCBvZmZzZXRcIik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBvZmZzZXRYID0geDtcbiAgICAgICAgICAgIG9mZnNldFkgPSB5O1xuICAgICAgICAgICAgdXBkYXRlVHJhbnNmb3JtKCk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgdGhpcy5nZXRPZmZzZXQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHt4OiBvZmZzZXRYLCB5OiBvZmZzZXRZfTtcbiAgICB9O1xuICAgIFxuICAgIHRoaXMuc2V0SW50ZXJwb2xhdGlvbiA9IGZ1bmN0aW9uKGVuYWJsZWQpIHtcbiAgICAgICAgaW50ZXJwb2xhdGlvbiA9IGVuYWJsZWQ7XG5cbiAgICAgICAgc2V0Q2FudmFzSW50ZXJwb2xhdGlvbihjYW52YXNDb250ZXh0LCBlbmFibGVkKTtcblxuICAgICAgICB0aGlzLnJlcGFpbnRBbGwoKTtcbiAgICB9O1xuXG4gICAgdGhpcy5zZXRSb3RhdGlvbiA9IGZ1bmN0aW9uKGFuZ2xlKSB7XG4gICAgICAgIGNhbnZhc1JvdGF0aW9uID0gYW5nbGUgJSAoMiAqIE1hdGguUEkpO1xuICAgICAgICB1cGRhdGVUcmFuc2Zvcm0oKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogR2V0IGNhbnZhcyByb3RhdGlvbiBpbiByYWRpYW5zLlxuICAgICAqIFxuICAgICAqIEByZXR1cm4gZmxvYXRcbiAgICAgKi9cbiAgICB0aGlzLmdldFJvdGF0aW9uID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBjYW52YXNSb3RhdGlvbjtcbiAgICB9O1xuICAgIFxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgcm90YXRpb24gYXMgdGhlIG5lYXJlc3QgbnVtYmVyIG9mIHdob2xlIDkwIGRlZ3JlZSBjbG9ja3dpc2Ugcm90YXRpb25zIChbMC4uM10pXG4gICAgICovXG4gICAgdGhpcy5nZXRSb3RhdGlvbjkwID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhclxuICAgICAgICAgICAgcm90YXRpb24gPSBNYXRoLnJvdW5kKHRoaXMuZ2V0Um90YXRpb24oKSAvIE1hdGguUEkgKiAyKTtcbiAgICAgICAgXG4gICAgICAgIC8vIEp1c3QgaW4gY2FzZTpcbiAgICAgICAgcm90YXRpb24gJT0gNDtcbiAgICAgICAgXG4gICAgICAgIC8vIFdlIHdhbnQgWzAuLjNdIGFzIG91dHB1dFxuICAgICAgICBpZiAocm90YXRpb24gPCAwKSB7XG4gICAgICAgICAgICByb3RhdGlvbiArPSA0O1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gcm90YXRpb247XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqXG4gICAgICogQHBhcmFtIHpvb20gZmxvYXRcbiAgICAgKiBAcGFyYW0gY2VudGVyWCBmbG9hdCBYIGNvLW9yZGluYXRlIGluIHRoZSBjYW52YXMgc3BhY2VcbiAgICAgKiBAcGFyYW0gY2VudGVyWSBmbG9hdCBZIGNvLW9yZGluYXRlIGluIHRoZSBjYW52YXMgc3BhY2VcbiAgICAgKi9cbiAgICBmdW5jdGlvbiB6b29tT25Qb2ludCh6b29tLCBjZW50ZXJYLCBjZW50ZXJZKSB7XG4gICAgICAgIHpvb20gPSBNYXRoLm1heChNSU5fWk9PTSwgTWF0aC5taW4oTUFYX1pPT00sIHpvb20pKTtcbiAgICAgICAgXG4gICAgICAgIGlmICh0aGF0LmdldFpvb20oKSAhPSB6b29tKSB7XG4gICAgICAgICAgICB2YXIgXG4gICAgICAgICAgICAgICAgb2Zmc2V0ID0gdGhhdC5nZXRPZmZzZXQoKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhhdC5zZXRPZmZzZXQoXG4gICAgICAgICAgICAgICAgb2Zmc2V0LnggKyB+figoY2VudGVyWCAtIG9mZnNldC54KSAqICgxIC0gem9vbSAvIHRoYXQuZ2V0Wm9vbSgpKSksIFxuICAgICAgICAgICAgICAgIG9mZnNldC55ICsgfn4oKGNlbnRlclkgLSBvZmZzZXQueSkgKiAoMSAtIHpvb20gLyB0aGF0LmdldFpvb20oKSkpXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB0aGF0LnNldFpvb20oem9vbSk7XG5cbiAgICAgICAgICAgIC8qQ1BDb250cm9sbGVyLkNQVmlld0luZm8gdmlld0luZm8gPSBuZXcgQ1BDb250cm9sbGVyLkNQVmlld0luZm8oKTtcbiAgICAgICAgICAgIHZpZXdJbmZvLnpvb20gPSB6b29tO1xuICAgICAgICAgICAgdmlld0luZm8ub2Zmc2V0WCA9IG9mZnNldFg7XG4gICAgICAgICAgICB2aWV3SW5mby5vZmZzZXRZID0gb2Zmc2V0WTtcbiAgICAgICAgICAgIGNvbnRyb2xsZXIuY2FsbFZpZXdMaXN0ZW5lcnModmlld0luZm8pOyBUT0RPICovXG5cbiAgICAgICAgICAgIHRoYXQucmVwYWludEFsbCgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8vIE1vcmUgYWR2YW5jZWQgem9vbSBtZXRob2RzXG4gICAgZnVuY3Rpb24gem9vbU9uQ2VudGVyKHpvb20pIHtcbiAgICAgICAgdmFyIFxuICAgICAgICAgICAgd2lkdGggPSAkKGNhbnZhcykud2lkdGgoKSxcbiAgICAgICAgICAgIGhlaWdodCA9ICQoY2FudmFzKS5oZWlnaHQoKVxuICAgICAgICAgICAgXG4gICAgICAgIHpvb21PblBvaW50KHpvb20sIHdpZHRoIC8gMiwgaGVpZ2h0IC8gMik7XG4gICAgfVxuXG4gICAgdGhpcy56b29tSW4gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgem9vbU9uQ2VudGVyKHRoaXMuZ2V0Wm9vbSgpICogMik7XG4gICAgfTtcblxuICAgIHRoaXMuem9vbU91dCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB6b29tT25DZW50ZXIodGhpcy5nZXRab29tKCkgKiAwLjUpO1xuICAgIH07XG5cbiAgICB0aGlzLnpvb20xMDAgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgem9vbU9uQ2VudGVyKDEpO1xuICAgICAgICBjZW50ZXJDYW52YXMoKTtcbiAgICB9O1xuXG4gICAgdGhpcy5yZXNldFJvdGF0aW9uID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhclxuICAgICAgICAgICAgY2VudGVyID0ge3g6IGNhbnZhcy53aWR0aCAvIDIsIHk6IGNhbnZhcy5oZWlnaHQgLyAyfSxcblxuICAgICAgICAgICAgcm90VHJhbnMgPSBuZXcgQ1BUcmFuc2Zvcm0oKTtcbiAgICAgICAgXG4gICAgICAgIHJvdFRyYW5zLnJvdGF0ZUFyb3VuZFBvaW50KC10aGlzLmdldFJvdGF0aW9uKCksIGNlbnRlci54LCBjZW50ZXIueSk7XG4gICAgICAgIHJvdFRyYW5zLm11bHRpcGx5KHRyYW5zZm9ybSk7XG5cbiAgICAgICAgdGhpcy5zZXRPZmZzZXQofn5yb3RUcmFucy5nZXRUcmFuc2xhdGVYKCksIH5+cm90VHJhbnMuZ2V0VHJhbnNsYXRlWSgpKTtcbiAgICAgICAgdGhpcy5zZXRSb3RhdGlvbigwKTtcbiAgICB9O1xuICAgIFxuICAgIC8qKlxuICAgICAqIEFkZCB0aGUgcG9pbnRlciBwcmVzc3VyZSBmaWVsZCB0byB0aGUgZ2l2ZW4gcG9pbnRlciBldmVudC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBnZXRQb2ludGVyUHJlc3N1cmUoZSkge1xuICAgICAgICAvLyBVc2UgV2Fjb20gcHJlc3N1cmUgaW4gcHJlZmVyZW5jZSB0byBwb2ludGVyIGV2ZW50IHByZXNzdXJlIChpZiBwcmVzZW50KVxuICAgICAgICBpZiAod2Fjb21QZW5Eb3duKSB7XG4gICAgICAgICAgICByZXR1cm4gdGFibGV0LmdldFByZXNzdXJlKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvKiBJbiB0aGUgUG9pbnRlciBFdmVudHMgQVBJLCBtaWNlIGhhdmUgYSBkZWZhdWx0IHByZXNzdXJlIG9mIDAuNSwgYnV0IHdlIHdhbnQgMS4wLiBTaW5jZSB3ZSBjYW4ndCBcbiAgICAgICAgICAgICAqIGRpc3Rpbmd1aXNoIGJldHdlZW4gbWljZSBhbmQgcGVucyBhdCB0aGlzIHBvaW50LCB3ZSBkb24ndCBoYXZlIGFueSBiZXR0ZXIgb3B0aW9uczpcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgcmV0dXJuIGUucHJlc3N1cmUgKiAyO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgdmFyXG4gICAgICAgIG1vdXNlV2hlZWxEZWJvdW5jZSA9IGZhbHNlO1xuXG4gICAgZnVuY3Rpb24gaGFuZGxlTW91c2VXaGVlbChlKSB7XG4gICAgICAgIGlmIChlLmRlbHRhWSAhPSAwKSB7XG4gICAgICAgICAgICBpZiAoIW1vdXNlV2hlZWxEZWJvdW5jZSB8fCBNYXRoLmFicyhlLmRlbHRhWSkgPiAyMCkge1xuICAgICAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgICAgICBmYWN0b3I7XG5cbiAgICAgICAgICAgICAgICBpZiAoZS5kZWx0YVkgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGZhY3RvciA9IDEgLyAxLjE1O1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGZhY3RvciA9IDEuMTU7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgICAgIGNhbnZhc1BvaW50ID0gbW91c2VDb29yZFRvQ2FudmFzKHt4OiBlLnBhZ2VYLCB5OiBlLnBhZ2VZfSksXG4gICAgICAgICAgICAgICAgICAgIGRvY1BvaW50ID0gY29vcmRUb0RvY3VtZW50KGNhbnZhc1BvaW50KTtcblxuICAgICAgICAgICAgICAgIGlmIChhcnR3b3JrLmlzUG9pbnRXaXRoaW4oZG9jUG9pbnQueCwgZG9jUG9pbnQueSkpIHtcbiAgICAgICAgICAgICAgICAgICAgem9vbU9uUG9pbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGF0LmdldFpvb20oKSAqIGZhY3RvcixcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbnZhc1BvaW50LngsXG4gICAgICAgICAgICAgICAgICAgICAgICBjYW52YXNQb2ludC55XG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgem9vbU9uUG9pbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGF0LmdldFpvb20oKSAqIGZhY3RvcixcbiAgICAgICAgICAgICAgICAgICAgICAgIG9mZnNldFggKyB+fihhcnR3b3JrLndpZHRoICogem9vbSAvIDIpLFxuICAgICAgICAgICAgICAgICAgICAgICAgb2Zmc2V0WSArIH5+KGFydHdvcmsuaGVpZ2h0ICogem9vbSAvIDIpXG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgbW91c2VXaGVlbERlYm91bmNlID0gbW91c2VXaGVlbERlYm91bmNlIHx8IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIG1vdXNlV2hlZWxEZWJvdW5jZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH0sIDUwKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgdmFyXG4gICAgICAgIGNhbnZhc0NsaWVudFJlY3Q7XG5cbiAgICBmdW5jdGlvbiBoYW5kbGVQb2ludGVyTW92ZShlKSB7XG4gICAgICAgIC8vIFVzZSB0aGUgY2FjaGVkIHBvc2l0aW9uIG9mIHRoZSBjYW52YXMgb24gdGhlIHBhZ2UgaWYgcG9zc2libGVcbiAgICAgICAgaWYgKCFjYW52YXNDbGllbnRSZWN0KSB7XG4gICAgICAgICAgICBjYW52YXNDbGllbnRSZWN0ID0gY2FudmFzLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgLyogU3RvcmUgdGhlc2UgZ2xvYmFsbHkgZm9yIHRoZSBldmVudCBoYW5kbGVycyB0byByZWZlciB0byAod2UnZCB3cml0ZSB0byB0aGUgZXZlbnQgaXRzZWxmIGJ1dCBzb21lIGJyb3dzZXJzXG4gICAgICAgICAqIGRvbid0IGVuam95IHRoYXQpXG4gICAgICAgICAqL1xuICAgICAgICBtb3VzZVggPSBlLmNsaWVudFggLSBjYW52YXNDbGllbnRSZWN0LmxlZnQ7XG4gICAgICAgIG1vdXNlWSA9IGUuY2xpZW50WSAtIGNhbnZhc0NsaWVudFJlY3QudG9wO1xuXG4gICAgICAgIC8vIEZsYWdzIHVzZWQgYnkgZS5idXR0b25zXG4gICAgICAgIGNvbnN0XG4gICAgICAgICAgICBGTEFHX1BSSU1BUlkgPSAxLFxuICAgICAgICAgICAgRkxBR19TRUNPTkRBUlkgPSAyLFxuICAgICAgICAgICAgRkxBR19XSEVFTCA9IDQ7XG5cbiAgICAgICAgdmFyXG4gICAgICAgICAgICBpc0RyYWdnaW5nID0gZS5idXR0b25zICE9IDAsXG4gICAgICAgICAgICBwcmVzc3VyZSA9IGdldFBvaW50ZXJQcmVzc3VyZShlKTtcblxuICAgICAgICAvLyBEaWQgYW55IG9mIG91ciBidXR0b25zIGNoYW5nZSBzdGF0ZT9cbiAgICAgICAgaWYgKCgoZS5idXR0b25zICYgRkxBR19QUklNQVJZKSAhPSAwKSAhPSBtb3VzZURvd25bQlVUVE9OX1BSSU1BUlldKSB7XG4gICAgICAgICAgICBtb3VzZURvd25bQlVUVE9OX1BSSU1BUlldID0gIW1vdXNlRG93bltCVVRUT05fUFJJTUFSWV07XG5cbiAgICAgICAgICAgIGlmIChtb3VzZURvd25bQlVUVE9OX1BSSU1BUlldKSB7XG4gICAgICAgICAgICAgICAgbW9kZVN0YWNrLm1vdXNlRG93bihlLCBCVVRUT05fUFJJTUFSWSwgcHJlc3N1cmUpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBtb2RlU3RhY2subW91c2VVcChlLCBCVVRUT05fUFJJTUFSWSwgcHJlc3N1cmUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCgoZS5idXR0b25zICYgRkxBR19TRUNPTkRBUlkpICE9IDApICE9IG1vdXNlRG93bltCVVRUT05fU0VDT05EQVJZXSkge1xuICAgICAgICAgICAgbW91c2VEb3duW0JVVFRPTl9TRUNPTkRBUlldID0gIW1vdXNlRG93bltCVVRUT05fU0VDT05EQVJZXTtcblxuICAgICAgICAgICAgaWYgKG1vdXNlRG93bltCVVRUT05fU0VDT05EQVJZXSkge1xuICAgICAgICAgICAgICAgIG1vZGVTdGFjay5tb3VzZURvd24oZSwgQlVUVE9OX1NFQ09OREFSWSwgcHJlc3N1cmUpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBtb2RlU3RhY2subW91c2VVcChlLCBCVVRUT05fU0VDT05EQVJZLCBwcmVzc3VyZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoKChlLmJ1dHRvbnMgJiBGTEFHX1dIRUVMKSAhPSAwKSAhPSBtb3VzZURvd25bQlVUVE9OX1dIRUVMXSkge1xuICAgICAgICAgICAgbW91c2VEb3duW0JVVFRPTl9XSEVFTF0gPSAhbW91c2VEb3duW0JVVFRPTl9XSEVFTF07XG5cbiAgICAgICAgICAgIGlmIChtb3VzZURvd25bQlVUVE9OX1dIRUVMXSkge1xuICAgICAgICAgICAgICAgIG1vZGVTdGFjay5tb3VzZURvd24oZSwgQlVUVE9OX1dIRUVMLCBwcmVzc3VyZSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIG1vZGVTdGFjay5tb3VzZVVwKGUsIEJVVFRPTl9XSEVFTCwgcHJlc3N1cmUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGlzRHJhZ2dpbmcpIHtcbiAgICAgICAgICAgIG1vZGVTdGFjay5tb3VzZURyYWcoZSwgcHJlc3N1cmUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbW9kZVN0YWNrLm1vdXNlTW92ZShlLCBwcmVzc3VyZSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBDYWxsZWQgd2hlbiBhbGwgbW91c2UvcG9pbnRlciBidXR0b25zIGFyZSByZWxlYXNlZFxuICAgIGZ1bmN0aW9uIGhhbmRsZVBvaW50ZXJVcChlKSB7XG4gICAgICAgIG1vdXNlRG93bltCVVRUT05fUFJJTUFSWV0gPSBmYWxzZTtcbiAgICAgICAgbW91c2VEb3duW0JVVFRPTl9TRUNPTkRBUlldID0gZmFsc2U7XG4gICAgICAgIG1vdXNlRG93bltCVVRUT05fV0hFRUxdID0gZmFsc2U7XG5cbiAgICAgICAgd2Fjb21QZW5Eb3duID0gZmFsc2U7XG4gICAgICAgIG1vZGVTdGFjay5tb3VzZVVwKGUsIGUuYnV0dG9uLCAwLjApO1xuICAgICAgICBjYW52YXMucmVsZWFzZVBvaW50ZXJDYXB0dXJlKGUucG9pbnRlcklkKTtcbiAgICB9XG5cbiAgICAvLyBDYWxsZWQgd2hlbiB0aGUgZmlyc3QgYnV0dG9uIG9uIHRoZSBwb2ludGVyIGlzIGRlcHJlc3NlZCAvIHBlbiB0b3VjaGVzIHRoZSBzdXJmYWNlXG4gICAgZnVuY3Rpb24gaGFuZGxlUG9pbnRlckRvd24oZSkge1xuICAgICAgICBjYW52YXMuc2V0UG9pbnRlckNhcHR1cmUoZS5wb2ludGVySWQpO1xuXG4gICAgICAgIGNhbnZhc0NsaWVudFJlY3QgPSBjYW52YXMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG5cbiAgICAgICAgLy8gU3RvcmUgdGhlc2UgZ2xvYmFsbHkgZm9yIHRoZSBldmVudCBoYW5kbGVycyB0byByZWZlciB0b1xuICAgICAgICBtb3VzZVggPSBlLmNsaWVudFggLSBjYW52YXNDbGllbnRSZWN0LmxlZnQ7XG4gICAgICAgIG1vdXNlWSA9IGUuY2xpZW50WSAtIGNhbnZhc0NsaWVudFJlY3QudG9wO1xuXG4gICAgICAgIHdhY29tUGVuRG93biA9IHRhYmxldC5pc1BlbigpO1xuXG4gICAgICAgIG1vdXNlRG93bltCVVRUT05fUFJJTUFSWV0gPSBmYWxzZTtcbiAgICAgICAgbW91c2VEb3duW0JVVFRPTl9TRUNPTkRBUlldID0gZmFsc2U7XG4gICAgICAgIG1vdXNlRG93bltCVVRUT05fV0hFRUxdID0gZmFsc2U7XG5cbiAgICAgICAgbW91c2VEb3duW2UuYnV0dG9uXSA9IHRydWU7XG5cbiAgICAgICAgbW9kZVN0YWNrLm1vdXNlRG93bihlLCBlLmJ1dHRvbiwgZ2V0UG9pbnRlclByZXNzdXJlKGUpKTtcbiAgICB9XG4gICAgXG4gICAgZnVuY3Rpb24gaGFuZGxlS2V5RG93bihlKSB7XG4gICAgICAgIG1vZGVTdGFjay5rZXlEb3duKGUpO1xuICAgIH1cbiAgICBcbiAgICBmdW5jdGlvbiBoYW5kbGVLZXlVcChlKSB7XG4gICAgICAgIG1vZGVTdGFjay5rZXlVcChlKTtcbiAgICB9XG4gICAgXG4gICAgLy8gR2V0IHRoZSBET00gZWxlbWVudCBmb3IgdGhlIGNhbnZhcyBhcmVhXG4gICAgdGhpcy5nZXRFbGVtZW50ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBjYW52YXNDb250YWluZXI7XG4gICAgfTtcbiAgICBcbiAgICAvKipcbiAgICAgKiBTY2hlZHVsZSBhIHJlcGFpbnQgZm9yIHRoZSBjdXJyZW50IHJlcGFpbnQgcmVnaW9uLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHJlcGFpbnQoKSB7XG4gICAgICAgIGlmICghc2NoZWR1bGVkUmVwYWludCkge1xuICAgICAgICAgICAgc2NoZWR1bGVkUmVwYWludCA9IHRydWU7XG4gICAgICAgICAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHRoYXQucGFpbnQoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8qKlxuICAgICAqIFNjaGVkdWxlIGEgcmVwYWludCBmb3IgdGhlIGVudGlyZSBzY3JlZW4uXG4gICAgICovXG4gICAgdGhpcy5yZXBhaW50QWxsID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJlcGFpbnRSZWdpb24ubGVmdCA9IDA7XG4gICAgICAgIHJlcGFpbnRSZWdpb24udG9wID0gMDtcbiAgICAgICAgcmVwYWludFJlZ2lvbi5yaWdodCA9IGNhbnZhcy53aWR0aDtcbiAgICAgICAgcmVwYWludFJlZ2lvbi5ib3R0b20gPSBjYW52YXMuaGVpZ2h0O1xuICAgICAgICBcbiAgICAgICAgcmVwYWludCgpO1xuICAgIH07XG4gICAgXG4gICAgLyoqXG4gICAgICogU2NoZWR1bGUgYSByZXBhaW50IGZvciBhbiBhcmVhIG9mIHRoZSBzY3JlZW4gZm9yIGxhdGVyLlxuICAgICAqIFxuICAgICAqIEBwYXJhbSByZWN0IENQUmVjdCBSZWdpb24gdGhhdCBzaG91bGQgYmUgcmVwYWludGVkIHVzaW5nIGRpc3BsYXkgY29vcmRpbmF0ZXNcbiAgICAgKi9cbiAgICBmdW5jdGlvbiByZXBhaW50UmVjdChyZWN0KSB7XG4gICAgICAgIHJlcGFpbnRSZWdpb24udW5pb24ocmVjdCk7XG4gICAgICAgIFxuICAgICAgICByZXBhaW50KCk7XG4gICAgfVxuXG5cdC8qKlxuICAgICAqIFNldCB0aGUgZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uIGFuZCBmaWxsL3N0cm9rZSBjb2xvciB1cCB0byBtYXhpbWl6ZSBjb250cmFzdCBmb3IgdGhlIGRyYXduIGl0ZW1zXG4gICAgICogYWdhaW5zdCBhcmJpdHJhcnkgYmFja2dyb3VuZHMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gY2FudmFzQ29udGV4dFxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBraW5kIC0gXCJzdHJva2VcIiBvciBcImZpbGxcIiBkZXBlbmRpbmcgb24gd2hpY2ggY29sb3VyIHlvdSdkIGxpa2UgdG8gc2V0XG4gICAgICovXG4gICAgZnVuY3Rpb24gc2V0Q29udHJhc3RpbmdEcmF3U3R5bGUoY2FudmFzQ29udGV4dCwga2luZCkge1xuICAgICAgICBraW5kID0ga2luZCArIFwiU3R5bGVcIjtcbiAgICAgICAgY2FudmFzQ29udGV4dC5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb24gPSAnZXhjbHVzaW9uJztcblxuICAgICAgICBpZiAoY2FudmFzQ29udGV4dC5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb24gPT0gXCJleGNsdXNpb25cIikge1xuICAgICAgICAgICAgLy8gV2hpdGUgKyBleGNsdXNpb24gaW52ZXJ0cyB0aGUgY29sb3JzIHVuZGVybmVhdGgsIGdpdmluZyB1cyBnb29kIGNvbnRyYXN0XG4gICAgICAgICAgICBjYW52YXNDb250ZXh0W2tpbmRdID0gJ3doaXRlJztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIElFIEVkZ2UgZG9lc24ndCBzdXBwb3J0IEV4Y2x1c2lvbiwgc28gaG93IGFib3V0IERpZmZlcmVuY2Ugd2l0aCBtaWQtZ3JleSBpbnN0ZWFkXG4gICAgICAgICAgICAvLyBUaGlzIGlzIHZpc2libGUgb24gYmxhY2sgYW5kIHdoaXRlLCBidXQgZGlzYXBwZWFycyBvbiBhIGdyZXkgYmFja2dyb3VuZFxuICAgICAgICAgICAgY2FudmFzQ29udGV4dC5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb24gPSAnZGlmZmVyZW5jZSc7XG4gICAgICAgICAgICBjYW52YXNDb250ZXh0W2tpbmRdID0gJyM4ODgnO1xuXG4gICAgICAgICAgICAvLyBGb3Igc3VwZXIgZHVtYiBicm93c2VycyAob25seSBzdXBwb3J0IHNvdXJjZS1vdmVyKSwgYXQgbGVhc3QgZG9uJ3QgbWFrZSB0aGUgY3Vyc29yIGludmlzaWJsZSBvbiBhIHdoaXRlIEJHIVxuICAgICAgICAgICAgaWYgKGNhbnZhc0NvbnRleHQuZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uICE9IFwiZGlmZmVyZW5jZVwiKSB7XG4gICAgICAgICAgICAgICAgY2FudmFzQ29udGV4dFtraW5kXSA9ICdibGFjayc7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgdGhpcy5wYWludCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXJcbiAgICAgICAgICAgIGRyYXdpbmdXYXNDbGlwcGVkID0gZmFsc2U7XG4gICAgICAgIFxuICAgICAgICBzY2hlZHVsZWRSZXBhaW50ID0gZmFsc2U7XG4gICAgICAgIFxuICAgICAgICAvKiBDbGlwIGRyYXdpbmcgdG8gdGhlIGFyZWEgb2YgdGhlIHNjcmVlbiB3ZSB3YW50IHRvIHJlcGFpbnQgKi9cbiAgICAgICAgaWYgKCFyZXBhaW50UmVnaW9uLmlzRW1wdHkoKSkge1xuICAgICAgICAgICAgY2FudmFzQ29udGV4dC5zYXZlKCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChjYW52YXNDb250ZXh0LmNsaXApIHtcbiAgICAgICAgICAgICAgICBjYW52YXNDb250ZXh0LmJlZ2luUGF0aCgpO1xuXG4gICAgICAgICAgICAgICAgcmVwYWludFJlZ2lvbi5sZWZ0ID0gcmVwYWludFJlZ2lvbi5sZWZ0IHwgMDsgXG4gICAgICAgICAgICAgICAgcmVwYWludFJlZ2lvbi50b3AgPSByZXBhaW50UmVnaW9uLnRvcCB8IDA7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgY2FudmFzQ29udGV4dC5yZWN0KFxuICAgICAgICAgICAgICAgICAgICByZXBhaW50UmVnaW9uLmxlZnQsXG4gICAgICAgICAgICAgICAgICAgIHJlcGFpbnRSZWdpb24udG9wLFxuICAgICAgICAgICAgICAgICAgICBNYXRoLmNlaWwocmVwYWludFJlZ2lvbi5nZXRXaWR0aCgpKSxcbiAgICAgICAgICAgICAgICAgICAgTWF0aC5jZWlsKHJlcGFpbnRSZWdpb24uZ2V0SGVpZ2h0KCkpXG4gICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgIGNhbnZhc0NvbnRleHQuY2xpcCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBkcmF3aW5nV2FzQ2xpcHBlZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8qIENvcHkgcGl4ZWxzIHRoYXQgY2hhbmdlZCBpbiB0aGUgZG9jdW1lbnQgaW50byBvdXIgbG9jYWwgZnVzZWQgaW1hZ2UgY2FjaGUgKi9cbiAgICAgICAgaWYgKCFhcnR3b3JrVXBkYXRlUmVnaW9uLmlzRW1wdHkoKSkge1xuICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgaW1hZ2VEYXRhID0gYXJ0d29yay5mdXNpb25MYXllcnMoKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgYXJ0d29ya0NhbnZhc0NvbnRleHQucHV0SW1hZ2VEYXRhKFxuICAgICAgICAgICAgICAgIGltYWdlRGF0YSwgMCwgMCwgYXJ0d29ya1VwZGF0ZVJlZ2lvbi5sZWZ0LCBhcnR3b3JrVXBkYXRlUmVnaW9uLnRvcCwgYXJ0d29ya1VwZGF0ZVJlZ2lvbi5nZXRXaWR0aCgpLCBhcnR3b3JrVXBkYXRlUmVnaW9uLmdldEhlaWdodCgpXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBhcnR3b3JrVXBkYXRlUmVnaW9uLm1ha2VFbXB0eSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgY2FudmFzQ29udGV4dC5maWxsU3R5bGUgPSAnIzYwNjA2MCc7XG4gICAgICAgIGNhbnZhc0NvbnRleHQuZmlsbFJlY3QoMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTtcbiAgICAgICAgXG4gICAgICAgIC8vIFRyYW5zZm9ybSB0aGUgY29vcmRpbmF0ZSBzeXN0ZW0gdG8gYnJpbmcgdGhlIGRvY3VtZW50IGludG8gdGhlIHJpZ2h0IHBvc2l0aW9uIG9uIHRoZSBzY3JlZW4gKHRyYW5zbGF0ZS96b29tL2V0YylcbiAgICAgICAgY2FudmFzQ29udGV4dC5zYXZlKCk7XG4gICAgICAgIHtcbiAgICAgICAgICAgIGNhbnZhc0NvbnRleHQuc2V0VHJhbnNmb3JtKHRyYW5zZm9ybS5tWzBdLCB0cmFuc2Zvcm0ubVsxXSwgdHJhbnNmb3JtLm1bMl0sIHRyYW5zZm9ybS5tWzNdLCB0cmFuc2Zvcm0ubVs0XSwgdHJhbnNmb3JtLm1bNV0pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjYW52YXNDb250ZXh0LmZpbGxTdHlsZSA9IGNoZWNrZXJib2FyZFBhdHRlcm47XG4gICAgICAgICAgICBjYW52YXNDb250ZXh0LmZpbGxSZWN0KDAsIDAsIGFydHdvcmsud2lkdGgsIGFydHdvcmsuaGVpZ2h0KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY2FudmFzQ29udGV4dC5kcmF3SW1hZ2UoXG4gICAgICAgICAgICAgICAgYXJ0d29ya0NhbnZhcywgMCwgMCwgYXJ0d29ya0NhbnZhcy53aWR0aCwgYXJ0d29ya0NhbnZhcy5oZWlnaHRcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgICAgY2FudmFzQ29udGV4dC5yZXN0b3JlKCk7XG4gICAgICAgIFxuICAgICAgICAvLyBUaGUgcmVzdCBvZiB0aGUgZHJhd2luZyBoYXBwZW5zIHVzaW5nIHRoZSBvcmlnaW5hbCBzY3JlZW4gY29vcmRpbmF0ZSBzeXN0ZW1cbiAgICAgICAgc2V0Q29udHJhc3RpbmdEcmF3U3R5bGUoY2FudmFzQ29udGV4dCwgXCJzdHJva2VcIik7XG5cbiAgICAgICAgY2FudmFzQ29udGV4dC5saW5lV2lkdGggPSAxLjA7XG4gICAgICAgIFxuICAgICAgICAvLyBEcmF3IHRoZSBhcnR3b3JrIHNlbGVjdGlvbiBzbyBsb25nIGFzIHdlJ3JlIG5vdCBpbiB0aGUgbWlkZGxlIG9mIHNlbGVjdGluZyBhIG5ldyByZWN0YW5nbGVcbiAgICAgICAgaWYgKCFhcnR3b3JrLmdldFNlbGVjdGlvbigpLmlzRW1wdHkoKSAmJiAhKG1vZGVTdGFjay5wZWVrKCkgaW5zdGFuY2VvZiBDUFJlY3RTZWxlY3Rpb25Nb2RlICYmIG1vZGVTdGFjay5wZWVrKCkuY2FwdHVyZSkpIHtcbiAgICAgICAgICAgIGNhbnZhc0NvbnRleHQuc2V0TGluZURhc2goWzMsIDJdKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgcGxvdFNlbGVjdGlvblJlY3QoY2FudmFzQ29udGV4dCwgYXJ0d29yay5nZXRTZWxlY3Rpb24oKSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNhbnZhc0NvbnRleHQuc2V0TGluZURhc2goW10pO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBEcmF3IGdyaWRcbiAgICAgICAgaWYgKHNob3dHcmlkKSB7XG4gICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICBib3VuZHMgPSBhcnR3b3JrLmdldEJvdW5kcygpLFxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGdyaWRWaXN1YWxQaXRjaCA9IHpvb20gKiBncmlkU2l6ZTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLyogSWYgdGhlIGdyaWQgaXMgZ29pbmcgdG8gYmUgbWluaXNjdWxlIG9uIHRoZSBzY3JlZW4gKGJhc2ljYWxseSBqdXN0IGNvdmVyaW5nL2ludmVydGluZyB0aGUgZW50aXJlIGFydHdvcmssXG4gICAgICAgICAgICAgKiBkbyBub3QgcGFpbnQgaXQuXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGlmIChncmlkVmlzdWFsUGl0Y2ggPiAyKSB7XG4gICAgICAgICAgICAgICAgY2FudmFzQ29udGV4dC5iZWdpblBhdGgoKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBWZXJ0aWNhbCBsaW5lc1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSBncmlkU2l6ZSAtIDE7IGkgPCBib3VuZHMucmlnaHQ7IGkgKz0gZ3JpZFNpemUpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgICAgICAgICBwMSA9IGNvb3JkVG9EaXNwbGF5KHt4OiBpLCB5OiBib3VuZHMudG9wfSksXG4gICAgICAgICAgICAgICAgICAgICAgICBwMiA9IGNvb3JkVG9EaXNwbGF5KHt4OiBpLCB5OiBib3VuZHMuYm90dG9tfSk7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBjYW52YXNDb250ZXh0Lm1vdmVUbyhwMS54ICsgMC41LCBwMS55ICsgMC41KTtcbiAgICAgICAgICAgICAgICAgICAgY2FudmFzQ29udGV4dC5saW5lVG8ocDIueCArIDAuNSwgcDIueSArIDAuNSk7XG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIC8vIEhvcml6b250YWwgbGluZXNcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gZ3JpZFNpemUgLSAxOyBpIDwgYm91bmRzLmJvdHRvbTsgaSArPSBncmlkU2l6ZSkge1xuICAgICAgICAgICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICAgICAgICAgIHAxID0gY29vcmRUb0Rpc3BsYXkoe3g6IDAsIHk6IGl9KSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHAyID0gY29vcmRUb0Rpc3BsYXkoe3g6IGJvdW5kcy5yaWdodCwgeTogaX0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGNhbnZhc0NvbnRleHQubW92ZVRvKHAxLnggKyAwLjUsIHAxLnkgKyAwLjUpO1xuICAgICAgICAgICAgICAgICAgICBjYW52YXNDb250ZXh0LmxpbmVUbyhwMi54ICsgMC41LCBwMi55ICsgMC41KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgY2FudmFzQ29udGV4dC5zdHJva2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gQWRkaXRpb25hbCBkcmF3aW5nIGJ5IHRoZSBjdXJyZW50IG1vZGVcbiAgICAgICAgbW9kZVN0YWNrLnBhaW50KGNhbnZhc0NvbnRleHQpO1xuICAgICAgICBcbiAgICAgICAgY2FudmFzQ29udGV4dC5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb24gPSAnc291cmNlLW92ZXInO1xuICAgICAgICBcbiAgICAgICAgaWYgKGRyYXdpbmdXYXNDbGlwcGVkKSB7XG4gICAgICAgICAgICByZXBhaW50UmVnaW9uLm1ha2VFbXB0eSgpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjYW52YXNDb250ZXh0LnJlc3RvcmUoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgXG4gICAgdGhpcy5zaG93R3JpZCA9IGZ1bmN0aW9uKHNob3cpIHtcbiAgICAgICAgc2hvd0dyaWQgPSBzaG93O1xuICAgICAgICB0aGlzLnJlcGFpbnRBbGwoKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogUmVzaXplIHRoZSBjYW52YXMgYXJlYSB0byB0aGUgZ2l2ZW4gaGVpZ2h0IChpbiBwaXhlbHMpXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge2ludH0gaGVpZ2h0IE5ldyBjYW52YXMgYXJlYSBoZWlnaHQgaW4gQ1NTIHBpeGVsc1xuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gc2tpcENlbnRlciBUcnVlIGlmIHRoZSBjYW52YXMgc2hvdWxkIG5vdCBiZSByZS1jZW50ZXJlZFxuICAgICAqL1xuICAgIHRoaXMucmVzaXplID0gZnVuY3Rpb24oaGVpZ2h0LCBza2lwQ2VudGVyKSB7XG4gICAgICAgIC8vIExlYXZlIHJvb20gZm9yIHRoZSBib3R0b20gc2Nyb2xsYmFyXG4gICAgICAgIGhlaWdodCAtPSAkKGNhbnZhc0NvbnRhaW5lckJvdHRvbSkub3V0ZXJIZWlnaHQoKTtcblxuICAgICAgICAkKGNhbnZhcykuY3NzKCdoZWlnaHQnLCBoZWlnaHQgKyBcInB4XCIpO1xuXG4gICAgICAgIGNhbnZhcy53aWR0aCA9ICQoY2FudmFzKS53aWR0aCgpO1xuICAgICAgICBjYW52YXMuaGVpZ2h0ID0gaGVpZ2h0O1xuXG4gICAgICAgIGNhbnZhc0NsaWVudFJlY3QgPSBudWxsO1xuXG4gICAgICAgIGlmICghc2tpcENlbnRlcikge1xuICAgICAgICAgICAgY2VudGVyQ2FudmFzKCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBJbnRlcnBvbGF0aW9uIHByb3BlcnR5IGdldHMgcmVzZXQgd2hlbiBjYW52YXMgcmVzaXplc1xuICAgICAgICB0aGlzLnNldEludGVycG9sYXRpb24oaW50ZXJwb2xhdGlvbik7XG5cbiAgICAgICAgdGhpcy5yZXBhaW50QWxsKCk7XG4gICAgfTtcblxuICAgIGNvbnRyb2xsZXIub24oXCJ0b29sQ2hhbmdlXCIsIGZ1bmN0aW9uKHRvb2wsIHRvb2xJbmZvKSB7XG4gICAgICAgIHZhclxuICAgICAgICAgICAgbmV3TW9kZSA9IGRyYXdpbmdNb2Rlc1t0b29sSW5mby5zdHJva2VNb2RlXTtcblxuICAgICAgICAvLyBJZiB3ZSBjdXJyZW50bHkgaGF2ZSBhbnkgZHJhd2luZyBtb2RlcyBhY3RpdmUsIHN3aXRjaCB0aGVtIHRvIHRoZSBkcmF3aW5nIG1vZGUgb2YgdGhlIG5ldyB0b29sXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbW9kZVN0YWNrLm1vZGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAobW9kZVN0YWNrLm1vZGVzW2ldIGluc3RhbmNlb2YgQ1BEcmF3aW5nTW9kZSkge1xuICAgICAgICAgICAgICAgIG1vZGVTdGFjay5tb2Rlc1tpXS5sZWF2ZSgpO1xuICAgICAgICAgICAgICAgIG1vZGVTdGFjay5tb2Rlc1tpXSA9IG5ld01vZGU7XG4gICAgICAgICAgICAgICAgbW9kZVN0YWNrLm1vZGVzW2ldLmVudGVyKCk7XG5cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGN1ckRyYXdNb2RlID0gbmV3TW9kZTtcbiAgICB9KTtcbiAgICBcbiAgICBjb250cm9sbGVyLm9uKFwibW9kZUNoYW5nZVwiLCBmdW5jdGlvbihtb2RlKSB7XG4gICAgICAgIHZhclxuICAgICAgICAgICAgbmV3TW9kZTtcblxuICAgICAgICBzd2l0Y2ggKG1vZGUpIHtcbiAgICAgICAgICAgIGNhc2UgQ2hpY2tlblBhaW50Lk1fRFJBVzpcbiAgICAgICAgICAgICAgICBuZXdNb2RlID0gY3VyRHJhd01vZGU7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgXG4gICAgICAgICAgICBjYXNlIENoaWNrZW5QYWludC5NX0ZMT09ERklMTDpcbiAgICAgICAgICAgICAgICBuZXdNb2RlID0gZmxvb2RGaWxsTW9kZTtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgY2FzZSBDaGlja2VuUGFpbnQuTV9HUkFESUVOVEZJTEw6XG4gICAgICAgICAgICAgICAgbmV3TW9kZSA9IGdyYWRpZW50RmlsbE1vZGU7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIGNhc2UgQ2hpY2tlblBhaW50Lk1fUkVDVF9TRUxFQ1RJT046XG4gICAgICAgICAgICAgICAgbmV3TW9kZSA9IHJlY3RTZWxlY3Rpb25Nb2RlO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgIFxuICAgICAgICAgICAgY2FzZSBDaGlja2VuUGFpbnQuTV9NT1ZFX1RPT0w6XG4gICAgICAgICAgICAgICAgbmV3TW9kZSA9IG1vdmVUb29sTW9kZTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICBcbiAgICAgICAgICAgIGNhc2UgQ2hpY2tlblBhaW50Lk1fUk9UQVRFX0NBTlZBUzpcbiAgICAgICAgICAgICAgICBuZXdNb2RlID0gcm90YXRlQ2FudmFzTW9kZTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICBcbiAgICAgICAgICAgIGNhc2UgQ2hpY2tlblBhaW50Lk1fQ09MT1JfUElDS0VSOlxuICAgICAgICAgICAgICAgIG5ld01vZGUgPSBjb2xvclBpY2tlck1vZGU7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIGNhc2UgQ2hpY2tlblBhaW50Lk1fVFJBTlNGT1JNOlxuICAgICAgICAgICAgICAgIG5ld01vZGUgPSB0cmFuc2Zvcm1Nb2RlO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG5cbiAgICAgICAgbW9kZVN0YWNrLnNldFVzZXJNb2RlKG5ld01vZGUpO1xuICAgIH0pO1xuICAgIFxuICAgIC8vXG4gICAgLy8gTW9kZXMgc3lzdGVtOiBtb2RlcyBjb250cm9sIHRoZSB3YXkgdGhlIEdVSSBpcyByZWFjdGluZyB0byB0aGUgdXNlciBpbnB1dFxuICAgIC8vIEFsbCB0aGUgdG9vbHMgYXJlIGltcGxlbWVudGVkIHRocm91Z2ggbW9kZXNcbiAgICAvL1xuICAgIFxuICAgIGRlZmF1bHRNb2RlID0gbmV3IENQRGVmYXVsdE1vZGUoKTtcbiAgICBjb2xvclBpY2tlck1vZGUgPSBuZXcgQ1BDb2xvclBpY2tlck1vZGUoKTtcbiAgICBwYW5Nb2RlID0gbmV3IENQUGFuTW9kZSgpO1xuICAgIHJvdGF0ZUNhbnZhc01vZGUgPSBuZXcgQ1BSb3RhdGVDYW52YXNNb2RlKCk7XG4gICAgZmxvb2RGaWxsTW9kZSA9IG5ldyBDUEZsb29kRmlsbE1vZGUoKTtcbiAgICBncmFkaWVudEZpbGxNb2RlID0gbmV3IENQR3JhZGllbnRGaWxsTW9kZSgpO1xuICAgIHJlY3RTZWxlY3Rpb25Nb2RlID0gbmV3IENQUmVjdFNlbGVjdGlvbk1vZGUoKTtcbiAgICBtb3ZlVG9vbE1vZGUgPSBuZXcgQ1BNb3ZlVG9vbE1vZGUoKTtcbiAgICB0cmFuc2Zvcm1Nb2RlID0gbmV3IENQVHJhbnNmb3JtTW9kZSgpO1xuXG4gICAgLy8gdGhpcyBtdXN0IGNvcnJlc3BvbmQgdG8gdGhlIHN0cm9rZSBtb2RlcyBkZWZpbmVkIGluIENQVG9vbEluZm9cbiAgICBkcmF3aW5nTW9kZXMgPSBbbmV3IENQRnJlZWhhbmRNb2RlKCksIG5ldyBDUExpbmVNb2RlKCksIG5ldyBDUEJlemllck1vZGUoKV07XG5cbiAgICBjdXJEcmF3TW9kZSA9IGRyYXdpbmdNb2Rlc1tDUEJydXNoSW5mby5TTV9GUkVFSEFORF07XG5cbiAgICAvLyBUaGUgZGVmYXVsdCBtb2RlIHdpbGwgaGFuZGxlIHRoZSBldmVudHMgdGhhdCBubyBvdGhlciBtb2RlcyBhcmUgaW50ZXJlc3RlZCBpblxuICAgIG1vZGVTdGFjay5zZXREZWZhdWx0TW9kZShkZWZhdWx0TW9kZSk7XG4gICAgbW9kZVN0YWNrLnNldFVzZXJNb2RlKGN1ckRyYXdNb2RlKTtcblxuICAgIGFydHdvcmtDYW52YXMud2lkdGggPSBhcnR3b3JrLndpZHRoO1xuICAgIGFydHdvcmtDYW52YXMuaGVpZ2h0ID0gYXJ0d29yay5oZWlnaHQ7XG4gICAgXG4gICAgY2FudmFzLndpZHRoID0gODAwO1xuICAgIGNhbnZhcy5oZWlnaHQgPSA5MDA7XG4gICAgY2FudmFzLmNsYXNzTmFtZSA9IFwiY2hpY2tlbnBhaW50LWNhbnZhc1wiO1xuICAgIGNhbnZhcy5zZXRBdHRyaWJ1dGUoXCJ0b3VjaC1hY3Rpb25cIiwgXCJub25lXCIpO1xuICAgIFxuICAgIGlmICghY2FudmFzQ29udGV4dC5zZXRMaW5lRGFzaCkgeyBcbiAgICAgICAgY2FudmFzQ29udGV4dC5zZXRMaW5lRGFzaCA9IGZ1bmN0aW9uICgpIHt9OyAvLyBGb3IgSUUgMTAgYW5kIG9sZGVyXG4gICAgfVxuICAgIFxuICAgIGNhbnZhcy5hZGRFdmVudExpc3RlbmVyKFwiY29udGV4dG1lbnVcIiwgZnVuY3Rpb24oZSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgfSk7XG4gICAgXG4gICAgY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWVudGVyXCIsIGZ1bmN0aW9uKCkge1xuICAgICAgICBtb3VzZUluID0gdHJ1ZTtcbiAgICB9KTtcbiAgICBcbiAgICBjYW52YXMuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlbGVhdmVcIiwgZnVuY3Rpb24oKSB7XG4gICAgICAgIG1vdXNlSW4gPSBmYWxzZTtcbiAgICAgICAgXG4gICAgICAgIGlmICghbW91c2VEb3duW0JVVFRPTl9QUklNQVJZXSAmJiAhbW91c2VEb3duW0JVVFRPTl9TRUNPTkRBUlldICYmICFtb3VzZURvd25bQlVUVE9OX1dIRUVMXSkge1xuICAgICAgICAgICAgdGhhdC5yZXBhaW50QWxsKCk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBcbiAgICBjYW52YXMuYWRkRXZlbnRMaXN0ZW5lcihcInBvaW50ZXJkb3duXCIsIGhhbmRsZVBvaW50ZXJEb3duKTtcbiAgICBjYW52YXMuYWRkRXZlbnRMaXN0ZW5lcihcInBvaW50ZXJtb3ZlXCIsIGhhbmRsZVBvaW50ZXJNb3ZlKTtcbiAgICBjYW52YXMuYWRkRXZlbnRMaXN0ZW5lcihcInBvaW50ZXJ1cFwiLCBoYW5kbGVQb2ludGVyVXApO1xuICAgIGNhbnZhcy5hZGRFdmVudExpc3RlbmVyKFwid2hlZWxcIiwgaGFuZGxlTW91c2VXaGVlbCk7XG4gICAgXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgaGFuZGxlS2V5RG93bik7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleXVwXCIsIGhhbmRsZUtleVVwKTtcblxuICAgIC8qIFdvcmthcm91bmQgZm9yIENocm9tZSBNYWMgYnVnIHRoYXQgY2F1c2VzIGNhbnZhcyB0byBiZSBkaXNwb3NlZCBhbmQgbmV2ZXIgcmVjcmVhdGVkIHdoZW4gdGFiIGlzIHN3aXRjaGVkIGludG8gdGhlIFxuICAgICAqIGJhY2tncm91bmQgaHR0cHM6Ly9idWdzLmNocm9taXVtLm9yZy9wL2Nocm9taXVtL2lzc3Vlcy9kZXRhaWw/aWQ9NTg4NDM0XG4gICAgICovXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInZpc2liaWxpdHljaGFuZ2VcIiwgZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhclxuICAgICAgICAgICAgb2xkSGVpZ2h0ID0gY2FudmFzLmhlaWdodCArICQoY2FudmFzQ29udGFpbmVyQm90dG9tKS5vdXRlckhlaWdodCgpO1xuXG4gICAgICAgIGNhbnZhcy53aWR0aCA9IDE7XG4gICAgICAgIGNhbnZhcy5oZWlnaHQgPSAxO1xuXG4gICAgICAgIHRoYXQucmVzaXplKG9sZEhlaWdodCwgdHJ1ZSk7XG4gICAgfSwgZmFsc2UpO1xuICAgIFxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwic2Nyb2xsXCIsIGZ1bmN0aW9uKCkge1xuICAgICAgICBjYW52YXNDbGllbnRSZWN0ID0gbnVsbDtcbiAgICB9KTtcbiAgICBcbiAgICBjYW52YXMuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCBmdW5jdGlvbihlKSB7XG4gICAgICAgIGlmIChlLmJ1dHRvbiA9PSBCVVRUT05fV0hFRUwpIHtcbiAgICAgICAgICAgIC8vIFByZXZlbnQgbWlkZGxlLW1vdXNlIHNjcm9sbGluZyBpbiBGaXJlZm94XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIGFydHdvcmsub24oXCJjaGFuZ2VTZWxlY3Rpb25cIiwgZnVuY3Rpb24oKSB7XG4gICAgICAgIC8vIFdlIGNvdWxkIGtlZXAgdHJhY2sgb2Ygb3VyIGxhc3QtcGFpbnRlZCBzZWxlY3Rpb24gcmVjdCBhbmQgb25seSBpbnZhbGlkYXRlIHRoYXQgaGVyZVxuICAgICAgICB0aGF0LnJlcGFpbnRBbGwoKTtcbiAgICB9KTtcbiAgICBcbiAgICBhcnR3b3JrLm9uKFwidXBkYXRlUmVnaW9uXCIsIGZ1bmN0aW9uKHJlZ2lvbikge1xuICAgICAgICBhcnR3b3JrVXBkYXRlUmVnaW9uLnVuaW9uKHJlZ2lvbik7XG4gICAgICAgIFxuICAgICAgICByZXBhaW50UmVjdChnZXRSZWZyZXNoQXJlYShhcnR3b3JrVXBkYXRlUmVnaW9uKSk7XG4gICAgfSk7XG4gICAgXG4gICAgaG9yelNjcm9sbC5vbihcInZhbHVlQ2hhbmdlZFwiLCBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICB2YXIgXG4gICAgICAgICAgICBwID0gdGhhdC5nZXRPZmZzZXQoKTtcbiAgICAgICAgXG4gICAgICAgIHRoYXQuc2V0T2Zmc2V0KC12YWx1ZSwgcC55KTtcbiAgICB9KTtcbiAgICBcbiAgICB2ZXJ0U2Nyb2xsLm9uKFwidmFsdWVDaGFuZ2VkXCIsIGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgIHZhciBcbiAgICAgICAgICAgIHAgPSB0aGF0LmdldE9mZnNldCgpO1xuICAgICAgICBcbiAgICAgICAgdGhhdC5zZXRPZmZzZXQocC54LCAtdmFsdWUpO1xuICAgIH0pO1xuICAgIFxuICAgIHRoaXMuc2V0SW50ZXJwb2xhdGlvbihmYWxzZSk7XG5cbiAgICB2YXJcbiAgICAgICAgY2FudmFzU3BhY2luZ1dyYXBwZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIFxuICAgIGNhbnZhc1NwYWNpbmdXcmFwcGVyLmNsYXNzTmFtZSA9ICdjaGlja2VucGFpbnQtY2FudmFzLWNvbnRhaW5lci13cmFwcGVyJztcbiAgICBjYW52YXNTcGFjaW5nV3JhcHBlci5hcHBlbmRDaGlsZChjYW52YXMpO1xuICAgIFxuICAgIGNhbnZhc0NvbnRhaW5lclRvcC5jbGFzc05hbWUgPSAnY2hpY2tlbnBhaW50LWNhbnZhcy1jb250YWluZXItdG9wJztcbiAgICBjYW52YXNDb250YWluZXJUb3AuYXBwZW5kQ2hpbGQoY2FudmFzU3BhY2luZ1dyYXBwZXIpO1xuICAgIGNhbnZhc0NvbnRhaW5lclRvcC5hcHBlbmRDaGlsZCh2ZXJ0U2Nyb2xsLmdldEVsZW1lbnQoKSk7XG4gICAgXG4gICAgY2FudmFzQ29udGFpbmVyQm90dG9tLmNsYXNzTmFtZSA9ICdjaGlja2VucGFpbnQtY2FudmFzLWNvbnRhaW5lci1ib3R0b20nO1xuICAgIGNhbnZhc0NvbnRhaW5lckJvdHRvbS5hcHBlbmRDaGlsZChob3J6U2Nyb2xsLmdldEVsZW1lbnQoKSk7XG4gICAgXG4gICAgY2FudmFzQ29udGFpbmVyLmFwcGVuZENoaWxkKGNhbnZhc0NvbnRhaW5lclRvcCk7XG4gICAgY2FudmFzQ29udGFpbmVyLmFwcGVuZENoaWxkKGNhbnZhc0NvbnRhaW5lckJvdHRvbSk7XG4gICAgXG4gICAgY29udHJvbGxlci5zZXRDYW52YXModGhpcyk7XG59IiwiLypcbiAgICBDaGlja2VuUGFpbnRcbiAgICBcbiAgICBDaGlja2VuUGFpbnQgaXMgYSB0cmFuc2xhdGlvbiBvZiBDaGliaVBhaW50IGZyb20gSmF2YSB0byBKYXZhU2NyaXB0XG4gICAgYnkgTmljaG9sYXMgU2hlcmxvY2sgLyBDaGlja2VuIFNtb290aGllLlxuICAgIFxuICAgIENoaWJpUGFpbnQgaXMgQ29weXJpZ2h0IChjKSAyMDA2LTIwMDggTWFyYyBTY2hlZmVyXG5cbiAgICBDaGlja2VuUGFpbnQgaXMgZnJlZSBzb2Z0d2FyZTogeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yIG1vZGlmeVxuICAgIGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgYXMgcHVibGlzaGVkIGJ5XG4gICAgdGhlIEZyZWUgU29mdHdhcmUgRm91bmRhdGlvbiwgZWl0aGVyIHZlcnNpb24gMyBvZiB0aGUgTGljZW5zZSwgb3JcbiAgICAoYXQgeW91ciBvcHRpb24pIGFueSBsYXRlciB2ZXJzaW9uLlxuXG4gICAgQ2hpY2tlblBhaW50IGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsXG4gICAgYnV0IFdJVEhPVVQgQU5ZIFdBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2ZcbiAgICBNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuICBTZWUgdGhlXG4gICAgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy5cblxuICAgIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXG4gICAgYWxvbmcgd2l0aCBDaGlja2VuUGFpbnQuIElmIG5vdCwgc2VlIDxodHRwOi8vd3d3LmdudS5vcmcvbGljZW5zZXMvPi5cbiovXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIENQQ2hlY2tib3goc3RhdGUsIHRpdGxlKSB7XG4gICAgdmFyXG4gICAgICAgIGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpLFxuICAgICAgICBjYW52YXNDb250ZXh0ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyksXG4gICAgICAgIFxuICAgICAgICB0aGF0ID0gdGhpcztcbiAgICBcbiAgICB0aGlzLnN0YXRlID0gc3RhdGUgfHwgZmFsc2U7XG4gICAgXG4gICAgZnVuY3Rpb24gcGFpbnQoKSB7XG4gICAgICAgIHZhciBcbiAgICAgICAgICAgIHdpZHRoID0gY2FudmFzLndpZHRoLFxuICAgICAgICAgICAgaGVpZ2h0ID0gY2FudmFzLmhlaWdodDtcblxuICAgICAgICBjYW52YXNDb250ZXh0LmNsZWFyUmVjdCgwLCAwLCB3aWR0aCwgaGVpZ2h0KTtcbiAgICAgICAgXG4gICAgICAgIGNhbnZhc0NvbnRleHQuYmVnaW5QYXRoKCk7XG4gICAgICAgIGNhbnZhc0NvbnRleHQuYXJjKHdpZHRoIC8gMiArIDEsIHdpZHRoIC8gMiArIDEsIE1hdGgubWF4KHdpZHRoIC8gMiwgMSkgLSAyLCAwLCBNYXRoLlBJICogMik7XG4gICAgICAgIFxuICAgICAgICBpZiAodGhhdC5zdGF0ZSkge1xuICAgICAgICAgICAgY2FudmFzQ29udGV4dC5maWxsKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjYW52YXNDb250ZXh0LnN0cm9rZSgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5zZXRWYWx1ZSA9IGZ1bmN0aW9uKGIpIHtcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUgIT0gYikge1xuICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IGI7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoaXMuZW1pdEV2ZW50KCd2YWx1ZUNoYW5nZScsIFtiXSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHBhaW50KCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFxuICAgIHRoaXMuZ2V0RWxlbWVudCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gY2FudmFzO1xuICAgIH1cbiAgICBcbiAgICBjYW52YXMuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCBmdW5jdGlvbihlKSB7XG4gICAgICAgIHRoYXQuc2V0VmFsdWUoIXRoYXQuc3RhdGUpO1xuICAgIH0pO1xuICAgIFxuICAgIGNhbnZhcy50aXRsZSA9IHRpdGxlIHx8IFwiXCI7XG4gICAgY2FudmFzLmNsYXNzTmFtZSA9ICdjaGlja2VucGFpbnQtY2hlY2tib3gnO1xuICAgIFxuICAgIGNhbnZhcy53aWR0aCA9IDIwO1xuICAgIGNhbnZhcy5oZWlnaHQgPSAyMDtcbiAgICBcbiAgICBjYW52YXMuZmlsbFN0eWxlID0gJ2JsYWNrJztcbiAgICBjYW52YXMuc3Ryb2tlU3R5bGUgPSAnYmxhY2snO1xuICAgIFxuICAgIHBhaW50KCk7XG59O1xuXG5DUENoZWNrYm94LnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoRXZlbnRFbWl0dGVyLnByb3RvdHlwZSk7XG5DUENoZWNrYm94LnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IENQQ2hlY2tib3g7IiwiLypcbiAgICBDaGlja2VuUGFpbnRcbiAgICBcbiAgICBDaGlja2VuUGFpbnQgaXMgYSB0cmFuc2xhdGlvbiBvZiBDaGliaVBhaW50IGZyb20gSmF2YSB0byBKYXZhU2NyaXB0XG4gICAgYnkgTmljaG9sYXMgU2hlcmxvY2sgLyBDaGlja2VuIFNtb290aGllLlxuICAgIFxuICAgIENoaWJpUGFpbnQgaXMgQ29weXJpZ2h0IChjKSAyMDA2LTIwMDggTWFyYyBTY2hlZmVyXG5cbiAgICBDaGlja2VuUGFpbnQgaXMgZnJlZSBzb2Z0d2FyZTogeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yIG1vZGlmeVxuICAgIGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgYXMgcHVibGlzaGVkIGJ5XG4gICAgdGhlIEZyZWUgU29mdHdhcmUgRm91bmRhdGlvbiwgZWl0aGVyIHZlcnNpb24gMyBvZiB0aGUgTGljZW5zZSwgb3JcbiAgICAoYXQgeW91ciBvcHRpb24pIGFueSBsYXRlciB2ZXJzaW9uLlxuXG4gICAgQ2hpY2tlblBhaW50IGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsXG4gICAgYnV0IFdJVEhPVVQgQU5ZIFdBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2ZcbiAgICBNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuICBTZWUgdGhlXG4gICAgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy5cblxuICAgIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXG4gICAgYWxvbmcgd2l0aCBDaGlja2VuUGFpbnQuIElmIG5vdCwgc2VlIDxodHRwOi8vd3d3LmdudS5vcmcvbGljZW5zZXMvPi5cbiovXG5cbmltcG9ydCBDUFBhbGV0dGUgZnJvbSAnLi9DUFBhbGV0dGUnO1xuaW1wb3J0IENQQ29sb3JTZWxlY3QgZnJvbSAnLi9DUENvbG9yU2VsZWN0JztcbmltcG9ydCBDUENvbG9yU2xpZGVyIGZyb20gJy4vQ1BDb2xvclNsaWRlcic7XG5cbmltcG9ydCBDUENvbG9yIGZyb20gXCIuLi91dGlsL0NQQ29sb3JcIjtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gQ1BDb2xvclBhbGV0dGUoY3BDb250cm9sbGVyKSB7XG4gICAgQ1BQYWxldHRlLmNhbGwodGhpcywgY3BDb250cm9sbGVyLCBcImNvbG9yXCIsIFwiQ29sb3JcIik7XG4gICAgXG4gICAgdmFyIFxuICAgICAgICBjb2xvclNlbGVjdCA9IG5ldyBDUENvbG9yU2VsZWN0KGNwQ29udHJvbGxlciksXG4gICAgICAgIGNvbG9yU2xpZGVyID0gbmV3IENQQ29sb3JTbGlkZXIoY3BDb250cm9sbGVyLCBjb2xvclNlbGVjdCksXG4gICAgICAgIGNvbG9yU2hvdyA9IG5ldyBDUENvbG9yU2hvdyhjcENvbnRyb2xsZXIpLFxuICAgIFxuICAgICAgICBib2R5ID0gdGhpcy5nZXRCb2R5RWxlbWVudCgpLFxuICAgICAgICB0b3BTZWN0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICBcbiAgICB0b3BTZWN0aW9uLmNsYXNzTmFtZSA9ICdjaGlja2VucGFpbnQtY29sb3JwaWNrZXItdG9wJztcbiAgICBcbiAgICB0b3BTZWN0aW9uLmFwcGVuZENoaWxkKGNvbG9yU2VsZWN0LmdldEVsZW1lbnQoKSk7XG4gICAgdG9wU2VjdGlvbi5hcHBlbmRDaGlsZChjb2xvclNsaWRlci5nZXRFbGVtZW50KCkpO1xuICAgIFxuICAgIGJvZHkuYXBwZW5kQ2hpbGQodG9wU2VjdGlvbik7XG4gICAgYm9keS5hcHBlbmRDaGlsZChjb2xvclNob3cuZ2V0RWxlbWVudCgpKTtcbn1cblxuZnVuY3Rpb24gQ1BDb2xvclNob3coY3BDb250cm9sbGVyKSB7XG4gICAgdmFyXG4gICAgICAgIGNvbG9yID0gMCxcbiAgICAgICAgXG4gICAgICAgIGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuXG4gICAgZnVuY3Rpb24gcGFkTGVmdChzdHJpbmcsIHBhZGRpbmcsIGxlbikge1xuICAgICAgICB3aGlsZSAoc3RyaW5nLmxlbmd0aCA8IGxlbikge1xuICAgICAgICAgICAgc3RyaW5nID0gcGFkZGluZyArIHN0cmluZztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc3RyaW5nO1xuICAgIH1cbiAgICBcbiAgICBmdW5jdGlvbiBwYWludCgpIHtcbiAgICAgICAgZWxlbWVudC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAnIycgKyBwYWRMZWZ0KE51bWJlcihjb2xvcikudG9TdHJpbmcoMTYpLCBcIjBcIiwgNik7XG4gICAgfVxuICAgIFxuICAgIGZ1bmN0aW9uIG1vdXNlQ2xpY2soZSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIFxuICAgICAgICB2YXIgXG4gICAgICAgICAgICBjb2xIZXggPSBcIiNcIiArIHBhZExlZnQoTnVtYmVyKGNvbG9yKS50b1N0cmluZygxNiksIFwiMFwiLCA2KTtcblxuICAgICAgICBjb2xIZXggPSB3aW5kb3cucHJvbXB0KFwiUGxlYXNlIGVudGVyIGEgY29sb3IgaW4gaGV4IGZvcm1hdFwiLCBjb2xIZXgpO1xuICAgICAgICBcbiAgICAgICAgaWYgKGNvbEhleCAhPSBudWxsKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGlmIChjb2xIZXgubWF0Y2goL14jLykgfHwgY29sSGV4Lm1hdGNoKC9eJC8pKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbEhleCA9IGNvbEhleC5zdWJzdHJpbmcoMSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdmFyIFxuICAgICAgICAgICAgICAgICAgICBuZXdDb2xvciA9IHBhcnNlSW50KGNvbEhleCwgMTYpO1xuXG4gICAgICAgICAgICAgICAgY3BDb250cm9sbGVyLnNldEN1ckNvbG9yKG5ldyBDUENvbG9yKG5ld0NvbG9yKSk7XG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgdGhpcy5nZXRFbGVtZW50ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBlbGVtZW50O1xuICAgIH07XG4gICAgXG4gICAgY3BDb250cm9sbGVyLm9uKFwiY29sb3JDaGFuZ2VcIiwgZnVuY3Rpb24oX2NvbG9yKSB7XG4gICAgICAgIGNvbG9yID0gX2NvbG9yLmdldFJnYigpO1xuICAgICAgICBwYWludCgpO1xuICAgIH0pO1xuICAgIFxuICAgIGVsZW1lbnQuY2xhc3NOYW1lID0gJ2NoaWNrZW5wYWludC1jb2xvcnBpY2tlci1zaG93JztcbiAgICBcbiAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBtb3VzZUNsaWNrKTtcblxuICAgIHBhaW50KCk7XG59XG5cbkNQQ29sb3JQYWxldHRlLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoQ1BQYWxldHRlLnByb3RvdHlwZSk7XG5DUENvbG9yUGFsZXR0ZS5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBDUENvbG9yUGFsZXR0ZTtcbiIsIi8qXG4gICAgQ2hpY2tlblBhaW50XG5cbiAgICBDaGlja2VuUGFpbnQgaXMgYSB0cmFuc2xhdGlvbiBvZiBDaGliaVBhaW50IGZyb20gSmF2YSB0byBKYXZhU2NyaXB0XG4gICAgYnkgTmljaG9sYXMgU2hlcmxvY2sgLyBDaGlja2VuIFNtb290aGllLlxuXG4gICAgQ2hpYmlQYWludCBpcyBDb3B5cmlnaHQgKGMpIDIwMDYtMjAwOCBNYXJjIFNjaGVmZXJcblxuICAgIENoaWNrZW5QYWludCBpcyBmcmVlIHNvZnR3YXJlOiB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3IgbW9kaWZ5XG4gICAgaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBhcyBwdWJsaXNoZWQgYnlcbiAgICB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uLCBlaXRoZXIgdmVyc2lvbiAzIG9mIHRoZSBMaWNlbnNlLCBvclxuICAgIChhdCB5b3VyIG9wdGlvbikgYW55IGxhdGVyIHZlcnNpb24uXG5cbiAgICBDaGlja2VuUGFpbnQgaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCxcbiAgICBidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZlxuICAgIE1FUkNIQU5UQUJJTElUWSBvciBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS4gIFNlZSB0aGVcbiAgICBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9yZSBkZXRhaWxzLlxuXG4gICAgWW91IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2VcbiAgICBhbG9uZyB3aXRoIENoaWNrZW5QYWludC4gSWYgbm90LCBzZWUgPGh0dHA6Ly93d3cuZ251Lm9yZy9saWNlbnNlcy8+LlxuKi9cblxuaW1wb3J0IENQQ29sb3IgZnJvbSBcIi4uL3V0aWwvQ1BDb2xvclwiO1xuaW1wb3J0IENQQ29sb3JCbXAgZnJvbSBcIi4uL2VuZ2luZS9DUENvbG9yQm1wXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIENQQ29sb3JTZWxlY3QoY3BDb250cm9sbGVyLCBpbml0aWFsQ29sb3IpIHtcbiAgICB2YXJcbiAgICAgICAgdyA9IDEyOCwgaCA9IDEyOCxcblxuICAgICAgICBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpLFxuICAgICAgICBjYW52YXNDb250ZXh0ID0gY2FudmFzLmdldENvbnRleHQoXCIyZFwiKSxcblxuICAgICAgICBpbWFnZURhdGEgPSBjYW52YXNDb250ZXh0LmNyZWF0ZUltYWdlRGF0YSh3LCBoKSxcbiAgICAgICAgZGF0YSA9IGltYWdlRGF0YS5kYXRhLFxuICAgICAgICBjb2xvciA9IG5ldyBDUENvbG9yKCksXG5cbiAgICAgICAgbmVlZFJlZnJlc2ggPSB0cnVlLFxuXG4gICAgICAgIGNhcHR1cmVkTW91c2UgPSBmYWxzZTtcblxuICAgIGZ1bmN0aW9uIG1ha2VCaXRtYXAoKSB7XG4gICAgICAgIHZhclxuICAgICAgICAgICAgY29sID0gY29sb3IuY2xvbmUoKSxcbiAgICAgICAgICAgIHBpeEluZGV4ID0gMDtcblxuICAgICAgICBmb3IgKHZhciB5ID0gMDsgeSA8IGg7IHkrKykge1xuICAgICAgICAgICAgY29sLnNldFZhbHVlKDI1NSAtICh5ICogMjU1KSAvIGgpO1xuXG4gICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IHc7IHgrKykge1xuICAgICAgICAgICAgICAgIGNvbC5zZXRTYXR1cmF0aW9uKCh4ICogMjU1KSAvIHcpO1xuXG4gICAgICAgICAgICAgICAgZGF0YVtwaXhJbmRleCArIENQQ29sb3JCbXAuUkVEX0JZVEVfT0ZGU0VUXSA9IChjb2wucmdiID4+IDE2KSAmIDB4RkY7XG4gICAgICAgICAgICAgICAgZGF0YVtwaXhJbmRleCArIENQQ29sb3JCbXAuR1JFRU5fQllURV9PRkZTRVRdID0gKGNvbC5yZ2IgPj4gOCkgJiAweEZGXG4gICAgICAgICAgICAgICAgZGF0YVtwaXhJbmRleCArIENQQ29sb3JCbXAuQkxVRV9CWVRFX09GRlNFVF0gPSBjb2wucmdiICYgMHhGRlxuICAgICAgICAgICAgICAgIGRhdGFbcGl4SW5kZXggKyBDUENvbG9yQm1wLkFMUEhBX0JZVEVfT0ZGU0VUXSA9IDB4RkY7XG5cbiAgICAgICAgICAgICAgICBwaXhJbmRleCArPSBDUENvbG9yQm1wLkJZVEVTX1BFUl9QSVhFTDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIG5lZWRSZWZyZXNoID0gZmFsc2U7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcGFpbnQoKSB7XG4gICAgICAgIGlmIChuZWVkUmVmcmVzaCkge1xuICAgICAgICAgICAgbWFrZUJpdG1hcCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgY2FudmFzQ29udGV4dC5wdXRJbWFnZURhdGEoaW1hZ2VEYXRhLCAwLCAwLCAwLCAwLCB3LCBoKTtcblxuICAgICAgICB2YXJcbiAgICAgICAgICAgIHggPSBjb2xvci5nZXRTYXR1cmF0aW9uKCkgKiB3IC8gMjU1LFxuICAgICAgICAgICAgeSA9ICgyNTUgLSBjb2xvci5nZXRWYWx1ZSgpKSAqIGggLyAyNTU7XG5cbiAgICAgICAgY2FudmFzQ29udGV4dC5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb24gPSAnZXhjbHVzaW9uJztcbiAgICAgICAgY2FudmFzQ29udGV4dC5zdHJva2VTdHlsZSA9ICd3aGl0ZSc7XG4gICAgICAgIGNhbnZhc0NvbnRleHQubGluZVdpZHRoID0gMS41O1xuXG4gICAgICAgIGNhbnZhc0NvbnRleHQuYmVnaW5QYXRoKCk7XG4gICAgICAgIGNhbnZhc0NvbnRleHQuYXJjKHgsIHksIDUsIDAsIE1hdGguUEkgKiAyKTtcbiAgICAgICAgY2FudmFzQ29udGV4dC5zdHJva2UoKTtcblxuICAgICAgICBjYW52YXNDb250ZXh0Lmdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbiA9ICdzb3VyY2Utb3Zlcic7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbW91c2VQaWNrQ29sb3IoZSkge1xuICAgICAgICB2YXJcbiAgICAgICAgICAgIHggPSBlLnBhZ2VYIC0gJChjYW52YXMpLm9mZnNldCgpLmxlZnQsXG4gICAgICAgICAgICB5ID0gZS5wYWdlWSAtICQoY2FudmFzKS5vZmZzZXQoKS50b3AsXG5cbiAgICAgICAgICAgIHNhdCA9IHggKiAyNTUgLyB3LFxuICAgICAgICAgICAgdmFsdWUgPSAyNTUgLSB5ICogMjU1IC8gaDtcblxuICAgICAgICBjb2xvci5zZXRTYXR1cmF0aW9uKE1hdGgubWF4KDAsIE1hdGgubWluKDI1NSwgc2F0KSkpO1xuICAgICAgICBjb2xvci5zZXRWYWx1ZShNYXRoLm1heCgwLCBNYXRoLm1pbigyNTUsIHZhbHVlKSkpO1xuXG4gICAgICAgIHBhaW50KCk7XG4gICAgICAgIGNwQ29udHJvbGxlci5zZXRDdXJDb2xvcihjb2xvcik7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY29udGludWVEcmFnKGUpIHtcbiAgICAgICAgbW91c2VQaWNrQ29sb3IoZSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZW5kRHJhZyhlKSB7XG4gICAgICAgIGNhbnZhcy5yZWxlYXNlUG9pbnRlckNhcHR1cmUoZS5wb2ludGVySWQpO1xuICAgICAgICBjYXB0dXJlZE1vdXNlID0gZmFsc2U7XG4gICAgICAgIGNhbnZhcy5yZW1vdmVFdmVudExpc3RlbmVyKFwicG9pbnRlcnVwXCIsIGVuZERyYWcpO1xuICAgICAgICBjYW52YXMucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInBvaW50ZXJtb3ZlXCIsIGNvbnRpbnVlRHJhZyk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc3RhcnREcmFnKGUpIHtcbiAgICAgICAgaWYgKCFjYXB0dXJlZE1vdXNlKSB7XG4gICAgICAgICAgICBjYXB0dXJlZE1vdXNlID0gdHJ1ZTtcbiAgICAgICAgICAgIGNhbnZhcy5zZXRQb2ludGVyQ2FwdHVyZShlLnBvaW50ZXJJZCk7XG4gICAgICAgICAgICBjYW52YXMuYWRkRXZlbnRMaXN0ZW5lcihcInBvaW50ZXJ1cFwiLCBlbmREcmFnKTtcbiAgICAgICAgICAgIGNhbnZhcy5hZGRFdmVudExpc3RlbmVyKFwicG9pbnRlcm1vdmVcIiwgY29udGludWVEcmFnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIG1vdXNlUGlja0NvbG9yKGUpO1xuICAgIH1cblxuICAgIHRoaXMuc2V0SHVlID0gZnVuY3Rpb24oaHVlKSB7XG4gICAgICAgIGlmIChjb2xvci5nZXRIdWUoKSAhPSBodWUpIHtcbiAgICAgICAgICAgIGNvbG9yLnNldEh1ZShodWUpO1xuICAgICAgICAgICAgY3BDb250cm9sbGVyLnNldEN1ckNvbG9yKGNvbG9yKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICB0aGlzLmdldEVsZW1lbnQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIGNhbnZhcztcbiAgICB9O1xuXG4gICAgY3BDb250cm9sbGVyLm9uKFwiY29sb3JDaGFuZ2VcIiwgZnVuY3Rpb24oYykge1xuICAgICAgICBjb2xvci5jb3B5RnJvbShjKTtcblxuICAgICAgICBuZWVkUmVmcmVzaCA9IHRydWU7XG4gICAgICAgIHBhaW50KCk7XG4gICAgfSk7XG5cbiAgICBjYW52YXMuYWRkRXZlbnRMaXN0ZW5lcihcInBvaW50ZXJkb3duXCIsIHN0YXJ0RHJhZyk7XG5cbiAgICBjYW52YXMuY2xhc3NOYW1lID0gJ2NoaWNrZW5wYWludC1jb2xvcnBpY2tlci1zZWxlY3QnO1xuICAgIGNhbnZhcy5zZXRBdHRyaWJ1dGUoXCJ0b3VjaC1hY3Rpb25cIiwgXCJub25lXCIpO1xuXG4gICAgY2FudmFzLndpZHRoID0gdztcbiAgICBjYW52YXMuaGVpZ2h0ID0gaDtcblxuICAgIGlmIChpbml0aWFsQ29sb3IpIHtcbiAgICAgICAgY29sb3IuY29weUZyb20oaW5pdGlhbENvbG9yKTtcbiAgICB9XG5cbiAgICBwYWludCgpO1xufSIsIi8qXG4gICAgQ2hpY2tlblBhaW50XG5cbiAgICBDaGlja2VuUGFpbnQgaXMgYSB0cmFuc2xhdGlvbiBvZiBDaGliaVBhaW50IGZyb20gSmF2YSB0byBKYXZhU2NyaXB0XG4gICAgYnkgTmljaG9sYXMgU2hlcmxvY2sgLyBDaGlja2VuIFNtb290aGllLlxuXG4gICAgQ2hpYmlQYWludCBpcyBDb3B5cmlnaHQgKGMpIDIwMDYtMjAwOCBNYXJjIFNjaGVmZXJcblxuICAgIENoaWNrZW5QYWludCBpcyBmcmVlIHNvZnR3YXJlOiB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3IgbW9kaWZ5XG4gICAgaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBhcyBwdWJsaXNoZWQgYnlcbiAgICB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uLCBlaXRoZXIgdmVyc2lvbiAzIG9mIHRoZSBMaWNlbnNlLCBvclxuICAgIChhdCB5b3VyIG9wdGlvbikgYW55IGxhdGVyIHZlcnNpb24uXG5cbiAgICBDaGlja2VuUGFpbnQgaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCxcbiAgICBidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZlxuICAgIE1FUkNIQU5UQUJJTElUWSBvciBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS4gIFNlZSB0aGVcbiAgICBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9yZSBkZXRhaWxzLlxuXG4gICAgWW91IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2VcbiAgICBhbG9uZyB3aXRoIENoaWNrZW5QYWludC4gSWYgbm90LCBzZWUgPGh0dHA6Ly93d3cuZ251Lm9yZy9saWNlbnNlcy8+LlxuKi9cblxuaW1wb3J0IENQQ29sb3IgZnJvbSBcIi4uL3V0aWwvQ1BDb2xvclwiO1xuaW1wb3J0IENQQ29sb3JCbXAgZnJvbSBcIi4uL2VuZ2luZS9DUENvbG9yQm1wXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIENQQ29sb3JTbGlkZXIoY3BDb250cm9sbGVyLCBzZWxlY3RlciwgaW5pdGlhbEh1ZSkge1xuICAgIHZhclxuICAgICAgICB0aGF0ID0gdGhpcyxcblxuICAgICAgICB3ID0gMjQsIGggPSAxMjgsXG5cbiAgICAgICAgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKSxcbiAgICAgICAgY2FudmFzQ29udGV4dCA9IGNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIiksXG5cbiAgICAgICAgaW1hZ2VEYXRhID0gY2FudmFzQ29udGV4dC5jcmVhdGVJbWFnZURhdGEodywgaCksXG4gICAgICAgIGRhdGEgPSBpbWFnZURhdGEuZGF0YSxcblxuICAgICAgICBjYXB0dXJlZE1vdXNlID0gZmFsc2UsXG5cbiAgICAgICAgaHVlID0gaW5pdGlhbEh1ZSB8fCAwO1xuXG4gICAgZnVuY3Rpb24gbWFrZUJpdG1hcCgpIHtcbiAgICAgICAgdmFyXG4gICAgICAgICAgICBjb2xvciA9IG5ldyBDUENvbG9yKCksXG4gICAgICAgICAgICBwaXhJbmRleCA9IDA7XG5cbiAgICAgICAgY29sb3Iuc2V0UmdiQ29tcG9uZW50cygwLCAyNTUsIDI1NSk7XG5cbiAgICAgICAgZm9yICh2YXIgeSA9IDA7IHkgPCBoOyB5KyspIHtcbiAgICAgICAgICAgIGNvbG9yLnNldEh1ZSgoeSAqIDM1OSkgLyBoKTtcblxuICAgICAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCB3OyB4KyspIHtcbiAgICAgICAgICAgICAgICBkYXRhW3BpeEluZGV4ICsgQ1BDb2xvckJtcC5SRURfQllURV9PRkZTRVRdID0gKGNvbG9yLnJnYiA+PiAxNikgJiAweEZGO1xuICAgICAgICAgICAgICAgIGRhdGFbcGl4SW5kZXggKyBDUENvbG9yQm1wLkdSRUVOX0JZVEVfT0ZGU0VUXSA9IChjb2xvci5yZ2IgPj4gOCkgJiAweEZGXG4gICAgICAgICAgICAgICAgZGF0YVtwaXhJbmRleCArIENQQ29sb3JCbXAuQkxVRV9CWVRFX09GRlNFVF0gPSBjb2xvci5yZ2IgJiAweEZGXG4gICAgICAgICAgICAgICAgZGF0YVtwaXhJbmRleCArIENQQ29sb3JCbXAuQUxQSEFfQllURV9PRkZTRVRdID0gMHhGRjtcblxuICAgICAgICAgICAgICAgIHBpeEluZGV4ICs9IENQQ29sb3JCbXAuQllURVNfUEVSX1BJWEVMO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcGFpbnQoKSB7XG4gICAgICAgIGNhbnZhc0NvbnRleHQucHV0SW1hZ2VEYXRhKGltYWdlRGF0YSwgMCwgMCwgMCwgMCwgdywgaCk7XG5cbiAgICAgICAgdmFyXG4gICAgICAgICAgICB5ID0gKGh1ZSAqIGgpIC8gMzYwO1xuXG4gICAgICAgIGNhbnZhc0NvbnRleHQuZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uID0gJ2V4Y2x1c2lvbic7XG4gICAgICAgIGNhbnZhc0NvbnRleHQuc3Ryb2tlU3R5bGUgPSAnd2hpdGUnO1xuICAgICAgICBjYW52YXNDb250ZXh0LmxpbmVXaWR0aCA9IDEuNTtcblxuICAgICAgICBjYW52YXNDb250ZXh0LmJlZ2luUGF0aCgpO1xuICAgICAgICBjYW52YXNDb250ZXh0Lm1vdmVUbygwLCB5KTtcbiAgICAgICAgY2FudmFzQ29udGV4dC5saW5lVG8odywgeSk7XG4gICAgICAgIGNhbnZhc0NvbnRleHQuc3Ryb2tlKCk7XG5cbiAgICAgICAgY2FudmFzQ29udGV4dC5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb24gPSAnc291cmNlLW92ZXInO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIG1vdXNlUGlja0NvbG9yKGUpIHtcbiAgICAgICAgdmFyXG4gICAgICAgICAgICB5ID0gZS5wYWdlWSAtICQoY2FudmFzKS5vZmZzZXQoKS50b3AsXG5cbiAgICAgICAgICAgIF9odWUgPSB+fih5ICogMzYwIC8gaCk7XG5cbiAgICAgICAgaHVlID0gTWF0aC5tYXgoMCwgTWF0aC5taW4oMzU5LCBfaHVlKSk7XG4gICAgICAgIHBhaW50KCk7XG5cbiAgICAgICAgaWYgKHNlbGVjdGVyICE9IG51bGwpIHtcbiAgICAgICAgICAgIHNlbGVjdGVyLnNldEh1ZShodWUpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY29udGludWVEcmFnKGUpIHtcbiAgICAgICAgbW91c2VQaWNrQ29sb3IoZSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZW5kRHJhZyhlKSB7XG4gICAgICAgIGNhbnZhcy5yZWxlYXNlUG9pbnRlckNhcHR1cmUoZS5wb2ludGVySWQpO1xuICAgICAgICBjYXB0dXJlZE1vdXNlID0gZmFsc2U7XG4gICAgICAgIGNhbnZhcy5yZW1vdmVFdmVudExpc3RlbmVyKFwicG9pbnRlcnVwXCIsIGVuZERyYWcpO1xuICAgICAgICBjYW52YXMucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInBvaW50ZXJtb3ZlXCIsIGNvbnRpbnVlRHJhZyk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc3RhcnREcmFnKGUpIHtcbiAgICAgICAgaWYgKCFjYXB0dXJlZE1vdXNlKSB7XG4gICAgICAgICAgICBjYXB0dXJlZE1vdXNlID0gdHJ1ZTtcbiAgICAgICAgICAgIGNhbnZhcy5zZXRQb2ludGVyQ2FwdHVyZShlLnBvaW50ZXJJZCk7XG4gICAgICAgICAgICBjYW52YXMuYWRkRXZlbnRMaXN0ZW5lcihcInBvaW50ZXJ1cFwiLCBlbmREcmFnKTtcbiAgICAgICAgICAgIGNhbnZhcy5hZGRFdmVudExpc3RlbmVyKFwicG9pbnRlcm1vdmVcIiwgY29udGludWVEcmFnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIG1vdXNlUGlja0NvbG9yKGUpO1xuICAgIH1cblxuICAgIHRoaXMuZ2V0RWxlbWVudCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gY2FudmFzO1xuICAgIH07XG5cbiAgICB0aGlzLnNldEh1ZSA9IGZ1bmN0aW9uKGgpIHtcbiAgICAgICAgaHVlID0gaDtcbiAgICAgICAgcGFpbnQoKTtcbiAgICB9O1xuXG4gICAgY3BDb250cm9sbGVyLm9uKFwiY29sb3JDaGFuZ2VcIiwgZnVuY3Rpb24oY29sb3IpIHtcbiAgICAgICAgdGhhdC5zZXRIdWUoY29sb3IuZ2V0SHVlKCkpO1xuICAgIH0pO1xuXG4gICAgY2FudmFzLnNldEF0dHJpYnV0ZShcInRvdWNoLWFjdGlvblwiLCBcIm5vbmVcIik7XG5cbiAgICBjYW52YXMuYWRkRXZlbnRMaXN0ZW5lcihcInBvaW50ZXJkb3duXCIsIHN0YXJ0RHJhZyk7XG5cbiAgICBjYW52YXMud2lkdGggPSB3O1xuICAgIGNhbnZhcy5oZWlnaHQgPSBoO1xuXG4gICAgY2FudmFzLmNsYXNzTmFtZSA9ICdjaGlja2VucGFpbnQtY29sb3JwaWNrZXItc2xpZGVyJztcblxuICAgIG1ha2VCaXRtYXAoKTtcbiAgICBwYWludCgpO1xuXG59IiwiLypcbiAgICBDaGlja2VuUGFpbnRcblxuICAgIENoaWNrZW5QYWludCBpcyBhIHRyYW5zbGF0aW9uIG9mIENoaWJpUGFpbnQgZnJvbSBKYXZhIHRvIEphdmFTY3JpcHRcbiAgICBieSBOaWNob2xhcyBTaGVybG9jayAvIENoaWNrZW4gU21vb3RoaWUuXG5cbiAgICBDaGliaVBhaW50IGlzIENvcHlyaWdodCAoYykgMjAwNi0yMDA4IE1hcmMgU2NoZWZlclxuXG4gICAgQ2hpY2tlblBhaW50IGlzIGZyZWUgc29mdHdhcmU6IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vciBtb2RpZnlcbiAgICBpdCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGFzIHB1Ymxpc2hlZCBieVxuICAgIHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb24sIGVpdGhlciB2ZXJzaW9uIDMgb2YgdGhlIExpY2Vuc2UsIG9yXG4gICAgKGF0IHlvdXIgb3B0aW9uKSBhbnkgbGF0ZXIgdmVyc2lvbi5cblxuICAgIENoaWNrZW5QYWludCBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLFxuICAgIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mXG4gICAgTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiAgU2VlIHRoZVxuICAgIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuXG5cbiAgICBZb3Ugc2hvdWxkIGhhdmUgcmVjZWl2ZWQgYSBjb3B5IG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZVxuICAgIGFsb25nIHdpdGggQ2hpY2tlblBhaW50LiBJZiBub3QsIHNlZSA8aHR0cDovL3d3dy5nbnUub3JnL2xpY2Vuc2VzLz4uXG4qL1xuXG5pbXBvcnQgQ1BDb2xvciBmcm9tICcuLi91dGlsL0NQQ29sb3InO1xuXG5pbXBvcnQgQ1BTbGlkZXIgZnJvbSAnLi9DUFNsaWRlcic7XG5pbXBvcnQgQ1BDb2xvclNlbGVjdCBmcm9tICcuL0NQQ29sb3JTZWxlY3QnO1xuaW1wb3J0IENQQ29sb3JTbGlkZXIgZnJvbSAnLi9DUENvbG9yU2xpZGVyJztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gQ1BDb2xvclN3YXRjaChpbml0aWFsQ29sb3IsIGluaXRpYWxBbHBoYSkge1xuICAgIHZhclxuICAgICAgICB0aGF0ID0gdGhpcyxcbiAgICAgICAgY29sb3IgPSBuZXcgQ1BDb2xvcigwKSxcbiAgICAgICAgYWxwaGEgPSAyNTUsXG5cbiAgICAgICAgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG5cbiAgICBmdW5jdGlvbiBwYWRMZWZ0KHN0cmluZywgcGFkZGluZywgbGVuKSB7XG4gICAgICAgIHdoaWxlIChzdHJpbmcubGVuZ3RoIDwgbGVuKSB7XG4gICAgICAgICAgICBzdHJpbmcgPSBwYWRkaW5nICsgc3RyaW5nO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzdHJpbmc7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcGFpbnQoKSB7XG4gICAgICAgIGVsZW1lbnQuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJyMnICsgcGFkTGVmdChOdW1iZXIoY29sb3IuZ2V0UmdiKCkpLnRvU3RyaW5nKDE2KSwgXCIwXCIsIDYpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIG1vdXNlQ2xpY2soZSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgfVxuXG4gICAgdGhpcy5nZXRFbGVtZW50ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBlbGVtZW50O1xuICAgIH07XG5cbiAgICB0aGlzLnNldENvbG9yID0gZnVuY3Rpb24oX2NvbG9yKSB7XG4gICAgICAgIGlmICghY29sb3IuaXNFcXVhbChfY29sb3IpKSB7XG4gICAgICAgICAgICBjb2xvci5jb3B5RnJvbShfY29sb3IpO1xuXG4gICAgICAgICAgICBwYWludCgpO1xuXG4gICAgICAgICAgICB0aGlzLmVtaXRFdmVudChcImNvbG9yQ2hhbmdlXCIsIFtjb2xvcl0pO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIHRoaXMuc2V0QWxwaGEgPSBmdW5jdGlvbihfYWxwaGEpIHtcbiAgICAgICAgaWYgKF9hbHBoYSAhPSBhbHBoYSkge1xuICAgICAgICAgICAgYWxwaGEgPSBfYWxwaGE7XG5cbiAgICAgICAgICAgIHBhaW50KCk7XG5cbiAgICAgICAgICAgIHRoaXMuZW1pdEV2ZW50KFwiYWxwaGFDaGFuZ2VcIiwgW2FscGhhXSk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgdGhpcy5nZXRDb2xvclJnYiA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gY29sb3IuZ2V0UmdiKCk7XG4gICAgfTtcblxuICAgIHRoaXMuZ2V0QWxwaGEgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIGFscGhhO1xuICAgIH07XG5cbiAgICB0aGlzLnNldEN1ckNvbG9yID0gdGhpcy5zZXRDb2xvcjtcblxuICAgIGZ1bmN0aW9uIGJ1aWxkQ29sb3JFZGl0UGFuZWwoKSB7XG4gICAgICAgIHZhclxuICAgICAgICAgICAgcGFuZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLFxuICAgICAgICAgICAgZ3JvdXAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLFxuICAgICAgICAgICAgc2VsZWN0ID0gbmV3IENQQ29sb3JTZWxlY3QodGhhdCwgY29sb3IpLFxuICAgICAgICAgICAgc2xpZGVyID0gbmV3IENQQ29sb3JTbGlkZXIodGhhdCwgc2VsZWN0LCBjb2xvci5nZXRIdWUoKSksXG4gICAgICAgICAgICBhbHBoYVNsaWRlciA9IG5ldyBDUFNsaWRlcigwLCAyNTUpO1xuXG4gICAgICAgIHBhbmVsLmNsYXNzTmFtZSA9IFwiY2hpY2tlbnBhaW50LWNvbG9yLXBpY2stcGFuZWxcIjtcblxuICAgICAgICBncm91cC5jbGFzc05hbWUgPSBcImNoaWNrZW5wYWludC1jb2xvcnBpY2tlci10b3BcIjtcblxuICAgICAgICBncm91cC5hcHBlbmRDaGlsZChzZWxlY3QuZ2V0RWxlbWVudCgpKTtcbiAgICAgICAgZ3JvdXAuYXBwZW5kQ2hpbGQoc2xpZGVyLmdldEVsZW1lbnQoKSk7XG5cbiAgICAgICAgcGFuZWwuYXBwZW5kQ2hpbGQoZ3JvdXApO1xuXG4gICAgICAgIGFscGhhU2xpZGVyLnZhbHVlID0gYWxwaGE7XG4gICAgICAgIGFscGhhU2xpZGVyLnRpdGxlID0gZnVuY3Rpb24oYWxwaGEpIHtcbiAgICAgICAgICAgIHJldHVybiBcIk9wYWNpdHk6IFwiICsgYWxwaGE7XG4gICAgICAgIH07XG4gICAgICAgIGFscGhhU2xpZGVyLm9uKFwidmFsdWVDaGFuZ2VcIiwgZnVuY3Rpb24oYWxwaGEpIHtcbiAgICAgICAgICAgIHRoYXQuc2V0QWxwaGEoYWxwaGEpO1xuICAgICAgICB9KTtcblxuICAgICAgICBwYW5lbC5hcHBlbmRDaGlsZChhbHBoYVNsaWRlci5nZXRFbGVtZW50KCkpO1xuXG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBhbHBoYVNsaWRlci5yZXNpemUoKTtcbiAgICAgICAgfSwgMCk7XG5cbiAgICAgICAgcmV0dXJuIHBhbmVsO1xuICAgIH1cblxuICAgIGVsZW1lbnQuY2xhc3NOYW1lID0gJ2NoaWNrZW5wYWludC1jb2xvci1waWNrLXN3YXRjaCc7XG5cbiAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBtb3VzZUNsaWNrKTtcblxuICAgIGlmIChpbml0aWFsQ29sb3IpIHtcbiAgICAgICAgY29sb3IuY29weUZyb20oaW5pdGlhbENvbG9yKTtcbiAgICB9XG5cbiAgICBpZiAoaW5pdGlhbEFscGhhKSB7XG4gICAgICAgIGFscGhhID0gaW5pdGlhbEFscGhhO1xuICAgIH1cblxuICAgIC8vIENsaWNraW5nIG91dHNpZGUgdGhlIHBvcG92ZXIgd2lsbCBkaXNtaXNzIGl0XG4gICAgZnVuY3Rpb24gY2xvc2VDbGlja0hhbmRsZXIoZSkge1xuICAgICAgICBpZiAoJChlLnRhcmdldCkuY2xvc2VzdChcIi5wb3BvdmVyXCIpLmxlbmd0aCA9PSAwICYmICQoZS50YXJnZXQpLmNsb3Nlc3QoXCIuY2hpY2tlbnBhaW50LWNvbG9yLXBpY2stc3dhdGNoXCIpWzBdICE9IGVsZW1lbnQpIHtcbiAgICAgICAgICAgICQoZWxlbWVudCkucG9wb3ZlcihcImhpZGVcIik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAkKGVsZW1lbnQpXG4gICAgICAgIC5wb3BvdmVyKHtcbiAgICAgICAgICAgIGh0bWw6IHRydWUsXG4gICAgICAgICAgICBjb250ZW50OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCBjbG9zZUNsaWNrSGFuZGxlcik7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gYnVpbGRDb2xvckVkaXRQYW5lbCgpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHRyaWdnZXI6IFwibWFudWFsXCIsXG4gICAgICAgICAgICBwbGFjZW1lbnQ6IFwiYm90dG9tXCIsXG5cbiAgICAgICAgfSlcbiAgICAgICAgLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAkKHRoaXMpLnBvcG92ZXIoXCJ0b2dnbGVcIik7XG4gICAgICAgIH0pXG4gICAgICAgIC5vbihcImhpZGRlbi5icy5wb3BvdmVyXCIsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgY2xvc2VDbGlja0hhbmRsZXIpO1xuICAgICAgICB9KTtcblxuICAgIHBhaW50KCk7XG59XG5cbkNQQ29sb3JTd2F0Y2gucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShFdmVudEVtaXR0ZXIucHJvdG90eXBlKTtcbkNQQ29sb3JTd2F0Y2gucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gQ1BDb2xvclN3YXRjaDsiLCIvKlxuXHRDaGlja2VuUGFpbnRcblxuXHRDaGlja2VuUGFpbnQgaXMgYSB0cmFuc2xhdGlvbiBvZiBDaGliaVBhaW50IGZyb20gSmF2YSB0byBKYXZhU2NyaXB0XG5cdGJ5IE5pY2hvbGFzIFNoZXJsb2NrIC8gQ2hpY2tlbiBTbW9vdGhpZS5cblxuXHRDaGliaVBhaW50IGlzIENvcHlyaWdodCAoYykgMjAwNi0yMDA4IE1hcmMgU2NoZWZlclxuXG5cdENoaWNrZW5QYWludCBpcyBmcmVlIHNvZnR3YXJlOiB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3IgbW9kaWZ5XG5cdGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgYXMgcHVibGlzaGVkIGJ5XG5cdHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb24sIGVpdGhlciB2ZXJzaW9uIDMgb2YgdGhlIExpY2Vuc2UsIG9yXG5cdChhdCB5b3VyIG9wdGlvbikgYW55IGxhdGVyIHZlcnNpb24uXG5cblx0Q2hpY2tlblBhaW50IGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsXG5cdGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mXG5cdE1FUkNIQU5UQUJJTElUWSBvciBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS4gIFNlZSB0aGVcblx0R05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy5cblxuXHRZb3Ugc2hvdWxkIGhhdmUgcmVjZWl2ZWQgYSBjb3B5IG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZVxuXHRhbG9uZyB3aXRoIENoaWNrZW5QYWludC4gSWYgbm90LCBzZWUgPGh0dHA6Ly93d3cuZ251Lm9yZy9saWNlbnNlcy8+LlxuKi9cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIENQQ29uZmlybVRyYW5zZm9ybURpYWxvZyhwYXJlbnQsIGNvbnRyb2xsZXIpIHtcblx0dmFyXG5cdFx0ZGlhbG9nID1cblx0XHRcdCQoYDxkaXYgY2xhc3M9XCJtb2RhbCBmYWRlXCIgdGFiaW5kZXg9XCItMVwiIHJvbGU9XCJkaWFsb2dcIj5cblx0ICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm1vZGFsLWRpYWxvZ1wiPlxuXHQgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm1vZGFsLWNvbnRlbnRcIj5cblx0ICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibW9kYWwtaGVhZGVyXCI+XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiY2xvc2VcIiBkYXRhLWRpc21pc3M9XCJtb2RhbFwiIGFyaWEtbGFiZWw9XCJDbG9zZVwiPlxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gYXJpYS1oaWRkZW49XCJ0cnVlXCI+JnRpbWVzOzwvc3Bhbj5cblx0ICAgICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIDxoNCBjbGFzcz1cIm1vZGFsLXRpdGxlXCI+Q29tcGxldGUgdHJhbnNmb3JtPC9oND5cblx0ICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cblx0ICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibW9kYWwtYm9keVwiPlxuXHQgICAgICAgICAgICAgICAgICAgICAgICA8cD5cblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIFlvdSBuZWVkIHRvIGZpbmlzaCB0cmFuc2Zvcm1pbmcgdGhpcyBsYXllciBiZWZvcmUgeW91IGNhbiBkbyB0aGF0LiBXaGF0IHdvdWxkIHlvdSBsaWtlIHRvIGRvIHdpdGggdGhlIHRyYW5zZm9ybT9cblx0XHRcdFx0XHRcdFx0PC9wPlxuXHQgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuXHQgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtb2RhbC1mb290ZXJcIj5cblx0ICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJidG4gYnRuLWRlZmF1bHRcIiBkYXRhLWRpc21pc3M9XCJtb2RhbFwiPkNhbmNlbDwvYnV0dG9uPlxuXHQgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImJ0biBidG4tZGVmYXVsdCBjaGlja2VucGFpbnQtcmVqZWN0LXRyYW5zZm9ybVwiIGRhdGEtZGlzbWlzcz1cIm1vZGFsXCI+VW5kbyB0cmFuc2Zvcm08L2J1dHRvbj5cblx0ICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJidG4gYnRuLXByaW1hcnkgY2hpY2tlbnBhaW50LWFjY2VwdC10cmFuc2Zvcm1cIiBkYXRhLWRpc21pc3M9XCJtb2RhbFwiPkFwcGx5IHRyYW5zZm9ybTwvYnV0dG9uPlxuXHQgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuXHQgICAgICAgICAgICAgICAgPC9kaXY+XG5cdCAgICAgICAgICAgIDwvZGl2PlxuXHQgICAgICAgIDwvZGl2PlxuXHQgICAgYCksXG5cblx0XHR0aGF0ID0gdGhpcyxcblxuXHRcdGFwcGx5QnV0dG9uID0gJChcIi5jaGlja2VucGFpbnQtYWNjZXB0LXRyYW5zZm9ybVwiLCBkaWFsb2cpLFxuXHRcdHJlamVjdEJ1dHRvbiA9ICQoXCIuY2hpY2tlbnBhaW50LXJlamVjdC10cmFuc2Zvcm1cIiwgZGlhbG9nKTtcblxuXHRhcHBseUJ1dHRvbi5jbGljayhmdW5jdGlvbihlKSB7XG5cdFx0Y29udHJvbGxlci5hY3Rpb25QZXJmb3JtZWQoe2FjdGlvbjogXCJDUFRyYW5zZm9ybUFjY2VwdFwifSk7XG5cdFx0dGhhdC5lbWl0RXZlbnQoXCJhY2NlcHRcIik7XG5cdH0pO1xuXG5cdHJlamVjdEJ1dHRvbi5jbGljayhmdW5jdGlvbihlKSB7XG5cdFx0Y29udHJvbGxlci5hY3Rpb25QZXJmb3JtZWQoe2FjdGlvbjogXCJDUFRyYW5zZm9ybVJlamVjdFwifSk7XG5cdFx0dGhhdC5lbWl0RXZlbnQoXCJyZWplY3RcIik7XG5cdH0pO1xuXG5cdGRpYWxvZ1xuXHRcdC5tb2RhbCh7XG5cdFx0XHRzaG93OiBmYWxzZVxuXHRcdH0pXG5cdFx0Lm9uKCdzaG93bi5icy5tb2RhbCcsIGZ1bmN0aW9uKCkge1xuXHRcdFx0YXBwbHlCdXR0b24uZm9jdXMoKTtcblx0XHR9KVxuXHRcdC5vbihcImhpZGRlbi5icy5tb2RhbFwiLCBmdW5jdGlvbihlKSB7XG5cdFx0XHQvLyBEZXN0cm95IHRoZSBtb2RhbCB1cG9uIGNsb3NlXG5cdFx0XHRkaWFsb2cucmVtb3ZlKCk7XG5cdFx0fSlcblx0XHQub24oJ2tleXByZXNzJywgZnVuY3Rpb24oZSkge1xuXHRcdFx0aWYgKGUua2V5Q29kZSA9PSAxMykge1xuXHRcdFx0XHRhcHBseUJ1dHRvbi5jbGljaygpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdC8vIEZpeCB0aGUgYmFja2Ryb3AgbG9jYXRpb24gaW4gdGhlIERPTSBieSByZXBhcmVudGluZyBpdCB0byB0aGUgY2hpY2tlbnBhaW50IGNvbnRhaW5lclxuXHRkaWFsb2cuZGF0YShcImJzLm1vZGFsXCIpLiRib2R5ID0gJChwYXJlbnQpO1xuXG5cdHBhcmVudC5hcHBlbmRDaGlsZChkaWFsb2dbMF0pO1xuXG5cdHRoaXMuc2hvdyA9IGZ1bmN0aW9uKCkge1xuXHRcdGRpYWxvZy5tb2RhbChcInNob3dcIik7XG5cdH07XG59XG5cbkNQQ29uZmlybVRyYW5zZm9ybURpYWxvZy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKEV2ZW50RW1pdHRlci5wcm90b3R5cGUpO1xuQ1BDb25maXJtVHJhbnNmb3JtRGlhbG9nLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IENQQ29uZmlybVRyYW5zZm9ybURpYWxvZzsiLCIvKipcbiAqIENyZWF0ZSBhIGNoZWNrZXJib2FyZCBIVE1MNSBDYW52YXNQYXR0ZXJuICh3aGljaCBjYW4gYmUgdXNlZCBmb3IgZmlsbFN0eWxlKSB1c2luZyB0aGUgZ2l2ZW4gY2FudmFzIGNvbnRleHQuXG4gKiBcbiAqIEBwYXJhbSBjYW52YXNDb250ZXh0XG4gKiBAcmV0dXJucyB7Q2FudmFzUGF0dGVybn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUNoZWNrZXJib2FyZFBhdHRlcm4oY2FudmFzQ29udGV4dCkge1xuICAgIHZhclxuICAgICAgICBjaGVja2VyYm9hcmRDYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpLFxuICAgICAgICBjaGVja2VyYm9hcmRDb250ZXh0ID0gY2hlY2tlcmJvYXJkQ2FudmFzLmdldENvbnRleHQoXCIyZFwiKSxcbiAgICAgICAgXG4gICAgICAgIGltYWdlRGF0YSA9IGNoZWNrZXJib2FyZENvbnRleHQuY3JlYXRlSW1hZ2VEYXRhKDY0LCA2NCksXG4gICAgICAgIGRhdGEgPSBpbWFnZURhdGEuZGF0YSxcbiAgICAgICAgXG4gICAgICAgIHBpeGVsT2Zmc2V0ID0gMDtcblxuICAgIGZvciAodmFyIGogPSAwOyBqIDwgNjQ7IGorKykge1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IDY0OyBpKyspIHtcbiAgICAgICAgICAgIGlmICgoaSAmIDB4OCkgIT0gMCBeIChqICYgMHg4KSAhPSAwKSB7XG4gICAgICAgICAgICAgICAgLy8gV2hpdGVcbiAgICAgICAgICAgICAgICBkYXRhW3BpeGVsT2Zmc2V0KytdID0gMHhmZjtcbiAgICAgICAgICAgICAgICBkYXRhW3BpeGVsT2Zmc2V0KytdID0gMHhmZjtcbiAgICAgICAgICAgICAgICBkYXRhW3BpeGVsT2Zmc2V0KytdID0gMHhmZjtcbiAgICAgICAgICAgICAgICBkYXRhW3BpeGVsT2Zmc2V0KytdID0gMHhmZjtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gR3JleVxuICAgICAgICAgICAgICAgIGRhdGFbcGl4ZWxPZmZzZXQrK10gPSAweGNjO1xuICAgICAgICAgICAgICAgIGRhdGFbcGl4ZWxPZmZzZXQrK10gPSAweGNjO1xuICAgICAgICAgICAgICAgIGRhdGFbcGl4ZWxPZmZzZXQrK10gPSAweGNjO1xuICAgICAgICAgICAgICAgIGRhdGFbcGl4ZWxPZmZzZXQrK10gPSAweGZmO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgY2hlY2tlcmJvYXJkQ2FudmFzLndpZHRoID0gNjQ7XG4gICAgY2hlY2tlcmJvYXJkQ2FudmFzLmhlaWdodCA9IDY0O1xuICAgIGNoZWNrZXJib2FyZENvbnRleHQucHV0SW1hZ2VEYXRhKGltYWdlRGF0YSwgMCwgMCk7XG5cbiAgICByZXR1cm4gY2FudmFzQ29udGV4dC5jcmVhdGVQYXR0ZXJuKGNoZWNrZXJib2FyZENhbnZhcywgJ3JlcGVhdCcpO1xufSIsIi8qXG4gICAgQ2hpY2tlblBhaW50XG4gICAgXG4gICAgQ2hpY2tlblBhaW50IGlzIGEgdHJhbnNsYXRpb24gb2YgQ2hpYmlQYWludCBmcm9tIEphdmEgdG8gSmF2YVNjcmlwdFxuICAgIGJ5IE5pY2hvbGFzIFNoZXJsb2NrIC8gQ2hpY2tlbiBTbW9vdGhpZS5cbiAgICBcbiAgICBDaGliaVBhaW50IGlzIENvcHlyaWdodCAoYykgMjAwNi0yMDA4IE1hcmMgU2NoZWZlclxuXG4gICAgQ2hpY2tlblBhaW50IGlzIGZyZWUgc29mdHdhcmU6IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vciBtb2RpZnlcbiAgICBpdCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGFzIHB1Ymxpc2hlZCBieVxuICAgIHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb24sIGVpdGhlciB2ZXJzaW9uIDMgb2YgdGhlIExpY2Vuc2UsIG9yXG4gICAgKGF0IHlvdXIgb3B0aW9uKSBhbnkgbGF0ZXIgdmVyc2lvbi5cblxuICAgIENoaWNrZW5QYWludCBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLFxuICAgIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mXG4gICAgTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiAgU2VlIHRoZVxuICAgIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuXG5cbiAgICBZb3Ugc2hvdWxkIGhhdmUgcmVjZWl2ZWQgYSBjb3B5IG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZVxuICAgIGFsb25nIHdpdGggQ2hpY2tlblBhaW50LiBJZiBub3QsIHNlZSA8aHR0cDovL3d3dy5nbnUub3JnL2xpY2Vuc2VzLz4uXG4qL1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBDUEdyaWREaWFsb2cocGFyZW50LCBjYW52YXMpIHtcbiAgICB2YXJcbiAgICAgICAgZGlhbG9nID0gXG4gICAgICAgICAgICAkKGA8ZGl2IGNsYXNzPVwibW9kYWwgZmFkZVwiIHRhYmluZGV4PVwiLTFcIiByb2xlPVwiZGlhbG9nXCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm1vZGFsLWRpYWxvZ1wiPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibW9kYWwtY29udGVudFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm1vZGFsLWhlYWRlclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiY2xvc2VcIiBkYXRhLWRpc21pc3M9XCJtb2RhbFwiIGFyaWEtbGFiZWw9XCJDbG9zZVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBhcmlhLWhpZGRlbj1cInRydWVcIj4mdGltZXM7PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoNCBjbGFzcz1cIm1vZGFsLXRpdGxlXCI+R3JpZCBvcHRpb25zPC9oND5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm1vZGFsLWJvZHlcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Zm9ybT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImZvcm0tZ3JvdXBcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD5HcmlkIHNpemU8L2xhYmVsPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgY2xhc3M9XCJmb3JtLWNvbnRyb2wgY2hpY2tlbnBhaW50LWdyaWQtc2l6ZVwiIHZhbHVlPVwiXCIgYXV0b2ZvY3VzPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Zvcm0+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtb2RhbC1mb290ZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImJ0biBidG4tZGVmYXVsdFwiIGRhdGEtZGlzbWlzcz1cIm1vZGFsXCI+Q2FuY2VsPC9idXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJidG4gYnRuLXByaW1hcnkgY2hpY2tlbnBhaW50LWFwcGx5LWdyaWQtc2V0dGluZ3NcIiBkYXRhLWRpc21pc3M9XCJtb2RhbFwiPk9rPC9idXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgYCksXG4gICAgICAgIFxuICAgICAgICBncmlkU2l6ZUVsZW0gPSAkKFwiLmNoaWNrZW5wYWludC1ncmlkLXNpemVcIiwgZGlhbG9nKSxcbiAgICAgICAgYXBwbHlCdXR0b24gPSAkKFwiLmNoaWNrZW5wYWludC1hcHBseS1ncmlkLXNldHRpbmdzXCIsIGRpYWxvZyk7XG4gICAgXG4gICAgZ3JpZFNpemVFbGVtLnZhbChjYW52YXMuZ2V0R3JpZFNpemUoKSk7XG4gICAgXG4gICAgJChcIi5jaGlja2VucGFpbnQtYXBwbHktZ3JpZC1zZXR0aW5nc1wiLCBkaWFsb2cpLmNsaWNrKGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgdmFyXG4gICAgICAgICAgICBncmlkU2l6ZSA9IHBhcnNlSW50KGdyaWRTaXplRWxlbS52YWwoKSwgMTApO1xuICAgICAgICBcbiAgICAgICAgY2FudmFzLnNldEdyaWRTaXplKGdyaWRTaXplKTtcbiAgICB9KTtcbiBcbiAgICBkaWFsb2dcbiAgICAgICAgLm1vZGFsKHtcbiAgICAgICAgICAgIHNob3c6IGZhbHNlXG4gICAgICAgIH0pXG4gICAgICAgIC5vbignc2hvd24uYnMubW9kYWwnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGdyaWRTaXplRWxlbS5mb2N1cygpO1xuICAgICAgICB9KS5vbigna2V5cHJlc3MnLCBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICBpZiAoZS5rZXlDb2RlID09IDEzKSB7XG4gICAgICAgICAgICAgICAgYXBwbHlCdXR0b24uY2xpY2soKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgXG4gICAgLy8gRml4IHRoZSBiYWNrZHJvcCBsb2NhdGlvbiBpbiB0aGUgRE9NIGJ5IHJlcGFyZW50aW5nIGl0IHRvIHRoZSBjaGlja2VucGFpbnQgY29udGFpbmVyXG4gICAgZGlhbG9nLmRhdGEoXCJicy5tb2RhbFwiKS4kYm9keSA9ICQocGFyZW50KTtcbiAgICBcbiAgICBwYXJlbnQuYXBwZW5kQ2hpbGQoZGlhbG9nWzBdKTtcbiAgICBcbiAgICB0aGlzLnNob3cgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgZGlhbG9nLm1vZGFsKFwic2hvd1wiKTtcbiAgICB9O1xufSIsIi8qXG4gICAgQ2hpY2tlblBhaW50XG4gICAgXG4gICAgQ2hpY2tlblBhaW50IGlzIGEgdHJhbnNsYXRpb24gb2YgQ2hpYmlQYWludCBmcm9tIEphdmEgdG8gSmF2YVNjcmlwdFxuICAgIGJ5IE5pY2hvbGFzIFNoZXJsb2NrIC8gQ2hpY2tlbiBTbW9vdGhpZS5cbiAgICBcbiAgICBDaGliaVBhaW50IGlzIENvcHlyaWdodCAoYykgMjAwNi0yMDA4IE1hcmMgU2NoZWZlclxuXG4gICAgQ2hpY2tlblBhaW50IGlzIGZyZWUgc29mdHdhcmU6IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vciBtb2RpZnlcbiAgICBpdCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGFzIHB1Ymxpc2hlZCBieVxuICAgIHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb24sIGVpdGhlciB2ZXJzaW9uIDMgb2YgdGhlIExpY2Vuc2UsIG9yXG4gICAgKGF0IHlvdXIgb3B0aW9uKSBhbnkgbGF0ZXIgdmVyc2lvbi5cblxuICAgIENoaWNrZW5QYWludCBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLFxuICAgIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mXG4gICAgTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiAgU2VlIHRoZVxuICAgIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuXG5cbiAgICBZb3Ugc2hvdWxkIGhhdmUgcmVjZWl2ZWQgYSBjb3B5IG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZVxuICAgIGFsb25nIHdpdGggQ2hpY2tlblBhaW50LiBJZiBub3QsIHNlZSA8aHR0cDovL3d3dy5nbnUub3JnL2xpY2Vuc2VzLz4uXG4qL1xuXG5pbXBvcnQgQ1BQYWxldHRlIGZyb20gXCIuL0NQUGFsZXR0ZVwiO1xuaW1wb3J0IENQU2xpZGVyIGZyb20gXCIuL0NQU2xpZGVyXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIENQTGF5ZXJzUGFsZXR0ZShjb250cm9sbGVyKSB7XG4gICAgQ1BQYWxldHRlLmNhbGwodGhpcywgY29udHJvbGxlciwgXCJsYXllcnNcIiwgXCJMYXllcnNcIiwgdHJ1ZSk7XG4gICAgXG4gICAgY29uc3RcbiAgICAgICAgTU9ERV9OQU1FUyA9IFtcbiAgICAgICAgICAgICAgXCJOb3JtYWxcIiwgXCJNdWx0aXBseVwiLCBcIkFkZFwiLCBcIlNjcmVlblwiLCBcIkxpZ2h0ZW5cIiwgXCJEYXJrZW5cIiwgXCJTdWJ0cmFjdFwiLCBcIkRvZGdlXCIsIFwiQnVyblwiLFxuICAgICAgICAgICAgICBcIk92ZXJsYXlcIiwgXCJIYXJkIExpZ2h0XCIsIFwiU29mdCBMaWdodFwiLCBcIlZpdmlkIExpZ2h0XCIsIFwiTGluZWFyIExpZ2h0XCIsIFwiUGluIExpZ2h0XCJcbiAgICAgICAgXTtcbiAgICBcbiAgICB2YXJcbiAgICAgICAgcGFsZXR0ZSA9IHRoaXMsXG4gICAgICAgIGxheWVySCA9IDMyLCBleWVXID0gMjQsXG4gICAgICAgIFxuICAgICAgICBib2R5ID0gdGhpcy5nZXRCb2R5RWxlbWVudCgpLFxuXG4gICAgICAgIGxheWVyV2lkZ2V0ID0gbmV3IENQTGF5ZXJXaWRnZXQoKSxcbiAgICAgICAgYWxwaGFTbGlkZXIgPSBuZXcgQ1BTbGlkZXIoMCwgMTAwKSxcbiAgICAgICAgYmxlbmRDb21ibyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzZWxlY3RcIiksXG4gICAgXG4gICAgICAgIHJlbmFtZUZpZWxkID0gbmV3IENQUmVuYW1lRmllbGQoKSxcbiAgICBcbiAgICAgICAgY2JTYW1wbGVBbGxMYXllcnMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIiksXG4gICAgICAgIGNiTG9ja0FscGhhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpLFxuICAgICAgICBcbiAgICAgICAgYWRkQnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxpXCIpLFxuICAgICAgICByZW1vdmVCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGlcIik7XG4gICAgXG4gICAgZnVuY3Rpb24gZmlsbENvbWJvYm94KGNvbWJvLCBvcHRpb25OYW1lcykge1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG9wdGlvbk5hbWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgXG4gICAgICAgICAgICAgICAgb3B0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIm9wdGlvblwiKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgb3B0aW9uLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKG9wdGlvbk5hbWVzW2ldKSk7XG4gICAgICAgICAgICBvcHRpb24udmFsdWUgPSBpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb21iby5hcHBlbmRDaGlsZChvcHRpb24pO1xuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIGZ1bmN0aW9uIHdyYXBDaGVja2JveFdpdGhMYWJlbChjaGVja2JveCwgdGl0bGUpIHtcbiAgICAgICAgdmFyXG4gICAgICAgICAgICBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLFxuICAgICAgICAgICAgbGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGFiZWxcIik7XG5cbiAgICAgICAgZGl2LmNsYXNzTmFtZSA9IFwiY2hlY2tib3hcIjtcbiAgICAgICAgXG4gICAgICAgIGxhYmVsLmFwcGVuZENoaWxkKGNoZWNrYm94KTtcbiAgICAgICAgbGFiZWwuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUodGl0bGUpKTtcbiAgICAgICAgXG4gICAgICAgIGRpdi5hcHBlbmRDaGlsZChsYWJlbCk7XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gZGl2O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNob3dSZW5hbWVDb250cm9sKGxheWVySW5kZXgpIHtcbiAgICAgICAgdmFyXG4gICAgICAgICAgICBkID0gbGF5ZXJXaWRnZXQuZ2V0Q1NTU2l6ZSgpLFxuICAgICAgICAgICAgYXJ0d29yayA9IGNvbnRyb2xsZXIuZ2V0QXJ0d29yaygpLFxuICAgICAgICAgICAgbGF5ZXIgPSBhcnR3b3JrLmdldExheWVyKGxheWVySW5kZXgpO1xuXG4gICAgICAgIHJlbmFtZUZpZWxkLnNob3coXG4gICAgICAgICAgICBleWVXIC8gd2luZG93LmRldmljZVBpeGVsUmF0aW8sIFxuICAgICAgICAgICAgZC5oZWlnaHQgLSAobGF5ZXJJbmRleCArIDEpICogbGF5ZXJIIC8gd2luZG93LmRldmljZVBpeGVsUmF0aW8sXG4gICAgICAgICAgICBsYXllckluZGV4LFxuICAgICAgICAgICAgbGF5ZXIubmFtZVxuICAgICAgICk7XG4gICAgfVxuICAgIFxuICAgIHZhclxuICAgICAgICBwYXJlbnRTZXRTaXplID0gdGhpcy5zZXRTaXplLFxuICAgICAgICBwYXJlbnRTZXRIZWlnaHQgPSB0aGlzLnNldEhlaWdodDtcbiAgICBcbiAgICB0aGlzLnNldFNpemUgPSBmdW5jdGlvbih3LCBoKSB7XG4gICAgICAgIHBhcmVudFNldFNpemUuY2FsbCh0aGlzLCB3LCBoKTtcbiAgICAgICAgXG4gICAgICAgIGxheWVyV2lkZ2V0LnJlc2l6ZSgpO1xuICAgICAgICBhbHBoYVNsaWRlci5yZXNpemUoKTtcbiAgICB9O1xuXG4gICAgdGhpcy5zZXRIZWlnaHQgPSBmdW5jdGlvbihoKSB7XG4gICAgICAgIHBhcmVudFNldEhlaWdodC5jYWxsKHRoaXMsIGgpO1xuICAgICAgICBcbiAgICAgICAgbGF5ZXJXaWRnZXQucmVzaXplKCk7XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIENQTGF5ZXJXaWRnZXQoKSB7XG4gICAgICAgIGNvbnN0XG4gICAgICAgICAgICBOT1RJRklDQVRJT05fSElERV9ERUxBWV9NU19QRVJfQ0hBUiA9IDcwLFxuICAgICAgICAgICAgTk9USUZJQ0FUSU9OX0hJREVfREVMQVlfTUlOID0gMzAwMDtcblxuICAgICAgICB2YXIgXG4gICAgICAgICAgICBsYXllckRyYWcsIGxheWVyRHJhZ1JlYWxseSxcbiAgICAgICAgICAgIGxheWVyRHJhZ0luZGV4LCBsYXllckRyYWdZLFxuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLFxuICAgICAgICAgICAgXG4gICAgICAgICAgICBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpLFxuICAgICAgICAgICAgY2FudmFzQ29udGV4dCA9IGNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIiksXG5cbiAgICAgICAgICAgIG9sZEFwcGx5UGxhY2VtZW50LFxuICAgICAgICAgICAgbm90aWZpY2F0aW9uTWVzc2FnZSA9IFwiXCIsXG4gICAgICAgICAgICBub3RpZmljYXRpb25MYXllckluZGV4ID0gLTEsXG4gICAgICAgICAgICBub3RpZmljYXRpb25Mb2NhdGlvbiA9IFwiXCIsXG5cbiAgICAgICAgICAgIGRpc21pc3NUaW1lciA9IGZhbHNlLFxuICAgICAgICAgICAgXG4gICAgICAgICAgICB0aGF0ID0gdGhpcztcblxuICAgICAgICAvKipcbiAgICAgICAgICogR2V0IHRoZSBzaXplIG9mIHRoZSBjb21wb25lbnQgb24gc2NyZWVuIGluIENTUyBwaXhlbHMuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmdldENTU1NpemUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiB7d2lkdGg6ICQoY2FudmFzKS53aWR0aCgpLCBoZWlnaHQ6ICQoY2FudmFzKS5oZWlnaHQoKX07XG4gICAgICAgIH07XG4gICAgICAgIFxuICAgICAgICBmdW5jdGlvbiBnZXRMYXllckluZGV4KHBvaW50KSB7XG4gICAgICAgICAgICByZXR1cm4gTWF0aC5mbG9vcigoY2FudmFzLmhlaWdodCAtIHBvaW50LnkgLyAkKGNhbnZhcykuaGVpZ2h0KCkgKiBjYW52YXMuaGVpZ2h0KSAvIGxheWVySCk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcGFyYW0gbGF5ZXIgQ1BMYXllclxuICAgICAgICAgKiBAcGFyYW0gc2VsZWN0ZWQgYm9vbGVhblxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gZHJhd0xheWVyKGxheWVyLCBzZWxlY3RlZCkge1xuICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgZCA9IHt3aWR0aDogY2FudmFzLndpZHRoLCBoZWlnaHQ6IGNhbnZhcy5oZWlnaHR9O1xuXG4gICAgICAgICAgICBpZiAoc2VsZWN0ZWQpIHtcbiAgICAgICAgICAgICAgICBjYW52YXNDb250ZXh0LmZpbGxTdHlsZSA9ICcjQjBCMEMwJztcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY2FudmFzQ29udGV4dC5maWxsU3R5bGUgPSAnd2hpdGUnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FudmFzQ29udGV4dC5maWxsUmVjdCgwLCAwLCBkLndpZHRoLCBsYXllckgpO1xuXG4gICAgICAgICAgICBjYW52YXNDb250ZXh0LmJlZ2luUGF0aCgpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjYW52YXNDb250ZXh0Lm1vdmVUbygwLCAwKTtcbiAgICAgICAgICAgIGNhbnZhc0NvbnRleHQubGluZVRvKGQud2lkdGgsIDApO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjYW52YXNDb250ZXh0Lm1vdmVUbyhleWVXLCAwKTtcbiAgICAgICAgICAgIGNhbnZhc0NvbnRleHQubGluZVRvKGV5ZVcsIGxheWVySCk7XG5cbiAgICAgICAgICAgIGNhbnZhc0NvbnRleHQubW92ZVRvKGV5ZVcgKyA2ICogd2luZG93LmRldmljZVBpeGVsUmF0aW8sIGxheWVySCAvIDIpO1xuICAgICAgICAgICAgY2FudmFzQ29udGV4dC5saW5lVG8oZC53aWR0aCAtIDYgKiB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbywgbGF5ZXJIIC8gMik7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNhbnZhc0NvbnRleHQuc3Ryb2tlKCk7XG5cbiAgICAgICAgICAgIGNhbnZhc0NvbnRleHQuZmlsbFN0eWxlID0gJ2JsYWNrJztcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY2FudmFzQ29udGV4dC5maWxsVGV4dChsYXllci5uYW1lLCBleWVXICsgNiAqIHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvLCAxMiAqIHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvKTtcbiAgICAgICAgICAgIGNhbnZhc0NvbnRleHQuZmlsbFRleHQoTU9ERV9OQU1FU1tsYXllci5ibGVuZE1vZGVdICsgXCI6IFwiICsgbGF5ZXIuYWxwaGEgKyBcIiVcIiwgZXllVyArIDYgKiB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbywgbGF5ZXJIIC0gNSAqIHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvKTtcblxuICAgICAgICAgICAgY2FudmFzQ29udGV4dC5iZWdpblBhdGgoKTtcbiAgICAgICAgICAgIGlmIChsYXllci52aXNpYmxlKSB7XG4gICAgICAgICAgICAgICAgY2FudmFzQ29udGV4dC5hcmMoZXllVyAvIDIsIGxheWVySCAvIDIsIDkgKiB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbywgMCwgTWF0aC5QSSAqIDIpO1xuICAgICAgICAgICAgICAgIGNhbnZhc0NvbnRleHQuZmlsbCgpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjYW52YXNDb250ZXh0LmFyYyhleWVXIC8gMiwgbGF5ZXJIIC8gMiwgOSAqIHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvLCAwLCBNYXRoLlBJICogMik7XG4gICAgICAgICAgICAgICAgY2FudmFzQ29udGV4dC5zdHJva2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgZnVuY3Rpb24gbW91c2VVcChlKSB7XG4gICAgICAgICAgICBpZiAoZS5idXR0b24gPT0gMCkge1xuICAgICAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgICAgICBvZmZzZXQgPSAkKGNhbnZhcykub2Zmc2V0KCksXG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBhcnR3b3JrID0gY29udHJvbGxlci5nZXRBcnR3b3JrKCksXG4gICAgICAgICAgICAgICAgICAgIGxheWVycyA9IGFydHdvcmsuZ2V0TGF5ZXJzKCksXG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBtb3VzZUxvYyA9IHt4OiBlLnBhZ2VYIC0gb2Zmc2V0LmxlZnQsIHk6IGUucGFnZVkgLSBvZmZzZXQudG9wfSxcbiAgICAgICAgICAgICAgICAgICAgbGF5ZXJPdmVyID0gZ2V0TGF5ZXJJbmRleChtb3VzZUxvYyk7XG5cbiAgICAgICAgICAgICAgICAvL2xheWVyRHJhZ1kgPSBlLnBhZ2VZIC0gb2Zmc2V0LnRvcDtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBpZiAobGF5ZXJPdmVyID49IDAgJiYgbGF5ZXJPdmVyIDw9IGxheWVycy5sZW5ndGggJiYgbGF5ZXJPdmVyICE9IGxheWVyRHJhZ0luZGV4ICYmIGxheWVyT3ZlciAhPSBsYXllckRyYWdJbmRleCArIDEpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlci5hY3Rpb25QZXJmb3JtZWQoe2FjdGlvbjogXCJDUE1vdmVMYXllclwiLCBmcm9tSW5kZXg6IGxheWVyRHJhZ0luZGV4LCB0b0luZGV4OiBsYXllck92ZXJ9KTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBEbyB3ZSBuZWVkIHRvIHJlcGFpbnQgdG8gZXJhc2UgZHJhZ2xpbmVzP1xuICAgICAgICAgICAgICAgIGlmIChsYXllckRyYWdSZWFsbHkpIHtcbiAgICAgICAgICAgICAgICAgICAgbGF5ZXJEcmFnUmVhbGx5ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIHRoYXQucGFpbnQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgbGF5ZXJEcmFnID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIiwgbW91c2VEcmFnZ2VkKTtcbiAgICAgICAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNldXBcIiwgbW91c2VVcCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBtb3VzZURyYWdnZWQoZSkge1xuICAgICAgICAgICAgaWYgKGxheWVyRHJhZykge1xuICAgICAgICAgICAgICAgIGxheWVyRHJhZ1JlYWxseSA9IHRydWU7XG4gICAgICAgICAgICAgICAgbGF5ZXJEcmFnWSA9IGUucGFnZVkgLSAkKGNhbnZhcykub2Zmc2V0KCkudG9wO1xuICAgICAgICAgICAgICAgIHRoYXQucGFpbnQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBSZXBhaW50IGp1c3QgdGhlIGxheWVyIHdpdGggdGhlIHNwZWNpZmllZCBpbmRleFxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5wYWludExheWVyID0gZnVuY3Rpb24obGF5ZXJJbmRleCkge1xuICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgbGF5ZXIgPSBhcnR3b3JrLmdldExheWVyKGxheWVySW5kZXgpLFxuICAgICAgICAgICAgICAgIGxheWVyVG9wID0gY2FudmFzLmhlaWdodCAtIGxheWVySCAqIChsYXllckluZGV4ICsgMSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNhbnZhc0NvbnRleHQuc2F2ZSgpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjYW52YXNDb250ZXh0LmZpbGxTdHlsZSA9ICcjNjA2MDYwJztcbiAgICAgICAgICAgIGNhbnZhc0NvbnRleHQuZmlsbFJlY3QoMCwgbGF5ZXJUb3AsIGNhbnZhcy53aWR0aCwgbGF5ZXJIKTtcblxuICAgICAgICAgICAgY2FudmFzQ29udGV4dC5zdHJva2VTdHlsZSA9ICdibGFjayc7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNhbnZhc0NvbnRleHQudHJhbnNsYXRlKDAsIGxheWVyVG9wKTtcbiAgICAgICAgICAgIGRyYXdMYXllcihsYXllciwgbGF5ZXJJbmRleCA9PSBhcnR3b3JrLmdldEFjdGl2ZUxheWVySW5kZXgoKSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNhbnZhc0NvbnRleHQucmVzdG9yZSgpO1xuICAgICAgICB9O1xuICAgICAgICBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFJlcGFpbnQgdGhlIGVudGlyZSBjb250cm9sXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnBhaW50ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICBhcnR3b3JrID0gY29udHJvbGxlci5nZXRBcnR3b3JrKCksXG4gICAgICAgICAgICAgICAgbGF5ZXJzID0gYXJ0d29yay5nZXRMYXllcnMoKSxcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBkID0ge3dpZHRoOiBjYW52YXMud2lkdGgsIGhlaWdodDogY2FudmFzLmhlaWdodH0sXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgY2FudmFzU2NhbGVGYWN0b3IgPSBjYW52YXMuaGVpZ2h0IC8gJChjYW52YXMpLmhlaWdodCgpO1xuXG4gICAgICAgICAgICBjYW52YXNDb250ZXh0LnNhdmUoKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY2FudmFzQ29udGV4dC5maWxsU3R5bGUgPSAnIzYwNjA2MCc7XG4gICAgICAgICAgICBjYW52YXNDb250ZXh0LmZpbGxSZWN0KDAsIDAsIGQud2lkdGgsIGQuaGVpZ2h0IC0gbGF5ZXJzLmxlbmd0aCAqIGxheWVySCk7XG5cbiAgICAgICAgICAgIGNhbnZhc0NvbnRleHQuc3Ryb2tlU3R5bGUgPSAnYmxhY2snO1xuXG4gICAgICAgICAgICAvLyBEcmF3IHRoZSBsaXN0IG9mIGxheWVycywgd2l0aCB0aGUgZmlyc3QgbGF5ZXIgYXQgdGhlIGJvdHRvbSBvZiB0aGUgY29udHJvbFxuICAgICAgICAgICAgY2FudmFzQ29udGV4dC50cmFuc2xhdGUoMCwgZC5oZWlnaHQgLSBsYXllckgpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxheWVycy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGRyYXdMYXllcihsYXllcnNbaV0sIGkgPT0gYXJ0d29yay5nZXRBY3RpdmVMYXllckluZGV4KCkpO1xuICAgICAgICAgICAgICAgIGNhbnZhc0NvbnRleHQudHJhbnNsYXRlKDAsIC1sYXllckgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAobGF5ZXJEcmFnUmVhbGx5KSB7XG4gICAgICAgICAgICAgICAgY2FudmFzQ29udGV4dC50cmFuc2xhdGUoMCwgbGF5ZXJzLmxlbmd0aCAqIGxheWVySCAtIChkLmhlaWdodCAtIGxheWVySCkpO1xuICAgICAgICAgICAgICAgIGNhbnZhc0NvbnRleHQuc3Ryb2tlUmVjdCgwLCBsYXllckRyYWdZICogY2FudmFzU2NhbGVGYWN0b3IgIC0gbGF5ZXJIIC8gMiwgZC53aWR0aCwgbGF5ZXJIKTtcblxuICAgICAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgICAgICBsYXllck92ZXIgPSBnZXRMYXllckluZGV4KHt4OiAwLCB5OiBsYXllckRyYWdZfSk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgaWYgKGxheWVyT3ZlciA8PSBsYXllcnMubGVuZ3RoICYmIGxheWVyT3ZlciAhPSBsYXllckRyYWdJbmRleCAmJiBsYXllck92ZXIgIT0gbGF5ZXJEcmFnSW5kZXggKyAxKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhbnZhc0NvbnRleHQuZmlsbFJlY3QoMCwgZC5oZWlnaHQgLSBsYXllck92ZXIgKiBsYXllckggLSAyLCBkLndpZHRoLCA0ICogd2luZG93LmRldmljZVBpeGVsUmF0aW8pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY2FudmFzQ29udGV4dC5yZXN0b3JlKCk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnJlc2l6ZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgYXJ0d29yayA9IGNvbnRyb2xsZXIuZ2V0QXJ0d29yaygpLFxuXG4gICAgICAgICAgICAgICAgLy8gT3VyIHBhcmVudCBjb250YWluZXIgd2lsbCBhY3QgYXMgb3VyIHNjcm9sbGJhciBjbGlwIGFyZWFcbiAgICAgICAgICAgICAgICBwYXJlbnQgPSAkKGNhbnZhcykucGFyZW50KCksXG4gICAgICAgICAgICAgICAgcGFyZW50SGVpZ2h0ID0gcGFyZW50LmhlaWdodCgpLFxuICAgICAgICAgICAgICAgIHBhcmVudFdpZHRoID0gcGFyZW50LndpZHRoKCksXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgbmV3V2lkdGgsIG5ld0hlaWdodDtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgbGF5ZXJIID0gMzQgKiB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbztcbiAgICAgICAgICAgIGV5ZVcgPSAyNCAqIHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBuZXdXaWR0aCA9IHBhcmVudFdpZHRoICogd2luZG93LmRldmljZVBpeGVsUmF0aW87XG4gICAgICAgICAgICBuZXdIZWlnaHQgPSBNYXRoLm1heChsYXllckggKiBhcnR3b3JrLmdldExheWVyQ291bnQoKSwgcGFyZW50SGVpZ2h0ICogd2luZG93LmRldmljZVBpeGVsUmF0aW8pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBTaG91bGQgd2UgdHJpZ2dlciBhIHNjcm9sbGJhciB0byBhcHBlYXI/XG4gICAgICAgICAgICBpZiAobmV3SGVpZ2h0ID4gcGFyZW50SGVpZ2h0ICogd2luZG93LmRldmljZVBpeGVsUmF0aW8pIHtcbiAgICAgICAgICAgICAgICAvLyBUYWtlIHRoZSBzY3JvbGxiYXIgd2lkdGggaW50byBhY2NvdW50IGluIG91ciB3aWR0aFxuICAgICAgICAgICAgICAgIG5ld1dpZHRoIC09IDE1ICogd2luZG93LmRldmljZVBpeGVsUmF0aW87XG4gICAgICAgICAgICAgICAgcGFyZW50WzBdLnN0eWxlLm92ZXJmbG93WSA9ICdzY3JvbGwnO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBwYXJlbnRbMF0uc3R5bGUub3ZlcmZsb3dZID0gJ2hpZGRlbic7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNhbnZhcy53aWR0aCA9IG5ld1dpZHRoO1xuICAgICAgICAgICAgY2FudmFzLmhlaWdodCA9IG5ld0hlaWdodDtcblxuICAgICAgICAgICAgY2FudmFzLnN0eWxlLndpZHRoID0gKG5ld1dpZHRoIC8gd2luZG93LmRldmljZVBpeGVsUmF0aW8pICsgXCJweFwiO1xuICAgICAgICAgICAgY2FudmFzLnN0eWxlLmhlaWdodCA9IChuZXdIZWlnaHQgLyB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbykgKyBcInB4XCI7XG5cbiAgICAgICAgICAgIGNhbnZhc0NvbnRleHQuZm9udCA9IChsYXllckggKiAwLjI1KSArIFwicHQgc2Fucy1zZXJpZlwiO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB0aGlzLnBhaW50KCk7XG4gICAgICAgICAgICB0aGlzLmRpc21pc3NOb3RpZmljYXRpb24oKTtcbiAgICAgICAgfTtcbiAgICAgICAgXG4gICAgICAgIHRoaXMuZ2V0RWxlbWVudCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIGNvbnRhaW5lcjtcbiAgICAgICAgfTtcbiAgICAgICAgXG4gICAgICAgIGNhbnZhcy5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgaWYgKHJlbmFtZUZpZWxkLmlzVmlzaWJsZSgpKSB7XG4gICAgICAgICAgICAgICAgcmVuYW1lRmllbGQucmVuYW1lQW5kSGlkZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIGNhbnZhcy5hZGRFdmVudExpc3RlbmVyKFwiZGJsY2xpY2tcIiwgZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgdmFyIFxuICAgICAgICAgICAgICAgIG9mZnNldCA9ICQoY2FudmFzKS5vZmZzZXQoKSxcbiAgICAgICAgICAgICAgICBtb3VzZUxvYyA9IHt4OiBlLnBhZ2VYIC0gb2Zmc2V0LmxlZnQsIHk6IGUucGFnZVkgLSBvZmZzZXQudG9wfSxcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBsYXllckluZGV4ID0gZ2V0TGF5ZXJJbmRleChtb3VzZUxvYyk7XG5cbiAgICAgICAgICAgIGlmIChtb3VzZUxvYy54ICogd2luZG93LmRldmljZVBpeGVsUmF0aW8gPiBleWVXICYmIGxheWVySW5kZXggPj0gMCAmJiBsYXllckluZGV4IDwgYXJ0d29yay5nZXRMYXllckNvdW50KCkpIHtcbiAgICAgICAgICAgICAgICBzaG93UmVuYW1lQ29udHJvbChsYXllckluZGV4KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgb2Zmc2V0ID0gJChjYW52YXMpLm9mZnNldCgpLFxuICAgICAgICAgICAgICAgIG1vdXNlTG9jID0ge3g6IGUucGFnZVggLSBvZmZzZXQubGVmdCwgeTogZS5wYWdlWSAtIG9mZnNldC50b3B9O1xuXG4gICAgICAgICAgICAvKiBDbGljaywgbW92ZWQgZnJvbSBtb3VzZUNsaWNrZWQgZHVlIHRvIHByb2JsZW1zIHdpdGggZm9jdXMgYW5kIHN0dWZmICovXG4gICAgICAgICAgICBpZiAoZS5idXR0b24gPT0gMCkgeyAvKiBMZWZ0IGJ1dHRvbiAqL1xuICAgICAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgICAgICBhcnR3b3JrID0gY29udHJvbGxlci5nZXRBcnR3b3JrKCksXG4gICAgICAgICAgICAgICAgICAgIGxheWVycyA9IGFydHdvcmsuZ2V0TGF5ZXJzKCksXG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBsYXllckluZGV4ID0gZ2V0TGF5ZXJJbmRleChtb3VzZUxvYyk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgaWYgKGxheWVySW5kZXggPj0gMCAmJiBsYXllckluZGV4IDwgYXJ0d29yay5nZXRMYXllckNvdW50KCkpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgICAgICAgICBsYXllciA9IGFydHdvcmsuZ2V0TGF5ZXIobGF5ZXJJbmRleCk7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAobW91c2VMb2MueCAvICQoY2FudmFzKS53aWR0aCgpICogY2FudmFzLndpZHRoIDwgZXllVykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlci5hY3Rpb25QZXJmb3JtZWQoe2FjdGlvbjogXCJDUFNldExheWVyVmlzaWJpbGl0eVwiLCBsYXllckluZGV4OiBsYXllckluZGV4LCB2aXNpYmxlOiAhbGF5ZXIudmlzaWJsZX0pO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGFydHdvcmsuZ2V0QWN0aXZlTGF5ZXJJbmRleCgpICE9IGxheWVySW5kZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIuYWN0aW9uUGVyZm9ybWVkKHthY3Rpb246IFwiQ1BTZXRBY3RpdmVMYXllckluZGV4XCIsIGxheWVySW5kZXg6IGxheWVySW5kZXh9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBpZiAobGF5ZXJJbmRleCA8IGxheWVycy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgbGF5ZXJEcmFnID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgbGF5ZXJEcmFnWSA9IG1vdXNlTG9jLnk7XG4gICAgICAgICAgICAgICAgICAgIGxheWVyRHJhZ0luZGV4ID0gbGF5ZXJJbmRleDtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsIG1vdXNlRHJhZ2dlZCk7XG4gICAgICAgICAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwibW91c2V1cFwiLCBtb3VzZVVwKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTY3JvbGwgdGhlIGxheWVyIHdpZGdldCB1bnRpbCB0aGUgbGF5ZXIgd2l0aCB0aGUgZ2l2ZW4gaW5kZXggaXMgZnVsbHkgdmlzaWJsZS5cbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIGxheWVySW5kZXhcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIHJldmVhbExheWVyKGxheWVySW5kZXgpIHtcbiAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgIGxheWVyV2lkZ2V0UG9zID0gY2FudmFzLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLFxuXG4gICAgICAgICAgICAgICAgc2Nyb2xsQm94UG9zID0gY29udGFpbmVyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLFxuICAgICAgICAgICAgICAgIHNjcm9sbEJveEhlaWdodCA9IHNjcm9sbEJveFBvcy5ib3R0b20gLSBzY3JvbGxCb3hQb3MudG9wLFxuXG4gICAgICAgICAgICAgICAgbGF5ZXJIZWlnaHQgPSBsYXllckggLyB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyxcblxuICAgICAgICAgICAgICAgIGxheWVyVG9wID0gbGF5ZXJXaWRnZXRQb3MuYm90dG9tIC0gbGF5ZXJIZWlnaHQgKiAobGF5ZXJJbmRleCArIDEpLFxuICAgICAgICAgICAgICAgIGxheWVyQm90dG9tID0gbGF5ZXJUb3AgKyBsYXllckhlaWdodDtcblxuICAgICAgICAgICAgY29udGFpbmVyLnNjcm9sbFRvcCA9IE1hdGgubWF4KE1hdGgubWluKE1hdGgubWF4KGNvbnRhaW5lci5zY3JvbGxUb3AsIGxheWVyQm90dG9tIC0gbGF5ZXJXaWRnZXRQb3MudG9wIC0gc2Nyb2xsQm94SGVpZ2h0KSwgbGF5ZXJUb3AgLSBsYXllcldpZGdldFBvcy50b3ApLCAwKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuZGlzbWlzc05vdGlmaWNhdGlvbiA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgJChjYW52YXMpLnBvcG92ZXIoJ2hpZGUnKTtcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLnNob3dOb3RpZmljYXRpb24gPSBmdW5jdGlvbihsYXllckluZGV4LCBtZXNzYWdlLCB3aGVyZSkge1xuICAgICAgICAgICAgbm90aWZpY2F0aW9uTWVzc2FnZSA9IG1lc3NhZ2U7XG4gICAgICAgICAgICBub3RpZmljYXRpb25MYXllckluZGV4ID0gbGF5ZXJJbmRleDtcblxuICAgICAgICAgICAgaWYgKGFydHdvcmsuZ2V0QWN0aXZlTGF5ZXJJbmRleCgpID09IGxheWVySW5kZXggJiYgd2hlcmUgPT0gXCJvcGFjaXR5XCIpIHtcbiAgICAgICAgICAgICAgICBub3RpZmljYXRpb25Mb2NhdGlvbiA9IFwib3BhY2l0eVwiO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBub3RpZmljYXRpb25Mb2NhdGlvbiA9IFwibGF5ZXJcIjtcbiAgICAgICAgICAgICAgICByZXZlYWxMYXllcihsYXllckluZGV4KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgJChjYW52YXMpLnBvcG92ZXIoXCJzaG93XCIpO1xuXG4gICAgICAgICAgICBpZiAoZGlzbWlzc1RpbWVyKSB7XG4gICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KGRpc21pc3NUaW1lcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkaXNtaXNzVGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIGRpc21pc3NUaW1lciA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHRoYXQuZGlzbWlzc05vdGlmaWNhdGlvbigpXG4gICAgICAgICAgICB9LCBNYXRoLm1heChNYXRoLnJvdW5kKG5vdGlmaWNhdGlvbk1lc3NhZ2UubGVuZ3RoICogTk9USUZJQ0FUSU9OX0hJREVfREVMQVlfTVNfUEVSX0NIQVIpLCBOT1RJRklDQVRJT05fSElERV9ERUxBWV9NSU4pKTtcbiAgICAgICAgfTtcblxuICAgICAgICAvKiBSZXBvc2l0aW9uIHRoZSBwb3BvdmVyIHRvIHRoZSBsYXllci9sb2NhdGlvbiB0aGF0IHRoZSBub3RpZmljYXRpb24gYXBwbGllcyB0byAqL1xuICAgICAgICBmdW5jdGlvbiBhcHBseU5vdGlmaWNhdGlvblBsYWNlbWVudChvZmZzZXQsIHBsYWNlbWVudCkge1xuICAgICAgICAgICAgb2xkQXBwbHlQbGFjZW1lbnQuY2FsbCh0aGlzLCBvZmZzZXQsIHBsYWNlbWVudCk7XG5cbiAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgICR0aXAgPSB0aGlzLnRpcCgpLFxuICAgICAgICAgICAgICAgICRhcnJvdyA9IHRoaXMuYXJyb3coKSxcbiAgICAgICAgICAgICAgICBsYXllcldpZGdldFBvcyA9IGNhbnZhcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxcbiAgICAgICAgICAgICAgICBzY3JvbGxCb3hQb3MgPSBjb250YWluZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG5cbiAgICAgICAgICAgIHN3aXRjaCAobm90aWZpY2F0aW9uTG9jYXRpb24pIHtcbiAgICAgICAgICAgICAgICBjYXNlIFwibGF5ZXJcIjpcbiAgICAgICAgICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgICAgICAgICBsYXllck1pZGRsZSA9IGxheWVyV2lkZ2V0UG9zLmJvdHRvbSAtIGxheWVySCAvIHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvICogKG5vdGlmaWNhdGlvbkxheWVySW5kZXggKyAwLjUpO1xuXG4gICAgICAgICAgICAgICAgICAgIGxheWVyTWlkZGxlID0gTWF0aC5taW4oTWF0aC5tYXgobGF5ZXJNaWRkbGUsIHNjcm9sbEJveFBvcy50b3ApLCBzY3JvbGxCb3hQb3MuYm90dG9tKTtcblxuICAgICAgICAgICAgICAgICAgICAkdGlwLm9mZnNldCh7XG4gICAgICAgICAgICAgICAgICAgICAgICB0b3A6IGxheWVyTWlkZGxlICsgZG9jdW1lbnQuYm9keS5zY3JvbGxUb3AgLSAkdGlwLmhlaWdodCgpIC8gMixcbiAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQ6IGxheWVyV2lkZ2V0UG9zLmxlZnQgLSAkdGlwLm91dGVyV2lkdGgoKSAtICRhcnJvdy5vdXRlcldpZHRoKClcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBcIm9wYWNpdHlcIjpcbiAgICAgICAgICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgICAgICAgICBhbHBoYVNsaWRlclBvcyA9IGFscGhhU2xpZGVyLmdldEVsZW1lbnQoKS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcblxuICAgICAgICAgICAgICAgICAgICAkdGlwLm9mZnNldCh7XG4gICAgICAgICAgICAgICAgICAgICAgICB0b3A6IChhbHBoYVNsaWRlclBvcy50b3AgKyBhbHBoYVNsaWRlclBvcy5ib3R0b20gLSAkdGlwLmhlaWdodCgpKSAvIDIgKyBkb2N1bWVudC5ib2R5LnNjcm9sbFRvcCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQ6IGFscGhhU2xpZGVyUG9zLmxlZnQgLSAkdGlwLm91dGVyV2lkdGgoKSAtICRhcnJvdy5vdXRlcldpZHRoKClcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICRhcnJvdy5jc3MoXCJ0b3BcIiwgXCI1MCVcIik7XG4gICAgICAgIH1cblxuICAgICAgICBjb250cm9sbGVyLm9uKFwibGF5ZXJOb3RpZmljYXRpb25cIiwgdGhpcy5zaG93Tm90aWZpY2F0aW9uLmJpbmQodGhpcykpO1xuXG4gICAgICAgICQoY2FudmFzKVxuICAgICAgICAgICAgLnBvcG92ZXIoe1xuICAgICAgICAgICAgICAgIGh0bWw6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGNvbnRlbnQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbm90aWZpY2F0aW9uTWVzc2FnZTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHBsYWNlbWVudDogXCJsZWZ0XCIsXG4gICAgICAgICAgICAgICAgdHJpZ2dlcjogXCJtYW51YWxcIixcbiAgICAgICAgICAgICAgICBjb250YWluZXI6IHBhbGV0dGUuZ2V0RWxlbWVudCgpXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICB2YXJcbiAgICAgICAgICAgIHBvcG92ZXIgPSAkKGNhbnZhcykuZGF0YSgnYnMucG9wb3ZlcicpO1xuXG4gICAgICAgIC8vIFNhdmUgdGhlIG9sZCBwb3NpdGlvbmluZyByb3V0aW5lIHNvIHdlIGNhbiBjYWxsIGl0IGxhdGVyXG4gICAgICAgIG9sZEFwcGx5UGxhY2VtZW50ID0gcG9wb3Zlci5hcHBseVBsYWNlbWVudDtcblxuICAgICAgICBwb3BvdmVyLmFwcGx5UGxhY2VtZW50ID0gYXBwbHlOb3RpZmljYXRpb25QbGFjZW1lbnQ7XG4gICAgICAgIFxuICAgICAgICBpZiAoIXdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvKSB7XG4gICAgICAgICAgICB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyA9IDEuMDtcbiAgICAgICAgfVxuXG4gICAgICAgIGNhbnZhc0NvbnRleHQuc3Ryb2tlU3R5bGUgPSAnYmxhY2snO1xuICAgICAgICBcbiAgICAgICAgY29udGFpbmVyLmNsYXNzTmFtZSA9IFwiY2hpY2tlbnBhaW50LWxheWVycy13aWRnZXRcIjtcbiAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGNhbnZhcyk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gQ1BSZW5hbWVGaWVsZCgpIHtcbiAgICAgICAgdmFyXG4gICAgICAgICAgICBsYXllckluZGV4ID0gLTEsXG4gICAgICAgICAgICB0ZXh0Qm94ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpLFxuICAgICAgICAgICAgXG4gICAgICAgICAgICB0aGF0ID0gdGhpcztcblxuICAgICAgICB0aGlzLmhpZGUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGxheWVySW5kZXggPSAtMTtcbiAgICAgICAgICAgIHRleHRCb3guc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLnJlbmFtZUFuZEhpZGUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmIChhcnR3b3JrLmdldExheWVyKGxheWVySW5kZXgpLm5hbWUgIT0gdGV4dEJveC52YWx1ZSkge1xuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIuYWN0aW9uUGVyZm9ybWVkKHthY3Rpb246IFwiQ1BTZXRMYXllck5hbWVcIiwgbGF5ZXJJbmRleDogbGF5ZXJJbmRleCwgbmFtZTogdGV4dEJveC52YWx1ZX0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLmhpZGUoKTtcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLmlzVmlzaWJsZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRleHRCb3guc3R5bGUuZGlzcGxheSAhPSAnbm9uZSc7XG4gICAgICAgIH07XG4gICAgICAgIFxuICAgICAgICB0aGlzLnNldExvY2F0aW9uID0gZnVuY3Rpb24ocG9zaXRpb25YLCBwb3NpdGlvblkpIHtcbiAgICAgICAgICAgIHRleHRCb3guc3R5bGUubGVmdCA9IHBvc2l0aW9uWCArIFwicHhcIjtcbiAgICAgICAgICAgIHRleHRCb3guc3R5bGUudG9wID0gcG9zaXRpb25ZICsgXCJweFwiO1xuICAgICAgICB9O1xuICAgICAgICBcbiAgICAgICAgdGhpcy5zaG93ID0gZnVuY3Rpb24oeCwgeSwgX2xheWVySW5kZXgsIGxheWVyTmFtZSkge1xuICAgICAgICAgICAgbGF5ZXJJbmRleCA9IF9sYXllckluZGV4O1xuICAgICAgICAgICAgdGV4dEJveC52YWx1ZSA9IGxheWVyTmFtZTtcbiAgICAgICAgICAgIHRoaXMuc2V0TG9jYXRpb24oeCwgeSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRleHRCb3guc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgICAgICAgICB0ZXh0Qm94LnNlbGVjdCgpO1xuICAgICAgICB9O1xuICAgICAgICBcbiAgICAgICAgdGhpcy5nZXRFbGVtZW50ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gdGV4dEJveDtcbiAgICAgICAgfTtcbiAgICAgICAgXG4gICAgICAgIHRleHRCb3gudHlwZSA9IFwidGV4dFwiO1xuICAgICAgICB0ZXh0Qm94LmNsYXNzTmFtZSA9IFwiY2hpY2tlbnBhaW50LWxheWVyLW5ldy1uYW1lIGZvcm0tY29udHJvbCBpbnB1dC1zbVwiO1xuICAgICAgICB0ZXh0Qm94LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG5cbiAgICAgICAgdGV4dEJveC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAvLyBQcmV2ZW50IG90aGVyIGtleWhhbmRsZXJzIChDUENhbnZhcykgZnJvbSBnZXR0aW5nIHRoZWlyIGdydWJieSBoYW5kcyBvbiB0aGUgaW5wdXRcbiAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRleHRCb3guYWRkRXZlbnRMaXN0ZW5lcihcImtleXByZXNzXCIsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgIGlmIChlLmtleUNvZGUgPT0gMTMpIHsgLy8gRW50ZXJcbiAgICAgICAgICAgICAgICB0aGF0LnJlbmFtZUFuZEhpZGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRleHRCb3guYWRkRXZlbnRMaXN0ZW5lcihcImtleXVwXCIsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgIGlmIChlLmtleUNvZGUgPT0gMjcpIHsgLy8gRXNjYXBlXG4gICAgICAgICAgICAgICAgdGhhdC5oaWRlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICB9KTtcblxuICAgICAgICB0ZXh0Qm94LmFkZEV2ZW50TGlzdGVuZXIoXCJibHVyXCIsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgIGlmIChsYXllckluZGV4ICE9IC0xKSB7XG4gICAgICAgICAgICAgICAgdGhhdC5yZW5hbWVBbmRIaWRlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGJsZW5kQ29tYm8uY2xhc3NOYW1lID0gXCJmb3JtLWNvbnRyb2xcIjtcbiAgICBibGVuZENvbWJvLnRpdGxlID0gXCJMYXllciBibGVuZGluZyBtb2RlXCI7XG4gICAgYmxlbmRDb21iby5hZGRFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgY29udHJvbGxlci5hY3Rpb25QZXJmb3JtZWQoe2FjdGlvbjogXCJDUFNldExheWVyQmxlbmRNb2RlXCIsIGxheWVySW5kZXg6IGFydHdvcmsuZ2V0QWN0aXZlTGF5ZXJJbmRleCgpLCBibGVuZE1vZGU6IHBhcnNlSW50KGJsZW5kQ29tYm8udmFsdWUsIDEwKX0pO1xuICAgIH0pO1xuICAgIFxuICAgIGZpbGxDb21ib2JveChibGVuZENvbWJvLCBNT0RFX05BTUVTKTtcblxuICAgIGJvZHkuYXBwZW5kQ2hpbGQoYmxlbmRDb21ibyk7XG4gICAgXG4gICAgYWxwaGFTbGlkZXIudGl0bGUgPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICByZXR1cm4gXCJPcGFjaXR5OiBcIiArIHZhbHVlICsgXCIlXCI7XG4gICAgfTtcbiAgICBcbiAgICBhbHBoYVNsaWRlci5vbihcInZhbHVlQ2hhbmdlXCIsIGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgIGNvbnRyb2xsZXIuYWN0aW9uUGVyZm9ybWVkKHthY3Rpb246IFwiQ1BTZXRMYXllckFscGhhXCIsIGxheWVySW5kZXg6IGFydHdvcmsuZ2V0QWN0aXZlTGF5ZXJJbmRleCgpLCBhbHBoYTogdmFsdWV9KTtcbiAgICB9KTtcbiAgICBcbiAgICBib2R5LmFwcGVuZENoaWxkKGFscGhhU2xpZGVyLmdldEVsZW1lbnQoKSk7XG5cbiAgICBjYlNhbXBsZUFsbExheWVycy50eXBlID0gXCJjaGVja2JveFwiO1xuICAgIGNiU2FtcGxlQWxsTGF5ZXJzLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbihlKSB7XG4gICAgICAgIHZhclxuICAgICAgICAgICAgYXJ0d29yayA9IGNvbnRyb2xsZXIuZ2V0QXJ0d29yaygpO1xuICAgICAgICBcbiAgICAgICAgYXJ0d29yay5zZXRTYW1wbGVBbGxMYXllcnMoY2JTYW1wbGVBbGxMYXllcnMuY2hlY2tlZCk7XG4gICAgfSk7XG4gICAgXG4gICAgYm9keS5hcHBlbmRDaGlsZCh3cmFwQ2hlY2tib3hXaXRoTGFiZWwoY2JTYW1wbGVBbGxMYXllcnMsIFwiU2FtcGxlIGFsbCBsYXllcnNcIikpO1xuICAgIFxuICAgIGNiTG9ja0FscGhhLnR5cGUgPSBcImNoZWNrYm94XCI7XG4gICAgY2JMb2NrQWxwaGEuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgdmFyXG4gICAgICAgICAgICBhcnR3b3JrID0gY29udHJvbGxlci5nZXRBcnR3b3JrKCk7XG4gICAgICAgIFxuICAgICAgIGFydHdvcmsuc2V0TG9ja0FscGhhKGNiTG9ja0FscGhhLmNoZWNrZWQpO1xuICAgIH0pO1xuICAgICAgICBcbiAgICBib2R5LmFwcGVuZENoaWxkKHdyYXBDaGVja2JveFdpdGhMYWJlbChjYkxvY2tBbHBoYSwgXCJMb2NrIGFscGhhXCIpKTtcblxuICAgIGxheWVyV2lkZ2V0LmdldEVsZW1lbnQoKS5hcHBlbmRDaGlsZChyZW5hbWVGaWVsZC5nZXRFbGVtZW50KCkpO1xuXG4gICAgYm9keS5hcHBlbmRDaGlsZChsYXllcldpZGdldC5nZXRFbGVtZW50KCkpO1xuXG4gICAgLy8gQWRkL1JlbW92ZSBsYXllciBidXR0b25zXG4gICAgdmFyXG4gICAgICAgIGFkZFJlbW92ZUNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ1bFwiKTtcbiAgICBcbiAgICBhZGRSZW1vdmVDb250YWluZXIuY2xhc3NOYW1lID0gJ2NoaWNrZW5wYWludC1sYXllci1hZGQtcmVtb3ZlIGxpc3QtdW5zdHlsZWQnO1xuICAgIFxuICAgIGFkZEJ1dHRvbi5jbGFzc05hbWUgPSAnY2hpY2tlbnBhaW50LXNtYWxsLXRvb2xiYXItYnV0dG9uIGNoaWNrZW5wYWludC1hZGQtbGF5ZXInO1xuICAgIGFkZEJ1dHRvbi50aXRsZSA9ICdBZGQgbGF5ZXInO1xuICAgIGFkZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24oKSB7XG4gICAgICAgIGNvbnRyb2xsZXIuYWN0aW9uUGVyZm9ybWVkKHthY3Rpb246IFwiQ1BBZGRMYXllclwifSk7XG4gICAgfSk7XG5cbiAgICByZW1vdmVCdXR0b24uY2xhc3NOYW1lID0gJ2NoaWNrZW5wYWludC1zbWFsbC10b29sYmFyLWJ1dHRvbiBjaGlja2VucGFpbnQtcmVtb3ZlLWxheWVyJztcbiAgICByZW1vdmVCdXR0b24udGl0bGUgPSBcIkRlbGV0ZSBsYXllclwiO1xuICAgIHJlbW92ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24oKSB7XG4gICAgICAgIGNvbnRyb2xsZXIuYWN0aW9uUGVyZm9ybWVkKHthY3Rpb246IFwiQ1BSZW1vdmVMYXllclwifSk7XG4gICAgfSk7XG4gICAgXG4gICAgYWRkUmVtb3ZlQ29udGFpbmVyLmFwcGVuZENoaWxkKGFkZEJ1dHRvbik7XG4gICAgYWRkUmVtb3ZlQ29udGFpbmVyLmFwcGVuZENoaWxkKHJlbW92ZUJ1dHRvbik7XG5cbiAgICBib2R5LmFwcGVuZENoaWxkKGFkZFJlbW92ZUNvbnRhaW5lcik7XG4gICAgXG4gICAgdmFyXG4gICAgICAgIGFydHdvcmsgPSBjb250cm9sbGVyLmdldEFydHdvcmsoKTtcblxuICAgIC8vIFNldCBpbml0aWFsIHZhbHVlc1xuICAgIGFscGhhU2xpZGVyLnNldFZhbHVlKGFydHdvcmsuZ2V0QWN0aXZlTGF5ZXIoKS5nZXRBbHBoYSgpKTtcbiAgICBibGVuZENvbWJvLnZhbHVlID0gYXJ0d29yay5nZXRBY3RpdmVMYXllcigpLmdldEJsZW5kTW9kZSgpO1xuXG4gICAgYXJ0d29yay5vbihcImNoYW5nZUxheWVyXCIsIGZ1bmN0aW9uKGxheWVySW5kZXgpIHtcbiAgICAgICAgdmFyXG4gICAgICAgICAgICBhcnR3b3JrID0gdGhpcztcbiAgICAgICAgXG4gICAgICAgIGlmIChhcnR3b3JrLmdldEFjdGl2ZUxheWVyKCkuZ2V0QWxwaGEoKSAhPSBhbHBoYVNsaWRlci52YWx1ZSkge1xuICAgICAgICAgICAgYWxwaGFTbGlkZXIuc2V0VmFsdWUoYXJ0d29yay5nZXRBY3RpdmVMYXllcigpLmdldEFscGhhKCkpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGFydHdvcmsuZ2V0QWN0aXZlTGF5ZXIoKS5nZXRCbGVuZE1vZGUoKSAhPSBwYXJzZUludChibGVuZENvbWJvLnZhbHVlLCAxMCkpIHtcbiAgICAgICAgICAgIGJsZW5kQ29tYm8udmFsdWUgPSBhcnR3b3JrLmdldEFjdGl2ZUxheWVyKCkuZ2V0QmxlbmRNb2RlKCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAobGF5ZXJJbmRleCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBsYXllcldpZGdldC5wYWludExheWVyKGxheWVySW5kZXgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gV2UgbWF5IGhhdmUgYWRkZWQgb3IgcmVtb3ZlZCBsYXllcnMsIHJlc2l6ZSBhcyBhcHByb3ByaWF0ZVxuICAgICAgICAgICAgbGF5ZXJXaWRnZXQucmVzaXplKCk7XG4gICAgICAgIH1cblxuICAgICAgICBsYXllcldpZGdldC5kaXNtaXNzTm90aWZpY2F0aW9uKCk7XG4gICAgfSk7XG59XG5cbkNQTGF5ZXJzUGFsZXR0ZS5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKENQUGFsZXR0ZS5wcm90b3R5cGUpO1xuQ1BMYXllcnNQYWxldHRlLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IENQTGF5ZXJzUGFsZXR0ZTsiLCIvKlxuICAgIENoaWNrZW5QYWludFxuICAgIFxuICAgIENoaWNrZW5QYWludCBpcyBhIHRyYW5zbGF0aW9uIG9mIENoaWJpUGFpbnQgZnJvbSBKYXZhIHRvIEphdmFTY3JpcHRcbiAgICBieSBOaWNob2xhcyBTaGVybG9jayAvIENoaWNrZW4gU21vb3RoaWUuXG4gICAgXG4gICAgQ2hpYmlQYWludCBpcyBDb3B5cmlnaHQgKGMpIDIwMDYtMjAwOCBNYXJjIFNjaGVmZXJcblxuICAgIENoaWNrZW5QYWludCBpcyBmcmVlIHNvZnR3YXJlOiB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3IgbW9kaWZ5XG4gICAgaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBhcyBwdWJsaXNoZWQgYnlcbiAgICB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uLCBlaXRoZXIgdmVyc2lvbiAzIG9mIHRoZSBMaWNlbnNlLCBvclxuICAgIChhdCB5b3VyIG9wdGlvbikgYW55IGxhdGVyIHZlcnNpb24uXG5cbiAgICBDaGlja2VuUGFpbnQgaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCxcbiAgICBidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZlxuICAgIE1FUkNIQU5UQUJJTElUWSBvciBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS4gIFNlZSB0aGVcbiAgICBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9yZSBkZXRhaWxzLlxuXG4gICAgWW91IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2VcbiAgICBhbG9uZyB3aXRoIENoaWNrZW5QYWludC4gSWYgbm90LCBzZWUgPGh0dHA6Ly93d3cuZ251Lm9yZy9saWNlbnNlcy8+LlxuKi9cblxuaW1wb3J0IENQQ2FudmFzIGZyb20gXCIuL0NQQ2FudmFzXCI7XG5pbXBvcnQgQ1BQYWxldHRlTWFuYWdlciBmcm9tIFwiLi9DUFBhbGV0dGVNYW5hZ2VyXCI7XG5pbXBvcnQgQ1BNYWluTWVudSBmcm9tIFwiLi9DUE1haW5NZW51XCI7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIENQTWFpbkdVSShjb250cm9sbGVyLCB1aUVsZW0pIHtcbiAgICB2YXJcbiAgICAgICAgbG93ZXJBcmVhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSxcbiAgICAgICAgY2FudmFzID0gbmV3IENQQ2FudmFzKGNvbnRyb2xsZXIpLFxuICAgICAgICBwYWxldHRlTWFuYWdlciA9IG5ldyBDUFBhbGV0dGVNYW5hZ2VyKGNvbnRyb2xsZXIpLFxuICAgICAgICBtZW51QmFyLFxuXG4gICAgICAgIGZ1bGxTY3JlZW5Nb2RlID0gZmFsc2UsXG4gICAgICAgIFxuICAgICAgICB0aGF0ID0gdGhpcztcbiAgICBcbiAgICB0aGlzLnRvZ2dsZVBhbGV0dGVzID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHBhbGV0dGVNYW5hZ2VyLnRvZ2dsZVBhbGV0dGVzKCk7XG4gICAgfTtcbiAgICBcbiAgICB0aGlzLmFycmFuZ2VQYWxldHRlcyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAvLyBHaXZlIHRoZSBicm93c2VyIGEgY2hhbmNlIHRvIGRvIHRoZSBzaXppbmcgb2YgdGhlIHBhbGV0dGVzIGJlZm9yZSB3ZSB0cnkgdG8gcmVhcnJhbmdlIHRoZW1cbiAgICAgICAgc2V0VGltZW91dChwYWxldHRlTWFuYWdlci5hcnJhbmdlUGFsZXR0ZXMuYmluZChwYWxldHRlTWFuYWdlciksIDApO1xuICAgIH07XG5cbiAgICB0aGlzLmNvbnN0cmFpblBhbGV0dGVzID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHBhbGV0dGVNYW5hZ2VyLmNvbnN0cmFpblBhbGV0dGVzKCk7XG4gICAgfTtcbiAgICBcbiAgICB0aGlzLnNob3dQYWxldHRlID0gZnVuY3Rpb24ocGFsZXR0ZU5hbWUsIHNob3cpIHtcbiAgICAgICAgcGFsZXR0ZU1hbmFnZXIuc2hvd1BhbGV0dGVCeU5hbWUocGFsZXR0ZU5hbWUsIHNob3cpO1xuICAgIH07XG4gICAgXG4gICAgdGhpcy5nZXRTd2F0Y2hlcyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gcGFsZXR0ZU1hbmFnZXIucGFsZXR0ZXMuc3dhdGNoZXMuZ2V0U3dhdGNoZXMoKTtcbiAgICB9O1xuXG4gICAgdGhpcy5zZXRTd2F0Y2hlcyA9IGZ1bmN0aW9uKHN3YXRjaGVzKSB7XG4gICAgICAgIHBhbGV0dGVNYW5hZ2VyLnBhbGV0dGVzLnN3YXRjaGVzLnNldFN3YXRjaGVzKHN3YXRjaGVzKTtcbiAgICB9O1xuICAgIFxuICAgIHRoaXMuZ2V0UGFsZXR0ZU1hbmFnZXIgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHBhbGV0dGVNYW5hZ2VyO1xuICAgIH07XG4gICAgXG4gICAgdGhpcy5zZXRSb3RhdGlvbiA9IGZ1bmN0aW9uKHJvdGF0aW9uKSB7XG4gICAgICAgIGNhbnZhcy5zZXRSb3RhdGlvbihyb3RhdGlvbik7XG4gICAgfTtcblxuICAgIHRoaXMuc2V0RnVsbFNjcmVlbk1vZGUgPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICBmdWxsU2NyZWVuTW9kZSA9IHZhbHVlO1xuXG4gICAgICAgIHRoYXQucmVzaXplKCk7XG4gICAgICAgIHRoYXQuYXJyYW5nZVBhbGV0dGVzKCk7XG4gICAgfTtcblxuICAgIHRoaXMucmVzaXplID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhclxuICAgICAgICAgICAgbmV3SGVpZ2h0O1xuXG4gICAgICAgIGlmIChmdWxsU2NyZWVuTW9kZSkge1xuICAgICAgICAgICAgbmV3SGVpZ2h0ID0gJCh3aW5kb3cpLmhlaWdodCgpIC0gJChtZW51QmFyLmdldEVsZW1lbnQoKSkuaGVpZ2h0KCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBuZXdIZWlnaHQgPSBNYXRoLm1pbihNYXRoLm1heCgoJCh3aW5kb3cpLmhlaWdodCgpIC0gJChtZW51QmFyLmdldEVsZW1lbnQoKSkuaGVpZ2h0KCkgLSA2NSksIDUwMCksIDc1MCk7XG4gICAgICAgIH1cblxuICAgICAgICBjYW52YXMucmVzaXplKG5ld0hlaWdodCk7XG4gICAgICAgIHRoYXQuY29uc3RyYWluUGFsZXR0ZXMoKTtcbiAgICB9O1xuXG4gICAgbWVudUJhciA9IG5ldyBDUE1haW5NZW51KGNvbnRyb2xsZXIsIHRoaXMpXG5cbiAgICB1aUVsZW0uYXBwZW5kQ2hpbGQobWVudUJhci5nZXRFbGVtZW50KCkpO1xuICAgIFxuICAgIGxvd2VyQXJlYS5jbGFzc05hbWUgPSAnY2hpY2tlbnBhaW50LW1haW4tc2VjdGlvbic7XG4gICAgXG4gICAgbG93ZXJBcmVhLmFwcGVuZENoaWxkKGNhbnZhcy5nZXRFbGVtZW50KCkpO1xuICAgIGxvd2VyQXJlYS5hcHBlbmRDaGlsZChwYWxldHRlTWFuYWdlci5nZXRFbGVtZW50KCkpO1xuICAgIFxuICAgIHVpRWxlbS5hcHBlbmRDaGlsZChsb3dlckFyZWEpO1xuXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIiwgdGhpcy5yZXNpemUuYmluZCh0aGlzKSk7XG5cbiAgICBzZXRUaW1lb3V0KHRoaXMucmVzaXplLmJpbmQodGhpcyksIDApO1xufVxuXG5DUE1haW5HVUkucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShFdmVudEVtaXR0ZXIucHJvdG90eXBlKTtcbkNQTWFpbkdVSS5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBDUE1haW5HVUk7IiwiLypcbiAgICBDaGlja2VuUGFpbnRcbiAgICBcbiAgICBDaGlja2VuUGFpbnQgaXMgYSB0cmFuc2xhdGlvbiBvZiBDaGliaVBhaW50IGZyb20gSmF2YSB0byBKYXZhU2NyaXB0XG4gICAgYnkgTmljaG9sYXMgU2hlcmxvY2sgLyBDaGlja2VuIFNtb290aGllLlxuICAgIFxuICAgIENoaWJpUGFpbnQgaXMgQ29weXJpZ2h0IChjKSAyMDA2LTIwMDggTWFyYyBTY2hlZmVyXG5cbiAgICBDaGlja2VuUGFpbnQgaXMgZnJlZSBzb2Z0d2FyZTogeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yIG1vZGlmeVxuICAgIGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgYXMgcHVibGlzaGVkIGJ5XG4gICAgdGhlIEZyZWUgU29mdHdhcmUgRm91bmRhdGlvbiwgZWl0aGVyIHZlcnNpb24gMyBvZiB0aGUgTGljZW5zZSwgb3JcbiAgICAoYXQgeW91ciBvcHRpb24pIGFueSBsYXRlciB2ZXJzaW9uLlxuXG4gICAgQ2hpY2tlblBhaW50IGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsXG4gICAgYnV0IFdJVEhPVVQgQU5ZIFdBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2ZcbiAgICBNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuICBTZWUgdGhlXG4gICAgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy5cblxuICAgIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXG4gICAgYWxvbmcgd2l0aCBDaGlja2VuUGFpbnQuIElmIG5vdCwgc2VlIDxodHRwOi8vd3d3LmdudS5vcmcvbGljZW5zZXMvPi5cbiovXG5cbnZhclxuICAgIE1FTlVfRU5UUklFUyA9IFtcbiAgICAgICAge1xuICAgICAgICAgICAgbmFtZTogXCJGaWxlXCIsXG4gICAgICAgICAgICBtbmVtb25pYzogXCJGXCIsXG4gICAgICAgICAgICBjaGlsZHJlbjogW1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJTYXZlIHRvIG15IGNvbXB1dGVyXCIsXG4gICAgICAgICAgICAgICAgICAgIGFjdGlvbjogXCJDUFNhdmVcIixcbiAgICAgICAgICAgICAgICAgICAgbW5lbW9uaWM6IFwiU1wiLFxuICAgICAgICAgICAgICAgICAgICBzaG9ydGN1dDogXCJjdHJsK3NcIlxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiBcIlNhdmUgaW1hZ2Ugb25saW5lXCIsXG4gICAgICAgICAgICAgICAgICAgIGFjdGlvbjogXCJDUFNlbmRcIixcbiAgICAgICAgICAgICAgICAgICAgbW5lbW9uaWM6IFwiU1wiLFxuICAgICAgICAgICAgICAgICAgICBzaG9ydGN1dDogXCJjdHJsK3NcIlxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBdLFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgICBuYW1lOiBcIkVkaXRcIixcbiAgICAgICAgICAgIG1uZW1vbmljOiBcIkVcIixcbiAgICAgICAgICAgIGNoaWxkcmVuOiBbXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiBcIlVuZG9cIixcbiAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiBcIkNQVW5kb1wiLFxuICAgICAgICAgICAgICAgICAgICBtbmVtb25pYzogXCJVXCIsXG4gICAgICAgICAgICAgICAgICAgIHNob3J0Y3V0OiBcImN0cmwrelwiLFxuICAgICAgICAgICAgICAgICAgICB0aXRsZTogXCJVbmRvZXMgdGhlIG1vc3QgcmVjZW50IGFjdGlvblwiXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IFwiUmVkb1wiLFxuICAgICAgICAgICAgICAgICAgICBhY3Rpb246IFwiQ1BSZWRvXCIsXG4gICAgICAgICAgICAgICAgICAgIG1uZW1vbmljOiBcIlJcIixcbiAgICAgICAgICAgICAgICAgICAgc2hvcnRjdXQ6IFwic2hpZnQrY3RybCt6XCIsXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiBcIlJlZG9lcyBhIHByZXZpb3VzbHkgdW5kb25lIGFjdGlvblwiXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IFwiQ2xlYXIgaGlzdG9yeVwiLFxuICAgICAgICAgICAgICAgICAgICBhY3Rpb246IFwiQ1BDbGVhckhpc3RvcnlcIixcbiAgICAgICAgICAgICAgICAgICAgbW5lbW9uaWM6IFwiSFwiLFxuICAgICAgICAgICAgICAgICAgICB0aXRsZTogXCJSZW1vdmVzIGFsbCB1bmRvL3JlZG8gaW5mb3JtYXRpb24gdG8gcmVnYWluIG1lbW9yeVwiXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IFwiLVwiLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiBcIkN1dFwiLFxuICAgICAgICAgICAgICAgICAgICBhY3Rpb246IFwiQ1BDdXRcIixcbiAgICAgICAgICAgICAgICAgICAgbW5lbW9uaWM6IFwiVFwiLFxuICAgICAgICAgICAgICAgICAgICBzaG9ydGN1dDogXCJjdHJsK3hcIlxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiBcIkNvcHlcIixcbiAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiBcIkNQQ29weVwiLFxuICAgICAgICAgICAgICAgICAgICBtbmVtb25pYzogXCJDXCIsXG4gICAgICAgICAgICAgICAgICAgIHNob3J0Y3V0OiBcImN0cmwrY1wiXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IFwiQ29weSBtZXJnZWRcIixcbiAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiBcIkNQQ29weU1lcmdlZFwiLFxuICAgICAgICAgICAgICAgICAgICBtbmVtb25pYzogXCJZXCIsXG4gICAgICAgICAgICAgICAgICAgIHNob3J0Y3V0OiBcInNoaWZ0K2N0cmwrY1wiXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IFwiUGFzdGVcIixcbiAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiBcIkNQUGFzdGVcIixcbiAgICAgICAgICAgICAgICAgICAgbW5lbW9uaWM6IFwiUFwiLFxuICAgICAgICAgICAgICAgICAgICBzaG9ydGN1dDogXCJjdHJsK3ZcIlxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiBcIi1cIlxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiBcIlNlbGVjdCBhbGxcIixcbiAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiBcIkNQU2VsZWN0QWxsXCIsXG4gICAgICAgICAgICAgICAgICAgIG1uZW1vbmljOiBcIkFcIixcbiAgICAgICAgICAgICAgICAgICAgc2hvcnRjdXQ6IFwiY3RybCthXCJcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJEZXNlbGVjdFwiLFxuICAgICAgICAgICAgICAgICAgICBhY3Rpb246IFwiQ1BEZXNlbGVjdEFsbFwiLFxuICAgICAgICAgICAgICAgICAgICBtbmVtb25pYzogXCJEXCIsXG4gICAgICAgICAgICAgICAgICAgIHNob3J0Y3V0OiBcImN0cmwrZFwiXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IFwiLVwiXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IFwiVHJhbnNmb3JtXCIsXG4gICAgICAgICAgICAgICAgICAgIGFjdGlvbjogXCJDUFRyYW5zZm9ybVwiLFxuICAgICAgICAgICAgICAgICAgICBtbmVtb25pYzogXCJUXCIsXG4gICAgICAgICAgICAgICAgICAgIHNob3J0Y3V0OiBcImN0cmwreVwiXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF1cbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgICAgbmFtZTogXCJMYXllcnNcIixcbiAgICAgICAgICAgIG1uZW1vbmljOiBcIkxcIixcbiAgICAgICAgICAgIGNoaWxkcmVuOiBbXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiBcIkR1cGxpY2F0ZVwiLFxuICAgICAgICAgICAgICAgICAgICBhY3Rpb246IFwiQ1BMYXllckR1cGxpY2F0ZVwiLFxuICAgICAgICAgICAgICAgICAgICBtbmVtb25pYzogXCJEXCIsXG4gICAgICAgICAgICAgICAgICAgIHNob3J0Y3V0OiBcInNoaWZ0K2N0cmwrZFwiLFxuICAgICAgICAgICAgICAgICAgICB0aXRsZTogXCJDcmVhdGVzIGEgY29weSBvZiB0aGUgY3VycmVudGx5IHNlbGVjdGVkIGxheWVyXCJcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogXCItXCJcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJNZXJnZSBkb3duXCIsXG4gICAgICAgICAgICAgICAgICAgIGFjdGlvbjogXCJDUExheWVyTWVyZ2VEb3duXCIsXG4gICAgICAgICAgICAgICAgICAgIG1uZW1vbmljOiBcIkVcIixcbiAgICAgICAgICAgICAgICAgICAgc2hvcnRjdXQ6IFwiY3RybCtlXCIsXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiBcIk1lcmdlcyB0aGUgY3VycmVudGx5IHNlbGVjdGVkIGxheWVyIHdpdGggdGhlIG9uZSBkaXJlY3RseSBiZWxvdyBpdFwiXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IFwiTWVyZ2UgYWxsIGxheWVyc1wiLFxuICAgICAgICAgICAgICAgICAgICBhY3Rpb246IFwiQ1BMYXllck1lcmdlQWxsXCIsXG4gICAgICAgICAgICAgICAgICAgIG1uZW1vbmljOiBcIkFcIixcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IFwiTWVyZ2VzIGFsbCB0aGUgbGF5ZXJzXCJcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgXSxcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgICAgbmFtZTogXCJFZmZlY3RzXCIsXG4gICAgICAgICAgICBtbmVtb25pYzogXCJFXCIsXG4gICAgICAgICAgICBjaGlsZHJlbjogW1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJDbGVhclwiLFxuICAgICAgICAgICAgICAgICAgICBhY3Rpb246IFwiQ1BDbGVhclwiLFxuICAgICAgICAgICAgICAgICAgICBtbmVtb25pYzogXCJEXCIsXG4gICAgICAgICAgICAgICAgICAgIHNob3J0Y3V0OiBcImRlbCxiYWNrc3BhY2VcIixcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IFwiQ2xlYXJzIHRoZSBzZWxlY3RlZCBhcmVhXCJcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJGaWxsXCIsXG4gICAgICAgICAgICAgICAgICAgIGFjdGlvbjogXCJDUEZpbGxcIixcbiAgICAgICAgICAgICAgICAgICAgbW5lbW9uaWM6IFwiRlwiLFxuICAgICAgICAgICAgICAgICAgICBzaG9ydGN1dDogXCJjdHJsK2ZcIixcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IFwiRmlsbHMgdGhlIHNlbGVjdGVkIGFyZWEgd2l0aCB0aGUgY3VycmVudCBjb2xvclwiXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IFwiRmxpcCBob3Jpem9udGFsXCIsXG4gICAgICAgICAgICAgICAgICAgIGFjdGlvbjogXCJDUEhGbGlwXCIsXG4gICAgICAgICAgICAgICAgICAgIG1uZW1vbmljOiBcIkhcIixcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IFwiRmxpcHMgdGhlIGN1cnJlbnQgc2VsZWN0ZWQgYXJlYSBob3Jpem9udGFsbHlcIlxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiBcIkZsaXAgdmVydGljYWxcIixcbiAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiBcIkNQVkZsaXBcIixcbiAgICAgICAgICAgICAgICAgICAgbW5lbW9uaWM6IFwiVlwiLFxuICAgICAgICAgICAgICAgICAgICB0aXRsZTogXCJGbGlwcyB0aGUgY3VycmVudCBzZWxlY3RlZCBhcmVhIHZlcnRpY2FsbHlcIlxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiBcIkludmVydFwiLFxuICAgICAgICAgICAgICAgICAgICBhY3Rpb246IFwiQ1BGWEludmVydFwiLFxuICAgICAgICAgICAgICAgICAgICBtbmVtb25pYzogXCJJXCIsXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiBcIkludmVydCB0aGUgaW1hZ2UgY29sb3JzXCJcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogXCItXCJcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJCb3ggYmx1ci4uLlwiLFxuICAgICAgICAgICAgICAgICAgICBhY3Rpb246IFwiQ1BGWEJveEJsdXJcIixcbiAgICAgICAgICAgICAgICAgICAgbW5lbW9uaWM6IFwiQlwiLFxuICAgICAgICAgICAgICAgICAgICB0aXRsZTogXCJCbHVyIGVmZmVjdFwiXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IFwiLVwiXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IFwiTW9ub2Nocm9tYXRpYyBub2lzZVwiLFxuICAgICAgICAgICAgICAgICAgICBhY3Rpb246IFwiQ1BNTm9pc2VcIixcbiAgICAgICAgICAgICAgICAgICAgbW5lbW9uaWM6IFwiTVwiLFxuICAgICAgICAgICAgICAgICAgICB0aXRsZTogXCJGaWxscyB0aGUgc2VsZWN0aW9uIHdpdGggbm9pc2VcIlxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiBcIkNvbG9yIG5vaXNlXCIsXG4gICAgICAgICAgICAgICAgICAgIGFjdGlvbjogXCJDUENOb2lzZVwiLFxuICAgICAgICAgICAgICAgICAgICBtbmVtb25pYzogXCJDXCIsXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiBcIkZpbGxzIHRoZSBzZWxlY3Rpb24gd2l0aCBjb2xvcmVkIG5vaXNlXCJcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBdLFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgICBuYW1lOiBcIlZpZXdcIixcbiAgICAgICAgICAgIG1uZW1vbmljOiBcIlZcIixcbiAgICAgICAgICAgIGNoaWxkcmVuOiBbXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiBcIkZ1bGwtc2NyZWVuIG1vZGVcIixcbiAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiBcIkNQRnVsbFNjcmVlblwiLFxuICAgICAgICAgICAgICAgICAgICBtbmVtb25pYzogXCJGXCIsXG4gICAgICAgICAgICAgICAgICAgIGNoZWNrYm94OiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBjaGVja2VkOiBmYWxzZVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiBcIi1cIlxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiBcIlpvb20gaW5cIixcbiAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiBcIkNQWm9vbUluXCIsXG4gICAgICAgICAgICAgICAgICAgIG1uZW1vbmljOiBcIklcIixcbiAgICAgICAgICAgICAgICAgICAgc2hvcnRjdXQ6IFwiY3RybCs9XCIsXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiBcIlpvb21zIGluXCJcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJab29tIG91dFwiLFxuICAgICAgICAgICAgICAgICAgICBhY3Rpb246IFwiQ1Bab29tT3V0XCIsXG4gICAgICAgICAgICAgICAgICAgIG1uZW1vbmljOiBcIk9cIixcbiAgICAgICAgICAgICAgICAgICAgc2hvcnRjdXQ6IFwiY3RybCstXCIsXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiBcIlpvb21zIG91dFwiXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IFwiWm9vbSAxMDAlXCIsXG4gICAgICAgICAgICAgICAgICAgIGFjdGlvbjogXCJDUFpvb20xMDBcIixcbiAgICAgICAgICAgICAgICAgICAgbW5lbW9uaWM6IFwiMVwiLFxuICAgICAgICAgICAgICAgICAgICBzaG9ydGN1dDogXCJjdHJsKzBcIixcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IFwiUmVzZXRzIHRoZSB6b29tIGZhY3RvciB0byAxMDAlXCJcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiBcIkNQTGluZWFySW50ZXJwb2xhdGlvblwiLFxuICAgICAgICAgICAgICAgICAgICBuYW1lOiBcIi1cIlxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiBcIlNtb290aC1vdXQgem9vbWVkIGNhbnZhc1wiLFxuICAgICAgICAgICAgICAgICAgICBhY3Rpb246IFwiQ1BMaW5lYXJJbnRlcnBvbGF0aW9uXCIsXG4gICAgICAgICAgICAgICAgICAgIG1uZW1vbmljOiBcIkxcIixcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IFwiTGluZWFyIGludGVycG9sYXRpb24gaXMgdXNlZCB0byBnaXZlIGEgc21vb3RoZWQgbG9va2VkIHRvIHRoZSBwaWN0dXJlIHdoZW4gem9vbWVkIGluXCIsXG4gICAgICAgICAgICAgICAgICAgIGNoZWNrYm94OiB0cnVlXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IFwiLVwiXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IFwiU2hvdyBncmlkXCIsXG4gICAgICAgICAgICAgICAgICAgIGFjdGlvbjogXCJDUFRvZ2dsZUdyaWRcIixcbiAgICAgICAgICAgICAgICAgICAgbW5lbW9uaWM6IFwiR1wiLFxuICAgICAgICAgICAgICAgICAgICBzaG9ydGN1dDogXCJjdHJsK2dcIixcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IFwiRGlzcGxheXMgYSBncmlkIG92ZXIgdGhlIGltYWdlXCIsXG4gICAgICAgICAgICAgICAgICAgIGNoZWNrYm94OiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBjaGVja2VkOiBmYWxzZVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiBcIkdyaWQgb3B0aW9ucy4uLlwiLFxuICAgICAgICAgICAgICAgICAgICBhY3Rpb246IFwiQ1BHcmlkT3B0aW9uc1wiLFxuICAgICAgICAgICAgICAgICAgICBtbmVtb25pYzogXCJEXCIsXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiBcIlNob3dzIHRoZSBncmlkIG9wdGlvbnMgZGlhbG9nIGJveFwiLFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIF0sXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICAgIG5hbWU6IFwiUGFsZXR0ZXNcIixcbiAgICAgICAgICAgIG1uZW1vbmljOiBcIlBcIixcbiAgICAgICAgICAgIGNoaWxkcmVuOiBbXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiBcIlJlYXJyYW5nZVwiLFxuICAgICAgICAgICAgICAgICAgICBhY3Rpb246IFwiQ1BBcnJhbmdlUGFsZXR0ZXNcIixcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IFwiUmVhcnJhbmdlIHRoZSBwYWxldHRlIHdpbmRvd3NcIlxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiBcIlRvZ2dsZSBwYWxldHRlc1wiLFxuICAgICAgICAgICAgICAgICAgICBhY3Rpb246IFwiQ1BUb2dnbGVQYWxldHRlc1wiLFxuICAgICAgICAgICAgICAgICAgICBtbmVtb25pYzogXCJQXCIsXG4gICAgICAgICAgICAgICAgICAgIHNob3J0Y3V0OiBcInRhYlwiLFxuICAgICAgICAgICAgICAgICAgICB0aXRsZTogXCJIaWRlcyBvciBzaG93cyBhbGwgcGFsZXR0ZXNcIlxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiBcIi1cIlxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiBcIlNob3cgdG9vbCBvcHRpb25zXCIsXG4gICAgICAgICAgICAgICAgICAgIGFjdGlvbjogXCJDUFBhbEJydXNoXCIsXG4gICAgICAgICAgICAgICAgICAgIG1uZW1vbmljOiBcIkJcIixcbiAgICAgICAgICAgICAgICAgICAgY2hlY2tib3g6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ6IHRydWVcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJTaG93IGNvbG9yXCIsXG4gICAgICAgICAgICAgICAgICAgIGFjdGlvbjogXCJDUFBhbENvbG9yXCIsXG4gICAgICAgICAgICAgICAgICAgIG1uZW1vbmljOiBcIkNcIixcbiAgICAgICAgICAgICAgICAgICAgY2hlY2tib3g6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ6IHRydWVcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJTaG93IGxheWVyc1wiLFxuICAgICAgICAgICAgICAgICAgICBhY3Rpb246IFwiQ1BQYWxMYXllcnNcIixcbiAgICAgICAgICAgICAgICAgICAgbW5lbW9uaWM6IFwiWVwiLFxuICAgICAgICAgICAgICAgICAgICBjaGVja2JveDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgY2hlY2tlZDogdHJ1ZVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiBcIlNob3cgbWlzY1wiLFxuICAgICAgICAgICAgICAgICAgICBhY3Rpb246IFwiQ1BQYWxNaXNjXCIsXG4gICAgICAgICAgICAgICAgICAgIG1uZW1vbmljOiBcIk1cIixcbiAgICAgICAgICAgICAgICAgICAgY2hlY2tib3g6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ6IHRydWVcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJTaG93IHN0cm9rZVwiLFxuICAgICAgICAgICAgICAgICAgICBhY3Rpb246IFwiQ1BQYWxTdHJva2VcIixcbiAgICAgICAgICAgICAgICAgICAgbW5lbW9uaWM6IFwiU1wiLFxuICAgICAgICAgICAgICAgICAgICBjaGVja2JveDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgY2hlY2tlZDogdHJ1ZVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiBcIlNob3cgc3dhdGNoZXNcIixcbiAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiBcIkNQUGFsU3dhdGNoZXNcIixcbiAgICAgICAgICAgICAgICAgICAgbW5lbW9uaWM6IFwiV1wiLFxuICAgICAgICAgICAgICAgICAgICBjaGVja2JveDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgY2hlY2tlZDogdHJ1ZVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiBcIlNob3cgdGV4dHVyZXNcIixcbiAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiBcIkNQUGFsVGV4dHVyZXNcIixcbiAgICAgICAgICAgICAgICAgICAgbW5lbW9uaWM6IFwiWFwiLFxuICAgICAgICAgICAgICAgICAgICBjaGVja2JveDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgY2hlY2tlZDogdHJ1ZVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiBcIlNob3cgdG9vbHNcIixcbiAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiBcIkNQUGFsVG9vbFwiLFxuICAgICAgICAgICAgICAgICAgICBtbmVtb25pYzogXCJUXCIsXG4gICAgICAgICAgICAgICAgICAgIGNoZWNrYm94OiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBjaGVja2VkOiB0cnVlXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgXVxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgICBuYW1lOiBcIkhlbHBcIixcbiAgICAgICAgICAgIG1uZW1vbmljOiBcIkhcIixcbiAgICAgICAgICAgIGNoaWxkcmVuOiBbXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiBcIlRhYmxldCBzdXBwb3J0XCIsXG4gICAgICAgICAgICAgICAgICAgIG1uZW1vbmljOiBcIlRcIixcbiAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiBcIkNQVGFibGV0U3VwcG9ydFwiLFxuICAgICAgICAgICAgICAgICAgICB0aXRsZTogXCJIZWxwIHdpdGggZ2V0dGluZyBhIGRyYXdpbmcgdGFibGV0IHdvcmtpbmdcIlxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiBcIlNob3J0Y3V0c1wiLFxuICAgICAgICAgICAgICAgICAgICBtbmVtb25pYzogXCJTXCIsXG4gICAgICAgICAgICAgICAgICAgIGFjdGlvbjogXCJDUFNob3J0Y3V0c1wiLFxuICAgICAgICAgICAgICAgICAgICB0aXRsZTogXCJMaXN0IG9mIGtleWJvYXJkIGFuZCBtb3VzZSBzaG9ydGN1dHNcIlxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiBcIi1cIlxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiBcIkFib3V0XCIsXG4gICAgICAgICAgICAgICAgICAgIG1uZW1vbmljOiBcIkFcIixcbiAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiBcIkNQQWJvdXRcIixcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IFwiRGlzcGxheXMgc29tZSBpbmZvcm1hdGlvbiBhYm91dCBDaGlja2VuUGFpbnRcIlxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIF1cbiAgICAgICAgfSxcbiAgICBdO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBDUE1haW5NZW51KGNvbnRyb2xsZXIsIG1haW5HVUkpIHtcbiAgICB2YXJcbiAgICAgICAgYmFyID0gJChcbiAgICAgICAgICAgICc8bmF2IGNsYXNzPVwibmF2YmFyIG5hdmJhci1kZWZhdWx0XCI+J1xuICAgICAgICAgICAgICAgICsgJzxkaXYgY2xhc3M9XCJjb250YWluZXItZmx1aWRcIj4nXG4gICAgICAgICAgICAgICAgICAgICsgJzxkaXYgY2xhc3M9XCJuYXZiYXItaGVhZGVyXCI+J1xuICAgICAgICAgICAgICAgICAgICAgICAgKyAnPGEgY2xhc3M9XCJuYXZiYXItYnJhbmRcIiBocmVmPVwiI1wiPmRyYXcuPC9hPidcbiAgICAgICAgICAgICAgICAgICAgKyAnPC9kaXY+J1xuICAgICAgICAgICAgICAgICAgICArICc8dWwgY2xhc3M9XCJuYXYgbmF2YmFyLW5hdlwiPidcbiAgICAgICAgICAgICAgICAgICAgKyAnPC91bD4nXG4gICAgICAgICAgICAgICAgKyAnPC9kaXY+J1xuICAgICAgICAgICAgKyAnPC9uYXY+J1xuICAgICAgICApLFxuICAgICAgICBtYWNQbGF0Zm9ybSA9IC9eTWFjL2kudGVzdChuYXZpZ2F0b3IucGxhdGZvcm0pO1xuICAgIFxuICAgIGZ1bmN0aW9uIG1lbnVJdGVtQ2xpY2tlZCh0YXJnZXQpIHtcbiAgICAgICAgdmFyXG4gICAgICAgICAgICBhY3Rpb24gPSB0YXJnZXQuZGF0YSgnYWN0aW9uJyksXG4gICAgICAgICAgICBjaGVja2JveCA9IHRhcmdldC5kYXRhKCdjaGVja2JveCcpLFxuICAgICAgICAgICAgc2VsZWN0ZWQ7XG4gICAgICAgIFxuICAgICAgICBpZiAoY2hlY2tib3gpIHtcbiAgICAgICAgICAgIHRhcmdldC50b2dnbGVDbGFzcyhcInNlbGVjdGVkXCIpO1xuICAgICAgICAgICAgc2VsZWN0ZWQgPSB0YXJnZXQuaGFzQ2xhc3MoXCJzZWxlY3RlZFwiKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHNlbGVjdGVkID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGNvbnRyb2xsZXIuYWN0aW9uUGVyZm9ybWVkKHtcbiAgICAgICAgICAgIGFjdGlvbjogYWN0aW9uLFxuICAgICAgICAgICAgY2hlY2tib3g6IGNoZWNrYm94LFxuICAgICAgICAgICAgc2VsZWN0ZWQ6IHNlbGVjdGVkXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBcbiAgICBmdW5jdGlvbiBwcmVzZW50U2hvcnRjdXRUZXh0KHNob3J0Y3V0KSB7XG4gICAgICAgIHNob3J0Y3V0ID0gc2hvcnRjdXQudG9VcHBlckNhc2UoKTtcbiAgICAgICAgXG4gICAgICAgIC8vIE9ubHkgc2hvdyB0aGUgZmlyc3QgcG90ZW50aWFsIHNob3J0Y3V0IG91dCBvZiB0aGUgY29tbWEtc2VwYXJhdGVkIGxpc3RcbiAgICAgICAgc2hvcnRjdXQgPSBzaG9ydGN1dC5yZXBsYWNlKC8oLC4rKSQvLCBcIlwiKTtcbiAgICAgICAgXG4gICAgICAgIC8vIEFsdGhvdWdoIHRoZSBrZXljb2RlIGZvciB6b29tIGluIGlzIFwiPVwiLCB3ZSdsbCBwcmVzZW50IGl0IHRvIHRoZSB1c2VyIGFzIFwiK1wiXG4gICAgICAgIHNob3J0Y3V0ID0gc2hvcnRjdXQucmVwbGFjZShcImN0cmwrPVwiLCBcImN0cmwrK1wiKTtcbiAgICAgICAgc2hvcnRjdXQgPSBzaG9ydGN1dC5yZXBsYWNlKFwi4oyYKz1cIiwgXCLijJgrK1wiKTtcbiAgICAgICAgXG4gICAgICAgIGlmIChtYWNQbGF0Zm9ybSkge1xuICAgICAgICAgICAgc2hvcnRjdXQgPSBzaG9ydGN1dC5yZXBsYWNlKC8oW14rXSlcXCsvZywgXCIkMVwiKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHNob3J0Y3V0ID0gc2hvcnRjdXQucmVwbGFjZSgvKFteK10pXFwrL2csIFwiJDEgXCIpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gc2hvcnRjdXQ7XG4gICAgfVxuICAgIFxuICAgIGZ1bmN0aW9uIHJlY3Vyc2VGaWxsTWVudShtZW51RWxlbSwgZW50cmllcykge1xuICAgICAgICBtZW51RWxlbS5hcHBlbmQoZW50cmllcy5tYXAoZnVuY3Rpb24oZW50cnkpIHtcbiAgICAgICAgICAgIHZhciBcbiAgICAgICAgICAgICAgICBlbnRyeUVsZW07XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChlbnRyeS5hY3Rpb24gJiYgIWNvbnRyb2xsZXIuaXNBY3Rpb25TdXBwb3J0ZWQoZW50cnkuYWN0aW9uKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGVudHJ5LmNoaWxkcmVuKSB7XG4gICAgICAgICAgICAgICAgZW50cnlFbGVtID0gJChcbiAgICAgICAgICAgICAgICAgICAgJzxsaSBjbGFzcz1cImRyb3Bkb3duXCI+J1xuICAgICAgICAgICAgICAgICAgICAgICAgKyAnPGEgaHJlZj1cIiNcIiBjbGFzcz1cImRyb3Bkb3duLXRvZ2dsZVwiIGRhdGEtdG9nZ2xlPVwiZHJvcGRvd25cIiByb2xlPVwiYnV0dG9uXCIgYXJpYS1oYXNwb3B1cD1cInRydWVcIiBhcmlhLWV4cGFuZGVkPVwiZmFsc2VcIj4nICsgZW50cnkubmFtZSArICcgPHNwYW4gY2xhc3M9XCJjYXJldFwiPjwvc3Bhbj48L2E+J1xuICAgICAgICAgICAgICAgICAgICAgICAgKyAnPHVsIGNsYXNzPVwiZHJvcGRvd24tbWVudVwiPidcbiAgICAgICAgICAgICAgICAgICAgICAgICsgJzwvdWw+J1xuICAgICAgICAgICAgICAgICAgICArICc8L2xpPidcbiAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgJChcIi5kcm9wZG93bi10b2dnbGVcIiwgZW50cnlFbGVtKS5kcm9wZG93bigpO1xuXG4gICAgICAgICAgICAgICAgZW50cnlFbGVtLm9uKFwic2hvdy5icy5kcm9wZG93blwiLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgLyogSW5zdGVhZCBvZiBCb290c3RyYXAncyBleHRyZW1lbHkgZXhwZW5zaXZlIGRhdGEgQVBJLCB3ZSdsbCBvbmx5IGxpc3RlbiBmb3IgZGlzbWlzcyBjbGlja3Mgb24gdGhlXG4gICAgICAgICAgICAgICAgICAgICAqIGRvY3VtZW50ICp3aGlsZSB0aGUgbWVudSBpcyBvcGVuISpcbiAgICAgICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgICAgICQoZG9jdW1lbnQpLm9uZShcImNsaWNrXCIsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVudHJ5RWxlbS5oYXNDbGFzcyhcIm9wZW5cIikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKFwiLmRyb3Bkb3duLXRvZ2dsZVwiLCBlbnRyeUVsZW0pLmRyb3Bkb3duKFwidG9nZ2xlXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICByZWN1cnNlRmlsbE1lbnUoJChcIi5kcm9wZG93bi1tZW51XCIsIGVudHJ5RWxlbSksIGVudHJ5LmNoaWxkcmVuKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZW50cnkubmFtZSA9PSAnLScpIHtcbiAgICAgICAgICAgICAgICBlbnRyeUVsZW0gPSAkKCc8bGkgcm9sZT1cInNlcGFyYXRvclwiIGNsYXNzPVwiZGl2aWRlclwiPjwvbGk+Jyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGVudHJ5RWxlbSA9ICQoJzxsaT48YSBocmVmPVwiI1wiIGRhdGEtYWN0aW9uPVwiJyArIGVudHJ5LmFjdGlvbiArICdcIj48c3Bhbj4nICsgZW50cnkubmFtZSArICc8L3NwYW4+PC9hPjwvbGk+Jyk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgaWYgKGVudHJ5LmNoZWNrYm94KSB7XG4gICAgICAgICAgICAgICAgICAgICQoXCJhXCIsIGVudHJ5RWxlbSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC5kYXRhKFwiY2hlY2tib3hcIiwgdHJ1ZSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC50b2dnbGVDbGFzcyhcInNlbGVjdGVkXCIsICEhZW50cnkuY2hlY2tlZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoZW50cnkudGl0bGUpIHtcbiAgICAgICAgICAgICAgICBlbnRyeUVsZW0uYXR0cigndGl0bGUnLCBlbnRyeS50aXRsZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChlbnRyeS5zaG9ydGN1dCkge1xuICAgICAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgICAgICBtZW51TGluayA9ICQoXCI+IGFcIiwgZW50cnlFbGVtKSxcbiAgICAgICAgICAgICAgICAgICAgc2hvcnRjdXREZXNjID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNtYWxsXCIpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIFJld3JpdGUgdGhlIHNob3J0Y3V0cyB0byBNYWMtc3R5bGVcbiAgICAgICAgICAgICAgICBpZiAobWFjUGxhdGZvcm0pIHtcbiAgICAgICAgICAgICAgICAgICAgZW50cnkuc2hvcnRjdXQgPSBlbnRyeS5zaG9ydGN1dC5yZXBsYWNlKC9TSElGVC9pbSwgXCLih6dcIik7XG4gICAgICAgICAgICAgICAgICAgIGVudHJ5LnNob3J0Y3V0ID0gZW50cnkuc2hvcnRjdXQucmVwbGFjZSgvQUxUL2ltLCBcIuKMpVwiKTtcbiAgICAgICAgICAgICAgICAgICAgZW50cnkuc2hvcnRjdXQgPSBlbnRyeS5zaG9ydGN1dC5yZXBsYWNlKC9DVFJML2ltLCBcIuKMmFwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgc2hvcnRjdXREZXNjLmNsYXNzTmFtZSA9IFwiY2hpY2tlbnBhaW50LXNob3J0Y3V0XCI7XG4gICAgICAgICAgICAgICAgc2hvcnRjdXREZXNjLmlubmVySFRNTCA9IHByZXNlbnRTaG9ydGN1dFRleHQoZW50cnkuc2hvcnRjdXQpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIG1lbnVMaW5rLmFwcGVuZChzaG9ydGN1dERlc2MpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGtleShlbnRyeS5zaG9ydGN1dCwgZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgICAgICAgICBtZW51SXRlbUNsaWNrZWQobWVudUxpbmspO1xuXG4gICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcblxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHJldHVybiBlbnRyeUVsZW07XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgXG4gICAgdGhpcy5nZXRFbGVtZW50ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBiYXJbMF07XG4gICAgfTtcbiAgICBcbiAgICByZWN1cnNlRmlsbE1lbnUoJChcIi5uYXZiYXItbmF2XCIsIGJhciksIE1FTlVfRU5UUklFUyk7XG5cbiAgICAkKGJhcikub24oJ2NsaWNrJywgJ2E6bm90KC5kcm9wZG93bi10b2dnbGUpJywgZnVuY3Rpb24oZSkge1xuICAgICAgICBtZW51SXRlbUNsaWNrZWQoJCh0aGlzKSk7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICB9KTtcbiAgICBcbiAgICBmdW5jdGlvbiBvblBhbGV0dGVWaXNDaGFuZ2UocGFsZXR0ZU5hbWUsIHNob3cpIHtcbiAgICAgICAgLy8gVG9nZ2xlIHRoZSB0aWNrYm94IG9mIHRoZSBjb3JyZXNwb25kaW5nIG1lbnUgZW50cnkgdG8gbWF0Y2ggdGhlIG5ldyBwYWxldHRlIHZpc2liaWxpdHlcbiAgICAgICAgdmFyXG4gICAgICAgICAgICBwYWxNZW51RW50cnkgPSAkKCdbZGF0YS1hY3Rpb249XFxcIkNQUGFsJyArIHBhbGV0dGVOYW1lLnN1YnN0cmluZygwLCAxKS50b1VwcGVyQ2FzZSgpICsgcGFsZXR0ZU5hbWUuc3Vic3RyaW5nKDEpICsgJ1xcXCJdJywgYmFyKTtcbiAgICAgICAgXG4gICAgICAgIHBhbE1lbnVFbnRyeS50b2dnbGVDbGFzcyhcInNlbGVjdGVkXCIsIHNob3cpO1xuICAgIH1cblxuICAgIG1haW5HVUkuZ2V0UGFsZXR0ZU1hbmFnZXIoKS5vbihcInBhbGV0dGVWaXNDaGFuZ2VcIiwgb25QYWxldHRlVmlzQ2hhbmdlKTtcbn0iLCIvKlxuICAgIENoaWNrZW5QYWludFxuICAgIFxuICAgIENoaWNrZW5QYWludCBpcyBhIHRyYW5zbGF0aW9uIG9mIENoaWJpUGFpbnQgZnJvbSBKYXZhIHRvIEphdmFTY3JpcHRcbiAgICBieSBOaWNob2xhcyBTaGVybG9jayAvIENoaWNrZW4gU21vb3RoaWUuXG4gICAgXG4gICAgQ2hpYmlQYWludCBpcyBDb3B5cmlnaHQgKGMpIDIwMDYtMjAwOCBNYXJjIFNjaGVmZXJcblxuICAgIENoaWNrZW5QYWludCBpcyBmcmVlIHNvZnR3YXJlOiB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3IgbW9kaWZ5XG4gICAgaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBhcyBwdWJsaXNoZWQgYnlcbiAgICB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uLCBlaXRoZXIgdmVyc2lvbiAzIG9mIHRoZSBMaWNlbnNlLCBvclxuICAgIChhdCB5b3VyIG9wdGlvbikgYW55IGxhdGVyIHZlcnNpb24uXG5cbiAgICBDaGlja2VuUGFpbnQgaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCxcbiAgICBidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZlxuICAgIE1FUkNIQU5UQUJJTElUWSBvciBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS4gIFNlZSB0aGVcbiAgICBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9yZSBkZXRhaWxzLlxuXG4gICAgWW91IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2VcbiAgICBhbG9uZyB3aXRoIENoaWNrZW5QYWludC4gSWYgbm90LCBzZWUgPGh0dHA6Ly93d3cuZ251Lm9yZy9saWNlbnNlcy8+LlxuKi9cblxuaW1wb3J0IENQUGFsZXR0ZSBmcm9tICcuL0NQUGFsZXR0ZSc7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIENQTWlzY1BhbGV0dGUoY3BDb250cm9sbGVyKSB7XG4gICAgQ1BQYWxldHRlLmNhbGwodGhpcywgY3BDb250cm9sbGVyLCBcIm1pc2NcIiwgXCJNaXNjXCIpO1xuICAgIFxuICAgIHZhciBcbiAgICAgICAgdGhhdCA9IHRoaXMsXG5cbiAgICAgICAgYnV0dG9ucyA9IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IFwiY2hpY2tlbnBhaW50LXRvb2wtem9vbS1pblwiLFxuICAgICAgICAgICAgICAgIGNvbW1hbmQ6IFwiQ1Bab29tSW5cIixcbiAgICAgICAgICAgICAgICB0b29sVGlwOiBcIlpvb20gaW5cIlxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IFwiY2hpY2tlbnBhaW50LXRvb2wtem9vbS1vdXRcIixcbiAgICAgICAgICAgICAgICBjb21tYW5kOiBcIkNQWm9vbU91dFwiLFxuICAgICAgICAgICAgICAgIHRvb2xUaXA6IFwiWm9vbSBvdXRcIlxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IFwiY2hpY2tlbnBhaW50LXRvb2wtem9vbS0xMDBcIixcbiAgICAgICAgICAgICAgICBjb21tYW5kOiBcIkNQWm9vbTEwMFwiLFxuICAgICAgICAgICAgICAgIHRvb2xUaXA6IFwiWm9vbSAxMDAlXCJcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBcImNoaWNrZW5wYWludC10b29sLXVuZG9cIixcbiAgICAgICAgICAgICAgICBjb21tYW5kOiBcIkNQVW5kb1wiLFxuICAgICAgICAgICAgICAgIHRvb2xUaXA6IFwiVW5kb1wiXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJjaGlja2VucGFpbnQtdG9vbC1yZWRvXCIsXG4gICAgICAgICAgICAgICAgY29tbWFuZDogXCJDUFJlZG9cIixcbiAgICAgICAgICAgICAgICB0b29sVGlwOiBcIlJlZG9cIlxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IFwiY2hpY2tlbnBhaW50LXRvb2wtc2VuZFwiLFxuICAgICAgICAgICAgICAgIGNvbW1hbmQ6IFwiQ1BTZW5kXCIsXG4gICAgICAgICAgICAgICAgdG9vbFRpcDogXCJTYXZlIHBpY1wiXG4gICAgICAgICAgICB9LFxuICAgICAgICBdO1xuXG4gICAgZnVuY3Rpb24gYnVpbGRCdXR0b25zKCkge1xuICAgICAgICB2YXJcbiAgICAgICAgICAgIGJvZHkgPSB0aGF0LmdldEJvZHlFbGVtZW50KCksXG4gICAgICAgICAgICBsaXN0RWxlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ1bFwiKTtcbiAgICAgICAgXG4gICAgICAgIGxpc3RFbGVtLmNsYXNzTmFtZSA9IFwiY2hpY2tlbnBhaW50LW1pc2MtdG9vbHMgbGlzdC11bnN0eWxlZFwiO1xuICAgICAgICBcbiAgICAgICAgZm9yICh2YXIgaSBpbiBidXR0b25zKSB7XG4gICAgICAgICAgICB2YXIgXG4gICAgICAgICAgICAgICAgYnV0dG9uID0gYnV0dG9uc1tpXSxcbiAgICAgICAgICAgICAgICBidXR0b25FbGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxpXCIpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBidXR0b25FbGVtLmNsYXNzTmFtZSA9IFwiY2hpY2tlbnBhaW50LXRvb2xiYXItYnV0dG9uIFwiICsgYnV0dG9uLmNsYXNzTmFtZTtcbiAgICAgICAgICAgIGJ1dHRvbkVsZW0uc2V0QXR0cmlidXRlKFwiZGF0YS1idXR0b25JbmRleFwiLCBpKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgbGlzdEVsZW0uYXBwZW5kQ2hpbGQoYnV0dG9uRWxlbSk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGxpc3RFbGVtLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgaWYgKGUudGFyZ2V0ICYmIGUudGFyZ2V0Lm5vZGVOYW1lID09IFwiTElcIikge1xuICAgICAgICAgICAgICAgICQoZS50YXJnZXQpLmFkZENsYXNzKFwic2VsZWN0ZWRcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgbGlzdEVsZW0uYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNldXBcIiwgZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgaWYgKGUudGFyZ2V0ICYmIGUudGFyZ2V0Lm5vZGVOYW1lID09IFwiTElcIikge1xuICAgICAgICAgICAgICAgICQoZS50YXJnZXQpLnJlbW92ZUNsYXNzKFwic2VsZWN0ZWRcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGxpc3RFbGVtLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICBpZiAoZS50YXJnZXQgJiYgZS50YXJnZXQubm9kZU5hbWUgPT0gXCJMSVwiKSB7XG4gICAgICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvbiA9IGJ1dHRvbnNbcGFyc2VJbnQoZS50YXJnZXQuZ2V0QXR0cmlidXRlKFwiZGF0YS1idXR0b25JbmRleFwiKSwgMTApXTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBjcENvbnRyb2xsZXIuYWN0aW9uUGVyZm9ybWVkKHthY3Rpb246IGJ1dHRvbi5jb21tYW5kfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgYm9keS5hcHBlbmRDaGlsZChsaXN0RWxlbSk7XG4gICAgfVxuICAgIFxuICAgIGJ1aWxkQnV0dG9ucygpO1xufVxuXG5DUE1pc2NQYWxldHRlLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoQ1BQYWxldHRlLnByb3RvdHlwZSk7XG5DUE1pc2NQYWxldHRlLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IENQTWlzY1BhbGV0dGU7XG4iLCIvKlxuICAgIENoaWNrZW5QYWludFxuICAgIFxuICAgIENoaWNrZW5QYWludCBpcyBhIHRyYW5zbGF0aW9uIG9mIENoaWJpUGFpbnQgZnJvbSBKYXZhIHRvIEphdmFTY3JpcHRcbiAgICBieSBOaWNob2xhcyBTaGVybG9jayAvIENoaWNrZW4gU21vb3RoaWUuXG4gICAgXG4gICAgQ2hpYmlQYWludCBpcyBDb3B5cmlnaHQgKGMpIDIwMDYtMjAwOCBNYXJjIFNjaGVmZXJcblxuICAgIENoaWNrZW5QYWludCBpcyBmcmVlIHNvZnR3YXJlOiB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3IgbW9kaWZ5XG4gICAgaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBhcyBwdWJsaXNoZWQgYnlcbiAgICB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uLCBlaXRoZXIgdmVyc2lvbiAzIG9mIHRoZSBMaWNlbnNlLCBvclxuICAgIChhdCB5b3VyIG9wdGlvbikgYW55IGxhdGVyIHZlcnNpb24uXG5cbiAgICBDaGlja2VuUGFpbnQgaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCxcbiAgICBidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZlxuICAgIE1FUkNIQU5UQUJJTElUWSBvciBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS4gIFNlZSB0aGVcbiAgICBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9yZSBkZXRhaWxzLlxuXG4gICAgWW91IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2VcbiAgICBhbG9uZyB3aXRoIENoaWNrZW5QYWludC4gSWYgbm90LCBzZWUgPGh0dHA6Ly93d3cuZ251Lm9yZy9saWNlbnNlcy8+LlxuKi9cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gQ1BQYWxldHRlKGNwQ29udHJvbGxlciwgY2xhc3NOYW1lLCB0aXRsZSwgcmVzaXplVmVydCkge1xuICAgIHRoaXMudGl0bGUgPSB0aXRsZTtcbiAgICB0aGlzLm5hbWUgPSBjbGFzc05hbWU7XG4gICAgdGhpcy5yZXNpemVWZXJ0ID0gcmVzaXplVmVydCB8fCBmYWxzZTtcbiAgICBcbiAgICB2YXJcbiAgICAgICAgY29udGFpbmVyRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksXG4gICAgICAgIGhlYWRFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSxcbiAgICAgICAgY2xvc2VCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpLFxuICAgICAgICBib2R5RWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksXG4gICAgICAgIFxuICAgICAgICB2ZXJ0SGFuZGxlID0gbnVsbCxcbiAgICAgICAgXG4gICAgICAgIGRyYWdPZmZzZXQsXG4gICAgICAgIFxuICAgICAgICB0aGF0ID0gdGhpcztcbiAgICBcbiAgICB0aGlzLmdldEVsZW1lbnQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIGNvbnRhaW5lckVsZW1lbnQ7XG4gICAgfTtcbiAgICBcbiAgICB0aGlzLmdldEJvZHlFbGVtZW50ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBib2R5RWxlbWVudDtcbiAgICB9O1xuICAgIFxuICAgIHRoaXMuZ2V0V2lkdGggPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuICQoY29udGFpbmVyRWxlbWVudCkub3V0ZXJXaWR0aCgpO1xuICAgIH07XG4gICAgXG4gICAgdGhpcy5nZXRIZWlnaHQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuICQoY29udGFpbmVyRWxlbWVudCkub3V0ZXJIZWlnaHQoKTtcbiAgICB9O1xuICAgIFxuICAgIHRoaXMuZ2V0WCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gcGFyc2VJbnQoY29udGFpbmVyRWxlbWVudC5zdHlsZS5sZWZ0LCAxMCkgfHwgMDtcbiAgICB9O1xuICAgIFxuICAgIHRoaXMuZ2V0WSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gcGFyc2VJbnQoY29udGFpbmVyRWxlbWVudC5zdHlsZS50b3AsIDEwKSB8fCAwO1xuICAgIH07XG4gICAgXG4gICAgdGhpcy5zZXRMb2NhdGlvbiA9IGZ1bmN0aW9uKHgsIHkpIHtcbiAgICAgICAgY29udGFpbmVyRWxlbWVudC5zdHlsZS5sZWZ0ID0geCArIFwicHhcIjtcbiAgICAgICAgY29udGFpbmVyRWxlbWVudC5zdHlsZS50b3AgPSB5ICsgXCJweFwiO1xuICAgIH07XG4gICAgXG4gICAgdGhpcy5zZXRXaWR0aCA9IGZ1bmN0aW9uKHdpZHRoKSB7XG4gICAgICAgIGNvbnRhaW5lckVsZW1lbnQuc3R5bGUud2lkdGggPSB3aWR0aCArIFwicHhcIjtcbiAgICB9O1xuXG4gICAgdGhpcy5zZXRIZWlnaHQgPSBmdW5jdGlvbihoZWlnaHQpIHtcbiAgICAgICAgY29udGFpbmVyRWxlbWVudC5zdHlsZS5oZWlnaHQgPSBoZWlnaHQgKyBcInB4XCI7XG4gICAgfTtcbiAgICBcbiAgICB0aGlzLnNldFNpemUgPSBmdW5jdGlvbih3aWR0aCwgaGVpZ2h0KSB7XG4gICAgICAgIHRoaXMuc2V0V2lkdGgod2lkdGgpO1xuICAgICAgICB0aGlzLnNldEhlaWdodChoZWlnaHQpO1xuICAgIH07XG4gICAgXG4gICAgZnVuY3Rpb24gbW91c2VEcmFnKGUpIHtcbiAgICAgICAgdGhhdC5zZXRMb2NhdGlvbihlLnBhZ2VYIC0gZHJhZ09mZnNldC54LCBlLnBhZ2VZIC0gZHJhZ09mZnNldC55KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBtb3VzZURyYWdSZWxlYXNlKGUpIHtcbiAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIiwgbW91c2VEcmFnKTtcbiAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsIG1vdXNlRHJhZ1JlbGVhc2UpO1xuICAgIH1cbiAgICBcbiAgICBmdW5jdGlvbiB2ZXJ0SGFuZGxlRHJhZyhlKSB7XG4gICAgICAgIHRoYXQuc2V0SGVpZ2h0KGUucGFnZVkgLSAkKGNvbnRhaW5lckVsZW1lbnQpLm9mZnNldCgpLnRvcCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gdmVydEhhbmRsZVJlbGVhc2UoZSkge1xuICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLCB2ZXJ0SGFuZGxlRHJhZyk7XG4gICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2V1cFwiLCB2ZXJ0SGFuZGxlUmVsZWFzZSk7XG4gICAgfVxuICAgIFxuICAgIGZ1bmN0aW9uIHZlcnRIYW5kbGVNb3VzZURvd24oZSkge1xuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLCB2ZXJ0SGFuZGxlRHJhZyk7XG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwibW91c2V1cFwiLCB2ZXJ0SGFuZGxlUmVsZWFzZSk7XG4gICAgfVxuICAgIFxuICAgIGZ1bmN0aW9uIGFkZFZlcnRSZXNpemVIYW5kbGUoKSB7XG4gICAgICAgIHZlcnRIYW5kbGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICBcbiAgICAgICAgdmVydEhhbmRsZS5jbGFzc05hbWUgPSBcImNoaWNrZW5wYWludC1yZXNpemUtaGFuZGxlLXZlcnRcIjtcbiAgICAgICAgXG4gICAgICAgIHZlcnRIYW5kbGUuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCB2ZXJ0SGFuZGxlTW91c2VEb3duKTtcbiAgICAgICAgXG4gICAgICAgIGNvbnRhaW5lckVsZW1lbnQuYXBwZW5kQ2hpbGQodmVydEhhbmRsZSk7XG4gICAgfVxuXG4gICAgY2xvc2VCdXR0b24udHlwZSA9IFwiYnV0dG9uXCI7XG4gICAgY2xvc2VCdXR0b24uY2xhc3NOYW1lID0gXCJjbG9zZVwiO1xuICAgIGNsb3NlQnV0dG9uLmlubmVySFRNTCA9IFwiJnRpbWVzO1wiO1xuICAgIFxuICAgIGNvbnRhaW5lckVsZW1lbnQuY2xhc3NOYW1lID0gXCJjaGlja2VucGFpbnQtcGFsZXR0ZSBjaGlja2VucGFpbnQtcGFsZXR0ZS1cIiArIGNsYXNzTmFtZTtcbiAgICBcbiAgICBoZWFkRWxlbWVudC5jbGFzc05hbWUgPSBcImNoaWNrZW5wYWludC1wYWxldHRlLWhlYWRcIjtcblxuICAgIHZhclxuICAgICAgICBoZWFkVGl0bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaDRcIik7XG4gICAgXG4gICAgaGVhZFRpdGxlLmNsYXNzTmFtZSA9ICdtb2RhbC10aXRsZSc7XG4gICAgaGVhZFRpdGxlLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHRoaXMudGl0bGUpKVxuICAgIFxuICAgIGhlYWRFbGVtZW50LmFwcGVuZENoaWxkKGNsb3NlQnV0dG9uKTtcbiAgICBoZWFkRWxlbWVudC5hcHBlbmRDaGlsZChoZWFkVGl0bGUpO1xuICAgIFxuICAgIGJvZHlFbGVtZW50LmNsYXNzTmFtZSA9IFwiY2hpY2tlbnBhaW50LXBhbGV0dGUtYm9keVwiO1xuICAgIFxuICAgIGNvbnRhaW5lckVsZW1lbnQuYXBwZW5kQ2hpbGQoaGVhZEVsZW1lbnQpO1xuICAgIGNvbnRhaW5lckVsZW1lbnQuYXBwZW5kQ2hpbGQoYm9keUVsZW1lbnQpO1xuXG4gICAgaWYgKHRoaXMucmVzaXplVmVydCkge1xuICAgICAgICBhZGRWZXJ0UmVzaXplSGFuZGxlKCk7XG4gICAgfVxuXG4gICAgaGVhZEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCBmdW5jdGlvbihlKSB7XG4gICAgICAgIGlmIChlLmJ1dHRvbiA9PSAwKSB7LyogTGVmdCAqL1xuICAgICAgICAgICAgaWYgKGUudGFyZ2V0Lm5vZGVOYW1lID09IFwiQlVUVE9OXCIpIHtcbiAgICAgICAgICAgICAgICB0aGF0LmVtaXRFdmVudChcInBhbGV0dGVWaXNDaGFuZ2VcIiwgW3RoYXQsIGZhbHNlXSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsIG1vdXNlRHJhZyk7XG4gICAgICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsIG1vdXNlRHJhZ1JlbGVhc2UpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGRyYWdPZmZzZXQgPSB7eDogZS5wYWdlWCAtICQoY29udGFpbmVyRWxlbWVudCkucG9zaXRpb24oKS5sZWZ0LCB5OiBlLnBhZ2VZIC0gJChjb250YWluZXJFbGVtZW50KS5wb3NpdGlvbigpLnRvcH07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KTtcbn1cblxuQ1BQYWxldHRlLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoRXZlbnRFbWl0dGVyLnByb3RvdHlwZSk7XG5DUFBhbGV0dGUucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gRXZlbnRFbWl0dGVyOyIsIi8qXG4gICAgQ2hpY2tlblBhaW50XG4gICAgXG4gICAgQ2hpY2tlblBhaW50IGlzIGEgdHJhbnNsYXRpb24gb2YgQ2hpYmlQYWludCBmcm9tIEphdmEgdG8gSmF2YVNjcmlwdFxuICAgIGJ5IE5pY2hvbGFzIFNoZXJsb2NrIC8gQ2hpY2tlbiBTbW9vdGhpZS5cbiAgICBcbiAgICBDaGliaVBhaW50IGlzIENvcHlyaWdodCAoYykgMjAwNi0yMDA4IE1hcmMgU2NoZWZlclxuXG4gICAgQ2hpY2tlblBhaW50IGlzIGZyZWUgc29mdHdhcmU6IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vciBtb2RpZnlcbiAgICBpdCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGFzIHB1Ymxpc2hlZCBieVxuICAgIHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb24sIGVpdGhlciB2ZXJzaW9uIDMgb2YgdGhlIExpY2Vuc2UsIG9yXG4gICAgKGF0IHlvdXIgb3B0aW9uKSBhbnkgbGF0ZXIgdmVyc2lvbi5cblxuICAgIENoaWNrZW5QYWludCBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLFxuICAgIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mXG4gICAgTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiAgU2VlIHRoZVxuICAgIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuXG5cbiAgICBZb3Ugc2hvdWxkIGhhdmUgcmVjZWl2ZWQgYSBjb3B5IG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZVxuICAgIGFsb25nIHdpdGggQ2hpY2tlblBhaW50LiBJZiBub3QsIHNlZSA8aHR0cDovL3d3dy5nbnUub3JnL2xpY2Vuc2VzLz4uXG4qL1xuXG5pbXBvcnQgQ1BUb29sUGFsZXR0ZSBmcm9tIFwiLi9DUFRvb2xQYWxldHRlXCI7XG5pbXBvcnQgQ1BNaXNjUGFsZXR0ZSBmcm9tIFwiLi9DUE1pc2NQYWxldHRlXCI7XG5pbXBvcnQgQ1BTdHJva2VQYWxldHRlIGZyb20gXCIuL0NQU3Ryb2tlUGFsZXR0ZVwiO1xuaW1wb3J0IENQQ29sb3JQYWxldHRlIGZyb20gXCIuL0NQQ29sb3JQYWxldHRlXCI7XG5pbXBvcnQgQ1BCcnVzaFBhbGV0dGUgZnJvbSBcIi4vQ1BCcnVzaFBhbGV0dGVcIjtcbmltcG9ydCBDUExheWVyc1BhbGV0dGUgZnJvbSBcIi4vQ1BMYXllcnNQYWxldHRlXCI7XG5pbXBvcnQgQ1BUZXh0dXJlUGFsZXR0ZSBmcm9tIFwiLi9DUFRleHR1cmVQYWxldHRlXCI7XG5pbXBvcnQgQ1BTd2F0Y2hlc1BhbGV0dGUgZnJvbSBcIi4vQ1BTd2F0Y2hlc1BhbGV0dGVcIjtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gQ1BQYWxldHRlTWFuYWdlcihjcENvbnRyb2xsZXIpIHtcbiAgICB2YXJcbiAgICAgICAgcGFsZXR0ZXMgPSB7XG4gICAgICAgICAgICB0b29sOiBuZXcgQ1BUb29sUGFsZXR0ZShjcENvbnRyb2xsZXIpLFxuICAgICAgICAgICAgbWlzYzogbmV3IENQTWlzY1BhbGV0dGUoY3BDb250cm9sbGVyKSxcbiAgICAgICAgICAgIHN0cm9rZTogbmV3IENQU3Ryb2tlUGFsZXR0ZShjcENvbnRyb2xsZXIpLFxuICAgICAgICAgICAgY29sb3I6IG5ldyBDUENvbG9yUGFsZXR0ZShjcENvbnRyb2xsZXIpLFxuICAgICAgICAgICAgYnJ1c2g6IG5ldyBDUEJydXNoUGFsZXR0ZShjcENvbnRyb2xsZXIpLFxuICAgICAgICAgICAgbGF5ZXJzOiBuZXcgQ1BMYXllcnNQYWxldHRlKGNwQ29udHJvbGxlciksXG4gICAgICAgICAgICB0ZXh0dXJlczogbmV3IENQVGV4dHVyZVBhbGV0dGUoY3BDb250cm9sbGVyKSxcbiAgICAgICAgICAgIHN3YXRjaGVzOiBuZXcgQ1BTd2F0Y2hlc1BhbGV0dGUoY3BDb250cm9sbGVyKVxuICAgICAgICB9LFxuICAgICAgICBcbiAgICAgICAgcGFsZXR0ZUZyYW1lcyA9IFtdLFxuICAgICAgICBoaWRkZW5GcmFtZXMgPSBbXSxcbiAgICAgICAgXG4gICAgICAgIHBhcmVudEVsZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLFxuICAgICAgICBcbiAgICAgICAgdGhhdCA9IHRoaXM7XG4gICAgXG4gICAgdGhpcy5wYWxldHRlcyA9IHBhbGV0dGVzO1xuXG4gICAgZnVuY3Rpb24gc2hvd1BhbGV0dGUocGFsZXR0ZSwgc2hvdykge1xuICAgICAgICB2YXJcbiAgICAgICAgICAgIHBhbEVsZW1lbnQgPSBwYWxldHRlLmdldEVsZW1lbnQoKTtcbiAgICAgICAgXG4gICAgICAgIGlmIChzaG93KSB7XG4gICAgICAgICAgICBwYXJlbnRFbGVtLmFwcGVuZENoaWxkKHBhbEVsZW1lbnQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcGFyZW50RWxlbS5yZW1vdmVDaGlsZChwYWxFbGVtZW50KTtcbiAgICAgICAgfVxuICAgICAgICB0aGF0LmVtaXRFdmVudChcInBhbGV0dGVWaXNDaGFuZ2VcIiwgW3BhbGV0dGUubmFtZSwgc2hvd10pO1xuXG4gICAgICAgIC8vIEZJWE1FOiBmb2N1cyBoYWNrXG4gICAgICAgIC8vIGNvbnRyb2xsZXIuY2FudmFzLmdyYWJGb2N1cygpOyBUT0RPXG4gICAgfVxuICAgIFxuICAgIHRoaXMuc2hvd1BhbGV0dGVCeU5hbWUgPSBmdW5jdGlvbihwYWxldHRlTmFtZSwgc2hvdykge1xuICAgICAgICB2YXIgXG4gICAgICAgICAgICBwYWxldHRlID0gcGFsZXR0ZXNbcGFsZXR0ZU5hbWVdO1xuICAgICAgICBcbiAgICAgICAgaWYgKHBhbGV0dGUpIHtcbiAgICAgICAgICAgIHNob3dQYWxldHRlKHBhbGV0dGUsIHNob3cpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy50b2dnbGVQYWxldHRlcyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAoaGlkZGVuRnJhbWVzLmxlbmd0aCA9PSAwKSB7XG4gICAgICAgICAgICAkKFwiPiAuY2hpY2tlbnBhaW50LXBhbGV0dGVcIiwgcGFyZW50RWxlbSkuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICB0aGF0LnNob3dQYWxldHRlQnlOYW1lKHRoaXMuZ2V0QXR0cmlidXRlKFwiZGF0YS1wYWxldHRlTmFtZVwiKSwgZmFsc2UpO1xuICAgICAgICAgICAgICAgIGhpZGRlbkZyYW1lcy5wdXNoKHRoaXMpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGhpZGRlbkZyYW1lcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHZhciBcbiAgICAgICAgICAgICAgICAgICAgZnJhbWUgPSBoaWRkZW5GcmFtZXNbaV07XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgdGhhdC5zaG93UGFsZXR0ZUJ5TmFtZShmcmFtZS5nZXRBdHRyaWJ1dGUoXCJkYXRhLXBhbGV0dGVOYW1lXCIpLCB0cnVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGhpZGRlbkZyYW1lcyA9IFtdO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFBvcCBwYWxldHRlcyB0aGF0IGFyZSBjdXJyZW50bHkgb3V0c2lkZSB0aGUgdmlzaWJsZSBhcmVhIGJhY2sgaW50byB2aWV3LlxuICAgICAqL1xuICAgIHRoaXMuY29uc3RyYWluUGFsZXR0ZXMgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyXG4gICAgICAgICAgICB3aW5kb3dXaWR0aCA9ICQocGFyZW50RWxlbSkucGFyZW50cyhcIi5jaGlja2VucGFpbnQtbWFpbi1zZWN0aW9uXCIpLndpZHRoKCksXG4gICAgICAgICAgICB3aW5kb3dIZWlnaHQgPSAkKHBhcmVudEVsZW0pLnBhcmVudHMoXCIuY2hpY2tlbnBhaW50LW1haW4tc2VjdGlvblwiKS5oZWlnaHQoKTtcblxuICAgICAgICBmb3IgKHZhciBpIGluIHBhbGV0dGVzKSB7XG4gICAgICAgICAgICB2YXIgcGFsZXR0ZSA9IHBhbGV0dGVzW2ldO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvKiBNb3ZlIHBhbGV0dGVzIHRoYXQgYXJlIG1vcmUgdGhhbiBoYWxmIG91dCBvZiB0aGUgZnJhbWUgYmFjayBpbnRvIGl0ICovXG4gICAgICAgICAgICBpZiAocGFsZXR0ZS5nZXRYKCkgKyBwYWxldHRlLmdldFdpZHRoKCkgLyAyID4gd2luZG93V2lkdGgpIHtcbiAgICAgICAgICAgICAgICBwYWxldHRlLnNldExvY2F0aW9uKHdpbmRvd1dpZHRoIC0gcGFsZXR0ZS5nZXRXaWR0aCgpLCBwYWxldHRlLmdldFkoKSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChwYWxldHRlLmdldFkoKSArIHBhbGV0dGUuZ2V0SGVpZ2h0KCkgLyAyID4gd2luZG93SGVpZ2h0KSB7XG4gICAgICAgICAgICAgICAgcGFsZXR0ZS5zZXRMb2NhdGlvbihwYWxldHRlLmdldFgoKSwgd2luZG93SGVpZ2h0IC0gcGFsZXR0ZS5nZXRIZWlnaHQoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vTW92ZSBzbWFsbCBwYWxldHRlcyB0byB0aGUgZnJvbnQgc28gdGhhdCB0aGV5IGFyZW4ndCBjb21wbGV0ZWx5IGhpZGRlblxuICAgICAgICAvL3BhbGV0dGVzLnN3YXRjaGVzLm1vdmVUb0Zyb250KCk7XG4gICAgICAgIFxuICAgICAgICAvL1NwZWNpYWwgaGFuZGxpbmcgZm9yIHRoZSBzd2F0Y2hlcyBwYWxldHRlIGJlaW5nIHVuZGVyIHRoZSBicnVzaCBwYWxldHRlOlxuICAgICAgICB2YXJcbiAgICAgICAgICAgIHdpZHRoVG9TcGFyZSA9IHdpbmRvd1dpZHRoIC0gcGFsZXR0ZXMudG9vbC5nZXRXaWR0aCgpIC0gcGFsZXR0ZXMubWlzYy5nZXRXaWR0aCgpIC0gcGFsZXR0ZXMuc3Ryb2tlLmdldFdpZHRoKCkgLSBwYWxldHRlcy5jb2xvci5nZXRXaWR0aCgpIC0gcGFsZXR0ZXMuYnJ1c2guZ2V0V2lkdGgoKSAtIDE1ID4gMDtcblxuICAgICAgICBpZiAocGFsZXR0ZXMuc3dhdGNoZXMuZ2V0WCgpICsgcGFsZXR0ZXMuc3dhdGNoZXMuZ2V0V2lkdGgoKSA9PSAgcGFsZXR0ZXMuYnJ1c2guZ2V0WCgpICsgcGFsZXR0ZXMuYnJ1c2guZ2V0V2lkdGgoKSAmJlxuICAgICAgICAgICAgICAgIE1hdGguYWJzKHBhbGV0dGVzLnN3YXRjaGVzLmdldFkoKSAtIHBhbGV0dGVzLmJydXNoLmdldFkoKSkgPCAyMCkge1xuICAgICAgICAgICAgcGFsZXR0ZXMuc3dhdGNoZXMuc2V0TG9jYXRpb24ocGFsZXR0ZXMuYnJ1c2guZ2V0WCgpIC0gcGFsZXR0ZXMuc3dhdGNoZXMuZ2V0V2lkdGgoKSAtICh3aWR0aFRvU3BhcmUgPyA1IDogMSksIDApO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvL1NwZWNpYWwgaGFuZGxpbmcgZm9yIGxheWVycyBwYWxldHRlIGJlaW5nIHRvbyBkYW1uIHRhbGw6XG4gICAgICAgIGlmIChwYWxldHRlcy5sYXllcnMuZ2V0WSgpICsgcGFsZXR0ZXMubGF5ZXJzLmdldEhlaWdodCgpID4gd2luZG93SGVpZ2h0KSB7XG4gICAgICAgICAgICBwYWxldHRlcy5sYXllcnMuc2V0SGVpZ2h0KE1hdGgubWF4KHdpbmRvd0hlaWdodCAtIHBhbGV0dGVzLmxheWVycy5nZXRZKCksIDIwMCkpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBcbiAgICAvKipcbiAgICAgKiBSZWFycmFuZ2UgdGhlIHBhbGV0dGVzIGZyb20gc2NyYXRjaCBpbnRvIGEgdXNlZnVsIGFycmFuZ2VtZW50LlxuICAgICAqL1xuICAgIHRoaXMuYXJyYW5nZVBhbGV0dGVzID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhclxuICAgICAgICAgICAgd2luZG93V2lkdGggPSAkKHBhcmVudEVsZW0pLnBhcmVudHMoXCIuY2hpY2tlbnBhaW50LW1haW4tc2VjdGlvblwiKS53aWR0aCgpLFxuICAgICAgICAgICAgd2luZG93SGVpZ2h0ID0gJChwYXJlbnRFbGVtKS5wYXJlbnRzKFwiLmNoaWNrZW5wYWludC1tYWluLXNlY3Rpb25cIikuaGVpZ2h0KCksXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGhhdmVXaWR0aFRvU3BhcmUgPSB3aW5kb3dXaWR0aCAtIHBhbGV0dGVzLnRvb2wuZ2V0V2lkdGgoKSAtIHBhbGV0dGVzLm1pc2MuZ2V0V2lkdGgoKSAtIHBhbGV0dGVzLnN0cm9rZS5nZXRXaWR0aCgpIC0gcGFsZXR0ZXMuY29sb3IuZ2V0V2lkdGgoKSAtIHBhbGV0dGVzLmJydXNoLmdldFdpZHRoKCkgLSAxNSA+IDA7XG5cbiAgICAgICAgcGFsZXR0ZXMuYnJ1c2guc2V0TG9jYXRpb24od2luZG93V2lkdGggLSBwYWxldHRlcy5icnVzaC5nZXRXaWR0aCgpIC0gMTUsIDApO1xuXG4gICAgICAgIHZhciBcbiAgICAgICAgICAgIGJvdHRvbU9mQnJ1c2ggPSBwYWxldHRlcy5icnVzaC5nZXRZKCkgKyBwYWxldHRlcy5icnVzaC5nZXRIZWlnaHQoKTtcblxuICAgICAgICBwYWxldHRlcy5sYXllcnMuc2V0TG9jYXRpb24ocGFsZXR0ZXMuYnJ1c2guZ2V0WCgpLCB3aW5kb3dIZWlnaHQgLSBib3R0b21PZkJydXNoID4gMzAwID8gYm90dG9tT2ZCcnVzaCArIDIgOiBib3R0b21PZkJydXNoKTtcbiAgICAgICAgcGFsZXR0ZXMubGF5ZXJzLnNldFNpemUocGFsZXR0ZXMuYnJ1c2guZ2V0V2lkdGgoKSwgd2luZG93SGVpZ2h0IC0gcGFsZXR0ZXMubGF5ZXJzLmdldFkoKSk7XG5cbiAgICAgICAgcGFsZXR0ZXMudG9vbC5zZXRMb2NhdGlvbigwLCAwKTtcbiAgICAgICAgXG4gICAgICAgIHBhbGV0dGVzLm1pc2Muc2V0TG9jYXRpb24ocGFsZXR0ZXMudG9vbC5nZXRYKCkgKyBwYWxldHRlcy50b29sLmdldFdpZHRoKCkgKyAoaGF2ZVdpZHRoVG9TcGFyZSA/IDUgOiAxKSwgMCk7XG4gICAgICAgIFxuICAgICAgICBpZiAoaGF2ZVdpZHRoVG9TcGFyZSkge1xuICAgICAgICAgICAgcGFsZXR0ZXMuc3Ryb2tlLnNldExvY2F0aW9uKHBhbGV0dGVzLm1pc2MuZ2V0WCgpICsgcGFsZXR0ZXMubWlzYy5nZXRXaWR0aCgpICsgKGhhdmVXaWR0aFRvU3BhcmUgPyA1IDogMSksIDApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcGFsZXR0ZXMuc3Ryb2tlLnNldExvY2F0aW9uKHBhbGV0dGVzLm1pc2MuZ2V0WCgpLCBwYWxldHRlcy5taXNjLmdldFkoKSArIHBhbGV0dGVzLm1pc2MuZ2V0SGVpZ2h0KCkgKyAxKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgcGFsZXR0ZXMuc3dhdGNoZXMuc2V0TG9jYXRpb24ocGFsZXR0ZXMuYnJ1c2guZ2V0WCgpIC0gcGFsZXR0ZXMuc3dhdGNoZXMuZ2V0V2lkdGgoKSAtIChoYXZlV2lkdGhUb1NwYXJlID8gNSA6IDEpLCAwKTtcblxuICAgICAgICBwYWxldHRlcy50ZXh0dXJlcy5zZXRXaWR0aChNYXRoLm1pbihwYWxldHRlcy5sYXllcnMuZ2V0WCgpIC0gcGFsZXR0ZXMudGV4dHVyZXMuZ2V0WCgpLCA0OTApKTtcbiAgICAgICAgcGFsZXR0ZXMudGV4dHVyZXMuc2V0TG9jYXRpb24ocGFsZXR0ZXMuY29sb3IuZ2V0WCgpICsgcGFsZXR0ZXMuY29sb3IuZ2V0V2lkdGgoKSArIDQsIHdpbmRvd0hlaWdodCAtIHBhbGV0dGVzLnRleHR1cmVzLmdldEhlaWdodCgpKTtcblxuICAgICAgICBwYWxldHRlcy5jb2xvci5zZXRMb2NhdGlvbigwLCBNYXRoLm1heChwYWxldHRlcy50b29sLmdldFkoKSArIHBhbGV0dGVzLnRvb2wuZ2V0SGVpZ2h0KCksIHdpbmRvd0hlaWdodCAtIHBhbGV0dGVzLmNvbG9yLmdldEhlaWdodCgpKSk7XG4gICAgfTtcbiAgICBcbiAgICB0aGlzLmdldEVsZW1lbnQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHBhcmVudEVsZW07XG4gICAgfTtcblxuICAgIHBhcmVudEVsZW0uY2xhc3NOYW1lID0gXCJjaGlja2VucGFpbnQtcGFsZXR0ZXNcIjtcblxuICAgIGZvciAodmFyIHBhbGV0dGVOYW1lIGluIHBhbGV0dGVzKSB7XG4gICAgICAgIHZhciBcbiAgICAgICAgICAgIHBhbGV0dGUgPSBwYWxldHRlc1twYWxldHRlTmFtZV0sXG4gICAgICAgICAgICBwYWxFbGVtZW50ID0gcGFsZXR0ZS5nZXRFbGVtZW50KCk7XG4gICAgICAgIFxuICAgICAgICBwYWxldHRlLm9uKFwicGFsZXR0ZVZpc0NoYW5nZVwiLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHNob3dQYWxldHRlKHRoaXMsIGZhbHNlKTtcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICBwYWxFbGVtZW50LnNldEF0dHJpYnV0ZShcImRhdGEtcGFsZXR0ZU5hbWVcIiwgcGFsZXR0ZU5hbWUpO1xuICAgICAgICBwYWxldHRlRnJhbWVzLnB1c2gocGFsRWxlbWVudCk7XG4gICAgfVxuICAgIFxuICAgIGZvciAodmFyIHBhbGV0dGVOYW1lIGluIHBhbGV0dGVzKSB7XG4gICAgICAgIHZhciBcbiAgICAgICAgICAgIHBhbEVsZW1lbnQgPSBwYWxldHRlc1twYWxldHRlTmFtZV0uZ2V0RWxlbWVudCgpO1xuXG4gICAgICAgIHBhcmVudEVsZW0uYXBwZW5kQ2hpbGQocGFsRWxlbWVudCk7XG4gICAgfVxufVxuXG5DUFBhbGV0dGVNYW5hZ2VyLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoRXZlbnRFbWl0dGVyLnByb3RvdHlwZSk7XG5DUFBhbGV0dGVNYW5hZ2VyLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IENQUGFsZXR0ZU1hbmFnZXI7IiwiLypcbiAgICBDaGlja2VuUGFpbnRcbiAgICBcbiAgICBDaGlja2VuUGFpbnQgaXMgYSB0cmFuc2xhdGlvbiBvZiBDaGliaVBhaW50IGZyb20gSmF2YSB0byBKYXZhU2NyaXB0XG4gICAgYnkgTmljaG9sYXMgU2hlcmxvY2sgLyBDaGlja2VuIFNtb290aGllLlxuICAgIFxuICAgIENoaWJpUGFpbnQgaXMgQ29weXJpZ2h0IChjKSAyMDA2LTIwMDggTWFyYyBTY2hlZmVyXG5cbiAgICBDaGlja2VuUGFpbnQgaXMgZnJlZSBzb2Z0d2FyZTogeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yIG1vZGlmeVxuICAgIGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgYXMgcHVibGlzaGVkIGJ5XG4gICAgdGhlIEZyZWUgU29mdHdhcmUgRm91bmRhdGlvbiwgZWl0aGVyIHZlcnNpb24gMyBvZiB0aGUgTGljZW5zZSwgb3JcbiAgICAoYXQgeW91ciBvcHRpb24pIGFueSBsYXRlciB2ZXJzaW9uLlxuXG4gICAgQ2hpY2tlblBhaW50IGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsXG4gICAgYnV0IFdJVEhPVVQgQU5ZIFdBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2ZcbiAgICBNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuICBTZWUgdGhlXG4gICAgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy5cblxuICAgIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXG4gICAgYWxvbmcgd2l0aCBDaGlja2VuUGFpbnQuIElmIG5vdCwgc2VlIDxodHRwOi8vd3d3LmdudS5vcmcvbGljZW5zZXMvPi5cbiovXG5cbi8qKlxuICogQHBhcmFtIHZlcnRpY2FsIGJvb2xlYW5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gQ1BTY3JvbGxiYXIodmVydGljYWwpIHtcbiAgICB2YXJcbiAgICAgICAgYmFyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSxcbiAgICAgICAgaGFuZGxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSxcbiAgICAgICAgaGFuZGxlSW5uZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLFxuICAgICAgICBcbiAgICAgICAgbWluID0gMCwgbWF4ID0gMSwgb2Zmc2V0ID0gMCwgdmlzaWJsZVJhbmdlID0gMSxcbiAgICAgICAgXG4gICAgICAgIGJsb2NrSW5jcmVtZW50ID0gMTAsIHVuaXRJbmNyZW1lbnQgPSAxLFxuICAgICAgICBcbiAgICAgICAgdmFsdWVJc0FkanVzdGluZyA9IGZhbHNlLFxuICAgICAgICBcbiAgICAgICAgaGFuZGxlU2l6ZSA9IDEsXG4gICAgICAgIFxuICAgICAgICBkcmFnTGFzdE9mZnNldCxcbiAgICAgICAgXG4gICAgICAgIHRoYXQgPSB0aGlzO1xuICAgIFxuICAgIGZ1bmN0aW9uIHVwZGF0ZUJhcigpIHtcbiAgICAgICAgdmFyXG4gICAgICAgICAgICBsb25nRGltZW5zaW9uID0gdmVydGljYWwgPyAkKGJhcikuaGVpZ2h0KCkgOiAkKGJhcikud2lkdGgoKTtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAvKiBBcyB0aGUgc2l6ZSBvZiB0aGUgZG9jdW1lbnQgYXBwcm9hY2hlcyB0aGUgc2l6ZSBvZiB0aGUgY29udGFpbmVyLCBoYW5kbGUgc2l6ZSBncm93cyB0byBmaWxsIHRoZSBcbiAgICAgICAgICAgICAqIHdob2xlIHRyYWNrOlxuICAgICAgICAgICAgICovXG4gICAgICAgIGhhbmRsZVNpemUgPSB2aXNpYmxlUmFuZ2UgLyAobWF4IC0gbWluKSAqIGxvbmdEaW1lbnNpb247IFxuICAgICAgICBcbiAgICAgICAgdmFyXG4gICAgICAgICAgICBoYW5kbGVPZmZzZXQgPSAob2Zmc2V0IC0gbWluKSAvIChtYXggLSBtaW4pICogKGxvbmdEaW1lbnNpb24gLSBoYW5kbGVTaXplKTtcbiAgICAgICAgXG4gICAgICAgIGhhbmRsZUlubmVyLnN0eWxlW3ZlcnRpY2FsID8gXCJoZWlnaHRcIiA6IFwid2lkdGhcIl0gPSBoYW5kbGVTaXplICsgXCJweFwiO1xuICAgICAgICBoYW5kbGUuc3R5bGVbdmVydGljYWwgPyBcImhlaWdodFwiIDogXCJ3aWR0aFwiXSA9IGhhbmRsZVNpemUgKyBcInB4XCI7XG4gICAgICAgIFxuICAgICAgICBoYW5kbGUuc3R5bGVbdmVydGljYWwgPyBcInRvcFwiIDogXCJsZWZ0XCJdID0gaGFuZGxlT2Zmc2V0ICsgXCJweFwiO1xuICAgIH1cbiAgICBcbiAgICB0aGlzLnNldFZhbHVlcyA9IGZ1bmN0aW9uKF9vZmZzZXQsIF92aXNpYmxlUmFuZ2UsIF9taW4sIF9tYXgpIHtcbiAgICAgICAgb2Zmc2V0ID0gX29mZnNldDtcbiAgICAgICAgdmlzaWJsZVJhbmdlID0gX3Zpc2libGVSYW5nZTtcbiAgICAgICAgbWluID0gX21pbjtcbiAgICAgICAgbWF4ID0gX21heDtcbiAgICAgICAgXG4gICAgICAgIHVwZGF0ZUJhcigpO1xuICAgIH07XG4gICAgXG4gICAgdGhpcy5zZXRCbG9ja0luY3JlbWVudCA9IGZ1bmN0aW9uKGluY3JlbWVudCkge1xuICAgICAgICBibG9ja0luY3JlbWVudCA9IGluY3JlbWVudDtcbiAgICB9O1xuICAgIFxuICAgIHRoaXMuc2V0VW5pdEluY3JlbWVudCA9IGZ1bmN0aW9uKGluY3JlbWVudCkge1xuICAgICAgICB1bml0SW5jcmVtZW50ID0gaW5jcmVtZW50O1xuICAgIH07XG4gICAgXG4gICAgdGhpcy5nZXRFbGVtZW50ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBiYXI7XG4gICAgfTtcbiAgICBcbiAgICB0aGlzLmdldFZhbHVlSXNBZGp1c3RpbmcgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlSXNBZGp1c3Rpbmc7XG4gICAgfTtcbiAgICBcbiAgICBmdW5jdGlvbiBvbkJhckNsaWNrKGUpIHtcbiAgICAgICAgaWYgKHRoaXMgPT0gYmFyKSB7XG4gICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICBjbGlja1BvcyA9IHZlcnRpY2FsID8gZS5wYWdlWSAtICQoYmFyKS5vZmZzZXQoKS50b3AgOiBlLnBhZ2VYIC0gJChiYXIpLm9mZnNldCgpLmxlZnQsXG4gICAgICAgICAgICAgICAgYmFyUG9zID0gcGFyc2VJbnQoaGFuZGxlLnN0eWxlW3ZlcnRpY2FsID8gXCJ0b3BcIiA6IFwibGVmdFwiXSwgMTApO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoY2xpY2tQb3MgPCBiYXJQb3MpIHtcbiAgICAgICAgICAgICAgICBvZmZzZXQgLT0gYmxvY2tJbmNyZW1lbnQ7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIG9mZnNldCArPSBibG9ja0luY3JlbWVudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhhdC5lbWl0RXZlbnQoXCJ2YWx1ZUNoYW5nZWRcIiwgW29mZnNldF0pO1xuICAgICAgICAgICAgdXBkYXRlQmFyKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgZnVuY3Rpb24gb25IYW5kbGVQcmVzcyhlKSB7XG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgIGRyYWdMYXN0T2Zmc2V0ID0gdmVydGljYWwgPyBlLnBhZ2VZIC0gJChiYXIpLm9mZnNldCgpLnRvcCA6IGUucGFnZVggLSAkKGJhcikub2Zmc2V0KCkubGVmdDtcbiAgICAgICAgXG4gICAgICAgICQoaGFuZGxlKS5hZGRDbGFzcyhcImRyYWdnaW5nXCIpO1xuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNldXBcIiwgb25IYW5kbGVSZWxlYXNlKTtcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIiwgb25IYW5kbGVEcmFnKTtcbiAgICB9XG4gICAgXG4gICAgZnVuY3Rpb24gb25IYW5kbGVDbGljayhlKSB7XG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgfVxuICAgIFxuICAgIGZ1bmN0aW9uIG9uSGFuZGxlRHJhZyhlKSB7XG4gICAgICAgIHZhbHVlSXNBZGp1c3RpbmcgPSB0cnVlO1xuICAgICAgICBcbiAgICAgICAgdmFyXG4gICAgICAgICAgICBsb25nRGltZW5zaW9uID0gdmVydGljYWwgPyAkKGJhcikuaGVpZ2h0KCkgOiAkKGJhcikud2lkdGgoKSxcbiAgICAgICAgICAgIG1vdXNlT2Zmc2V0ID0gdmVydGljYWwgPyBlLnBhZ2VZIC0gJChiYXIpLm9mZnNldCgpLnRvcCA6IGUucGFnZVggLSAkKGJhcikub2Zmc2V0KCkubGVmdDtcbiAgICAgICAgXG4gICAgICAgIG9mZnNldCA9IG9mZnNldCArIChtb3VzZU9mZnNldCAtIGRyYWdMYXN0T2Zmc2V0KSAqIChtYXggLSBtaW4pIC8gKGxvbmdEaW1lbnNpb24gLSBoYW5kbGVTaXplKTtcbiAgICAgICAgXG4gICAgICAgIG9mZnNldCA9IE1hdGgubWluKE1hdGgubWF4KG9mZnNldCwgbWluKSwgbWF4KTtcbiAgICAgICAgXG4gICAgICAgIGRyYWdMYXN0T2Zmc2V0ID0gbW91c2VPZmZzZXQ7XG4gICAgICAgIFxuICAgICAgICB0aGF0LmVtaXRFdmVudChcInZhbHVlQ2hhbmdlZFwiLCBbb2Zmc2V0XSk7XG4gICAgICAgIHVwZGF0ZUJhcigpO1xuICAgICAgICBcbiAgICAgICAgdmFsdWVJc0FkanVzdGluZyA9IGZhbHNlO1xuICAgIH1cbiAgICBcbiAgICBmdW5jdGlvbiBvbkhhbmRsZVJlbGVhc2UoZSkge1xuICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAkKGhhbmRsZSkucmVtb3ZlQ2xhc3MoXCJkcmFnZ2luZ1wiKTtcbiAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsIG9uSGFuZGxlUmVsZWFzZSk7XG4gICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsIG9uSGFuZGxlRHJhZyk7XG4gICAgfVxuICAgIFxuICAgIGJhci5jbGFzc05hbWUgPSBcImNoaWNrZW5wYWludC1zY3JvbGxiYXIgXCIgICsgKHZlcnRpY2FsID8gXCJjaGlja2VucGFpbnQtc2Nyb2xsYmFyLXZlcnRpY2FsXCIgOiBcImNoaWNrZW5wYWludC1zY3JvbGxiYXItaG9yaXpvbnRhbFwiKTtcbiAgICBoYW5kbGUuY2xhc3NOYW1lID0gXCJjaGlja2VucGFpbnQtc2Nyb2xsYmFyLWhhbmRsZVwiO1xuICAgIGhhbmRsZUlubmVyLmNsYXNzTmFtZSA9IFwiY2hpY2tlbnBhaW50LXNjcm9sbGJhci1oYW5kbGUtaW5uZXJcIjtcbiAgICBcbiAgICBoYW5kbGUuYXBwZW5kQ2hpbGQoaGFuZGxlSW5uZXIpO1xuICAgIGJhci5hcHBlbmRDaGlsZChoYW5kbGUpO1xuICAgIFxuICAgIGhhbmRsZS5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIG9uSGFuZGxlUHJlc3MpO1xuICAgIGhhbmRsZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgb25IYW5kbGVDbGljayk7XG4gICAgXG4gICAgYmFyLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBvbkJhckNsaWNrKTtcbn1cblxuQ1BTY3JvbGxiYXIucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShFdmVudEVtaXR0ZXIucHJvdG90eXBlKTtcbkNQU2Nyb2xsYmFyLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IENQU2Nyb2xsYmFyOyIsIi8qXG4gICAgQ2hpY2tlblBhaW50XG4gICAgXG4gICAgQ2hpY2tlblBhaW50IGlzIGEgdHJhbnNsYXRpb24gb2YgQ2hpYmlQYWludCBmcm9tIEphdmEgdG8gSmF2YVNjcmlwdFxuICAgIGJ5IE5pY2hvbGFzIFNoZXJsb2NrIC8gQ2hpY2tlbiBTbW9vdGhpZS5cbiAgICBcbiAgICBDaGliaVBhaW50IGlzIENvcHlyaWdodCAoYykgMjAwNi0yMDA4IE1hcmMgU2NoZWZlclxuXG4gICAgQ2hpY2tlblBhaW50IGlzIGZyZWUgc29mdHdhcmU6IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vciBtb2RpZnlcbiAgICBpdCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGFzIHB1Ymxpc2hlZCBieVxuICAgIHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb24sIGVpdGhlciB2ZXJzaW9uIDMgb2YgdGhlIExpY2Vuc2UsIG9yXG4gICAgKGF0IHlvdXIgb3B0aW9uKSBhbnkgbGF0ZXIgdmVyc2lvbi5cblxuICAgIENoaWNrZW5QYWludCBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLFxuICAgIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mXG4gICAgTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiAgU2VlIHRoZVxuICAgIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuXG5cbiAgICBZb3Ugc2hvdWxkIGhhdmUgcmVjZWl2ZWQgYSBjb3B5IG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZVxuICAgIGFsb25nIHdpdGggQ2hpY2tlblBhaW50LiBJZiBub3QsIHNlZSA8aHR0cDovL3d3dy5nbnUub3JnL2xpY2Vuc2VzLz4uXG4qL1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBDUFNlbmREaWFsb2coY29udHJvbGxlciwgcGFyZW50LCByZXNvdXJjZVNhdmVyKSB7XG4gICAgdmFyXG4gICAgICAgIGRpYWxvZyA9IFxuICAgICAgICAgICAgJChgPGRpdiBjbGFzcz1cIm1vZGFsIGZhZGVcIiB0YWJpbmRleD1cIi0xXCIgcm9sZT1cImRpYWxvZ1wiPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtb2RhbC1kaWFsb2dcIj5cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm1vZGFsLWNvbnRlbnRcIiBkYXRhLXN0YWdlPVwic2F2aW5nXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibW9kYWwtaGVhZGVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJjbG9zZVwiIGRhdGEtZGlzbWlzcz1cIm1vZGFsXCIgYXJpYS1sYWJlbD1cIkNsb3NlXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPiZ0aW1lczs8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGg0IGNsYXNzPVwibW9kYWwtdGl0bGVcIj5TYXZpbmcgZHJhd2luZy4uLjwvaDQ+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtb2RhbC1ib2R5XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3M9XCJjaGlja2VucGFpbnQtc2F2aW5nLXByb2dyZXNzLW1lc3NhZ2VcIj5QcmVwYXJpbmcgeW91ciBkcmF3aW5nIHRvIGJlIHNhdmVkLCBwbGVhc2Ugd2FpdC4uLjwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cHJlIGNsYXNzPVwiY2hpY2tlbnBhaW50LXNhdmluZy1lcnJvci1tZXNzYWdlIHByZS1zY3JvbGxhYmxlXCI+PC9wcmU+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInByb2dyZXNzXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJwcm9ncmVzcy1iYXJcIiByb2xlPVwicHJvZ3Jlc3NiYXJcIiBhcmlhLXZhbHVlbm93PVwiMFwiIGFyaWEtdmFsdWVtaW49XCIwXCIgYXJpYS12YWx1ZW1heD1cIjEwMFwiIHN0eWxlPVwid2lkdGg6IDAlO1wiPjwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibW9kYWwtZm9vdGVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJidG4gYnRuLWRlZmF1bHQgY2hpY2tlbnBhaW50LXNlbmQtY2FuY2VsXCIgZGF0YS1kaXNtaXNzPVwibW9kYWxcIj5DYW5jZWw8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm1vZGFsLWNvbnRlbnRcIiBkYXRhLXN0YWdlPVwic3VjY2Vzcy1ub3QtcHJldmlvdXNseS1wb3N0ZWRcIiBzdHlsZT1cImRpc3BsYXk6bm9uZVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm1vZGFsLWhlYWRlclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiY2xvc2VcIiBkYXRhLWRpc21pc3M9XCJtb2RhbFwiIGFyaWEtbGFiZWw9XCJDbG9zZVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBhcmlhLWhpZGRlbj1cInRydWVcIj4mdGltZXM7PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoNCBjbGFzcz1cIm1vZGFsLXRpdGxlXCI+RHJhd2luZyBzYXZlZCE8L2g0PlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibW9kYWwtYm9keVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwPllvdXIgZHJhd2luZyBoYXMgYmVlbiBzYXZlZCwgd291bGQgeW91IGxpa2UgdG8gcG9zdCBpdCB0byB0aGUgZm9ydW0gbm93PzwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm1vZGFsLWZvb3RlclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiYnRuIGJ0bi1wcmltYXJ5IGNoaWNrZW5wYWludC1wb3N0LWRyYXdpbmdcIiBkYXRhLWRpc21pc3M9XCJtb2RhbFwiPlllcywgcG9zdCBpdCBub3c8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImJ0biBidG4tZGVmYXVsdFwiIGRhdGEtZGlzbWlzcz1cIm1vZGFsXCI+Tm8sIGtlZXAgZHJhd2luZzwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiYnRuIGJ0bi1kZWZhdWx0IGNoaWNrZW5wYWludC1leGl0XCIgZGF0YS1kaXNtaXNzPVwibW9kYWxcIj5ObywgcXVpdCBhbmQgSSdsbCBmaW5pc2ggaXQgbGF0ZXI8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm1vZGFsLWNvbnRlbnRcIiBkYXRhLXN0YWdlPVwic3VjY2Vzcy1hbHJlYWR5LXBvc3RlZFwiIHN0eWxlPVwiZGlzcGxheTpub25lXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibW9kYWwtaGVhZGVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJjbG9zZVwiIGRhdGEtZGlzbWlzcz1cIm1vZGFsXCIgYXJpYS1sYWJlbD1cIkNsb3NlXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPiZ0aW1lczs8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGg0IGNsYXNzPVwibW9kYWwtdGl0bGVcIj5EcmF3aW5nIHNhdmVkITwvaDQ+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtb2RhbC1ib2R5XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHA+WW91ciBkcmF3aW5nIGhhcyBiZWVuIHNhdmVkLCB3b3VsZCB5b3UgbGlrZSB0byB2aWV3IGl0IG9uIHRoZSBmb3J1bSBub3c/PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibW9kYWwtZm9vdGVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJidG4gYnRuLXByaW1hcnkgY2hpY2tlbnBhaW50LXBvc3QtZHJhd2luZ1wiIGRhdGEtZGlzbWlzcz1cIm1vZGFsXCI+WWVzLCB2aWV3IHRoZSBwb3N0PC9idXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJidG4gYnRuLWRlZmF1bHRcIiBkYXRhLWRpc21pc3M9XCJtb2RhbFwiPk5vLCBrZWVwIGRyYXdpbmc8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICBgKSxcbiAgICAgICAgcHJvZ3Jlc3NNZXNzYWdlRWxlbSA9ICQoXCIuY2hpY2tlbnBhaW50LXNhdmluZy1wcm9ncmVzcy1tZXNzYWdlXCIsIGRpYWxvZyksXG4gICAgICAgIHByb2dyZXNzRXJyb3IgPSAkKFwiLmNoaWNrZW5wYWludC1zYXZpbmctZXJyb3ItbWVzc2FnZVwiLCBkaWFsb2cpLFxuICAgICAgICBwcm9ncmVzc0VsZW0gPSAkKFwiLnByb2dyZXNzLWJhclwiLCBkaWFsb2cpLFxuXG4gICAgICAgIHRoYXQgPSB0aGlzO1xuICAgIFxuICAgIHJlc291cmNlU2F2ZXIub24oXCJzYXZpbmdQcm9ncmVzc1wiLCBmdW5jdGlvbihwcm9ncmVzcywgbWVzc2FnZSkge1xuICAgICAgICBwcm9ncmVzcyAqPSAxMDA7XG4gICAgICAgIFxuICAgICAgICBwcm9ncmVzc01lc3NhZ2VFbGVtLnRleHQobWVzc2FnZSk7XG4gICAgICAgIFxuICAgICAgICAkKHByb2dyZXNzRWxlbSlcbiAgICAgICAgICAgIC5hdHRyKFwiYXJpYS12YWx1ZW5vd1wiLCBwcm9ncmVzcylcbiAgICAgICAgICAgIC5jc3MoXCJ3aWR0aFwiLCBwcm9ncmVzcyArIFwiJVwiKTtcbiAgICB9KTtcbiBcbiAgICByZXNvdXJjZVNhdmVyLm9uKFwic2F2aW5nQ29tcGxldGVcIiwgZnVuY3Rpb24ocHJvZ3Jlc3MpIHtcbiAgICAgICAgJChcIi5tb2RhbC1jb250ZW50W2RhdGEtc3RhZ2U9J3NhdmluZyddXCIsIGRpYWxvZykuaGlkZSgpO1xuICAgICAgICBcbiAgICAgICAgaWYgKGNvbnRyb2xsZXIuaXNBY3Rpb25TdXBwb3J0ZWQoXCJDUEV4aXRcIikpIHtcbiAgICAgICAgICAgICQoXCIubW9kYWwtY29udGVudFtkYXRhLXN0YWdlPSdzdWNjZXNzLW5vdC1wcmV2aW91c2x5LXBvc3RlZCddXCIsIGRpYWxvZykuc2hvdygpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgJChcIi5tb2RhbC1jb250ZW50W2RhdGEtc3RhZ2U9J3N1Y2Nlc3MtYWxyZWFkeS1wb3N0ZWQnXVwiLCBkaWFsb2cpLnNob3coKTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgcmVzb3VyY2VTYXZlci5vbihcInNhdmluZ0ZhaWx1cmVcIiwgZnVuY3Rpb24oc2VydmVyTWVzc2FnZSkge1xuICAgICAgICBwcm9ncmVzc0VsZW0uYWRkQ2xhc3MoXCJwcm9ncmVzcy1iYXItZGFuZ2VyXCIpO1xuICAgICAgICBcbiAgICAgICAgdmFyXG4gICAgICAgICAgICBlcnJvck1lc3NhZ2UgPSBcIlNvcnJ5LCB5b3VyIGRyYXdpbmcgY291bGQgbm90IGJlIHNhdmVkLCBwbGVhc2UgdHJ5IGFnYWluIGxhdGVyLlwiO1xuICAgICAgICBcbiAgICAgICAgaWYgKHNlcnZlck1lc3NhZ2UpIHtcbiAgICAgICAgICAgIHNlcnZlck1lc3NhZ2UgPSBzZXJ2ZXJNZXNzYWdlLnJlcGxhY2UoL15DSElCSUVSUk9SXFxzKi8sIFwiXCIpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoc2VydmVyTWVzc2FnZS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgZXJyb3JNZXNzYWdlICs9IFwiPGJyPjxicj5UaGUgZXJyb3IgcmV0dXJuZWQgZnJvbSB0aGUgc2VydmVyIHdhczpcIjtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBwcm9ncmVzc0Vycm9yXG4gICAgICAgICAgICAgICAgICAgIC50ZXh0KHNlcnZlck1lc3NhZ2UpXG4gICAgICAgICAgICAgICAgICAgIC5zaG93KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHByb2dyZXNzTWVzc2FnZUVsZW0uaHRtbChlcnJvck1lc3NhZ2UpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgIH0pO1xuICAgIFxuICAgICQoXCIuY2hpY2tlbnBhaW50LXBvc3QtZHJhd2luZ1wiLCBkaWFsb2cpLmNsaWNrKGZ1bmN0aW9uKCkge1xuICAgICAgICBjb250cm9sbGVyLmFjdGlvblBlcmZvcm1lZCh7YWN0aW9uOiBcIkNQUG9zdFwifSk7XG4gICAgfSk7XG5cbiAgICAkKFwiLmNoaWNrZW5wYWludC1leGl0XCIsIGRpYWxvZykuY2xpY2soZnVuY3Rpb24oKSB7XG4gICAgICAgIGFsZXJ0KFwiV2hlbiB5b3Ugd2FudCB0byBjb21lIGJhY2sgYW5kIGZpbmlzaCB5b3VyIGRyYXdpbmcsIGp1c3QgY2xpY2sgdGhlICduZXcgZHJhd2luZycgYnV0dG9uIGFnYWluIGFuZCBcIiBcbiAgICAgICAgICAgICsgXCJ5b3UgY2FuIGNob29zZSB0byBjb250aW51ZSB0aGlzIGRyYXdpbmcuXCIpO1xuICAgICAgICBjb250cm9sbGVyLmFjdGlvblBlcmZvcm1lZCh7YWN0aW9uOiBcIkNQRXhpdFwifSk7XG4gICAgfSk7XG4gICAgXG4gICAgJChcIi5jaGlja2VucGFpbnQtc2VuZC1jYW5jZWxcIiwgZGlhbG9nKS5jbGljayhmdW5jdGlvbigpIHtcbiAgICAgICAgcmVzb3VyY2VTYXZlci5jYW5jZWwoKTtcbiAgICB9KTtcbiAgICBcbiAgICAvLyBEZXN0cm95IHRoZSBtb2RhbCB1cG9uIGNsb3NlXG4gICAgZGlhbG9nLm9uKFwiaGlkZGVuLmJzLm1vZGFsXCIsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgZGlhbG9nLnJlbW92ZSgpO1xuICAgIH0pO1xuICAgIFxuICAgIGRpYWxvZy5tb2RhbCh7XG4gICAgICAgIHNob3c6IGZhbHNlXG4gICAgfSk7XG5cbiAgICBkaWFsb2cub24oJ3Nob3duLmJzLm1vZGFsJywgZnVuY3Rpb24oKSB7XG4gICAgICAgIHRoYXQuZW1pdEV2ZW50KFwic2hvd25cIik7XG4gICAgfSk7XG4gICAgXG4gICAgLy8gRml4IHRoZSBiYWNrZHJvcCBsb2NhdGlvbiBpbiB0aGUgRE9NIGJ5IHJlcGFyZW50aW5nIGl0IHRvIHRoZSBjaGlja2VucGFpbnQgY29udGFpbmVyXG4gICAgZGlhbG9nLmRhdGEoXCJicy5tb2RhbFwiKS4kYm9keSA9ICQocGFyZW50KTtcbiAgICBcbiAgICBwYXJlbnQuYXBwZW5kQ2hpbGQoZGlhbG9nWzBdKTtcblxuICAgIHRoaXMuc2hvdyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBkaWFsb2cubW9kYWwoXCJzaG93XCIpO1xuICAgIH07XG59XG5cbkNQU2VuZERpYWxvZy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKEV2ZW50RW1pdHRlci5wcm90b3R5cGUpO1xuQ1BTZW5kRGlhbG9nLnByb3RvdHlwZS5jb250cnVjdG9yID0gQ1BTZW5kRGlhbG9nOyIsIi8qXG4gICAgQ2hpY2tlblBhaW50XG4gICAgXG4gICAgQ2hpY2tlblBhaW50IGlzIGEgdHJhbnNsYXRpb24gb2YgQ2hpYmlQYWludCBmcm9tIEphdmEgdG8gSmF2YVNjcmlwdFxuICAgIGJ5IE5pY2hvbGFzIFNoZXJsb2NrIC8gQ2hpY2tlbiBTbW9vdGhpZS5cbiAgICBcbiAgICBDaGliaVBhaW50IGlzIENvcHlyaWdodCAoYykgMjAwNi0yMDA4IE1hcmMgU2NoZWZlclxuXG4gICAgQ2hpY2tlblBhaW50IGlzIGZyZWUgc29mdHdhcmU6IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vciBtb2RpZnlcbiAgICBpdCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGFzIHB1Ymxpc2hlZCBieVxuICAgIHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb24sIGVpdGhlciB2ZXJzaW9uIDMgb2YgdGhlIExpY2Vuc2UsIG9yXG4gICAgKGF0IHlvdXIgb3B0aW9uKSBhbnkgbGF0ZXIgdmVyc2lvbi5cblxuICAgIENoaWNrZW5QYWludCBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLFxuICAgIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mXG4gICAgTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiAgU2VlIHRoZVxuICAgIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuXG5cbiAgICBZb3Ugc2hvdWxkIGhhdmUgcmVjZWl2ZWQgYSBjb3B5IG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZVxuICAgIGFsb25nIHdpdGggQ2hpY2tlblBhaW50LiBJZiBub3QsIHNlZSA8aHR0cDovL3d3dy5nbnUub3JnL2xpY2Vuc2VzLz4uXG4qL1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBDUFNob3J0Y3V0c0RpYWxvZyhwYXJlbnQpIHtcbiAgICB2YXJcbiAgICAgICAgZGlhbG9nID0gXG4gICAgICAgICAgICAkKGA8ZGl2IGNsYXNzPVwibW9kYWwgZmFkZSBjaGlja2VucGFpbnQtc2hvcnRjdXRzLWRpYWxvZ1wiIHRhYmluZGV4PVwiLTFcIiByb2xlPVwiZGlhbG9nXCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm1vZGFsLWRpYWxvZyBtb2RhbC1sZ1wiPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibW9kYWwtY29udGVudFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm1vZGFsLWhlYWRlclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiY2xvc2VcIiBkYXRhLWRpc21pc3M9XCJtb2RhbFwiIGFyaWEtbGFiZWw9XCJDbG9zZVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBhcmlhLWhpZGRlbj1cInRydWVcIj4mdGltZXM7PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoNCBjbGFzcz1cIm1vZGFsLXRpdGxlXCI+U2hvcnRjdXRzPC9oND5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm1vZGFsLWJvZHlcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTWFueSBvZiB0aGUgbWVudSBvcHRpb25zIGFuZCBwYWludGluZyB0b29scyBoYXZlIGtleWJvYXJkIHNob3J0Y3V0cyB3aGljaCBhcmVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd3JpdHRlbiBuZXh0IHRvIHRoZW0gb3IgYXBwZWFyIHdoZW4geW91IGhvdmVyLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSGVyZSBhcmUgc29tZSBvdGhlciBzaG9ydGN1dHMgd2hpY2ggYXJlIG5vdCBhcyBvYnZpb3VzIVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY2hpY2tlbnBhaW50LXNob3J0Y3V0cy1zZWN0aW9uc1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY2hpY2tlbnBhaW50LXNob3J0Y3V0cy1zZWN0aW9uXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDU+Q29sb3Igc3dhdGNoZXMgcGFsZXR0ZTwvaDU+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dWwgY2xhc3M9XCJjaGlja2VucGFpbnQtc2hvcnRjdXRzLWxpc3QgbGlzdC11bnN0eWxlZFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRsPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGR0PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiY2hpY2tlbnBhaW50LXNob3J0Y3V0XCI+PHNwYW4gY2xhc3M9XCJmYSBmYS1tb3VzZS1wb2ludGVyXCI+PC9zcGFuPiBMZWZ0PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kdD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBVc2UgYXMgdGhlIGRyYXdpbmcgY29sb3JcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZHQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJjaGlja2VucGFpbnQtc2hvcnRjdXRcIj48c3BhbiBjbGFzcz1cImZhIGZhLW1vdXNlLXBvaW50ZXJcIj48L3NwYW4+IFJpZ2h0PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kdD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZW1vdmUgb3IgcmVwbGFjZSBhIGNvbG9yIHN3YXRjaFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9saT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdWw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY2hpY2tlbnBhaW50LXNob3J0Y3V0cy1zZWN0aW9uXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDU+TGluZSBkcmF3aW5nIG1vZGU8L2g1PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHVsIGNsYXNzPVwiY2hpY2tlbnBhaW50LXNob3J0Y3V0cy1saXN0IGxpc3QtdW5zdHlsZWRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGk+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkbD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkdD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImNoaWNrZW5wYWludC1zaG9ydGN1dFwiPjxzcGFuIGNsYXNzPVwiY2hpY2tlbnBhaW50LXNob3J0Y3V0LWtleVwiPlNoaWZ0PC9zcGFuPiArIDxzcGFuIGNsYXNzPVwiZmEgZmEtbW91c2UtcG9pbnRlclwiPjwvc3Bhbj4gTGVmdDwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZHQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU25hcCBsaW5lIHRvIG5lYXJlc3QgNDUgZGVncmVlc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9saT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdWw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY2hpY2tlbnBhaW50LXNob3J0Y3V0cy1zZWN0aW9uXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDU+UGFpbnRpbmcgdG9vbHM8L2g1PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHVsIGNsYXNzPVwiY2hpY2tlbnBhaW50LXNob3J0Y3V0cy1saXN0IGxpc3QtdW5zdHlsZWRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGk+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkbD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkdD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImNoaWNrZW5wYWludC1zaG9ydGN1dFwiPjxzcGFuIGNsYXNzPVwiY2hpY2tlbnBhaW50LXNob3J0Y3V0LWtleVwiPjE8L3NwYW4+IC0gPHNwYW4gY2xhc3M9XCJjaGlja2VucGFpbnQtc2hvcnRjdXQta2V5XCI+OTwvc3Bhbj4gLCA8c3BhbiBjbGFzcz1cImNoaWNrZW5wYWludC1zaG9ydGN1dC1rZXlcIj4wPC9zcGFuPjwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZHQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ2hhbmdlIGJydXNoIG9wYWNpdHlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZHQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJjaGlja2VucGFpbnQtc2hvcnRjdXRcIj48c3BhbiBjbGFzcz1cImNoaWNrZW5wYWludC1zaG9ydGN1dC1rZXlcIj5bPC9zcGFuPiAsIDxzcGFuIGNsYXNzPVwiY2hpY2tlbnBhaW50LXNob3J0Y3V0LWtleVwiPl08L3NwYW4+PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kdD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDaGFuZ2UgYnJ1c2ggc2l6ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kbD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xpPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC91bD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjaGlja2VucGFpbnQtc2hvcnRjdXRzLXNlY3Rpb25cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoNT5CcnVzaCBwYWxldHRlPC9oNT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx1bCBjbGFzcz1cImNoaWNrZW5wYWludC1zaG9ydGN1dHMtbGlzdCBsaXN0LXVuc3R5bGVkXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZHQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJjaGlja2VucGFpbnQtc2hvcnRjdXRcIj48c3BhbiBjbGFzcz1cImZhIGZhLW1vdXNlLXBvaW50ZXJcIj48L3NwYW4+IFJpZ2h0IGRyYWc8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2R0PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFkanVzdCBicnVzaCBzbGlkZXJzIG1vcmUgcHJlY2lzZWx5XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2RkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2RsPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGk+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3VsPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNoaWNrZW5wYWludC1zaG9ydGN1dHMtc2VjdGlvblwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGg1PkRyYXdpbmcgY2FudmFzPC9oNT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx1bCBjbGFzcz1cImNoaWNrZW5wYWludC1zaG9ydGN1dHMtbGlzdCBsaXN0LXVuc3R5bGVkXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZHQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJjaGlja2VucGFpbnQtc2hvcnRjdXRcIj48c3BhbiBjbGFzcz1cImZhIGZhLW1vdXNlLXBvaW50ZXJcIj48L3NwYW4+IE1pZGRsZTwvc3Bhbj4gPHNwYW4gY2xhc3M9XCJjaGlja2VucGFpbnQtc2hvcnRjdXQtYWx0ZXJuYXRlXCI+b3I8L3NwYW4+IDxzcGFuIGNsYXNzPVwiY2hpY2tlbnBhaW50LXNob3J0Y3V0XCI+PHNwYW4gY2xhc3M9XCJjaGlja2VucGFpbnQtc2hvcnRjdXQta2V5XCI+U3BhY2U8L3NwYW4+ICsgPHNwYW4gY2xhc3M9XCJmYSBmYS1tb3VzZS1wb2ludGVyXCI+PC9zcGFuPiBMZWZ0PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kdD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNb3ZlIHRoZSBjYW52YXMgYXJvdW5kXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2RkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGR0PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiY2hpY2tlbnBhaW50LXNob3J0Y3V0XCI+PHNwYW4gY2xhc3M9XCJjaGlja2VucGFpbnQtc2hvcnRjdXQta2V5XCI+QWx0PC9zcGFuPiArIDxzcGFuIGNsYXNzPVwiZmEgZmEtbW91c2UtcG9pbnRlclwiPjwvc3Bhbj4gTWlkZGxlPC9zcGFuPiA8c3BhbiBjbGFzcz1cImNoaWNrZW5wYWludC1zaG9ydGN1dC1hbHRlcm5hdGVcIj5vcjwvc3Bhbj4gPHNwYW4gY2xhc3M9XCJjaGlja2VucGFpbnQtc2hvcnRjdXRcIj48c3BhbiBjbGFzcz1cImNoaWNrZW5wYWludC1zaG9ydGN1dC1rZXlcIj5BbHQ8L3NwYW4+ICsgPHNwYW4gY2xhc3M9XCJjaGlja2VucGFpbnQtc2hvcnRjdXQta2V5XCI+U3BhY2U8L3NwYW4+ICsgPHNwYW4gY2xhc3M9XCJmYSBmYS1tb3VzZS1wb2ludGVyXCI+PC9zcGFuPiBMZWZ0PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kdD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSb3RhdGUgdGhlIGNhbnZhc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkdD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImNoaWNrZW5wYWludC1zaG9ydGN1dFwiPjxzcGFuIGNsYXNzPVwiZmEgZmEtbW91c2UtcG9pbnRlclwiPjwvc3Bhbj4gUmlnaHQ8L3NwYW4+IDxzcGFuIGNsYXNzPVwiY2hpY2tlbnBhaW50LXNob3J0Y3V0LWFsdGVybmF0ZVwiPm9yPC9zcGFuPiA8c3BhbiBjbGFzcz1cImNoaWNrZW5wYWludC1zaG9ydGN1dFwiPjxzcGFuIGNsYXNzPVwiY2hpY2tlbnBhaW50LXNob3J0Y3V0LWtleVwiPkFsdDwvc3Bhbj4gKyA8c3BhbiBjbGFzcz1cImZhIGZhLW1vdXNlLXBvaW50ZXJcIj48L3NwYW4+IExlZnQ8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2R0PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNhbXBsZSB0aGUgY29sb3IgdW5kZXIgdGhlIGN1cnNvclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9saT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdWw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY2hpY2tlbnBhaW50LXNob3J0Y3V0cy1zZWN0aW9uXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDU+TGF5ZXJzIHBhbGV0dGU8L2g1PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHVsIGNsYXNzPVwiY2hpY2tlbnBhaW50LXNob3J0Y3V0cy1saXN0IGxpc3QtdW5zdHlsZWRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGk+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkbD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkdD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImNoaWNrZW5wYWludC1zaG9ydGN1dFwiPjxzcGFuIGNsYXNzPVwiZmEgZmEtbW91c2UtcG9pbnRlclwiPjwvc3Bhbj4gRG91YmxlIGNsaWNrPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kdD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZW5hbWUgbGF5ZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2RsPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGk+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3VsPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIGApO1xuICAgIFxuICAgIC8vIERlc3Ryb3kgdGhlIG1vZGFsIHVwb24gY2xvc2VcbiAgICBkaWFsb2cub24oXCJoaWRkZW4uYnMubW9kYWxcIiwgZnVuY3Rpb24oZSkge1xuICAgICAgICBkaWFsb2cucmVtb3ZlKCk7XG4gICAgfSk7XG4gICAgXG4gICAgZGlhbG9nLm1vZGFsKHtcbiAgICAgICAgc2hvdzogZmFsc2VcbiAgICB9KTtcbiAgICBcbiAgICAvLyBGaXggdGhlIGJhY2tkcm9wIGxvY2F0aW9uIGluIHRoZSBET00gYnkgcmVwYXJlbnRpbmcgaXQgdG8gdGhlIGNoaWNrZW5wYWludCBjb250YWluZXJcbiAgICBkaWFsb2cuZGF0YShcImJzLm1vZGFsXCIpLiRib2R5ID0gJChwYXJlbnQpO1xuICAgIFxuICAgIHBhcmVudC5hcHBlbmRDaGlsZChkaWFsb2dbMF0pO1xuXG4gICAgdGhpcy5zaG93ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGRpYWxvZy5tb2RhbChcInNob3dcIik7XG4gICAgfTtcbn0iLCIvKlxuICAgIENoaWNrZW5QYWludFxuICAgIFxuICAgIENoaWNrZW5QYWludCBpcyBhIHRyYW5zbGF0aW9uIG9mIENoaWJpUGFpbnQgZnJvbSBKYXZhIHRvIEphdmFTY3JpcHRcbiAgICBieSBOaWNob2xhcyBTaGVybG9jayAvIENoaWNrZW4gU21vb3RoaWUuXG4gICAgXG4gICAgQ2hpYmlQYWludCBpcyBDb3B5cmlnaHQgKGMpIDIwMDYtMjAwOCBNYXJjIFNjaGVmZXJcblxuICAgIENoaWNrZW5QYWludCBpcyBmcmVlIHNvZnR3YXJlOiB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3IgbW9kaWZ5XG4gICAgaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBhcyBwdWJsaXNoZWQgYnlcbiAgICB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uLCBlaXRoZXIgdmVyc2lvbiAzIG9mIHRoZSBMaWNlbnNlLCBvclxuICAgIChhdCB5b3VyIG9wdGlvbikgYW55IGxhdGVyIHZlcnNpb24uXG5cbiAgICBDaGlja2VuUGFpbnQgaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCxcbiAgICBidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZlxuICAgIE1FUkNIQU5UQUJJTElUWSBvciBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS4gIFNlZSB0aGVcbiAgICBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9yZSBkZXRhaWxzLlxuXG4gICAgWW91IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2VcbiAgICBhbG9uZyB3aXRoIENoaWNrZW5QYWludC4gSWYgbm90LCBzZWUgPGh0dHA6Ly93d3cuZ251Lm9yZy9saWNlbnNlcy8+LlxuKi9cblxuLyoqXG4gKiBBIHNpbXBsZSBzbGlkZXIgY29udHJvbC5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gQ1BTbGlkZXIobWluVmFsdWUsIG1heFZhbHVlLCBjZW50ZXJNb2RlLCBleHBNb2RlKSB7XG4gICAgY29uc3RcbiAgICAgICAgUFJFQ0lTRV9EUkFHX1NDQUxFID0gNCxcbiAgICAgICAgRVhQX01PREVfRkFDVE9SID0gMS41O1xuXG4gICAgdmFyIFxuICAgICAgICBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpLFxuICAgICAgICBjYW52YXNDb250ZXh0ID0gY2FudmFzLmdldENvbnRleHQoXCIyZFwiKSxcbiAgICAgICAgXG4gICAgICAgIHZhbHVlUmFuZ2UgPSBtYXhWYWx1ZSAtIG1pblZhbHVlLFxuICAgICAgICBcbiAgICAgICAgZHJhZ05vcm1hbCA9IGZhbHNlLCBkcmFnUHJlY2lzZSA9IGZhbHNlLFxuICAgICAgICBkcmFnUHJlY2lzZVgsXG4gICAgICAgIFxuICAgICAgICBkb25lSW5pdGlhbFBhaW50ID0gZmFsc2UsXG4gICAgICAgIFxuICAgICAgICB0aGF0ID0gdGhpcztcbiAgICBcbiAgICB0aGlzLnZhbHVlID0gdW5kZWZpbmVkO1xuXG4gICAgLyoqXG4gICAgICogRWl0aGVyIGEgc3RyaW5nIHRvIGRyYXcgb24gdGhlIHNsaWRlciwgb3IgYSBmdW5jdGlvbih2YWx1ZSkgd2hpY2ggcmVjZWl2ZXMgdGhlIGN1cnJlbnQgdmFsdWUgb2YgdGhlIHNsaWRlciBhbmRcbiAgICAgKiBzaG91bGQgcmV0dXJuIHRoZSBzdHJpbmcgdG8gYmUgcGFpbnRlZCB0byB0aGUgc2xpZGVyLlxuICAgICAqXG4gICAgICogQG5hbWUgQ1BTbGlkZXIjdGl0bGVcbiAgICAgKiBAZGVmYXVsdCBcIlwiXG4gICAgICovXG4gICAgdGhpcy50aXRsZSA9IFwiXCI7XG4gICAgXG4gICAgY2VudGVyTW9kZSA9IGNlbnRlck1vZGUgfHwgZmFsc2U7XG5cbiAgICBmdW5jdGlvbiBwYWludCgpIHtcbiAgICAgICAgdmFyXG4gICAgICAgICAgICB3aWR0aCA9IGNhbnZhcy53aWR0aCxcbiAgICAgICAgICAgIGhlaWdodCA9IGNhbnZhcy5oZWlnaHQsXG4gICAgICAgICAgICB0aXRsZSA9IHR5cGVvZiB0aGF0LnRpdGxlID09PSBcInN0cmluZ1wiID8gdGhhdC50aXRsZSA6IHRoYXQudGl0bGUodGhhdC52YWx1ZSksXG4gICAgICAgICAgICB0ZXh0WCA9IDIgKiB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyxcbiAgICAgICAgICAgIHRleHRZID0gY2FudmFzLmhlaWdodCAqIDAuNzU7XG5cbiAgICAgICAgaWYgKGNlbnRlck1vZGUpIHtcbiAgICAgICAgICAgIGNhbnZhc0NvbnRleHQuc2F2ZSgpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjYW52YXNDb250ZXh0LmZpbGxTdHlsZSA9ICd3aGl0ZSc7XG5cbiAgICAgICAgICAgIGNhbnZhc0NvbnRleHQuZmlsbFJlY3QoMCwgMCwgd2lkdGgsIGhlaWdodCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNhbnZhc0NvbnRleHQuZmlsbFN0eWxlID0gJ2JsYWNrJztcblxuICAgICAgICAgICAgY2FudmFzQ29udGV4dC5maWxsVGV4dCh0aXRsZSwgdGV4dFgsIHRleHRZKTtcbiAgICAgICAgICAgIGNhbnZhc0NvbnRleHQuYmVnaW5QYXRoKCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmICh0aGF0LnZhbHVlID49IHZhbHVlUmFuZ2UgLyAyKSB7XG4gICAgICAgICAgICAgICAgY2FudmFzQ29udGV4dC5yZWN0KHdpZHRoIC8gMiwgMCwgKHRoYXQudmFsdWUgLSB2YWx1ZVJhbmdlIC8gMikgKiB3aWR0aCAvIHZhbHVlUmFuZ2UsIGhlaWdodCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNhbnZhc0NvbnRleHQucmVjdCh0aGF0LnZhbHVlICogd2lkdGggLyB2YWx1ZVJhbmdlLCAwLCAodmFsdWVSYW5nZSAvIDIgLSB0aGF0LnZhbHVlKSAqIHdpZHRoIC8gdmFsdWVSYW5nZSwgaGVpZ2h0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY2FudmFzQ29udGV4dC5maWxsKCk7XG4gICAgICAgICAgICBjYW52YXNDb250ZXh0LmNsaXAoKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY2FudmFzQ29udGV4dC5maWxsU3R5bGUgPSAnd2hpdGUnO1xuICAgICAgICAgICAgY2FudmFzQ29udGV4dC5maWxsVGV4dCh0aXRsZSwgdGV4dFgsIHRleHRZKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY2FudmFzQ29udGV4dC5yZXN0b3JlKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICBiYXJQcm9wID0gKHRoYXQudmFsdWUgLSBtaW5WYWx1ZSkgLyB2YWx1ZVJhbmdlLFxuICAgICAgICAgICAgICAgIGJhcldpZHRoO1xuXG4gICAgICAgICAgICBpZiAoZXhwTW9kZSkge1xuICAgICAgICAgICAgICAgIGJhclByb3AgPSBNYXRoLnBvdyhiYXJQcm9wLCAxIC8gRVhQX01PREVfRkFDVE9SKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgYmFyV2lkdGggPSBiYXJQcm9wICogd2lkdGg7XG5cbiAgICAgICAgICAgIGNhbnZhc0NvbnRleHQuc2F2ZSgpO1xuICAgICAgICAgICAgY2FudmFzQ29udGV4dC5zYXZlKCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNhbnZhc0NvbnRleHQuZmlsbFN0eWxlID0gJ2JsYWNrJztcblxuICAgICAgICAgICAgY2FudmFzQ29udGV4dC5iZWdpblBhdGgoKTtcbiAgICAgICAgICAgIGNhbnZhc0NvbnRleHQucmVjdCgwLCAwLCBiYXJXaWR0aCwgaGVpZ2h0KTtcbiAgICAgICAgICAgIGNhbnZhc0NvbnRleHQuZmlsbCgpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjYW52YXNDb250ZXh0LmNsaXAoKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY2FudmFzQ29udGV4dC5maWxsU3R5bGUgPSAnd2hpdGUnO1xuICAgICAgICAgICAgY2FudmFzQ29udGV4dC5maWxsVGV4dCh0aXRsZSwgdGV4dFgsIHRleHRZKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gUmVtb3ZlIHRoZSBjbGlwIHJlZ2lvblxuICAgICAgICAgICAgY2FudmFzQ29udGV4dC5yZXN0b3JlKCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNhbnZhc0NvbnRleHQuZmlsbFN0eWxlID0gJ3doaXRlJztcblxuICAgICAgICAgICAgY2FudmFzQ29udGV4dC5iZWdpblBhdGgoKTtcbiAgICAgICAgICAgIGNhbnZhc0NvbnRleHQucmVjdChiYXJXaWR0aCwgMCwgd2lkdGgsIGhlaWdodCk7XG4gICAgICAgICAgICBjYW52YXNDb250ZXh0LmZpbGwoKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY2FudmFzQ29udGV4dC5jbGlwKCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNhbnZhc0NvbnRleHQuZmlsbFN0eWxlID0gJ2JsYWNrJztcbiAgICAgICAgICAgIGNhbnZhc0NvbnRleHQuZmlsbFRleHQodGl0bGUsIHRleHRYLCB0ZXh0WSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNhbnZhc0NvbnRleHQucmVzdG9yZSgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbW91c2VTZWxlY3QoZSkge1xuICAgICAgICB2YXIgXG4gICAgICAgICAgICB3aWR0aCA9ICQoY2FudmFzKS53aWR0aCgpLFxuICAgICAgICAgICAgbGVmdCA9ICQoY2FudmFzKS5vZmZzZXQoKS5sZWZ0LFxuXG4gICAgICAgICAgICBwcm9wb3J0aW9uID0gKGUucGFnZVggLSBsZWZ0KSAvIHdpZHRoO1xuXG4gICAgICAgIGlmIChleHBNb2RlKSB7XG4gICAgICAgICAgICAvLyBHaXZlIHRoZSB1c2VyIGZpbmVyIGNvbnRyb2wgb3ZlciB0aGUgbG93IHZhbHVlc1xuICAgICAgICAgICAgcHJvcG9ydGlvbiA9IE1hdGgucG93KE1hdGgubWF4KHByb3BvcnRpb24sIDAuMCksIEVYUF9NT0RFX0ZBQ1RPUik7XG4gICAgICAgIH1cblxuICAgICAgICB0aGF0LnNldFZhbHVlKHByb3BvcnRpb24gKiB2YWx1ZVJhbmdlICsgbWluVmFsdWUpO1xuICAgIH1cbiAgICAgICAgXG4gICAgZnVuY3Rpb24gbW91c2VEcmFnZ2VkKGUpIHtcbiAgICAgICAgaWYgKGRyYWdOb3JtYWwpIHtcbiAgICAgICAgICAgIG1vdXNlU2VsZWN0KGUpO1xuICAgICAgICB9IGVsc2UgaWYgKGRyYWdQcmVjaXNlKSB7XG4gICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICBkaWZmID0gKGUucGFnZVggLSBkcmFnUHJlY2lzZVgpIC8gUFJFQ0lTRV9EUkFHX1NDQUxFO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoZGlmZiAhPSAwKSB7XG4gICAgICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgICAgIHVucm91bmRlZCA9IHRoYXQudmFsdWUgKyBkaWZmLFxuICAgICAgICAgICAgICAgICAgICByb3VuZGVkID0gdW5yb3VuZGVkIHwgMDtcblxuICAgICAgICAgICAgICAgIHRoYXQuc2V0VmFsdWUocm91bmRlZCk7XG5cbiAgICAgICAgICAgICAgICAvKiBUd2VhayB0aGUgXCJvbGQgbW91c2VYXCIgcG9zaXRpb24gc3VjaCB0aGF0IHRoZSBmcmFjdGlvbmFsIHBhcnQgb2YgdGhlIHZhbHVlIHdlIHdlcmUgdW5hYmxlIHRvIHNldFxuICAgICAgICAgICAgICAgICAqIHdpbGwgYmUgYWNjdW11bGF0ZWRcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBkcmFnUHJlY2lzZVggPSBlLnBhZ2VYIC0gKHVucm91bmRlZCAtIHJvdW5kZWQpICogUFJFQ0lTRV9EUkFHX1NDQUxFO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbW91c2VVcChlKSB7XG4gICAgICAgIGlmIChkcmFnTm9ybWFsICYmIGUuYnV0dG9uID09IDApIHtcbiAgICAgICAgICAgIGRyYWdOb3JtYWwgPSBmYWxzZTtcbiAgICAgICAgfSBlbHNlIGlmIChkcmFnUHJlY2lzZSAmJiBlLmJ1dHRvbiA9PSAyKSB7XG4gICAgICAgICAgICBkcmFnUHJlY2lzZSA9IGZhbHNlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgY2FudmFzLnJlbGVhc2VQb2ludGVyQ2FwdHVyZShlLnBvaW50ZXJJZCk7XG4gICAgICAgIGNhbnZhcy5yZW1vdmVFdmVudExpc3RlbmVyKFwicG9pbnRlcnVwXCIsIG1vdXNlVXApO1xuICAgICAgICBjYW52YXMucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInBvaW50ZXJtb3ZlXCIsIG1vdXNlRHJhZ2dlZCk7XG4gICAgfVxuICAgIFxuICAgIHRoaXMuc2V0VmFsdWUgPSBmdW5jdGlvbihfdmFsdWUpIHtcbiAgICAgICAgX3ZhbHVlID0gfn5NYXRoLm1heChtaW5WYWx1ZSwgTWF0aC5taW4obWF4VmFsdWUsIF92YWx1ZSkpO1xuICAgICAgICBcbiAgICAgICAgaWYgKHRoaXMudmFsdWUgIT0gX3ZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzLnZhbHVlID0gX3ZhbHVlO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBUaGUgZXZlbnQgbGlzdGVuZXJzIG1pZ2h0IGxpa2UgdG8gdXBkYXRlIG91ciB0aXRsZSBwcm9wZXJ0eSBhdCB0aGlzIHBvaW50IHRvIHJlZmxlY3QgdGhlIG5ldyB2YWx1ZVxuICAgICAgICAgICAgdGhpcy5lbWl0RXZlbnQoJ3ZhbHVlQ2hhbmdlJywgW3RoaXMudmFsdWVdKTtcbiAgICAgICAgXG4gICAgICAgICAgICBpZiAoZG9uZUluaXRpYWxQYWludCkge1xuICAgICAgICAgICAgICAgIHBhaW50KCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIFdlIGRvbid0IGJvdGhlciB0byBkbyBvdXIgY2FudmFzIGRpbWVuc2lvbmluZyB1bnRpbCB3ZSdyZSBzdXBwbGllZCB3aXRoIGFuIGluaXRpYWwgdmFsdWVcbiAgICAgICAgICAgICAgICBkb25lSW5pdGlhbFBhaW50ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB0aGlzLnJlc2l6ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICBcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIERPTSBlbGVtZW50IGZvciB0aGUgc2xpZGVyIGNvbXBvbmVudC5cbiAgICAgKi9cbiAgICB0aGlzLmdldEVsZW1lbnQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIGNhbnZhcztcbiAgICB9O1xuICAgIFxuICAgIHRoaXMucmVzaXplID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGNhbnZhcy53aWR0aCA9ICQoY2FudmFzKS53aWR0aCgpIHx8IDE1MDtcbiAgICAgICAgY2FudmFzLmhlaWdodCA9ICQoY2FudmFzKS5oZWlnaHQoKSB8fCAyMDtcbiAgICAgICAgXG4gICAgICAgIGlmICh3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyA+IDEpIHtcbiAgICAgICAgICAgIC8vIEFzc3VtZSBvdXIgd2lkdGggaXMgc2V0IHRvIDEwMCUgb3Igc2ltaWxhciwgc28gd2Ugb25seSBuZWVkIHRvIHRoZSBmaXggdGhlIGhlaWdodFxuICAgICAgICAgICAgY2FudmFzLnN0eWxlLmhlaWdodCA9IGNhbnZhcy5oZWlnaHQgKyAncHgnO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjYW52YXMud2lkdGggPSBjYW52YXMud2lkdGggKiB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbztcbiAgICAgICAgICAgIGNhbnZhcy5oZWlnaHQgPSBjYW52YXMuaGVpZ2h0ICogd2luZG93LmRldmljZVBpeGVsUmF0aW87XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGNhbnZhc0NvbnRleHQuZm9udCA9IChjYW52YXMuaGVpZ2h0ICogMC40NykgKyAncHQgc2Fucy1zZXJpZic7XG4gICAgICAgIFxuICAgICAgICBwYWludCgpO1xuICAgIH07XG4gICAgXG4gICAgY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoXCJwb2ludGVyZG93blwiLCBmdW5jdGlvbihlKSB7XG4gICAgICAgIHZhclxuICAgICAgICAgICAgZHJhZ2dpbmcgPSBkcmFnTm9ybWFsIHx8IGRyYWdQcmVjaXNlO1xuICAgICAgICBcbiAgICAgICAgaWYgKCFkcmFnZ2luZykge1xuICAgICAgICAgICAgY2FudmFzLnNldFBvaW50ZXJDYXB0dXJlKGUucG9pbnRlcklkKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgc3dpdGNoIChlLmJ1dHRvbikge1xuICAgICAgICAgICAgICAgIGNhc2UgMDogLy8gTGVmdFxuICAgICAgICAgICAgICAgICAgICBkcmFnTm9ybWFsID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgbW91c2VTZWxlY3QoZSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAyOiAvLyBSaWdodFxuICAgICAgICAgICAgICAgICAgICBkcmFnUHJlY2lzZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGRyYWdQcmVjaXNlWCA9IGUucGFnZVg7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBjYW52YXMuYWRkRXZlbnRMaXN0ZW5lcihcInBvaW50ZXJ1cFwiLCBtb3VzZVVwKTtcbiAgICAgICAgICAgIGNhbnZhcy5hZGRFdmVudExpc3RlbmVyKFwicG9pbnRlcm1vdmVcIiwgbW91c2VEcmFnZ2VkKTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIFxuICAgIGNhbnZhcy5hZGRFdmVudExpc3RlbmVyKFwiY29udGV4dG1lbnVcIiwgZnVuY3Rpb24oZSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KClcbiAgICB9KTtcblxuICAgIGNhbnZhcy5zZXRBdHRyaWJ1dGUoXCJ0b3VjaC1hY3Rpb25cIiwgXCJub25lXCIpO1xuXG4gICAgY2FudmFzLmNsYXNzTmFtZSA9ICdjaGlja2VucGFpbnQtc2xpZGVyJztcbiAgICBcbiAgICBpZiAoIXdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvKSB7XG4gICAgICAgIC8vIE9sZCBicm93c2Vyc1xuICAgICAgICB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyA9IDEuMDtcbiAgICB9XG59XG5cbkNQU2xpZGVyLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoRXZlbnRFbWl0dGVyLnByb3RvdHlwZSk7XG5DUFNsaWRlci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBDUFNsaWRlcjtcbiIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIENQU3BsYXNoU2NyZWVuKHVpUGFyZW50LCBsb2FkZXIsIHJlc291cmNlc1Jvb3QpIHtcbiAgICBjb25zdFxuICAgICAgICBNQVhfU01PT1RISUVfT0ZGU0VUID0gMTcwO1xuXG4gICAgdmFyXG4gICAgICAgIGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIiksXG4gICAgICAgIGNhbnZhc0NvbnRleHQgPSBjYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpLFxuXG4gICAgICAgIGN1cCA9IG5ldyBJbWFnZSgpLFxuICAgICAgICBsaWQgPSBuZXcgSW1hZ2UoKSxcbiAgICAgICAgb3V0bGluZXMgPSBuZXcgSW1hZ2UoKSxcbiAgICAgICAgdGV4dCA9IG5ldyBJbWFnZSgpLFxuXG4gICAgICAgIHNoYWRpbmcgPSBuZXcgSW1hZ2UoKSxcbiAgICAgICAgaGlnaGxpZ2h0cyA9IG5ldyBJbWFnZSgpLFxuICAgICAgICBzbW9vdGhpZSA9IG5ldyBJbWFnZSgpLFxuXG4gICAgICAgIGltYWdlcyA9IFtjdXAsIGxpZCwgb3V0bGluZXMsIHRleHQsIHNoYWRpbmcsIGhpZ2hsaWdodHMsIHNtb290aGllXSxcbiAgICAgICAgbG9hZGVkQ291bnQgPSAwLFxuXG4gICAgICAgIGN1cENvbXBvc2l0ZSwgc21vb3RoaWVDb21wb3NpdGUsXG4gICAgICAgIGN1cENvbXBvc2l0ZUNvbnRleHQsIHNtb290aGllQ29tcG9zaXRlQ29udGV4dCxcblxuICAgICAgICBwcm9ncmVzcyA9IDAuMCxcbiAgICAgICAgbWVzc2FnZSA9IFwiXCIsXG5cbiAgICAgICAgZm9udEhlaWdodCA9IDE0O1xuXG4gICAgdmFyIGltYWdlUm9vdCA9IHJlc291cmNlc1Jvb3QgKyBcInNwbGFzaC9cIjtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaW1hZ2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGltYWdlc1tpXS5vbmxvYWQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGxvYWRlZENvdW50Kys7XG5cbiAgICAgICAgICAgIGlmIChsb2FkZWRDb3VudCA9PSBpbWFnZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgcmVwYWludCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgY3VwLnNyYyA9IGltYWdlUm9vdCArIFwiY3VwLnBuZ1wiO1xuICAgIGhpZ2hsaWdodHMuc3JjID0gaW1hZ2VSb290ICsgXCJoaWdobGlnaHRzLnBuZ1wiO1xuICAgIGxpZC5zcmMgPSBpbWFnZVJvb3QgKyBcImxpZC5wbmdcIjtcbiAgICBvdXRsaW5lcy5zcmMgPSBpbWFnZVJvb3QgKyBcImxpbmVzLnBuZ1wiO1xuICAgIHNoYWRpbmcuc3JjID0gaW1hZ2VSb290ICsgXCJzaGFkaW5nLnBuZ1wiO1xuICAgIHNtb290aGllLnNyYyA9IGltYWdlUm9vdCArIFwic21vb3RoaWUucG5nXCI7XG4gICAgdGV4dC5zcmMgPSBpbWFnZVJvb3QgKyBcInRleHQucG5nXCI7XG5cbiAgICBmdW5jdGlvbiBidWlsZFNtb290aGllQ29tcG9zaXRlKGltZ1dpZHRoLCBpbWdIZWlnaHQsIHByb2dyZXNzKSB7XG4gICAgICAgIGlmICghc21vb3RoaWVDb21wb3NpdGUpIHtcbiAgICAgICAgICAgIHNtb290aGllQ29tcG9zaXRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKTtcblxuICAgICAgICAgICAgc21vb3RoaWVDb21wb3NpdGUud2lkdGggPSBpbWdXaWR0aDtcbiAgICAgICAgICAgIHNtb290aGllQ29tcG9zaXRlLmhlaWdodCA9IGltZ0hlaWdodDtcblxuICAgICAgICAgICAgc21vb3RoaWVDb21wb3NpdGVDb250ZXh0ID0gc21vb3RoaWVDb21wb3NpdGUuZ2V0Q29udGV4dChcIjJkXCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gRmlyc3QgZHJhdyB0aGUgc21vb3RoaWUgaW4gaXRzIG1hc2sgcG9zaXRpb246XG4gICAgICAgIHNtb290aGllQ29tcG9zaXRlQ29udGV4dC5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb24gPSBcImNvcHlcIjtcbiAgICAgICAgc21vb3RoaWVDb21wb3NpdGVDb250ZXh0LmRyYXdJbWFnZShzbW9vdGhpZSwgMCwgMCk7XG5cbiAgICAgICAgLy8gTm93IHNoaWZ0IHRoZSBzbW9vdGhpZSBkb3dud2FyZHMgYW5kIHVzZSB0aGUgb3JpZ2luYWwgcG9zaXRpb24gYXMgYSBtYXNrXG4gICAgICAgIHNtb290aGllQ29tcG9zaXRlQ29udGV4dC5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb24gPSBcInNvdXJjZS1pblwiO1xuICAgICAgICBzbW9vdGhpZUNvbXBvc2l0ZUNvbnRleHQuZHJhd0ltYWdlKHNtb290aGllLCAwLCBNYXRoLnJvdW5kKHByb2dyZXNzICogTUFYX1NNT09USElFX09GRlNFVCkpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGJ1aWxkQ3VwQ29tcG9zaXRlKGltZ1dpZHRoLCBpbWdIZWlnaHQsIHByb2dyZXNzKSB7XG4gICAgICAgIGlmICghY3VwQ29tcG9zaXRlKSB7XG4gICAgICAgICAgICBjdXBDb21wb3NpdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpO1xuXG4gICAgICAgICAgICBjdXBDb21wb3NpdGUud2lkdGggPSBpbWdXaWR0aDtcbiAgICAgICAgICAgIGN1cENvbXBvc2l0ZS5oZWlnaHQgPSBpbWdIZWlnaHQ7XG5cbiAgICAgICAgICAgIGN1cENvbXBvc2l0ZUNvbnRleHQgPSBjdXBDb21wb3NpdGUuZ2V0Q29udGV4dChcIjJkXCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgY3VwQ29tcG9zaXRlQ29udGV4dC5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb24gPSBcImNvcHlcIjtcbiAgICAgICAgY3VwQ29tcG9zaXRlQ29udGV4dC5kcmF3SW1hZ2UoY3VwLCAwLCAwKTtcblxuICAgICAgICBidWlsZFNtb290aGllQ29tcG9zaXRlKGltZ1dpZHRoLCBpbWdIZWlnaHQsIHByb2dyZXNzKTtcblxuICAgICAgICBjdXBDb21wb3NpdGVDb250ZXh0Lmdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbiA9IFwic291cmNlLW92ZXJcIjtcbiAgICAgICAgY3VwQ29tcG9zaXRlQ29udGV4dC5kcmF3SW1hZ2Uoc21vb3RoaWVDb21wb3NpdGUsIDAsIDApO1xuXG4gICAgICAgIGN1cENvbXBvc2l0ZUNvbnRleHQuZHJhd0ltYWdlKGxpZCwgMCwgMCk7XG5cbiAgICAgICAgY3VwQ29tcG9zaXRlQ29udGV4dC5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb24gPSBcInNjcmVlblwiO1xuICAgICAgICBjdXBDb21wb3NpdGVDb250ZXh0LmRyYXdJbWFnZShoaWdobGlnaHRzLCAwLCAwKTtcblxuICAgICAgICBjdXBDb21wb3NpdGVDb250ZXh0Lmdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbiA9IFwibXVsdGlwbHlcIjtcbiAgICAgICAgY3VwQ29tcG9zaXRlQ29udGV4dC5kcmF3SW1hZ2Uoc2hhZGluZywgMCwgMCk7XG5cbiAgICAgICAgcmV0dXJuIGN1cENvbXBvc2l0ZTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiByZXBhaW50KCkge1xuICAgICAgICB2YXJcbiAgICAgICAgICAgIGNlbnRlclggPSBjYW52YXMud2lkdGggLyAyLFxuICAgICAgICAgICAgY2VudGVyWSA9IGNhbnZhcy5oZWlnaHQgLyAyO1xuXG4gICAgICAgIGNhbnZhc0NvbnRleHQuZmlsbFN0eWxlID0gJ3doaXRlJztcbiAgICAgICAgY2FudmFzQ29udGV4dC5maWxsUmVjdCgwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpO1xuXG4gICAgICAgIGlmIChsb2FkZWRDb3VudCA9PSBpbWFnZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICBpbWdXaWR0aCA9IHRleHQud2lkdGgsXG4gICAgICAgICAgICAgICAgaW1nSGVpZ2h0ID0gdGV4dC5oZWlnaHQsXG4gICAgICAgICAgICAgICAgbGVmdCA9IE1hdGgucm91bmQoY2VudGVyWCAtIGltZ1dpZHRoIC8gMiksXG4gICAgICAgICAgICAgICAgdG9wID0gTWF0aC5yb3VuZChjZW50ZXJZIC0gaW1nSGVpZ2h0IC8gMik7XG5cbiAgICAgICAgICAgIGNhbnZhc0NvbnRleHQuZHJhd0ltYWdlKHRleHQsIGxlZnQsIHRvcCk7XG5cbiAgICAgICAgICAgIGJ1aWxkQ3VwQ29tcG9zaXRlKGltZ1dpZHRoLCBpbWdIZWlnaHQsIHByb2dyZXNzKTtcblxuICAgICAgICAgICAgLy9UaGUgd2hvbGUgY3VwIGNvbXBvc2l0ZSBpcyBzbGlnaHRseSB0cmFuc3BhcmVudFxuICAgICAgICAgICAgY2FudmFzQ29udGV4dC5nbG9iYWxBbHBoYSA9IDAuODg7XG4gICAgICAgICAgICBjYW52YXNDb250ZXh0LmRyYXdJbWFnZShjdXBDb21wb3NpdGUsIGxlZnQsIHRvcCk7XG5cbiAgICAgICAgICAgIGNhbnZhc0NvbnRleHQuZ2xvYmFsQWxwaGEgPSAxLjA7XG5cbiAgICAgICAgICAgIGNhbnZhc0NvbnRleHQuZHJhd0ltYWdlKG91dGxpbmVzLCBsZWZ0LCB0b3ApO1xuXG4gICAgICAgICAgICBjZW50ZXJZID0gTWF0aC5yb3VuZChjZW50ZXJZICsgaW1nSGVpZ2h0IC8gMiArIDIpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG1lc3NhZ2UgIT0gXCJcIikge1xuICAgICAgICAgICAgY2FudmFzQ29udGV4dC5maWxsU3R5bGUgPSBcImJsYWNrXCI7XG5cbiAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgIGxpbmVzID0gbWVzc2FnZS5zcGxpdChcIlxcblwiKTtcblxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsaW5lcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgICAgICBsaW5lID0gbGluZXNbaV0sXG4gICAgICAgICAgICAgICAgICAgIGxpbmVXaWR0aCA9IGNhbnZhc0NvbnRleHQubWVhc3VyZVRleHQobGluZSkud2lkdGg7XG5cbiAgICAgICAgICAgICAgICBjZW50ZXJZICs9IGZvbnRIZWlnaHQgKiAyO1xuXG4gICAgICAgICAgICAgICAgY2FudmFzQ29udGV4dC5maWxsVGV4dChsaW5lLCBjZW50ZXJYIC0gbGluZVdpZHRoIC8gMiwgY2VudGVyWSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiByZXNpemUoKSB7XG4gICAgICAgIC8vIFVzZSB0aGUgY2FudmFzIGRpbWVuc2lvbnMgc2V0IGJ5IHRoZSBDU1Mgc3R5bGVzXG4gICAgICAgIGNhbnZhcy53aWR0aCA9IGNhbnZhcy5jbGllbnRXaWR0aDtcbiAgICAgICAgY2FudmFzLmhlaWdodCA9IGNhbnZhcy5jbGllbnRIZWlnaHQ7XG5cbiAgICAgICAgY2FudmFzQ29udGV4dC5mb250ID0gZm9udEhlaWdodCArIFwicHQgc2Fucy1zZXJpZlwiO1xuXG4gICAgICAgIHJlcGFpbnQoKTtcbiAgICB9XG5cbiAgICBsb2FkZXIub24oXCJsb2FkaW5nUHJvZ3Jlc3NcIiwgZnVuY3Rpb24oX3Byb2dyZXNzLCBfbWVzc2FnZSkge1xuICAgICAgICBwcm9ncmVzcyA9IF9wcm9ncmVzcztcbiAgICAgICAgbWVzc2FnZSA9IF9tZXNzYWdlO1xuXG4gICAgICAgIHJlcGFpbnQoKTtcbiAgICB9KTtcblxuICAgIGxvYWRlci5vbihcImxvYWRpbmdGYWlsdXJlXCIsIGZ1bmN0aW9uKF9tZXNzYWdlKSB7XG4gICAgICAgIHByb2dyZXNzID0gMDtcbiAgICAgICAgbWVzc2FnZSA9IF9tZXNzYWdlO1xuXG4gICAgICAgIHJlcGFpbnQoKTtcbiAgICB9KTtcblxuICAgIGxvYWRlci5vbihcImxvYWRpbmdDb21wbGV0ZVwiLCBmdW5jdGlvbigpIHtcbiAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIiwgcmVzaXplKTtcbiAgICAgICAgdWlQYXJlbnQucmVtb3ZlQ2hpbGQoY2FudmFzKTtcbiAgICB9KTtcblxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicmVzaXplXCIsIHJlc2l6ZSk7XG5cbiAgICBjYW52YXMuY2xhc3NOYW1lID0gXCJjaGlja2VucGFpbnQtc3BsYXNoLXNjcmVlblwiO1xuXG4gICAgdWlQYXJlbnQuYXBwZW5kQ2hpbGQoY2FudmFzKTtcblxuICAgIHJlc2l6ZSgpO1xufVxuIiwiLypcbiAgICBDaGlja2VuUGFpbnRcbiAgICBcbiAgICBDaGlja2VuUGFpbnQgaXMgYSB0cmFuc2xhdGlvbiBvZiBDaGliaVBhaW50IGZyb20gSmF2YSB0byBKYXZhU2NyaXB0XG4gICAgYnkgTmljaG9sYXMgU2hlcmxvY2sgLyBDaGlja2VuIFNtb290aGllLlxuICAgIFxuICAgIENoaWJpUGFpbnQgaXMgQ29weXJpZ2h0IChjKSAyMDA2LTIwMDggTWFyYyBTY2hlZmVyXG5cbiAgICBDaGlja2VuUGFpbnQgaXMgZnJlZSBzb2Z0d2FyZTogeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yIG1vZGlmeVxuICAgIGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgYXMgcHVibGlzaGVkIGJ5XG4gICAgdGhlIEZyZWUgU29mdHdhcmUgRm91bmRhdGlvbiwgZWl0aGVyIHZlcnNpb24gMyBvZiB0aGUgTGljZW5zZSwgb3JcbiAgICAoYXQgeW91ciBvcHRpb24pIGFueSBsYXRlciB2ZXJzaW9uLlxuXG4gICAgQ2hpY2tlblBhaW50IGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsXG4gICAgYnV0IFdJVEhPVVQgQU5ZIFdBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2ZcbiAgICBNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuICBTZWUgdGhlXG4gICAgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy5cblxuICAgIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXG4gICAgYWxvbmcgd2l0aCBDaGlja2VuUGFpbnQuIElmIG5vdCwgc2VlIDxodHRwOi8vd3d3LmdudS5vcmcvbGljZW5zZXMvPi5cbiovXG5cbmltcG9ydCBDUFBhbGV0dGUgZnJvbSAnLi9DUFBhbGV0dGUnO1xuXG5pbXBvcnQgQ1BCcnVzaEluZm8gZnJvbSAnLi4vZW5naW5lL0NQQnJ1c2hJbmZvJztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gQ1BTdHJva2VQYWxldHRlKGNwQ29udHJvbGxlcikge1xuICAgIENQUGFsZXR0ZS5jYWxsKHRoaXMsIGNwQ29udHJvbGxlciwgXCJzdHJva2VcIiwgXCJTdHJva2VcIik7XG4gICAgXG4gICAgdmFyIFxuICAgICAgICB0aGF0ID0gdGhpcyxcblxuICAgICAgICBidXR0b25zID0gW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJjaGlja2VucGFpbnQtdG9vbC1mcmVlaGFuZFwiLFxuICAgICAgICAgICAgICAgIGNvbW1hbmQ6IFwiQ1BGcmVlSGFuZFwiLFxuICAgICAgICAgICAgICAgIHRvb2xUaXA6IFwiRnJlZS1oYW5kXCIsXG4gICAgICAgICAgICAgICAgc2VsZWN0ZWQ6IHRydWVcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBcImNoaWNrZW5wYWludC10b29sLWxpbmVcIixcbiAgICAgICAgICAgICAgICBjb21tYW5kOiBcIkNQTGluZVwiLFxuICAgICAgICAgICAgICAgIHRvb2xUaXA6IFwiU3RyYWlnaHQgbGluZVwiXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJjaGlja2VucGFpbnQtdG9vbC1iZXppZXJcIixcbiAgICAgICAgICAgICAgICBjb21tYW5kOiBcIkNQQmV6aWVyXCIsXG4gICAgICAgICAgICAgICAgdG9vbFRpcDogXCJCZXppZXIgY3VydmVcIlxuICAgICAgICAgICAgfVxuICAgICAgICBdLFxuXG4gICAgICAgIGJvZHkgPSB0aGF0LmdldEJvZHlFbGVtZW50KCk7XG5cbiAgICBmdW5jdGlvbiBidWlsZEJ1dHRvbnMoKSB7XG4gICAgICAgIHZhclxuICAgICAgICAgICAgbGlzdEVsZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidWxcIik7XG4gICAgICAgIFxuICAgICAgICBsaXN0RWxlbS5jbGFzc05hbWUgPSBcImNoaWNrZW5wYWludC1zdHJva2UtdG9vbHMgbGlzdC11bnN0eWxlZFwiO1xuICAgICAgICBcbiAgICAgICAgZm9yICh2YXIgaSBpbiBidXR0b25zKSB7XG4gICAgICAgICAgICB2YXIgXG4gICAgICAgICAgICAgICAgYnV0dG9uID0gYnV0dG9uc1tpXSxcbiAgICAgICAgICAgICAgICBidXR0b25FbGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxpXCIpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBidXR0b25FbGVtLmNsYXNzTmFtZSA9IFwiY2hpY2tlbnBhaW50LXRvb2xiYXItYnV0dG9uIFwiICsgYnV0dG9uLmNsYXNzTmFtZTtcbiAgICAgICAgICAgIGJ1dHRvbkVsZW0uc2V0QXR0cmlidXRlKFwiZGF0YS1idXR0b25JbmRleFwiLCBpKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKGJ1dHRvbi5zZWxlY3RlZCkge1xuICAgICAgICAgICAgICAgIGJ1dHRvbkVsZW0uY2xhc3NOYW1lID0gYnV0dG9uRWxlbS5jbGFzc05hbWUgKyBcIiBzZWxlY3RlZFwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBsaXN0RWxlbS5hcHBlbmRDaGlsZChidXR0b25FbGVtKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgbGlzdEVsZW0uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgIGlmIChlLnRhcmdldCAmJiBlLnRhcmdldC5ub2RlTmFtZSA9PSBcIkxJXCIpIHtcbiAgICAgICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICAgICAgYnV0dG9uID0gYnV0dG9uc1twYXJzZUludChlLnRhcmdldC5nZXRBdHRyaWJ1dGUoXCJkYXRhLWJ1dHRvbkluZGV4XCIpLCAxMCldO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICQoXCJsaVwiLCBsaXN0RWxlbSkucmVtb3ZlQ2xhc3MoXCJzZWxlY3RlZFwiKTtcbiAgICAgICAgICAgICAgICAkKGUudGFyZ2V0KS5hZGRDbGFzcyhcInNlbGVjdGVkXCIpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGNwQ29udHJvbGxlci5hY3Rpb25QZXJmb3JtZWQoe2FjdGlvbjogYnV0dG9uLmNvbW1hbmR9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICBib2R5LmFwcGVuZENoaWxkKGxpc3RFbGVtKTtcbiAgICB9XG4gICAgXG4gICAgYnVpbGRCdXR0b25zKCk7XG4gICAgXG4gICAgY3BDb250cm9sbGVyLm9uKFwidG9vbENoYW5nZVwiLCBmdW5jdGlvbih0b29sLCB0b29sSW5mbykge1xuICAgICAgICAkKFwiLmNoaWNrZW5wYWludC10b29sLWZyZWVoYW5kXCIsIGJvZHkpLnRvZ2dsZUNsYXNzKFwic2VsZWN0ZWRcIiwgdG9vbEluZm8uc3Ryb2tlTW9kZSA9PSBDUEJydXNoSW5mby5TTV9GUkVFSEFORCk7XG4gICAgICAgICQoXCIuY2hpY2tlbnBhaW50LXRvb2wtbGluZVwiLCBib2R5KS50b2dnbGVDbGFzcyhcInNlbGVjdGVkXCIsIHRvb2xJbmZvLnN0cm9rZU1vZGUgPT0gQ1BCcnVzaEluZm8uU01fTElORSk7XG4gICAgICAgICQoXCIuY2hpY2tlbnBhaW50LXRvb2wtYmV6aWVyXCIsIGJvZHkpLnRvZ2dsZUNsYXNzKFwic2VsZWN0ZWRcIiwgdG9vbEluZm8uc3Ryb2tlTW9kZSA9PSBDUEJydXNoSW5mby5TTV9CRVpJRVIpO1xuICAgIH0pO1xufVxuXG5DUFN0cm9rZVBhbGV0dGUucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShDUFBhbGV0dGUucHJvdG90eXBlKTtcbkNQU3Ryb2tlUGFsZXR0ZS5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBDUFN0cm9rZVBhbGV0dGU7XG4iLCIvKlxuICAgIENoaWNrZW5QYWludFxuICAgIFxuICAgIENoaWNrZW5QYWludCBpcyBhIHRyYW5zbGF0aW9uIG9mIENoaWJpUGFpbnQgZnJvbSBKYXZhIHRvIEphdmFTY3JpcHRcbiAgICBieSBOaWNob2xhcyBTaGVybG9jayAvIENoaWNrZW4gU21vb3RoaWUuXG4gICAgXG4gICAgQ2hpYmlQYWludCBpcyBDb3B5cmlnaHQgKGMpIDIwMDYtMjAwOCBNYXJjIFNjaGVmZXJcblxuICAgIENoaWNrZW5QYWludCBpcyBmcmVlIHNvZnR3YXJlOiB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3IgbW9kaWZ5XG4gICAgaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBhcyBwdWJsaXNoZWQgYnlcbiAgICB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uLCBlaXRoZXIgdmVyc2lvbiAzIG9mIHRoZSBMaWNlbnNlLCBvclxuICAgIChhdCB5b3VyIG9wdGlvbikgYW55IGxhdGVyIHZlcnNpb24uXG5cbiAgICBDaGlja2VuUGFpbnQgaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCxcbiAgICBidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZlxuICAgIE1FUkNIQU5UQUJJTElUWSBvciBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS4gIFNlZSB0aGVcbiAgICBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9yZSBkZXRhaWxzLlxuXG4gICAgWW91IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2VcbiAgICBhbG9uZyB3aXRoIENoaWNrZW5QYWludC4gSWYgbm90LCBzZWUgPGh0dHA6Ly93d3cuZ251Lm9yZy9saWNlbnNlcy8+LlxuKi9cblxuaW1wb3J0IENQUGFsZXR0ZSBmcm9tICcuL0NQUGFsZXR0ZSc7XG5cbmltcG9ydCBDUENvbG9yIGZyb20gJy4uL3V0aWwvQ1BDb2xvcic7XG5pbXBvcnQgQWRvYmVDb2xvclRhYmxlIGZyb20gJy4uL3V0aWwvQWRvYmVDb2xvclRhYmxlJztcblxuZnVuY3Rpb24gcGFkTGVmdChzdHJpbmcsIHBhZGRpbmcsIGxlbikge1xuICAgIHdoaWxlIChzdHJpbmcubGVuZ3RoIDwgbGVuKSB7XG4gICAgICAgIHN0cmluZyA9IHBhZGRpbmcgKyBzdHJpbmc7XG4gICAgfVxuICAgIHJldHVybiBzdHJpbmc7XG59XG5cbmZ1bmN0aW9uIHdyYXBXaXRoRWxlbShlLCB3cmFwV2l0aE5hbWUpIHtcbiAgICB2YXJcbiAgICAgICAgcGFyZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh3cmFwV2l0aE5hbWUpO1xuICAgIFxuICAgIHBhcmVudC5hcHBlbmRDaGlsZChlKTtcbiAgICBcbiAgICByZXR1cm4gcGFyZW50O1xufVxuXG5mdW5jdGlvbiBmaWxlQVBJc1N1cHBvcnRlZCgpIHtcbiAgICByZXR1cm4gd2luZG93LkZpbGUgJiYgd2luZG93LkZpbGVSZWFkZXIgJiYgd2luZG93LkZpbGVMaXN0ICYmIHdpbmRvdy5CbG9iO1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBDUFN3YXRjaGVzUGFsZXR0ZShjb250cm9sbGVyKSB7XG4gICAgQ1BQYWxldHRlLmNhbGwodGhpcywgY29udHJvbGxlciwgXCJzd2F0Y2hlc1wiLCBcIkNvbG9yIHN3YXRjaGVzXCIpO1xuICAgIFxuICAgIHZhclxuICAgICAgICBJTklUX0NPTE9SUyA9IFsweGZmZmZmZiwgMHgwMDAwMDAsIDB4ZmYwMDAwLCAweDAwZmYwMCwgMHgwMDAwZmYsIDB4ZmZmZjAwXSxcbiAgICAgICAgXG4gICAgICAgIG1vZGlmaWVkID0gZmFsc2UsXG4gICAgICAgIHN3YXRjaFBhbmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInVsXCIpLFxuICAgICAgICBidXR0b25QYW5lbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksXG4gICAgICAgIFxuICAgICAgICBmaWxlSW5wdXQsXG4gICAgICAgIFxuICAgICAgICB0aGF0ID0gdGhpcztcblxuICAgIGZ1bmN0aW9uIENQQ29sb3JTd2F0Y2goY29sb3IpIHtcbiAgICAgICAgdmFyXG4gICAgICAgICAgICB3cmFwcGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSxcbiAgICAgICAgICAgIHN3YXRjaEVsZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYVwiKSxcbiAgICAgICAgICAgIHN3YXRjaE1lbnUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidWxcIiksXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIG1udVJlbW92ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJhXCIpLFxuICAgICAgICAgICAgbW51U2V0VG9DdXJyZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImFcIiksXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoYXQgPSB0aGlzO1xuICAgICAgICBcbiAgICAgICAgdGhpcy5nZXRFbGVtZW50ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gd3JhcHBlcjtcbiAgICAgICAgfTtcbiAgICAgICAgXG4gICAgICAgIHRoaXMuc2V0Q29sb3IgPSBmdW5jdGlvbihjb2xvcikge1xuICAgICAgICAgICAgc3dhdGNoRWxlbS5zZXRBdHRyaWJ1dGUoXCJkYXRhLWNvbG9yXCIsIGNvbG9yKTtcbiAgICAgICAgICAgIHN3YXRjaEVsZW0uc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJyMnICsgcGFkTGVmdChcIlwiICsgTnVtYmVyKGNvbG9yKS50b1N0cmluZygxNiksIFwiMFwiLCA2KTtcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLnNldENvbG9yKGNvbG9yKTtcbiAgICAgICAgXG4gICAgICAgIHN3YXRjaEVsZW0uaHJlZiA9IFwiI1wiO1xuICAgICAgICBzd2F0Y2hFbGVtLmNsYXNzTmFtZSA9IFwiY2hpY2tlbnBhaW50LWNvbG9yLXN3YXRjaCBkcm9wZG93bi10b2dnbGVcIjtcbiAgICAgICAgc3dhdGNoRWxlbS5zZXRBdHRyaWJ1dGUoXCJkYXRhLXRvZ2dsZVwiLCBcImRyb3Bkb3duXCIpO1xuICAgICAgICBcbiAgICAgICAgbW51UmVtb3ZlLmhyZWYgPSBcIiNcIjtcbiAgICAgICAgbW51UmVtb3ZlLmlubmVySFRNTCA9IFwiUmVtb3ZlXCI7XG4gICAgICAgIFxuICAgICAgICBtbnVSZW1vdmUuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICQod3JhcHBlcikucmVtb3ZlKCk7XG5cbiAgICAgICAgICAgIG1vZGlmaWVkID0gdHJ1ZTtcbiAgICAgICAgfSk7XG4gICAgICAgICAgICBcbiAgICAgICAgbW51U2V0VG9DdXJyZW50LmhyZWYgPSBcIiNcIjtcbiAgICAgICAgbW51U2V0VG9DdXJyZW50LmlubmVySFRNTCA9IFwiUmVwbGFjZSB3aXRoIGN1cnJlbnQgY29sb3JcIjtcbiAgICAgICAgXG4gICAgICAgIG1udVNldFRvQ3VycmVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB0aGF0LnNldENvbG9yKGNvbnRyb2xsZXIuZ2V0Q3VyQ29sb3IoKS5nZXRSZ2IoKSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIG1vZGlmaWVkID0gdHJ1ZTtcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICBzd2F0Y2hNZW51LmNsYXNzTmFtZSA9IFwiZHJvcGRvd24tbWVudVwiO1xuICAgICAgICBcbiAgICAgICAgc3dhdGNoTWVudS5hcHBlbmRDaGlsZCh3cmFwV2l0aEVsZW0obW51UmVtb3ZlLCBcImxpXCIpKTtcbiAgICAgICAgc3dhdGNoTWVudS5hcHBlbmRDaGlsZCh3cmFwV2l0aEVsZW0obW51U2V0VG9DdXJyZW50LCBcImxpXCIpKTtcbiAgICAgICAgXG4gICAgICAgIHdyYXBwZXIuY2xhc3NOYW1lID0gXCJjaGlja2VucGFpbnQtY29sb3Itc3dhdGNoLXdyYXBwZXJcIjtcbiAgICAgICAgd3JhcHBlci5hcHBlbmRDaGlsZChzd2F0Y2hFbGVtKTtcbiAgICAgICAgd3JhcHBlci5hcHBlbmRDaGlsZChzd2F0Y2hNZW51KTtcbiAgICAgICAgXG4gICAgICAgICQod3JhcHBlcikub24oXCJzaG93LmJzLmRyb3Bkb3duXCIsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIFxuICAgICAgICAgICAgICAgICRidG5Ecm9wRG93biA9ICQodGhpcykuZmluZChcIi5kcm9wZG93bi10b2dnbGVcIiksXG4gICAgICAgICAgICAgICAgJGxpc3RIb2xkZXIgPSAkKHRoaXMpLmZpbmQoXCIuZHJvcGRvd24tbWVudVwiKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgJGxpc3RIb2xkZXIuY3NzKHtcbiAgICAgICAgICAgICAgICBcInRvcFwiOiAoJGJ0bkRyb3BEb3duLnBvc2l0aW9uKCkudG9wICsgJGJ0bkRyb3BEb3duLm91dGVySGVpZ2h0KHRydWUpKSArIFwicHhcIixcbiAgICAgICAgICAgICAgICBcImxlZnRcIjogJGJ0bkRyb3BEb3duLnBvc2l0aW9uKCkubGVmdCArIFwicHhcIlxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBcbiAgICBmdW5jdGlvbiBjbGVhclN3YXRjaGVzKCkge1xuICAgICAgICB3aGlsZSAoc3dhdGNoUGFuZWwubGFzdENoaWxkKSB7XG4gICAgICAgICAgICBzd2F0Y2hQYW5lbC5yZW1vdmVDaGlsZChzd2F0Y2hQYW5lbC5sYXN0Q2hpbGQpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYWRkU3dhdGNoKGNvbG9yKSB7XG4gICAgICAgIHZhclxuICAgICAgICAgICAgc3dhdGNoID0gbmV3IENQQ29sb3JTd2F0Y2goY29sb3IpO1xuXG4gICAgICAgIHN3YXRjaFBhbmVsLmFwcGVuZENoaWxkKHN3YXRjaC5nZXRFbGVtZW50KCkpO1xuICAgIH1cbiAgICBcbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGFuIGFycmF5IG9mIGNvbG9ycyBpbiBSR0IgMzItYml0IGludGVnZXIgZm9ybWF0XG4gICAgICovXG4gICAgdGhpcy5nZXRTd2F0Y2hlcyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXJcbiAgICAgICAgICAgIHN3YXRjaGVzID0gJChcIi5jaGlja2VucGFpbnQtY29sb3Itc3dhdGNoXCIsIHN3YXRjaFBhbmVsKSxcbiAgICAgICAgICAgIGNvbG9ycyA9IG5ldyBBcnJheShzd2F0Y2hlcy5sZW5ndGgpO1xuXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc3dhdGNoZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGNvbG9yc1tpXSA9IHBhcnNlSW50KHN3YXRjaGVzLmdldChpKS5nZXRBdHRyaWJ1dGUoXCJkYXRhLWNvbG9yXCIpLCAxMCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gY29sb3JzO1xuICAgIH07XG5cbiAgICB0aGlzLnNldFN3YXRjaGVzID0gZnVuY3Rpb24oc3dhdGNoZXMpIHtcbiAgICAgICAgY2xlYXJTd2F0Y2hlcygpO1xuXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc3dhdGNoZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGFkZFN3YXRjaChzd2F0Y2hlc1tpXSk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIG1vZGlmaWVkID0gdHJ1ZTtcbiAgICB9O1xuICAgIFxuICAgIHRoaXMuaXNNb2RpZmllZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gbW9kaWZpZWQ7XG4gICAgfTtcbiAgICBcbiAgICBmdW5jdGlvbiBsb2FkU3dhdGNoZXMoKSB7XG4gICAgICAgIGZpbGVJbnB1dC5vbmNoYW5nZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIFxuICAgICAgICAgICAgICAgIGZpbGVMaXN0ID0gdGhpcy5maWxlcztcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKGZpbGVMaXN0Lmxlbmd0aCA8IDEpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICBmaWxlID0gZmlsZUxpc3RbMF0sXG4gICAgICAgICAgICAgICAgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgcmVhZGVyLm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgICAgICBzd2F0Y2hlcyA9IG5ldyBBZG9iZUNvbG9yVGFibGUoKS5yZWFkKHRoaXMucmVzdWx0KTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBpZiAoc3dhdGNoZXMgIT0gbnVsbCAmJiBzd2F0Y2hlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoYXQuc2V0U3dhdGNoZXMoc3dhdGNoZXMpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGFsZXJ0KFwiVGhlIHN3YXRjaGVzIGNvdWxkIG5vdCBiZSByZWFkLCBkaWQgeW91IHNlbGVjdCBhbiAuYWNvIGZpbGU/XCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHJlYWRlci5yZWFkQXNBcnJheUJ1ZmZlcihmaWxlKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgZmlsZUlucHV0LmNsaWNrKCk7XG4gICAgfVxuICAgIFxuICAgIGZ1bmN0aW9uIHNhdmVTd2F0Y2hlcygpIHtcbiAgICAgICAgdmFyXG4gICAgICAgICAgICBhY28gPSBuZXcgQWRvYmVDb2xvclRhYmxlKCkud3JpdGUodGhhdC5nZXRTd2F0Y2hlcygpKSxcbiAgICAgICAgICAgIGJsb2IgPSBuZXcgQmxvYihbYWNvXSwge3R5cGU6IFwiYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtXCJ9KTtcbiAgICAgICAgXG4gICAgICAgIHdpbmRvdy5zYXZlQXMoYmxvYiwgXCJvZWtha2lzd2F0Y2hlcy5hY29cIik7XG4gICAgfVxuICAgIFxuICAgIGZ1bmN0aW9uIGluaXRTd2F0Y2hQYW5lbCgpIHtcbiAgICAgICAgc3dhdGNoUGFuZWwuY2xhc3NOYW1lID0gXCJjaGlja2VucGFpbnQtY29sb3Itc3dhdGNoZXMgbGlzdC11bnN0eWxlZFwiO1xuICAgICAgICBcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBJTklUX0NPTE9SUy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgc3dhdGNoUGFuZWwuYXBwZW5kQ2hpbGQobmV3IENQQ29sb3JTd2F0Y2goSU5JVF9DT0xPUlNbaV0pLmdldEVsZW1lbnQoKSk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHN3YXRjaFBhbmVsLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICBzd2F0Y2ggPSBlLnRhcmdldDtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKCEvY2hpY2tlbnBhaW50LWNvbG9yLXN3YXRjaC8udGVzdChzd2F0Y2guY2xhc3NOYW1lKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKGUuYnV0dG9uID09IDAgLyogTGVmdCAqLyAmJiBzd2F0Y2guZ2V0QXR0cmlidXRlKFwiZGF0YS1jb2xvclwiKSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgY29udHJvbGxlci5zZXRDdXJDb2xvcihuZXcgQ1BDb2xvcihwYXJzZUludChzd2F0Y2guZ2V0QXR0cmlidXRlKFwiZGF0YS1jb2xvclwiKSwgMTApKSk7XG4gICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgc3dhdGNoUGFuZWwuYWRkRXZlbnRMaXN0ZW5lcihcImNvbnRleHRtZW51XCIsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgIHN3YXRjaCA9IGUudGFyZ2V0O1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoIS9jaGlja2VucGFpbnQtY29sb3Itc3dhdGNoLy50ZXN0KHN3YXRjaC5jbGFzc05hbWUpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgICQoc3dhdGNoKVxuICAgICAgICAgICAgICAgIC5kcm9wZG93bihcInRvZ2dsZVwiKVxuICAgICAgICAgICAgICAgIC5vZmYoXCJjbGljay5icy5kcm9wZG93blwiKTsgLy8gUmVtb3ZlIEJvb3RzdHJhcCdzIGxlZnQtY2xpY2sgaGFuZGxlciBpbnN0YWxsZWQgYnkgdG9nZ2xlXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBcbiAgICBmdW5jdGlvbiBpbml0QnV0dG9uc1BhbmVsKCkge1xuICAgICAgICB2YXJcbiAgICAgICAgICAgIGJ0blNldHRpbmdzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSwgXG4gICAgICAgICAgICBidG5BZGQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLFxuICAgICAgICAgICAgXG4gICAgICAgICAgICBzZXR0aW5nc01lbnUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidWxcIiksXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIG1udVNhdmUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYVwiKSxcbiAgICAgICAgICAgIG1udUxvYWQgID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImFcIik7XG4gICAgICAgIFxuICAgICAgICBidG5BZGQudGl0bGUgPSBcIkFkZCB0aGUgY3VycmVudCBicnVzaCBjb2xvciBhcyBhIG5ldyBzd2F0Y2hcIjtcbiAgICAgICAgYnRuQWRkLmNsYXNzTmFtZSA9IFwiY2hpY2tlbnBhaW50LXNtYWxsLXRvb2xiYXItYnV0dG9uIGNoaWNrZW5wYWludC1jb2xvci1zd2F0Y2gtYWRkXCI7XG4gICAgICAgIFxuICAgICAgICBidG5TZXR0aW5ncy5jbGFzc05hbWUgPSBcImNoaWNrZW5wYWludC1zbWFsbC10b29sYmFyLWJ1dHRvbiBjaGlja2VucGFpbnQtY29sb3Itc3dhdGNoLXNldHRpbmdzXCI7XG4gICAgICAgIGJ0blNldHRpbmdzLnNldEF0dHJpYnV0ZShcImRhdGEtdG9nZ2xlXCIsIFwiZHJvcGRvd25cIik7XG4gICAgICAgICQoYnRuU2V0dGluZ3MpLmRyb3Bkb3duKCk7XG5cbiAgICAgICAgbW51U2F2ZS5ocmVmID0gXCIjXCI7XG4gICAgICAgIG1udVNhdmUuaW5uZXJIVE1MID0gXCJTYXZlIHN3YXRjaGVzIHRvIHlvdXIgY29tcHV0ZXIuLi5cIjtcbiAgICAgICAgbW51U2F2ZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBzYXZlU3dhdGNoZXMoKTtcbiAgICAgICAgfSk7XG4gICAgICAgICAgICBcbiAgICAgICAgbW51TG9hZC5ocmVmID0gXCIjXCI7XG4gICAgICAgIG1udUxvYWQuaW5uZXJIVE1MID0gXCJMb2FkIHN3YXRjaGVzIGZyb20geW91ciBjb21wdXRlci4uLlwiO1xuICAgICAgICBtbnVMb2FkLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGxvYWRTd2F0Y2hlcygpO1xuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIHNldHRpbmdzTWVudS5jbGFzc05hbWUgPSBcImRyb3Bkb3duLW1lbnUgZHJvcGRvd24tbWVudS1yaWdodFwiO1xuICAgICAgICBcbiAgICAgICAgc2V0dGluZ3NNZW51LmFwcGVuZENoaWxkKHdyYXBXaXRoRWxlbShtbnVTYXZlLCBcImxpXCIpKTtcbiAgICAgICAgc2V0dGluZ3NNZW51LmFwcGVuZENoaWxkKHdyYXBXaXRoRWxlbShtbnVMb2FkLCBcImxpXCIpKTtcbiAgICAgICAgXG4gICAgICAgIHZhclxuICAgICAgICAgICAgYnRuU2V0dGluZ3NDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICBcbiAgICAgICAgYnRuU2V0dGluZ3NDb250YWluZXIuY2xhc3NOYW1lID0gJ2Ryb3Bkb3duJztcbiAgICAgICAgYnRuU2V0dGluZ3NDb250YWluZXIuYXBwZW5kQ2hpbGQoYnRuU2V0dGluZ3MpO1xuICAgICAgICBidG5TZXR0aW5nc0NvbnRhaW5lci5hcHBlbmRDaGlsZChzZXR0aW5nc01lbnUpO1xuXG4gICAgICAgICQoYnRuU2V0dGluZ3NDb250YWluZXIpLm9uKFwic2hvdy5icy5kcm9wZG93blwiLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIC8qIEluc3RlYWQgb2YgQm9vdHN0cmFwJ3MgZXh0cmVtZWx5IGV4cGVuc2l2ZSBkYXRhIEFQSSwgd2UnbGwgb25seSBsaXN0ZW4gZm9yIGRpc21pc3MgY2xpY2tzIG9uIHRoZVxuICAgICAgICAgICAgICogZG9jdW1lbnQgKndoaWxlIHRoZSBtZW51IGlzIG9wZW4hKlxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICAkKGRvY3VtZW50KS5vbmUoXCJjbGlja1wiLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBpZiAoJChidG5TZXR0aW5nc0NvbnRhaW5lcikuaGFzQ2xhc3MoXCJvcGVuXCIpKSB7XG4gICAgICAgICAgICAgICAgICAgICQoYnRuU2V0dGluZ3MpLmRyb3Bkb3duKFwidG9nZ2xlXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcblxuICAgICAgICBidG5BZGQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgIGFkZFN3YXRjaChjb250cm9sbGVyLmdldEN1ckNvbG9yKCkuZ2V0UmdiKCkpO1xuICAgICAgICAgICAgbW9kaWZpZWQgPSB0cnVlO1xuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIGJ1dHRvblBhbmVsLmNsYXNzTmFtZSA9ICdjaGlja2VucGFpbnQtY29sb3Itc3dhdGNoZXMtYnV0dG9ucyc7XG4gICAgICAgIFxuICAgICAgICAvLyBEb24ndCBvZmZlciB0byBsb2FkL3NhdmUgc3dhdGNoZXMgaWYgd2UgZG9uJ3QgaGF2ZSB0aGUgZmlsZSBBUEkgbmVlZGVkIGZvciByZWFkaW5nIHRoZW1cbiAgICAgICAgaWYgKGZpbGVBUElzU3VwcG9ydGVkKCkpIHtcbiAgICAgICAgICAgIGZpbGVJbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZmlsZUlucHV0LnR5cGUgPSBcImZpbGVcIjtcbiAgICAgICAgICAgIGZpbGVJbnB1dC5tdWx0aXBsZSA9IGZhbHNlO1xuICAgICAgICAgICAgZmlsZUlucHV0LnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIGJ1dHRvblBhbmVsLmFwcGVuZENoaWxkKGJ0blNldHRpbmdzQ29udGFpbmVyKTtcbiAgICAgICAgICAgIGJ1dHRvblBhbmVsLmFwcGVuZENoaWxkKGZpbGVJbnB1dCk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGJ1dHRvblBhbmVsLmFwcGVuZENoaWxkKGJ0bkFkZCk7XG4gICAgfVxuICAgIFxuICAgIGluaXRTd2F0Y2hQYW5lbCgpO1xuICAgIHRoaXMuZ2V0Qm9keUVsZW1lbnQoKS5hcHBlbmRDaGlsZChzd2F0Y2hQYW5lbCk7XG5cbiAgICBpbml0QnV0dG9uc1BhbmVsKCk7XG4gICAgdGhpcy5nZXRCb2R5RWxlbWVudCgpLmFwcGVuZENoaWxkKGJ1dHRvblBhbmVsKTtcbn1cblxuQ1BTd2F0Y2hlc1BhbGV0dGUucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShDUFBhbGV0dGUucHJvdG90eXBlKTtcbkNQU3dhdGNoZXNQYWxldHRlLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IENQU3dhdGNoZXNQYWxldHRlOyIsIi8qXG4gICAgQ2hpY2tlblBhaW50XG4gICAgXG4gICAgQ2hpY2tlblBhaW50IGlzIGEgdHJhbnNsYXRpb24gb2YgQ2hpYmlQYWludCBmcm9tIEphdmEgdG8gSmF2YVNjcmlwdFxuICAgIGJ5IE5pY2hvbGFzIFNoZXJsb2NrIC8gQ2hpY2tlbiBTbW9vdGhpZS5cbiAgICBcbiAgICBDaGliaVBhaW50IGlzIENvcHlyaWdodCAoYykgMjAwNi0yMDA4IE1hcmMgU2NoZWZlclxuXG4gICAgQ2hpY2tlblBhaW50IGlzIGZyZWUgc29mdHdhcmU6IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vciBtb2RpZnlcbiAgICBpdCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGFzIHB1Ymxpc2hlZCBieVxuICAgIHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb24sIGVpdGhlciB2ZXJzaW9uIDMgb2YgdGhlIExpY2Vuc2UsIG9yXG4gICAgKGF0IHlvdXIgb3B0aW9uKSBhbnkgbGF0ZXIgdmVyc2lvbi5cblxuICAgIENoaWNrZW5QYWludCBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLFxuICAgIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mXG4gICAgTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiAgU2VlIHRoZVxuICAgIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuXG5cbiAgICBZb3Ugc2hvdWxkIGhhdmUgcmVjZWl2ZWQgYSBjb3B5IG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZVxuICAgIGFsb25nIHdpdGggQ2hpY2tlblBhaW50LiBJZiBub3QsIHNlZSA8aHR0cDovL3d3dy5nbnUub3JnL2xpY2Vuc2VzLz4uXG4qL1xuXG5pbXBvcnQgQ1BXYWNvbVRhYmxldCBmcm9tIFwiLi4vdXRpbC9DUFdhY29tVGFibGV0XCI7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIENQVGFibGV0RGlhbG9nKHBhcmVudCkge1xuICAgIHZhclxuICAgICAgICBkaWFsb2cgPSBcbiAgICAgICAgICAgICQoYDxkaXYgY2xhc3M9XCJtb2RhbCBmYWRlXCIgdGFiaW5kZXg9XCItMVwiIHJvbGU9XCJkaWFsb2dcIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibW9kYWwtZGlhbG9nXCI+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtb2RhbC1jb250ZW50XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibW9kYWwtaGVhZGVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJjbG9zZVwiIGRhdGEtZGlzbWlzcz1cIm1vZGFsXCIgYXJpYS1sYWJlbD1cIkNsb3NlXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPiZ0aW1lczs8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGg0IGNsYXNzPVwibW9kYWwtdGl0bGVcIj5EcmF3aW5nIHRhYmxldCBzdXBwb3J0PC9oND5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm1vZGFsLWJvZHlcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzcz1cImNoaWNrZW5wYWludC10YWJsZXQtdGhlcmUtYXJlLXR3by1vcHRpb25zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRoZXJlIGFyZSB0d28gd2F5cyB5b3UgY291bGQgdXNlIHlvdXIgdGFibGV0J3MgcGVuIHByZXNzdXJlIHN1cHBvcnQgd2l0aCBDaGlja2VuUGFpbnQuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjaGlja2VucGFpbnQtdGFibGV0LXN1cHBvcnQgY2hpY2tlbnBhaW50LXdhY29tLXN1cHBvcnRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGg0PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUGx1Z2luIGZvciBXYWNvbSB0YWJsZXRzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvaDQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjaGlja2VucGFpbnQtc3VwcG9ydGVkLWJyb3dzZXJzXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY2hpY2tlbnBhaW50LXN1cHBvcnRlZC1icm93c2VyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJmYSBmYS1pbnRlcm5ldC1leHBsb3JlclwiPjwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBJRSAxMCwgMTFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNoaWNrZW5wYWludC1zdXBwb3J0ZWQtYnJvd3NlclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZmEgZmEtZmlyZWZveFwiPjwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBGaXJlZm94ICgzMi1iaXQgb25seSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNoaWNrZW5wYWludC1zdXBwb3J0ZWQtYnJvd3NlclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZmEgZmEtc2FmYXJpXCI+PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNhZmFyaVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNoaWNrZW5wYWludC1zdXBwb3J0ZWQtYnJvd3NlclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZmEgZmEtb3BlcmFcIj48L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgT3BlcmFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3M9XCJjaGlja2VucGFpbnQtbm90LWluc3RhbGxlZFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVGhlIHBsdWdpbiBmb3IgV2Fjb20gdGFibGV0cyBkb2Vzbid0IHNlZW0gdG8gYmUgaW5zdGFsbGVkIGluIHlvdXIgYnJvd3NlciB5ZXQuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3M9XCJjaGlja2VucGFpbnQtbm90LWluc3RhbGxlZFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUGxlYXNlIG1ha2Ugc3VyZSB0aGF0IHlvdSd2ZSBpbnN0YWxsZWQgdGhlIGxhdGVzdCBkcml2ZXJzIGZvciB5b3VyIHRhYmxldCBmcm9tIHRoZSBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9XCJodHRwOi8vd3d3LndhY29tLmNvbS9lbi11cy9zdXBwb3J0L3Byb2R1Y3Qtc3VwcG9ydC9kcml2ZXJzXCIgdGFyZ2V0PVwiX2JsYW5rXCI+V2Fjb20gZHJpdmVycyBwYWdlPC9hPixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoZW4gcmVzdGFydCB5b3VyIGJyb3dzZXIuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3M9XCJjaGlja2VucGFpbnQtbm90LXN1cHBvcnRlZFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgWW91ciBicm93c2VyIGRvZXNuJ3Qgc3VwcG9ydCB0aGUgV2Fjb20gdGFibGV0IHBsdWdpbiwgcGxlYXNlIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IG9uZSBvZiB0aGUgYnJvd3NlcnMgbGlzdGVkIGFib3ZlIGluc3RlYWQuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3M9XCJjaGlja2VucGFpbnQtc3VwcG9ydGVkIGFsZXJ0IGFsZXJ0LXN1Y2Nlc3NcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRoZSBXYWNvbSB0YWJsZXQgcGx1Z2luIGlzIGluc3RhbGxlZCBhbmQgd29ya2luZy5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjaGlja2VucGFpbnQtdGFibGV0LXN1cHBvcnQgY2hpY2tlbnBhaW50LXBvaW50ZXJldmVudHMtc3VwcG9ydFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBCdWlsdC1pbiBzdXBwb3J0IGZvciBtb3N0IHRhYmxldHMgPHNtYWxsPmluY2x1ZGluZyBXYWNvbSB0YWJsZXRzPC9zbWFsbD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9oND5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNoaWNrZW5wYWludC1zdXBwb3J0ZWQtYnJvd3NlcnNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjaGlja2VucGFpbnQtc3VwcG9ydGVkLWJyb3dzZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImZhIGZhLWludGVybmV0LWV4cGxvcmVyXCI+PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIElFIChXaW5kb3dzIDgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY2hpY2tlbnBhaW50LXN1cHBvcnRlZC1icm93c2VyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJmYSBmYS1lZGdlXCI+PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVkZ2UgKFdpbmRvd3MgMTApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjaGlja2VucGFpbnQtc3VwcG9ydGVkLWJyb3dzZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImZhIGZhLWZpcmVmb3hcIj48L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRmlyZWZveCAoPGEgaHJlZj1cImh0dHBzOi8vZ2l0aHViLmNvbS90aGVuaWNrZHVkZS9jaGlja2VucGFpbnQvYmxvYi9tYXN0ZXIvaGVscC9GaXJlZm94IHByZXNzdXJlIHN1cHBvcnQubWRcIiB0YXJnZXQ9XCJfYmxhbmtcIj5leHBlcmltZW50YWwgPGkgY2xhc3M9XCJnbHlwaGljb24gZ2x5cGhpY29uLW5ldy13aW5kb3dcIj48L2k+PC9hPilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNoaWNrZW5wYWludC1zdXBwb3J0ZWQtYnJvd3NlclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZmEgZmEtY2hyb21lXCI+PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENocm9tZSAoY29taW5nIHNvb24pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzPVwiY2hpY2tlbnBhaW50LW5vdC1zdXBwb3J0ZWRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFlvdXIgYnJvd3NlciBkb2Vzbid0IGhhdmUgYnVpbHQtaW4gc3VwcG9ydCBmb3IgZHJhd2luZyB0YWJsZXRzLCBwbGVhc2UgdHJ5XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbmUgb2YgdGhlIG90aGVyIGJyb3dzZXJzIGxpc3RlZCBhYm92ZS5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzcz1cImNoaWNrZW5wYWludC1zdXBwb3J0ZWQgYWxlcnQgYWxlcnQtc3VjY2Vzc1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgWW91ciBicm93c2VyIGhhcyBidWlsdC1pbiBzdXBwb3J0IGZvciBkcmF3aW5nIHRhYmxldHMhXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgIGApO1xuICAgIFxuICAgIHZhclxuICAgICAgICB3YWNvbVN1cHBvcnRFbGVtID0gJChcIi5jaGlja2VucGFpbnQtd2Fjb20tc3VwcG9ydFwiLCBkaWFsb2cpLFxuICAgICAgICBwZVN1cHBvcnRFbGVtID0gJChcIi5jaGlja2VucGFpbnQtcG9pbnRlcmV2ZW50cy1zdXBwb3J0XCIsIGRpYWxvZyksXG4gICAgICAgIGJvdGhPcHRpb25zRWxlbSA9ICQoXCIuY2hpY2tlbnBhaW50LXRhYmxldC10aGVyZS1hcmUtdHdvLW9wdGlvbnNcIiwgZGlhbG9nKSxcbiAgICAgICAgXG4gICAgICAgIHdhY29tUHJlc2VudCA9IENQV2Fjb21UYWJsZXQuZ2V0UmVmKCkuaXNUYWJsZXRQcmVzZW50KCksXG4gICAgICAgIHBlU3VwcG9ydGVkID0gISF3aW5kb3cuaGFzTmF0aXZlUG9pbnRlckV2ZW50cztcbiAgICBcbiAgICB3YWNvbVN1cHBvcnRFbGVtLnRvZ2dsZUNsYXNzKFwic3VwcG9ydGVkXCIsIHdhY29tUHJlc2VudCk7XG4gICAgXG4gICAgaWYgKHdhY29tUHJlc2VudCkge1xuICAgICAgICAvLyBEb24ndCBib3RoZXIgZGlzcGxheWluZyBpbmZvIGFib3V0IFBvaW50ZXIgRXZlbnRzIGlmIHdlIGhhdmUgdGhlIFdhY29tIHBsdWdpbiBpbnN0YWxsZWRcbiAgICAgICAgcGVTdXBwb3J0RWxlbS5oaWRlKCk7XG4gICAgICAgIGJvdGhPcHRpb25zRWxlbS5oaWRlKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgLy8gQ2hyb21lIGhhcyBkcm9wcGVkIE5QQVBJIHN1cHBvcnQsIHNvIHRoZSBXYWNvbSBwbHVnaW4gY2Fubm90IGJlIGluc3RhbGxlZFxuICAgICAgICBpZiAoL0Nocm9tZS9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkgJiYgIS9PUFIvLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudClcbiAgICAgICAgICAgICAgICB8fCAvaVBhZC8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSB8fCAvaVBob25lLy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpKSB7XG4gICAgICAgICAgICB3YWNvbVN1cHBvcnRFbGVtLmFkZENsYXNzKFwibm90LXN1cHBvcnRlZFwiKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gRG9uJ3QgYm90aGVyIHNob3dpbmcgdGhlIFdhY29tIHBsdWdpbiBkZXRhaWxzIGlmIHRoaXMgYnJvd3NlciBzdXBwb3J0cyBwb2ludGVyIGV2ZW50c1xuICAgICAgICBpZiAocGVTdXBwb3J0ZWQpIHtcbiAgICAgICAgICAgIHdhY29tU3VwcG9ydEVsZW0uaGlkZSgpO1xuICAgICAgICAgICAgYm90aE9wdGlvbnNFbGVtLmhpZGUoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBcbiAgICBwZVN1cHBvcnRFbGVtLnRvZ2dsZUNsYXNzKFwic3VwcG9ydGVkXCIsIHBlU3VwcG9ydGVkKTtcbiAgICBwZVN1cHBvcnRFbGVtLnRvZ2dsZUNsYXNzKFwibm90LXN1cHBvcnRlZFwiLCAhcGVTdXBwb3J0ZWQpO1xuXG4gICAgZGlhbG9nLm1vZGFsKHtcbiAgICAgICAgc2hvdzogZmFsc2VcbiAgICB9KTtcbiAgICBcbiAgICAvLyBGaXggdGhlIGJhY2tkcm9wIGxvY2F0aW9uIGluIHRoZSBET00gYnkgcmVwYXJlbnRpbmcgaXQgdG8gdGhlIGNoaWNrZW5wYWludCBjb250YWluZXJcbiAgICBkaWFsb2cuZGF0YShcImJzLm1vZGFsXCIpLiRib2R5ID0gJChwYXJlbnQpO1xuICAgIFxuICAgIHBhcmVudC5hcHBlbmRDaGlsZChkaWFsb2dbMF0pO1xuXG4gICAgdGhpcy5zaG93ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGRpYWxvZy5tb2RhbChcInNob3dcIik7XG4gICAgfTtcbn0iLCIvKlxuICAgIENoaWNrZW5QYWludFxuICAgIFxuICAgIENoaWNrZW5QYWludCBpcyBhIHRyYW5zbGF0aW9uIG9mIENoaWJpUGFpbnQgZnJvbSBKYXZhIHRvIEphdmFTY3JpcHRcbiAgICBieSBOaWNob2xhcyBTaGVybG9jayAvIENoaWNrZW4gU21vb3RoaWUuXG4gICAgXG4gICAgQ2hpYmlQYWludCBpcyBDb3B5cmlnaHQgKGMpIDIwMDYtMjAwOCBNYXJjIFNjaGVmZXJcblxuICAgIENoaWNrZW5QYWludCBpcyBmcmVlIHNvZnR3YXJlOiB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3IgbW9kaWZ5XG4gICAgaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBhcyBwdWJsaXNoZWQgYnlcbiAgICB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uLCBlaXRoZXIgdmVyc2lvbiAzIG9mIHRoZSBMaWNlbnNlLCBvclxuICAgIChhdCB5b3VyIG9wdGlvbikgYW55IGxhdGVyIHZlcnNpb24uXG5cbiAgICBDaGlja2VuUGFpbnQgaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCxcbiAgICBidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZlxuICAgIE1FUkNIQU5UQUJJTElUWSBvciBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS4gIFNlZSB0aGVcbiAgICBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9yZSBkZXRhaWxzLlxuXG4gICAgWW91IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2VcbiAgICBhbG9uZyB3aXRoIENoaWNrZW5QYWludC4gSWYgbm90LCBzZWUgPGh0dHA6Ly93d3cuZ251Lm9yZy9saWNlbnNlcy8+LlxuKi9cblxuaW1wb3J0IENQR3JleUJtcCBmcm9tICcuLi9lbmdpbmUvQ1BHcmV5Qm1wJztcbmltcG9ydCBDUExvb2tVcFRhYmxlIGZyb20gJy4uL2VuZ2luZS9DUExvb2tVcFRhYmxlJztcblxuaW1wb3J0IENQUGFsZXR0ZSBmcm9tICcuL0NQUGFsZXR0ZSc7XG5pbXBvcnQgQ1BTbGlkZXIgZnJvbSAnLi9DUFNsaWRlcic7XG5cbmZ1bmN0aW9uIHdyYXBDaGVja2JveFdpdGhMYWJlbChjaGVja2JveCwgdGl0bGUpIHtcbiAgICB2YXJcbiAgICAgICAgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSxcbiAgICAgICAgbGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGFiZWxcIik7XG5cbiAgICBkaXYuY2xhc3NOYW1lID0gXCJjaGVja2JveFwiO1xuICAgIFxuICAgIGxhYmVsLmFwcGVuZENoaWxkKGNoZWNrYm94KTtcbiAgICBsYWJlbC5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSh0aXRsZSkpO1xuICAgIFxuICAgIGRpdi5hcHBlbmRDaGlsZChsYWJlbCk7XG4gICAgXG4gICAgcmV0dXJuIGRpdjtcbn1cblxuZnVuY3Rpb24gbG9hZFRleHR1cmVzKHRleHR1cmVGaWxlbmFtZSwgd2lkdGgsIGhlaWdodCwgdGV4dHVyZUNvdW50LCB0aGVuKSB7XG4gICAgdmFyXG4gICAgICAgIGltZyA9IG5ldyBJbWFnZSgpLFxuICAgICAgICB0ZXh0dXJlcyA9IFtdO1xuICAgIFxuICAgIGltZy5vbmxvYWQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyXG4gICAgICAgICAgICBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpLFxuICAgICAgICAgICAgY2FudmFzQ29udGV4dCA9IGNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIik7XG4gICAgICAgIFxuICAgICAgICBjYW52YXMud2lkdGggPSBpbWcud2lkdGg7XG4gICAgICAgIGNhbnZhcy5oZWlnaHQgPSBpbWcuaGVpZ2h0O1xuICAgICAgICBcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0ZXh0dXJlQ291bnQ7IGkrKykge1xuICAgICAgICAgICAgY2FudmFzQ29udGV4dC5kcmF3SW1hZ2UoaW1nLCAwLCBpICogaGVpZ2h0LCB3aWR0aCwgaGVpZ2h0LCAwLCAwLCB3aWR0aCwgaGVpZ2h0KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICAgICAgaW1hZ2VEYXRhID0gY2FudmFzQ29udGV4dC5nZXRJbWFnZURhdGEoMCwgMCwgd2lkdGgsIGhlaWdodCksXG4gICAgICAgICAgICAgICAgICAgIHRleHR1cmUgPSBuZXcgQ1BHcmV5Qm1wKHdpZHRoLCBoZWlnaHQpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIFRha2UganVzdCB0aGUgcmVkIGNoYW5uZWwgZnJvbSB0aGUgaW1hZ2UgdG8gZm9ybSB0aGUgbmV3IGdyYXlzY2FsZSB0ZXh0dXJlXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCB3aWR0aCAqIGhlaWdodDsgaisrKSB7XG4gICAgICAgICAgICAgICAgICAgIHRleHR1cmUuZGF0YVtqXSA9IGltYWdlRGF0YS5kYXRhW2ogKiA0XTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgdGV4dHVyZXMucHVzaCh0ZXh0dXJlKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAvLyBRdWlldGx5IGlnbm9yZSBlcnJvcnMgdGhhdCBvY2N1ciB3aGlsZSBsb2FkaW5nIHRoZSBpbWFnZSAoZS5nLiBjcm9zcy1vcmlnaW4gc2VjdXJpdHkgZmFpbHVyZXMpXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHRoZW4odGV4dHVyZXMpO1xuICAgIH07XG4gICAgXG4gICAgaW1nLnNyYyA9IHRleHR1cmVGaWxlbmFtZTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gQ1BUZXh0dXJlUGFsZXR0ZShjb250cm9sbGVyKSB7XG4gICAgQ1BQYWxldHRlLmNhbGwodGhpcywgY29udHJvbGxlciwgXCJ0ZXh0dXJlc1wiLCBcIlRleHR1cmVzXCIpO1xuICAgIFxuICAgIHZhclxuICAgICAgICBURVhUVVJFX1BSRVZJRVdfU0laRSA9IDY0LFxuICAgICAgICBURVhUVVJFX1NXQVRDSF9CVVRUT05fU0laRSA9IDMyLFxuICAgIFxuICAgICAgICB0ZXh0dXJlcyA9IFtdLCAvLyBBcnJheSBvZiBDUEdyZXlCbXBcbiAgICAgICAgc2VsZWN0ZWRUZXh0dXJlLCBwcm9jZXNzZWRUZXh0dXJlLCAvL0JvdGggQ1BHcmV5Qm1wXG5cbiAgICAgICAgbWlycm9yID0gZmFsc2UsIGludmVyc2UgPSBmYWxzZSxcbiAgICAgICAgXG4gICAgICAgIGJyaWdodG5lc3MgPSAwLjAsIGNvbnRyYXN0ID0gMC4wLFxuICAgICAgICBvcHRpb25zUGFuZWwsXG4gICAgICAgIHRleHR1cmVzUGFuZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLFxuICAgICAgICBcbiAgICAgICAgYm9keSA9IHRoaXMuZ2V0Qm9keUVsZW1lbnQoKTtcblxuICAgIC8qKlxuICAgICAqIEFkZCBhbiBhcnJheSBvZiB0ZXh0dXJlcyB0byB0aGUgZ2xvYmFsIHRleHR1cmUgbGlzdCwgYW5kIGFkZCBzd2F0Y2hlcyBmb3IgdGhlbSB0byB0aGUgVUkuXG4gICAgICovXG4gICAgZnVuY3Rpb24gYWRkVGV4dHVyZXMobmV3VGV4dHVyZXMpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuZXdUZXh0dXJlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgdGV4dHVyZSA9IG5ld1RleHR1cmVzW2ldO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB0ZXh0dXJlcy5wdXNoKHRleHR1cmUpO1xuICAgIFxuICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgYnV0dG9uID0gbmV3IENQVGV4dHVyZVN3YXRjaCh0ZXh0dXJlLCBURVhUVVJFX1NXQVRDSF9CVVRUT05fU0laRSwgVEVYVFVSRV9TV0FUQ0hfQlVUVE9OX1NJWkUpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBidXR0b24ub24oXCJjbGlja1wiLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBzZWxlY3RlZFRleHR1cmUgPSB0aGlzLnRleHR1cmU7XG4gICAgICAgICAgICAgICAgdXBkYXRlU2VsZWN0ZWRUZXh0dXJlKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGV4dHVyZXNQYW5lbC5hcHBlbmRDaGlsZChidXR0b24uZ2V0RWxlbWVudCgpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBcbiAgICAvKipcbiAgICAgKiBHZW5lcmF0ZSBhbmQgcmV0dXJuIGFuIGFycmF5IG9mIHByb2NlZHVyYWxseS1nZW5lcmF0ZWQgdGV4dHVyZXNcbiAgICAgKiBcbiAgICAgKiBAcmV0dXJucyBDUEdyZXlCbXBbXVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIG1ha2VQcm9jZWR1cmFsVGV4dHVyZXMoKSB7XG4gICAgICAgIHZhclxuICAgICAgICAgICAgcmVzdWx0ID0gW251bGxdO1xuICAgICAgICBcbiAgICAgICAgdmFyXG4gICAgICAgICAgICB0ZXh0dXJlID0gbmV3IENQR3JleUJtcCgyLCAyKTtcbiAgICAgICAgdGV4dHVyZS5kYXRhWzBdID0gMHhGRjtcbiAgICAgICAgdGV4dHVyZS5kYXRhWzNdID0gMHhGRjtcbiAgICAgICAgcmVzdWx0LnB1c2godGV4dHVyZSk7XG5cbiAgICAgICAgcmVzdWx0LnB1c2gobWFrZURvdFRleHR1cmUoMikpO1xuICAgICAgICByZXN1bHQucHVzaChtYWtlRG90VGV4dHVyZSgzKSk7XG4gICAgICAgIHJlc3VsdC5wdXNoKG1ha2VEb3RUZXh0dXJlKDQpKTtcbiAgICAgICAgcmVzdWx0LnB1c2gobWFrZURvdFRleHR1cmUoNikpO1xuICAgICAgICByZXN1bHQucHVzaChtYWtlRG90VGV4dHVyZSg4KSk7XG5cbiAgICAgICAgcmVzdWx0LnB1c2gobWFrZVZlcnRMaW5lc1RleHR1cmUoMSwgMikpO1xuICAgICAgICByZXN1bHQucHVzaChtYWtlVmVydExpbmVzVGV4dHVyZSgyLCA0KSk7XG5cbiAgICAgICAgcmVzdWx0LnB1c2gobWFrZUhvcml6TGluZXNUZXh0dXJlKDEsIDIpKTtcbiAgICAgICAgcmVzdWx0LnB1c2gobWFrZUhvcml6TGluZXNUZXh0dXJlKDIsIDQpKTtcblxuICAgICAgICByZXN1bHQucHVzaChtYWtlQ2hlY2tlckJvYXJkVGV4dHVyZSgyKSk7XG4gICAgICAgIHJlc3VsdC5wdXNoKG1ha2VDaGVja2VyQm9hcmRUZXh0dXJlKDQpKTtcbiAgICAgICAgcmVzdWx0LnB1c2gobWFrZUNoZWNrZXJCb2FyZFRleHR1cmUoOCkpO1xuICAgICAgICByZXN1bHQucHVzaChtYWtlQ2hlY2tlckJvYXJkVGV4dHVyZSgxNikpO1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0gc2l6ZSBpbnRcbiAgICAgKiBcbiAgICAgKiBAcmV0dXJucyBDUEdyZXlCbXBcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBtYWtlRG90VGV4dHVyZShzaXplKSB7XG4gICAgICAgIHZhclxuICAgICAgICAgICAgdGV4dHVyZSA9IG5ldyBDUEdyZXlCbXAoc2l6ZSwgc2l6ZSk7XG4gICAgICAgIFxuICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IHNpemUgKiBzaXplOyBpKyspIHtcbiAgICAgICAgICAgIHRleHR1cmUuZGF0YVtpXSA9IDB4RkY7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRleHR1cmU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTWFrZSBhIGNoZWNrZXJib2FyZCB0ZXh0dXJlIG9mIHRoZSBnaXZlbiBkaW1lbnNpb25zLlxuICAgICAqIFxuICAgICAqIEBwYXJhbSBzaXplIGludFxuICAgICAqIFxuICAgICAqIEByZXR1cm5zIENQR3JleUJtcFxuICAgICAqL1xuICAgIGZ1bmN0aW9uIG1ha2VDaGVja2VyQm9hcmRUZXh0dXJlKHNpemUpIHtcbiAgICAgICAgdmFyXG4gICAgICAgICAgICB0ZXh0dXJlU2l6ZSA9IDIgKiBzaXplLFxuICAgICAgICAgICAgdGV4dHVyZSA9IG5ldyBDUEdyZXlCbXAodGV4dHVyZVNpemUsIHRleHR1cmVTaXplKTtcbiAgICAgICAgXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGV4dHVyZVNpemU7IGkrKykge1xuICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCB0ZXh0dXJlU2l6ZTsgaisrKSB7XG4gICAgICAgICAgICAgICAgdGV4dHVyZS5kYXRhW2kgKyBqICogdGV4dHVyZVNpemVdID0gKCh+fihpIC8gc2l6ZSkgKyB+fihqIC8gc2l6ZSkpICUgMiA9PSAwKSA/IDAgOiAweEZGO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gdGV4dHVyZTtcbiAgICB9XG5cbiAgICAgLyoqXG4gICAgICAqIE1ha2UgYSB0ZXh0dXJlIGNvbnNpc3Rpbmcgb2YgYSBzZXJpZXMgb2YgZXZlbmx5LXNwYWNlZCB2ZXJ0aWNhbCBsaW5lc1xuICAgICAgKiBcbiAgICAgICogQHBhcmFtIGxpbmVTaXplIGludFxuICAgICAgKiBAcGFyYW0gc2l6ZSBpbnRcbiAgICAgICogXG4gICAgICAqIEByZXR1cm5zIENQR3JleUJtcFxuICAgICAgKi9cbiAgICAgZnVuY3Rpb24gbWFrZVZlcnRMaW5lc1RleHR1cmUobGluZVNpemUsIHNpemUpIHtcbiAgICAgICAgdmFyXG4gICAgICAgICAgICB0ZXh0dXJlID0gbmV3IENQR3JleUJtcChzaXplLCBzaXplKTtcbiAgICAgICAgXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2l6ZSAqIHNpemU7IGkrKykge1xuICAgICAgICAgICAgaWYgKH5+KGkgJSBzaXplKSA+PSBsaW5lU2l6ZSkge1xuICAgICAgICAgICAgICAgIHRleHR1cmUuZGF0YVtpXSA9IDB4RkY7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHJldHVybiB0ZXh0dXJlO1xuICAgIH1cblxuICAgICAvKipcbiAgICAgICogTWFrZSBhIHRleHR1cmUgY29uc2lzdGluZyBvZiBhIHNlcmllcyBvZiBldmVubHktc3BhY2VkIGhvcml6b250YWwgbGluZXNcbiAgICAgICpcbiAgICAgICogQHBhcmFtIGxpbmVTaXplIGludFxuICAgICAgKiBAcGFyYW0gc2l6ZSBpbnRcbiAgICAgICogXG4gICAgICAqIEByZXR1cm5zIENQR3JleUJtcFxuICAgICAgKi9cbiAgICBmdW5jdGlvbiBtYWtlSG9yaXpMaW5lc1RleHR1cmUobGluZVNpemUsIHNpemUpIHtcbiAgICAgICAgdmFyXG4gICAgICAgICAgICB0ZXh0dXJlID0gbmV3IENQR3JleUJtcChzaXplLCBzaXplKTtcbiAgICAgICAgXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2l6ZSAqIHNpemU7IGkrKykge1xuICAgICAgICAgICAgaWYgKGkgLyBzaXplID49IGxpbmVTaXplKSB7XG4gICAgICAgICAgICAgICAgdGV4dHVyZS5kYXRhW2ldID0gMHhGRjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHRleHR1cmU7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gdXBkYXRlU2VsZWN0ZWRUZXh0dXJlKCkge1xuICAgICAgICBpZiAoc2VsZWN0ZWRUZXh0dXJlICE9IG51bGwpIHtcbiAgICAgICAgICAgIHByb2Nlc3NlZFRleHR1cmUgPSBzZWxlY3RlZFRleHR1cmUuY2xvbmUoKTtcblxuICAgICAgICAgICAgaWYgKG1pcnJvcikge1xuICAgICAgICAgICAgICAgIHByb2Nlc3NlZFRleHR1cmUubWlycm9ySG9yaXpvbnRhbGx5KCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgIGx1dCA9IG5ldyBDUExvb2tVcFRhYmxlKCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGx1dC5sb2FkQnJpZ2h0bmVzc0NvbnRyYXN0KGJyaWdodG5lc3MsIGNvbnRyYXN0KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKGludmVyc2UpIHtcbiAgICAgICAgICAgICAgICBsdXQuaW52ZXJ0KCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHByb2Nlc3NlZFRleHR1cmUuYXBwbHlMVVQobHV0KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHByb2Nlc3NlZFRleHR1cmUgPSBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgY29udHJvbGxlci5nZXRBcnR3b3JrKCkuc2V0QnJ1c2hUZXh0dXJlKHByb2Nlc3NlZFRleHR1cmUpO1xuICAgICAgICBcbiAgICAgICAgaWYgKG9wdGlvbnNQYW5lbCAhPSBudWxsKSB7XG4gICAgICAgICAgICBvcHRpb25zUGFuZWwudXBkYXRlVGV4dHVyZSgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIGZ1bmN0aW9uIENQVGV4dHVyZU9wdGlvbnNQYW5lbCgpIHtcbiAgICAgICAgdmFyXG4gICAgICAgICAgICBwYW5lbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksXG4gICAgICAgIFxuICAgICAgICAgICAgY2JJbnZlcnNlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpLFxuICAgICAgICAgICAgY2JNaXJyb3IgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIiksXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHNsQnJpZ2h0bmVzcyA9IG5ldyBDUFNsaWRlcigwLCAyMDAsIHRydWUpLFxuICAgICAgICAgICAgc2xDb250cmFzdCA9IG5ldyBDUFNsaWRlcigwLCAyMDAsIHRydWUpLFxuICAgICAgICAgICAgXG4gICAgICAgICAgICBzYW1wbGVTd2F0Y2ggPSBuZXcgQ1BUZXh0dXJlU3dhdGNoKG51bGwsIFRFWFRVUkVfUFJFVklFV19TSVpFLCBURVhUVVJFX1BSRVZJRVdfU0laRSksXG4gICAgICAgICAgICBidG5DdXN0b21pemUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpLFxuICAgICAgICAgICAgXG4gICAgICAgICAgICB0ZXh0dXJlQ29udHJvbHNQYW5lbDtcbiAgICAgICAgXG4gICAgICAgIGZ1bmN0aW9uIHVwZGF0ZVBvcG92ZXJDb250cm9scygpIHtcbiAgICAgICAgICAgIGNiSW52ZXJzZS5jaGVja2VkID0gaW52ZXJzZTtcbiAgICAgICAgICAgIGNiTWlycm9yLmNoZWNrZWQgPSBtaXJyb3I7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHNsQnJpZ2h0bmVzcy5zZXRWYWx1ZShicmlnaHRuZXNzICogMTAwICsgMTAwKTtcbiAgICAgICAgICAgIHNsQ29udHJhc3Quc2V0VmFsdWUoY29udHJhc3QgKiAxMDAgKyAxMDApO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBmdW5jdGlvbiBidWlsZFRleHR1cmVDb250cm9sc1BhbmVsKCkge1xuICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgcGFuZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuXG4gICAgICAgICAgICBjYkludmVyc2UudHlwZSA9IFwiY2hlY2tib3hcIjtcbiAgICAgICAgICAgIGNiSW52ZXJzZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgICAgIGludmVyc2UgPSB0aGlzLmNoZWNrZWQ7XG4gICAgICAgICAgICAgICAgdXBkYXRlU2VsZWN0ZWRUZXh0dXJlKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgcGFuZWwuYXBwZW5kQ2hpbGQod3JhcENoZWNrYm94V2l0aExhYmVsKGNiSW52ZXJzZSwgXCJJbnZlcnNlXCIpKTtcblxuICAgICAgICAgICAgY2JNaXJyb3IudHlwZSA9IFwiY2hlY2tib3hcIjtcbiAgICAgICAgICAgIGNiTWlycm9yLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAgICAgbWlycm9yID0gdGhpcy5jaGVja2VkO1xuICAgICAgICAgICAgICAgIHVwZGF0ZVNlbGVjdGVkVGV4dHVyZSgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHBhbmVsLmFwcGVuZENoaWxkKHdyYXBDaGVja2JveFdpdGhMYWJlbChjYk1pcnJvciwgXCJNaXJyb3JcIikpO1xuXG4gICAgICAgICAgICBzbEJyaWdodG5lc3MudGl0bGUgPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBcIkJyaWdodG5lc3M6IFwiICsgKHZhbHVlIC0gMTAwKSArIFwiJVwiO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgc2xCcmlnaHRuZXNzLm9uKFwidmFsdWVDaGFuZ2VcIiwgZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgICAgICAgICBicmlnaHRuZXNzID0gKHZhbHVlIC0gMTAwKSAvIDEwMC4wO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHVwZGF0ZVNlbGVjdGVkVGV4dHVyZSgpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHBhbmVsLmFwcGVuZENoaWxkKHNsQnJpZ2h0bmVzcy5nZXRFbGVtZW50KCkpO1xuXG4gICAgICAgICAgICBzbENvbnRyYXN0LnRpdGxlID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJDb250cmFzdDogXCIgKyAodmFsdWUgLSAxMDApICsgXCIlXCI7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBzbENvbnRyYXN0Lm9uKFwidmFsdWVDaGFuZ2VcIiwgZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgICAgICAgICBjb250cmFzdCA9ICh2YWx1ZSAtIDEwMCkgLyAxMDA7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgdXBkYXRlU2VsZWN0ZWRUZXh0dXJlKCk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgcGFuZWwuYXBwZW5kQ2hpbGQoc2xDb250cmFzdC5nZXRFbGVtZW50KCkpO1xuXG4gICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICBva2F5QnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKSxcbiAgICAgICAgICAgICAgICByZXNldEJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIG9rYXlCdXR0b24uaW5uZXJIVE1MID0gXCJPa1wiO1xuICAgICAgICAgICAgb2theUJ1dHRvbi5jbGFzc05hbWUgPSBcImJ0biBidG4tcHJpbWFyeSBidG4tc21cIjtcbiAgICAgICAgICAgIG9rYXlCdXR0b24udHlwZSA9IFwiYnV0dG9uXCI7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIG9rYXlCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgICAgICAkKGJ0bkN1c3RvbWl6ZSkucG9wb3ZlcignaGlkZScpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHBhbmVsLmFwcGVuZENoaWxkKG9rYXlCdXR0b24pO1xuICAgICAgICAgICAgcGFuZWwuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoXCIgXCIpKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgcmVzZXRCdXR0b24uaW5uZXJIVE1MID0gXCJSZXNldFwiO1xuICAgICAgICAgICAgcmVzZXRCdXR0b24uY2xhc3NOYW1lID0gXCJidG4gYnRuLWRlZmF1bHQgYnRuLXNtXCI7XG4gICAgICAgICAgICByZXNldEJ1dHRvbi50eXBlID0gXCJidXR0b25cIjtcblxuICAgICAgICAgICAgcmVzZXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgICAgICBicmlnaHRuZXNzID0gMDtcbiAgICAgICAgICAgICAgICBjb250cmFzdCA9IDA7XG4gICAgICAgICAgICAgICAgbWlycm9yID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgaW52ZXJzZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHVwZGF0ZVBvcG92ZXJDb250cm9scygpO1xuICAgICAgICAgICAgICAgIHVwZGF0ZVNlbGVjdGVkVGV4dHVyZSgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHBhbmVsLmFwcGVuZENoaWxkKHJlc2V0QnV0dG9uKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdXBkYXRlUG9wb3ZlckNvbnRyb2xzKCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHJldHVybiBwYW5lbDtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gVE9ETyB1c2UgZXZlbnRzIGluc3RlYWRcbiAgICAgICAgdGhpcy51cGRhdGVUZXh0dXJlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBidG5DdXN0b21pemUuZGlzYWJsZWQgPSAocHJvY2Vzc2VkVGV4dHVyZSA9PSBudWxsKTtcbiAgICAgICAgICAgIHNhbXBsZVN3YXRjaC5zZXRUZXh0dXJlKHByb2Nlc3NlZFRleHR1cmUpO1xuICAgICAgICB9O1xuICAgICAgICBcbiAgICAgICAgdGhpcy5nZXRFbGVtZW50ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gcGFuZWw7XG4gICAgICAgIH1cblxuICAgICAgICBwYW5lbC5jbGFzc05hbWUgPSBcImNoaWNrZW5wYWludC10ZXh0dXJlLW9wdGlvbnNcIjtcbiAgICAgICAgcGFuZWwuYXBwZW5kQ2hpbGQoc2FtcGxlU3dhdGNoLmdldEVsZW1lbnQoKSk7XG5cbiAgICAgICAgYnRuQ3VzdG9taXplLnR5cGUgPSBcImJ1dHRvblwiO1xuICAgICAgICBidG5DdXN0b21pemUuY2xhc3NOYW1lID0gXCJidG4gYnRuLWRlZmF1bHQgYnRuLXNtXCI7XG4gICAgICAgIGJ0bkN1c3RvbWl6ZS5pbm5lckhUTUwgPSBcIkN1c3RvbWl6ZVwiO1xuXG4gICAgICAgIHRleHR1cmVDb250cm9sc1BhbmVsID0gYnVpbGRUZXh0dXJlQ29udHJvbHNQYW5lbCgpO1xuICAgICAgICBcbiAgICAgICAgJChidG5DdXN0b21pemUpXG4gICAgICAgICAgICAucG9wb3Zlcih7XG4gICAgICAgICAgICAgICAgaHRtbDogdHJ1ZSxcbiAgICAgICAgICAgICAgICBjb250ZW50OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRleHR1cmVDb250cm9sc1BhbmVsO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgdHJpZ2dlcjogXCJtYW51YWxcIlxuICAgICAgICAgICAgfSkuXG4gICAgICAgICAgICBvbihcImNsaWNrXCIsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICQodGhpcykucG9wb3ZlcihcInRvZ2dsZVwiKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgcGFuZWwuYXBwZW5kQ2hpbGQoYnRuQ3VzdG9taXplKTtcbiAgICAgICAgXG4gICAgICAgIHRoaXMudXBkYXRlVGV4dHVyZSgpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIENQVGV4dHVyZVN3YXRjaCh0ZXh0dXJlLCB3aWR0aCwgaGVpZ2h0KSB7XG4gICAgICAgIHZhclxuICAgICAgICAgICAgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKSxcbiAgICAgICAgICAgIGNhbnZhc0NvbnRleHQgPSBjYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpLFxuICAgICAgICAgICAgXG4gICAgICAgICAgICB0aGF0ID0gdGhpcztcblxuICAgICAgICB0aGlzLnNldFRleHR1cmUgPSBmdW5jdGlvbih0ZXh0dXJlKSB7XG4gICAgICAgICAgICB0aGlzLnRleHR1cmUgPSB0ZXh0dXJlO1xuXG4gICAgICAgICAgICB0aGlzLnBhaW50KCk7XG4gICAgICAgIH07XG4gICAgICAgIFxuICAgICAgICB0aGlzLmdldEVsZW1lbnQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiBjYW52YXM7XG4gICAgICAgIH07XG4gICAgICAgIFxuICAgICAgICB0aGlzLnBhaW50ID0gZnVuY3Rpb24oKSAge1xuICAgICAgICAgICAgaWYgKHRoaXMudGV4dHVyZSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgY2FudmFzQ29udGV4dC5maWxsU3R5bGUgPSBjYW52YXNDb250ZXh0LmNyZWF0ZVBhdHRlcm4odGhpcy50ZXh0dXJlLnRvQ2FudmFzKCksIFwicmVwZWF0XCIpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjYW52YXNDb250ZXh0LmZpbGxTdHlsZSA9ICd3aGl0ZSc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYW52YXNDb250ZXh0LmZpbGxSZWN0KDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7XG4gICAgICAgIH07XG4gICAgICAgIFxuICAgICAgICBjYW52YXMuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdGhhdC5lbWl0KFwiY2xpY2tcIik7XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgY2FudmFzLndpZHRoID0gd2lkdGg7XG4gICAgICAgIGNhbnZhcy5oZWlnaHQgPSBoZWlnaHQ7XG4gICAgICAgIFxuICAgICAgICB0aGlzLnNldFRleHR1cmUodGV4dHVyZSk7XG4gICAgfVxuICAgIFxuICAgIENQVGV4dHVyZVN3YXRjaC5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKEV2ZW50RW1pdHRlci5wcm90b3R5cGUpO1xuICAgIENQVGV4dHVyZVN3YXRjaC5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBDUFRleHR1cmVTd2F0Y2g7XG4gICAgXG4gICAgb3B0aW9uc1BhbmVsID0gbmV3IENQVGV4dHVyZU9wdGlvbnNQYW5lbCgpXG4gICAgXG4gICAgYm9keS5hcHBlbmRDaGlsZChvcHRpb25zUGFuZWwuZ2V0RWxlbWVudCgpKTtcblxuICAgIHRleHR1cmVzUGFuZWwuY2xhc3NOYW1lID0gJ2NoaWNrZW5wYWludC10ZXh0dXJlLXN3YXRjaGVzJztcblxuICAgIGJvZHkuYXBwZW5kQ2hpbGQodGV4dHVyZXNQYW5lbCk7XG4gICAgXG4gICAgYWRkVGV4dHVyZXMobWFrZVByb2NlZHVyYWxUZXh0dXJlcygpKTtcbiAgICBcbiAgICBsb2FkVGV4dHVyZXMoY29udHJvbGxlci5nZXRSZXNvdXJjZXNSb290KCkgKyBcImdmeC90ZXh0dXJlczMyLnBuZ1wiLCAzMiwgMzIsIDIsIGZ1bmN0aW9uKGxvYWRlZFRleHR1cmVzKSB7XG4gICAgICAgIGFkZFRleHR1cmVzKGxvYWRlZFRleHR1cmVzKTtcbiAgICB9KTtcbn1cblxuQ1BUZXh0dXJlUGFsZXR0ZS5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKENQUGFsZXR0ZS5wcm90b3R5cGUpO1xuQ1BUZXh0dXJlUGFsZXR0ZS5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBDUFRleHR1cmVQYWxldHRlO1xuIiwiLypcbiAgICBDaGlja2VuUGFpbnRcbiAgICBcbiAgICBDaGlja2VuUGFpbnQgaXMgYSB0cmFuc2xhdGlvbiBvZiBDaGliaVBhaW50IGZyb20gSmF2YSB0byBKYXZhU2NyaXB0XG4gICAgYnkgTmljaG9sYXMgU2hlcmxvY2sgLyBDaGlja2VuIFNtb290aGllLlxuICAgIFxuICAgIENoaWJpUGFpbnQgaXMgQ29weXJpZ2h0IChjKSAyMDA2LTIwMDggTWFyYyBTY2hlZmVyXG5cbiAgICBDaGlja2VuUGFpbnQgaXMgZnJlZSBzb2Z0d2FyZTogeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yIG1vZGlmeVxuICAgIGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgYXMgcHVibGlzaGVkIGJ5XG4gICAgdGhlIEZyZWUgU29mdHdhcmUgRm91bmRhdGlvbiwgZWl0aGVyIHZlcnNpb24gMyBvZiB0aGUgTGljZW5zZSwgb3JcbiAgICAoYXQgeW91ciBvcHRpb24pIGFueSBsYXRlciB2ZXJzaW9uLlxuXG4gICAgQ2hpY2tlblBhaW50IGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsXG4gICAgYnV0IFdJVEhPVVQgQU5ZIFdBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2ZcbiAgICBNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuICBTZWUgdGhlXG4gICAgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy5cblxuICAgIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXG4gICAgYWxvbmcgd2l0aCBDaGlja2VuUGFpbnQuIElmIG5vdCwgc2VlIDxodHRwOi8vd3d3LmdudS5vcmcvbGljZW5zZXMvPi5cbiovXG5cbmltcG9ydCBDUFBhbGV0dGUgZnJvbSAnLi9DUFBhbGV0dGUnO1xuaW1wb3J0IENoaWNrZW5QYWludCBmcm9tICcuLi9DaGlja2VuUGFpbnQnO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBDUFRvb2xQYWxldHRlKGNwQ29udHJvbGxlcikge1xuICAgIENQUGFsZXR0ZS5jYWxsKHRoaXMsIGNwQ29udHJvbGxlciwgXCJ0b29sXCIsIFwiVG9vbHNcIik7XG4gICAgXG4gICAgdmFyIFxuICAgICAgICB0aGF0ID0gdGhpcyxcblxuICAgICAgICBidXR0b25zID0gW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJjaGlja2VucGFpbnQtdG9vbC1yZWN0LXNlbGVjdGlvblwiLFxuICAgICAgICAgICAgICAgIGNvbW1hbmQ6IFwiQ1BSZWN0U2VsZWN0aW9uXCIsXG4gICAgICAgICAgICAgICAgdG9vbFRpcDogXCJNYXJxdWVlXCIsXG4gICAgICAgICAgICAgICAgc2hvcnRjdXQ6IFwibVwiLFxuICAgICAgICAgICAgICAgIG1vZGU6IENoaWNrZW5QYWludC5NX1JFQ1RfU0VMRUNUSU9OXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJjaGlja2VucGFpbnQtdG9vbC1tb3ZlXCIsXG4gICAgICAgICAgICAgICAgY29tbWFuZDogXCJDUE1vdmVUb29sXCIsXG4gICAgICAgICAgICAgICAgdG9vbFRpcDogXCJNb3ZlIHRvb2xcIixcbiAgICAgICAgICAgICAgICBzaG9ydGN1dDogXCJ2XCIsXG4gICAgICAgICAgICAgICAgbW9kZTogQ2hpY2tlblBhaW50Lk1fTU9WRV9UT09MXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJjaGlja2VucGFpbnQtdG9vbC1mbG9vZC1maWxsXCIsXG4gICAgICAgICAgICAgICAgY29tbWFuZDogXCJDUEZsb29kRmlsbFwiLFxuICAgICAgICAgICAgICAgIHRvb2xUaXA6IFwiRmxvb2QgZmlsbFwiLFxuICAgICAgICAgICAgICAgIHNob3J0Y3V0OiBcImZcIixcbiAgICAgICAgICAgICAgICBtb2RlOiBDaGlja2VuUGFpbnQuTV9GTE9PREZJTExcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBcImNoaWNrZW5wYWludC10b29sLWdyYWRpZW50LWZpbGxcIixcbiAgICAgICAgICAgICAgICBjb21tYW5kOiBcIkNQR3JhZGllbnRGaWxsXCIsXG4gICAgICAgICAgICAgICAgdG9vbFRpcDogXCJHcmFkaWVudCBmaWxsXCIsXG4gICAgICAgICAgICAgICAgc2hvcnRjdXQ6IFwiZ1wiLFxuICAgICAgICAgICAgICAgIG1vZGU6IENoaWNrZW5QYWludC5NX0dSQURJRU5URklMTFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IFwiY2hpY2tlbnBhaW50LXRvb2wtY29sb3ItcGlja2VyXCIsXG4gICAgICAgICAgICAgICAgY29tbWFuZDogXCJDUENvbG9yUGlja2VyXCIsXG4gICAgICAgICAgICAgICAgdG9vbFRpcDogXCJDb2xvciBwaWNrZXJcIixcbiAgICAgICAgICAgICAgICBzaG9ydGN1dDogXCJpXCIsXG4gICAgICAgICAgICAgICAgbW9kZTogQ2hpY2tlblBhaW50Lk1fQ09MT1JfUElDS0VSXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJjaGlja2VucGFpbnQtdG9vbC1yb3RhdGUtY2FudmFzXCIsXG4gICAgICAgICAgICAgICAgY29tbWFuZDogXCJDUFJvdGF0ZUNhbnZhc1wiLFxuICAgICAgICAgICAgICAgIGNvbW1hbmREb3VibGVDbGljazogXCJDUFJlc2V0Q2FudmFzUm90YXRpb25cIixcbiAgICAgICAgICAgICAgICB0b29sVGlwOiBcIlJvdGF0ZSBjYW52YXNcIixcbiAgICAgICAgICAgICAgICBtb2RlOiBDaGlja2VuUGFpbnQuTV9ST1RBVEVfQ0FOVkFTXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJjaGlja2VucGFpbnQtdG9vbC1wZW5jaWxcIixcbiAgICAgICAgICAgICAgICBjb21tYW5kOiBcIkNQUGVuY2lsXCIsXG4gICAgICAgICAgICAgICAgdG9vbFRpcDogXCJQZW5jaWxcIixcbiAgICAgICAgICAgICAgICBtb2RlOiBDaGlja2VuUGFpbnQuTV9EUkFXLFxuICAgICAgICAgICAgICAgIHRvb2w6IENoaWNrZW5QYWludC5UX1BFTkNJTFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IFwiY2hpY2tlbnBhaW50LXRvb2wtcGVuXCIsXG4gICAgICAgICAgICAgICAgY29tbWFuZDogXCJDUFBlblwiLFxuICAgICAgICAgICAgICAgIHRvb2xUaXA6IFwiUGVuXCIsXG4gICAgICAgICAgICAgICAgc2VsZWN0ZWQ6IHRydWUsIC8vIFRPRE8gYSBiZXR0ZXIgbWVjaGFuaXNtIGZvciB0aGUgY29udHJvbGxlciB0byBsZXQgdXMga25vdyB0aGUgaW5pdGlhbCB0b29sXG4gICAgICAgICAgICAgICAgbW9kZTogQ2hpY2tlblBhaW50Lk1fRFJBVyxcbiAgICAgICAgICAgICAgICB0b29sOiBDaGlja2VuUGFpbnQuVF9QRU5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBcImNoaWNrZW5wYWludC10b29sLWFpcmJydXNoXCIsXG4gICAgICAgICAgICAgICAgY29tbWFuZDogXCJDUEFpcmJydXNoXCIsXG4gICAgICAgICAgICAgICAgdG9vbFRpcDogXCJBaXJicnVzaFwiLFxuICAgICAgICAgICAgICAgIG1vZGU6IENoaWNrZW5QYWludC5NX0RSQVcsXG4gICAgICAgICAgICAgICAgdG9vbDogQ2hpY2tlblBhaW50LlRfQUlSQlJVU0hcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBcImNoaWNrZW5wYWludC10b29sLXdhdGVyXCIsXG4gICAgICAgICAgICAgICAgY29tbWFuZDogXCJDUFdhdGVyXCIsXG4gICAgICAgICAgICAgICAgdG9vbFRpcDogXCJXYXRlcnBhaW50XCIsXG4gICAgICAgICAgICAgICAgbW9kZTogQ2hpY2tlblBhaW50Lk1fRFJBVyxcbiAgICAgICAgICAgICAgICB0b29sOiBDaGlja2VuUGFpbnQuVF9XQVRFUlxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IFwiY2hpY2tlbnBhaW50LXRvb2wtZXJhc2VyXCIsXG4gICAgICAgICAgICAgICAgY29tbWFuZDogXCJDUEVyYXNlclwiLFxuICAgICAgICAgICAgICAgIHRvb2xUaXA6IFwiRXJhc2VyXCIsXG4gICAgICAgICAgICAgICAgc2hvcnRjdXQ6IFwiZVwiLFxuICAgICAgICAgICAgICAgIG1vZGU6IENoaWNrZW5QYWludC5NX0RSQVcsXG4gICAgICAgICAgICAgICAgdG9vbDogQ2hpY2tlblBhaW50LlRfRVJBU0VSXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJjaGlja2VucGFpbnQtdG9vbC1zb2Z0LWVyYXNlclwiLFxuICAgICAgICAgICAgICAgIGNvbW1hbmQ6IFwiQ1BTb2Z0RXJhc2VyXCIsXG4gICAgICAgICAgICAgICAgdG9vbFRpcDogXCJTb2Z0IGVyYXNlclwiLFxuICAgICAgICAgICAgICAgIG1vZGU6IENoaWNrZW5QYWludC5NX0RSQVcsXG4gICAgICAgICAgICAgICAgdG9vbDogQ2hpY2tlblBhaW50LlRfU09GVEVSQVNFUlxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IFwiY2hpY2tlbnBhaW50LXRvb2wtc211ZGdlXCIsXG4gICAgICAgICAgICAgICAgY29tbWFuZDogXCJDUFNtdWRnZVwiLFxuICAgICAgICAgICAgICAgIHRvb2xUaXA6IFwiU211ZGdlXCIsXG4gICAgICAgICAgICAgICAgbW9kZTogQ2hpY2tlblBhaW50Lk1fRFJBVyxcbiAgICAgICAgICAgICAgICB0b29sOiBDaGlja2VuUGFpbnQuVF9TTVVER0VcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBcImNoaWNrZW5wYWludC10b29sLWJsZW5kZXJcIixcbiAgICAgICAgICAgICAgICBjb21tYW5kOiBcIkNQQmxlbmRlclwiLFxuICAgICAgICAgICAgICAgIHRvb2xUaXA6IFwiQmxlbmRlclwiLFxuICAgICAgICAgICAgICAgIG1vZGU6IENoaWNrZW5QYWludC5NX0RSQVcsXG4gICAgICAgICAgICAgICAgdG9vbDogQ2hpY2tlblBhaW50LlRfQkxFTkRFUlxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IFwiY2hpY2tlbnBhaW50LXRvb2wtZG9kZ2VcIixcbiAgICAgICAgICAgICAgICBjb21tYW5kOiBcIkNQRG9kZ2VcIixcbiAgICAgICAgICAgICAgICB0b29sVGlwOiBcIkRvZGdlXCIsXG4gICAgICAgICAgICAgICAgc2hvcnRjdXQ6IFwib1wiLFxuICAgICAgICAgICAgICAgIG1vZGU6IENoaWNrZW5QYWludC5NX0RSQVcsXG4gICAgICAgICAgICAgICAgdG9vbDogQ2hpY2tlblBhaW50LlRfRE9ER0VcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBcImNoaWNrZW5wYWludC10b29sLWJ1cm5cIixcbiAgICAgICAgICAgICAgICBjb21tYW5kOiBcIkNQQnVyblwiLFxuICAgICAgICAgICAgICAgIHRvb2xUaXA6IFwiQnVyblwiLFxuICAgICAgICAgICAgICAgIHNob3J0Y3V0OiBcInBcIixcbiAgICAgICAgICAgICAgICBtb2RlOiBDaGlja2VuUGFpbnQuTV9EUkFXLFxuICAgICAgICAgICAgICAgIHRvb2w6IENoaWNrZW5QYWludC5UX0JVUk5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBcImNoaWNrZW5wYWludC10b29sLWJsdXJcIixcbiAgICAgICAgICAgICAgICBjb21tYW5kOiBcIkNQQmx1clwiLFxuICAgICAgICAgICAgICAgIHRvb2xUaXA6IFwiQmx1clwiLFxuICAgICAgICAgICAgICAgIG1vZGU6IENoaWNrZW5QYWludC5NX0RSQVcsXG4gICAgICAgICAgICAgICAgdG9vbDogQ2hpY2tlblBhaW50LlRfQkxVUlxuICAgICAgICAgICAgfVxuICAgICAgICBdLFxuICAgICAgICBsaXN0RWxlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ1bFwiKTtcbiAgICBcbiAgICBmdW5jdGlvbiBidXR0b25DbGlja2VkKGUpIHtcbiAgICAgICAgaWYgKHRoaXMubm9kZU5hbWUgPT0gXCJMSVwiKSB7XG4gICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICBidXR0b24gPSBidXR0b25zW3BhcnNlSW50KHRoaXMuZ2V0QXR0cmlidXRlKFwiZGF0YS1idXR0b25JbmRleFwiKSwgMTApXTtcblxuICAgICAgICAgICAgY3BDb250cm9sbGVyLmFjdGlvblBlcmZvcm1lZCh7YWN0aW9uOiBidXR0b24uY29tbWFuZH0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYnVpbGRCdXR0b25zKCkge1xuICAgICAgICB2YXJcbiAgICAgICAgICAgIGJvZHkgPSB0aGF0LmdldEJvZHlFbGVtZW50KCk7XG4gICAgICAgIFxuICAgICAgICBsaXN0RWxlbS5jbGFzc05hbWUgPSBcImNoaWNrZW5wYWludC10b29scyBsaXN0LXVuc3R5bGVkXCI7XG4gICAgICAgIFxuICAgICAgICBmb3IgKHZhciBpIGluIGJ1dHRvbnMpIHtcbiAgICAgICAgICAgIChmdW5jdGlvbihpKSB7XG4gICAgICAgICAgICAgICAgdmFyIFxuICAgICAgICAgICAgICAgICAgICBidXR0b24gPSBidXR0b25zW2ldLFxuICAgICAgICAgICAgICAgICAgICBidXR0b25FbGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxpXCIpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGJ1dHRvbkVsZW0uY2xhc3NOYW1lID0gXCJjaGlja2VucGFpbnQtdG9vbGJhci1idXR0b24gXCIgKyBidXR0b24uY2xhc3NOYW1lO1xuICAgICAgICAgICAgICAgIGJ1dHRvbkVsZW0uc2V0QXR0cmlidXRlKFwiZGF0YS1idXR0b25JbmRleFwiLCBpKTtcblxuICAgICAgICAgICAgICAgIGJ1dHRvbkVsZW0uc2V0QXR0cmlidXRlKCdkYXRhLW1vZGUnLCBidXR0b24ubW9kZSk7XG4gICAgICAgICAgICAgICAgaWYgKGJ1dHRvbi50b29sICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgYnV0dG9uRWxlbS5zZXRBdHRyaWJ1dGUoJ2RhdGEtdG9vbCcsIGJ1dHRvbi50b29sKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgYnV0dG9uRWxlbS50aXRsZSA9IGJ1dHRvbi50b29sVGlwO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGlmIChidXR0b24uc2hvcnRjdXQpIHtcbiAgICAgICAgICAgICAgICAgICAgYnV0dG9uRWxlbS50aXRsZSArPSBcIiAoXCIgKyBidXR0b24uc2hvcnRjdXQudG9VcHBlckNhc2UoKSArIFwiKVwiO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAga2V5KGJ1dHRvbi5zaG9ydGN1dCwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBidXR0b25DbGlja2VkLmNhbGwoYnV0dG9uRWxlbSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGlmIChidXR0b24uc2VsZWN0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgYnV0dG9uRWxlbS5jbGFzc05hbWUgPSBidXR0b25FbGVtLmNsYXNzTmFtZSArIFwiIHNlbGVjdGVkXCI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGxpc3RFbGVtLmFwcGVuZENoaWxkKGJ1dHRvbkVsZW0pO1xuICAgICAgICAgICAgfSkoaSk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgICQobGlzdEVsZW0pLm9uKFwiY2xpY2tcIiwgXCJsaVwiLCBidXR0b25DbGlja2VkKTtcbiAgICAgICAgXG4gICAgICAgIGxpc3RFbGVtLmFkZEV2ZW50TGlzdGVuZXIoXCJkYmxjbGlja1wiLCBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5ub2RlTmFtZSA9PSBcIkxJXCIpIHtcbiAgICAgICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICAgICAgYnV0dG9uID0gYnV0dG9uc1twYXJzZUludCh0aGlzLmdldEF0dHJpYnV0ZShcImRhdGEtYnV0dG9uSW5kZXhcIiksIDEwKV07XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgaWYgKGJ1dHRvbi5jb21tYW5kRG91YmxlQ2xpY2spIHtcbiAgICAgICAgICAgICAgICAgICAgY3BDb250cm9sbGVyLmFjdGlvblBlcmZvcm1lZCh7YWN0aW9uOiBidXR0b24uY29tbWFuZERvdWJsZUNsaWNrfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIGJvZHkuYXBwZW5kQ2hpbGQobGlzdEVsZW0pO1xuICAgIH1cblxuICAgIGNwQ29udHJvbGxlci5vbihcIm1vZGVDaGFuZ2VcIiwgZnVuY3Rpb24obmV3TW9kZSkge1xuICAgICAgICB2YXJcbiAgICAgICAgICAgIGJvZHkgPSB0aGF0LmdldEJvZHlFbGVtZW50KCk7XG5cbiAgICAgICAgJChcImxpXCIsIGJvZHkpLnJlbW92ZUNsYXNzKFwic2VsZWN0ZWRcIik7XG4gICAgICAgIFxuICAgICAgICBpZiAobmV3TW9kZSA9PSBDaGlja2VuUGFpbnQuTV9EUkFXKSB7XG4gICAgICAgICAgICAkKFwibGlbZGF0YS10b29sPVwiICsgY3BDb250cm9sbGVyLmdldEN1clRvb2woKSArIFwiXVwiLCBib2R5KS5hZGRDbGFzcyhcInNlbGVjdGVkXCIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgJChcImxpW2RhdGEtbW9kZT1cIiArIG5ld01vZGUgKyBcIl1cIiwgYm9keSkuYWRkQ2xhc3MoXCJzZWxlY3RlZFwiKTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgY3BDb250cm9sbGVyLm9uKFwidG9vbENoYW5nZVwiLCBmdW5jdGlvbihuZXdUb29sKSB7XG4gICAgICAgIHZhclxuICAgICAgICAgICAgYm9keSA9IHRoYXQuZ2V0Qm9keUVsZW1lbnQoKTtcblxuICAgICAgICBpZiAoY3BDb250cm9sbGVyLmdldEN1ck1vZGUoKSA9PSBDaGlja2VuUGFpbnQuTV9EUkFXKSB7XG4gICAgICAgICAgICAkKFwibGlcIiwgYm9keSkucmVtb3ZlQ2xhc3MoXCJzZWxlY3RlZFwiKTtcblxuICAgICAgICAgICAgJChcImxpW2RhdGEtdG9vbD1cIiArIG5ld1Rvb2wgKyBcIl1cIiwgYm9keSkuYWRkQ2xhc3MoXCJzZWxlY3RlZFwiKTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIFxuICAgIGJ1aWxkQnV0dG9ucygpO1xufVxuXG5DUFRvb2xQYWxldHRlLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoQ1BQYWxldHRlLnByb3RvdHlwZSk7XG5DUFRvb2xQYWxldHRlLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IENQVG9vbFBhbGV0dGU7XG4iLCIvKiBcbiAqIEJ5IE5pY2hvbGFzIFNoZXJsb2NrIDxuLnNoZXJsb2NrQGdtYWlsLmNvbT5cbiAqIFxuICogUmVsZWFzZWQgdW5kZXIgdGhlIFdURlBMdjIgaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvV1RGUExcbiAqL1xuXG5pbXBvcnQgQXJyYXlEYXRhU3RyZWFtIGZyb20gXCIuL0FycmF5RGF0YVN0cmVhbVwiO1xuXG52YXIgXG4gICAgQUNPX0NPTE9SU1BBQ0VfUkdCID0gMCxcbiAgICBBQ09fQ09MT1JTUEFDRV9IU0IgPSAxLFxuICAgIEFDT19DT0xPUlNQQUNFX0NNWUsgPSAyLFxuICAgIEFDT19DT0xPUlNQQUNFX0xBQiA9IDcsXG4gICAgQUNPX0NPTE9SU1BBQ0VfR1JBWVNDQUxFID0gODtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gQWRvYmVDb2xvclRhYmxlKCkge1xufVxuXG4vKipcbiAqIFJlYWQgYW4gLmFjbyAoQWRvYmUgQ09sb3IpIHN3YXRjaGVzIGZpbGUgYW5kIHJldHVybiBhbiBhcnJheSBvZiBSR0IgY29sb3JzLlxuICogXG4gKiBTdXBwb3J0cyB2ZXJzaW9uIDEgcGFsZXR0ZXMsIG9ubHkgUkdCIGZvcm1hdC5cbiAqIFxuICogQHBhcmFtIGlucHV0IEEgVWludDhBcnJheSBvZiB0aGUgLmFjbyBmaWxlIGNvbnRlbnRzXG4gKiBAcmV0dXJuIEFuIGFycmF5IG9mIGNvbG91cnMsIG9yIG51bGwgaWYgdGhlIGZpbGUgd2FzIG5vdCBzdXBwb3J0ZWQuXG4gKi9cbkFkb2JlQ29sb3JUYWJsZS5wcm90b3R5cGUucmVhZCA9IGZ1bmN0aW9uKGlucHV0KSB7XG4gICAgaWYgKGlucHV0ID09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIFxuICAgIHZhclxuICAgICAgICBzdHJlYW0gPSBuZXcgQXJyYXlEYXRhU3RyZWFtKG5ldyBVaW50OEFycmF5KGlucHV0KSksXG4gICAgICAgIHZlcnNpb24sIGNvdW50LFxuICAgICAgICByZXN1bHQgPSBbXTtcblxuICAgIHZlcnNpb24gPSBzdHJlYW0ucmVhZFUxNkJFKCk7XG4gICAgaWYgKHZlcnNpb24gIT0gMSkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgY291bnQgPSBzdHJlYW0ucmVhZFUxNkJFKCk7XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNvdW50OyBpKyspIHtcbiAgICAgICAgdmFyXG4gICAgICAgICAgICBjb2xvdXJzcGFjZSA9IHN0cmVhbS5yZWFkVTE2QkUoKTtcblxuICAgICAgICBpZiAoY29sb3Vyc3BhY2UgIT0gQUNPX0NPTE9SU1BBQ0VfUkdCKSB7XG4gICAgICAgICAgICBjb250aW51ZTsgLy8gRHJvcCB1bnN1cHBvcnRlZCBjb2xvdXJzIHNpbGVudGx5XG4gICAgICAgIH1cblxuICAgICAgICAvLyBTY2FsZSBiYWNrIGRvd24gZnJvbSAxNi1iaXQgdG8gOC1iaXRcbiAgICAgICAgdmFyXG4gICAgICAgICAgICByID0gKHN0cmVhbS5yZWFkVTE2QkUoKSAqIDI1NSkgLyA2NTUzNSxcbiAgICAgICAgICAgIGcgPSAoc3RyZWFtLnJlYWRVMTZCRSgpICogMjU1KSAvIDY1NTM1LFxuICAgICAgICAgICAgYiA9IChzdHJlYW0ucmVhZFUxNkJFKCkgKiAyNTUpIC8gNjU1MzU7XG4gICAgICAgIFxuICAgICAgICBzdHJlYW0ucmVhZFUxNkJFKCk7IC8vIHRoaXJkIHZhbHVlIHVudXNlZFxuXG4gICAgICAgIHJlc3VsdC5wdXNoKHIgPDwgMTYgfCBnIDw8IDggfCBiKTtcbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0O1xufTtcblxuLyoqXG4gKiBXcml0ZSBhbiAuYWNvIChBZG9iZSBDT2xvcikgc3dhdGNoZXMgZmlsZSBvZiB0aGUgZ2l2ZW4gYXJyYXkgb2YgUkdCIGNvbG91cnMgKGNvbG9ycyBhcmUgaW50ZWdlcnMgd2l0aCB0aGVcbiAqIGJsdWUgY2hhbm5lbCBpbiB0aGUgbGVhc3Qtc2lnbmlmaWNhbnQgcG9zaXRpb24pLlxuICovXG5BZG9iZUNvbG9yVGFibGUucHJvdG90eXBlLndyaXRlID0gZnVuY3Rpb24oY29sb3Vycykge1xuICAgIHZhclxuICAgICAgICBidWZmZXIgPSBuZXcgVWludDhBcnJheSgyICogMiArIGNvbG91cnMubGVuZ3RoICogMTApLFxuICAgICAgICBzdHJlYW0gPSBuZXcgQXJyYXlEYXRhU3RyZWFtKGJ1ZmZlcik7XG4gICAgXG4gICAgc3RyZWFtLndyaXRlVTE2QkUoMSk7IC8vIFZlcnNpb24gMVxuICAgIHN0cmVhbS53cml0ZVUxNkJFKGNvbG91cnMubGVuZ3RoKTsgLy8gTnVtYmVyIG9mIGNvbG91cnNcbiAgICBcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNvbG91cnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyXG4gICAgICAgICAgICBjb2xvdXIgPSBjb2xvdXJzW2ldO1xuICAgICAgICBcbiAgICAgICAgc3RyZWFtLndyaXRlVTE2QkUoQUNPX0NPTE9SU1BBQ0VfUkdCKTtcblxuICAgICAgICAvLyBTY2FsZSB1cCBjb2xvdXJzIHRvIDE2LWJpdHMgKDY1NTM1LzI1NSA9IDI1NylcbiAgICAgICAgc3RyZWFtLndyaXRlVTE2QkUoKChjb2xvdXIgPj4gMTYpICYgMHhGRikgKiAyNTcpO1xuICAgICAgICBzdHJlYW0ud3JpdGVVMTZCRSgoKGNvbG91ciA+PiA4KSAmIDB4RkYpICogMjU3KTtcbiAgICAgICAgc3RyZWFtLndyaXRlVTE2QkUoKGNvbG91ciAmIDB4RkYpICogMjU3KTtcbiAgICAgICAgc3RyZWFtLndyaXRlVTE2QkUoMCk7XG4gICAgfVxuICAgIFxuICAgIHJldHVybiBzdHJlYW0uZ2V0QXNEYXRhQXJyYXkoKTtcbn07XG4iLCIvKipcbiAqIEEgdG9vbCBmb3IgcHJlc2VudGluZyBhIFVpbnQ4QXJyYXkgYXMgYSBzdHJlYW0gZm9yIHJlYWRpbmcgYW5kIHdyaXRpbmcgc29tZSBzaW1wbGUgZGF0YSB0eXBlcy5cbiAqIFxuICogQnkgTmljaG9sYXMgU2hlcmxvY2sgPG4uc2hlcmxvY2tAZ21haWwuY29tPiAyMDE2LCByZWxlYXNlZCB1bmRlciB0aGUgV1RGUEwgbGljZW5zZS5cbiAqL1xuXG52YXIgRU9GID0gLTE7XG5cbmZ1bmN0aW9uIHNpZ25FeHRlbmQxNkJpdCh3b3JkKSB7XG4gICAgLy9JZiBzaWduIGJpdCBpcyBzZXQsIGZpbGwgdGhlIHRvcCBiaXRzIHdpdGggMXMgdG8gc2lnbi1leHRlbmRcbiAgICByZXR1cm4gKHdvcmQgJiAweDgwMDApID8gKHdvcmQgfCAweEZGRkYwMDAwKSA6IHdvcmQ7XG59XG5cbmZ1bmN0aW9uIHNpZ25FeHRlbmQ4Qml0KGJ5dGUpIHtcbiAgICAvL0lmIHNpZ24gYml0IGlzIHNldCwgZmlsbCB0aGUgdG9wIGJpdHMgd2l0aCAxcyB0byBzaWduLWV4dGVuZFxuICAgIHJldHVybiAoYnl0ZSAmIDB4ODApID8gKGJ5dGUgfCAweEZGRkZGRjAwKSA6IGJ5dGU7XG59XG5cbi8qKlxuICogQ3JlYXRlIGEgc3RyZWFtIG9uIGV4aXN0aW5nIGFycmF5IG9mIHVuc2lnbmVkIGJ5dGUgZGF0YSAoaS5lLiBob3BlZnVsbHkgVWludDhBcnJheSkuXG4gKiBcbiAqIEBwYXJhbSBkYXRhIFVpbnQ4QXJyYXkgdG8gc3RyZWFtIGRhdGEgZnJvbVxuICogQHBhcmFtIHN0YXJ0IFRoZSBpbmRleCBvZiB0aGUgYnl0ZSBpbiB0aGUgYXJyYXkgdGhhdCB3aWxsIGJlIHJlYWQgZmlyc3QsIG9yIGxlYXZlIHVuZGVmaW5lZCB0byBiZWdpbiBhdCB0aGVcbiAqICAgICAgICAgICAgICBiZWdpbm5pbmcgb2YgdGhlIGFycmF5XG4gKiBAcGFyYW0gZW5kIFRoZSBpbmRleCBvZiB0aGUgZW5kIG9mIHRoZSBzdHJlYW0sIG9yIGxlYXZlIHVuZGVmaW5lZCB0byB1c2UgdGhlIGVuZCBvZiB0aGUgYXJyYXkgYXMgdGhlIGVuZCBvZlxuICogICAgICAgICAgICB0aGUgc3RyZWFtLlxuICovXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBBcnJheURhdGFTdHJlYW0oZGF0YSwgc3RhcnQsIGVuZCkge1xuICAgIHRoaXMuZGF0YSA9IGRhdGE7XG4gICAgdGhpcy5lb2YgPSBmYWxzZTtcbiAgICB0aGlzLnN0YXJ0ID0gc3RhcnQgPT09IHVuZGVmaW5lZCA/IDAgOiBzdGFydDtcbiAgICB0aGlzLmVuZCA9IGVuZCA9PT0gdW5kZWZpbmVkID8gZGF0YS5sZW5ndGggOiBlbmQ7XG4gICAgdGhpcy5wb3MgPSB0aGlzLnN0YXJ0O1xufTtcblxuLyoqXG4gKiBSZWFkIGEgc2luZ2xlIGJ5dGUgZnJvbSB0aGUgc3RyZWFtIGFuZCB0dXJuIGl0IGludG8gYSBKYXZhU2NyaXB0IHN0cmluZyAoYXNzdW1pbmcgQVNDSUkpLlxuICogXG4gKiBAcmV0dXJucyBTdHJpbmcgY29udGFpbmluZyBvbmUgY2hhcmFjdGVyLCBvciBFT0YgaWYgdGhlIGVuZCBvZiBmaWxlIHdhcyByZWFjaGVkIChlb2YgZmxhZ1xuICogaXMgc2V0KS5cbiAqL1xuQXJyYXlEYXRhU3RyZWFtLnByb3RvdHlwZS5yZWFkQ2hhciA9IGZ1bmN0aW9uKCkge1xuICAgIGlmICh0aGlzLnBvcyA8IHRoaXMuZW5kKSB7XG4gICAgICAgIHJldHVybiBTdHJpbmcuZnJvbUNoYXJDb2RlKHRoaXMuZGF0YVt0aGlzLnBvcysrXSk7XG4gICAgfVxuXG4gICAgdGhpcy5lb2YgPSB0cnVlO1xuICAgIHJldHVybiBFT0Y7XG59O1xuXG4vKipcbiAqIFJlYWQgb25lIHVuc2lnbmVkIGJ5dGUgZnJvbSB0aGUgc3RyZWFtXG4gKiBcbiAqIEByZXR1cm5zIFVuc2lnbmVkIGJ5dGUsIG9yIEVPRiBpZiB0aGUgZW5kIG9mIGZpbGUgd2FzIHJlYWNoZWQgKGVvZiBmbGFnIGlzIHNldCkuXG4gKi9cbkFycmF5RGF0YVN0cmVhbS5wcm90b3R5cGUucmVhZEJ5dGUgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAodGhpcy5wb3MgPCB0aGlzLmVuZCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kYXRhW3RoaXMucG9zKytdO1xuICAgIH1cblxuICAgIHRoaXMuZW9mID0gdHJ1ZTtcbiAgICByZXR1cm4gRU9GO1xufTtcblxuLy9TeW5vbnltOlxuQXJyYXlEYXRhU3RyZWFtLnByb3RvdHlwZS5yZWFkVTggPSBBcnJheURhdGFTdHJlYW0ucHJvdG90eXBlLnJlYWRCeXRlO1xuXG5BcnJheURhdGFTdHJlYW0ucHJvdG90eXBlLnJlYWRTOCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBzaWduRXh0ZW5kOEJpdCh0aGlzLnJlYWRCeXRlKCkpO1xufTtcblxuQXJyYXlEYXRhU3RyZWFtLnByb3RvdHlwZS51bnJlYWRDaGFyID0gZnVuY3Rpb24oYykge1xuICAgIHRoaXMucG9zLS07XG59O1xuICAgIFxuQXJyYXlEYXRhU3RyZWFtLnByb3RvdHlwZS5wZWVrQ2hhciA9IGZ1bmN0aW9uKCkge1xuICAgIGlmICh0aGlzLnBvcyA8IHRoaXMuZW5kKSB7XG4gICAgICAgIHJldHVybiBTdHJpbmcuZnJvbUNoYXJDb2RlKHRoaXMuZGF0YVt0aGlzLnBvc10pO1xuICAgIH1cblxuICAgIHRoaXMuZW9mID0gdHJ1ZTtcbiAgICByZXR1cm4gRU9GO1xufTtcblxuQXJyYXlEYXRhU3RyZWFtLnByb3RvdHlwZS5yZWFkU3RyaW5nID0gZnVuY3Rpb24obGVuZ3RoKSB7XG4gICAgdmFyIFxuICAgICAgICBjaGFycyA9IG5ldyBBcnJheShsZW5ndGgpLFxuICAgICAgICBpO1xuICAgIFxuICAgIGZvciAoaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICBjaGFyc1tpXSA9IHRoaXMucmVhZENoYXIoKTtcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIGNoYXJzLmpvaW4oXCJcIik7XG59O1xuXG5BcnJheURhdGFTdHJlYW0ucHJvdG90eXBlLnJlYWRTMTYgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgXG4gICAgICAgIGIxID0gdGhpcy5yZWFkQnl0ZSgpLFxuICAgICAgICBiMiA9IHRoaXMucmVhZEJ5dGUoKTtcbiAgICBcbiAgICByZXR1cm4gc2lnbkV4dGVuZDE2Qml0KChiMSA8PCA4KSB8IGIyKTsgXG59O1xuXG5BcnJheURhdGFTdHJlYW0ucHJvdG90eXBlLnJlYWRVMTZCRSA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBcbiAgICAgICAgYjEgPSB0aGlzLnJlYWRCeXRlKCksXG4gICAgICAgIGIyID0gdGhpcy5yZWFkQnl0ZSgpO1xuICAgIFxuICAgIHJldHVybiAoYjEgPDwgOCkgfCBiMjsgXG59O1xuXG5BcnJheURhdGFTdHJlYW0ucHJvdG90eXBlLnJlYWRVMTZMRSA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBcbiAgICAgICAgYjEgPSB0aGlzLnJlYWRCeXRlKCksXG4gICAgICAgIGIyID0gdGhpcy5yZWFkQnl0ZSgpO1xuICAgIFxuICAgIHJldHVybiAoYjIgPDwgOCkgfCBiMTsgXG59O1xuXG5BcnJheURhdGFTdHJlYW0ucHJvdG90eXBlLnJlYWRVMzJCRSA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBcbiAgICAgICAgYjEgPSB0aGlzLnJlYWRCeXRlKCksXG4gICAgICAgIGIyID0gdGhpcy5yZWFkQnl0ZSgpLFxuICAgICAgICBiMyA9IHRoaXMucmVhZEJ5dGUoKSxcbiAgICAgICAgYjQgPSB0aGlzLnJlYWRCeXRlKCk7XG4gICAgcmV0dXJuICgoYjEgPDwgMjQpIHwgKGIyIDw8IDE2KSB8IChiMyA8PCA4KSB8IGI0KSA+Pj4gMDsgXG59O1xuXG5BcnJheURhdGFTdHJlYW0ucHJvdG90eXBlLnJlYWRVMzJMRSA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBcbiAgICAgICAgYjEgPSB0aGlzLnJlYWRCeXRlKCksXG4gICAgICAgIGIyID0gdGhpcy5yZWFkQnl0ZSgpLFxuICAgICAgICBiMyA9IHRoaXMucmVhZEJ5dGUoKSxcbiAgICAgICAgYjQgPSB0aGlzLnJlYWRCeXRlKCk7XG4gICAgcmV0dXJuICgoYjQgPDwgMjQpIHwgKGIzIDw8IDE2KSB8IChiMiA8PCA4KSB8IGIxKSA+Pj4gMDsgXG59O1xuXG5BcnJheURhdGFTdHJlYW0ucHJvdG90eXBlLnJlYWRCeXRlcyA9IGZ1bmN0aW9uKGNvdW50KSB7XG4gICAgdmFyXG4gICAgICAgIHJlc3VsdCA9IHRoaXMuZGF0YS5zdWJhcnJheSh0aGlzLnBvcywgdGhpcy5wb3MgKyBjb3VudCk7XG4gICAgXG4gICAgdGhpcy5wb3MgKz0gY291bnQ7XG4gICAgXG4gICAgaWYgKHRoaXMucG9zID4gdGhpcy5lbmQpIHtcbiAgICAgICAgdGhpcy5lb2YgPSB0cnVlO1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4gcmVzdWx0O1xufVxuXG5BcnJheURhdGFTdHJlYW0ucHJvdG90eXBlLnNraXAgPSBmdW5jdGlvbihudW1CeXRlcykge1xuICAgIHRoaXMucG9zICs9IG51bUJ5dGVzO1xuICAgIFxuICAgIGlmICh0aGlzLnBvcyA+IHRoaXMuZW5kKSB7XG4gICAgICAgIHRoaXMuZW9mID0gdHJ1ZTtcbiAgICB9XG59O1xuXG5BcnJheURhdGFTdHJlYW0ucHJvdG90eXBlLnNlZWsgPSBmdW5jdGlvbihvZmZzZXQpIHtcbiAgICB0aGlzLnBvcyA9IG9mZnNldDtcbn07XG5cbkFycmF5RGF0YVN0cmVhbS5wcm90b3R5cGUud3JpdGVCeXRlcyA9IGZ1bmN0aW9uKGFycikge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJyLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHRoaXMuZGF0YVt0aGlzLnBvcysrXSA9IGFycltpXTtcbiAgICB9XG59O1xuXG5BcnJheURhdGFTdHJlYW0ucHJvdG90eXBlLndyaXRlQnl0ZSA9IGZ1bmN0aW9uKGIpIHtcbiAgICB0aGlzLmRhdGFbdGhpcy5wb3MrK10gPSBiO1xufTtcblxuLy9TeW5vbnltOlxuQXJyYXlEYXRhU3RyZWFtLnByb3RvdHlwZS53cml0ZVU4ID0gQXJyYXlEYXRhU3RyZWFtLnByb3RvdHlwZS53cml0ZUJ5dGU7XG5cbkFycmF5RGF0YVN0cmVhbS5wcm90b3R5cGUud3JpdGVVMTZMRSA9IGZ1bmN0aW9uKHUpIHtcbiAgICB0aGlzLmRhdGFbdGhpcy5wb3MrK10gPSB1O1xuICAgIHRoaXMuZGF0YVt0aGlzLnBvcysrXSA9IHUgPj4gODtcbn07XG5cbkFycmF5RGF0YVN0cmVhbS5wcm90b3R5cGUud3JpdGVVMTZCRSA9IGZ1bmN0aW9uKHUpIHtcbiAgICB0aGlzLmRhdGFbdGhpcy5wb3MrK10gPSB1ID4+IDg7XG4gICAgdGhpcy5kYXRhW3RoaXMucG9zKytdID0gdTtcbn07XG5cbkFycmF5RGF0YVN0cmVhbS5wcm90b3R5cGUud3JpdGVVMzJCRSA9IGZ1bmN0aW9uKHUpIHtcbiAgICB0aGlzLmRhdGFbdGhpcy5wb3MrK10gPSB1ID4+IDI0O1xuICAgIHRoaXMuZGF0YVt0aGlzLnBvcysrXSA9IHUgPj4gMTY7XG4gICAgdGhpcy5kYXRhW3RoaXMucG9zKytdID0gdSA+PiA4O1xuICAgIHRoaXMuZGF0YVt0aGlzLnBvcysrXSA9IHU7XG59O1xuXG5BcnJheURhdGFTdHJlYW0ucHJvdG90eXBlLndyaXRlVTMyTEUgPSBmdW5jdGlvbih1KSB7XG4gICAgdGhpcy5kYXRhW3RoaXMucG9zKytdID0gdTtcbiAgICB0aGlzLmRhdGFbdGhpcy5wb3MrK10gPSB1ID4+IDg7XG4gICAgdGhpcy5kYXRhW3RoaXMucG9zKytdID0gdSA+PiAxNjtcbiAgICB0aGlzLmRhdGFbdGhpcy5wb3MrK10gPSB1ID4+IDI0O1xufTtcblxuQXJyYXlEYXRhU3RyZWFtLnByb3RvdHlwZS53cml0ZURvdWJsZUJFID0gZnVuY3Rpb24oZCkge1xuICAgIHZhciBcbiAgICAgICAgYnl0ZXMgPSBuZXcgVWludDhBcnJheShuZXcgRmxvYXQ2NEFycmF5KFtkXSkuYnVmZmVyKTtcbiAgICBcbiAgICBmb3IgKHZhciBpID0gYnl0ZXMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgdGhpcy53cml0ZUJ5dGUoYnl0ZXNbaV0pO1xuICAgIH1cbn07XG5cbkFycmF5RGF0YVN0cmVhbS5wcm90b3R5cGUud3JpdGVGbG9hdEJFID0gZnVuY3Rpb24oZCkge1xuICAgIHZhciBcbiAgICAgICAgYnl0ZXMgPSBuZXcgVWludDhBcnJheShuZXcgRmxvYXQzMkFycmF5KFtkXSkuYnVmZmVyKTtcbiAgICBcbiAgICBmb3IgKHZhciBpID0gYnl0ZXMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgdGhpcy53cml0ZUJ5dGUoYnl0ZXNbaV0pO1xuICAgIH1cbn07XG5cbi8qKlxuICogV3JpdGUgYW4gQVNDSUkgc3RyaW5nIHRvIHRoZSBzdHJlYW1cbiAqL1xuQXJyYXlEYXRhU3RyZWFtLnByb3RvdHlwZS53cml0ZVN0cmluZyA9IGZ1bmN0aW9uKHMpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdGhpcy5kYXRhW3RoaXMucG9zKytdID0gcy5jaGFyQ29kZUF0KGkpO1xuICAgIH1cbn07XG5cbi8qKlxuICogV3JpdGUgdGhlIGdpdmVuIHVuc2lnbmVkIDMyLWJpdCBpbnRlZ2VyIHRvIHRoZSBzdHJlYW0gaW4gYmlnLWVuZGlhbiBvcmRlciB1c2luZyB0aGUgZ2l2ZW4gYnl0ZSB3aWR0aC5cbiAqIE5vIGVycm9yIGNoZWNraW5nIGlzIHBlcmZvcm1lZCB0byBlbnN1cmUgdGhhdCB0aGUgc3VwcGxpZWQgd2lkdGggaXMgY29ycmVjdCBmb3IgdGhlIGludGVnZXIuXG4gKiBcbiAqIE9taXQgdGhlIHdpZHRoIHBhcmFtZXRlciB0byBoYXZlIGl0IGRldGVybWluZWQgYXV0b21hdGljYWxseSBmb3IgeW91LlxuICogXG4gKiBAcGFyYW0gdSBVbnNpZ25lZCBpbnRlZ2VyIHRvIGJlIHdyaXR0ZW5cbiAqIEBwYXJhbSB3aWR0aCBOdW1iZXIgb2YgYnl0ZXMgdG8gd3JpdGUgdG8gdGhlIHN0cmVhbVxuICovXG5BcnJheURhdGFTdHJlYW0ucHJvdG90eXBlLndyaXRlVW5zaWduZWRJbnRCRSA9IGZ1bmN0aW9uKHUsIHdpZHRoKSB7XG4gICAgaWYgKHdpZHRoID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgd2lkdGggPSB0aGlzLm1lYXN1cmVVbnNpZ25lZEludCh1KTtcbiAgICB9XG4gICAgXG4gICAgLy8gRWFjaCBjYXNlIGZhbGxzIHRocm91Z2g6XG4gICAgc3dpdGNoICh3aWR0aCkge1xuICAgICAgICBjYXNlIDU6XG4gICAgICAgICAgICB0aGlzLndyaXRlVTgoTWF0aC5mbG9vcih1IC8gNDI5NDk2NzI5NikpOyAvLyBOZWVkIHRvIHVzZSBkaXZpc2lvbiB0byBhY2Nlc3MgPjMyIGJpdHMgb2YgZmxvYXRpbmcgcG9pbnQgdmFyXG4gICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgIHRoaXMud3JpdGVVOCh1ID4+IDI0KTtcbiAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgdGhpcy53cml0ZVU4KHUgPj4gMTYpO1xuICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICB0aGlzLndyaXRlVTgodSA+PiA4KTtcbiAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgdGhpcy53cml0ZVU4KHUpO1xuICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHRocm93IG5ldyBSdW50aW1lRXhjZXB0aW9uKFwiQmFkIFVJTlQgc2l6ZSBcIiArIHdpZHRoKTtcbiAgICB9XG59O1xuXG4vKipcbiAqIFJldHVybiB0aGUgbnVtYmVyIG9mIGJ5dGVzIG5lZWRlZCB0byBob2xkIHRoZSBub24temVybyBiaXRzIG9mIHRoZSBnaXZlbiB1bnNpZ25lZCBpbnRlZ2VyLlxuICovXG5BcnJheURhdGFTdHJlYW0ucHJvdG90eXBlLm1lYXN1cmVVbnNpZ25lZEludCA9IGZ1bmN0aW9uKHZhbCkge1xuICAgIC8vIEZvcmNlIHRvIDMyLWJpdCB1bnNpZ25lZCBpbnRlZ2VyXG4gICAgaWYgKHZhbCA8ICgxIDw8IDgpKSB7XG4gICAgICAgIHJldHVybiAxO1xuICAgIH0gZWxzZSBpZiAodmFsIDwgKDEgPDwgMTYpKSB7XG4gICAgICAgIHJldHVybiAyO1xuICAgIH0gZWxzZSBpZiAodmFsIDwgKDEgPDwgMjQpKSB7XG4gICAgICAgIHJldHVybiAzO1xuICAgIH0gZWxzZSBpZiAodmFsIDwgNDI5NDk2NzI5Nikge1xuICAgICAgICByZXR1cm4gNDtcbiAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gNTtcbiAgICB9XG59O1xuXG4vKipcbiAqIFJldHVybiBhIHZpZXcgb24gdGhlIHBvcnRpb24gb2YgdGhlIGJ1ZmZlciBmcm9tIHRoZSBiZWdpbm5pbmcgdG8gdGhlIGN1cnJlbnQgc2VlayBwb3NpdGlvbiBhcyBhIFVpbnQ4QXJyYXkuXG4gKi9cbkFycmF5RGF0YVN0cmVhbS5wcm90b3R5cGUuZ2V0QXNEYXRhQXJyYXkgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAodGhpcy5wb3MgPCB0aGlzLmRhdGEuYnl0ZUxlbmd0aCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kYXRhLnN1YmFycmF5KDAsIHRoaXMucG9zKTtcbiAgICB9IGVsc2UgaWYgKHRoaXMucG9zID09IHRoaXMuZGF0YS5ieXRlTGVuZ3RoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRhdGE7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdGhyb3cgXCJBcnJheURhdGFTdHJlYW0ncyBwb3MgbGllcyBiZXlvbmQgZW5kIG9mIGJ1ZmZlclwiOyBcbiAgICAgICAgLy8gQ2hhbmNlIGlzIHByZXR0eSBnb29kIHRoYXQgeW91IG92ZXJmbG93ZWQgdGhlIGVuZCBvZiB0aGUgYnVmZmVyIGR1cmluZyB3cml0aW5nIGFuZCB5b3VyIGZpbGUgaXMgdHJhc2ggXG4gICAgfVxufTtcblxuQXJyYXlEYXRhU3RyZWFtLnByb3RvdHlwZS5FT0YgPSBFT0Y7IiwiLypcbiAgICBDaGlja2VuUGFpbnRcbiAgICBcbiAgICBDaGlja2VuUGFpbnQgaXMgYSB0cmFuc2xhdGlvbiBvZiBDaGliaVBhaW50IGZyb20gSmF2YSB0byBKYXZhU2NyaXB0XG4gICAgYnkgTmljaG9sYXMgU2hlcmxvY2sgLyBDaGlja2VuIFNtb290aGllLlxuICAgIFxuICAgIENoaWJpUGFpbnQgaXMgQ29weXJpZ2h0IChjKSAyMDA2LTIwMDggTWFyYyBTY2hlZmVyXG5cbiAgICBDaGlja2VuUGFpbnQgaXMgZnJlZSBzb2Z0d2FyZTogeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yIG1vZGlmeVxuICAgIGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgYXMgcHVibGlzaGVkIGJ5XG4gICAgdGhlIEZyZWUgU29mdHdhcmUgRm91bmRhdGlvbiwgZWl0aGVyIHZlcnNpb24gMyBvZiB0aGUgTGljZW5zZSwgb3JcbiAgICAoYXQgeW91ciBvcHRpb24pIGFueSBsYXRlciB2ZXJzaW9uLlxuXG4gICAgQ2hpY2tlblBhaW50IGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsXG4gICAgYnV0IFdJVEhPVVQgQU5ZIFdBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2ZcbiAgICBNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuICBTZWUgdGhlXG4gICAgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy5cblxuICAgIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXG4gICAgYWxvbmcgd2l0aCBDaGlja2VuUGFpbnQuIElmIG5vdCwgc2VlIDxodHRwOi8vd3d3LmdudS5vcmcvbGljZW5zZXMvPi5cbiovXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIENQQmV6aWVyKCkge1xuXG4gICAgLy8gSG93IHRvIHVzZSB0aGlzIGNsYXNzOlxuICAgIC8vXG4gICAgLy8gMSAtIHNldCB0aGUgNCBwb2ludHMgY29vcmRpbmF0ZXMgKHgwLTMsIHkwLTMpXG4gICAgLy8gdHdvIG9wdGlvbnM6XG4gICAgLy8gMmEgLSBjYWxsIGluaXQoKSB3aXRoIGRlc2lyZWQgZHQgdGhlbiByZWFkIHRoZSBjdXJyZW50IGNvb3JkaW5hdGUgKEJ4LCBCeSkgYW5kIHVzZSBuZXh0UG9pbnQoKSB0byBjb21wdXRlIHRoZVxuICAgIC8vIG5leHQgcG9pbnRcbiAgICAvLyAyYiAtIHVzZSBvbmUgb2YgdGhlIFwiY29tcHV0ZVwiIG1ldGhvZHMgdG8gY29tcHV0ZSB0aGUgdmFsdWVzIGZvciB0aGUgd2hvbGUgY3VydmUgaW4gb25lIHN0ZXBcblxuICAgIC8vIFRoZSA0IHBvaW50cyBjb29yZGluYXRlc1xuICAgIHRoaXMueDAgPSB0aGlzLnkwID0gdGhpcy54MSA9IHRoaXMueTEgPSB0aGlzLngyID0gdGhpcy55MiA9IHRoaXMueDMgPSB0aGlzLnkzID0gMC4wO1xuXG4gICAgLy8gdXNlZCB0byBjb21wdXRlIHRoZSBCZXppZXIgY3VydmUgd2l0aCB0aGUgZm9yd2FyZCBkaWZmZXJlbmNlcyBtZXRob2RcbiAgICB2YXJcbiAgICAgICAgQngsIGRCeCwgZGRCeCwgZGRkQngsXG4gICAgICAgIEJ5LCBkQnksIGRkQnksIGRkZEJ5LFxuICAgICAgICBcbiAgICAgICAgdGhhdCA9IHRoaXM7XG5cbiAgICBmdW5jdGlvbiBpbml0KGR0KSB7XG4gICAgICAgIC8vIEltcGxlbWVudHMgYSBmYXN0IGRlZ3JlZS0zIEJlemllciBjdXJ2ZSB1c2luZyB0aGUgZm9yd2FyZCBkaWZmZXJlbmNlcyBtZXRob2RcbiAgICAgICAgLy9cbiAgICAgICAgLy8gUmVmZXJlbmNlIGZvciB0aGlzIGFsZ29yaXRobTpcbiAgICAgICAgLy8gXCJDdXJ2ZXMgYW5kIFN1cmZhY2VzIGZvciBDb21wdXRlciBHcmFwaGljc1wiIGJ5IERhdmlkIFNhbG9tb24sIHBhZ2UgMTg5XG5cbiAgICAgICAgdmFyXG4gICAgICAgICAgICBxMSA9IDMuMCAqIGR0LFxuICAgICAgICAgICAgcTIgPSBxMSAqIGR0LFxuICAgICAgICAgICAgcTMgPSBkdCAqIGR0ICogZHQsXG4gICAgICAgICAgICBxNCA9IDIuMCAqIHEyLFxuICAgICAgICAgICAgcTUgPSA2LjAgKiBxMyxcbiAgICAgICAgICAgIHE2eCA9IHRoYXQueDAgLSAyLjAgKiB0aGF0LngxICsgdGhhdC54MixcbiAgICAgICAgICAgIHE2eSA9IHRoYXQueTAgLSAyLjAgKiB0aGF0LnkxICsgdGhhdC55MixcbiAgICAgICAgICAgIHE3eCA9IDMuMCAqICh0aGF0LngxIC0gdGhhdC54MikgLSB0aGF0LngwICsgdGhhdC54MyxcbiAgICAgICAgICAgIHE3eSA9IDMuMCAqICh0aGF0LnkxIC0gdGhhdC55MikgLSB0aGF0LnkwICsgdGhhdC55MztcblxuICAgICAgICBCeCA9IHRoYXQueDA7XG4gICAgICAgIEJ5ID0gdGhhdC55MDtcblxuICAgICAgICBkQnggPSAodGhhdC54MSAtIHRoYXQueDApICogcTEgKyBxNnggKiBxMiArIHE3eCAqIHEzO1xuICAgICAgICBkQnkgPSAodGhhdC55MSAtIHRoYXQueTApICogcTEgKyBxNnkgKiBxMiArIHE3eSAqIHEzO1xuXG4gICAgICAgIGRkQnggPSBxNnggKiBxNCArIHE3eCAqIHE1O1xuICAgICAgICBkZEJ5ID0gcTZ5ICogcTQgKyBxN3kgKiBxNTtcblxuICAgICAgICBkZGRCeCA9IHE3eCAqIHE1O1xuICAgICAgICBkZGRCeSA9IHE3eSAqIHE1O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEZpbGwgdGhlIGdpdmVuIHgseSBhcnJheXMgd2l0aCBhIHNlcmllcyBvZiBwb2ludHMgb24gdGhlIGN1cnZlLlxuICAgICAqIFxuICAgICAqIEBwYXJhbSB4IGludFtdXG4gICAgICogQHBhcmFtIHkgaW50W11cbiAgICAgKiBAcGFyYW0gZWxlbWVudHMgaW50IENvdW50IG9mIGVsZW1lbnRzIHRvIGZpbGwgeCBhbmQgeSBhcnJheXNcbiAgICAgKi9cbiAgICB0aGlzLmNvbXB1dGUgPSBmdW5jdGlvbih4LCB5LCBlbGVtZW50cykge1xuICAgICAgICBpbml0KDEuMCAvIGVsZW1lbnRzKTtcblxuICAgICAgICB4WzBdID0gfn5CeDtcbiAgICAgICAgeVswXSA9IH5+Qnk7XG4gICAgICAgIFxuICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGVsZW1lbnRzOyBpKyspIHtcbiAgICAgICAgICAgIEJ4ICs9IGRCeDtcbiAgICAgICAgICAgIEJ5ICs9IGRCeTtcbiAgICAgICAgICAgIGRCeCArPSBkZEJ4O1xuICAgICAgICAgICAgZEJ5ICs9IGRkQnk7XG4gICAgICAgICAgICBkZEJ4ICs9IGRkZEJ4O1xuICAgICAgICAgICAgZGRCeSArPSBkZGRCeTtcblxuICAgICAgICAgICAgeFtpXSA9IH5+Qng7XG4gICAgICAgICAgICB5W2ldID0gfn5CeTtcbiAgICAgICAgfVxuICAgIH07XG59IiwiLypcbiAgICBDaGlja2VuUGFpbnRcbiAgICBcbiAgICBDaGlja2VuUGFpbnQgaXMgYSB0cmFuc2xhdGlvbiBvZiBDaGliaVBhaW50IGZyb20gSmF2YSB0byBKYXZhU2NyaXB0XG4gICAgYnkgTmljaG9sYXMgU2hlcmxvY2sgLyBDaGlja2VuIFNtb290aGllLlxuICAgIFxuICAgIENoaWJpUGFpbnQgaXMgQ29weXJpZ2h0IChjKSAyMDA2LTIwMDggTWFyYyBTY2hlZmVyXG5cbiAgICBDaGlja2VuUGFpbnQgaXMgZnJlZSBzb2Z0d2FyZTogeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yIG1vZGlmeVxuICAgIGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgYXMgcHVibGlzaGVkIGJ5XG4gICAgdGhlIEZyZWUgU29mdHdhcmUgRm91bmRhdGlvbiwgZWl0aGVyIHZlcnNpb24gMyBvZiB0aGUgTGljZW5zZSwgb3JcbiAgICAoYXQgeW91ciBvcHRpb24pIGFueSBsYXRlciB2ZXJzaW9uLlxuXG4gICAgQ2hpY2tlblBhaW50IGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsXG4gICAgYnV0IFdJVEhPVVQgQU5ZIFdBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2ZcbiAgICBNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuICBTZWUgdGhlXG4gICAgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy5cblxuICAgIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXG4gICAgYWxvbmcgd2l0aCBDaGlja2VuUGFpbnQuIElmIG5vdCwgc2VlIDxodHRwOi8vd3d3LmdudS5vcmcvbGljZW5zZXMvPi5cbiovXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIENQQ29sb3IocmdiKSB7XG4gICAgdmFyXG4gICAgICAgIHRoYXQgPSB0aGlzO1xuICAgIFxuICAgIHRoaXMucmdiID0gMDsgLy8gaW4gUkdCIGJ5dGUgb3JkZXJcbiAgICBcbiAgICB0aGlzLmh1ZSA9IDA7XG4gICAgdGhpcy5zYXR1cmF0aW9uID0gMDtcbiAgICB0aGlzLnZhbHVlID0gMDtcbiAgICBcbiAgICBmdW5jdGlvbiByZ2JUb0hzdigpIHtcbiAgICAgICAgdmFyXG4gICAgICAgICAgICByID0gKHRoYXQucmdiID4+IDE2KSAmIDB4ZmYsXG4gICAgICAgICAgICBnID0gKHRoYXQucmdiID4+IDgpICYgMHhmZixcbiAgICAgICAgICAgIGIgPSB0aGF0LnJnYiAmIDB4ZmY7XG5cbiAgICAgICAgLy8gVmFsdWVcbiAgICAgICAgdGhhdC52YWx1ZSA9IE1hdGgubWF4KHIsIE1hdGgubWF4KGcsIGIpKTtcblxuICAgICAgICAvLyBTYXR1cmF0aW9uXG4gICAgICAgIHZhciBcbiAgICAgICAgICAgIG1pbmkgPSBNYXRoLm1pbihyLCBNYXRoLm1pbihnLCBiKSk7XG4gICAgICAgIFxuICAgICAgICBpZiAodGhhdC52YWx1ZSA9PSAwKSB7XG4gICAgICAgICAgICB0aGF0LnNhdHVyYXRpb24gPSAwO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhhdC5zYXR1cmF0aW9uID0gfn4oKHRoYXQudmFsdWUgLSBtaW5pKSAvIHRoYXQudmFsdWUgKiAyNTUpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gSHVlXG4gICAgICAgIGlmICh0aGF0LnNhdHVyYXRpb24gPT0gMCkge1xuICAgICAgICAgICAgdGhhdC5odWUgPSAwO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdmFyIFxuICAgICAgICAgICAgICAgIGNyID0gKHRoYXQudmFsdWUgLSByKSAvICh0aGF0LnZhbHVlIC0gbWluaSksXG4gICAgICAgICAgICAgICAgY2cgPSAodGhhdC52YWx1ZSAtIGcpIC8gKHRoYXQudmFsdWUgLSBtaW5pKSxcbiAgICAgICAgICAgICAgICBjYiA9ICh0aGF0LnZhbHVlIC0gYikgLyAodGhhdC52YWx1ZSAtIG1pbmkpO1xuXG4gICAgICAgICAgICB2YXIgXG4gICAgICAgICAgICAgICAgX2h1ZSA9IDA7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmICh0aGF0LnZhbHVlID09IHIpIHtcbiAgICAgICAgICAgICAgICBfaHVlID0gY2IgLSBjZztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGF0LnZhbHVlID09IGcpIHtcbiAgICAgICAgICAgICAgICBfaHVlID0gMiArIGNyIC0gY2I7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhhdC52YWx1ZSA9PSBiKSB7XG4gICAgICAgICAgICAgICAgX2h1ZSA9IDQgKyBjZyAtIGNyO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBfaHVlICo9IDYwO1xuICAgICAgICAgICAgaWYgKF9odWUgPCAwKSB7XG4gICAgICAgICAgICAgICAgX2h1ZSArPSAzNjA7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoYXQuaHVlID0gfn5faHVlO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaHN2VG9SZ2IoKSB7XG4gICAgICAgIC8vIG5vIHNhdHVyYXRpb24gbWVhbnMgaXQncyBqdXN0IGEgc2hhZGUgb2YgZ3JleVxuICAgICAgICBpZiAodGhhdC5zYXR1cmF0aW9uID09IDApIHtcbiAgICAgICAgICAgIHRoYXQucmdiID0gKHRoYXQudmFsdWUgPDwgMTYpIHwgKHRoYXQudmFsdWUgPDwgOCkgfCB0aGF0LnZhbHVlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdmFyIFxuICAgICAgICAgICAgICAgIGYgPSB0aGF0Lmh1ZSAvIDYwO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBmID0gZiAtIE1hdGguZmxvb3IoZik7XG4gICAgXG4gICAgICAgICAgICB2YXIgXG4gICAgICAgICAgICAgICAgcyA9IHRoYXQuc2F0dXJhdGlvbiAvIDI1NSxcbiAgICAgICAgICAgICAgICBtID0gfn4odGhhdC52YWx1ZSAqICgxIC0gcykpLFxuICAgICAgICAgICAgICAgIG4gPSB+fih0aGF0LnZhbHVlICogKDEgLSBzICogZikpLFxuICAgICAgICAgICAgICAgIGsgPSB+fih0aGF0LnZhbHVlICogKDEgLSBzICogKDEgLSBmKSkpO1xuICAgIFxuICAgICAgICAgICAgc3dpdGNoICh+fih0aGF0Lmh1ZSAvIDYwKSkge1xuICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgIHRoYXQucmdiID0gKHRoYXQudmFsdWUgPDwgMTYpIHwgKGsgPDwgOCkgfCBtO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgIHRoYXQucmdiID0gKG4gPDwgMTYpIHwgKHRoYXQudmFsdWUgPDwgOCkgfCBtO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgIHRoYXQucmdiID0gKG0gPDwgMTYpIHwgKHRoYXQudmFsdWUgPDwgOCkgfCBrO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgIHRoYXQucmdiID0gKG0gPDwgMTYpIHwgKG4gPDwgOCkgfCB0aGF0LnZhbHVlO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgICAgIHRoYXQucmdiID0gKGsgPDwgMTYpIHwgKG0gPDwgOCkgfCB0aGF0LnZhbHVlO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSA1OlxuICAgICAgICAgICAgICAgIHRoYXQucmdiID0gKHRoYXQudmFsdWUgPDwgMTYpIHwgKG0gPDwgOCkgfCBuO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICB0aGF0LnJnYiA9IDA7IC8vIGludmFsaWQgaHVlXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLmdldFJnYiA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZ2I7XG4gICAgfTtcbiAgICBcbiAgICB0aGlzLmdldFNhdHVyYXRpb24gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2F0dXJhdGlvbjtcbiAgICB9O1xuXG4gICAgdGhpcy5nZXRIdWUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaHVlO1xuICAgIH07XG4gICAgXG4gICAgdGhpcy5nZXRWYWx1ZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy52YWx1ZTtcbiAgICB9O1xuICAgIFxuICAgIHRoaXMuc2V0UmdiQ29tcG9uZW50cyA9IGZ1bmN0aW9uKHIsIGcsIGIpIHtcbiAgICAgICAgdGhpcy5zZXRSZ2IoKHIgPDwgMTYpIHwgKGcgPDwgOCkgfCBiKTtcbiAgICB9XG4gICAgXG4gICAgdGhpcy5zZXRSZ2IgPSBmdW5jdGlvbihyZ2IpIHtcbiAgICAgICAgdGhpcy5yZ2IgPSByZ2I7XG4gICAgICAgIHJnYlRvSHN2KCk7XG4gICAgfTtcblxuICAgIHRoaXMuc2V0SHN2ID0gZnVuY3Rpb24oaHVlLCB2YWx1ZSwgc2F0dXJhdGlvbikge1xuICAgICAgICB0aGlzLmh1ZSA9IGh1ZTtcbiAgICAgICAgdGhpcy5zYXR1cmF0aW9uID0gc2F0dXJhdGlvbjtcbiAgICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xuXG4gICAgICAgIGhzdlRvUmdiKCk7XG4gICAgfTtcblxuICAgIHRoaXMuc2V0SHVlID0gZnVuY3Rpb24oaHVlKSB7XG4gICAgICAgIHRoaXMuaHVlID0gaHVlO1xuICAgICAgICBoc3ZUb1JnYigpO1xuICAgIH07XG5cbiAgICB0aGlzLnNldFNhdHVyYXRpb24gPSBmdW5jdGlvbihzYXR1cmF0aW9uKSB7XG4gICAgICAgIHRoaXMuc2F0dXJhdGlvbiA9IHNhdHVyYXRpb247XG4gICAgICAgIGhzdlRvUmdiKCk7XG4gICAgfTtcblxuICAgIHRoaXMuc2V0VmFsdWUgPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7XG4gICAgICAgIGhzdlRvUmdiKCk7XG4gICAgfTtcblxuICAgIHRoaXMuY2xvbmUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIFxuICAgICAgICAgICAgcmVzdWx0ID0gbmV3IENQQ29sb3IoKTtcbiAgICAgICAgXG4gICAgICAgIHJlc3VsdC5jb3B5RnJvbSh0aGlzKTtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfTtcblxuICAgIHRoaXMuY29weUZyb20gPSBmdW5jdGlvbihjKSB7XG4gICAgICAgIHRoaXMucmdiID0gYy5yZ2I7XG4gICAgICAgIHRoaXMuaHVlID0gYy5odWU7XG4gICAgICAgIHRoaXMuc2F0dXJhdGlvbiA9IGMuc2F0dXJhdGlvbjtcbiAgICAgICAgdGhpcy52YWx1ZSA9IGMudmFsdWU7XG4gICAgfTtcblxuICAgIHRoaXMuaXNFcXVhbCA9IGZ1bmN0aW9uKGNvbG9yKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJnYiA9PSBjb2xvci5yZ2IgJiYgdGhpcy5odWUgPT0gY29sb3IuaHVlICYmIHRoaXMuc2F0dXJhdGlvbiA9PSBjb2xvci5zYXR1cmF0aW9uICYmIHRoaXMudmFsdWUgPT0gY29sb3IudmFsdWU7XG4gICAgfTtcbiAgICBcbiAgICB0aGlzLnNldFJnYihyZ2IgfHwgMCk7XG59XG4iLCIvKlxuICAgIENoaWNrZW5QYWludFxuICAgIFxuICAgIENoaWNrZW5QYWludCBpcyBhIHRyYW5zbGF0aW9uIG9mIENoaWJpUGFpbnQgZnJvbSBKYXZhIHRvIEphdmFTY3JpcHRcbiAgICBieSBOaWNob2xhcyBTaGVybG9jayAvIENoaWNrZW4gU21vb3RoaWUuXG4gICAgXG4gICAgQ2hpYmlQYWludCBpcyBDb3B5cmlnaHQgKGMpIDIwMDYtMjAwOCBNYXJjIFNjaGVmZXJcblxuICAgIENoaWNrZW5QYWludCBpcyBmcmVlIHNvZnR3YXJlOiB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3IgbW9kaWZ5XG4gICAgaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBhcyBwdWJsaXNoZWQgYnlcbiAgICB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uLCBlaXRoZXIgdmVyc2lvbiAzIG9mIHRoZSBMaWNlbnNlLCBvclxuICAgIChhdCB5b3VyIG9wdGlvbikgYW55IGxhdGVyIHZlcnNpb24uXG5cbiAgICBDaGlja2VuUGFpbnQgaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCxcbiAgICBidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZlxuICAgIE1FUkNIQU5UQUJJTElUWSBvciBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS4gIFNlZSB0aGVcbiAgICBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9yZSBkZXRhaWxzLlxuXG4gICAgWW91IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2VcbiAgICBhbG9uZyB3aXRoIENoaWNrZW5QYWludC4gSWYgbm90LCBzZWUgPGh0dHA6Ly93d3cuZ251Lm9yZy9saWNlbnNlcy8+LlxuKi9cblxuLy8gQW4gUkdCIGNvbG9yIHdpdGggZmxvYXRpbmcgcG9pbnQgdmFsdWVzIGZvciBlYWNoIGNoYW5uZWwgKGJldHdlZW4gMC4wIGFuZCAxLjApXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBDUENvbG9yRmxvYXQociwgZywgYikge1xuICAgIHRoaXMuciA9IHI7XG4gICAgdGhpcy5nID0gZztcbiAgICB0aGlzLmIgPSBiO1xufVxuXG5DUENvbG9yRmxvYXQucHJvdG90eXBlLnRvSW50ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIChNYXRoLm1heCgwLCBNYXRoLm1pbigyNTUsIE1hdGgucm91bmQodGhpcy5yICogMjU1KSkpIDw8IDE2KSBcbiAgICAgICAgfCAoTWF0aC5tYXgoMCwgTWF0aC5taW4oMjU1LCBNYXRoLnJvdW5kKHRoaXMuZyAqIDI1NSkpKSA8PCA4KVxuICAgICAgICB8IE1hdGgubWF4KDAsIE1hdGgubWluKDI1NSwgTWF0aC5yb3VuZCh0aGlzLmIgKiAyNTUpKSk7XG59O1xuXG5DUENvbG9yRmxvYXQucHJvdG90eXBlLm1peFdpdGggPSBmdW5jdGlvbihjb2xvciwgYWxwaGEpIHtcbiAgICB0aGlzLnIgPSB0aGlzLnIgKiAoMS4wIC0gYWxwaGEpICsgY29sb3IuciAqIGFscGhhO1xuICAgIHRoaXMuZyA9IHRoaXMuZyAqICgxLjAgLSBhbHBoYSkgKyBjb2xvci5nICogYWxwaGE7XG4gICAgdGhpcy5iID0gdGhpcy5iICogKDEuMCAtIGFscGhhKSArIGNvbG9yLmIgKiBhbHBoYTtcbn07XG5cbkNQQ29sb3JGbG9hdC5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gbmV3IENQQ29sb3JGbG9hdCh0aGlzLnIsIHRoaXMuZywgdGhpcy5iKTtcbn07XG5cbkNQQ29sb3JGbG9hdC5jcmVhdGVGcm9tSW50ID0gZnVuY3Rpb24oY29sb3IpIHtcbiAgICByZXR1cm4gbmV3IENQQ29sb3JGbG9hdChcbiAgICAgICAgKChjb2xvciA+Pj4gMTYpICYgMHhmZikgLyAyNTUsXG4gICAgICAgICgoY29sb3IgPj4+IDgpICYgMHhmZikgLyAyNTUsXG4gICAgICAgIChjb2xvciAmIDB4ZmYpIC8gMjU1XG4gICAgKTtcbn07IiwiLypcblx0Q2hpY2tlblBhaW50XG5cblx0Q2hpY2tlblBhaW50IGlzIGEgdHJhbnNsYXRpb24gb2YgQ2hpYmlQYWludCBmcm9tIEphdmEgdG8gSmF2YVNjcmlwdFxuXHRieSBOaWNob2xhcyBTaGVybG9jayAvIENoaWNrZW4gU21vb3RoaWUuXG5cblx0Q2hpYmlQYWludCBpcyBDb3B5cmlnaHQgKGMpIDIwMDYtMjAwOCBNYXJjIFNjaGVmZXJcblxuXHRDaGlja2VuUGFpbnQgaXMgZnJlZSBzb2Z0d2FyZTogeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yIG1vZGlmeVxuXHRpdCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGFzIHB1Ymxpc2hlZCBieVxuXHR0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uLCBlaXRoZXIgdmVyc2lvbiAzIG9mIHRoZSBMaWNlbnNlLCBvclxuXHQoYXQgeW91ciBvcHRpb24pIGFueSBsYXRlciB2ZXJzaW9uLlxuXG5cdENoaWNrZW5QYWludCBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLFxuXHRidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZlxuXHRNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuICBTZWUgdGhlXG5cdEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuXG5cblx0WW91IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2Vcblx0YWxvbmcgd2l0aCBDaGlja2VuUGFpbnQuIElmIG5vdCwgc2VlIDxodHRwOi8vd3d3LmdudS5vcmcvbGljZW5zZXMvPi5cbiovXG5cbmZ1bmN0aW9uIGdldENhbnZhc0ludGVycG9sYXRpb25Qcm9wTmFtZShjYW52YXNDb250ZXh0KSB7XG5cdHZhclxuXHRcdGJyb3dzZXJQcm9wZXJ0aWVzID0gW1xuXHRcdFx0XCJpbWFnZVNtb290aGluZ0VuYWJsZWRcIiwgXCJtb3pJbWFnZVNtb290aGluZ0VuYWJsZWRcIiwgXCJ3ZWJraXRJbWFnZVNtb290aGluZ0VuYWJsZWRcIixcblx0XHRcdFwibXNJbWFnZVNtb290aGluZ0VuYWJsZWRcIlxuXHRcdF07XG5cblx0Zm9yICh2YXIgaSA9IDA7IGkgPCBicm93c2VyUHJvcGVydGllcy5sZW5ndGg7IGkrKykge1xuXHRcdGlmIChicm93c2VyUHJvcGVydGllc1tpXSBpbiBjYW52YXNDb250ZXh0KSB7XG5cdFx0XHRyZXR1cm4gYnJvd3NlclByb3BlcnRpZXNbaV07XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIG51bGw7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc0NhbnZhc0ludGVycG9sYXRpb25TdXBwb3J0ZWQoKSB7XG5cdHZhclxuXHRcdGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIiksXG5cdFx0Y2FudmFzQ29udGV4dCA9IGNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIik7XG5cblx0cmV0dXJuICEhZ2V0Q2FudmFzSW50ZXJwb2xhdGlvblByb3BOYW1lKGNhbnZhc0NvbnRleHQpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc2V0Q2FudmFzSW50ZXJwb2xhdGlvbihjYW52YXNDb250ZXh0LCBlbmFibGVkKSB7XG5cdHZhclxuXHRcdHByb3BOYW1lID0gZ2V0Q2FudmFzSW50ZXJwb2xhdGlvblByb3BOYW1lKGNhbnZhc0NvbnRleHQpO1xuXG5cdGlmIChwcm9wTmFtZSkge1xuXHRcdGNhbnZhc0NvbnRleHRbcHJvcE5hbWVdID0gZW5hYmxlZDtcblx0fVxufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNFdmVudFN1cHBvcnRlZChldmVudE5hbWUpIHtcblx0dmFyXG5cdFx0aXNTdXBwb3J0ZWQgPSBldmVudE5hbWUgaW4gd2luZG93O1xuXG5cdGlmICghaXNTdXBwb3J0ZWQpIHtcblx0XHR2YXJcblx0XHRcdGVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cdFx0ZWwuc2V0QXR0cmlidXRlKGV2ZW50TmFtZSwgJ3JldHVybjsnKTtcblxuXHRcdGlzU3VwcG9ydGVkID0gdHlwZW9mIGVsW2V2ZW50TmFtZV0gPT0gJ2Z1bmN0aW9uJztcblx0fVxuXG5cdHJldHVybiBpc1N1cHBvcnRlZDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzQ2FudmFzU3VwcG9ydGVkKCl7XG5cdHZhciBlbGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XG5cdHJldHVybiAhIShlbGVtLmdldENvbnRleHQgJiYgZWxlbS5nZXRDb250ZXh0KCcyZCcpKTtcbn0iLCIvKlxuXHRDaGlja2VuUGFpbnRcblxuXHRDaGlja2VuUGFpbnQgaXMgYSB0cmFuc2xhdGlvbiBvZiBDaGliaVBhaW50IGZyb20gSmF2YSB0byBKYXZhU2NyaXB0XG5cdGJ5IE5pY2hvbGFzIFNoZXJsb2NrIC8gQ2hpY2tlbiBTbW9vdGhpZS5cblxuXHRDaGliaVBhaW50IGlzIENvcHlyaWdodCAoYykgMjAwNi0yMDA4IE1hcmMgU2NoZWZlclxuXG5cdENoaWNrZW5QYWludCBpcyBmcmVlIHNvZnR3YXJlOiB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3IgbW9kaWZ5XG5cdGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgYXMgcHVibGlzaGVkIGJ5XG5cdHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb24sIGVpdGhlciB2ZXJzaW9uIDMgb2YgdGhlIExpY2Vuc2UsIG9yXG5cdChhdCB5b3VyIG9wdGlvbikgYW55IGxhdGVyIHZlcnNpb24uXG5cblx0Q2hpY2tlblBhaW50IGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsXG5cdGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mXG5cdE1FUkNIQU5UQUJJTElUWSBvciBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS4gIFNlZSB0aGVcblx0R05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy5cblxuXHRZb3Ugc2hvdWxkIGhhdmUgcmVjZWl2ZWQgYSBjb3B5IG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZVxuXHRhbG9uZyB3aXRoIENoaWNrZW5QYWludC4gSWYgbm90LCBzZWUgPGh0dHA6Ly93d3cuZ251Lm9yZy9saWNlbnNlcy8+LlxuKi9cblxuaW1wb3J0IENQVHJhbnNmb3JtIGZyb20gJy4vQ1BUcmFuc2Zvcm0nO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBDUFBvbHlnb24ocG9pbnRzKSB7XG5cdHRoaXMucG9pbnRzID0gcG9pbnRzIHx8IFtdO1xufVxuXG5DUFBvbHlnb24ucHJvdG90eXBlLmNsb25lID0gZnVuY3Rpb24oKSB7XG5cdHZhclxuXHRcdHJlc3VsdCA9IG5ldyBDUFBvbHlnb24obmV3IEFycmF5KHRoaXMucG9pbnRzLmxlbmd0aCkpO1xuXG5cdGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5wb2ludHMubGVuZ3RoOyBpKyspIHtcblx0XHQvLyBEZWVwIGNsb25lXG5cdFx0cmVzdWx0LnBvaW50c1tpXSA9IHt4IDogdGhpcy5wb2ludHNbaV0ueCwgeSA6IHRoaXMucG9pbnRzW2ldLnl9O1xuXHR9XG5cblx0cmV0dXJuIHJlc3VsdDtcbn07XG5cbi8qKlxuICogR2V0IGEgbmV3IHBvbHlnb24gd2hpY2ggaXMgdGhlIHJlc3VsdCBvZiB0cmFuc2Zvcm1pbmcgdGhlIHBvaW50cyBvZiB0aGlzIHBvbHlnb24gd2l0aCB0aGUgZ2l2ZW4gYWZmaW5lIHRyYW5zZm9ybS5cbiAqXG4gKiBAcGFyYW0ge0NQVHJhbnNmb3JtfSBhZmZpbmVUcmFuc2Zvcm1cbiAqIEByZXR1cm5zIHtDUFBvbHlnb259XG4gKi9cbkNQUG9seWdvbi5wcm90b3R5cGUuZ2V0VHJhbnNmb3JtZWQgPSBmdW5jdGlvbihhZmZpbmVUcmFuc2Zvcm0pIHtcblx0dmFyXG5cdFx0cmVzdWx0ID0gbmV3IENQUG9seWdvbihuZXcgQXJyYXkodGhpcy5wb2ludHMubGVuZ3RoKSk7XG5cblx0Zm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnBvaW50cy5sZW5ndGg7IGkrKykge1xuXHRcdHJlc3VsdC5wb2ludHNbaV0gPSBhZmZpbmVUcmFuc2Zvcm0uZ2V0VHJhbnNmb3JtZWRQb2ludCh0aGlzLnBvaW50c1tpXSk7XG5cdH1cblxuXHRyZXR1cm4gcmVzdWx0O1xufTtcblxuQ1BQb2x5Z29uLnByb3RvdHlwZS5nZXRDZW50ZXIgPSBmdW5jdGlvbigpIHtcblx0dmFyXG5cdFx0Y2VudGVyWCA9IHRoaXMucG9pbnRzWzBdLngsXG5cdFx0Y2VudGVyWSA9IHRoaXMucG9pbnRzWzBdLnk7XG5cblx0Zm9yICh2YXIgaSA9IDE7IGkgPCB0aGlzLnBvaW50cy5sZW5ndGg7IGkrKykge1xuXHRcdGNlbnRlclggKz0gdGhpcy5wb2ludHNbaV0ueDtcblx0XHRjZW50ZXJZICs9IHRoaXMucG9pbnRzW2ldLnk7XG5cdH1cblxuXHRyZXR1cm4ge3g6IGNlbnRlclggLyB0aGlzLnBvaW50cy5sZW5ndGgsIHk6IGNlbnRlclkgLyB0aGlzLnBvaW50cy5sZW5ndGh9O1xufTtcblxuLyoqXG4gKiBGcm9tIGh0dHBzOi8vd3d3LmVjc2UucnBpLmVkdS9Ib21lcGFnZXMvd3JmL1Jlc2VhcmNoL1Nob3J0X05vdGVzL3BucG9seS5odG1sXG4gKlxuICogQHBhcmFtIHBvaW50XG4gKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAqL1xuQ1BQb2x5Z29uLnByb3RvdHlwZS5jb250YWluc1BvaW50ID0gZnVuY3Rpb24ocG9pbnQpIHtcblx0dmFyIGksIGosIGNvbnRhaW5lZCA9IGZhbHNlO1xuXG5cdGZvciAoaSA9IDAsIGogPSB0aGlzLnBvaW50cy5sZW5ndGggLSAxOyBpIDwgdGhpcy5wb2ludHMubGVuZ3RoOyBqID0gaSsrKSB7XG5cdFx0aWYgKCgodGhpcy5wb2ludHNbaV0ueSA+IHBvaW50LnkpICE9ICh0aGlzLnBvaW50c1tqXS55ID4gcG9pbnQueSkpICYmXG5cdFx0XHRcdChwb2ludC54IDwgKHRoaXMucG9pbnRzW2pdLnggLSB0aGlzLnBvaW50c1tpXS54KSAqIChwb2ludC55IC0gdGhpcy5wb2ludHNbaV0ueSkgLyAodGhpcy5wb2ludHNbal0ueSAtIHRoaXMucG9pbnRzW2ldLnkpICsgdGhpcy5wb2ludHNbaV0ueCkpIHtcblx0XHRcdGNvbnRhaW5lZCA9ICFjb250YWluZWQ7XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIGNvbnRhaW5lZDtcbn07IiwiLypcbiAgICBDaGlja2VuUGFpbnRcbiAgICBcbiAgICBDaGlja2VuUGFpbnQgaXMgYSB0cmFuc2xhdGlvbiBvZiBDaGliaVBhaW50IGZyb20gSmF2YSB0byBKYXZhU2NyaXB0XG4gICAgYnkgTmljaG9sYXMgU2hlcmxvY2sgLyBDaGlja2VuIFNtb290aGllLlxuICAgIFxuICAgIENoaWJpUGFpbnQgaXMgQ29weXJpZ2h0IChjKSAyMDA2LTIwMDggTWFyYyBTY2hlZmVyXG5cbiAgICBDaGlja2VuUGFpbnQgaXMgZnJlZSBzb2Z0d2FyZTogeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yIG1vZGlmeVxuICAgIGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgYXMgcHVibGlzaGVkIGJ5XG4gICAgdGhlIEZyZWUgU29mdHdhcmUgRm91bmRhdGlvbiwgZWl0aGVyIHZlcnNpb24gMyBvZiB0aGUgTGljZW5zZSwgb3JcbiAgICAoYXQgeW91ciBvcHRpb24pIGFueSBsYXRlciB2ZXJzaW9uLlxuXG4gICAgQ2hpY2tlblBhaW50IGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsXG4gICAgYnV0IFdJVEhPVVQgQU5ZIFdBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2ZcbiAgICBNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuICBTZWUgdGhlXG4gICAgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy5cblxuICAgIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXG4gICAgYWxvbmcgd2l0aCBDaGlja2VuUGFpbnQuIElmIG5vdCwgc2VlIDxodHRwOi8vd3d3LmdudS5vcmcvbGljZW5zZXMvPi5cbiovXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIENQUmFuZG9tKCkge1xuICAgIHZhciBcbiAgICAgICAgbmV4dE5leHRHYXVzc2lhbiwgXG4gICAgICAgIGhhdmVOZXh0TmV4dEdhdXNzaWFuID0gZmFsc2U7XG5cbiAgICAvKipcbiAgICAgKiBEZWZpbml0aW9uIGZyb20gSmF2YSwgbWVhbiBvZiAwLjAgYW5kIHN0YW5kYXJkIGRldmlhdGlvbiAxLjAuXG4gICAgICovXG4gICAgdGhpcy5uZXh0R2F1c3NpYW4gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKGhhdmVOZXh0TmV4dEdhdXNzaWFuKSB7XG4gICAgICAgICAgICBoYXZlTmV4dE5leHRHYXVzc2lhbiA9IGZhbHNlO1xuICAgICAgICAgICAgcmV0dXJuIG5leHROZXh0R2F1c3NpYW47XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgIHYxLCB2MiwgcztcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZG8ge1xuICAgICAgICAgICAgICAgIHYxID0gMiAqIE1hdGgucmFuZG9tKCkgLSAxOyAvLyBiZXR3ZWVuIC0xLjAgYW5kIDEuMFxuICAgICAgICAgICAgICAgIHYyID0gMiAqIE1hdGgucmFuZG9tKCkgLSAxOyAvLyBiZXR3ZWVuIC0xLjAgYW5kIDEuMFxuICAgICAgICAgICAgICAgIHMgPSB2MSAqIHYxICsgdjIgKiB2MjtcbiAgICAgICAgICAgIH0gd2hpbGUgKHMgPj0gMSB8fCBzID09IDApO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICBtdWx0aXBsaWVyID0gTWF0aC5zcXJ0KC0yICogTWF0aC5sb2cocykgLyBzKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgbmV4dE5leHRHYXVzc2lhbiA9IHYyICogbXVsdGlwbGllcjtcbiAgICAgICAgICAgIGhhdmVOZXh0TmV4dEdhdXNzaWFuID0gdHJ1ZTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgcmV0dXJuIHYxICogbXVsdGlwbGllcjtcbiAgICAgICAgfVxuICAgIH07XG59OyIsIi8qXG4gICAgQ2hpY2tlblBhaW50XG4gICAgXG4gICAgQ2hpY2tlblBhaW50IGlzIGEgdHJhbnNsYXRpb24gb2YgQ2hpYmlQYWludCBmcm9tIEphdmEgdG8gSmF2YVNjcmlwdFxuICAgIGJ5IE5pY2hvbGFzIFNoZXJsb2NrIC8gQ2hpY2tlbiBTbW9vdGhpZS5cbiAgICBcbiAgICBDaGliaVBhaW50IGlzIENvcHlyaWdodCAoYykgMjAwNi0yMDA4IE1hcmMgU2NoZWZlclxuXG4gICAgQ2hpY2tlblBhaW50IGlzIGZyZWUgc29mdHdhcmU6IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vciBtb2RpZnlcbiAgICBpdCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGFzIHB1Ymxpc2hlZCBieVxuICAgIHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb24sIGVpdGhlciB2ZXJzaW9uIDMgb2YgdGhlIExpY2Vuc2UsIG9yXG4gICAgKGF0IHlvdXIgb3B0aW9uKSBhbnkgbGF0ZXIgdmVyc2lvbi5cblxuICAgIENoaWNrZW5QYWludCBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLFxuICAgIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mXG4gICAgTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiAgU2VlIHRoZVxuICAgIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuXG5cbiAgICBZb3Ugc2hvdWxkIGhhdmUgcmVjZWl2ZWQgYSBjb3B5IG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZVxuICAgIGFsb25nIHdpdGggQ2hpY2tlblBhaW50LiBJZiBub3QsIHNlZSA8aHR0cDovL3d3dy5nbnUub3JnL2xpY2Vuc2VzLz4uXG4qL1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBDUFJlY3QobGVmdCwgdG9wLCByaWdodCwgYm90dG9tKSB7XG4gICAgLypcbiAgICBpZiAobGVmdCA9PT0gdW5kZWZpbmVkIHx8IHRvcCA9PT0gdW5kZWZpbmVkIHx8IHJpZ2h0ID09PSB1bmRlZmluZWQgfHwgYm90dG9tID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdGhyb3cgXCJCYWQgcmVjdFwiO1xuICAgIH1cbiAgICBcbiAgICBpZiAofn5sZWZ0ICE9PSBsZWZ0IHx8IH5+dG9wICE9PSB0b3AgfHwgfn5yaWdodCAhPT0gcmlnaHQgfHwgfn5ib3R0b20gIT09IGJvdHRvbSkge1xuICAgICAgICB0aHJvdyBcIkJhZCByZWN0XCI7XG4gICAgfVxuICAgICovXG4gICAgXG4gICAgdGhpcy5sZWZ0ID0gbGVmdDtcbiAgICB0aGlzLnRvcCA9IHRvcDtcbiAgICB0aGlzLnJpZ2h0ID0gcmlnaHQ7XG4gICAgdGhpcy5ib3R0b20gPSBib3R0b207XG59XG5cbkNQUmVjdC5wcm90b3R5cGUubWFrZUVtcHR5ID0gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5sZWZ0ID0gMDtcbiAgICB0aGlzLnRvcCA9IDA7XG4gICAgdGhpcy5yaWdodCA9IDA7XG4gICAgdGhpcy5ib3R0b20gPSAwO1xufTtcblxuQ1BSZWN0LnByb3RvdHlwZS51bmlvbiA9IGZ1bmN0aW9uKHRoYXQpIHtcbiAgICBpZiAodGhpcy5pc0VtcHR5KCkpIHtcbiAgICAgICAgdGhpcy5zZXQodGhhdCk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5sZWZ0ID0gTWF0aC5taW4odGhpcy5sZWZ0LCB0aGF0LmxlZnQpO1xuICAgICAgICB0aGlzLnRvcCA9IE1hdGgubWluKHRoaXMudG9wLCB0aGF0LnRvcCk7XG4gICAgICAgIHRoaXMucmlnaHQgPSBNYXRoLm1heCh0aGlzLnJpZ2h0LCB0aGF0LnJpZ2h0KTtcbiAgICAgICAgdGhpcy5ib3R0b20gPSBNYXRoLm1heCh0aGlzLmJvdHRvbSwgdGhhdC5ib3R0b20pO1xuICAgIH1cbn07XG5cbkNQUmVjdC5wcm90b3R5cGUuZ2V0VW5pb24gPSBmdW5jdGlvbih0aGF0KSB7XG4gICAgdmFyXG4gICAgICAgIHJlc3VsdCA9IHRoaXMuY2xvbmUoKTtcblxuICAgIHJlc3VsdC51bmlvbih0aGF0KTtcblxuICAgIHJldHVybiByZXN1bHQ7XG59O1xuXG4vKipcbiAqIENsaXAgdGhpcyByZWN0YW5nbGUgdG8gZml0IHdpdGhpbiBgdGhhdGAuXG4gKiBcbiAqIEByZXR1cm5zIGEgcmVmZXJlbmNlIHRvIHRoaXMgcmVjdGFuZ2xlIGZvciBjaGFpbmluZ1xuICovXG5DUFJlY3QucHJvdG90eXBlLmNsaXAgPSBmdW5jdGlvbih0aGF0KSB7XG4gICAgaWYgKCF0aGlzLmlzRW1wdHkoKSkge1xuICAgICAgICBpZiAodGhhdC5pc0VtcHR5KCkpIHtcbiAgICAgICAgICAgIHRoaXMubWFrZUVtcHR5KCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmxlZnQgPSBNYXRoLm1heCh0aGlzLmxlZnQsIHRoYXQubGVmdCk7XG4gICAgICAgICAgICB0aGlzLnRvcCA9IE1hdGgubWF4KHRoaXMudG9wLCB0aGF0LnRvcCk7XG4gICAgICAgICAgICB0aGlzLnJpZ2h0ID0gTWF0aC5taW4odGhpcy5yaWdodCwgdGhhdC5yaWdodCk7XG4gICAgICAgICAgICB0aGlzLmJvdHRvbSA9IE1hdGgubWluKHRoaXMuYm90dG9tLCB0aGF0LmJvdHRvbSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIHRoaXM7XG59O1xuXG5DUFJlY3QucHJvdG90eXBlLmNvbnRhaW5zUG9pbnQgPSBmdW5jdGlvbihwKSB7XG4gICAgcmV0dXJuICEocC54IDwgdGhpcy5sZWZ0IHx8IHAueSA8IHRoaXMudG9wIHx8IHAueCA+PSB0aGlzLnJpZ2h0IHx8IHAueSA+PSB0aGlzLmJvdHRvbSk7XG59O1xuXG5DUFJlY3QucHJvdG90eXBlLmlzSW5zaWRlID0gZnVuY3Rpb24odGhhdCkge1xuICAgIHJldHVybiB0aGlzLmxlZnQgPj0gdGhhdC5sZWZ0ICYmIHRoaXMudG9wID49IHRoYXQudG9wICYmIHRoaXMucmlnaHQgPD0gdGhhdC5yaWdodCAmJiB0aGlzLmJvdHRvbSA8PSB0aGF0LmJvdHRvbTtcbn07XG5cbi8qKlxuICogVXNlIHRoaXMgcmVjdGFuZ2xlIGFzIGJvdW5kcyB0byBjbGlwIHRoZSBwbGFjZW1lbnQgb2YgdGhlIGFyZWEgb2Ygc3JjUmVjdCBhdCB0aGUgcG9zaXRpb24gb2YgZHN0UmVjdCBpbnNpZGVcbiAqIG91ciBib3VuZHMuXG4gKlxuICogZHN0UmVjdCBoYXMgaXRzIHJpZ2h0IGFuZCBib3R0b20gc2V0IGJ5IHRoaXMgb3BlcmF0aW9uIHRvIG1hdGNoIHRoZSBhcmVhIHRoYXQgd291bGQgYmUgY29waWVkIGZyb20gdGhlIHNvdXJjZS5cbiAqIHNyY1JlY3QgaGFzIGl0cyBjb29yZGluYXRlcyB0d2Vha2VkIHRvIG1hdGNoIHRoZSBhcmVhIHRoYXQgd2lsbCBiZSBjb3BpZWQuXG4gKi9cbkNQUmVjdC5wcm90b3R5cGUuY2xpcFNvdXJjZURlc3QgPSBmdW5jdGlvbihzcmNSZWN0LCBkc3RSZWN0KSB7XG4gICAgZHN0UmVjdC5yaWdodCA9IGRzdFJlY3QubGVmdCArIHNyY1JlY3QuZ2V0V2lkdGgoKTtcbiAgICBkc3RSZWN0LmJvdHRvbSA9IGRzdFJlY3QudG9wICsgc3JjUmVjdC5nZXRIZWlnaHQoKTtcblxuICAgIGlmICh0aGlzLmlzRW1wdHkoKSB8fCBkc3RSZWN0LmxlZnQgPj0gdGhpcy5yaWdodCB8fCBkc3RSZWN0LnRvcCA+PSB0aGlzLmJvdHRvbSB8fCBkc3RSZWN0LnJpZ2h0IDw9IHRoaXMubGVmdCB8fCBkc3RSZWN0LmJvdHRvbSA8PSB0aGlzLnRvcCkge1xuICAgICAgICBzcmNSZWN0Lm1ha2VFbXB0eSgpO1xuICAgICAgICBkc3RSZWN0Lm1ha2VFbXB0eSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIGJvdHRvbS9yaWdodFxuICAgICAgICBpZiAoZHN0UmVjdC5yaWdodCA+IHRoaXMucmlnaHQpIHtcbiAgICAgICAgICAgIHNyY1JlY3QucmlnaHQgLT0gZHN0UmVjdC5yaWdodCAtIHRoaXMucmlnaHQ7XG4gICAgICAgICAgICBkc3RSZWN0LnJpZ2h0ID0gdGhpcy5yaWdodDtcbiAgICAgICAgfVxuICAgIFxuICAgICAgICBpZiAoZHN0UmVjdC5ib3R0b20gPiB0aGlzLmJvdHRvbSkge1xuICAgICAgICAgICAgc3JjUmVjdC5ib3R0b20gLT0gZHN0UmVjdC5ib3R0b20gLSB0aGlzLmJvdHRvbTtcbiAgICAgICAgICAgIGRzdFJlY3QuYm90dG9tID0gdGhpcy5ib3R0b207XG4gICAgICAgIH1cbiAgICBcbiAgICAgICAgLy8gdG9wL2xlZnRcbiAgICAgICAgaWYgKGRzdFJlY3QubGVmdCA8IHRoaXMubGVmdCkge1xuICAgICAgICAgICAgc3JjUmVjdC5sZWZ0ICs9IHRoaXMubGVmdCAtIGRzdFJlY3QubGVmdDtcbiAgICAgICAgICAgIGRzdFJlY3QubGVmdCA9IHRoaXMubGVmdDtcbiAgICAgICAgfVxuICAgIFxuICAgICAgICBpZiAoZHN0UmVjdC50b3AgPCB0aGlzLnRvcCkge1xuICAgICAgICAgICAgc3JjUmVjdC50b3AgKz0gdGhpcy50b3AgLSBkc3RSZWN0LnRvcDtcbiAgICAgICAgICAgIGRzdFJlY3QudG9wID0gdGhpcy50b3A7XG4gICAgICAgIH1cbiAgICB9XG59O1xuXG5DUFJlY3QucHJvdG90eXBlLmdldFdpZHRoID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMucmlnaHQgLSB0aGlzLmxlZnQ7XG59O1xuXG5DUFJlY3QucHJvdG90eXBlLmdldEhlaWdodCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLmJvdHRvbSAtIHRoaXMudG9wO1xufTtcblxuQ1BSZWN0LnByb3RvdHlwZS5nZXRBcmVhID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0V2lkdGgoKSAqIHRoaXMuZ2V0SGVpZ2h0KCk7XG59O1xuXG5DUFJlY3QucHJvdG90eXBlLmlzRW1wdHkgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5yaWdodCA8PSB0aGlzLmxlZnQgfHwgdGhpcy5ib3R0b20gPD0gdGhpcy50b3A7XG59O1xuXG5DUFJlY3QucHJvdG90eXBlLnNldCA9IGZ1bmN0aW9uKHIpIHtcbiAgICB0aGlzLmxlZnQgPSByLmxlZnQ7XG4gICAgdGhpcy50b3AgPSByLnRvcDtcbiAgICB0aGlzLnJpZ2h0ID0gci5yaWdodDtcbiAgICB0aGlzLmJvdHRvbSA9IHIuYm90dG9tO1xufTtcblxuQ1BSZWN0LnByb3RvdHlwZS5jbG9uZSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBuZXcgQ1BSZWN0KHRoaXMubGVmdCwgdGhpcy50b3AsIHRoaXMucmlnaHQsIHRoaXMuYm90dG9tKTtcbn07XG5cbkNQUmVjdC5wcm90b3R5cGUudHJhbnNsYXRlID0gZnVuY3Rpb24oeCwgeSkge1xuICAgIHRoaXMubGVmdCArPSB4O1xuICAgIHRoaXMucmlnaHQgKz0geDtcbiAgICB0aGlzLnRvcCArPSB5O1xuICAgIHRoaXMuYm90dG9tICs9IHk7XG59O1xuXG5DUFJlY3QucHJvdG90eXBlLm1vdmVUbyA9IGZ1bmN0aW9uKHgsIHkpIHtcbiAgICB0aGlzLnRyYW5zbGF0ZSh4IC0gdGhpcy5sZWZ0LCB5IC0gdGhpcy50b3ApO1xufTtcblxuQ1BSZWN0LnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbih0aGF0KSB7XG4gICAgcmV0dXJuIHRoaXMubGVmdCA9PSB0aGF0LmxlZnQgJiYgdGhpcy5yaWdodCA9PSB0aGF0LnJpZ2h0ICYmIHRoaXMudG9wID09IHRoYXQudG9wICYmIHRoaXMuYm90dG9tID09IHRoYXQuYm90dG9tO1xufTtcblxuLyoqXG4gKiBBZGQgaCBwaXhlbHMgdG8gYm90aCB0aGUgbGVmdCBhbmQgcmlnaHQgc2lkZXMgb2YgdGhlIHJlY3RhbmdsZSwgYW5kIHYgcGl4ZWxzIHRvIGJvdGggdGhlIHRvcCBhbmQgYm90dG9tIHNpZGVzLlxuICogIFxuICogQHBhcmFtIGhcbiAqIEBwYXJhbSB2XG4gKi9cbkNQUmVjdC5wcm90b3R5cGUuZ3JvdyA9IGZ1bmN0aW9uKGgsIHYpIHtcbiAgICAvLyBUT0RPIGNoZWNrcyBmb3IgcmVjdGFuZ2xlcyB3aXRoIHplcm8tZXh0ZW50XG4gICAgdGhpcy5sZWZ0IC09IGg7XG4gICAgdGhpcy5yaWdodCArPSBoO1xuICAgIHRoaXMudG9wIC09IHY7XG4gICAgdGhpcy5ib3R0b20gKz0gdjtcbn07XG5cbkNQUmVjdC5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gXCIoXCIgKyB0aGlzLmxlZnQgKyBcIixcIiArIHRoaXMudG9wICsgXCIsXCIgKyB0aGlzLnJpZ2h0ICsgXCIsXCIgKyB0aGlzLmJvdHRvbSArIFwiKVwiO1xufTtcblxuLyoqXG4gKiBDb252ZXJ0IHRoZSByZWN0YW5nbGUgaW50byBhbiBhcnJheSBvZiBwb2ludHMgb2YgdGhlIGNvcm5lcnMgb2YgdGhlIHJlY3RhbmdsZSAoY2xvY2t3aXNlIHN0YXJ0aW5nIGZyb20gdGhlIHRvcCBsZWZ0XG4gKiBwb2ludCkuXG4gKi9cbkNQUmVjdC5wcm90b3R5cGUudG9Qb2ludHMgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gW1xuICAgICAgICB7eDogdGhpcy5sZWZ0LCB5OiB0aGlzLnRvcH0sXG4gICAgICAgIHt4OiB0aGlzLnJpZ2h0LCB5OiB0aGlzLnRvcH0sXG4gICAgICAgIHt4OiB0aGlzLnJpZ2h0LCB5OiB0aGlzLmJvdHRvbX0sXG4gICAgICAgIHt4OiB0aGlzLmxlZnQsIHk6IHRoaXMuYm90dG9tfVxuICAgIF07XG59O1xuXG4vKipcbiAqIFJvdW5kIHRoZSByZWN0YW5nbGUgY29vcmRpbmF0ZXMgdG8gdGhlIG5lYXJlc3QgaW50ZWdlci5cbiAqL1xuQ1BSZWN0LnByb3RvdHlwZS5yb3VuZE5lYXJlc3QgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLmxlZnQgPSBNYXRoLnJvdW5kKHRoaXMubGVmdCk7XG4gICAgdGhpcy50b3AgPSBNYXRoLnJvdW5kKHRoaXMudG9wKTtcbiAgICB0aGlzLnJpZ2h0ID0gTWF0aC5yb3VuZCh0aGlzLnJpZ2h0KTtcbiAgICB0aGlzLmJvdHRvbSA9IE1hdGgucm91bmQodGhpcy5ib3R0b20pO1xufTtcblxuLyoqXG4gKiBSb3VuZCB0aGUgcmVjdGFuZ2xlIGNvb3JkaW5hdGVzIHRvIGludGVnZXJzIHNvIHRoYXQgdGhlIG9sZCByZWN0YW5nbGUgaXMgY29udGFpbmVkIGJ5IHRoZSBuZXcgb25lLlxuICovXG5DUFJlY3QucHJvdG90eXBlLnJvdW5kQ29udGFpbiA9IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMubGVmdCA9IE1hdGguZmxvb3IodGhpcy5sZWZ0KTtcbiAgICB0aGlzLnRvcCA9IE1hdGguZmxvb3IodGhpcy50b3ApO1xuICAgIHRoaXMucmlnaHQgPSBNYXRoLmNlaWwodGhpcy5yaWdodCk7XG4gICAgdGhpcy5ib3R0b20gPSBNYXRoLmNlaWwodGhpcy5ib3R0b20pO1xufTtcblxuLyoqXG4gKiBDcmVhdGUgYW4gQUFCQiBDUFJlY3Qgd2hpY2ggZW5jbG9zZXMgdGhlIGdpdmVuIGFycmF5IG9mIHBvaW50cy5cbiAqL1xuQ1BSZWN0LmNyZWF0ZUJvdW5kaW5nQm94ID0gZnVuY3Rpb24ocG9pbnRzKSB7XG4gICAgdmFyXG4gICAgICAgIHJlc3VsdCA9IG5ldyBDUFJlY3QocG9pbnRzWzBdLngsIHBvaW50c1swXS55LCBwb2ludHNbMF0ueCwgcG9pbnRzWzBdLnkpO1xuXG4gICAgZm9yICh2YXIgaSA9IDE7IGkgPCBwb2ludHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgcmVzdWx0LmxlZnQgPSBNYXRoLm1pbihyZXN1bHQubGVmdCwgcG9pbnRzW2ldLngpO1xuICAgICAgICByZXN1bHQudG9wID0gTWF0aC5taW4ocmVzdWx0LnRvcCwgcG9pbnRzW2ldLnkpO1xuICAgICAgICByZXN1bHQucmlnaHQgPSBNYXRoLm1heChyZXN1bHQucmlnaHQsIHBvaW50c1tpXS54KTtcbiAgICAgICAgcmVzdWx0LmJvdHRvbSA9IE1hdGgubWF4KHJlc3VsdC5ib3R0b20sIHBvaW50c1tpXS55KTtcbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0O1xufTtcblxuLyogXG4gKiBDaHJvbWUgaXMgaW5pdGlhbGx5IGVhZ2VyIHRvIG9wdGltaXplIENQUmVjdCBhbmQgdXNlcnMgYXNzdW1pbmcgdGhhdCBhbGwgdGhlIGZpZWxkcyBhcmUgU01JcywgdGhlbiBsYXRlciBvbiBkZWNpZGVzXG4gKiB0aGF0IHRoZXkgc2hvdWxkIGJlIHRhZ2dlZCBudW1iZXJzIGFmdGVyIGFsbC4gVGhpcyBjYXVzZXMgYWxsIHRoZSBibGVuZGluZyBvcGVyYXRpb24gZnVuY3Rpb25zIHRvIGJlIHJlb3B0aW1pemVkXG4gKiBhIGNvdXBsZSBvZiB0aW1lcy4gXG4gKiBcbiAqIEF2b2lkIHRoYXQgbWVzcyBieSBzdGFydGluZyB0aGluZ3Mgb2ZmIHdpdGggZmxvYXRzIGluIHRoZSBtZW1iZXJzLiAgXG4gKi9cbndpbmRvdy5jcFJlY3RHYXJiYWdlID0gbmV3IENQUmVjdCgxLjUsIDIuNSwgMy41LCA0LjUpOyIsIi8vIE1vZGlmaWNhdGlvbnMgYnkgTmljaG9sYXMgU2hlcmxvY2suIE9yaWdpbmFsIGRvY3MgYmVsb3c6XG5cbi8vIExhc3QgdXBkYXRlZCBOb3ZlbWJlciAyMDExXG4vLyBCeSBTaW1vbiBTYXJyaXNcbi8vIHd3dy5zaW1vbnNhcnJpcy5jb21cbi8vIHNhcnJpc0BhY20ub3JnXG4vL1xuLy8gRnJlZSB0byB1c2UgYW5kIGRpc3RyaWJ1dGUgYXQgd2lsbFxuLy8gU28gbG9uZyBhcyB5b3UgYXJlIG5pY2UgdG8gcGVvcGxlLCBldGNcblxuLy8gU2ltcGxlIGNsYXNzIGZvciBrZWVwaW5nIHRyYWNrIG9mIHRoZSBjdXJyZW50IHRyYW5zZm9ybWF0aW9uIG1hdHJpeFxuXG4vLyBGb3IgaW5zdGFuY2U6XG4vLyAgICB2YXIgdCA9IG5ldyBUcmFuc2Zvcm0oKTtcbi8vICAgIHQucm90YXRlKDUpO1xuLy8gICAgdmFyIG0gPSB0Lm07XG4vLyAgICBjdHguc2V0VHJhbnNmb3JtKG1bMF0sIG1bMV0sIG1bMl0sIG1bM10sIG1bNF0sIG1bNV0pO1xuXG4vLyBJcyBlcXVpdmFsZW50IHRvOlxuLy8gICAgY3R4LnJvdGF0ZSg1KTtcblxuLy8gQnV0IG5vdyB5b3UgY2FuIHJldHJpZXZlIGl0IDopXG5cbi8vIFJlbWVtYmVyIHRoYXQgdGhpcyBkb2VzIG5vdCBhY2NvdW50IGZvciBhbnkgQ1NTIHRyYW5zZm9ybXMgYXBwbGllZCB0byB0aGUgY2FudmFzXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIENQVHJhbnNmb3JtKCkge1xuICAgIHRoaXMuc2V0VG9JZGVudGl0eSgpO1xufVxuXG5DUFRyYW5zZm9ybS5wcm90b3R5cGUuc2V0VG9JZGVudGl0eSA9IGZ1bmN0aW9uKCkge1xuICAgIC8qIE1hdHJpeCBjb21wb25lbnRzIGFyZSBzdG9yZWQgaW4gdGhpcyBvcmRlciBpbiAnbSc6XG4gICAgICogWzAgMiA0XVxuICAgICAqIFsxIDMgNV1cbiAgICAgKiBbeCB4IHhdXG4gICAgICpcbiAgICAgKiBMYXN0IHJvdyBpcyBhbHdheXMgMCwgMCwgMSBzbyB3ZSBkb24ndCBzdG9yZSBpdC5cbiAgICAgKi9cbiAgICB0aGlzLm0gPSBbIDEsIDAsIDAsIDEsIDAsIDAgXTtcbn07XG5cbi8qKlxuICogTXVsdGlwbHkgdGhpcyBtYXRyaXggd2l0aCB0aGUgZ2l2ZW4gdHJhbnNmb3JtYXRpb24gb25lIGxpa2Ugc286XG4gKlxuICogW3RoaXNdID0gW3RoaXNdICogW21hdHJpeF1cbiAqXG4gKiBAcGFyYW0ge0NQVHJhbnNmb3JtfSBtYXRyaXhcbiAqL1xuQ1BUcmFuc2Zvcm0ucHJvdG90eXBlLm11bHRpcGx5ID0gZnVuY3Rpb24obWF0cml4KSB7XG4gICAgdmFyIFxuICAgICAgICBtMTEgPSB0aGlzLm1bMF0gKiBtYXRyaXgubVswXSArIHRoaXMubVsyXSAqIG1hdHJpeC5tWzFdLFxuICAgICAgICBtMTIgPSB0aGlzLm1bMV0gKiBtYXRyaXgubVswXSArIHRoaXMubVszXSAqIG1hdHJpeC5tWzFdLFxuXG4gICAgICAgIG0yMSA9IHRoaXMubVswXSAqIG1hdHJpeC5tWzJdICsgdGhpcy5tWzJdICogbWF0cml4Lm1bM10sXG4gICAgICAgIG0yMiA9IHRoaXMubVsxXSAqIG1hdHJpeC5tWzJdICsgdGhpcy5tWzNdICogbWF0cml4Lm1bM10sXG5cbiAgICAgICAgZHggPSB0aGlzLm1bMF0gKiBtYXRyaXgubVs0XSArIHRoaXMubVsyXSAqIG1hdHJpeC5tWzVdICsgdGhpcy5tWzRdLFxuICAgICAgICBkeSA9IHRoaXMubVsxXSAqIG1hdHJpeC5tWzRdICsgdGhpcy5tWzNdICogbWF0cml4Lm1bNV0gKyB0aGlzLm1bNV07XG5cbiAgICB0aGlzLm1bMF0gPSBtMTE7XG4gICAgdGhpcy5tWzFdID0gbTEyO1xuICAgIHRoaXMubVsyXSA9IG0yMTtcbiAgICB0aGlzLm1bM10gPSBtMjI7XG4gICAgdGhpcy5tWzRdID0gZHg7XG4gICAgdGhpcy5tWzVdID0gZHk7XG59O1xuXG4vKipcbiAqIE11bHRpcGx5IHRoaXMgbWF0cml4IHdpdGggdGhlIGdpdmVuIHRyYW5zZm9ybWF0aW9uIG9uZSBsaWtlIHNvOlxuICpcbiAqIFt0aGlzXSA9IFttYXRyaXhdICogW3RoaXNdXG4gKlxuICogQHBhcmFtIHtDUFRyYW5zZm9ybX0gbWF0cml4XG4gKi9cbkNQVHJhbnNmb3JtLnByb3RvdHlwZS5wcmVNdWx0aXBseSA9IGZ1bmN0aW9uKG1hdHJpeCkge1xuICAgIHZhclxuICAgICAgICBtMTEgPSBtYXRyaXgubVswXSAqIHRoaXMubVswXSArIG1hdHJpeC5tWzJdICogdGhpcy5tWzFdLFxuICAgICAgICBtMTIgPSBtYXRyaXgubVsxXSAqIHRoaXMubVswXSArIG1hdHJpeC5tWzNdICogdGhpcy5tWzFdLFxuXG4gICAgICAgIG0yMSA9IG1hdHJpeC5tWzBdICogdGhpcy5tWzJdICsgbWF0cml4Lm1bMl0gKiB0aGlzLm1bM10sXG4gICAgICAgIG0yMiA9IG1hdHJpeC5tWzFdICogdGhpcy5tWzJdICsgbWF0cml4Lm1bM10gKiB0aGlzLm1bM10sXG5cbiAgICAgICAgZHggPSBtYXRyaXgubVswXSAqIHRoaXMubVs0XSArIG1hdHJpeC5tWzJdICogdGhpcy5tWzVdICsgbWF0cml4Lm1bNF0sXG4gICAgICAgIGR5ID0gbWF0cml4Lm1bMV0gKiB0aGlzLm1bNF0gKyBtYXRyaXgubVszXSAqIHRoaXMubVs1XSArIG1hdHJpeC5tWzVdO1xuXG4gICAgdGhpcy5tWzBdID0gbTExO1xuICAgIHRoaXMubVsxXSA9IG0xMjtcbiAgICB0aGlzLm1bMl0gPSBtMjE7XG4gICAgdGhpcy5tWzNdID0gbTIyO1xuICAgIHRoaXMubVs0XSA9IGR4O1xuICAgIHRoaXMubVs1XSA9IGR5O1xufTtcblxuQ1BUcmFuc2Zvcm0ucHJvdG90eXBlLmludmVydCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBcbiAgICAgICAgZCA9IDEgLyAodGhpcy5tWzBdICogdGhpcy5tWzNdIC0gdGhpcy5tWzFdICogdGhpcy5tWzJdKSxcbiAgICAgICAgbTAgPSB0aGlzLm1bM10gKiBkLFxuICAgICAgICBtMSA9IC10aGlzLm1bMV0gKiBkLFxuICAgICAgICBtMiA9IC10aGlzLm1bMl0gKiBkLFxuICAgICAgICBtMyA9IHRoaXMubVswXSAqIGQsXG4gICAgICAgIG00ID0gZCAqICh0aGlzLm1bMl0gKiB0aGlzLm1bNV0gLSB0aGlzLm1bM10gKiB0aGlzLm1bNF0pLFxuICAgICAgICBtNSA9IGQgKiAodGhpcy5tWzFdICogdGhpcy5tWzRdIC0gdGhpcy5tWzBdICogdGhpcy5tWzVdKTtcbiAgICBcbiAgICB0aGlzLm1bMF0gPSBtMDtcbiAgICB0aGlzLm1bMV0gPSBtMTtcbiAgICB0aGlzLm1bMl0gPSBtMjtcbiAgICB0aGlzLm1bM10gPSBtMztcbiAgICB0aGlzLm1bNF0gPSBtNDtcbiAgICB0aGlzLm1bNV0gPSBtNTtcbn07XG5cbkNQVHJhbnNmb3JtLnByb3RvdHlwZS5nZXRJbnZlcnRlZCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhclxuICAgICAgICByZXN1bHQgPSBuZXcgQ1BUcmFuc2Zvcm0oKTtcbiAgICBcbiAgICByZXN1bHQubVswXSA9IHRoaXMubVswXTtcbiAgICByZXN1bHQubVsxXSA9IHRoaXMubVsxXTtcbiAgICByZXN1bHQubVsyXSA9IHRoaXMubVsyXTtcbiAgICByZXN1bHQubVszXSA9IHRoaXMubVszXTtcbiAgICByZXN1bHQubVs0XSA9IHRoaXMubVs0XTtcbiAgICByZXN1bHQubVs1XSA9IHRoaXMubVs1XTtcbiAgICBcbiAgICByZXN1bHQuaW52ZXJ0KCk7XG4gICAgXG4gICAgcmV0dXJuIHJlc3VsdDtcbn07XG5cbi8qKlxuICogTXVsdGlwbHkgdGhpcyB0cmFuc2Zvcm0gYnkgYSByb3RhdGlvbiBtYXRyaXggZm9yIHRoZSBnaXZlbiBhbmdsZTpcbiAqXG4gKiBbIGNvcyhhKSAtc2luKGEpIDBdXG4gKiBbIHNpbihhKSAgY29zKGEpIDBdXG4gKiBbICAgMCAgICAgICAwICAgIDFdXG4gKi9cbkNQVHJhbnNmb3JtLnByb3RvdHlwZS5yb3RhdGUgPSBmdW5jdGlvbihyYWQpIHtcbiAgICB2YXIgXG4gICAgICAgIGMgPSBNYXRoLmNvcyhyYWQpLFxuICAgICAgICBzID0gTWF0aC5zaW4ocmFkKSxcblxuICAgICAgICBtMTEgPSB0aGlzLm1bMF0gKiBjICsgdGhpcy5tWzJdICogcyxcbiAgICAgICAgbTEyID0gdGhpcy5tWzFdICogYyArIHRoaXMubVszXSAqIHMsXG4gICAgICAgIG0yMSA9IHRoaXMubVswXSAqIC1zICsgdGhpcy5tWzJdICogYyxcbiAgICAgICAgbTIyID0gdGhpcy5tWzFdICogLXMgKyB0aGlzLm1bM10gKiBjO1xuICAgIFxuICAgIHRoaXMubVswXSA9IG0xMTtcbiAgICB0aGlzLm1bMV0gPSBtMTI7XG4gICAgdGhpcy5tWzJdID0gbTIxO1xuICAgIHRoaXMubVszXSA9IG0yMjtcbn07XG5cbkNQVHJhbnNmb3JtLnByb3RvdHlwZS5yb3RhdGVBcm91bmRQb2ludCA9IGZ1bmN0aW9uKHJhZCwgeCwgeSkge1xuICAgIHRoaXMudHJhbnNsYXRlKHgsIHkpO1xuICAgIHRoaXMucm90YXRlKHJhZCk7XG4gICAgdGhpcy50cmFuc2xhdGUoLXgsIC15KTtcbn07XG5cbi8qKlxuICogTXVsdGlwbHkgdGhpcyB0cmFuc2Zvcm0gYnkgYSB0cmFuc2xhdGlvbiBtYXRyaXg6XG4gKlxuICogWzEgIDAgIHhdXG4gKiBbMCAgMSAgeV1cbiAqIFswICAwICAxXVxuICpcbiAqIEBwYXJhbSB4XG4gKiBAcGFyYW0geVxuICovXG5DUFRyYW5zZm9ybS5wcm90b3R5cGUudHJhbnNsYXRlID0gZnVuY3Rpb24oeCwgeSkge1xuICAgIHRoaXMubVs0XSArPSB0aGlzLm1bMF0gKiB4ICsgdGhpcy5tWzJdICogeTtcbiAgICB0aGlzLm1bNV0gKz0gdGhpcy5tWzFdICogeCArIHRoaXMubVszXSAqIHk7XG59O1xuXG4vKipcbiAqIE11bHRpcGx5IHRoaXMgdHJhbnNmb3JtIGJ5IGEgc2NhbGUgbWF0cml4OlxuICpcbiAqIFtzeCAwICAwXVxuICogWzAgIHN5IDBdXG4gKiBbMCAgMCAgMV1cbiAqXG4gKiBAcGFyYW0gc3hcbiAqIEBwYXJhbSBzeVxuICovXG5DUFRyYW5zZm9ybS5wcm90b3R5cGUuc2NhbGUgPSBmdW5jdGlvbihzeCwgc3kpIHtcbiAgICB0aGlzLm1bMF0gKj0gc3g7XG4gICAgdGhpcy5tWzFdICo9IHN4O1xuICAgIHRoaXMubVsyXSAqPSBzeTtcbiAgICB0aGlzLm1bM10gKj0gc3k7XG59O1xuXG5DUFRyYW5zZm9ybS5wcm90b3R5cGUuc2NhbGVBcm91bmRQb2ludCA9IGZ1bmN0aW9uKHN4LCBzeSwgcHgsIHB5KSB7XG4gICAgdGhpcy50cmFuc2xhdGUocHgsIHB5KTtcbiAgICB0aGlzLnNjYWxlKHN4LCBzeSk7XG4gICAgdGhpcy50cmFuc2xhdGUoLXB4LCAtcHkpO1xufTtcblxuLyoqXG4gKiBNdWx0aXBseSB0aGlzIHRyYW5zZm9ybSBieSBhIHNoZWFyIG1hdHJpeDpcbiAqXG4gKiBbMSAgc3ggMF1cbiAqIFtzeSAxICAwXVxuICogWzAgIDAgIDFdXG4gKlxuICogQHBhcmFtIHN4XG4gKiBAcGFyYW0gc3lcbiAqL1xuQ1BUcmFuc2Zvcm0ucHJvdG90eXBlLnNoZWFyID0gZnVuY3Rpb24oeCwgeSkge1xuICB2YXJcbiAgICAgIG0xMSA9IHRoaXMubVswXSArIHRoaXMubVsyXSAqIHksXG4gICAgICBtMTIgPSB0aGlzLm1bMV0gKyB0aGlzLm1bM10gKiB5LFxuICAgICAgbTIxID0gdGhpcy5tWzJdICsgdGhpcy5tWzBdICogeCxcbiAgICAgIG0yMiA9IHRoaXMubVszXSArIHRoaXMubVsxXSAqIHg7XG5cbiAgICB0aGlzLm1bMF0gPSBtMTE7XG4gICAgdGhpcy5tWzFdID0gbTEyO1xuICAgIHRoaXMubVsyXSA9IG0yMTtcbiAgICB0aGlzLm1bM10gPSBtMjI7XG59O1xuXG5DUFRyYW5zZm9ybS5wcm90b3R5cGUuZ2V0VHJhbnNmb3JtZWRQb2ludCA9IGZ1bmN0aW9uKHApIHtcbiAgICByZXR1cm4ge1xuICAgICAgICB4OiBwLnggKiB0aGlzLm1bMF0gKyBwLnkgKiB0aGlzLm1bMl0gKyB0aGlzLm1bNF0sXG4gICAgICAgIHk6IHAueCAqIHRoaXMubVsxXSArIHAueSAqIHRoaXMubVszXSArIHRoaXMubVs1XVxuICAgIH07XG59O1xuXG5DUFRyYW5zZm9ybS5wcm90b3R5cGUudHJhbnNmb3JtUG9pbnRzID0gZnVuY3Rpb24ocG9pbnRzKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwb2ludHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgcG9pbnRzW2ldID0gdGhpcy5nZXRUcmFuc2Zvcm1lZFBvaW50KHBvaW50c1tpXSk7XG4gICAgfVxufTtcblxuQ1BUcmFuc2Zvcm0ucHJvdG90eXBlLmdldFRyYW5zbGF0ZVggPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5tWzRdO1xufTtcblxuQ1BUcmFuc2Zvcm0ucHJvdG90eXBlLmdldFRyYW5zbGF0ZVkgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5tWzVdO1xufTtcblxuQ1BUcmFuc2Zvcm0ucHJvdG90eXBlLmNsb25lID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyXG4gICAgICAgIHJlc3VsdCA9IG5ldyBDUFRyYW5zZm9ybSgpO1xuICAgIFxuICAgIHJlc3VsdC5tWzBdID0gdGhpcy5tWzBdO1xuICAgIHJlc3VsdC5tWzFdID0gdGhpcy5tWzFdO1xuICAgIHJlc3VsdC5tWzJdID0gdGhpcy5tWzJdO1xuICAgIHJlc3VsdC5tWzNdID0gdGhpcy5tWzNdO1xuICAgIHJlc3VsdC5tWzRdID0gdGhpcy5tWzRdO1xuICAgIHJlc3VsdC5tWzVdID0gdGhpcy5tWzVdO1xuICAgIFxuICAgIHJldHVybiByZXN1bHQ7XG59O1xuXG5DUFRyYW5zZm9ybS5wcm90b3R5cGUuZ2V0RGV0ZXJtaW5hbnQgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5tWzBdICogdGhpcy5tWzNdIC0gdGhpcy5tWzFdICogdGhpcy5tWzJdO1xufTtcblxuLyoqXG4gKiBCcmVhayBkb3duIHRoZSBtYXRyaXggaW50byBhIHRyYW5zbGF0aW9uLCBzY2FsZSwgcm90YXRpb24sIHRoZW4gc2hlYXIgb3BlcmF0aW9uLlxuICpcbiAqIHggb3IgeSBzY2FsZSBtdXN0IG5vdCBiZSB6ZXJvLlxuICpcbiAqIGh0dHA6Ly93d3cubWF0aHMtaW5mb3JtYXRpcXVlLWpldXguY29tL2Jsb2cvZnJlZGVyaWMvP3Bvc3QvMjAxMy8xMi8wMS9EZWNvbXBvc2l0aW9uLW9mLTJELXRyYW5zZm9ybS1tYXRyaWNlc1xuICovXG5DUFRyYW5zZm9ybS5wcm90b3R5cGUuZGVjb21wb3NlID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyXG4gICAgICAgIGRldGVybWluYW50ID0gdGhpcy5nZXREZXRlcm1pbmFudCgpLFxuICAgICAgICByID0gTWF0aC5zcXJ0KHRoaXMubVswXSAqIHRoaXMubVswXSArIHRoaXMubVsxXSAqIHRoaXMubVsxXSk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgICB0cmFuc2xhdGU6IHt4OiB0aGlzLm1bNF0sIHk6IHRoaXMubVs1XX0sXG4gICAgICAgIHJvdGF0ZTogTWF0aC5zaWduKHRoaXMubVsxXSkgKiBNYXRoLmFjb3ModGhpcy5tWzBdIC8gciksXG4gICAgICAgIHNjYWxlOiB7eDogciwgeTogZGV0ZXJtaW5hbnQgLyByfSxcbiAgICAgICAgc2hlYXI6IHt4OiBNYXRoLmF0YW4oKHRoaXMubVswXSAqIHRoaXMubVsyXSArIHRoaXMubVsxXSAqIHRoaXMubVszXSkgLyAociAqIHIpKSwgeTogMH1cbiAgICB9O1xufTtcblxuQ1BUcmFuc2Zvcm0ucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24oKSB7XG4gICAgY29uc3RcbiAgICAgICAgUExBQ0VTID0gMjtcblxuICAgIHJldHVybiAoXCJbXCIgKyB0aGlzLm1bMF0udG9GaXhlZChQTEFDRVMpICsgXCIgXCIgKyB0aGlzLm1bMl0udG9GaXhlZChQTEFDRVMpICsgXCIgXCIgKyB0aGlzLm1bNF0udG9GaXhlZChQTEFDRVMpICsgXCJdXFxuXCIgK1xuICAgICAgICAgICBcIltcIiArIHRoaXMubVsxXS50b0ZpeGVkKFBMQUNFUykgKyBcIiBcIiArIHRoaXMubVszXS50b0ZpeGVkKFBMQUNFUykgKyBcIiBcIiArIHRoaXMubVs1XS50b0ZpeGVkKFBMQUNFUykgKyBcIl1cXG5cIiArXG4gICAgICAgICAgIFwiWzAuMDAgMC4wMCAxLjAwXVwiKTtcbn07XG5cbk1hdGguc2lnbiA9IE1hdGguc2lnbiB8fCBmdW5jdGlvbih4KSB7XG4gICAgeCA9ICt4OyAvLyBjb252ZXJ0IHRvIGEgbnVtYmVyXG4gICAgaWYgKHggPT09IDAgfHwgaXNOYU4oeCkpIHtcbiAgICAgICAgcmV0dXJuIHg7XG4gICAgfVxuICAgIHJldHVybiB4ID4gMCA/IDEgOiAtMTtcbn07IiwiLypcblx0Q2hpY2tlblBhaW50XG5cblx0Q2hpY2tlblBhaW50IGlzIGEgdHJhbnNsYXRpb24gb2YgQ2hpYmlQYWludCBmcm9tIEphdmEgdG8gSmF2YVNjcmlwdFxuXHRieSBOaWNob2xhcyBTaGVybG9jayAvIENoaWNrZW4gU21vb3RoaWUuXG5cblx0Q2hpYmlQYWludCBpcyBDb3B5cmlnaHQgKGMpIDIwMDYtMjAwOCBNYXJjIFNjaGVmZXJcblxuXHRDaGlja2VuUGFpbnQgaXMgZnJlZSBzb2Z0d2FyZTogeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yIG1vZGlmeVxuXHRpdCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGFzIHB1Ymxpc2hlZCBieVxuXHR0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uLCBlaXRoZXIgdmVyc2lvbiAzIG9mIHRoZSBMaWNlbnNlLCBvclxuXHQoYXQgeW91ciBvcHRpb24pIGFueSBsYXRlciB2ZXJzaW9uLlxuXG5cdENoaWNrZW5QYWludCBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLFxuXHRidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZlxuXHRNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuICBTZWUgdGhlXG5cdEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuXG5cblx0WW91IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2Vcblx0YWxvbmcgd2l0aCBDaGlja2VuUGFpbnQuIElmIG5vdCwgc2VlIDxodHRwOi8vd3d3LmdudS5vcmcvbGljZW5zZXMvPi5cbiovXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIENQVmVjdG9yKHgsIHkpIHtcblx0dGhpcy54ID0geDtcblx0dGhpcy55ID0geTtcbn1cblxuQ1BWZWN0b3IucHJvdG90eXBlLmdldExlbmd0aCA9IGZ1bmN0aW9uKCkge1xuXHRyZXR1cm4gTWF0aC5zcXJ0KHRoaXMueCAqIHRoaXMueCArIHRoaXMueSAqIHRoaXMueSk7XG59O1xuXG4vKipcbiAqXG4gKiBAcmV0dXJucyB7Q1BWZWN0b3J9IFRoaXMgdmVjdG9yIGZvciBjaGFpbmluZ1xuICovXG5DUFZlY3Rvci5wcm90b3R5cGUubm9ybWFsaXplID0gZnVuY3Rpb24oKSB7XG5cdHZhclxuXHRcdGxlbmd0aCA9IHRoaXMuZ2V0TGVuZ3RoKCk7XG5cblx0dGhpcy54IC89IGxlbmd0aDtcblx0dGhpcy55IC89IGxlbmd0aDtcblxuXHRyZXR1cm4gdGhpcztcbn07XG5cbi8qKlxuICpcbiAqIEBwYXJhbSB7Q1BWZWN0b3J9IHRoYXRcbiAqL1xuQ1BWZWN0b3IucHJvdG90eXBlLmdldERvdFByb2R1Y3QgPSBmdW5jdGlvbih0aGF0KSB7XG5cdHJldHVybiB0aGlzLnggKiB0aGF0LnggKyB0aGlzLnkgKiB0aGF0Lnk7XG59O1xuXG4vKipcbiAqXG4gKiBAcGFyYW0gc2NhbGVGYWN0b3JcbiAqIEByZXR1cm5zIHtDUFZlY3Rvcn0gVGhpcyB2ZWN0b3IgZm9yIGNoYWluaW5nXG4gKi9cbkNQVmVjdG9yLnByb3RvdHlwZS5zY2FsZSA9IGZ1bmN0aW9uKHNjYWxlRmFjdG9yKSB7XG5cdHRoaXMueCAqPSBzY2FsZUZhY3Rvcjtcblx0dGhpcy55ICo9IHNjYWxlRmFjdG9yO1xuXG5cdHJldHVybiB0aGlzO1xufTtcblxuQ1BWZWN0b3IucHJvdG90eXBlLmdldFNjYWxlZCA9IGZ1bmN0aW9uKHNjYWxlRmFjdG9yKSB7XG5cdHZhclxuXHRcdHJlc3VsdCA9IG5ldyBDUFZlY3Rvcih0aGlzLngsIHRoaXMueSk7XG5cblx0cmVzdWx0LnNjYWxlKHNjYWxlRmFjdG9yKTtcblxuXHRyZXR1cm4gcmVzdWx0O1xufTtcblxuQ1BWZWN0b3IucHJvdG90eXBlLmdldFJvdW5kZWQgPSBmdW5jdGlvbigpIHtcblx0cmV0dXJuIG5ldyBDUFZlY3RvcihNYXRoLnJvdW5kKHRoaXMueCksIE1hdGgucm91bmQodGhpcy55KSk7XG59O1xuXG5DUFZlY3Rvci5wcm90b3R5cGUuZ2V0VHJ1bmNhdGVkID0gZnVuY3Rpb24oKSB7XG5cdHJldHVybiBuZXcgQ1BWZWN0b3Iofn50aGlzLngsIH5+dGhpcy55KTtcbn07XG5cbkNQVmVjdG9yLnByb3RvdHlwZS5nZXRQZXJwZW5kaWN1bGFyID0gZnVuY3Rpb24oKSB7XG5cdHJldHVybiBuZXcgQ1BWZWN0b3IoLXRoaXMueSwgdGhpcy54KTtcbn07XG5cbi8qKlxuICogQWRkIHRoYXQgdmVjdG9yIHRvIHRoaXMgb25lXG4gKlxuICogQHBhcmFtIHtDUFZlY3Rvcn0gdGhhdFxuICogQHJldHVybnMge0NQVmVjdG9yfSBUaGlzIHZlY3RvciBmb3IgY2hhaW5pbmdcbiAqL1xuQ1BWZWN0b3IucHJvdG90eXBlLmFkZCA9IGZ1bmN0aW9uKHRoYXQpIHtcblx0dGhpcy54ICs9IHRoYXQueDtcblx0dGhpcy55ICs9IHRoYXQueTtcblxuXHRyZXR1cm4gdGhpcztcbn07XG5cbi8qKlxuICogU3VidHJhY3QgdGhhdCB2ZWN0b3IgZnJvbSB0aGlzIG9uZVxuICpcbiAqIEBwYXJhbSB7Q1BWZWN0b3J9IHRoYXRcbiAqIEByZXR1cm5zIHtDUFZlY3Rvcn0gVGhpcyB2ZWN0b3IgZm9yIGNoYWluaW5nXG4gKi9cbkNQVmVjdG9yLnByb3RvdHlwZS5zdWJ0cmFjdCA9IGZ1bmN0aW9uKHRoYXQpIHtcblx0dGhpcy54IC09IHRoYXQueDtcblx0dGhpcy55IC09IHRoYXQueTtcblxuXHRyZXR1cm4gdGhpcztcbn07XG5cblxuLyoqXG4gKiBHZXQgdGhlIHN1bSBvZiB0aGlzIHZlY3RvciBhbmQgdGhhdCBvbmUuXG4gKlxuICogQHBhcmFtIHtDUFZlY3Rvcn0gdGhhdFxuICogQHJldHVybnMge0NQVmVjdG9yfVxuICovXG5DUFZlY3Rvci5wcm90b3R5cGUuZ2V0U3VtID0gZnVuY3Rpb24odGhhdCkge1xuXHRyZXR1cm4gbmV3IENQVmVjdG9yKHRoaXMueCArIHRoYXQueCwgdGhpcy55ICsgdGhhdC55KTtcbn07XG5cbi8qKlxuICogQ3JlYXRlIGEgbmV3IHZlY3RvciBieSBwMSAtIHAyXG4gKlxuICogQHBhcmFtIHAxXG4gKiBAcGFyYW0gcDJcbiAqXG4gKiBAcmV0dXJucyB7Q1BWZWN0b3J9XG4gKi9cbkNQVmVjdG9yLnN1YnRyYWN0UG9pbnRzID0gZnVuY3Rpb24ocDEsIHAyKSB7XG5cdHJldHVybiBuZXcgQ1BWZWN0b3IocDEueCAtIHAyLngsIHAxLnkgLSBwMi55KTtcbn07IiwiLypcbiAgICBDaGlja2VuUGFpbnRcbiAgICBcbiAgICBDaGlja2VuUGFpbnQgaXMgYSB0cmFuc2xhdGlvbiBvZiBDaGliaVBhaW50IGZyb20gSmF2YSB0byBKYXZhU2NyaXB0XG4gICAgYnkgTmljaG9sYXMgU2hlcmxvY2sgLyBDaGlja2VuIFNtb290aGllLlxuICAgIFxuICAgIENoaWJpUGFpbnQgaXMgQ29weXJpZ2h0IChjKSAyMDA2LTIwMDggTWFyYyBTY2hlZmVyXG5cbiAgICBDaGlja2VuUGFpbnQgaXMgZnJlZSBzb2Z0d2FyZTogeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yIG1vZGlmeVxuICAgIGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgYXMgcHVibGlzaGVkIGJ5XG4gICAgdGhlIEZyZWUgU29mdHdhcmUgRm91bmRhdGlvbiwgZWl0aGVyIHZlcnNpb24gMyBvZiB0aGUgTGljZW5zZSwgb3JcbiAgICAoYXQgeW91ciBvcHRpb24pIGFueSBsYXRlciB2ZXJzaW9uLlxuXG4gICAgQ2hpY2tlblBhaW50IGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsXG4gICAgYnV0IFdJVEhPVVQgQU5ZIFdBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2ZcbiAgICBNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuICBTZWUgdGhlXG4gICAgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy5cblxuICAgIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXG4gICAgYWxvbmcgd2l0aCBDaGlja2VuUGFpbnQuIElmIG5vdCwgc2VlIDxodHRwOi8vd3d3LmdudS5vcmcvbGljZW5zZXMvPi5cbiovXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIENQV2Fjb21UYWJsZXQoKSB7XG4gICAgdmFyIFxuICAgICAgICBwZW5BUEkgPSBudWxsLFxuICAgICAgICBwbHVnaW5PYmplY3QsXG4gICAgICAgIFxuICAgICAgICB0aGF0ID0gdGhpcztcblxuICAgIC8qKlxuICAgICAqIElzIHRoZSBwZW4gY3VycmVudGx5IGludGVyYWN0aW5nIHdpdGggdGhlIHRhYmxldCBzdXJmYWNlP1xuICAgICAqL1xuICAgIHRoaXMuaXNQZW4gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyXG4gICAgICAgICAgICBwb2ludGVyVHlwZTtcblxuICAgICAgICBpZiAocGVuQVBJKSB7XG4gICAgICAgICAgICBwb2ludGVyVHlwZSA9IHBlbkFQSS5wb2ludGVyVHlwZTtcblxuICAgICAgICAgICAgcmV0dXJuIHBvaW50ZXJUeXBlID09IDEgLyogUGVuICovIHx8IHBvaW50ZXJUeXBlID09IDMgLyogRXJhc2VyICovO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfTtcbiAgICBcbiAgICB0aGlzLmdldFByZXNzdXJlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmIChwZW5BUEkpIHtcbiAgICAgICAgICAgIHJldHVybiBwZW5BUEkucHJlc3N1cmU7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHJldHVybiAxLjA7XG4gICAgfTtcbiAgICBcbiAgICB0aGlzLnBsdWdpbkxvYWRlZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBjb25zb2xlLmxvZyhcIldhY29tIHRhYmxldCBzdXBwb3J0IGxvYWRlZCFcIik7XG5cbiAgICAgICAgcGVuQVBJID0gcGx1Z2luT2JqZWN0LnBlbkFQSTtcbiAgICB9O1xuICAgIFxuICAgIHRoaXMuaXNUYWJsZXRQcmVzZW50ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiAhIXBlbkFQSTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQ2FsbCBhZnRlciB0aGUgZG9jdW1lbnQgYm9keSBpcyByZWFkeSAobmVlZHMgRE9NIHRvIGJlIHJlYWR5IGZvciBsb2FkaW5nIHRoZSBXYWNvbSBwbHVnaW4pLlxuICAgICAqL1xuICAgIHRoaXMuZGV0ZWN0VGFibGV0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIC8vIENocm9tZSBoYXMgZHJvcHBlZCBOUEFQSSBzdXBwb3J0LCBzbyB0aGUgV2Fjb20gcGx1Z2luIGNhbm5vdCBiZSBpbnN0YWxsZWRcbiAgICAgICAgaWYgKC9DaHJvbWUvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpICYmICEvT1BSLy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpKSB7XG4gICAgICAgICAgICAvLyBQcmV2ZW50IGFuIHVnbHkgXCJ0aGlzIHBhZ2UgaGFzIHRyaWVkIHRvIGxvYWQgYSBwbHVnaW4gd2hpY2ggaXMgbm90IHN1cHBvcnRlZFwiIGVycm9yIG1lc3NhZ2VcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiTm90IGF0dGVtcHRpbmcgdG8gbG9hZCBXYWNvbSB0YWJsZXQgcGx1Z2luLCBzaW5jZSB0aGlzIGlzIENocm9tZVwiKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgY29uc29sZS5sb2coXCJBdHRlbXB0aW5nIHRvIGxvYWQgV2Fjb20gdGFibGV0IHN1cHBvcnQuLi5cIik7XG4gICAgICAgIFxuICAgICAgICBwbHVnaW5PYmplY3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwib2JqZWN0XCIpO1xuICAgICAgICBcbiAgICAgICAgaWYgKFwiY2xhc3NpZFwiIGluIHBsdWdpbk9iamVjdCkgeyAvLyBJRVxuICAgICAgICAgICAgcGx1Z2luT2JqZWN0LmNsYXNzaWQgPSBcIkNMU0lEOjA5MmRmYTg2LTU4MDctNWE5NC1iZjNiLTVhNTNiYTllNTMwOFwiO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgcGFyYW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicGFyYW1cIik7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHBhcmFtLm5hbWUgPSBcIm9ubG9hZFwiO1xuICAgICAgICAgICAgcGFyYW0udmFsdWUgPSBcIm9uV2Fjb21QbHVnaW5Mb2FkZWRcIjtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgcGx1Z2luT2JqZWN0LmFwcGVuZENoaWxkKHBhcmFtKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgcGx1Z2luT2JqZWN0LnR5cGUgPSBcImFwcGxpY2F0aW9uL3gtd2Fjb210YWJsZXRwbHVnaW5cIjtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgcGx1Z2luT2JqZWN0LnN0eWxlLnBvc2l0aW9uID0gXCJhYnNvbHV0ZVwiO1xuICAgICAgICBwbHVnaW5PYmplY3Quc3R5bGUudmlzaWJpbGl0eSA9IFwiaGlkZGVuXCI7XG4gICAgICAgIHBsdWdpbk9iamVjdC5vbmxvYWQgPSBcIm9uV2Fjb21QbHVnaW5Mb2FkZWRcIjtcbiAgICAgICAgXG4gICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQocGx1Z2luT2JqZWN0KTtcbiAgICAgICAgXG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpZiAoIXRoYXQuaXNUYWJsZXRQcmVzZW50KCkpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkxvb2tzIGxpa2UgdGhlIFdhY29tIHBsdWdpbiBpc24ndCBpbnN0YWxsZWQsIG9yIGZhaWxlZCB0byBsb2FkLlwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgNTAwMCk7XG4gICAgfTtcbn1cblxuQ1BXYWNvbVRhYmxldC5nZXRSZWYgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAoQ1BXYWNvbVRhYmxldC5pbnN0YW5jZSA9PSBudWxsKSB7XG4gICAgICAgIENQV2Fjb21UYWJsZXQuaW5zdGFuY2UgPSBuZXcgQ1BXYWNvbVRhYmxldCgpO1xuICAgIH1cbiAgICByZXR1cm4gQ1BXYWNvbVRhYmxldC5pbnN0YW5jZTtcbn1cblxud2luZG93Lm9uV2Fjb21QbHVnaW5Mb2FkZWQgPSBmdW5jdGlvbigpIHtcbiAgICBDUFdhY29tVGFibGV0LmdldFJlZigpLnBsdWdpbkxvYWRlZCgpO1xufSIsIi8qIVxuICogalF1ZXJ5IHRocm90dGxlIC8gZGVib3VuY2UgLSB2MS4xIC0gMy83LzIwMTBcbiAqIGh0dHA6Ly9iZW5hbG1hbi5jb20vcHJvamVjdHMvanF1ZXJ5LXRocm90dGxlLWRlYm91bmNlLXBsdWdpbi9cbiAqIFxuICogQ29weXJpZ2h0IChjKSAyMDEwIFwiQ293Ym95XCIgQmVuIEFsbWFuXG4gKiBEdWFsIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgYW5kIEdQTCBsaWNlbnNlcy5cbiAqIGh0dHA6Ly9iZW5hbG1hbi5jb20vYWJvdXQvbGljZW5zZS9cbiAqL1xuXG4vLyBTY3JpcHQ6IGpRdWVyeSB0aHJvdHRsZSAvIGRlYm91bmNlOiBTb21ldGltZXMsIGxlc3MgaXMgbW9yZSFcbi8vXG4vLyAqVmVyc2lvbjogMS4xLCBMYXN0IHVwZGF0ZWQ6IDMvNy8yMDEwKlxuLy8gXG4vLyBQcm9qZWN0IEhvbWUgLSBodHRwOi8vYmVuYWxtYW4uY29tL3Byb2plY3RzL2pxdWVyeS10aHJvdHRsZS1kZWJvdW5jZS1wbHVnaW4vXG4vLyBHaXRIdWIgICAgICAgLSBodHRwOi8vZ2l0aHViLmNvbS9jb3dib3kvanF1ZXJ5LXRocm90dGxlLWRlYm91bmNlL1xuLy8gU291cmNlICAgICAgIC0gaHR0cDovL2dpdGh1Yi5jb20vY293Ym95L2pxdWVyeS10aHJvdHRsZS1kZWJvdW5jZS9yYXcvbWFzdGVyL2pxdWVyeS5iYS10aHJvdHRsZS1kZWJvdW5jZS5qc1xuLy8gKE1pbmlmaWVkKSAgIC0gaHR0cDovL2dpdGh1Yi5jb20vY293Ym95L2pxdWVyeS10aHJvdHRsZS1kZWJvdW5jZS9yYXcvbWFzdGVyL2pxdWVyeS5iYS10aHJvdHRsZS1kZWJvdW5jZS5taW4uanMgKDAuN2tiKVxuLy8gXG4vLyBBYm91dDogTGljZW5zZVxuLy8gXG4vLyBDb3B5cmlnaHQgKGMpIDIwMTAgXCJDb3dib3lcIiBCZW4gQWxtYW4sXG4vLyBEdWFsIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgYW5kIEdQTCBsaWNlbnNlcy5cbi8vIGh0dHA6Ly9iZW5hbG1hbi5jb20vYWJvdXQvbGljZW5zZS9cbi8vIFxuLy8gQWJvdXQ6IEV4YW1wbGVzXG4vLyBcbi8vIFRoZXNlIHdvcmtpbmcgZXhhbXBsZXMsIGNvbXBsZXRlIHdpdGggZnVsbHkgY29tbWVudGVkIGNvZGUsIGlsbHVzdHJhdGUgYSBmZXdcbi8vIHdheXMgaW4gd2hpY2ggdGhpcyBwbHVnaW4gY2FuIGJlIHVzZWQuXG4vLyBcbi8vIFRocm90dGxlIC0gaHR0cDovL2JlbmFsbWFuLmNvbS9jb2RlL3Byb2plY3RzL2pxdWVyeS10aHJvdHRsZS1kZWJvdW5jZS9leGFtcGxlcy90aHJvdHRsZS9cbi8vIERlYm91bmNlIC0gaHR0cDovL2JlbmFsbWFuLmNvbS9jb2RlL3Byb2plY3RzL2pxdWVyeS10aHJvdHRsZS1kZWJvdW5jZS9leGFtcGxlcy9kZWJvdW5jZS9cbi8vIFxuLy8gQWJvdXQ6IFN1cHBvcnQgYW5kIFRlc3Rpbmdcbi8vIFxuLy8gSW5mb3JtYXRpb24gYWJvdXQgd2hhdCB2ZXJzaW9uIG9yIHZlcnNpb25zIG9mIGpRdWVyeSB0aGlzIHBsdWdpbiBoYXMgYmVlblxuLy8gdGVzdGVkIHdpdGgsIHdoYXQgYnJvd3NlcnMgaXQgaGFzIGJlZW4gdGVzdGVkIGluLCBhbmQgd2hlcmUgdGhlIHVuaXQgdGVzdHNcbi8vIHJlc2lkZSAoc28geW91IGNhbiB0ZXN0IGl0IHlvdXJzZWxmKS5cbi8vIFxuLy8galF1ZXJ5IFZlcnNpb25zIC0gbm9uZSwgMS4zLjIsIDEuNC4yXG4vLyBCcm93c2VycyBUZXN0ZWQgLSBJbnRlcm5ldCBFeHBsb3JlciA2LTgsIEZpcmVmb3ggMi0zLjYsIFNhZmFyaSAzLTQsIENocm9tZSA0LTUsIE9wZXJhIDkuNi0xMC4xLlxuLy8gVW5pdCBUZXN0cyAgICAgIC0gaHR0cDovL2JlbmFsbWFuLmNvbS9jb2RlL3Byb2plY3RzL2pxdWVyeS10aHJvdHRsZS1kZWJvdW5jZS91bml0L1xuLy8gXG4vLyBBYm91dDogUmVsZWFzZSBIaXN0b3J5XG4vLyBcbi8vIDEuMSAtICgzLzcvMjAxMCkgRml4ZWQgYSBidWcgaW4gPGpRdWVyeS50aHJvdHRsZT4gd2hlcmUgdHJhaWxpbmcgY2FsbGJhY2tzXG4vLyAgICAgICBleGVjdXRlZCBsYXRlciB0aGFuIHRoZXkgc2hvdWxkLiBSZXdvcmtlZCBhIGZhaXIgYW1vdW50IG9mIGludGVybmFsXG4vLyAgICAgICBsb2dpYyBhcyB3ZWxsLlxuLy8gMS4wIC0gKDMvNi8yMDEwKSBJbml0aWFsIHJlbGVhc2UgYXMgYSBzdGFuZC1hbG9uZSBwcm9qZWN0LiBNaWdyYXRlZCBvdmVyXG4vLyAgICAgICBmcm9tIGpxdWVyeS1taXNjIHJlcG8gdjAuNCB0byBqcXVlcnktdGhyb3R0bGUgcmVwbyB2MS4wLCBhZGRlZCB0aGVcbi8vICAgICAgIG5vX3RyYWlsaW5nIHRocm90dGxlIHBhcmFtZXRlciBhbmQgZGVib3VuY2UgZnVuY3Rpb25hbGl0eS5cblxuLy8gTWV0aG9kOiB0aHJvdHRsZVxuLy9cbi8vIFRocm90dGxlIGV4ZWN1dGlvbiBvZiBhIGZ1bmN0aW9uLiBFc3BlY2lhbGx5IHVzZWZ1bCBmb3IgcmF0ZSBsaW1pdGluZ1xuLy8gZXhlY3V0aW9uIG9mIGhhbmRsZXJzIG9uIGV2ZW50cyBsaWtlIHJlc2l6ZSBhbmQgc2Nyb2xsLiBJZiB5b3Ugd2FudCB0b1xuLy8gcmF0ZS1saW1pdCBleGVjdXRpb24gb2YgYSBmdW5jdGlvbiB0byBhIHNpbmdsZSB0aW1lLCBzZWUgdGhlXG4vLyA8alF1ZXJ5LmRlYm91bmNlPiBtZXRob2QuXG4vL1xuLy8gSW4gdGhpcyB2aXN1YWxpemF0aW9uLCB8IGlzIGEgdGhyb3R0bGVkLWZ1bmN0aW9uIGNhbGwgYW5kIFggaXMgdGhlIGFjdHVhbFxuLy8gY2FsbGJhY2sgZXhlY3V0aW9uOlxuLy9cbi8vID4gVGhyb3R0bGVkIHdpdGggYG5vX3RyYWlsaW5nYCBzcGVjaWZpZWQgYXMgZmFsc2Ugb3IgdW5zcGVjaWZpZWQ6XG4vLyA+IHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHwgKHBhdXNlKSB8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8XG4vLyA+IFggICAgWCAgICBYICAgIFggICAgWCAgICBYICAgICAgICBYICAgIFggICAgWCAgICBYICAgIFggICAgWFxuLy8gPlxuLy8gPiBUaHJvdHRsZWQgd2l0aCBgbm9fdHJhaWxpbmdgIHNwZWNpZmllZCBhcyB0cnVlOlxuLy8gPiB8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8IChwYXVzZSkgfHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fFxuLy8gPiBYICAgIFggICAgWCAgICBYICAgIFggICAgICAgICAgICAgWCAgICBYICAgIFggICAgWCAgICBYXG4vL1xuLy8gVXNhZ2U6XG4vL1xuLy8gPiB2YXIgdGhyb3R0bGVkID0galF1ZXJ5LnRocm90dGxlKCBkZWxheSwgWyBub190cmFpbGluZywgXSBjYWxsYmFjayApO1xuLy8gPlxuLy8gPiBqUXVlcnkoJ3NlbGVjdG9yJykuYmluZCggJ3NvbWVldmVudCcsIHRocm90dGxlZCApO1xuLy8gPiBqUXVlcnkoJ3NlbGVjdG9yJykudW5iaW5kKCAnc29tZWV2ZW50JywgdGhyb3R0bGVkICk7XG4vL1xuLy8gVGhpcyBhbHNvIHdvcmtzIGluIGpRdWVyeSAxLjQrOlxuLy9cbi8vID4galF1ZXJ5KCdzZWxlY3RvcicpLmJpbmQoICdzb21lZXZlbnQnLCBqUXVlcnkudGhyb3R0bGUoIGRlbGF5LCBbIG5vX3RyYWlsaW5nLCBdIGNhbGxiYWNrICkgKTtcbi8vID4galF1ZXJ5KCdzZWxlY3RvcicpLnVuYmluZCggJ3NvbWVldmVudCcsIGNhbGxiYWNrICk7XG4vL1xuLy8gQXJndW1lbnRzOlxuLy9cbi8vICBkZWxheSAtIChOdW1iZXIpIEEgemVyby1vci1ncmVhdGVyIGRlbGF5IGluIG1pbGxpc2Vjb25kcy4gRm9yIGV2ZW50XG4vLyAgICBjYWxsYmFja3MsIHZhbHVlcyBhcm91bmQgMTAwIG9yIDI1MCAob3IgZXZlbiBoaWdoZXIpIGFyZSBtb3N0IHVzZWZ1bC5cbi8vICBub190cmFpbGluZyAtIChCb29sZWFuKSBPcHRpb25hbCwgZGVmYXVsdHMgdG8gZmFsc2UuIElmIG5vX3RyYWlsaW5nIGlzXG4vLyAgICB0cnVlLCBjYWxsYmFjayB3aWxsIG9ubHkgZXhlY3V0ZSBldmVyeSBgZGVsYXlgIG1pbGxpc2Vjb25kcyB3aGlsZSB0aGVcbi8vICAgIHRocm90dGxlZC1mdW5jdGlvbiBpcyBiZWluZyBjYWxsZWQuIElmIG5vX3RyYWlsaW5nIGlzIGZhbHNlIG9yXG4vLyAgICB1bnNwZWNpZmllZCwgY2FsbGJhY2sgd2lsbCBiZSBleGVjdXRlZCBvbmUgZmluYWwgdGltZSBhZnRlciB0aGUgbGFzdFxuLy8gICAgdGhyb3R0bGVkLWZ1bmN0aW9uIGNhbGwuIChBZnRlciB0aGUgdGhyb3R0bGVkLWZ1bmN0aW9uIGhhcyBub3QgYmVlblxuLy8gICAgY2FsbGVkIGZvciBgZGVsYXlgIG1pbGxpc2Vjb25kcywgdGhlIGludGVybmFsIGNvdW50ZXIgaXMgcmVzZXQpXG4vLyAgY2FsbGJhY2sgLSAoRnVuY3Rpb24pIEEgZnVuY3Rpb24gdG8gYmUgZXhlY3V0ZWQgYWZ0ZXIgZGVsYXkgbWlsbGlzZWNvbmRzLlxuLy8gICAgVGhlIGB0aGlzYCBjb250ZXh0IGFuZCBhbGwgYXJndW1lbnRzIGFyZSBwYXNzZWQgdGhyb3VnaCwgYXMtaXMsIHRvXG4vLyAgICBgY2FsbGJhY2tgIHdoZW4gdGhlIHRocm90dGxlZC1mdW5jdGlvbiBpcyBleGVjdXRlZC5cbi8vXG4vLyBSZXR1cm5zOlxuLy9cbi8vICAoRnVuY3Rpb24pIEEgbmV3LCB0aHJvdHRsZWQsIGZ1bmN0aW9uLlxuXG5leHBvcnQgZnVuY3Rpb24gdGhyb3R0bGUoZGVsYXksIG5vX3RyYWlsaW5nLCBjYWxsYmFjaywgZGVib3VuY2VfbW9kZSkge1xuXHQvLyBBZnRlciB3cmFwcGVyIGhhcyBzdG9wcGVkIGJlaW5nIGNhbGxlZCwgdGhpcyB0aW1lb3V0IGVuc3VyZXMgdGhhdFxuXHQvLyBgY2FsbGJhY2tgIGlzIGV4ZWN1dGVkIGF0IHRoZSBwcm9wZXIgdGltZXMgaW4gYHRocm90dGxlYCBhbmQgYGVuZGBcblx0Ly8gZGVib3VuY2UgbW9kZXMuXG5cdHZhciB0aW1lb3V0X2lkLFxuXG5cdC8vIEtlZXAgdHJhY2sgb2YgdGhlIGxhc3QgdGltZSBgY2FsbGJhY2tgIHdhcyBleGVjdXRlZC5cblx0XHRsYXN0X2V4ZWMgPSAwO1xuXG5cdC8vIGBub190cmFpbGluZ2AgZGVmYXVsdHMgdG8gZmFsc3kuXG5cdGlmICh0eXBlb2Ygbm9fdHJhaWxpbmcgIT09ICdib29sZWFuJykge1xuXHRcdGRlYm91bmNlX21vZGUgPSBjYWxsYmFjaztcblx0XHRjYWxsYmFjayA9IG5vX3RyYWlsaW5nO1xuXHRcdG5vX3RyYWlsaW5nID0gdW5kZWZpbmVkO1xuXHR9XG5cblx0Ly8gVGhlIGB3cmFwcGVyYCBmdW5jdGlvbiBlbmNhcHN1bGF0ZXMgYWxsIG9mIHRoZSB0aHJvdHRsaW5nIC8gZGVib3VuY2luZ1xuXHQvLyBmdW5jdGlvbmFsaXR5IGFuZCB3aGVuIGV4ZWN1dGVkIHdpbGwgbGltaXQgdGhlIHJhdGUgYXQgd2hpY2ggYGNhbGxiYWNrYFxuXHQvLyBpcyBleGVjdXRlZC5cblx0ZnVuY3Rpb24gd3JhcHBlcigpIHtcblx0XHR2YXIgdGhhdCA9IHRoaXMsXG5cdFx0XHRlbGFwc2VkID0gK25ldyBEYXRlKCkgLSBsYXN0X2V4ZWMsXG5cdFx0XHRhcmdzID0gYXJndW1lbnRzO1xuXG5cdFx0Ly8gRXhlY3V0ZSBgY2FsbGJhY2tgIGFuZCB1cGRhdGUgdGhlIGBsYXN0X2V4ZWNgIHRpbWVzdGFtcC5cblx0XHRmdW5jdGlvbiBleGVjKCkge1xuXHRcdFx0bGFzdF9leGVjID0gK25ldyBEYXRlKCk7XG5cdFx0XHRjYWxsYmFjay5hcHBseSh0aGF0LCBhcmdzKTtcblx0XHR9XG5cblx0XHQvLyBJZiBgZGVib3VuY2VfbW9kZWAgaXMgdHJ1ZSAoYXRfYmVnaW4pIHRoaXMgaXMgdXNlZCB0byBjbGVhciB0aGUgZmxhZ1xuXHRcdC8vIHRvIGFsbG93IGZ1dHVyZSBgY2FsbGJhY2tgIGV4ZWN1dGlvbnMuXG5cdFx0ZnVuY3Rpb24gY2xlYXIoKSB7XG5cdFx0XHR0aW1lb3V0X2lkID0gdW5kZWZpbmVkO1xuXHRcdH1cblxuXHRcdGlmIChkZWJvdW5jZV9tb2RlICYmICF0aW1lb3V0X2lkKSB7XG5cdFx0XHQvLyBTaW5jZSBgd3JhcHBlcmAgaXMgYmVpbmcgY2FsbGVkIGZvciB0aGUgZmlyc3QgdGltZSBhbmRcblx0XHRcdC8vIGBkZWJvdW5jZV9tb2RlYCBpcyB0cnVlIChhdF9iZWdpbiksIGV4ZWN1dGUgYGNhbGxiYWNrYC5cblx0XHRcdGV4ZWMoKTtcblx0XHR9XG5cblx0XHQvLyBDbGVhciBhbnkgZXhpc3RpbmcgdGltZW91dC5cblx0XHR0aW1lb3V0X2lkICYmIGNsZWFyVGltZW91dCh0aW1lb3V0X2lkKTtcblxuXHRcdGlmIChkZWJvdW5jZV9tb2RlID09PSB1bmRlZmluZWQgJiYgZWxhcHNlZCA+IGRlbGF5KSB7XG5cdFx0XHQvLyBJbiB0aHJvdHRsZSBtb2RlLCBpZiBgZGVsYXlgIHRpbWUgaGFzIGJlZW4gZXhjZWVkZWQsIGV4ZWN1dGVcblx0XHRcdC8vIGBjYWxsYmFja2AuXG5cdFx0XHRleGVjKCk7XG5cblx0XHR9IGVsc2UgaWYgKG5vX3RyYWlsaW5nICE9PSB0cnVlKSB7XG5cdFx0XHQvLyBJbiB0cmFpbGluZyB0aHJvdHRsZSBtb2RlLCBzaW5jZSBgZGVsYXlgIHRpbWUgaGFzIG5vdCBiZWVuXG5cdFx0XHQvLyBleGNlZWRlZCwgc2NoZWR1bGUgYGNhbGxiYWNrYCB0byBleGVjdXRlIGBkZWxheWAgbXMgYWZ0ZXIgbW9zdFxuXHRcdFx0Ly8gcmVjZW50IGV4ZWN1dGlvbi5cblx0XHRcdC8vXG5cdFx0XHQvLyBJZiBgZGVib3VuY2VfbW9kZWAgaXMgdHJ1ZSAoYXRfYmVnaW4pLCBzY2hlZHVsZSBgY2xlYXJgIHRvIGV4ZWN1dGVcblx0XHRcdC8vIGFmdGVyIGBkZWxheWAgbXMuXG5cdFx0XHQvL1xuXHRcdFx0Ly8gSWYgYGRlYm91bmNlX21vZGVgIGlzIGZhbHNlIChhdCBlbmQpLCBzY2hlZHVsZSBgY2FsbGJhY2tgIHRvXG5cdFx0XHQvLyBleGVjdXRlIGFmdGVyIGBkZWxheWAgbXMuXG5cdFx0XHR0aW1lb3V0X2lkID0gc2V0VGltZW91dChkZWJvdW5jZV9tb2RlID8gY2xlYXIgOiBleGVjLCBkZWJvdW5jZV9tb2RlID09PSB1bmRlZmluZWQgPyBkZWxheSAtIGVsYXBzZWQgOiBkZWxheSk7XG5cdFx0fVxuXHR9XG5cblx0Ly8gUmV0dXJuIHRoZSB3cmFwcGVyIGZ1bmN0aW9uLlxuXHRyZXR1cm4gd3JhcHBlcjtcbn1cblxuLy8gTWV0aG9kOiBqUXVlcnkuZGVib3VuY2Vcbi8vXG4vLyBEZWJvdW5jZSBleGVjdXRpb24gb2YgYSBmdW5jdGlvbi4gRGVib3VuY2luZywgdW5saWtlIHRocm90dGxpbmcsXG4vLyBndWFyYW50ZWVzIHRoYXQgYSBmdW5jdGlvbiBpcyBvbmx5IGV4ZWN1dGVkIGEgc2luZ2xlIHRpbWUsIGVpdGhlciBhdCB0aGVcbi8vIHZlcnkgYmVnaW5uaW5nIG9mIGEgc2VyaWVzIG9mIGNhbGxzLCBvciBhdCB0aGUgdmVyeSBlbmQuIElmIHlvdSB3YW50IHRvXG4vLyBzaW1wbHkgcmF0ZS1saW1pdCBleGVjdXRpb24gb2YgYSBmdW5jdGlvbiwgc2VlIHRoZSA8alF1ZXJ5LnRocm90dGxlPlxuLy8gbWV0aG9kLlxuLy9cbi8vIEluIHRoaXMgdmlzdWFsaXphdGlvbiwgfCBpcyBhIGRlYm91bmNlZC1mdW5jdGlvbiBjYWxsIGFuZCBYIGlzIHRoZSBhY3R1YWxcbi8vIGNhbGxiYWNrIGV4ZWN1dGlvbjpcbi8vXG4vLyA+IERlYm91bmNlZCB3aXRoIGBhdF9iZWdpbmAgc3BlY2lmaWVkIGFzIGZhbHNlIG9yIHVuc3BlY2lmaWVkOlxuLy8gPiB8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8IChwYXVzZSkgfHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fFxuLy8gPiAgICAgICAgICAgICAgICAgICAgICAgICAgWCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFhcbi8vID5cbi8vID4gRGVib3VuY2VkIHdpdGggYGF0X2JlZ2luYCBzcGVjaWZpZWQgYXMgdHJ1ZTpcbi8vID4gfHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fCAocGF1c2UpIHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHxcbi8vID4gWCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFhcbi8vXG4vLyBVc2FnZTpcbi8vXG4vLyA+IHZhciBkZWJvdW5jZWQgPSBqUXVlcnkuZGVib3VuY2UoIGRlbGF5LCBbIGF0X2JlZ2luLCBdIGNhbGxiYWNrICk7XG4vLyA+XG4vLyA+IGpRdWVyeSgnc2VsZWN0b3InKS5iaW5kKCAnc29tZWV2ZW50JywgZGVib3VuY2VkICk7XG4vLyA+IGpRdWVyeSgnc2VsZWN0b3InKS51bmJpbmQoICdzb21lZXZlbnQnLCBkZWJvdW5jZWQgKTtcbi8vXG4vLyBUaGlzIGFsc28gd29ya3MgaW4galF1ZXJ5IDEuNCs6XG4vL1xuLy8gPiBqUXVlcnkoJ3NlbGVjdG9yJykuYmluZCggJ3NvbWVldmVudCcsIGpRdWVyeS5kZWJvdW5jZSggZGVsYXksIFsgYXRfYmVnaW4sIF0gY2FsbGJhY2sgKSApO1xuLy8gPiBqUXVlcnkoJ3NlbGVjdG9yJykudW5iaW5kKCAnc29tZWV2ZW50JywgY2FsbGJhY2sgKTtcbi8vXG4vLyBBcmd1bWVudHM6XG4vL1xuLy8gIGRlbGF5IC0gKE51bWJlcikgQSB6ZXJvLW9yLWdyZWF0ZXIgZGVsYXkgaW4gbWlsbGlzZWNvbmRzLiBGb3IgZXZlbnRcbi8vICAgIGNhbGxiYWNrcywgdmFsdWVzIGFyb3VuZCAxMDAgb3IgMjUwIChvciBldmVuIGhpZ2hlcikgYXJlIG1vc3QgdXNlZnVsLlxuLy8gIGF0X2JlZ2luIC0gKEJvb2xlYW4pIE9wdGlvbmFsLCBkZWZhdWx0cyB0byBmYWxzZS4gSWYgYXRfYmVnaW4gaXMgZmFsc2Ugb3Jcbi8vICAgIHVuc3BlY2lmaWVkLCBjYWxsYmFjayB3aWxsIG9ubHkgYmUgZXhlY3V0ZWQgYGRlbGF5YCBtaWxsaXNlY29uZHMgYWZ0ZXJcbi8vICAgIHRoZSBsYXN0IGRlYm91bmNlZC1mdW5jdGlvbiBjYWxsLiBJZiBhdF9iZWdpbiBpcyB0cnVlLCBjYWxsYmFjayB3aWxsIGJlXG4vLyAgICBleGVjdXRlZCBvbmx5IGF0IHRoZSBmaXJzdCBkZWJvdW5jZWQtZnVuY3Rpb24gY2FsbC4gKEFmdGVyIHRoZVxuLy8gICAgdGhyb3R0bGVkLWZ1bmN0aW9uIGhhcyBub3QgYmVlbiBjYWxsZWQgZm9yIGBkZWxheWAgbWlsbGlzZWNvbmRzLCB0aGVcbi8vICAgIGludGVybmFsIGNvdW50ZXIgaXMgcmVzZXQpXG4vLyAgY2FsbGJhY2sgLSAoRnVuY3Rpb24pIEEgZnVuY3Rpb24gdG8gYmUgZXhlY3V0ZWQgYWZ0ZXIgZGVsYXkgbWlsbGlzZWNvbmRzLlxuLy8gICAgVGhlIGB0aGlzYCBjb250ZXh0IGFuZCBhbGwgYXJndW1lbnRzIGFyZSBwYXNzZWQgdGhyb3VnaCwgYXMtaXMsIHRvXG4vLyAgICBgY2FsbGJhY2tgIHdoZW4gdGhlIGRlYm91bmNlZC1mdW5jdGlvbiBpcyBleGVjdXRlZC5cbi8vXG4vLyBSZXR1cm5zOlxuLy9cbi8vICAoRnVuY3Rpb24pIEEgbmV3LCBkZWJvdW5jZWQsIGZ1bmN0aW9uLlxuXG5leHBvcnQgZnVuY3Rpb24gZGVib3VuY2UoZGVsYXksIGF0X2JlZ2luLCBjYWxsYmFjaykge1xuXHRyZXR1cm4gY2FsbGJhY2sgPT09IHVuZGVmaW5lZFxuXHRcdD8gdGhyb3R0bGUoZGVsYXksIGF0X2JlZ2luLCBmYWxzZSlcblx0XHQ6IHRocm90dGxlKGRlbGF5LCBjYWxsYmFjaywgYXRfYmVnaW4gIT09IGZhbHNlKTtcbn1cbiJdfQ==

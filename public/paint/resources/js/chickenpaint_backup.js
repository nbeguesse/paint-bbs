(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.ChickenPaint = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
/*
    ChickenPaint

    ChickenPaint is a translation of ChibiPaint from Java to JavaScript
    by Nicholas Sherlock / Chicken Smoothie.

    ChibiPaint is Copyright (c) 2006-2008 Marc Schefer

    ChickenPaint is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    ChickenPaint is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with ChickenPaint. If not, see <http://www.gnu.org/licenses/>.
*/

"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports["default"] = ChickenPaint;

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

var _engineCPBrushInfo = require("./engine/CPBrushInfo");

var _engineCPBrushInfo2 = _interopRequireDefault(_engineCPBrushInfo);

var _engineCPArtwork = require("./engine/CPArtwork");

var _engineCPArtwork2 = _interopRequireDefault(_engineCPArtwork);

var _engineCPResourceLoader = require("./engine/CPResourceLoader");

var _engineCPResourceLoader2 = _interopRequireDefault(_engineCPResourceLoader);

var _engineCPResourceSaver = require("./engine/CPResourceSaver");

var _engineCPResourceSaver2 = _interopRequireDefault(_engineCPResourceSaver);

var _guiCPSplashScreenJs = require("./gui/CPSplashScreen.js");

var _guiCPSplashScreenJs2 = _interopRequireDefault(_guiCPSplashScreenJs);

var _guiCPMainGUI = require("./gui/CPMainGUI");

var _guiCPMainGUI2 = _interopRequireDefault(_guiCPMainGUI);

var _guiCPAboutDialog = require("./gui/CPAboutDialog");

var _guiCPAboutDialog2 = _interopRequireDefault(_guiCPAboutDialog);

var _guiCPShortcutsDialog = require("./gui/CPShortcutsDialog");

var _guiCPShortcutsDialog2 = _interopRequireDefault(_guiCPShortcutsDialog);

var _guiCPBoxBlurDialog = require("./gui/CPBoxBlurDialog");

var _guiCPBoxBlurDialog2 = _interopRequireDefault(_guiCPBoxBlurDialog);

var _guiCPTabletDialog = require("./gui/CPTabletDialog");

var _guiCPTabletDialog2 = _interopRequireDefault(_guiCPTabletDialog);

var _guiCPGridDialog = require("./gui/CPGridDialog");

var _guiCPGridDialog2 = _interopRequireDefault(_guiCPGridDialog);

var _guiCPSendDialog = require("./gui/CPSendDialog");

var _guiCPSendDialog2 = _interopRequireDefault(_guiCPSendDialog);

var _utilCPColor = require("./util/CPColor");

var _utilCPColor2 = _interopRequireDefault(_utilCPColor);

var _utilCPWacomTablet = require("./util/CPWacomTablet");

var _utilCPWacomTablet2 = _interopRequireDefault(_utilCPWacomTablet);

var _utilCPRect = require("./util/CPRect");

var _utilCPRect2 = _interopRequireDefault(_utilCPRect);

function isEventSupported(eventName) {
    var isSupported = (eventName in window);

    if (!isSupported) {
        var el = document.createElement('div');
        el.setAttribute(eventName, 'return;');

        isSupported = typeof el[eventName] == 'function';
    }

    return isSupported;
}

function isCanvasSupported() {
    var elem = document.createElement('canvas');
    return !!(elem.getContext && elem.getContext('2d'));
}

function isBrowserSupported() {
    return isCanvasSupported() && "Uint8Array" in window;
}

function createDrawingTools() {
    var tools = new Array(ChickenPaint.T_MAX);

    tools[ChickenPaint.T_PENCIL] = new _engineCPBrushInfo2["default"]({
        toolNb: ChickenPaint.T_PENCIL,
        size: 16,
        alpha: 255,
        isAA: true,
        minSpacing: 0.5,
        spacing: 0.05,
        pressureSize: false,
        pressureAlpha: true,
        type: _engineCPBrushInfo2["default"].B_ROUND_AA,
        paintMode: _engineCPBrushInfo2["default"].M_PAINT
    });

    tools[ChickenPaint.T_ERASER] = new _engineCPBrushInfo2["default"]({
        toolNb: ChickenPaint.T_ERASER,
        size: 16,
        alpha: 255,
        isAA: true,
        minSpacing: 0.5,
        spacing: 0.05,
        pressureSize: false,
        pressureAlpha: false,
        type: _engineCPBrushInfo2["default"].B_ROUND_AA,
        paintMode: _engineCPBrushInfo2["default"].M_ERASE
    });

    tools[ChickenPaint.T_PEN] = new _engineCPBrushInfo2["default"]({
        toolNb: ChickenPaint.T_PEN,
        size: 2,
        alpha: 128,
        isAA: true,
        minSpacing: 0.5,
        spacing: 0.05,
        pressureSize: true,
        pressureAlpha: false,
        type: _engineCPBrushInfo2["default"].B_ROUND_AA,
        paintMode: _engineCPBrushInfo2["default"].M_PAINT
    });

    tools[ChickenPaint.T_SOFTERASER] = new _engineCPBrushInfo2["default"]({
        toolNb: ChickenPaint.T_SOFTERASER,
        size: 16,
        alpha: 64,
        isAA: false,
        isAirbrush: true,
        minSpacing: 0.5,
        spacing: 0.05,
        pressureSize: false,
        pressureAlpha: true,
        type: _engineCPBrushInfo2["default"].B_ROUND_AIRBRUSH,
        paintMode: _engineCPBrushInfo2["default"].M_ERASE
    });

    tools[ChickenPaint.T_AIRBRUSH] = new _engineCPBrushInfo2["default"]({
        toolNb: ChickenPaint.T_AIRBRUSH,
        size: 50,
        alpha: 32,
        isAA: false,
        isAirbrush: true,
        minSpacing: 0.5,
        spacing: 0.05,
        pressureSize: false,
        pressureAlpha: true,
        type: _engineCPBrushInfo2["default"].B_ROUND_AIRBRUSH,
        paintMode: _engineCPBrushInfo2["default"].M_PAINT
    });

    tools[ChickenPaint.T_DODGE] = new _engineCPBrushInfo2["default"]({
        toolNb: ChickenPaint.T_DODGE,
        size: 30,
        alpha: 32,
        isAA: false,
        isAirbrush: true,
        minSpacing: 0.5,
        spacing: 0.05,
        pressureSize: false,
        pressureAlpha: true,
        type: _engineCPBrushInfo2["default"].B_ROUND_AIRBRUSH,
        paintMode: _engineCPBrushInfo2["default"].M_DODGE
    });

    tools[ChickenPaint.T_BURN] = new _engineCPBrushInfo2["default"]({
        toolNb: ChickenPaint.T_BURN,
        size: 30,
        alpha: 32,
        isAA: false,
        isAirbrush: true,
        minSpacing: 0.5,
        spacing: 0.05,
        pressureSize: false,
        pressureAlpha: true,
        type: _engineCPBrushInfo2["default"].B_ROUND_AIRBRUSH,
        paintMode: _engineCPBrushInfo2["default"].M_BURN
    });

    tools[ChickenPaint.T_WATER] = new _engineCPBrushInfo2["default"]({
        toolNb: ChickenPaint.T_WATER,
        size: 30,
        alpha: 70,
        isAA: false,
        isAirbrush: true,
        minSpacing: 0.5,
        spacing: 0.02,
        pressureSize: false,
        pressureAlpha: true,
        type: _engineCPBrushInfo2["default"].B_ROUND_AA,
        paintMode: _engineCPBrushInfo2["default"].M_WATER,
        resat: 0.3,
        bleed: 0.6
    });

    tools[ChickenPaint.T_BLUR] = new _engineCPBrushInfo2["default"]({
        toolNb: ChickenPaint.T_BLUR,
        size: 20,
        alpha: 255,
        isAA: false,
        isAirbrush: true,
        minSpacing: 0.5,
        spacing: 0.05,
        pressureSize: false,
        pressureAlpha: true,
        type: _engineCPBrushInfo2["default"].B_ROUND_PIXEL,
        paintMode: _engineCPBrushInfo2["default"].M_BLUR
    });

    tools[ChickenPaint.T_SMUDGE] = new _engineCPBrushInfo2["default"]({
        toolNb: ChickenPaint.T_SMUDGE,
        size: 20,
        alpha: 128,
        isAA: false,
        isAirbrush: true,
        minSpacing: 0.5,
        spacing: 0.01,
        pressureSize: false,
        pressureAlpha: true,
        type: _engineCPBrushInfo2["default"].B_ROUND_AIRBRUSH,
        paintMode: _engineCPBrushInfo2["default"].M_SMUDGE,
        resat: 0.0,
        bleed: 1.0
    });

    tools[ChickenPaint.T_BLENDER] = new _engineCPBrushInfo2["default"]({
        toolNb: ChickenPaint.T_BLENDER,
        size: 20,
        alpha: 60,
        isAA: false,
        isAirbrush: true,
        minSpacing: 0.5,
        spacing: 0.1,
        pressureSize: false,
        pressureAlpha: true,
        type: _engineCPBrushInfo2["default"].B_ROUND_AIRBRUSH,
        paintMode: _engineCPBrushInfo2["default"].M_OIL,
        resat: 0.0,
        bleed: 0.07
    });

    return tools;
}

/**
 * Creates an instance of the ChickenPaint drawing app. Options is an object with these keys:
 *
 * uiElem       - DOM element to insert ChickenPaint into (required)
 * canvasWidth  - Width in pixels to use when creating blank canvases (defaults to 800)
 * canvasHeight - Height in pixels to use when creating blank canvases (defaults to 600)
 * rotation     - Integer from [0..3], number of 90 degree right rotations that should be applied to the canvas after
 *                loading
 *
 * saveUrl   - URL to POST the drawing to to save it
 * postUrl   - URL to navigate to after saving is successful and the user chooses to see/publish their finished product
 * exitUrl   - URL to navigate to after saving is successful and the user chooses to exit (optional)
 * testUrl   - URL that ChickenPaint can simulate a drawing upload to to test the user's permissions/connection (optional)
 *
 * loadImageUrl     - URL of PNG/JPEG image to load for editing (optional)
 * loadChibiFileUrl - URL of .chi file to load for editing (optional). Used in preference to loadImage.
 * loadSwatchesUrl  - URL of an .aco palette to load (optional)
 * 
 * allowDownload - Allow the drawing to be saved to the user's computer
 * allowFullScreen - Allow the drawing tool to enter "full screen" mode, where the rest of the page contents will be hidden
 *
 * disableBootstrapAPI - Disable Bootstrap's data API on the root of the document. This speeds up things considerably.
 * 
 * resourcesRoot - URL to the directory that contains the gfx/css etc directories (relative to the page that 
 *                 ChickenPaint is loaded on)
 *
 * @throws ChickenPaint.UnsupportedBrowserException if the web browser does not support ChickenPaint
 */

function ChickenPaint(options) {
    var that = this,
        uiElem = options.uiElem,
        canvas,
        mainGUI,
        curColor = new _utilCPColor2["default"](0),
        curBrush = ChickenPaint.T_PENCIL,
        curMode = ChickenPaint.M_DRAW,
        curGradient = [0xFF000000, 0xFFFFFFFF],
        fullScreenMode = false,
        tools = createDrawingTools(),
        boxBlurDialog,
        gridDialog;

    function showBoxBlurDialog() {
        if (!boxBlurDialog) {
            boxBlurDialog = new _guiCPBoxBlurDialog2["default"](uiElem, that);
        }

        boxBlurDialog.show();
    }

    function showGridOptionsDialog() {
        if (!gridDialog) {
            gridDialog = new _guiCPGridDialog2["default"](uiElem, canvas);
        }

        gridDialog.show();
    }

    function callToolListeners() {
        that.emitEvent('toolChange', [curBrush, tools[curBrush]]);
    }

    // TODO make me private
    this.callToolListeners = function () {
        callToolListeners();
    };

    function callModeListeners() {
        that.emitEvent('modeChange', [curMode]);
    }

    function callViewListeners(viewInfo) {
        that.emitEvent('viewChange', [viewInfo]);
    }

    this.getMainGUI = function () {
        return mainGUI;
    };

    this.getArtwork = function () {
        return this.artwork;
    };

    this.setCanvas = function (_canvas) {
        canvas = _canvas;
    };

    this.setCurColor = function (color) {
        if (!curColor.isEqual(color)) {
            this.artwork.setForegroundColor(color.getRgb());

            curColor.copyFrom(color);

            this.emitEvent('colorChange', [color]);
        }
    };

    this.getCurColor = function () {
        return curColor.clone();
    };

    this.getCurColorRgb = function () {
        return curColor.getRgb();
    };

    this.setCurColorRgb = function (color) {
        this.setCurColor(new _utilCPColor2["default"](color));
    };

    this.setCurGradient = function (gradient) {
        curGradient = gradient.slice(0); // Clone

        this.emitEvent('gradientChange', [curGradient]);
    };

    this.getCurGradient = function () {
        return curGradient.slice(0); // Clone
    };

    this.setBrushSize = function (size) {
        tools[curBrush].size = Math.max(1, Math.min(200, size));
        callToolListeners();
    };

    this.getBrushSize = function () {
        return tools[curBrush].size;
    };

    this.setAlpha = function (alpha) {
        tools[curBrush].alpha = alpha;
        callToolListeners();
    };

    this.getAlpha = function () {
        return tools[curBrush].alpha;
    };

    function setMode(mode) {
        curMode = mode;
        callModeListeners();
    }

    function setTool(tool) {
        setMode(ChickenPaint.M_DRAW);
        curBrush = tool;
        that.artwork.setBrush(tools[tool]);
        callToolListeners();
    }

    this.getBrushInfo = function () {
        return tools[curBrush];
    };

    function saveDrawing() {
        var saver = new _engineCPResourceSaver2["default"]({
            artwork: that.getArtwork(),
            rotation: canvas.getRotation90(),
            swatches: mainGUI.getSwatches()
        });

        saver.on("savingComplete", function () {
            that.artwork.setHasUnsavedChanges(false);
        });

        saver.on("savingFailure", function () {
            alert("An error occured while trying to save your drawing! Please try again!");
        });

        saver.save();
    }

    function sendDrawing() {
        var saver = new _engineCPResourceSaver2["default"]({
            artwork: that.getArtwork(),
            rotation: canvas.getRotation90(),
            swatches: mainGUI.getSwatches(),
            url: options.saveUrl
        }),
            sendDialog = new _guiCPSendDialog2["default"](that, uiElem, saver);

        saver.on("savingComplete", function () {
            that.artwork.setHasUnsavedChanges(false);
        });

        // Allow the dialog to show before we begin serialization
        sendDialog.on("shown", function () {
            saver.save();
        });

        sendDialog.show();
    }

    /**
     * Not all saving actions will be supported (depending on what options we're configured with). Use this function
     * to check for support for a given action.
     */
    this.isActionSupported = function (actionName) {
        switch (actionName) {
            case "CPSend":
                return !!options.saveUrl;

            case "CPSave":
                return options.allowDownload !== false;

            case "CPExit":
                return !!options.exitUrl;

            case "CPPost":
                return !!options.postUrl;

            case "CPFullScreen":
                return options.allowFullScreen !== false;

            default:
                return true;
        }
    };

    this.actionPerformed = function (e) {
        if (this.artwork == null || canvas == null) {
            return; // this shouldn't happen but just in case
        }

        switch (e.action) {
            case "CPFullScreen":
                fullScreenMode = !fullScreenMode;

                $("body").toggleClass("chickenpaint-full-screen", fullScreenMode);
                $(uiElem).toggleClass("chickenpaint-full-screen", fullScreenMode);

                setTimeout(function () {
                    mainGUI.setFullScreenMode(fullScreenMode);
                }, 200);
                break;

            case "CPZoomIn":
                canvas.zoomIn();
                break;
            case "CPZoomOut":
                canvas.zoomOut();
                break;
            case "CPZoom100":
                canvas.zoom100();
                break;
            case "CPUndo":
                this.artwork.undo();
                break;
            case "CPRedo":
                this.artwork.redo();
                break;
            case "CPClearHistory":
                if (confirm("You're about to clear the current Undo/Redo history.\nThis operation cannot be undone, are you sure you want to do that?")) {
                    this.artwork.clearHistory();
                }
                break;
            case "CPPencil":
                setTool(ChickenPaint.T_PENCIL);
                break;
            case "CPPen":
                setTool(ChickenPaint.T_PEN);
                break;
            case "CPEraser":
                setTool(ChickenPaint.T_ERASER);
                break;
            case "CPSoftEraser":
                setTool(ChickenPaint.T_SOFTERASER);
                break;
            case "CPAirbrush":
                setTool(ChickenPaint.T_AIRBRUSH);
                break;
            case "CPDodge":
                setTool(ChickenPaint.T_DODGE);
                break;
            case "CPBurn":
                setTool(ChickenPaint.T_BURN);
                break;
            case "CPWater":
                setTool(ChickenPaint.T_WATER);
                break;
            case "CPBlur":
                setTool(ChickenPaint.T_BLUR);
                break;
            case "CPSmudge":
                setTool(ChickenPaint.T_SMUDGE);
                break;
            case "CPBlender":
                setTool(ChickenPaint.T_BLENDER);
                break;

            // Modes

            case "CPFloodFill":
                setMode(ChickenPaint.M_FLOODFILL);
                break;
            case "CPGradientFill":
                setMode(ChickenPaint.M_GRADIENTFILL);
                break;
            case "CPRectSelection":
                setMode(ChickenPaint.M_RECT_SELECTION);
                break;
            case "CPMoveTool":
                setMode(ChickenPaint.M_MOVE_TOOL);
                break;
            case "CPRotateCanvas":
                setMode(ChickenPaint.M_ROTATE_CANVAS);
                break;
            case "CPColorPicker":
                setMode(ChickenPaint.M_COLOR_PICKER);
                break;

            // Stroke modes

            case "CPFreeHand":
                tools[curBrush].strokeMode = _engineCPBrushInfo2["default"].SM_FREEHAND;
                callToolListeners();
                break;
            case "CPLine":
                tools[curBrush].strokeMode = _engineCPBrushInfo2["default"].SM_LINE;
                callToolListeners();
                break;
            case "CPBezier":
                tools[curBrush].strokeMode = _engineCPBrushInfo2["default"].SM_BEZIER;
                callToolListeners();
                break;

            case "CPAbout":
                new _guiCPAboutDialog2["default"](uiElem).show();
                break;
            case "CPShortcuts":
                new _guiCPShortcutsDialog2["default"](uiElem).show();
                break;
            case "CPTabletSupport":
                new _guiCPTabletDialog2["default"](uiElem).show();
                break;

            // Layers actions

            case "CPLayerDuplicate":
                this.artwork.duplicateLayer();
                break;
            case "CPLayerMergeDown":
                this.artwork.mergeDown(true);
                break;
            case "CPLayerMergeAll":
                this.artwork.mergeAllLayers(true);
                break;
            case "CPFill":
                this.artwork.fill(this.getCurColorRgb() | 0xff000000);
                break;
            case "CPClear":
                this.artwork.clear();
                break;
            case "CPSelectAll":
                this.artwork.rectangleSelection(this.artwork.getBounds());
                canvas.repaintAll();
                break;
            case "CPDeselectAll":
                this.artwork.rectangleSelection(new _utilCPRect2["default"](0, 0, 0, 0));
                canvas.repaintAll();
                break;
            case "CPHFlip":
                this.artwork.hFlip();
                break;
            case "CPVFlip":
                this.artwork.vFlip();
                break;
            case "CPMNoise":
                this.artwork.monochromaticNoise();
                break;
            case "CPCNoise":
                this.artwork.colorNoise();
                break;
            case "CPFXBoxBlur":
                showBoxBlurDialog();
                break;
            case "CPFXInvert":
                this.artwork.invert();
                break;
            case "CPCut":
                this.artwork.cutSelection(true);
                break;
            case "CPCopy":
                this.artwork.copySelection();
                break;
            case "CPCopyMerged":
                this.artwork.copySelectionMerged();
                break;
            case "CPPaste":
                this.artwork.pasteClipboard(true);
                break;
            case "CPLinearInterpolation":
                canvas.setInterpolation(e.selected);
                break;
            case "CPToggleGrid":
                canvas.showGrid(e.selected);
                break;
            case "CPGridOptions":
                showGridOptionsDialog();
                break;
            case "CPResetCanvasRotation":
                canvas.resetRotation();
                break;
            case "CPPalColor":
                mainGUI.showPalette("color", e.selected);
                break;
            case "CPPalBrush":
                mainGUI.showPalette("brush", e.selected);
                break;
            case "CPPalLayers":
                mainGUI.showPalette("layers", e.selected);
                break;
            case "CPPalStroke":
                mainGUI.showPalette("stroke", e.selected);
                break;
            case "CPPalSwatches":
                mainGUI.showPalette("swatches", e.selected);
                break;
            case "CPPalTool":
                mainGUI.showPalette("tool", e.selected);
                break;
            case "CPPalMisc":
                mainGUI.showPalette("misc", e.selected);
                break;
            case "CPPalTextures":
                mainGUI.showPalette("textures", e.selected);
                break;
            case "CPTogglePalettes":
                mainGUI.togglePalettes();
                break;
            case "CPArrangePalettes":
                mainGUI.arrangePalettes();
                break;

            // Saving

            case "CPSave":
                saveDrawing();
                break;
            case "CPSend":
                sendDrawing();
                break;
            case "CPPost":
                window.location = options.postUrl;
                break;
            case "CPExit":
                // Exit the drawing session without posting the drawing to the forum
                window.location = options.exitUrl;
                break;
        }

        // callCPEventListeners(); TODO
    };

    function installUnsavedWarning() {
        var confirmMessage = "Your drawing has unsaved changes!";

        if (isEventSupported("onbeforeunload")) {
            window.addEventListener("beforeunload", function (e) {
                if (that.artwork.getHasUnsavedChanges()) {
                    e.returnValue = confirmMessage;
                    return confirmMessage;
                }
            });
        } else {
            $("a").click(function (e) {
                // Fall back to just catching links
                if (that.artwork.getHasUnsavedChanges()) {
                    return confirm(confirmMessage);
                }
            });
        }
    }

    function startMainGUI(swatches, initialRotation90) {
        mainGUI = new _guiCPMainGUI2["default"](that, uiElem);

        setTool(ChickenPaint.T_PEN);
        mainGUI.arrangePalettes();

        if (swatches) {
            mainGUI.setSwatches(swatches);
        }

        if (initialRotation90) {
            mainGUI.setRotation(initialRotation90 * Math.PI / 2);
        }

        _utilCPWacomTablet2["default"].getRef().detectTablet();

        installUnsavedWarning();
    }

    this.getResourcesRoot = function () {
        return options.resourcesRoot;
    };

    if (!isBrowserSupported()) {
        throw new ChickenPaint.UnsupportedBrowserException();
    }

    if (typeof document.body.style.flexBasis != "string" && typeof document.body.style.msFlexDirection != "string") {
        uiElem.className += " no-flexbox";
    }

    uiElem.className += " chickenpaint";

    options.resourcesRoot = options.resourcesRoot || "chickenpaint/";

    if (options.disableBootstrapAPI) {
        $(document).off('.data-api');
    }

    if (options.loadImageUrl || options.loadChibiFileUrl) {
        var loader = new _engineCPResourceLoader2["default"](options);

        new _guiCPSplashScreenJs2["default"](uiElem, loader, options.resourcesRoot);

        loader.on("loadingComplete", function (resources) {
            that.artwork = resources.layers || resources.flat;

            startMainGUI(resources.swatches, options.rotation);
        });

        loader.load();
    } else {
        this.artwork = new _engineCPArtwork2["default"](options.canvasWidth || 800, options.canvasHeight || 600);
        this.artwork.addBackgroundLayer();

        startMainGUI();
    }
}

ChickenPaint.prototype = Object.create(EventEmitter.prototype);
ChickenPaint.prototype.constructor = ChickenPaint;

ChickenPaint.UnsupportedBrowserException = function () {};

ChickenPaint.UnsupportedBrowserException.prototype.toString = function () {
    return "Sorry, your web browser does not support ChickenPaint. Please try a modern browser like Chrome, Safari, Firefox, or Edge";
};

//
// Definition of all the modes available
//

ChickenPaint.M_DRAW = 0;
ChickenPaint.M_FLOODFILL = 1;
ChickenPaint.M_RECT_SELECTION = 2;
ChickenPaint.M_MOVE_TOOL = 3;
ChickenPaint.M_ROTATE_CANVAS = 4;
ChickenPaint.M_COLOR_PICKER = 5;
ChickenPaint.M_GRADIENTFILL = 6;

//
// Definition of all the standard tools available
//
ChickenPaint.T_PENCIL = 0;
ChickenPaint.T_ERASER = 1;
ChickenPaint.T_PEN = 2;
ChickenPaint.T_SOFTERASER = 3;
ChickenPaint.T_AIRBRUSH = 4;
ChickenPaint.T_DODGE = 5;
ChickenPaint.T_BURN = 6;
ChickenPaint.T_WATER = 7;
ChickenPaint.T_BLUR = 8;
ChickenPaint.T_SMUDGE = 9;
ChickenPaint.T_BLENDER = 10;
ChickenPaint.T_MAX = 11;
module.exports = exports["default"];

},{"./engine/CPArtwork":2,"./engine/CPBrushInfo":5,"./engine/CPResourceLoader":13,"./engine/CPResourceSaver":14,"./gui/CPAboutDialog":16,"./gui/CPBoxBlurDialog":17,"./gui/CPGridDialog":26,"./gui/CPMainGUI":28,"./gui/CPSendDialog":34,"./gui/CPShortcutsDialog":35,"./gui/CPSplashScreen.js":37,"./gui/CPTabletDialog":40,"./util/CPColor":46,"./util/CPRect":49,"./util/CPWacomTablet":51}],2:[function(require,module,exports){
/*
    ChickenPaint
    
    ChickenPaint is a translation of ChibiPaint from Java to JavaScript
    by Nicholas Sherlock / Chicken Smoothie.
    
    ChibiPaint is Copyright (c) 2006-2008 Marc Schefer

    ChickenPaint is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    ChickenPaint is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with ChickenPaint. If not, see <http://www.gnu.org/licenses/>.
*/

"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports["default"] = CPArtwork;

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

var _CPLayer = require("./CPLayer");

var _CPLayer2 = _interopRequireDefault(_CPLayer);

var _CPGreyBmp = require("./CPGreyBmp");

var _CPGreyBmp2 = _interopRequireDefault(_CPGreyBmp);

var _CPColorBmp = require("./CPColorBmp");

var _CPColorBmp2 = _interopRequireDefault(_CPColorBmp);

var _CPBrushManager = require("./CPBrushManager");

var _CPBrushManager2 = _interopRequireDefault(_CPBrushManager);

var _CPBrushInfo = require("./CPBrushInfo");

var _CPBrushInfo2 = _interopRequireDefault(_CPBrushInfo);

var _CPUndo = require("./CPUndo");

var _CPUndo2 = _interopRequireDefault(_CPUndo);

var _CPClip = require("./CPClip");

var _CPClip2 = _interopRequireDefault(_CPClip);

var _utilCPColorFloat = require("../util/CPColorFloat");

var _utilCPColorFloat2 = _interopRequireDefault(_utilCPColorFloat);

var _utilCPRect = require("../util/CPRect");

var _utilCPRect2 = _interopRequireDefault(_utilCPRect);

var _utilCPRandom = require("../util/CPRandom");

var _utilCPRandom2 = _interopRequireDefault(_utilCPRandom);

// Polyfill, used in duplicateLayer
if (!String.prototype.endsWith) {
    String.prototype.endsWith = function (searchString, position) {
        var subjectString = this.toString();
        if (typeof position !== 'number' || !isFinite(position) || Math.floor(position) !== position || position > subjectString.length) {
            position = subjectString.length;
        }
        position -= searchString.length;
        var lastIndex = subjectString.indexOf(searchString, position);
        return lastIndex !== -1 && lastIndex === position;
    };
}

function CPArtwork(_width, _height) {

    _width = _width | 0;
    _height = _height | 0;

    var MAX_UNDO = 30,
        EMPTY_BACKGROUND_COLOR = 0xFFFFFFFF,
        EMPTY_LAYER_COLOR = 0x00FFFFFF,
        BURN_CONSTANT = 260,
        BLUR_MIN = 64,
        BLUR_MAX = 1;

    var layers = [],
        curLayer,
        hasUnsavedChanges = false,
        curSelection = new _utilCPRect2["default"](0, 0, 0, 0),
        fusionBuffer = new _CPLayer2["default"](_width, _height),
        undoBuffer = new _CPLayer2["default"](_width, _height),
        undoBufferInvalidRegion = new _utilCPRect2["default"](0, 0, _width, _height),
        fusion = fusionBuffer,

    /* 
     * We use this buffer so we can accurately accumulate small changes to layer opacity during a brush stroke.
     * 
     * Normally we use it as a 16-bit opacity channel per pixel, but some brushes use the full 32-bits per pixel
     * as ARGB.
     */
    opacityBuffer = new _CPGreyBmp2["default"](_width, _height, 32),
        fusionArea = new _utilCPRect2["default"](0, 0, _width, _height),
        undoArea = new _utilCPRect2["default"](0, 0, 0, 0),
        opacityArea = new _utilCPRect2["default"](0, 0, 0, 0),
        rnd = new _utilCPRandom2["default"](),
        clipboard = null,
        // A CPClip
    undoList = [],
        redoList = [],
        curBrush = null,
        brushManager = new _CPBrushManager2["default"](),
        lastX = 0.0,
        lastY = 0.0,
        lastPressure = 0.0,
        brushBuffer = null,
        sampleAllLayers = false,
        lockAlpha = false,
        curColor = 0x000000,
        // Black

    that = this;

    // FIXME: 2007-01-13 I'm moving this to the CPRect class
    // find where this version is used and change the
    // code to use the CPRect version
    function clipSourceDest(srcRect, dstRect) {
        // FIXME:
        // /!\ dstRect bottom and right are ignored and instead we clip
        // against the width, height of the layer. :/
        //

        // this version would be enough in most cases (when we don't need
        // srcRect bottom and right to be clipped)
        // it's left here in case it's needed to make a faster version
        // of this function
        // dstRect.right = Math.min(width, dstRect.left + srcRect.getWidth());
        // dstRect.bottom = Math.min(height, dstRect.top + srcRect.getHeight());

        // new dest bottom/right
        dstRect.right = dstRect.left + srcRect.getWidth();
        if (dstRect.right > that.width) {
            srcRect.right -= dstRect.right - that.width;
            dstRect.right = that.width;
        }

        dstRect.bottom = dstRect.top + srcRect.getHeight();
        if (dstRect.bottom > that.height) {
            srcRect.bottom -= dstRect.bottom - that.height;
            dstRect.bottom = that.height;
        }

        // new src top/left
        if (dstRect.left < 0) {
            srcRect.left -= dstRect.left;
            dstRect.left = 0;
        }

        if (dstRect.top < 0) {
            srcRect.top -= dstRect.top;
            dstRect.top = 0;
        }
    }

    function callListenersUpdateRegion(region) {
        that.emitEvent("updateRegion", [region]);
    }

    // layerIndex is optional, provide when only one layer has been updated
    function callListenersLayerChange(layerIndex) {
        that.emitEvent("changeLayer", [layerIndex]);
    }

    this.getLayers = function () {
        return layers;
    };

    this.getLayerCount = function () {
        return layers.length;
    };

    //
    // Selection methods
    //

    /**
     * Gets the current selection rect or a rectangle covering the whole canvas if there are no selections
     * 
     * @returns CPRect
     */
    this.getSelectionAutoSelect = function () {
        var r;

        if (!curSelection.isEmpty()) {
            r = curSelection.clone();
        } else {
            r = this.getBounds();
        }

        return r;
    };

    this.getSelection = function () {
        return curSelection.clone();
    };

    /**
     * Mark the given rectangle on the canvas as needing to be re-fused (i.e. we've drawn in this region).
     * Listeners are notified about our updated canvas region.
     *
     * @param rect CPRect Rect to invalidate
     */
    function invalidateFusionRect(rect) {
        fusionArea.union(rect);

        // This updated area will need to be updated in our undo buffer later
        undoBufferInvalidRegion.union(rect);

        callListenersUpdateRegion(rect);
    };

    /**
     * Mark the entire canvas as needing to be re-fused (we've drawn to the whole canvas)
     */
    function invalidateFusion() {
        invalidateFusionRect(new _utilCPRect2["default"](0, 0, that.width, that.height));
    };

    this.setHasUnsavedChanges = function (value) {
        hasUnsavedChanges = value;
    };

    this.getHasUnsavedChanges = function () {
        return hasUnsavedChanges;
    };

    this.setLayerVisibility = function (layerIndex, visible) {
        var layer = this.getLayer(layerIndex);

        addUndo(new CPUndoLayerVisible(layerIndex, layer.visible, visible));
        layer.visible = visible;

        invalidateFusion();
        callListenersLayerChange(layerIndex);
    };

    this.addLayer = function () {
        var newLayer = new _CPLayer2["default"](this.width, this.height, this.getDefaultLayerName()),
            activeLayerIndex = this.getActiveLayerIndex();

        newLayer.clearAll(EMPTY_LAYER_COLOR); // Transparent white

        addUndo(new CPUndoAddLayer(activeLayerIndex));

        layers.splice(activeLayerIndex + 1, 0, newLayer);
        this.setActiveLayerIndex(activeLayerIndex + 1);

        invalidateFusion();
        callListenersLayerChange();
    };

    this.addLayerObject = function (layer) {
        layers.push(layer);

        if (layers.length == 1) {
            curLayer = layers[0];
        }

        invalidateFusion();
        callListenersLayerChange();
    };

    /**
     * Remove the currently selected layer.
     * 
     * Returns true if the layer was removed, or false when removal failed because there is currently only one layer in 
     * the document.
     */
    this.removeLayer = function () {
        if (layers.length > 1) {
            var activeLayerIndex = this.getActiveLayerIndex();

            addUndo(new CPUndoRemoveLayer(activeLayerIndex, curLayer));

            layers.splice(activeLayerIndex, 1);
            this.setActiveLayerIndex(activeLayerIndex < layers.length ? activeLayerIndex : activeLayerIndex - 1);

            invalidateFusion();
            callListenersLayerChange();

            return true;
        }

        return false;
    };

    this.duplicateLayer = function () {
        var copySuffix = " Copy",
            newLayer = new _CPLayer2["default"](this.width, this.height),
            activeLayerIndex = this.getActiveLayerIndex();

        addUndo(new CPUndoDuplicateLayer(activeLayerIndex));

        newLayer.copyFrom(layers[activeLayerIndex]);

        if (!newLayer.name.endsWith(copySuffix)) {
            newLayer.name += copySuffix;
        }

        layers.splice(activeLayerIndex + 1, 0, newLayer);
        this.setActiveLayerIndex(activeLayerIndex + 1);

        invalidateFusion();
        callListenersLayerChange();
    };

    this.mergeDown = function (createUndo) {
        var activeLayerIndex = this.getActiveLayerIndex();

        if (layers.length > 1 && activeLayerIndex > 0) {
            if (createUndo) {
                addUndo(new CPUndoMergeDownLayer(activeLayerIndex));
            }

            layers[activeLayerIndex].fusionWithFullAlpha(layers[activeLayerIndex - 1], this.getBounds());
            layers.splice(activeLayerIndex, 1);
            this.setActiveLayerIndex(activeLayerIndex - 1);

            invalidateFusion();
            callListenersLayerChange();
        }
    };

    this.mergeAllLayers = function (createUndo) {
        if (layers.length > 1) {
            if (createUndo) {
                addUndo(new CPUndoMergeAllLayers());
            }

            that.fusionLayers();
            layers = [];

            var layer = new _CPLayer2["default"](that.width, that.height, this.getDefaultLayerName());

            layer.copyDataFrom(fusion);

            layers.push(layer);
            this.setActiveLayerIndex(0);

            invalidateFusion();
            callListenersLayerChange();
        }
    };

    function moveLayerReal(from, to) {
        var layer = layers.splice(from, 1)[0];

        if (to <= from) {
            layers.splice(to, 0, layer);
            that.setActiveLayerIndex(to);
        } else {
            layers.splice(to - 1, 0, layer);
            that.setActiveLayerIndex(to - 1);
        }

        invalidateFusion();
        callListenersLayerChange();
    }

    /**
     * Move a layer in the stack from one index to another.
     * 
     * @param from int
     * @param to int
     */
    this.moveLayer = function (from, to) {
        if (from < 0 || from >= this.getLayerCount() || to < 0 || to > this.getLayerCount() || from == to) {
            return;
        }

        addUndo(new CPUndoMoveLayer(from, to));
        moveLayerReal(from, to);
    };

    this.setLayerAlpha = function (layerIndex, alpha) {
        var layer = this.getLayer(layerIndex);

        if (layer.getAlpha() != alpha) {
            addUndo(new CPUndoLayerAlpha(layerIndex, alpha));
            layer.setAlpha(alpha);

            invalidateFusion();
            callListenersLayerChange(layerIndex);
        }
    };

    this.setLayerBlendMode = function (layerIndex, blendMode) {
        var layer = this.getLayer(layerIndex);

        if (layer.getBlendMode() != blendMode) {
            addUndo(new CPUndoLayerMode(layerIndex, blendMode));
            layer.setBlendMode(blendMode);

            invalidateFusion();
            callListenersLayerChange(layerIndex);
        }
    };

    this.setLayerName = function (layerIndex, name) {
        var layer = this.getLayer(layerIndex);

        if (layer && layer.name != name) {
            addUndo(new CPUndoLayerRename(layerIndex, name));
            layer.name = name;

            callListenersLayerChange(layerIndex);
        }
    };

    function CPBrushToolBase() {}

    CPBrushToolBase.prototype.beginStroke = function (x, y, pressure) {
        prepareForLayerUndo();
        undoArea.makeEmpty();

        opacityBuffer.clearAll(0);
        opacityArea.makeEmpty();

        lastX = x;
        lastY = y;
        lastPressure = pressure;

        this.createAndPaintDab(x, y, pressure);
    };

    CPBrushToolBase.prototype.continueStroke = function (x, y, pressure) {
        var dist = Math.sqrt((lastX - x) * (lastX - x) + (lastY - y) * (lastY - y)),
            spacing = Math.max(curBrush.minSpacing, curBrush.curSize * curBrush.spacing);

        if (dist > spacing) {
            var nx = lastX,
                ny = lastY,
                np = lastPressure,
                df = (spacing - 0.001) / dist;

            for (var f = df; f <= 1.0; f += df) {
                nx = f * x + (1.0 - f) * lastX;
                ny = f * y + (1.0 - f) * lastY;
                np = f * pressure + (1.0 - f) * lastPressure;
                this.createAndPaintDab(nx, ny, np);
            }
            lastX = nx;
            lastY = ny;
            lastPressure = np;
        }
    };

    CPBrushToolBase.prototype.endStroke = function () {
        undoArea.clip(that.getBounds());

        // Did we end up painting anything?
        if (!undoArea.isEmpty()) {
            mergeOpacityBuffer(curColor, false);
            addUndo(new CPUndoPaint());

            /* Eagerly update the undo buffer for next time so we can avoid this lengthy
             * prepare at the beginning of a paint stroke
             */
            prepareForLayerUndo();
        }
        brushBuffer = null;
    };

    /**
     * Create a paint dab at the given position using the current brush, and paint it.
     *
     * @param x float
     * @param y float
     * @param pressure float
     */
    CPBrushToolBase.prototype.createAndPaintDab = function (x, y, pressure) {
        curBrush.applyPressure(pressure);

        if (curBrush.scattering > 0.0) {
            x += rnd.nextGaussian() * curBrush.curScattering / 4.0;
            y += rnd.nextGaussian() * curBrush.curScattering / 4.0;
        }

        var dab = brushManager.getDab(x, y, curBrush);

        this.paintDab(dab);
    };

    /**
     * Paint a dab returned by brushManager.getDab()
     *
     * @param dab {byte[] brush; int x, y, alpha, width, height}
     */
    CPBrushToolBase.prototype.paintDab = function (dab) {
        var srcRect = new _utilCPRect2["default"](0, 0, dab.width, dab.height),
            dstRect = new _utilCPRect2["default"](0, 0, dab.width, dab.height);

        dstRect.translate(dab.x, dab.y);

        clipSourceDest(srcRect, dstRect);

        // drawing entirely outside the canvas
        if (dstRect.isEmpty()) {
            return;
        }

        undoArea.union(dstRect);
        opacityArea.union(dstRect);

        this.paintDabImplementation(srcRect, dstRect, dab);

        invalidateFusionRect(dstRect);
    };

    function CPBrushToolSimpleBrush() {}

    CPBrushToolSimpleBrush.prototype = Object.create(CPBrushToolBase.prototype);
    CPBrushToolSimpleBrush.prototype.constructor = CPBrushToolSimpleBrush;

    CPBrushToolSimpleBrush.prototype.paintDabImplementation = function (srcRect, dstRect, dab) {
        // FIXME: there should be no reference to a specific tool here
        // create a new brush parameter instead
        if (curBrush.isAirbrush) {
            this.paintFlow(srcRect, dstRect, dab.brush, dab.width, Math.max(1, dab.alpha / 8));
        } else if (curBrush.toolNb == ChickenPaint.T_PEN) {
            this.paintFlow(srcRect, dstRect, dab.brush, dab.width, Math.max(1, dab.alpha / 2));
        } else {
            this.paintOpacity(srcRect, dstRect, dab.brush, dab.width, dab.alpha);
        }
    };

    CPBrushToolSimpleBrush.prototype.mergeOpacityBuf = function (dstRect, color /* int */) {
        var opacityData = opacityBuffer.data,
            undoData = undoBuffer.data,
            red = color >> 16 & 0xFF,
            green = color >> 8 & 0xFF,
            blue = color & 0xFF,
            width = dstRect.getWidth() | 0,
            height = dstRect.getHeight() | 0,
            dstOffset = curLayer.offsetOfPixel(dstRect.left, dstRect.top),
            srcOffset = opacityBuffer.offsetOfPixel(dstRect.left, dstRect.top),
            srcYStride = opacityBuffer.width - width | 0,
            dstYStride = (curLayer.width - width) * _CPColorBmp2["default"].BYTES_PER_PIXEL | 0;

        for (var y = 0; y < height; y++, srcOffset += srcYStride, dstOffset += dstYStride) {
            for (var x = 0; x < width; x++, srcOffset++, dstOffset += _CPColorBmp2["default"].BYTES_PER_PIXEL) {
                var opacityAlpha = opacityData[srcOffset] / 255 | 0;

                if (opacityAlpha > 0) {
                    var destAlpha = undoData[dstOffset + _CPColorBmp2["default"].ALPHA_BYTE_OFFSET],
                        newLayerAlpha = opacityAlpha + destAlpha * (255 - opacityAlpha) / 255 | 0,
                        realAlpha = 255 * opacityAlpha / newLayerAlpha | 0,
                        invAlpha = 255 - realAlpha;

                    curLayer.data[dstOffset] = (red * realAlpha + undoData[dstOffset] * invAlpha) / 255 & 0xff;
                    curLayer.data[dstOffset + 1] = (green * realAlpha + undoData[dstOffset + 1] * invAlpha) / 255 & 0xff;
                    curLayer.data[dstOffset + 2] = (blue * realAlpha + undoData[dstOffset + 2] * invAlpha) / 255 & 0xff;
                    curLayer.data[dstOffset + 3] = newLayerAlpha;
                }
            }
        }
    };

    /**
     *
     * @param srcRect CPRect
     * @param dstRect CPRect
     * @param brush int[]
     * @param brushWidth int
     * @param alpha float
     */
    CPBrushToolSimpleBrush.prototype.paintOpacity = function (srcRect, dstRect, brush, brushWidth, alpha) {
        var opacityData = opacityBuffer.data,
            srcOffset = srcRect.left + srcRect.top * brushWidth,
            dstOffset = opacityBuffer.offsetOfPixel(dstRect.left, dstRect.top),
            dstWidth = dstRect.getWidth(),
            srcYStride = brushWidth - dstWidth,
            dstYStride = that.width - dstWidth;

        alpha = Math.min(255, alpha);

        for (var y = dstRect.top; y < dstRect.bottom; y++, srcOffset += srcYStride, dstOffset += dstYStride) {
            for (var x = 0; x < dstWidth; x++, srcOffset++, dstOffset++) {
                opacityData[dstOffset] = Math.max(brush[srcOffset] * alpha, opacityData[dstOffset]);
            }
        }
    };

    CPBrushToolSimpleBrush.prototype.paintFlow = function (srcRect, dstRect, brush, brushWidth, alpha) {
        var opacityData = opacityBuffer.data,
            srcOffset = srcRect.left + srcRect.top * brushWidth,
            dstOffset = opacityBuffer.offsetOfPixel(dstRect.left, dstRect.top),
            dstWidth = dstRect.getWidth(),
            srcYStride = brushWidth - dstWidth,
            dstYStride = that.width - dstWidth;

        for (var y = dstRect.top; y < dstRect.bottom; y++, srcOffset += srcYStride, dstOffset += dstYStride) {
            for (var x = 0; x < dstWidth; x++, srcOffset++, dstOffset++) {
                var brushAlpha = brush[srcOffset] * alpha;

                if (brushAlpha != 0) {
                    var opacityAlpha = Math.min(255 * 255, opacityData[dstOffset] + (255 - opacityData[dstOffset] / 255) * brushAlpha / 255);

                    opacityData[dstOffset] = opacityAlpha;
                }
            }
        }
    };

    /*CPBrushToolSimpleBrush.prototype.paintOpacityFlow = function(srcRect, dstRect, brush, brushWidth, opacity, flow) {
        var 
            opacityData = opacityBuffer.data,
             by = srcRect.top;
        
        for (var y = dstRect.top; y < dstRect.bottom; y++, by++) {
            var 
                srcOffset = srcRect.left + by * brushWidth,
                dstOffset = dstRect.left + y * width;
            
            for (var x = dstRect.left; x < dstRect.right; x++, srcOffset++, dstOffset++) {
                var 
                    brushAlpha = brush[srcOffset] * flow;
                
                if (brushAlpha != 0) {
                    var
                        opacityAlpha = opacityData[dstOffset],
                        newAlpha = Math.min(255 * 255, opacityAlpha + (opacity - opacityAlpha / 255) * brushAlpha / 255);
                    
                    newAlpha = Math.min(opacity * brush[srcOffset], newAlpha);
                    
                    if (newAlpha > opacityAlpha) {
                        opacityData[dstOffset] = newAlpha;
                    }
                }
            }
        }
    };*/

    function CPBrushToolEraser() {}

    CPBrushToolEraser.prototype = Object.create(CPBrushToolSimpleBrush.prototype);
    CPBrushToolEraser.prototype.constructor = CPBrushToolEraser;

    CPBrushToolEraser.prototype.mergeOpacityBuf = function (dstRect, color) {
        var opacityData = opacityBuffer.data,
            undoData = undoBuffer.data;

        for (var y = dstRect.top; y < dstRect.bottom; y++) {
            var dstOffset = curLayer.offsetOfPixel(dstRect.left, y) + _CPColorBmp2["default"].ALPHA_BYTE_OFFSET,
                srcOffset = opacityBuffer.offsetOfPixel(dstRect.left, y);

            for (var x = dstRect.left; x < dstRect.right; x++, dstOffset += _CPColorBmp2["default"].BYTES_PER_PIXEL) {
                var opacityAlpha = opacityData[srcOffset++] / 255 | 0;

                if (opacityAlpha > 0) {
                    var destAlpha = undoData[dstOffset],
                        realAlpha = destAlpha * (255 - opacityAlpha) / 255;

                    curLayer.data[dstOffset] = realAlpha;
                }
            }
        }
    };

    function CPBrushToolDodge() {}

    CPBrushToolDodge.prototype = Object.create(CPBrushToolSimpleBrush.prototype);
    CPBrushToolDodge.prototype.constructor = CPBrushToolDodge;

    CPBrushToolDodge.prototype.mergeOpacityBuf = function (dstRect, color) {
        var opacityData = opacityBuffer.data,
            undoData = undoBuffer.data;

        for (var y = dstRect.top; y < dstRect.bottom; y++) {
            var dstOffset = curLayer.offsetOfPixel(dstRect.left, y),
                srcOffset = opacityBuffer.offsetOfPixel(dstRect.left, y);

            for (var x = dstRect.left; x < dstRect.right; x++, srcOffset++, dstOffset += _CPColorBmp2["default"].BYTES_PER_PIXEL) {
                var opacityAlpha = opacityData[srcOffset] / 255 | 0;

                if (opacityAlpha > 0 && undoData[dstOffset + _CPColorBmp2["default"].ALPHA_BYTE_OFFSET] != 0) {
                    opacityAlpha += 255;

                    for (var i = 0; i < 3; i++) {
                        var channel = undoData[dstOffset + i] * opacityAlpha / 255 | 0;

                        if (channel > 255) {
                            channel = 255;
                        }

                        curLayer.data[dstOffset + i] = channel;
                    }
                }
            }
        }
    };

    function CPBrushToolBurn() {}

    CPBrushToolBurn.prototype = Object.create(CPBrushToolSimpleBrush.prototype);
    CPBrushToolBurn.prototype.constructor = CPBrushToolBurn;

    CPBrushToolBurn.prototype.mergeOpacityBuf = function (dstRect, color) {
        var opacityData = opacityBuffer.data,
            undoData = undoBuffer.data;

        for (var y = dstRect.top; y < dstRect.bottom; y++) {
            var dstOffset = curLayer.offsetOfPixel(dstRect.left, y),
                srcOffset = opacityBuffer.offsetOfPixel(dstRect.left, y);

            for (var x = dstRect.left; x < dstRect.right; x++, srcOffset++, dstOffset += _CPColorBmp2["default"].BYTES_PER_PIXEL) {
                var opacityAlpha = opacityData[srcOffset] / 255 | 0;

                if (opacityAlpha > 0 && undoData[dstOffset + _CPColorBmp2["default"].ALPHA_BYTE_OFFSET] != 0) {
                    for (var i = 0; i < 3; i++) {
                        var channel = undoData[dstOffset + i];

                        channel = channel - (BURN_CONSTANT - channel) * opacityAlpha / 255 | 0;

                        if (channel < 0) {
                            channel = 0;
                        }

                        curLayer.data[dstOffset + i] = channel;
                    }
                }
            }
        }
    };

    function CPBrushToolBlur() {}

    CPBrushToolBlur.prototype = Object.create(CPBrushToolSimpleBrush.prototype);
    CPBrushToolBlur.prototype.constructor = CPBrushToolBlur;

    CPBrushToolBlur.prototype.mergeOpacityBuf = function (dstRect, color) {
        var opacityData = opacityBuffer.data,
            undoData = undoBuffer.data,
            dstYStride = undoBuffer.width * _CPColorBmp2["default"].BYTES_PER_PIXEL,
            r,
            g,
            b,
            a;

        function addSample(sampleOffset) {
            r += undoData[sampleOffset + _CPColorBmp2["default"].RED_BYTE_OFFSET];
            g += undoData[sampleOffset + _CPColorBmp2["default"].GREEN_BYTE_OFFSET];
            b += undoData[sampleOffset + _CPColorBmp2["default"].BLUE_BYTE_OFFSET];
            a += undoData[sampleOffset + _CPColorBmp2["default"].ALPHA_BYTE_OFFSET];
        }

        for (var y = dstRect.top; y < dstRect.bottom; y++) {
            var dstOffset = undoBuffer.offsetOfPixel(dstRect.left, y),
                srcOffset = opacityBuffer.offsetOfPixel(dstRect.left, y);

            for (var x = dstRect.left; x < dstRect.right; x++, dstOffset += _CPColorBmp2["default"].BYTES_PER_PIXEL, srcOffset++) {
                var opacityAlpha = opacityData[srcOffset] / 255 | 0;

                if (opacityAlpha > 0) {
                    var blur = BLUR_MIN + (BLUR_MAX - BLUR_MIN) * opacityAlpha / 255 | 0,
                        sum = blur + 4;

                    r = blur * undoData[dstOffset + _CPColorBmp2["default"].RED_BYTE_OFFSET];
                    g = blur * undoData[dstOffset + _CPColorBmp2["default"].GREEN_BYTE_OFFSET];
                    b = blur * undoData[dstOffset + _CPColorBmp2["default"].BLUE_BYTE_OFFSET];
                    a = blur * undoData[dstOffset + _CPColorBmp2["default"].ALPHA_BYTE_OFFSET];

                    addSample(y > 0 ? dstOffset - dstYStride : dstOffset);
                    addSample(y < undoBuffer.height - 1 ? dstOffset + dstYStride : dstOffset);
                    addSample(x > 0 ? dstOffset - _CPColorBmp2["default"].BYTES_PER_PIXEL : dstOffset);
                    addSample(x < undoBuffer.width - 1 ? dstOffset + _CPColorBmp2["default"].BYTES_PER_PIXEL : dstOffset);

                    a /= sum;
                    r /= sum;
                    g /= sum;
                    b /= sum;

                    curLayer.data[dstOffset + _CPColorBmp2["default"].RED_BYTE_OFFSET] = r | 0;
                    curLayer.data[dstOffset + _CPColorBmp2["default"].GREEN_BYTE_OFFSET] = g | 0;
                    curLayer.data[dstOffset + _CPColorBmp2["default"].BLUE_BYTE_OFFSET] = b | 0;
                    curLayer.data[dstOffset + _CPColorBmp2["default"].ALPHA_BYTE_OFFSET] = a | 0;
                }
            }
        }
    };

    /* Brushes derived from this class use the opacity buffer as a simple alpha layer (32-bit pixels in ARGB order) */
    function CPBrushToolDirectBrush() {}

    CPBrushToolDirectBrush.prototype = Object.create(CPBrushToolSimpleBrush.prototype);
    CPBrushToolDirectBrush.prototype.constructor = CPBrushToolDirectBrush;

    CPBrushToolDirectBrush.prototype.mergeOpacityBuf = function (dstRect, color) {
        var opacityData = opacityBuffer.data,
            undoData = undoBuffer.data,
            srcOffset = opacityBuffer.offsetOfPixel(dstRect.left, dstRect.top),
            dstOffset = curLayer.offsetOfPixel(dstRect.left, dstRect.top),
            width = dstRect.getWidth() | 0,
            height = dstRect.getHeight() | 0,
            srcYStride = opacityBuffer.width - width | 0,
            dstYStride = (curLayer.width - width) * _CPColorBmp2["default"].BYTES_PER_PIXEL | 0;

        for (var y = 0; y < height; y++, srcOffset += srcYStride, dstOffset += dstYStride) {
            for (var x = 0; x < width; x++, srcOffset++, dstOffset += _CPColorBmp2["default"].BYTES_PER_PIXEL) {
                var color1 = opacityData[srcOffset],
                    alpha1 = color1 >>> 24;

                if (alpha1 == 0) {
                    continue;
                }

                var
                // Pretty sure fusion.alpha is always 100 and the commented section is a copy/paste error
                alpha2 = undoData[dstOffset + _CPColorBmp2["default"].ALPHA_BYTE_OFFSET],
                    /* * fusion.alpha / 100 */
                newAlpha = alpha1 + alpha2 - alpha1 * alpha2 / 255 | 0;

                if (newAlpha > 0) {
                    var realAlpha = alpha1 * 255 / newAlpha | 0,
                        invAlpha = 255 - realAlpha;

                    curLayer.data[dstOffset] = ((color1 >> 16 & 0xFF) * realAlpha + undoData[dstOffset] * invAlpha) / 255 | 0;
                    curLayer.data[dstOffset + 1] = ((color1 >> 8 & 0xFF) * realAlpha + undoData[dstOffset + 1] * invAlpha) / 255 | 0;
                    curLayer.data[dstOffset + 2] = ((color1 & 0xFF) * realAlpha + undoData[dstOffset + 2] * invAlpha) / 255 | 0;
                    curLayer.data[dstOffset + 3] = newAlpha;
                }
            }
        }
    };

    function CPBrushToolWatercolor() {
        var WCMEMORY = 50,
            WXMAXSAMPLERADIUS = 64;

        var previousSamples = [];

        /**
         * Average out a bunch of samples around the given pixel (x, y).
         * 
         * dx, dy controls the spread of the samples.
         * 
         * @returns CPColorFloat
         */
        function sampleColor(x, y, dx, dy) {
            var samples = [],
                layerToSample = sampleAllLayers ? fusion : that.getActiveLayer();

            x = x | 0;
            y = y | 0;

            samples.push(_utilCPColorFloat2["default"].createFromInt(layerToSample.getPixel(x, y)));

            for (var r = 0.25; r < 1.001; r += .25) {
                samples.push(_utilCPColorFloat2["default"].createFromInt(layerToSample.getPixel(~ ~(x + r * dx), y)));
                samples.push(_utilCPColorFloat2["default"].createFromInt(layerToSample.getPixel(~ ~(x - r * dx), y)));
                samples.push(_utilCPColorFloat2["default"].createFromInt(layerToSample.getPixel(x, ~ ~(y + r * dy))));
                samples.push(_utilCPColorFloat2["default"].createFromInt(layerToSample.getPixel(x, ~ ~(y - r * dy))));

                samples.push(_utilCPColorFloat2["default"].createFromInt(layerToSample.getPixel(~ ~(x + r * 0.7 * dx), ~ ~(y + r * 0.7 * dy))));
                samples.push(_utilCPColorFloat2["default"].createFromInt(layerToSample.getPixel(~ ~(x + r * 0.7 * dx), ~ ~(y - r * 0.7 * dy))));
                samples.push(_utilCPColorFloat2["default"].createFromInt(layerToSample.getPixel(~ ~(x - r * 0.7 * dx), ~ ~(y + r * 0.7 * dy))));
                samples.push(_utilCPColorFloat2["default"].createFromInt(layerToSample.getPixel(~ ~(x - r * 0.7 * dx), ~ ~(y - r * 0.7 * dy))));
            }

            var average = new _utilCPColorFloat2["default"](0, 0, 0);

            for (var i = 0; i < samples.length; i++) {
                var sample = samples[i];

                average.r += sample.r;
                average.g += sample.g;
                average.b += sample.b;
            }

            average.r /= samples.length;
            average.g /= samples.length;
            average.b /= samples.length;

            return average;
        }

        // Blend the brush stroke with full color into the opacityBuffer
        function paintDirect(srcRect, dstRect, brush, brushWidth, alpha, color1) {
            var opacityData = opacityBuffer.data,
                by = srcRect.top;

            for (var y = dstRect.top; y < dstRect.bottom; y++, by++) {
                var srcOffset = srcRect.left + by * brushWidth,
                    dstOffset = opacityBuffer.offsetOfPixel(dstRect.left, y);

                for (var x = dstRect.left; x < dstRect.right; x++, srcOffset++, dstOffset++) {
                    var alpha1 = (brush[srcOffset] & 0xff) * alpha / 255 | 0;

                    if (alpha1 <= 0) {
                        continue;
                    }

                    var color2 = opacityData[dstOffset],
                        alpha2 = color2 >>> 24,
                        newAlpha = alpha1 + alpha2 - alpha1 * alpha2 / 255 | 0;

                    if (newAlpha > 0) {
                        var realAlpha = alpha1 * 255 / newAlpha | 0,
                            invAlpha = 255 - realAlpha;

                        // The usual alpha blending formula C = A * alpha + B * (1 - alpha)
                        // has to rewritten in the form C = A + (1 - alpha) * B - (1 - alpha) *A
                        // that way the rounding up errors won't cause problems

                        var newColor = newAlpha << 24 | (color1 >>> 16 & 0xff) + ((color2 >>> 16 & 0xff) * invAlpha - (color1 >>> 16 & 0xff) * invAlpha) / 255 << 16 | (color1 >>> 8 & 0xff) + ((color2 >>> 8 & 0xff) * invAlpha - (color1 >>> 8 & 0xff) * invAlpha) / 255 << 8 | (color1 & 0xff) + ((color2 & 0xff) * invAlpha - (color1 & 0xff) * invAlpha) / 255;

                        opacityData[dstOffset] = newColor;
                    }
                }
            }
        }

        this.beginStroke = function (x, y, pressure) {
            previousSamples = null;

            CPBrushToolDirectBrush.prototype.beginStroke.call(this, x, y, pressure);
        };

        this.paintDabImplementation = function (srcRect, dstRect, dab) {
            if (previousSamples == null) {
                // Seed the previousSamples list to capacity with a bunch of copies of one sample to get us started
                var startColor = sampleColor(~ ~((dstRect.left + dstRect.right) / 2), ~ ~((dstRect.top + dstRect.bottom) / 2), Math.max(1, Math.min(WXMAXSAMPLERADIUS, dstRect.getWidth() * 2 / 6)), Math.max(1, Math.min(WXMAXSAMPLERADIUS, dstRect.getHeight() * 2 / 6)));

                previousSamples = [];

                for (var i = 0; i < WCMEMORY; i++) {
                    previousSamples.push(startColor);
                }
            }

            var wcColor = new _utilCPColorFloat2["default"](0, 0, 0);

            for (var i = 0; i < previousSamples.length; i++) {
                var sample = previousSamples[i];

                wcColor.r += sample.r;
                wcColor.g += sample.g;
                wcColor.b += sample.b;
            }
            wcColor.r /= previousSamples.length;
            wcColor.g /= previousSamples.length;
            wcColor.b /= previousSamples.length;

            // resaturation
            wcColor.mixWith(_utilCPColorFloat2["default"].createFromInt(curColor), curBrush.resat * curBrush.resat);

            var newColor = wcColor.toInt();

            // bleed
            wcColor.mixWith(sampleColor((dstRect.left + dstRect.right) / 2, (dstRect.top + dstRect.bottom) / 2, Math.max(1, Math.min(WXMAXSAMPLERADIUS, dstRect.getWidth() * 2 / 6)), Math.max(1, Math.min(WXMAXSAMPLERADIUS, dstRect.getHeight() * 2 / 6))), curBrush.bleed);

            previousSamples.push(wcColor);
            previousSamples.shift();

            paintDirect(srcRect, dstRect, dab.brush, dab.width, Math.max(1, dab.alpha / 4), newColor);
            mergeOpacityBuffer(0, false);

            if (sampleAllLayers) {
                that.fusionLayers();
            }
        };
    }

    CPBrushToolWatercolor.prototype = Object.create(CPBrushToolDirectBrush.prototype);
    CPBrushToolWatercolor.prototype.constructor = CPBrushToolWatercolor;

    function CPBrushToolOil() {

        function oilAccumBuffer(srcRect, dstRect, buffer, w, alpha) {
            var layerToSample = sampleAllLayers ? fusion : that.getActiveLayer(),
                by = srcRect.top;

            for (var y = dstRect.top; y < dstRect.bottom; y++, by++) {
                var srcOffset = srcRect.left + by * w,
                    dstOffset = layerToSample.offsetOfPixel(dstRect.left, y);

                for (var x = dstRect.left; x < dstRect.right; x++, srcOffset++, dstOffset += _CPColorBmp2["default"].BYTES_PER_PIXEL) {
                    var alpha1 = layerToSample.data[dstOffset + _CPColorBmp2["default"].ALPHA_BYTE_OFFSET] * alpha / 255 | 0;

                    if (alpha1 <= 0) {
                        continue;
                    }

                    var color2 = buffer[srcOffset],
                        alpha2 = color2 >>> 24,
                        newAlpha = alpha1 + alpha2 - alpha1 * alpha2 / 255 | 0;

                    if (newAlpha > 0) {
                        var realAlpha = alpha1 * 255 / newAlpha | 0,
                            invAlpha = 255 - realAlpha,
                            color1Red = layerToSample.data[dstOffset + _CPColorBmp2["default"].RED_BYTE_OFFSET],
                            color1Green = layerToSample.data[dstOffset + _CPColorBmp2["default"].GREEN_BYTE_OFFSET],
                            color1Blue = layerToSample.data[dstOffset + _CPColorBmp2["default"].BLUE_BYTE_OFFSET],
                            newColor = newAlpha << 24 | color1Red + ((color2 >>> 16 & 0xff) * invAlpha - color1Red * invAlpha) / 255 << 16 | color1Green + ((color2 >>> 8 & 0xff) * invAlpha - color1Green * invAlpha) / 255 << 8 | color1Blue + ((color2 & 0xff) * invAlpha - color1Blue * invAlpha) / 255;

                        buffer[srcOffset] = newColor;
                    }
                }
            }
        }

        function oilResatBuffer(srcRect, dstRect, buffer, w, alpha1, color1) {
            var by = srcRect.top;

            if (alpha1 <= 0) {
                return;
            }

            for (var y = dstRect.top; y < dstRect.bottom; y++, by++) {
                var srcOffset = srcRect.left + by * w;

                for (var x = dstRect.left; x < dstRect.right; x++, srcOffset++) {
                    var color2 = buffer[srcOffset],
                        alpha2 = color2 >>> 24,
                        newAlpha = alpha1 + alpha2 - alpha1 * alpha2 / 255 | 0;

                    if (newAlpha > 0) {
                        var realAlpha = alpha1 * 255 / newAlpha | 0,
                            invAlpha = 255 - realAlpha,
                            newColor = newAlpha << 24 | (color1 >>> 16 & 0xff) + ((color2 >>> 16 & 0xff) * invAlpha - (color1 >>> 16 & 0xff) * invAlpha) / 255 << 16 | (color1 >>> 8 & 0xff) + ((color2 >>> 8 & 0xff) * invAlpha - (color1 >>> 8 & 0xff) * invAlpha) / 255 << 8 | (color1 & 0xff) + ((color2 & 0xff) * invAlpha - (color1 & 0xff) * invAlpha) / 255;

                        buffer[srcOffset] = newColor;
                    }
                }
            }
        }

        function oilPasteBuffer(srcRect, dstRect, buffer, brush, w, alpha) {
            var opacityData = opacityBuffer.data,
                by = srcRect.top;

            for (var y = dstRect.top; y < dstRect.bottom; y++, by++) {
                var bufferOffset = srcRect.left + by * w,
                    // Brush buffer is 1 integer per pixel
                opacityOffset = dstRect.left + y * that.width,
                    // Opacity buffer is 1 integer per pixel
                layerOffset = curLayer.offsetOfPixel(dstRect.left, y); // 4 bytes per pixel

                for (var x = dstRect.left; x < dstRect.right; x++, bufferOffset++, layerOffset += _CPColorBmp2["default"].BYTES_PER_PIXEL, opacityOffset++) {
                    var color1 = buffer[bufferOffset],
                        alpha1 = (color1 >>> 24) * (brush[bufferOffset] & 0xff) * alpha / (255 * 255) | 0;

                    if (alpha1 <= 0) {
                        continue;
                    }

                    var alpha2 = curLayer.data[layerOffset + _CPColorBmp2["default"].ALPHA_BYTE_OFFSET],
                        newAlpha = alpha1 + alpha2 - alpha1 * alpha2 / 255 | 0;

                    if (newAlpha > 0) {
                        var color2Red = curLayer.data[layerOffset + _CPColorBmp2["default"].RED_BYTE_OFFSET],
                            color2Green = curLayer.data[layerOffset + _CPColorBmp2["default"].GREEN_BYTE_OFFSET],
                            color2Blue = curLayer.data[layerOffset + _CPColorBmp2["default"].BLUE_BYTE_OFFSET],
                            realAlpha = alpha1 * 255 / newAlpha | 0,
                            invAlpha = 255 - realAlpha,
                            newColor = newAlpha << 24 | (color1 >>> 16 & 0xff) + (color2Red * invAlpha - (color1 >>> 16 & 0xff) * invAlpha) / 255 << 16 | (color1 >>> 8 & 0xff) + (color2Green * invAlpha - (color1 >>> 8 & 0xff) * invAlpha) / 255 << 8 | (color1 & 0xff) + (color2Blue * invAlpha - (color1 & 0xff) * invAlpha) / 255;

                        opacityData[opacityOffset] = newColor;
                    }
                }
            }
        }

        this.paintDabImplementation = function (srcRect, dstRect, dab) {
            if (brushBuffer == null) {
                brushBuffer = new Uint32Array(dab.width * dab.height); // Initialized to 0 for us by the browser

                oilAccumBuffer(srcRect, dstRect, brushBuffer, dab.width, 255);
            } else {
                oilResatBuffer(srcRect, dstRect, brushBuffer, dab.width, ~ ~(curBrush.resat <= 0.0 ? 0 : Math.max(1, curBrush.resat * curBrush.resat * 255)), curColor & 0xFFFFFF);
                oilPasteBuffer(srcRect, dstRect, brushBuffer, dab.brush, dab.width, dab.alpha);
                oilAccumBuffer(srcRect, dstRect, brushBuffer, dab.width, ~ ~(curBrush.bleed * 255));
            }

            mergeOpacityBuffer(0, false);

            if (sampleAllLayers) {
                that.fusionLayers();
            }
        };
    }

    CPBrushToolOil.prototype = Object.create(CPBrushToolDirectBrush.prototype);
    CPBrushToolOil.prototype.constructor = CPBrushToolOil;

    function CPBrushToolSmudge() {

        /**
         * 
         * @param srcRect
         * @param dstRect
         * @param buffer Uint32Array
         * @param w int
         * @param alpha int
         */
        function smudgeAccumBuffer(srcRect, dstRect, buffer, w, alpha) {
            var layerToSample = sampleAllLayers ? fusion : that.getActiveLayer(),
                by = srcRect.top;

            for (var y = dstRect.top; y < dstRect.bottom; y++, by++) {
                var srcOffset = srcRect.left + by * w,
                    dstOffset = layerToSample.offsetOfPixel(dstRect.left, y);

                for (var x = dstRect.left; x < dstRect.right; x++, srcOffset++, dstOffset += _CPColorBmp2["default"].BYTES_PER_PIXEL) {
                    var layerRed = layerToSample.data[dstOffset + _CPColorBmp2["default"].RED_BYTE_OFFSET],
                        layerGreen = layerToSample.data[dstOffset + _CPColorBmp2["default"].GREEN_BYTE_OFFSET],
                        layerBlue = layerToSample.data[dstOffset + _CPColorBmp2["default"].BLUE_BYTE_OFFSET],
                        layerAlpha = layerToSample.data[dstOffset + _CPColorBmp2["default"].ALPHA_BYTE_OFFSET],
                        opacityAlpha = 255 - alpha;

                    if (opacityAlpha > 0) {
                        var destColor = buffer[srcOffset],
                            destAlpha = 255,
                            newLayerAlpha = opacityAlpha + destAlpha * (255 - opacityAlpha) / 255 | 0,
                            realAlpha = 255 * opacityAlpha / newLayerAlpha | 0,
                            invAlpha = 255 - realAlpha,
                            newColor = (layerAlpha * realAlpha + (destColor >>> 24 & 0xff) * invAlpha) / 255 << 24 & 0xff000000 | (layerRed * realAlpha + (destColor >>> 16 & 0xff) * invAlpha) / 255 << 16 & 0xff0000 | (layerGreen * realAlpha + (destColor >>> 8 & 0xff) * invAlpha) / 255 << 8 & 0xff00 | (layerBlue * realAlpha + (destColor & 0xff) * invAlpha) / 255 & 0xff;

                        if (newColor == destColor) {
                            if (layerRed > (destColor & 0xff0000)) {
                                newColor += 1 << 16;
                            } else if (layerRed < (destColor & 0xff0000)) {
                                newColor -= 1 << 16;
                            }

                            if (layerGreen > (destColor & 0xff00)) {
                                newColor += 1 << 8;
                            } else if (layerGreen < (destColor & 0xff00)) {
                                newColor -= 1 << 8;
                            }

                            if (layerBlue > (destColor & 0xff)) {
                                newColor += 1;
                            } else if (layerBlue < (destColor & 0xff)) {
                                newColor -= 1;
                            }
                        }

                        buffer[srcOffset] = newColor;
                    }
                }
            }

            if (srcRect.left > 0) {
                var fill = srcRect.left;

                for (var y = srcRect.top; y < srcRect.bottom; y++) {
                    var offset = y * w,
                        fillColor = buffer[offset + srcRect.left];

                    for (var x = 0; x < fill; x++) {
                        buffer[offset++] = fillColor;
                    }
                }
            }

            if (srcRect.right < w) {
                var fill = w - srcRect.right;

                for (var y = srcRect.top; y < srcRect.bottom; y++) {
                    var offset = y * w + srcRect.right,
                        fillColor = buffer[offset - 1];

                    for (var x = 0; x < fill; x++) {
                        buffer[offset++] = fillColor;
                    }
                }
            }

            for (var y = 0; y < srcRect.top; y++) {
                var srcOffset = srcRect.top * w,
                    dstOffset = y * w;

                for (var x = 0; x < w; x++, srcOffset++, dstOffset++) {
                    buffer[dstOffset] = buffer[srcOffset];
                }
            }

            for (var y = srcRect.bottom; y < w; y++) {
                var srcOffset = (srcRect.bottom - 1) * w,
                    dstOffset = y * w;

                for (var x = 0; x < w; x++, srcOffset++, dstOffset++) {
                    buffer[dstOffset] = buffer[srcOffset];
                }
            }
        }

        /**
         * 
         * @param srcRect CPRect
         * @param dstRect CPRect
         * @param buffer Uint32Array
         * @param brush Uint8Array
         * @param w int
         * @param alpha int
         */
        function smudgePasteBuffer(srcRect, dstRect, buffer, brush, w, alpha) {
            var by = srcRect.top;

            for (var y = dstRect.top; y < dstRect.bottom; y++, by++) {
                var srcOffset = srcRect.left + by * w,
                    dstOffset = curLayer.offsetOfPixel(dstRect.left, y);

                for (var x = dstRect.left; x < dstRect.right; x++, srcOffset++, dstOffset += _CPColorBmp2["default"].BYTES_PER_PIXEL) {
                    var bufferColor = buffer[srcOffset],
                        opacityAlpha = (bufferColor >>> 24) * (brush[srcOffset] & 0xff) / 255;

                    if (opacityAlpha > 0) {
                        curLayer.data[dstOffset + _CPColorBmp2["default"].RED_BYTE_OFFSET] = bufferColor >> 16 & 0xff;
                        curLayer.data[dstOffset + _CPColorBmp2["default"].GREEN_BYTE_OFFSET] = bufferColor >> 8 & 0xff;
                        curLayer.data[dstOffset + _CPColorBmp2["default"].BLUE_BYTE_OFFSET] = bufferColor & 0xff;
                        curLayer.data[dstOffset + _CPColorBmp2["default"].ALPHA_BYTE_OFFSET] = bufferColor >> 24 & 0xff;
                    }
                }
            }
        }

        /**
         * @param srcRect CPRect
         * @param dstRect CPRect
         * @param dab CPBrushDab
         */
        this.paintDabImplementation = function (srcRect, dstRect, dab) {
            if (brushBuffer == null) {
                brushBuffer = new Uint32Array(dab.width * dab.height);
                smudgeAccumBuffer(srcRect, dstRect, brushBuffer, dab.width, 0);
            } else {
                smudgeAccumBuffer(srcRect, dstRect, brushBuffer, dab.width, dab.alpha);
                smudgePasteBuffer(srcRect, dstRect, brushBuffer, dab.brush, dab.width, dab.alpha);

                if (lockAlpha) {
                    restoreAlpha(dstRect);
                }
            }

            opacityArea.makeEmpty();

            if (sampleAllLayers) {
                that.fusionLayers();
            }
        };
    }

    CPBrushToolSmudge.prototype = Object.create(CPBrushToolDirectBrush.prototype);
    CPBrushToolSmudge.prototype.constructor = CPBrushToolSmudge;

    CPBrushToolSmudge.prototype.mergeOpacityBuf = function (dstRect, color) {};

    var paintingModes = [new CPBrushToolSimpleBrush(), new CPBrushToolEraser(), new CPBrushToolDodge(), new CPBrushToolBurn(), new CPBrushToolWatercolor(), new CPBrushToolBlur(), new CPBrushToolSmudge(), new CPBrushToolOil()];

    this.width = _width;
    this.height = _height;

    this.getDefaultLayerName = function () {
        var prefix = "Layer ",
            highestLayerNb = 0;

        for (var i = 0; i < layers.length; i++) {
            var layer = layers[i];

            if (/^Layer [0-9]+$/.test(layer.name)) {
                highestLayerNb = Math.max(highestLayerNb, parseInt(layer.name.substring(prefix.length), 10));
            }
        }
        return prefix + (highestLayerNb + 1);
    };

    function restoreAlpha(rect) {
        that.getActiveLayer().copyAlphaFrom(undoBuffer, rect);
    }

    /**
     * Merge the opacity buffer from the current drawing operation to the active layer.
     */
    function mergeOpacityBuffer(color, clear) {
        if (!opacityArea.isEmpty()) {
            if (curBrush.paintMode != _CPBrushInfo2["default"].M_ERASE || !lockAlpha) {
                paintingModes[curBrush.paintMode].mergeOpacityBuf(opacityArea, color);
            } else {
                // FIXME: it would be nice to be able to set the paper color
                paintingModes[_CPBrushInfo2["default"].M_PAINT].mergeOpacityBuf(opacityArea, EMPTY_LAYER_COLOR);
            }

            if (lockAlpha) {
                restoreAlpha(opacityArea);
            }

            if (clear) {
                opacityBuffer.clearRect(opacityArea, 0);
            }

            opacityArea.makeEmpty();
        }
    }

    this.addBackgroundLayer = function () {
        var layer = new _CPLayer2["default"](that.width, that.height, this.getDefaultLayerName());

        layer.clearAll(EMPTY_BACKGROUND_COLOR);

        this.addLayerObject(layer);
    };

    /**
     * Merge together the visible layers and return the resulting ImageData for display to the screen.
     * 
     * The image is cached, so repeat calls are cheap.
     */
    this.fusionLayers = function () {
        // Is there anything to update from last call?
        if (!fusionArea.isEmpty()) {
            // The current brush renders out its buffers to the layer stack for us
            mergeOpacityBuffer(curColor, false);

            // If the drawing is single-layered and opaque, just use the bottom-most layer as our fusion, we don't need to blend anything!
            if (layers.length == 1 && layers[0].alpha >= 100 && layers[0].visible) {
                fusion = layers[0];
            } else {
                // Fuse into the actual fusion buffer since we need to blend
                fusion = fusionBuffer;

                var fusionIsSemiTransparent = true,
                    first = true;

                layers.forEach(function (layer) {
                    if (!first) {
                        fusionIsSemiTransparent = fusionIsSemiTransparent && fusion.hasAlphaInRect(fusionArea);
                    }

                    if (layer.visible && layer.alpha > 0) {
                        if (first) {
                            first = false;

                            if (layer.alpha == 100) {
                                /*
                                 * Instead of blending the layer onto the empty transparent fusion, we can just copy the
                                 * layer data right into the fusion. This works for all of our blending modes.
                                 */

                                fusion.copyBitmapRect(layer, fusionArea.left, fusionArea.top, fusionArea);
                                return;
                            }

                            fusion.clearRect(fusionArea, 0x00FFFFFF); // Transparent white
                        }

                        // If we're merging onto a semi-transparent canvas then we need to blend our opacity values onto the existing ones
                        if (fusionIsSemiTransparent) {
                            layer.fusionWithFullAlpha(fusion, fusionArea);
                        } else {
                            // Most drawings will end up having 100% coverage and we can speed things up with this version instead
                            layer.fusionWith(fusion, fusionArea);
                        }
                    }
                });

                if (first) {
                    // Didn't draw any layers? We have to clear the area, then
                    fusion.clearRect(fusionArea, 0x00FFFFFF); // Transparent white
                }
            }

            fusionArea.makeEmpty();
        }

        return fusion.getImageData();
    };

    this.setActiveLayerIndex = function (newIndex) {
        if (newIndex < 0 || newIndex >= layers.length) {
            return;
        }

        if (curLayer != layers[newIndex]) {
            var oldIndex = this.getActiveLayerIndex();

            curLayer = layers[newIndex];

            // Was the old layer deleted?
            if (oldIndex == -1) {
                callListenersLayerChange();
            } else {
                callListenersLayerChange(oldIndex); // Old layer has now been deselected
                callListenersLayerChange(newIndex); // New layer has now been selected
            }

            invalidateLayerUndo();
        }
    };

    this.getActiveLayerIndex = function () {
        for (var i = 0; i < layers.length; i++) {
            if (layers[i] == curLayer) {
                return i;
            }
        }

        return -1;
    };

    /*
     * Get the index of the topmost visible layer, or 0.
     */
    this.getTopmostVisibleLayer = function () {
        for (var i = layers.length - 1; i >= 0; i--) {
            if (layers[i].visible) {
                return i;
            }
        }

        return 0;
    };

    this.getLayer = function (i) {
        return layers[i];
    };

    this.getActiveLayer = function () {
        return curLayer;
    };

    //
    // Undo / Redo
    //

    function canUndo() {
        return undoList.length > 0;
    }

    function canRedo() {
        return redoList.length > 0;
    }

    this.undo = function () {
        if (!canUndo()) {
            return;
        }
        hasUnsavedChanges = true;

        var undo = undoList.pop();

        undo.undo();

        redoList.push(undo);
    };

    this.redo = function () {
        if (!canRedo()) {
            return;
        }
        hasUnsavedChanges = true;

        var redo = redoList.pop();

        redo.redo();

        undoList.push(redo);
    };

    /**
     * Ensures that the state of the current layer has been stored in undoBuffer so it can be undone later.
     */
    function prepareForLayerUndo() {
        if (!undoBufferInvalidRegion.isEmpty()) {
            //console.log("Copying " + undoBufferInvalidRegion + " to the undo buffer");
            undoBuffer.copyBitmapRect(curLayer, undoBufferInvalidRegion.left, undoBufferInvalidRegion.top, undoBufferInvalidRegion);
            undoBufferInvalidRegion.makeEmpty();
        }
    }

    /**
     * Call when the undo buffer has become completely worthless (e.g. after the active layer index changes, the undo
     * buffer won't contain any data from the new layer to begin with).
     */
    function invalidateLayerUndo() {
        undoBufferInvalidRegion = that.getBounds();
    }

    /**
     * The result of some of our operations aren't needed until later, so we can defer them until the user is idle.
     *
     * You may call this routine at any time (or never, if you like) as a hint that the user is idle and we should
     * try to perform pending operations before we will need to block on their results.
     */
    this.performIdleTasks = function () {
        prepareForLayerUndo();
    };

    function addUndo(undo) {
        hasUnsavedChanges = true;

        if (undoList.length == 0 || !undoList[undoList.length - 1].merge(undo)) {
            if (undoList.length >= MAX_UNDO) {
                undoList.unshift();
            }
            undoList.push(undo);
        } else {
            // Two merged changes can mean no change at all
            // don't leave a useless undo in the list
            if (undoList[undoList.length - 1].noChange()) {
                undoList.pop();
            }
        }
        if (redoList.length > 0) {
            redoList = [];
        }
    }

    this.clearHistory = function () {
        undoList = [];
        redoList = [];
    };

    this.colorPicker = function (x, y) {
        // not really necessary and could potentially the repaint
        // of the canvas to miss that area
        // this.fusionLayers();

        return fusion.getPixel(~ ~x, ~ ~y) & 0xFFFFFF;
    };

    this.setSelection = function (rect) {
        curSelection.set(rect);
        curSelection.clip(this.getBounds());
    };

    this.emptySelection = function () {
        curSelection.makeEmpty();
    };

    this.floodFill = function (x, y) {
        prepareForLayerUndo();
        undoArea = this.getBounds();

        curLayer.floodFill(~ ~x, ~ ~y, curColor | 0xff000000);

        addUndo(new CPUndoPaint());
        invalidateFusion();
    };

    this.gradientFill = function (fromX, fromY, toX, toY, gradientPoints) {
        var r = this.getSelectionAutoSelect();

        prepareForLayerUndo();
        undoArea = r;

        curLayer.gradient(r, fromX, fromY, toX, toY, gradientPoints);

        if (lockAlpha) {
            restoreAlpha(r);
        }

        addUndo(new CPUndoPaint());
        invalidateFusion();
    };

    this.fill = function (color) {
        var r = this.getSelectionAutoSelect();

        prepareForLayerUndo();
        undoArea = r;

        curLayer.clearRect(r, color);

        addUndo(new CPUndoPaint());
        invalidateFusion();
    };

    this.clear = function () {
        this.fill(0xffffff);
    };

    this.hFlip = function () {
        var r = this.getSelectionAutoSelect();

        prepareForLayerUndo();
        undoArea = r;

        curLayer.copyRegionHFlip(r, undoBuffer);

        addUndo(new CPUndoPaint());
        invalidateFusion();
    };

    this.vFlip = function () {
        var r = this.getSelectionAutoSelect();

        prepareForLayerUndo();
        undoArea = r;

        curLayer.copyRegionVFlip(r, undoBuffer);

        addUndo(new CPUndoPaint());
        invalidateFusion();
    };

    this.monochromaticNoise = function () {
        var r = this.getSelectionAutoSelect();

        prepareForLayerUndo();
        undoArea = r;

        curLayer.fillWithNoise(r);

        addUndo(new CPUndoPaint());
        invalidateFusion();
    };

    this.colorNoise = function () {
        var r = this.getSelectionAutoSelect();

        prepareForLayerUndo();
        undoArea = r;

        curLayer.fillWithColorNoise(r);

        addUndo(new CPUndoPaint());
        invalidateFusion();
    };

    this.invert = function () {
        var r = this.getSelectionAutoSelect();

        prepareForLayerUndo();
        undoArea = r;

        curLayer.invert(r);

        addUndo(new CPUndoPaint());
        invalidateFusion();
    };

    this.boxBlur = function (radiusX, radiusY, iterations) {
        var r = this.getSelectionAutoSelect();

        prepareForLayerUndo();
        undoArea = r;

        for (var i = 0; i < iterations; i++) {
            curLayer.boxBlur(r, radiusX, radiusY);
        }

        addUndo(new CPUndoPaint());
        invalidateFusion();
    };

    this.rectangleSelection = function (r) {
        var newSelection = r.clone();

        newSelection.clip(this.getBounds());

        addUndo(new CPUndoRectangleSelection(this.getSelection(), newSelection));

        this.setSelection(newSelection);
    };

    // temp awful hack
    var moveInitSelect = null,
        // CPRect
    movePrevX,
        movePrevY,
        movePrevX2,
        movePrevY2,
        moveModeCopy,
        prevModeCopy;

    this.beginPreviewMode = function (copy) {
        // !!!! awful awful hack !!! will break as soon as CPMultiUndo is used for other things
        // FIXME: ASAP!
        if (!copy && undoList.length > 0 && redoList.length == 0 && undoList[undoList.length - 1] instanceof CPMultiUndo && undoList[undoList.length - 1].undoes[0] instanceof CPUndoPaint && undoList[undoList.length - 1].undoes[0].layer == this.getActiveLayerIndex()) {
            this.undo();
            copy = prevModeCopy;
        } else {
            movePrevX = 0;
            movePrevY = 0;

            prepareForLayerUndo();
            undoArea.makeEmpty();

            opacityBuffer.clearAll();
            opacityArea.makeEmpty();
        }

        moveInitSelect = null;
        moveModeCopy = copy;
    };

    this.endPreviewMode = function () {
        var undo = new CPUndoPaint();

        if (moveInitSelect != null) {
            undo = new CPMultiUndo([undo, new CPUndoRectangleSelection(moveInitSelect, this.getSelection())]);
        } else {
            // !!!!!!
            // FIXME: this is required just to make the awful move hack work
            undo = new CPMultiUndo([undo]);
        }

        addUndo(undo);

        moveInitSelect = null;
        movePrevX = movePrevX2;
        movePrevY = movePrevY2;
        prevModeCopy = moveModeCopy;
    };

    /**
     * Move the selected layer data by the given offset.
     *
     * @param offsetX int
     * @param offsetY int
     */
    this.move = function (offsetX, offsetY) {
        var srcRect;

        // Add rounding to ensure we haven't been given float coordinates
        offsetX = movePrevX + offsetX | 0;
        offsetY = movePrevY + offsetY | 0;

        if (moveInitSelect == null) {
            srcRect = this.getSelectionAutoSelect();
            if (!this.getSelection().isEmpty()) {
                moveInitSelect = this.getSelection();
            }
        } else {
            srcRect = moveInitSelect.clone();
        }
        curLayer.copyDataFrom(undoBuffer);

        if (!moveModeCopy) {
            curLayer.clearRect(srcRect, 0);
        }

        curLayer.pasteAlphaRect(undoBuffer, srcRect, srcRect.left + offsetX, srcRect.top + offsetY);

        undoArea.makeEmpty();
        if (!moveModeCopy) {
            undoArea.union(srcRect);
        }
        srcRect.translate(offsetX, offsetY);
        undoArea.union(srcRect);

        invalidateFusion(); // TODO make more precise

        if (moveInitSelect != null) {
            var sel = moveInitSelect.clone();
            sel.translate(offsetX, offsetY);
            this.setSelection(sel);
        }

        // this is a really bad idea :D
        movePrevX2 = offsetX;
        movePrevY2 = offsetY;
    };

    // Copy/Paste functions

    this.cutSelection = function (createUndo) {
        var selection = this.getSelection();

        if (selection.isEmpty()) {
            return;
        }

        clipboard = new _CPClip2["default"](curLayer.cloneRect(selection), selection.left, selection.top);

        if (createUndo) {
            addUndo(new CPUndoCut(clipboard.bmp, this.getActiveLayerIndex(), selection));
        }

        curLayer.clearRect(selection, EMPTY_LAYER_COLOR);
        invalidateFusionRect(selection);
    };

    this.copySelection = function () {
        var selection = that.getSelection();

        if (selection.isEmpty()) {
            return;
        }

        clipboard = new _CPClip2["default"](curLayer.cloneRect(selection), selection.left, selection.top);
    };

    this.copySelectionMerged = function () {
        var selection = that.getSelection();

        if (selection.isEmpty()) {
            return;
        }

        // make sure the fusioned picture is up to date
        this.fusionLayers();
        clipboard = new _CPClip2["default"](fusion.cloneRect(selection), selection.left, selection.top);
    };

    /**
     *
     * @param createUndo boolean
     * @param clip CPClip
     */
    function pasteClip(createUndo, clip) {
        var activeLayerIndex = that.getActiveLayerIndex();

        if (createUndo) {
            addUndo(new CPUndoPaste(clip, activeLayerIndex, that.getSelection()));
        }

        var newLayer = new _CPLayer2["default"](that.width, that.height, that.getDefaultLayerName()),
            sourceRect = clip.bmp.getBounds(),
            x,
            y;

        layers.splice(activeLayerIndex + 1, 0, newLayer);
        that.setActiveLayerIndex(activeLayerIndex + 1);

        if (sourceRect.isInside(that.getBounds())) {
            x = clip.x;
            y = clip.y;
        } else {
            x = (that.width - clip.bmp.width) / 2 | 0;
            y = (that.height - clip.bmp.height) / 2 | 0;
        }

        curLayer.copyBitmapRect(clip.bmp, x, y, sourceRect);
        that.emptySelection();

        invalidateFusion();
        callListenersLayerChange();
    }

    this.pasteClipboard = function (createUndo) {
        if (clipboard != null) {
            pasteClip(createUndo, clipboard);
        }
    };

    this.setSampleAllLayers = function (b) {
        sampleAllLayers = b;
    };

    this.setLockAlpha = function (b) {
        lockAlpha = b;
    };

    this.setForegroundColor = function (color) {
        curColor = color;
    };

    this.setBrush = function (brush) {
        curBrush = brush;
    };

    this.setBrushTexture = function (texture) {
        brushManager.setTexture(texture);
    };

    // ///////////////////////////////////////////////////////////////////////////////////
    // Paint engine
    // ///////////////////////////////////////////////////////////////////////////////////

    this.beginStroke = function (x, y, pressure) {
        if (curBrush == null) {
            return;
        }

        paintingModes[curBrush.paintMode].beginStroke(x, y, pressure);
    };

    this.continueStroke = function (x, y, pressure) {
        if (curBrush == null) {
            return;
        }

        paintingModes[curBrush.paintMode].continueStroke(x, y, pressure);
    };

    this.endStroke = function () {
        if (curBrush == null) {
            return;
        }

        paintingModes[curBrush.paintMode].endStroke();
    };

    this.hasAlpha = function () {
        return fusion.hasAlpha();
    };

    /**
     * Get the artwork as a single flat PNG image.
     * 
     * Rotation is [0..3] and selects a multiple of 90 degrees of clockwise rotation to be applied to the drawing before
     * saving.
     * 
     * @return A binary string of the PNG file data.
     */
    this.getFlatPNG = function (rotation) {
        this.fusionLayers();

        return fusion.getAsPNG(rotation);
    };

    /**
     * Returns true if this artwork can be exactly represented as a simple transparent PNG (i.e. doesn't have multiple 
     * layers, and base layer's opacity is set to 100%).
     */
    this.isSimpleDrawing = function () {
        return this.getLayerCount() == 1 && this.getLayer(0).getAlpha() == 100;
    };

    // ////////////////////////////////////////////////////
    // Undo classes

    /**
     * Save the difference between the current layer and the undoBuffer (within the undoArea) for undo, and clear
     * the undoArea.
     *
     * @constructor
     */
    function CPUndoPaint() {
        var rect = undoArea.clone(),
            data = undoBuffer.copyRectXOR(curLayer, rect);

        this.layer = that.getActiveLayerIndex();

        undoArea.makeEmpty();

        this.undo = function () {
            that.getLayer(this.layer).setRectXOR(data, rect);
            invalidateFusionRect(rect);
        };

        this.redo = function () {
            that.getLayer(this.layer).setRectXOR(data, rect);
            invalidateFusionRect(rect);
        };

        that.getMemoryUsed = function (undone, param) {
            return undoBuffer.getMemorySize();
        };
    }

    CPUndoPaint.prototype = Object.create(_CPUndo2["default"].prototype);
    CPUndoPaint.prototype.constructor = CPUndoPaint;

    function CPUndoLayerVisible(_layerIndex, _oldVis, _newVis) {
        this.layerIndex = _layerIndex;
        this.oldVis = _oldVis;
        this.newVis = _newVis;
    }

    CPUndoLayerVisible.prototype = Object.create(_CPUndo2["default"].prototype);
    CPUndoLayerVisible.prototype.constructor = CPUndoLayerVisible;

    CPUndoLayerVisible.prototype.redo = function () {
        that.getLayer(this.layerIndex).visible = this.newVis;

        invalidateFusion();
        callListenersLayerChange(this.layerIndex);
    };

    CPUndoLayerVisible.prototype.undo = function () {
        that.getLayer(this.layerIndex).visible = this.oldVis;

        invalidateFusion();
        callListenersLayerChange(this.layerIndex);
    };

    CPUndoLayerVisible.prototype.merge = function (u) {
        if (u instanceof CPUndoLayerVisible && this.layerIndex == u.layerIndex) {
            this.newVis = u.newVis;
            return true;
        }
        return false;
    };

    CPUndoLayerVisible.prototype.noChange = function () {
        return this.oldVis == this.newVis;
    };

    function CPUndoAddLayer(layerIndex) {
        this.undo = function () {
            layers.splice(layerIndex + 1, 1);
            that.setActiveLayerIndex(layerIndex);
            invalidateFusion();
            callListenersLayerChange();
        };

        this.redo = function () {
            var newLayer = new _CPLayer2["default"](that.width, that.height, that.getDefaultLayerName());
            newLayer.clearAll(EMPTY_LAYER_COLOR);
            layers.splice(layerIndex + 1, 0, newLayer);
            that.setActiveLayerIndex(layerIndex + 1);

            invalidateFusion();
            callListenersLayerChange();
        };
    }

    CPUndoAddLayer.prototype = Object.create(_CPUndo2["default"].prototype);
    CPUndoAddLayer.prototype.constructor = CPUndoAddLayer;

    function CPUndoDuplicateLayer(layerIndex) {
        this.undo = function () {
            layers.splice(layerIndex + 1, 1);
            that.setActiveLayerIndex(layerIndex);

            invalidateFusion();
            callListenersLayerChange();
        };

        this.redo = function () {
            var copySuffix = " Copy",
                sourceLayer = layers[layerIndex],
                newLayer = new _CPLayer2["default"](that.width, that.height),
                newLayerName = sourceLayer.name;

            if (!newLayerName.endsWith(copySuffix)) {
                newLayerName += copySuffix;
            }

            newLayer.copyFrom(sourceLayer);
            newLayer.name = newLayerName;

            layers.splice(layerIndex + 1, 0, newLayer);

            that.setActiveLayerIndex(layerIndex + 1);

            invalidateFusion();
            callListenersLayerChange();
        };
    }

    CPUndoDuplicateLayer.prototype = Object.create(_CPUndo2["default"].prototype);
    CPUndoDuplicateLayer.prototype.constructor = CPUndoDuplicateLayer;

    /**
     * @param layerIndex int
     * @param layer CPLayer
     */
    function CPUndoRemoveLayer(layerIndex, layer) {
        this.undo = function () {
            layers.splice(layerIndex, 0, layer);
            that.setActiveLayerIndex(layerIndex);

            invalidateFusion();
            callListenersLayerChange();
        };

        this.redo = function () {
            layers.splice(layerIndex, 1);
            that.setActiveLayerIndex(layerIndex < layers.length ? layerIndex : layerIndex - 1);

            invalidateFusion();
            callListenersLayerChange();
        };

        this.getMemoryUsed = function (undone) {
            return undone ? 0 : layer.width * layer.height * _CPColorBmp2["default"].BYTES_PER_PIXEL;
        };
    }

    CPUndoRemoveLayer.prototype = Object.create(_CPUndo2["default"].prototype);
    CPUndoRemoveLayer.prototype.constructor = CPUndoRemoveLayer;

    function CPUndoMergeDownLayer(layerIndex) {
        var layerBottom = layerBottom = new _CPLayer2["default"](that.width, that.height),
            layerTop;

        layerBottom.copyFrom(layers[layerIndex - 1]);
        layerTop = layers[layerIndex];

        this.undo = function () {
            layers[layerIndex - 1].copyFrom(layerBottom);
            layers.splice(layerIndex, 0, layerTop);
            that.setActiveLayerIndex(layerIndex);

            layerBottom = layerTop = null;

            invalidateFusion();
            callListenersLayerChange();
        };

        this.redo = function () {
            layerBottom = new _CPLayer2["default"](that.width, that.height);
            layerBottom.copyFrom(layers[layerIndex - 1]);
            layerTop = layers[layerIndex];

            that.setActiveLayerIndex(layerIndex);
            that.mergeDown(false);
        };

        this.getMemoryUsed = function (undone, param) {
            return undone ? 0 : that.width * that.height * _CPColorBmp2["default"].BYTES_PER_PIXEL * 2;
        };
    }

    CPUndoMergeDownLayer.prototype = Object.create(_CPUndo2["default"].prototype);
    CPUndoMergeDownLayer.prototype.constructor = CPUndoMergeDownLayer;

    function CPUndoMergeAllLayers() {
        var oldActiveLayerIndex = that.getActiveLayerIndex(),
            oldLayers = layers.slice(0); // Clone old layers array

        this.undo = function () {
            layers = oldLayers.slice(0);
            that.setActiveLayerIndex(oldActiveLayerIndex);

            invalidateFusion();
            callListenersLayerChange();
        };

        this.redo = function () {
            that.mergeAllLayers(false);
        };

        this.getMemoryUsed = function (undone, param) {
            return undone ? 0 : oldLayers.length * width * height * _CPColorBmp2["default"].BYTES_PER_PIXEL;
        };
    }

    CPUndoMergeAllLayers.prototype = Object.create(_CPUndo2["default"].prototype);
    CPUndoMergeAllLayers.prototype.constructor = CPUndoMergeAllLayers;

    function CPUndoMoveLayer(from, to) {
        this.undo = function () {
            if (to <= from) {
                moveLayerReal(to, from + 1);
            } else {
                moveLayerReal(to - 1, from);
            }
        };

        this.redo = function () {
            moveLayerReal(from, to);
        };
    }

    CPUndoMoveLayer.prototype = Object.create(_CPUndo2["default"].prototype);
    CPUndoMoveLayer.prototype.constructor = CPUndoMoveLayer;

    function CPUndoLayerAlpha(layerIndex, alpha) {
        this.from = that.getLayer(layerIndex).getAlpha();
        this.to = alpha;
        this.layerIndex = layerIndex;
    }

    CPUndoLayerAlpha.prototype = Object.create(_CPUndo2["default"].prototype);
    CPUndoLayerAlpha.prototype.constructor = CPUndoLayerAlpha;

    CPUndoLayerAlpha.prototype.undo = function () {
        that.getLayer(this.layerIndex).setAlpha(this.from);

        invalidateFusion();
        callListenersLayerChange(this.layerIndex);
    };

    CPUndoLayerAlpha.prototype.redo = function () {
        that.getLayer(this.layerIndex).setAlpha(this.to);

        invalidateFusion();
        callListenersLayerChange(this.layerIndex);
    };

    CPUndoLayerAlpha.prototype.merge = function (u) {
        if (u instanceof CPUndoLayerAlpha && this.layerIndex == u.layerIndex) {
            this.to = u.to;
            return true;
        }
        return false;
    };

    CPUndoLayerAlpha.prototype.noChange = function () {
        return this.from == this.to;
    };

    function CPUndoLayerMode(layerIndex, to) {
        this.layerIndex = layerIndex;
        this.from = that.getLayer(layerIndex).getBlendMode();
        this.to = to;
    }

    CPUndoLayerMode.prototype = Object.create(_CPUndo2["default"].prototype);
    CPUndoLayerMode.prototype.constructor = CPUndoLayerMode;

    CPUndoLayerMode.prototype.undo = function () {
        that.getLayer(this.layerIndex).setBlendMode(this.from);

        invalidateFusion();
        callListenersLayerChange();
    };

    CPUndoLayerMode.prototype.redo = function () {
        that.getLayer(this.layerIndex).setBlendMode(this.to);

        invalidateFusion();
        callListenersLayerChange();
    };

    CPUndoLayerMode.prototype.merge = function (u) {
        if (u instanceof CPUndoLayerMode && this.layerIndex == u.layerIndex) {
            this.to = u.to;
            return true;
        }
        return false;
    };

    CPUndoLayerMode.prototype.noChange = function () {
        return this.from == this.to;
    };

    function CPUndoLayerRename(layerIndex, to) {
        this.layerIndex = layerIndex;
        this.to = to;
        this.from = that.getLayer(layerIndex).name;
    }

    CPUndoLayerRename.prototype = Object.create(_CPUndo2["default"].prototype);
    CPUndoLayerRename.prototype.constructor = CPUndoLayerRename;

    CPUndoLayerRename.prototype.undo = function () {
        that.getLayer(this.layerIndex).name = this.from;
        callListenersLayerChange(this.layerIndex);
    };

    CPUndoLayerRename.prototype.redo = function () {
        that.getLayer(this.layerIndex).name = this.to;
        callListenersLayerChange(this.layerIndex);
    };

    CPUndoLayerRename.prototype.merge = function (u) {
        if (u instanceof CPUndoLayerRename && this.layerIndex == u.layerIndex) {
            this.to = u.to;
            return true;
        }
        return false;
    };

    CPUndoLayerRename.prototype.noChange = function () {
        return this.from == this.to;
    };

    /**
     * @param from CPRect
     * @param to CPRect
     */
    function CPUndoRectangleSelection(from, to) {
        from = from.clone();
        to = to.clone();

        this.undo = function () {
            that.setSelection(from);
            callListenersUpdateRegion(that.getBounds());
        };

        this.redo = function () {
            that.setSelection(to);
            callListenersUpdateRegion(that.getBounds());
        };

        this.noChange = function () {
            return from.equals(to);
        };
    }

    CPUndoRectangleSelection.prototype = Object.create(_CPUndo2["default"].prototype);
    CPUndoRectangleSelection.prototype.constructor = CPUndoRectangleSelection;

    /**
     * Used to encapsulate multiple undo operation as one
     * 
     * @param undoes CPUndo[] List of undo operations to encapsulate
     */
    function CPMultiUndo(undoes) {
        this.undoes = undoes;
    }

    CPMultiUndo.prototype = Object.create(_CPUndo2["default"].prototype);
    CPMultiUndo.prototype.constructor = CPMultiUndo;

    CPMultiUndo.prototype.undo = function () {
        for (var i = this.undoes.length - 1; i >= 0; i--) {
            this.undoes[i].undo();
        }
    };

    CPMultiUndo.prototype.redo = function () {
        for (var i = 0; i < this.undoes.length; i++) {
            this.undoes[i].redo();
        }
    };

    CPMultiUndo.prototype.noChange = function () {
        for (var i = 0; i < undoes.length; i++) {
            if (!undoes[i].noChange()) {
                return false;
            }
        }

        return true;
    };

    CPMultiUndo.prototype.getMemoryUsed = function (undone, param) {
        var total = 0;

        for (var i = 0; i < undoes.length; i++) {
            total += undoes[i].getMemoryUsed(undone, param);
        }

        return total;
    };

    /**
     * Store data to undo a cut operation
     * 
     * @param bmp CPColorBmp The rectangle of image data that was cut
     * @param layerIndex int Index of the layer the cut came from
     * @param selection CPRect The cut rectangle co-ordinates
     */
    function CPUndoCut(bmp, layerIndex, selection) {
        selection = selection.clone();

        this.undo = function () {
            that.setActiveLayerIndex(layerIndex);
            curLayer.copyBitmapRect(bmp, selection.left, selection.top, bmp.getBounds());
            that.setSelection(selection);
            invalidateFusionRect(selection);
        };

        this.redo = function () {
            that.setActiveLayerIndex(layerIndex);
            curLayer.clearRect(selection, EMPTY_LAYER_COLOR);
            that.emptySelection();
            invalidateFusionRect(selection);
        };

        this.getMemoryUsed = function (undone, param) {
            return bmp == param ? 0 : bmp.width * bmp.height * _CPColorBmp2["default"].BYTES_PER_PIXEL;
        };
    }

    CPUndoCut.prototype = Object.create(_CPUndo2["default"].prototype);
    CPUndoCut.prototype.constructor = CPUndoCut;

    /**
     * Store data to undo a paste operation
     * 
     * @param clip CPClip
     * @param layerIndex int
     * @param selection CPRect
     */
    function CPUndoPaste(clip, layerIndex, selection) {
        selection = selection.clone();

        this.undo = function () {
            layers.splice(layerIndex + 1, 1);

            that.setActiveLayerIndex(layerIndex);
            that.setSelection(selection);

            invalidateFusionRect(selection);
            callListenersLayerChange();
        };

        this.redo = function () {
            that.setActiveLayerIndex(layerIndex);
            pasteClip(false, clip);
        };

        this.getMemoryUsed = function (undone, param) {
            return clip.bmp == param ? 0 : clip.bmp.width * clip.bmp.height * 4;
        };
    }

    CPUndoPaste.prototype = Object.create(_CPUndo2["default"].prototype);
    CPUndoPaste.prototype.constructor = CPUndoPaste;
}

;

CPArtwork.prototype = Object.create(EventEmitter.prototype);
CPArtwork.prototype.constructor = CPArtwork;

CPArtwork.prototype.getBounds = function () {
    return new _utilCPRect2["default"](0, 0, this.width, this.height);
};

CPArtwork.prototype.isPointWithin = function (x, y) {
    return x >= 0 && y >= 0 && x < this.width && y < this.height;
};
module.exports = exports["default"];

},{"../util/CPColorFloat":47,"../util/CPRandom":48,"../util/CPRect":49,"./CPBrushInfo":5,"./CPBrushManager":6,"./CPClip":8,"./CPColorBmp":9,"./CPGreyBmp":10,"./CPLayer":11,"./CPUndo":15}],3:[function(require,module,exports){
/*
    ChickenPaint
    
    ChickenPaint is a translation of ChibiPaint from Java to JavaScript
    by Nicholas Sherlock / Chicken Smoothie.
    
    ChibiPaint is Copyright (c) 2006-2008 Marc Schefer

    ChickenPaint is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    ChickenPaint is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with ChickenPaint. If not, see <http://www.gnu.org/licenses/>.
*/

"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports["default"] = CPBitmap;

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

var _utilCPRect = require("../util/CPRect");

var _utilCPRect2 = _interopRequireDefault(_utilCPRect);

function CPBitmap(width, height) {
    // Width and height forced to integers
    this.width = width | 0;
    this.height = height | 0;
}

CPBitmap.prototype.getBounds = function () {
    return new _utilCPRect2["default"](0, 0, this.width, this.height);
};

CPBitmap.prototype.isInside = function (x, y) {
    return x >= 0 && y >= 0 && x < this.width && y < this.height;
};
module.exports = exports["default"];

},{"../util/CPRect":49}],4:[function(require,module,exports){
// Layer blending functions
//
// The FullAlpha versions are the ones that work in all cases
// others need the bottom layer to be 100% opaque but are faster
"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports["default"] = CPBlend;

function CPBlend() {}

var BYTES_PER_PIXEL = 4,
    RED_BYTE_OFFSET = 0,
    GREEN_BYTE_OFFSET = 1,
    BLUE_BYTE_OFFSET = 2,
    ALPHA_BYTE_OFFSET = 3;

CPBlend.prototype.fusionWithMultiply = function (that, fusion, rect) {
    var yStride = (that.width - rect.getWidth()) * BYTES_PER_PIXEL,
        pixIndex = that.offsetOfPixel(rect.left, rect.top);

    for (var y = rect.top; y < rect.bottom; y++, pixIndex += yStride) {
        for (var x = rect.left; x < rect.right; x++) {
            var alpha = that.data[pixIndex + ALPHA_BYTE_OFFSET] * that.alpha / 100 | 0;

            if (alpha > 0) {
                for (var i = 0; i < 3; i++, pixIndex++) {
                    fusion.data[pixIndex] = fusion.data[pixIndex] - (that.data[pixIndex] ^ 0xFF) * fusion.data[pixIndex] * alpha / (255 * 255) | 0;
                }
                pixIndex++; // Don't need to update the alpha because it started out as 100%
            } else {
                    pixIndex += BYTES_PER_PIXEL;
                }
        }
    }
};

/* Blend onto an opaque fusion. Supports .alpha < 100 on this layer */
CPBlend.prototype.fusionWithNormal = function (that, fusion, rect) {
    var yStride = (that.width - rect.getWidth()) * BYTES_PER_PIXEL | 0,
        pixIndex = that.offsetOfPixel(rect.left, rect.top) | 0,
        h = rect.bottom - rect.top | 0,
        w = rect.right - rect.left | 0;

    for (var y = 0; y < h; y++, pixIndex += yStride) {
        for (var x = 0; x < w; x++) {
            var alpha = that.data[pixIndex + ALPHA_BYTE_OFFSET] * that.alpha / 100 | 0;

            if (alpha > 0) {
                if (alpha == 255) {
                    fusion.data[pixIndex] = that.data[pixIndex];
                    fusion.data[pixIndex + 1] = that.data[pixIndex + 1];
                    fusion.data[pixIndex + 2] = that.data[pixIndex + 2];
                    fusion.data[pixIndex + 3] = 255;
                } else {
                    var invAlpha = 255 - alpha;

                    fusion.data[pixIndex] = (that.data[pixIndex] * alpha + fusion.data[pixIndex] * invAlpha) / 255 | 0;
                    fusion.data[pixIndex + 1] = (that.data[pixIndex + 1] * alpha + fusion.data[pixIndex + 1] * invAlpha) / 255 | 0;
                    fusion.data[pixIndex + 2] = (that.data[pixIndex + 2] * alpha + fusion.data[pixIndex + 2] * invAlpha) / 255 | 0;
                }
            }

            pixIndex += BYTES_PER_PIXEL;
        }
    }
};

// Fusing onto an opaque layer when this layer has alpha set to 100
CPBlend.prototype.fusionWithNormalNoAlpha = function (that, fusion, rect) {
    var yStride = (that.width - rect.getWidth()) * BYTES_PER_PIXEL | 0,
        pixIndex = that.offsetOfPixel(rect.left, rect.top) | 0,
        h = rect.bottom - rect.top | 0,
        w = rect.right - rect.left | 0;

    for (var y = 0; y < h; y++, pixIndex += yStride) {
        for (var x = 0; x < w; x++) {
            var alpha = that.data[pixIndex + ALPHA_BYTE_OFFSET];

            if (alpha > 0) {
                if (alpha == 255) {
                    fusion.data[pixIndex] = that.data[pixIndex];
                    fusion.data[pixIndex + 1] = that.data[pixIndex + 1];
                    fusion.data[pixIndex + 2] = that.data[pixIndex + 2];
                    fusion.data[pixIndex + 3] = that.data[pixIndex + 3];
                } else {
                    var invAlpha = 255 - alpha;

                    fusion.data[pixIndex] = (that.data[pixIndex] * alpha + fusion.data[pixIndex] * invAlpha) / 255;
                    fusion.data[pixIndex + 1] = (that.data[pixIndex + 1] * alpha + fusion.data[pixIndex + 1] * invAlpha) / 255;
                    fusion.data[pixIndex + 2] = (that.data[pixIndex + 2] * alpha + fusion.data[pixIndex + 2] * invAlpha) / 255;
                }
            }

            pixIndex += BYTES_PER_PIXEL;
        }
    }
};

CPBlend.prototype.fusionWithAdd = function (that, fusion, rect) {
    var yStride = (that.width - rect.getWidth()) * BYTES_PER_PIXEL,
        pixIndex = that.offsetOfPixel(rect.left, rect.top);

    for (var y = rect.top; y < rect.bottom; y++, pixIndex += yStride) {
        for (var x = rect.left; x < rect.right; x++) {
            var alpha = that.data[pixIndex + ALPHA_BYTE_OFFSET] * that.alpha / 100 | 0;

            if (alpha > 0) {
                for (var i = 0; i < 3; i++, pixIndex++) {
                    fusion.data[pixIndex] = Math.min(255, fusion.data[pixIndex] + alpha * that.data[pixIndex] / 255 | 0);
                }
                pixIndex++; // Don't need to update the alpha because it started out as 100%
            } else {
                    pixIndex += BYTES_PER_PIXEL;
                }
        }
    }
};

// Normal Alpha Mode
// C = A*d + B*(1-d) and d = aa / (aa + ab - aa*ab)
CPBlend.prototype.fusionWithNormalFullAlpha = function (that, fusion, rect) {
    var yStride = (that.width - rect.getWidth()) * BYTES_PER_PIXEL | 0,
        pixIndex = that.offsetOfPixel(rect.left, rect.top) | 0,
        h = rect.bottom - rect.top | 0,
        w = rect.right - rect.left | 0;

    for (var y = 0; y < h; y++, pixIndex += yStride) {
        for (var x = 0; x < w; x++) {
            var alpha1 = that.data[pixIndex + ALPHA_BYTE_OFFSET] * that.alpha / 100,
                alpha2 = fusion.data[pixIndex + ALPHA_BYTE_OFFSET] * fusion.alpha / 100,
                newAlpha = alpha1 + alpha2 - alpha1 * alpha2 / 255 | 0;

            if (newAlpha > 0) {
                var realAlpha = alpha1 * 255 / newAlpha | 0,
                    invAlpha = 255 - realAlpha;

                fusion.data[pixIndex] = (that.data[pixIndex] * realAlpha + fusion.data[pixIndex] * invAlpha) / 255;
                fusion.data[pixIndex + 1] = (that.data[pixIndex + 1] * realAlpha + fusion.data[pixIndex + 1] * invAlpha) / 255;
                fusion.data[pixIndex + 2] = (that.data[pixIndex + 2] * realAlpha + fusion.data[pixIndex + 2] * invAlpha) / 255;
                fusion.data[pixIndex + 3] = newAlpha;
            }

            pixIndex += BYTES_PER_PIXEL;
        }
    }

    fusion.alpha = 100;
};

// Multiply Mode
// C = (A*aa*(1-ab) + B*ab*(1-aa) + A*B*aa*ab) / (aa + ab - aa*ab)

CPBlend.prototype.fusionWithMultiplyFullAlpha = function (that, fusion, rect) {
    var yStride = (that.width - rect.getWidth()) * BYTES_PER_PIXEL,
        pixIndex = that.offsetOfPixel(rect.left, rect.top);

    for (var y = rect.top; y < rect.bottom; y++, pixIndex += yStride) {
        for (var x = rect.left; x < rect.right; x++) {
            var alpha1 = that.data[pixIndex + ALPHA_BYTE_OFFSET] * that.alpha / 100,
                alpha2 = fusion.data[pixIndex + ALPHA_BYTE_OFFSET] * fusion.alpha / 100,
                newAlpha = alpha1 + alpha2 - alpha1 * alpha2 / 255 | 0;

            if (newAlpha > 0) {
                var alpha12 = alpha1 * alpha2 / 255 | 0,
                    alpha1n2 = alpha1 * (alpha2 ^ 0xFF) / 255 | 0,
                    alphan12 = (alpha1 ^ 0xff) * alpha2 / 255 | 0;

                for (var i = 0; i < 3; i++, pixIndex++) {
                    fusion.data[pixIndex] = (that.data[pixIndex] * alpha1n2 + fusion.data[pixIndex] * alphan12 + that.data[pixIndex] * fusion.data[pixIndex] * alpha12 / 255) / newAlpha | 0;
                }
                fusion.data[pixIndex++] = newAlpha;
            } else {
                pixIndex += BYTES_PER_PIXEL;
            }
        }
    }

    fusion.alpha = 100;
};

// Linear Dodge (Add) Mode
// C = (aa * A + ab * B) / (aa + ab - aa*ab)

CPBlend.prototype.fusionWithAddFullAlpha = function (that, fusion, rect) {
    var yStride = (that.width - rect.getWidth()) * BYTES_PER_PIXEL,
        pixIndex = that.offsetOfPixel(rect.left, rect.top);

    for (var y = rect.top; y < rect.bottom; y++, pixIndex += yStride) {
        for (var x = rect.left; x < rect.right; x++) {
            var alpha1 = that.data[pixIndex + ALPHA_BYTE_OFFSET] * that.alpha / 100,
                alpha2 = fusion.data[pixIndex + ALPHA_BYTE_OFFSET] * fusion.alpha / 100,
                newAlpha = alpha1 + alpha2 - alpha1 * alpha2 / 255 | 0;

            if (newAlpha > 0) {

                /*
                * // this version seems slower than the Math.min one int r = (alpha2 * (color2 >>> 16 & 0xff) +
                * alpha1 * (color1 >>> 16 & 0xff)) / newAlpha; r |= ((~((r & 0xffffff00) - 1) >> 16) | r) & 0xff;
                * int g = (alpha2 * (color2 >>> 8 & 0xff) + alpha1 * (color1 >>> 8 & 0xff)) / newAlpha; g |= ((~((g &
                * 0xffffff00) - 1) >> 16) | g) & 0xff; int b = (alpha2 * (color2 & 0xff) + alpha1 * (color1 &
                * 0xff)) / newAlpha; b |= ((~((b & 0xffffff00) - 1) >> 16) | b) & 0xff;
                */

                for (var i = 0; i < 3; i++, pixIndex++) {
                    fusion.data[pixIndex] = Math.min(255, (alpha2 * fusion.data[pixIndex] + alpha1 * that.data[pixIndex]) / newAlpha | 0);
                }
                fusion.data[pixIndex++] = newAlpha;
            } else {
                pixIndex += BYTES_PER_PIXEL;
            }
        }
    }

    fusion.alpha = 100;
};

// Linear Burn (Sub) Mode
// C = (aa * A + ab * B - aa*ab ) / (aa + ab - aa*ab)

CPBlend.prototype.fusionWithSubtractFullAlpha = function (that, fusion, rect) {
    var yStride = (that.width - rect.getWidth()) * BYTES_PER_PIXEL,
        pixIndex = that.offsetOfPixel(rect.left, rect.top);

    for (var y = rect.top; y < rect.bottom; y++, pixIndex += yStride) {
        for (var x = rect.left; x < rect.right; x++) {
            var alpha1 = that.data[pixIndex + ALPHA_BYTE_OFFSET] * that.alpha / 100 | 0,
                alpha2 = fusion.data[pixIndex + ALPHA_BYTE_OFFSET] * fusion.alpha / 100 | 0,
                newAlpha = alpha1 + alpha2 - alpha1 * alpha2 / 255 | 0;

            if (newAlpha > 0) {
                var alpha12 = alpha1 * alpha2;

                for (var i = 0; i < 3; i++, pixIndex++) {
                    var channel = (alpha2 * fusion.data[pixIndex] + alpha1 * that.data[pixIndex] - alpha12) / newAlpha;

                    // binary magic to clamp negative values to zero without using a condition
                    fusion.data[pixIndex] = channel & ~channel >>> 24;
                }
                fusion.data[pixIndex++] = newAlpha;
            } else {
                pixIndex += BYTES_PER_PIXEL;
            }
        }
    }

    fusion.alpha = 100;
};

// For opaque fusion
CPBlend.prototype.fusionWithSubtract = function (that, fusion, rect) {
    var yStride = (that.width - rect.getWidth()) * BYTES_PER_PIXEL | 0,
        pixIndex = that.offsetOfPixel(rect.left, rect.top) | 0;

    for (var y = rect.top; y < rect.bottom; y++, pixIndex += yStride) {
        for (var x = rect.left; x < rect.right; x++) {
            var alpha1 = that.data[pixIndex + ALPHA_BYTE_OFFSET] * that.alpha / 100 | 0,
                alpha12 = alpha1 * 255;

            for (var i = 0; i < 3; i++, pixIndex++) {
                var channel = (255 * fusion.data[pixIndex] + alpha1 * that.data[pixIndex] - alpha12) / 255;

                // binary magic to clamp negative values to zero without using a condition
                fusion.data[pixIndex] = channel & ~channel >>> 24;
            }
            pixIndex++; // Alpha stays the same
        }
    }

    fusion.alpha = 100;
};

// Screen Mode
// same as Multiply except all color channels are inverted and the result too
// C = 1 - (((1-A)*aa*(1-ab) + (1-B)*ab*(1-aa) + (1-A)*(1-B)*aa*ab) / (aa + ab - aa*ab))

CPBlend.prototype.fusionWithScreenFullAlpha = function (that, fusion, rect) {
    var yStride = (that.width - rect.getWidth()) * BYTES_PER_PIXEL,
        pixIndex = that.offsetOfPixel(rect.left, rect.top);

    for (var y = rect.top; y < rect.bottom; y++, pixIndex += yStride) {
        for (var x = rect.left; x < rect.right; x++) {
            var alpha1 = that.data[pixIndex + ALPHA_BYTE_OFFSET] * that.alpha / 100 | 0,
                alpha2 = fusion.data[pixIndex + ALPHA_BYTE_OFFSET] * fusion.alpha / 100 | 0,
                newAlpha = alpha1 + alpha2 - alpha1 * alpha2 / 255 | 0;

            if (newAlpha > 0) {
                var alpha12 = alpha1 * alpha2 / 255 | 0,
                    alpha1n2 = alpha1 * (alpha2 ^ 0xFF) / 255 | 0,
                    alphan12 = (alpha1 ^ 0xff) * alpha2 / 255 | 0;

                for (var i = 0; i < 3; i++, pixIndex++) {
                    fusion.data[pixIndex] = 0xFF ^ ((that.data[pixIndex] ^ 0xFF) * alpha1n2 + (fusion.data[pixIndex] ^ 0xFF) * alphan12 + (that.data[pixIndex] ^ 0xFF) * (fusion.data[pixIndex] ^ 0xFF) * alpha12 / 255) / newAlpha;
                }
                fusion.data[pixIndex++] = newAlpha;
            } else {
                pixIndex += BYTES_PER_PIXEL;
            }
        }
    }

    fusion.alpha = 100;
};

// For opaque fusion
CPBlend.prototype.fusionWithScreen = function (that, fusion, rect) {
    var yStride = (that.width - rect.getWidth()) * BYTES_PER_PIXEL | 0,
        pixIndex = that.offsetOfPixel(rect.left, rect.top) | 0;

    for (var y = rect.top; y < rect.bottom; y++, pixIndex += yStride) {
        for (var x = rect.left; x < rect.right; x++) {
            var alpha1 = that.data[pixIndex + ALPHA_BYTE_OFFSET] * that.alpha / 100 | 0,
                invAlpha1 = alpha1 ^ 0xff;

            for (var i = 0; i < 3; i++, pixIndex++) {
                fusion.data[pixIndex] = 0xFF ^ ((fusion.data[pixIndex] ^ 0xFF) * invAlpha1 + (that.data[pixIndex] ^ 0xFF) * (fusion.data[pixIndex] ^ 0xFF) * alpha1 / 255) / 255;
            }
            pixIndex++; // Alpha stays the same
        }
    }

    fusion.alpha = 100;
};

// Lighten Mode
// if B >= A: C = A*d + B*(1-d) and d = aa * (1-ab) / (aa + ab - aa*ab)
// if A > B: C = B*d + A*(1-d) and d = ab * (1-aa) / (aa + ab - aa*ab)

CPBlend.prototype.fusionWithLightenFullAlpha = function (that, fusion, rect) {
    var yStride = (that.width - rect.getWidth()) * BYTES_PER_PIXEL,
        pixIndex = that.offsetOfPixel(rect.left, rect.top);

    for (var y = rect.top; y < rect.bottom; y++, pixIndex += yStride) {
        for (var x = rect.left; x < rect.right; x++) {
            var alpha1 = that.data[pixIndex + ALPHA_BYTE_OFFSET] * that.alpha / 100 | 0,
                alpha2 = fusion.data[pixIndex + ALPHA_BYTE_OFFSET] * fusion.alpha / 100 | 0,
                newAlpha = alpha1 + alpha2 - alpha1 * alpha2 / 255 | 0;

            if (newAlpha > 0) {
                var
                // This alpha is used when color1 > color2
                alpha12 = alpha2 * (alpha1 ^ 0xff) / newAlpha | 0,
                    invAlpha12 = alpha12 ^ 0xFF,

                // This alpha is used when color2 > color1
                alpha21 = alpha1 * (alpha2 ^ 0xff) / newAlpha | 0,
                    invAlpha21 = alpha21 ^ 0xFF;

                for (var i = 0; i < 3; i++, pixIndex++) {
                    var c1 = that.data[pixIndex],
                        c2 = fusion.data[pixIndex];

                    fusion.data[pixIndex] = (c2 >= c1 ? c1 * alpha21 + c2 * invAlpha21 : c2 * alpha12 + c1 * invAlpha12) / 255 | 0;
                }
                fusion.data[pixIndex++] = newAlpha;
            } else {
                pixIndex += BYTES_PER_PIXEL;
            }
        }
    }

    fusion.alpha = 100;
};

// When fusion is opaque
CPBlend.prototype.fusionWithLighten = function (that, fusion, rect) {
    var yStride = (that.width - rect.getWidth()) * BYTES_PER_PIXEL,
        pixIndex = that.offsetOfPixel(rect.left, rect.top);

    for (var y = rect.top; y < rect.bottom; y++, pixIndex += yStride) {
        for (var x = rect.left; x < rect.right; x++) {
            var alpha1 = that.data[pixIndex + ALPHA_BYTE_OFFSET] * that.alpha / 100 | 0,
                invAlpha1 = alpha1 ^ 0xff;

            for (var i = 0; i < 3; i++, pixIndex++) {
                var c1 = that.data[pixIndex],
                    c2 = fusion.data[pixIndex];

                fusion.data[pixIndex] = c2 >= c1 ? c2 : (c2 * invAlpha1 + c1 * alpha1) / 255;
            }
            pixIndex++; // Opacity unchanged (still 255)
        }
    }
};

// Darken Mode
// if B >= A: C = B*d + A*(1-d) and d = ab * (1-aa) / (aa + ab - aa*ab)
// if A > B: C = A*d + B*(1-d) and d = aa * (1-ab) / (aa + ab - aa*ab)

CPBlend.prototype.fusionWithDarkenFullAlpha = function (that, fusion, rect) {
    var yStride = (that.width - rect.getWidth()) * BYTES_PER_PIXEL,
        pixIndex = that.offsetOfPixel(rect.left, rect.top);

    for (var y = rect.top; y < rect.bottom; y++, pixIndex += yStride) {
        for (var x = rect.left; x < rect.right; x++) {
            var alpha1 = that.data[pixIndex + ALPHA_BYTE_OFFSET] * that.alpha / 100 | 0,
                alpha2 = fusion.data[pixIndex + ALPHA_BYTE_OFFSET] * fusion.alpha / 100 | 0,
                newAlpha = alpha1 + alpha2 - alpha1 * alpha2 / 255 | 0;

            if (newAlpha > 0) {
                var
                // This alpha is used when color1 > color2
                alpha12 = alpha1 * (alpha2 ^ 0xff) / newAlpha | 0,
                    invAlpha12 = alpha12 ^ 0xff | 0,

                // This alpha is used when color2 > color1
                alpha21 = alpha2 * (alpha1 ^ 0xff) / newAlpha | 0,
                    invAlpha21 = alpha21 ^ 0xff | 0;

                for (var i = 0; i < 3; i++, pixIndex++) {
                    var c1 = that.data[pixIndex],
                        c2 = fusion.data[pixIndex];

                    fusion.data[pixIndex] = (c2 >= c1 ? c2 * alpha21 + c1 * invAlpha21 : c1 * alpha12 + c2 * invAlpha12) / 255 | 0;
                }
                fusion.data[pixIndex++] = newAlpha;
            } else {
                pixIndex += BYTES_PER_PIXEL;
            }
        }
    }

    fusion.alpha = 100;
};

// When fusion is opaque
CPBlend.prototype.fusionWithDarken = function (that, fusion, rect) {
    var yStride = (that.width - rect.getWidth()) * BYTES_PER_PIXEL | 0,
        pixIndex = that.offsetOfPixel(rect.left, rect.top) | 0;

    for (var y = rect.top; y < rect.bottom; y++, pixIndex += yStride) {
        for (var x = rect.left; x < rect.right; x++) {
            var alpha1 = that.data[pixIndex + ALPHA_BYTE_OFFSET] * that.alpha / 100 | 0,
                invAlpha1 = alpha1 ^ 0xff;

            for (var i = 0; i < 3; i++, pixIndex++) {
                var c1 = that.data[pixIndex],
                    c2 = fusion.data[pixIndex];

                fusion.data[pixIndex] = c2 >= c1 ? (c2 * invAlpha1 + c1 * alpha1) / 255 : c2;
            }

            pixIndex++; // Alpha stays the same
        }
    }

    fusion.alpha = 100;
};

// Dodge Mode
//
// C = (aa*(1-ab)*A + (1-aa)*ab*B + aa*ab*B/(1-A)) / (aa + ab - aa*ab)

CPBlend.prototype.fusionWithDodgeFullAlpha = function (that, fusion, rect) {
    var yStride = (that.width - rect.getWidth()) * BYTES_PER_PIXEL,
        pixIndex = that.offsetOfPixel(rect.left, rect.top);

    for (var y = rect.top; y < rect.bottom; y++, pixIndex += yStride) {
        for (var x = rect.left; x < rect.right; x++) {
            var alpha1 = that.data[pixIndex + ALPHA_BYTE_OFFSET] * that.alpha / 100 | 0;

            if (alpha1 == 0) {
                pixIndex += BYTES_PER_PIXEL;
                continue;
            }

            var alpha2 = fusion.data[pixIndex + ALPHA_BYTE_OFFSET] * fusion.alpha / 100 | 0,
                newAlpha = alpha1 + alpha2 - alpha1 * alpha2 / 255 | 0;

            if (newAlpha > 0) {
                var alpha12 = alpha1 * alpha2 / 255 | 0,
                    alpha1n2 = alpha1 * (alpha2 ^ 0xff) / 255 | 0,
                    alphan12 = (alpha1 ^ 0xff) * alpha2 / 255 | 0;

                for (var i = 0; i < 3; i++, pixIndex++) {
                    var color1 = that.data[pixIndex],
                        color2 = fusion.data[pixIndex],
                        invColor1 = color1 ^ 0xFF;

                    fusion.data[pixIndex] = (color1 * alpha1n2 + color2 * alphan12 + alpha12 * (invColor1 == 0 ? 255 : Math.min(255, 255 * color2 / invColor1 | 0))) / newAlpha | 0;
                }
                fusion.data[pixIndex++] = newAlpha;
            } else {
                pixIndex += BYTES_PER_PIXEL;
            }
        }
    }

    fusion.alpha = 100;
};

// When fusion is opaque
CPBlend.prototype.fusionWithDodge = function (that, fusion, rect) {
    var yStride = (that.width - rect.getWidth()) * BYTES_PER_PIXEL,
        pixIndex = that.offsetOfPixel(rect.left, rect.top);

    for (var y = rect.top; y < rect.bottom; y++, pixIndex += yStride) {
        for (var x = rect.left; x < rect.right; x++) {
            var alpha1 = that.data[pixIndex + ALPHA_BYTE_OFFSET] * that.alpha / 100 | 0;

            if (alpha1 == 0) {
                pixIndex += BYTES_PER_PIXEL;
                continue;
            }

            var invAlpha1 = alpha1 ^ 0xff;

            for (var i = 0; i < 3; i++, pixIndex++) {
                var color1 = that.data[pixIndex],
                    color2 = fusion.data[pixIndex],
                    invColor1 = color1 ^ 0xFF;

                fusion.data[pixIndex] = (color2 * invAlpha1 + alpha1 * (invColor1 == 0 ? 255 : Math.min(255, 255 * color2 / invColor1 | 0))) / 255 | 0;
            }
            pixIndex++; // Alpha stays the same
        }
    }
};

// Burn Mode
//
// C = (aa*(1-ab)*A + (1-aa)*ab*B + aa*ab*(1-(1-B)/A)) / (aa + ab - aa*ab)

CPBlend.prototype.fusionWithBurnFullAlpha = function (that, fusion, rect) {
    var yStride = (that.width - rect.getWidth()) * BYTES_PER_PIXEL,
        pixIndex = that.offsetOfPixel(rect.left, rect.top);

    for (var y = rect.top; y < rect.bottom; y++, pixIndex += yStride) {
        for (var x = rect.left; x < rect.right; x++) {
            var alpha1 = that.data[pixIndex + ALPHA_BYTE_OFFSET] * that.alpha / 100 | 0;

            if (alpha1 == 0) {
                pixIndex += BYTES_PER_PIXEL;
                continue;
            }

            var alpha2 = fusion.data[pixIndex + ALPHA_BYTE_OFFSET] * fusion.alpha / 100 | 0,
                newAlpha = alpha1 + alpha2 - alpha1 * alpha2 / 255 | 0;

            if (newAlpha > 0) {
                var alpha12 = alpha1 * alpha2 / 255 | 0,
                    alpha1n2 = alpha1 * (alpha2 ^ 0xff) / 255 | 0,
                    alphan12 = (alpha1 ^ 0xff) * alpha2 / 255 | 0;

                for (var i = 0; i < 3; i++, pixIndex++) {
                    var color1 = that.data[pixIndex],
                        color2 = fusion.data[pixIndex],
                        invColor2 = color2 ^ 0xFF;

                    fusion.data[pixIndex] = (color1 * alpha1n2 + color2 * alphan12 + alpha12 * (color1 == 0 ? 0 : Math.min(255, 255 * invColor2 / color1) ^ 0xff)) / newAlpha | 0;
                }
                fusion.data[pixIndex++] = newAlpha;
            } else {
                pixIndex += BYTES_PER_PIXEL;
            }
        }
    }

    fusion.alpha = 100;
};

// When fusion is opaque
CPBlend.prototype.fusionWithBurn = function (that, fusion, rect) {
    var yStride = (that.width - rect.getWidth()) * BYTES_PER_PIXEL | 0,
        pixIndex = that.offsetOfPixel(rect.left, rect.top) | 0;

    for (var y = rect.top; y < rect.bottom; y++, pixIndex += yStride) {
        for (var x = rect.left; x < rect.right; x++) {
            var alpha1 = that.data[pixIndex + ALPHA_BYTE_OFFSET] * that.alpha / 100 | 0;

            if (alpha1 == 0) {
                pixIndex += BYTES_PER_PIXEL;
                continue;
            }

            var invAlpha1 = alpha1 ^ 0xff;

            for (var i = 0; i < 3; i++, pixIndex++) {
                var color1 = that.data[pixIndex],
                    color2 = fusion.data[pixIndex],
                    invColor2 = color2 ^ 0xFF;

                fusion.data[pixIndex] = (color2 * invAlpha1 + alpha1 * (color1 == 0 ? 0 : Math.min(255, 255 * invColor2 / color1) ^ 0xff)) / 255 | 0;
            }
            pixIndex++; // Alpha stays the same
        }
    }

    fusion.alpha = 100;
};

// Overlay Mode
// If B <= 0.5 C = (A*aa*(1-ab) + B*ab*(1-aa) + aa*ab*(2*A*B) / (aa + ab - aa*ab)
// If B > 0.5 C = (A*aa*(1-ab) + B*ab*(1-aa) + aa*ab*(1 - 2*(1-A)*(1-B)) / (aa + ab - aa*ab)

CPBlend.prototype.fusionWithOverlayFullAlpha = function (that, fusion, rect) {
    var yStride = (that.width - rect.getWidth()) * BYTES_PER_PIXEL,
        pixIndex = that.offsetOfPixel(rect.left, rect.top);

    for (var y = rect.top; y < rect.bottom; y++, pixIndex += yStride) {
        for (var x = rect.left; x < rect.right; x++) {
            var alpha1 = that.data[pixIndex + ALPHA_BYTE_OFFSET] * that.alpha / 100 | 0;

            if (alpha1 == 0) {
                pixIndex += BYTES_PER_PIXEL;
                continue;
            }

            var alpha2 = fusion.data[pixIndex + ALPHA_BYTE_OFFSET] * fusion.alpha / 100 | 0,
                newAlpha = alpha1 + alpha2 - alpha1 * alpha2 / 255 | 0;

            if (newAlpha > 0) {
                var alpha12 = alpha1 * alpha2 / 255 | 0,
                    alpha1n2 = alpha1 * (alpha2 ^ 0xff) / 255 | 0,
                    alphan12 = (alpha1 ^ 0xff) * alpha2 / 255 | 0;

                for (var i = 0; i < 3; i++, pixIndex++) {
                    var c1 = that.data[pixIndex],
                        c2 = fusion.data[pixIndex];

                    fusion.data[pixIndex] = (alpha1n2 * c1 + alphan12 * c2 + (c2 <= 127 ? alpha12 * 2 * c1 * c2 / 255 : alpha12 * (2 * (c1 ^ 0xff) * (c2 ^ 0xff) / 255 ^ 0xff))) / newAlpha | 0;
                }
                fusion.data[pixIndex++] = newAlpha;
            } else {
                pixIndex += BYTES_PER_PIXEL;
            }
        }
    }

    fusion.alpha = 100;
};

// When fusion is opaque
CPBlend.prototype.fusionWithOverlay = function (that, fusion, rect) {
    var yStride = (that.width - rect.getWidth()) * BYTES_PER_PIXEL | 0,
        pixIndex = that.offsetOfPixel(rect.left, rect.top) | 0;

    for (var y = rect.top; y < rect.bottom; y++, pixIndex += yStride) {
        for (var x = rect.left; x < rect.right; x++) {
            var alpha1 = that.data[pixIndex + ALPHA_BYTE_OFFSET] * that.alpha / 100 | 0;

            if (alpha1 == 0) {
                pixIndex += BYTES_PER_PIXEL;
                continue;
            }

            var alphan12 = alpha1 ^ 0xff;

            for (var i = 0; i < 3; i++, pixIndex++) {
                var c1 = that.data[pixIndex],
                    c2 = fusion.data[pixIndex];

                fusion.data[pixIndex] = (alphan12 * c2 + (c2 <= 127 ? alpha1 * 2 * c1 * c2 / 255 : alpha1 * (2 * (c1 ^ 0xff) * (c2 ^ 0xff) / 255 ^ 0xff))) / 255 | 0;
            }
            pixIndex++; // Alpha stays 255
        }
    }
};

// Hard Light Mode (same as Overlay with A and B swapped)
// If A <= 0.5 C = (A*aa*(1-ab) + B*ab*(1-aa) + aa*ab*(2*A*B) / (aa + ab - aa*ab)
// If A > 0.5 C = (A*aa*(1-ab) + B*ab*(1-aa) + aa*ab*(1 - 2*(1-A)*(1-B)) / (aa + ab - aa*ab)

CPBlend.prototype.fusionWithHardLightFullAlpha = function (that, fusion, rect) {
    var yStride = (that.width - rect.getWidth()) * BYTES_PER_PIXEL,
        pixIndex = that.offsetOfPixel(rect.left, rect.top);

    for (var y = rect.top; y < rect.bottom; y++, pixIndex += yStride) {
        for (var x = rect.left; x < rect.right; x++) {
            var alpha1 = that.data[pixIndex + ALPHA_BYTE_OFFSET] * that.alpha / 100 | 0;

            if (alpha1 == 0) {
                pixIndex += BYTES_PER_PIXEL;
                continue;
            }

            var alpha2 = fusion.data[pixIndex + ALPHA_BYTE_OFFSET] * fusion.alpha / 100 | 0,
                newAlpha = alpha1 + alpha2 - alpha1 * alpha2 / 255 | 0;

            if (newAlpha > 0) {
                var alpha12 = alpha1 * alpha2 / 255 | 0,
                    alpha1n2 = alpha1 * (alpha2 ^ 0xff) / 255 | 0,
                    alphan12 = (alpha1 ^ 0xff) * alpha2 / 255 | 0;

                for (var i = 0; i < 3; i++, pixIndex++) {
                    var c1 = that.data[pixIndex],
                        c2 = fusion.data[pixIndex];

                    fusion.data[pixIndex] = (alpha1n2 * c1 + alphan12 * c2 + (c1 <= 127 ? alpha12 * 2 * c1 * c2 / 255 : alpha12 * (2 * (c1 ^ 0xff) * (c2 ^ 0xff) / 255 ^ 0xff))) / newAlpha | 0;
                }
                fusion.data[pixIndex++] = newAlpha;
            } else {
                pixIndex += BYTES_PER_PIXEL;
            }
        }
    }

    fusion.alpha = 100;
};

// Soft Light Mode
// A < 0.5 => C = (2*A - 1) * (B - B^2) + B
// A > 0.5 => C = (2*A - 1) * (sqrt(B) - B) + B

CPBlend.prototype.fusionWithSoftLightFullAlpha = function (that, fusion, rect) {
    var yStride = (that.width - rect.getWidth()) * BYTES_PER_PIXEL,
        pixIndex = that.offsetOfPixel(rect.left, rect.top);

    for (var y = rect.top; y < rect.bottom; y++, pixIndex += yStride) {
        for (var x = rect.left; x < rect.right; x++) {
            var alpha1 = that.data[pixIndex + ALPHA_BYTE_OFFSET] * that.alpha / 100 | 0;

            if (alpha1 == 0) {
                pixIndex += BYTES_PER_PIXEL;
                continue;
            }

            var alpha2 = fusion.data[pixIndex + ALPHA_BYTE_OFFSET] * fusion.alpha / 100 | 0,
                newAlpha = alpha1 + alpha2 - alpha1 * alpha2 / 255 | 0;

            if (newAlpha > 0) {
                var alpha12 = alpha1 * alpha2 / 255 | 0,
                    alpha1n2 = alpha1 * (alpha2 ^ 0xff) / 255 | 0,
                    alphan12 = (alpha1 ^ 0xff) * alpha2 / 255 | 0;

                for (var i = 0; i < 3; i++, pixIndex++) {
                    var c1 = that.data[pixIndex],
                        c2 = fusion.data[pixIndex];

                    fusion.data[pixIndex] = (alpha1n2 * c1 + alphan12 * c2 + (c1 <= 127 ? alpha12 * ((2 * c1 - 255) * that.softLightLUTSquare[c2] / 255 + c2) : alpha12 * ((2 * c1 - 255) * that.softLightLUTSquareRoot[c2] / 255 + c2))) / newAlpha | 0;
                }
                fusion.data[pixIndex++] = newAlpha;
            } else {
                pixIndex += BYTES_PER_PIXEL;
            }
        }
    }

    fusion.alpha = 100;
};

// Vivid Light Mode
// A < 0.5 => C = 1 - (1-B) / (2*A)
// A > 0.5 => C = B / (2*(1-A))

CPBlend.prototype.fusionWithVividLightFullAlpha = function (that, fusion, rect) {
    var yStride = (that.width - rect.getWidth()) * BYTES_PER_PIXEL,
        pixIndex = that.offsetOfPixel(rect.left, rect.top);

    for (var y = rect.top; y < rect.bottom; y++, pixIndex += yStride) {
        for (var x = rect.left; x < rect.right; x++) {
            var alpha1 = that.data[pixIndex + ALPHA_BYTE_OFFSET] * that.alpha / 100 | 0;

            if (alpha1 == 0) {
                pixIndex += BYTES_PER_PIXEL;
                continue;
            }

            var alpha2 = fusion.data[pixIndex + ALPHA_BYTE_OFFSET] * fusion.alpha / 100 | 0,
                newAlpha = alpha1 + alpha2 - alpha1 * alpha2 / 255 | 0;

            if (newAlpha > 0) {
                var alpha12 = alpha1 * alpha2 / 255 | 0,
                    alpha1n2 = alpha1 * (alpha2 ^ 0xff) / 255 | 0,
                    alphan12 = (alpha1 ^ 0xff) * alpha2 / 255 | 0;

                for (var i = 0; i < 3; i++, pixIndex++) {
                    var c1 = that.data[pixIndex],
                        c2 = fusion.data[pixIndex];

                    fusion.data[pixIndex] = (alpha1n2 * c1 + alphan12 * c2 + (c1 <= 127 ? alpha12 * (c1 == 0 ? 0 : 255 - Math.min(255, (255 - c2) * 255 / (2 * c1))) : alpha12 * (c1 == 255 ? 255 : Math.min(255, c2 * 255 / (2 * (255 - c1)))))) / newAlpha | 0;
                }
                fusion.data[pixIndex++] = newAlpha;
            } else {
                pixIndex += BYTES_PER_PIXEL;
            }
        }
    }

    fusion.alpha = 100;
};

// Linear Light Mode
// C = B + 2*A -1

CPBlend.prototype.fusionWithLinearLightFullAlpha = function (that, fusion, rect) {
    var yStride = (that.width - rect.getWidth()) * BYTES_PER_PIXEL,
        pixIndex = that.offsetOfPixel(rect.left, rect.top);

    for (var y = rect.top; y < rect.bottom; y++, pixIndex += yStride) {
        for (var x = rect.left; x < rect.right; x++) {
            var alpha1 = that.data[pixIndex + ALPHA_BYTE_OFFSET] * that.alpha / 100 | 0;

            if (alpha1 == 0) {
                pixIndex += BYTES_PER_PIXEL;
                continue;
            }

            var alpha2 = fusion.data[pixIndex + ALPHA_BYTE_OFFSET] * fusion.alpha / 100 | 0,
                newAlpha = alpha1 + alpha2 - alpha1 * alpha2 / 255 | 0;

            if (newAlpha > 0) {
                var alpha12 = alpha1 * alpha2 / 255 | 0,
                    alpha1n2 = alpha1 * (alpha2 ^ 0xff) / 255 | 0,
                    alphan12 = (alpha1 ^ 0xff) * alpha2 / 255 | 0;

                for (var i = 0; i < 3; i++, pixIndex++) {
                    var c1 = that.data[pixIndex],
                        c2 = fusion.data[pixIndex];

                    fusion.data[pixIndex] = (alpha1n2 * c1 + alphan12 * c2 + alpha12 * Math.min(255, Math.max(0, c2 + 2 * c1 - 255))) / newAlpha | 0;
                }
                fusion.data[pixIndex++] = newAlpha;
            } else {
                pixIndex += BYTES_PER_PIXEL;
            }
        }
    }

    fusion.alpha = 100;
};

// Pin Light Mode
// B > 2*A => C = 2*A
// B < 2*A-1 => C = 2*A-1
// else => C = B

CPBlend.prototype.fusionWithPinLightFullAlpha = function (that, fusion, rect) {
    var yStride = (that.width - rect.getWidth()) * BYTES_PER_PIXEL,
        pixIndex = that.offsetOfPixel(rect.left, rect.top);

    for (var y = rect.top; y < rect.bottom; y++, pixIndex += yStride) {
        for (var x = rect.left; x < rect.right; x++) {
            var alpha1 = that.data[pixIndex + ALPHA_BYTE_OFFSET] * that.alpha / 100 | 0;

            if (alpha1 == 0) {
                pixIndex += BYTES_PER_PIXEL;
                continue;
            }

            var alpha2 = fusion.data[pixIndex + ALPHA_BYTE_OFFSET] * fusion.alpha / 100 | 0,
                newAlpha = alpha1 + alpha2 - alpha1 * alpha2 / 255 | 0;

            if (newAlpha > 0) {
                var alpha12 = alpha1 * alpha2 / 255 | 0,
                    alpha1n2 = alpha1 * (alpha2 ^ 0xff) / 255 | 0,
                    alphan12 = (alpha1 ^ 0xff) * alpha2 / 255 | 0;

                for (var i = 0; i < 3; i++, pixIndex++) {
                    var c1 = that.data[pixIndex],
                        c2 = fusion.data[pixIndex],
                        c3 = c2 >= 2 * c1 ? 2 * c1 : c2 <= 2 * c1 - 255 ? 2 * c1 - 255 : c2;

                    fusion.data[pixIndex] = (alpha1n2 * c1 + alphan12 * c2 + alpha12 * c3) / newAlpha | 0;
                }
                fusion.data[pixIndex++] = newAlpha;
            } else {
                pixIndex += BYTES_PER_PIXEL;
            }
        }
    }

    fusion.alpha = 100;
};
module.exports = exports["default"];

},{}],5:[function(require,module,exports){
/*
    ChickenPaint
    
    ChickenPaint is a translation of ChibiPaint from Java to JavaScript
    by Nicholas Sherlock / Chicken Smoothie.
    
    ChibiPaint is Copyright (c) 2006-2008 Marc Schefer

    ChickenPaint is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    ChickenPaint is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with ChickenPaint. If not, see <http://www.gnu.org/licenses/>.
*/

"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports["default"] = CPBrushInfo;

function CPBrushInfo(properties) {
    // Set brush setting fields with default values, then apply the supplied 'properties' on top
    for (var propName in CPBrushInfo.DEFAULTS) {
        if (CPBrushInfo.DEFAULTS.hasOwnProperty(propName)) {
            this[propName] = CPBrushInfo.DEFAULTS[propName];
        }
    }

    for (var propName in properties) {
        if (properties.hasOwnProperty(propName)) {
            this[propName] = properties[propName];
        }
    }
}

// Stroke modes
CPBrushInfo.SM_FREEHAND = 0;
CPBrushInfo.SM_LINE = 1;
CPBrushInfo.SM_BEZIER = 2;

// Brush dab types
CPBrushInfo.B_ROUND_PIXEL = 0;
CPBrushInfo.B_ROUND_AA = 1;
CPBrushInfo.B_ROUND_AIRBRUSH = 2;
CPBrushInfo.B_SQUARE_PIXEL = 3;
CPBrushInfo.B_SQUARE_AA = 4;

// painting modes
CPBrushInfo.M_PAINT = 0;
CPBrushInfo.M_ERASE = 1;
CPBrushInfo.M_DODGE = 2;
CPBrushInfo.M_BURN = 3;
CPBrushInfo.M_WATER = 4;
CPBrushInfo.M_BLUR = 5;
CPBrushInfo.M_SMUDGE = 6;
CPBrushInfo.M_OIL = 7;

CPBrushInfo.DEFAULTS = {
    isAA: false, isAirbrush: false,
    minSpacing: 0, spacing: 0,

    pressureSize: true,
    pressureAlpha: false,
    pressureScattering: false,

    type: 0, paintMode: 0,
    strokeMode: CPBrushInfo.SM_FREEHAND,
    resat: 1.0, bleed: 0.0,

    texture: 1.0,

    // "cur" values are current brush settings (once tablet pressure and stuff is applied)
    size: 0, curSize: 0,
    alpha: 0, curAlpha: 0,
    scattering: 0.0, curScattering: 0,
    squeeze: 0.0, curSqueeze: 0,
    angle: Math.PI, curAngle: 0,

    smoothing: 0.0
};

CPBrushInfo.prototype.applyPressure = function (pressure) {
    // FIXME: no variable size for smudge and oil :(
    if (this.pressureSize && this.paintMode != CPBrushInfo.M_SMUDGE && this.paintMode != CPBrushInfo.M_OIL) {
        this.curSize = Math.max(0.1, this.size * pressure);
    } else {
        this.curSize = Math.max(0.1, this.size);
    }

    // FIXME: what is the point of doing that?
    if (this.curSize > 16) {
        this.curSize = Math.floor(this.curSize);
    }

    this.curAlpha = this.pressureAlpha ? Math.floor(this.alpha * Math.min(pressure, 1.0)) : this.alpha;
    this.curSqueeze = this.squeeze;
    this.curAngle = this.angle;
    this.curScattering = this.scattering * this.curSize * (this.pressureScattering ? pressure : 1.0);
};

CPBrushInfo.prototype.clone = function () {
    return new CPBrushInfo(this);
};
module.exports = exports["default"];

},{}],6:[function(require,module,exports){
/*
    ChickenPaint
    
    ChickenPaint is a translation of ChibiPaint from Java to JavaScript
    by Nicholas Sherlock / Chicken Smoothie.
    
    ChibiPaint is Copyright (c) 2006-2008 Marc Schefer

    ChickenPaint is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    ChickenPaint is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with ChickenPaint. If not, see <http://www.gnu.org/licenses/>.
*/

"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports["default"] = CPBrushManager;

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

var _CPBrushInfo = require("./CPBrushInfo");

var _CPBrushInfo2 = _interopRequireDefault(_CPBrushInfo);

function CPBrushManager() {
    var MAX_SQUEEZE = 10,
        BRUSH_MAX_DIM = 201,
        BRUSH_AA_MAX_DIM = 202;

    /*CPBrushDab {
        // the brush
        Uint8Array brush;
        int width, height;
        
        // and where and how to apply it
        int x, y, alpha;
    }*/

    var brush = new Uint8Array(BRUSH_MAX_DIM * BRUSH_MAX_DIM),
        brushAA = new Uint8Array(BRUSH_AA_MAX_DIM * BRUSH_AA_MAX_DIM),
        cacheBrush = null,
        cacheSize,
        cacheSqueeze,
        cacheAngle,
        cacheType,
        that = this;

    /**
     * Shift a brush by a positive sub-pixel amount (dx, dy) [0..1), and return the new brush. 
     * 
     * The resulting brush array is 1 pixel larger than the original one in both dimensions.
     */
    function getBrushWithAA(brushInfo, dx, dy) {
        var nonAABrush = getBrush(brushInfo),
            intSize = Math.ceil(brushInfo.curSize),
            intSizeAA = Math.ceil(brushInfo.curSize) + 1;

        for (var x = 0; x < intSizeAA * intSizeAA; x++) {
            brushAA[x] = 0;
        }

        var invdx_invdy = (1 - dx) * (1 - dy),
            dx_invdy = dx * (1 - dy),
            dx_dy = dx * dy,
            invdx_dy = (1 - dx) * dy,
            srcIndex = 0,
            dstIndex = 0;

        for (var y = 0; y < intSize; y++) {
            for (var x = 0; x < intSize; x++) {
                var brushAlpha = nonAABrush[srcIndex];

                /* 
                 * Use a weighted sum to shift the source pixels's position by a sub-pixel amount dx, dy and accumulate
                 * it into the final brushAA array.
                 */
                brushAA[dstIndex] += ~ ~(brushAlpha * invdx_invdy);
                brushAA[dstIndex + 1] += ~ ~(brushAlpha * dx_invdy);
                brushAA[dstIndex + 1 + intSizeAA] += ~ ~(brushAlpha * dx_dy);
                brushAA[dstIndex + intSizeAA] += ~ ~(brushAlpha * invdx_dy);

                srcIndex++;
                dstIndex++;
            }
            dstIndex += intSizeAA - intSize;
        }

        return brushAA;
    }

    function buildBrush(brush, brushInfo) {
        var intSize = Math.ceil(brushInfo.curSize),
            center = intSize / 2.0,
            sqrRadius = brushInfo.curSize / 2 * (brushInfo.curSize / 2),
            xFactor = 1.0 + brushInfo.curSqueeze * MAX_SQUEEZE,
            cosA = Math.cos(brushInfo.curAngle),
            sinA = Math.sin(brushInfo.curAngle),
            offset = 0;

        for (var j = 0; j < intSize; j++) {
            for (var i = 0; i < intSize; i++) {
                var x = i + 0.5 - center,
                    y = j + 0.5 - center,
                    dx = (x * cosA - y * sinA) * xFactor,
                    dy = y * cosA + x * sinA,
                    sqrDist = dx * dx + dy * dy;

                if (sqrDist <= sqrRadius) {
                    brush[offset++] = 0xFF;
                } else {
                    brush[offset++] = 0;
                }
            }
        }

        return brush;
    }

    function buildBrushAA(brush, brushInfo) {
        var intSize = Math.ceil(brushInfo.curSize),
            center = intSize / 2.0,
            sqrRadius = brushInfo.curSize / 2 * (brushInfo.curSize / 2),
            sqrRadiusInner = (brushInfo.curSize - 2) / 2 * ((brushInfo.curSize - 2) / 2),
            sqrRadiusOuter = (brushInfo.curSize + 2) / 2 * ((brushInfo.curSize + 2) / 2),
            xFactor = 1.0 + brushInfo.curSqueeze * MAX_SQUEEZE,
            cosA = Math.cos(brushInfo.curAngle),
            sinA = Math.sin(brushInfo.curAngle),
            offset = 0;

        for (var j = 0; j < intSize; j++) {
            for (var i = 0; i < intSize; i++) {
                var x = i + 0.5 - center,
                    y = j + 0.5 - center,
                    dx = (x * cosA - y * sinA) * xFactor,
                    dy = y * cosA + x * sinA,
                    sqrDist = dx * dx + dy * dy;

                if (sqrDist <= sqrRadiusInner) {
                    brush[offset++] = 0xFF;
                } else if (sqrDist > sqrRadiusOuter) {
                    brush[offset++] = 0;
                } else {
                    var count = 0;

                    for (var oy = 0; oy < 4; oy++) {
                        for (var ox = 0; ox < 4; ox++) {
                            x = i + ox * (1.0 / 4.0) - center;
                            y = j + oy * (1.0 / 4.0) - center;
                            dx = (x * cosA - y * sinA) * xFactor;
                            dy = y * cosA + x * sinA;

                            sqrDist = dx * dx + dy * dy;
                            if (sqrDist <= sqrRadius) {
                                count += 1;
                            }
                        }
                    }
                    brush[offset++] = Math.min(count * 16, 255);
                }
            }
        }

        return brush;
    }

    function buildBrushSquare(brush, brushInfo) {
        var intSize = Math.ceil(brushInfo.curSize),
            center = intSize / 2.0,
            size = brushInfo.curSize * Math.sin(Math.PI / 4),
            sizeX = size / 2 / (1.0 + brushInfo.curSqueeze * MAX_SQUEEZE),
            sizeY = size / 2,
            cosA = Math.cos(brushInfo.curAngle),
            sinA = Math.sin(brushInfo.curAngle),
            offset = 0;

        for (var j = 0; j < intSize; j++) {
            for (var i = 0; i < intSize; i++) {
                var x = i + 0.5 - center,
                    y = j + 0.5 - center,
                    dx = Math.abs(x * cosA - y * sinA),
                    dy = Math.abs(y * cosA + x * sinA);

                if (dx <= sizeX && dy <= sizeY) {
                    brush[offset++] = 0xFF;
                } else {
                    brush[offset++] = 0;
                }
            }
        }

        return brush;
    }

    function buildBrushSquareAA(brush, brushInfo) {
        var intSize = Math.ceil(brushInfo.curSize),
            center = intSize / 2.0,
            size = brushInfo.curSize * Math.sin(Math.PI / 4),
            sizeX = size / 2 / (1.0 + brushInfo.curSqueeze * MAX_SQUEEZE),
            sizeY = size / 2,
            sizeXInner = sizeX - 1,
            sizeYInner = sizeY - 1,
            sizeXOuter = sizeX + 1,
            sizeYOuter = sizeY + 1,
            cosA = Math.cos(brushInfo.curAngle),
            sinA = Math.sin(brushInfo.curAngle),
            offset = 0;

        for (var j = 0; j < intSize; j++) {
            for (var i = 0; i < intSize; i++) {
                var x = i + 0.5 - center,
                    y = j + 0.5 - center,
                    dx = Math.abs(x * cosA - y * sinA),
                    dy = Math.abs(y * cosA + x * sinA);

                if (dx <= sizeXInner && dy <= sizeYInner) {
                    brush[offset++] = 0xFF;
                } else if (dx > sizeXOuter || dy > sizeYOuter) {
                    brush[offset++] = 0;
                } else {
                    var count = 0;

                    for (var oy = 0; oy < 4; oy++) {
                        for (var ox = 0; ox < 4; ox++) {
                            x = i + ox * (1.0 / 4.0) - center;
                            y = j + oy * (1.0 / 4.0) - center;
                            dx = Math.abs(x * cosA - y * sinA);
                            dy = Math.abs(y * cosA + x * sinA);

                            if (dx <= sizeX && dy <= sizeY) {
                                count++;
                            }
                        }
                    }
                    brush[offset++] = Math.min(count * 16, 255);
                }
            }
        }

        return brush;
    }

    function buildBrushSoft(brush, brushInfo) {
        var intSize = Math.ceil(brushInfo.curSize),
            center = intSize / 2.0,
            sqrRadius = brushInfo.curSize / 2 * (brushInfo.curSize / 2),
            xFactor = 1.0 + brushInfo.curSqueeze * MAX_SQUEEZE,
            cosA = Math.cos(brushInfo.curAngle),
            sinA = Math.sin(brushInfo.curAngle),
            offset = 0;

        for (var j = 0; j < intSize; j++) {
            for (var i = 0; i < intSize; i++) {
                var x = i + 0.5 - center,
                    y = j + 0.5 - center,
                    dx = (x * cosA - y * sinA) * xFactor,
                    dy = y * cosA + x * sinA,
                    sqrDist = dx * dx + dy * dy;

                if (sqrDist <= sqrRadius) {
                    brush[offset++] = ~ ~(255 * (1 - sqrDist / sqrRadius));
                } else {
                    brush[offset++] = 0;
                }
            }
        }

        return brush;
    }

    /**
     * Build and return a brush that conforms to the given brush settings.
     * 
     * @returns a Uint8Array
     */
    function getBrush(brushInfo) {
        if (cacheBrush != null && brushInfo.curSize == cacheSize && brushInfo.curSqueeze == cacheSqueeze && brushInfo.curAngle == cacheAngle && brushInfo.type == cacheType) {
            return cacheBrush;
        }

        switch (brushInfo.type) {
            case _CPBrushInfo2["default"].B_ROUND_AIRBRUSH:
                brush = buildBrushSoft(brush, brushInfo);
                break;
            case _CPBrushInfo2["default"].B_ROUND_AA:
                brush = buildBrushAA(brush, brushInfo);
                break;
            case _CPBrushInfo2["default"].B_ROUND_PIXEL:
                brush = buildBrush(brush, brushInfo);
                break;
            case _CPBrushInfo2["default"].B_SQUARE_AA:
                brush = buildBrushSquareAA(brush, brushInfo);
                break;
            case _CPBrushInfo2["default"].B_SQUARE_PIXEL:
                brush = buildBrushSquare(brush, brushInfo);
                break;
        }

        cacheBrush = brush;
        cacheSize = brushInfo.curSize;
        cacheType = brushInfo.type;
        cacheSqueeze = brushInfo.curSqueeze;
        cacheAngle = brushInfo.curAngle;

        return brush;
    }

    function applyTexture(dab, textureAmount) {
        var amount = Math.floor(textureAmount * 255),
            texture = that.texture,
            textureX = dab.x % texture.width,
            textureY = dab.y % texture.height,
            brushPos = 0,
            texturePos,
            textureEOL;

        if (textureX < 0) {
            textureX += texture.width;
        }

        if (textureY < 0) {
            textureY += texture.height;
        }

        for (var y = 0; y < dab.height; y++) {
            texturePos = textureY * texture.width + textureX;
            textureEOL = textureY * texture.width + texture.width;

            for (var x = 0; x < dab.width; x++) {
                var brushValue = dab.brush[brushPos],
                    textureValue = texture.data[texturePos];

                dab.brush[brushPos] = ~ ~(brushValue * (textureValue * amount / 255 ^ 0xff) / 255);

                brushPos++;

                texturePos++;
                if (texturePos == textureEOL) {
                    // Wrap to left side of texture
                    texturePos -= texture.width;
                }
            }

            textureY++;
            if (textureY == texture.height) {
                textureY = 0;
            }
        }
    }

    /**
     * @param x float
     * @param y float
     * brushInfo - a CPBrushInfo object
     */
    this.getDab = function (x, y, brushInfo) {
        var dab = {
            alpha: brushInfo.curAlpha,
            width: Math.ceil(brushInfo.curSize),
            height: Math.ceil(brushInfo.curSize)
        };

        // FIXME: I don't like this special case for ROUND_PIXEL
        // it would be better to have brush presets for working with pixels
        var useAA = brushInfo.isAA && brushInfo.type != _CPBrushInfo2["default"].B_ROUND_PIXEL;

        if (useAA) {
            dab.width++;
            dab.height++;
        }

        var nx = x - dab.width / 2.0 + 0.5,
            ny = y - dab.height / 2.0 + 0.5;

        // this is necessary as Java uses convert towards zero float to int conversion
        if (nx < 0) {
            nx -= 1;
        }
        if (ny < 0) {
            ny -= 1;
        }

        if (useAA) {
            var dx = Math.abs(nx - ~ ~nx),
                dy = Math.abs(ny - ~ ~ny);

            dab.brush = getBrushWithAA(brushInfo, dx, dy);
        } else {
            dab.brush = getBrush(brushInfo);
        }

        dab.x = ~ ~nx;
        dab.y = ~ ~ny;

        if (brushInfo.texture > 0.0 && this.texture != null) {
            // we need a brush bitmap that can be modified everytime
            // the one in "brush" can be kept in cache so if we are using it, make a copy
            if (dab.brush == brush) {
                brushAA.set(brush);
                dab.brush = brushAA;
            }
            applyTexture(dab, brushInfo.texture);
        }

        return dab;
    };

    this.setTexture = function (texture) {
        this.texture = texture;
    };
}

module.exports = exports["default"];

},{"./CPBrushInfo":5}],7:[function(require,module,exports){
/*
    ChickenPaint

    ChickenPaint is a translation of ChibiPaint from Java to JavaScript
    by Nicholas Sherlock / Chicken Smoothie.

    ChibiPaint is Copyright (c) 2006-2008 Marc Schefer

    ChickenPaint is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    ChickenPaint is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with ChickenPaint. If not, see <http://www.gnu.org/licenses/>.
*/

"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports["default"] = CPChibiFile;

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

var _CPArtwork = require("./CPArtwork");

var _CPArtwork2 = _interopRequireDefault(_CPArtwork);

var _CPLayer = require("./CPLayer");

var _CPLayer2 = _interopRequireDefault(_CPLayer);

var _CPColorBmp = require("./CPColorBmp");

var _CPColorBmp2 = _interopRequireDefault(_CPColorBmp);

var _utilArrayDataStream = require("../util/ArrayDataStream");

var _utilArrayDataStream2 = _interopRequireDefault(_utilArrayDataStream);

function CPChibiFile() {

    function CPChibiHeader(stream, chunk) {
        this.version = stream.readU32BE();
        this.width = stream.readU32BE();
        this.height = stream.readU32BE();
        this.layersNb = stream.readU32BE();
    }

    CPChibiHeader.FIXED_HEADER_LENGTH = 4 * 4;

    function CPChibiChunkHeader(stream) {
        var chunkType = new Array(4);

        for (var i = 0; i < chunkType.length; i++) {
            chunkType[i] = String.fromCharCode(stream.readByte());
        }

        this.chunkType = chunkType.join("");
        this.chunkSize = stream.readU32BE();

        if (stream.eof) {
            throw "Truncated chunk";
        }
    }

    function CPChibiLayerChunkHeader() {
        var payloadOffset, titleLength;

        this.readFixedHeader = function (stream) {
            payloadOffset = stream.readU32BE();

            this.blendMode = stream.readU32BE();
            this.alpha = stream.readU32BE();
            this.visible = (stream.readU32BE() & 1) != 0;

            titleLength = stream.readU32BE();
        };

        /* 
         * After reading the fixed header, use this function to find out how many more bytes of header
         * need to be read.
         */
        this.getVariableHeaderLen = function () {
            return payloadOffset - CPChibiLayerChunkHeader.FIXED_HEADER_LENGTH;
        };

        this.getTotalHeaderLen = function () {
            return CPChibiLayerChunkHeader.FIXED_HEADER_LENGTH + this.getVariableHeaderLen();
        };

        this.readVariableHeader = function (stream) {
            this.name = stream.readString(titleLength);

            // Skip to the pixel data (allows additional header fields to be added that we don't yet support)
            stream.skip(payloadOffset - titleLength - CPChibiLayerChunkHeader.FIXED_HEADER_LENGTH);
        };
    }

    // The size of the initial, fixed-length portion of the header
    CPChibiLayerChunkHeader.FIXED_HEADER_LENGTH = 4 * 5;

    var CHI_MAGIC = "CHIBIOEK",
        CHUNK_TAG_HEAD = "HEAD",
        CHUNK_TAG_LAYER = "LAYR",
        CHUNK_TAG_END = "ZEND",
        BYTES_PER_PIXEL = _CPColorBmp2["default"].BYTES_PER_PIXEL,
        ALPHA_BYTE_OFFSET = _CPColorBmp2["default"].ALPHA_BYTE_OFFSET,
        RED_BYTE_OFFSET = _CPColorBmp2["default"].RED_BYTE_OFFSET,
        GREEN_BYTE_OFFSET = _CPColorBmp2["default"].GREEN_BYTE_OFFSET,
        BLUE_BYTE_OFFSET = _CPColorBmp2["default"].BLUE_BYTE_OFFSET;

    function serializeEndChunk() {
        var buffer = new Uint8Array(CHUNK_TAG_END.length + 4),
            stream = new _utilArrayDataStream2["default"](buffer);

        stream.writeString(CHUNK_TAG_END);
        stream.writeU32BE(0);

        return stream.getAsDataArray();
    }

    function serializeHeaderChunk(artwork) {
        var buffer = new Uint8Array(CHUNK_TAG_HEAD.length + 4 * 5),
            stream = new _utilArrayDataStream2["default"](buffer);

        stream.writeString(CHUNK_TAG_HEAD);
        stream.writeU32BE(16); // ChunkSize

        stream.writeU32BE(0); // Current Version: Major: 0 Minor: 0
        stream.writeU32BE(artwork.width);
        stream.writeU32BE(artwork.height);
        stream.writeU32BE(artwork.getLayerCount());

        return stream.getAsDataArray();
    }

    function serializeLayerChunk(layer) {
        var chunkSize = 20 + layer.name.length + layer.data.length,
            buffer = new Uint8Array(CHUNK_TAG_LAYER.length + 4 + chunkSize),
            stream = new _utilArrayDataStream2["default"](buffer),
            pos;

        stream.writeString(CHUNK_TAG_LAYER); // Chunk ID
        stream.writeU32BE(chunkSize); // ChunkSize

        stream.writeU32BE(20 + layer.name.length); // Offset to layer data from start of header

        stream.writeU32BE(layer.blendMode);
        stream.writeU32BE(layer.alpha);
        stream.writeU32BE(layer.visible ? 1 : 0); // layer visibility and future flags

        stream.writeU32BE(layer.name.length);
        stream.writeString(layer.name);

        // Convert layer bytes from RGBA to ARGB order to match the Chibi specs
        pos = stream.pos;
        for (var i = 0; i < layer.data.length; i += BYTES_PER_PIXEL) {
            buffer[pos++] = layer.data[i + ALPHA_BYTE_OFFSET];
            buffer[pos++] = layer.data[i + RED_BYTE_OFFSET];
            buffer[pos++] = layer.data[i + GREEN_BYTE_OFFSET];
            buffer[pos++] = layer.data[i + BLUE_BYTE_OFFSET];
        }

        return buffer;
    }

    /**
     * Serialize the given artwork to Chibifile format. Returns a promise which resolves to the serialized Blob.
     */
    this.serialize = function (artwork) {
        return new Promise(function (resolve, reject) {
            var deflator = new window.pako.Deflate({
                level: 7
            }),
                blobParts = [],
                magic = new Uint8Array(CHI_MAGIC.length);

            // The magic file signature is not ZLIB compressed:
            for (var i = 0; i < CHI_MAGIC.length; i++) {
                magic[i] = CHI_MAGIC.charCodeAt(i);
            }
            blobParts.push(magic);

            // The rest gets compressed
            deflator.push(serializeHeaderChunk(artwork), false);

            var layers = artwork.getLayers(),
                i = 0;

            // Insert a settimeout between each serialized layer, so we can maintain browser responsiveness

            function serializeLayer() {
                if (i == layers.length) {
                    deflator.push(serializeEndChunk(artwork), true);

                    blobParts.push(deflator.result);

                    resolve(new Blob(blobParts, { type: "application/octet-stream" }));
                } else {
                    deflator.push(serializeLayerChunk(layers[i++]), false);

                    setTimeout(serializeLayer, 10);
                }
            }

            setTimeout(serializeLayer, 10);
        });
    };

    function hasChibiMagicMarker(array) {
        for (var i = 0; i < CHI_MAGIC.length; i++) {
            if (array[i] != CHI_MAGIC.charCodeAt(i)) {
                return false;
            }
        }

        return true;
    }

    /**
     * Concat two Uint8Arrays to make a new one and return it.
     * 
     * Either one may be set to null. If either one is null, the other is returned. If both are null, null is
     * returned.
     */
    function concatBuffers(one, two) {
        if (one == null || one.length == 0) {
            return two;
        }
        if (two == null || two.length == 0) {
            return one;
        }

        var result = new Uint8Array(one.length + two.length);

        result.set(one, 0);
        result.set(two, one.length);

        return result;
    }

    /**
     * Attempt to load a chibifile from the given arraybuffer.
     *
     * @returns A CPArtwork on success, or null on failure.
     */
    this.read = function (arrayBuffer) {
        var STATE_WAIT_FOR_CHUNK = 0,
            STATE_DECODE_IMAGE_HEADER = 1,
            STATE_DECODE_LAYER_HEADER_FIXED = 2,
            STATE_DECODE_LAYER_HEADER_VARIABLE = 3,
            STATE_DECODE_LAYER = 4,
            STATE_SKIP_TRAILING_CHUNK_BYTES = 5,
            STATE_SUCCESS = 6,
            STATE_FATAL = 10;

        var pako = new window.pako.Inflate({}),
            state = STATE_WAIT_FOR_CHUNK,
            artwork = null,
            layerHeader,
            layer,
            layerBytesRead,
            layerBytesTotal,
            skipCount,
            headerChunk = null,
            header = null,
            chunk = null,
            buffer = null;

        /**
         * Decode A,R,G,B pixels from the given buffer into the R,G,B,A pixel array given by layerPix.
         * 
         * The layerBytesRead and layerBytesTotal variables are used to keep track of the decode process and to 
         * limit the number of bytes read, respectively.
         * 
         * Returns the buffer with the read bytes removed from the front, or null if the buffer was read in its entirety.
         */
        function decodePixels(buffer, layerPix) {
            var subpixel = layerBytesRead % BYTES_PER_PIXEL,
                dstPixelStartOffset = layerBytesRead - subpixel,
                bufferPos = 0,

            // Map from source channel order to CPLayer's dest order
            channelMap = [ALPHA_BYTE_OFFSET, RED_BYTE_OFFSET, GREEN_BYTE_OFFSET, BLUE_BYTE_OFFSET];

            // The first pixel might be a partial one since we might be continuing a pixel split over buffers
            for (; subpixel < BYTES_PER_PIXEL && bufferPos < buffer.length; subpixel++) {
                layerPix[dstPixelStartOffset + channelMap[subpixel]] = buffer[bufferPos];
                layerBytesRead++;
                bufferPos++;
            }

            // How many more pixels are we to read in this buffer?
            var bytesRemain = Math.min(buffer.length - bufferPos, layerBytesTotal - layerBytesRead) | 0,
                fullPixelsRemain = bytesRemain / BYTES_PER_PIXEL | 0,
                subpixelsRemain = bytesRemain % BYTES_PER_PIXEL;

            for (var i = 0; i < fullPixelsRemain; i++) {
                layerPix[layerBytesRead + ALPHA_BYTE_OFFSET] = buffer[bufferPos];
                layerPix[layerBytesRead + RED_BYTE_OFFSET] = buffer[bufferPos + 1];
                layerPix[layerBytesRead + GREEN_BYTE_OFFSET] = buffer[bufferPos + 2];
                layerPix[layerBytesRead + BLUE_BYTE_OFFSET] = buffer[bufferPos + 3];
                layerBytesRead += BYTES_PER_PIXEL;
                bufferPos += BYTES_PER_PIXEL;
            }

            // Read a fractional pixel at the end of the buffer
            dstPixelStartOffset = layerBytesRead;
            for (subpixel = 0; subpixel < subpixelsRemain; subpixel++) {
                layerPix[dstPixelStartOffset + channelMap[subpixel]] = buffer[bufferPos];
                layerBytesRead++;
                bufferPos++;
            }

            if (bufferPos < buffer.length) {
                // Layer was completed before the end of the buffer, there is buffer left over for someone else to use
                return buffer.subarray(bufferPos);
            } else {
                // Buffer exhausted
                return null;
            }
        }

        function processBlock(block) {
            var stream;

            // Add a loop here so we can re-enter the switch with 'continue'
            while (true) {
                switch (state) {
                    case STATE_WAIT_FOR_CHUNK:
                        buffer = concatBuffers(buffer, block);
                        block = null;

                        // Wait for whole chunk header to become available
                        if (buffer.length < 8) {
                            break;
                        }

                        // Decode chunk header
                        stream = new _utilArrayDataStream2["default"](buffer);
                        chunk = new CPChibiChunkHeader(stream);

                        // Remove the chunk header from the start of the buffer
                        buffer = buffer.subarray(stream.pos);

                        if (headerChunk) {
                            if (chunk.chunkType == CHUNK_TAG_END) {
                                state = STATE_SUCCESS;
                                break;
                            } else if (chunk.chunkType == CHUNK_TAG_LAYER) {
                                state = STATE_DECODE_LAYER_HEADER_FIXED;
                            } else {
                                console.log("Unknown chunk type '" + chunk.chunkType + "', attempting to skip...");

                                block = buffer;
                                buffer = null;

                                skipCount = chunk.chunkSize;
                                state = STATE_SKIP_TRAILING_CHUNK_BYTES;
                            }
                        } else if (chunk.chunkType == CHUNK_TAG_HEAD) {
                            headerChunk = chunk;

                            // Try to decode the header
                            state = STATE_DECODE_IMAGE_HEADER;
                            continue;
                        } else {
                            // File didn't start with image header chunk
                            state = STATE_FATAL;
                        }
                        break;
                    case STATE_DECODE_IMAGE_HEADER:
                        buffer = concatBuffers(buffer, block);
                        block = null;

                        // Wait for whole chunk to be available
                        if (buffer.length < headerChunk.chunkSize) {
                            break;
                        }

                        stream = new _utilArrayDataStream2["default"](buffer);
                        header = new CPChibiHeader(stream, headerChunk);

                        if (header.version >>> 16 > 0) {
                            state = STATE_FATAL; // the file version is higher than what we can deal with, bail out
                            break;
                        }

                        artwork = new _CPArtwork2["default"](header.width, header.height);

                        block = buffer;
                        buffer = null;

                        skipCount = headerChunk.chunkSize; // Skip the header chunk along with any trailing bytes
                        state = STATE_SKIP_TRAILING_CHUNK_BYTES;
                        continue;
                        break;
                    case STATE_DECODE_LAYER_HEADER_FIXED:
                        buffer = concatBuffers(buffer, block);
                        block = null;

                        // Wait for first part of header to arrive
                        if (buffer.length < CPChibiLayerChunkHeader.FIXED_HEADER_LENGTH) {
                            break;
                        }

                        layerHeader = new CPChibiLayerChunkHeader();

                        stream = new _utilArrayDataStream2["default"](buffer);
                        layerHeader.readFixedHeader(stream);

                        buffer = buffer.subarray(stream.pos);

                        state = STATE_DECODE_LAYER_HEADER_VARIABLE;
                        continue;
                        break;
                    case STATE_DECODE_LAYER_HEADER_VARIABLE:
                        buffer = concatBuffers(buffer, block);
                        block = null;

                        // Wait for variable part of header to arrive
                        if (buffer.length < layerHeader.getVariableHeaderLen()) {
                            break;
                        }

                        stream = new _utilArrayDataStream2["default"](buffer);
                        layerHeader.readVariableHeader(stream);

                        buffer = buffer.subarray(stream.pos);

                        layer = new _CPLayer2["default"](header.width, header.height, layerHeader.name);
                        layer.blendMode = layerHeader.blendMode;
                        layer.alpha = layerHeader.alpha;
                        layer.visible = layerHeader.visible;

                        layerBytesRead = 0;
                        layerBytesTotal = header.width * header.height * BYTES_PER_PIXEL;

                        /* 
                         * While decoding layers, we won't keep a persistent buffer around, so if we have any
                         * bytes left over, provide them to the next state as if they were a newly inflated block.
                         */
                        block = buffer;
                        buffer = null;

                        state = STATE_DECODE_LAYER;
                        continue;
                        break;
                    case STATE_DECODE_LAYER:
                        /* 
                         * When decoding layer data, we never concat blocks together, we are capable of decoding
                         * partial pixels that get split over block boundaries. So we don't use 'buffer' to accumulate
                         * data, and only read from incoming 'block's.
                         */
                        if (block != null) {
                            block = decodePixels(block, layer.data);

                            if (layerBytesRead >= layerBytesTotal) {
                                artwork.addLayerObject(layer);

                                // Skip any trailing bytes in the layer chunk
                                skipCount = chunk.chunkSize - layerHeader.getTotalHeaderLen() - layerBytesTotal;
                                state = STATE_SKIP_TRAILING_CHUNK_BYTES;
                                continue;
                            }
                        }
                        break;
                    case STATE_SKIP_TRAILING_CHUNK_BYTES:
                        if (block) {
                            if (skipCount < block.length) {
                                block = block.subarray(skipCount);
                                skipCount = 0;
                            } else {
                                skipCount -= block.length;
                                block = null;
                            }
                        }

                        if (skipCount == 0) {
                            state = STATE_WAIT_FOR_CHUNK;
                            continue;
                        }
                        break;
                }

                break;
            }
        }

        arrayBuffer = new Uint8Array(arrayBuffer);

        if (!hasChibiMagicMarker(arrayBuffer)) {
            return null; // not a ChibiPaint file
        }

        // Remove the magic header
        arrayBuffer = arrayBuffer.subarray(CHI_MAGIC.length);

        pako.onData = processBlock;

        pako.onEnd = function (status) {
            if (status === 0 && state == STATE_SUCCESS) {
                artwork.setActiveLayerIndex(artwork.getTopmostVisibleLayer());

                this.result = artwork;
            } else {
                console.log("Fatal error decoding ChibiFile");

                this.result = null;
            }
        };

        // Begin decompression/decoding
        pako.push(arrayBuffer);

        return pako.result;
    };
}

module.exports = exports["default"];

},{"../util/ArrayDataStream":44,"./CPArtwork":2,"./CPColorBmp":9,"./CPLayer":11}],8:[function(require,module,exports){
/*
    ChickenPaint

    ChickenPaint is a translation of ChibiPaint from Java to JavaScript
    by Nicholas Sherlock / Chicken Smoothie.

    ChibiPaint is Copyright (c) 2006-2008 Marc Schefer

    ChickenPaint is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    ChickenPaint is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with ChickenPaint. If not, see <http://www.gnu.org/licenses/>.
*/

"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports["default"] = CPClip;

function CPClip(bmp, x, y) {
    this.bmp = bmp;

    this.x = x;
    this.y = y;
}

;
module.exports = exports["default"];

},{}],9:[function(require,module,exports){
/*
    ChickenPaint
    
    ChickenPaint is a translation of ChibiPaint from Java to JavaScript
    by Nicholas Sherlock / Chicken Smoothie.
    
    ChibiPaint is Copyright (c) 2006-2008 Marc Schefer

    ChickenPaint is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    ChickenPaint is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with ChickenPaint. If not, see <http://www.gnu.org/licenses/>.
*/

"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports["default"] = CPColorBmp;

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

var _CPBitmap = require("./CPBitmap");

var _CPBitmap2 = _interopRequireDefault(_CPBitmap);

var _utilCPRect = require("../util/CPRect");

var _utilCPRect2 = _interopRequireDefault(_utilCPRect);

function createImageData(width, height) {
    // return new ImageData(this.width, this.height); // Doesn't work on old IE
    var canvas = document.createElement("canvas"),
        context = canvas.getContext("2d");

    return context.createImageData(width, height);
}

//
// A 32bpp bitmap class (one byte per channel in RGBA order)
//

function CPColorBmp(width, height) {
    _CPBitmap2["default"].call(this, width, height);

    // The ImageData object that holds the image data
    this.imageData = createImageData(this.width, this.height);

    // The bitmap data array (one byte per channel in RGBA order)
    this.data = this.imageData.data;
}

CPColorBmp.prototype = Object.create(_CPBitmap2["default"].prototype);
CPColorBmp.prototype.constructor = CPColorBmp;

CPColorBmp.BYTES_PER_PIXEL = 4;
CPColorBmp.RED_BYTE_OFFSET = 0;
CPColorBmp.GREEN_BYTE_OFFSET = 1;
CPColorBmp.BLUE_BYTE_OFFSET = 2;
CPColorBmp.ALPHA_BYTE_OFFSET = 3;

// Creates a CPBitmap from a portion of this bitmap
CPColorBmp.prototype.cloneRect = function (rect) {
    var result = new CPColorBmp(rect.getWidth(), rect.getHeight());

    result.copyBitmapRect(this, 0, 0, rect);

    return result;
};

//
// Pixel access with friendly clipping. Pixel will be 32-bit integer in ARGB format
//
CPColorBmp.prototype.getPixel = function (x, y) {
    x = Math.max(0, Math.min(this.width - 1, x));
    y = Math.max(0, Math.min(this.height - 1, y));

    var pixIndex = this.offsetOfPixel(x, y);

    return this.data[pixIndex + CPColorBmp.ALPHA_BYTE_OFFSET] << 24 | this.data[pixIndex + CPColorBmp.RED_BYTE_OFFSET] << 16 | this.data[pixIndex + CPColorBmp.GREEN_BYTE_OFFSET] << 8 | this.data[pixIndex + CPColorBmp.BLUE_BYTE_OFFSET];
};

//
// Get an r,g,b,a array of the xor of this bitmap and the given one, within the given rectangle
//
CPColorBmp.prototype.copyRectXOR = function (bmp, rect) {
    rect = this.getBounds().clip(rect);

    var w = rect.getWidth(),
        h = rect.getHeight(),
        buffer = new Uint8Array(w * h * CPColorBmp.BYTES_PER_PIXEL),
        outputIndex = 0,
        bmp1Index = this.offsetOfPixel(rect.left, rect.top),
        bmp2Index = bmp.offsetOfPixel(rect.left, rect.top),
        bmp1YSkip = (this.width - w) * CPColorBmp.BYTES_PER_PIXEL,
        bmp2YSkip = (bmp.width - w) * CPColorBmp.BYTES_PER_PIXEL,
        widthBytes = w * CPColorBmp.BYTES_PER_PIXEL;

    for (var y = rect.top; y < rect.bottom; y++, bmp1Index += bmp1YSkip, bmp2Index += bmp2YSkip) {
        for (var x = 0; x < widthBytes; x++, outputIndex++, bmp1Index++, bmp2Index++) {
            buffer[outputIndex] = this.data[bmp1Index] ^ bmp.data[bmp2Index];
        }
    }

    return buffer;
};

CPColorBmp.prototype.setRectXOR = function (buffer, rect) {
    rect = this.getBounds().clip(rect);

    var w = rect.getWidth(),
        h = rect.getHeight(),
        bmp1Index = this.offsetOfPixel(rect.left, rect.top),
        bufferIndex = 0,
        bmp1YSkip = (this.width - w) * CPColorBmp.BYTES_PER_PIXEL,
        widthBytes = w * CPColorBmp.BYTES_PER_PIXEL;

    for (var y = 0; y < h; y++) {
        for (var x = 0; x < widthBytes; x++) {
            this.data[bmp1Index++] ^= buffer[bufferIndex++];
        }
        bmp1Index += bmp1YSkip;
    }
};

//
// Copy another bitmap into this one using alpha blending
//
CPColorBmp.prototype.pasteAlphaRect = function (bmp, srcRect, x, y) {
    var srcRectCpy = srcRect.clone(),
        dstRect = new _utilCPRect2["default"](x, y, 0, 0);

    this.getBounds().clipSourceDest(srcRectCpy, dstRect);

    var srcYStride = (bmp.width - dstRect.getWidth()) * CPColorBmp.BYTES_PER_PIXEL,
        dstYStride = (this.width - dstRect.getWidth()) * CPColorBmp.BYTES_PER_PIXEL,
        srcOffset = bmp.offsetOfPixel(srcRectCpy.left, srcRectCpy.top),
        dstOffset = this.offsetOfPixel(dstRect.left, dstRect.top);

    for (var y = dstRect.top; y < dstRect.bottom; y++, srcOffset += srcYStride, dstOffset += dstYStride) {
        for (var x = dstRect.left; x < dstRect.right; x++) {
            var alpha1 = bmp.data[srcOffset + CPColorBmp.ALPHA_BYTE_OFFSET];

            if (alpha1 <= 0) {
                dstOffset += CPColorBmp.BYTES_PER_PIXEL;
                srcOffset += CPColorBmp.BYTES_PER_PIXEL;
                continue;
            }

            if (alpha1 == 255) {
                for (var i = 0; i < CPColorBmp.BYTES_PER_PIXEL; i++) {
                    this.data[dstOffset++] = bmp.data[srcOffset++];
                }
                continue;
            }

            var alpha2 = this.data[dstOffset + CPColorBmp.ALPHA_BYTE_OFFSET],
                newAlpha = alpha1 + alpha2 - alpha1 * alpha2 / 255 | 0;

            if (newAlpha > 0) {
                var realAlpha = alpha1 * 255 / newAlpha | 0,
                    invAlpha = 255 - realAlpha;

                for (var i = 0; i < 3; i++, dstOffset++, srcOffset++) {
                    this.data[dstOffset] = bmp.data[srcOffset] + (this.data[dstOffset] * invAlpha - bmp.data[srcOffset] * invAlpha) / 255 | 0;
                }
                this.data[dstOffset++] = newAlpha;
                srcOffset++;
            } else {
                dstOffset += CPColorBmp.BYTES_PER_PIXEL;
                srcOffset += CPColorBmp.BYTES_PER_PIXEL;
            }
        }
    }
};

/** 
 * Copy the rectangle at srcRect from bmp onto this image at (dstX, dstY).
 */
CPColorBmp.prototype.copyBitmapRect = function (bmp, dstX, dstY, srcRect) {
    var srcRect = srcRect.clone(),
        dstRect = new _utilCPRect2["default"](dstX, dstY, 0, 0);

    this.getBounds().clipSourceDest(srcRect, dstRect);

    var w = dstRect.getWidth() | 0,
        h = dstRect.getHeight() | 0;

    // Are we just trying to duplicate the bitmap?
    if (dstRect.left == 0 && dstRect.top == 0 && w == this.width && h == this.height && w == bmp.width && h == bmp.height) {
        this.copyDataFrom(bmp);
    } else {
        var dstIndex = this.offsetOfPixel(dstRect.left, dstRect.top),
            srcIndex = bmp.offsetOfPixel(srcRect.left, srcRect.top),
            dstYSkip = (this.width - w) * CPColorBmp.BYTES_PER_PIXEL,
            srcYSkip = (bmp.width - w) * CPColorBmp.BYTES_PER_PIXEL;

        for (var y = 0; y < h; y++) {
            for (var x = 0; x < w; x++) {
                this.data[dstIndex] = bmp.data[srcIndex];
                this.data[dstIndex + 1] = bmp.data[srcIndex + 1];
                this.data[dstIndex + 2] = bmp.data[srcIndex + 2];
                this.data[dstIndex + 3] = bmp.data[srcIndex + 3];
                dstIndex += 4;
                srcIndex += 4;
            }
            srcIndex += srcYSkip;
            dstIndex += dstYSkip;
        }
    }
};

//
// Copies the Alpha channel from another bitmap. Assumes both bitmaps are the same width.
//
CPColorBmp.prototype.copyAlphaFrom = function (bmp, rect) {
    rect = this.getBounds().clip(rect);

    var w = rect.getWidth(),
        h = rect.getHeight(),
        pixIndex = this.offsetOfPixel(rect.left, rect.top) + CPColorBmp.ALPHA_BYTE_OFFSET,
        /* Apply offset here so we don't have to do it per-pixel*/
    ySkip = (this.width - w) * CPColorBmp.BYTES_PER_PIXEL;

    for (var y = 0; y < h; y++) {
        for (var x = 0; x < w; x++) {
            this.data[pixIndex] = bmp.data[pixIndex];
            pixIndex += CPColorBmp.BYTES_PER_PIXEL;
        }
        pixIndex += ySkip;
    }
};

CPColorBmp.prototype.copyDataFrom = function (bmp) {
    if (bmp.width != this.width || bmp.height != this.height) {
        this.width = bmp.width;
        this.height = bmp.height;

        this.imageData = createImageData(this.width, this.height);
        this.data = this.imageData.data;
    }

    if ("set" in this.data) {
        this.data.set(bmp.data);
    } else {
        // IE doesn't use Uint8ClampedArray for ImageData, so set() isn't available
        for (var i = 0; i < this.data.length; i++) {
            this.data[i] = bmp.data[i];
        }
    }
};

/**
 * Flood fill the given color starting from the given point
 * @param x int
 * @param y int
 * @param color int
 */
CPColorBmp.prototype.floodFill = function (x, y, color) {
    if (!this.isInside(x, y)) {
        return;
    }

    var oldColor = this.getPixel(x, y),
        oldAlpha = oldColor >> 24 & 0xFF,
        oldRed = oldColor >> 16 & 0xFF,
        oldGreen = oldColor >> 8 & 0xFF,
        oldBlue = oldColor & 0xFF,
        colorAlpha = color >> 24 & 0xFF,
        colorRed = color >> 16 & 0xFF,
        colorGreen = color >> 8 & 0xFF,
        colorBlue = color & 0xFF,
        stack = [],
        clip = this.getBounds(),
        data = this.data;

    // Change the left and right bounds from pixel indexes into byte indexes for easy clipping
    clip.left *= CPColorBmp.BYTES_PER_PIXEL;
    clip.right *= CPColorBmp.BYTES_PER_PIXEL;

    stack.push({ x1: x * CPColorBmp.BYTES_PER_PIXEL, x2: x * CPColorBmp.BYTES_PER_PIXEL, y: y, dy: -1 });
    stack.push({ x1: x * CPColorBmp.BYTES_PER_PIXEL, x2: x * CPColorBmp.BYTES_PER_PIXEL, y: y + 1, dy: 1 });

    /* 
     * If we are filling 100% transparent areas then we need to ignore the residual color information
     * (it would also be possible to clear it when erasing, but then the performance impact would be on the eraser 
     * rather than on this low importance flood fill)
     */
    if (oldAlpha == 0) {
        if (colorAlpha == 0) {
            return;
        }

        while (stack.length > 0) {
            var line = stack.pop();

            if (line.y < clip.top || line.y >= clip.bottom) {
                continue;
            }

            var lineOffset = this.offsetOfPixel(0, line.y),
                left = line.x1,
                next;

            while (left >= clip.left && data[left + lineOffset + CPColorBmp.ALPHA_BYTE_OFFSET] == 0) {
                data[left + lineOffset + CPColorBmp.RED_BYTE_OFFSET] = colorRed;
                data[left + lineOffset + CPColorBmp.GREEN_BYTE_OFFSET] = colorGreen;
                data[left + lineOffset + CPColorBmp.BLUE_BYTE_OFFSET] = colorBlue;
                data[left + lineOffset + CPColorBmp.ALPHA_BYTE_OFFSET] = colorAlpha;

                left -= CPColorBmp.BYTES_PER_PIXEL;
            }

            if (left >= line.x1) {
                while (left <= line.x2 && data[left + lineOffset + CPColorBmp.ALPHA_BYTE_OFFSET] != oldAlpha) {
                    left += CPColorBmp.BYTES_PER_PIXEL;
                }
                next = left + CPColorBmp.BYTES_PER_PIXEL;
                if (left > line.x2) {
                    continue;
                }
            } else {
                left += CPColorBmp.BYTES_PER_PIXEL;
                if (left < line.x1) {
                    stack.push({ x1: left, x2: line.x1 - CPColorBmp.BYTES_PER_PIXEL, y: line.y - line.dy, dy: -line.dy });
                }
                next = line.x1 + CPColorBmp.BYTES_PER_PIXEL;
            }

            do {
                data[left + lineOffset + CPColorBmp.RED_BYTE_OFFSET] = colorRed;
                data[left + lineOffset + CPColorBmp.GREEN_BYTE_OFFSET] = colorGreen;
                data[left + lineOffset + CPColorBmp.BLUE_BYTE_OFFSET] = colorBlue;
                data[left + lineOffset + CPColorBmp.ALPHA_BYTE_OFFSET] = colorAlpha;

                while (next < clip.right && data[next + lineOffset + CPColorBmp.ALPHA_BYTE_OFFSET] == oldAlpha) {
                    data[next + lineOffset + CPColorBmp.RED_BYTE_OFFSET] = colorRed;
                    data[next + lineOffset + CPColorBmp.GREEN_BYTE_OFFSET] = colorGreen;
                    data[next + lineOffset + CPColorBmp.BLUE_BYTE_OFFSET] = colorBlue;
                    data[next + lineOffset + CPColorBmp.ALPHA_BYTE_OFFSET] = colorAlpha;

                    next += CPColorBmp.BYTES_PER_PIXEL;
                }
                stack.push({ x1: left, x2: next - CPColorBmp.BYTES_PER_PIXEL, y: line.y + line.dy, dy: line.dy });

                if (next - CPColorBmp.BYTES_PER_PIXEL > line.x2) {
                    stack.push({ x1: line.x2 + CPColorBmp.BYTES_PER_PIXEL, x2: next - CPColorBmp.BYTES_PER_PIXEL, y: line.y - line.dy, dy: -line.dy });
                }

                left = next + CPColorBmp.BYTES_PER_PIXEL;
                while (left <= line.x2 && data[left + lineOffset + CPColorBmp.ALPHA_BYTE_OFFSET] != oldAlpha) {
                    left += CPColorBmp.BYTES_PER_PIXEL;
                }

                next = left + CPColorBmp.BYTES_PER_PIXEL;
            } while (left <= line.x2);
        }
    } else {
        if (color == oldColor) {
            return;
        }

        while (stack.length > 0) {
            var line = stack.pop();

            if (line.y < clip.top || line.y >= clip.bottom) {
                continue;
            }

            var lineOffset = this.offsetOfPixel(0, line.y),
                left = line.x1,
                next;

            while (left >= clip.left && data[left + lineOffset + CPColorBmp.RED_BYTE_OFFSET] == oldRed && data[left + lineOffset + CPColorBmp.GREEN_BYTE_OFFSET] == oldGreen && data[left + lineOffset + CPColorBmp.BLUE_BYTE_OFFSET] == oldBlue && data[left + lineOffset + CPColorBmp.ALPHA_BYTE_OFFSET] == oldAlpha) {
                data[left + lineOffset + CPColorBmp.RED_BYTE_OFFSET] = colorRed;
                data[left + lineOffset + CPColorBmp.GREEN_BYTE_OFFSET] = colorGreen;
                data[left + lineOffset + CPColorBmp.BLUE_BYTE_OFFSET] = colorBlue;
                data[left + lineOffset + CPColorBmp.ALPHA_BYTE_OFFSET] = colorAlpha;

                left -= CPColorBmp.BYTES_PER_PIXEL;
            }

            if (left >= line.x1) {
                while (left <= line.x2 && !(data[left + lineOffset + CPColorBmp.RED_BYTE_OFFSET] == oldRed && data[left + lineOffset + CPColorBmp.GREEN_BYTE_OFFSET] == oldGreen && data[left + lineOffset + CPColorBmp.BLUE_BYTE_OFFSET] == oldBlue && data[left + lineOffset + CPColorBmp.ALPHA_BYTE_OFFSET] == oldAlpha)) {
                    left += CPColorBmp.BYTES_PER_PIXEL;
                }
                next = left + CPColorBmp.BYTES_PER_PIXEL;
                if (left > line.x2) {
                    continue;
                }
            } else {
                left += CPColorBmp.BYTES_PER_PIXEL;
                if (left < line.x1) {
                    stack.push({ x1: left, x2: line.x1 - CPColorBmp.BYTES_PER_PIXEL, y: line.y - line.dy, dy: -line.dy });
                }
                next = line.x1 + CPColorBmp.BYTES_PER_PIXEL;
            }

            do {
                data[left + lineOffset + CPColorBmp.RED_BYTE_OFFSET] = colorRed;
                data[left + lineOffset + CPColorBmp.GREEN_BYTE_OFFSET] = colorGreen;
                data[left + lineOffset + CPColorBmp.BLUE_BYTE_OFFSET] = colorBlue;
                data[left + lineOffset + CPColorBmp.ALPHA_BYTE_OFFSET] = colorAlpha;

                while (next < clip.right && data[next + lineOffset + CPColorBmp.RED_BYTE_OFFSET] == oldRed && data[next + lineOffset + CPColorBmp.GREEN_BYTE_OFFSET] == oldGreen && data[next + lineOffset + CPColorBmp.BLUE_BYTE_OFFSET] == oldBlue && data[next + lineOffset + CPColorBmp.ALPHA_BYTE_OFFSET] == oldAlpha) {
                    data[next + lineOffset + CPColorBmp.RED_BYTE_OFFSET] = colorRed;
                    data[next + lineOffset + CPColorBmp.GREEN_BYTE_OFFSET] = colorGreen;
                    data[next + lineOffset + CPColorBmp.BLUE_BYTE_OFFSET] = colorBlue;
                    data[next + lineOffset + CPColorBmp.ALPHA_BYTE_OFFSET] = colorAlpha;

                    next += CPColorBmp.BYTES_PER_PIXEL;
                }
                stack.push({ x1: left, x2: next - CPColorBmp.BYTES_PER_PIXEL, y: line.y + line.dy, dy: line.dy });

                if (next - CPColorBmp.BYTES_PER_PIXEL > line.x2) {
                    stack.push({ x1: line.x2 + CPColorBmp.BYTES_PER_PIXEL, x2: next - CPColorBmp.BYTES_PER_PIXEL, y: line.y - line.dy, dy: -line.dy });
                }

                left = next + CPColorBmp.BYTES_PER_PIXEL;
                while (left <= line.x2 && !(data[left + lineOffset + CPColorBmp.RED_BYTE_OFFSET] == oldRed && data[left + lineOffset + CPColorBmp.GREEN_BYTE_OFFSET] == oldGreen && data[left + lineOffset + CPColorBmp.BLUE_BYTE_OFFSET] == oldBlue && data[left + lineOffset + CPColorBmp.ALPHA_BYTE_OFFSET] == oldAlpha)) {
                    left += CPColorBmp.BYTES_PER_PIXEL;
                }

                next = left + CPColorBmp.BYTES_PER_PIXEL;
            } while (left <= line.x2);
        }
    }
};

/**
 * Premultiply the RGB channels in the given R,G,B,A channel buffer with the alpha channel.
 * 
 * @param buffer R,G,B,A channel array
 * @param len Number of pixels in buffer to modify
 */
function multiplyAlpha(buffer, len) {
    var pixIndex = 0;

    for (var i = 0; i < len; i++) {
        var alpha = buffer[pixIndex + CPColorBmp.ALPHA_BYTE_OFFSET];

        // Multiply the RGB channels by alpha
        for (var j = 0; j < 3; j++, pixIndex++) {
            buffer[pixIndex] = Math.round(buffer[pixIndex] * alpha / 255);
        }
        pixIndex++; // Don't modify alpha channel
    }
}

/**
 * Inverse of multiplyAlpha()
 */
function separateAlpha(buffer, len) {
    var pixIndex = 0;

    for (var i = 0; i < len; i++) {
        var alpha = buffer[pixIndex + CPColorBmp.ALPHA_BYTE_OFFSET];

        if (alpha != 0) {
            var invAlpha = 255 / alpha;

            for (var j = 0; j < 3; j++, pixIndex++) {
                buffer[pixIndex] = Math.min(Math.round(buffer[pixIndex] * invAlpha), 255);
            }
            // Don't modify alpha channel
            pixIndex++;
        } else {
            pixIndex += CPColorBmp.BYTES_PER_PIXEL;
        }
    }
}

function boxBlurLine(src, dst, len, radius) {
    var totalPixels = 0,
        totalChannels = [0, 0, 0, 0],
        pixIndex,
        dstIndex;

    pixIndex = 0;
    for (var i = 0; i < radius && i < len; i++) {
        for (var j = 0; j < CPColorBmp.BYTES_PER_PIXEL; j++) {
            totalChannels[j] += src[pixIndex++];
        }
        totalPixels++;
    }

    dstIndex = 0;
    for (var i = 0; i < len; i++) {
        // New pixel joins the window at the right
        if (i + radius < len) {
            pixIndex = (i + radius) * CPColorBmp.BYTES_PER_PIXEL;

            for (var j = 0; j < CPColorBmp.BYTES_PER_PIXEL; j++) {
                totalChannels[j] += src[pixIndex++];
            }
            totalPixels++;
        }

        for (var j = 0; j < CPColorBmp.BYTES_PER_PIXEL; j++) {
            dst[dstIndex++] = Math.round(totalChannels[j] / totalPixels);
        }

        // Old pixel leaves the window at the left
        if (i - radius >= 0) {
            pixIndex = (i - radius) * CPColorBmp.BYTES_PER_PIXEL;

            for (var j = 0; j < CPColorBmp.BYTES_PER_PIXEL; j++) {
                totalChannels[j] -= src[pixIndex++];
            }
            totalPixels--;
        }
    }
}

/**
 * Copy a column of pixels in the bitmap to the given R,G,B,A buffer.
 * 
 * @param x X-coordinate of column
 * @param y Y-coordinate of top of column to copy
 * @param len Number of pixels to copy
 * @param buffer R,G,B,A array
 */
CPColorBmp.prototype.copyPixelColumnToArray = function (x, y, len, buffer) {
    var yJump = (this.width - 1) * CPColorBmp.BYTES_PER_PIXEL,
        dstOffset = 0,
        srcOffset = this.offsetOfPixel(x, y);

    for (var i = 0; i < len; i++) {
        for (var j = 0; j < CPColorBmp.BYTES_PER_PIXEL; j++) {
            buffer[dstOffset++] = this.data[srcOffset++];
        }

        srcOffset += yJump;
    }
};

/**
 * Copy the pixels from the given R,G,B,A buffer to a column of pixels in the bitmap.
 * 
 * @param x X-coordinate of column
 * @param y Y-coordinate of top of column to copy
 * @param len Number of pixels to copy
 * @param buffer R,G,B,A array to copy from
 */
CPColorBmp.prototype.copyArrayToPixelColumn = function (x, y, len, buffer) {
    var yJump = (this.width - 1) * CPColorBmp.BYTES_PER_PIXEL,
        srcOffset = 0,
        dstOffset = this.offsetOfPixel(x, y);

    for (var i = 0; i < len; i++) {
        for (var j = 0; j < CPColorBmp.BYTES_PER_PIXEL; j++) {
            this.data[dstOffset++] = buffer[srcOffset++];
        }

        dstOffset += yJump;
    }
};

CPColorBmp.prototype.boxBlur = function (rect, radiusX, radiusY) {
    rect = this.getBounds().clip(rect);

    var rectWidth = rect.getWidth(),
        rectWidthBytes = rectWidth * CPColorBmp.BYTES_PER_PIXEL,
        rectHeight = rect.getHeight(),
        rectLength = Math.max(rectWidth, rectHeight),
        src = new Uint8Array(rectLength * CPColorBmp.BYTES_PER_PIXEL),
        dst = new Uint8Array(rectLength * CPColorBmp.BYTES_PER_PIXEL);

    for (var y = rect.top; y < rect.bottom; y++) {
        var pixOffset = this.offsetOfPixel(rect.left, y);

        for (var x = 0; x < rectWidthBytes; x++) {
            src[x] = this.data[pixOffset++];
        }

        multiplyAlpha(src, rectWidth);
        boxBlurLine(src, dst, rectWidth, radiusX);

        pixOffset = this.offsetOfPixel(rect.left, y);

        for (var x = 0; x < rectWidthBytes; x++) {
            this.data[pixOffset++] = dst[x];
        }
    }

    for (var x = rect.left; x < rect.right; x++) {
        this.copyPixelColumnToArray(x, rect.top, rectHeight, src);

        boxBlurLine(src, dst, rectHeight, radiusY);
        separateAlpha(dst, rectHeight);

        this.copyArrayToPixelColumn(x, rect.top, rectHeight, dst);
    }
};

CPColorBmp.prototype.offsetOfPixel = function (x, y) {
    return (y * this.width + x) * CPColorBmp.BYTES_PER_PIXEL | 0;
};

CPColorBmp.prototype.getMemorySize = function () {
    return this.data.length;
};

// Load from a loaded HTML Image object
CPColorBmp.prototype.loadFromImage = function (image) {
    var imageCanvas = document.createElement("canvas"),
        imageContext = imageCanvas.getContext("2d");

    imageCanvas.width = image.width;
    imageCanvas.height = image.height;

    imageContext.globalCompositeOperation = "copy";
    imageContext.drawImage(image, 0, 0);

    this.imageData = imageContext.getImageData(0, 0, this.width, this.height);
    this.data = this.imageData.data;
};
module.exports = exports["default"];

},{"../util/CPRect":49,"./CPBitmap":3}],10:[function(require,module,exports){
/*
    ChickenPaint
    
    ChickenPaint is a translation of ChibiPaint from Java to JavaScript
    by Nicholas Sherlock / Chicken Smoothie.
    
    ChibiPaint is Copyright (c) 2006-2008 Marc Schefer

    ChickenPaint is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    ChickenPaint is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with ChickenPaint. If not, see <http://www.gnu.org/licenses/>.
*/

"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports["default"] = CPGreyBmp;

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

var _CPBitmap = require("./CPBitmap");

var _CPBitmap2 = _interopRequireDefault(_CPBitmap);

function CPGreyBmp(width, height, bitDepth) {

    _CPBitmap2["default"].call(this, width, height);

    this.bitDepth = bitDepth;

    switch (bitDepth) {
        case 32:
            this.data = new Uint32Array(width * height);
            break;
        case 16:
            this.data = new Uint16Array(width * height);
            break;
        case 8:
        default:
            this.data = new Uint8Array(width * height);
    }

    this.clone = function () {
        var result = new CPGreyBmp(this.width, this.height, this.bitDepth);

        result.data.set(this.data);

        return result;
    };

    this.clearAll = function (value) {
        for (var i = 0; i < this.data.length; i++) {
            this.data[i] = value;
        }
    };

    this.clearRect = function (rect, value) {
        var rect = this.getBounds().clip(rect),
            yStride = this.width - rect.getWidth(),
            pixIndex = this.offsetOfPixel(rect.left, rect.top);

        for (var y = rect.top; y < rect.bottom; y++, pixIndex += yStride) {
            for (var x = rect.left; x < rect.right; x++, pixIndex++) {
                this.data[pixIndex] = value;
            }
        }
    };

    this.mirrorHorizontally = function () {
        var newData = new Uint8Array(width * height);

        for (var y = 0; y < height; y++) {
            for (var x = 0; x < width; x++) {
                newData[y * width + x] = this.data[y * width + width - x - 1];
            }
        }

        this.data = newData;
    };

    this.applyLUT = function (lut) {
        for (var i = 0; i < this.data.length; i++) {
            this.data[i] = lut.table[this.data[i]];
        }
    };

    this.toCanvas = function () {
        var imageData = this.toImageData(),
            canvas = document.createElement("canvas"),
            context = canvas.getContext("2d");

        canvas.width = this.width;
        canvas.height = this.height;

        context.putImageData(imageData, 0, 0);

        return canvas;
    };

    this.toImageData = function () {
        var canvas = document.createElement("canvas"),
            context = canvas.getContext("2d"),
            imageData = context.createImageData(this.width, this.height),
            srcIndex = 0,
            dstIndex = 0;

        for (var y = 0; y < this.height; y++) {
            for (var x = 0; x < this.width; x++) {
                imageData.data[dstIndex++] = this.data[srcIndex];
                imageData.data[dstIndex++] = this.data[srcIndex];
                imageData.data[dstIndex++] = this.data[srcIndex];
                imageData.data[dstIndex++] = 0xFF;
                srcIndex++;
            }
        }

        return imageData;
    };
}

CPGreyBmp.prototype.offsetOfPixel = function (x, y) {
    return y * this.width + x;
};
module.exports = exports["default"];

},{"./CPBitmap":3}],11:[function(require,module,exports){
/*
    ChickenPaint
    
    ChickenPaint is a translation of ChibiPaint from Java to JavaScript
    by Nicholas Sherlock / Chicken Smoothie.
    
    ChibiPaint is Copyright (c) 2006-2008 Marc Schefer

    ChickenPaint is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    ChickenPaint is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with ChickenPaint. If not, see <http://www.gnu.org/licenses/>.
*/

'use strict';

Object.defineProperty(exports, '__esModule', {
    value: true
});
exports['default'] = CPLayer;

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }

var _CPColorBmp = require('./CPColorBmp');

var _CPColorBmp2 = _interopRequireDefault(_CPColorBmp);

var _CPBlend = require('./CPBlend');

var _CPBlend2 = _interopRequireDefault(_CPBlend);

/**
 * Note layer is not cleared to any specific values upon initial creation, use clearAll().
 */

function CPLayer(width, height, name) {
    // Super-constructor
    _CPColorBmp2['default'].call(this, width, height);

    this.name = name || "";

    this.alpha = 100;
    this.visible = true;
    this.blendMode = CPLayer.LM_NORMAL;
}

CPLayer.prototype = Object.create(_CPColorBmp2['default'].prototype);
CPLayer.prototype.constructor = CPLayer;

var BYTES_PER_PIXEL = 4,
    RED_BYTE_OFFSET = 0,
    GREEN_BYTE_OFFSET = 1,
    BLUE_BYTE_OFFSET = 2,
    ALPHA_BYTE_OFFSET = 3,
    blend = new _CPBlend2['default']();

CPLayer.prototype.fusionWith = function (fusion, rect) {
    if (this.alpha <= 0) {
        return;
    }

    rect = this.getBounds().clip(rect);

    switch (this.blendMode) {
        case CPLayer.LM_NORMAL:
            if (this.alpha >= 100) {
                blend.fusionWithNormalNoAlpha(this, fusion, rect);
            } else {
                blend.fusionWithNormal(this, fusion, rect);
            }
            break;

        case CPLayer.LM_MULTIPLY:
            blend.fusionWithMultiply(this, fusion, rect);
            break;

        case CPLayer.LM_ADD:
            blend.fusionWithAdd(this, fusion, rect);
            break;

        case CPLayer.LM_SCREEN:
            blend.fusionWithScreen(this, fusion, rect);
            break;

        case CPLayer.LM_LIGHTEN:
            blend.fusionWithLighten(this, fusion, rect);
            break;

        case CPLayer.LM_DARKEN:
            blend.fusionWithDarken(this, fusion, rect);
            break;

        case CPLayer.LM_SUBTRACT:
            blend.fusionWithSubtract(this, fusion, rect);
            break;

        case CPLayer.LM_DODGE:
            blend.fusionWithDodge(this, fusion, rect);
            break;

        case CPLayer.LM_BURN:
            blend.fusionWithBurn(this, fusion, rect);
            break;

        case CPLayer.LM_OVERLAY:
            blend.fusionWithOverlay(this, fusion, rect);
            break;

        case CPLayer.LM_HARDLIGHT:
            blend.fusionWithHardLightFullAlpha(this, fusion, rect);
            break;

        case CPLayer.LM_SOFTLIGHT:
            blend.fusionWithSoftLightFullAlpha(this, fusion, rect);
            break;

        case CPLayer.LM_VIVIDLIGHT:
            blend.fusionWithVividLightFullAlpha(this, fusion, rect);
            break;

        case CPLayer.LM_LINEARLIGHT:
            blend.fusionWithLinearLightFullAlpha(this, fusion, rect);
            break;

        case CPLayer.LM_PINLIGHT:
            blend.fusionWithPinLightFullAlpha(this, fusion, rect);
            break;
    }
};

CPLayer.prototype.fusionWithFullAlpha = function (fusion, rect) {
    if (this.alpha <= 0) {
        return;
    }

    rect = this.getBounds().clip(rect);

    switch (this.blendMode) {
        case CPLayer.LM_NORMAL:
            blend.fusionWithNormalFullAlpha(this, fusion, rect);
            break;

        case CPLayer.LM_MULTIPLY:
            blend.fusionWithMultiplyFullAlpha(this, fusion, rect);
            break;

        case CPLayer.LM_ADD:
            blend.fusionWithAddFullAlpha(this, fusion, rect);
            break;

        case CPLayer.LM_SCREEN:
            blend.fusionWithScreenFullAlpha(this, fusion, rect);
            break;

        case CPLayer.LM_LIGHTEN:
            blend.fusionWithLightenFullAlpha(this, fusion, rect);
            break;

        case CPLayer.LM_DARKEN:
            blend.fusionWithDarkenFullAlpha(this, fusion, rect);
            break;

        case CPLayer.LM_SUBTRACT:
            blend.fusionWithSubtractFullAlpha(this, fusion, rect);
            break;

        case CPLayer.LM_DODGE:
            blend.fusionWithDodgeFullAlpha(this, fusion, rect);
            break;

        case CPLayer.LM_BURN:
            blend.fusionWithBurnFullAlpha(this, fusion, rect);
            break;

        case CPLayer.LM_OVERLAY:
            blend.fusionWithOverlayFullAlpha(this, fusion, rect);
            break;

        case CPLayer.LM_HARDLIGHT:
            blend.fusionWithHardLightFullAlpha(this, fusion, rect);
            break;

        case CPLayer.LM_SOFTLIGHT:
            blend.fusionWithSoftLightFullAlpha(this, fusion, rect);
            break;

        case CPLayer.LM_VIVIDLIGHT:
            blend.fusionWithVividLightFullAlpha(this, fusion, rect);
            break;

        case CPLayer.LM_LINEARLIGHT:
            blend.fusionWithLinearLightFullAlpha(this, fusion, rect);
            break;

        case CPLayer.LM_PINLIGHT:
            blend.fusionWithPinLightFullAlpha(this, fusion, rect);
            break;
    }
};

CPLayer.prototype.clearAll = function (color) {
    var a = color >> 24 & 0xFF,
        r = color >> 16 & 0xFF,
        g = color >> 8 & 0xFF,
        b = color & 0xFF;

    for (var i = 0; i < this.width * this.height * BYTES_PER_PIXEL;) {
        this.data[i++] = r;
        this.data[i++] = g;
        this.data[i++] = b;
        this.data[i++] = a;
    }
};

CPLayer.prototype.clearRect = function (rect, color) {
    var a = color >> 24 & 0xFF,
        r = color >> 16 & 0xFF,
        g = color >> 8 & 0xFF,
        b = color & 0xFF;

    var rect = this.getBounds().clip(rect),
        yStride = (this.width - rect.getWidth()) * BYTES_PER_PIXEL,
        pixIndex = this.offsetOfPixel(rect.left, rect.top);

    for (var y = rect.top; y < rect.bottom; y++, pixIndex += yStride) {
        for (var x = rect.left; x < rect.right; x++) {
            this.data[pixIndex++] = r;
            this.data[pixIndex++] = g;
            this.data[pixIndex++] = b;
            this.data[pixIndex++] = a;
        }
    }
};

/**
 * @param rect CPRect
 * @param source CPLayer
 */
CPLayer.prototype.copyRegionHFlip = function (rect, source) {
    rect = this.getBounds().clip(rect);

    for (var y = rect.top; y < rect.bottom; y++) {
        var dstOffset = this.offsetOfPixel(rect.left, y),
            srcOffset = source.offsetOfPixel(rect.right - 1, y);

        for (var x = rect.left; x < rect.right; x++, srcOffset -= _CPColorBmp2['default'].BYTES_PER_PIXEL * 2) {
            for (var i = 0; i < _CPColorBmp2['default'].BYTES_PER_PIXEL; i++) {
                this.data[dstOffset++] = source.data[srcOffset++];
            }
        }
    }
};

/**
 * @param rect CPRect
 * @param source CPLayer
 */
CPLayer.prototype.copyRegionVFlip = function (rect, source) {
    rect = this.getBounds().clip(rect);

    var widthBytes = rect.getWidth() * _CPColorBmp2['default'].BYTES_PER_PIXEL;

    for (var y = rect.top; y < rect.bottom; y++) {
        var dstOffset = this.offsetOfPixel(rect.left, y),
            srcOffset = source.offsetOfPixel(rect.left, rect.bottom - 1 - (y - rect.top));

        for (var x = 0; x < widthBytes; x++) {
            this.data[dstOffset++] = source.data[srcOffset++];
        }
    }
};

/**
 * @param r CPRect
 */
CPLayer.prototype.fillWithNoise = function (rect) {
    rect = this.getBounds().clip(rect);

    var value,
        yStride = (this.width - rect.getWidth()) * _CPColorBmp2['default'].BYTES_PER_PIXEL,
        pixIndex = this.offsetOfPixel(rect.left, rect.top);

    for (var y = rect.top; y < rect.bottom; y++, pixIndex += yStride) {
        for (var x = rect.left; x < rect.right; x++, pixIndex += _CPColorBmp2['default'].BYTES_PER_PIXEL) {
            value = Math.random() * 0x100 | 0;

            this.data[pixIndex + _CPColorBmp2['default'].RED_BYTE_OFFSET] = value;
            this.data[pixIndex + _CPColorBmp2['default'].GREEN_BYTE_OFFSET] = value;
            this.data[pixIndex + _CPColorBmp2['default'].BLUE_BYTE_OFFSET] = value;
            this.data[pixIndex + _CPColorBmp2['default'].ALPHA_BYTE_OFFSET] = 0xFF;
        }
    }
};

/**
 * Replace the pixels in the given rect with the given horizontal gradient.
 *
 * @param rect CPRect
 * @param fromX int
 * @param toX int
 * @param gradientPoints int[]
 */
CPLayer.prototype.gradientHorzReplace = function (rect, fromX, toX, gradientPoints) {
    var fromColor = {
        r: gradientPoints[0] >> 16 & 0xFF,
        g: gradientPoints[0] >> 8 & 0xFF,
        b: gradientPoints[0] & 0xFF,
        a: gradientPoints[0] >> 24 & 0xFF
    },
        toColor = {
        r: gradientPoints[1] >> 16 & 0xFF,
        g: gradientPoints[1] >> 8 & 0xFF,
        b: gradientPoints[1] & 0xFF,
        a: gradientPoints[1] >> 24 & 0xFF
    },
        yStride = (this.width - rect.getWidth()) * _CPColorBmp2['default'].BYTES_PER_PIXEL,
        pixIndex = this.offsetOfPixel(rect.left, rect.top) | 0,
        h = rect.bottom - rect.top | 0;

    if (toX < fromX) {
        var temp = toX;
        toX = fromX;
        fromX = temp;

        temp = fromColor;
        fromColor = toColor;
        toColor = temp;
    }

    var gradientRange = toX - fromX | 0,
        rStep = (toColor.r - fromColor.r) / gradientRange,
        gStep = (toColor.g - fromColor.g) / gradientRange,
        bStep = (toColor.b - fromColor.b) / gradientRange,
        aStep = (toColor.a - fromColor.a) / gradientRange,
        jump = Math.max(rect.left - fromX, 0);

    for (var y = 0; y < h; y++, pixIndex += yStride) {
        // The solid color section before the gradient
        var x = rect.left;

        for (var xEnd = Math.min(fromX, rect.right) | 0; x < xEnd; x++, pixIndex += _CPColorBmp2['default'].BYTES_PER_PIXEL) {
            this.data[pixIndex + _CPColorBmp2['default'].RED_BYTE_OFFSET] = fromColor.r;
            this.data[pixIndex + _CPColorBmp2['default'].GREEN_BYTE_OFFSET] = fromColor.g;
            this.data[pixIndex + _CPColorBmp2['default'].BLUE_BYTE_OFFSET] = fromColor.b;
            this.data[pixIndex + _CPColorBmp2['default'].ALPHA_BYTE_OFFSET] = fromColor.a;
        }

        // In the gradient
        var r = fromColor.r + rStep * jump,
            g = fromColor.g + gStep * jump,
            b = fromColor.b + bStep * jump,
            a = fromColor.a + aStep * jump;

        for (xEnd = Math.min(toX, rect.right) | 0; x < xEnd; x++, pixIndex += _CPColorBmp2['default'].BYTES_PER_PIXEL) {
            this.data[pixIndex + _CPColorBmp2['default'].RED_BYTE_OFFSET] = r;
            this.data[pixIndex + _CPColorBmp2['default'].GREEN_BYTE_OFFSET] = g;
            this.data[pixIndex + _CPColorBmp2['default'].BLUE_BYTE_OFFSET] = b;
            this.data[pixIndex + _CPColorBmp2['default'].ALPHA_BYTE_OFFSET] = a;

            r += rStep;
            g += gStep;
            b += bStep;
            a += aStep;
        }

        // The section after the end of the gradient
        for (; x < rect.right; x++, pixIndex += _CPColorBmp2['default'].BYTES_PER_PIXEL) {
            this.data[pixIndex + _CPColorBmp2['default'].RED_BYTE_OFFSET] = toColor.r;
            this.data[pixIndex + _CPColorBmp2['default'].GREEN_BYTE_OFFSET] = toColor.g;
            this.data[pixIndex + _CPColorBmp2['default'].BLUE_BYTE_OFFSET] = toColor.b;
            this.data[pixIndex + _CPColorBmp2['default'].ALPHA_BYTE_OFFSET] = toColor.a;
        }
    }
};

/**
 * Replace the pixels in the given rect with the given vertical gradient.
 *
 * @param rect CPRect
 * @param fromY int
 * @param toY int
 * @param gradientPoints int[]
 */
CPLayer.prototype.gradientVertReplace = function (rect, fromY, toY, gradientPoints) {
    var fromColor = {
        r: gradientPoints[0] >> 16 & 0xFF,
        g: gradientPoints[0] >> 8 & 0xFF,
        b: gradientPoints[0] & 0xFF,
        a: gradientPoints[0] >> 24 & 0xFF
    },
        toColor = {
        r: gradientPoints[1] >> 16 & 0xFF,
        g: gradientPoints[1] >> 8 & 0xFF,
        b: gradientPoints[1] & 0xFF,
        a: gradientPoints[1] >> 24 & 0xFF
    },
        yStride = (this.width - rect.getWidth()) * _CPColorBmp2['default'].BYTES_PER_PIXEL,
        pixIndex = this.offsetOfPixel(rect.left, rect.top) | 0,
        w = rect.right - rect.left | 0;

    if (toY < fromY) {
        var temp = toY;
        toY = fromY;
        fromY = temp;

        temp = fromColor;
        fromColor = toColor;
        toColor = temp;
    }

    var y = rect.top;

    // The solid color section before the start of the gradient
    for (var yEnd = Math.min(rect.bottom, fromY) | 0; y < yEnd; y++, pixIndex += yStride) {
        for (var x = 0; x < w; x++, pixIndex += _CPColorBmp2['default'].BYTES_PER_PIXEL) {
            this.data[pixIndex + _CPColorBmp2['default'].RED_BYTE_OFFSET] = fromColor.r;
            this.data[pixIndex + _CPColorBmp2['default'].GREEN_BYTE_OFFSET] = fromColor.g;
            this.data[pixIndex + _CPColorBmp2['default'].BLUE_BYTE_OFFSET] = fromColor.b;
            this.data[pixIndex + _CPColorBmp2['default'].ALPHA_BYTE_OFFSET] = fromColor.a;
        }
    }

    // Inside the gradient
    var gradientRange = toY - fromY | 0,
        rStep = (toColor.r - fromColor.r) / gradientRange,
        gStep = (toColor.g - fromColor.g) / gradientRange,
        bStep = (toColor.b - fromColor.b) / gradientRange,
        aStep = (toColor.a - fromColor.a) / gradientRange,
        jump = Math.max(y - fromY, 0),
        r = fromColor.r + rStep * jump,
        g = fromColor.g + gStep * jump,
        b = fromColor.b + bStep * jump,
        a = fromColor.a + aStep * jump;

    for (var yEnd = Math.min(rect.bottom, toY) | 0; y < yEnd; y++, pixIndex += yStride) {
        for (var x = 0; x < w; x++, pixIndex += _CPColorBmp2['default'].BYTES_PER_PIXEL) {
            this.data[pixIndex + _CPColorBmp2['default'].RED_BYTE_OFFSET] = r;
            this.data[pixIndex + _CPColorBmp2['default'].GREEN_BYTE_OFFSET] = g;
            this.data[pixIndex + _CPColorBmp2['default'].BLUE_BYTE_OFFSET] = b;
            this.data[pixIndex + _CPColorBmp2['default'].ALPHA_BYTE_OFFSET] = a;
        }

        r += rStep;
        g += gStep;
        b += bStep;
        a += aStep;
    }

    // The section after the end of the gradient
    for (; y < rect.bottom; y++, pixIndex += yStride) {
        for (var x = 0; x < w; x++, pixIndex += _CPColorBmp2['default'].BYTES_PER_PIXEL) {
            this.data[pixIndex + _CPColorBmp2['default'].RED_BYTE_OFFSET] = toColor.r;
            this.data[pixIndex + _CPColorBmp2['default'].GREEN_BYTE_OFFSET] = toColor.g;
            this.data[pixIndex + _CPColorBmp2['default'].BLUE_BYTE_OFFSET] = toColor.b;
            this.data[pixIndex + _CPColorBmp2['default'].ALPHA_BYTE_OFFSET] = toColor.a;
        }
    }
};

/**
 * Replace the pixels in the given rect with the given gradient.
 *
 * @param rect CPRect
 * @param fromX int
 * @param fromY int
 * @param toX int
 * @param toY int
 * @param gradientPoints int[]
 */
CPLayer.prototype.gradientReplace = function (rect, fromX, fromY, toX, toY, gradientPoints) {
    var yStride = (this.width - rect.getWidth()) * _CPColorBmp2['default'].BYTES_PER_PIXEL,
        pixIndex = this.offsetOfPixel(rect.left, rect.top) | 0,
        w = rect.right - rect.left | 0,
        fromColor = {
        r: gradientPoints[0] >> 16 & 0xFF,
        g: gradientPoints[0] >> 8 & 0xFF,
        b: gradientPoints[0] & 0xFF,
        a: gradientPoints[0] >> 24 & 0xFF
    },
        toColor = {
        r: gradientPoints[1] >> 16 & 0xFF,
        g: gradientPoints[1] >> 8 & 0xFF,
        b: gradientPoints[1] & 0xFF,
        a: gradientPoints[1] >> 24 & 0xFF
    },

    // How many pixels vertically does the gradient sequence complete over (+infinity for horizontal gradients!)
    vertRange = toY - fromY + (toX - fromX) * (toX - fromX) / (toY - fromY),

    // Same for horizontal
    horzRange = toX - fromX + (toY - fromY) * (toY - fromY) / (toX - fromX),
        horzStep = 1 / horzRange;

    for (var y = rect.top; y < rect.bottom; y++, pixIndex += yStride) {
        var
        // The position the row starts at in the gradient [0.0 ... 1.0)
        prop = (rect.left - fromX) / horzRange + (y - fromY) / vertRange;

        for (var x = 0; x < w; x++, pixIndex += _CPColorBmp2['default'].BYTES_PER_PIXEL) {
            var propClamped = Math.min(Math.max(prop, 0.0), 1.0),
                invPropClamped = 1 - propClamped;

            this.data[pixIndex + _CPColorBmp2['default'].RED_BYTE_OFFSET] = fromColor.r * invPropClamped + toColor.r * propClamped;
            this.data[pixIndex + _CPColorBmp2['default'].GREEN_BYTE_OFFSET] = fromColor.g * invPropClamped + toColor.g * propClamped;
            this.data[pixIndex + _CPColorBmp2['default'].BLUE_BYTE_OFFSET] = fromColor.b * invPropClamped + toColor.b * propClamped;
            this.data[pixIndex + _CPColorBmp2['default'].ALPHA_BYTE_OFFSET] = fromColor.a * invPropClamped + toColor.a * propClamped;

            prop += horzStep;
        }
    }
};

/**
 * Alpha blend the given gradient onto the pixels in the given rect.
 *
 * @param rect CPRect
 * @param fromX int
 * @param fromY int
 * @param toX int
 * @param toY int
 * @param gradientPoints int[]
 */
CPLayer.prototype.gradientAlpha = function (rect, fromX, fromY, toX, toY, gradientPoints) {
    var yStride = (this.width - rect.getWidth()) * _CPColorBmp2['default'].BYTES_PER_PIXEL,
        pixIndex = this.offsetOfPixel(rect.left, rect.top) | 0,
        w = rect.right - rect.left | 0,
        fromColor = {
        r: gradientPoints[0] >> 16 & 0xFF,
        g: gradientPoints[0] >> 8 & 0xFF,
        b: gradientPoints[0] & 0xFF,
        a: gradientPoints[0] >> 24 & 0xFF
    },
        toColor = {
        r: gradientPoints[1] >> 16 & 0xFF,
        g: gradientPoints[1] >> 8 & 0xFF,
        b: gradientPoints[1] & 0xFF,
        a: gradientPoints[1] >> 24 & 0xFF
    },

    // How many pixels vertically does the gradient sequence complete over (+infinity for horizontal gradients!)
    vertRange = toY - fromY + (toX - fromX) * (toX - fromX) / (toY - fromY),

    // Same for horizontal
    horzRange = toX - fromX + (toY - fromY) * (toY - fromY) / (toX - fromX),
        horzStep = 1 / horzRange;

    for (var y = rect.top; y < rect.bottom; y++, pixIndex += yStride) {
        var
        // The position the row starts at in the gradient [0.0 ... 1.0)
        prop = (rect.left - fromX) / horzRange + (y - fromY) / vertRange;

        for (var x = 0; x < w; x++, pixIndex += _CPColorBmp2['default'].BYTES_PER_PIXEL) {
            var propClamped = Math.min(Math.max(prop, 0.0), 1.0),
                invPropClamped = 1 - propClamped,

            // The gradient color to draw
            r = fromColor.r * invPropClamped + toColor.r * propClamped,
                g = fromColor.g * invPropClamped + toColor.g * propClamped,
                b = fromColor.b * invPropClamped + toColor.b * propClamped,
                a = fromColor.a * invPropClamped + toColor.a * propClamped,
                alpha2 = this.data[pixIndex + ALPHA_BYTE_OFFSET],
                newAlpha = a + alpha2 - a * alpha2 / 255 | 0;

            if (newAlpha > 0) {
                var realAlpha = a * 255 / newAlpha | 0,
                    invAlpha = 255 - realAlpha;

                this.data[pixIndex + _CPColorBmp2['default'].RED_BYTE_OFFSET] = (r * realAlpha + this.data[pixIndex + _CPColorBmp2['default'].RED_BYTE_OFFSET] * invAlpha) / 255 | 0;
                this.data[pixIndex + _CPColorBmp2['default'].GREEN_BYTE_OFFSET] = (g * realAlpha + this.data[pixIndex + _CPColorBmp2['default'].GREEN_BYTE_OFFSET] * invAlpha) / 255 | 0;
                this.data[pixIndex + _CPColorBmp2['default'].BLUE_BYTE_OFFSET] = (b * realAlpha + this.data[pixIndex + _CPColorBmp2['default'].BLUE_BYTE_OFFSET] * invAlpha) / 255 | 0;
                this.data[pixIndex + _CPColorBmp2['default'].ALPHA_BYTE_OFFSET] = newAlpha;
            }

            prop += horzStep;
        }
    }
};

/**
 * Draw a gradient which begins at fromX, fromY and ends at toX, toY, clipped to the given rect, on top of the
 * pixels in the layer.
 *
 * @param gradientPoints Array with gradient colors (ARGB integers)
 * @param rect CPRect
 * @param replace Set to true to replace the pixels in the layer rather than blending the gradient on top of them.
 */
CPLayer.prototype.gradient = function (rect, fromX, fromY, toX, toY, gradientPoints, replace) {
    rect = this.getBounds().clip(rect);

    // Degenerate case
    if (fromX == toX && fromY == toY) {
        return;
    }

    // Opaque blend if possible
    if (replace || gradientPoints[0] >>> 24 == 255 && gradientPoints[1] >>> 24 == 255) {
        if (fromX == toX) {
            this.gradientVertReplace(rect, fromY, toY, gradientPoints);
        } else if (fromY == toY) {
            this.gradientHorzReplace(rect, fromX, toX, gradientPoints);
        } else {
            this.gradientReplace(rect, fromX, fromY, toX, toY, gradientPoints);
        }
    } else {
        this.gradientAlpha(rect, fromX, fromY, toX, toY, gradientPoints);
    }
};

/**
 * @param r CPRect
 */
CPLayer.prototype.fillWithColorNoise = function (rect) {
    rect = this.getBounds().clip(rect);

    var value,
        yStride = (this.width - rect.getWidth()) * _CPColorBmp2['default'].BYTES_PER_PIXEL,
        pixIndex = this.offsetOfPixel(rect.left, rect.top);

    for (var y = rect.top; y < rect.bottom; y++, pixIndex += yStride) {
        for (var x = rect.left; x < rect.right; x++, pixIndex += _CPColorBmp2['default'].BYTES_PER_PIXEL) {
            value = Math.random() * 0x1000000 | 0;

            this.data[pixIndex + _CPColorBmp2['default'].RED_BYTE_OFFSET] = value >> 16 & 0xFF;
            this.data[pixIndex + _CPColorBmp2['default'].GREEN_BYTE_OFFSET] = value >> 8 & 0xFF;
            this.data[pixIndex + _CPColorBmp2['default'].BLUE_BYTE_OFFSET] = value & 0xFF;
            this.data[pixIndex + _CPColorBmp2['default'].ALPHA_BYTE_OFFSET] = 0xFF;
        }
    }
};

/**
 * @param r CPRect
 */
CPLayer.prototype.invert = function (rect) {
    rect = this.getBounds().clip(rect);

    var yStride = (this.width - rect.getWidth()) * _CPColorBmp2['default'].BYTES_PER_PIXEL,
        pixIndex = this.offsetOfPixel(rect.left, rect.top);

    for (var y = rect.top; y < rect.bottom; y++, pixIndex += yStride) {
        for (var x = rect.left; x < rect.right; x++, pixIndex += _CPColorBmp2['default'].BYTES_PER_PIXEL) {
            this.data[pixIndex + _CPColorBmp2['default'].RED_BYTE_OFFSET] ^= 0xFF;
            this.data[pixIndex + _CPColorBmp2['default'].GREEN_BYTE_OFFSET] ^= 0xFF;
            this.data[pixIndex + _CPColorBmp2['default'].BLUE_BYTE_OFFSET] ^= 0xFF;
        }
    }
};

CPLayer.prototype.getAlpha = function () {
    return this.alpha;
};

CPLayer.prototype.getBlendMode = function () {
    return this.blendMode;
};

CPLayer.prototype.copyFrom = function (layer) {
    this.name = layer.name;
    this.blendMode = layer.blendMode;
    this.alpha = layer.alpha;
    this.visible = layer.visible;

    this.copyDataFrom(layer);
};

// Do we have any non-opaque pixels in the entire layer?
CPLayer.prototype.hasAlpha = function () {
    if (this.alpha != 100) {
        return true;
    }

    var pixIndex = ALPHA_BYTE_OFFSET;

    for (var y = 0; y < height; y++) {
        var alphaAnded = 0xFF;

        for (var x = 0; x < this.width; x++, pixIndex += BYTES_PER_PIXEL) {
            alphaAnded &= this.data[pixIndex];
        }

        // Only check once per row in order to reduce branching in the inner loop
        if (alphaAnded != 0xFF) {
            return true;
        }
    }

    return false;
};

// Do we have any semi-transparent pixels in the given rectangle?
CPLayer.prototype.hasAlphaInRect = function (rect) {
    if (this.alpha != 100) {
        return true;
    }

    rect = this.getBounds().clip(rect);

    var yStride = (this.width - rect.getWidth()) * BYTES_PER_PIXEL,
        pixIndex = this.offsetOfPixel(rect.left, rect.top) + ALPHA_BYTE_OFFSET;

    for (var y = rect.top; y < rect.bottom; y++, pixIndex += yStride) {
        var alphaAnded = 0xFF;

        for (var x = rect.left; x < rect.right; x++, pixIndex += BYTES_PER_PIXEL) {
            alphaAnded &= this.data[pixIndex];
        }

        // Only check once per row in order to reduce branching in the inner loop
        if (alphaAnded != 0xFF) {
            return true;
        }
    }

    return false;
};

// Return the canvas ImageData that backs this layer
CPLayer.prototype.getImageData = function () {
    return this.imageData;
};

CPLayer.LM_NORMAL = 0;
CPLayer.LM_MULTIPLY = 1;
CPLayer.LM_ADD = 2;
CPLayer.LM_SCREEN = 3;
CPLayer.LM_LIGHTEN = 4;
CPLayer.LM_DARKEN = 5;
CPLayer.LM_SUBTRACT = 6;
CPLayer.LM_DODGE = 7;
CPLayer.LM_BURN = 8;
CPLayer.LM_OVERLAY = 9;
CPLayer.LM_HARDLIGHT = 10;
CPLayer.LM_SOFTLIGHT = 11;
CPLayer.LM_VIVIDLIGHT = 12;
CPLayer.LM_LINEARLIGHT = 13;
CPLayer.LM_PINLIGHT = 14;

CPLayer.prototype.makeLookUpTables = function () {
    // V - V^2 table
    CPLayer.prototype.softLightLUTSquare = new Array(256);

    for (var i = 0; i < 256; i++) {
        var v = i / 255.;

        CPLayer.prototype.softLightLUTSquare[i] = (v - v * v) * 255. | 0;
    }

    // sqrt(V) - V table
    CPLayer.prototype.softLightLUTSquareRoot = new Array(256);
    for (var i = 0; i < 256; i++) {
        var v = i / 255.;

        CPLayer.prototype.softLightLUTSquareRoot[i] = (Math.sqrt(v) - v) * 255. | 0;
    }
};

CPLayer.prototype.setAlpha = function (alpha) {
    this.alpha = alpha;
};

CPLayer.prototype.setBlendMode = function (blendMode) {
    this.blendMode = blendMode;
};

CPLayer.prototype.getAlpha = function () {
    return this.alpha;
};

CPLayer.prototype.getBlendMode = function () {
    return this.blendMode;
};

/**
 * Returns a new canvas with a rotated version of the given canvas.
 * 
 * Rotation is [0..3] and selects a multiple of 90 degrees of clockwise rotation to be applied.
 */
function getRotatedCanvas(canvas, rotation) {
    rotation = rotation % 4;

    if (rotation == 0) {
        return canvas;
    }

    var rotatedCanvas = document.createElement("canvas"),
        rotatedCanvasContext = rotatedCanvas.getContext("2d");

    if (rotation % 2 == 0) {
        rotatedCanvas.width = canvas.width;
        rotatedCanvas.height = canvas.height;
    } else {
        rotatedCanvas.width = canvas.height;
        rotatedCanvas.height = canvas.width;
    }

    switch (rotation) {
        case 1:
            // 90 degree clockwise:
            rotatedCanvasContext.rotate(Math.PI / 2);
            rotatedCanvasContext.drawImage(canvas, 0, -canvas.height);
            break;
        case 2:
            rotatedCanvasContext.rotate(Math.PI);
            rotatedCanvasContext.drawImage(canvas, -canvas.width, -canvas.height);
            break;
        case 3:
            // 90 degree counter-clockwise:
            rotatedCanvasContext.rotate(-Math.PI / 2);
            rotatedCanvasContext.drawImage(canvas, -canvas.width, 0);
            break;
        case 0:
        default:
            return canvas;
    }

    return rotatedCanvas;
}

function decodeBase64PNGDataURL(url) {
    if (typeof url !== "string" || !url.match(/^data:image\/png;base64,/i)) {
        return false;
    }

    return window.atob(url.substring("data:image\/png;base64,".length));
}

/**
 * Get the layer as a PNG image.
 * 
 * Rotation is [0..3] and selects a multiple of 90 degrees of clockwise rotation to be applied, or 0 to leave
 * unrotated.
 */
CPLayer.prototype.getAsPNG = function (rotation) {
    var canvas = document.createElement("canvas"),
        canvasContext = canvas.getContext("2d");

    // First draw our image data onto a canvas...
    canvas.width = this.imageData.width;
    canvas.height = this.imageData.height;

    canvasContext.putImageData(this.imageData, 0, 0);

    // Rotate it if needed
    canvas = getRotatedCanvas(canvas, rotation || 0);

    return decodeBase64PNGDataURL(canvas.toDataURL('image/png'));
};

CPLayer.prototype.makeLookUpTables();
module.exports = exports['default'];

},{"./CPBlend":4,"./CPColorBmp":9}],12:[function(require,module,exports){
/*
    ChickenPaint
    
    ChickenPaint is a translation of ChibiPaint from Java to JavaScript
    by Nicholas Sherlock / Chicken Smoothie.
    
    ChibiPaint is Copyright (c) 2006-2008 Marc Schefer

    ChickenPaint is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    ChickenPaint is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with ChickenPaint. If not, see <http://www.gnu.org/licenses/>.
*/

"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports["default"] = CPLookUpTable;

function CPLookUpTable() {
    this.table = new Uint8Array(256);

    this.loadIdentity = function () {
        for (var i = 0; i < 256; i++) {
            this.table[i] = i;
        }
    };

    this.loadBrightnessContrast = function (brightness, contrast) {
        var slope = contrast > 0.0 ? 1.0 / (1.0001 - contrast) : 1.0 + contrast,
            offset = 0.5 - slope * 0.5 + brightness;

        for (var i = 0; i < 256; i++) {
            var x = i / 255.0,
                y = x * slope + offset;

            this.table[i] = Math.min(255, Math.max(~ ~(y * 255.0), 0));
        }
    };

    this.invert = function () {
        for (var i = 0; i < 256; i++) {
            this.table[i] = 255 - this.table[i];
        }
    };
}

module.exports = exports["default"];

},{}],13:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports["default"] = CPResourceLoader;

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

var _CPChibiFile = require("./CPChibiFile");

var _CPChibiFile2 = _interopRequireDefault(_CPChibiFile);

var _CPArtwork = require("./CPArtwork");

var _CPArtwork2 = _interopRequireDefault(_CPArtwork);

var _CPLayer = require("./CPLayer");

var _CPLayer2 = _interopRequireDefault(_CPLayer);

var _utilAdobeColorTable = require("../util/AdobeColorTable");

var _utilAdobeColorTable2 = _interopRequireDefault(_utilAdobeColorTable);

/**
 * Loads ChickenPaint resources from a remote server and emits progress events.
 *
 * loadImageURL - URL of PNG/JPEG image to load for editing (optional)
 * loadChibiFileURL - URL of .chi file to load for editing (optional). Used in preference to loadImage.
 * loadSwatchesURL - URL of an .aco palette to load (optional)
 */

function CPResourceLoader(options) {
    var resources = [],
        completed = {},
        that = this;

    if (options.loadChibiFileUrl && ("" + options.loadChibiFileUrl).length > 0) {
        resources.push({
            url: options.loadChibiFileUrl,
            friendly: "drawing layers",
            name: "layers",
            required: true
        });
    } else {
        if (options.loadImageUrl && ("" + options.loadImageUrl).length > 0) {
            resources.push({
                url: options.loadImageUrl,
                friendly: "drawing",
                name: "flat",
                required: true
            });
        }
    }

    if (options.loadSwatchesUrl) {
        resources.push({
            url: options.loadSwatchesUrl,
            friendly: "color swatches",
            name: "swatches",
            required: false,
            noProgress: true // So short that we may as well keep the smoothie drained
        });
    }

    function decodeResource(resource, resourceData) {
        return new Promise(function (resolve, reject) {
            switch (resource.name) {
                case "flat":
                    var blob = new Blob([resourceData], { type: "image/png" }),
                        imageUrl = window.URL.createObjectURL(blob);

                    if (imageUrl) {
                        var image = new Image();

                        image.onload = function () {
                            var artwork = new _CPArtwork2["default"](this.width, this.height),
                                layer = new _CPLayer2["default"](this.width, this.height, "Layer 1");

                            layer.loadFromImage(image);
                            artwork.addLayerObject(layer);

                            image = null;
                            window.URL.revokeObjectURL(imageUrl);

                            resolve(artwork);
                        };

                        image.src = imageUrl;
                    } else {
                        resolve(null);
                    }
                    break;
                case "swatches":
                    var reader = new _utilAdobeColorTable2["default"](),
                        colors = reader.read(resourceData);

                    resolve(colors);
                    break;
                case "layers":
                    var reader = new _CPChibiFile2["default"](),
                        artwork = reader.read(resourceData);

                    resolve(artwork);
                    break;
                default:
                    resolve(null);
                    break;
            }
        });
    }

    function reportProgress(resource, progress) {
        if (progress === null) {
            that.emitEvent("loadingProgress", [1.0, "Loading your " + resource.friendly + "..."]);
        } else {
            that.emitEvent("loadingProgress", [progress, "Loading your " + resource.friendly + " (" + Math.round(progress * 100) + "%)..."]);
        }
    }

    this.load = function () {
        if (resources.length == 0) {
            that.emitEvent("loadingComplete", [completed]);
            return;
        }

        var resource = resources.shift(),
            xhr = new XMLHttpRequest();

        xhr.addEventListener("progress", function (evt) {
            var progress;

            if (evt.lengthComputable && !resource.noProgress) {
                progress = evt.loaded / evt.total;
            } else {
                progress = null;
            }

            reportProgress(resource, progress);
        }, false);

        function handleFatal() {
            if (resource.required) {
                that.emitEvent("loadingFailure", ["Failed to load your " + resource.friendly + ", please try again later."]);
            } else {
                // Skip unimportant resources
                that.load();
            }
        }

        xhr.addEventListener("load", function (evt) {
            if (this.status == 200) {
                var response = this.response;

                that.emitEvent("loadingProgress", [1.0, "Starting ChickenPaint..."]);

                // Yield to the DOM to give it a chance to paint the loaded message before we begin decoding
                setTimeout(function () {
                    decodeResource(resource, response).then(function (decoded) {
                        if (decoded) {
                            completed[resource.name] = decoded;

                            // Move on to the next file
                            that.load();
                        } else {
                            that.emitEvent("loadingFailure", ["Failed to read your " + resource.friendly]);
                        }
                    });
                }, 0);
            } else {
                handleFatal();
            }
        }, false);

        xhr.addEventListener("error", handleFatal);

        reportProgress(resource, resource.noProgress ? null : 0.0);

        xhr.open("GET", resource.url, true);

        xhr.responseType = 'arraybuffer';

        xhr.send();
    };
}

CPResourceLoader.prototype = Object.create(EventEmitter.prototype);
CPResourceLoader.prototype.constructor = CPResourceLoader;
module.exports = exports["default"];

},{"../util/AdobeColorTable":43,"./CPArtwork":2,"./CPChibiFile":7,"./CPLayer":11}],14:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports["default"] = CPResourceSaver;

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

var _CPChibiFile = require("./CPChibiFile");

var _CPChibiFile2 = _interopRequireDefault(_CPChibiFile);

var _CPArtwork = require("./CPArtwork");

var _CPArtwork2 = _interopRequireDefault(_CPArtwork);

var _utilAdobeColorTable = require("../util/AdobeColorTable");

var _utilAdobeColorTable2 = _interopRequireDefault(_utilAdobeColorTable);

/**
 * We generally can't do much with binary strings because various methods will try to UTF-8 mangle them.
 * This function converts such a string to a Uint8Array instead.
 */
function binaryStringToByteArray(s) {
    var result = new Uint8Array(s.length);

    for (var i = 0; i < s.length; i++) {
        result[i] = s.charCodeAt(i);
    }

    return result;
}

/**
 * Saves ChickenPaint resources to a remote server or to the disk and emits progress events.
 *
 * Options:
 *     url - URL to send to. If omitted, will save to the disk instead.
 *     artwork - Artwork to send
 *     rotation - Integer [0..3] of the number of 90 degree rotation steps that should be applied to canvas upon opening.
 *     swatches - Array of ARGB integer colors to save as the image swatches (optional)
 */

function CPResourceSaver(options) {
    var that = this,
        cancelled = false;

    options.rotation = options.rotation || 0;

    function reportProgress(progress) {
        if (progress === null) {
            that.emitEvent("savingProgress", [1.0, "Saving your drawing to the server..."]);
        } else {
            that.emitEvent("savingProgress", [progress, "Saving your drawing to the server...  (" + Math.round(progress * 100) + "%)"]);
        }
    }

    function reportFatal(serverMessage) {
        that.emitEvent("savingFailure", [serverMessage]);
    }

    function postDrawing(formData) {
        var xhr = new XMLHttpRequest();

        xhr.upload.addEventListener("progress", function (evt) {
            var progress;

            if (evt.lengthComputable) {
                progress = evt.loaded / evt.total;
            } else {
                progress = null;
            }

            reportProgress(progress);
        }, false);

        xhr.addEventListener("load", function (evt) {
            reportProgress(1.0);

            if (this.status == 200 && /^CHIBIOK/.test(this.response)) {
                that.emitEvent("savingComplete");
            } else {
                reportFatal(this.response);
            }
        }, false);

        xhr.addEventListener("error", function () {
            reportFatal(this.response);
        }, false);

        reportProgress(0);

        xhr.open("POST", options.url, true);

        xhr.responseType = "text";

        xhr.send(formData);
    }

    /**
     * Begin saving the data provided in the constructor. Returns immediately, and fires these events to report the
     * saving progress:
     * 
     * savingProgress(progress) - Progress is [0.0 ... 1.0] and reports how much has uploaded so far, or null if the 
     *                            total progress could not be determined.
     * savingFailure(error)     - When saving fails, along with a string error message to display to the user. 
     * savingComplete()         - When saving completes succesfully
     */
    this.save = function () {
        var flat, flatBlob, swatchesBlob;

        flat = binaryStringToByteArray(options.artwork.getFlatPNG(options.rotation));
        flatBlob = new Blob([flat], { type: "image/png" });
        flat = null; // Don't need this any more

        var serializeLayers;

        if (false) {
            serializeLayers = Promise.resolve(null);
        } else {
            serializeLayers = new _CPChibiFile2["default"]().serialize(options.artwork);
        }

        serializeLayers.then(function (chibiBlob) {
            if (cancelled) {
                that.emitEvent("savingFailure");
                return;
            }

            if (options.swatches) {
                var aco = new _utilAdobeColorTable2["default"]();

                swatchesBlob = new Blob([aco.write(options.swatches)], { type: "application/octet-stream" });
            } else {
                swatchesBlob = null;
            }

            if (options.url) {
                var marker = "This marker ensures the upload wasn't truncated",
                    formData = new FormData();

                formData.append("beginMarker", marker);

                formData.append("picture", flatBlob);
                flatBlob = null;

                if (chibiBlob) {
                    formData.append("chibifile", chibiBlob);
                    chibiBlob = null;

                    // Layers will need to be rotated upon opening
                    formData.append("rotation", "" + options.rotation);
                } else {
                    /*
                     * Because the image is a flat PNG, we rotate it before we saved it and it doesn't need further
                     * rotation upon opening.
                     */
                    formData.append("rotation", "0");
                }

                if (swatchesBlob) {
                    formData.append("swatches", swatchesBlob);
                    swatchesBlob = null;
                }

                formData.append("endMarker", marker);

                postDrawing(formData);
            } else {
                window.saveAs(flatBlob, "oekaki.png");

                if (chibiBlob) {
                    window.saveAs(chibiBlob, "oekaki.chi");
                }
                if (swatchesBlob) {
                    window.saveAs(swatchesBlob, "oekaki.aco");
                }
            }
        });
    };

    this.cancel = function () {
        cancelled = true;
    };
}

CPResourceSaver.prototype = Object.create(EventEmitter.prototype);
CPResourceSaver.prototype.constructor = CPResourceSaver;
module.exports = exports["default"];

},{"../util/AdobeColorTable":43,"./CPArtwork":2,"./CPChibiFile":7}],15:[function(require,module,exports){
/*
    ChickenPaint
    
    ChickenPaint is a translation of ChibiPaint from Java to JavaScript
    by Nicholas Sherlock / Chicken Smoothie.
    
    ChibiPaint is Copyright (c) 2006-2008 Marc Schefer

    ChickenPaint is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    ChickenPaint is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with ChickenPaint. If not, see <http://www.gnu.org/licenses/>.
*/

"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports["default"] = CPUndo;

function CPUndo() {}

CPUndo.prototype.merge = function (undo) {
    return false;
};

CPUndo.prototype.noChange = function () {
    return false;
};

CPUndo.prototype.getMemoryUsed = function (undone, param) {
    return 0;
};
module.exports = exports["default"];

},{}],16:[function(require,module,exports){
/*
    ChickenPaint
    
    ChickenPaint is a translation of ChibiPaint from Java to JavaScript
    by Nicholas Sherlock / Chicken Smoothie.
    
    ChibiPaint is Copyright (c) 2006-2008 Marc Schefer

    ChickenPaint is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    ChickenPaint is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with ChickenPaint. If not, see <http://www.gnu.org/licenses/>.
*/

"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports["default"] = CPAboutDialog;

function CPAboutDialog(parent) {
    var dialog = $("<div class=\"modal fade chickenpaint-about-dialog\" tabindex=\"-1\" role=\"dialog\">\n                <div class=\"modal-dialog\">\n                    <div class=\"modal-content\">\n                        <div class=\"modal-header\">\n                            <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\n                                <span aria-hidden=\"true\">&times;</span>\n                            </button>\n                            <h4 class=\"modal-title\">About ChickenPaint</h4>\n                        </div>\n                        <div class=\"modal-body\">\n                            <a class=\"chickenpaint-on-github\" target=\"_blank\" href=\"https://github.com/thenickdude/chickenpaint\"><span class=\"fa fa-github\"></span> ChickenPaint on GitHub</a>\n                            \n                            <p>\n                                ChickenPaint is a translation of <a href=\"http://www.chibipaint.com/\" target=\"_blank\">ChibiPaint</a>\n                                from Java to JavaScript by Nicholas Sherlock / Chicken Smoothie\n                            </p>\n                            <p>\n                                ChibiPaint is Copyright (c) 2006-2008 Marc Schefer. All Rights Reserved\n                            </p>\n                            <p>\n                                ChickenPaint is free software: you can redistribute it and/or modify\n                                it under the terms of the GNU General Public License as published by\n                                the Free Software Foundation, either version 3 of the License, or\n                                (at your option) any later version.\n                            </p>\n        \n                            <p>\n                                ChickenPaint is distributed in the hope that it will be useful,\n                                but WITHOUT ANY WARRANTY; without even the implied warranty of\n                                MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n                                <a target=\"_blank\" href=\"http://www.gnu.org/licenses/\">GNU General Public License</a> for more details.\n                            </p>\n        \n                            <pre class=\"pre-scrollable chickenpaint-third-party-licenses\">Includes icons from the <a href=\"http://tango.freedesktop.org/\" target=\"_blank\">Tango Desktop Project</a>\n                    \nIncludes the <a target=\"_blank\" href=\"https://github.com/eligrey/FileSaver.js\">FileSaver.js library</a>\n                    \n    FileSaver.js Copyright © 2015 <a target=\"_blank\" href=\"http://eligrey.com/\">Eli Grey</a>\n\n    Permission is hereby granted, free of charge, to any person\n    obtaining a copy of this software and associated documentation\n    files (the \"Software\"), to deal in the Software without\n    restriction, including without limitation the rights to use,\n    copy, modify, merge, publish, distribute, sublicense, and/or\n    sell copies of the Software, and to permit persons to whom the\n    Software is furnished to do so, subject to the following\n    conditions:\n\n    The above copyright notice and this permission notice shall be\n    included in all copies or substantial portions of the Software.\n\n    THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n    EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES\n    OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n    NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT \n    HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,\n    WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n    FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR\n    OTHER DEALINGS IN THE SOFTWARE.\n\nIncludes the <a href=\"http://www.jquery.com/\" target=\"_blank\">JQuery library</a>\n\n    Copyright <a href=\"https://jquery.org/\" target=\"_blank\">jQuery Foundation and other contributors</a>\n    \n    This software consists of voluntary contributions made by many\n    individuals. For exact contribution history, see the revision \n    history available at https://github.com/jquery/jquery\n    \n    The following license applies to all parts of this software \n    except as documented below:\n    \n    Permission is hereby granted, free of charge, to any person \n    obtaining a copy of this software and associated documentation\n    files (the \"Software\"), to deal in the Software without\n    restriction, including without limitation the rights to use, \n    copy, modify, merge, publish, distribute, sublicense, and/or\n    sell copies of the Software, and to permit persons to whom the\n    Software is furnished to do so, subject to the following\n    conditions:\n    \n    The above copyright notice and this permission notice shall be\n    included in all copies or substantial portions of the Software.\n    \n    THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n    EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES\n    OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n    NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n    HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,\n    WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n    FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR\n    OTHER DEALINGS IN THE SOFTWARE.\n\nIncludes the <a target=\"_blank\" href=\"https://github.com/nodeca/pako\">Pako zlib compression library</a>\n\n    Copyright (C) 2014-2015 by Vitaly Puzrin\n    \n    Permission is hereby granted, free of charge, to any person\n    obtaining a copy of this software and associated documentation\n    files (the \"Software\"), to deal in the Software without\n    restriction, including without limitation the rights to use,\n    copy, modify, merge, publish, distribute, sublicense, and/or\n    sell copies of the Software, and to permit persons to whom the\n    Software is furnished to do so, subject to the following\n    conditions:\n\n    The above copyright notice and this permission notice shall be\n    included in all copies or substantial portions of the Software.\n\n    THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n    EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES\n    OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n    NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT \n    HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,\n    WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n    FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR\n    OTHER DEALINGS IN THE SOFTWARE.\n    \nIncludes the <a target=\"_blank\" href=\"https://github.com/madrobby/keymaster\">keymaster.js</a> keyboard library\n    \n    Copyright (c) 2011-2013 Thomas Fuchs\n\n    Permission is hereby granted, free of charge, to any person\n    obtaining a copy of this software and associated documentation\n    files (the \"Software\"), to deal in the Software without\n    restriction, including without limitation the rights to use,\n    copy, modify, merge, publish, distribute, sublicense, and/or\n    sell copies of the Software, and to permit persons to whom the\n    Software is furnished to do so, subject to the following\n    conditions:\n\n    The above copyright notice and this permission notice shall be\n    included in all copies or substantial portions of the Software.\n\n    THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n    EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES\n    OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n    NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT \n    HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,\n    WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n    FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR\n    OTHER DEALINGS IN THE SOFTWARE.\n    \nIncludes the <a target=\"_blank\" href=\"https://github.com/stefanpenner/es6-promise\">es6-promise</a> library\n    \n    Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors\n\n    Permission is hereby granted, free of charge, to any person\n    obtaining a copy of this software and associated documentation\n    files (the \"Software\"), to deal in the Software without\n    restriction, including without limitation the rights to use,\n    copy, modify, merge, publish, distribute, sublicense, and/or\n    sell copies of the Software, and to permit persons to whom the\n    Software is furnished to do so, subject to the following\n    conditions:\n\n    The above copyright notice and this permission notice shall be\n    included in all copies or substantial portions of the Software.\n\n    THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n    EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES\n    OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n    NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT \n    HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,\n    WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n    FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR\n    OTHER DEALINGS IN THE SOFTWARE.\n                    </pre>\n                </div>\n            </div>\n        </div>\n    ");

    // Destroy the modal upon close
    dialog.on("hidden.bs.modal", function (e) {
        dialog.remove();
    });

    dialog.modal({
        show: false
    });

    // Fix the backdrop location in the DOM by reparenting it to the chickenpaint container
    dialog.data("bs.modal").$body = $(parent);

    parent.appendChild(dialog[0]);

    this.show = function () {
        dialog.modal("show");
    };
}

module.exports = exports["default"];

},{}],17:[function(require,module,exports){
/*
    ChickenPaint
    
    ChickenPaint is a translation of ChibiPaint from Java to JavaScript
    by Nicholas Sherlock / Chicken Smoothie.
    
    ChibiPaint is Copyright (c) 2006-2008 Marc Schefer

    ChickenPaint is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    ChickenPaint is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with ChickenPaint. If not, see <http://www.gnu.org/licenses/>.
*/

"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports["default"] = CPBoxBlurDialog;

function CPBoxBlurDialog(parent, controller) {
    var dialog = $("<div class=\"modal fade\" tabindex=\"-1\" role=\"dialog\">\n                <div class=\"modal-dialog\">\n                    <div class=\"modal-content\">\n                        <div class=\"modal-header\">\n                            <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\n                                <span aria-hidden=\"true\">&times;</span>\n                            </button>\n                            <h4 class=\"modal-title\">Box blur</h4>\n                        </div>\n                        <div class=\"modal-body\">\n                            <form>\n                                <div class=\"form-group\">\n                                    <label>Blur amount (pixels)</label>\n                                    <input type=\"text\" class=\"form-control chickenpaint-blur-amount\" value=\"3\">\n                                </div>\n                                <div class=\"form-group\">\n                                    <label>Iterations (1-8, larger gives smoother blur)</label>\n                                    <input type=\"text\" class=\"form-control chickenpaint-blur-iterations\" value=\"1\">\n                                </div>\n                            </form>\n                        </div>\n                        <div class=\"modal-footer\">\n                            <button type=\"button\" class=\"btn btn-default\" data-dismiss=\"modal\">Cancel</button>\n                            <button type=\"button\" class=\"btn btn-primary chickenpaint-apply-box-blur\" data-dismiss=\"modal\">Ok</button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        "),
        blurAmountElem = $(".chickenpaint-blur-amount", dialog),
        blurIterationsElem = $(".chickenpaint-blur-iterations", dialog),
        applyButton = $(".chickenpaint-apply-box-blur", dialog);

    this.show = function () {
        dialog.modal("show");
    };

    applyButton.click(function (e) {
        var blur = Math.max(parseInt(blurAmountElem.val(), 10), 1),
            iterations = Math.min(Math.max(parseInt(blurIterationsElem.val(), 10), 1), 8);

        controller.getArtwork().boxBlur(blur, blur, iterations);
    });

    dialog.modal({
        show: false
    }).on('shown.bs.modal', function () {
        blurAmountElem.focus();
    }).on('keypress', function (e) {
        if (e.keyCode == 13) {
            applyButton.click();
        }
    });

    // Fix the backdrop location in the DOM by reparenting it to the chickenpaint container
    dialog.data("bs.modal").$body = $(parent);

    parent.appendChild(dialog[0]);

    /* TODO
    panel.add(new JLabel("Blur amount:"));
    SpinnerModel blurXSM = new SpinnerNumberModel(3, 1, 100, 1);
    
    panel.add(new JLabel("Iterations:"));
    SpinnerModel iterSM = new SpinnerNumberModel(1, 1, 8, 1);
    */
}

module.exports = exports["default"];

},{}],18:[function(require,module,exports){
/*
    ChickenPaint
    
    ChickenPaint is a translation of ChibiPaint from Java to JavaScript
    by Nicholas Sherlock / Chicken Smoothie.
    
    ChibiPaint is Copyright (c) 2006-2008 Marc Schefer

    ChickenPaint is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    ChickenPaint is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with ChickenPaint. If not, see <http://www.gnu.org/licenses/>.
*/

"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports["default"] = CPBrushPalette;

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

var _ChickenPaint = require("../ChickenPaint");

var _ChickenPaint2 = _interopRequireDefault(_ChickenPaint);

var _CPPalette = require("./CPPalette");

var _CPPalette2 = _interopRequireDefault(_CPPalette);

var _CPCheckbox = require("./CPCheckbox");

var _CPCheckbox2 = _interopRequireDefault(_CPCheckbox);

var _CPColorSwatch = require("./CPColorSwatch");

var _CPColorSwatch2 = _interopRequireDefault(_CPColorSwatch);

var _CPSlider = require("./CPSlider");

var _CPSlider2 = _interopRequireDefault(_CPSlider);

var _CPGUIUtils = require("./CPGUIUtils");

var _engineCPLayer = require("../engine/CPLayer");

var _engineCPLayer2 = _interopRequireDefault(_engineCPLayer);

var _utilCPColor = require("../util/CPColor");

var _utilCPColor2 = _interopRequireDefault(_utilCPColor);

var TIP_NAMES = ["Round Pixelated", "Round Hard Edge", "Round Soft", "Square Pixelated", "Square Hard Edge"],
    BRUSH_SIZES = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 15, 20, 25, 30, 35, 40, 45, 50, 60, 70, 80, 90, 100, 125, 150, 175, 200];

function CPGradientPreview(controller) {
    var that = this,
        w = 150,
        h = 32,
        canvas = document.createElement("canvas"),
        canvasContext = canvas.getContext("2d"),
        checkerboard = (0, _CPGUIUtils.createCheckerboardPattern)(canvasContext),
        image = new _engineCPLayer2["default"](w, h, ""),
        imageCanvas = document.createElement("canvas"),
        imageCanvasContext = imageCanvas.getContext("2d"),
        gradient = controller.getCurGradient();

    function paint() {
        image.gradient(image.getBounds(), 0, 0, image.width, 0, gradient, true);
        imageCanvasContext.putImageData(image.imageData, 0, 0, 0, 0, w, h);

        canvasContext.fillRect(0, 0, canvas.width, canvas.height);
        canvasContext.drawImage(imageCanvas, 0, 0);
    }

    this.getElement = function () {
        return canvas;
    };

    controller.on("gradientChange", function (_gradient) {
        gradient = _gradient;

        paint();
    });

    canvas.width = imageCanvas.width = w;
    canvas.height = imageCanvas.height = h;

    canvas.className = 'chickenpaint-gradient-preview';

    canvasContext.fillStyle = checkerboard;

    paint();
}

function CPBrushPalette(controller) {
    _CPPalette2["default"].call(this, controller, "brush", "Tool options");

    var brushPanel = document.createElement("div"),
        tipCombo = document.createElement("select"),
        alphaCB = new _CPCheckbox2["default"](false, "Control brush opacity with pen pressure"),
        alphaSlider = new _CPSlider2["default"](1, 255),
        sizeCB = new _CPCheckbox2["default"](true, "Control brush size with pen pressure"),
        sizeSlider = new _CPSlider2["default"](1, 200, false, true),
        scatteringCB = new _CPCheckbox2["default"](false, "Control brush scattering with pen pressure"),
        scatteringSlider = new _CPSlider2["default"](0, 1000, false, true),
        resatSlider = new _CPSlider2["default"](0, 100, false, true),
        bleedSlider = new _CPSlider2["default"](0, 100, false, true),
        spacingSlider = new _CPSlider2["default"](0, 100, false, true),
        smoothingSlider = new _CPSlider2["default"](0, 100, false, true),
        brushPreview = new CPBrushPalette.CPBrushPreview(controller),
        gradientPanel = document.createElement("div"),
        gradientPreview = new CPGradientPreview(controller),
        gradientStartSwatch = new _CPColorSwatch2["default"](new _utilCPColor2["default"](controller.getCurGradient()[0] & 0xFFFFFF)),
        gradientEndSwatch = new _CPColorSwatch2["default"](new _utilCPColor2["default"](controller.getCurGradient()[1] & 0xFFFFFF)),
        body = this.getBodyElement();

    function sliderCheckboxGroup(checkbox, slider) {
        var group = document.createElement("div");

        group.className = "chickenpaint-checkbox-slider-group";

        group.appendChild(checkbox.getElement());
        group.appendChild(slider.getElement());

        return group;
    }

    function fillCombobox(combo, optionNames) {
        for (var i = 0; i < optionNames.length; i++) {
            var option = document.createElement("option");

            option.appendChild(document.createTextNode(optionNames[i]));
            option.value = i;

            combo.appendChild(option);
        }
    }

    function buildBrushPanel() {
        alphaSlider.title = function (value) {
            return "Opacity: " + value;
        };

        alphaSlider.on('valueChange', function (value) {
            controller.setAlpha(value);
        });

        sizeSlider.title = function (value) {
            return "Brush size: " + value;
        };

        sizeSlider.on('valueChange', function (value) {
            controller.setBrushSize(value);
        });

        resatSlider.title = function (value) {
            return "Color: " + value + "%";
        };

        resatSlider.on('valueChange', function (value) {
            controller.getBrushInfo().resat = value / 100.0;
            controller.callToolListeners();
        });

        bleedSlider.title = function (value) {
            return "Blend: " + value + "%";
        };

        bleedSlider.on('valueChange', function (value) {
            controller.getBrushInfo().bleed = value / 100.0;
            controller.callToolListeners();
        });

        spacingSlider.title = function (value) {
            return "Spacing: " + value + "%";
        };

        spacingSlider.on('valueChange', function (value) {
            controller.getBrushInfo().spacing = value / 100.0;
            controller.callToolListeners();
        });

        scatteringSlider.title = function (value) {
            return "Scattering: " + value + "%";
        };

        scatteringSlider.on('valueChange', function (value) {
            controller.getBrushInfo().scattering = value / 100.0;
            controller.callToolListeners();
        });

        smoothingSlider.title = function (value) {
            return "Smoothing: " + value + "%";
        };

        smoothingSlider.on('valueChange', function (value) {
            controller.getBrushInfo().smoothing = value / 100.0;
            controller.callToolListeners();
        });

        scatteringCB.on('valueChange', function (state) {
            controller.getBrushInfo().pressureScattering = state;
            controller.callToolListeners();
        });

        alphaCB.on('valueChange', function (state) {
            controller.getBrushInfo().pressureAlpha = state;
            controller.callToolListeners();
        });

        sizeCB.on('valueChange', function (state) {
            controller.getBrushInfo().pressureSize = state;
            controller.callToolListeners();
        });

        tipCombo.addEventListener("change", function (e) {
            controller.getBrushInfo().type = parseInt(tipCombo.value, 10);
        });

        tipCombo.className = 'form-control';
        fillCombobox(tipCombo, TIP_NAMES);

        brushPanel.appendChild(tipCombo);

        brushPanel.appendChild(brushPreview.getElement());

        brushPanel.appendChild(sliderCheckboxGroup(sizeCB, sizeSlider));
        brushPanel.appendChild(sliderCheckboxGroup(alphaCB, alphaSlider));
        brushPanel.appendChild(resatSlider.getElement());
        brushPanel.appendChild(bleedSlider.getElement());
        brushPanel.appendChild(spacingSlider.getElement());
        brushPanel.appendChild(sliderCheckboxGroup(scatteringCB, scatteringSlider));
        brushPanel.appendChild(smoothingSlider.getElement());

        alphaCB.setValue(controller.getBrushInfo().pressureAlpha);
        alphaSlider.setValue(controller.getAlpha());

        sizeCB.setValue(controller.getBrushInfo().pressureSize);
        sizeSlider.setValue(controller.getBrushSize());

        scatteringCB.setValue(controller.getBrushInfo().pressureScattering);
        scatteringSlider.setValue(~ ~(controller.getBrushInfo().scattering * 100));

        tipCombo.value = controller.getBrushInfo().type;

        resatSlider.setValue(~ ~(controller.getBrushInfo().resat * 100));
        bleedSlider.setValue(~ ~(controller.getBrushInfo().bleed * 100));
        spacingSlider.setValue(~ ~(controller.getBrushInfo().spacing * 100));
        smoothingSlider.setValue(~ ~(controller.getBrushInfo().smoothing * 100));
    }

    function updateGradient() {
        var gradient = new Array(2);

        gradient[0] = gradientStartSwatch.getAlpha() << 24 | gradientStartSwatch.getColorRgb();
        gradient[1] = gradientEndSwatch.getAlpha() << 24 | gradientEndSwatch.getColorRgb();

        controller.setCurGradient(gradient);
    }

    function buildGradientPanel() {
        gradientPanel.className = "chickenpaint-gradient-panel";
        gradientPanel.style.display = "none";

        gradientStartSwatch.on("colorChange", updateGradient);
        gradientStartSwatch.on("alphaChange", updateGradient);
        gradientEndSwatch.on("colorChange", updateGradient);
        gradientEndSwatch.on("alphaChange", updateGradient);

        var title, colorsGroup, colorGroup;

        title = document.createElement("p");
        title.innerHTML = "Gradient";

        gradientPanel.appendChild(title);
        gradientPanel.appendChild(gradientPreview.getElement());

        colorsGroup = document.createElement("div");
        colorsGroup.className = "chickenpaint-gradient-colors";

        colorGroup = document.createElement("div");
        colorGroup.className = "chickenpaint-gradient-start-color";

        colorGroup.appendChild(gradientStartSwatch.getElement());

        colorsGroup.appendChild(colorGroup);

        colorGroup = document.createElement("div");
        colorGroup.className = "chickenpaint-gradient-end-color";

        colorGroup.appendChild(gradientEndSwatch.getElement());

        colorsGroup.appendChild(colorGroup);

        gradientPanel.appendChild(colorsGroup);
    }

    buildBrushPanel();
    body.appendChild(brushPanel);

    buildGradientPanel();
    body.appendChild(gradientPanel);

    controller.on('toolChange', function (tool, toolInfo) {
        alphaSlider.setValue(toolInfo.alpha);
        sizeSlider.setValue(toolInfo.size);
        sizeCB.setValue(toolInfo.pressureSize);
        alphaCB.setValue(toolInfo.pressureAlpha);
        tipCombo.value = toolInfo.type;
        scatteringCB.setValue(toolInfo.pressureScattering);

        if (~ ~(toolInfo.resat * 100.0) != resatSlider.value) {
            resatSlider.setValue(~ ~(toolInfo.resat * 100.0));
        }

        if (~ ~(toolInfo.bleed * 100.0) != bleedSlider.value) {
            bleedSlider.setValue(~ ~(toolInfo.bleed * 100.0));
        }

        if (~ ~(toolInfo.spacing * 100.0) != spacingSlider.value) {
            spacingSlider.setValue(~ ~(toolInfo.spacing * 100.0));
        }

        if (~ ~(toolInfo.scattering * 100.0) != scatteringSlider.value) {
            scatteringSlider.setValue(~ ~(toolInfo.scattering * 100.0));
        }

        if (~ ~(toolInfo.smoothing * 100.0) != smoothingSlider.value) {
            smoothingSlider.setValue(~ ~(toolInfo.smoothing * 100.0));
        }
    });

    controller.on('modeChange', function (mode) {
        switch (mode) {
            case _ChickenPaint2["default"].M_GRADIENTFILL:
                brushPanel.style.display = "none";
                gradientPanel.style.display = "block";
                break;
            default:
                brushPanel.style.display = "block";
                gradientPanel.style.display = "none";
                break;
        }
    });

    key("1,2,3,4,5,6,7,8,9,0", function (event, handler) {
        var shortcut = parseInt(handler.shortcut, 10);

        if (shortcut == 0) {
            shortcut = 10;
        }

        controller.setAlpha(Math.round(shortcut / 10 * 255));
    });

    key("{,[", function () {
        var size = controller.getBrushSize();

        for (var i = BRUSH_SIZES.length - 1; i >= 0; i--) {
            if (size > BRUSH_SIZES[i]) {
                controller.setBrushSize(BRUSH_SIZES[i]);
                break;
            }
        }
    });

    key("},]", function () {
        var size = controller.getBrushSize();

        for (var i = 0; i < BRUSH_SIZES.length; i++) {
            if (size < BRUSH_SIZES[i]) {
                controller.setBrushSize(BRUSH_SIZES[i]);
                break;
            }
        }
    });
}

CPBrushPalette.prototype = Object.create(_CPPalette2["default"].prototype);
CPBrushPalette.prototype.constructor = CPBrushPalette;

CPBrushPalette.CPBrushPreview = function (controller) {
    var size = 16,
        canvas = document.createElement("canvas"),
        canvasContext = canvas.getContext("2d"),
        mouseCaptured = false;

    function paint() {
        canvasContext.clearRect(0, 0, canvas.width, canvas.height);

        canvasContext.beginPath();
        canvasContext.arc(canvas.width / 2, canvas.height / 2, size / 2 * window.devicePixelRatio, 0, Math.PI * 2);
        canvasContext.stroke();
    }

    function handleMouseDrag(e) {
        var offset = $(canvas).offset(),
            pt = { x: e.pageX - offset.left, y: e.pageY - offset.top },
            x = pt.x - $(canvas).width() / 2,
            y = pt.y - $(canvas).height() / 2,
            newSize = Math.round(Math.sqrt(x * x + y * y) * 2);

        size = Math.max(1, Math.min(200, newSize));

        paint();
        controller.setBrushSize(size);
    }

    function handleMouseUp(e) {
        if (mouseCaptured) {
            mouseCaptured = false;
            window.removeEventListener('mouseup', handleMouseUp);
            window.removeEventListener('mousemove', handleMouseDrag);
        }
    }

    this.getElement = function () {
        return canvas;
    };

    canvas.addEventListener('mousedown', function (e) {
        if (!mouseCaptured) {
            mouseCaptured = true;

            window.addEventListener('mouseup', handleMouseUp);
            window.addEventListener('mousemove', handleMouseDrag);

            handleMouseDrag(e);
        }
    });

    controller.on("toolChange", function (tool, toolInfo) {
        if (toolInfo.size != size) {
            size = toolInfo.size;
            paint();
        }
    });

    canvas.width = 64;
    canvas.height = 64;

    if (window.devicePixelRatio > 1) {
        canvas.style.width = canvas.width + 'px';
        canvas.style.height = canvas.height + 'px';

        canvas.width = canvas.width * window.devicePixelRatio;
        canvas.height = canvas.height * window.devicePixelRatio;
    }

    canvas.className = 'chickenpaint-brush-preview';

    canvasContext.strokeStyle = 'black';
    canvasContext.lineWidth = 1.0 * window.devicePixelRatio;

    paint();
};
module.exports = exports["default"];

},{"../ChickenPaint":1,"../engine/CPLayer":11,"../util/CPColor":46,"./CPCheckbox":20,"./CPColorSwatch":24,"./CPGUIUtils":25,"./CPPalette":31,"./CPSlider":36}],19:[function(require,module,exports){
/*
    ChickenPaint
    
    ChickenPaint is a translation of ChibiPaint from Java to JavaScript
    by Nicholas Sherlock / Chicken Smoothie.
    
    ChibiPaint is Copyright (c) 2006-2008 Marc Schefer

    ChickenPaint is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    ChickenPaint is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with ChickenPaint. If not, see <http://www.gnu.org/licenses/>.
*/

"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports["default"] = CPCanvas;

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

var _utilCPRect = require("../util/CPRect");

var _utilCPRect2 = _interopRequireDefault(_utilCPRect);

var _utilCPTransform = require("../util/CPTransform");

var _utilCPTransform2 = _interopRequireDefault(_utilCPTransform);

var _utilCPWacomTablet = require("../util/CPWacomTablet");

var _utilCPWacomTablet2 = _interopRequireDefault(_utilCPWacomTablet);

var _utilCPBezier = require("../util/CPBezier");

var _utilCPBezier2 = _interopRequireDefault(_utilCPBezier);

var _engineCPBrushInfo = require("../engine/CPBrushInfo");

var _engineCPBrushInfo2 = _interopRequireDefault(_engineCPBrushInfo);

var _CPGUIUtils = require("./CPGUIUtils");

var _CPScrollbar = require("./CPScrollbar");

var _CPScrollbar2 = _interopRequireDefault(_CPScrollbar);

function CPCanvas(controller) {
    var BUTTON_PRIMARY = 0,
        BUTTON_WHEEL = 1,
        BUTTON_SECONDARY = 2,
        MIN_ZOOM = 0.10,
        MAX_ZOOM = 16.0;

    var that = this,
        canvasContainer = document.createElement("div"),
        canvasContainerTop = document.createElement("div"),
        canvasContainerBottom = document.createElement("div"),

    // Our canvas that fills the entire screen
    canvas = document.createElement("canvas"),
        canvasContext = canvas.getContext("2d"),

    // Our cache of the artwork's fusion to be drawn onto our main canvas using our current transform
    artworkCanvas = document.createElement("canvas"),
        artworkCanvasContext = artworkCanvas.getContext("2d"),
        checkerboardPattern = (0, _CPGUIUtils.createCheckerboardPattern)(canvasContext),
        artwork = controller.getArtwork(),

    // Canvas transformations
    zoom = 1,
        offsetX = 0,
        offsetY = 0,
        canvasRotation = 0.0,
        transform = new _utilCPTransform2["default"](),
        interpolation = false,

    // Grid options
    showGrid = false,
        gridSize = 32,
        mouseX = 0,
        mouseY = 0,
        brushPreview = false,

    /* The last rectangle we dirtied with a brush preview circle, or null if one hasn't been drawn yet */
    oldPreviewRect = null,
        defaultCursor = "default",
        moveCursor = "grab",
        movingCursor = "grabbing",
        crossCursor = "crosshair",
        mouseIn = false,
        mouseDown = false,
        wacomPenDown = false,
        dontStealFocus = false,

    /* The area of the document that should have its layers fused and repainted to the screen
     * (i.e. an area modified by drawing tools). 
     * 
     * Initially set to the size of the artwork so we can repaint the whole thing.
     */
    artworkUpdateRegion = new _utilCPRect2["default"](0, 0, artwork.width, artwork.height),

    /**
     * The area of the canvas that should be repainted to the screen during the next repaint internal (in canvas
     * coordinates).
     */
    repaintRegion = new _utilCPRect2["default"](0, 0, 0, 0),
        scheduledRepaint = false,

    //
    // Modes system: modes control the way the GUI is reacting to the user input
    // All the tools are implemented through modes
    //

    defaultMode,
        colorPickerMode,
        moveCanvasMode,
        rotateCanvasMode,
        floodFillMode,
        gradientFillMode,
        rectSelectionMode,
        moveToolMode,

    // this must correspond to the stroke modes defined in CPToolInfo
    drawingModes = [],
        curDrawMode,
        curSelectedMode,
        activeMode,
        horzScroll = new _CPScrollbar2["default"](false),
        vertScroll = new _CPScrollbar2["default"](true),
        tablet = _utilCPWacomTablet2["default"].getRef();

    Math.sign = Math.sign || function (x) {
        x = +x; // convert to a number
        if (x === 0 || isNaN(x)) {
            return x;
        }
        return x > 0 ? 1 : -1;
    };

    // Parent class with empty event handlers for those drawing modes that don't need every event
    function CPMode() {}

    CPMode.prototype.keyDown = function (e) {
        if (e.keyCode == 32 /* Space */) {
                // Stop the page from scrolling in modes that don't care about space
                e.preventDefault();
            }
    };

    CPMode.prototype.mouseMoved = CPMode.prototype.paint = CPMode.prototype.mousePressed = CPMode.prototype.mouseDragged = CPMode.prototype.mouseReleased = CPMode.prototype.keyUp = function () {};

    //
    // Default UI Mode when not doing anything: used to start the other modes
    //

    function CPDefaultMode() {}

    CPDefaultMode.prototype = Object.create(CPMode.prototype);
    CPDefaultMode.prototype.constructor = CPDefaultMode;

    CPDefaultMode.prototype.mousePressed = function (e, pressure) {
        var spacePressed = key.isPressed("space");

        // FIXME: replace the moveToolMode hack by a new and improved system
        if (!spacePressed && e.button == BUTTON_PRIMARY && (!e.altKey || curSelectedMode == moveToolMode)) {

            if (!artwork.getActiveLayer().visible && curSelectedMode != rotateCanvasMode && curSelectedMode != rectSelectionMode) {
                return; // don't draw on a hidden layer
            }

            /* Switch to the new mode before trying to repaint the brush preview (the new mode
             * might want to erase it!
             */
            activeMode = curSelectedMode;

            repaintBrushPreview();

            activeMode.mousePressed(e, pressure);
        } else if (!spacePressed && (e.button == BUTTON_SECONDARY || e.button == BUTTON_PRIMARY && e.altKey)) {
            repaintBrushPreview();

            activeMode = colorPickerMode;
            activeMode.mousePressed(e, pressure);
        } else if ((e.button == BUTTON_WHEEL || spacePressed) && !e.altKey) {
            repaintBrushPreview();

            activeMode = moveCanvasMode;
            activeMode.mousePressed(e, pressure);
        } else if ((e.button == BUTTON_WHEEL || spacePressed) && e.altKey) {
            repaintBrushPreview();

            activeMode = rotateCanvasMode;
            activeMode.mousePressed(e, pressure);
        }
    };

    CPDefaultMode.prototype.mouseMoved = function (e, pressure) {
        var spacePressed = key.isPressed("space");

        if (!spacePressed && curSelectedMode == curDrawMode) {
            brushPreview = true;

            var
            //pf = coordToDocument(mouseCoordToCanvas({x: e.pageX, y: e.pageY})),
            r = getBrushPreviewOval();

            r.grow(2, 2);

            // If a brush preview was drawn previously, stretch the repaint region to remove that old copy
            if (oldPreviewRect != null) {
                r.union(oldPreviewRect);
                oldPreviewRect = null;
            }

            /*            if (artwork.isPointWithin(pf.x, pf.y)) {
                            setCursor(defaultCursor); // FIXME find a cursor that everyone likes
                        } else { */
            setCursor(defaultCursor);
            //}

            repaintRect(r);
        }
    };

    CPDefaultMode.prototype.keyDown = function (e) {
        if (e.keyCode == 32 /* Space */) {
                if (e.altKey) {
                    activeMode = rotateCanvasMode;
                } else {
                    activeMode = moveCanvasMode;
                }
                activeMode.keyDown(e);
            }
    };

    CPDefaultMode.prototype.paint = function () {
        if (brushPreview && curSelectedMode == curDrawMode) {
            brushPreview = false;

            var r = getBrushPreviewOval();

            canvasContext.beginPath();

            canvasContext.arc((r.left + r.right) / 2, (r.top + r.bottom) / 2, r.getWidth() / 2, 0, Math.PI * 2);

            canvasContext.stroke();

            r.grow(2, 2);

            if (oldPreviewRect == null) {
                oldPreviewRect = r;
            } else {
                oldPreviewRect.union(r);
            }
        }
    };

    function CPFreehandMode() {
        this.dragLeft = false, this.smoothMouse = { x: 0.0, y: 0.0 };
    }

    CPFreehandMode.prototype = Object.create(CPMode.prototype);
    CPFreehandMode.prototype.constructor = CPFreehandMode;

    CPFreehandMode.prototype.mousePressed = function (e, pressure) {
        if (!this.dragLeft && e.button == BUTTON_PRIMARY) {
            var pf = coordToDocument({ x: mouseX, y: mouseY });

            this.dragLeft = true;
            artwork.beginStroke(pf.x, pf.y, pressure);

            this.smoothMouse = pf;
        }
    };

    CPFreehandMode.prototype.mouseDragged = function (e, pressure) {
        var pf = coordToDocument({ x: mouseX, y: mouseY }),
            smoothing = Math.min(0.999, Math.pow(controller.getBrushInfo().smoothing, 0.3));

        this.smoothMouse.x = (1.0 - smoothing) * pf.x + smoothing * this.smoothMouse.x;
        this.smoothMouse.y = (1.0 - smoothing) * pf.y + smoothing * this.smoothMouse.y;

        if (this.dragLeft) {
            artwork.continueStroke(this.smoothMouse.x, this.smoothMouse.y, pressure);
        }
    };

    CPFreehandMode.prototype.mouseReleased = function (e) {
        if (this.dragLeft && e.button == BUTTON_PRIMARY) {
            this.dragLeft = false;
            artwork.endStroke();

            activeMode = defaultMode; // yield control to the default mode
        }
    };

    CPFreehandMode.prototype.mouseMoved = CPFreehandMode.prototype.paint = function (e) {};

    function CPLineMode() {
        var dragLine = false,
            dragLineFrom,
            dragLineTo,
            LINE_PREVIEW_WIDTH = 1;

        this.mousePressed = function (e) {
            if (!dragLine && e.button == BUTTON_PRIMARY) {
                dragLine = true;
                dragLineFrom = dragLineTo = { x: mouseX + 0.5, y: mouseY + 0.5 };
            }
        };

        this.mouseDragged = function (e) {
            var
            // The old line position that we'll invalidate for redraw
            invalidateRect = new _utilCPRect2["default"](Math.min(dragLineFrom.x, dragLineTo.x) - LINE_PREVIEW_WIDTH - 1, Math.min(dragLineFrom.y, dragLineTo.y) - LINE_PREVIEW_WIDTH - 1, Math.max(dragLineFrom.x, dragLineTo.x) + LINE_PREVIEW_WIDTH + 1 + 1, Math.max(dragLineFrom.y, dragLineTo.y) + LINE_PREVIEW_WIDTH + 1 + 1);

            dragLineTo = { x: mouseX + 0.5, y: mouseY + 0.5 }; // Target centre of pixel

            if (e.shiftKey) {
                // Snap to nearest 45 degrees
                var snap = Math.PI / 4,
                    angle = Math.round(Math.atan2(dragLineTo.y - dragLineFrom.y, dragLineTo.x - dragLineFrom.x) / snap);

                switch (angle) {
                    case 0:
                    case 4:
                        dragLineTo.y = dragLineFrom.y;
                        break;

                    case 2:
                    case 6:
                        dragLineTo.x = dragLineFrom.x;
                        break;

                    default:
                        angle *= snap;

                        var length = Math.sqrt((dragLineTo.y - dragLineFrom.y) * (dragLineTo.y - dragLineFrom.y) + (dragLineTo.x - dragLineFrom.x) * (dragLineTo.x - dragLineFrom.x));

                        dragLineTo.x = dragLineFrom.x + length * Math.cos(angle);
                        dragLineTo.y = dragLineFrom.y + length * Math.sin(angle);
                }
            }

            // The new line position
            invalidateRect.union(new _utilCPRect2["default"](Math.min(dragLineFrom.x, dragLineTo.x) - LINE_PREVIEW_WIDTH - 1, Math.min(dragLineFrom.y, dragLineTo.y) - LINE_PREVIEW_WIDTH - 1, Math.max(dragLineFrom.x, dragLineTo.x) + LINE_PREVIEW_WIDTH + 1 + 1, Math.max(dragLineFrom.y, dragLineTo.y) + LINE_PREVIEW_WIDTH + 1 + 1));

            repaintRect(invalidateRect);
        };

        this.mouseReleased = function (e) {
            if (dragLine && e.button == BUTTON_PRIMARY) {
                var from = coordToDocument(dragLineFrom),
                    to = coordToDocument(dragLineTo);

                dragLine = false;

                this.drawLine(from, to);

                var invalidateRect = new _utilCPRect2["default"](Math.min(dragLineFrom.x, dragLineTo.x) - LINE_PREVIEW_WIDTH - 1, Math.min(dragLineFrom.y, dragLineTo.y) - LINE_PREVIEW_WIDTH - 1, Math.max(dragLineFrom.x, dragLineTo.x) + LINE_PREVIEW_WIDTH + 1 + 1, Math.max(dragLineFrom.y, dragLineTo.y) + LINE_PREVIEW_WIDTH + 1 + 1);

                repaintRect(invalidateRect);

                activeMode = defaultMode; // yield control to the default mode
            }
        };

        this.paint = function () {
            if (dragLine) {
                canvasContext.lineWidth = LINE_PREVIEW_WIDTH;
                canvasContext.beginPath();
                canvasContext.moveTo(dragLineFrom.x, dragLineFrom.y);
                canvasContext.lineTo(dragLineTo.x, dragLineTo.y);
                canvasContext.stroke();
            }
        };
    }

    CPLineMode.prototype = Object.create(CPMode.prototype);
    CPLineMode.prototype.constructor = CPLineMode;

    CPLineMode.prototype.drawLine = function (from, to) {
        artwork.beginStroke(from.x, from.y, 1);
        artwork.continueStroke(to.x, to.y, 1);
        artwork.endStroke();
    };

    function CPBezierMode() {
        var BEZIER_POINTS = 500,
            BEZIER_POINTS_PREVIEW = 100;

        var dragBezier = false,
            dragBezierMode = 0,
            // 0 Initial drag, 1 first control point, 2 second point
        dragBezierP0,
            dragBezierP1,
            dragBezierP2,
            dragBezierP3;

        this.mousePressed = function (e) {
            var spacePressed = key.isPressed("space"),
                p = coordToDocument(mouseCoordToCanvas({ x: e.pageX, y: e.pageY }));

            if (!dragBezier && !spacePressed && e.button == BUTTON_PRIMARY) {
                dragBezier = true;
                dragBezierMode = 0;
                dragBezierP0 = dragBezierP1 = dragBezierP2 = dragBezierP3 = p;
            }
        };

        this.mouseDragged = function (e) {
            var p = coordToDocument(mouseCoordToCanvas({ x: e.pageX, y: e.pageY }));

            if (dragBezier && dragBezierMode == 0) {
                dragBezierP2 = dragBezierP3 = p;
                that.repaintAll();
            }
        };

        this.mouseReleased = function (e) {
            if (dragBezier && e.button == BUTTON_PRIMARY) {
                if (dragBezierMode == 0) {
                    dragBezierMode = 1;
                } else if (dragBezierMode == 1) {
                    dragBezierMode = 2;
                } else if (dragBezierMode == 2) {
                    dragBezier = false;

                    var p0 = dragBezierP0,
                        p1 = dragBezierP1,
                        p2 = dragBezierP2,
                        p3 = dragBezierP3,
                        bezier = new _utilCPBezier2["default"]();

                    bezier.x0 = p0.x;
                    bezier.y0 = p0.y;
                    bezier.x1 = p1.x;
                    bezier.y1 = p1.y;
                    bezier.x2 = p2.x;
                    bezier.y2 = p2.y;
                    bezier.x3 = p3.x;
                    bezier.y3 = p3.y;

                    var x = new Array(BEZIER_POINTS),
                        y = new Array(BEZIER_POINTS);

                    bezier.compute(x, y, BEZIER_POINTS);

                    artwork.beginStroke(x[0], y[0], 1);
                    for (var i = 1; i < BEZIER_POINTS; i++) {
                        artwork.continueStroke(x[i], y[i], 1);
                    }
                    artwork.endStroke();
                    that.repaintAll();

                    activeMode = defaultMode; // yield control to the default mode
                }
            }
        };

        this.mouseMoved = function (e) {
            var p = coordToDocument(mouseCoordToCanvas({ x: e.pageX, y: e.pageY }));

            if (dragBezier) {
                if (dragBezierMode == 1) {
                    dragBezierP1 = p;
                } else if (dragBezierMode == 2) {
                    dragBezierP2 = p;
                }
                that.repaintAll(); // FIXME: repaint only the bezier region
            }
        };

        this.paint = function () {
            if (dragBezier) {
                var bezier = new _utilCPBezier2["default"](),
                    p0 = coordToDisplay(dragBezierP0),
                    p1 = coordToDisplay(dragBezierP1),
                    p2 = coordToDisplay(dragBezierP2),
                    p3 = coordToDisplay(dragBezierP3);

                bezier.x0 = p0.x;
                bezier.y0 = p0.y;
                bezier.x1 = p1.x;
                bezier.y1 = p1.y;
                bezier.x2 = p2.x;
                bezier.y2 = p2.y;
                bezier.x3 = p3.x;
                bezier.y3 = p3.y;

                var x = new Array(BEZIER_POINTS_PREVIEW),
                    y = new Array(BEZIER_POINTS_PREVIEW);

                bezier.compute(x, y, BEZIER_POINTS_PREVIEW);

                canvasContext.beginPath();

                canvasContext.moveTo(x[0], y[0]);
                for (var i = 1; i < BEZIER_POINTS_PREVIEW; i++) {
                    canvasContext.lineTo(x[i], y[i]);
                }

                canvasContext.moveTo(~ ~p0.x, ~ ~p0.y);
                canvasContext.lineTo(~ ~p1.x, ~ ~p1.y);

                canvasContext.moveTo(~ ~p2.x, ~ ~p2.y);
                canvasContext.lineTo(~ ~p3.x, ~ ~p3.y);

                canvasContext.stroke();
            }
        };
    }

    CPBezierMode.prototype = Object.create(CPMode.prototype);
    CPBezierMode.prototype.constructor = CPBezierMode;

    function CPColorPickerMode() {
        var mouseButton;

        this.mousePressed = function (e) {
            mouseButton = e.button;

            setCursor(crossCursor);

            this.mouseDragged(e);
        };

        this.mouseDragged = function (e) {
            var pf = coordToDocument(mouseCoordToCanvas({ x: e.pageX, y: e.pageY }));

            if (artwork.isPointWithin(pf.x, pf.y)) {
                controller.setCurColorRgb(artwork.colorPicker(pf.x, pf.y));
            }
        };

        this.mouseReleased = function (e) {
            if (e.button == mouseButton) {
                setCursor(defaultCursor);
                activeMode = defaultMode; // yield control to the default mode
            }
        };
    }

    CPColorPickerMode.prototype = Object.create(CPMode.prototype);
    CPColorPickerMode.prototype.constructor = CPColorPickerMode;

    function CPMoveCanvasMode() {
        var dragMiddle = false,
            dragMoveX,
            dragMoveY,
            dragMoveOffset,
            dragMoveButton;

        this.keyDown = function (e) {
            if (e.keyCode == 32 /* Space */) {
                    if (!dragMiddle) {
                        setCursor(moveCursor);
                    }
                    e.preventDefault();
                }
        };

        this.keyUp = function (e) {
            if (!dragMiddle && e.keyCode == 32 /* Space */) {
                    setCursor(defaultCursor);
                    activeMode = defaultMode; // yield control to the default mode
                }
        };

        this.mousePressed = function (e) {
            var p = { x: e.pageX, y: e.pageY },
                spacePressed = key.isPressed("space");

            if (!dragMiddle && (e.button == BUTTON_WHEEL || spacePressed)) {
                repaintBrushPreview();

                dragMiddle = true;
                dragMoveButton = e.button;
                dragMoveX = p.x;
                dragMoveY = p.y;
                dragMoveOffset = that.getOffset();
                setCursor(movingCursor);
            }
        };

        this.mouseDragged = function (e) {
            if (dragMiddle) {
                var p = { x: e.pageX, y: e.pageY };

                that.setOffset(dragMoveOffset.x + p.x - dragMoveX, dragMoveOffset.y + p.y - dragMoveY);
                that.repaintAll();
            }
        };

        this.mouseReleased = function (e) {
            if (dragMiddle && e.button == dragMoveButton) {
                dragMiddle = false;
                setCursor(defaultCursor);

                activeMode = defaultMode; // yield control to the default mode
            }
        };
    }

    CPMoveCanvasMode.prototype = Object.create(CPMode.prototype);
    CPMoveCanvasMode.prototype.constructor = CPFloodFillMode;

    function CPFloodFillMode() {}

    CPFloodFillMode.prototype = Object.create(CPMode.prototype);
    CPFloodFillMode.prototype.constructor = CPFloodFillMode;

    CPFloodFillMode.prototype.mousePressed = function (e) {
        var pf = coordToDocument(mouseCoordToCanvas({ x: e.pageX, y: e.pageY }));

        if (artwork.isPointWithin(pf.x, pf.y)) {
            artwork.floodFill(pf.x, pf.y);
            that.repaintAll();
        }

        activeMode = defaultMode; // yield control to the default mode
    };

    function CPRectSelectionMode() {
        var firstClick,
            curRect = new _utilCPRect2["default"](0, 0, 0, 0);

        this.mousePressed = function (e) {
            var p = coordToDocumentInt(mouseCoordToCanvas({ x: e.pageX, y: e.pageY }));

            curRect.makeEmpty();
            firstClick = p;

            that.repaintAll();
        };

        this.mouseDragged = function (e) {
            var p = coordToDocumentInt(mouseCoordToCanvas({ x: e.pageX, y: e.pageY })),
                square = e.shiftKey,
                squareDist = ~ ~Math.max(Math.abs(p.x - firstClick.x), Math.abs(p.y - firstClick.y));

            if (p.x >= firstClick.x) {
                curRect.left = firstClick.x;
                curRect.right = (square ? firstClick.x + squareDist : p.x) + 1;
            } else {
                curRect.left = square ? firstClick.x - squareDist : p.x;
                curRect.right = firstClick.x + 1;
            }

            if (p.y >= firstClick.y) {
                curRect.top = firstClick.y;
                curRect.bottom = (square ? firstClick.y + squareDist : p.y) + 1;
            } else {
                curRect.top = square ? firstClick.y - squareDist : p.y;
                curRect.bottom = firstClick.y + 1;
            }

            that.repaintAll();
        };

        this.mouseReleased = function (e) {
            artwork.rectangleSelection(curRect);
            curRect.makeEmpty();

            activeMode = defaultMode; // yield control to the default mode
            that.repaintAll();
        };

        this.paint = function () {
            if (!curRect.isEmpty()) {
                canvasContext.lineWidth = 1;
                plotSelectionRect(canvasContext, curRect);
            }
        };
    };

    CPRectSelectionMode.prototype = Object.create(CPMode.prototype);
    CPRectSelectionMode.prototype.constructor = CPRectSelectionMode;

    function CPMoveToolMode() {
        var firstClick;

        this.mousePressed = function (e) {
            var p = coordToDocument(mouseCoordToCanvas({ x: e.pageX, y: e.pageY }));

            firstClick = p;

            artwork.beginPreviewMode(e.altKey);

            // FIXME: The following hack avoids a slight display glitch
            // if the whole move tool mess is fixed it probably won't be necessary anymore
            artwork.move(0, 0);
        };

        this.mouseDragged = function (e) {
            var p = coordToDocument(mouseCoordToCanvas({ x: e.pageX, y: e.pageY }));

            artwork.move(Math.round(p.x - firstClick.x), Math.round(p.y - firstClick.y));

            that.repaintAll();
        };

        this.mouseReleased = function (e) {
            artwork.endPreviewMode();

            activeMode = defaultMode; // yield control to the default mode
            that.repaintAll();
        };
    }

    CPMoveToolMode.prototype = Object.create(CPMode.prototype);
    CPMoveToolMode.prototype.constructor = CPMoveToolMode;

    function CPRotateCanvasMode() {
        var firstClick,
            initAngle = 0.0,
            initTransform,
            dragged = false;

        this.mousePressed = function (e) {
            firstClick = { x: e.pageX - $(canvas).offset().left, y: e.pageY - $(canvas).offset().top };

            initAngle = that.getRotation();
            initTransform = transform.clone();

            dragged = false;

            repaintBrushPreview();
        };

        this.mouseDragged = function (e) {
            dragged = true;

            var p = { x: e.pageX - $(canvas).offset().left, y: e.pageY - $(canvas).offset().top },
                displayCenter = { x: $(canvas).width() / 2, y: $(canvas).height() / 2 },
                canvasCenter = { x: canvas.width / 2, y: canvas.height / 2 },
                deltaAngle = Math.atan2(p.y - displayCenter.y, p.x - displayCenter.x) - Math.atan2(firstClick.y - displayCenter.y, firstClick.x - displayCenter.x),
                rotTrans = new _utilCPTransform2["default"]();

            rotTrans.rotateAroundPoint(deltaAngle, canvasCenter.x, canvasCenter.y);

            rotTrans.multiply(initTransform);

            that.setRotation(initAngle + deltaAngle);
            that.setOffset(~ ~rotTrans.getTranslateX(), ~ ~rotTrans.getTranslateY());
            that.repaintAll();
        };

        /**
         * When the mouse is released after rotation, we might want to snap our angle to the nearest 90 degree mark.
         */
        function finishRotation() {
            var ROTATE_SNAP_DEGREES = 5;

            var nearest90 = Math.round(canvasRotation / (Math.PI / 2)) * Math.PI / 2;

            if (Math.abs(canvasRotation - nearest90) < ROTATE_SNAP_DEGREES / 180 * Math.PI) {
                var deltaAngle = nearest90 - initAngle,
                    center = { x: canvas.width / 2, y: canvas.height / 2 },
                    rotTrans = new _utilCPTransform2["default"]();

                rotTrans.rotateAroundPoint(deltaAngle, center.x, center.y);

                rotTrans.multiply(initTransform);

                that.setRotation(initAngle + deltaAngle);
                that.setOffset(~ ~rotTrans.getTranslateX(), ~ ~rotTrans.getTranslateY());

                that.repaintAll();
            }
        }

        this.mouseReleased = function (e) {
            if (dragged) {
                finishRotation();
            } else {
                that.resetRotation();
            }

            activeMode = defaultMode; // yield control to the default mode
        };
    }

    CPRotateCanvasMode.prototype = Object.create(CPMode.prototype);
    CPRotateCanvasMode.prototype.constructor = CPRotateCanvasMode;

    function CPGradientFillMode() {
        // Super constructor
        CPLineMode.call(this);
    }

    CPGradientFillMode.prototype = Object.create(CPLineMode.prototype);
    CPGradientFillMode.prototype.constructor = CPGradientFillMode;

    CPGradientFillMode.prototype.drawLine = function (from, to) {
        artwork.gradientFill(Math.round(from.x), Math.round(from.y), Math.round(to.x), Math.round(to.y), controller.getCurGradient());
    };

    function requestFocusInWindow() {
        // TODO
    }

    function setCursor(cursor) {
        if (canvas.getAttribute("data-cursor") != cursor) {
            canvas.setAttribute("data-cursor", cursor);
        }
    }

    /**
     * @param visMin The smallest coordinate in this axis in which the drawing appears
     * @param visWidth The extent of the drawing in this axis
     * @param viewSize The extent of the screen canvas in this axis
     * @param offset The present pixel offset of the drawing in this axis
     */
    function updateScrollBar(scrollbar, visMin, visWidth, viewSize, offset) {
        var xMin = visMin - viewSize - offset + visWidth / 4,
            xMax = visMin + visWidth - offset - visWidth / 4;

        scrollbar.setValues(-offset, viewSize, xMin, xMax);

        scrollbar.setBlockIncrement(Math.max(1, ~ ~(viewSize * .66)));
        scrollbar.setUnitIncrement(Math.max(1, ~ ~(viewSize * .05)));
    }

    function updateScrollBars() {
        if (horzScroll == null || vertScroll == null || horzScroll.getValueIsAdjusting() || vertScroll.getValueIsAdjusting()) {
            return;
        }

        var visibleRect = getRefreshArea(new _utilCPRect2["default"](0, 0, artworkCanvas.width, artworkCanvas.height));

        updateScrollBar(horzScroll, visibleRect.left, visibleRect.getWidth(), $(canvas).width(), that.getOffset().x);
        updateScrollBar(vertScroll, visibleRect.top, visibleRect.getHeight(), $(canvas).height(), that.getOffset().y);
    }

    function updateTransform() {
        transform.setToIdentity();
        transform.translate(offsetX, offsetY);
        transform.scale(zoom, zoom);
        transform.rotate(canvasRotation);

        updateScrollBars();
        that.repaintAll();
    }

    /**
     * Convert a canvas-relative coordinate into document coordinates.
     */
    function coordToDocument(coord) {
        // TODO cache inverted transform
        return transform.getInverted().transformPoint(coord.x, coord.y);
    }

    /**
     * Convert a canvas-relative coordinate into document coordinates.
     */
    function coordToDocumentInt(coord) {
        // TODO cache inverted transform
        var result = coordToDocument(coord);

        result.x = Math.floor(result.x);
        result.y = Math.floor(result.y);

        return result;
    }

    /**
     * Convert a {x: pageX, y: pageY} co-ordinate pair from a mouse event to canvas-relative coordinates.
     */
    function mouseCoordToCanvas(coord) {
        var rect = canvas.getBoundingClientRect();

        return { x: coord.x - rect.left - window.pageXOffset, y: coord.y - rect.top - window.pageYOffset };
    }

    function coordToDisplay(p) {
        return transform.transformPoint(p.x, p.y);
    }

    function coordToDisplayInt(p) {
        var result = coordToDisplay(p);

        result.x = Math.round(result.x);
        result.y = Math.round(result.y);

        return result;
    }

    /**
     * Stroke a selection rectangle that encloses the pixels in the given rectangle (in document co-ordinates).
     */
    function plotSelectionRect(context, rect) {
        context.beginPath();

        var center = coordToDisplay({ x: (rect.left + rect.right) / 2, y: (rect.top + rect.bottom) / 2 }),
            coords = [{ x: rect.left, y: rect.top }, { x: rect.right, y: rect.top }, { x: rect.right, y: rect.bottom }, { x: rect.left, y: rect.bottom }];

        for (var i = 0; i < coords.length; i++) {
            coords[i] = coordToDisplayInt(coords[i]);

            // Need to inset the co-ordinates by 0.5 display pixels for the line to pass through the middle of the display pixel
            coords[i].x += Math.sign(center.x - coords[i].x) * 0.5;
            coords[i].y += Math.sign(center.y - coords[i].y) * 0.5;
        }

        context.moveTo(coords[0].x, coords[0].y);
        for (var i = 1; i < coords.length; i++) {
            context.lineTo(coords[i].x, coords[i].y);
        }
        context.lineTo(coords[0].x, coords[0].y);

        context.stroke();
    }

    /**
     * Take a CPRect of document coordinates and return a CPRect of canvas coordinates to repaint for that region.
     */
    function getRefreshArea(r) {
        var p1 = coordToDisplayInt({ x: r.left - 1, y: r.top - 1 }),
            p2 = coordToDisplayInt({ x: r.left - 1, y: r.bottom }),
            p3 = coordToDisplayInt({ x: r.right, y: r.top - 1 }),
            p4 = coordToDisplayInt({ x: r.right, y: r.bottom }),
            r2 = new _utilCPRect2["default"](Math.min(Math.min(p1.x, p2.x), Math.min(p3.x, p4.x)), Math.min(Math.min(p1.y, p2.y), Math.min(p3.y, p4.y)), Math.max(Math.max(p1.x, p2.x), Math.max(p3.x, p4.x)) + 1, Math.max(Math.max(p1.y, p2.y), Math.max(p3.y, p4.y)) + 1);

        r2.grow(2, 2); // to be sure to include everything

        return r2;
    }

    /**
     * Repaint the area of the canvas that was last occupied by the brush preview circle (useful for erasing
     * the brush preview when switching drawing modes to one that won't be using a preview).
     */
    function repaintBrushPreview() {
        if (oldPreviewRect != null) {
            var r = oldPreviewRect;
            oldPreviewRect = null;
            repaintRect(r);
        }
    }

    /**
     * Get a rectangle that encloses the preview brush, in screen coordinates.
     */
    function getBrushPreviewOval() {
        var brushSize = controller.getBrushSize() * zoom;

        return new _utilCPRect2["default"](mouseX - brushSize / 2, mouseY - brushSize / 2, mouseX + brushSize / 2, mouseY + brushSize / 2);
    }

    /**
     * Adjust the current offset to bring the center of the artwork to the center of the canvas
     */
    function centerCanvas() {
        var width = canvas.width,
            height = canvas.height,
            artworkCenter = coordToDisplay({ x: artwork.width / 2, y: artwork.height / 2 });

        that.setOffset(Math.round(offsetX + width / 2.0 - artworkCenter.x), Math.round(offsetY + height / 2.0 - artworkCenter.y));
    }

    this.setZoom = function (_zoom) {
        zoom = _zoom;
        updateTransform();
    };

    this.getZoom = function () {
        return zoom;
    };

    this.setGridSize = function (_gridSize) {
        gridSize = Math.max(Math.round(_gridSize), 1);
        this.repaintAll();
    };

    this.getGridSize = function () {
        return gridSize;
    };

    this.setOffset = function (x, y) {
        if (isNaN(x) || isNaN(y)) {
            console.log("Bad offset");
        } else {
            offsetX = x;
            offsetY = y;
            updateTransform();
        }
    };

    this.getOffset = function () {
        return { x: offsetX, y: offsetY };
    };

    this.setInterpolation = function (enabled) {
        interpolation = enabled;

        var browserProperties = ["imageSmoothingEnabled", "mozImageSmoothingEnabled", "webkitImageSmoothingEnabled", "msImageSmoothingEnabled"];

        for (var i = 0; i < browserProperties.length; i++) {
            if (browserProperties[i] in canvasContext) {
                canvasContext[browserProperties[i]] = enabled;
                break;
            }
        }

        this.repaintAll();
    };

    this.setRotation = function (angle) {
        canvasRotation = angle % (2 * Math.PI);
        updateTransform();
    };

    /**
     * Get canvas rotation in radians.
     * 
     * @return float
     */
    this.getRotation = function () {
        return canvasRotation;
    };

    /**
     * Get the rotation as the nearest number of whole 90 degree clockwise rotations ([0..3])
     */
    this.getRotation90 = function () {
        var rotation = Math.round(this.getRotation() / Math.PI * 2);

        // Just in case:
        rotation %= 4;

        // We want [0..3] as output
        if (rotation < 0) {
            rotation += 4;
        }

        return rotation;
    };

    /**
     *
     * @param zoom float
     * @param centerX float X co-ordinate in the canvas space
     * @param centerY float Y co-ordinate in the canvas space
     */
    function zoomOnPoint(zoom, centerX, centerY) {
        zoom = Math.max(MIN_ZOOM, Math.min(MAX_ZOOM, zoom));

        if (that.getZoom() != zoom) {
            var offset = that.getOffset();

            that.setOffset(offset.x + ~ ~((centerX - offset.x) * (1 - zoom / that.getZoom())), offset.y + ~ ~((centerY - offset.y) * (1 - zoom / that.getZoom())));

            that.setZoom(zoom);

            /*CPController.CPViewInfo viewInfo = new CPController.CPViewInfo();
            viewInfo.zoom = zoom;
            viewInfo.offsetX = offsetX;
            viewInfo.offsetY = offsetY;
            controller.callViewListeners(viewInfo); TODO */

            that.repaintAll();
        }
    }

    // More advanced zoom methods
    function zoomOnCenter(zoom) {
        var width = $(canvas).width(),
            height = $(canvas).height();

        zoomOnPoint(zoom, width / 2, height / 2);
    }

    this.zoomIn = function () {
        zoomOnCenter(this.getZoom() * 2);
    };

    this.zoomOut = function () {
        zoomOnCenter(this.getZoom() * 0.5);
    };

    this.zoom100 = function () {
        zoomOnCenter(1);
        centerCanvas();
    };

    this.resetRotation = function () {
        var center = { x: canvas.width / 2, y: canvas.height / 2 },
            rotTrans = new _utilCPTransform2["default"]();

        rotTrans.rotateAroundPoint(-this.getRotation(), center.x, center.y);
        rotTrans.multiply(transform);

        this.setOffset(~ ~rotTrans.getTranslateX(), ~ ~rotTrans.getTranslateY());
        this.setRotation(0);
    };

    /**
     * Add the pointer pressure field to the given pointer event.
     */
    function getPointerPressure(e) {
        // Use Wacom pressure in preference to pointer event pressure (if present)
        if (wacomPenDown) {
            return tablet.getPressure();
        } else {
            /* In the Pointer Events API, mice have a default pressure of 0.5, but we want 1.0. Since we can't 
             * distinguish between mice and pens at this point, we don't have any better options:
             */
            return e.pressure * 2;
        }
    }

    var mouseWheelDebounce = false;

    function handleMouseWheel(e) {
        if (e.deltaY != 0) {
            if (!mouseWheelDebounce || Math.abs(e.deltaY) > 20) {
                var factor;

                if (e.deltaY > 0) {
                    factor = 1 / 1.15;
                } else {
                    factor = 1.15;
                }

                var canvasPoint = mouseCoordToCanvas({ x: e.pageX, y: e.pageY }),
                    docPoint = coordToDocument(canvasPoint);

                if (artwork.isPointWithin(docPoint.x, docPoint.y)) {
                    zoomOnPoint(that.getZoom() * factor, canvasPoint.x, canvasPoint.y);
                } else {
                    zoomOnPoint(that.getZoom() * factor, offsetX + ~ ~(artwork.width * zoom / 2), offsetY + ~ ~(artwork.height * zoom / 2));
                }

                mouseWheelDebounce = mouseWheelDebounce || setTimeout(function () {
                    mouseWheelDebounce = false;
                }, 50);
            }

            e.preventDefault();
        }
    }

    var canvasClientRect;

    function handlePointerMove(e) {
        // Use the cached position of the canvas on the page if possible
        if (!canvasClientRect) {
            canvasClientRect = canvas.getBoundingClientRect();
        }

        var mousePos = { x: e.clientX - canvasClientRect.left, y: e.clientY - canvasClientRect.top };

        // Store these globally for the event handlers to refer to
        mouseX = mousePos.x;
        mouseY = mousePos.y;

        if (!dontStealFocus) {
            requestFocusInWindow();
        }

        if (mouseDown) {
            activeMode.mouseDragged(e, getPointerPressure(e));
        } else {
            activeMode.mouseMoved(e, getPointerPressure(e));
        }
    }

    function handlePointerUp(e) {
        mouseDown = false;
        wacomPenDown = false;
        activeMode.mouseReleased(e);
        canvas.releasePointerCapture(e.pointerId);
    }

    function handlePointerDown(e) {
        canvas.setPointerCapture(e.pointerId);

        canvasClientRect = canvas.getBoundingClientRect();

        var mousePos = { x: e.clientX - canvasClientRect.left, y: e.clientY - canvasClientRect.top };

        // Store these globally for the event handlers to refer to
        mouseX = mousePos.x;
        mouseY = mousePos.y;

        if (!mouseDown) {
            mouseDown = true;
            wacomPenDown = tablet.isPen();

            requestFocusInWindow();
            activeMode.mousePressed(e, getPointerPressure(e));
        }
    }

    function handleKeyDown(e) {
        activeMode.keyDown(e);
    }

    function handleKeyUp(e) {
        activeMode.keyUp(e);
    }

    // Get the DOM element for the canvas area
    this.getElement = function () {
        return canvasContainer;
    };

    /**
     * Schedule a repaint for the current repaint region.
     */
    function repaint() {
        if (!scheduledRepaint) {
            scheduledRepaint = true;
            window.requestAnimationFrame(function () {
                that.paint();
            });
        }
    }

    /**
     * Schedule a repaint for the entire screen.
     */
    this.repaintAll = function () {
        repaintRegion.left = 0;
        repaintRegion.top = 0;
        repaintRegion.right = canvas.width;
        repaintRegion.bottom = canvas.height;

        repaint();
    };

    /**
     * Schedule a repaint for an area of the screen for later.
     * 
     * @param rect CPRect Region that should be repainted using display coordinates
     */
    function repaintRect(rect) {
        repaintRegion.union(rect);

        repaint();
    };

    this.paint = function () {
        var drawingWasClipped = false;

        scheduledRepaint = false;

        /* Clip drawing to the area of the screen we want to repaint */
        if (!repaintRegion.isEmpty()) {
            canvasContext.save();

            if (canvasContext.clip) {
                canvasContext.beginPath();

                repaintRegion.left = repaintRegion.left | 0;
                repaintRegion.top = repaintRegion.top | 0;

                canvasContext.rect(repaintRegion.left, repaintRegion.top, Math.ceil(repaintRegion.getWidth()), Math.ceil(repaintRegion.getHeight()));

                canvasContext.clip();
            }

            drawingWasClipped = true;
        }

        /* Copy pixels that changed in the document into our local fused image cache */
        if (!artworkUpdateRegion.isEmpty()) {
            var imageData = artwork.fusionLayers();

            artworkCanvasContext.putImageData(imageData, 0, 0, artworkUpdateRegion.left, artworkUpdateRegion.top, artworkUpdateRegion.right - artworkUpdateRegion.left, artworkUpdateRegion.bottom - artworkUpdateRegion.top);

            artworkUpdateRegion.makeEmpty();
        }

        canvasContext.fillStyle = '#606060';
        canvasContext.fillRect(0, 0, canvas.width, canvas.height);

        // Transform the coordinate system to bring the document into the right position on the screen (translate/zoom/etc)
        canvasContext.save();
        {
            canvasContext.setTransform(transform.m[0], transform.m[1], transform.m[2], transform.m[3], transform.m[4], transform.m[5]);

            canvasContext.fillStyle = checkerboardPattern;
            canvasContext.fillRect(0, 0, artwork.width, artwork.height);

            canvasContext.drawImage(artworkCanvas, 0, 0, artworkCanvas.width, artworkCanvas.height);
        }
        canvasContext.restore();

        // The rest of the drawing happens using the original screen coordinate system

        canvasContext.globalCompositeOperation = 'exclusion';

        if (canvasContext.globalCompositeOperation == "exclusion") {
            // White + exclusion inverts the colors underneath, giving us good contrast
            canvasContext.strokeStyle = 'white';
        } else {
            // IE Edge doesn't support Exclusion, so how about Difference with mid-grey instead
            // This is visible on black and white, but disappears on a grey background
            canvasContext.globalCompositeOperation = 'difference';
            canvasContext.strokeStyle = '#888';

            // For super dumb browsers (only support source-over), at least don't make the cursor invisible on a white BG!
            if (canvasContext.globalCompositeOperation != "difference") {
                canvasContext.strokeStyle = 'black';
            }
        }
        canvasContext.lineWidth = 1.0;

        // Draw selection
        if (!artwork.getSelection().isEmpty()) {
            canvasContext.setLineDash([3, 2]);

            plotSelectionRect(canvasContext, artwork.getSelection());

            canvasContext.setLineDash([]);
        }

        // Draw grid
        if (showGrid) {
            var bounds = artwork.getBounds(),
                gridVisualPitch = zoom * gridSize;

            /* If the grid is going to be miniscule on the screen (basically just covering/inverting the entire artwork,
             * do not paint it.
             */
            if (gridVisualPitch > 2) {
                canvasContext.beginPath();

                // Vertical lines
                for (var i = gridSize - 1; i < bounds.right; i += gridSize) {
                    var p1 = coordToDisplay({ x: i, y: bounds.top }),
                        p2 = coordToDisplay({ x: i, y: bounds.bottom });

                    canvasContext.moveTo(p1.x + 0.5, p1.y + 0.5);
                    canvasContext.lineTo(p2.x + 0.5, p2.y + 0.5);
                }

                // Horizontal lines
                for (var i = gridSize - 1; i < bounds.bottom; i += gridSize) {
                    var p1 = coordToDisplay({ x: 0, y: i }),
                        p2 = coordToDisplay({ x: bounds.right, y: i });

                    canvasContext.moveTo(p1.x + 0.5, p1.y + 0.5);
                    canvasContext.lineTo(p2.x + 0.5, p2.y + 0.5);
                }

                canvasContext.stroke();
            }
        }

        // Additional drawing by the current mode
        activeMode.paint(canvasContext);

        canvasContext.globalCompositeOperation = 'source-over';

        if (drawingWasClipped) {
            repaintRegion.makeEmpty();

            canvasContext.restore();
        }
    };

    this.showGrid = function (show) {
        showGrid = show;
        this.repaintAll();
    };

    /**
     * Resize the canvas area to the given height (in pixels)
     *
     * @param height New canvas area height in pixels
     */
    this.resize = function (height) {
        // Leave room for the bottom scrollbar
        height -= $(canvasContainerBottom).outerHeight();

        $(canvas).css('height', height + "px");

        canvas.width = $(canvas).width();
        canvas.height = height;

        canvasClientRect = null;

        centerCanvas();

        // Interpolation property gets reset when canvas resizes
        this.setInterpolation(interpolation);

        this.repaintAll();
    };

    controller.on("toolChange", function (tool, toolInfo) {
        var spacePressed = key.isPressed("space");

        if (curSelectedMode == curDrawMode) {
            curSelectedMode = drawingModes[toolInfo.strokeMode];
        }
        curDrawMode = drawingModes[toolInfo.strokeMode];

        if (!spacePressed && mouseIn) {
            brushPreview = true;

            var rect = getBrushPreviewOval();

            rect.grow(2, 2);

            if (oldPreviewRect != null) {
                rect.union(oldPreviewRect);
                oldPreviewRect = null;
            }

            repaintRect(rect);
        }
    });

    controller.on("modeChange", function (mode) {
        switch (mode) {
            case ChickenPaint.M_DRAW:
                curSelectedMode = curDrawMode;
                break;

            case ChickenPaint.M_FLOODFILL:
                curSelectedMode = floodFillMode;
                break;

            case ChickenPaint.M_GRADIENTFILL:
                curSelectedMode = gradientFillMode;
                break;

            case ChickenPaint.M_RECT_SELECTION:
                curSelectedMode = rectSelectionMode;
                break;

            case ChickenPaint.M_MOVE_TOOL:
                curSelectedMode = moveToolMode;
                break;

            case ChickenPaint.M_ROTATE_CANVAS:
                curSelectedMode = rotateCanvasMode;
                break;

            case ChickenPaint.M_COLOR_PICKER:
                curSelectedMode = colorPickerMode;
                break;
        }
    });

    //
    // Modes system: modes control the way the GUI is reacting to the user input
    // All the tools are implemented through modes
    //

    defaultMode = new CPDefaultMode();
    colorPickerMode = new CPColorPickerMode();
    moveCanvasMode = new CPMoveCanvasMode();
    rotateCanvasMode = new CPRotateCanvasMode();
    floodFillMode = new CPFloodFillMode();
    gradientFillMode = new CPGradientFillMode();
    rectSelectionMode = new CPRectSelectionMode();
    moveToolMode = new CPMoveToolMode();

    // this must correspond to the stroke modes defined in CPToolInfo
    drawingModes = [new CPFreehandMode(), new CPLineMode(), new CPBezierMode()];

    curDrawMode = drawingModes[_engineCPBrushInfo2["default"].SM_FREEHAND];
    curSelectedMode = curDrawMode;
    activeMode = defaultMode;

    artworkCanvas.width = artwork.width;
    artworkCanvas.height = artwork.height;

    canvas.width = 800;
    canvas.height = 900;
    canvas.className = "chickenpaint-canvas";
    canvas.setAttribute("touch-action", "none");

    if (!canvasContext.setLineDash) {
        canvasContext.setLineDash = function () {}; // For IE 10 and older
    }

    canvas.addEventListener("contextmenu", function (e) {
        e.preventDefault();
    });

    canvas.addEventListener("mouseenter", function () {
        mouseIn = true;
    });

    canvas.addEventListener("mouseleave", function () {
        mouseIn = false;

        if (!mouseDown) {
            that.repaintAll();
        }
    });

    canvas.addEventListener("pointerdown", handlePointerDown);
    canvas.addEventListener("pointermove", handlePointerMove);
    canvas.addEventListener("pointerup", handlePointerUp);
    canvas.addEventListener("wheel", handleMouseWheel);

    document.addEventListener("keydown", handleKeyDown);
    document.addEventListener("keyup", handleKeyUp);

    /* Workaround for Chrome Mac bug that causes canvas to be disposed and never recreated when tab is switched into the 
     * background https://bugs.chromium.org/p/chromium/issues/detail?id=588434
     */
    document.addEventListener("visibilitychange", function () {
        var oldHeight = canvas.height + $(canvasContainerBottom).outerHeight();

        canvas.width = 1;
        canvas.height = 1;

        that.resize(oldHeight);
    }, false);

    window.addEventListener("scroll", function () {
        canvasClientRect = null;
    });

    canvas.addEventListener("mousedown", function (e) {
        if (e.button == BUTTON_WHEEL) {
            // Prevent middle-mouse scrolling in Firefox
            e.preventDefault();
        }
    });

    artwork.on("updateRegion", function (region) {
        artworkUpdateRegion.union(region);

        repaintRect(getRefreshArea(artworkUpdateRegion));
    });

    horzScroll.on("valueChanged", function (value) {
        var p = that.getOffset();

        that.setOffset(-value, p.y);
    });

    vertScroll.on("valueChanged", function (value) {
        var p = that.getOffset();

        that.setOffset(p.x, -value);
    });

    this.setInterpolation(false);

    var canvasSpacingWrapper = document.createElement("div");

    canvasSpacingWrapper.className = 'chickenpaint-canvas-container-wrapper';
    canvasSpacingWrapper.appendChild(canvas);

    canvasContainerTop.className = 'chickenpaint-canvas-container-top';
    canvasContainerTop.appendChild(canvasSpacingWrapper);
    canvasContainerTop.appendChild(vertScroll.getElement());

    canvasContainerBottom.className = 'chickenpaint-canvas-container-bottom';
    canvasContainerBottom.appendChild(horzScroll.getElement());

    canvasContainer.appendChild(canvasContainerTop);
    canvasContainer.appendChild(canvasContainerBottom);

    controller.setCanvas(this);
}

module.exports = exports["default"];

},{"../engine/CPBrushInfo":5,"../util/CPBezier":45,"../util/CPRect":49,"../util/CPTransform":50,"../util/CPWacomTablet":51,"./CPGUIUtils":25,"./CPScrollbar":33}],20:[function(require,module,exports){
/*
    ChickenPaint
    
    ChickenPaint is a translation of ChibiPaint from Java to JavaScript
    by Nicholas Sherlock / Chicken Smoothie.
    
    ChibiPaint is Copyright (c) 2006-2008 Marc Schefer

    ChickenPaint is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    ChickenPaint is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with ChickenPaint. If not, see <http://www.gnu.org/licenses/>.
*/

'use strict';

Object.defineProperty(exports, '__esModule', {
    value: true
});
exports['default'] = CPCheckbox;

function CPCheckbox(state, title) {
    var canvas = document.createElement('canvas'),
        canvasContext = canvas.getContext('2d'),
        that = this;

    this.state = state || false;

    function paint() {
        var width = canvas.width,
            height = canvas.height;

        canvasContext.clearRect(0, 0, width, height);

        canvasContext.beginPath();
        canvasContext.arc(width / 2 + 1, width / 2 + 1, Math.max(width / 2, 1) - 2, 0, Math.PI * 2);

        if (that.state) {
            canvasContext.fill();
        } else {
            canvasContext.stroke();
        }
    }

    this.setValue = function (b) {
        if (this.state != b) {
            this.state = b;

            this.emitEvent('valueChange', [b]);

            paint();
        }
    };

    this.getElement = function () {
        return canvas;
    };

    canvas.addEventListener("mousedown", function (e) {
        that.setValue(!that.state);
    });

    canvas.title = title || "";
    canvas.className = 'chickenpaint-checkbox';

    canvas.width = 20;
    canvas.height = 20;

    canvas.fillStyle = 'black';
    canvas.strokeStyle = 'black';

    paint();
}

;

CPCheckbox.prototype = Object.create(EventEmitter.prototype);
CPCheckbox.prototype.constructor = CPCheckbox;
module.exports = exports['default'];

},{}],21:[function(require,module,exports){
/*
    ChickenPaint
    
    ChickenPaint is a translation of ChibiPaint from Java to JavaScript
    by Nicholas Sherlock / Chicken Smoothie.
    
    ChibiPaint is Copyright (c) 2006-2008 Marc Schefer

    ChickenPaint is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    ChickenPaint is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with ChickenPaint. If not, see <http://www.gnu.org/licenses/>.
*/

'use strict';

Object.defineProperty(exports, '__esModule', {
    value: true
});
exports['default'] = CPColorPalette;

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }

var _CPPalette = require('./CPPalette');

var _CPPalette2 = _interopRequireDefault(_CPPalette);

var _CPColorSelect = require('./CPColorSelect');

var _CPColorSelect2 = _interopRequireDefault(_CPColorSelect);

var _CPColorSlider = require('./CPColorSlider');

var _CPColorSlider2 = _interopRequireDefault(_CPColorSlider);

var _utilCPColor = require("../util/CPColor");

var _utilCPColor2 = _interopRequireDefault(_utilCPColor);

function CPColorPalette(cpController) {
    _CPPalette2['default'].call(this, cpController, "color", "Color");

    var colorSelect = new _CPColorSelect2['default'](cpController),
        colorSlider = new _CPColorSlider2['default'](cpController, colorSelect),
        colorShow = new CPColorShow(cpController),
        body = this.getBodyElement(),
        topSection = document.createElement("div");

    topSection.className = 'chickenpaint-colorpicker-top';

    topSection.appendChild(colorSelect.getElement());
    topSection.appendChild(colorSlider.getElement());

    body.appendChild(topSection);
    body.appendChild(colorShow.getElement());
}

function CPColorShow(cpController) {
    var color = 0,
        element = document.createElement("div");

    function padLeft(string, padding, len) {
        while (string.length < len) {
            string = padding + string;
        }
        return string;
    }

    function paint() {
        element.style.backgroundColor = '#' + padLeft(Number(color).toString(16), "0", 6);
    }

    function mouseClick(e) {
        e.preventDefault();

        var colHex = "#" + padLeft(Number(color).toString(16), "0", 6);

        colHex = window.prompt("Please enter a color in hex format", colHex);

        if (colHex != null) {
            try {
                if (colHex.match(/^#/) || colHex.match(/^$/)) {
                    colHex = colHex.substring(1);
                }

                var newColor = parseInt(colHex, 16);

                cpController.setCurColor(new _utilCPColor2['default'](newColor));
            } catch (e) {}
        }
    }

    this.getElement = function () {
        return element;
    };

    cpController.on("colorChange", function (_color) {
        color = _color.getRgb();
        paint();
    });

    element.className = 'chickenpaint-colorpicker-show';

    element.addEventListener("click", mouseClick);

    paint();
}

CPColorPalette.prototype = Object.create(_CPPalette2['default'].prototype);
CPColorPalette.prototype.constructor = CPColorPalette;
module.exports = exports['default'];

},{"../util/CPColor":46,"./CPColorSelect":22,"./CPColorSlider":23,"./CPPalette":31}],22:[function(require,module,exports){
/*
    ChickenPaint

    ChickenPaint is a translation of ChibiPaint from Java to JavaScript
    by Nicholas Sherlock / Chicken Smoothie.

    ChibiPaint is Copyright (c) 2006-2008 Marc Schefer

    ChickenPaint is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    ChickenPaint is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with ChickenPaint. If not, see <http://www.gnu.org/licenses/>.
*/

"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports["default"] = CPColorSelect;

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

var _utilCPColor = require("../util/CPColor");

var _utilCPColor2 = _interopRequireDefault(_utilCPColor);

var _engineCPColorBmp = require("../engine/CPColorBmp");

var _engineCPColorBmp2 = _interopRequireDefault(_engineCPColorBmp);

function CPColorSelect(cpController, initialColor) {
    var w = 128,
        h = 128,
        canvas = document.createElement("canvas"),
        canvasContext = canvas.getContext("2d"),
        imageData = canvasContext.createImageData(w, h),
        data = imageData.data,
        color = new _utilCPColor2["default"](),
        needRefresh = true,
        capturedMouse = false;

    function makeBitmap() {
        var col = color.clone(),
            pixIndex = 0;

        for (var y = 0; y < h; y++) {
            col.setValue(255 - y * 255 / h);

            for (var x = 0; x < w; x++) {
                col.setSaturation(x * 255 / w);

                data[pixIndex + _engineCPColorBmp2["default"].RED_BYTE_OFFSET] = col.rgb >> 16 & 0xFF;
                data[pixIndex + _engineCPColorBmp2["default"].GREEN_BYTE_OFFSET] = col.rgb >> 8 & 0xFF;
                data[pixIndex + _engineCPColorBmp2["default"].BLUE_BYTE_OFFSET] = col.rgb & 0xFF;
                data[pixIndex + _engineCPColorBmp2["default"].ALPHA_BYTE_OFFSET] = 0xFF;

                pixIndex += _engineCPColorBmp2["default"].BYTES_PER_PIXEL;
            }
        }

        needRefresh = false;
    }

    function paint() {
        if (needRefresh) {
            makeBitmap();
        }

        canvasContext.putImageData(imageData, 0, 0, 0, 0, w, h);

        var x = color.getSaturation() * w / 255,
            y = (255 - color.getValue()) * h / 255;

        canvasContext.globalCompositeOperation = 'exclusion';
        canvasContext.strokeStyle = 'white';
        canvasContext.lineWidth = 1.5;

        canvasContext.beginPath();
        canvasContext.arc(x, y, 5, 0, Math.PI * 2);
        canvasContext.stroke();

        canvasContext.globalCompositeOperation = 'source-over';
    }

    function mousePickColor(e) {
        var x = e.pageX - $(canvas).offset().left,
            y = e.pageY - $(canvas).offset().top,
            sat = x * 255 / w,
            value = 255 - y * 255 / h;

        color.setSaturation(Math.max(0, Math.min(255, sat)));
        color.setValue(Math.max(0, Math.min(255, value)));

        paint();
        cpController.setCurColor(color);
    }

    function continueDrag(e) {
        mousePickColor(e);
    }

    function endDrag(e) {
        canvas.releasePointerCapture(e.pointerId);
        capturedMouse = false;
        canvas.removeEventListener("pointerup", endDrag);
        canvas.removeEventListener("pointermove", continueDrag);
    }

    function startDrag(e) {
        if (!capturedMouse) {
            capturedMouse = true;
            canvas.setPointerCapture(e.pointerId);
            canvas.addEventListener("pointerup", endDrag);
            canvas.addEventListener("pointermove", continueDrag);
        }

        mousePickColor(e);
    }

    this.setHue = function (hue) {
        if (color.getHue() != hue) {
            color.setHue(hue);
            cpController.setCurColor(color);
        }
    };

    this.getElement = function () {
        return canvas;
    };

    cpController.on("colorChange", function (c) {
        color.copyFrom(c);

        needRefresh = true;
        paint();
    });

    canvas.addEventListener("pointerdown", startDrag);

    canvas.className = 'chickenpaint-colorpicker-select';
    canvas.setAttribute("touch-action", "none");

    canvas.width = w;
    canvas.height = h;

    if (initialColor) {
        color.copyFrom(initialColor);
    }

    paint();
}

module.exports = exports["default"];

},{"../engine/CPColorBmp":9,"../util/CPColor":46}],23:[function(require,module,exports){
/*
    ChickenPaint

    ChickenPaint is a translation of ChibiPaint from Java to JavaScript
    by Nicholas Sherlock / Chicken Smoothie.

    ChibiPaint is Copyright (c) 2006-2008 Marc Schefer

    ChickenPaint is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    ChickenPaint is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with ChickenPaint. If not, see <http://www.gnu.org/licenses/>.
*/

"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports["default"] = CPColorSlider;

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

var _utilCPColor = require("../util/CPColor");

var _utilCPColor2 = _interopRequireDefault(_utilCPColor);

var _engineCPColorBmp = require("../engine/CPColorBmp");

var _engineCPColorBmp2 = _interopRequireDefault(_engineCPColorBmp);

function CPColorSlider(cpController, selecter, initialHue) {
    var that = this,
        w = 24,
        h = 128,
        canvas = document.createElement("canvas"),
        canvasContext = canvas.getContext("2d"),
        imageData = canvasContext.createImageData(w, h),
        data = imageData.data,
        capturedMouse = false,
        hue = initialHue || 0;

    function makeBitmap() {
        var color = new _utilCPColor2["default"](),
            pixIndex = 0;

        color.setRgbComponents(0, 255, 255);

        for (var y = 0; y < h; y++) {
            color.setHue(y * 359 / h);

            for (var x = 0; x < w; x++) {
                data[pixIndex + _engineCPColorBmp2["default"].RED_BYTE_OFFSET] = color.rgb >> 16 & 0xFF;
                data[pixIndex + _engineCPColorBmp2["default"].GREEN_BYTE_OFFSET] = color.rgb >> 8 & 0xFF;
                data[pixIndex + _engineCPColorBmp2["default"].BLUE_BYTE_OFFSET] = color.rgb & 0xFF;
                data[pixIndex + _engineCPColorBmp2["default"].ALPHA_BYTE_OFFSET] = 0xFF;

                pixIndex += _engineCPColorBmp2["default"].BYTES_PER_PIXEL;
            }
        }
    }

    function paint() {
        canvasContext.putImageData(imageData, 0, 0, 0, 0, w, h);

        var y = hue * h / 360;

        canvasContext.globalCompositeOperation = 'exclusion';
        canvasContext.strokeStyle = 'white';
        canvasContext.lineWidth = 1.5;

        canvasContext.beginPath();
        canvasContext.moveTo(0, y);
        canvasContext.lineTo(w, y);
        canvasContext.stroke();

        canvasContext.globalCompositeOperation = 'source-over';
    }

    function mousePickColor(e) {
        var y = e.pageY - $(canvas).offset().top,
            _hue = ~ ~(y * 360 / h);

        hue = Math.max(0, Math.min(359, _hue));
        paint();

        if (selecter != null) {
            selecter.setHue(hue);
        }
    }

    function continueDrag(e) {
        mousePickColor(e);
    }

    function endDrag(e) {
        canvas.releasePointerCapture(e.pointerId);
        capturedMouse = false;
        canvas.removeEventListener("pointerup", endDrag);
        canvas.removeEventListener("pointermove", continueDrag);
    }

    function startDrag(e) {
        if (!capturedMouse) {
            capturedMouse = true;
            canvas.setPointerCapture(e.pointerId);
            canvas.addEventListener("pointerup", endDrag);
            canvas.addEventListener("pointermove", continueDrag);
        }

        mousePickColor(e);
    }

    this.getElement = function () {
        return canvas;
    };

    this.setHue = function (h) {
        hue = h;
        paint();
    };

    cpController.on("colorChange", function (color) {
        that.setHue(color.getHue());
    });

    canvas.setAttribute("touch-action", "none");

    canvas.addEventListener("pointerdown", startDrag);

    canvas.width = w;
    canvas.height = h;

    canvas.className = 'chickenpaint-colorpicker-slider';

    makeBitmap();
    paint();
}

module.exports = exports["default"];

},{"../engine/CPColorBmp":9,"../util/CPColor":46}],24:[function(require,module,exports){
/*
    ChickenPaint

    ChickenPaint is a translation of ChibiPaint from Java to JavaScript
    by Nicholas Sherlock / Chicken Smoothie.

    ChibiPaint is Copyright (c) 2006-2008 Marc Schefer

    ChickenPaint is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    ChickenPaint is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with ChickenPaint. If not, see <http://www.gnu.org/licenses/>.
*/

'use strict';

Object.defineProperty(exports, '__esModule', {
    value: true
});
exports['default'] = CPColorSwatch;

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }

var _utilCPColor = require('../util/CPColor');

var _utilCPColor2 = _interopRequireDefault(_utilCPColor);

var _CPSlider = require('./CPSlider');

var _CPSlider2 = _interopRequireDefault(_CPSlider);

var _CPColorSelect = require('./CPColorSelect');

var _CPColorSelect2 = _interopRequireDefault(_CPColorSelect);

var _CPColorSlider = require('./CPColorSlider');

var _CPColorSlider2 = _interopRequireDefault(_CPColorSlider);

function CPColorSwatch(initialColor, initialAlpha) {
    var that = this,
        color = new _utilCPColor2['default'](0),
        alpha = 255,
        element = document.createElement("div");

    function padLeft(string, padding, len) {
        while (string.length < len) {
            string = padding + string;
        }
        return string;
    }

    function paint() {
        element.style.backgroundColor = '#' + padLeft(Number(color.getRgb()).toString(16), "0", 6);
    }

    function mouseClick(e) {
        e.preventDefault();
    }

    this.getElement = function () {
        return element;
    };

    this.setColor = function (_color) {
        if (!color.isEqual(_color)) {
            color.copyFrom(_color);

            paint();

            this.emitEvent("colorChange", [color]);
        }
    };

    this.setAlpha = function (_alpha) {
        if (_alpha != alpha) {
            alpha = _alpha;

            paint();

            this.emitEvent("alphaChange", [alpha]);
        }
    };

    this.getColorRgb = function () {
        return color.getRgb();
    };

    this.getAlpha = function () {
        return alpha;
    };

    this.setCurColor = this.setColor;

    function buildColorEditPanel() {
        var panel = document.createElement("div"),
            group = document.createElement("div"),
            select = new _CPColorSelect2['default'](that, color),
            slider = new _CPColorSlider2['default'](that, select, color.getHue()),
            alphaSlider = new _CPSlider2['default'](0, 255);

        panel.className = "chickenpaint-color-pick-panel";

        group.className = "chickenpaint-colorpicker-top";

        group.appendChild(select.getElement());
        group.appendChild(slider.getElement());

        panel.appendChild(group);

        alphaSlider.value = alpha;
        alphaSlider.title = function (alpha) {
            return "Opacity: " + alpha;
        };
        alphaSlider.on("valueChange", function (alpha) {
            that.setAlpha(alpha);
        });

        panel.appendChild(alphaSlider.getElement());

        setTimeout(function () {
            alphaSlider.resize();
        }, 0);

        return panel;
    }

    element.className = 'chickenpaint-color-pick-swatch';

    element.addEventListener("click", mouseClick);

    if (initialColor) {
        color.copyFrom(initialColor);
    }

    if (initialAlpha) {
        alpha = initialAlpha;
    }

    // Clicking outside the popover will dismiss it
    function closeClickHandler(e) {
        if ($(e.target).closest(".popover").length == 0 && $(e.target).closest(".chickenpaint-color-pick-swatch")[0] != element) {
            $(element).popover("hide");
        }
    }

    $(element).popover({
        html: true,
        content: function content() {
            window.addEventListener("mousedown", closeClickHandler);

            return buildColorEditPanel();
        },
        trigger: "manual",
        placement: "bottom"

    }).on("click", function () {
        $(this).popover("toggle");
    }).on("hidden.bs.popover", function () {
        window.removeEventListener("mousedown", closeClickHandler);
    });

    paint();
}

CPColorSwatch.prototype = Object.create(EventEmitter.prototype);
CPColorSwatch.prototype.constructor = CPColorSwatch;
module.exports = exports['default'];

},{"../util/CPColor":46,"./CPColorSelect":22,"./CPColorSlider":23,"./CPSlider":36}],25:[function(require,module,exports){
/**
 * Create a checkerboard HTML5 CanvasPattern (which can be used for fillStyle) using the given canvas context.
 * 
 * @param canvasContext
 * @returns {CanvasPattern}
 */
"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.createCheckerboardPattern = createCheckerboardPattern;

function createCheckerboardPattern(canvasContext) {
    var checkerboardCanvas = document.createElement("canvas"),
        checkerboardContext = checkerboardCanvas.getContext("2d"),
        imageData = checkerboardContext.createImageData(64, 64),
        data = imageData.data,
        pixelOffset = 0;

    for (var j = 0; j < 64; j++) {
        for (var i = 0; i < 64; i++) {
            if ((i & 0x8) != 0 ^ (j & 0x8) != 0) {
                // White
                data[pixelOffset++] = 0xff;
                data[pixelOffset++] = 0xff;
                data[pixelOffset++] = 0xff;
                data[pixelOffset++] = 0xff;
            } else {
                // Grey
                data[pixelOffset++] = 0xcc;
                data[pixelOffset++] = 0xcc;
                data[pixelOffset++] = 0xcc;
                data[pixelOffset++] = 0xff;
            }
        }
    }

    checkerboardCanvas.width = 64;
    checkerboardCanvas.height = 64;
    checkerboardContext.putImageData(imageData, 0, 0);

    return canvasContext.createPattern(checkerboardCanvas, 'repeat');
}

},{}],26:[function(require,module,exports){
/*
    ChickenPaint
    
    ChickenPaint is a translation of ChibiPaint from Java to JavaScript
    by Nicholas Sherlock / Chicken Smoothie.
    
    ChibiPaint is Copyright (c) 2006-2008 Marc Schefer

    ChickenPaint is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    ChickenPaint is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with ChickenPaint. If not, see <http://www.gnu.org/licenses/>.
*/

"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports["default"] = CPGridDialog;

function CPGridDialog(parent, canvas) {
    var dialog = $("<div class=\"modal fade\" tabindex=\"-1\" role=\"dialog\">\n                <div class=\"modal-dialog\">\n                    <div class=\"modal-content\">\n                        <div class=\"modal-header\">\n                            <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\n                                <span aria-hidden=\"true\">&times;</span>\n                            </button>\n                            <h4 class=\"modal-title\">Grid options</h4>\n                        </div>\n                        <div class=\"modal-body\">\n                            <form>\n                                <div class=\"form-group\">\n                                    <label>Grid size</label>\n                                    <input type=\"text\" class=\"form-control chickenpaint-grid-size\" value=\"\" autofocus>\n                                </div>\n                            </form>\n                        </div>\n                        <div class=\"modal-footer\">\n                            <button type=\"button\" class=\"btn btn-default\" data-dismiss=\"modal\">Cancel</button>\n                            <button type=\"button\" class=\"btn btn-primary chickenpaint-apply-grid-settings\" data-dismiss=\"modal\">Ok</button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        "),
        gridSizeElem = $(".chickenpaint-grid-size", dialog),
        applyButton = $(".chickenpaint-apply-grid-settings", dialog);

    gridSizeElem.val(canvas.getGridSize());

    $(".chickenpaint-apply-grid-settings", dialog).click(function (e) {
        var gridSize = parseInt(gridSizeElem.val(), 10);

        canvas.setGridSize(gridSize);
    });

    dialog.modal({
        show: false
    }).on('shown.bs.modal', function () {
        gridSizeElem.focus();
    }).on('keypress', function (e) {
        if (e.keyCode == 13) {
            applyButton.click();
        }
    });

    // Fix the backdrop location in the DOM by reparenting it to the chickenpaint container
    dialog.data("bs.modal").$body = $(parent);

    parent.appendChild(dialog[0]);

    this.show = function () {
        dialog.modal("show");
    };
}

module.exports = exports["default"];

},{}],27:[function(require,module,exports){
/*
    ChickenPaint
    
    ChickenPaint is a translation of ChibiPaint from Java to JavaScript
    by Nicholas Sherlock / Chicken Smoothie.
    
    ChibiPaint is Copyright (c) 2006-2008 Marc Schefer

    ChickenPaint is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    ChickenPaint is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with ChickenPaint. If not, see <http://www.gnu.org/licenses/>.
*/

"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports["default"] = CPLayersPalette;

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

var _CPPalette = require("./CPPalette");

var _CPPalette2 = _interopRequireDefault(_CPPalette);

var _CPSlider = require("./CPSlider");

var _CPSlider2 = _interopRequireDefault(_CPSlider);

function CPLayersPalette(controller) {
    _CPPalette2["default"].call(this, controller, "layers", "Layers", true);

    var MODE_NAMES = ["Normal", "Multiply", "Add", "Screen", "Lighten", "Darken", "Subtract", "Dodge", "Burn", "Overlay", "Hard Light", "Soft Light", "Vivid Light", "Linear Light", "Pin Light"];

    var layerH = 32,
        eyeW = 24,
        body = this.getBodyElement(),
        layerWidget = new CPLayerWidget(),
        alphaSlider = new _CPSlider2["default"](0, 100),
        blendCombo = document.createElement("select"),
        renameField = new CPRenameField(),
        cbSampleAllLayers = document.createElement("input"),
        cbLockAlpha = document.createElement("input"),
        addButton = document.createElement("li"),
        removeButton = document.createElement("li");

    function fillCombobox(combo, optionNames) {
        for (var i = 0; i < optionNames.length; i++) {
            var option = document.createElement("option");

            option.appendChild(document.createTextNode(optionNames[i]));
            option.value = i;

            combo.appendChild(option);
        }
    }

    function wrapCheckboxWithLabel(checkbox, title) {
        var div = document.createElement("div"),
            label = document.createElement("label");

        div.className = "checkbox";

        label.appendChild(checkbox);
        label.appendChild(document.createTextNode(title));

        div.appendChild(label);

        return div;
    }

    function showRenameControl(layerIndex) {
        var d = layerWidget.getCSSSize(),
            artwork = controller.getArtwork(),
            layer = artwork.getLayer(layerIndex);

        renameField.show(eyeW / window.devicePixelRatio, d.height - (layerIndex + 1) * layerH / window.devicePixelRatio, layerIndex, layer.name);
    }

    var parentSetSize = this.setSize,
        parentSetHeight = this.setHeight;

    this.setSize = function (w, h) {
        parentSetSize.call(this, w, h);

        layerWidget.resize();
        alphaSlider.resize();
    };

    this.setHeight = function (h) {
        parentSetHeight.call(this, h);

        layerWidget.resize();
    };

    function CPLayerWidget() {
        var layerDrag,
            layerDragReally,
            layerDragIndex,
            layerDragY,
            container = document.createElement("div"),
            canvas = document.createElement("canvas"),
            canvasContext = canvas.getContext("2d"),
            that = this;

        /**
         * Get the size of the component on screen in CSS pixels.
         */
        this.getCSSSize = function () {
            return { width: $(canvas).width(), height: $(canvas).height() };
        };

        function getLayerIndex(point) {
            return Math.floor((canvas.height - point.y / $(canvas).height() * canvas.height) / layerH);
        }

        /**
         * @param layer CPLayer
         * @param selected boolean
         */
        function drawLayer(layer, selected) {
            var d = { width: canvas.width, height: canvas.height };

            if (selected) {
                canvasContext.fillStyle = '#B0B0C0';
            } else {
                canvasContext.fillStyle = 'white';
            }
            canvasContext.fillRect(0, 0, d.width, layerH);

            canvasContext.beginPath();

            canvasContext.moveTo(0, 0);
            canvasContext.lineTo(d.width, 0);

            canvasContext.moveTo(eyeW, 0);
            canvasContext.lineTo(eyeW, layerH);

            canvasContext.moveTo(eyeW + 6 * window.devicePixelRatio, layerH / 2);
            canvasContext.lineTo(d.width - 6 * window.devicePixelRatio, layerH / 2);

            canvasContext.stroke();

            canvasContext.fillStyle = 'black';

            canvasContext.fillText(layer.name, eyeW + 6 * window.devicePixelRatio, 12 * window.devicePixelRatio);
            canvasContext.fillText(MODE_NAMES[layer.blendMode] + ": " + layer.alpha + "%", eyeW + 6 * window.devicePixelRatio, layerH - 5 * window.devicePixelRatio);

            canvasContext.beginPath();
            if (layer.visible) {
                canvasContext.arc(eyeW / 2, layerH / 2, 10 * window.devicePixelRatio, 0, Math.PI * 2);
                canvasContext.fill();
            } else {
                canvasContext.arc(eyeW / 2, layerH / 2, 10 * window.devicePixelRatio, 0, Math.PI * 2);
                canvasContext.stroke();
            }
        }

        function mouseUp(e) {
            if (e.button == 0) {
                var offset = $(canvas).offset(),
                    artwork = controller.getArtwork(),
                    layers = artwork.getLayers(),
                    mouseLoc = { x: e.pageX - offset.left, y: e.pageY - offset.top },
                    layerOver = getLayerIndex(mouseLoc);

                //layerDragY = e.pageY - offset.top;

                if (layerOver >= 0 && layerOver <= layers.length && layerOver != layerDragIndex && layerOver != layerDragIndex + 1) {
                    artwork.moveLayer(layerDragIndex, layerOver);
                }

                // Do we need to repaint to erase draglines?
                if (layerDragReally) {
                    layerDragReally = false;
                    that.paint();
                }

                layerDrag = false;

                window.removeEventListener("mousemove", mouseDragged);
                window.removeEventListener("mouseup", mouseUp);
            }
        }

        function mouseDragged(e) {
            if (layerDrag) {
                layerDragReally = true;
                layerDragY = e.pageY - $(canvas).offset().top;
                that.paint();
            }
        }

        /**
         * Repaint just the layer with the specified index
         */
        this.paintLayer = function (layerIndex) {
            var layer = artwork.getLayer(layerIndex),
                layerTop = canvas.height - layerH * (layerIndex + 1);

            canvasContext.save();

            canvasContext.fillStyle = '#606060';
            canvasContext.fillRect(0, layerTop, canvas.width, layerH);

            canvasContext.strokeStyle = 'black';

            canvasContext.translate(0, layerTop);
            drawLayer(layer, layerIndex == artwork.getActiveLayerIndex());

            canvasContext.restore();
        };

        /**
         * Repaint the entire control
         */
        this.paint = function () {
            var artwork = controller.getArtwork(),
                layers = artwork.getLayers(),
                d = { width: canvas.width, height: canvas.height },
                canvasScaleFactor = canvas.height / $(canvas).height();

            canvasContext.save();

            canvasContext.fillStyle = '#606060';
            canvasContext.fillRect(0, 0, d.width, d.height - layers.length * layerH);

            canvasContext.strokeStyle = 'black';

            // Draw the list of layers, with the first layer at the bottom of the control
            canvasContext.translate(0, d.height - layerH);

            for (var i = 0; i < layers.length; i++) {
                drawLayer(layers[i], i == artwork.getActiveLayerIndex());
                canvasContext.translate(0, -layerH);
            }

            if (layerDragReally) {
                canvasContext.translate(0, layers.length * layerH - (d.height - layerH));
                canvasContext.strokeRect(0, layerDragY * canvasScaleFactor - layerH / 2, d.width, layerH);

                var layerOver = getLayerIndex({ x: 0, y: layerDragY });

                if (layerOver <= layers.length && layerOver != layerDragIndex && layerOver != layerDragIndex + 1) {
                    canvasContext.fillRect(0, d.height - layerOver * layerH - 2, d.width, 4 * window.devicePixelRatio);
                }
            }

            canvasContext.restore();
        };

        this.resize = function () {
            var artwork = controller.getArtwork(),

            // Our parent container will act as our scrollbar clip area
            parent = $(canvas).parent(),
                parentHeight = parent.height(),
                parentWidth = parent.width(),
                newWidth,
                newHeight;

            layerH = 34 * window.devicePixelRatio;
            eyeW = 24 * window.devicePixelRatio;

            newWidth = parentWidth * window.devicePixelRatio;
            newHeight = Math.max(layerH * artwork.getLayerCount(), parentHeight * window.devicePixelRatio);

            // Should we trigger a scrollbar to appear?
            if (newHeight > parentHeight * window.devicePixelRatio) {
                // Take the scrollbar width into account in our width
                newWidth -= 15 * window.devicePixelRatio;
                parent[0].style.overflowY = 'scroll';
            } else {
                parent[0].style.overflowY = 'hidden';
            }

            canvas.width = newWidth;
            canvas.height = newHeight;

            canvas.style.width = newWidth / window.devicePixelRatio + "px";
            canvas.style.height = newHeight / window.devicePixelRatio + "px";

            canvasContext.font = layerH * 0.25 + "pt sans-serif";

            this.paint();
        };

        this.getElement = function () {
            return container;
        };

        canvas.addEventListener("click", function (e) {
            if (renameField.isVisible()) {
                renameField.renameAndHide();
            }
        });

        canvas.addEventListener("dblclick", function (e) {
            var offset = $(canvas).offset(),
                mouseLoc = { x: e.pageX - offset.left, y: e.pageY - offset.top },
                layerIndex = getLayerIndex(mouseLoc);

            if (mouseLoc.x * window.devicePixelRatio > eyeW && layerIndex >= 0 && layerIndex < artwork.getLayerCount()) {
                showRenameControl(layerIndex);
            }
        });

        canvas.addEventListener("mousedown", function (e) {
            var offset = $(canvas).offset(),
                mouseLoc = { x: e.pageX - offset.left, y: e.pageY - offset.top };

            /* Click, moved from mouseClicked due to problems with focus and stuff */
            if (e.button == 0) {
                /* Left button */
                var artwork = controller.getArtwork(),
                    layers = artwork.getLayers(),
                    layerIndex = getLayerIndex(mouseLoc);

                if (layerIndex >= 0 && layerIndex < artwork.getLayerCount()) {
                    var layer = artwork.getLayer(layerIndex);

                    if (mouseLoc.x / $(canvas).width() * canvas.width < eyeW) {
                        artwork.setLayerVisibility(layerIndex, !layer.visible);
                    } else {
                        artwork.setActiveLayerIndex(layerIndex);
                        // Since this is a slow GUI operation, this is a good chance to get the canvas ready for drawing
                        artwork.performIdleTasks();
                    }
                }

                if (layerIndex < layers.length) {
                    layerDrag = true;
                    layerDragY = mouseLoc.y;
                    layerDragIndex = layerIndex;

                    window.addEventListener("mousemove", mouseDragged);
                    window.addEventListener("mouseup", mouseUp);
                }
            }
        });

        if (!window.devicePixelRatio) {
            window.devicePixelRatio = 1.0;
        }

        canvasContext.strokeStyle = 'black';

        container.className = "chickenpaint-layers-widget";
        container.appendChild(canvas);
    }

    function CPRenameField() {
        var layerIndex = -1,
            textBox = document.createElement("input"),
            that = this;

        this.hide = function () {
            layerIndex = -1;
            textBox.style.display = 'none';
        };

        this.renameAndHide = function () {
            var artwork = controller.getArtwork();

            artwork.setLayerName(layerIndex, textBox.value);

            this.hide();
        };

        this.isVisible = function () {
            return textBox.style.display != 'none';
        };

        this.setLocation = function (positionX, positionY) {
            textBox.style.left = positionX + "px";
            textBox.style.top = positionY + "px";
        };

        this.show = function (x, y, _layerIndex, layerName) {
            layerIndex = _layerIndex;
            textBox.value = layerName;
            this.setLocation(x, y);

            textBox.style.display = 'block';
            textBox.select();
        };

        this.getElement = function () {
            return textBox;
        };

        textBox.type = "text";
        textBox.className = "chickenpaint-layer-new-name form-control input-sm";
        textBox.style.display = 'none';

        textBox.addEventListener("keydown", function (e) {
            // Prevent other keyhandlers (CPCanvas) from getting their grubby hands on the input
            e.stopPropagation();
        });

        textBox.addEventListener("keypress", function (e) {
            if (e.keyCode == 13) {
                // Enter
                that.renameAndHide();
            }
            e.stopPropagation();
        });

        textBox.addEventListener("keyup", function (e) {
            if (e.keyCode == 27) {
                // Escape
                that.hide();
            }
            e.stopPropagation();
        });

        textBox.addEventListener("blur", function (e) {
            that.renameAndHide();
        });
    }

    blendCombo.className = "form-control";
    blendCombo.title = "Layer blending mode";
    blendCombo.addEventListener("change", function (e) {
        var artwork = controller.getArtwork();

        artwork.setLayerBlendMode(artwork.getActiveLayerIndex(), parseInt(blendCombo.value, 10));
    });

    fillCombobox(blendCombo, MODE_NAMES);

    body.appendChild(blendCombo);

    alphaSlider.title = function (value) {
        return "Opacity: " + value + "%";
    };

    alphaSlider.on("valueChange", function (value) {
        var artwork = controller.getArtwork();

        artwork.setLayerAlpha(artwork.getActiveLayerIndex(), value);
    });

    body.appendChild(alphaSlider.getElement());

    cbSampleAllLayers.type = "checkbox";
    cbSampleAllLayers.addEventListener("click", function (e) {
        var artwork = controller.getArtwork();

        artwork.setSampleAllLayers(cbSampleAllLayers.checked);
    });

    body.appendChild(wrapCheckboxWithLabel(cbSampleAllLayers, "Sample all layers"));

    cbLockAlpha.type = "checkbox";
    cbLockAlpha.addEventListener("click", function (e) {
        var artwork = controller.getArtwork();

        artwork.setLockAlpha(cbLockAlpha.checked);
    });

    body.appendChild(wrapCheckboxWithLabel(cbLockAlpha, "Lock alpha"));

    layerWidget.getElement().appendChild(renameField.getElement());

    body.appendChild(layerWidget.getElement());

    // Add/Remove layer buttons
    var addRemoveContainer = document.createElement("ul");

    addRemoveContainer.className = 'chickenpaint-layer-add-remove list-unstyled';

    addButton.className = 'chickenpaint-small-toolbar-button chickenpaint-add-layer';
    addButton.title = 'Add layer';
    addButton.addEventListener("click", function () {
        controller.getArtwork().addLayer();
    });

    removeButton.className = 'chickenpaint-small-toolbar-button chickenpaint-remove-layer';
    removeButton.title = "Delete layer";
    removeButton.addEventListener("click", function () {
        if (!controller.getArtwork().removeLayer()) {
            alert("Error: You can't remove the last remaining layer in the drawing.");
        }
    });

    addRemoveContainer.appendChild(addButton);
    addRemoveContainer.appendChild(removeButton);

    body.appendChild(addRemoveContainer);

    // Set initial values
    var artwork = controller.getArtwork();

    alphaSlider.setValue(artwork.getActiveLayer().getAlpha());
    blendCombo.value = artwork.getActiveLayer().getBlendMode();

    // add listeners
    controller.getArtwork().on("changeLayer", function (layerIndex) {
        var artwork = this;

        if (artwork.getActiveLayer().getAlpha() != alphaSlider.value) {
            alphaSlider.setValue(artwork.getActiveLayer().getAlpha());
        }

        if (artwork.getActiveLayer().getBlendMode() != parseInt(blendCombo.value, 10)) {
            blendCombo.value = artwork.getActiveLayer().getBlendMode();
        }

        if (layerIndex !== undefined) {
            layerWidget.paintLayer(layerIndex);
        } else {
            // We may have added or removed layers, resize as appropriate
            layerWidget.resize();
        }
    });
}

CPLayersPalette.prototype = Object.create(_CPPalette2["default"].prototype);
CPLayersPalette.prototype.constructor = CPLayersPalette;
module.exports = exports["default"];

},{"./CPPalette":31,"./CPSlider":36}],28:[function(require,module,exports){
/*
    ChickenPaint
    
    ChickenPaint is a translation of ChibiPaint from Java to JavaScript
    by Nicholas Sherlock / Chicken Smoothie.
    
    ChibiPaint is Copyright (c) 2006-2008 Marc Schefer

    ChickenPaint is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    ChickenPaint is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with ChickenPaint. If not, see <http://www.gnu.org/licenses/>.
*/

"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports["default"] = CPMainGUI;

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

var _CPCanvas = require("./CPCanvas");

var _CPCanvas2 = _interopRequireDefault(_CPCanvas);

var _CPPaletteManager = require("./CPPaletteManager");

var _CPPaletteManager2 = _interopRequireDefault(_CPPaletteManager);

var _CPMainMenu = require("./CPMainMenu");

var _CPMainMenu2 = _interopRequireDefault(_CPMainMenu);

function CPMainGUI(controller, uiElem) {
    var lowerArea = document.createElement("div"),
        canvas = new _CPCanvas2["default"](controller),
        paletteManager = new _CPPaletteManager2["default"](controller),
        menuBar,
        fullScreenMode = false,
        that = this;

    this.togglePalettes = function () {
        paletteManager.togglePalettes();
    };

    this.arrangePalettes = function () {
        // Give the browser a chance to do the sizing of the palettes before we try to rearrange them
        setTimeout(paletteManager.arrangePalettes.bind(paletteManager), 0);
    };

    this.constrainPalettes = function () {
        paletteManager.constrainPalettes();
    };

    this.showPalette = function (paletteName, show) {
        paletteManager.showPaletteByName(paletteName, show);
    };

    this.getSwatches = function () {
        return paletteManager.palettes.swatches.getSwatches();
    };

    this.setSwatches = function (swatches) {
        paletteManager.palettes.swatches.setSwatches(swatches);
    };

    this.getPaletteManager = function () {
        return paletteManager;
    };

    this.setRotation = function (rotation) {
        canvas.setRotation(rotation);
    };

    this.setFullScreenMode = function (value) {
        fullScreenMode = value;

        that.resize();
        that.arrangePalettes();
    };

    this.resize = function () {
        var newHeight;

        if (fullScreenMode) {
            newHeight = $(window).height() - $(menuBar.getElement()).height();
        } else {
            newHeight = Math.min(Math.max($(window).height() - $(menuBar.getElement()).height() - 65, 500), 750);
        }

        canvas.resize(newHeight);
        that.constrainPalettes();
    };

    menuBar = new _CPMainMenu2["default"](controller, this);

    uiElem.appendChild(menuBar.getElement());

    lowerArea.className = 'chickenpaint-main-section';

    lowerArea.appendChild(canvas.getElement());
    lowerArea.appendChild(paletteManager.getElement());

    uiElem.appendChild(lowerArea);

    window.addEventListener("resize", this.resize.bind(this));

    setTimeout(this.resize.bind(this), 0);
}

CPMainGUI.prototype = Object.create(EventEmitter.prototype);
CPMainGUI.prototype.constructor = CPMainGUI;
module.exports = exports["default"];

},{"./CPCanvas":19,"./CPMainMenu":29,"./CPPaletteManager":32}],29:[function(require,module,exports){
/*
    ChickenPaint
    
    ChickenPaint is a translation of ChibiPaint from Java to JavaScript
    by Nicholas Sherlock / Chicken Smoothie.
    
    ChibiPaint is Copyright (c) 2006-2008 Marc Schefer

    ChickenPaint is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    ChickenPaint is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with ChickenPaint. If not, see <http://www.gnu.org/licenses/>.
*/

"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports["default"] = CPMainMenu;
var MENU_ENTRIES = [{
    name: "File",
    mnemonic: "F",
    children: [{
        name: "Save to my computer",
        action: "CPSave",
        mnemonic: "S",
        shortcut: "ctrl+s"
    }, {
        name: "Save Oekaki",
        action: "CPSend",
        mnemonic: "S",
        shortcut: "ctrl+s"
    }]
}, {
    name: "Edit",
    mnemonic: "E",
    children: [{
        name: "Undo",
        action: "CPUndo",
        mnemonic: "U",
        shortcut: "ctrl+z",
        title: "Undoes the most recent action"
    }, {
        name: "Redo",
        action: "CPRedo",
        mnemonic: "R",
        shortcut: "shift+ctrl+z",
        title: "Redoes a previously undone action"
    }, {
        name: "Clear history",
        action: "CPClearHistory",
        mnemonic: "H",
        title: "Removes all undo/redo information to regain memory"
    }, {
        name: "-"
    }, {
        name: "Cut",
        action: "CPCut",
        mnemonic: "T",
        shortcut: "ctrl+x"
    }, {
        name: "Copy",
        action: "CPCopy",
        mnemonic: "C",
        shortcut: "ctrl+c"
    }, {
        name: "Copy merged",
        action: "CPCopyMerged",
        mnemonic: "Y",
        shortcut: "shift+ctrl+c"
    }, {
        name: "Paste",
        action: "CPPaste",
        mnemonic: "P",
        shortcut: "ctrl+v"
    }, {
        name: "-"
    }, {
        name: "Select all",
        action: "CPSelectAll",
        mnemonic: "A",
        shortcut: "ctrl+a"
    }, {
        name: "Deselect",
        action: "CPDeselectAll",
        mnemonic: "D",
        shortcut: "ctrl+d"
    }]
}, {
    name: "Layers",
    mnemonic: "L",
    children: [{
        name: "Duplicate",
        action: "CPLayerDuplicate",
        mnemonic: "D",
        shortcut: "shift+ctrl+d",
        title: "Creates a copy of the currently selected layer"
    }, {
        name: "-"
    }, {
        name: "Merge down",
        action: "CPLayerMergeDown",
        mnemonic: "E",
        shortcut: "ctrl+e",
        title: "Merges the currently selected layer with the one directly below it"
    }, {
        name: "Merge all layers",
        action: "CPLayerMergeAll",
        mnemonic: "A",
        title: "Merges all the layers"
    }]
}, {
    name: "Effects",
    mnemonic: "E",
    children: [{
        name: "Clear",
        action: "CPClear",
        mnemonic: "D",
        shortcut: "del,backspace",
        title: "Clears the selected area"
    }, {
        name: "Fill",
        action: "CPFill",
        mnemonic: "F",
        shortcut: "ctrl+f",
        title: "Fills the selected area with the current color"
    }, {
        name: "Flip horizontal",
        action: "CPHFlip",
        mnemonic: "H",
        title: "Flips the current selected area horizontally"
    }, {
        name: "Flip vertical",
        action: "CPVFlip",
        mnemonic: "V",
        title: "Flips the current selected area vertically"
    }, {
        name: "Invert",
        action: "CPFXInvert",
        mnemonic: "I",
        title: "Invert the image colors"
    }, {
        name: "-"
    }, {
        name: "Box blur...",
        action: "CPFXBoxBlur",
        mnemonic: "B",
        title: "Blur effect"
    }, {
        name: "-"
    }, {
        name: "Monochromatic noise",
        action: "CPMNoise",
        mnemonic: "M",
        title: "Fills the selection with noise"
    }, {
        name: "Color noise",
        action: "CPCNoise",
        mnemonic: "C",
        title: "Fills the selection with colored noise"
    }]
}, {
    name: "View",
    mnemonic: "V",
    children: [{
        name: "Full-screen mode",
        action: "CPFullScreen",
        mnemonic: "F",
        checkbox: true,
        checked: false
    }, {
        name: "-"
    }, {
        name: "Zoom in",
        action: "CPZoomIn",
        mnemonic: "I",
        shortcut: "ctrl+=",
        title: "Zooms in"
    }, {
        name: "Zoom out",
        action: "CPZoomOut",
        mnemonic: "O",
        shortcut: "ctrl+-",
        title: "Zooms out"
    }, {
        name: "Zoom 100%",
        action: "CPZoom100",
        mnemonic: "1",
        shortcut: "ctrl+0",
        title: "Resets the zoom factor to 100%"
    }, {
        name: "-"
    }, {
        name: "Smooth-out zoomed canvas",
        action: "CPLinearInterpolation",
        mnemonic: "L",
        title: "Linear interpolation is used to give a smoothed looked to the picture when zoomed in",
        checkbox: true
    }, {
        name: "-"
    }, {
        name: "Show grid",
        action: "CPToggleGrid",
        mnemonic: "G",
        shortcut: "ctrl+g",
        title: "Displays a grid over the image",
        checkbox: true,
        checked: false
    }, {
        name: "Grid options...",
        action: "CPGridOptions",
        mnemonic: "D",
        title: "Shows the grid options dialog box"
    }]
}, {
    name: "Palettes",
    mnemonic: "P",
    children: [{
        name: "Rearrange",
        action: "CPArrangePalettes",
        title: "Rearrange the palette windows"
    }, {
        name: "Toggle palettes",
        action: "CPTogglePalettes",
        mnemonic: "P",
        shortcut: "tab",
        title: "Hides or shows all palettes"
    }, {
        name: "-"
    }, {
        name: "Show tool options",
        action: "CPPalBrush",
        mnemonic: "B",
        checkbox: true,
        checked: true
    }, {
        name: "Show color",
        action: "CPPalColor",
        mnemonic: "C",
        checkbox: true,
        checked: true
    }, {
        name: "Show layers",
        action: "CPPalLayers",
        mnemonic: "Y",
        checkbox: true,
        checked: true
    }, {
        name: "Show misc",
        action: "CPPalMisc",
        mnemonic: "M",
        checkbox: true,
        checked: true
    }, {
        name: "Show stroke",
        action: "CPPalStroke",
        mnemonic: "S",
        checkbox: true,
        checked: true
    }, {
        name: "Show swatches",
        action: "CPPalSwatches",
        mnemonic: "W",
        checkbox: true,
        checked: true
    }, {
        name: "Show textures",
        action: "CPPalTextures",
        mnemonic: "X",
        checkbox: true,
        checked: true
    }, {
        name: "Show tools",
        action: "CPPalTool",
        mnemonic: "T",
        checkbox: true,
        checked: true
    }]
}, {
    name: "Help",
    mnemonic: "H",
    children: [{
        name: "Tablet support",
        mnemonic: "T",
        action: "CPTabletSupport",
        title: "Help with getting a drawing tablet working"
    }, {
        name: "Shortcuts",
        mnemonic: "S",
        action: "CPShortcuts",
        title: "List of keyboard and mouse shortcuts"
    }, {
        name: "-"
    }, {
        name: "About",
        mnemonic: "A",
        action: "CPAbout",
        title: "Displays some information about ChickenPaint"
    }]
}];

function CPMainMenu(controller, mainGUI) {
    var bar = $('<nav class="navbar navbar-default">' + '<div class="container-fluid">' + '<div class="navbar-header">' + '<a class="navbar-brand" href="#">ChickenPaint</a>' + '</div>' + '<ul class="nav navbar-nav">' + '</ul>' + '</div>' + '</nav>'),
        macPlatform = /^Mac/i.test(navigator.platform);

    function menuItemClicked(target) {
        var action = target.data('action'),
            checkbox = target.data('checkbox'),
            selected;

        if (checkbox) {
            target.toggleClass("selected");
            selected = target.hasClass("selected");
        } else {
            selected = false;
        }

        controller.actionPerformed({
            action: action,
            checkbox: checkbox,
            selected: selected
        });
    }

    function presentShortcutText(shortcut) {
        shortcut = shortcut.toUpperCase();

        // Only show the first potential shortcut out of the comma-separated list
        shortcut = shortcut.replace(/(,.+)$/, "");

        // Although the keycode for zoom in is "=", we'll present it to the user as "+"
        shortcut = shortcut.replace("ctrl+=", "ctrl++");
        shortcut = shortcut.replace("⌘+=", "⌘++");

        if (macPlatform) {
            shortcut = shortcut.replace(/([^+])\+/g, "$1");
        } else {
            shortcut = shortcut.replace(/([^+])\+/g, "$1 ");
        }

        return shortcut;
    }

    function recurseFillMenu(menuElem, entries) {
        menuElem.append(entries.map(function (entry) {
            var entryElem;

            if (entry.action && !controller.isActionSupported(entry.action)) {
                return;
            }

            if (entry.children) {
                entryElem = $('<li class="dropdown">' + '<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">' + entry.name + ' <span class="caret"></span></a>' + '<ul class="dropdown-menu">' + '</ul>' + '</li>');

                $(".dropdown-toggle", entryElem).dropdown();

                entryElem.on("show.bs.dropdown", function () {
                    /* Instead of Bootstrap's extremely expensive data API, we'll only listen for dismiss clicks on the
                     * document *while the menu is open!*
                     */
                    $(document).one("click", function () {
                        if (entryElem.hasClass("open")) {
                            $(".dropdown-toggle", entryElem).dropdown("toggle");
                        }
                    });
                });

                recurseFillMenu($(".dropdown-menu", entryElem), entry.children);
            } else if (entry.name == '-') {
                entryElem = $('<li role="separator" class="divider"></li>');
            } else {
                entryElem = $('<li><a href="#" data-action="' + entry.action + '"><span>' + entry.name + '</span></a></li>');

                if (entry.checkbox) {
                    $("a", entryElem).data("checkbox", true).toggleClass("selected", !!entry.checked);
                }
            }

            if (entry.title) {
                entryElem.attr('title', entry.title);
            }

            if (entry.shortcut) {
                var menuLink = $("> a", entryElem),
                    shortcutDesc = document.createElement("small");

                // Rewrite the shortcuts to Mac-style
                if (macPlatform) {
                    entry.shortcut = entry.shortcut.replace(/SHIFT/im, "⇧");
                    entry.shortcut = entry.shortcut.replace(/ALT/im, "⌥");
                    entry.shortcut = entry.shortcut.replace(/CTRL/im, "⌘");
                }

                shortcutDesc.className = "chickenpaint-shortcut";
                shortcutDesc.innerHTML = presentShortcutText(entry.shortcut);

                menuLink.append(shortcutDesc);

                key(entry.shortcut, function () {
                    menuItemClicked(menuLink);

                    return false;
                });
            }

            return entryElem;
        }));
    }

    this.getElement = function () {
        return bar[0];
    };

    recurseFillMenu($(".navbar-nav", bar), MENU_ENTRIES);

    $(bar).on('click', 'a:not(.dropdown-toggle)', function (e) {
        menuItemClicked($(this));
        e.preventDefault();
    });

    function onPaletteVisChange(paletteName, show) {
        // Toggle the tickbox of the corresponding menu entry to match the new palette visibility
        var palMenuEntry = $('[data-action=\"CPPal' + paletteName.substring(0, 1).toUpperCase() + paletteName.substring(1) + '\"]', bar);

        palMenuEntry.toggleClass("selected", show);
    }

    mainGUI.getPaletteManager().on("paletteVisChange", onPaletteVisChange);
}

module.exports = exports["default"];

},{}],30:[function(require,module,exports){
/*
    ChickenPaint
    
    ChickenPaint is a translation of ChibiPaint from Java to JavaScript
    by Nicholas Sherlock / Chicken Smoothie.
    
    ChibiPaint is Copyright (c) 2006-2008 Marc Schefer

    ChickenPaint is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    ChickenPaint is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with ChickenPaint. If not, see <http://www.gnu.org/licenses/>.
*/

"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports["default"] = CPMiscPalette;

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

var _CPPalette = require('./CPPalette');

var _CPPalette2 = _interopRequireDefault(_CPPalette);

function CPMiscPalette(cpController) {
    _CPPalette2["default"].call(this, cpController, "misc", "Misc");

    var that = this,
        buttons = [{
        className: "chickenpaint-tool-zoom-in",
        command: "CPZoomIn",
        toolTip: "Zoom in"
    }, {
        className: "chickenpaint-tool-zoom-out",
        command: "CPZoomOut",
        toolTip: "Zoom out"
    }, {
        className: "chickenpaint-tool-zoom-100",
        command: "CPZoom100",
        toolTip: "Zoom 100%"
    }, {
        className: "chickenpaint-tool-undo",
        command: "CPUndo",
        toolTip: "Undo"
    }, {
        className: "chickenpaint-tool-redo",
        command: "CPRedo",
        toolTip: "Redo"
    }, {
        className: "chickenpaint-tool-send",
        command: "CPSend",
        toolTip: "Save pic"
    }];

    function buildButtons() {
        var body = that.getBodyElement(),
            listElem = document.createElement("ul");

        listElem.className = "chickenpaint-misc-tools list-unstyled";

        for (var i in buttons) {
            var button = buttons[i],
                buttonElem = document.createElement("li");

            buttonElem.className = "chickenpaint-toolbar-button " + button.className;
            buttonElem.setAttribute("data-buttonIndex", i);

            listElem.appendChild(buttonElem);
        }

        listElem.addEventListener("mousedown", function (e) {
            if (e.target && e.target.nodeName == "LI") {
                $(e.target).addClass("selected");
            }
        });

        listElem.addEventListener("mouseup", function (e) {
            if (e.target && e.target.nodeName == "LI") {
                $(e.target).removeClass("selected");
            }
        });

        listElem.addEventListener("click", function (e) {
            if (e.target && e.target.nodeName == "LI") {
                var button = buttons[parseInt(e.target.getAttribute("data-buttonIndex"), 10)];

                cpController.actionPerformed({ action: button.command });
            }
        });

        body.appendChild(listElem);
    }

    buildButtons();
}

CPMiscPalette.prototype = Object.create(_CPPalette2["default"].prototype);
CPMiscPalette.prototype.constructor = CPMiscPalette;
module.exports = exports["default"];

},{"./CPPalette":31}],31:[function(require,module,exports){
/*
    ChickenPaint
    
    ChickenPaint is a translation of ChibiPaint from Java to JavaScript
    by Nicholas Sherlock / Chicken Smoothie.
    
    ChibiPaint is Copyright (c) 2006-2008 Marc Schefer

    ChickenPaint is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    ChickenPaint is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with ChickenPaint. If not, see <http://www.gnu.org/licenses/>.
*/

"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports["default"] = CPPalette;

function CPPalette(cpController, className, title, resizeVert) {
    this.title = title;
    this.name = className;
    this.resizeVert = resizeVert || false;

    var containerElement = document.createElement("div"),
        headElement = document.createElement("div"),
        closeButton = document.createElement("button"),
        bodyElement = document.createElement("div"),
        vertHandle = null,
        dragOffset,
        that = this;

    this.getElement = function () {
        return containerElement;
    };

    this.getBodyElement = function () {
        return bodyElement;
    };

    this.getWidth = function () {
        return $(containerElement).outerWidth();
    };

    this.getHeight = function () {
        return $(containerElement).outerHeight();
    };

    this.getX = function () {
        return parseInt(containerElement.style.left, 10) || 0;
    };

    this.getY = function () {
        return parseInt(containerElement.style.top, 10) || 0;
    };

    this.setLocation = function (x, y) {
        containerElement.style.left = x + "px";
        containerElement.style.top = y + "px";
    };

    this.setWidth = function (width) {
        containerElement.style.width = width + "px";
    };

    this.setHeight = function (height) {
        containerElement.style.height = height + "px";
    };

    this.setSize = function (width, height) {
        this.setWidth(width);
        this.setHeight(height);
    };

    function mouseDrag(e) {
        that.setLocation(e.pageX - dragOffset.x, e.pageY - dragOffset.y);
    }

    function mouseDragRelease(e) {
        window.removeEventListener("mousemove", mouseDrag);
        window.removeEventListener("mouseup", mouseDragRelease);
    }

    function vertHandleDrag(e) {
        that.setHeight(e.pageY - $(containerElement).offset().top);
    }

    function vertHandleRelease(e) {
        window.removeEventListener("mousemove", vertHandleDrag);
        window.removeEventListener("mouseup", vertHandleRelease);
    }

    function vertHandleMouseDown(e) {
        window.addEventListener("mousemove", vertHandleDrag);
        window.addEventListener("mouseup", vertHandleRelease);
    }

    function addVertResizeHandle() {
        vertHandle = document.createElement("div");

        vertHandle.className = "chickenpaint-resize-handle-vert";

        vertHandle.addEventListener("mousedown", vertHandleMouseDown);

        containerElement.appendChild(vertHandle);
    }

    closeButton.type = "button";
    closeButton.className = "close";
    closeButton.innerHTML = "&times;";

    containerElement.className = "chickenpaint-palette chickenpaint-palette-" + className;

    headElement.className = "chickenpaint-palette-head";

    var headTitle = document.createElement("h4");

    headTitle.className = 'modal-title';
    headTitle.appendChild(document.createTextNode(this.title));

    headElement.appendChild(closeButton);
    headElement.appendChild(headTitle);

    bodyElement.className = "chickenpaint-palette-body";

    containerElement.appendChild(headElement);
    containerElement.appendChild(bodyElement);

    if (this.resizeVert) {
        addVertResizeHandle();
    }

    headElement.addEventListener("mousedown", function (e) {
        if (e.button == 0) {
            /* Left */
            if (e.target.nodeName == "BUTTON") {
                that.emitEvent("paletteVisChange", [that, false]);
            } else {
                window.addEventListener("mousemove", mouseDrag);
                window.addEventListener("mouseup", mouseDragRelease);

                dragOffset = { x: e.pageX - $(containerElement).position().left, y: e.pageY - $(containerElement).position().top };
            }
        }
    });
}

CPPalette.prototype = Object.create(EventEmitter.prototype);
CPPalette.prototype.constructor = EventEmitter;
module.exports = exports["default"];

},{}],32:[function(require,module,exports){
/*
    ChickenPaint
    
    ChickenPaint is a translation of ChibiPaint from Java to JavaScript
    by Nicholas Sherlock / Chicken Smoothie.
    
    ChibiPaint is Copyright (c) 2006-2008 Marc Schefer

    ChickenPaint is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    ChickenPaint is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with ChickenPaint. If not, see <http://www.gnu.org/licenses/>.
*/

"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports["default"] = CPPaletteManager;

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

var _CPToolPalette = require("./CPToolPalette");

var _CPToolPalette2 = _interopRequireDefault(_CPToolPalette);

var _CPMiscPalette = require("./CPMiscPalette");

var _CPMiscPalette2 = _interopRequireDefault(_CPMiscPalette);

var _CPStrokePalette = require("./CPStrokePalette");

var _CPStrokePalette2 = _interopRequireDefault(_CPStrokePalette);

var _CPColorPalette = require("./CPColorPalette");

var _CPColorPalette2 = _interopRequireDefault(_CPColorPalette);

var _CPBrushPalette = require("./CPBrushPalette");

var _CPBrushPalette2 = _interopRequireDefault(_CPBrushPalette);

var _CPLayersPalette = require("./CPLayersPalette");

var _CPLayersPalette2 = _interopRequireDefault(_CPLayersPalette);

var _CPTexturePalette = require("./CPTexturePalette");

var _CPTexturePalette2 = _interopRequireDefault(_CPTexturePalette);

var _CPSwatchesPalette = require("./CPSwatchesPalette");

var _CPSwatchesPalette2 = _interopRequireDefault(_CPSwatchesPalette);

function CPPaletteManager(cpController) {
    var palettes = {
        tool: new _CPToolPalette2["default"](cpController),
        misc: new _CPMiscPalette2["default"](cpController),
        stroke: new _CPStrokePalette2["default"](cpController),
        color: new _CPColorPalette2["default"](cpController),
        brush: new _CPBrushPalette2["default"](cpController),
        layers: new _CPLayersPalette2["default"](cpController),
        textures: new _CPTexturePalette2["default"](cpController),
        swatches: new _CPSwatchesPalette2["default"](cpController)
    },
        paletteFrames = [],
        hiddenFrames = [],
        parentElem = document.createElement("div"),
        that = this;

    this.palettes = palettes;

    function showPalette(palette, show) {
        var palElement = palette.getElement();

        if (show) {
            parentElem.appendChild(palElement);
        } else {
            parentElem.removeChild(palElement);
        }
        that.emitEvent("paletteVisChange", [palette.name, show]);

        // FIXME: focus hack
        // controller.canvas.grabFocus(); TODO
    }

    this.showPaletteByName = function (paletteName, show) {
        var palette = palettes[paletteName];

        if (palette) {
            showPalette(palette, show);
        }
    };

    this.togglePalettes = function () {
        if (hiddenFrames.length == 0) {
            $("> .chickenpaint-palette", parentElem).each(function () {
                that.showPaletteByName(this.getAttribute("data-paletteName"), false);
                hiddenFrames.push(this);
            });
        } else {
            for (var i = 0; i < hiddenFrames.length; i++) {
                var frame = hiddenFrames[i];

                that.showPaletteByName(frame.getAttribute("data-paletteName"), true);
            }
            hiddenFrames = [];
        }
    };

    /**
     * Pop palettes that are currently outside the visible area back into view.
     */
    this.constrainPalettes = function () {
        var windowWidth = $(parentElem).parents(".chickenpaint-main-section").width(),
            windowHeight = $(parentElem).parents(".chickenpaint-main-section").height();

        for (var i in palettes) {
            var palette = palettes[i];

            /* Move palettes that are more than half out of the frame back into it */
            if (palette.getX() + palette.getWidth() / 2 > windowWidth) {
                palette.setLocation(windowWidth - palette.getWidth(), palette.getY());
            }

            if (palette.getY() + palette.getHeight() / 2 > windowHeight) {
                palette.setLocation(palette.getX(), windowHeight - palette.getHeight());
            }
        }

        //Move small palettes to the front so that they aren't completely hidden
        //palettes.swatches.moveToFront();

        //Special handling for the swatches palette being under the brush palette:
        var widthToSpare = windowWidth - palettes.tool.getWidth() - palettes.misc.getWidth() - palettes.stroke.getWidth() - palettes.color.getWidth() - palettes.brush.getWidth() - 15 > 0;

        if (palettes.swatches.getX() + palettes.swatches.getWidth() == palettes.brush.getX() + palettes.brush.getWidth() && Math.abs(palettes.swatches.getY() - palettes.brush.getY()) < 20) {
            palettes.swatches.setLocation(palettes.brush.getX() - palettes.swatches.getWidth() - (widthToSpare ? 5 : 1), 0);
        }

        //Special handling for layers palette being too damn tall:
        if (palettes.layers.getY() + palettes.layers.getHeight() > windowHeight) {
            palettes.layers.setHeight(Math.max(windowHeight - palettes.layers.getY(), 200));
        }
    };

    /**
     * Rearrange the palettes from scratch into a useful arrangement.
     */
    this.arrangePalettes = function () {
        var windowWidth = $(parentElem).parents(".chickenpaint-main-section").width(),
            windowHeight = $(parentElem).parents(".chickenpaint-main-section").height(),
            haveWidthToSpare = windowWidth - palettes.tool.getWidth() - palettes.misc.getWidth() - palettes.stroke.getWidth() - palettes.color.getWidth() - palettes.brush.getWidth() - 15 > 0;

        palettes.brush.setLocation(windowWidth - palettes.brush.getWidth() - 15, 0);

        var bottomOfBrush = palettes.brush.getY() + palettes.brush.getHeight();

        palettes.layers.setLocation(palettes.brush.getX(), windowHeight - bottomOfBrush > 300 ? bottomOfBrush + 2 : bottomOfBrush);
        palettes.layers.setSize(palettes.brush.getWidth(), windowHeight - palettes.layers.getY());

        palettes.tool.setLocation(0, 0);

        palettes.misc.setLocation(palettes.tool.getX() + palettes.tool.getWidth() + (haveWidthToSpare ? 5 : 1), 0);

        if (haveWidthToSpare) {
            palettes.stroke.setLocation(palettes.misc.getX() + palettes.misc.getWidth() + (haveWidthToSpare ? 5 : 1), 0);
        } else {
            palettes.stroke.setLocation(palettes.misc.getX(), palettes.misc.getY() + palettes.misc.getHeight() + 1);
        }

        palettes.swatches.setLocation(palettes.brush.getX() - palettes.swatches.getWidth() - (haveWidthToSpare ? 5 : 1), 0);

        palettes.textures.setWidth(Math.min(palettes.layers.getX() - palettes.textures.getX(), 490));
        palettes.textures.setLocation(palettes.color.getX() + palettes.color.getWidth() + 4, windowHeight - palettes.textures.getHeight());

        palettes.color.setLocation(0, Math.max(palettes.tool.getY() + palettes.tool.getHeight(), windowHeight - palettes.color.getHeight()));
    };

    this.getElement = function () {
        return parentElem;
    };

    parentElem.className = "chickenpaint-palettes";

    for (var paletteName in palettes) {
        var palette = palettes[paletteName],
            palElement = palette.getElement();

        palette.on("paletteVisChange", function () {
            showPalette(this, false);
        });

        palElement.setAttribute("data-paletteName", paletteName);
        paletteFrames.push(palElement);
    }

    for (var paletteName in palettes) {
        var palElement = palettes[paletteName].getElement();

        parentElem.appendChild(palElement);
    }
}

CPPaletteManager.prototype = Object.create(EventEmitter.prototype);
CPPaletteManager.prototype.constructor = CPPaletteManager;
module.exports = exports["default"];

},{"./CPBrushPalette":18,"./CPColorPalette":21,"./CPLayersPalette":27,"./CPMiscPalette":30,"./CPStrokePalette":38,"./CPSwatchesPalette":39,"./CPTexturePalette":41,"./CPToolPalette":42}],33:[function(require,module,exports){
/*
    ChickenPaint
    
    ChickenPaint is a translation of ChibiPaint from Java to JavaScript
    by Nicholas Sherlock / Chicken Smoothie.
    
    ChibiPaint is Copyright (c) 2006-2008 Marc Schefer

    ChickenPaint is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    ChickenPaint is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with ChickenPaint. If not, see <http://www.gnu.org/licenses/>.
*/

/**
 * @param vertical boolean
 */
"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports["default"] = CPScrollbar;

function CPScrollbar(vertical) {
    var bar = document.createElement("div"),
        handle = document.createElement("div"),
        handleInner = document.createElement("div"),
        min = 0,
        max = 1,
        offset = 0,
        visibleRange = 1,
        blockIncrement = 10,
        unitIncrement = 1,
        valueIsAdjusting = false,
        handleSize = 1,
        dragLastOffset,
        that = this;

    function updateBar() {
        var longDimension = vertical ? $(bar).height() : $(bar).width();

        /* As the size of the document approaches the size of the container, handle size grows to fill the 
         * whole track:
         */
        handleSize = visibleRange / (max - min) * longDimension;

        var handleOffset = (offset - min) / (max - min) * (longDimension - handleSize);

        handleInner.style[vertical ? "height" : "width"] = handleSize + "px";
        handle.style[vertical ? "height" : "width"] = handleSize + "px";

        handle.style[vertical ? "top" : "left"] = handleOffset + "px";
    }

    this.setValues = function (_offset, _visibleRange, _min, _max) {
        offset = _offset;
        visibleRange = _visibleRange;
        min = _min;
        max = _max;

        updateBar();
    };

    this.setBlockIncrement = function (increment) {
        blockIncrement = increment;
    };

    this.setUnitIncrement = function (increment) {
        unitIncrement = increment;
    };

    this.getElement = function () {
        return bar;
    };

    this.getValueIsAdjusting = function () {
        return valueIsAdjusting;
    };

    function onBarClick(e) {
        if (this == bar) {
            var clickPos = vertical ? e.pageY - $(bar).offset().top : e.pageX - $(bar).offset().left,
                barPos = parseInt(handle.style[vertical ? "top" : "left"], 10);

            if (clickPos < barPos) {
                offset -= blockIncrement;
            } else {
                offset += blockIncrement;
            }

            that.emitEvent("valueChanged", [offset]);
            updateBar();
        }
    }

    function onHandlePress(e) {
        e.stopPropagation();
        dragLastOffset = vertical ? e.pageY - $(bar).offset().top : e.pageX - $(bar).offset().left;

        $(handle).addClass("dragging");
        window.addEventListener("mouseup", onHandleRelease);
        window.addEventListener("mousemove", onHandleDrag);
    }

    function onHandleClick(e) {
        e.stopPropagation();
    }

    function onHandleDrag(e) {
        valueIsAdjusting = true;

        var longDimension = vertical ? $(bar).height() : $(bar).width(),
            mouseOffset = vertical ? e.pageY - $(bar).offset().top : e.pageX - $(bar).offset().left;

        offset = offset + (mouseOffset - dragLastOffset) * (max - min) / (longDimension - handleSize);

        offset = Math.min(Math.max(offset, min), max);

        dragLastOffset = mouseOffset;

        that.emitEvent("valueChanged", [offset]);
        updateBar();

        valueIsAdjusting = false;
    }

    function onHandleRelease(e) {
        e.stopPropagation();
        $(handle).removeClass("dragging");
        window.removeEventListener("mouseup", onHandleRelease);
        window.removeEventListener("mousemove", onHandleDrag);
    }

    bar.className = "chickenpaint-scrollbar " + (vertical ? "chickenpaint-scrollbar-vertical" : "chickenpaint-scrollbar-horizontal");
    handle.className = "chickenpaint-scrollbar-handle";
    handleInner.className = "chickenpaint-scrollbar-handle-inner";

    handle.appendChild(handleInner);
    bar.appendChild(handle);

    handle.addEventListener("mousedown", onHandlePress);
    handle.addEventListener("click", onHandleClick);

    bar.addEventListener("click", onBarClick);
}

CPScrollbar.prototype = Object.create(EventEmitter.prototype);
CPScrollbar.prototype.constructor = CPScrollbar;
module.exports = exports["default"];

},{}],34:[function(require,module,exports){
/*
    ChickenPaint
    
    ChickenPaint is a translation of ChibiPaint from Java to JavaScript
    by Nicholas Sherlock / Chicken Smoothie.
    
    ChibiPaint is Copyright (c) 2006-2008 Marc Schefer

    ChickenPaint is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    ChickenPaint is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with ChickenPaint. If not, see <http://www.gnu.org/licenses/>.
*/

"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports["default"] = CPSendDialog;

function CPSendDialog(controller, parent, resourceSaver) {
    var dialog = $("<div class=\"modal fade\" tabindex=\"-1\" role=\"dialog\">\n                <div class=\"modal-dialog\">\n                \n                    <div class=\"modal-content\" data-stage=\"saving\">\n                        <div class=\"modal-header\">\n                            <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\n                                <span aria-hidden=\"true\">&times;</span>\n                            </button>\n                            <h4 class=\"modal-title\">Saving drawing...</h4>\n                        </div>\n                        <div class=\"modal-body\">\n                            <p class=\"chickenpaint-saving-progress-message\">Preparing your drawing to be saved, please wait...</p>\n                            <pre class=\"chickenpaint-saving-error-message pre-scrollable\"></pre>\n                            <div class=\"progress\">\n                                <div class=\"progress-bar\" role=\"progressbar\" aria-valuenow=\"0\" aria-valuemin=\"0\" aria-valuemax=\"100\" style=\"width: 0%;\"></div>\n                            </div>\n                        </div>\n                        <div class=\"modal-footer\">\n                            <button type=\"button\" class=\"btn btn-default chickenpaint-send-cancel\" data-dismiss=\"modal\">Cancel</button>\n                        </div>\n                    </div>\n                    <div class=\"modal-content\" data-stage=\"success-not-previously-posted\" style=\"display:none\">\n                        <div class=\"modal-header\">\n                            <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\n                                <span aria-hidden=\"true\">&times;</span>\n                            </button>\n                            <h4 class=\"modal-title\">Drawing saved!</h4>\n                        </div>\n                        <div class=\"modal-body\">\n                            <p>Your drawing has been saved, would you like to post it to the forum now?</p>\n                        </div>\n                        <div class=\"modal-footer\">\n                            <button type=\"button\" class=\"btn btn-primary chickenpaint-post-drawing\" data-dismiss=\"modal\">Yes, post it now</button>\n                            <button type=\"button\" class=\"btn btn-default\" data-dismiss=\"modal\">No, keep drawing</button>\n                            <button type=\"button\" class=\"btn btn-default chickenpaint-exit\" data-dismiss=\"modal\">No, quit and I'll finish it later</button>\n                        </div>\n                    </div>\n                    <div class=\"modal-content\" data-stage=\"success-already-posted\" style=\"display:none\">\n                        <div class=\"modal-header\">\n                            <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\n                                <span aria-hidden=\"true\">&times;</span>\n                            </button>\n                            <h4 class=\"modal-title\">Drawing saved!</h4>\n                        </div>\n                        <div class=\"modal-body\">\n                            <p>Your drawing has been saved, would you like to view it on the forum now?</p>\n                        </div>\n                        <div class=\"modal-footer\">\n                            <button type=\"button\" class=\"btn btn-primary chickenpaint-post-drawing\" data-dismiss=\"modal\">Yes, view the post</button>\n                            <button type=\"button\" class=\"btn btn-default\" data-dismiss=\"modal\">No, keep drawing</button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        "),
        progressMessageElem = $(".chickenpaint-saving-progress-message", dialog),
        progressError = $(".chickenpaint-saving-error-message", dialog),
        progressElem = $(".progress-bar", dialog),
        that = this;

    resourceSaver.on("savingProgress", function (progress, message) {
        progress *= 100;

        progressMessageElem.text(message);

        $(progressElem).attr("aria-valuenow", progress).css("width", progress + "%");
    });

    resourceSaver.on("savingComplete", function (progress) {
        $(".modal-content[data-stage='saving']", dialog).hide();

        if (controller.isActionSupported("CPExit")) {
            $(".modal-content[data-stage='success-not-previously-posted']", dialog).show();
        } else {
            $(".modal-content[data-stage='success-already-posted']", dialog).show();
        }
    });

    resourceSaver.on("savingFailure", function (serverMessage) {
        progressElem.addClass("progress-bar-danger");

        var errorMessage = "Sorry, your drawing could not be saved, please try again later.";

        if (serverMessage) {
            serverMessage = serverMessage.replace(/^CHIBIERROR\s*/, "");

            if (serverMessage.length > 0) {
                errorMessage += "<br><br>The error returned from the server was:";

                progressError.text(serverMessage).show();
            }

            progressMessageElem.html(errorMessage);
        }
    });

    $(".chickenpaint-post-drawing", dialog).click(function () {
        controller.actionPerformed({ action: "CPPost" });
    });

    $(".chickenpaint-exit", dialog).click(function () {
        alert("When you want to come back and finish your drawing, just click the 'new drawing' button again and " + "you can choose to continue this drawing.");
        controller.actionPerformed({ action: "CPExit" });
    });

    $(".chickenpaint-send-cancel", dialog).click(function () {
        resourceSaver.cancel();
    });

    // Destroy the modal upon close
    dialog.on("hidden.bs.modal", function (e) {
        dialog.remove();
    });

    dialog.modal({
        show: false
    });

    dialog.on('shown.bs.modal', function () {
        that.emitEvent("shown");
    });

    // Fix the backdrop location in the DOM by reparenting it to the chickenpaint container
    dialog.data("bs.modal").$body = $(parent);

    parent.appendChild(dialog[0]);

    this.show = function () {
        dialog.modal("show");
    };
}

CPSendDialog.prototype = Object.create(EventEmitter.prototype);
CPSendDialog.prototype.contructor = CPSendDialog;
module.exports = exports["default"];

},{}],35:[function(require,module,exports){
/*
    ChickenPaint
    
    ChickenPaint is a translation of ChibiPaint from Java to JavaScript
    by Nicholas Sherlock / Chicken Smoothie.
    
    ChibiPaint is Copyright (c) 2006-2008 Marc Schefer

    ChickenPaint is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    ChickenPaint is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with ChickenPaint. If not, see <http://www.gnu.org/licenses/>.
*/

"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports["default"] = CPShortcutsDialog;

function CPShortcutsDialog(parent) {
    var dialog = $("<div class=\"modal fade chickenpaint-shortcuts-dialog\" tabindex=\"-1\" role=\"dialog\">\n                <div class=\"modal-dialog modal-lg\">\n                    <div class=\"modal-content\">\n                        <div class=\"modal-header\">\n                            <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\n                                <span aria-hidden=\"true\">&times;</span>\n                            </button>\n                            <h4 class=\"modal-title\">Shortcuts</h4>\n                        </div>\n                        <div class=\"modal-body\">\n                            <p>\n                                Many of the menu options and painting tools have keyboard shortcuts which are\n                                written next to them or appear when you hover.\n                            </p>\n                            <p>\n                                Here are some other shortcuts which are not as obvious!\n                            </p>\n                            <div class=\"chickenpaint-shortcuts-sections\">\n                                <div class=\"chickenpaint-shortcuts-section\">\n                                    <h5>Color swatches palette</h5>\n                                    <ul class=\"chickenpaint-shortcuts-list list-unstyled\">\n                                        <li>\n                                            <dl>\n                                                <dt>\n                                                    <span class=\"chickenpaint-shortcut\"><span class=\"fa fa-mouse-pointer\"></span> Left</span>\n                                                </dt>\n                                                <dd>\n                                                    Use as the drawing color\n                                                </dd>\n                                                <dt>\n                                                    <span class=\"chickenpaint-shortcut\"><span class=\"fa fa-mouse-pointer\"></span> Right</span>\n                                                </dt>\n                                                <dd>\n                                                    Remove or replace a color swatch\n                                                </dd>\n                                             </dl>\n                                        </li>\n                                    </ul>\n                                </div>\n                                <div class=\"chickenpaint-shortcuts-section\">\n                                    <h5>Line drawing mode</h5>\n                                    <ul class=\"chickenpaint-shortcuts-list list-unstyled\">\n                                        <li>\n                                            <dl>\n                                                <dt>\n                                                    <span class=\"chickenpaint-shortcut\"><span class=\"chickenpaint-shortcut-key\">Shift</span> + <span class=\"fa fa-mouse-pointer\"></span> Left</span>\n                                                </dt>\n                                                <dd>\n                                                    Snap line to nearest 45 degrees\n                                                </dd>\n                                             </dl>\n                                        </li>\n                                    </ul>\n                                </div>\n                                <div class=\"chickenpaint-shortcuts-section\">\n                                    <h5>Painting tools</h5>\n                                    <ul class=\"chickenpaint-shortcuts-list list-unstyled\">\n                                        <li>\n                                            <dl>\n                                                <dt>\n                                                    <span class=\"chickenpaint-shortcut\"><span class=\"chickenpaint-shortcut-key\">1</span> - <span class=\"chickenpaint-shortcut-key\">9</span> , <span class=\"chickenpaint-shortcut-key\">0</span></span>\n                                                </dt>\n                                                <dd>\n                                                    Change brush opacity\n                                                </dd>\n                                                <dt>\n                                                    <span class=\"chickenpaint-shortcut\"><span class=\"chickenpaint-shortcut-key\">[</span> , <span class=\"chickenpaint-shortcut-key\">]</span></span>\n                                                </dt>\n                                                <dd>\n                                                    Change brush size\n                                                </dd>\n                                            </dl>\n                                        </li>\n                                    </ul>\n                                </div>\n                                <div class=\"chickenpaint-shortcuts-section\">\n                                    <h5>Brush palette</h5>\n                                    <ul class=\"chickenpaint-shortcuts-list list-unstyled\">\n                                        <li>\n                                            <dl>\n                                                <dt>\n                                                    <span class=\"chickenpaint-shortcut\"><span class=\"fa fa-mouse-pointer\"></span> Right drag</span>\n                                                </dt>\n                                                <dd>\n                                                    Adjust brush sliders more precisely\n                                                </dd>\n                                            </dl>\n                                        </li>\n                                    </ul>\n                                </div>\n                                <div class=\"chickenpaint-shortcuts-section\">\n                                    <h5>Drawing canvas</h5>\n                                    <ul class=\"chickenpaint-shortcuts-list list-unstyled\">\n                                        <li>\n                                            <dl>\n                                                <dt>\n                                                    <span class=\"chickenpaint-shortcut\"><span class=\"fa fa-mouse-pointer\"></span> Middle</span> <span class=\"chickenpaint-shortcut-alternate\">or</span> <span class=\"chickenpaint-shortcut\"><span class=\"chickenpaint-shortcut-key\">Space</span> + <span class=\"fa fa-mouse-pointer\"></span> Left</span>\n                                                </dt>\n                                                <dd>\n                                                    Move the canvas around\n                                                </dd>\n                                                <dt>\n                                                    <span class=\"chickenpaint-shortcut\"><span class=\"chickenpaint-shortcut-key\">Alt</span> + <span class=\"fa fa-mouse-pointer\"></span> Middle</span> <span class=\"chickenpaint-shortcut-alternate\">or</span> <span class=\"chickenpaint-shortcut\"><span class=\"chickenpaint-shortcut-key\">Alt</span> + <span class=\"chickenpaint-shortcut-key\">Space</span> + <span class=\"fa fa-mouse-pointer\"></span> Left</span>\n                                                </dt>\n                                                <dd>\n                                                    Rotate the canvas\n                                                </dd>\n                                                <dt>\n                                                    <span class=\"chickenpaint-shortcut\"><span class=\"fa fa-mouse-pointer\"></span> Right</span> <span class=\"chickenpaint-shortcut-alternate\">or</span> <span class=\"chickenpaint-shortcut\"><span class=\"chickenpaint-shortcut-key\">Alt</span> + <span class=\"fa fa-mouse-pointer\"></span> Left</span>\n                                                </dt>\n                                                <dd>\n                                                    Sample the color under the cursor\n                                                </dd>\n                                             </dl>\n                                        </li>\n                                    </ul>\n                                </div>\n                                <div class=\"chickenpaint-shortcuts-section\">\n                                    <h5>Layers palette</h5>\n                                    <ul class=\"chickenpaint-shortcuts-list list-unstyled\">\n                                        <li>\n                                            <dl>\n                                                <dt>\n                                                    <span class=\"chickenpaint-shortcut\"><span class=\"fa fa-mouse-pointer\"></span> Double click</span>\n                                                </dt>\n                                                <dd>\n                                                    Rename layer\n                                                </dd>\n                                             </dl>\n                                        </li>\n                                    </ul>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            ");

    // Destroy the modal upon close
    dialog.on("hidden.bs.modal", function (e) {
        dialog.remove();
    });

    dialog.modal({
        show: false
    });

    // Fix the backdrop location in the DOM by reparenting it to the chickenpaint container
    dialog.data("bs.modal").$body = $(parent);

    parent.appendChild(dialog[0]);

    this.show = function () {
        dialog.modal("show");
    };
}

module.exports = exports["default"];

},{}],36:[function(require,module,exports){
/*
    ChickenPaint
    
    ChickenPaint is a translation of ChibiPaint from Java to JavaScript
    by Nicholas Sherlock / Chicken Smoothie.
    
    ChibiPaint is Copyright (c) 2006-2008 Marc Schefer

    ChickenPaint is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    ChickenPaint is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with ChickenPaint. If not, see <http://www.gnu.org/licenses/>.
*/

/**
 * A simple slider control.
 */
"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports["default"] = CPSlider;

function CPSlider(minValue, maxValue, centerMode, expMode) {
    var PRECISE_DRAG_SCALE = 4,
        EXP_MODE_FACTOR = 1.5;

    var canvas = document.createElement("canvas"),
        canvasContext = canvas.getContext("2d"),
        valueRange = maxValue - minValue,
        dragNormal = false,
        dragPrecise = false,
        dragPreciseX,
        doneInitialPaint = false,
        that = this;

    this.value = undefined;

    /**
     * Either a string to draw on the slider, or a function(value) which receives the current value of the slider and
     * should return the string to be painted to the slider.
     *
     * @name CPSlider#title
     * @default ""
     */
    this.title = "";

    centerMode = centerMode || false;

    function paint() {
        var width = canvas.width,
            height = canvas.height,
            title = typeof that.title === "string" ? that.title : that.title(that.value),
            textX = 2 * window.devicePixelRatio,
            textY = canvas.height * 0.75;

        if (centerMode) {
            canvasContext.save();

            canvasContext.fillStyle = 'white';

            canvasContext.fillRect(0, 0, width, height);

            canvasContext.fillStyle = 'black';

            canvasContext.fillText(title, textX, textY);
            canvasContext.beginPath();

            if (that.value >= valueRange / 2) {
                canvasContext.rect(width / 2, 0, (that.value - valueRange / 2) * width / valueRange, height);
            } else {
                canvasContext.rect(that.value * width / valueRange, 0, (valueRange / 2 - that.value) * width / valueRange, height);
            }

            canvasContext.fill();
            canvasContext.clip();

            canvasContext.fillStyle = 'white';
            canvasContext.fillText(title, textX, textY);

            canvasContext.restore();
        } else {
            var barProp = (that.value - minValue) / valueRange,
                barWidth;

            if (expMode) {
                barProp = Math.pow(barProp, 1 / EXP_MODE_FACTOR);
            }

            barWidth = barProp * width;

            canvasContext.save();
            canvasContext.save();

            canvasContext.fillStyle = 'black';

            canvasContext.beginPath();
            canvasContext.rect(0, 0, barWidth, height);
            canvasContext.fill();

            canvasContext.clip();

            canvasContext.fillStyle = 'white';
            canvasContext.fillText(title, textX, textY);

            // Remove the clip region
            canvasContext.restore();

            canvasContext.fillStyle = 'white';

            canvasContext.beginPath();
            canvasContext.rect(barWidth, 0, width, height);
            canvasContext.fill();

            canvasContext.clip();

            canvasContext.fillStyle = 'black';
            canvasContext.fillText(title, textX, textY);

            canvasContext.restore();
        }
    }

    function mouseSelect(e) {
        var width = $(canvas).width(),
            left = $(canvas).offset().left,
            proportion = (e.pageX - left) / width;

        if (expMode) {
            // Give the user finer control over the low values
            proportion = Math.pow(Math.max(proportion, 0.0), EXP_MODE_FACTOR);
        }

        that.setValue(proportion * valueRange + minValue);
    }

    function mouseDragged(e) {
        if (dragNormal) {
            mouseSelect(e);
        } else if (dragPrecise) {
            var diff = (e.pageX - dragPreciseX) / PRECISE_DRAG_SCALE;

            if (diff != 0) {
                var unrounded = that.value + diff,
                    rounded = unrounded | 0;

                that.setValue(rounded);

                /* Tweak the "old mouseX" position such that the fractional part of the value we were unable to set
                 * will be accumulated
                 */
                dragPreciseX = e.pageX - (unrounded - rounded) * PRECISE_DRAG_SCALE;
            }
        }
    }

    function mouseUp(e) {
        if (dragNormal && e.button == 0) {
            dragNormal = false;
        } else if (dragPrecise && e.button == 2) {
            dragPrecise = false;
        } else {
            return;
        }

        canvas.releasePointerCapture(e.pointerId);
        canvas.removeEventListener("pointerup", mouseUp);
        canvas.removeEventListener("pointermove", mouseDragged);
    }

    this.setValue = function (_value) {
        _value = ~ ~Math.max(minValue, Math.min(maxValue, _value));

        if (this.value != _value) {
            this.value = _value;

            // The event listeners might like to update our title property at this point to reflect the new value
            this.emitEvent('valueChange', [this.value]);

            if (doneInitialPaint) {
                paint();
            } else {
                // We don't bother to do our canvas dimensioning until we're supplied with an initial value
                doneInitialPaint = true;
                this.resize();
            }
        }
    };

    /**
     * Get the DOM element for the slider component.
     */
    this.getElement = function () {
        return canvas;
    };

    this.resize = function () {
        canvas.width = $(canvas).width() || 150;
        canvas.height = $(canvas).height() || 20;

        if (window.devicePixelRatio > 1) {
            // Assume our width is set to 100% or similar, so we only need to the fix the height
            canvas.style.height = canvas.height + 'px';

            canvas.width = canvas.width * window.devicePixelRatio;
            canvas.height = canvas.height * window.devicePixelRatio;
        }

        canvasContext.font = canvas.height * 0.47 + 'pt sans-serif';

        paint();
    };

    canvas.addEventListener("pointerdown", function (e) {
        var dragging = dragNormal || dragPrecise;

        if (!dragging) {
            canvas.setPointerCapture(e.pointerId);

            switch (e.button) {
                case 0:
                    // Left
                    dragNormal = true;
                    mouseSelect(e);
                    break;
                case 2:
                    // Right
                    dragPrecise = true;
                    dragPreciseX = e.pageX;
                    break;
                default:
                    return;
            }

            canvas.addEventListener("pointerup", mouseUp);
            canvas.addEventListener("pointermove", mouseDragged);
        }
    });

    canvas.addEventListener("contextmenu", function (e) {
        e.preventDefault();
    });

    canvas.setAttribute("touch-action", "none");

    canvas.className = 'chickenpaint-slider';

    if (!window.devicePixelRatio) {
        // Old browsers
        window.devicePixelRatio = 1.0;
    }
}

CPSlider.prototype = Object.create(EventEmitter.prototype);
CPSlider.prototype.constructor = CPSlider;
module.exports = exports["default"];

},{}],37:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports["default"] = CPSplashScreen;

function CPSplashScreen(uiParent, loader, resourcesRoot) {
    var MAX_SMOOTHIE_OFFSET = 170;

    var canvas = document.createElement("canvas"),
        canvasContext = canvas.getContext("2d"),
        cup = new Image(),
        lid = new Image(),
        outlines = new Image(),
        text = new Image(),
        shading = new Image(),
        highlights = new Image(),
        smoothie = new Image(),
        images = [cup, lid, outlines, text, shading, highlights, smoothie],
        loadedCount = 0,
        cupComposite,
        smoothieComposite,
        cupCompositeContext,
        smoothieCompositeContext,
        progress = 0.0,
        message = "",
        fontHeight = 14;

    var imageRoot = resourcesRoot + "splash/";

    for (var i = 0; i < images.length; i++) {
        images[i].onload = function () {
            loadedCount++;

            if (loadedCount == images.length) {
                repaint();
            }
        };
    }

    cup.src = imageRoot + "cup.png";
    highlights.src = imageRoot + "highlights.png";
    lid.src = imageRoot + "lid.png";
    outlines.src = imageRoot + "lines.png";
    shading.src = imageRoot + "shading.png";
    smoothie.src = imageRoot + "smoothie.png";
    text.src = imageRoot + "text.png";

    function buildSmoothieComposite(imgWidth, imgHeight, progress) {
        if (!smoothieComposite) {
            smoothieComposite = document.createElement("canvas");

            smoothieComposite.width = imgWidth;
            smoothieComposite.height = imgHeight;

            smoothieCompositeContext = smoothieComposite.getContext("2d");
        }

        // First draw the smoothie in its mask position:
        smoothieCompositeContext.globalCompositeOperation = "copy";
        smoothieCompositeContext.drawImage(smoothie, 0, 0);

        // Now shift the smoothie downwards and use the original position as a mask
        smoothieCompositeContext.globalCompositeOperation = "source-in";
        smoothieCompositeContext.drawImage(smoothie, 0, Math.round(progress * MAX_SMOOTHIE_OFFSET));
    }

    function buildCupComposite(imgWidth, imgHeight, progress) {
        if (!cupComposite) {
            cupComposite = document.createElement("canvas");

            cupComposite.width = imgWidth;
            cupComposite.height = imgHeight;

            cupCompositeContext = cupComposite.getContext("2d");
        }

        cupCompositeContext.globalCompositeOperation = "copy";
        cupCompositeContext.drawImage(cup, 0, 0);

        buildSmoothieComposite(imgWidth, imgHeight, progress);

        cupCompositeContext.globalCompositeOperation = "source-over";
        cupCompositeContext.drawImage(smoothieComposite, 0, 0);

        cupCompositeContext.drawImage(lid, 0, 0);

        cupCompositeContext.globalCompositeOperation = "screen";
        cupCompositeContext.drawImage(highlights, 0, 0);

        cupCompositeContext.globalCompositeOperation = "multiply";
        cupCompositeContext.drawImage(shading, 0, 0);

        return cupComposite;
    }

    function repaint() {
        var centerX = canvas.width / 2,
            centerY = canvas.height / 2;

        canvasContext.fillStyle = 'white';
        canvasContext.fillRect(0, 0, canvas.width, canvas.height);

        if (loadedCount == images.length) {
            var imgWidth = text.width,
                imgHeight = text.height,
                left = Math.round(centerX - imgWidth / 2),
                top = Math.round(centerY - imgHeight / 2);

            canvasContext.drawImage(text, left, top);

            buildCupComposite(imgWidth, imgHeight, progress);

            //The whole cup composite is slightly transparent
            canvasContext.globalAlpha = 0.88;
            canvasContext.drawImage(cupComposite, left, top);

            canvasContext.globalAlpha = 1.0;

            canvasContext.drawImage(outlines, left, top);

            centerY = Math.round(centerY + imgHeight / 2 + 2);
        }

        if (message != "") {
            canvasContext.fillStyle = "black";

            var lines = message.split("\n");

            for (var i = 0; i < lines.length; i++) {
                var line = lines[i],
                    lineWidth = canvasContext.measureText(line).width;

                centerY += fontHeight * 2;

                canvasContext.fillText(line, centerX - lineWidth / 2, centerY);
            }
        }
    }

    function resize() {
        // Use the canvas dimensions set by the CSS styles
        canvas.width = canvas.clientWidth;
        canvas.height = canvas.clientHeight;

        canvasContext.font = fontHeight + "pt sans-serif";

        repaint();
    }

    loader.on("loadingProgress", function (_progress, _message) {
        progress = _progress;
        message = _message;

        repaint();
    });

    loader.on("loadingFailure", function (_message) {
        progress = 0;
        message = _message;

        repaint();
    });

    loader.on("loadingComplete", function () {
        window.removeEventListener("resize", resize);
        uiParent.removeChild(canvas);
    });

    window.addEventListener("resize", resize);

    canvas.className = "chickenpaint-splash-screen";

    uiParent.appendChild(canvas);

    resize();
}

module.exports = exports["default"];

},{}],38:[function(require,module,exports){
/*
    ChickenPaint
    
    ChickenPaint is a translation of ChibiPaint from Java to JavaScript
    by Nicholas Sherlock / Chicken Smoothie.
    
    ChibiPaint is Copyright (c) 2006-2008 Marc Schefer

    ChickenPaint is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    ChickenPaint is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with ChickenPaint. If not, see <http://www.gnu.org/licenses/>.
*/

'use strict';

Object.defineProperty(exports, '__esModule', {
    value: true
});
exports['default'] = CPStrokePalette;

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }

var _CPPalette = require('./CPPalette');

var _CPPalette2 = _interopRequireDefault(_CPPalette);

var _engineCPBrushInfo = require('../engine/CPBrushInfo');

var _engineCPBrushInfo2 = _interopRequireDefault(_engineCPBrushInfo);

function CPStrokePalette(cpController) {
    _CPPalette2['default'].call(this, cpController, "stroke", "Stroke");

    var that = this,
        buttons = [{
        className: "chickenpaint-tool-freehand",
        command: "CPFreeHand",
        toolTip: "Free-hand",
        selected: true
    }, {
        className: "chickenpaint-tool-line",
        command: "CPLine",
        toolTip: "Straight line"
    }, {
        className: "chickenpaint-tool-bezier",
        command: "CPBezier",
        toolTip: "Bezier curve"
    }],
        body = that.getBodyElement();

    function buildButtons() {
        var listElem = document.createElement("ul");

        listElem.className = "chickenpaint-stroke-tools list-unstyled";

        for (var i in buttons) {
            var button = buttons[i],
                buttonElem = document.createElement("li");

            buttonElem.className = "chickenpaint-toolbar-button " + button.className;
            buttonElem.setAttribute("data-buttonIndex", i);

            if (button.selected) {
                buttonElem.className = buttonElem.className + " selected";
            }

            listElem.appendChild(buttonElem);
        }

        listElem.addEventListener("click", function (e) {
            if (e.target && e.target.nodeName == "LI") {
                var button = buttons[parseInt(e.target.getAttribute("data-buttonIndex"), 10)];

                $("li", listElem).removeClass("selected");
                $(e.target).addClass("selected");

                cpController.actionPerformed({ action: button.command });
            }
        });

        body.appendChild(listElem);
    }

    buildButtons();

    cpController.on("toolChange", function (tool, toolInfo) {
        $(".chickenpaint-tool-freehand", body).toggleClass("selected", toolInfo.strokeMode == _engineCPBrushInfo2['default'].SM_FREEHAND);
        $(".chickenpaint-tool-line", body).toggleClass("selected", toolInfo.strokeMode == _engineCPBrushInfo2['default'].SM_LINE);
        $(".chickenpaint-tool-bezier", body).toggleClass("selected", toolInfo.strokeMode == _engineCPBrushInfo2['default'].SM_BEZIER);
    });
}

CPStrokePalette.prototype = Object.create(_CPPalette2['default'].prototype);
CPStrokePalette.prototype.constructor = CPStrokePalette;
module.exports = exports['default'];

},{"../engine/CPBrushInfo":5,"./CPPalette":31}],39:[function(require,module,exports){
/*
    ChickenPaint
    
    ChickenPaint is a translation of ChibiPaint from Java to JavaScript
    by Nicholas Sherlock / Chicken Smoothie.
    
    ChibiPaint is Copyright (c) 2006-2008 Marc Schefer

    ChickenPaint is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    ChickenPaint is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with ChickenPaint. If not, see <http://www.gnu.org/licenses/>.
*/

'use strict';

Object.defineProperty(exports, '__esModule', {
    value: true
});
exports['default'] = CPSwatchesPalette;

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }

var _CPPalette = require('./CPPalette');

var _CPPalette2 = _interopRequireDefault(_CPPalette);

var _utilCPColor = require('../util/CPColor');

var _utilCPColor2 = _interopRequireDefault(_utilCPColor);

var _utilAdobeColorTable = require('../util/AdobeColorTable');

var _utilAdobeColorTable2 = _interopRequireDefault(_utilAdobeColorTable);

function padLeft(string, padding, len) {
    while (string.length < len) {
        string = padding + string;
    }
    return string;
}

function wrapWithElem(e, wrapWithName) {
    var parent = document.createElement(wrapWithName);

    parent.appendChild(e);

    return parent;
}

function fileAPIsSupported() {
    return window.File && window.FileReader && window.FileList && window.Blob;
}

function CPSwatchesPalette(controller) {
    _CPPalette2['default'].call(this, controller, "swatches", "Color swatches");

    var INIT_COLORS = [0xffffff, 0x000000, 0xff0000, 0x00ff00, 0x0000ff, 0xffff00],
        modified = false,
        swatchPanel = document.createElement("ul"),
        buttonPanel = document.createElement("div"),
        fileInput,
        that = this;

    function CPColorSwatch(color) {
        var wrapper = document.createElement("div"),
            swatchElem = document.createElement("a"),
            swatchMenu = document.createElement("ul"),
            mnuRemove = document.createElement("a"),
            mnuSetToCurrent = document.createElement("a"),
            that = this;

        this.getElement = function () {
            return wrapper;
        };

        this.setColor = function (color) {
            swatchElem.setAttribute("data-color", color);
            swatchElem.style.backgroundColor = '#' + padLeft("" + Number(color).toString(16), "0", 6);
        };

        this.setColor(color);

        swatchElem.href = "#";
        swatchElem.className = "chickenpaint-color-swatch dropdown-toggle";
        swatchElem.setAttribute("data-toggle", "dropdown");

        mnuRemove.href = "#";
        mnuRemove.innerHTML = "Remove";

        mnuRemove.addEventListener("click", function (e) {
            e.preventDefault();
            $(wrapper).remove();

            modified = true;
        });

        mnuSetToCurrent.href = "#";
        mnuSetToCurrent.innerHTML = "Replace with current color";

        mnuSetToCurrent.addEventListener("click", function (e) {
            e.preventDefault();

            that.setColor(controller.getCurColor().getRgb());

            modified = true;
        });

        swatchMenu.className = "dropdown-menu";

        swatchMenu.appendChild(wrapWithElem(mnuRemove, "li"));
        swatchMenu.appendChild(wrapWithElem(mnuSetToCurrent, "li"));

        wrapper.className = "chickenpaint-color-swatch-wrapper";
        wrapper.appendChild(swatchElem);
        wrapper.appendChild(swatchMenu);

        $(wrapper).on("show.bs.dropdown", function () {
            var $btnDropDown = $(this).find(".dropdown-toggle"),
                $listHolder = $(this).find(".dropdown-menu");

            $listHolder.css({
                "top": $btnDropDown.position().top + $btnDropDown.outerHeight(true) + "px",
                "left": $btnDropDown.position().left + "px"
            });
        });
    }

    function clearSwatches() {
        while (swatchPanel.lastChild) {
            swatchPanel.removeChild(swatchPanel.lastChild);
        }
    }

    function addSwatch(color) {
        var swatch = new CPColorSwatch(color);

        swatchPanel.appendChild(swatch.getElement());
    }

    /**
     * Returns an array of colors in RGB 32-bit integer format
     */
    this.getSwatches = function () {
        var swatches = $(".chickenpaint-color-swatch", swatchPanel),
            colors = new Array(swatches.length);

        for (var i = 0; i < swatches.length; i++) {
            colors[i] = parseInt(swatches.get(i).getAttribute("data-color"), 10);
        }

        return colors;
    };

    this.setSwatches = function (swatches) {
        clearSwatches();

        for (var i = 0; i < swatches.length; i++) {
            addSwatch(swatches[i]);
        }

        modified = true;
    };

    this.isModified = function () {
        return modified;
    };

    function loadSwatches() {
        fileInput.onchange = function () {
            var fileList = this.files;

            if (fileList.length < 1) return;

            var file = fileList[0],
                reader = new FileReader();

            reader.onload = function () {
                var swatches = new _utilAdobeColorTable2['default']().read(this.result);

                if (swatches != null && swatches.length > 0) {
                    that.setSwatches(swatches);
                } else {
                    alert("The swatches could not be read, did you select an .aco file?");
                }
            };

            reader.readAsArrayBuffer(file);
        };

        fileInput.click();
    }

    function saveSwatches() {
        var aco = new _utilAdobeColorTable2['default']().write(that.getSwatches()),
            blob = new Blob([aco], { type: "application/octet-stream" });

        window.saveAs(blob, "oekakiswatches.aco");
    }

    function initSwatchPanel() {
        swatchPanel.className = "chickenpaint-color-swatches list-unstyled";

        for (var i = 0; i < INIT_COLORS.length; i++) {
            swatchPanel.appendChild(new CPColorSwatch(INIT_COLORS[i]).getElement());
        }

        swatchPanel.addEventListener("click", function (e) {
            var swatch = e.target;

            if (!/chickenpaint-color-swatch/.test(swatch.className)) {
                return;
            }

            if (e.button == 0 /* Left */ && swatch.getAttribute("data-color") !== undefined) {
                controller.setCurColor(new _utilCPColor2['default'](parseInt(swatch.getAttribute("data-color"), 10)));
                e.stopPropagation();
                e.preventDefault();
            }
        });

        swatchPanel.addEventListener("contextmenu", function (e) {
            var swatch = e.target;

            if (!/chickenpaint-color-swatch/.test(swatch.className)) {
                return;
            }

            e.preventDefault();

            $(swatch).dropdown("toggle").off("click.bs.dropdown"); // Remove Bootstrap's left-click handler installed by toggle
        });
    }

    function initButtonsPanel() {
        var btnSettings = document.createElement("div"),
            btnAdd = document.createElement("div"),
            settingsMenu = document.createElement("ul"),
            mnuSave = document.createElement("a"),
            mnuLoad = document.createElement("a");

        btnAdd.title = "Add the current brush color as a new swatch";
        btnAdd.className = "chickenpaint-small-toolbar-button chickenpaint-color-swatch-add";

        btnSettings.className = "chickenpaint-small-toolbar-button chickenpaint-color-swatch-settings";
        btnSettings.setAttribute("data-toggle", "dropdown");
        $(btnSettings).dropdown();

        mnuSave.href = "#";
        mnuSave.innerHTML = "Save swatches to your computer...";
        mnuSave.addEventListener("click", function (e) {
            e.preventDefault();

            saveSwatches();
        });

        mnuLoad.href = "#";
        mnuLoad.innerHTML = "Load swatches from your computer...";
        mnuLoad.addEventListener("click", function (e) {
            e.preventDefault();

            loadSwatches();
        });

        settingsMenu.className = "dropdown-menu dropdown-menu-right";

        settingsMenu.appendChild(wrapWithElem(mnuSave, "li"));
        settingsMenu.appendChild(wrapWithElem(mnuLoad, "li"));

        var btnSettingsContainer = document.createElement("div");

        btnSettingsContainer.className = 'dropdown';
        btnSettingsContainer.appendChild(btnSettings);
        btnSettingsContainer.appendChild(settingsMenu);

        $(btnSettingsContainer).on("show.bs.dropdown", function () {
            /* Instead of Bootstrap's extremely expensive data API, we'll only listen for dismiss clicks on the
             * document *while the menu is open!*
             */
            $(document).one("click", function () {
                if ($(btnSettingsContainer).hasClass("open")) {
                    $(btnSettings).dropdown("toggle");
                }
            });
        });

        btnAdd.addEventListener("click", function (e) {
            addSwatch(controller.getCurColor().getRgb());
            modified = true;
        });

        buttonPanel.className = 'chickenpaint-color-swatches-buttons';

        // Don't offer to load/save swatches if we don't have the file API needed for reading them
        if (fileAPIsSupported()) {
            fileInput = document.createElement("input");

            fileInput.type = "file";
            fileInput.multiple = false;
            fileInput.style.display = "none";

            buttonPanel.appendChild(btnSettingsContainer);
            buttonPanel.appendChild(fileInput);
        }

        buttonPanel.appendChild(btnAdd);
    }

    initSwatchPanel();
    this.getBodyElement().appendChild(swatchPanel);

    initButtonsPanel();
    this.getBodyElement().appendChild(buttonPanel);
}

CPSwatchesPalette.prototype = Object.create(_CPPalette2['default'].prototype);
CPSwatchesPalette.prototype.constructor = CPSwatchesPalette;
module.exports = exports['default'];

},{"../util/AdobeColorTable":43,"../util/CPColor":46,"./CPPalette":31}],40:[function(require,module,exports){
/*
    ChickenPaint
    
    ChickenPaint is a translation of ChibiPaint from Java to JavaScript
    by Nicholas Sherlock / Chicken Smoothie.
    
    ChibiPaint is Copyright (c) 2006-2008 Marc Schefer

    ChickenPaint is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    ChickenPaint is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with ChickenPaint. If not, see <http://www.gnu.org/licenses/>.
*/

"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports["default"] = CPTabletDialog;

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

var _utilCPWacomTablet = require("../util/CPWacomTablet");

var _utilCPWacomTablet2 = _interopRequireDefault(_utilCPWacomTablet);

function CPTabletDialog(parent) {
    var dialog = $("<div class=\"modal fade\" tabindex=\"-1\" role=\"dialog\">\n                <div class=\"modal-dialog\">\n                    <div class=\"modal-content\">\n                        <div class=\"modal-header\">\n                            <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\n                                <span aria-hidden=\"true\">&times;</span>\n                            </button>\n                            <h4 class=\"modal-title\">Drawing tablet support</h4>\n                        </div>\n                        <div class=\"modal-body\">\n                            <p class=\"chickenpaint-tablet-there-are-two-options\">\n                                There are two ways you could use your tablet's pen pressure support with ChickenPaint.\n                            </p>\n                            <div class=\"chickenpaint-tablet-support chickenpaint-wacom-support\">\n                                <h4>\n                                    Plugin for Wacom tablets\n                                </h4>\n                                <div class=\"chickenpaint-supported-browsers\">\n                                    <div class=\"chickenpaint-supported-browser\">\n                                        <span class=\"fa fa-internet-explorer\"></span>\n                                        IE 10, 11\n                                    </div>\n                                    <div class=\"chickenpaint-supported-browser\">\n                                        <span class=\"fa fa-firefox\"></span>\n                                        Firefox (32-bit only)\n                                    </div>\n                                    <div class=\"chickenpaint-supported-browser\">\n                                        <span class=\"fa fa-safari\"></span>\n                                        Safari\n                                    </div>\n                                        <div class=\"chickenpaint-supported-browser\">\n                                        <span class=\"fa fa-opera\"></span>\n                                        Opera\n                                    </div>\n                                </div>\n                                <p class=\"chickenpaint-not-installed\">\n                                    The plugin for Wacom tablets doesn't seem to be installed in your browser yet.\n                                </p>\n                                <p class=\"chickenpaint-not-installed\">\n                                    Please make sure that you've installed the latest drivers for your tablet from the \n                                    <a href=\"http://www.wacom.com/en-us/support/product-support/drivers\" target=\"_blank\">Wacom drivers page</a>,\n                                    then restart your browser.\n                                </p>\n                                <p class=\"chickenpaint-not-supported\">\n                                    Your browser doesn't support the Wacom tablet plugin, please \n                                    try one of the browsers listed above instead.\n                                </p>\n                                <p class=\"chickenpaint-supported alert alert-success\">\n                                    The Wacom tablet plugin is installed and working.\n                                </p>\n                            </div>\n                            <div class=\"chickenpaint-tablet-support chickenpaint-pointerevents-support\">\n                                <h4>\n                                    Built-in support for most tablets <small>including Wacom tablets</small>\n                                </h4>\n                                <div class=\"chickenpaint-supported-browsers\">\n                                    <div class=\"chickenpaint-supported-browser\">\n                                        <span class=\"fa fa-internet-explorer\"></span>\n                                        IE (Windows 8)\n                                    </div>\n                                        <div class=\"chickenpaint-supported-browser\">\n                                        <span class=\"fa fa-edge\"></span>\n                                        Edge (Windows 10)\n                                    </div>\n                                    <div class=\"chickenpaint-supported-browser\">\n                                        <span class=\"fa fa-firefox\"></span>\n                                        Firefox (<a href=\"https://github.com/thenickdude/chickenpaint/blob/master/help/Firefox pressure support.md\" target=\"_blank\">experimental <i class=\"glyphicon glyphicon-new-window\"></i></a>)\n                                    </div>\n                                    <div class=\"chickenpaint-supported-browser\">\n                                        <span class=\"fa fa-chrome\"></span>\n                                        Chrome (coming soon)\n                                    </div>\n                                </div>\n                                <p class=\"chickenpaint-not-supported\">\n                                    Your browser doesn't have built-in support for drawing tablets, please try\n                                    one of the other browsers listed above.\n                                </p>\n                                <p class=\"chickenpaint-supported alert alert-success\">\n                                    Your browser has built-in support for drawing tablets!\n                                </p>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n       ");

    var wacomSupportElem = $(".chickenpaint-wacom-support", dialog),
        peSupportElem = $(".chickenpaint-pointerevents-support", dialog),
        bothOptionsElem = $(".chickenpaint-tablet-there-are-two-options", dialog),
        wacomPresent = _utilCPWacomTablet2["default"].getRef().isTabletPresent(),
        peSupported = !!window.hasNativePointerEvents;

    wacomSupportElem.toggleClass("supported", wacomPresent);

    if (wacomPresent) {
        // Don't bother displaying info about Pointer Events if we have the Wacom plugin installed
        peSupportElem.hide();
        bothOptionsElem.hide();
    } else {
        // Chrome has dropped NPAPI support, so the Wacom plugin cannot be installed
        if (/Chrome/i.test(navigator.userAgent) && !/OPR/.test(navigator.userAgent) || /iPad/.test(navigator.userAgent) || /iPhone/.test(navigator.userAgent)) {
            wacomSupportElem.addClass("not-supported");
        }

        // Don't bother showing the Wacom plugin details if this browser supports pointer events
        if (peSupported) {
            wacomSupportElem.hide();
            bothOptionsElem.hide();
        }
    }

    peSupportElem.toggleClass("supported", peSupported);
    peSupportElem.toggleClass("not-supported", !peSupported);

    dialog.modal({
        show: false
    });

    // Fix the backdrop location in the DOM by reparenting it to the chickenpaint container
    dialog.data("bs.modal").$body = $(parent);

    parent.appendChild(dialog[0]);

    this.show = function () {
        dialog.modal("show");
    };
}

module.exports = exports["default"];

},{"../util/CPWacomTablet":51}],41:[function(require,module,exports){
/*
    ChickenPaint
    
    ChickenPaint is a translation of ChibiPaint from Java to JavaScript
    by Nicholas Sherlock / Chicken Smoothie.
    
    ChibiPaint is Copyright (c) 2006-2008 Marc Schefer

    ChickenPaint is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    ChickenPaint is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with ChickenPaint. If not, see <http://www.gnu.org/licenses/>.
*/

'use strict';

Object.defineProperty(exports, '__esModule', {
    value: true
});
exports['default'] = CPTexturePalette;

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }

var _engineCPGreyBmp = require('../engine/CPGreyBmp');

var _engineCPGreyBmp2 = _interopRequireDefault(_engineCPGreyBmp);

var _engineCPLookUpTable = require('../engine/CPLookUpTable');

var _engineCPLookUpTable2 = _interopRequireDefault(_engineCPLookUpTable);

var _CPPalette = require('./CPPalette');

var _CPPalette2 = _interopRequireDefault(_CPPalette);

var _CPSlider = require('./CPSlider');

var _CPSlider2 = _interopRequireDefault(_CPSlider);

function wrapCheckboxWithLabel(checkbox, title) {
    var div = document.createElement("div"),
        label = document.createElement("label");

    div.className = "checkbox";

    label.appendChild(checkbox);
    label.appendChild(document.createTextNode(title));

    div.appendChild(label);

    return div;
}

function loadTextures(textureFilename, width, height, textureCount, then) {
    var img = new Image(),
        textures = [];

    img.onload = function () {
        var canvas = document.createElement("canvas"),
            canvasContext = canvas.getContext("2d");

        canvas.width = img.width;
        canvas.height = img.height;

        for (var i = 0; i < textureCount; i++) {
            canvasContext.drawImage(img, 0, i * height, width, height, 0, 0, width, height);

            try {
                var imageData = canvasContext.getImageData(0, 0, width, height),
                    texture = new _engineCPGreyBmp2['default'](width, height);

                // Take just the red channel from the image to form the new grayscale texture
                for (var j = 0; j < width * height; j++) {
                    texture.data[j] = imageData.data[j * 4];
                }

                textures.push(texture);
            } catch (e) {
                // Quietly ignore errors that occur while loading the image (e.g. cross-origin security failures)
                console.log(e);
            }
        }

        then(textures);
    };

    img.src = textureFilename;
}

function CPTexturePalette(controller) {
    _CPPalette2['default'].call(this, controller, "textures", "Textures");

    var TEXTURE_PREVIEW_SIZE = 64,
        TEXTURE_SWATCH_BUTTON_SIZE = 32,
        textures = [],
        // Array of CPGreyBmp
    selectedTexture,
        processedTexture,
        //Both CPGreyBmp

    mirror = false,
        inverse = false,
        brightness = 0.0,
        contrast = 0.0,
        optionsPanel,
        texturesPanel = document.createElement("div"),
        body = this.getBodyElement();

    /**
     * Add an array of textures to the global texture list, and add swatches for them to the UI.
     */
    function addTextures(newTextures) {
        for (var i = 0; i < newTextures.length; i++) {
            var texture = newTextures[i];

            textures.push(texture);

            var button = new CPTextureSwatch(texture, TEXTURE_SWATCH_BUTTON_SIZE, TEXTURE_SWATCH_BUTTON_SIZE);

            button.on("click", function () {
                selectedTexture = this.texture;
                updateSelectedTexture();
            });

            texturesPanel.appendChild(button.getElement());
        }
    }

    /**
     * Generate and return an array of procedurally-generated textures
     * 
     * @returns CPGreyBmp[]
     */
    function makeProceduralTextures() {
        var result = [null];

        var texture = new _engineCPGreyBmp2['default'](2, 2);
        texture.data[0] = 0xFF;
        texture.data[3] = 0xFF;
        result.push(texture);

        result.push(makeDotTexture(2));
        result.push(makeDotTexture(3));
        result.push(makeDotTexture(4));
        result.push(makeDotTexture(6));
        result.push(makeDotTexture(8));

        result.push(makeVertLinesTexture(1, 2));
        result.push(makeVertLinesTexture(2, 4));

        result.push(makeHorizLinesTexture(1, 2));
        result.push(makeHorizLinesTexture(2, 4));

        result.push(makeCheckerBoardTexture(2));
        result.push(makeCheckerBoardTexture(4));
        result.push(makeCheckerBoardTexture(8));
        result.push(makeCheckerBoardTexture(16));

        return result;
    }

    /**
     * @param size int
     * 
     * @returns CPGreyBmp
     */
    function makeDotTexture(size) {
        var texture = new _engineCPGreyBmp2['default'](size, size);

        for (var i = 1; i < size * size; i++) {
            texture.data[i] = 0xFF;
        }
        return texture;
    }

    /**
     * Make a checkerboard texture of the given dimensions.
     * 
     * @param size int
     * 
     * @returns CPGreyBmp
     */
    function makeCheckerBoardTexture(size) {
        var textureSize = 2 * size,
            texture = new _engineCPGreyBmp2['default'](textureSize, textureSize);

        for (var i = 0; i < textureSize; i++) {
            for (var j = 0; j < textureSize; j++) {
                texture.data[i + j * textureSize] = (~ ~(i / size) + ~ ~(j / size)) % 2 == 0 ? 0 : 0xFF;
            }
        }

        return texture;
    }

    /**
     * Make a texture consisting of a series of evenly-spaced vertical lines
     * 
     * @param lineSize int
     * @param size int
     * 
     * @returns CPGreyBmp
     */
    function makeVertLinesTexture(lineSize, size) {
        var texture = new _engineCPGreyBmp2['default'](size, size);

        for (var i = 0; i < size * size; i++) {
            if (~ ~(i % size) >= lineSize) {
                texture.data[i] = 0xFF;
            }
        }

        return texture;
    }

    /**
     * Make a texture consisting of a series of evenly-spaced horizontal lines
     *
     * @param lineSize int
     * @param size int
     * 
     * @returns CPGreyBmp
     */
    function makeHorizLinesTexture(lineSize, size) {
        var texture = new _engineCPGreyBmp2['default'](size, size);

        for (var i = 0; i < size * size; i++) {
            if (i / size >= lineSize) {
                texture.data[i] = 0xFF;
            }
        }

        return texture;
    }

    function updateSelectedTexture() {
        if (selectedTexture != null) {
            processedTexture = selectedTexture.clone();

            if (mirror) {
                processedTexture.mirrorHorizontally();
            }

            var lut = new _engineCPLookUpTable2['default']();

            lut.loadBrightnessContrast(brightness, contrast);

            if (inverse) {
                lut.invert();
            }

            processedTexture.applyLUT(lut);
        } else {
            processedTexture = null;
        }

        controller.getArtwork().setBrushTexture(processedTexture);

        if (optionsPanel != null) {
            optionsPanel.updateTexture();
        }
    }

    function CPTextureOptionsPanel() {
        var panel = document.createElement("div"),
            cbInverse = document.createElement("input"),
            cbMirror = document.createElement("input"),
            slBrightness = new _CPSlider2['default'](0, 200, true),
            slContrast = new _CPSlider2['default'](0, 200, true),
            sampleSwatch = new CPTextureSwatch(null, TEXTURE_PREVIEW_SIZE, TEXTURE_PREVIEW_SIZE),
            btnCustomize = document.createElement("button"),
            textureControlsPanel;

        function updatePopoverControls() {
            cbInverse.checked = inverse;
            cbMirror.checked = mirror;

            slBrightness.setValue(brightness * 100 + 100);
            slContrast.setValue(contrast * 100 + 100);
        }

        function buildTextureControlsPanel() {
            var panel = document.createElement("div");

            cbInverse.type = "checkbox";
            cbInverse.addEventListener("click", function (e) {
                inverse = this.checked;
                updateSelectedTexture();
            });

            panel.appendChild(wrapCheckboxWithLabel(cbInverse, "Inverse"));

            cbMirror.type = "checkbox";
            cbMirror.addEventListener("click", function (e) {
                mirror = this.checked;
                updateSelectedTexture();
            });

            panel.appendChild(wrapCheckboxWithLabel(cbMirror, "Mirror"));

            slBrightness.title = function (value) {
                return "Brightness: " + (value - 100) + "%";
            };

            slBrightness.on("valueChange", function (value) {
                brightness = (value - 100) / 100.0;

                updateSelectedTexture();
            });

            panel.appendChild(slBrightness.getElement());

            slContrast.title = function (value) {
                return "Contrast: " + (value - 100) + "%";
            };

            slContrast.on("valueChange", function (value) {
                contrast = (value - 100) / 100;

                updateSelectedTexture();
            });

            panel.appendChild(slContrast.getElement());

            var okayButton = document.createElement("button"),
                resetButton = document.createElement("button");

            okayButton.innerHTML = "Ok";
            okayButton.className = "btn btn-primary btn-sm";
            okayButton.type = "button";

            okayButton.addEventListener("click", function (e) {
                $(btnCustomize).popover('hide');
            });

            panel.appendChild(okayButton);
            panel.appendChild(document.createTextNode(" "));

            resetButton.innerHTML = "Reset";
            resetButton.className = "btn btn-default btn-sm";
            resetButton.type = "button";

            resetButton.addEventListener("click", function (e) {
                brightness = 0;
                contrast = 0;
                mirror = false;
                inverse = false;

                updatePopoverControls();
                updateSelectedTexture();
            });

            panel.appendChild(resetButton);

            updatePopoverControls();

            return panel;
        }

        // TODO use events instead
        this.updateTexture = function () {
            btnCustomize.disabled = processedTexture == null;
            sampleSwatch.setTexture(processedTexture);
        };

        this.getElement = function () {
            return panel;
        };

        panel.className = "chickenpaint-texture-options";
        panel.appendChild(sampleSwatch.getElement());

        btnCustomize.type = "button";
        btnCustomize.className = "btn btn-default btn-sm";
        btnCustomize.innerHTML = "Customize";

        textureControlsPanel = buildTextureControlsPanel();

        $(btnCustomize).popover({
            html: true,
            content: function content() {
                return textureControlsPanel;
            },
            trigger: "manual"
        }).on("click", function () {
            $(this).popover("toggle");
        });

        panel.appendChild(btnCustomize);

        this.updateTexture();
    }

    function CPTextureSwatch(texture, width, height) {
        var canvas = document.createElement("canvas"),
            canvasContext = canvas.getContext("2d"),
            that = this;

        this.setTexture = function (texture) {
            this.texture = texture;

            this.paint();
        };

        this.getElement = function () {
            return canvas;
        };

        this.paint = function () {
            if (this.texture != null) {
                canvasContext.fillStyle = canvasContext.createPattern(this.texture.toCanvas(), "repeat");
            } else {
                canvasContext.fillStyle = 'white';
            }
            canvasContext.fillRect(0, 0, canvas.width, canvas.height);
        };

        canvas.addEventListener("click", function () {
            that.emit("click");
        });

        canvas.width = width;
        canvas.height = height;

        this.setTexture(texture);
    }

    CPTextureSwatch.prototype = Object.create(EventEmitter.prototype);
    CPTextureSwatch.prototype.constructor = CPTextureSwatch;

    optionsPanel = new CPTextureOptionsPanel();

    body.appendChild(optionsPanel.getElement());

    texturesPanel.className = 'chickenpaint-texture-swatches';

    body.appendChild(texturesPanel);

    addTextures(makeProceduralTextures());

    loadTextures(controller.getResourcesRoot() + "gfx/textures32.png", 32, 32, 2, function (loadedTextures) {
        addTextures(loadedTextures);
    });
}

CPTexturePalette.prototype = Object.create(_CPPalette2['default'].prototype);
CPTexturePalette.prototype.constructor = CPTexturePalette;
module.exports = exports['default'];

},{"../engine/CPGreyBmp":10,"../engine/CPLookUpTable":12,"./CPPalette":31,"./CPSlider":36}],42:[function(require,module,exports){
/*
    ChickenPaint
    
    ChickenPaint is a translation of ChibiPaint from Java to JavaScript
    by Nicholas Sherlock / Chicken Smoothie.
    
    ChibiPaint is Copyright (c) 2006-2008 Marc Schefer

    ChickenPaint is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    ChickenPaint is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with ChickenPaint. If not, see <http://www.gnu.org/licenses/>.
*/

"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports["default"] = CPToolPalette;

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

var _CPPalette = require('./CPPalette');

var _CPPalette2 = _interopRequireDefault(_CPPalette);

function CPToolPalette(cpController) {
    _CPPalette2["default"].call(this, cpController, "tool", "Tools");

    var that = this,
        buttons = [{
        className: "chickenpaint-tool-rect-selection",
        command: "CPRectSelection",
        toolTip: "Marquee",
        shortcut: "m"
    }, {
        className: "chickenpaint-tool-move",
        command: "CPMoveTool",
        toolTip: "Move tool",
        shortcut: "v"
    }, {
        className: "chickenpaint-tool-flood-fill",
        command: "CPFloodFill",
        toolTip: "Flood fill",
        shortcut: "f"
    }, {
        className: "chickenpaint-tool-gradient-fill",
        command: "CPGradientFill",
        toolTip: "Gradient fill",
        shortcut: "g"
    }, {
        className: "chickenpaint-tool-color-picker",
        command: "CPColorPicker",
        toolTip: "Color picker",
        shortcut: "i"
    }, {
        className: "chickenpaint-tool-rotate-canvas",
        command: "CPRotateCanvas",
        commandDoubleClick: "CPResetCanvasRotation",
        toolTip: "Rotate canvas"
    }, {
        className: "chickenpaint-tool-pencil",
        command: "CPPencil",
        toolTip: "Pencil"

    }, {
        className: "chickenpaint-tool-pen",
        command: "CPPen",
        toolTip: "Pen",
        selected: true // TODO a better mechanism for the controller to let us know the initial tool
    }, {
        className: "chickenpaint-tool-airbrush",
        command: "CPAirbrush",
        toolTip: "Airbrush"
    }, {
        className: "chickenpaint-tool-water",
        command: "CPWater",
        toolTip: "Waterpaint"
    }, {
        className: "chickenpaint-tool-eraser",
        command: "CPEraser",
        toolTip: "Eraser",
        shortcut: "e"
    }, {
        className: "chickenpaint-tool-soft-eraser",
        command: "CPSoftEraser",
        toolTip: "Soft eraser"
    }, {
        className: "chickenpaint-tool-smudge",
        command: "CPSmudge",
        toolTip: "Smudge"
    }, {
        className: "chickenpaint-tool-blender",
        command: "CPBlender",
        toolTip: "Blender"
    }, {
        className: "chickenpaint-tool-dodge",
        command: "CPDodge",
        toolTip: "Dodge",
        shortcut: "o"
    }, {
        className: "chickenpaint-tool-burn",
        command: "CPBurn",
        toolTip: "Burn",
        shortcut: "p"
    }, {
        className: "chickenpaint-tool-blur",
        command: "CPBlur",
        toolTip: "Blur"
    }],
        listElem = document.createElement("ul");

    function buttonClicked(e) {
        if (this.nodeName == "LI") {
            var button = buttons[parseInt(this.getAttribute("data-buttonIndex"), 10)];

            $("li", listElem).removeClass("selected");
            $(this).addClass("selected");

            cpController.actionPerformed({ action: button.command });
        }
    }

    function buildButtons() {
        var body = that.getBodyElement();

        listElem.className = "chickenpaint-tools list-unstyled";

        for (var i in buttons) {
            (function (i) {
                var button = buttons[i],
                    buttonElem = document.createElement("li");

                buttonElem.className = "chickenpaint-toolbar-button " + button.className;
                buttonElem.setAttribute("data-buttonIndex", i);
                buttonElem.title = button.toolTip;

                if (button.shortcut) {
                    buttonElem.title += " (" + button.shortcut.toUpperCase() + ")";

                    key(button.shortcut, function () {
                        buttonClicked.call(buttonElem);

                        return false;
                    });
                }

                if (button.selected) {
                    buttonElem.className = buttonElem.className + " selected";
                }

                listElem.appendChild(buttonElem);
            })(i);
        }

        $(listElem).on("click", "li", buttonClicked);

        listElem.addEventListener("dblclick", function (e) {
            if (this.nodeName == "LI") {
                var button = buttons[parseInt(this.getAttribute("data-buttonIndex"), 10)];

                if (button.commandDoubleClick) {
                    cpController.actionPerformed({ action: button.commandDoubleClick });
                }
            }
        });

        body.appendChild(listElem);
    }

    buildButtons();
}

CPToolPalette.prototype = Object.create(_CPPalette2["default"].prototype);
CPToolPalette.prototype.constructor = CPToolPalette;
module.exports = exports["default"];

},{"./CPPalette":31}],43:[function(require,module,exports){
/* 
 * By Nicholas Sherlock <n.sherlock@gmail.com>
 * 
 * Released under the WTFPLv2 https://en.wikipedia.org/wiki/WTFPL
 */

"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports["default"] = AdobeColorTable;

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

var _ArrayDataStream = require("./ArrayDataStream");

var _ArrayDataStream2 = _interopRequireDefault(_ArrayDataStream);

var ACO_COLORSPACE_RGB = 0,
    ACO_COLORSPACE_HSB = 1,
    ACO_COLORSPACE_CMYK = 2,
    ACO_COLORSPACE_LAB = 7,
    ACO_COLORSPACE_GRAYSCALE = 8;

function AdobeColorTable() {}

/**
 * Read an .aco (Adobe COlor) swatches file and return an array of RGB colors.
 * 
 * Supports version 1 palettes, only RGB format.
 * 
 * @param input A Uint8Array of the .aco file contents
 * @return An array of colours, or null if the file was not supported.
 */
AdobeColorTable.prototype.read = function (input) {
    if (input == null) {
        return null;
    }

    var stream = new _ArrayDataStream2["default"](new Uint8Array(input)),
        version,
        count,
        result = [];

    version = stream.readU16BE();
    if (version != 1) {
        return null;
    }
    count = stream.readU16BE();

    for (var i = 0; i < count; i++) {
        var colourspace = stream.readU16BE();

        if (colourspace != ACO_COLORSPACE_RGB) {
            continue; // Drop unsupported colours silently
        }

        // Scale back down from 16-bit to 8-bit
        var r = stream.readU16BE() * 255 / 65535,
            g = stream.readU16BE() * 255 / 65535,
            b = stream.readU16BE() * 255 / 65535;

        stream.readU16BE(); // third value unused

        result.push(r << 16 | g << 8 | b);
    }

    return result;
};

/**
 * Write an .aco (Adobe COlor) swatches file of the given array of RGB colours (colors are integers with the
 * blue channel in the least-significant position).
 */
AdobeColorTable.prototype.write = function (colours) {
    var buffer = new Uint8Array(2 * 2 + colours.length * 10),
        stream = new _ArrayDataStream2["default"](buffer);

    stream.writeU16BE(1); // Version 1
    stream.writeU16BE(colours.length); // Number of colours

    for (var i = 0; i < colours.length; i++) {
        var colour = colours[i];

        stream.writeU16BE(ACO_COLORSPACE_RGB);

        // Scale up colours to 16-bits (65535/255 = 257)
        stream.writeU16BE((colour >> 16 & 0xFF) * 257);
        stream.writeU16BE((colour >> 8 & 0xFF) * 257);
        stream.writeU16BE((colour & 0xFF) * 257);
        stream.writeU16BE(0);
    }

    return stream.getAsDataArray();
};
module.exports = exports["default"];

},{"./ArrayDataStream":44}],44:[function(require,module,exports){
/**
 * A tool for presenting a Uint8Array as a stream for reading and writing some simple data types.
 * 
 * By Nicholas Sherlock <n.sherlock@gmail.com> 2016, released under the WTFPL license.
 */

"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports["default"] = ArrayDataStream;
var EOF = -1;

function signExtend16Bit(word) {
    //If sign bit is set, fill the top bits with 1s to sign-extend
    return word & 0x8000 ? word | 0xFFFF0000 : word;
}

function signExtend8Bit(byte) {
    //If sign bit is set, fill the top bits with 1s to sign-extend
    return byte & 0x80 ? byte | 0xFFFFFF00 : byte;
}

/**
 * Create a stream on existing array of unsigned byte data (i.e. hopefully Uint8Array).
 * 
 * @param data Uint8Array to stream data from
 * @param start The index of the byte in the array that will be read first, or leave undefined to begin at the
 *              beginning of the array
 * @param end The index of the end of the stream, or leave undefined to use the end of the array as the end of
 *            the stream.
 */

function ArrayDataStream(data, start, end) {
    this.data = data;
    this.eof = false;
    this.start = start === undefined ? 0 : start;
    this.end = end === undefined ? data.length : end;
    this.pos = this.start;
}

;

/**
 * Read a single byte from the stream and turn it into a JavaScript string (assuming ASCII).
 * 
 * @returns String containing one character, or EOF if the end of file was reached (eof flag
 * is set).
 */
ArrayDataStream.prototype.readChar = function () {
    if (this.pos < this.end) {
        return String.fromCharCode(this.data[this.pos++]);
    }

    this.eof = true;
    return EOF;
};

/**
 * Read one unsigned byte from the stream
 * 
 * @returns Unsigned byte, or EOF if the end of file was reached (eof flag is set).
 */
ArrayDataStream.prototype.readByte = function () {
    if (this.pos < this.end) {
        return this.data[this.pos++];
    }

    this.eof = true;
    return EOF;
};

//Synonym:
ArrayDataStream.prototype.readU8 = ArrayDataStream.prototype.readByte;

ArrayDataStream.prototype.readS8 = function () {
    return signExtend8Bit(this.readByte());
};

ArrayDataStream.prototype.unreadChar = function (c) {
    this.pos--;
};

ArrayDataStream.prototype.peekChar = function () {
    if (this.pos < this.end) {
        return String.fromCharCode(this.data[this.pos]);
    }

    this.eof = true;
    return EOF;
};

ArrayDataStream.prototype.readString = function (length) {
    var chars = new Array(length),
        i;

    for (i = 0; i < length; i++) {
        chars[i] = this.readChar();
    }

    return chars.join("");
};

ArrayDataStream.prototype.readS16 = function () {
    var b1 = this.readByte(),
        b2 = this.readByte();

    return signExtend16Bit(b1 << 8 | b2);
};

ArrayDataStream.prototype.readU16BE = function () {
    var b1 = this.readByte(),
        b2 = this.readByte();

    return b1 << 8 | b2;
};

ArrayDataStream.prototype.readU16LE = function () {
    var b1 = this.readByte(),
        b2 = this.readByte();

    return b2 << 8 | b1;
};

ArrayDataStream.prototype.readU32BE = function () {
    var b1 = this.readByte(),
        b2 = this.readByte(),
        b3 = this.readByte(),
        b4 = this.readByte();
    return (b1 << 24 | b2 << 16 | b3 << 8 | b4) >>> 0;
};

ArrayDataStream.prototype.readU32LE = function () {
    var b1 = this.readByte(),
        b2 = this.readByte(),
        b3 = this.readByte(),
        b4 = this.readByte();
    return (b4 << 24 | b3 << 16 | b2 << 8 | b1) >>> 0;
};

ArrayDataStream.prototype.readBytes = function (count) {
    var result = this.data.subarray(this.pos, this.pos + count);

    this.pos += count;

    if (this.pos > this.end) {
        this.eof = true;
    }

    return result;
};

ArrayDataStream.prototype.skip = function (numBytes) {
    this.pos += numBytes;

    if (this.pos > this.end) {
        this.eof = true;
    }
};

ArrayDataStream.prototype.seek = function (offset) {
    this.pos = offset;
};

ArrayDataStream.prototype.writeBytes = function (arr) {
    for (var i = 0; i < arr.length; i++) {
        this.data[this.pos++] = arr[i];
    }
};

ArrayDataStream.prototype.writeByte = function (b) {
    this.data[this.pos++] = b;
};

//Synonym:
ArrayDataStream.prototype.writeU8 = ArrayDataStream.prototype.writeByte;

ArrayDataStream.prototype.writeU16LE = function (u) {
    this.data[this.pos++] = u;
    this.data[this.pos++] = u >> 8;
};

ArrayDataStream.prototype.writeU16BE = function (u) {
    this.data[this.pos++] = u >> 8;
    this.data[this.pos++] = u;
};

ArrayDataStream.prototype.writeU32BE = function (u) {
    this.data[this.pos++] = u >> 24;
    this.data[this.pos++] = u >> 16;
    this.data[this.pos++] = u >> 8;
    this.data[this.pos++] = u;
};

ArrayDataStream.prototype.writeU32LE = function (u) {
    this.data[this.pos++] = u;
    this.data[this.pos++] = u >> 8;
    this.data[this.pos++] = u >> 16;
    this.data[this.pos++] = u >> 24;
};

ArrayDataStream.prototype.writeDoubleBE = function (d) {
    var bytes = new Uint8Array(new Float64Array([d]).buffer);

    for (var i = bytes.length - 1; i >= 0; i--) {
        this.writeByte(bytes[i]);
    }
};

ArrayDataStream.prototype.writeFloatBE = function (d) {
    var bytes = new Uint8Array(new Float32Array([d]).buffer);

    for (var i = bytes.length - 1; i >= 0; i--) {
        this.writeByte(bytes[i]);
    }
};

/**
 * Write an ASCII string to the stream
 */
ArrayDataStream.prototype.writeString = function (s) {
    for (var i = 0; i < s.length; i++) {
        this.data[this.pos++] = s.charCodeAt(i);
    }
};

/**
 * Write the given unsigned 32-bit integer to the stream in big-endian order using the given byte width.
 * No error checking is performed to ensure that the supplied width is correct for the integer.
 * 
 * Omit the width parameter to have it determined automatically for you.
 * 
 * @param u Unsigned integer to be written
 * @param width Number of bytes to write to the stream
 */
ArrayDataStream.prototype.writeUnsignedIntBE = function (u, width) {
    if (width === undefined) {
        width = this.measureUnsignedInt(u);
    }

    // Each case falls through:
    switch (width) {
        case 5:
            this.writeU8(Math.floor(u / 4294967296)); // Need to use division to access >32 bits of floating point var
        case 4:
            this.writeU8(u >> 24);
        case 3:
            this.writeU8(u >> 16);
        case 2:
            this.writeU8(u >> 8);
        case 1:
            this.writeU8(u);
            break;
        default:
            throw new RuntimeException("Bad UINT size " + width);
    }
};

/**
 * Return the number of bytes needed to hold the non-zero bits of the given unsigned integer.
 */
ArrayDataStream.prototype.measureUnsignedInt = function (val) {
    // Force to 32-bit unsigned integer
    if (val < 1 << 8) {
        return 1;
    } else if (val < 1 << 16) {
        return 2;
    } else if (val < 1 << 24) {
        return 3;
    } else if (val < 4294967296) {
        return 4;
    } else {
        return 5;
    }
};

/**
 * Return a view on the portion of the buffer from the beginning to the current seek position as a Uint8Array.
 */
ArrayDataStream.prototype.getAsDataArray = function () {
    if (this.pos < this.data.byteLength) {
        return this.data.subarray(0, this.pos);
    } else if (this.pos == this.data.byteLength) {
        return this.data;
    } else {
        throw "ArrayDataStream's pos lies beyond end of buffer";
        // Chance is pretty good that you overflowed the end of the buffer during writing and your file is trash
    }
};

ArrayDataStream.prototype.EOF = EOF;
module.exports = exports["default"];

},{}],45:[function(require,module,exports){
/*
    ChickenPaint
    
    ChickenPaint is a translation of ChibiPaint from Java to JavaScript
    by Nicholas Sherlock / Chicken Smoothie.
    
    ChibiPaint is Copyright (c) 2006-2008 Marc Schefer

    ChickenPaint is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    ChickenPaint is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with ChickenPaint. If not, see <http://www.gnu.org/licenses/>.
*/

"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports["default"] = CPBezier;

function CPBezier() {

    // How to use this class:
    //
    // 1 - set the 4 points coordinates (x0-3, y0-3)
    // two options:
    // 2a - call init() with desired dt then read the current coordinate (Bx, By) and use nextPoint() to compute the
    // next point
    // 2b - use one of the "compute" methods to compute the values for the whole curve in one step

    // The 4 points coordinates
    this.x0 = this.y0 = this.x1 = this.y1 = this.x2 = this.y2 = this.x3 = this.y3 = 0.0;

    // used to compute the Bezier curve with the forward differences method
    var Bx,
        dBx,
        ddBx,
        dddBx,
        By,
        dBy,
        ddBy,
        dddBy,
        that = this;

    function init(dt) {
        // Implements a fast degree-3 Bezier curve using the forward differences method
        //
        // Reference for this algorithm:
        // "Curves and Surfaces for Computer Graphics" by David Salomon, page 189

        var q1 = 3.0 * dt,
            q2 = q1 * dt,
            q3 = dt * dt * dt,
            q4 = 2.0 * q2,
            q5 = 6.0 * q3,
            q6x = that.x0 - 2.0 * that.x1 + that.x2,
            q6y = that.y0 - 2.0 * that.y1 + that.y2,
            q7x = 3.0 * (that.x1 - that.x2) - that.x0 + that.x3,
            q7y = 3.0 * (that.y1 - that.y2) - that.y0 + that.y3;

        Bx = that.x0;
        By = that.y0;

        dBx = (that.x1 - that.x0) * q1 + q6x * q2 + q7x * q3;
        dBy = (that.y1 - that.y0) * q1 + q6y * q2 + q7y * q3;

        ddBx = q6x * q4 + q7x * q5;
        ddBy = q6y * q4 + q7y * q5;

        dddBx = q7x * q5;
        dddBy = q7y * q5;
    }

    /**
     * Fill the given x,y arrays with a series of points on the curve.
     * 
     * @param x int[]
     * @param y int[]
     * @param elements int Count of elements to fill x and y arrays
     */
    this.compute = function (x, y, elements) {
        init(1.0 / elements);

        x[0] = ~ ~Bx;
        y[0] = ~ ~By;

        for (var i = 1; i < elements; i++) {
            Bx += dBx;
            By += dBy;
            dBx += ddBx;
            dBy += ddBy;
            ddBx += dddBx;
            ddBy += dddBy;

            x[i] = ~ ~Bx;
            y[i] = ~ ~By;
        }
    };
}

module.exports = exports["default"];

},{}],46:[function(require,module,exports){
/*
    ChickenPaint
    
    ChickenPaint is a translation of ChibiPaint from Java to JavaScript
    by Nicholas Sherlock / Chicken Smoothie.
    
    ChibiPaint is Copyright (c) 2006-2008 Marc Schefer

    ChickenPaint is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    ChickenPaint is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with ChickenPaint. If not, see <http://www.gnu.org/licenses/>.
*/

"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports["default"] = CPColor;

function CPColor(rgb) {
    var that = this;

    this.rgb = 0; // in RGB byte order

    this.hue = 0;
    this.saturation = 0;
    this.value = 0;

    function rgbToHsv() {
        var r = that.rgb >> 16 & 0xff,
            g = that.rgb >> 8 & 0xff,
            b = that.rgb & 0xff;

        // Value
        that.value = Math.max(r, Math.max(g, b));

        // Saturation
        var mini = Math.min(r, Math.min(g, b));

        if (that.value == 0) {
            that.saturation = 0;
        } else {
            that.saturation = ~ ~((that.value - mini) / that.value * 255);
        }

        // Hue
        if (that.saturation == 0) {
            that.hue = 0;
        } else {
            var cr = (that.value - r) / (that.value - mini),
                cg = (that.value - g) / (that.value - mini),
                cb = (that.value - b) / (that.value - mini);

            var _hue = 0;

            if (that.value == r) {
                _hue = cb - cg;
            }
            if (that.value == g) {
                _hue = 2 + cr - cb;
            }
            if (that.value == b) {
                _hue = 4 + cg - cr;
            }

            _hue *= 60;
            if (_hue < 0) {
                _hue += 360;
            }

            that.hue = ~ ~_hue;
        }
    }

    function hsvToRgb() {
        // no saturation means it's just a shade of grey
        if (that.saturation == 0) {
            that.rgb = that.value << 16 | that.value << 8 | that.value;
        } else {
            var f = that.hue / 60;

            f = f - Math.floor(f);

            var s = that.saturation / 255,
                m = ~ ~(that.value * (1 - s)),
                n = ~ ~(that.value * (1 - s * f)),
                k = ~ ~(that.value * (1 - s * (1 - f)));

            switch (~ ~(that.hue / 60)) {
                case 0:
                    that.rgb = that.value << 16 | k << 8 | m;
                    break;
                case 1:
                    that.rgb = n << 16 | that.value << 8 | m;
                    break;
                case 2:
                    that.rgb = m << 16 | that.value << 8 | k;
                    break;
                case 3:
                    that.rgb = m << 16 | n << 8 | that.value;
                    break;
                case 4:
                    that.rgb = k << 16 | m << 8 | that.value;
                    break;
                case 5:
                    that.rgb = that.value << 16 | m << 8 | n;
                    break;
                default:
                    that.rgb = 0; // invalid hue
                    break;
            }
        }
    }

    this.getRgb = function () {
        return this.rgb;
    };

    this.getSaturation = function () {
        return this.saturation;
    };

    this.getHue = function () {
        return this.hue;
    };

    this.getValue = function () {
        return this.value;
    };

    this.setRgbComponents = function (r, g, b) {
        this.setRgb(r << 16 | g << 8 | b);
    };

    this.setRgb = function (rgb) {
        this.rgb = rgb;
        rgbToHsv();
    };

    this.setHsv = function (hue, value, saturation) {
        this.hue = hue;
        this.saturation = saturation;
        this.value = value;

        hsvToRgb();
    };

    this.setHue = function (hue) {
        this.hue = hue;
        hsvToRgb();
    };

    this.setSaturation = function (saturation) {
        this.saturation = saturation;
        hsvToRgb();
    };

    this.setValue = function (value) {
        this.value = value;
        hsvToRgb();
    };

    this.clone = function () {
        var result = new CPColor();

        result.copyFrom(this);

        return result;
    };

    this.copyFrom = function (c) {
        this.rgb = c.rgb;
        this.hue = c.hue;
        this.saturation = c.saturation;
        this.value = c.value;
    };

    this.isEqual = function (color) {
        return this.rgb == color.rgb && this.hue == color.hue && this.saturation == color.saturation && this.value == color.value;
    };

    this.setRgb(rgb || 0);
}

module.exports = exports["default"];

},{}],47:[function(require,module,exports){
/*
    ChickenPaint
    
    ChickenPaint is a translation of ChibiPaint from Java to JavaScript
    by Nicholas Sherlock / Chicken Smoothie.
    
    ChibiPaint is Copyright (c) 2006-2008 Marc Schefer

    ChickenPaint is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    ChickenPaint is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with ChickenPaint. If not, see <http://www.gnu.org/licenses/>.
*/

// An RGB color with floating point values for each channel (between 0.0 and 1.0)
"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports["default"] = CPColorFloat;

function CPColorFloat(r, g, b) {
    this.r = r;
    this.g = g;
    this.b = b;
}

CPColorFloat.prototype.toInt = function () {
    return Math.max(0, Math.min(255, Math.round(this.r * 255))) << 16 | Math.max(0, Math.min(255, Math.round(this.g * 255))) << 8 | Math.max(0, Math.min(255, Math.round(this.b * 255)));
};

CPColorFloat.prototype.mixWith = function (color, alpha) {
    this.r = this.r * (1.0 - alpha) + color.r * alpha;
    this.g = this.g * (1.0 - alpha) + color.g * alpha;
    this.b = this.b * (1.0 - alpha) + color.b * alpha;
};

CPColorFloat.prototype.clone = function () {
    return new CPColorFloat(this.r, this.g, this.b);
};

CPColorFloat.createFromInt = function (color) {
    return new CPColorFloat((color >>> 16 & 0xff) / 255, (color >>> 8 & 0xff) / 255, (color & 0xff) / 255);
};
module.exports = exports["default"];

},{}],48:[function(require,module,exports){
/*
    ChickenPaint
    
    ChickenPaint is a translation of ChibiPaint from Java to JavaScript
    by Nicholas Sherlock / Chicken Smoothie.
    
    ChibiPaint is Copyright (c) 2006-2008 Marc Schefer

    ChickenPaint is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    ChickenPaint is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with ChickenPaint. If not, see <http://www.gnu.org/licenses/>.
*/

"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports["default"] = CPRandom;

function CPRandom() {
    var nextNextGaussian,
        haveNextNextGaussian = false;

    /**
     * Definition from Java, mean of 0.0 and standard deviation 1.0.
     */
    this.nextGaussian = function () {
        if (haveNextNextGaussian) {
            haveNextNextGaussian = false;
            return nextNextGaussian;
        } else {

            var v1, v2, s;

            do {
                v1 = 2 * Math.random() - 1; // between -1.0 and 1.0
                v2 = 2 * Math.random() - 1; // between -1.0 and 1.0
                s = v1 * v1 + v2 * v2;
            } while (s >= 1 || s == 0);

            var multiplier = Math.sqrt(-2 * Math.log(s) / s);

            nextNextGaussian = v2 * multiplier;
            haveNextNextGaussian = true;

            return v1 * multiplier;
        }
    };
}

;
module.exports = exports["default"];

},{}],49:[function(require,module,exports){
/*
    ChickenPaint
    
    ChickenPaint is a translation of ChibiPaint from Java to JavaScript
    by Nicholas Sherlock / Chicken Smoothie.
    
    ChibiPaint is Copyright (c) 2006-2008 Marc Schefer

    ChickenPaint is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    ChickenPaint is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with ChickenPaint. If not, see <http://www.gnu.org/licenses/>.
*/

"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports["default"] = CPRect;

function CPRect(left, top, right, bottom) {
    /*
    if (left === undefined || top === undefined || right === undefined || bottom === undefined) {
        throw "Bad rect";
    }
    
    if (~~left !== left || ~~top !== top || ~~right !== right || ~~bottom !== bottom) {
        throw "Bad rect";
    }
    */

    this.left = left;
    this.top = top;
    this.right = right;
    this.bottom = bottom;
}

CPRect.prototype.makeEmpty = function () {
    this.left = 0;
    this.top = 0;
    this.right = 0;
    this.bottom = 0;
};

CPRect.prototype.union = function (that) {
    if (this.isEmpty()) {
        this.set(that);
    } else {
        this.left = Math.min(this.left, that.left);
        this.top = Math.min(this.top, that.top);
        this.right = Math.max(this.right, that.right);
        this.bottom = Math.max(this.bottom, that.bottom);
    }
};

/**
 * Clip this rectangle to fit within `that`.
 * 
 * @returns a refence to this rectangle for chaining 
 */
CPRect.prototype.clip = function (that) {
    if (!this.isEmpty()) {
        if (that.isEmpty()) {
            this.makeEmpty();
        } else {
            this.left = Math.max(this.left, that.left);
            this.top = Math.max(this.top, that.top);
            this.right = Math.min(this.right, that.right);
            this.bottom = Math.min(this.bottom, that.bottom);
        }
    }

    return this;
};

CPRect.prototype.isInside = function (that) {
    return this.left >= that.left && this.top >= that.top && this.right <= that.right && this.bottom <= that.bottom;
};

/**
 * Use this rectangle as bounds to clip the placement of the area of srcRect at the position of dstRect inside
 * our bounds.
 *
 * dstRect has its right and bottom set by this operation to match the area that would be copied from the source.
 * srcRect has its coordinates tweaked to match the area that will be copied.
 */
CPRect.prototype.clipSourceDest = function (srcRect, dstRect) {
    dstRect.right = dstRect.left + srcRect.getWidth();
    dstRect.bottom = dstRect.top + srcRect.getHeight();

    if (this.isEmpty() || dstRect.left >= this.right || dstRect.top >= this.bottom || dstRect.right <= this.left || dstRect.bottom <= this.top) {
        srcRect.makeEmpty();
        dstRect.makeEmpty();
    } else {
        // bottom/right
        if (dstRect.right > this.right) {
            srcRect.right -= dstRect.right - this.right;
            dstRect.right = this.right;
        }

        if (dstRect.bottom > this.bottom) {
            srcRect.bottom -= dstRect.bottom - this.bottom;
            dstRect.bottom = this.bottom;
        }

        // top/left
        if (dstRect.left < this.left) {
            srcRect.left += this.left - dstRect.left;
            dstRect.left = this.left;
        }

        if (dstRect.top < this.top) {
            srcRect.top += this.top - dstRect.top;
            dstRect.top = this.top;
        }
    }
};

CPRect.prototype.getWidth = function () {
    return this.right - this.left;
};

CPRect.prototype.getHeight = function () {
    return this.bottom - this.top;
};

CPRect.prototype.isEmpty = function () {
    return this.right <= this.left || this.bottom <= this.top;
};

CPRect.prototype.set = function (r) {
    this.left = r.left;
    this.top = r.top;
    this.right = r.right;
    this.bottom = r.bottom;
};

CPRect.prototype.clone = function () {
    return new CPRect(this.left, this.top, this.right, this.bottom);
};

CPRect.prototype.translate = function (x, y) {
    this.left += x;
    this.right += x;
    this.top += y;
    this.bottom += y;
};

CPRect.prototype.moveTo = function (x, y) {
    this.translate(x - this.left, y - this.top);
};

CPRect.prototype.equals = function (that) {
    return this.left == that.left && this.right == that.right && this.top == that.top && this.bottom == that.bottom;
};

/**
 * Add h pixels to both the left and right sides of the rectangle, and v pixels to both the top and bottom sides.
 *  
 * @param h
 * @param v
 */
CPRect.prototype.grow = function (h, v) {
    // TODO checks for rectangles with zero-extent
    this.left -= h;
    this.right += h;
    this.top -= v;
    this.bottom += v;
};

CPRect.prototype.toString = function () {
    return "(" + this.left + "," + this.top + "," + this.right + "," + this.bottom + ")";
};

/* 
 * Chrome is initially eager to optimize CPRect and users assuming that all the fields are SMIs, then later on decides
 * that they should be tagged numbers after all. This causes all the blending operation functions to be reoptimized
 * a couple of times. 
 * 
 * Avoid that mess by starting things off with floats in the members.  
 */
window.cpRectGarbage = new CPRect(1.5, 2.5, 3.5, 4.5);
module.exports = exports["default"];

},{}],50:[function(require,module,exports){
// Modifications by Nicholas Sherlock. Original docs below:

// Last updated November 2011
// By Simon Sarris
// www.simonsarris.com
// sarris@acm.org
//
// Free to use and distribute at will
// So long as you are nice to people, etc

// Simple class for keeping track of the current transformation matrix

// For instance:
//    var t = new Transform();
//    t.rotate(5);
//    var m = t.m;
//    ctx.setTransform(m[0], m[1], m[2], m[3], m[4], m[5]);

// Is equivalent to:
//    ctx.rotate(5);

// But now you can retrieve it :)

// Remember that this does not account for any CSS transforms applied to the canvas

"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports["default"] = CPTransform;

function CPTransform() {
    this.setToIdentity();
}

CPTransform.prototype.setToIdentity = function () {
    this.m = [1, 0, 0, 1, 0, 0];
};

CPTransform.prototype.multiply = function (matrix) {
    var m11 = this.m[0] * matrix.m[0] + this.m[2] * matrix.m[1],
        m12 = this.m[1] * matrix.m[0] + this.m[3] * matrix.m[1],
        m21 = this.m[0] * matrix.m[2] + this.m[2] * matrix.m[3],
        m22 = this.m[1] * matrix.m[2] + this.m[3] * matrix.m[3],
        dx = this.m[0] * matrix.m[4] + this.m[2] * matrix.m[5] + this.m[4],
        dy = this.m[1] * matrix.m[4] + this.m[3] * matrix.m[5] + this.m[5];

    this.m[0] = m11;
    this.m[1] = m12;
    this.m[2] = m21;
    this.m[3] = m22;
    this.m[4] = dx;
    this.m[5] = dy;
};

CPTransform.prototype.invert = function () {
    var d = 1 / (this.m[0] * this.m[3] - this.m[1] * this.m[2]),
        m0 = this.m[3] * d,
        m1 = -this.m[1] * d,
        m2 = -this.m[2] * d,
        m3 = this.m[0] * d,
        m4 = d * (this.m[2] * this.m[5] - this.m[3] * this.m[4]),
        m5 = d * (this.m[1] * this.m[4] - this.m[0] * this.m[5]);

    this.m[0] = m0;
    this.m[1] = m1;
    this.m[2] = m2;
    this.m[3] = m3;
    this.m[4] = m4;
    this.m[5] = m5;
};

CPTransform.prototype.getInverted = function () {
    var result = new CPTransform();

    result.m[0] = this.m[0];
    result.m[1] = this.m[1];
    result.m[2] = this.m[2];
    result.m[3] = this.m[3];
    result.m[4] = this.m[4];
    result.m[5] = this.m[5];

    result.invert();

    return result;
};

CPTransform.prototype.rotate = function (rad) {
    var c = Math.cos(rad),
        s = Math.sin(rad),
        m11 = this.m[0] * c + this.m[2] * s,
        m12 = this.m[1] * c + this.m[3] * s,
        m21 = this.m[0] * -s + this.m[2] * c,
        m22 = this.m[1] * -s + this.m[3] * c;

    this.m[0] = m11;
    this.m[1] = m12;
    this.m[2] = m21;
    this.m[3] = m22;
};

CPTransform.prototype.rotateAroundPoint = function (rad, x, y) {
    this.translate(x, y);
    this.rotate(rad);
    this.translate(-x, -y);
};

CPTransform.prototype.translate = function (x, y) {
    this.m[4] += this.m[0] * x + this.m[2] * y;
    this.m[5] += this.m[1] * x + this.m[3] * y;
};

CPTransform.prototype.scale = function (sx, sy) {
    this.m[0] *= sx;
    this.m[1] *= sx;
    this.m[2] *= sy;
    this.m[3] *= sy;
};

CPTransform.prototype.transformPoint = function (px, py) {
    var x = px,
        y = py;

    px = x * this.m[0] + y * this.m[2] + this.m[4];
    py = x * this.m[1] + y * this.m[3] + this.m[5];

    return { x: px, y: py };
};

CPTransform.prototype.getTranslateX = function () {
    return this.m[4];
};

CPTransform.prototype.getTranslateY = function () {
    return this.m[5];
};

CPTransform.prototype.clone = function () {
    var result = new CPTransform();

    result.m[0] = this.m[0];
    result.m[1] = this.m[1];
    result.m[2] = this.m[2];
    result.m[3] = this.m[3];
    result.m[4] = this.m[4];
    result.m[5] = this.m[5];

    return result;
};
module.exports = exports["default"];

},{}],51:[function(require,module,exports){
/*
    ChickenPaint
    
    ChickenPaint is a translation of ChibiPaint from Java to JavaScript
    by Nicholas Sherlock / Chicken Smoothie.
    
    ChibiPaint is Copyright (c) 2006-2008 Marc Schefer

    ChickenPaint is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    ChickenPaint is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with ChickenPaint. If not, see <http://www.gnu.org/licenses/>.
*/

"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports["default"] = CPWacomTablet;

function CPWacomTablet() {
    var penAPI = null,
        pluginObject,
        that = this;

    /**
     * Is the pen currently interacting with the tablet surface?
     */
    this.isPen = function () {
        var pointerType;

        if (penAPI) {
            pointerType = penAPI.pointerType;

            return pointerType == 1 /* Pen */ || pointerType == 3 /* Eraser */;
        }

        return false;
    };

    this.getPressure = function () {
        if (penAPI) {
            return penAPI.pressure;
        }

        return 1.0;
    };

    this.pluginLoaded = function () {
        console.log("Wacom tablet support loaded!");

        penAPI = pluginObject.penAPI;
    };

    this.isTabletPresent = function () {
        return !!penAPI;
    };

    /**
     * Call after the document body is ready (needs DOM to be ready for loading the Wacom plugin).
     */
    this.detectTablet = function () {
        // Chrome has dropped NPAPI support, so the Wacom plugin cannot be installed
        if (/Chrome/i.test(navigator.userAgent) && !/OPR/.test(navigator.userAgent)) {
            // Prevent an ugly "this page has tried to load a plugin which is not supported" error message
            console.log("Not attempting to load Wacom tablet plugin, since this is Chrome");
            return;
        }

        console.log("Attempting to load Wacom tablet support...");

        pluginObject = document.createElement("object");

        if ("classid" in pluginObject) {
            // IE
            pluginObject.classid = "CLSID:092dfa86-5807-5a94-bf3b-5a53ba9e5308";
        } else {
            var param = document.createElement("param");

            param.name = "onload";
            param.value = "onWacomPluginLoaded";

            pluginObject.appendChild(param);

            pluginObject.type = "application/x-wacomtabletplugin";
        }

        pluginObject.style.position = "absolute";
        pluginObject.style.visibility = "hidden";
        pluginObject.onload = "onWacomPluginLoaded";

        document.body.appendChild(pluginObject);

        setTimeout(function () {
            if (!that.isTabletPresent()) {
                console.log("Looks like the Wacom plugin isn't installed, or failed to load.");
            }
        }, 5000);
    };
}

CPWacomTablet.getRef = function () {
    if (CPWacomTablet.instance == null) {
        CPWacomTablet.instance = new CPWacomTablet();
    }
    return CPWacomTablet.instance;
};

window.onWacomPluginLoaded = function () {
    CPWacomTablet.getRef().pluginLoaded();
};
module.exports = exports["default"];

},{}]},{},[1])(1)
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL3Vzci9sb2NhbC9saWIvbm9kZV9tb2R1bGVzL2Jyb3dzZXJpZnkvbm9kZV9tb2R1bGVzL2Jyb3dzZXItcGFjay9fcHJlbHVkZS5qcyIsIi9Vc2Vycy9uaWNvbGViZWd1ZXNzZS9EZXNrdG9wL3BhaW50LWJicy9wdWJsaWMvcGFpbnQvanMvQ2hpY2tlblBhaW50LmpzIiwiL1VzZXJzL25pY29sZWJlZ3Vlc3NlL0Rlc2t0b3AvcGFpbnQtYmJzL3B1YmxpYy9wYWludC9qcy9lbmdpbmUvQ1BBcnR3b3JrLmpzIiwiL1VzZXJzL25pY29sZWJlZ3Vlc3NlL0Rlc2t0b3AvcGFpbnQtYmJzL3B1YmxpYy9wYWludC9qcy9lbmdpbmUvQ1BCaXRtYXAuanMiLCIvVXNlcnMvbmljb2xlYmVndWVzc2UvRGVza3RvcC9wYWludC1iYnMvcHVibGljL3BhaW50L2pzL2VuZ2luZS9DUEJsZW5kLmpzIiwiL1VzZXJzL25pY29sZWJlZ3Vlc3NlL0Rlc2t0b3AvcGFpbnQtYmJzL3B1YmxpYy9wYWludC9qcy9lbmdpbmUvQ1BCcnVzaEluZm8uanMiLCIvVXNlcnMvbmljb2xlYmVndWVzc2UvRGVza3RvcC9wYWludC1iYnMvcHVibGljL3BhaW50L2pzL2VuZ2luZS9DUEJydXNoTWFuYWdlci5qcyIsIi9Vc2Vycy9uaWNvbGViZWd1ZXNzZS9EZXNrdG9wL3BhaW50LWJicy9wdWJsaWMvcGFpbnQvanMvZW5naW5lL0NQQ2hpYmlGaWxlLmpzIiwiL1VzZXJzL25pY29sZWJlZ3Vlc3NlL0Rlc2t0b3AvcGFpbnQtYmJzL3B1YmxpYy9wYWludC9qcy9lbmdpbmUvQ1BDbGlwLmpzIiwiL1VzZXJzL25pY29sZWJlZ3Vlc3NlL0Rlc2t0b3AvcGFpbnQtYmJzL3B1YmxpYy9wYWludC9qcy9lbmdpbmUvQ1BDb2xvckJtcC5qcyIsIi9Vc2Vycy9uaWNvbGViZWd1ZXNzZS9EZXNrdG9wL3BhaW50LWJicy9wdWJsaWMvcGFpbnQvanMvZW5naW5lL0NQR3JleUJtcC5qcyIsIi9Vc2Vycy9uaWNvbGViZWd1ZXNzZS9EZXNrdG9wL3BhaW50LWJicy9wdWJsaWMvcGFpbnQvanMvZW5naW5lL0NQTGF5ZXIuanMiLCIvVXNlcnMvbmljb2xlYmVndWVzc2UvRGVza3RvcC9wYWludC1iYnMvcHVibGljL3BhaW50L2pzL2VuZ2luZS9DUExvb2tVcFRhYmxlLmpzIiwiL1VzZXJzL25pY29sZWJlZ3Vlc3NlL0Rlc2t0b3AvcGFpbnQtYmJzL3B1YmxpYy9wYWludC9qcy9lbmdpbmUvQ1BSZXNvdXJjZUxvYWRlci5qcyIsIi9Vc2Vycy9uaWNvbGViZWd1ZXNzZS9EZXNrdG9wL3BhaW50LWJicy9wdWJsaWMvcGFpbnQvanMvZW5naW5lL0NQUmVzb3VyY2VTYXZlci5qcyIsIi9Vc2Vycy9uaWNvbGViZWd1ZXNzZS9EZXNrdG9wL3BhaW50LWJicy9wdWJsaWMvcGFpbnQvanMvZW5naW5lL0NQVW5kby5qcyIsIi9Vc2Vycy9uaWNvbGViZWd1ZXNzZS9EZXNrdG9wL3BhaW50LWJicy9wdWJsaWMvcGFpbnQvanMvZ3VpL0NQQWJvdXREaWFsb2cuanMiLCIvVXNlcnMvbmljb2xlYmVndWVzc2UvRGVza3RvcC9wYWludC1iYnMvcHVibGljL3BhaW50L2pzL2d1aS9DUEJveEJsdXJEaWFsb2cuanMiLCIvVXNlcnMvbmljb2xlYmVndWVzc2UvRGVza3RvcC9wYWludC1iYnMvcHVibGljL3BhaW50L2pzL2d1aS9DUEJydXNoUGFsZXR0ZS5qcyIsIi9Vc2Vycy9uaWNvbGViZWd1ZXNzZS9EZXNrdG9wL3BhaW50LWJicy9wdWJsaWMvcGFpbnQvanMvZ3VpL0NQQ2FudmFzLmpzIiwiL1VzZXJzL25pY29sZWJlZ3Vlc3NlL0Rlc2t0b3AvcGFpbnQtYmJzL3B1YmxpYy9wYWludC9qcy9ndWkvQ1BDaGVja2JveC5qcyIsIi9Vc2Vycy9uaWNvbGViZWd1ZXNzZS9EZXNrdG9wL3BhaW50LWJicy9wdWJsaWMvcGFpbnQvanMvZ3VpL0NQQ29sb3JQYWxldHRlLmpzIiwiL1VzZXJzL25pY29sZWJlZ3Vlc3NlL0Rlc2t0b3AvcGFpbnQtYmJzL3B1YmxpYy9wYWludC9qcy9ndWkvQ1BDb2xvclNlbGVjdC5qcyIsIi9Vc2Vycy9uaWNvbGViZWd1ZXNzZS9EZXNrdG9wL3BhaW50LWJicy9wdWJsaWMvcGFpbnQvanMvZ3VpL0NQQ29sb3JTbGlkZXIuanMiLCIvVXNlcnMvbmljb2xlYmVndWVzc2UvRGVza3RvcC9wYWludC1iYnMvcHVibGljL3BhaW50L2pzL2d1aS9DUENvbG9yU3dhdGNoLmpzIiwiL1VzZXJzL25pY29sZWJlZ3Vlc3NlL0Rlc2t0b3AvcGFpbnQtYmJzL3B1YmxpYy9wYWludC9qcy9ndWkvQ1BHVUlVdGlscy5qcyIsIi9Vc2Vycy9uaWNvbGViZWd1ZXNzZS9EZXNrdG9wL3BhaW50LWJicy9wdWJsaWMvcGFpbnQvanMvZ3VpL0NQR3JpZERpYWxvZy5qcyIsIi9Vc2Vycy9uaWNvbGViZWd1ZXNzZS9EZXNrdG9wL3BhaW50LWJicy9wdWJsaWMvcGFpbnQvanMvZ3VpL0NQTGF5ZXJzUGFsZXR0ZS5qcyIsIi9Vc2Vycy9uaWNvbGViZWd1ZXNzZS9EZXNrdG9wL3BhaW50LWJicy9wdWJsaWMvcGFpbnQvanMvZ3VpL0NQTWFpbkdVSS5qcyIsIi9Vc2Vycy9uaWNvbGViZWd1ZXNzZS9EZXNrdG9wL3BhaW50LWJicy9wdWJsaWMvcGFpbnQvanMvZ3VpL0NQTWFpbk1lbnUuanMiLCIvVXNlcnMvbmljb2xlYmVndWVzc2UvRGVza3RvcC9wYWludC1iYnMvcHVibGljL3BhaW50L2pzL2d1aS9DUE1pc2NQYWxldHRlLmpzIiwiL1VzZXJzL25pY29sZWJlZ3Vlc3NlL0Rlc2t0b3AvcGFpbnQtYmJzL3B1YmxpYy9wYWludC9qcy9ndWkvQ1BQYWxldHRlLmpzIiwiL1VzZXJzL25pY29sZWJlZ3Vlc3NlL0Rlc2t0b3AvcGFpbnQtYmJzL3B1YmxpYy9wYWludC9qcy9ndWkvQ1BQYWxldHRlTWFuYWdlci5qcyIsIi9Vc2Vycy9uaWNvbGViZWd1ZXNzZS9EZXNrdG9wL3BhaW50LWJicy9wdWJsaWMvcGFpbnQvanMvZ3VpL0NQU2Nyb2xsYmFyLmpzIiwiL1VzZXJzL25pY29sZWJlZ3Vlc3NlL0Rlc2t0b3AvcGFpbnQtYmJzL3B1YmxpYy9wYWludC9qcy9ndWkvQ1BTZW5kRGlhbG9nLmpzIiwiL1VzZXJzL25pY29sZWJlZ3Vlc3NlL0Rlc2t0b3AvcGFpbnQtYmJzL3B1YmxpYy9wYWludC9qcy9ndWkvQ1BTaG9ydGN1dHNEaWFsb2cuanMiLCIvVXNlcnMvbmljb2xlYmVndWVzc2UvRGVza3RvcC9wYWludC1iYnMvcHVibGljL3BhaW50L2pzL2d1aS9DUFNsaWRlci5qcyIsIi9Vc2Vycy9uaWNvbGViZWd1ZXNzZS9EZXNrdG9wL3BhaW50LWJicy9wdWJsaWMvcGFpbnQvanMvZ3VpL0NQU3BsYXNoU2NyZWVuLmpzIiwiL1VzZXJzL25pY29sZWJlZ3Vlc3NlL0Rlc2t0b3AvcGFpbnQtYmJzL3B1YmxpYy9wYWludC9qcy9ndWkvQ1BTdHJva2VQYWxldHRlLmpzIiwiL1VzZXJzL25pY29sZWJlZ3Vlc3NlL0Rlc2t0b3AvcGFpbnQtYmJzL3B1YmxpYy9wYWludC9qcy9ndWkvQ1BTd2F0Y2hlc1BhbGV0dGUuanMiLCIvVXNlcnMvbmljb2xlYmVndWVzc2UvRGVza3RvcC9wYWludC1iYnMvcHVibGljL3BhaW50L2pzL2d1aS9DUFRhYmxldERpYWxvZy5qcyIsIi9Vc2Vycy9uaWNvbGViZWd1ZXNzZS9EZXNrdG9wL3BhaW50LWJicy9wdWJsaWMvcGFpbnQvanMvZ3VpL0NQVGV4dHVyZVBhbGV0dGUuanMiLCIvVXNlcnMvbmljb2xlYmVndWVzc2UvRGVza3RvcC9wYWludC1iYnMvcHVibGljL3BhaW50L2pzL2d1aS9DUFRvb2xQYWxldHRlLmpzIiwiL1VzZXJzL25pY29sZWJlZ3Vlc3NlL0Rlc2t0b3AvcGFpbnQtYmJzL3B1YmxpYy9wYWludC9qcy91dGlsL0Fkb2JlQ29sb3JUYWJsZS5qcyIsIi9Vc2Vycy9uaWNvbGViZWd1ZXNzZS9EZXNrdG9wL3BhaW50LWJicy9wdWJsaWMvcGFpbnQvanMvdXRpbC9BcnJheURhdGFTdHJlYW0uanMiLCIvVXNlcnMvbmljb2xlYmVndWVzc2UvRGVza3RvcC9wYWludC1iYnMvcHVibGljL3BhaW50L2pzL3V0aWwvQ1BCZXppZXIuanMiLCIvVXNlcnMvbmljb2xlYmVndWVzc2UvRGVza3RvcC9wYWludC1iYnMvcHVibGljL3BhaW50L2pzL3V0aWwvQ1BDb2xvci5qcyIsIi9Vc2Vycy9uaWNvbGViZWd1ZXNzZS9EZXNrdG9wL3BhaW50LWJicy9wdWJsaWMvcGFpbnQvanMvdXRpbC9DUENvbG9yRmxvYXQuanMiLCIvVXNlcnMvbmljb2xlYmVndWVzc2UvRGVza3RvcC9wYWludC1iYnMvcHVibGljL3BhaW50L2pzL3V0aWwvQ1BSYW5kb20uanMiLCIvVXNlcnMvbmljb2xlYmVndWVzc2UvRGVza3RvcC9wYWludC1iYnMvcHVibGljL3BhaW50L2pzL3V0aWwvQ1BSZWN0LmpzIiwiL1VzZXJzL25pY29sZWJlZ3Vlc3NlL0Rlc2t0b3AvcGFpbnQtYmJzL3B1YmxpYy9wYWludC9qcy91dGlsL0NQVHJhbnNmb3JtLmpzIiwiL1VzZXJzL25pY29sZWJlZ3Vlc3NlL0Rlc2t0b3AvcGFpbnQtYmJzL3B1YmxpYy9wYWludC9qcy91dGlsL0NQV2Fjb21UYWJsZXQuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7cUJDa1F3QixZQUFZOzs7O2lDQTVPWixzQkFBc0I7Ozs7K0JBQ3hCLG9CQUFvQjs7OztzQ0FDYiwyQkFBMkI7Ozs7cUNBQzVCLDBCQUEwQjs7OzttQ0FFNUIseUJBQXlCOzs7OzRCQUU3QixpQkFBaUI7Ozs7Z0NBRWIscUJBQXFCOzs7O29DQUNqQix5QkFBeUI7Ozs7a0NBQzNCLHVCQUF1Qjs7OztpQ0FDeEIsc0JBQXNCOzs7OytCQUN4QixvQkFBb0I7Ozs7K0JBQ3BCLG9CQUFvQjs7OzsyQkFFekIsZ0JBQWdCOzs7O2lDQUNWLHNCQUFzQjs7OzswQkFDN0IsZUFBZTs7OztBQUVsQyxTQUFTLGdCQUFnQixDQUFDLFNBQVMsRUFBRTtBQUNqQyxRQUNJLFdBQVcsSUFB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Q0FBQyxHQUFHLEtBQUssRUFBRSxDQUFDLElBQUksR0FBRyxFQUFFO0FBQ3BDLHVCQUFPLENBQUMsSUFBSSxDQUFDLDhCQUFhLGFBQWEsQ0FBQyxhQUFhLENBQUMsUUFBUSxDQUFDLEVBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxHQUFHLEVBQUUsQ0FBQSxBQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ3BGLHVCQUFPLENBQUMsSUFBSSxDQUFDLDhCQUFhLGFBQWEsQ0FBQyxhQUFhLENBQUMsUUFBUSxDQUFDLEVBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxHQUFHLEVBQUUsQ0FBQSxBQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ3BGLHVCQUFPLENBQUMsSUFBSSxDQUFDLDhCQUFhLGFBQWEsQ0FBQyxhQUFhLENBQUMsUUFBUSxDQUFDLENBQUMsRUFBRSxFQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsR0FBRyxFQUFFLENBQUEsQUFBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ3BGLHVCQUFPLENBQUMsSUFBSSxDQUFDLDhCQUFhLGFBQWEsQ0FBQyxhQUFhLENBQUMsUUFBUSxDQUFDLENBQUMsRUFBRSxFQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsR0FBRyxFQUFFLENBQUEsQUFBQyxDQUFDLENBQUMsQ0FBQyxDQUFDOztBQUVwRix1QkFBTyxDQUFDLElBQUksQ0FBQyw4QkFBYSxhQUFhLENBQUMsYUFBYSxDQUFDLFFBQVEsQ0FBQyxFQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsR0FBRyxHQUFHLEdBQUcsRUFBRSxDQUFBLEFBQUMsRUFBRSxFQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsR0FBRyxHQUFHLEdBQUcsRUFBRSxDQUFBLEFBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUM3Ryx1QkFBTyxDQUFDLElBQUksQ0FBQyw4QkFBYSxhQUFhLENBQUMsYUFBYSxDQUFDLFFBQVEsQ0FBQyxFQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsR0FBRyxHQUFHLEdBQUcsRUFBRSxD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QUFJLEtBQUssSUFBSSxHQUFHLEVBQUU7QUFDZCwwQkFBTSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDO0FBQzVDLDBCQUFNLENBQUMsSUFBSSxDQUFDLFFBQVEsR0FBRyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLFFBQVEsR0FBRyxDQUFDLENBQUMsQ0FBQztBQUNwRCwwQkFBTSxDQUFDLElBQUksQ0FBQyxRQUFRLEdBQUcsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxRQUFRLEdBQUcsQ0FBQyxDQUFDLENBQUM7QUFDcEQsMEJBQU0sQ0FBQyxJQUFJLENBQUMsUUFBUSxHQUFHLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQztpQkFDbkMsTUFBTTtBQUNILHdCQUNJLFFBQVEsR0FBRyxHQUFHLEdBQUcsS0FBSyxDQUFDOztBQUUzQiwwQkFBTSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsR0FBRyxBQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsR0FBRyxLQUFLLEdBQUcsTUFBTSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsR0FBRyxRQUFRLENBQUEsR0FBSSxHQUFHLEdBQUksQ0FBQyxDQUFDO0FBQ3JHLDBCQUFNLENBQUMsSUFBSSxDQUFDLFFBQVEsR0FBRyxDQUFDLENBQUMsR0FBRyxBQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxRQUFRLEdBQUcsQ0FBQyxDQUFDLEdBQUcsS0FBSyxHQUFHLE1BQU0sQ0FBQyxJQUFJLENBQUMsUUFBUSxHQUFHLENBQUMsQ0FBQyxHQUFHLFFBQVEsQ0FBQSxHQUFJLEdBQUcsR0FBSSxDQUFDLENBQUM7QUFDakgsMEJBQU0sQ0FBQyxJQUFJLENBQUMsUUFBUSxHQUFHLENBQUMsQ0FBQyxHQUFHLEFBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLFFBQVEsR0FBRyxDQUFDLENBQUMsR0FBRyxLQUFLLEdBQUcsTUFBTSxDQUFD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QyxVQUFVLEdBQUcsVUFBUyxHQUFHLEVBQUU7QUFDakQsU0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLEVBQUU7QUFDakMsWUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxFQUFFLENBQUMsR0FBRyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7S0FDbEM7Q0FDSixDQUFDOztBQUVGLGVBQWUsQ0FBQyxTQUFTLENBQUMsU0FBUyxHQUFHLFVBQVMsQ0FBQyxFQUFFO0FBQzlDLFFBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDO0NBQzdCLENBQUM7OztBQUdGLGVBQWUsQ0FBQyxTQUFTLENBQUMsT0FBTyxHQUFHLGVBQWUsQ0FBQyxTQUFTLENBQUMsU0FBUyxDQUFDOztBQUV4RSxlQUFlLENBQUMsU0FBUyxDQUFDLFVBQVUsR0FBRyxVQUFTLENBQUMsRUFBRTtBQUMvQyxRQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLEVBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQztBQUMxQixRQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLEVBQUUsQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUM7Q0FDbEMsQ0FBQzs7QUFFRixlQUFlLENBQUMsU0FBUyxDQUFDLFVBQVUsR0FBRyxVQUFTLENBQUMsRUFBRTtBQUMvQyxRQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLEVBQUUsQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUM7QUFDL0IsUUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUM7Q0FDN0IsQ0FBQzs7QUFFRixlQUFlLENBQUMsU0FBUyxDQUFDLFVBQVUsR0FBRyxVQUFTLENBQUMsRUFBRTtBQUMvQyxRQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFH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RSxJQUFJLENBQUMsR0FBRyxHQUFHLEVBQUUsQ0FBQSxBQUFDO0FBQ3pCLHFCQUFLLENBQUM7QUFDRix3QkFBSSxDQUFDLEdBQUcsR0FBRyxBQUFDLElBQUksQ0FBQyxLQUFLLElBQUksRUFBRSxHQUFLLENBQUMsSUFBSSxDQUFDLEFBQUMsR0FBRyxDQUFDLENBQUM7QUFDN0MsMEJBQU07QUFBQSxBQUNWLHFCQUFLLENBQUM7QUFDRix3QkFBSSxDQUFDLEdBQUcsR0FBRyxBQUFDLENBQUMsSUFBSSxFQUFFLEdBQUssSUFBSSxDQUFDLEtBQUssSUFBSSxDQUFDLEFBQUMsR0FBRyxDQUFDLENBQUM7QUFDN0MsMEJBQU07QUFBQSxBQUNWLHFCQUFLLENBQUM7QUFDRix3QkFBSSxDQUFDLEdBQUcsR0FBRyxBQUFDLENBQUMsSUFBSSxFQUFFLEdBQUssSUFBSSxDQUFDLEtBQUssSUFBSSxDQUFDLEFBQUMsR0FBRyxDQUFDLENBQUM7QUFDN0MsMEJBQU07QUFBQSxBQUNWLHFCQUFLLENBQUM7QUFDRix3QkFBSSxDQUFDLEdBQUcsR0FBRyxBQUFDLENBQUMsSUFBSSxFQUFFLEdBQUssQ0FBQyxJQUFJLENBQUMsQUFBQyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUM7QUFDN0MsMEJBQU07QUFBQSxBQUNWLHFCQUFLLENBQUM7QUFDRix3QkFBSSxDQUFDLEdBQUcsR0FBRyxBQUFDLENBQUMsSUFBSSxFQUFFLEdBQUssQ0FBQyxJQUFJLENBQUMsQUFBQyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUM7QUFDN0MsMEJBQU07QUFBQSxBQUNWLHFCQUFLLENBQUM7QUFDRix3QkFBSSxDQUFDLEdBQUcsR0FBRyxBQUFDLElBQUksQ0FBQyxLQUFLLElBQUksRUFBRSxHQUFLLENBQUMsSUFBSSxDQUFDLEFBQUMsR0FBRyxDQUFDLENBQUM7QUFDN0MsMEJBQU07QUFBQSxBQUNWO0FBQ0ksd0JBQUksQ0FBQyxHQUFHLEdBQUcsQ0FBQyxDQUFDO0FBQ2IsMEJBQU07QUFBQSxhQUNUO1NBQ0o7S0FDSjs7QUFFRCxRQUFJLENBQUMs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LENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUU7QUFDMUMsUUFBSSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUM7QUFDWCxRQUFJLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQztBQUNYLFFBQUksQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0NBQ2Q7O0FBRUQsWUFBWSxDQUFDLFNBQVMsQ0FBQyxLQUFLLEdBQUcsWUFBVztBQUN0QyxXQUFPLEFBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDLEdBQUcsQ0FBQyxHQUFHLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxDQUFDLENBQUMsSUFBSSxFQUFFLEdBQzNELElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxHQUFHLENBQUMsR0FBRyxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUMsR0FBRyxHQUFHLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxBQUFDLEdBQzNELElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxHQUFHLENBQUMsR0FBRyxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUMsR0FBRyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7Q0FDOUQsQ0FBQzs7QUFFRixZQUFZLENBQUMsU0FBUyxDQUFDLE9BQU8sR0FBRyxVQUFTLEtBQUssRUFBRSxLQUFLLEVBQUU7QUFDcEQsUUFBSSxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsQ0FBQyxJQUFJLEdBQUcsR0FBRyxLQUFLLENBQUEsQUFBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDO0FBQ2xELFFBQUksQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLENBQUMsSUFBSSxHQUFHLEdBQUcsS0FBSyxDQUFBLEFBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQztBQUNsRCxRQUFJ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LEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBRSxDQUFDO0NBQ2pDLENBQUM7O0FBRUYsV0FBVyxDQUFDLFNBQVMsQ0FBQyxRQUFRLEdBQUcsVUFBUyxNQUFNLEVBQUU7QUFDOUMsUUFDSSxHQUFHLEdBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDdkQsR0FBRyxHQUFHLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBRXZELEdBQUcsR0FBRyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUN2RCxHQUFHLEdBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFFdkQsRUFBRSxHQUFHLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDbEUsRUFBRSxHQUFHLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQzs7QUFFdkUsUUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxHQUFHLENBQUM7QUFDaEIsUUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxHQUFHLENBQUM7QUFDaEIsUUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxHQUFHLENBQUM7QUFDaEIsUUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxHQUFHLENBQUM7QUFDaEIsUUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUM7QUFDZixRQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQztDQUNsQixDQUFDOztBQUVGLFdBQVcsQ0FBQyxTQUFTLENBQUMsTUFBTSxHQUFHLFlBQVc7QUFDdEMsUUFDSSxDQUFDLEdBQUcsQ0FBQyxJQUFJLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUEsQUFBQztRQUN2RCxFQUFFLEdBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDO1FBQ2xCLEVBQUUsR0FBRyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQztRQUNuQixFQUFFLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUM7UUFDbkIsRUFBRSxHQUFHLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQztRQUNsQixFQUFFLEdBQUcsQ0FBQyxJQUFJLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUEsQUFBQztRQUN4RCxFQUFFLEdBQUcsQ0FBQyxJQUFJLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUEsQUFBQyxDQUFDOztBQUU3RCxRQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQztBQUNmLFFBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDO0FBQ2YsUUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUM7QUFDZixRQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQztBQUNmLFFBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDO0FBQ2YsUUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUM7Q0FDbEIsQ0FBQzs7QUFFRixXQUFXLENBQUMsU0FBUyxDQUFDLFdBQVcsR0FBRyxZQUFXO0FBQzNDLFFBQ0ksTUFBTSxHQUFHLElBQUksV0FBVyxFQUFFLENBQUM7O0FBRS9CLFVBQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUN4QixVQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDeEIsVUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ3hCLFVBQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUN4QixVQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDeEIsVUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDOztBQUV4QixVQUFNLENBQUMsTUFBTSxFQUFFLENBQUM7O0FBRWhCLFdBQU8sTUFBTSxDQUFDO0NBQ2pCLENBQUM7O0FBRUYsV0FBVyxDQUFDLFNBQVMsQ0FBQyxNQUFNLEdBQUcsVUFBUyxHQUFHLEVBQUU7QUFDekMsUUFDSSxDQUFDLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUM7UUFDakIsQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDO1FBQ2pCLEdBQUcsR0FBRyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUM7UUFDbkMsR0FBRyxHQUFHLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQztRQUNuQyxHQUFHLEdBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUM7UUFDcEMsR0FBRyxHQUFHLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUM7O0FBRXpDLFFBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsR0FBRyxDQUFDO0FBQ2hCLFFBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsR0FBRyxDQUFDO0FBQ2hCLFFBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsR0FBRyxDQUFDO0FBQ2hCLFFBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsR0FBRyxDQUFDO0NBQ25CLENBQUM7O0FBRUYsV0FBVyxDQUFDLFNBQVMsQ0FBQyxpQkFBaUIsR0FBRyxVQUFTLEdBQUcsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFO0FBQzFELFFBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO0FBQ3JCLFFBQUksQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUM7QUFDakIsUUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDO0NBQzFCLENBQUM7O0FBRUYsV0FBVyxDQUFDLFNBQVMsQ0FBQyxTQUFTLEdBQUcsVUFBUyxDQUFDLEVBQUUsQ0FBQyxFQUFFO0FBQzdDLFFBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUM7QUFDM0MsUUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQztDQUM5QyxDQUFDOztBQUVGLFdBQVcsQ0FBQyxTQUFTLENBQUMsS0FBSyxHQUFH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QUksR0FBRyxpQ0FBaUMsQ0FBQztTQUN6RDs7QUFFRCxvQkFBWSxDQUFDLEtBQUssQ0FBQyxRQUFRLEdBQUcsVUFBVSxDQUFDO0FBQ3pDLG9CQUFZLENBQUMsS0FBSyxDQUFDLFVBQVUsR0FBRyxRQUFRLENBQUM7QUFDekMsb0JBQVksQ0FBQyxNQUFNLEdBQUcscUJBQXFCLENBQUM7O0FBRTVDLGdCQUFRLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxZQUFZLENBQUMsQ0FBQzs7QUFFeEMsa0JBQVUsQ0FBQyxZQUFXO0FBQ2xCLGdCQUFJLENBQUMsSUFBSSxDQUFDLGVBQWUsRUFBRSxFQUFFO0FBQ3pCLHVCQUFPLENBQUMsR0FBRyxDQUFDLGlFQUFpRSxDQUFDLENBQUM7YUFDbEY7U0FDSixFQUFFLElBQUksQ0FBQyxDQUFDO0tBQ1osQ0FBQztDQUNMOztBQUVELGFBQWEsQ0FBQyxNQUFNLEdBQUcsWUFBVztBQUM5QixRQUFJLGFBQWEsQ0FBQyxRQUFRLElBQUksSUFBSSxFQUFFO0FBQ2hDLHFCQUFhLENBQUMsUUFBUSxHQUFHLElBQUksYUFBYSxFQUFFLENBQUM7S0FDaEQ7QUFDRCxXQUFPLGFBQWEsQ0FBQyxRQUFRLENBQUM7Q0FDakMsQ0FBQTs7QUFFRCxNQUFNLENBQUMsbUJBQW1CLEdBQUcsWUFBVztBQUNwQyxpQkFBYSxDQUFDLE1BQU0sRUFBRSxDQUFDLFlBQVksRUFBRSxDQUFDO0NBQ3pDLENBQUEiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiLypcbiAgICBDaGlja2VuUGFpbnRcblxuICAgIENoaWNrZW5QYWludCBpcyBhIHRyYW5zbGF0aW9uIG9mIENoaWJpUGFpbnQgZnJvbSBKYXZhIHRvIEphdmFTY3JpcHRcbiAgICBieSBOaWNob2xhcyBTaGVybG9jayAvIENoaWNrZW4gU21vb3RoaWUuXG5cbiAgICBDaGliaVBhaW50IGlzIENvcHlyaWdodCAoYykgMjAwNi0yMDA4IE1hcmMgU2NoZWZlclxuXG4gICAgQ2hpY2tlblBhaW50IGlzIGZyZWUgc29mdHdhcmU6IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vciBtb2RpZnlcbiAgICBpdCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGFzIHB1Ymxpc2hlZCBieVxuICAgIHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb24sIGVpdGhlciB2ZXJzaW9uIDMgb2YgdGhlIExpY2Vuc2UsIG9yXG4gICAgKGF0IHlvdXIgb3B0aW9uKSBhbnkgbGF0ZXIgdmVyc2lvbi5cblxuICAgIENoaWNrZW5QYWludCBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLFxuICAgIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mXG4gICAgTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiAgU2VlIHRoZVxuICAgIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuXG5cbiAgICBZb3Ugc2hvdWxkIGhhdmUgcmVjZWl2ZWQgYSBjb3B5IG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZVxuICAgIGFsb25nIHdpdGggQ2hpY2tlblBhaW50LiBJZiBub3QsIHNlZSA8aHR0cDovL3d3dy5nbnUub3JnL2xpY2Vuc2VzLz4uXG4qL1xuXG5pbXBvcnQgQ1BCcnVzaEluZm8gZnJvbSBcIi4vZW5naW5lL0NQQnJ1c2hJbmZvXCI7XG5pbXBvcnQgQ1BBcnR3b3JrIGZyb20gXCIuL2VuZ2luZS9DUEFydHdvcmtcIjtcbmltcG9ydCBDUFJlc291cmNlTG9hZGVyIGZyb20gXCIuL2VuZ2luZS9DUFJlc291cmNlTG9hZGVyXCI7XG5pbXBvcnQgQ1BSZXNvdXJjZVNhdmVyIGZyb20gXCIuL2VuZ2luZS9DUFJlc291cmNlU2F2ZXJcIjtcblxuaW1wb3J0IENQU3Bhc2hTY3JlZW4gZnJvbSBcIi4vZ3VpL0NQU3BsYXNoU2NyZWVuLmpzXCI7XG5cbmltcG9ydCBDUE1haW5HVUkgZnJvbSBcIi4vZ3VpL0NQTWFpbkdVSVwiO1xuXG5pbXBvcnQgQ1BBYm91dERpYWxvZyBmcm9tIFwiLi9ndWkvQ1BBYm91dERpYWxvZ1wiO1xuaW1wb3J0IENQU2hvcnRjdXRzRGlhbG9nIGZyb20gXCIuL2d1aS9DUFNob3J0Y3V0c0RpYWxvZ1wiO1xuaW1wb3J0IENQQm94Qmx1ckRpYWxvZyBmcm9tIFwiLi9ndWkvQ1BCb3hCbHVyRGlhbG9nXCI7XG5pbXBvcnQgQ1BUYWJsZXREaWFsb2cgZnJvbSBcIi4vZ3VpL0NQVGFibGV0RGlhbG9nXCI7XG5pbXBvcnQgQ1BHcmlkRGlhbG9nIGZyb20gXCIuL2d1aS9DUEdyaWREaWFsb2dcIjtcbmltcG9ydCBDUFNlbmREaWFsb2cgZnJvbSBcIi4vZ3VpL0NQU2VuZERpYWxvZ1wiO1xuXG5pbXBvcnQgQ1BDb2xvciBmcm9tIFwiLi91dGlsL0NQQ29sb3JcIjtcbmltcG9ydCBDUFdhY29tVGFibGV0IGZyb20gXCIuL3V0aWwvQ1BXYWNvbVRhYmxldFwiO1xuaW1wb3J0IENQUmVjdCBmcm9tIFwiLi91dGlsL0NQUmVjdFwiO1xuXG5mdW5jdGlvbiBpc0V2ZW50U3VwcG9ydGVkKGV2ZW50TmFtZSkge1xuICAgIHZhciBcbiAgICAgICAgaXNTdXBwb3J0ZWQgPSBldmVudE5hbWUgaW4gd2luZG93O1xuICAgIFxuICAgIGlmICghaXNTdXBwb3J0ZWQpIHtcbiAgICAgIHZhciBcbiAgICAgICAgICBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgZWwuc2V0QXR0cmlidXRlKGV2ZW50TmFtZSwgJ3JldHVybjsnKTtcbiAgICAgIFxuICAgICAgaXNTdXBwb3J0ZWQgPSB0eXBlb2YgZWxbZXZlbnROYW1lXSA9PSAnZnVuY3Rpb24nO1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4gaXNTdXBwb3J0ZWQ7XG59XG5cbmZ1bmN0aW9uIGlzQ2FudmFzU3VwcG9ydGVkKCl7XG4gICAgdmFyIGVsZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcbiAgICByZXR1cm4gISEoZWxlbS5nZXRDb250ZXh0ICYmIGVsZW0uZ2V0Q29udGV4dCgnMmQnKSk7XG59XG5cbmZ1bmN0aW9uIGlzQnJvd3NlclN1cHBvcnRlZCgpIHtcbiAgICByZXR1cm4gaXNDYW52YXNTdXBwb3J0ZWQoKSAmJiBcIlVpbnQ4QXJyYXlcIiBpbiB3aW5kb3c7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZURyYXdpbmdUb29scygpIHtcbiAgICB2YXJcbiAgICAgICAgdG9vbHMgPSBuZXcgQXJyYXkoQ2hpY2tlblBhaW50LlRfTUFYKTtcblxuICAgIHRvb2xzW0NoaWNrZW5QYWludC5UX1BFTkNJTF0gPSBuZXcgQ1BCcnVzaEluZm8oe1xuICAgICAgICB0b29sTmI6IENoaWNrZW5QYWludC5UX1BFTkNJTCxcbiAgICAgICAgc2l6ZTogMTYsXG4gICAgICAgIGFscGhhOiAyNTUsXG4gICAgICAgIGlzQUE6IHRydWUsXG4gICAgICAgIG1pblNwYWNpbmc6IDAuNSxcbiAgICAgICAgc3BhY2luZzogMC4wNSxcbiAgICAgICAgcHJlc3N1cmVTaXplOiBmYWxzZSxcbiAgICAgICAgcHJlc3N1cmVBbHBoYTogdHJ1ZSxcbiAgICAgICAgdHlwZTogQ1BCcnVzaEluZm8uQl9ST1VORF9BQSxcbiAgICAgICAgcGFpbnRNb2RlOiBDUEJydXNoSW5mby5NX1BBSU5UXG4gICAgfSk7XG5cbiAgICB0b29sc1tDaGlja2VuUGFpbnQuVF9FUkFTRVJdID0gbmV3IENQQnJ1c2hJbmZvKHtcbiAgICAgICAgdG9vbE5iOiBDaGlja2VuUGFpbnQuVF9FUkFTRVIsXG4gICAgICAgIHNpemU6IDE2LFxuICAgICAgICBhbHBoYTogMjU1LFxuICAgICAgICBpc0FBOiB0cnVlLFxuICAgICAgICBtaW5TcGFjaW5nOiAwLjUsXG4gICAgICAgIHNwYWNpbmc6IDAuMDUsXG4gICAgICAgIHByZXNzdXJlU2l6ZTogZmFsc2UsXG4gICAgICAgIHByZXNzdXJlQWxwaGE6IGZhbHNlLFxuICAgICAgICB0eXBlOiBDUEJydXNoSW5mby5CX1JPVU5EX0FBLFxuICAgICAgICBwYWludE1vZGU6IENQQnJ1c2hJbmZvLk1fRVJBU0VcbiAgICB9KTtcblxuICAgIHRvb2xzW0NoaWNrZW5QYWludC5UX1BFTl0gPSBuZXcgQ1BCcnVzaEluZm8oe1xuICAgICAgICB0b29sTmI6IENoaWNrZW5QYWludC5UX1BFTixcbiAgICAgICAgc2l6ZTogMixcbiAgICAgICAgYWxwaGE6IDEyOCxcbiAgICAgICAgaXNBQTogdHJ1ZSxcbiAgICAgICAgbWluU3BhY2luZzogMC41LFxuICAgICAgICBzcGFjaW5nOiAwLjA1LFxuICAgICAgICBwcmVzc3VyZVNpemU6IHRydWUsXG4gICAgICAgIHByZXNzdXJlQWxwaGE6IGZhbHNlLFxuICAgICAgICB0eXBlOiBDUEJydXNoSW5mby5CX1JPVU5EX0FBLFxuICAgICAgICBwYWludE1vZGU6IENQQnJ1c2hJbmZvLk1fUEFJTlRcbiAgICB9KTtcblxuICAgIHRvb2xzW0NoaWNrZW5QYWludC5UX1NPRlRFUkFTRVJdID0gbmV3IENQQnJ1c2hJbmZvKHtcbiAgICAgICAgdG9vbE5iOiBDaGlja2VuUGFpbnQuVF9TT0ZURVJBU0VSLFxuICAgICAgICBzaXplOiAxNixcbiAgICAgICAgYWxwaGE6IDY0LFxuICAgICAgICBpc0FBOiBmYWxzZSxcbiAgICAgICAgaXNBaXJicnVzaDogdHJ1ZSxcbiAgICAgICAgbWluU3BhY2luZzogMC41LFxuICAgICAgICBzcGFjaW5nOiAwLjA1LFxuICAgICAgICBwcmVzc3VyZVNpemU6IGZhbHNlLFxuICAgICAgICBwcmVzc3VyZUFscGhhOiB0cnVlLFxuICAgICAgICB0eXBlOiBDUEJydXNoSW5mby5CX1JPVU5EX0FJUkJSVVNILFxuICAgICAgICBwYWludE1vZGU6IENQQnJ1c2hJbmZvLk1fRVJBU0VcbiAgICB9KTtcblxuICAgIHRvb2xzW0NoaWNrZW5QYWludC5UX0FJUkJSVVNIXSA9IG5ldyBDUEJydXNoSW5mbyh7XG4gICAgICAgIHRvb2xOYjogQ2hpY2tlblBhaW50LlRfQUlSQlJVU0gsXG4gICAgICAgIHNpemU6IDUwLFxuICAgICAgICBhbHBoYTogMzIsXG4gICAgICAgIGlzQUE6IGZhbHNlLFxuICAgICAgICBpc0FpcmJydXNoOiB0cnVlLFxuICAgICAgICBtaW5TcGFjaW5nOiAwLjUsXG4gICAgICAgIHNwYWNpbmc6IDAuMDUsXG4gICAgICAgIHByZXNzdXJlU2l6ZTogZmFsc2UsXG4gICAgICAgIHByZXNzdXJlQWxwaGE6IHRydWUsXG4gICAgICAgIHR5cGU6IENQQnJ1c2hJbmZvLkJfUk9VTkRfQUlSQlJVU0gsXG4gICAgICAgIHBhaW50TW9kZTogQ1BCcnVzaEluZm8uTV9QQUlOVFxuICAgIH0pO1xuXG4gICAgdG9vbHNbQ2hpY2tlblBhaW50LlRfRE9ER0VdID0gbmV3IENQQnJ1c2hJbmZvKHtcbiAgICAgICAgdG9vbE5iOiBDaGlja2VuUGFpbnQuVF9ET0RHRSxcbiAgICAgICAgc2l6ZTogMzAsXG4gICAgICAgIGFscGhhOiAzMixcbiAgICAgICAgaXNBQTogZmFsc2UsXG4gICAgICAgIGlzQWlyYnJ1c2g6IHRydWUsXG4gICAgICAgIG1pblNwYWNpbmc6IDAuNSxcbiAgICAgICAgc3BhY2luZzogMC4wNSxcbiAgICAgICAgcHJlc3N1cmVTaXplOiBmYWxzZSxcbiAgICAgICAgcHJlc3N1cmVBbHBoYTogdHJ1ZSxcbiAgICAgICAgdHlwZTogQ1BCcnVzaEluZm8uQl9ST1VORF9BSVJCUlVTSCxcbiAgICAgICAgcGFpbnRNb2RlOiBDUEJydXNoSW5mby5NX0RPREdFXG4gICAgfSk7XG5cbiAgICB0b29sc1tDaGlja2VuUGFpbnQuVF9CVVJOXSA9IG5ldyBDUEJydXNoSW5mbyh7XG4gICAgICAgIHRvb2xOYjogQ2hpY2tlblBhaW50LlRfQlVSTixcbiAgICAgICAgc2l6ZTogMzAsXG4gICAgICAgIGFscGhhOiAzMixcbiAgICAgICAgaXNBQTogZmFsc2UsXG4gICAgICAgIGlzQWlyYnJ1c2g6IHRydWUsXG4gICAgICAgIG1pblNwYWNpbmc6IDAuNSxcbiAgICAgICAgc3BhY2luZzogMC4wNSxcbiAgICAgICAgcHJlc3N1cmVTaXplOiBmYWxzZSxcbiAgICAgICAgcHJlc3N1cmVBbHBoYTogdHJ1ZSxcbiAgICAgICAgdHlwZTogQ1BCcnVzaEluZm8uQl9ST1VORF9BSVJCUlVTSCxcbiAgICAgICAgcGFpbnRNb2RlOiBDUEJydXNoSW5mby5NX0JVUk5cbiAgICB9KTtcblxuICAgIHRvb2xzW0NoaWNrZW5QYWludC5UX1dBVEVSXSA9IG5ldyBDUEJydXNoSW5mbyh7XG4gICAgICAgIHRvb2xOYjogQ2hpY2tlblBhaW50LlRfV0FURVIsXG4gICAgICAgIHNpemU6IDMwLFxuICAgICAgICBhbHBoYTogNzAsXG4gICAgICAgIGlzQUE6IGZhbHNlLFxuICAgICAgICBpc0FpcmJydXNoOiB0cnVlLFxuICAgICAgICBtaW5TcGFjaW5nOiAwLjUsXG4gICAgICAgIHNwYWNpbmc6IDAuMDIsXG4gICAgICAgIHByZXNzdXJlU2l6ZTogZmFsc2UsXG4gICAgICAgIHByZXNzdXJlQWxwaGE6IHRydWUsXG4gICAgICAgIHR5cGU6IENQQnJ1c2hJbmZvLkJfUk9VTkRfQUEsXG4gICAgICAgIHBhaW50TW9kZTogQ1BCcnVzaEluZm8uTV9XQVRFUixcbiAgICAgICAgcmVzYXQ6IDAuMyxcbiAgICAgICAgYmxlZWQ6IDAuNlxuICAgIH0pO1xuXG4gICAgdG9vbHNbQ2hpY2tlblBhaW50LlRfQkxVUl0gPSBuZXcgQ1BCcnVzaEluZm8oe1xuICAgICAgICB0b29sTmI6IENoaWNrZW5QYWludC5UX0JMVVIsXG4gICAgICAgIHNpemU6IDIwLFxuICAgICAgICBhbHBoYTogMjU1LFxuICAgICAgICBpc0FBOiBmYWxzZSxcbiAgICAgICAgaXNBaXJicnVzaDogdHJ1ZSxcbiAgICAgICAgbWluU3BhY2luZzogMC41LFxuICAgICAgICBzcGFjaW5nOiAwLjA1LFxuICAgICAgICBwcmVzc3VyZVNpemU6IGZhbHNlLFxuICAgICAgICBwcmVzc3VyZUFscGhhOiB0cnVlLFxuICAgICAgICB0eXBlOiBDUEJydXNoSW5mby5CX1JPVU5EX1BJWEVMLFxuICAgICAgICBwYWludE1vZGU6IENQQnJ1c2hJbmZvLk1fQkxVUlxuICAgIH0pO1xuXG4gICAgdG9vbHNbQ2hpY2tlblBhaW50LlRfU01VREdFXSA9IG5ldyBDUEJydXNoSW5mbyh7XG4gICAgICAgIHRvb2xOYjogQ2hpY2tlblBhaW50LlRfU01VREdFLFxuICAgICAgICBzaXplOiAyMCxcbiAgICAgICAgYWxwaGE6IDEyOCxcbiAgICAgICAgaXNBQTogZmFsc2UsXG4gICAgICAgIGlzQWlyYnJ1c2g6IHRydWUsXG4gICAgICAgIG1pblNwYWNpbmc6IDAuNSxcbiAgICAgICAgc3BhY2luZzogMC4wMSxcbiAgICAgICAgcHJlc3N1cmVTaXplOiBmYWxzZSxcbiAgICAgICAgcHJlc3N1cmVBbHBoYTogdHJ1ZSxcbiAgICAgICAgdHlwZTogQ1BCcnVzaEluZm8uQl9ST1VORF9BSVJCUlVTSCxcbiAgICAgICAgcGFpbnRNb2RlOiBDUEJydXNoSW5mby5NX1NNVURHRSxcbiAgICAgICAgcmVzYXQ6IDAuMCxcbiAgICAgICAgYmxlZWQ6IDEuMFxuICAgIH0pO1xuXG4gICAgdG9vbHNbQ2hpY2tlblBhaW50LlRfQkxFTkRFUl0gPSBuZXcgQ1BCcnVzaEluZm8oe1xuICAgICAgICB0b29sTmI6IENoaWNrZW5QYWludC5UX0JMRU5ERVIsXG4gICAgICAgIHNpemU6IDIwLFxuICAgICAgICBhbHBoYTogNjAsXG4gICAgICAgIGlzQUE6IGZhbHNlLFxuICAgICAgICBpc0FpcmJydXNoOiB0cnVlLFxuICAgICAgICBtaW5TcGFjaW5nOiAwLjUsXG4gICAgICAgIHNwYWNpbmc6IDAuMSxcbiAgICAgICAgcHJlc3N1cmVTaXplOiBmYWxzZSxcbiAgICAgICAgcHJlc3N1cmVBbHBoYTogdHJ1ZSxcbiAgICAgICAgdHlwZTogQ1BCcnVzaEluZm8uQl9ST1VORF9BSVJCUlVTSCxcbiAgICAgICAgcGFpbnRNb2RlOiBDUEJydXNoSW5mby5NX09JTCxcbiAgICAgICAgcmVzYXQ6IDAuMCxcbiAgICAgICAgYmxlZWQ6IDAuMDdcbiAgICB9KTtcblxuICAgIHJldHVybiB0b29scztcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGFuIGluc3RhbmNlIG9mIHRoZSBDaGlja2VuUGFpbnQgZHJhd2luZyBhcHAuIE9wdGlvbnMgaXMgYW4gb2JqZWN0IHdpdGggdGhlc2Uga2V5czpcbiAqXG4gKiB1aUVsZW0gICAgICAgLSBET00gZWxlbWVudCB0byBpbnNlcnQgQ2hpY2tlblBhaW50IGludG8gKHJlcXVpcmVkKVxuICogY2FudmFzV2lkdGggIC0gV2lkdGggaW4gcGl4ZWxzIHRvIHVzZSB3aGVuIGNyZWF0aW5nIGJsYW5rIGNhbnZhc2VzIChkZWZhdWx0cyB0byA4MDApXG4gKiBjYW52YXNIZWlnaHQgLSBIZWlnaHQgaW4gcGl4ZWxzIHRvIHVzZSB3aGVuIGNyZWF0aW5nIGJsYW5rIGNhbnZhc2VzIChkZWZhdWx0cyB0byA2MDApXG4gKiByb3RhdGlvbiAgICAgLSBJbnRlZ2VyIGZyb20gWzAuLjNdLCBudW1iZXIgb2YgOTAgZGVncmVlIHJpZ2h0IHJvdGF0aW9ucyB0aGF0IHNob3VsZCBiZSBhcHBsaWVkIHRvIHRoZSBjYW52YXMgYWZ0ZXJcbiAqICAgICAgICAgICAgICAgIGxvYWRpbmdcbiAqXG4gKiBzYXZlVXJsICAgLSBVUkwgdG8gUE9TVCB0aGUgZHJhd2luZyB0byB0byBzYXZlIGl0XG4gKiBwb3N0VXJsICAgLSBVUkwgdG8gbmF2aWdhdGUgdG8gYWZ0ZXIgc2F2aW5nIGlzIHN1Y2Nlc3NmdWwgYW5kIHRoZSB1c2VyIGNob29zZXMgdG8gc2VlL3B1Ymxpc2ggdGhlaXIgZmluaXNoZWQgcHJvZHVjdFxuICogZXhpdFVybCAgIC0gVVJMIHRvIG5hdmlnYXRlIHRvIGFmdGVyIHNhdmluZyBpcyBzdWNjZXNzZnVsIGFuZCB0aGUgdXNlciBjaG9vc2VzIHRvIGV4aXQgKG9wdGlvbmFsKVxuICogdGVzdFVybCAgIC0gVVJMIHRoYXQgQ2hpY2tlblBhaW50IGNhbiBzaW11bGF0ZSBhIGRyYXdpbmcgdXBsb2FkIHRvIHRvIHRlc3QgdGhlIHVzZXIncyBwZXJtaXNzaW9ucy9jb25uZWN0aW9uIChvcHRpb25hbClcbiAqXG4gKiBsb2FkSW1hZ2VVcmwgICAgIC0gVVJMIG9mIFBORy9KUEVHIGltYWdlIHRvIGxvYWQgZm9yIGVkaXRpbmcgKG9wdGlvbmFsKVxuICogbG9hZENoaWJpRmlsZVVybCAtIFVSTCBvZiAuY2hpIGZpbGUgdG8gbG9hZCBmb3IgZWRpdGluZyAob3B0aW9uYWwpLiBVc2VkIGluIHByZWZlcmVuY2UgdG8gbG9hZEltYWdlLlxuICogbG9hZFN3YXRjaGVzVXJsICAtIFVSTCBvZiBhbiAuYWNvIHBhbGV0dGUgdG8gbG9hZCAob3B0aW9uYWwpXG4gKiBcbiAqIGFsbG93RG93bmxvYWQgLSBBbGxvdyB0aGUgZHJhd2luZyB0byBiZSBzYXZlZCB0byB0aGUgdXNlcidzIGNvbXB1dGVyXG4gKiBhbGxvd0Z1bGxTY3JlZW4gLSBBbGxvdyB0aGUgZHJhd2luZyB0b29sIHRvIGVudGVyIFwiZnVsbCBzY3JlZW5cIiBtb2RlLCB3aGVyZSB0aGUgcmVzdCBvZiB0aGUgcGFnZSBjb250ZW50cyB3aWxsIGJlIGhpZGRlblxuICpcbiAqIGRpc2FibGVCb290c3RyYXBBUEkgLSBEaXNhYmxlIEJvb3RzdHJhcCdzIGRhdGEgQVBJIG9uIHRoZSByb290IG9mIHRoZSBkb2N1bWVudC4gVGhpcyBzcGVlZHMgdXAgdGhpbmdzIGNvbnNpZGVyYWJseS5cbiAqIFxuICogcmVzb3VyY2VzUm9vdCAtIFVSTCB0byB0aGUgZGlyZWN0b3J5IHRoYXQgY29udGFpbnMgdGhlIGdmeC9jc3MgZXRjIGRpcmVjdG9yaWVzIChyZWxhdGl2ZSB0byB0aGUgcGFnZSB0aGF0IFxuICogICAgICAgICAgICAgICAgIENoaWNrZW5QYWludCBpcyBsb2FkZWQgb24pXG4gKlxuICogQHRocm93cyBDaGlja2VuUGFpbnQuVW5zdXBwb3J0ZWRCcm93c2VyRXhjZXB0aW9uIGlmIHRoZSB3ZWIgYnJvd3NlciBkb2VzIG5vdCBzdXBwb3J0IENoaWNrZW5QYWludFxuICovXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBDaGlja2VuUGFpbnQob3B0aW9ucykge1xuICAgIHZhclxuICAgICAgICB0aGF0ID0gdGhpcyxcblxuICAgICAgICB1aUVsZW0gPSBvcHRpb25zLnVpRWxlbSxcblxuICAgICAgICBjYW52YXMsXG4gICAgICAgIG1haW5HVUksXG5cbiAgICAgICAgY3VyQ29sb3IgPSBuZXcgQ1BDb2xvcigwKSxcbiAgICAgICAgY3VyQnJ1c2ggPSBDaGlja2VuUGFpbnQuVF9QRU5DSUwsXG4gICAgICAgIGN1ck1vZGUgPSBDaGlja2VuUGFpbnQuTV9EUkFXLFxuICAgICAgICBjdXJHcmFkaWVudCA9IFsweEZGMDAwMDAwLCAweEZGRkZGRkZGXSxcblxuICAgICAgICBmdWxsU2NyZWVuTW9kZSA9IGZhbHNlLFxuXG4gICAgICAgIHRvb2xzID0gY3JlYXRlRHJhd2luZ1Rvb2xzKCksXG5cbiAgICAgICAgYm94Qmx1ckRpYWxvZywgZ3JpZERpYWxvZztcblxuICAgIGZ1bmN0aW9uIHNob3dCb3hCbHVyRGlhbG9nKCkge1xuICAgICAgICBpZiAoIWJveEJsdXJEaWFsb2cpIHtcbiAgICAgICAgICAgIGJveEJsdXJEaWFsb2cgPSBuZXcgQ1BCb3hCbHVyRGlhbG9nKHVpRWxlbSwgdGhhdCk7XG4gICAgICAgIH1cblxuICAgICAgICBib3hCbHVyRGlhbG9nLnNob3coKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzaG93R3JpZE9wdGlvbnNEaWFsb2coKSB7XG4gICAgICAgIGlmICghZ3JpZERpYWxvZykge1xuICAgICAgICAgICAgZ3JpZERpYWxvZyA9IG5ldyBDUEdyaWREaWFsb2codWlFbGVtLCBjYW52YXMpO1xuICAgICAgICB9XG5cbiAgICAgICAgZ3JpZERpYWxvZy5zaG93KCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY2FsbFRvb2xMaXN0ZW5lcnMoKSB7XG4gICAgICAgIHRoYXQuZW1pdEV2ZW50KCd0b29sQ2hhbmdlJywgW2N1ckJydXNoLCB0b29sc1tjdXJCcnVzaF1dKTtcbiAgICB9XG5cbiAgICAvLyBUT0RPIG1ha2UgbWUgcHJpdmF0ZVxuICAgIHRoaXMuY2FsbFRvb2xMaXN0ZW5lcnMgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgY2FsbFRvb2xMaXN0ZW5lcnMoKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjYWxsTW9kZUxpc3RlbmVycygpIHtcbiAgICAgICAgdGhhdC5lbWl0RXZlbnQoJ21vZGVDaGFuZ2UnLCBbY3VyTW9kZV0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNhbGxWaWV3TGlzdGVuZXJzKHZpZXdJbmZvKSB7XG4gICAgICAgIHRoYXQuZW1pdEV2ZW50KCd2aWV3Q2hhbmdlJywgW3ZpZXdJbmZvXSk7XG4gICAgfVxuICAgIFxuICAgIHRoaXMuZ2V0TWFpbkdVSSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gbWFpbkdVSTtcbiAgICB9O1xuXG4gICAgdGhpcy5nZXRBcnR3b3JrID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmFydHdvcms7XG4gICAgfTtcblxuICAgIHRoaXMuc2V0Q2FudmFzID0gZnVuY3Rpb24oX2NhbnZhcykge1xuICAgICAgICBjYW52YXMgPSBfY2FudmFzO1xuICAgIH07XG5cbiAgICB0aGlzLnNldEN1ckNvbG9yID0gZnVuY3Rpb24oY29sb3IpIHtcbiAgICAgICAgaWYgKCFjdXJDb2xvci5pc0VxdWFsKGNvbG9yKSkge1xuICAgICAgICAgICAgdGhpcy5hcnR3b3JrLnNldEZvcmVncm91bmRDb2xvcihjb2xvci5nZXRSZ2IoKSk7XG5cbiAgICAgICAgICAgIGN1ckNvbG9yLmNvcHlGcm9tKGNvbG9yKTtcblxuICAgICAgICAgICAgdGhpcy5lbWl0RXZlbnQoJ2NvbG9yQ2hhbmdlJywgW2NvbG9yXSk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgdGhpcy5nZXRDdXJDb2xvciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gY3VyQ29sb3IuY2xvbmUoKTtcbiAgICB9O1xuXG4gICAgdGhpcy5nZXRDdXJDb2xvclJnYiA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gY3VyQ29sb3IuZ2V0UmdiKCk7XG4gICAgfTtcblxuICAgIHRoaXMuc2V0Q3VyQ29sb3JSZ2IgPSBmdW5jdGlvbihjb2xvcikge1xuICAgICAgICB0aGlzLnNldEN1ckNvbG9yKG5ldyBDUENvbG9yKGNvbG9yKSk7XG4gICAgfTtcblxuICAgIHRoaXMuc2V0Q3VyR3JhZGllbnQgPSBmdW5jdGlvbihncmFkaWVudCkge1xuICAgICAgICBjdXJHcmFkaWVudCA9IGdyYWRpZW50LnNsaWNlKDApOyAvLyBDbG9uZVxuXG4gICAgICAgIHRoaXMuZW1pdEV2ZW50KCdncmFkaWVudENoYW5nZScsIFtjdXJHcmFkaWVudF0pO1xuICAgIH07XG5cbiAgICB0aGlzLmdldEN1ckdyYWRpZW50ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBjdXJHcmFkaWVudC5zbGljZSgwKTsgLy8gQ2xvbmVcbiAgICB9O1xuXG4gICAgdGhpcy5zZXRCcnVzaFNpemUgPSBmdW5jdGlvbihzaXplKSB7XG4gICAgICAgIHRvb2xzW2N1ckJydXNoXS5zaXplID0gTWF0aC5tYXgoMSwgTWF0aC5taW4oMjAwLCBzaXplKSk7XG4gICAgICAgIGNhbGxUb29sTGlzdGVuZXJzKCk7XG4gICAgfTtcblxuICAgIHRoaXMuZ2V0QnJ1c2hTaXplID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0b29sc1tjdXJCcnVzaF0uc2l6ZTtcbiAgICB9O1xuXG4gICAgdGhpcy5zZXRBbHBoYSA9IGZ1bmN0aW9uKGFscGhhKSB7XG4gICAgICAgIHRvb2xzW2N1ckJydXNoXS5hbHBoYSA9IGFscGhhO1xuICAgICAgICBjYWxsVG9vbExpc3RlbmVycygpO1xuICAgIH07XG5cbiAgICB0aGlzLmdldEFscGhhID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0b29sc1tjdXJCcnVzaF0uYWxwaGE7XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIHNldE1vZGUobW9kZSkge1xuICAgICAgICBjdXJNb2RlID0gbW9kZTtcbiAgICAgICAgY2FsbE1vZGVMaXN0ZW5lcnMoKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzZXRUb29sKHRvb2wpIHtcbiAgICAgICAgc2V0TW9kZShDaGlja2VuUGFpbnQuTV9EUkFXKTtcbiAgICAgICAgY3VyQnJ1c2ggPSB0b29sO1xuICAgICAgICB0aGF0LmFydHdvcmsuc2V0QnJ1c2godG9vbHNbdG9vbF0pO1xuICAgICAgICBjYWxsVG9vbExpc3RlbmVycygpO1xuICAgIH1cblxuICAgIHRoaXMuZ2V0QnJ1c2hJbmZvID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0b29sc1tjdXJCcnVzaF07XG4gICAgfVxuICAgIFxuICAgIGZ1bmN0aW9uIHNhdmVEcmF3aW5nKCkge1xuICAgICAgICB2YXJcbiAgICAgICAgICAgIHNhdmVyID0gbmV3IENQUmVzb3VyY2VTYXZlcih7XG4gICAgICAgICAgICAgICAgYXJ0d29yazogdGhhdC5nZXRBcnR3b3JrKCksXG4gICAgICAgICAgICAgICAgcm90YXRpb246IGNhbnZhcy5nZXRSb3RhdGlvbjkwKCksXG4gICAgICAgICAgICAgICAgc3dhdGNoZXM6IG1haW5HVUkuZ2V0U3dhdGNoZXMoKVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICBzYXZlci5vbihcInNhdmluZ0NvbXBsZXRlXCIsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdGhhdC5hcnR3b3JrLnNldEhhc1Vuc2F2ZWRDaGFuZ2VzKGZhbHNlKTtcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICBzYXZlci5vbihcInNhdmluZ0ZhaWx1cmVcIiwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBhbGVydChcIkFuIGVycm9yIG9jY3VyZWQgd2hpbGUgdHJ5aW5nIHRvIHNhdmUgeW91ciBkcmF3aW5nISBQbGVhc2UgdHJ5IGFnYWluIVwiKTtcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICBzYXZlci5zYXZlKCk7XG4gICAgfVxuICAgIFxuICAgIGZ1bmN0aW9uIHNlbmREcmF3aW5nKCkge1xuICAgICAgICB2YXJcbiAgICAgICAgICAgIHNhdmVyID0gbmV3IENQUmVzb3VyY2VTYXZlcih7XG4gICAgICAgICAgICAgICAgYXJ0d29yazogdGhhdC5nZXRBcnR3b3JrKCksXG4gICAgICAgICAgICAgICAgcm90YXRpb246IGNhbnZhcy5nZXRSb3RhdGlvbjkwKCksXG4gICAgICAgICAgICAgICAgc3dhdGNoZXM6IG1haW5HVUkuZ2V0U3dhdGNoZXMoKSxcbiAgICAgICAgICAgICAgICB1cmw6IG9wdGlvbnMuc2F2ZVVybFxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICBzZW5kRGlhbG9nID0gbmV3IENQU2VuZERpYWxvZyh0aGF0LCB1aUVsZW0sIHNhdmVyKTtcbiAgICAgICAgXG4gICAgICAgIHNhdmVyLm9uKFwic2F2aW5nQ29tcGxldGVcIiwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB0aGF0LmFydHdvcmsuc2V0SGFzVW5zYXZlZENoYW5nZXMoZmFsc2UpO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBBbGxvdyB0aGUgZGlhbG9nIHRvIHNob3cgYmVmb3JlIHdlIGJlZ2luIHNlcmlhbGl6YXRpb25cbiAgICAgICAgc2VuZERpYWxvZy5vbihcInNob3duXCIsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgc2F2ZXIuc2F2ZSgpO1xuICAgICAgICB9KTtcblxuICAgICAgICBzZW5kRGlhbG9nLnNob3coKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBOb3QgYWxsIHNhdmluZyBhY3Rpb25zIHdpbGwgYmUgc3VwcG9ydGVkIChkZXBlbmRpbmcgb24gd2hhdCBvcHRpb25zIHdlJ3JlIGNvbmZpZ3VyZWQgd2l0aCkuIFVzZSB0aGlzIGZ1bmN0aW9uXG4gICAgICogdG8gY2hlY2sgZm9yIHN1cHBvcnQgZm9yIGEgZ2l2ZW4gYWN0aW9uLlxuICAgICAqL1xuICAgIHRoaXMuaXNBY3Rpb25TdXBwb3J0ZWQgPSBmdW5jdGlvbihhY3Rpb25OYW1lKSB7XG4gICAgICAgIHN3aXRjaCAoYWN0aW9uTmFtZSkge1xuICAgICAgICAgICAgY2FzZSBcIkNQU2VuZFwiOlxuICAgICAgICAgICAgICAgIHJldHVybiAhIW9wdGlvbnMuc2F2ZVVybDtcblxuICAgICAgICAgICAgY2FzZSBcIkNQU2F2ZVwiOlxuICAgICAgICAgICAgICAgIHJldHVybiBvcHRpb25zLmFsbG93RG93bmxvYWQgIT09IGZhbHNlO1xuXG4gICAgICAgICAgICBjYXNlIFwiQ1BFeGl0XCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuICEhb3B0aW9ucy5leGl0VXJsO1xuXG4gICAgICAgICAgICBjYXNlIFwiQ1BQb3N0XCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuICEhb3B0aW9ucy5wb3N0VXJsO1xuXG4gICAgICAgICAgICBjYXNlIFwiQ1BGdWxsU2NyZWVuXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG9wdGlvbnMuYWxsb3dGdWxsU2NyZWVuICE9PSBmYWxzZTtcblxuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgXG4gICAgdGhpcy5hY3Rpb25QZXJmb3JtZWQgPSBmdW5jdGlvbihlKSB7XG4gICAgICAgIGlmICh0aGlzLmFydHdvcmsgPT0gbnVsbCB8fCBjYW52YXMgPT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuOyAvLyB0aGlzIHNob3VsZG4ndCBoYXBwZW4gYnV0IGp1c3QgaW4gY2FzZVxuICAgICAgICB9XG5cbiAgICAgICAgc3dpdGNoIChlLmFjdGlvbikge1xuICAgICAgICAgICAgY2FzZSBcIkNQRnVsbFNjcmVlblwiOlxuICAgICAgICAgICAgICAgIGZ1bGxTY3JlZW5Nb2RlID0gIWZ1bGxTY3JlZW5Nb2RlO1xuXG4gICAgICAgICAgICAgICAgJChcImJvZHlcIikudG9nZ2xlQ2xhc3MoXCJjaGlja2VucGFpbnQtZnVsbC1zY3JlZW5cIiwgZnVsbFNjcmVlbk1vZGUpO1xuICAgICAgICAgICAgICAgICQodWlFbGVtKS50b2dnbGVDbGFzcyhcImNoaWNrZW5wYWludC1mdWxsLXNjcmVlblwiLCBmdWxsU2NyZWVuTW9kZSk7XG5cbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICBtYWluR1VJLnNldEZ1bGxTY3JlZW5Nb2RlKGZ1bGxTY3JlZW5Nb2RlKTtcbiAgICAgICAgICAgICAgICB9LCAyMDApO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNhc2UgXCJDUFpvb21JblwiOlxuICAgICAgICAgICAgICAgIGNhbnZhcy56b29tSW4oKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcIkNQWm9vbU91dFwiOlxuICAgICAgICAgICAgICAgIGNhbnZhcy56b29tT3V0KCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJDUFpvb20xMDBcIjpcbiAgICAgICAgICAgICAgICBjYW52YXMuem9vbTEwMCgpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiQ1BVbmRvXCI6XG4gICAgICAgICAgICAgICAgdGhpcy5hcnR3b3JrLnVuZG8oKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcIkNQUmVkb1wiOlxuICAgICAgICAgICAgICAgIHRoaXMuYXJ0d29yay5yZWRvKCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJDUENsZWFySGlzdG9yeVwiOlxuICAgICAgICAgICAgICAgIGlmIChjb25maXJtKFwiWW91J3JlIGFib3V0IHRvIGNsZWFyIHRoZSBjdXJyZW50IFVuZG8vUmVkbyBoaXN0b3J5LlxcblRoaXMgb3BlcmF0aW9uIGNhbm5vdCBiZSB1bmRvbmUsIGFyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBkbyB0aGF0P1wiKSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmFydHdvcmsuY2xlYXJIaXN0b3J5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiQ1BQZW5jaWxcIjpcbiAgICAgICAgICAgICAgICBzZXRUb29sKENoaWNrZW5QYWludC5UX1BFTkNJTCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJDUFBlblwiOlxuICAgICAgICAgICAgICAgIHNldFRvb2woQ2hpY2tlblBhaW50LlRfUEVOKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcIkNQRXJhc2VyXCI6XG4gICAgICAgICAgICAgICAgc2V0VG9vbChDaGlja2VuUGFpbnQuVF9FUkFTRVIpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiQ1BTb2Z0RXJhc2VyXCI6XG4gICAgICAgICAgICAgICAgc2V0VG9vbChDaGlja2VuUGFpbnQuVF9TT0ZURVJBU0VSKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcIkNQQWlyYnJ1c2hcIjpcbiAgICAgICAgICAgICAgICBzZXRUb29sKENoaWNrZW5QYWludC5UX0FJUkJSVVNIKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcIkNQRG9kZ2VcIjpcbiAgICAgICAgICAgICAgICBzZXRUb29sKENoaWNrZW5QYWludC5UX0RPREdFKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcIkNQQnVyblwiOlxuICAgICAgICAgICAgICAgIHNldFRvb2woQ2hpY2tlblBhaW50LlRfQlVSTik7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJDUFdhdGVyXCI6XG4gICAgICAgICAgICAgICAgc2V0VG9vbChDaGlja2VuUGFpbnQuVF9XQVRFUik7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJDUEJsdXJcIjpcbiAgICAgICAgICAgICAgICBzZXRUb29sKENoaWNrZW5QYWludC5UX0JMVVIpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiQ1BTbXVkZ2VcIjpcbiAgICAgICAgICAgICAgICBzZXRUb29sKENoaWNrZW5QYWludC5UX1NNVURHRSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJDUEJsZW5kZXJcIjpcbiAgICAgICAgICAgICAgICBzZXRUb29sKENoaWNrZW5QYWludC5UX0JMRU5ERVIpO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIC8vIE1vZGVzXG5cbiAgICAgICAgICAgIGNhc2UgXCJDUEZsb29kRmlsbFwiOlxuICAgICAgICAgICAgICAgIHNldE1vZGUoQ2hpY2tlblBhaW50Lk1fRkxPT0RGSUxMKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcIkNQR3JhZGllbnRGaWxsXCI6XG4gICAgICAgICAgICAgICAgc2V0TW9kZShDaGlja2VuUGFpbnQuTV9HUkFESUVOVEZJTEwpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiQ1BSZWN0U2VsZWN0aW9uXCI6XG4gICAgICAgICAgICAgICAgc2V0TW9kZShDaGlja2VuUGFpbnQuTV9SRUNUX1NFTEVDVElPTik7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJDUE1vdmVUb29sXCI6XG4gICAgICAgICAgICAgICAgc2V0TW9kZShDaGlja2VuUGFpbnQuTV9NT1ZFX1RPT0wpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiQ1BSb3RhdGVDYW52YXNcIjpcbiAgICAgICAgICAgICAgICBzZXRNb2RlKENoaWNrZW5QYWludC5NX1JPVEFURV9DQU5WQVMpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiQ1BDb2xvclBpY2tlclwiOlxuICAgICAgICAgICAgICAgIHNldE1vZGUoQ2hpY2tlblBhaW50Lk1fQ09MT1JfUElDS0VSKTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAvLyBTdHJva2UgbW9kZXNcblxuICAgICAgICAgICAgY2FzZSBcIkNQRnJlZUhhbmRcIjpcbiAgICAgICAgICAgICAgICB0b29sc1tjdXJCcnVzaF0uc3Ryb2tlTW9kZSA9IENQQnJ1c2hJbmZvLlNNX0ZSRUVIQU5EO1xuICAgICAgICAgICAgICAgIGNhbGxUb29sTGlzdGVuZXJzKCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJDUExpbmVcIjpcbiAgICAgICAgICAgICAgICB0b29sc1tjdXJCcnVzaF0uc3Ryb2tlTW9kZSA9IENQQnJ1c2hJbmZvLlNNX0xJTkU7XG4gICAgICAgICAgICAgICAgY2FsbFRvb2xMaXN0ZW5lcnMoKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcIkNQQmV6aWVyXCI6XG4gICAgICAgICAgICAgICAgdG9vbHNbY3VyQnJ1c2hdLnN0cm9rZU1vZGUgPSBDUEJydXNoSW5mby5TTV9CRVpJRVI7XG4gICAgICAgICAgICAgICAgY2FsbFRvb2xMaXN0ZW5lcnMoKTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICBjYXNlIFwiQ1BBYm91dFwiOlxuICAgICAgICAgICAgICAgIG5ldyBDUEFib3V0RGlhbG9nKHVpRWxlbSkuc2hvdygpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiQ1BTaG9ydGN1dHNcIjpcbiAgICAgICAgICAgICAgICBuZXcgQ1BTaG9ydGN1dHNEaWFsb2codWlFbGVtKS5zaG93KCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJDUFRhYmxldFN1cHBvcnRcIjpcbiAgICAgICAgICAgICAgICBuZXcgQ1BUYWJsZXREaWFsb2codWlFbGVtKS5zaG93KCk7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgLy8gTGF5ZXJzIGFjdGlvbnNcblxuICAgICAgICAgICAgY2FzZSBcIkNQTGF5ZXJEdXBsaWNhdGVcIjpcbiAgICAgICAgICAgICAgICB0aGlzLmFydHdvcmsuZHVwbGljYXRlTGF5ZXIoKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcIkNQTGF5ZXJNZXJnZURvd25cIjpcbiAgICAgICAgICAgICAgICB0aGlzLmFydHdvcmsubWVyZ2VEb3duKHRydWUpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiQ1BMYXllck1lcmdlQWxsXCI6XG4gICAgICAgICAgICAgICAgdGhpcy5hcnR3b3JrLm1lcmdlQWxsTGF5ZXJzKHRydWUpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiQ1BGaWxsXCI6XG4gICAgICAgICAgICAgICAgdGhpcy5hcnR3b3JrLmZpbGwodGhpcy5nZXRDdXJDb2xvclJnYigpIHwgMHhmZjAwMDAwMCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJDUENsZWFyXCI6XG4gICAgICAgICAgICAgICAgdGhpcy5hcnR3b3JrLmNsZWFyKCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJDUFNlbGVjdEFsbFwiOlxuICAgICAgICAgICAgICAgIHRoaXMuYXJ0d29yay5yZWN0YW5nbGVTZWxlY3Rpb24odGhpcy5hcnR3b3JrLmdldEJvdW5kcygpKTtcbiAgICAgICAgICAgICAgICBjYW52YXMucmVwYWludEFsbCgpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiQ1BEZXNlbGVjdEFsbFwiOlxuICAgICAgICAgICAgICAgIHRoaXMuYXJ0d29yay5yZWN0YW5nbGVTZWxlY3Rpb24obmV3IENQUmVjdCgwLCAwLCAwLCAwKSk7XG4gICAgICAgICAgICAgICAgY2FudmFzLnJlcGFpbnRBbGwoKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcIkNQSEZsaXBcIjpcbiAgICAgICAgICAgICAgICB0aGlzLmFydHdvcmsuaEZsaXAoKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcIkNQVkZsaXBcIjpcbiAgICAgICAgICAgICAgICB0aGlzLmFydHdvcmsudkZsaXAoKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcIkNQTU5vaXNlXCI6XG4gICAgICAgICAgICAgICAgdGhpcy5hcnR3b3JrLm1vbm9jaHJvbWF0aWNOb2lzZSgpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiQ1BDTm9pc2VcIjpcbiAgICAgICAgICAgICAgICB0aGlzLmFydHdvcmsuY29sb3JOb2lzZSgpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiQ1BGWEJveEJsdXJcIjpcbiAgICAgICAgICAgICAgICBzaG93Qm94Qmx1ckRpYWxvZygpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiQ1BGWEludmVydFwiOlxuICAgICAgICAgICAgICAgIHRoaXMuYXJ0d29yay5pbnZlcnQoKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcIkNQQ3V0XCI6XG4gICAgICAgICAgICAgICAgdGhpcy5hcnR3b3JrLmN1dFNlbGVjdGlvbih0cnVlKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcIkNQQ29weVwiOlxuICAgICAgICAgICAgICAgIHRoaXMuYXJ0d29yay5jb3B5U2VsZWN0aW9uKCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJDUENvcHlNZXJnZWRcIjpcbiAgICAgICAgICAgICAgICB0aGlzLmFydHdvcmsuY29weVNlbGVjdGlvbk1lcmdlZCgpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiQ1BQYXN0ZVwiOlxuICAgICAgICAgICAgICAgIHRoaXMuYXJ0d29yay5wYXN0ZUNsaXBib2FyZCh0cnVlKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcIkNQTGluZWFySW50ZXJwb2xhdGlvblwiOlxuICAgICAgICAgICAgICAgIGNhbnZhcy5zZXRJbnRlcnBvbGF0aW9uKGUuc2VsZWN0ZWQpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiQ1BUb2dnbGVHcmlkXCI6XG4gICAgICAgICAgICAgICAgY2FudmFzLnNob3dHcmlkKGUuc2VsZWN0ZWQpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiQ1BHcmlkT3B0aW9uc1wiOlxuICAgICAgICAgICAgICAgIHNob3dHcmlkT3B0aW9uc0RpYWxvZygpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiQ1BSZXNldENhbnZhc1JvdGF0aW9uXCI6XG4gICAgICAgICAgICAgICAgY2FudmFzLnJlc2V0Um90YXRpb24oKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcIkNQUGFsQ29sb3JcIjpcbiAgICAgICAgICAgICAgICBtYWluR1VJLnNob3dQYWxldHRlKFwiY29sb3JcIiwgZS5zZWxlY3RlZCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJDUFBhbEJydXNoXCI6XG4gICAgICAgICAgICAgICAgbWFpbkdVSS5zaG93UGFsZXR0ZShcImJydXNoXCIsIGUuc2VsZWN0ZWQpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiQ1BQYWxMYXllcnNcIjpcbiAgICAgICAgICAgICAgICBtYWluR1VJLnNob3dQYWxldHRlKFwibGF5ZXJzXCIsIGUuc2VsZWN0ZWQpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiQ1BQYWxTdHJva2VcIjpcbiAgICAgICAgICAgICAgICBtYWluR1VJLnNob3dQYWxldHRlKFwic3Ryb2tlXCIsIGUuc2VsZWN0ZWQpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiQ1BQYWxTd2F0Y2hlc1wiOlxuICAgICAgICAgICAgICAgIG1haW5HVUkuc2hvd1BhbGV0dGUoXCJzd2F0Y2hlc1wiLCBlLnNlbGVjdGVkKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcIkNQUGFsVG9vbFwiOlxuICAgICAgICAgICAgICAgIG1haW5HVUkuc2hvd1BhbGV0dGUoXCJ0b29sXCIsIGUuc2VsZWN0ZWQpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiQ1BQYWxNaXNjXCI6XG4gICAgICAgICAgICAgICAgbWFpbkdVSS5zaG93UGFsZXR0ZShcIm1pc2NcIiwgZS5zZWxlY3RlZCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJDUFBhbFRleHR1cmVzXCI6XG4gICAgICAgICAgICAgICAgbWFpbkdVSS5zaG93UGFsZXR0ZShcInRleHR1cmVzXCIsIGUuc2VsZWN0ZWQpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiQ1BUb2dnbGVQYWxldHRlc1wiOlxuICAgICAgICAgICAgICAgIG1haW5HVUkudG9nZ2xlUGFsZXR0ZXMoKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcIkNQQXJyYW5nZVBhbGV0dGVzXCI6XG4gICAgICAgICAgICAgICAgbWFpbkdVSS5hcnJhbmdlUGFsZXR0ZXMoKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBTYXZpbmdcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY2FzZSBcIkNQU2F2ZVwiOlxuICAgICAgICAgICAgICAgIHNhdmVEcmF3aW5nKCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJDUFNlbmRcIjpcbiAgICAgICAgICAgICAgICBzZW5kRHJhd2luZygpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiQ1BQb3N0XCI6XG4gICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uID0gb3B0aW9ucy5wb3N0VXJsO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiQ1BFeGl0XCI6XG4gICAgICAgICAgICAgICAgLy8gRXhpdCB0aGUgZHJhd2luZyBzZXNzaW9uIHdpdGhvdXQgcG9zdGluZyB0aGUgZHJhd2luZyB0byB0aGUgZm9ydW1cbiAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24gPSBvcHRpb25zLmV4aXRVcmw7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGNhbGxDUEV2ZW50TGlzdGVuZXJzKCk7IFRPRE9cbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gaW5zdGFsbFVuc2F2ZWRXYXJuaW5nKCkge1xuICAgICAgICB2YXJcbiAgICAgICAgICAgIGNvbmZpcm1NZXNzYWdlID0gXCJZb3VyIGRyYXdpbmcgaGFzIHVuc2F2ZWQgY2hhbmdlcyFcIjtcbiAgICAgICAgXG4gICAgICAgIGlmIChpc0V2ZW50U3VwcG9ydGVkKFwib25iZWZvcmV1bmxvYWRcIikpIHtcbiAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwiYmVmb3JldW5sb2FkXCIsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhhdC5hcnR3b3JrLmdldEhhc1Vuc2F2ZWRDaGFuZ2VzKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgZS5yZXR1cm5WYWx1ZSA9IGNvbmZpcm1NZXNzYWdlO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY29uZmlybU1lc3NhZ2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAkKFwiYVwiKS5jbGljayhmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAgICAgLy8gRmFsbCBiYWNrIHRvIGp1c3QgY2F0Y2hpbmcgbGlua3NcbiAgICAgICAgICAgICAgICBpZiAodGhhdC5hcnR3b3JrLmdldEhhc1Vuc2F2ZWRDaGFuZ2VzKCkpIHsgXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjb25maXJtKGNvbmZpcm1NZXNzYWdlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBcbiAgICBmdW5jdGlvbiBzdGFydE1haW5HVUkoc3dhdGNoZXMsIGluaXRpYWxSb3RhdGlvbjkwKSB7XG4gICAgICAgIG1haW5HVUkgPSBuZXcgQ1BNYWluR1VJKHRoYXQsIHVpRWxlbSk7XG5cbiAgICAgICAgc2V0VG9vbChDaGlja2VuUGFpbnQuVF9QRU4pO1xuICAgICAgICBtYWluR1VJLmFycmFuZ2VQYWxldHRlcygpO1xuICAgICAgICBcbiAgICAgICAgaWYgKHN3YXRjaGVzKSB7XG4gICAgICAgICAgICBtYWluR1VJLnNldFN3YXRjaGVzKHN3YXRjaGVzKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgaWYgKGluaXRpYWxSb3RhdGlvbjkwKSB7XG4gICAgICAgICAgICBtYWluR1VJLnNldFJvdGF0aW9uKGluaXRpYWxSb3RhdGlvbjkwICogTWF0aC5QSSAvIDIpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBDUFdhY29tVGFibGV0LmdldFJlZigpLmRldGVjdFRhYmxldCgpO1xuICAgICAgICBcbiAgICAgICAgaW5zdGFsbFVuc2F2ZWRXYXJuaW5nKCk7XG4gICAgfVxuICAgIFxuICAgIHRoaXMuZ2V0UmVzb3VyY2VzUm9vdCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gb3B0aW9ucy5yZXNvdXJjZXNSb290O1xuICAgIH07XG5cbiAgICBpZiAoIWlzQnJvd3NlclN1cHBvcnRlZCgpKSB7XG4gICAgICAgIHRocm93IG5ldyBDaGlja2VuUGFpbnQuVW5zdXBwb3J0ZWRCcm93c2VyRXhjZXB0aW9uKCk7XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiBkb2N1bWVudC5ib2R5LnN0eWxlLmZsZXhCYXNpcyAhPSBcInN0cmluZ1wiICYmIHR5cGVvZiBkb2N1bWVudC5ib2R5LnN0eWxlLm1zRmxleERpcmVjdGlvbiAhPSBcInN0cmluZ1wiKSB7XG4gICAgICAgIHVpRWxlbS5jbGFzc05hbWUgKz0gXCIgbm8tZmxleGJveFwiO1xuICAgIH1cblxuICAgIHVpRWxlbS5jbGFzc05hbWUgKz0gXCIgY2hpY2tlbnBhaW50XCI7XG5cbiAgICBvcHRpb25zLnJlc291cmNlc1Jvb3QgPSBvcHRpb25zLnJlc291cmNlc1Jvb3QgfHwgXCJjaGlja2VucGFpbnQvXCI7XG5cbiAgICBpZiAob3B0aW9ucy5kaXNhYmxlQm9vdHN0cmFwQVBJKSB7XG4gICAgICAgICQoZG9jdW1lbnQpLm9mZignLmRhdGEtYXBpJyk7XG4gICAgfVxuXG4gICAgaWYgKG9wdGlvbnMubG9hZEltYWdlVXJsIHx8IG9wdGlvbnMubG9hZENoaWJpRmlsZVVybCkge1xuICAgICAgICB2YXJcbiAgICAgICAgICAgIGxvYWRlciA9IG5ldyBDUFJlc291cmNlTG9hZGVyKG9wdGlvbnMpO1xuICAgICAgICBcbiAgICAgICAgbmV3IENQU3Bhc2hTY3JlZW4odWlFbGVtLCBsb2FkZXIsIG9wdGlvbnMucmVzb3VyY2VzUm9vdCk7XG5cbiAgICAgICAgbG9hZGVyLm9uKFwibG9hZGluZ0NvbXBsZXRlXCIsIGZ1bmN0aW9uKHJlc291cmNlcykge1xuICAgICAgICAgICAgdGhhdC5hcnR3b3JrID0gcmVzb3VyY2VzLmxheWVycyB8fCByZXNvdXJjZXMuZmxhdDtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgc3RhcnRNYWluR1VJKHJlc291cmNlcy5zd2F0Y2hlcywgb3B0aW9ucy5yb3RhdGlvbik7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGxvYWRlci5sb2FkKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5hcnR3b3JrID0gbmV3IENQQXJ0d29yayhvcHRpb25zLmNhbnZhc1dpZHRoIHx8IDgwMCwgb3B0aW9ucy5jYW52YXNIZWlnaHQgfHwgNjAwKTtcbiAgICAgICAgdGhpcy5hcnR3b3JrLmFkZEJhY2tncm91bmRMYXllcigpO1xuICAgICAgICBcbiAgICAgICAgc3RhcnRNYWluR1VJKCk7XG4gICAgfVxufVxuXG5DaGlja2VuUGFpbnQucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShFdmVudEVtaXR0ZXIucHJvdG90eXBlKTtcbkNoaWNrZW5QYWludC5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBDaGlja2VuUGFpbnQ7XG5cbkNoaWNrZW5QYWludC5VbnN1cHBvcnRlZEJyb3dzZXJFeGNlcHRpb24gPSBmdW5jdGlvbigpIHtcbn07XG5cbkNoaWNrZW5QYWludC5VbnN1cHBvcnRlZEJyb3dzZXJFeGNlcHRpb24ucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIFwiU29ycnksIHlvdXIgd2ViIGJyb3dzZXIgZG9lcyBub3Qgc3VwcG9ydCBDaGlja2VuUGFpbnQuIFBsZWFzZSB0cnkgYSBtb2Rlcm4gYnJvd3NlciBsaWtlIENocm9tZSwgU2FmYXJpLCBGaXJlZm94LCBvciBFZGdlXCI7XG59O1xuXG4vL1xuLy8gRGVmaW5pdGlvbiBvZiBhbGwgdGhlIG1vZGVzIGF2YWlsYWJsZVxuLy9cblxuQ2hpY2tlblBhaW50Lk1fRFJBVyA9IDA7XG5DaGlja2VuUGFpbnQuTV9GTE9PREZJTEwgPSAxO1xuQ2hpY2tlblBhaW50Lk1fUkVDVF9TRUxFQ1RJT04gPSAyO1xuQ2hpY2tlblBhaW50Lk1fTU9WRV9UT09MID0gMztcbkNoaWNrZW5QYWludC5NX1JPVEFURV9DQU5WQVMgPSA0O1xuQ2hpY2tlblBhaW50Lk1fQ09MT1JfUElDS0VSID0gNTtcbkNoaWNrZW5QYWludC5NX0dSQURJRU5URklMTCA9IDY7XG5cbi8vXG4vLyBEZWZpbml0aW9uIG9mIGFsbCB0aGUgc3RhbmRhcmQgdG9vbHMgYXZhaWxhYmxlXG4vL1xuQ2hpY2tlblBhaW50LlRfUEVOQ0lMID0gMDtcbkNoaWNrZW5QYWludC5UX0VSQVNFUiA9IDE7XG5DaGlja2VuUGFpbnQuVF9QRU4gPSAyO1xuQ2hpY2tlblBhaW50LlRfU09GVEVSQVNFUiA9IDM7XG5DaGlja2VuUGFpbnQuVF9BSVJCUlVTSCA9IDQ7XG5DaGlja2VuUGFpbnQuVF9ET0RHRSA9IDU7XG5DaGlja2VuUGFpbnQuVF9CVVJOID0gNjtcbkNoaWNrZW5QYWludC5UX1dBVEVSID0gNztcbkNoaWNrZW5QYWludC5UX0JMVVIgPSA4O1xuQ2hpY2tlblBhaW50LlRfU01VREdFID0gOTtcbkNoaWNrZW5QYWludC5UX0JMRU5ERVIgPSAxMDtcbkNoaWNrZW5QYWludC5UX01BWCA9IDExO1xuIiwiLypcbiAgICBDaGlja2VuUGFpbnRcbiAgICBcbiAgICBDaGlja2VuUGFpbnQgaXMgYSB0cmFuc2xhdGlvbiBvZiBDaGliaVBhaW50IGZyb20gSmF2YSB0byBKYXZhU2NyaXB0XG4gICAgYnkgTmljaG9sYXMgU2hlcmxvY2sgLyBDaGlja2VuIFNtb290aGllLlxuICAgIFxuICAgIENoaWJpUGFpbnQgaXMgQ29weXJpZ2h0IChjKSAyMDA2LTIwMDggTWFyYyBTY2hlZmVyXG5cbiAgICBDaGlja2VuUGFpbnQgaXMgZnJlZSBzb2Z0d2FyZTogeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yIG1vZGlmeVxuICAgIGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgYXMgcHVibGlzaGVkIGJ5XG4gICAgdGhlIEZyZWUgU29mdHdhcmUgRm91bmRhdGlvbiwgZWl0aGVyIHZlcnNpb24gMyBvZiB0aGUgTGljZW5zZSwgb3JcbiAgICAoYXQgeW91ciBvcHRpb24pIGFueSBsYXRlciB2ZXJzaW9uLlxuXG4gICAgQ2hpY2tlblBhaW50IGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsXG4gICAgYnV0IFdJVEhPVVQgQU5ZIFdBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2ZcbiAgICBNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuICBTZWUgdGhlXG4gICAgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy5cblxuICAgIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXG4gICAgYWxvbmcgd2l0aCBDaGlja2VuUGFpbnQuIElmIG5vdCwgc2VlIDxodHRwOi8vd3d3LmdudS5vcmcvbGljZW5zZXMvPi5cbiovXG5cbmltcG9ydCBDUExheWVyIGZyb20gXCIuL0NQTGF5ZXJcIjtcbmltcG9ydCBDUEdyZXlCbXAgZnJvbSBcIi4vQ1BHcmV5Qm1wXCI7XG5pbXBvcnQgQ1BDb2xvckJtcCBmcm9tIFwiLi9DUENvbG9yQm1wXCI7XG5pbXBvcnQgQ1BCcnVzaE1hbmFnZXIgZnJvbSBcIi4vQ1BCcnVzaE1hbmFnZXJcIjtcbmltcG9ydCBDUEJydXNoSW5mbyBmcm9tIFwiLi9DUEJydXNoSW5mb1wiO1xuaW1wb3J0IENQVW5kbyBmcm9tIFwiLi9DUFVuZG9cIjtcbmltcG9ydCBDUENsaXAgZnJvbSBcIi4vQ1BDbGlwXCI7XG5cbmltcG9ydCBDUENvbG9yRmxvYXQgZnJvbSBcIi4uL3V0aWwvQ1BDb2xvckZsb2F0XCI7XG5pbXBvcnQgQ1BSZWN0IGZyb20gXCIuLi91dGlsL0NQUmVjdFwiO1xuaW1wb3J0IENQUmFuZG9tIGZyb20gXCIuLi91dGlsL0NQUmFuZG9tXCI7XG5cbi8vIFBvbHlmaWxsLCB1c2VkIGluIGR1cGxpY2F0ZUxheWVyXG5pZiAoIVN0cmluZy5wcm90b3R5cGUuZW5kc1dpdGgpIHtcbiAgICBTdHJpbmcucHJvdG90eXBlLmVuZHNXaXRoID0gZnVuY3Rpb24oc2VhcmNoU3RyaW5nLCBwb3NpdGlvbikge1xuICAgICAgICB2YXIgc3ViamVjdFN0cmluZyA9IHRoaXMudG9TdHJpbmcoKTtcbiAgICAgICAgaWYgKHR5cGVvZiBwb3NpdGlvbiAhPT0gJ251bWJlcicgfHwgIWlzRmluaXRlKHBvc2l0aW9uKSB8fCBNYXRoLmZsb29yKHBvc2l0aW9uKSAhPT0gcG9zaXRpb24gfHwgcG9zaXRpb24gPiBzdWJqZWN0U3RyaW5nLmxlbmd0aCkge1xuICAgICAgICAgICAgcG9zaXRpb24gPSBzdWJqZWN0U3RyaW5nLmxlbmd0aDtcbiAgICAgICAgfVxuICAgICAgICBwb3NpdGlvbiAtPSBzZWFyY2hTdHJpbmcubGVuZ3RoO1xuICAgICAgICB2YXIgbGFzdEluZGV4ID0gc3ViamVjdFN0cmluZy5pbmRleE9mKHNlYXJjaFN0cmluZywgcG9zaXRpb24pO1xuICAgICAgICByZXR1cm4gbGFzdEluZGV4ICE9PSAtMSAmJiBsYXN0SW5kZXggPT09IHBvc2l0aW9uO1xuICAgIH07XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIENQQXJ0d29yayhfd2lkdGgsIF9oZWlnaHQpIHtcbiAgICBcbiAgICBfd2lkdGggPSBfd2lkdGggfCAwO1xuICAgIF9oZWlnaHQgPSBfaGVpZ2h0IHwgMDtcbiAgICBcbiAgICB2YXJcbiAgICAgICAgTUFYX1VORE8gPSAzMCxcbiAgICAgICAgRU1QVFlfQkFDS0dST1VORF9DT0xPUiA9IDB4RkZGRkZGRkYsXG4gICAgICAgIEVNUFRZX0xBWUVSX0NPTE9SID0gMHgwMEZGRkZGRixcbiAgICAgICAgXG4gICAgICAgIEJVUk5fQ09OU1RBTlQgPSAyNjAsXG4gICAgICAgIEJMVVJfTUlOID0gNjQsXG4gICAgICAgIEJMVVJfTUFYID0gMTtcbiAgICBcbiAgICB2YXJcbiAgICAgICAgbGF5ZXJzID0gW10sXG4gICAgICAgIGN1ckxheWVyLFxuICAgICAgICBcbiAgICAgICAgaGFzVW5zYXZlZENoYW5nZXMgPSBmYWxzZSxcbiAgICAgICAgXG4gICAgICAgIGN1clNlbGVjdGlvbiA9IG5ldyBDUFJlY3QoMCwgMCwgMCwgMCksXG4gICAgICAgIFxuICAgICAgICBmdXNpb25CdWZmZXIgPSBuZXcgQ1BMYXllcihfd2lkdGgsIF9oZWlnaHQpLFxuXG4gICAgICAgIHVuZG9CdWZmZXIgPSBuZXcgQ1BMYXllcihfd2lkdGgsIF9oZWlnaHQpLFxuICAgICAgICB1bmRvQnVmZmVySW52YWxpZFJlZ2lvbiA9IG5ldyBDUFJlY3QoMCwgMCwgX3dpZHRoLCBfaGVpZ2h0KSxcblxuICAgICAgICBmdXNpb24gPSBmdXNpb25CdWZmZXIsXG4gICAgICAgIFxuICAgICAgICAvKiBcbiAgICAgICAgICogV2UgdXNlIHRoaXMgYnVmZmVyIHNvIHdlIGNhbiBhY2N1cmF0ZWx5IGFjY3VtdWxhdGUgc21hbGwgY2hhbmdlcyB0byBsYXllciBvcGFjaXR5IGR1cmluZyBhIGJydXNoIHN0cm9rZS5cbiAgICAgICAgICogXG4gICAgICAgICAqIE5vcm1hbGx5IHdlIHVzZSBpdCBhcyBhIDE2LWJpdCBvcGFjaXR5IGNoYW5uZWwgcGVyIHBpeGVsLCBidXQgc29tZSBicnVzaGVzIHVzZSB0aGUgZnVsbCAzMi1iaXRzIHBlciBwaXhlbFxuICAgICAgICAgKiBhcyBBUkdCLlxuICAgICAgICAgKi9cbiAgICAgICAgb3BhY2l0eUJ1ZmZlciA9IG5ldyBDUEdyZXlCbXAoX3dpZHRoLCBfaGVpZ2h0LCAzMiksXG4gICAgICAgIFxuICAgICAgICBmdXNpb25BcmVhID0gbmV3IENQUmVjdCgwLCAwLCBfd2lkdGgsIF9oZWlnaHQpLCBcbiAgICAgICAgdW5kb0FyZWEgPSBuZXcgQ1BSZWN0KDAsIDAsIDAsIDApLCBvcGFjaXR5QXJlYSA9IG5ldyBDUFJlY3QoMCwgMCwgMCwgMCksXG4gICAgICAgIFxuICAgICAgICBybmQgPSBuZXcgQ1BSYW5kb20oKSxcbiAgICAgICAgXG4gICAgICAgIGNsaXBib2FyZCA9IG51bGwsIC8vIEEgQ1BDbGlwXG4gICAgICAgIHVuZG9MaXN0ID0gW10sIHJlZG9MaXN0ID0gW10sXG4gICAgICAgIFxuICAgICAgICBjdXJCcnVzaCA9IG51bGwsXG4gICAgICAgIFxuICAgICAgICBicnVzaE1hbmFnZXIgPSBuZXcgQ1BCcnVzaE1hbmFnZXIoKSxcbiAgICAgICAgXG4gICAgICAgIGxhc3RYID0gMC4wLCBsYXN0WSA9IDAuMCwgbGFzdFByZXNzdXJlID0gMC4wLFxuICAgICAgICBicnVzaEJ1ZmZlciA9IG51bGwsXG4gICAgICAgIFxuICAgICAgICBzYW1wbGVBbGxMYXllcnMgPSBmYWxzZSxcbiAgICAgICAgbG9ja0FscGhhID0gZmFsc2UsXG4gICAgICAgIFxuICAgICAgICBjdXJDb2xvciA9IDB4MDAwMDAwLCAvLyBCbGFja1xuICAgICAgICBcbiAgICAgICAgdGhhdCA9IHRoaXM7XG4gICAgXG4gICAgLy8gRklYTUU6IDIwMDctMDEtMTMgSSdtIG1vdmluZyB0aGlzIHRvIHRoZSBDUFJlY3QgY2xhc3NcbiAgICAvLyBmaW5kIHdoZXJlIHRoaXMgdmVyc2lvbiBpcyB1c2VkIGFuZCBjaGFuZ2UgdGhlXG4gICAgLy8gY29kZSB0byB1c2UgdGhlIENQUmVjdCB2ZXJzaW9uXG4gICAgZnVuY3Rpb24gY2xpcFNvdXJjZURlc3Qoc3JjUmVjdCwgZHN0UmVjdCkge1xuICAgICAgICAvLyBGSVhNRTpcbiAgICAgICAgLy8gLyFcXCBkc3RSZWN0IGJvdHRvbSBhbmQgcmlnaHQgYXJlIGlnbm9yZWQgYW5kIGluc3RlYWQgd2UgY2xpcFxuICAgICAgICAvLyBhZ2FpbnN0IHRoZSB3aWR0aCwgaGVpZ2h0IG9mIHRoZSBsYXllci4gOi9cbiAgICAgICAgLy9cblxuICAgICAgICAvLyB0aGlzIHZlcnNpb24gd291bGQgYmUgZW5vdWdoIGluIG1vc3QgY2FzZXMgKHdoZW4gd2UgZG9uJ3QgbmVlZFxuICAgICAgICAvLyBzcmNSZWN0IGJvdHRvbSBhbmQgcmlnaHQgdG8gYmUgY2xpcHBlZClcbiAgICAgICAgLy8gaXQncyBsZWZ0IGhlcmUgaW4gY2FzZSBpdCdzIG5lZWRlZCB0byBtYWtlIGEgZmFzdGVyIHZlcnNpb25cbiAgICAgICAgLy8gb2YgdGhpcyBmdW5jdGlvblxuICAgICAgICAvLyBkc3RSZWN0LnJpZ2h0ID0gTWF0aC5taW4od2lkdGgsIGRzdFJlY3QubGVmdCArIHNyY1JlY3QuZ2V0V2lkdGgoKSk7XG4gICAgICAgIC8vIGRzdFJlY3QuYm90dG9tID0gTWF0aC5taW4oaGVpZ2h0LCBkc3RSZWN0LnRvcCArIHNyY1JlY3QuZ2V0SGVpZ2h0KCkpO1xuXG4gICAgICAgIC8vIG5ldyBkZXN0IGJvdHRvbS9yaWdodFxuICAgICAgICBkc3RSZWN0LnJpZ2h0ID0gZHN0UmVjdC5sZWZ0ICsgc3JjUmVjdC5nZXRXaWR0aCgpO1xuICAgICAgICBpZiAoZHN0UmVjdC5yaWdodCA+IHRoYXQud2lkdGgpIHtcbiAgICAgICAgICAgIHNyY1JlY3QucmlnaHQgLT0gZHN0UmVjdC5yaWdodCAtIHRoYXQud2lkdGg7XG4gICAgICAgICAgICBkc3RSZWN0LnJpZ2h0ID0gdGhhdC53aWR0aDtcbiAgICAgICAgfVxuXG4gICAgICAgIGRzdFJlY3QuYm90dG9tID0gZHN0UmVjdC50b3AgKyBzcmNSZWN0LmdldEhlaWdodCgpO1xuICAgICAgICBpZiAoZHN0UmVjdC5ib3R0b20gPiB0aGF0LmhlaWdodCkge1xuICAgICAgICAgICAgc3JjUmVjdC5ib3R0b20gLT0gZHN0UmVjdC5ib3R0b20gLSB0aGF0LmhlaWdodDtcbiAgICAgICAgICAgIGRzdFJlY3QuYm90dG9tID0gdGhhdC5oZWlnaHQ7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBuZXcgc3JjIHRvcC9sZWZ0XG4gICAgICAgIGlmIChkc3RSZWN0LmxlZnQgPCAwKSB7XG4gICAgICAgICAgICBzcmNSZWN0LmxlZnQgLT0gZHN0UmVjdC5sZWZ0O1xuICAgICAgICAgICAgZHN0UmVjdC5sZWZ0ID0gMDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChkc3RSZWN0LnRvcCA8IDApIHtcbiAgICAgICAgICAgIHNyY1JlY3QudG9wIC09IGRzdFJlY3QudG9wO1xuICAgICAgICAgICAgZHN0UmVjdC50b3AgPSAwO1xuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIGZ1bmN0aW9uIGNhbGxMaXN0ZW5lcnNVcGRhdGVSZWdpb24ocmVnaW9uKSB7XG4gICAgICAgIHRoYXQuZW1pdEV2ZW50KFwidXBkYXRlUmVnaW9uXCIsIFtyZWdpb25dKTtcbiAgICB9XG5cbiAgICAvLyBsYXllckluZGV4IGlzIG9wdGlvbmFsLCBwcm92aWRlIHdoZW4gb25seSBvbmUgbGF5ZXIgaGFzIGJlZW4gdXBkYXRlZFxuICAgIGZ1bmN0aW9uIGNhbGxMaXN0ZW5lcnNMYXllckNoYW5nZShsYXllckluZGV4KSB7XG4gICAgICAgIHRoYXQuZW1pdEV2ZW50KFwiY2hhbmdlTGF5ZXJcIiwgW2xheWVySW5kZXhdKTtcbiAgICB9XG4gICAgXG4gICAgdGhpcy5nZXRMYXllcnMgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIGxheWVycztcbiAgICB9O1xuXG4gICAgdGhpcy5nZXRMYXllckNvdW50ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBsYXllcnMubGVuZ3RoO1xuICAgIH07XG4gICAgXG4gICAgLy9cbiAgICAvLyBTZWxlY3Rpb24gbWV0aG9kc1xuICAgIC8vXG5cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBjdXJyZW50IHNlbGVjdGlvbiByZWN0IG9yIGEgcmVjdGFuZ2xlIGNvdmVyaW5nIHRoZSB3aG9sZSBjYW52YXMgaWYgdGhlcmUgYXJlIG5vIHNlbGVjdGlvbnNcbiAgICAgKiBcbiAgICAgKiBAcmV0dXJucyBDUFJlY3RcbiAgICAgKi9cbiAgICB0aGlzLmdldFNlbGVjdGlvbkF1dG9TZWxlY3QgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyXG4gICAgICAgICAgICByO1xuXG4gICAgICAgIGlmICghY3VyU2VsZWN0aW9uLmlzRW1wdHkoKSkge1xuICAgICAgICAgICAgciA9IGN1clNlbGVjdGlvbi5jbG9uZSgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgciA9IHRoaXMuZ2V0Qm91bmRzKCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcjtcbiAgICB9O1xuICAgIFxuICAgIHRoaXMuZ2V0U2VsZWN0aW9uID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBjdXJTZWxlY3Rpb24uY2xvbmUoKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogTWFyayB0aGUgZ2l2ZW4gcmVjdGFuZ2xlIG9uIHRoZSBjYW52YXMgYXMgbmVlZGluZyB0byBiZSByZS1mdXNlZCAoaS5lLiB3ZSd2ZSBkcmF3biBpbiB0aGlzIHJlZ2lvbikuXG4gICAgICogTGlzdGVuZXJzIGFyZSBub3RpZmllZCBhYm91dCBvdXIgdXBkYXRlZCBjYW52YXMgcmVnaW9uLlxuICAgICAqXG4gICAgICogQHBhcmFtIHJlY3QgQ1BSZWN0IFJlY3QgdG8gaW52YWxpZGF0ZVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGludmFsaWRhdGVGdXNpb25SZWN0KHJlY3QpIHtcbiAgICAgICAgZnVzaW9uQXJlYS51bmlvbihyZWN0KTtcblxuICAgICAgICAvLyBUaGlzIHVwZGF0ZWQgYXJlYSB3aWxsIG5lZWQgdG8gYmUgdXBkYXRlZCBpbiBvdXIgdW5kbyBidWZmZXIgbGF0ZXJcbiAgICAgICAgdW5kb0J1ZmZlckludmFsaWRSZWdpb24udW5pb24ocmVjdCk7XG5cbiAgICAgICAgY2FsbExpc3RlbmVyc1VwZGF0ZVJlZ2lvbihyZWN0KTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogTWFyayB0aGUgZW50aXJlIGNhbnZhcyBhcyBuZWVkaW5nIHRvIGJlIHJlLWZ1c2VkICh3ZSd2ZSBkcmF3biB0byB0aGUgd2hvbGUgY2FudmFzKVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGludmFsaWRhdGVGdXNpb24oKSB7XG4gICAgICAgIGludmFsaWRhdGVGdXNpb25SZWN0KG5ldyBDUFJlY3QoMCwgMCwgdGhhdC53aWR0aCwgdGhhdC5oZWlnaHQpKTtcbiAgICB9O1xuICAgIFxuICAgIHRoaXMuc2V0SGFzVW5zYXZlZENoYW5nZXMgPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICBoYXNVbnNhdmVkQ2hhbmdlcyA9IHZhbHVlO1xuICAgIH07XG4gICAgXG4gICAgdGhpcy5nZXRIYXNVbnNhdmVkQ2hhbmdlcyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gaGFzVW5zYXZlZENoYW5nZXM7XG4gICAgfTtcbiAgICBcbiAgICB0aGlzLnNldExheWVyVmlzaWJpbGl0eSA9IGZ1bmN0aW9uKGxheWVySW5kZXgsIHZpc2libGUpIHtcbiAgICAgICAgdmFyXG4gICAgICAgICAgICBsYXllciA9IHRoaXMuZ2V0TGF5ZXIobGF5ZXJJbmRleCk7XG4gICAgICAgIFxuICAgICAgICBhZGRVbmRvKG5ldyBDUFVuZG9MYXllclZpc2libGUobGF5ZXJJbmRleCwgbGF5ZXIudmlzaWJsZSwgdmlzaWJsZSkpO1xuICAgICAgICBsYXllci52aXNpYmxlID0gdmlzaWJsZTtcbiAgICAgICAgXG4gICAgICAgIGludmFsaWRhdGVGdXNpb24oKTtcbiAgICAgICAgY2FsbExpc3RlbmVyc0xheWVyQ2hhbmdlKGxheWVySW5kZXgpO1xuICAgIH07XG5cbiAgICB0aGlzLmFkZExheWVyID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhclxuICAgICAgICAgICAgbmV3TGF5ZXIgPSBuZXcgQ1BMYXllcih0aGlzLndpZHRoLCB0aGlzLmhlaWdodCwgdGhpcy5nZXREZWZhdWx0TGF5ZXJOYW1lKCkpLFxuICAgICAgICAgICAgYWN0aXZlTGF5ZXJJbmRleCA9IHRoaXMuZ2V0QWN0aXZlTGF5ZXJJbmRleCgpO1xuICAgICAgICBcbiAgICAgICAgbmV3TGF5ZXIuY2xlYXJBbGwoRU1QVFlfTEFZRVJfQ09MT1IpOyAvLyBUcmFuc3BhcmVudCB3aGl0ZVxuICAgICAgICBcbiAgICAgICAgYWRkVW5kbyhuZXcgQ1BVbmRvQWRkTGF5ZXIoYWN0aXZlTGF5ZXJJbmRleCkpO1xuXG4gICAgICAgIGxheWVycy5zcGxpY2UoYWN0aXZlTGF5ZXJJbmRleCArIDEsIDAsIG5ld0xheWVyKTtcbiAgICAgICAgdGhpcy5zZXRBY3RpdmVMYXllckluZGV4KGFjdGl2ZUxheWVySW5kZXggKyAxKTtcblxuICAgICAgICBpbnZhbGlkYXRlRnVzaW9uKCk7XG4gICAgICAgIGNhbGxMaXN0ZW5lcnNMYXllckNoYW5nZSgpO1xuICAgIH07XG4gICAgXG4gICAgdGhpcy5hZGRMYXllck9iamVjdCA9IGZ1bmN0aW9uKGxheWVyKSB7XG4gICAgICAgIGxheWVycy5wdXNoKGxheWVyKTtcbiAgICAgICAgXG4gICAgICAgIGlmIChsYXllcnMubGVuZ3RoID09IDEpIHtcbiAgICAgICAgICAgIGN1ckxheWVyID0gbGF5ZXJzWzBdO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBpbnZhbGlkYXRlRnVzaW9uKCk7XG4gICAgICAgIGNhbGxMaXN0ZW5lcnNMYXllckNoYW5nZSgpO1xuICAgIH07XG4gICAgXG4gICAgLyoqXG4gICAgICogUmVtb3ZlIHRoZSBjdXJyZW50bHkgc2VsZWN0ZWQgbGF5ZXIuXG4gICAgICogXG4gICAgICogUmV0dXJucyB0cnVlIGlmIHRoZSBsYXllciB3YXMgcmVtb3ZlZCwgb3IgZmFsc2Ugd2hlbiByZW1vdmFsIGZhaWxlZCBiZWNhdXNlIHRoZXJlIGlzIGN1cnJlbnRseSBvbmx5IG9uZSBsYXllciBpbiBcbiAgICAgKiB0aGUgZG9jdW1lbnQuXG4gICAgICovXG4gICAgdGhpcy5yZW1vdmVMYXllciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAobGF5ZXJzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgIGFjdGl2ZUxheWVySW5kZXggPSB0aGlzLmdldEFjdGl2ZUxheWVySW5kZXgoKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgYWRkVW5kbyhuZXcgQ1BVbmRvUmVtb3ZlTGF5ZXIoYWN0aXZlTGF5ZXJJbmRleCwgY3VyTGF5ZXIpKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgbGF5ZXJzLnNwbGljZShhY3RpdmVMYXllckluZGV4LCAxKTtcbiAgICAgICAgICAgIHRoaXMuc2V0QWN0aXZlTGF5ZXJJbmRleChhY3RpdmVMYXllckluZGV4IDwgbGF5ZXJzLmxlbmd0aCA/IGFjdGl2ZUxheWVySW5kZXggOiBhY3RpdmVMYXllckluZGV4IC0gMSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGludmFsaWRhdGVGdXNpb24oKTtcbiAgICAgICAgICAgIGNhbGxMaXN0ZW5lcnNMYXllckNoYW5nZSgpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH07XG5cbiAgICB0aGlzLmR1cGxpY2F0ZUxheWVyID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBcbiAgICAgICAgICAgIGNvcHlTdWZmaXggPSBcIiBDb3B5XCIsXG4gICAgICAgICAgICBuZXdMYXllciA9IG5ldyBDUExheWVyKHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0KSxcbiAgICAgICAgICAgIGFjdGl2ZUxheWVySW5kZXggPSB0aGlzLmdldEFjdGl2ZUxheWVySW5kZXgoKTtcblxuICAgICAgICBhZGRVbmRvKG5ldyBDUFVuZG9EdXBsaWNhdGVMYXllcihhY3RpdmVMYXllckluZGV4KSk7XG4gICAgICAgIFxuICAgICAgICBuZXdMYXllci5jb3B5RnJvbShsYXllcnNbYWN0aXZlTGF5ZXJJbmRleF0pO1xuICAgICAgICBcbiAgICAgICAgaWYgKCFuZXdMYXllci5uYW1lLmVuZHNXaXRoKGNvcHlTdWZmaXgpKSB7XG4gICAgICAgICAgICBuZXdMYXllci5uYW1lICs9IGNvcHlTdWZmaXg7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGxheWVycy5zcGxpY2UoYWN0aXZlTGF5ZXJJbmRleCArIDEsIDAsIG5ld0xheWVyKTtcbiAgICAgICAgdGhpcy5zZXRBY3RpdmVMYXllckluZGV4KGFjdGl2ZUxheWVySW5kZXggKyAxKTtcbiAgICAgICAgXG4gICAgICAgIGludmFsaWRhdGVGdXNpb24oKTtcbiAgICAgICAgY2FsbExpc3RlbmVyc0xheWVyQ2hhbmdlKCk7XG4gICAgfTtcbiAgICBcbiAgICB0aGlzLm1lcmdlRG93biA9IGZ1bmN0aW9uKGNyZWF0ZVVuZG8pIHtcbiAgICAgICAgdmFyXG4gICAgICAgICAgICBhY3RpdmVMYXllckluZGV4ID0gdGhpcy5nZXRBY3RpdmVMYXllckluZGV4KCk7XG4gICAgICAgIFxuICAgICAgICBpZiAobGF5ZXJzLmxlbmd0aCA+IDEgJiYgYWN0aXZlTGF5ZXJJbmRleCA+IDApIHtcbiAgICAgICAgICAgIGlmIChjcmVhdGVVbmRvKSB7XG4gICAgICAgICAgICAgICAgYWRkVW5kbyhuZXcgQ1BVbmRvTWVyZ2VEb3duTGF5ZXIoYWN0aXZlTGF5ZXJJbmRleCkpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBsYXllcnNbYWN0aXZlTGF5ZXJJbmRleF0uZnVzaW9uV2l0aEZ1bGxBbHBoYShsYXllcnNbYWN0aXZlTGF5ZXJJbmRleCAtIDFdLCB0aGlzLmdldEJvdW5kcygpKTtcbiAgICAgICAgICAgIGxheWVycy5zcGxpY2UoYWN0aXZlTGF5ZXJJbmRleCwgMSk7XG4gICAgICAgICAgICB0aGlzLnNldEFjdGl2ZUxheWVySW5kZXgoYWN0aXZlTGF5ZXJJbmRleCAtIDEpO1xuXG4gICAgICAgICAgICBpbnZhbGlkYXRlRnVzaW9uKCk7XG4gICAgICAgICAgICBjYWxsTGlzdGVuZXJzTGF5ZXJDaGFuZ2UoKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICB0aGlzLm1lcmdlQWxsTGF5ZXJzID0gZnVuY3Rpb24oY3JlYXRlVW5kbykge1xuICAgICAgICBpZiAobGF5ZXJzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgIGlmIChjcmVhdGVVbmRvKSB7XG4gICAgICAgICAgICAgICAgYWRkVW5kbyhuZXcgQ1BVbmRvTWVyZ2VBbGxMYXllcnMoKSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoYXQuZnVzaW9uTGF5ZXJzKCk7XG4gICAgICAgICAgICBsYXllcnMgPSBbXTtcblxuICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgbGF5ZXIgPSBuZXcgQ1BMYXllcih0aGF0LndpZHRoLCB0aGF0LmhlaWdodCwgdGhpcy5nZXREZWZhdWx0TGF5ZXJOYW1lKCkpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBsYXllci5jb3B5RGF0YUZyb20oZnVzaW9uKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgbGF5ZXJzLnB1c2gobGF5ZXIpO1xuICAgICAgICAgICAgdGhpcy5zZXRBY3RpdmVMYXllckluZGV4KDApO1xuXG4gICAgICAgICAgICBpbnZhbGlkYXRlRnVzaW9uKCk7XG4gICAgICAgICAgICBjYWxsTGlzdGVuZXJzTGF5ZXJDaGFuZ2UoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgXG4gICAgZnVuY3Rpb24gbW92ZUxheWVyUmVhbChmcm9tLCB0bykge1xuICAgICAgICB2YXJcbiAgICAgICAgICAgIGxheWVyID0gbGF5ZXJzLnNwbGljZShmcm9tLCAxKVswXTtcbiAgICAgICAgXG4gICAgICAgIGlmICh0byA8PSBmcm9tKSB7XG4gICAgICAgICAgICBsYXllcnMuc3BsaWNlKHRvLCAwLCBsYXllcik7XG4gICAgICAgICAgICB0aGF0LnNldEFjdGl2ZUxheWVySW5kZXgodG8pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbGF5ZXJzLnNwbGljZSh0byAtIDEsIDAsIGxheWVyKTtcbiAgICAgICAgICAgIHRoYXQuc2V0QWN0aXZlTGF5ZXJJbmRleCh0byAtIDEpO1xuICAgICAgICB9XG5cbiAgICAgICAgaW52YWxpZGF0ZUZ1c2lvbigpO1xuICAgICAgICBjYWxsTGlzdGVuZXJzTGF5ZXJDaGFuZ2UoKTtcbiAgICB9XG4gICAgXG4gICAgLyoqXG4gICAgICogTW92ZSBhIGxheWVyIGluIHRoZSBzdGFjayBmcm9tIG9uZSBpbmRleCB0byBhbm90aGVyLlxuICAgICAqIFxuICAgICAqIEBwYXJhbSBmcm9tIGludFxuICAgICAqIEBwYXJhbSB0byBpbnRcbiAgICAgKi9cbiAgICB0aGlzLm1vdmVMYXllciA9IGZ1bmN0aW9uKGZyb20sIHRvKSB7XG4gICAgICAgIGlmIChmcm9tIDwgMCB8fCBmcm9tID49IHRoaXMuZ2V0TGF5ZXJDb3VudCgpIHx8IHRvIDwgMCB8fCB0byA+IHRoaXMuZ2V0TGF5ZXJDb3VudCgpIHx8IGZyb20gPT0gdG8pIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgYWRkVW5kbyhuZXcgQ1BVbmRvTW92ZUxheWVyKGZyb20sIHRvKSk7XG4gICAgICAgIG1vdmVMYXllclJlYWwoZnJvbSwgdG8pO1xuICAgIH1cbiAgICBcbiAgICB0aGlzLnNldExheWVyQWxwaGEgPSBmdW5jdGlvbihsYXllckluZGV4LCBhbHBoYSkge1xuICAgICAgICB2YXJcbiAgICAgICAgICAgIGxheWVyID0gdGhpcy5nZXRMYXllcihsYXllckluZGV4KTtcbiAgICAgICAgXG4gICAgICAgIGlmIChsYXllci5nZXRBbHBoYSgpICE9IGFscGhhKSB7XG4gICAgICAgICAgICBhZGRVbmRvKG5ldyBDUFVuZG9MYXllckFscGhhKGxheWVySW5kZXgsIGFscGhhKSk7XG4gICAgICAgICAgICBsYXllci5zZXRBbHBoYShhbHBoYSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGludmFsaWRhdGVGdXNpb24oKTtcbiAgICAgICAgICAgIGNhbGxMaXN0ZW5lcnNMYXllckNoYW5nZShsYXllckluZGV4KTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICB0aGlzLnNldExheWVyQmxlbmRNb2RlID0gZnVuY3Rpb24obGF5ZXJJbmRleCwgYmxlbmRNb2RlKSB7XG4gICAgICAgIHZhclxuICAgICAgICAgICAgbGF5ZXIgPSB0aGlzLmdldExheWVyKGxheWVySW5kZXgpO1xuICAgIFxuICAgICAgICBpZiAobGF5ZXIuZ2V0QmxlbmRNb2RlKCkgIT0gYmxlbmRNb2RlKSB7XG4gICAgICAgICAgICBhZGRVbmRvKG5ldyBDUFVuZG9MYXllck1vZGUobGF5ZXJJbmRleCwgYmxlbmRNb2RlKSk7XG4gICAgICAgICAgICBsYXllci5zZXRCbGVuZE1vZGUoYmxlbmRNb2RlKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaW52YWxpZGF0ZUZ1c2lvbigpO1xuICAgICAgICAgICAgY2FsbExpc3RlbmVyc0xheWVyQ2hhbmdlKGxheWVySW5kZXgpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIHRoaXMuc2V0TGF5ZXJOYW1lID0gZnVuY3Rpb24obGF5ZXJJbmRleCwgbmFtZSkge1xuICAgICAgICB2YXJcbiAgICAgICAgICAgIGxheWVyID0gdGhpcy5nZXRMYXllcihsYXllckluZGV4KTtcbiAgICAgICAgXG4gICAgICAgIGlmIChsYXllciAmJiBsYXllci5uYW1lICE9IG5hbWUpIHtcbiAgICAgICAgICAgIGFkZFVuZG8obmV3IENQVW5kb0xheWVyUmVuYW1lKGxheWVySW5kZXgsIG5hbWUpKTtcbiAgICAgICAgICAgIGxheWVyLm5hbWUgPSBuYW1lO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjYWxsTGlzdGVuZXJzTGF5ZXJDaGFuZ2UobGF5ZXJJbmRleCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFxuICAgIGZ1bmN0aW9uIENQQnJ1c2hUb29sQmFzZSgpIHtcbiAgICB9XG4gICAgXG4gICAgQ1BCcnVzaFRvb2xCYXNlLnByb3RvdHlwZS5iZWdpblN0cm9rZSA9IGZ1bmN0aW9uKHgsIHksIHByZXNzdXJlKSB7XG4gICAgICAgIHByZXBhcmVGb3JMYXllclVuZG8oKTtcbiAgICAgICAgdW5kb0FyZWEubWFrZUVtcHR5KCk7XG5cbiAgICAgICAgb3BhY2l0eUJ1ZmZlci5jbGVhckFsbCgwKTtcbiAgICAgICAgb3BhY2l0eUFyZWEubWFrZUVtcHR5KCk7XG5cbiAgICAgICAgbGFzdFggPSB4O1xuICAgICAgICBsYXN0WSA9IHk7XG4gICAgICAgIGxhc3RQcmVzc3VyZSA9IHByZXNzdXJlO1xuICAgICAgICBcbiAgICAgICAgdGhpcy5jcmVhdGVBbmRQYWludERhYih4LCB5LCBwcmVzc3VyZSk7XG4gICAgfTtcblxuICAgIENQQnJ1c2hUb29sQmFzZS5wcm90b3R5cGUuY29udGludWVTdHJva2UgPSBmdW5jdGlvbih4LCB5LCBwcmVzc3VyZSkge1xuICAgICAgICB2YXIgXG4gICAgICAgICAgICBkaXN0ID0gTWF0aC5zcXJ0KCgobGFzdFggLSB4KSAqIChsYXN0WCAtIHgpICsgKGxhc3RZIC0geSkgKiAobGFzdFkgLSB5KSkpLFxuICAgICAgICAgICAgc3BhY2luZyA9IE1hdGgubWF4KGN1ckJydXNoLm1pblNwYWNpbmcsIGN1ckJydXNoLmN1clNpemUgKiBjdXJCcnVzaC5zcGFjaW5nKTtcblxuICAgICAgICBpZiAoZGlzdCA+IHNwYWNpbmcpIHtcbiAgICAgICAgICAgIHZhciBcbiAgICAgICAgICAgICAgICBueCA9IGxhc3RYLCBueSA9IGxhc3RZLCBucCA9IGxhc3RQcmVzc3VyZSxcbiAgICAgICAgICAgICAgICBkZiA9IChzcGFjaW5nIC0gMC4wMDEpIC8gZGlzdDtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZm9yICh2YXIgZiA9IGRmOyBmIDw9IDEuMDsgZiArPSBkZikge1xuICAgICAgICAgICAgICAgIG54ID0gZiAqIHggKyAoMS4wIC0gZikgKiBsYXN0WDtcbiAgICAgICAgICAgICAgICBueSA9IGYgKiB5ICsgKDEuMCAtIGYpICogbGFzdFk7XG4gICAgICAgICAgICAgICAgbnAgPSBmICogcHJlc3N1cmUgKyAoMS4wIC0gZikgKiBsYXN0UHJlc3N1cmU7XG4gICAgICAgICAgICAgICAgdGhpcy5jcmVhdGVBbmRQYWludERhYihueCwgbnksIG5wKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxhc3RYID0gbng7XG4gICAgICAgICAgICBsYXN0WSA9IG55O1xuICAgICAgICAgICAgbGFzdFByZXNzdXJlID0gbnA7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgQ1BCcnVzaFRvb2xCYXNlLnByb3RvdHlwZS5lbmRTdHJva2UgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdW5kb0FyZWEuY2xpcCh0aGF0LmdldEJvdW5kcygpKTtcblxuICAgICAgICAvLyBEaWQgd2UgZW5kIHVwIHBhaW50aW5nIGFueXRoaW5nP1xuICAgICAgICBpZiAoIXVuZG9BcmVhLmlzRW1wdHkoKSkge1xuICAgICAgICAgICAgbWVyZ2VPcGFjaXR5QnVmZmVyKGN1ckNvbG9yLCBmYWxzZSk7XG4gICAgICAgICAgICBhZGRVbmRvKG5ldyBDUFVuZG9QYWludCgpKTtcblxuICAgICAgICAgICAgLyogRWFnZXJseSB1cGRhdGUgdGhlIHVuZG8gYnVmZmVyIGZvciBuZXh0IHRpbWUgc28gd2UgY2FuIGF2b2lkIHRoaXMgbGVuZ3RoeVxuICAgICAgICAgICAgICogcHJlcGFyZSBhdCB0aGUgYmVnaW5uaW5nIG9mIGEgcGFpbnQgc3Ryb2tlXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIHByZXBhcmVGb3JMYXllclVuZG8oKTsgXG4gICAgICAgIH1cbiAgICAgICAgYnJ1c2hCdWZmZXIgPSBudWxsO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSBwYWludCBkYWIgYXQgdGhlIGdpdmVuIHBvc2l0aW9uIHVzaW5nIHRoZSBjdXJyZW50IGJydXNoLCBhbmQgcGFpbnQgaXQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0geCBmbG9hdFxuICAgICAqIEBwYXJhbSB5IGZsb2F0XG4gICAgICogQHBhcmFtIHByZXNzdXJlIGZsb2F0XG4gICAgICovXG4gICAgQ1BCcnVzaFRvb2xCYXNlLnByb3RvdHlwZS5jcmVhdGVBbmRQYWludERhYiA9IGZ1bmN0aW9uKHgsIHksIHByZXNzdXJlKSB7XG4gICAgICAgIGN1ckJydXNoLmFwcGx5UHJlc3N1cmUocHJlc3N1cmUpO1xuICAgICAgICBcbiAgICAgICAgaWYgKGN1ckJydXNoLnNjYXR0ZXJpbmcgPiAwLjApIHtcbiAgICAgICAgICAgIHggKz0gcm5kLm5leHRHYXVzc2lhbigpICogY3VyQnJ1c2guY3VyU2NhdHRlcmluZyAvIDQuMDtcbiAgICAgICAgICAgIHkgKz0gcm5kLm5leHRHYXVzc2lhbigpICogY3VyQnJ1c2guY3VyU2NhdHRlcmluZyAvIDQuMDtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgdmFyIFxuICAgICAgICAgICAgZGFiID0gYnJ1c2hNYW5hZ2VyLmdldERhYih4LCB5LCBjdXJCcnVzaCk7XG4gICAgICAgIFxuICAgICAgICB0aGlzLnBhaW50RGFiKGRhYik7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFBhaW50IGEgZGFiIHJldHVybmVkIGJ5IGJydXNoTWFuYWdlci5nZXREYWIoKVxuICAgICAqXG4gICAgICogQHBhcmFtIGRhYiB7Ynl0ZVtdIGJydXNoOyBpbnQgeCwgeSwgYWxwaGEsIHdpZHRoLCBoZWlnaHR9XG4gICAgICovXG4gICAgQ1BCcnVzaFRvb2xCYXNlLnByb3RvdHlwZS5wYWludERhYiA9IGZ1bmN0aW9uKGRhYikge1xuICAgICAgICB2YXJcbiAgICAgICAgICAgIHNyY1JlY3QgPSBuZXcgQ1BSZWN0KDAsIDAsIGRhYi53aWR0aCwgZGFiLmhlaWdodCksXG4gICAgICAgICAgICBkc3RSZWN0ID0gbmV3IENQUmVjdCgwLCAwLCBkYWIud2lkdGgsIGRhYi5oZWlnaHQpO1xuICAgICAgICBcbiAgICAgICAgZHN0UmVjdC50cmFuc2xhdGUoZGFiLngsIGRhYi55KTtcblxuICAgICAgICBjbGlwU291cmNlRGVzdChzcmNSZWN0LCBkc3RSZWN0KTtcblxuICAgICAgICAvLyBkcmF3aW5nIGVudGlyZWx5IG91dHNpZGUgdGhlIGNhbnZhc1xuICAgICAgICBpZiAoZHN0UmVjdC5pc0VtcHR5KCkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHVuZG9BcmVhLnVuaW9uKGRzdFJlY3QpO1xuICAgICAgICBvcGFjaXR5QXJlYS51bmlvbihkc3RSZWN0KTtcblxuICAgICAgICB0aGlzLnBhaW50RGFiSW1wbGVtZW50YXRpb24oc3JjUmVjdCwgZHN0UmVjdCwgZGFiKTtcbiAgICAgICAgXG4gICAgICAgIGludmFsaWRhdGVGdXNpb25SZWN0KGRzdFJlY3QpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIENQQnJ1c2hUb29sU2ltcGxlQnJ1c2goKSB7XG4gICAgfVxuXG4gICAgQ1BCcnVzaFRvb2xTaW1wbGVCcnVzaC5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKENQQnJ1c2hUb29sQmFzZS5wcm90b3R5cGUpO1xuICAgIENQQnJ1c2hUb29sU2ltcGxlQnJ1c2gucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gQ1BCcnVzaFRvb2xTaW1wbGVCcnVzaDsgXG4gICAgXG4gICAgQ1BCcnVzaFRvb2xTaW1wbGVCcnVzaC5wcm90b3R5cGUucGFpbnREYWJJbXBsZW1lbnRhdGlvbiA9IGZ1bmN0aW9uKHNyY1JlY3QsIGRzdFJlY3QsIGRhYikge1xuICAgICAgICAvLyBGSVhNRTogdGhlcmUgc2hvdWxkIGJlIG5vIHJlZmVyZW5jZSB0byBhIHNwZWNpZmljIHRvb2wgaGVyZVxuICAgICAgICAvLyBjcmVhdGUgYSBuZXcgYnJ1c2ggcGFyYW1ldGVyIGluc3RlYWRcbiAgICAgICAgaWYgKGN1ckJydXNoLmlzQWlyYnJ1c2gpIHtcbiAgICAgICAgICAgIHRoaXMucGFpbnRGbG93KHNyY1JlY3QsIGRzdFJlY3QsIGRhYi5icnVzaCwgZGFiLndpZHRoLCBNYXRoLm1heCgxLCBkYWIuYWxwaGEgLyA4KSk7XG4gICAgICAgIH0gZWxzZSBpZiAoY3VyQnJ1c2gudG9vbE5iID09IENoaWNrZW5QYWludC5UX1BFTikge1xuICAgICAgICAgICAgdGhpcy5wYWludEZsb3coc3JjUmVjdCwgZHN0UmVjdCwgZGFiLmJydXNoLCBkYWIud2lkdGgsIE1hdGgubWF4KDEsIGRhYi5hbHBoYSAvIDIpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMucGFpbnRPcGFjaXR5KHNyY1JlY3QsIGRzdFJlY3QsIGRhYi5icnVzaCwgZGFiLndpZHRoLCBkYWIuYWxwaGEpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIENQQnJ1c2hUb29sU2ltcGxlQnJ1c2gucHJvdG90eXBlLm1lcmdlT3BhY2l0eUJ1ZiA9IGZ1bmN0aW9uKGRzdFJlY3QsIGNvbG9yIC8qIGludCAqLykge1xuICAgICAgICB2YXIgXG4gICAgICAgICAgICBvcGFjaXR5RGF0YSA9IG9wYWNpdHlCdWZmZXIuZGF0YSxcbiAgICAgICAgICAgIHVuZG9EYXRhID0gdW5kb0J1ZmZlci5kYXRhLFxuICAgICAgICAgICAgXG4gICAgICAgICAgICByZWQgPSAoY29sb3IgPj4gMTYpICYgMHhGRixcbiAgICAgICAgICAgIGdyZWVuID0gKGNvbG9yID4+IDgpICYgMHhGRixcbiAgICAgICAgICAgIGJsdWUgPSBjb2xvciAmIDB4RkYsXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHdpZHRoID0gZHN0UmVjdC5nZXRXaWR0aCgpIHwgMCxcbiAgICAgICAgICAgIGhlaWdodCA9IGRzdFJlY3QuZ2V0SGVpZ2h0KCkgfCAwLFxuICAgICAgICAgICAgXG4gICAgICAgICAgICBkc3RPZmZzZXQgPSBjdXJMYXllci5vZmZzZXRPZlBpeGVsKGRzdFJlY3QubGVmdCwgZHN0UmVjdC50b3ApLFxuICAgICAgICAgICAgc3JjT2Zmc2V0ID0gb3BhY2l0eUJ1ZmZlci5vZmZzZXRPZlBpeGVsKGRzdFJlY3QubGVmdCwgZHN0UmVjdC50b3ApLFxuICAgICAgICBcbiAgICAgICAgICAgIHNyY1lTdHJpZGUgPSAob3BhY2l0eUJ1ZmZlci53aWR0aCAtIHdpZHRoKSB8IDAsXG4gICAgICAgICAgICBkc3RZU3RyaWRlID0gKChjdXJMYXllci53aWR0aCAtIHdpZHRoKSAqIENQQ29sb3JCbXAuQllURVNfUEVSX1BJWEVMKSB8IDA7XG5cbiAgICAgICAgZm9yICh2YXIgeSA9IDA7IHkgPCBoZWlnaHQ7IHkrKywgc3JjT2Zmc2V0ICs9IHNyY1lTdHJpZGUsIGRzdE9mZnNldCArPSBkc3RZU3RyaWRlKSB7XG4gICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IHdpZHRoOyB4KyssIHNyY09mZnNldCsrLCBkc3RPZmZzZXQgKz0gQ1BDb2xvckJtcC5CWVRFU19QRVJfUElYRUwpIHtcbiAgICAgICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eUFscGhhID0gKG9wYWNpdHlEYXRhW3NyY09mZnNldF0gLyAyNTUpIHwgMDtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBpZiAob3BhY2l0eUFscGhhID4gMCkge1xuICAgICAgICAgICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlc3RBbHBoYSA9IHVuZG9EYXRhW2RzdE9mZnNldCArIENQQ29sb3JCbXAuQUxQSEFfQllURV9PRkZTRVRdLFxuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld0xheWVyQWxwaGEgPSAob3BhY2l0eUFscGhhICsgZGVzdEFscGhhICogKDI1NSAtIG9wYWNpdHlBbHBoYSkgLyAyNTUpIHwgMCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlYWxBbHBoYSA9ICgyNTUgKiBvcGFjaXR5QWxwaGEgLyBuZXdMYXllckFscGhhKSB8IDAsXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnZBbHBoYSA9IDI1NSAtIHJlYWxBbHBoYTtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGN1ckxheWVyLmRhdGFbZHN0T2Zmc2V0XSA9ICgocmVkICogcmVhbEFscGhhICsgdW5kb0RhdGFbZHN0T2Zmc2V0XSAqIGludkFscGhhKSAvIDI1NSkgJiAweGZmO1xuICAgICAgICAgICAgICAgICAgICBjdXJMYXllci5kYXRhW2RzdE9mZnNldCArIDFdID0gKChncmVlbiAqIHJlYWxBbHBoYSArIHVuZG9EYXRhW2RzdE9mZnNldCArIDFdICogaW52QWxwaGEpIC8gMjU1KSAmIDB4ZmY7XG4gICAgICAgICAgICAgICAgICAgIGN1ckxheWVyLmRhdGFbZHN0T2Zmc2V0ICsgMl0gPSAoKGJsdWUgKiByZWFsQWxwaGEgKyB1bmRvRGF0YVtkc3RPZmZzZXQgKyAyXSAqIGludkFscGhhKSAvIDI1NSkgJiAweGZmO1xuICAgICAgICAgICAgICAgICAgICBjdXJMYXllci5kYXRhW2RzdE9mZnNldCArIDNdID0gbmV3TGF5ZXJBbHBoYTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBAcGFyYW0gc3JjUmVjdCBDUFJlY3RcbiAgICAgKiBAcGFyYW0gZHN0UmVjdCBDUFJlY3RcbiAgICAgKiBAcGFyYW0gYnJ1c2ggaW50W11cbiAgICAgKiBAcGFyYW0gYnJ1c2hXaWR0aCBpbnRcbiAgICAgKiBAcGFyYW0gYWxwaGEgZmxvYXRcbiAgICAgKi9cbiAgICBDUEJydXNoVG9vbFNpbXBsZUJydXNoLnByb3RvdHlwZS5wYWludE9wYWNpdHkgPSBmdW5jdGlvbihzcmNSZWN0LCBkc3RSZWN0LCBicnVzaCwgYnJ1c2hXaWR0aCwgYWxwaGEpIHtcbiAgICAgICAgdmFyIFxuICAgICAgICAgICAgb3BhY2l0eURhdGEgPSBvcGFjaXR5QnVmZmVyLmRhdGEsXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHNyY09mZnNldCA9IHNyY1JlY3QubGVmdCArIHNyY1JlY3QudG9wICogYnJ1c2hXaWR0aCxcbiAgICAgICAgICAgIGRzdE9mZnNldCA9IG9wYWNpdHlCdWZmZXIub2Zmc2V0T2ZQaXhlbChkc3RSZWN0LmxlZnQsIGRzdFJlY3QudG9wKSxcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZHN0V2lkdGggPSBkc3RSZWN0LmdldFdpZHRoKCksXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHNyY1lTdHJpZGUgPSBicnVzaFdpZHRoIC0gZHN0V2lkdGgsXG4gICAgICAgICAgICBkc3RZU3RyaWRlID0gdGhhdC53aWR0aCAtIGRzdFdpZHRoO1xuXG4gICAgICAgIGFscGhhID0gTWF0aC5taW4oMjU1LCBhbHBoYSk7XG5cbiAgICAgICAgZm9yICh2YXIgeSA9IGRzdFJlY3QudG9wOyB5IDwgZHN0UmVjdC5ib3R0b207IHkrKywgc3JjT2Zmc2V0ICs9IHNyY1lTdHJpZGUsIGRzdE9mZnNldCArPSBkc3RZU3RyaWRlKSB7XG4gICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IGRzdFdpZHRoOyB4KyssIHNyY09mZnNldCsrLCBkc3RPZmZzZXQrKykge1xuICAgICAgICAgICAgICAgIG9wYWNpdHlEYXRhW2RzdE9mZnNldF0gPSBNYXRoLm1heChicnVzaFtzcmNPZmZzZXRdICogYWxwaGEsIG9wYWNpdHlEYXRhW2RzdE9mZnNldF0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcblxuICAgIENQQnJ1c2hUb29sU2ltcGxlQnJ1c2gucHJvdG90eXBlLnBhaW50RmxvdyA9IGZ1bmN0aW9uKHNyY1JlY3QsIGRzdFJlY3QsIGJydXNoLCBicnVzaFdpZHRoLCBhbHBoYSkge1xuICAgICAgICB2YXIgXG4gICAgICAgICAgICBvcGFjaXR5RGF0YSA9IG9wYWNpdHlCdWZmZXIuZGF0YSxcblxuICAgICAgICAgICAgc3JjT2Zmc2V0ID0gc3JjUmVjdC5sZWZ0ICsgc3JjUmVjdC50b3AgKiBicnVzaFdpZHRoLFxuICAgICAgICAgICAgZHN0T2Zmc2V0ID0gb3BhY2l0eUJ1ZmZlci5vZmZzZXRPZlBpeGVsKGRzdFJlY3QubGVmdCwgZHN0UmVjdC50b3ApLFxuICAgICAgICAgICAgXG4gICAgICAgICAgICBkc3RXaWR0aCA9IGRzdFJlY3QuZ2V0V2lkdGgoKSxcblxuICAgICAgICAgICAgc3JjWVN0cmlkZSA9IGJydXNoV2lkdGggLSBkc3RXaWR0aCxcbiAgICAgICAgICAgIGRzdFlTdHJpZGUgPSB0aGF0LndpZHRoIC0gZHN0V2lkdGg7XG4gICAgICAgIFxuICAgICAgICBmb3IgKHZhciB5ID0gZHN0UmVjdC50b3A7IHkgPCBkc3RSZWN0LmJvdHRvbTsgeSsrLCBzcmNPZmZzZXQgKz0gc3JjWVN0cmlkZSwgZHN0T2Zmc2V0ICs9IGRzdFlTdHJpZGUpIHtcbiAgICAgICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgZHN0V2lkdGg7IHgrKywgc3JjT2Zmc2V0KyssIGRzdE9mZnNldCsrKSB7XG4gICAgICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgICAgIGJydXNoQWxwaGEgPSBicnVzaFtzcmNPZmZzZXRdICogYWxwaGE7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgaWYgKGJydXNoQWxwaGEgIT0gMCkge1xuICAgICAgICAgICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wYWNpdHlBbHBoYSA9IE1hdGgubWluKDI1NSAqIDI1NSwgb3BhY2l0eURhdGFbZHN0T2Zmc2V0XSArICgyNTUgLSBvcGFjaXR5RGF0YVtkc3RPZmZzZXRdIC8gMjU1KSAqIGJydXNoQWxwaGEgLyAyNTUpO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eURhdGFbZHN0T2Zmc2V0XSA9IG9wYWNpdHlBbHBoYTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgLypDUEJydXNoVG9vbFNpbXBsZUJydXNoLnByb3RvdHlwZS5wYWludE9wYWNpdHlGbG93ID0gZnVuY3Rpb24oc3JjUmVjdCwgZHN0UmVjdCwgYnJ1c2gsIGJydXNoV2lkdGgsIG9wYWNpdHksIGZsb3cpIHtcbiAgICAgICAgdmFyIFxuICAgICAgICAgICAgb3BhY2l0eURhdGEgPSBvcGFjaXR5QnVmZmVyLmRhdGEsXG5cbiAgICAgICAgICAgIGJ5ID0gc3JjUmVjdC50b3A7XG4gICAgICAgIFxuICAgICAgICBmb3IgKHZhciB5ID0gZHN0UmVjdC50b3A7IHkgPCBkc3RSZWN0LmJvdHRvbTsgeSsrLCBieSsrKSB7XG4gICAgICAgICAgICB2YXIgXG4gICAgICAgICAgICAgICAgc3JjT2Zmc2V0ID0gc3JjUmVjdC5sZWZ0ICsgYnkgKiBicnVzaFdpZHRoLFxuICAgICAgICAgICAgICAgIGRzdE9mZnNldCA9IGRzdFJlY3QubGVmdCArIHkgKiB3aWR0aDtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZm9yICh2YXIgeCA9IGRzdFJlY3QubGVmdDsgeCA8IGRzdFJlY3QucmlnaHQ7IHgrKywgc3JjT2Zmc2V0KyssIGRzdE9mZnNldCsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIFxuICAgICAgICAgICAgICAgICAgICBicnVzaEFscGhhID0gYnJ1c2hbc3JjT2Zmc2V0XSAqIGZsb3c7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgaWYgKGJydXNoQWxwaGEgIT0gMCkge1xuICAgICAgICAgICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wYWNpdHlBbHBoYSA9IG9wYWNpdHlEYXRhW2RzdE9mZnNldF0sXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdBbHBoYSA9IE1hdGgubWluKDI1NSAqIDI1NSwgb3BhY2l0eUFscGhhICsgKG9wYWNpdHkgLSBvcGFjaXR5QWxwaGEgLyAyNTUpICogYnJ1c2hBbHBoYSAvIDI1NSk7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBuZXdBbHBoYSA9IE1hdGgubWluKG9wYWNpdHkgKiBicnVzaFtzcmNPZmZzZXRdLCBuZXdBbHBoYSk7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAobmV3QWxwaGEgPiBvcGFjaXR5QWxwaGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wYWNpdHlEYXRhW2RzdE9mZnNldF0gPSBuZXdBbHBoYTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07Ki9cblxuICAgIGZ1bmN0aW9uIENQQnJ1c2hUb29sRXJhc2VyKCkge1xuICAgIH1cbiAgICBcbiAgICBDUEJydXNoVG9vbEVyYXNlci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKENQQnJ1c2hUb29sU2ltcGxlQnJ1c2gucHJvdG90eXBlKTtcbiAgICBDUEJydXNoVG9vbEVyYXNlci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBDUEJydXNoVG9vbEVyYXNlcjtcbiAgICBcbiAgICBDUEJydXNoVG9vbEVyYXNlci5wcm90b3R5cGUubWVyZ2VPcGFjaXR5QnVmID0gZnVuY3Rpb24oZHN0UmVjdCwgY29sb3IpIHtcbiAgICAgICAgdmFyIFxuICAgICAgICAgICAgb3BhY2l0eURhdGEgPSBvcGFjaXR5QnVmZmVyLmRhdGEsXG4gICAgICAgICAgICB1bmRvRGF0YSA9IHVuZG9CdWZmZXIuZGF0YTtcbiAgICBcbiAgICAgICAgZm9yICh2YXIgeSA9IGRzdFJlY3QudG9wOyB5IDwgZHN0UmVjdC5ib3R0b207IHkrKykge1xuICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgZHN0T2Zmc2V0ID0gY3VyTGF5ZXIub2Zmc2V0T2ZQaXhlbChkc3RSZWN0LmxlZnQsIHkpICsgQ1BDb2xvckJtcC5BTFBIQV9CWVRFX09GRlNFVCxcbiAgICAgICAgICAgICAgICBzcmNPZmZzZXQgPSBvcGFjaXR5QnVmZmVyLm9mZnNldE9mUGl4ZWwoZHN0UmVjdC5sZWZ0LCB5KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZm9yICh2YXIgeCA9IGRzdFJlY3QubGVmdDsgeCA8IGRzdFJlY3QucmlnaHQ7IHgrKywgZHN0T2Zmc2V0ICs9IENQQ29sb3JCbXAuQllURVNfUEVSX1BJWEVMKSB7XG4gICAgICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgICAgIG9wYWNpdHlBbHBoYSA9IChvcGFjaXR5RGF0YVtzcmNPZmZzZXQrK10gLyAyNTUpIHwgMDtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBpZiAob3BhY2l0eUFscGhhID4gMCkge1xuICAgICAgICAgICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlc3RBbHBoYSA9IHVuZG9EYXRhW2RzdE9mZnNldF0sXG4gICAgICAgICAgICAgICAgICAgICAgICByZWFsQWxwaGEgPSBkZXN0QWxwaGEgKiAoMjU1IC0gb3BhY2l0eUFscGhhKSAvIDI1NTtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGN1ckxheWVyLmRhdGFbZHN0T2Zmc2V0XSA9IHJlYWxBbHBoYTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gQ1BCcnVzaFRvb2xEb2RnZSgpIHtcbiAgICB9XG4gICAgXG4gICAgQ1BCcnVzaFRvb2xEb2RnZS5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKENQQnJ1c2hUb29sU2ltcGxlQnJ1c2gucHJvdG90eXBlKTtcbiAgICBDUEJydXNoVG9vbERvZGdlLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IENQQnJ1c2hUb29sRG9kZ2U7XG4gICAgXG4gICAgQ1BCcnVzaFRvb2xEb2RnZS5wcm90b3R5cGUubWVyZ2VPcGFjaXR5QnVmID0gZnVuY3Rpb24oZHN0UmVjdCwgY29sb3IpIHtcbiAgICAgICAgdmFyIFxuICAgICAgICAgICAgb3BhY2l0eURhdGEgPSBvcGFjaXR5QnVmZmVyLmRhdGEsXG4gICAgICAgICAgICB1bmRvRGF0YSA9IHVuZG9CdWZmZXIuZGF0YTtcbiAgICBcbiAgICAgICAgZm9yICh2YXIgeSA9IGRzdFJlY3QudG9wOyB5IDwgZHN0UmVjdC5ib3R0b207IHkrKykge1xuICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgZHN0T2Zmc2V0ID0gY3VyTGF5ZXIub2Zmc2V0T2ZQaXhlbChkc3RSZWN0LmxlZnQsIHkpLFxuICAgICAgICAgICAgICAgIHNyY09mZnNldCA9IG9wYWNpdHlCdWZmZXIub2Zmc2V0T2ZQaXhlbChkc3RSZWN0LmxlZnQsIHkpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBmb3IgKHZhciB4ID0gZHN0UmVjdC5sZWZ0OyB4IDwgZHN0UmVjdC5yaWdodDsgeCsrLCBzcmNPZmZzZXQrKywgZHN0T2Zmc2V0ICs9IENQQ29sb3JCbXAuQllURVNfUEVSX1BJWEVMKSB7XG4gICAgICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgICAgIG9wYWNpdHlBbHBoYSA9IChvcGFjaXR5RGF0YVtzcmNPZmZzZXRdIC8gMjU1KSB8IDA7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgaWYgKG9wYWNpdHlBbHBoYSA+IDAgJiYgdW5kb0RhdGFbZHN0T2Zmc2V0ICsgQ1BDb2xvckJtcC5BTFBIQV9CWVRFX09GRlNFVF0gIT0gMCkge1xuICAgICAgICAgICAgICAgICAgICBvcGFjaXR5QWxwaGEgKz0gMjU1O1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAzOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjaGFubmVsID0gKHVuZG9EYXRhW2RzdE9mZnNldCArIGldICogb3BhY2l0eUFscGhhIC8gMjU1KSB8IDA7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNoYW5uZWwgPiAyNTUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFubmVsID0gMjU1O1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJMYXllci5kYXRhW2RzdE9mZnNldCArIGldID0gY2hhbm5lbDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBmdW5jdGlvbiBDUEJydXNoVG9vbEJ1cm4oKSB7XG4gICAgfVxuICAgIFxuICAgIENQQnJ1c2hUb29sQnVybi5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKENQQnJ1c2hUb29sU2ltcGxlQnJ1c2gucHJvdG90eXBlKTtcbiAgICBDUEJydXNoVG9vbEJ1cm4ucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gQ1BCcnVzaFRvb2xCdXJuO1xuICAgIFxuICAgIENQQnJ1c2hUb29sQnVybi5wcm90b3R5cGUubWVyZ2VPcGFjaXR5QnVmID0gZnVuY3Rpb24oZHN0UmVjdCwgY29sb3IpIHtcbiAgICAgICAgdmFyIFxuICAgICAgICAgICAgb3BhY2l0eURhdGEgPSBvcGFjaXR5QnVmZmVyLmRhdGEsXG4gICAgICAgICAgICB1bmRvRGF0YSA9IHVuZG9CdWZmZXIuZGF0YTtcbiAgICBcbiAgICAgICAgZm9yICh2YXIgeSA9IGRzdFJlY3QudG9wOyB5IDwgZHN0UmVjdC5ib3R0b207IHkrKykge1xuICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgZHN0T2Zmc2V0ID0gY3VyTGF5ZXIub2Zmc2V0T2ZQaXhlbChkc3RSZWN0LmxlZnQsIHkpLFxuICAgICAgICAgICAgICAgIHNyY09mZnNldCA9IG9wYWNpdHlCdWZmZXIub2Zmc2V0T2ZQaXhlbChkc3RSZWN0LmxlZnQsIHkpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBmb3IgKHZhciB4ID0gZHN0UmVjdC5sZWZ0OyB4IDwgZHN0UmVjdC5yaWdodDsgeCsrLCBzcmNPZmZzZXQrKywgZHN0T2Zmc2V0ICs9IENQQ29sb3JCbXAuQllURVNfUEVSX1BJWEVMKSB7XG4gICAgICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgICAgIG9wYWNpdHlBbHBoYSA9IChvcGFjaXR5RGF0YVtzcmNPZmZzZXRdIC8gMjU1KSB8IDA7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgaWYgKG9wYWNpdHlBbHBoYSA+IDAgJiYgdW5kb0RhdGFbZHN0T2Zmc2V0ICsgQ1BDb2xvckJtcC5BTFBIQV9CWVRFX09GRlNFVF0gIT0gMCkge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IDM7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNoYW5uZWwgPSB1bmRvRGF0YVtkc3RPZmZzZXQgKyBpXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgY2hhbm5lbCA9IChjaGFubmVsIC0gKEJVUk5fQ09OU1RBTlQgLSBjaGFubmVsKSAqIG9wYWNpdHlBbHBoYSAvIDI1NSkgfCAwO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjaGFubmVsIDwgMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5uZWwgPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJMYXllci5kYXRhW2RzdE9mZnNldCArIGldID0gY2hhbm5lbDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgXG4gICAgZnVuY3Rpb24gQ1BCcnVzaFRvb2xCbHVyKCkge1xuICAgIH1cbiAgICBcbiAgICBDUEJydXNoVG9vbEJsdXIucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShDUEJydXNoVG9vbFNpbXBsZUJydXNoLnByb3RvdHlwZSk7XG4gICAgQ1BCcnVzaFRvb2xCbHVyLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IENQQnJ1c2hUb29sQmx1cjtcblxuICAgIENQQnJ1c2hUb29sQmx1ci5wcm90b3R5cGUubWVyZ2VPcGFjaXR5QnVmID0gZnVuY3Rpb24oZHN0UmVjdCwgY29sb3IpIHtcbiAgICAgICAgdmFyIFxuICAgICAgICAgICAgb3BhY2l0eURhdGEgPSBvcGFjaXR5QnVmZmVyLmRhdGEsXG4gICAgICAgICAgICB1bmRvRGF0YSA9IHVuZG9CdWZmZXIuZGF0YSxcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZHN0WVN0cmlkZSA9IHVuZG9CdWZmZXIud2lkdGggKiBDUENvbG9yQm1wLkJZVEVTX1BFUl9QSVhFTCxcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgciwgZywgYiwgYTtcblxuICAgICAgICBmdW5jdGlvbiBhZGRTYW1wbGUoc2FtcGxlT2Zmc2V0KSB7XG4gICAgICAgICAgICByICs9IHVuZG9EYXRhW3NhbXBsZU9mZnNldCArIENQQ29sb3JCbXAuUkVEX0JZVEVfT0ZGU0VUXTtcbiAgICAgICAgICAgIGcgKz0gdW5kb0RhdGFbc2FtcGxlT2Zmc2V0ICsgQ1BDb2xvckJtcC5HUkVFTl9CWVRFX09GRlNFVF07XG4gICAgICAgICAgICBiICs9IHVuZG9EYXRhW3NhbXBsZU9mZnNldCArIENQQ29sb3JCbXAuQkxVRV9CWVRFX09GRlNFVF07XG4gICAgICAgICAgICBhICs9IHVuZG9EYXRhW3NhbXBsZU9mZnNldCArIENQQ29sb3JCbXAuQUxQSEFfQllURV9PRkZTRVRdO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBmb3IgKHZhciB5ID0gZHN0UmVjdC50b3A7IHkgPCBkc3RSZWN0LmJvdHRvbTsgeSsrKSB7XG4gICAgICAgICAgICB2YXIgXG4gICAgICAgICAgICAgICAgZHN0T2Zmc2V0ID0gdW5kb0J1ZmZlci5vZmZzZXRPZlBpeGVsKGRzdFJlY3QubGVmdCwgeSksXG4gICAgICAgICAgICAgICAgc3JjT2Zmc2V0ID0gb3BhY2l0eUJ1ZmZlci5vZmZzZXRPZlBpeGVsKGRzdFJlY3QubGVmdCwgeSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGZvciAodmFyIHggPSBkc3RSZWN0LmxlZnQ7IHggPCBkc3RSZWN0LnJpZ2h0OyB4KyssIGRzdE9mZnNldCArPSBDUENvbG9yQm1wLkJZVEVTX1BFUl9QSVhFTCwgc3JjT2Zmc2V0KyspIHtcbiAgICAgICAgICAgICAgICB2YXIgXG4gICAgICAgICAgICAgICAgICAgIG9wYWNpdHlBbHBoYSA9IChvcGFjaXR5RGF0YVtzcmNPZmZzZXRdIC8gMjU1KSB8IDA7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgaWYgKG9wYWNpdHlBbHBoYSA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgICAgICAgICBibHVyID0gKEJMVVJfTUlOICsgKEJMVVJfTUFYIC0gQkxVUl9NSU4pICogb3BhY2l0eUFscGhhIC8gMjU1KSB8IDAsXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHN1bSA9IGJsdXIgKyA0O1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgciA9IGJsdXIgKiB1bmRvRGF0YVtkc3RPZmZzZXQgKyBDUENvbG9yQm1wLlJFRF9CWVRFX09GRlNFVF07XG4gICAgICAgICAgICAgICAgICAgIGcgPSBibHVyICogdW5kb0RhdGFbZHN0T2Zmc2V0ICsgQ1BDb2xvckJtcC5HUkVFTl9CWVRFX09GRlNFVF07XG4gICAgICAgICAgICAgICAgICAgIGIgPSBibHVyICogdW5kb0RhdGFbZHN0T2Zmc2V0ICsgQ1BDb2xvckJtcC5CTFVFX0JZVEVfT0ZGU0VUXTtcbiAgICAgICAgICAgICAgICAgICAgYSA9IGJsdXIgKiB1bmRvRGF0YVtkc3RPZmZzZXQgKyBDUENvbG9yQm1wLkFMUEhBX0JZVEVfT0ZGU0VUXTtcblxuICAgICAgICAgICAgICAgICAgICBhZGRTYW1wbGUoeSA+IDAgPyBkc3RPZmZzZXQgLSBkc3RZU3RyaWRlIDogZHN0T2Zmc2V0KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkU2FtcGxlKHkgPCB1bmRvQnVmZmVyLmhlaWdodCAtIDEgPyBkc3RPZmZzZXQgKyBkc3RZU3RyaWRlIDogZHN0T2Zmc2V0KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkU2FtcGxlKHggPiAwID8gZHN0T2Zmc2V0IC0gQ1BDb2xvckJtcC5CWVRFU19QRVJfUElYRUwgOiBkc3RPZmZzZXQpO1xuICAgICAgICAgICAgICAgICAgICBhZGRTYW1wbGUoeCA8IHVuZG9CdWZmZXIud2lkdGggLSAxID8gZHN0T2Zmc2V0ICsgQ1BDb2xvckJtcC5CWVRFU19QRVJfUElYRUwgOiBkc3RPZmZzZXQpO1xuXG4gICAgICAgICAgICAgICAgICAgIGEgLz0gc3VtO1xuICAgICAgICAgICAgICAgICAgICByIC89IHN1bTtcbiAgICAgICAgICAgICAgICAgICAgZyAvPSBzdW07XG4gICAgICAgICAgICAgICAgICAgIGIgLz0gc3VtO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgY3VyTGF5ZXIuZGF0YVtkc3RPZmZzZXQgKyBDUENvbG9yQm1wLlJFRF9CWVRFX09GRlNFVF0gPSByIHwgMDtcbiAgICAgICAgICAgICAgICAgICAgY3VyTGF5ZXIuZGF0YVtkc3RPZmZzZXQgKyBDUENvbG9yQm1wLkdSRUVOX0JZVEVfT0ZGU0VUXSA9IGcgfCAwO1xuICAgICAgICAgICAgICAgICAgICBjdXJMYXllci5kYXRhW2RzdE9mZnNldCArIENQQ29sb3JCbXAuQkxVRV9CWVRFX09GRlNFVF0gPSBiIHwgMDtcbiAgICAgICAgICAgICAgICAgICAgY3VyTGF5ZXIuZGF0YVtkc3RPZmZzZXQgKyBDUENvbG9yQm1wLkFMUEhBX0JZVEVfT0ZGU0VUXSA9IGEgfCAwO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBcbiAgICAvKiBCcnVzaGVzIGRlcml2ZWQgZnJvbSB0aGlzIGNsYXNzIHVzZSB0aGUgb3BhY2l0eSBidWZmZXIgYXMgYSBzaW1wbGUgYWxwaGEgbGF5ZXIgKDMyLWJpdCBwaXhlbHMgaW4gQVJHQiBvcmRlcikgKi9cbiAgICBmdW5jdGlvbiBDUEJydXNoVG9vbERpcmVjdEJydXNoKCkge1xuICAgIH1cbiAgICBcbiAgICBDUEJydXNoVG9vbERpcmVjdEJydXNoLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoQ1BCcnVzaFRvb2xTaW1wbGVCcnVzaC5wcm90b3R5cGUpO1xuICAgIENQQnJ1c2hUb29sRGlyZWN0QnJ1c2gucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gQ1BCcnVzaFRvb2xEaXJlY3RCcnVzaDtcblxuICAgIENQQnJ1c2hUb29sRGlyZWN0QnJ1c2gucHJvdG90eXBlLm1lcmdlT3BhY2l0eUJ1ZiA9IGZ1bmN0aW9uKGRzdFJlY3QsIGNvbG9yKSB7XG4gICAgICAgIHZhciBcbiAgICAgICAgICAgIG9wYWNpdHlEYXRhID0gb3BhY2l0eUJ1ZmZlci5kYXRhLFxuICAgICAgICAgICAgdW5kb0RhdGEgPSB1bmRvQnVmZmVyLmRhdGEsXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHNyY09mZnNldCA9IG9wYWNpdHlCdWZmZXIub2Zmc2V0T2ZQaXhlbChkc3RSZWN0LmxlZnQsIGRzdFJlY3QudG9wKSxcbiAgICAgICAgICAgIGRzdE9mZnNldCA9IGN1ckxheWVyLm9mZnNldE9mUGl4ZWwoZHN0UmVjdC5sZWZ0LCBkc3RSZWN0LnRvcCksXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHdpZHRoID0gZHN0UmVjdC5nZXRXaWR0aCgpIHwgMCxcbiAgICAgICAgICAgIGhlaWdodCA9IGRzdFJlY3QuZ2V0SGVpZ2h0KCkgfCAwLFxuICAgICAgICAgICAgXG4gICAgICAgICAgICBzcmNZU3RyaWRlID0gKG9wYWNpdHlCdWZmZXIud2lkdGggLSB3aWR0aCkgfCAwLFxuICAgICAgICAgICAgZHN0WVN0cmlkZSA9ICgoY3VyTGF5ZXIud2lkdGggLSB3aWR0aCkgKiBDUENvbG9yQm1wLkJZVEVTX1BFUl9QSVhFTCkgfCAwO1xuXG4gICAgICAgIGZvciAodmFyIHkgPSAwOyB5IDwgaGVpZ2h0OyB5KyssIHNyY09mZnNldCArPSBzcmNZU3RyaWRlLCBkc3RPZmZzZXQgKz0gZHN0WVN0cmlkZSkge1xuICAgICAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCB3aWR0aDsgeCsrLCBzcmNPZmZzZXQrKywgZHN0T2Zmc2V0ICs9IENQQ29sb3JCbXAuQllURVNfUEVSX1BJWEVMKSB7XG4gICAgICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgICAgIGNvbG9yMSA9IG9wYWNpdHlEYXRhW3NyY09mZnNldF0sXG4gICAgICAgICAgICAgICAgICAgIGFscGhhMSA9IGNvbG9yMSA+Pj4gMjQ7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgaWYgKGFscGhhMSA9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB2YXIgXG4gICAgICAgICAgICAgICAgLy8gUHJldHR5IHN1cmUgZnVzaW9uLmFscGhhIGlzIGFsd2F5cyAxMDAgYW5kIHRoZSBjb21tZW50ZWQgc2VjdGlvbiBpcyBhIGNvcHkvcGFzdGUgZXJyb3JcbiAgICAgICAgICAgICAgICAgICAgYWxwaGEyID0gdW5kb0RhdGFbZHN0T2Zmc2V0ICsgQ1BDb2xvckJtcC5BTFBIQV9CWVRFX09GRlNFVF0gLyogKiBmdXNpb24uYWxwaGEgLyAxMDAgKi8sIFxuICAgICAgICAgICAgICAgICAgICBuZXdBbHBoYSA9IChhbHBoYTEgKyBhbHBoYTIgLSBhbHBoYTEgKiBhbHBoYTIgLyAyNTUpIHwgMDtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBpZiAobmV3QWxwaGEgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVhbEFscGhhID0gKGFscGhhMSAqIDI1NSAvIG5ld0FscGhhKSB8IDAsXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnZBbHBoYSA9IDI1NSAtIHJlYWxBbHBoYTtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGN1ckxheWVyLmRhdGFbZHN0T2Zmc2V0XSA9ICgoKChjb2xvcjEgPj4gMTYpICYgMHhGRikgKiByZWFsQWxwaGEgKyB1bmRvRGF0YVtkc3RPZmZzZXRdICogaW52QWxwaGEpIC8gMjU1KSB8IDA7XG4gICAgICAgICAgICAgICAgICAgIGN1ckxheWVyLmRhdGFbZHN0T2Zmc2V0ICsgMV0gPSAoKCgoY29sb3IxID4+IDgpICYgMHhGRikgKiByZWFsQWxwaGEgKyB1bmRvRGF0YVtkc3RPZmZzZXQgKyAxXSAqIGludkFscGhhKSAvIDI1NSkgfCAwO1xuICAgICAgICAgICAgICAgICAgICBjdXJMYXllci5kYXRhW2RzdE9mZnNldCArIDJdID0gKCgoY29sb3IxICYgMHhGRikgKiByZWFsQWxwaGEgKyB1bmRvRGF0YVtkc3RPZmZzZXQgKyAyXSAqIGludkFscGhhKSAvIDI1NSkgfCAwO1xuICAgICAgICAgICAgICAgICAgICBjdXJMYXllci5kYXRhW2RzdE9mZnNldCArIDNdID0gbmV3QWxwaGE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICBcbiAgICBmdW5jdGlvbiBDUEJydXNoVG9vbFdhdGVyY29sb3IoKSB7XG4gICAgICAgIGNvbnN0XG4gICAgICAgICAgICBXQ01FTU9SWSA9IDUwLFxuICAgICAgICAgICAgV1hNQVhTQU1QTEVSQURJVVMgPSA2NDtcblxuICAgICAgICB2YXJcbiAgICAgICAgICAgIHByZXZpb3VzU2FtcGxlcyA9IFtdO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBdmVyYWdlIG91dCBhIGJ1bmNoIG9mIHNhbXBsZXMgYXJvdW5kIHRoZSBnaXZlbiBwaXhlbCAoeCwgeSkuXG4gICAgICAgICAqIFxuICAgICAgICAgKiBkeCwgZHkgY29udHJvbHMgdGhlIHNwcmVhZCBvZiB0aGUgc2FtcGxlcy5cbiAgICAgICAgICogXG4gICAgICAgICAqIEByZXR1cm5zIENQQ29sb3JGbG9hdFxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gc2FtcGxlQ29sb3IoeCwgeSwgZHgsIGR5KSB7XG4gICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICBzYW1wbGVzID0gW10sXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgbGF5ZXJUb1NhbXBsZSA9IHNhbXBsZUFsbExheWVycyA/IGZ1c2lvbiA6IHRoYXQuZ2V0QWN0aXZlTGF5ZXIoKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgeCA9IHggfCAwO1xuICAgICAgICAgICAgeSA9IHkgfCAwO1xuXG4gICAgICAgICAgICBzYW1wbGVzLnB1c2goQ1BDb2xvckZsb2F0LmNyZWF0ZUZyb21JbnQobGF5ZXJUb1NhbXBsZS5nZXRQaXhlbCh4LCB5KSkpO1xuXG4gICAgICAgICAgICBmb3IgKHZhciByID0gMC4yNTsgciA8IDEuMDAxOyByICs9IC4yNSkge1xuICAgICAgICAgICAgICAgIHNhbXBsZXMucHVzaChDUENvbG9yRmxvYXQuY3JlYXRlRnJvbUludChsYXllclRvU2FtcGxlLmdldFBpeGVsKH5+KHggKyByICogZHgpLCB5KSkpO1xuICAgICAgICAgICAgICAgIHNhbXBsZXMucHVzaChDUENvbG9yRmxvYXQuY3JlYXRlRnJvbUludChsYXllclRvU2FtcGxlLmdldFBpeGVsKH5+KHggLSByICogZHgpLCB5KSkpO1xuICAgICAgICAgICAgICAgIHNhbXBsZXMucHVzaChDUENvbG9yRmxvYXQuY3JlYXRlRnJvbUludChsYXllclRvU2FtcGxlLmdldFBpeGVsKHgsIH5+KHkgKyByICogZHkpKSkpO1xuICAgICAgICAgICAgICAgIHNhbXBsZXMucHVzaChDUENvbG9yRmxvYXQuY3JlYXRlRnJvbUludChsYXllclRvU2FtcGxlLmdldFBpeGVsKHgsIH5+KHkgLSByICogZHkpKSkpO1xuXG4gICAgICAgICAgICAgICAgc2FtcGxlcy5wdXNoKENQQ29sb3JGbG9hdC5jcmVhdGVGcm9tSW50KGxheWVyVG9TYW1wbGUuZ2V0UGl4ZWwofn4oeCArIHIgKiAwLjcgKiBkeCksIH5+KHkgKyByICogMC43ICogZHkpKSkpO1xuICAgICAgICAgICAgICAgIHNhbXBsZXMucHVzaChDUENvbG9yRmxvYXQuY3JlYXRlRnJvbUludChsYXllclRvU2FtcGxlLmdldFBpeGVsKH5+KHggKyByICogMC43ICogZHgpLCB+fih5IC0gciAqIDAuNyAqIGR5KSkpKTtcbiAgICAgICAgICAgICAgICBzYW1wbGVzLnB1c2goQ1BDb2xvckZsb2F0LmNyZWF0ZUZyb21JbnQobGF5ZXJUb1NhbXBsZS5nZXRQaXhlbCh+fih4IC0gciAqIDAuNyAqIGR4KSwgfn4oeSArIHIgKiAwLjcgKiBkeSkpKSk7XG4gICAgICAgICAgICAgICAgc2FtcGxlcy5wdXNoKENQQ29sb3JGbG9hdC5jcmVhdGVGcm9tSW50KGxheWVyVG9TYW1wbGUuZ2V0UGl4ZWwofn4oeCAtIHIgKiAwLjcgKiBkeCksIH5+KHkgLSByICogMC43ICogZHkpKSkpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICBhdmVyYWdlID0gbmV3IENQQ29sb3JGbG9hdCgwLCAwLCAwKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzYW1wbGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgICAgIHNhbXBsZSA9IHNhbXBsZXNbaV07XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgYXZlcmFnZS5yICs9IHNhbXBsZS5yO1xuICAgICAgICAgICAgICAgIGF2ZXJhZ2UuZyArPSBzYW1wbGUuZztcbiAgICAgICAgICAgICAgICBhdmVyYWdlLmIgKz0gc2FtcGxlLmI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGF2ZXJhZ2UuciAvPSBzYW1wbGVzLmxlbmd0aDtcbiAgICAgICAgICAgIGF2ZXJhZ2UuZyAvPSBzYW1wbGVzLmxlbmd0aDtcbiAgICAgICAgICAgIGF2ZXJhZ2UuYiAvPSBzYW1wbGVzLmxlbmd0aDtcblxuICAgICAgICAgICAgcmV0dXJuIGF2ZXJhZ2U7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIEJsZW5kIHRoZSBicnVzaCBzdHJva2Ugd2l0aCBmdWxsIGNvbG9yIGludG8gdGhlIG9wYWNpdHlCdWZmZXJcbiAgICAgICAgZnVuY3Rpb24gcGFpbnREaXJlY3Qoc3JjUmVjdCwgZHN0UmVjdCwgYnJ1c2gsIGJydXNoV2lkdGgsIGFscGhhLCBjb2xvcjEpIHtcbiAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgIG9wYWNpdHlEYXRhID0gb3BhY2l0eUJ1ZmZlci5kYXRhLFxuXG4gICAgICAgICAgICAgICAgYnkgPSBzcmNSZWN0LnRvcDtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZm9yICh2YXIgeSA9IGRzdFJlY3QudG9wOyB5IDwgZHN0UmVjdC5ib3R0b207IHkrKywgYnkrKykge1xuICAgICAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgICAgICBzcmNPZmZzZXQgPSBzcmNSZWN0LmxlZnQgKyBieSAqIGJydXNoV2lkdGgsXG4gICAgICAgICAgICAgICAgICAgIGRzdE9mZnNldCA9IG9wYWNpdHlCdWZmZXIub2Zmc2V0T2ZQaXhlbChkc3RSZWN0LmxlZnQsIHkpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGZvciAodmFyIHggPSBkc3RSZWN0LmxlZnQ7IHggPCBkc3RSZWN0LnJpZ2h0OyB4KyssIHNyY09mZnNldCsrLCBkc3RPZmZzZXQrKykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgXG4gICAgICAgICAgICAgICAgICAgICAgICBhbHBoYTEgPSAoKGJydXNoW3NyY09mZnNldF0gJiAweGZmKSAqIGFscGhhIC8gMjU1KSB8IDA7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAoYWxwaGExIDw9IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjIgPSBvcGFjaXR5RGF0YVtkc3RPZmZzZXRdLFxuICAgICAgICAgICAgICAgICAgICAgICAgYWxwaGEyID0gY29sb3IyID4+PiAyNCxcblxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3QWxwaGEgPSAoYWxwaGExICsgYWxwaGEyIC0gYWxwaGExICogYWxwaGEyIC8gMjU1KSB8IDA7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAobmV3QWxwaGEgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhbEFscGhhID0gKGFscGhhMSAqIDI1NSAvIG5ld0FscGhhKSB8IDAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW52QWxwaGEgPSAyNTUgLSByZWFsQWxwaGE7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoZSB1c3VhbCBhbHBoYSBibGVuZGluZyBmb3JtdWxhIEMgPSBBICogYWxwaGEgKyBCICogKDEgLSBhbHBoYSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGhhcyB0byByZXdyaXR0ZW4gaW4gdGhlIGZvcm0gQyA9IEEgKyAoMSAtIGFscGhhKSAqIEIgLSAoMSAtIGFscGhhKSAqQVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhhdCB3YXkgdGhlIHJvdW5kaW5nIHVwIGVycm9ycyB3b24ndCBjYXVzZSBwcm9ibGVtc1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3Q29sb3IgPSBuZXdBbHBoYSA8PCAyNFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICgoY29sb3IxID4+PiAxNiAmIDB4ZmYpICsgKCgoY29sb3IyID4+PiAxNiAmIDB4ZmYpICogaW52QWxwaGEgLSAoY29sb3IxID4+PiAxNiAmIDB4ZmYpICogaW52QWxwaGEpIC8gMjU1KSkgPDwgMTZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAoKGNvbG9yMSA+Pj4gOCAmIDB4ZmYpICsgKCgoY29sb3IyID4+PiA4ICYgMHhmZikgKiBpbnZBbHBoYSAtIChjb2xvcjEgPj4+IDggJiAweGZmKSAqIGludkFscGhhKSAvIDI1NSkpIDw8IDhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAoKGNvbG9yMSAmIDB4ZmYpICsgKCgoY29sb3IyICYgMHhmZikgKiBpbnZBbHBoYSAtIChjb2xvcjEgJiAweGZmKSAqIGludkFscGhhKSAvIDI1NSkpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBvcGFjaXR5RGF0YVtkc3RPZmZzZXRdID0gbmV3Q29sb3I7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHRoaXMuYmVnaW5TdHJva2UgPSBmdW5jdGlvbih4LCB5LCBwcmVzc3VyZSkge1xuICAgICAgICAgICAgcHJldmlvdXNTYW1wbGVzID0gbnVsbDtcblxuICAgICAgICAgICAgQ1BCcnVzaFRvb2xEaXJlY3RCcnVzaC5wcm90b3R5cGUuYmVnaW5TdHJva2UuY2FsbCh0aGlzLCB4LCB5LCBwcmVzc3VyZSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5wYWludERhYkltcGxlbWVudGF0aW9uID0gZnVuY3Rpb24oc3JjUmVjdCwgZHN0UmVjdCwgZGFiKSB7XG4gICAgICAgICAgICBpZiAocHJldmlvdXNTYW1wbGVzID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAvLyBTZWVkIHRoZSBwcmV2aW91c1NhbXBsZXMgbGlzdCB0byBjYXBhY2l0eSB3aXRoIGEgYnVuY2ggb2YgY29waWVzIG9mIG9uZSBzYW1wbGUgdG8gZ2V0IHVzIHN0YXJ0ZWRcbiAgICAgICAgICAgICAgICB2YXIgXG4gICAgICAgICAgICAgICAgICAgIHN0YXJ0Q29sb3IgPSBzYW1wbGVDb2xvcihcbiAgICAgICAgICAgICAgICAgICAgICAgIH5+KChkc3RSZWN0LmxlZnQgKyBkc3RSZWN0LnJpZ2h0KSAvIDIpLFxuICAgICAgICAgICAgICAgICAgICAgICAgfn4oKGRzdFJlY3QudG9wICsgZHN0UmVjdC5ib3R0b20pIC8gMiksIFxuICAgICAgICAgICAgICAgICAgICAgICAgTWF0aC5tYXgoMSwgTWF0aC5taW4oV1hNQVhTQU1QTEVSQURJVVMsIGRzdFJlY3QuZ2V0V2lkdGgoKSAqIDIgLyA2KSksIFxuICAgICAgICAgICAgICAgICAgICAgICAgTWF0aC5tYXgoMSwgTWF0aC5taW4oV1hNQVhTQU1QTEVSQURJVVMsIGRzdFJlY3QuZ2V0SGVpZ2h0KCkgKiAyIC8gNikpXG4gICAgICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICBwcmV2aW91c1NhbXBsZXMgPSBbXTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IFdDTUVNT1JZOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgcHJldmlvdXNTYW1wbGVzLnB1c2goc3RhcnRDb2xvcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICB2YXIgXG4gICAgICAgICAgICAgICAgd2NDb2xvciA9IG5ldyBDUENvbG9yRmxvYXQoMCwgMCwgMCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcHJldmlvdXNTYW1wbGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgICAgIHNhbXBsZSA9IHByZXZpb3VzU2FtcGxlc1tpXTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB3Y0NvbG9yLnIgKz0gc2FtcGxlLnI7XG4gICAgICAgICAgICAgICAgd2NDb2xvci5nICs9IHNhbXBsZS5nO1xuICAgICAgICAgICAgICAgIHdjQ29sb3IuYiArPSBzYW1wbGUuYjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHdjQ29sb3IuciAvPSBwcmV2aW91c1NhbXBsZXMubGVuZ3RoO1xuICAgICAgICAgICAgd2NDb2xvci5nIC89IHByZXZpb3VzU2FtcGxlcy5sZW5ndGg7XG4gICAgICAgICAgICB3Y0NvbG9yLmIgLz0gcHJldmlvdXNTYW1wbGVzLmxlbmd0aDtcblxuICAgICAgICAgICAgLy8gcmVzYXR1cmF0aW9uXG4gICAgICAgICAgICB3Y0NvbG9yLm1peFdpdGgoQ1BDb2xvckZsb2F0LmNyZWF0ZUZyb21JbnQoY3VyQ29sb3IpLCBjdXJCcnVzaC5yZXNhdCAqIGN1ckJydXNoLnJlc2F0KTtcblxuICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgbmV3Q29sb3IgPSB3Y0NvbG9yLnRvSW50KCk7XG5cbiAgICAgICAgICAgIC8vIGJsZWVkXG4gICAgICAgICAgICB3Y0NvbG9yLm1peFdpdGgoXG4gICAgICAgICAgICAgICAgc2FtcGxlQ29sb3IoXG4gICAgICAgICAgICAgICAgICAgIChkc3RSZWN0LmxlZnQgKyBkc3RSZWN0LnJpZ2h0KSAvIDIsXG4gICAgICAgICAgICAgICAgICAgIChkc3RSZWN0LnRvcCArIGRzdFJlY3QuYm90dG9tKSAvIDIsXG4gICAgICAgICAgICAgICAgICAgIE1hdGgubWF4KDEsIE1hdGgubWluKFdYTUFYU0FNUExFUkFESVVTLCBkc3RSZWN0LmdldFdpZHRoKCkgKiAyIC8gNikpLFxuICAgICAgICAgICAgICAgICAgICBNYXRoLm1heCgxLCBNYXRoLm1pbihXWE1BWFNBTVBMRVJBRElVUywgZHN0UmVjdC5nZXRIZWlnaHQoKSAqIDIgLyA2KSlcbiAgICAgICAgICAgICAgICApLCBcbiAgICAgICAgICAgICAgICBjdXJCcnVzaC5ibGVlZFxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgcHJldmlvdXNTYW1wbGVzLnB1c2god2NDb2xvcik7XG4gICAgICAgICAgICBwcmV2aW91c1NhbXBsZXMuc2hpZnQoKTtcblxuICAgICAgICAgICAgcGFpbnREaXJlY3Qoc3JjUmVjdCwgZHN0UmVjdCwgZGFiLmJydXNoLCBkYWIud2lkdGgsIE1hdGgubWF4KDEsIGRhYi5hbHBoYSAvIDQpLCBuZXdDb2xvcik7XG4gICAgICAgICAgICBtZXJnZU9wYWNpdHlCdWZmZXIoMCwgZmFsc2UpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoc2FtcGxlQWxsTGF5ZXJzKSB7XG4gICAgICAgICAgICAgICAgdGhhdC5mdXNpb25MYXllcnMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9XG4gICAgXG4gICAgQ1BCcnVzaFRvb2xXYXRlcmNvbG9yLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoQ1BCcnVzaFRvb2xEaXJlY3RCcnVzaC5wcm90b3R5cGUpO1xuICAgIENQQnJ1c2hUb29sV2F0ZXJjb2xvci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBDUEJydXNoVG9vbFdhdGVyY29sb3I7XG4gICAgXG4gICAgZnVuY3Rpb24gQ1BCcnVzaFRvb2xPaWwoKSB7XG5cbiAgICAgICAgZnVuY3Rpb24gb2lsQWNjdW1CdWZmZXIoc3JjUmVjdCwgZHN0UmVjdCwgYnVmZmVyLCB3LCBhbHBoYSkge1xuICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgbGF5ZXJUb1NhbXBsZSA9IHNhbXBsZUFsbExheWVycyA/IGZ1c2lvbiA6IHRoYXQuZ2V0QWN0aXZlTGF5ZXIoKSxcblxuICAgICAgICAgICAgICAgIGJ5ID0gc3JjUmVjdC50b3A7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGZvciAodmFyIHkgPSBkc3RSZWN0LnRvcDsgeSA8IGRzdFJlY3QuYm90dG9tOyB5KyssIGJ5KyspIHtcbiAgICAgICAgICAgICAgICB2YXIgXG4gICAgICAgICAgICAgICAgICAgIHNyY09mZnNldCA9IHNyY1JlY3QubGVmdCArIGJ5ICogdyxcbiAgICAgICAgICAgICAgICAgICAgZHN0T2Zmc2V0ID0gbGF5ZXJUb1NhbXBsZS5vZmZzZXRPZlBpeGVsKGRzdFJlY3QubGVmdCwgeSk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgeCA9IGRzdFJlY3QubGVmdDsgeCA8IGRzdFJlY3QucmlnaHQ7IHgrKywgc3JjT2Zmc2V0KyssIGRzdE9mZnNldCArPSBDUENvbG9yQm1wLkJZVEVTX1BFUl9QSVhFTCkge1xuICAgICAgICAgICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFscGhhMSA9IChsYXllclRvU2FtcGxlLmRhdGFbZHN0T2Zmc2V0ICsgQ1BDb2xvckJtcC5BTFBIQV9CWVRFX09GRlNFVF0gKiBhbHBoYSAvIDI1NSkgfCAwO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFscGhhMSA8PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgICAgICAgICAgY29sb3IyID0gYnVmZmVyW3NyY09mZnNldF0sXG4gICAgICAgICAgICAgICAgICAgICAgICBhbHBoYTIgPSBjb2xvcjIgPj4+IDI0LFxuXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdBbHBoYSA9IChhbHBoYTEgKyBhbHBoYTIgLSBhbHBoYTEgKiBhbHBoYTIgLyAyNTUpIHwgMDtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGlmIChuZXdBbHBoYSA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFsQWxwaGEgPSAoYWxwaGExICogMjU1IC8gbmV3QWxwaGEpIHwgMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnZBbHBoYSA9IDI1NSAtIHJlYWxBbHBoYSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjFSZWQgPSBsYXllclRvU2FtcGxlLmRhdGFbZHN0T2Zmc2V0ICsgQ1BDb2xvckJtcC5SRURfQllURV9PRkZTRVRdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yMUdyZWVuID0gbGF5ZXJUb1NhbXBsZS5kYXRhW2RzdE9mZnNldCArIENQQ29sb3JCbXAuR1JFRU5fQllURV9PRkZTRVRdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yMUJsdWUgPSBsYXllclRvU2FtcGxlLmRhdGFbZHN0T2Zmc2V0ICsgQ1BDb2xvckJtcC5CTFVFX0JZVEVfT0ZGU0VUXSxcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld0NvbG9yID0gbmV3QWxwaGEgPDwgMjRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAoY29sb3IxUmVkICsgKCgoY29sb3IyID4+PiAxNiAmIDB4ZmYpICogaW52QWxwaGEgLSBjb2xvcjFSZWQgKiBpbnZBbHBoYSkgLyAyNTUpKSA8PCAxNlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IChjb2xvcjFHcmVlbiArICgoKGNvbG9yMiA+Pj4gOCAmIDB4ZmYpICogaW52QWxwaGEgLSBjb2xvcjFHcmVlbiAqIGludkFscGhhKSAvIDI1NSkpIDw8IDhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAoY29sb3IxQmx1ZSArICgoKGNvbG9yMiAmIDB4ZmYpICogaW52QWxwaGEgLSBjb2xvcjFCbHVlICogaW52QWxwaGEpIC8gMjU1KSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1ZmZlcltzcmNPZmZzZXRdID0gbmV3Q29sb3I7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBvaWxSZXNhdEJ1ZmZlcihzcmNSZWN0LCBkc3RSZWN0LCBidWZmZXIsIHcsIGFscGhhMSwgY29sb3IxKSB7XG4gICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICBieSA9IHNyY1JlY3QudG9wO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoYWxwaGExIDw9IDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGZvciAodmFyIHkgPSBkc3RSZWN0LnRvcDsgeSA8IGRzdFJlY3QuYm90dG9tOyB5KyssIGJ5KyspIHtcbiAgICAgICAgICAgICAgICB2YXIgXG4gICAgICAgICAgICAgICAgICAgIHNyY09mZnNldCA9IHNyY1JlY3QubGVmdCArIGJ5ICogdztcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBmb3IgKHZhciB4ID0gZHN0UmVjdC5sZWZ0OyB4IDwgZHN0UmVjdC5yaWdodDsgeCsrLCBzcmNPZmZzZXQrKykge1xuICAgICAgICAgICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yMiA9IGJ1ZmZlcltzcmNPZmZzZXRdLFxuICAgICAgICAgICAgICAgICAgICAgICAgYWxwaGEyID0gKGNvbG9yMiA+Pj4gMjQpLFxuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3QWxwaGEgPSAoYWxwaGExICsgYWxwaGEyIC0gYWxwaGExICogYWxwaGEyIC8gMjU1KSB8IDA7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAobmV3QWxwaGEgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhbEFscGhhID0gKGFscGhhMSAqIDI1NSAvIG5ld0FscGhhKSB8IDAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW52QWxwaGEgPSAyNTUgLSByZWFsQWxwaGEsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3Q29sb3IgPSBuZXdBbHBoYSA8PCAyNFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICgoY29sb3IxID4+PiAxNiAmIDB4ZmYpICsgKCgoY29sb3IyID4+PiAxNiAmIDB4ZmYpICogaW52QWxwaGEgLSAoY29sb3IxID4+PiAxNiAmIDB4ZmYpICogaW52QWxwaGEpIC8gMjU1KSkgPDwgMTZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAoKGNvbG9yMSA+Pj4gOCAmIDB4ZmYpICsgKCgoY29sb3IyID4+PiA4ICYgMHhmZikgKiBpbnZBbHBoYSAtIChjb2xvcjEgPj4+IDggJiAweGZmKSAqIGludkFscGhhKSAvIDI1NSkpIDw8IDhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAoKGNvbG9yMSAmIDB4ZmYpICsgKCgoY29sb3IyICYgMHhmZikgKiBpbnZBbHBoYSAtIChjb2xvcjEgJiAweGZmKSAqIGludkFscGhhKSAvIDI1NSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBidWZmZXJbc3JjT2Zmc2V0XSA9IG5ld0NvbG9yO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gb2lsUGFzdGVCdWZmZXIoc3JjUmVjdCwgZHN0UmVjdCwgYnVmZmVyLCBicnVzaCwgdywgYWxwaGEpIHtcbiAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgIG9wYWNpdHlEYXRhID0gb3BhY2l0eUJ1ZmZlci5kYXRhLFxuICAgIFxuICAgICAgICAgICAgICAgIGJ5ID0gc3JjUmVjdC50b3A7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGZvciAodmFyIHkgPSBkc3RSZWN0LnRvcDsgeSA8IGRzdFJlY3QuYm90dG9tOyB5KyssIGJ5KyspIHtcbiAgICAgICAgICAgICAgICB2YXIgXG4gICAgICAgICAgICAgICAgICAgIGJ1ZmZlck9mZnNldCA9IHNyY1JlY3QubGVmdCArIGJ5ICogdywgLy8gQnJ1c2ggYnVmZmVyIGlzIDEgaW50ZWdlciBwZXIgcGl4ZWxcbiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eU9mZnNldCA9IGRzdFJlY3QubGVmdCArIHkgKiB0aGF0LndpZHRoLCAvLyBPcGFjaXR5IGJ1ZmZlciBpcyAxIGludGVnZXIgcGVyIHBpeGVsXG4gICAgICAgICAgICAgICAgICAgIGxheWVyT2Zmc2V0ID0gY3VyTGF5ZXIub2Zmc2V0T2ZQaXhlbChkc3RSZWN0LmxlZnQsIHkpOyAvLyA0IGJ5dGVzIHBlciBwaXhlbCBcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBmb3IgKHZhciB4ID0gZHN0UmVjdC5sZWZ0OyB4IDwgZHN0UmVjdC5yaWdodDsgeCsrLCBidWZmZXJPZmZzZXQrKywgbGF5ZXJPZmZzZXQgKz0gQ1BDb2xvckJtcC5CWVRFU19QRVJfUElYRUwsIG9wYWNpdHlPZmZzZXQrKykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjEgPSBidWZmZXJbYnVmZmVyT2Zmc2V0XSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGFscGhhMSA9ICgoY29sb3IxID4+PiAyNCkgKiAoYnJ1c2hbYnVmZmVyT2Zmc2V0XSAmIDB4ZmYpICogYWxwaGEgLyAoMjU1ICogMjU1KSkgfCAwO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFscGhhMSA8PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgICAgICAgICAgYWxwaGEyID0gY3VyTGF5ZXIuZGF0YVtsYXllck9mZnNldCArIENQQ29sb3JCbXAuQUxQSEFfQllURV9PRkZTRVRdLFxuXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdBbHBoYSA9IChhbHBoYTEgKyBhbHBoYTIgLSBhbHBoYTEgKiBhbHBoYTIgLyAyNTUpIHwgMDtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGlmIChuZXdBbHBoYSA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjJSZWQgPSBjdXJMYXllci5kYXRhW2xheWVyT2Zmc2V0ICsgQ1BDb2xvckJtcC5SRURfQllURV9PRkZTRVRdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yMkdyZWVuID0gY3VyTGF5ZXIuZGF0YVtsYXllck9mZnNldCArIENQQ29sb3JCbXAuR1JFRU5fQllURV9PRkZTRVRdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yMkJsdWUgPSBjdXJMYXllci5kYXRhW2xheWVyT2Zmc2V0ICsgQ1BDb2xvckJtcC5CTFVFX0JZVEVfT0ZGU0VUXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFsQWxwaGEgPSAoYWxwaGExICogMjU1IC8gbmV3QWxwaGEpIHwgMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnZBbHBoYSA9IDI1NSAtIHJlYWxBbHBoYSxcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld0NvbG9yID0gbmV3QWxwaGEgPDwgMjRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAoKGNvbG9yMSA+Pj4gMTYgJiAweGZmKSArICgoY29sb3IyUmVkICogaW52QWxwaGEgLSAoY29sb3IxID4+PiAxNiAmIDB4ZmYpICogaW52QWxwaGEpIC8gMjU1KSkgPDwgMTZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAoKGNvbG9yMSA+Pj4gOCAmIDB4ZmYpICsgKChjb2xvcjJHcmVlbiAqIGludkFscGhhIC0gKGNvbG9yMSA+Pj4gOCAmIDB4ZmYpICogaW52QWxwaGEpIC8gMjU1KSkgPDwgOFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICgoY29sb3IxICYgMHhmZikgKyAoKGNvbG9yMkJsdWUgKiBpbnZBbHBoYSAtIChjb2xvcjEgJiAweGZmKSAqIGludkFscGhhKSAvIDI1NSkpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBvcGFjaXR5RGF0YVtvcGFjaXR5T2Zmc2V0XSA9IG5ld0NvbG9yO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICB0aGlzLnBhaW50RGFiSW1wbGVtZW50YXRpb24gPSBmdW5jdGlvbihzcmNSZWN0LCBkc3RSZWN0LCBkYWIpIHtcbiAgICAgICAgICAgIGlmIChicnVzaEJ1ZmZlciA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgYnJ1c2hCdWZmZXIgPSBuZXcgVWludDMyQXJyYXkoZGFiLndpZHRoICogZGFiLmhlaWdodCk7IC8vIEluaXRpYWxpemVkIHRvIDAgZm9yIHVzIGJ5IHRoZSBicm93c2VyXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgb2lsQWNjdW1CdWZmZXIoc3JjUmVjdCwgZHN0UmVjdCwgYnJ1c2hCdWZmZXIsIGRhYi53aWR0aCwgMjU1KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgb2lsUmVzYXRCdWZmZXIoc3JjUmVjdCwgZHN0UmVjdCwgYnJ1c2hCdWZmZXIsIGRhYi53aWR0aCwgfn4oKGN1ckJydXNoLnJlc2F0IDw9IDAuMCkgPyAwIDogTWF0aC5tYXgoMSwgKGN1ckJydXNoLnJlc2F0ICogY3VyQnJ1c2gucmVzYXQpICogMjU1KSksIGN1ckNvbG9yICYgMHhGRkZGRkYpO1xuICAgICAgICAgICAgICAgIG9pbFBhc3RlQnVmZmVyKHNyY1JlY3QsIGRzdFJlY3QsIGJydXNoQnVmZmVyLCBkYWIuYnJ1c2gsIGRhYi53aWR0aCwgZGFiLmFscGhhKTtcbiAgICAgICAgICAgICAgICBvaWxBY2N1bUJ1ZmZlcihzcmNSZWN0LCBkc3RSZWN0LCBicnVzaEJ1ZmZlciwgZGFiLndpZHRoLCB+fihjdXJCcnVzaC5ibGVlZCAqIDI1NSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBtZXJnZU9wYWNpdHlCdWZmZXIoMCwgZmFsc2UpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoc2FtcGxlQWxsTGF5ZXJzKSB7XG4gICAgICAgICAgICAgICAgdGhhdC5mdXNpb25MYXllcnMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9XG4gICAgXG4gICAgQ1BCcnVzaFRvb2xPaWwucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShDUEJydXNoVG9vbERpcmVjdEJydXNoLnByb3RvdHlwZSk7XG4gICAgQ1BCcnVzaFRvb2xPaWwucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gQ1BCcnVzaFRvb2xPaWw7XG4gICAgXG4gICAgZnVuY3Rpb24gQ1BCcnVzaFRvb2xTbXVkZ2UoKSB7XG4gICAgICAgIFxuICAgICAgICAvKipcbiAgICAgICAgICogXG4gICAgICAgICAqIEBwYXJhbSBzcmNSZWN0XG4gICAgICAgICAqIEBwYXJhbSBkc3RSZWN0XG4gICAgICAgICAqIEBwYXJhbSBidWZmZXIgVWludDMyQXJyYXlcbiAgICAgICAgICogQHBhcmFtIHcgaW50XG4gICAgICAgICAqIEBwYXJhbSBhbHBoYSBpbnRcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIHNtdWRnZUFjY3VtQnVmZmVyKHNyY1JlY3QsIGRzdFJlY3QsIGJ1ZmZlciwgdywgYWxwaGEpIHtcbiAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgIGxheWVyVG9TYW1wbGUgPSBzYW1wbGVBbGxMYXllcnMgPyBmdXNpb24gOiB0aGF0LmdldEFjdGl2ZUxheWVyKCksXG5cbiAgICAgICAgICAgICAgICBieSA9IHNyY1JlY3QudG9wO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBmb3IgKHZhciB5ID0gZHN0UmVjdC50b3A7IHkgPCBkc3RSZWN0LmJvdHRvbTsgeSsrLCBieSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgICAgIHNyY09mZnNldCA9IHNyY1JlY3QubGVmdCArIGJ5ICogdyxcbiAgICAgICAgICAgICAgICAgICAgZHN0T2Zmc2V0ID0gbGF5ZXJUb1NhbXBsZS5vZmZzZXRPZlBpeGVsKGRzdFJlY3QubGVmdCwgeSk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgeCA9IGRzdFJlY3QubGVmdDsgeCA8IGRzdFJlY3QucmlnaHQ7IHgrKywgc3JjT2Zmc2V0KyssIGRzdE9mZnNldCArPSBDUENvbG9yQm1wLkJZVEVTX1BFUl9QSVhFTCkge1xuICAgICAgICAgICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxheWVyUmVkID0gbGF5ZXJUb1NhbXBsZS5kYXRhW2RzdE9mZnNldCArIENQQ29sb3JCbXAuUkVEX0JZVEVfT0ZGU0VUXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGxheWVyR3JlZW4gPSBsYXllclRvU2FtcGxlLmRhdGFbZHN0T2Zmc2V0ICsgQ1BDb2xvckJtcC5HUkVFTl9CWVRFX09GRlNFVF0sXG4gICAgICAgICAgICAgICAgICAgICAgICBsYXllckJsdWUgPSBsYXllclRvU2FtcGxlLmRhdGFbZHN0T2Zmc2V0ICsgQ1BDb2xvckJtcC5CTFVFX0JZVEVfT0ZGU0VUXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGxheWVyQWxwaGEgPSBsYXllclRvU2FtcGxlLmRhdGFbZHN0T2Zmc2V0ICsgQ1BDb2xvckJtcC5BTFBIQV9CWVRFX09GRlNFVF0sXG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wYWNpdHlBbHBoYSA9IDI1NSAtIGFscGhhO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wYWNpdHlBbHBoYSA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlc3RDb2xvciA9IGJ1ZmZlcltzcmNPZmZzZXRdLFxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVzdEFscGhhID0gMjU1LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld0xheWVyQWxwaGEgPSAob3BhY2l0eUFscGhhICsgZGVzdEFscGhhICogKDI1NSAtIG9wYWNpdHlBbHBoYSkgLyAyNTUpIHwgMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFsQWxwaGEgPSAoMjU1ICogb3BhY2l0eUFscGhhIC8gbmV3TGF5ZXJBbHBoYSkgfCAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGludkFscGhhID0gMjU1IC0gcmVhbEFscGhhLFxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3Q29sb3IgPSBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKChsYXllckFscGhhICogcmVhbEFscGhhICsgKGRlc3RDb2xvciA+Pj4gMjQgJiAweGZmKSAqIGludkFscGhhKSAvIDI1NSkgPDwgMjQgJiAweGZmMDAwMDAwXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgKChsYXllclJlZCAqIHJlYWxBbHBoYSArIChkZXN0Q29sb3IgPj4+IDE2ICYgMHhmZikgKiBpbnZBbHBoYSkgLyAyNTUpIDw8IDE2ICYgMHhmZjAwMDBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAoKGxheWVyR3JlZW4gKiByZWFsQWxwaGEgKyAoZGVzdENvbG9yID4+PiA4ICYgMHhmZikgKiBpbnZBbHBoYSkgLyAyNTUpIDw8IDggJiAweGZmMDBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAoKGxheWVyQmx1ZSAqIHJlYWxBbHBoYSArIChkZXN0Q29sb3IgJiAweGZmKSAqIGludkFscGhhKSAvIDI1NSkgJiAweGZmO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobmV3Q29sb3IgPT0gZGVzdENvbG9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGxheWVyUmVkID4gKGRlc3RDb2xvciAmIDB4ZmYwMDAwKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdDb2xvciArPSAxIDw8IDE2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobGF5ZXJSZWQgPCAoZGVzdENvbG9yICYgMHhmZjAwMDApKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld0NvbG9yIC09IDEgPDwgMTY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGxheWVyR3JlZW4+IChkZXN0Q29sb3IgJiAweGZmMDApKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld0NvbG9yICs9IDEgPDwgODtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGxheWVyR3JlZW4gPCAoZGVzdENvbG9yICYgMHhmZjAwKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdDb2xvciAtPSAxIDw8IDg7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGxheWVyQmx1ZSA+IChkZXN0Q29sb3IgJiAweGZmKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdDb2xvciArPSAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobGF5ZXJCbHVlIDwgKGRlc3RDb2xvciAmIDB4ZmYpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld0NvbG9yIC09IDE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBidWZmZXJbc3JjT2Zmc2V0XSA9IG5ld0NvbG9yO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoc3JjUmVjdC5sZWZ0ID4gMCkge1xuICAgICAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgICAgICBmaWxsID0gc3JjUmVjdC5sZWZ0O1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGZvciAodmFyIHkgPSBzcmNSZWN0LnRvcDsgeSA8IHNyY1JlY3QuYm90dG9tOyB5KyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIFxuICAgICAgICAgICAgICAgICAgICAgICAgb2Zmc2V0ID0geSAqIHcsXG4gICAgICAgICAgICAgICAgICAgICAgICBmaWxsQ29sb3IgPSBidWZmZXJbb2Zmc2V0ICsgc3JjUmVjdC5sZWZ0XTtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgZmlsbDsgeCsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBidWZmZXJbb2Zmc2V0KytdID0gZmlsbENvbG9yO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoc3JjUmVjdC5yaWdodCA8IHcpIHtcbiAgICAgICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICAgICAgZmlsbCA9IHcgLSBzcmNSZWN0LnJpZ2h0O1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGZvciAodmFyIHkgPSBzcmNSZWN0LnRvcDsgeSA8IHNyY1JlY3QuYm90dG9tOyB5KyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgICAgICAgICBvZmZzZXQgPSB5ICogdyArIHNyY1JlY3QucmlnaHQsXG4gICAgICAgICAgICAgICAgICAgICAgICBmaWxsQ29sb3IgPSBidWZmZXJbb2Zmc2V0IC0gMV07XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IGZpbGw7IHgrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgYnVmZmVyW29mZnNldCsrXSA9IGZpbGxDb2xvcjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZm9yICh2YXIgeSA9IDA7IHkgPCBzcmNSZWN0LnRvcDsgeSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIFxuICAgICAgICAgICAgICAgICAgICBzcmNPZmZzZXQgPSBzcmNSZWN0LnRvcCAqIHcsXG4gICAgICAgICAgICAgICAgICAgIGRzdE9mZnNldCA9IHkgKiB3O1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgdzsgeCsrLCBzcmNPZmZzZXQrKywgZHN0T2Zmc2V0KyspIHtcbiAgICAgICAgICAgICAgICAgICAgYnVmZmVyW2RzdE9mZnNldF0gPSBidWZmZXJbc3JjT2Zmc2V0XTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGZvciAodmFyIHkgPSBzcmNSZWN0LmJvdHRvbTsgeSA8IHc7IHkrKykge1xuICAgICAgICAgICAgICAgIHZhciBcbiAgICAgICAgICAgICAgICAgICAgc3JjT2Zmc2V0ID0gKHNyY1JlY3QuYm90dG9tIC0gMSkgKiB3LFxuICAgICAgICAgICAgICAgICAgICBkc3RPZmZzZXQgPSB5ICogdztcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IHc7IHgrKywgc3JjT2Zmc2V0KyssIGRzdE9mZnNldCsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGJ1ZmZlcltkc3RPZmZzZXRdID0gYnVmZmVyW3NyY09mZnNldF07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFxuICAgICAgICAgKiBAcGFyYW0gc3JjUmVjdCBDUFJlY3RcbiAgICAgICAgICogQHBhcmFtIGRzdFJlY3QgQ1BSZWN0XG4gICAgICAgICAqIEBwYXJhbSBidWZmZXIgVWludDMyQXJyYXlcbiAgICAgICAgICogQHBhcmFtIGJydXNoIFVpbnQ4QXJyYXlcbiAgICAgICAgICogQHBhcmFtIHcgaW50XG4gICAgICAgICAqIEBwYXJhbSBhbHBoYSBpbnRcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIHNtdWRnZVBhc3RlQnVmZmVyKHNyY1JlY3QsIGRzdFJlY3QsIGJ1ZmZlciwgYnJ1c2gsIHcsIGFscGhhKSB7XG4gICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICBieSA9IHNyY1JlY3QudG9wO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBmb3IgKHZhciB5ID0gZHN0UmVjdC50b3A7IHkgPCBkc3RSZWN0LmJvdHRvbTsgeSsrLCBieSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIFxuICAgICAgICAgICAgICAgICAgICBzcmNPZmZzZXQgPSBzcmNSZWN0LmxlZnQgKyBieSAqIHcsXG4gICAgICAgICAgICAgICAgICAgIGRzdE9mZnNldCA9IGN1ckxheWVyLm9mZnNldE9mUGl4ZWwoZHN0UmVjdC5sZWZ0LCB5KTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBmb3IgKHZhciB4ID0gZHN0UmVjdC5sZWZ0OyB4IDwgZHN0UmVjdC5yaWdodDsgeCsrLCBzcmNPZmZzZXQrKywgZHN0T2Zmc2V0ICs9IENQQ29sb3JCbXAuQllURVNfUEVSX1BJWEVMKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgICAgICAgICAgYnVmZmVyQ29sb3IgPSBidWZmZXJbc3JjT2Zmc2V0XSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wYWNpdHlBbHBoYSA9IChidWZmZXJDb2xvciA+Pj4gMjQpICogKGJydXNoW3NyY09mZnNldF0gJiAweGZmKSAvIDI1NTtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcGFjaXR5QWxwaGEgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJMYXllci5kYXRhW2RzdE9mZnNldCArIENQQ29sb3JCbXAuUkVEX0JZVEVfT0ZGU0VUXSA9IChidWZmZXJDb2xvciA+PiAxNikgJiAweGZmO1xuICAgICAgICAgICAgICAgICAgICAgICAgY3VyTGF5ZXIuZGF0YVtkc3RPZmZzZXQgKyBDUENvbG9yQm1wLkdSRUVOX0JZVEVfT0ZGU0VUXSA9IChidWZmZXJDb2xvciA+PiA4KSAmIDB4ZmY7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJMYXllci5kYXRhW2RzdE9mZnNldCArIENQQ29sb3JCbXAuQkxVRV9CWVRFX09GRlNFVF0gPSBidWZmZXJDb2xvciAmIDB4ZmY7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJMYXllci5kYXRhW2RzdE9mZnNldCArIENQQ29sb3JCbXAuQUxQSEFfQllURV9PRkZTRVRdID0gKGJ1ZmZlckNvbG9yID4+IDI0KSAmIDB4ZmY7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcGFyYW0gc3JjUmVjdCBDUFJlY3RcbiAgICAgICAgICogQHBhcmFtIGRzdFJlY3QgQ1BSZWN0XG4gICAgICAgICAqIEBwYXJhbSBkYWIgQ1BCcnVzaERhYlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5wYWludERhYkltcGxlbWVudGF0aW9uID0gZnVuY3Rpb24oc3JjUmVjdCwgZHN0UmVjdCwgZGFiKSB7XG4gICAgICAgICAgICBpZiAoYnJ1c2hCdWZmZXIgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGJydXNoQnVmZmVyID0gbmV3IFVpbnQzMkFycmF5KGRhYi53aWR0aCAqIGRhYi5oZWlnaHQpO1xuICAgICAgICAgICAgICAgIHNtdWRnZUFjY3VtQnVmZmVyKHNyY1JlY3QsIGRzdFJlY3QsIGJydXNoQnVmZmVyLCBkYWIud2lkdGgsIDApO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBzbXVkZ2VBY2N1bUJ1ZmZlcihzcmNSZWN0LCBkc3RSZWN0LCBicnVzaEJ1ZmZlciwgZGFiLndpZHRoLCBkYWIuYWxwaGEpO1xuICAgICAgICAgICAgICAgIHNtdWRnZVBhc3RlQnVmZmVyKHNyY1JlY3QsIGRzdFJlY3QsIGJydXNoQnVmZmVyLCBkYWIuYnJ1c2gsIGRhYi53aWR0aCwgZGFiLmFscGhhKTtcblxuICAgICAgICAgICAgICAgIGlmIChsb2NrQWxwaGEpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzdG9yZUFscGhhKGRzdFJlY3QpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgb3BhY2l0eUFyZWEubWFrZUVtcHR5KCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChzYW1wbGVBbGxMYXllcnMpIHtcbiAgICAgICAgICAgICAgICB0aGF0LmZ1c2lvbkxheWVycygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH1cbiAgICBcbiAgICBDUEJydXNoVG9vbFNtdWRnZS5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKENQQnJ1c2hUb29sRGlyZWN0QnJ1c2gucHJvdG90eXBlKTtcbiAgICBDUEJydXNoVG9vbFNtdWRnZS5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBDUEJydXNoVG9vbFNtdWRnZTtcblxuICAgIENQQnJ1c2hUb29sU211ZGdlLnByb3RvdHlwZS5tZXJnZU9wYWNpdHlCdWYgPSBmdW5jdGlvbihkc3RSZWN0LCBjb2xvcikge1xuICAgIH07XG4gICAgXG4gICAgdmFyIHBhaW50aW5nTW9kZXMgPSBbXG4gICAgICAgIG5ldyBDUEJydXNoVG9vbFNpbXBsZUJydXNoKCksIG5ldyBDUEJydXNoVG9vbEVyYXNlcigpLCBuZXcgQ1BCcnVzaFRvb2xEb2RnZSgpLFxuICAgICAgICBuZXcgQ1BCcnVzaFRvb2xCdXJuKCksIG5ldyBDUEJydXNoVG9vbFdhdGVyY29sb3IoKSwgbmV3IENQQnJ1c2hUb29sQmx1cigpLCBuZXcgQ1BCcnVzaFRvb2xTbXVkZ2UoKSxcbiAgICAgICAgbmV3IENQQnJ1c2hUb29sT2lsKClcbiAgICBdO1xuICAgIFxuICAgIHRoaXMud2lkdGggPSBfd2lkdGg7XG4gICAgdGhpcy5oZWlnaHQgPSBfaGVpZ2h0O1xuXG4gICAgdGhpcy5nZXREZWZhdWx0TGF5ZXJOYW1lID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhclxuICAgICAgICAgICAgcHJlZml4ID0gXCJMYXllciBcIixcbiAgICAgICAgICAgIGhpZ2hlc3RMYXllck5iID0gMDtcbiAgICAgICAgXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGF5ZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICBsYXllciA9IGxheWVyc1tpXTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKC9eTGF5ZXIgWzAtOV0rJC8udGVzdChsYXllci5uYW1lKSkge1xuICAgICAgICAgICAgICAgIGhpZ2hlc3RMYXllck5iID0gTWF0aC5tYXgoaGlnaGVzdExheWVyTmIsIHBhcnNlSW50KGxheWVyLm5hbWUuc3Vic3RyaW5nKHByZWZpeC5sZW5ndGgpLCAxMCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBwcmVmaXggKyAoaGlnaGVzdExheWVyTmIgKyAxKTtcbiAgICB9O1xuICAgIFxuICAgIGZ1bmN0aW9uIHJlc3RvcmVBbHBoYShyZWN0KSB7XG4gICAgICAgIHRoYXQuZ2V0QWN0aXZlTGF5ZXIoKS5jb3B5QWxwaGFGcm9tKHVuZG9CdWZmZXIsIHJlY3QpO1xuICAgIH1cbiAgICBcbiAgICAvKipcbiAgICAgKiBNZXJnZSB0aGUgb3BhY2l0eSBidWZmZXIgZnJvbSB0aGUgY3VycmVudCBkcmF3aW5nIG9wZXJhdGlvbiB0byB0aGUgYWN0aXZlIGxheWVyLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIG1lcmdlT3BhY2l0eUJ1ZmZlcihjb2xvciwgY2xlYXIpIHtcbiAgICAgICAgaWYgKCFvcGFjaXR5QXJlYS5pc0VtcHR5KCkpIHtcbiAgICAgICAgICAgIGlmIChjdXJCcnVzaC5wYWludE1vZGUgIT0gQ1BCcnVzaEluZm8uTV9FUkFTRSB8fCAhbG9ja0FscGhhKSB7XG4gICAgICAgICAgICAgICAgcGFpbnRpbmdNb2Rlc1tjdXJCcnVzaC5wYWludE1vZGVdLm1lcmdlT3BhY2l0eUJ1ZihvcGFjaXR5QXJlYSwgY29sb3IpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBGSVhNRTogaXQgd291bGQgYmUgbmljZSB0byBiZSBhYmxlIHRvIHNldCB0aGUgcGFwZXIgY29sb3JcbiAgICAgICAgICAgICAgICBwYWludGluZ01vZGVzW0NQQnJ1c2hJbmZvLk1fUEFJTlRdLm1lcmdlT3BhY2l0eUJ1ZihvcGFjaXR5QXJlYSwgRU1QVFlfTEFZRVJfQ09MT1IpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAobG9ja0FscGhhKSB7XG4gICAgICAgICAgICAgICAgcmVzdG9yZUFscGhhKG9wYWNpdHlBcmVhKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGNsZWFyKSB7XG4gICAgICAgICAgICAgICAgb3BhY2l0eUJ1ZmZlci5jbGVhclJlY3Qob3BhY2l0eUFyZWEsIDApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBvcGFjaXR5QXJlYS5tYWtlRW1wdHkoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBcbiAgICB0aGlzLmFkZEJhY2tncm91bmRMYXllciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXJcbiAgICAgICAgICAgIGxheWVyID0gbmV3IENQTGF5ZXIodGhhdC53aWR0aCwgdGhhdC5oZWlnaHQsIHRoaXMuZ2V0RGVmYXVsdExheWVyTmFtZSgpKTtcbiAgICAgICAgXG4gICAgICAgIGxheWVyLmNsZWFyQWxsKEVNUFRZX0JBQ0tHUk9VTkRfQ09MT1IpO1xuICAgICAgICBcbiAgICAgICAgdGhpcy5hZGRMYXllck9iamVjdChsYXllcik7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIE1lcmdlIHRvZ2V0aGVyIHRoZSB2aXNpYmxlIGxheWVycyBhbmQgcmV0dXJuIHRoZSByZXN1bHRpbmcgSW1hZ2VEYXRhIGZvciBkaXNwbGF5IHRvIHRoZSBzY3JlZW4uXG4gICAgICogXG4gICAgICogVGhlIGltYWdlIGlzIGNhY2hlZCwgc28gcmVwZWF0IGNhbGxzIGFyZSBjaGVhcC5cbiAgICAgKi9cbiAgICB0aGlzLmZ1c2lvbkxheWVycyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAvLyBJcyB0aGVyZSBhbnl0aGluZyB0byB1cGRhdGUgZnJvbSBsYXN0IGNhbGw/XG4gICAgICAgIGlmICghZnVzaW9uQXJlYS5pc0VtcHR5KCkpIHtcbiAgICAgICAgICAgIC8vIFRoZSBjdXJyZW50IGJydXNoIHJlbmRlcnMgb3V0IGl0cyBidWZmZXJzIHRvIHRoZSBsYXllciBzdGFjayBmb3IgdXNcbiAgICAgICAgICAgIG1lcmdlT3BhY2l0eUJ1ZmZlcihjdXJDb2xvciwgZmFsc2UpO1xuXG4gICAgICAgICAgICAvLyBJZiB0aGUgZHJhd2luZyBpcyBzaW5nbGUtbGF5ZXJlZCBhbmQgb3BhcXVlLCBqdXN0IHVzZSB0aGUgYm90dG9tLW1vc3QgbGF5ZXIgYXMgb3VyIGZ1c2lvbiwgd2UgZG9uJ3QgbmVlZCB0byBibGVuZCBhbnl0aGluZyFcbiAgICAgICAgICAgIGlmIChsYXllcnMubGVuZ3RoID09IDEgJiYgbGF5ZXJzWzBdLmFscGhhID49IDEwMCAmJiBsYXllcnNbMF0udmlzaWJsZSkge1xuICAgICAgICAgICAgICAgIGZ1c2lvbiA9IGxheWVyc1swXTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gRnVzZSBpbnRvIHRoZSBhY3R1YWwgZnVzaW9uIGJ1ZmZlciBzaW5jZSB3ZSBuZWVkIHRvIGJsZW5kXG4gICAgICAgICAgICAgICAgZnVzaW9uID0gZnVzaW9uQnVmZmVyO1xuXG4gICAgICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgICAgIGZ1c2lvbklzU2VtaVRyYW5zcGFyZW50ID0gdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgZmlyc3QgPSB0cnVlO1xuXG4gICAgICAgICAgICAgICAgbGF5ZXJzLmZvckVhY2goZnVuY3Rpb24gKGxheWVyKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghZmlyc3QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZ1c2lvbklzU2VtaVRyYW5zcGFyZW50ID0gZnVzaW9uSXNTZW1pVHJhbnNwYXJlbnQgJiYgZnVzaW9uLmhhc0FscGhhSW5SZWN0KGZ1c2lvbkFyZWEpO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGxheWVyLnZpc2libGUgJiYgbGF5ZXIuYWxwaGEgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZmlyc3QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaXJzdCA9IGZhbHNlO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGxheWVyLmFscGhhID09IDEwMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBJbnN0ZWFkIG9mIGJsZW5kaW5nIHRoZSBsYXllciBvbnRvIHRoZSBlbXB0eSB0cmFuc3BhcmVudCBmdXNpb24sIHdlIGNhbiBqdXN0IGNvcHkgdGhlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIGxheWVyIGRhdGEgcmlnaHQgaW50byB0aGUgZnVzaW9uLiBUaGlzIHdvcmtzIGZvciBhbGwgb2Ygb3VyIGJsZW5kaW5nIG1vZGVzLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdXNpb24uY29weUJpdG1hcFJlY3QobGF5ZXIsIGZ1c2lvbkFyZWEubGVmdCwgZnVzaW9uQXJlYS50b3AsIGZ1c2lvbkFyZWEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVzaW9uLmNsZWFyUmVjdChmdXNpb25BcmVhLCAweDAwRkZGRkZGKTsgLy8gVHJhbnNwYXJlbnQgd2hpdGVcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgd2UncmUgbWVyZ2luZyBvbnRvIGEgc2VtaS10cmFuc3BhcmVudCBjYW52YXMgdGhlbiB3ZSBuZWVkIHRvIGJsZW5kIG91ciBvcGFjaXR5IHZhbHVlcyBvbnRvIHRoZSBleGlzdGluZyBvbmVzXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZnVzaW9uSXNTZW1pVHJhbnNwYXJlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXllci5mdXNpb25XaXRoRnVsbEFscGhhKGZ1c2lvbiwgZnVzaW9uQXJlYSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE1vc3QgZHJhd2luZ3Mgd2lsbCBlbmQgdXAgaGF2aW5nIDEwMCUgY292ZXJhZ2UgYW5kIHdlIGNhbiBzcGVlZCB0aGluZ3MgdXAgd2l0aCB0aGlzIHZlcnNpb24gaW5zdGVhZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxheWVyLmZ1c2lvbldpdGgoZnVzaW9uLCBmdXNpb25BcmVhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgaWYgKGZpcnN0KSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIERpZG4ndCBkcmF3IGFueSBsYXllcnM/IFdlIGhhdmUgdG8gY2xlYXIgdGhlIGFyZWEsIHRoZW5cbiAgICAgICAgICAgICAgICAgICAgZnVzaW9uLmNsZWFyUmVjdChmdXNpb25BcmVhLCAweDAwRkZGRkZGKTsgLy8gVHJhbnNwYXJlbnQgd2hpdGVcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1c2lvbkFyZWEubWFrZUVtcHR5KCk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHJldHVybiBmdXNpb24uZ2V0SW1hZ2VEYXRhKCk7XG4gICAgfVxuICAgIFxuICAgIHRoaXMuc2V0QWN0aXZlTGF5ZXJJbmRleCA9IGZ1bmN0aW9uKG5ld0luZGV4KSB7XG4gICAgICAgIGlmIChuZXdJbmRleCA8IDAgfHwgbmV3SW5kZXggPj0gbGF5ZXJzLmxlbmd0aCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGN1ckxheWVyICE9IGxheWVyc1tuZXdJbmRleF0pIHtcbiAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgIG9sZEluZGV4ID0gdGhpcy5nZXRBY3RpdmVMYXllckluZGV4KCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGN1ckxheWVyID0gbGF5ZXJzW25ld0luZGV4XTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gV2FzIHRoZSBvbGQgbGF5ZXIgZGVsZXRlZD9cbiAgICAgICAgICAgIGlmIChvbGRJbmRleCA9PSAtMSkge1xuICAgICAgICAgICAgICAgIGNhbGxMaXN0ZW5lcnNMYXllckNoYW5nZSgpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjYWxsTGlzdGVuZXJzTGF5ZXJDaGFuZ2Uob2xkSW5kZXgpOyAvLyBPbGQgbGF5ZXIgaGFzIG5vdyBiZWVuIGRlc2VsZWN0ZWRcbiAgICAgICAgICAgICAgICBjYWxsTGlzdGVuZXJzTGF5ZXJDaGFuZ2UobmV3SW5kZXgpOyAvLyBOZXcgbGF5ZXIgaGFzIG5vdyBiZWVuIHNlbGVjdGVkXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGludmFsaWRhdGVMYXllclVuZG8oKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgXG4gICAgdGhpcy5nZXRBY3RpdmVMYXllckluZGV4ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGF5ZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAobGF5ZXJzW2ldID09IGN1ckxheWVyKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHJldHVybiAtMTtcbiAgICB9O1xuICAgIFxuICAgIC8qXG4gICAgICogR2V0IHRoZSBpbmRleCBvZiB0aGUgdG9wbW9zdCB2aXNpYmxlIGxheWVyLCBvciAwLlxuICAgICAqL1xuICAgIHRoaXMuZ2V0VG9wbW9zdFZpc2libGVMYXllciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBmb3IgKHZhciBpID0gbGF5ZXJzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgICAgICBpZiAobGF5ZXJzW2ldLnZpc2libGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gaTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgcmV0dXJuIDA7XG4gICAgfTtcbiAgICBcbiAgICB0aGlzLmdldExheWVyID0gZnVuY3Rpb24oaSkge1xuICAgICAgICByZXR1cm4gbGF5ZXJzW2ldO1xuICAgIH07XG4gICAgXG4gICAgdGhpcy5nZXRBY3RpdmVMYXllciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gY3VyTGF5ZXI7XG4gICAgfTtcbiAgICBcbiAgICAvL1xuICAgIC8vIFVuZG8gLyBSZWRvXG4gICAgLy9cblxuICAgIGZ1bmN0aW9uIGNhblVuZG8oKSB7XG4gICAgICAgIHJldHVybiB1bmRvTGlzdC5sZW5ndGggPiAwO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNhblJlZG8oKSB7XG4gICAgICAgIHJldHVybiByZWRvTGlzdC5sZW5ndGggPiAwO1xuICAgIH1cbiAgICBcbiAgICB0aGlzLnVuZG8gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKCFjYW5VbmRvKCkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBoYXNVbnNhdmVkQ2hhbmdlcyA9IHRydWU7XG4gICAgICAgIFxuICAgICAgICB2YXJcbiAgICAgICAgICAgIHVuZG8gPSB1bmRvTGlzdC5wb3AoKTtcbiAgICAgICAgXG4gICAgICAgIHVuZG8udW5kbygpO1xuICAgICAgICBcbiAgICAgICAgcmVkb0xpc3QucHVzaCh1bmRvKTtcbiAgICB9XG5cbiAgICB0aGlzLnJlZG8gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKCFjYW5SZWRvKCkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBoYXNVbnNhdmVkQ2hhbmdlcyA9IHRydWU7XG5cbiAgICAgICAgdmFyXG4gICAgICAgICAgICByZWRvID0gcmVkb0xpc3QucG9wKCk7XG4gICAgICAgIFxuICAgICAgICByZWRvLnJlZG8oKTtcbiAgICAgICAgXG4gICAgICAgIHVuZG9MaXN0LnB1c2gocmVkbyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRW5zdXJlcyB0aGF0IHRoZSBzdGF0ZSBvZiB0aGUgY3VycmVudCBsYXllciBoYXMgYmVlbiBzdG9yZWQgaW4gdW5kb0J1ZmZlciBzbyBpdCBjYW4gYmUgdW5kb25lIGxhdGVyLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHByZXBhcmVGb3JMYXllclVuZG8oKSB7XG4gICAgICAgIGlmICghdW5kb0J1ZmZlckludmFsaWRSZWdpb24uaXNFbXB0eSgpKSB7XG4gICAgICAgICAgICAvL2NvbnNvbGUubG9nKFwiQ29weWluZyBcIiArIHVuZG9CdWZmZXJJbnZhbGlkUmVnaW9uICsgXCIgdG8gdGhlIHVuZG8gYnVmZmVyXCIpO1xuICAgICAgICAgICAgdW5kb0J1ZmZlci5jb3B5Qml0bWFwUmVjdChjdXJMYXllciwgdW5kb0J1ZmZlckludmFsaWRSZWdpb24ubGVmdCwgdW5kb0J1ZmZlckludmFsaWRSZWdpb24udG9wLCB1bmRvQnVmZmVySW52YWxpZFJlZ2lvbik7XG4gICAgICAgICAgICB1bmRvQnVmZmVySW52YWxpZFJlZ2lvbi5tYWtlRW1wdHkoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENhbGwgd2hlbiB0aGUgdW5kbyBidWZmZXIgaGFzIGJlY29tZSBjb21wbGV0ZWx5IHdvcnRobGVzcyAoZS5nLiBhZnRlciB0aGUgYWN0aXZlIGxheWVyIGluZGV4IGNoYW5nZXMsIHRoZSB1bmRvXG4gICAgICogYnVmZmVyIHdvbid0IGNvbnRhaW4gYW55IGRhdGEgZnJvbSB0aGUgbmV3IGxheWVyIHRvIGJlZ2luIHdpdGgpLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGludmFsaWRhdGVMYXllclVuZG8oKSB7XG4gICAgICAgIHVuZG9CdWZmZXJJbnZhbGlkUmVnaW9uID0gdGhhdC5nZXRCb3VuZHMoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGUgcmVzdWx0IG9mIHNvbWUgb2Ygb3VyIG9wZXJhdGlvbnMgYXJlbid0IG5lZWRlZCB1bnRpbCBsYXRlciwgc28gd2UgY2FuIGRlZmVyIHRoZW0gdW50aWwgdGhlIHVzZXIgaXMgaWRsZS5cbiAgICAgKlxuICAgICAqIFlvdSBtYXkgY2FsbCB0aGlzIHJvdXRpbmUgYXQgYW55IHRpbWUgKG9yIG5ldmVyLCBpZiB5b3UgbGlrZSkgYXMgYSBoaW50IHRoYXQgdGhlIHVzZXIgaXMgaWRsZSBhbmQgd2Ugc2hvdWxkXG4gICAgICogdHJ5IHRvIHBlcmZvcm0gcGVuZGluZyBvcGVyYXRpb25zIGJlZm9yZSB3ZSB3aWxsIG5lZWQgdG8gYmxvY2sgb24gdGhlaXIgcmVzdWx0cy5cbiAgICAgKi9cbiAgICB0aGlzLnBlcmZvcm1JZGxlVGFza3MgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcHJlcGFyZUZvckxheWVyVW5kbygpO1xuICAgIH07XG5cbiAgICBmdW5jdGlvbiBhZGRVbmRvKHVuZG8pIHtcbiAgICAgICAgaGFzVW5zYXZlZENoYW5nZXMgPSB0cnVlO1xuICAgICAgICBcbiAgICAgICAgaWYgKHVuZG9MaXN0Lmxlbmd0aCA9PSAwIHx8ICF1bmRvTGlzdFt1bmRvTGlzdC5sZW5ndGggLSAxXS5tZXJnZSh1bmRvKSkge1xuICAgICAgICAgICAgaWYgKHVuZG9MaXN0Lmxlbmd0aCA+PSBNQVhfVU5ETykge1xuICAgICAgICAgICAgICAgIHVuZG9MaXN0LnVuc2hpZnQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHVuZG9MaXN0LnB1c2godW5kbyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBUd28gbWVyZ2VkIGNoYW5nZXMgY2FuIG1lYW4gbm8gY2hhbmdlIGF0IGFsbFxuICAgICAgICAgICAgLy8gZG9uJ3QgbGVhdmUgYSB1c2VsZXNzIHVuZG8gaW4gdGhlIGxpc3RcbiAgICAgICAgICAgIGlmICh1bmRvTGlzdFt1bmRvTGlzdC5sZW5ndGggLSAxXS5ub0NoYW5nZSgpKSB7XG4gICAgICAgICAgICAgICAgdW5kb0xpc3QucG9wKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJlZG9MaXN0Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHJlZG9MaXN0ID0gW107XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLmNsZWFySGlzdG9yeSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB1bmRvTGlzdCA9IFtdO1xuICAgICAgICByZWRvTGlzdCA9IFtdO1xuICAgIH07XG4gICAgXG4gICAgdGhpcy5jb2xvclBpY2tlciA9IGZ1bmN0aW9uKHgsIHkpIHtcbiAgICAgICAgLy8gbm90IHJlYWxseSBuZWNlc3NhcnkgYW5kIGNvdWxkIHBvdGVudGlhbGx5IHRoZSByZXBhaW50XG4gICAgICAgIC8vIG9mIHRoZSBjYW52YXMgdG8gbWlzcyB0aGF0IGFyZWFcbiAgICAgICAgLy8gdGhpcy5mdXNpb25MYXllcnMoKTtcblxuICAgICAgICByZXR1cm4gZnVzaW9uLmdldFBpeGVsKH5+eCwgfn55KSAmIDB4RkZGRkZGO1xuICAgIH1cblxuICAgIHRoaXMuc2V0U2VsZWN0aW9uID0gZnVuY3Rpb24ocmVjdCkge1xuICAgICAgICBjdXJTZWxlY3Rpb24uc2V0KHJlY3QpO1xuICAgICAgICBjdXJTZWxlY3Rpb24uY2xpcCh0aGlzLmdldEJvdW5kcygpKTtcbiAgICB9O1xuXG4gICAgdGhpcy5lbXB0eVNlbGVjdGlvbiA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBjdXJTZWxlY3Rpb24ubWFrZUVtcHR5KCk7XG4gICAgfVxuXG4gICAgdGhpcy5mbG9vZEZpbGwgPSBmdW5jdGlvbih4LCB5KSB7XG4gICAgICAgIHByZXBhcmVGb3JMYXllclVuZG8oKTtcbiAgICAgICAgdW5kb0FyZWEgPSB0aGlzLmdldEJvdW5kcygpO1xuXG4gICAgICAgIGN1ckxheWVyLmZsb29kRmlsbCh+fngsIH5+eSwgY3VyQ29sb3IgfCAweGZmMDAwMDAwKTtcblxuICAgICAgICBhZGRVbmRvKG5ldyBDUFVuZG9QYWludCgpKTtcbiAgICAgICAgaW52YWxpZGF0ZUZ1c2lvbigpO1xuICAgIH07XG5cbiAgICB0aGlzLmdyYWRpZW50RmlsbCA9IGZ1bmN0aW9uKGZyb21YLCBmcm9tWSwgdG9YLCB0b1ksIGdyYWRpZW50UG9pbnRzKSB7XG4gICAgICAgIHZhclxuICAgICAgICAgICAgciA9IHRoaXMuZ2V0U2VsZWN0aW9uQXV0b1NlbGVjdCgpO1xuXG4gICAgICAgIHByZXBhcmVGb3JMYXllclVuZG8oKTtcbiAgICAgICAgdW5kb0FyZWEgPSByO1xuXG4gICAgICAgIGN1ckxheWVyLmdyYWRpZW50KHIsIGZyb21YLCBmcm9tWSwgdG9YLCB0b1ksIGdyYWRpZW50UG9pbnRzKTtcblxuICAgICAgICBpZiAobG9ja0FscGhhKSB7XG4gICAgICAgICAgICByZXN0b3JlQWxwaGEocik7XG4gICAgICAgIH1cblxuICAgICAgICBhZGRVbmRvKG5ldyBDUFVuZG9QYWludCgpKTtcbiAgICAgICAgaW52YWxpZGF0ZUZ1c2lvbigpO1xuICAgIH07XG5cbiAgICB0aGlzLmZpbGwgPSBmdW5jdGlvbihjb2xvcikge1xuICAgICAgICB2YXJcbiAgICAgICAgICAgIHIgPSB0aGlzLmdldFNlbGVjdGlvbkF1dG9TZWxlY3QoKTtcblxuICAgICAgICBwcmVwYXJlRm9yTGF5ZXJVbmRvKCk7XG4gICAgICAgIHVuZG9BcmVhID0gcjtcblxuICAgICAgICBjdXJMYXllci5jbGVhclJlY3QociwgY29sb3IpO1xuXG4gICAgICAgIGFkZFVuZG8obmV3IENQVW5kb1BhaW50KCkpO1xuICAgICAgICBpbnZhbGlkYXRlRnVzaW9uKCk7XG4gICAgfTtcblxuICAgIHRoaXMuY2xlYXIgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdGhpcy5maWxsKDB4ZmZmZmZmKTtcbiAgICB9O1xuXG4gICAgdGhpcy5oRmxpcCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXJcbiAgICAgICAgICAgIHIgPSB0aGlzLmdldFNlbGVjdGlvbkF1dG9TZWxlY3QoKTtcblxuICAgICAgICBwcmVwYXJlRm9yTGF5ZXJVbmRvKCk7XG4gICAgICAgIHVuZG9BcmVhID0gcjtcblxuICAgICAgICBjdXJMYXllci5jb3B5UmVnaW9uSEZsaXAociwgdW5kb0J1ZmZlcik7XG5cbiAgICAgICAgYWRkVW5kbyhuZXcgQ1BVbmRvUGFpbnQoKSk7XG4gICAgICAgIGludmFsaWRhdGVGdXNpb24oKTtcbiAgICB9O1xuXG4gICAgdGhpcy52RmxpcCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXJcbiAgICAgICAgICAgIHIgPSB0aGlzLmdldFNlbGVjdGlvbkF1dG9TZWxlY3QoKTtcblxuICAgICAgICBwcmVwYXJlRm9yTGF5ZXJVbmRvKCk7XG4gICAgICAgIHVuZG9BcmVhID0gcjtcblxuICAgICAgICBjdXJMYXllci5jb3B5UmVnaW9uVkZsaXAociwgdW5kb0J1ZmZlcik7XG5cbiAgICAgICAgYWRkVW5kbyhuZXcgQ1BVbmRvUGFpbnQoKSk7XG4gICAgICAgIGludmFsaWRhdGVGdXNpb24oKTtcbiAgICB9O1xuXG4gICAgdGhpcy5tb25vY2hyb21hdGljTm9pc2UgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyXG4gICAgICAgICAgICByID0gdGhpcy5nZXRTZWxlY3Rpb25BdXRvU2VsZWN0KCk7XG5cbiAgICAgICAgcHJlcGFyZUZvckxheWVyVW5kbygpO1xuICAgICAgICB1bmRvQXJlYSA9IHI7XG5cbiAgICAgICAgY3VyTGF5ZXIuZmlsbFdpdGhOb2lzZShyKTtcblxuICAgICAgICBhZGRVbmRvKG5ldyBDUFVuZG9QYWludCgpKTtcbiAgICAgICAgaW52YWxpZGF0ZUZ1c2lvbigpO1xuICAgIH07XG5cbiAgICB0aGlzLmNvbG9yTm9pc2UgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyXG4gICAgICAgICAgICByID0gdGhpcy5nZXRTZWxlY3Rpb25BdXRvU2VsZWN0KCk7XG5cbiAgICAgICAgcHJlcGFyZUZvckxheWVyVW5kbygpO1xuICAgICAgICB1bmRvQXJlYSA9IHI7XG5cbiAgICAgICAgY3VyTGF5ZXIuZmlsbFdpdGhDb2xvck5vaXNlKHIpO1xuXG4gICAgICAgIGFkZFVuZG8obmV3IENQVW5kb1BhaW50KCkpO1xuICAgICAgICBpbnZhbGlkYXRlRnVzaW9uKCk7XG4gICAgfTtcbiAgICBcbiAgICB0aGlzLmludmVydCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXJcbiAgICAgICAgICAgIHIgPSB0aGlzLmdldFNlbGVjdGlvbkF1dG9TZWxlY3QoKTtcblxuICAgICAgICBwcmVwYXJlRm9yTGF5ZXJVbmRvKCk7XG4gICAgICAgIHVuZG9BcmVhID0gcjtcblxuICAgICAgICBjdXJMYXllci5pbnZlcnQocik7XG5cbiAgICAgICAgYWRkVW5kbyhuZXcgQ1BVbmRvUGFpbnQoKSk7XG4gICAgICAgIGludmFsaWRhdGVGdXNpb24oKTtcbiAgICB9O1xuICAgIFxuICAgIHRoaXMuYm94Qmx1ciA9IGZ1bmN0aW9uKHJhZGl1c1gsIHJhZGl1c1ksIGl0ZXJhdGlvbnMpIHtcbiAgICAgICAgdmFyXG4gICAgICAgICAgICByID0gdGhpcy5nZXRTZWxlY3Rpb25BdXRvU2VsZWN0KCk7XG5cbiAgICAgICAgcHJlcGFyZUZvckxheWVyVW5kbygpO1xuICAgICAgICB1bmRvQXJlYSA9IHI7XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpdGVyYXRpb25zOyBpKyspIHtcbiAgICAgICAgICAgIGN1ckxheWVyLmJveEJsdXIociwgcmFkaXVzWCwgcmFkaXVzWSk7XG4gICAgICAgIH1cblxuICAgICAgICBhZGRVbmRvKG5ldyBDUFVuZG9QYWludCgpKTtcbiAgICAgICAgaW52YWxpZGF0ZUZ1c2lvbigpO1xuICAgIH07XG4gICAgXG4gICAgdGhpcy5yZWN0YW5nbGVTZWxlY3Rpb24gPSBmdW5jdGlvbihyKSB7XG4gICAgICAgIHZhclxuICAgICAgICAgICAgbmV3U2VsZWN0aW9uID0gci5jbG9uZSgpO1xuICAgICAgICBcbiAgICAgICAgbmV3U2VsZWN0aW9uLmNsaXAodGhpcy5nZXRCb3VuZHMoKSk7XG5cbiAgICAgICAgYWRkVW5kbyhuZXcgQ1BVbmRvUmVjdGFuZ2xlU2VsZWN0aW9uKHRoaXMuZ2V0U2VsZWN0aW9uKCksIG5ld1NlbGVjdGlvbikpO1xuXG4gICAgICAgIHRoaXMuc2V0U2VsZWN0aW9uKG5ld1NlbGVjdGlvbik7XG4gICAgfTtcbiAgICBcbiAgICAvLyB0ZW1wIGF3ZnVsIGhhY2tcbiAgICB2YXJcbiAgICAgICAgbW92ZUluaXRTZWxlY3QgPSBudWxsLCAvLyBDUFJlY3RcbiAgICAgICAgbW92ZVByZXZYLCBtb3ZlUHJldlksIG1vdmVQcmV2WDIsIG1vdmVQcmV2WTIsXG4gICAgICAgIG1vdmVNb2RlQ29weSwgcHJldk1vZGVDb3B5O1xuICAgIFxuICAgIHRoaXMuYmVnaW5QcmV2aWV3TW9kZSA9IGZ1bmN0aW9uKGNvcHkpIHtcbiAgICAgICAgLy8gISEhISBhd2Z1bCBhd2Z1bCBoYWNrICEhISB3aWxsIGJyZWFrIGFzIHNvb24gYXMgQ1BNdWx0aVVuZG8gaXMgdXNlZCBmb3Igb3RoZXIgdGhpbmdzXG4gICAgICAgIC8vIEZJWE1FOiBBU0FQIVxuICAgICAgICBpZiAoIWNvcHkgJiYgdW5kb0xpc3QubGVuZ3RoID4gMCAmJiByZWRvTGlzdC5sZW5ndGggPT0gMCAmJiB1bmRvTGlzdFt1bmRvTGlzdC5sZW5ndGggLSAxXSBpbnN0YW5jZW9mIENQTXVsdGlVbmRvXG4gICAgICAgICAgICAgICAgJiYgdW5kb0xpc3RbdW5kb0xpc3QubGVuZ3RoIC0gMV0udW5kb2VzWzBdIGluc3RhbmNlb2YgQ1BVbmRvUGFpbnRcbiAgICAgICAgICAgICAgICAmJiB1bmRvTGlzdFt1bmRvTGlzdC5sZW5ndGggLSAxXS51bmRvZXNbMF0ubGF5ZXIgPT0gdGhpcy5nZXRBY3RpdmVMYXllckluZGV4KCkpIHtcbiAgICAgICAgICAgIHRoaXMudW5kbygpO1xuICAgICAgICAgICAgY29weSA9IHByZXZNb2RlQ29weTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG1vdmVQcmV2WCA9IDA7XG4gICAgICAgICAgICBtb3ZlUHJldlkgPSAwO1xuXG4gICAgICAgICAgICBwcmVwYXJlRm9yTGF5ZXJVbmRvKCk7XG4gICAgICAgICAgICB1bmRvQXJlYS5tYWtlRW1wdHkoKTtcblxuICAgICAgICAgICAgb3BhY2l0eUJ1ZmZlci5jbGVhckFsbCgpO1xuICAgICAgICAgICAgb3BhY2l0eUFyZWEubWFrZUVtcHR5KCk7XG4gICAgICAgIH1cblxuICAgICAgICBtb3ZlSW5pdFNlbGVjdCA9IG51bGw7XG4gICAgICAgIG1vdmVNb2RlQ29weSA9IGNvcHk7XG4gICAgfVxuXG4gICAgdGhpcy5lbmRQcmV2aWV3TW9kZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgXG4gICAgICAgICAgICB1bmRvID0gbmV3IENQVW5kb1BhaW50KCk7XG4gICAgICAgIFxuICAgICAgICBpZiAobW92ZUluaXRTZWxlY3QgIT0gbnVsbCkge1xuICAgICAgICAgICAgdW5kbyA9IG5ldyBDUE11bHRpVW5kbyhbdW5kbywgbmV3IENQVW5kb1JlY3RhbmdsZVNlbGVjdGlvbihtb3ZlSW5pdFNlbGVjdCwgdGhpcy5nZXRTZWxlY3Rpb24oKSldKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vICEhISEhIVxuICAgICAgICAgICAgLy8gRklYTUU6IHRoaXMgaXMgcmVxdWlyZWQganVzdCB0byBtYWtlIHRoZSBhd2Z1bCBtb3ZlIGhhY2sgd29ya1xuICAgICAgICAgICAgdW5kbyA9IG5ldyBDUE11bHRpVW5kbyhbdW5kb10pO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBhZGRVbmRvKHVuZG8pO1xuXG4gICAgICAgIG1vdmVJbml0U2VsZWN0ID0gbnVsbDtcbiAgICAgICAgbW92ZVByZXZYID0gbW92ZVByZXZYMjtcbiAgICAgICAgbW92ZVByZXZZID0gbW92ZVByZXZZMjtcbiAgICAgICAgcHJldk1vZGVDb3B5ID0gbW92ZU1vZGVDb3B5O1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBNb3ZlIHRoZSBzZWxlY3RlZCBsYXllciBkYXRhIGJ5IHRoZSBnaXZlbiBvZmZzZXQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb2Zmc2V0WCBpbnRcbiAgICAgKiBAcGFyYW0gb2Zmc2V0WSBpbnRcbiAgICAgKi9cbiAgICB0aGlzLm1vdmUgPSBmdW5jdGlvbihvZmZzZXRYLCBvZmZzZXRZKSB7XG4gICAgICAgIHZhclxuICAgICAgICAgICAgc3JjUmVjdDtcblxuICAgICAgICAvLyBBZGQgcm91bmRpbmcgdG8gZW5zdXJlIHdlIGhhdmVuJ3QgYmVlbiBnaXZlbiBmbG9hdCBjb29yZGluYXRlc1xuICAgICAgICBvZmZzZXRYID0gKG1vdmVQcmV2WCArIG9mZnNldFgpIHwgMDtcbiAgICAgICAgb2Zmc2V0WSA9IChtb3ZlUHJldlkgKyBvZmZzZXRZKSB8IDA7XG5cbiAgICAgICAgaWYgKG1vdmVJbml0U2VsZWN0ID09IG51bGwpIHtcbiAgICAgICAgICAgIHNyY1JlY3QgPSB0aGlzLmdldFNlbGVjdGlvbkF1dG9TZWxlY3QoKTtcbiAgICAgICAgICAgIGlmICghdGhpcy5nZXRTZWxlY3Rpb24oKS5pc0VtcHR5KCkpIHtcbiAgICAgICAgICAgICAgICBtb3ZlSW5pdFNlbGVjdCA9IHRoaXMuZ2V0U2VsZWN0aW9uKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzcmNSZWN0ID0gbW92ZUluaXRTZWxlY3QuY2xvbmUoKTtcbiAgICAgICAgfVxuICAgICAgICBjdXJMYXllci5jb3B5RGF0YUZyb20odW5kb0J1ZmZlcik7XG5cbiAgICAgICAgaWYgKCFtb3ZlTW9kZUNvcHkpIHtcbiAgICAgICAgICAgIGN1ckxheWVyLmNsZWFyUmVjdChzcmNSZWN0LCAwKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGN1ckxheWVyLnBhc3RlQWxwaGFSZWN0KHVuZG9CdWZmZXIsIHNyY1JlY3QsIHNyY1JlY3QubGVmdCArIG9mZnNldFgsIHNyY1JlY3QudG9wICsgb2Zmc2V0WSk7XG5cbiAgICAgICAgdW5kb0FyZWEubWFrZUVtcHR5KCk7XG4gICAgICAgIGlmICghbW92ZU1vZGVDb3B5KSB7XG4gICAgICAgICAgICB1bmRvQXJlYS51bmlvbihzcmNSZWN0KTtcbiAgICAgICAgfVxuICAgICAgICBzcmNSZWN0LnRyYW5zbGF0ZShvZmZzZXRYLCBvZmZzZXRZKTtcbiAgICAgICAgdW5kb0FyZWEudW5pb24oc3JjUmVjdCk7XG5cbiAgICAgICAgaW52YWxpZGF0ZUZ1c2lvbigpOyAvLyBUT0RPIG1ha2UgbW9yZSBwcmVjaXNlXG5cbiAgICAgICAgaWYgKG1vdmVJbml0U2VsZWN0ICE9IG51bGwpIHtcbiAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgIHNlbCA9IG1vdmVJbml0U2VsZWN0LmNsb25lKCk7XG4gICAgICAgICAgICBzZWwudHJhbnNsYXRlKG9mZnNldFgsIG9mZnNldFkpO1xuICAgICAgICAgICAgdGhpcy5zZXRTZWxlY3Rpb24oc2VsKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHRoaXMgaXMgYSByZWFsbHkgYmFkIGlkZWEgOkRcbiAgICAgICAgbW92ZVByZXZYMiA9IG9mZnNldFg7XG4gICAgICAgIG1vdmVQcmV2WTIgPSBvZmZzZXRZO1xuICAgIH07XG4gICAgXG4gICAgLy8gQ29weS9QYXN0ZSBmdW5jdGlvbnNcbiAgICBcbiAgICB0aGlzLmN1dFNlbGVjdGlvbiA9IGZ1bmN0aW9uKGNyZWF0ZVVuZG8pIHtcbiAgICAgICAgdmFyXG4gICAgICAgICAgICBzZWxlY3Rpb24gPSB0aGlzLmdldFNlbGVjdGlvbigpO1xuICAgICAgICBcbiAgICAgICAgaWYgKHNlbGVjdGlvbi5pc0VtcHR5KCkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNsaXBib2FyZCA9IG5ldyBDUENsaXAoY3VyTGF5ZXIuY2xvbmVSZWN0KHNlbGVjdGlvbiksIHNlbGVjdGlvbi5sZWZ0LCBzZWxlY3Rpb24udG9wKTtcblxuICAgICAgICBpZiAoY3JlYXRlVW5kbykge1xuICAgICAgICAgICAgYWRkVW5kbyhuZXcgQ1BVbmRvQ3V0KGNsaXBib2FyZC5ibXAsIHRoaXMuZ2V0QWN0aXZlTGF5ZXJJbmRleCgpLCBzZWxlY3Rpb24pKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGN1ckxheWVyLmNsZWFyUmVjdChzZWxlY3Rpb24sIEVNUFRZX0xBWUVSX0NPTE9SKTtcbiAgICAgICAgaW52YWxpZGF0ZUZ1c2lvblJlY3Qoc2VsZWN0aW9uKTtcbiAgICB9O1xuXG4gICAgdGhpcy5jb3B5U2VsZWN0aW9uID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhclxuICAgICAgICAgICAgc2VsZWN0aW9uID0gdGhhdC5nZXRTZWxlY3Rpb24oKTtcbiAgICAgICAgXG4gICAgICAgIGlmIChzZWxlY3Rpb24uaXNFbXB0eSgpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBjbGlwYm9hcmQgPSBuZXcgQ1BDbGlwKGN1ckxheWVyLmNsb25lUmVjdChzZWxlY3Rpb24pLCBzZWxlY3Rpb24ubGVmdCwgc2VsZWN0aW9uLnRvcCk7XG4gICAgfTtcblxuICAgIHRoaXMuY29weVNlbGVjdGlvbk1lcmdlZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgXG4gICAgICAgICAgICBzZWxlY3Rpb24gPSB0aGF0LmdldFNlbGVjdGlvbigpO1xuICAgICAgICBcbiAgICAgICAgaWYgKHNlbGVjdGlvbi5pc0VtcHR5KCkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIG1ha2Ugc3VyZSB0aGUgZnVzaW9uZWQgcGljdHVyZSBpcyB1cCB0byBkYXRlXG4gICAgICAgIHRoaXMuZnVzaW9uTGF5ZXJzKCk7XG4gICAgICAgIGNsaXBib2FyZCA9IG5ldyBDUENsaXAoZnVzaW9uLmNsb25lUmVjdChzZWxlY3Rpb24pLCBzZWxlY3Rpb24ubGVmdCwgc2VsZWN0aW9uLnRvcCk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqXG4gICAgICogQHBhcmFtIGNyZWF0ZVVuZG8gYm9vbGVhblxuICAgICAqIEBwYXJhbSBjbGlwIENQQ2xpcFxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHBhc3RlQ2xpcChjcmVhdGVVbmRvLCBjbGlwKSB7XG4gICAgICAgIHZhclxuICAgICAgICAgICAgYWN0aXZlTGF5ZXJJbmRleCA9IHRoYXQuZ2V0QWN0aXZlTGF5ZXJJbmRleCgpO1xuICAgICAgICBcbiAgICAgICAgaWYgKGNyZWF0ZVVuZG8pIHtcbiAgICAgICAgICAgIGFkZFVuZG8obmV3IENQVW5kb1Bhc3RlKGNsaXAsIGFjdGl2ZUxheWVySW5kZXgsIHRoYXQuZ2V0U2VsZWN0aW9uKCkpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhclxuICAgICAgICAgICAgbmV3TGF5ZXIgPSBuZXcgQ1BMYXllcih0aGF0LndpZHRoLCB0aGF0LmhlaWdodCwgdGhhdC5nZXREZWZhdWx0TGF5ZXJOYW1lKCkpLFxuICAgICAgICAgICAgc291cmNlUmVjdCA9IGNsaXAuYm1wLmdldEJvdW5kcygpLFxuICAgICAgICAgICAgeCwgeTtcbiAgICAgICAgXG4gICAgICAgIGxheWVycy5zcGxpY2UoYWN0aXZlTGF5ZXJJbmRleCArIDEsIDAsIG5ld0xheWVyKTtcbiAgICAgICAgdGhhdC5zZXRBY3RpdmVMYXllckluZGV4KGFjdGl2ZUxheWVySW5kZXggKyAxKTtcblxuICAgICAgICBpZiAoc291cmNlUmVjdC5pc0luc2lkZSh0aGF0LmdldEJvdW5kcygpKSkge1xuICAgICAgICAgICAgeCA9IGNsaXAueDtcbiAgICAgICAgICAgIHkgPSBjbGlwLnk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB4ID0gKCh0aGF0LndpZHRoIC0gY2xpcC5ibXAud2lkdGgpIC8gMikgfCAwO1xuICAgICAgICAgICAgeSA9ICgodGhhdC5oZWlnaHQgLSBjbGlwLmJtcC5oZWlnaHQpIC8gMikgfCAwO1xuICAgICAgICB9XG5cbiAgICAgICAgY3VyTGF5ZXIuY29weUJpdG1hcFJlY3QoY2xpcC5ibXAsIHgsIHksIHNvdXJjZVJlY3QpO1xuICAgICAgICB0aGF0LmVtcHR5U2VsZWN0aW9uKCk7XG5cbiAgICAgICAgaW52YWxpZGF0ZUZ1c2lvbigpO1xuICAgICAgICBjYWxsTGlzdGVuZXJzTGF5ZXJDaGFuZ2UoKTtcbiAgICB9XG4gICAgXG4gICAgdGhpcy5wYXN0ZUNsaXBib2FyZCA9IGZ1bmN0aW9uKGNyZWF0ZVVuZG8pIHtcbiAgICAgICAgaWYgKGNsaXBib2FyZCAhPSBudWxsKSB7XG4gICAgICAgICAgICBwYXN0ZUNsaXAoY3JlYXRlVW5kbywgY2xpcGJvYXJkKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgXG4gICAgdGhpcy5zZXRTYW1wbGVBbGxMYXllcnMgPSBmdW5jdGlvbihiKSB7XG4gICAgICAgIHNhbXBsZUFsbExheWVycyA9IGI7XG4gICAgfTtcblxuICAgIHRoaXMuc2V0TG9ja0FscGhhID0gZnVuY3Rpb24oYikge1xuICAgICAgICBsb2NrQWxwaGEgPSBiO1xuICAgIH07XG5cbiAgICB0aGlzLnNldEZvcmVncm91bmRDb2xvciA9IGZ1bmN0aW9uKGNvbG9yKSB7XG4gICAgICAgIGN1ckNvbG9yID0gY29sb3I7XG4gICAgfTtcbiAgICBcbiAgICB0aGlzLnNldEJydXNoID0gZnVuY3Rpb24oYnJ1c2gpIHtcbiAgICAgICAgY3VyQnJ1c2ggPSBicnVzaDtcbiAgICB9O1xuICAgIFxuICAgIHRoaXMuc2V0QnJ1c2hUZXh0dXJlID0gZnVuY3Rpb24odGV4dHVyZSkge1xuICAgICAgICBicnVzaE1hbmFnZXIuc2V0VGV4dHVyZSh0ZXh0dXJlKTtcbiAgICB9XG4gICAgXG4gICAgLy8gLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgICAvLyBQYWludCBlbmdpbmVcbiAgICAvLyAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXG4gICAgdGhpcy5iZWdpblN0cm9rZSA9IGZ1bmN0aW9uKHgsIHksIHByZXNzdXJlKSB7XG4gICAgICAgIGlmIChjdXJCcnVzaCA9PSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBwYWludGluZ01vZGVzW2N1ckJydXNoLnBhaW50TW9kZV0uYmVnaW5TdHJva2UoeCwgeSwgcHJlc3N1cmUpO1xuICAgIH07XG5cbiAgICB0aGlzLmNvbnRpbnVlU3Ryb2tlID0gZnVuY3Rpb24oeCwgeSwgcHJlc3N1cmUpIHtcbiAgICAgICAgaWYgKGN1ckJydXNoID09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHBhaW50aW5nTW9kZXNbY3VyQnJ1c2gucGFpbnRNb2RlXS5jb250aW51ZVN0cm9rZSh4LCB5LCBwcmVzc3VyZSk7XG4gICAgfTtcblxuICAgIHRoaXMuZW5kU3Ryb2tlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmIChjdXJCcnVzaCA9PSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBwYWludGluZ01vZGVzW2N1ckJydXNoLnBhaW50TW9kZV0uZW5kU3Ryb2tlKCk7XG4gICAgfTtcbiAgICBcbiAgICB0aGlzLmhhc0FscGhhID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBmdXNpb24uaGFzQWxwaGEoKTtcbiAgICB9O1xuICAgIFxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgYXJ0d29yayBhcyBhIHNpbmdsZSBmbGF0IFBORyBpbWFnZS5cbiAgICAgKiBcbiAgICAgKiBSb3RhdGlvbiBpcyBbMC4uM10gYW5kIHNlbGVjdHMgYSBtdWx0aXBsZSBvZiA5MCBkZWdyZWVzIG9mIGNsb2Nrd2lzZSByb3RhdGlvbiB0byBiZSBhcHBsaWVkIHRvIHRoZSBkcmF3aW5nIGJlZm9yZVxuICAgICAqIHNhdmluZy5cbiAgICAgKiBcbiAgICAgKiBAcmV0dXJuIEEgYmluYXJ5IHN0cmluZyBvZiB0aGUgUE5HIGZpbGUgZGF0YS5cbiAgICAgKi9cbiAgICB0aGlzLmdldEZsYXRQTkcgPSBmdW5jdGlvbihyb3RhdGlvbikge1xuICAgICAgICB0aGlzLmZ1c2lvbkxheWVycygpO1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuIGZ1c2lvbi5nZXRBc1BORyhyb3RhdGlvbik7XG4gICAgfTtcbiAgICBcbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgdGhpcyBhcnR3b3JrIGNhbiBiZSBleGFjdGx5IHJlcHJlc2VudGVkIGFzIGEgc2ltcGxlIHRyYW5zcGFyZW50IFBORyAoaS5lLiBkb2Vzbid0IGhhdmUgbXVsdGlwbGUgXG4gICAgICogbGF5ZXJzLCBhbmQgYmFzZSBsYXllcidzIG9wYWNpdHkgaXMgc2V0IHRvIDEwMCUpLlxuICAgICAqL1xuICAgIHRoaXMuaXNTaW1wbGVEcmF3aW5nID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldExheWVyQ291bnQoKSA9PSAxICYmIHRoaXMuZ2V0TGF5ZXIoMCkuZ2V0QWxwaGEoKSA9PSAxMDA7XG4gICAgfTtcbiAgICBcbiAgICAvLyAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4gICAgLy8gVW5kbyBjbGFzc2VzXG5cbiAgICAvKipcbiAgICAgKiBTYXZlIHRoZSBkaWZmZXJlbmNlIGJldHdlZW4gdGhlIGN1cnJlbnQgbGF5ZXIgYW5kIHRoZSB1bmRvQnVmZmVyICh3aXRoaW4gdGhlIHVuZG9BcmVhKSBmb3IgdW5kbywgYW5kIGNsZWFyXG4gICAgICogdGhlIHVuZG9BcmVhLlxuICAgICAqXG4gICAgICogQGNvbnN0cnVjdG9yXG4gICAgICovXG4gICAgZnVuY3Rpb24gQ1BVbmRvUGFpbnQoKSB7XG4gICAgICAgIHZhclxuICAgICAgICAgICAgcmVjdCA9IHVuZG9BcmVhLmNsb25lKCksXG4gICAgICAgICAgICBkYXRhID0gdW5kb0J1ZmZlci5jb3B5UmVjdFhPUihjdXJMYXllciwgcmVjdCk7XG4gICAgICAgIFxuICAgICAgICB0aGlzLmxheWVyID0gdGhhdC5nZXRBY3RpdmVMYXllckluZGV4KCk7XG5cbiAgICAgICAgdW5kb0FyZWEubWFrZUVtcHR5KCk7XG5cbiAgICAgICAgdGhpcy51bmRvID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB0aGF0LmdldExheWVyKHRoaXMubGF5ZXIpLnNldFJlY3RYT1IoZGF0YSwgcmVjdCk7XG4gICAgICAgICAgICBpbnZhbGlkYXRlRnVzaW9uUmVjdChyZWN0KTtcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLnJlZG8gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHRoYXQuZ2V0TGF5ZXIodGhpcy5sYXllcikuc2V0UmVjdFhPUihkYXRhLCByZWN0KTtcbiAgICAgICAgICAgIGludmFsaWRhdGVGdXNpb25SZWN0KHJlY3QpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHRoYXQuZ2V0TWVtb3J5VXNlZCA9IGZ1bmN0aW9uKHVuZG9uZSwgcGFyYW0pIHtcbiAgICAgICAgICAgIHJldHVybiB1bmRvQnVmZmVyLmdldE1lbW9yeVNpemUoKTtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgXG4gICAgQ1BVbmRvUGFpbnQucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShDUFVuZG8ucHJvdG90eXBlKTtcbiAgICBDUFVuZG9QYWludC5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBDUFVuZG9QYWludDtcbiAgICBcbiAgICBmdW5jdGlvbiBDUFVuZG9MYXllclZpc2libGUoX2xheWVySW5kZXgsIF9vbGRWaXMsIF9uZXdWaXMpIHtcbiAgICAgICAgdGhpcy5sYXllckluZGV4ID0gX2xheWVySW5kZXg7XG4gICAgICAgIHRoaXMub2xkVmlzID0gX29sZFZpcztcbiAgICAgICAgdGhpcy5uZXdWaXMgPSBfbmV3VmlzO1xuICAgIH1cbiAgICBcbiAgICBDUFVuZG9MYXllclZpc2libGUucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShDUFVuZG8ucHJvdG90eXBlKTtcbiAgICBDUFVuZG9MYXllclZpc2libGUucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gQ1BVbmRvTGF5ZXJWaXNpYmxlO1xuICAgIFxuICAgIENQVW5kb0xheWVyVmlzaWJsZS5wcm90b3R5cGUucmVkbyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB0aGF0LmdldExheWVyKHRoaXMubGF5ZXJJbmRleCkudmlzaWJsZSA9IHRoaXMubmV3VmlzO1xuICAgICAgICBcbiAgICAgICAgaW52YWxpZGF0ZUZ1c2lvbigpO1xuICAgICAgICBjYWxsTGlzdGVuZXJzTGF5ZXJDaGFuZ2UodGhpcy5sYXllckluZGV4KTtcbiAgICB9O1xuXG4gICAgQ1BVbmRvTGF5ZXJWaXNpYmxlLnByb3RvdHlwZS51bmRvID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHRoYXQuZ2V0TGF5ZXIodGhpcy5sYXllckluZGV4KS52aXNpYmxlID0gdGhpcy5vbGRWaXM7XG4gICAgICAgIFxuICAgICAgICBpbnZhbGlkYXRlRnVzaW9uKCk7XG4gICAgICAgIGNhbGxMaXN0ZW5lcnNMYXllckNoYW5nZSh0aGlzLmxheWVySW5kZXgpO1xuICAgIH07XG5cbiAgICBDUFVuZG9MYXllclZpc2libGUucHJvdG90eXBlLm1lcmdlID0gZnVuY3Rpb24odSkge1xuICAgICAgICBpZiAodSBpbnN0YW5jZW9mIENQVW5kb0xheWVyVmlzaWJsZSAmJiB0aGlzLmxheWVySW5kZXggPT0gdS5sYXllckluZGV4KSB7XG4gICAgICAgICAgICB0aGlzLm5ld1ZpcyA9IHUubmV3VmlzO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH07XG5cbiAgICBDUFVuZG9MYXllclZpc2libGUucHJvdG90eXBlLm5vQ2hhbmdlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm9sZFZpcyA9PSB0aGlzLm5ld1ZpcztcbiAgICB9O1xuICAgIFxuICAgIGZ1bmN0aW9uIENQVW5kb0FkZExheWVyKGxheWVySW5kZXgpIHtcbiAgICAgICAgdGhpcy51bmRvID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBsYXllcnMuc3BsaWNlKGxheWVySW5kZXggKyAxLCAxKTtcbiAgICAgICAgICAgIHRoYXQuc2V0QWN0aXZlTGF5ZXJJbmRleChsYXllckluZGV4KTtcbiAgICAgICAgICAgIGludmFsaWRhdGVGdXNpb24oKTtcbiAgICAgICAgICAgIGNhbGxMaXN0ZW5lcnNMYXllckNoYW5nZSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5yZWRvID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICBuZXdMYXllciA9IG5ldyBDUExheWVyKHRoYXQud2lkdGgsIHRoYXQuaGVpZ2h0LCB0aGF0LmdldERlZmF1bHRMYXllck5hbWUoKSk7XG4gICAgICAgICAgICBuZXdMYXllci5jbGVhckFsbChFTVBUWV9MQVlFUl9DT0xPUik7XG4gICAgICAgICAgICBsYXllcnMuc3BsaWNlKGxheWVySW5kZXggKyAxLCAwLCBuZXdMYXllcik7XG4gICAgICAgICAgICB0aGF0LnNldEFjdGl2ZUxheWVySW5kZXgobGF5ZXJJbmRleCArIDEpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpbnZhbGlkYXRlRnVzaW9uKCk7XG4gICAgICAgICAgICBjYWxsTGlzdGVuZXJzTGF5ZXJDaGFuZ2UoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBcbiAgICBDUFVuZG9BZGRMYXllci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKENQVW5kby5wcm90b3R5cGUpO1xuICAgIENQVW5kb0FkZExheWVyLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IENQVW5kb0FkZExheWVyO1xuXG4gICAgZnVuY3Rpb24gQ1BVbmRvRHVwbGljYXRlTGF5ZXIobGF5ZXJJbmRleCkge1xuICAgICAgICB0aGlzLnVuZG8gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGxheWVycy5zcGxpY2UobGF5ZXJJbmRleCArIDEsIDEpO1xuICAgICAgICAgICAgdGhhdC5zZXRBY3RpdmVMYXllckluZGV4KGxheWVySW5kZXgpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpbnZhbGlkYXRlRnVzaW9uKCk7XG4gICAgICAgICAgICBjYWxsTGlzdGVuZXJzTGF5ZXJDaGFuZ2UoKTtcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLnJlZG8gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgIGNvcHlTdWZmaXggPSBcIiBDb3B5XCIsXG5cbiAgICAgICAgICAgICAgICBzb3VyY2VMYXllciA9IGxheWVyc1tsYXllckluZGV4XSxcbiAgICAgICAgICAgICAgICBuZXdMYXllciA9IG5ldyBDUExheWVyKHRoYXQud2lkdGgsIHRoYXQuaGVpZ2h0KSxcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBuZXdMYXllck5hbWUgPSBzb3VyY2VMYXllci5uYW1lO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoIW5ld0xheWVyTmFtZS5lbmRzV2l0aChjb3B5U3VmZml4KSkge1xuICAgICAgICAgICAgICAgIG5ld0xheWVyTmFtZSArPSBjb3B5U3VmZml4O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBuZXdMYXllci5jb3B5RnJvbShzb3VyY2VMYXllcik7XG4gICAgICAgICAgICBuZXdMYXllci5uYW1lID0gbmV3TGF5ZXJOYW1lO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBsYXllcnMuc3BsaWNlKGxheWVySW5kZXggKyAxLCAwLCBuZXdMYXllcik7XG5cbiAgICAgICAgICAgIHRoYXQuc2V0QWN0aXZlTGF5ZXJJbmRleChsYXllckluZGV4ICsgMSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGludmFsaWRhdGVGdXNpb24oKTtcbiAgICAgICAgICAgIGNhbGxMaXN0ZW5lcnNMYXllckNoYW5nZSgpO1xuICAgICAgICB9O1xuICAgIH1cbiAgICBcbiAgICBDUFVuZG9EdXBsaWNhdGVMYXllci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKENQVW5kby5wcm90b3R5cGUpO1xuICAgIENQVW5kb0R1cGxpY2F0ZUxheWVyLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IENQVW5kb0R1cGxpY2F0ZUxheWVyO1xuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIGxheWVySW5kZXggaW50XG4gICAgICogQHBhcmFtIGxheWVyIENQTGF5ZXJcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBDUFVuZG9SZW1vdmVMYXllcihsYXllckluZGV4LCBsYXllcikge1xuICAgICAgICB0aGlzLnVuZG8gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGxheWVycy5zcGxpY2UobGF5ZXJJbmRleCwgMCwgbGF5ZXIpO1xuICAgICAgICAgICAgdGhhdC5zZXRBY3RpdmVMYXllckluZGV4KGxheWVySW5kZXgpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpbnZhbGlkYXRlRnVzaW9uKCk7XG4gICAgICAgICAgICBjYWxsTGlzdGVuZXJzTGF5ZXJDaGFuZ2UoKTtcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLnJlZG8gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGxheWVycy5zcGxpY2UobGF5ZXJJbmRleCwgMSk7XG4gICAgICAgICAgICB0aGF0LnNldEFjdGl2ZUxheWVySW5kZXgobGF5ZXJJbmRleCA8IGxheWVycy5sZW5ndGggPyBsYXllckluZGV4IDogbGF5ZXJJbmRleCAtIDEpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpbnZhbGlkYXRlRnVzaW9uKCk7XG4gICAgICAgICAgICBjYWxsTGlzdGVuZXJzTGF5ZXJDaGFuZ2UoKTtcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLmdldE1lbW9yeVVzZWQgPSBmdW5jdGlvbih1bmRvbmUpIHtcbiAgICAgICAgICAgIHJldHVybiB1bmRvbmUgPyAwIDogbGF5ZXIud2lkdGggKiBsYXllci5oZWlnaHQgKiBDUENvbG9yQm1wLkJZVEVTX1BFUl9QSVhFTDtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgXG4gICAgQ1BVbmRvUmVtb3ZlTGF5ZXIucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShDUFVuZG8ucHJvdG90eXBlKTtcbiAgICBDUFVuZG9SZW1vdmVMYXllci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBDUFVuZG9SZW1vdmVMYXllcjtcbiAgICBcbiAgICBmdW5jdGlvbiBDUFVuZG9NZXJnZURvd25MYXllcihsYXllckluZGV4KSB7XG4gICAgICAgIHZhclxuICAgICAgICAgICAgbGF5ZXJCb3R0b20gPSBsYXllckJvdHRvbSA9IG5ldyBDUExheWVyKHRoYXQud2lkdGgsIHRoYXQuaGVpZ2h0KSwgXG4gICAgICAgICAgICBsYXllclRvcDtcblxuICAgICAgICBsYXllckJvdHRvbS5jb3B5RnJvbShsYXllcnNbbGF5ZXJJbmRleCAtIDFdKTtcbiAgICAgICAgbGF5ZXJUb3AgPSBsYXllcnNbbGF5ZXJJbmRleF07XG5cbiAgICAgICAgdGhpcy51bmRvID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBsYXllcnNbbGF5ZXJJbmRleCAtIDFdLmNvcHlGcm9tKGxheWVyQm90dG9tKTtcbiAgICAgICAgICAgIGxheWVycy5zcGxpY2UobGF5ZXJJbmRleCwgMCwgbGF5ZXJUb3ApO1xuICAgICAgICAgICAgdGhhdC5zZXRBY3RpdmVMYXllckluZGV4KGxheWVySW5kZXgpO1xuXG4gICAgICAgICAgICBsYXllckJvdHRvbSA9IGxheWVyVG9wID0gbnVsbDtcblxuICAgICAgICAgICAgaW52YWxpZGF0ZUZ1c2lvbigpO1xuICAgICAgICAgICAgY2FsbExpc3RlbmVyc0xheWVyQ2hhbmdlKCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5yZWRvID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBsYXllckJvdHRvbSA9IG5ldyBDUExheWVyKHRoYXQud2lkdGgsIHRoYXQuaGVpZ2h0KTtcbiAgICAgICAgICAgIGxheWVyQm90dG9tLmNvcHlGcm9tKGxheWVyc1tsYXllckluZGV4IC0gMV0pO1xuICAgICAgICAgICAgbGF5ZXJUb3AgPSBsYXllcnNbbGF5ZXJJbmRleF07XG5cbiAgICAgICAgICAgIHRoYXQuc2V0QWN0aXZlTGF5ZXJJbmRleChsYXllckluZGV4KTtcbiAgICAgICAgICAgIHRoYXQubWVyZ2VEb3duKGZhbHNlKTtcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLmdldE1lbW9yeVVzZWQgPSBmdW5jdGlvbih1bmRvbmUsIHBhcmFtKSB7XG4gICAgICAgICAgICByZXR1cm4gdW5kb25lID8gMCA6IHRoYXQud2lkdGggKiB0aGF0LmhlaWdodCAqIENQQ29sb3JCbXAuQllURVNfUEVSX1BJWEVMICogMjtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgXG4gICAgQ1BVbmRvTWVyZ2VEb3duTGF5ZXIucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShDUFVuZG8ucHJvdG90eXBlKTtcbiAgICBDUFVuZG9NZXJnZURvd25MYXllci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBDUFVuZG9NZXJnZURvd25MYXllcjtcblxuICAgIGZ1bmN0aW9uIENQVW5kb01lcmdlQWxsTGF5ZXJzKCkge1xuICAgICAgICB2YXIgXG4gICAgICAgICAgICBvbGRBY3RpdmVMYXllckluZGV4ID0gdGhhdC5nZXRBY3RpdmVMYXllckluZGV4KCksXG4gICAgICAgICAgICBvbGRMYXllcnMgPSBsYXllcnMuc2xpY2UoMCk7IC8vIENsb25lIG9sZCBsYXllcnMgYXJyYXlcblxuICAgICAgICB0aGlzLnVuZG8gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGxheWVycyA9IG9sZExheWVycy5zbGljZSgwKTtcbiAgICAgICAgICAgIHRoYXQuc2V0QWN0aXZlTGF5ZXJJbmRleChvbGRBY3RpdmVMYXllckluZGV4KTtcblxuICAgICAgICAgICAgaW52YWxpZGF0ZUZ1c2lvbigpO1xuICAgICAgICAgICAgY2FsbExpc3RlbmVyc0xheWVyQ2hhbmdlKCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5yZWRvID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB0aGF0Lm1lcmdlQWxsTGF5ZXJzKGZhbHNlKTtcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLmdldE1lbW9yeVVzZWQgPSBmdW5jdGlvbih1bmRvbmUsIHBhcmFtKSB7XG4gICAgICAgICAgICByZXR1cm4gdW5kb25lID8gMCA6IG9sZExheWVycy5sZW5ndGggKiB3aWR0aCAqIGhlaWdodCAqIENQQ29sb3JCbXAuQllURVNfUEVSX1BJWEVMO1xuICAgICAgICB9O1xuICAgIH1cbiAgICBcbiAgICBDUFVuZG9NZXJnZUFsbExheWVycy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKENQVW5kby5wcm90b3R5cGUpO1xuICAgIENQVW5kb01lcmdlQWxsTGF5ZXJzLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IENQVW5kb01lcmdlQWxsTGF5ZXJzO1xuICAgIFxuICAgIGZ1bmN0aW9uIENQVW5kb01vdmVMYXllcihmcm9tLCB0bykge1xuICAgICAgICB0aGlzLnVuZG8gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmICh0byA8PSBmcm9tKSB7XG4gICAgICAgICAgICAgICAgbW92ZUxheWVyUmVhbCh0bywgZnJvbSArIDEpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBtb3ZlTGF5ZXJSZWFsKHRvIC0gMSwgZnJvbSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5yZWRvID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBtb3ZlTGF5ZXJSZWFsKGZyb20sIHRvKTtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgXG4gICAgQ1BVbmRvTW92ZUxheWVyLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoQ1BVbmRvLnByb3RvdHlwZSk7XG4gICAgQ1BVbmRvTW92ZUxheWVyLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IENQVW5kb01vdmVMYXllcjtcblxuICAgIGZ1bmN0aW9uIENQVW5kb0xheWVyQWxwaGEobGF5ZXJJbmRleCwgYWxwaGEpIHtcbiAgICAgICAgdGhpcy5mcm9tID0gdGhhdC5nZXRMYXllcihsYXllckluZGV4KS5nZXRBbHBoYSgpO1xuICAgICAgICB0aGlzLnRvID0gYWxwaGE7XG4gICAgICAgIHRoaXMubGF5ZXJJbmRleCA9IGxheWVySW5kZXg7XG4gICAgfVxuICAgIFxuICAgIENQVW5kb0xheWVyQWxwaGEucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShDUFVuZG8ucHJvdG90eXBlKTtcbiAgICBDUFVuZG9MYXllckFscGhhLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IENQVW5kb0xheWVyQWxwaGE7XG5cbiAgICBDUFVuZG9MYXllckFscGhhLnByb3RvdHlwZS51bmRvID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHRoYXQuZ2V0TGF5ZXIodGhpcy5sYXllckluZGV4KS5zZXRBbHBoYSh0aGlzLmZyb20pO1xuICAgICAgICBcbiAgICAgICAgaW52YWxpZGF0ZUZ1c2lvbigpO1xuICAgICAgICBjYWxsTGlzdGVuZXJzTGF5ZXJDaGFuZ2UodGhpcy5sYXllckluZGV4KTtcbiAgICB9O1xuXG4gICAgQ1BVbmRvTGF5ZXJBbHBoYS5wcm90b3R5cGUucmVkbyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB0aGF0LmdldExheWVyKHRoaXMubGF5ZXJJbmRleCkuc2V0QWxwaGEodGhpcy50byk7XG4gICAgICAgIFxuICAgICAgICBpbnZhbGlkYXRlRnVzaW9uKCk7XG4gICAgICAgIGNhbGxMaXN0ZW5lcnNMYXllckNoYW5nZSh0aGlzLmxheWVySW5kZXgpO1xuICAgIH1cblxuICAgIENQVW5kb0xheWVyQWxwaGEucHJvdG90eXBlLm1lcmdlID0gZnVuY3Rpb24odSkge1xuICAgICAgICBpZiAodSBpbnN0YW5jZW9mIENQVW5kb0xheWVyQWxwaGEgJiYgdGhpcy5sYXllckluZGV4ID09IHUubGF5ZXJJbmRleCkge1xuICAgICAgICAgICAgdGhpcy50byA9IHUudG87XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfTtcblxuICAgIENQVW5kb0xheWVyQWxwaGEucHJvdG90eXBlLm5vQ2hhbmdlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmZyb20gPT0gdGhpcy50bztcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBDUFVuZG9MYXllck1vZGUobGF5ZXJJbmRleCwgdG8pIHtcbiAgICAgICAgdGhpcy5sYXllckluZGV4ID0gbGF5ZXJJbmRleDtcbiAgICAgICAgdGhpcy5mcm9tID0gdGhhdC5nZXRMYXllcihsYXllckluZGV4KS5nZXRCbGVuZE1vZGUoKTtcbiAgICAgICAgdGhpcy50byA9IHRvO1xuICAgIH1cbiAgICBcbiAgICBDUFVuZG9MYXllck1vZGUucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShDUFVuZG8ucHJvdG90eXBlKTtcbiAgICBDUFVuZG9MYXllck1vZGUucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gQ1BVbmRvTGF5ZXJNb2RlO1xuXG4gICAgQ1BVbmRvTGF5ZXJNb2RlLnByb3RvdHlwZS51bmRvID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHRoYXQuZ2V0TGF5ZXIodGhpcy5sYXllckluZGV4KS5zZXRCbGVuZE1vZGUodGhpcy5mcm9tKTtcbiAgICAgICAgXG4gICAgICAgIGludmFsaWRhdGVGdXNpb24oKTtcbiAgICAgICAgY2FsbExpc3RlbmVyc0xheWVyQ2hhbmdlKCk7XG4gICAgfTtcblxuICAgIENQVW5kb0xheWVyTW9kZS5wcm90b3R5cGUucmVkbyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB0aGF0LmdldExheWVyKHRoaXMubGF5ZXJJbmRleCkuc2V0QmxlbmRNb2RlKHRoaXMudG8pO1xuICAgICAgICBcbiAgICAgICAgaW52YWxpZGF0ZUZ1c2lvbigpO1xuICAgICAgICBjYWxsTGlzdGVuZXJzTGF5ZXJDaGFuZ2UoKTtcbiAgICB9O1xuXG4gICAgQ1BVbmRvTGF5ZXJNb2RlLnByb3RvdHlwZS5tZXJnZSA9IGZ1bmN0aW9uKHUpIHtcbiAgICAgICAgaWYgKHUgaW5zdGFuY2VvZiBDUFVuZG9MYXllck1vZGUgJiYgdGhpcy5sYXllckluZGV4ID09IHUubGF5ZXJJbmRleCkge1xuICAgICAgICAgICAgdGhpcy50byA9IHUudG87XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfTtcblxuICAgIENQVW5kb0xheWVyTW9kZS5wcm90b3R5cGUubm9DaGFuZ2UgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZnJvbSA9PSB0aGlzLnRvO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIENQVW5kb0xheWVyUmVuYW1lKGxheWVySW5kZXgsIHRvKSB7XG4gICAgICAgIHRoaXMubGF5ZXJJbmRleCA9IGxheWVySW5kZXg7XG4gICAgICAgIHRoaXMudG8gPSB0bztcbiAgICAgICAgdGhpcy5mcm9tID0gdGhhdC5nZXRMYXllcihsYXllckluZGV4KS5uYW1lO1xuICAgIH1cbiAgICBcbiAgICBDUFVuZG9MYXllclJlbmFtZS5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKENQVW5kby5wcm90b3R5cGUpO1xuICAgIENQVW5kb0xheWVyUmVuYW1lLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IENQVW5kb0xheWVyUmVuYW1lO1xuICAgIFxuICAgIENQVW5kb0xheWVyUmVuYW1lLnByb3RvdHlwZS51bmRvID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHRoYXQuZ2V0TGF5ZXIodGhpcy5sYXllckluZGV4KS5uYW1lID0gdGhpcy5mcm9tO1xuICAgICAgICBjYWxsTGlzdGVuZXJzTGF5ZXJDaGFuZ2UodGhpcy5sYXllckluZGV4KTtcbiAgICB9O1xuXG4gICAgQ1BVbmRvTGF5ZXJSZW5hbWUucHJvdG90eXBlLnJlZG8gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdGhhdC5nZXRMYXllcih0aGlzLmxheWVySW5kZXgpLm5hbWUgPSB0aGlzLnRvO1xuICAgICAgICBjYWxsTGlzdGVuZXJzTGF5ZXJDaGFuZ2UodGhpcy5sYXllckluZGV4KTtcbiAgICB9O1xuXG4gICAgQ1BVbmRvTGF5ZXJSZW5hbWUucHJvdG90eXBlLm1lcmdlID0gZnVuY3Rpb24odSkge1xuICAgICAgICBpZiAodSBpbnN0YW5jZW9mIENQVW5kb0xheWVyUmVuYW1lICYmIHRoaXMubGF5ZXJJbmRleCA9PSB1LmxheWVySW5kZXgpIHtcbiAgICAgICAgICAgIHRoaXMudG8gPSB1LnRvO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH07XG5cbiAgICBDUFVuZG9MYXllclJlbmFtZS5wcm90b3R5cGUubm9DaGFuZ2UgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZnJvbSA9PSB0aGlzLnRvO1xuICAgIH07XG4gICAgXG4gICAgLyoqXG4gICAgICogQHBhcmFtIGZyb20gQ1BSZWN0XG4gICAgICogQHBhcmFtIHRvIENQUmVjdFxuICAgICAqL1xuICAgIGZ1bmN0aW9uIENQVW5kb1JlY3RhbmdsZVNlbGVjdGlvbihmcm9tLCB0bykge1xuICAgICAgICBmcm9tID0gZnJvbS5jbG9uZSgpO1xuICAgICAgICB0byA9IHRvLmNsb25lKCk7XG5cbiAgICAgICAgdGhpcy51bmRvID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB0aGF0LnNldFNlbGVjdGlvbihmcm9tKTtcbiAgICAgICAgICAgIGNhbGxMaXN0ZW5lcnNVcGRhdGVSZWdpb24odGhhdC5nZXRCb3VuZHMoKSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5yZWRvID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB0aGF0LnNldFNlbGVjdGlvbih0byk7XG4gICAgICAgICAgICBjYWxsTGlzdGVuZXJzVXBkYXRlUmVnaW9uKHRoYXQuZ2V0Qm91bmRzKCkpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMubm9DaGFuZ2UgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiBmcm9tLmVxdWFscyh0byk7XG4gICAgICAgIH07XG4gICAgfVxuICAgIFxuICAgIENQVW5kb1JlY3RhbmdsZVNlbGVjdGlvbi5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKENQVW5kby5wcm90b3R5cGUpO1xuICAgIENQVW5kb1JlY3RhbmdsZVNlbGVjdGlvbi5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBDUFVuZG9SZWN0YW5nbGVTZWxlY3Rpb247XG4gICAgXG4gICAgLyoqXG4gICAgICogVXNlZCB0byBlbmNhcHN1bGF0ZSBtdWx0aXBsZSB1bmRvIG9wZXJhdGlvbiBhcyBvbmVcbiAgICAgKiBcbiAgICAgKiBAcGFyYW0gdW5kb2VzIENQVW5kb1tdIExpc3Qgb2YgdW5kbyBvcGVyYXRpb25zIHRvIGVuY2Fwc3VsYXRlXG4gICAgICovXG4gICAgZnVuY3Rpb24gQ1BNdWx0aVVuZG8odW5kb2VzKSB7XG4gICAgICAgIHRoaXMudW5kb2VzID0gdW5kb2VzO1xuICAgIH1cblxuICAgIENQTXVsdGlVbmRvLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoQ1BVbmRvLnByb3RvdHlwZSk7XG4gICAgQ1BNdWx0aVVuZG8ucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gQ1BNdWx0aVVuZG87XG5cbiAgICBDUE11bHRpVW5kby5wcm90b3R5cGUudW5kbyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBmb3IgKHZhciBpID0gdGhpcy51bmRvZXMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgICAgIHRoaXMudW5kb2VzW2ldLnVuZG8oKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBDUE11bHRpVW5kby5wcm90b3R5cGUucmVkbyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMudW5kb2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB0aGlzLnVuZG9lc1tpXS5yZWRvKCk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgQ1BNdWx0aVVuZG8ucHJvdG90eXBlLm5vQ2hhbmdlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdW5kb2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAoIXVuZG9lc1tpXS5ub0NoYW5nZSgpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9O1xuXG4gICAgQ1BNdWx0aVVuZG8ucHJvdG90eXBlLmdldE1lbW9yeVVzZWQgPSBmdW5jdGlvbih1bmRvbmUsIHBhcmFtKSB7XG4gICAgICAgIHZhclxuICAgICAgICAgICAgdG90YWwgPSAwO1xuICAgICAgICBcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB1bmRvZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHRvdGFsICs9IHVuZG9lc1tpXS5nZXRNZW1vcnlVc2VkKHVuZG9uZSwgcGFyYW0pO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gdG90YWw7XG4gICAgfTtcbiAgICBcbiAgICAvKipcbiAgICAgKiBTdG9yZSBkYXRhIHRvIHVuZG8gYSBjdXQgb3BlcmF0aW9uXG4gICAgICogXG4gICAgICogQHBhcmFtIGJtcCBDUENvbG9yQm1wIFRoZSByZWN0YW5nbGUgb2YgaW1hZ2UgZGF0YSB0aGF0IHdhcyBjdXRcbiAgICAgKiBAcGFyYW0gbGF5ZXJJbmRleCBpbnQgSW5kZXggb2YgdGhlIGxheWVyIHRoZSBjdXQgY2FtZSBmcm9tXG4gICAgICogQHBhcmFtIHNlbGVjdGlvbiBDUFJlY3QgVGhlIGN1dCByZWN0YW5nbGUgY28tb3JkaW5hdGVzXG4gICAgICovXG4gICAgZnVuY3Rpb24gQ1BVbmRvQ3V0KGJtcCwgbGF5ZXJJbmRleCwgc2VsZWN0aW9uKSB7XG4gICAgICAgIHNlbGVjdGlvbiA9IHNlbGVjdGlvbi5jbG9uZSgpO1xuXG4gICAgICAgIHRoaXMudW5kbyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdGhhdC5zZXRBY3RpdmVMYXllckluZGV4KGxheWVySW5kZXgpO1xuICAgICAgICAgICAgY3VyTGF5ZXIuY29weUJpdG1hcFJlY3QoYm1wLCBzZWxlY3Rpb24ubGVmdCwgc2VsZWN0aW9uLnRvcCwgYm1wLmdldEJvdW5kcygpKTtcbiAgICAgICAgICAgIHRoYXQuc2V0U2VsZWN0aW9uKHNlbGVjdGlvbik7XG4gICAgICAgICAgICBpbnZhbGlkYXRlRnVzaW9uUmVjdChzZWxlY3Rpb24pO1xuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMucmVkbyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdGhhdC5zZXRBY3RpdmVMYXllckluZGV4KGxheWVySW5kZXgpO1xuICAgICAgICAgICAgY3VyTGF5ZXIuY2xlYXJSZWN0KHNlbGVjdGlvbiwgRU1QVFlfTEFZRVJfQ09MT1IpO1xuICAgICAgICAgICAgdGhhdC5lbXB0eVNlbGVjdGlvbigpO1xuICAgICAgICAgICAgaW52YWxpZGF0ZUZ1c2lvblJlY3Qoc2VsZWN0aW9uKTtcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLmdldE1lbW9yeVVzZWQgPSBmdW5jdGlvbih1bmRvbmUsIHBhcmFtKSB7XG4gICAgICAgICAgICByZXR1cm4gYm1wID09IHBhcmFtID8gMCA6IGJtcC53aWR0aCAqIGJtcC5oZWlnaHQgKiBDUENvbG9yQm1wLkJZVEVTX1BFUl9QSVhFTDtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgXG4gICAgQ1BVbmRvQ3V0LnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoQ1BVbmRvLnByb3RvdHlwZSk7XG4gICAgQ1BVbmRvQ3V0LnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IENQVW5kb0N1dDtcblxuICAgIC8qKlxuICAgICAqIFN0b3JlIGRhdGEgdG8gdW5kbyBhIHBhc3RlIG9wZXJhdGlvblxuICAgICAqIFxuICAgICAqIEBwYXJhbSBjbGlwIENQQ2xpcFxuICAgICAqIEBwYXJhbSBsYXllckluZGV4IGludFxuICAgICAqIEBwYXJhbSBzZWxlY3Rpb24gQ1BSZWN0XG4gICAgICovXG4gICAgZnVuY3Rpb24gQ1BVbmRvUGFzdGUoY2xpcCwgbGF5ZXJJbmRleCwgc2VsZWN0aW9uKSB7XG4gICAgICAgIHNlbGVjdGlvbiA9IHNlbGVjdGlvbi5jbG9uZSgpO1xuXG4gICAgICAgIHRoaXMudW5kbyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgbGF5ZXJzLnNwbGljZShsYXllckluZGV4ICsgMSwgMSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoYXQuc2V0QWN0aXZlTGF5ZXJJbmRleChsYXllckluZGV4KTtcbiAgICAgICAgICAgIHRoYXQuc2V0U2VsZWN0aW9uKHNlbGVjdGlvbik7XG5cbiAgICAgICAgICAgIGludmFsaWRhdGVGdXNpb25SZWN0KHNlbGVjdGlvbik7XG4gICAgICAgICAgICBjYWxsTGlzdGVuZXJzTGF5ZXJDaGFuZ2UoKTtcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLnJlZG8gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHRoYXQuc2V0QWN0aXZlTGF5ZXJJbmRleChsYXllckluZGV4KTtcbiAgICAgICAgICAgIHBhc3RlQ2xpcChmYWxzZSwgY2xpcCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5nZXRNZW1vcnlVc2VkID0gZnVuY3Rpb24odW5kb25lLCBwYXJhbSkge1xuICAgICAgICAgICAgcmV0dXJuIGNsaXAuYm1wID09IHBhcmFtID8gMCA6IGNsaXAuYm1wLndpZHRoICogY2xpcC5ibXAuaGVpZ2h0ICogNDtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgXG4gICAgQ1BVbmRvUGFzdGUucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShDUFVuZG8ucHJvdG90eXBlKTtcbiAgICBDUFVuZG9QYXN0ZS5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBDUFVuZG9QYXN0ZTtcbn07XG5cbkNQQXJ0d29yay5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKEV2ZW50RW1pdHRlci5wcm90b3R5cGUpO1xuQ1BBcnR3b3JrLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IENQQXJ0d29yaztcblxuQ1BBcnR3b3JrLnByb3RvdHlwZS5nZXRCb3VuZHMgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gbmV3IENQUmVjdCgwLCAwLCB0aGlzLndpZHRoLCB0aGlzLmhlaWdodCk7XG59XG5cbkNQQXJ0d29yay5wcm90b3R5cGUuaXNQb2ludFdpdGhpbiA9IGZ1bmN0aW9uKHgsIHkpIHtcbiAgICByZXR1cm4geCA+PSAwICYmIHkgPj0gMCAmJiB4IDwgdGhpcy53aWR0aCAmJiB5IDwgdGhpcy5oZWlnaHQ7XG59O1xuIiwiLypcbiAgICBDaGlja2VuUGFpbnRcbiAgICBcbiAgICBDaGlja2VuUGFpbnQgaXMgYSB0cmFuc2xhdGlvbiBvZiBDaGliaVBhaW50IGZyb20gSmF2YSB0byBKYXZhU2NyaXB0XG4gICAgYnkgTmljaG9sYXMgU2hlcmxvY2sgLyBDaGlja2VuIFNtb290aGllLlxuICAgIFxuICAgIENoaWJpUGFpbnQgaXMgQ29weXJpZ2h0IChjKSAyMDA2LTIwMDggTWFyYyBTY2hlZmVyXG5cbiAgICBDaGlja2VuUGFpbnQgaXMgZnJlZSBzb2Z0d2FyZTogeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yIG1vZGlmeVxuICAgIGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgYXMgcHVibGlzaGVkIGJ5XG4gICAgdGhlIEZyZWUgU29mdHdhcmUgRm91bmRhdGlvbiwgZWl0aGVyIHZlcnNpb24gMyBvZiB0aGUgTGljZW5zZSwgb3JcbiAgICAoYXQgeW91ciBvcHRpb24pIGFueSBsYXRlciB2ZXJzaW9uLlxuXG4gICAgQ2hpY2tlblBhaW50IGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsXG4gICAgYnV0IFdJVEhPVVQgQU5ZIFdBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2ZcbiAgICBNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuICBTZWUgdGhlXG4gICAgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy5cblxuICAgIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXG4gICAgYWxvbmcgd2l0aCBDaGlja2VuUGFpbnQuIElmIG5vdCwgc2VlIDxodHRwOi8vd3d3LmdudS5vcmcvbGljZW5zZXMvPi5cbiovXG5cbmltcG9ydCBDUFJlY3QgZnJvbSBcIi4uL3V0aWwvQ1BSZWN0XCI7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIENQQml0bWFwKHdpZHRoLCBoZWlnaHQpIHtcbiAgICAvLyBXaWR0aCBhbmQgaGVpZ2h0IGZvcmNlZCB0byBpbnRlZ2Vyc1xuICAgIHRoaXMud2lkdGggPSB3aWR0aCB8IDA7XG4gICAgdGhpcy5oZWlnaHQgPSBoZWlnaHQgfCAwO1xufVxuXG5DUEJpdG1hcC5wcm90b3R5cGUuZ2V0Qm91bmRzID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIG5ldyBDUFJlY3QoMCwgMCwgdGhpcy53aWR0aCwgdGhpcy5oZWlnaHQpO1xufTtcblxuQ1BCaXRtYXAucHJvdG90eXBlLmlzSW5zaWRlID0gZnVuY3Rpb24oeCwgeSkge1xuICAgIHJldHVybiB4ID49IDAgJiYgeSA+PSAwICYmIHggPCB0aGlzLndpZHRoICYmIHkgPCB0aGlzLmhlaWdodDtcbn07IiwiLy8gTGF5ZXIgYmxlbmRpbmcgZnVuY3Rpb25zXG4vL1xuLy8gVGhlIEZ1bGxBbHBoYSB2ZXJzaW9ucyBhcmUgdGhlIG9uZXMgdGhhdCB3b3JrIGluIGFsbCBjYXNlc1xuLy8gb3RoZXJzIG5lZWQgdGhlIGJvdHRvbSBsYXllciB0byBiZSAxMDAlIG9wYXF1ZSBidXQgYXJlIGZhc3RlclxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gQ1BCbGVuZCgpIHtcbn1cblxuY29uc3RcbiAgICBCWVRFU19QRVJfUElYRUwgPSA0LFxuICAgIFxuICAgIFJFRF9CWVRFX09GRlNFVCA9IDAsXG4gICAgR1JFRU5fQllURV9PRkZTRVQgPSAxLFxuICAgIEJMVUVfQllURV9PRkZTRVQgPSAyLFxuICAgIEFMUEhBX0JZVEVfT0ZGU0VUID0gMztcblxuQ1BCbGVuZC5wcm90b3R5cGUuZnVzaW9uV2l0aE11bHRpcGx5ID0gZnVuY3Rpb24odGhhdCwgZnVzaW9uLCByZWN0KSB7XG4gICAgdmFyIFxuICAgICAgICB5U3RyaWRlID0gKHRoYXQud2lkdGggLSByZWN0LmdldFdpZHRoKCkpICogQllURVNfUEVSX1BJWEVMLFxuICAgICAgICBwaXhJbmRleCA9IHRoYXQub2Zmc2V0T2ZQaXhlbChyZWN0LmxlZnQsIHJlY3QudG9wKTtcblxuICAgIGZvciAodmFyIHkgPSByZWN0LnRvcDsgeSA8IHJlY3QuYm90dG9tOyB5KyssIHBpeEluZGV4ICs9IHlTdHJpZGUpIHtcbiAgICAgICAgZm9yICh2YXIgeCA9IHJlY3QubGVmdDsgeCA8IHJlY3QucmlnaHQ7IHgrKykge1xuICAgICAgICAgICAgdmFyIFxuICAgICAgICAgICAgICAgIGFscGhhID0gKHRoYXQuZGF0YVtwaXhJbmRleCArIEFMUEhBX0JZVEVfT0ZGU0VUXSAqIHRoYXQuYWxwaGEgLyAxMDApIHwgMDtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKGFscGhhID4gMCkge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgMzsgaSsrLCBwaXhJbmRleCsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGZ1c2lvbi5kYXRhW3BpeEluZGV4XSA9IChmdXNpb24uZGF0YVtwaXhJbmRleF0gLSAodGhhdC5kYXRhW3BpeEluZGV4XSBeIDB4RkYpICogZnVzaW9uLmRhdGFbcGl4SW5kZXhdICogYWxwaGEgLyAoMjU1ICogMjU1KSkgfCAwO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBwaXhJbmRleCsrOyAvLyBEb24ndCBuZWVkIHRvIHVwZGF0ZSB0aGUgYWxwaGEgYmVjYXVzZSBpdCBzdGFydGVkIG91dCBhcyAxMDAlXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHBpeEluZGV4ICs9IEJZVEVTX1BFUl9QSVhFTDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn07XG5cbi8qIEJsZW5kIG9udG8gYW4gb3BhcXVlIGZ1c2lvbi4gU3VwcG9ydHMgLmFscGhhIDwgMTAwIG9uIHRoaXMgbGF5ZXIgKi9cbkNQQmxlbmQucHJvdG90eXBlLmZ1c2lvbldpdGhOb3JtYWwgPSBmdW5jdGlvbih0aGF0LCBmdXNpb24sIHJlY3QpIHtcbiAgICB2YXJcbiAgICAgICAgeVN0cmlkZSA9ICgodGhhdC53aWR0aCAtIHJlY3QuZ2V0V2lkdGgoKSkgKiBCWVRFU19QRVJfUElYRUwpIHwgMCxcbiAgICAgICAgcGl4SW5kZXggPSB0aGF0Lm9mZnNldE9mUGl4ZWwocmVjdC5sZWZ0LCByZWN0LnRvcCkgfCAwLFxuICAgICAgICBoID0gKHJlY3QuYm90dG9tIC0gcmVjdC50b3ApIHwgMCxcbiAgICAgICAgdyA9IChyZWN0LnJpZ2h0IC0gcmVjdC5sZWZ0KSB8IDA7XG5cbiAgICBmb3IgKHZhciB5ID0gMCA7IHkgPCBoOyB5KyssIHBpeEluZGV4ICs9IHlTdHJpZGUpIHtcbiAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCB3OyB4KyspIHtcbiAgICAgICAgICAgIHZhciBcbiAgICAgICAgICAgICAgICBhbHBoYSA9ICh0aGF0LmRhdGFbcGl4SW5kZXggKyBBTFBIQV9CWVRFX09GRlNFVF0gKiB0aGF0LmFscGhhIC8gMTAwKSB8IDA7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChhbHBoYSA+IDApIHtcbiAgICAgICAgICAgICAgICBpZiAoYWxwaGEgPT0gMjU1KSB7XG4gICAgICAgICAgICAgICAgICAgIGZ1c2lvbi5kYXRhW3BpeEluZGV4XSA9IHRoYXQuZGF0YVtwaXhJbmRleF07XG4gICAgICAgICAgICAgICAgICAgIGZ1c2lvbi5kYXRhW3BpeEluZGV4ICsgMV0gPSB0aGF0LmRhdGFbcGl4SW5kZXggKyAxXTtcbiAgICAgICAgICAgICAgICAgICAgZnVzaW9uLmRhdGFbcGl4SW5kZXggKyAyXSA9IHRoYXQuZGF0YVtwaXhJbmRleCArIDJdO1xuICAgICAgICAgICAgICAgICAgICBmdXNpb24uZGF0YVtwaXhJbmRleCArIDNdID0gMjU1O1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgICAgICAgICAgaW52QWxwaGEgPSAyNTUgLSBhbHBoYTtcblxuICAgICAgICAgICAgICAgICAgICBmdXNpb24uZGF0YVtwaXhJbmRleF0gPSAoKHRoYXQuZGF0YVtwaXhJbmRleF0gKiBhbHBoYSArIGZ1c2lvbi5kYXRhW3BpeEluZGV4XSAqIGludkFscGhhKSAvIDI1NSkgfCAwO1xuICAgICAgICAgICAgICAgICAgICBmdXNpb24uZGF0YVtwaXhJbmRleCArIDFdID0gKCh0aGF0LmRhdGFbcGl4SW5kZXggKyAxXSAqIGFscGhhICsgZnVzaW9uLmRhdGFbcGl4SW5kZXggKyAxXSAqIGludkFscGhhKSAvIDI1NSkgfCAwO1xuICAgICAgICAgICAgICAgICAgICBmdXNpb24uZGF0YVtwaXhJbmRleCArIDJdID0gKCh0aGF0LmRhdGFbcGl4SW5kZXggKyAyXSAqIGFscGhhICsgZnVzaW9uLmRhdGFbcGl4SW5kZXggKyAyXSAqIGludkFscGhhKSAvIDI1NSkgfCAwO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcGl4SW5kZXggKz0gQllURVNfUEVSX1BJWEVMO1xuICAgICAgICB9XG4gICAgfVxufTtcblxuLy8gRnVzaW5nIG9udG8gYW4gb3BhcXVlIGxheWVyIHdoZW4gdGhpcyBsYXllciBoYXMgYWxwaGEgc2V0IHRvIDEwMFxuQ1BCbGVuZC5wcm90b3R5cGUuZnVzaW9uV2l0aE5vcm1hbE5vQWxwaGEgPSBmdW5jdGlvbih0aGF0LCBmdXNpb24sIHJlY3QpIHtcbiAgICB2YXIgXG4gICAgICAgIHlTdHJpZGUgPSAoKHRoYXQud2lkdGggLSByZWN0LmdldFdpZHRoKCkpICogQllURVNfUEVSX1BJWEVMKSB8IDAsXG4gICAgICAgIHBpeEluZGV4ID0gdGhhdC5vZmZzZXRPZlBpeGVsKHJlY3QubGVmdCwgcmVjdC50b3ApIHwgMCxcbiAgICAgICAgaCA9IChyZWN0LmJvdHRvbSAtIHJlY3QudG9wKSB8IDAsXG4gICAgICAgIHcgPSAocmVjdC5yaWdodCAtIHJlY3QubGVmdCkgfCAwO1xuICAgIFxuICAgIGZvciAodmFyIHkgPSAwIDsgeSA8IGg7IHkrKywgcGl4SW5kZXggKz0geVN0cmlkZSkge1xuICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IHc7IHgrKykge1xuICAgICAgICAgICAgdmFyIFxuICAgICAgICAgICAgICAgIGFscGhhID0gdGhhdC5kYXRhW3BpeEluZGV4ICsgQUxQSEFfQllURV9PRkZTRVRdO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoYWxwaGEgPiAwKSB7XG4gICAgICAgICAgICAgICAgaWYgKGFscGhhID09IDI1NSkge1xuICAgICAgICAgICAgICAgICAgICBmdXNpb24uZGF0YVtwaXhJbmRleF0gPSB0aGF0LmRhdGFbcGl4SW5kZXhdO1xuICAgICAgICAgICAgICAgICAgICBmdXNpb24uZGF0YVtwaXhJbmRleCArIDFdID0gdGhhdC5kYXRhW3BpeEluZGV4ICsgMV07XG4gICAgICAgICAgICAgICAgICAgIGZ1c2lvbi5kYXRhW3BpeEluZGV4ICsgMl0gPSB0aGF0LmRhdGFbcGl4SW5kZXggKyAyXTtcbiAgICAgICAgICAgICAgICAgICAgZnVzaW9uLmRhdGFbcGl4SW5kZXggKyAzXSA9IHRoYXQuZGF0YVtwaXhJbmRleCArIDNdO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBcbiAgICAgICAgICAgICAgICAgICAgICAgIGludkFscGhhID0gMjU1IC0gYWxwaGE7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGZ1c2lvbi5kYXRhW3BpeEluZGV4XSA9ICh0aGF0LmRhdGFbcGl4SW5kZXhdICogYWxwaGEgKyBmdXNpb24uZGF0YVtwaXhJbmRleF0gKiBpbnZBbHBoYSkgLyAyNTU7XG4gICAgICAgICAgICAgICAgICAgIGZ1c2lvbi5kYXRhW3BpeEluZGV4ICsgMV0gPSAodGhhdC5kYXRhW3BpeEluZGV4ICsgMV0gKiBhbHBoYSArIGZ1c2lvbi5kYXRhW3BpeEluZGV4ICsgMV0gKiBpbnZBbHBoYSkgLyAyNTU7XG4gICAgICAgICAgICAgICAgICAgIGZ1c2lvbi5kYXRhW3BpeEluZGV4ICsgMl0gPSAodGhhdC5kYXRhW3BpeEluZGV4ICsgMl0gKiBhbHBoYSArIGZ1c2lvbi5kYXRhW3BpeEluZGV4ICsgMl0gKiBpbnZBbHBoYSkgLyAyNTU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBwaXhJbmRleCArPSBCWVRFU19QRVJfUElYRUw7XG4gICAgICAgIH1cbiAgICB9XG59O1xuXG5DUEJsZW5kLnByb3RvdHlwZS5mdXNpb25XaXRoQWRkID0gZnVuY3Rpb24odGhhdCwgZnVzaW9uLCByZWN0KSB7XG4gICAgdmFyIFxuICAgICAgICB5U3RyaWRlID0gKHRoYXQud2lkdGggLSByZWN0LmdldFdpZHRoKCkpICogQllURVNfUEVSX1BJWEVMLFxuICAgICAgICBwaXhJbmRleCA9IHRoYXQub2Zmc2V0T2ZQaXhlbChyZWN0LmxlZnQsIHJlY3QudG9wKTtcblxuICAgIGZvciAodmFyIHkgPSByZWN0LnRvcDsgeSA8IHJlY3QuYm90dG9tOyB5KyssIHBpeEluZGV4ICs9IHlTdHJpZGUpIHtcbiAgICAgICAgZm9yICh2YXIgeCA9IHJlY3QubGVmdDsgeCA8IHJlY3QucmlnaHQ7IHgrKykge1xuICAgICAgICAgICAgdmFyIFxuICAgICAgICAgICAgICAgIGFscGhhID0gKHRoYXQuZGF0YVtwaXhJbmRleCArIEFMUEhBX0JZVEVfT0ZGU0VUXSAqIHRoYXQuYWxwaGEgLyAxMDApIHwgMDtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKGFscGhhID4gMCkge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgMzsgaSsrLCBwaXhJbmRleCsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGZ1c2lvbi5kYXRhW3BpeEluZGV4XSA9IE1hdGgubWluKDI1NSwgKGZ1c2lvbi5kYXRhW3BpeEluZGV4XSArIGFscGhhICogdGhhdC5kYXRhW3BpeEluZGV4XSAvIDI1NSkgfCAwKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcGl4SW5kZXgrKzsgLy8gRG9uJ3QgbmVlZCB0byB1cGRhdGUgdGhlIGFscGhhIGJlY2F1c2UgaXQgc3RhcnRlZCBvdXQgYXMgMTAwJVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBwaXhJbmRleCArPSBCWVRFU19QRVJfUElYRUw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59O1xuXG4vLyBOb3JtYWwgQWxwaGEgTW9kZVxuLy8gQyA9IEEqZCArIEIqKDEtZCkgYW5kIGQgPSBhYSAvIChhYSArIGFiIC0gYWEqYWIpXG5DUEJsZW5kLnByb3RvdHlwZS5mdXNpb25XaXRoTm9ybWFsRnVsbEFscGhhID0gZnVuY3Rpb24odGhhdCwgZnVzaW9uLCByZWN0KSB7XG4gICAgdmFyXG4gICAgICAgIHlTdHJpZGUgPSAoKHRoYXQud2lkdGggLSByZWN0LmdldFdpZHRoKCkpICogQllURVNfUEVSX1BJWEVMKSB8IDAsXG4gICAgICAgIHBpeEluZGV4ID0gdGhhdC5vZmZzZXRPZlBpeGVsKHJlY3QubGVmdCwgcmVjdC50b3ApIHwgMCxcbiAgICAgICAgaCA9IChyZWN0LmJvdHRvbSAtIHJlY3QudG9wKSB8IDAsXG4gICAgICAgIHcgPSAocmVjdC5yaWdodCAtIHJlY3QubGVmdCkgfCAwO1xuXG4gICAgZm9yICh2YXIgeSA9IDAgOyB5IDwgaDsgeSsrLCBwaXhJbmRleCArPSB5U3RyaWRlKSB7XG4gICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgdzsgeCsrKSB7XG4gICAgICAgICAgICB2YXIgXG4gICAgICAgICAgICAgICAgYWxwaGExID0gKHRoYXQuZGF0YVtwaXhJbmRleCArIEFMUEhBX0JZVEVfT0ZGU0VUXSAqIHRoYXQuYWxwaGEpIC8gMTAwLFxuICAgICAgICAgICAgICAgIGFscGhhMiA9IChmdXNpb24uZGF0YVtwaXhJbmRleCArIEFMUEhBX0JZVEVfT0ZGU0VUXSAqIGZ1c2lvbi5hbHBoYSkgLyAxMDAsXG5cbiAgICAgICAgICAgICAgICBuZXdBbHBoYSA9IChhbHBoYTEgKyBhbHBoYTIgLSBhbHBoYTEgKiBhbHBoYTIgLyAyNTUpIHwgMDtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKG5ld0FscGhhID4gMCkge1xuICAgICAgICAgICAgICAgIHZhciBcbiAgICAgICAgICAgICAgICAgICAgcmVhbEFscGhhID0gKGFscGhhMSAqIDI1NSAvIG5ld0FscGhhKSB8IDAsXG4gICAgICAgICAgICAgICAgICAgIGludkFscGhhID0gMjU1IC0gcmVhbEFscGhhO1xuXG4gICAgICAgICAgICAgICAgZnVzaW9uLmRhdGFbcGl4SW5kZXhdID0gKHRoYXQuZGF0YVtwaXhJbmRleF0gKiByZWFsQWxwaGEgKyBmdXNpb24uZGF0YVtwaXhJbmRleF0gKiBpbnZBbHBoYSkgLyAyNTU7XG4gICAgICAgICAgICAgICAgZnVzaW9uLmRhdGFbcGl4SW5kZXggKyAxXSA9ICh0aGF0LmRhdGFbcGl4SW5kZXggKyAxXSAqIHJlYWxBbHBoYSArIGZ1c2lvbi5kYXRhW3BpeEluZGV4ICsgMV0gKiBpbnZBbHBoYSkgLyAyNTU7XG4gICAgICAgICAgICAgICAgZnVzaW9uLmRhdGFbcGl4SW5kZXggKyAyXSA9ICh0aGF0LmRhdGFbcGl4SW5kZXggKyAyXSAqIHJlYWxBbHBoYSArIGZ1c2lvbi5kYXRhW3BpeEluZGV4ICsgMl0gKiBpbnZBbHBoYSkgLyAyNTU7XG4gICAgICAgICAgICAgICAgZnVzaW9uLmRhdGFbcGl4SW5kZXggKyAzXSA9IG5ld0FscGhhO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBwaXhJbmRleCArPSBCWVRFU19QRVJfUElYRUw7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdXNpb24uYWxwaGEgPSAxMDA7XG59O1xuXG4vLyBNdWx0aXBseSBNb2RlXG4vLyBDID0gKEEqYWEqKDEtYWIpICsgQiphYiooMS1hYSkgKyBBKkIqYWEqYWIpIC8gKGFhICsgYWIgLSBhYSphYilcblxuQ1BCbGVuZC5wcm90b3R5cGUuZnVzaW9uV2l0aE11bHRpcGx5RnVsbEFscGhhID0gZnVuY3Rpb24odGhhdCwgZnVzaW9uLCByZWN0KSB7XG4gICAgdmFyXG4gICAgICAgIHlTdHJpZGUgPSAodGhhdC53aWR0aCAtIHJlY3QuZ2V0V2lkdGgoKSkgKiBCWVRFU19QRVJfUElYRUwsXG4gICAgICAgIHBpeEluZGV4ID0gdGhhdC5vZmZzZXRPZlBpeGVsKHJlY3QubGVmdCwgcmVjdC50b3ApO1xuXG4gICAgZm9yICh2YXIgeSA9IHJlY3QudG9wOyB5IDwgcmVjdC5ib3R0b207IHkrKywgcGl4SW5kZXggKz0geVN0cmlkZSkge1xuICAgICAgICBmb3IgKHZhciB4ID0gcmVjdC5sZWZ0OyB4IDwgcmVjdC5yaWdodDsgeCsrKSB7XG4gICAgICAgICAgICB2YXIgXG4gICAgICAgICAgICAgICAgYWxwaGExID0gKHRoYXQuZGF0YVtwaXhJbmRleCArIEFMUEhBX0JZVEVfT0ZGU0VUXSAqIHRoYXQuYWxwaGEpIC8gMTAwLFxuICAgICAgICAgICAgICAgIGFscGhhMiA9IChmdXNpb24uZGF0YVtwaXhJbmRleCArIEFMUEhBX0JZVEVfT0ZGU0VUXSAqIGZ1c2lvbi5hbHBoYSkgLyAxMDAsXG5cbiAgICAgICAgICAgICAgICBuZXdBbHBoYSA9IChhbHBoYTEgKyBhbHBoYTIgLSBhbHBoYTEgKiBhbHBoYTIgLyAyNTUpIHwgMDtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKG5ld0FscGhhID4gMCkge1xuICAgICAgICAgICAgICAgIHZhciBcbiAgICAgICAgICAgICAgICAgICAgYWxwaGExMiA9IChhbHBoYTEgKiBhbHBoYTIgLyAyNTUpIHwgMCxcbiAgICAgICAgICAgICAgICAgICAgYWxwaGExbjIgPSAoYWxwaGExICogKGFscGhhMiBeIDB4RkYpIC8gMjU1KSB8IDAsXG4gICAgICAgICAgICAgICAgICAgIGFscGhhbjEyID0gKChhbHBoYTEgXiAweGZmKSAqIGFscGhhMiAvIDI1NSkgfCAwO1xuXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAzOyBpKyssIHBpeEluZGV4KyspIHtcbiAgICAgICAgICAgICAgICAgICAgZnVzaW9uLmRhdGFbcGl4SW5kZXhdID0gKCh0aGF0LmRhdGFbcGl4SW5kZXhdICogYWxwaGExbjIgKyBmdXNpb24uZGF0YVtwaXhJbmRleF0gKiBhbHBoYW4xMiArIHRoYXQuZGF0YVtwaXhJbmRleF1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIGZ1c2lvbi5kYXRhW3BpeEluZGV4XSAqIGFscGhhMTIgLyAyNTUpIC8gbmV3QWxwaGEpIHwgMDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZnVzaW9uLmRhdGFbcGl4SW5kZXgrK10gPSBuZXdBbHBoYTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcGl4SW5kZXggKz0gQllURVNfUEVSX1BJWEVMO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIGZ1c2lvbi5hbHBoYSA9IDEwMDtcbn07XG5cbi8vIExpbmVhciBEb2RnZSAoQWRkKSBNb2RlXG4vLyBDID0gKGFhICogQSArIGFiICogQikgLyAoYWEgKyBhYiAtIGFhKmFiKVxuXG5DUEJsZW5kLnByb3RvdHlwZS5mdXNpb25XaXRoQWRkRnVsbEFscGhhID0gZnVuY3Rpb24odGhhdCwgZnVzaW9uLCByZWN0KSB7XG4gICAgdmFyXG4gICAgICAgIHlTdHJpZGUgPSAodGhhdC53aWR0aCAtIHJlY3QuZ2V0V2lkdGgoKSkgKiBCWVRFU19QRVJfUElYRUwsXG4gICAgICAgIHBpeEluZGV4ID0gdGhhdC5vZmZzZXRPZlBpeGVsKHJlY3QubGVmdCwgcmVjdC50b3ApO1xuXG4gICAgZm9yICh2YXIgeSA9IHJlY3QudG9wOyB5IDwgcmVjdC5ib3R0b207IHkrKywgcGl4SW5kZXggKz0geVN0cmlkZSkge1xuICAgICAgICBmb3IgKHZhciB4ID0gcmVjdC5sZWZ0OyB4IDwgcmVjdC5yaWdodDsgeCsrKSB7XG4gICAgICAgICAgICB2YXIgXG4gICAgICAgICAgICAgICAgYWxwaGExID0gKHRoYXQuZGF0YVtwaXhJbmRleCArIEFMUEhBX0JZVEVfT0ZGU0VUXSAqIHRoYXQuYWxwaGEpIC8gMTAwLFxuICAgICAgICAgICAgICAgIGFscGhhMiA9IChmdXNpb24uZGF0YVtwaXhJbmRleCArIEFMUEhBX0JZVEVfT0ZGU0VUXSAqIGZ1c2lvbi5hbHBoYSkgLyAxMDAsXG5cbiAgICAgICAgICAgICAgICBuZXdBbHBoYSA9IChhbHBoYTEgKyBhbHBoYTIgLSBhbHBoYTEgKiBhbHBoYTIgLyAyNTUpIHwgMDtcblxuICAgICAgICAgICAgaWYgKG5ld0FscGhhID4gMCkge1xuXG4gICAgICAgICAgICAgICAgLypcbiAgICAgICAgICAgICAqIC8vIHRoaXMgdmVyc2lvbiBzZWVtcyBzbG93ZXIgdGhhbiB0aGUgTWF0aC5taW4gb25lIGludCByID0gKGFscGhhMiAqIChjb2xvcjIgPj4+IDE2ICYgMHhmZikgK1xuICAgICAgICAgICAgICogYWxwaGExICogKGNvbG9yMSA+Pj4gMTYgJiAweGZmKSkgLyBuZXdBbHBoYTsgciB8PSAoKH4oKHIgJiAweGZmZmZmZjAwKSAtIDEpID4+IDE2KSB8IHIpICYgMHhmZjtcbiAgICAgICAgICAgICAqIGludCBnID0gKGFscGhhMiAqIChjb2xvcjIgPj4+IDggJiAweGZmKSArIGFscGhhMSAqIChjb2xvcjEgPj4+IDggJiAweGZmKSkgLyBuZXdBbHBoYTsgZyB8PSAoKH4oKGcgJlxuICAgICAgICAgICAgICogMHhmZmZmZmYwMCkgLSAxKSA+PiAxNikgfCBnKSAmIDB4ZmY7IGludCBiID0gKGFscGhhMiAqIChjb2xvcjIgJiAweGZmKSArIGFscGhhMSAqIChjb2xvcjEgJlxuICAgICAgICAgICAgICogMHhmZikpIC8gbmV3QWxwaGE7IGIgfD0gKCh+KChiICYgMHhmZmZmZmYwMCkgLSAxKSA+PiAxNikgfCBiKSAmIDB4ZmY7XG4gICAgICAgICAgICAgKi9cblxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgMzsgaSsrLCBwaXhJbmRleCsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGZ1c2lvbi5kYXRhW3BpeEluZGV4XSA9IE1hdGgubWluKDI1NSwgKChhbHBoYTIgKiBmdXNpb24uZGF0YVtwaXhJbmRleF0gKyBhbHBoYTEgKiB0aGF0LmRhdGFbcGl4SW5kZXhdKSAvIG5ld0FscGhhKSB8IDApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBmdXNpb24uZGF0YVtwaXhJbmRleCsrXSA9IG5ld0FscGhhO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBwaXhJbmRleCArPSBCWVRFU19QRVJfUElYRUw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgZnVzaW9uLmFscGhhID0gMTAwO1xufTtcblxuLy8gTGluZWFyIEJ1cm4gKFN1YikgTW9kZVxuLy8gQyA9IChhYSAqIEEgKyBhYiAqIEIgLSBhYSphYiApIC8gKGFhICsgYWIgLSBhYSphYilcblxuQ1BCbGVuZC5wcm90b3R5cGUuZnVzaW9uV2l0aFN1YnRyYWN0RnVsbEFscGhhID0gZnVuY3Rpb24odGhhdCwgZnVzaW9uLCByZWN0KSB7XG4gICAgdmFyXG4gICAgICAgIHlTdHJpZGUgPSAodGhhdC53aWR0aCAtIHJlY3QuZ2V0V2lkdGgoKSkgKiBCWVRFU19QRVJfUElYRUwsXG4gICAgICAgIHBpeEluZGV4ID0gdGhhdC5vZmZzZXRPZlBpeGVsKHJlY3QubGVmdCwgcmVjdC50b3ApO1xuXG4gICAgZm9yICh2YXIgeSA9IHJlY3QudG9wOyB5IDwgcmVjdC5ib3R0b207IHkrKywgcGl4SW5kZXggKz0geVN0cmlkZSkge1xuICAgICAgICBmb3IgKHZhciB4ID0gcmVjdC5sZWZ0OyB4IDwgcmVjdC5yaWdodDsgeCsrKSB7XG4gICAgICAgICAgICB2YXIgXG4gICAgICAgICAgICAgICAgYWxwaGExID0gKCh0aGF0LmRhdGFbcGl4SW5kZXggKyBBTFBIQV9CWVRFX09GRlNFVF0gKiB0aGF0LmFscGhhKSAvIDEwMCkgfCAwLFxuICAgICAgICAgICAgICAgIGFscGhhMiA9ICgoZnVzaW9uLmRhdGFbcGl4SW5kZXggKyBBTFBIQV9CWVRFX09GRlNFVF0gKiBmdXNpb24uYWxwaGEpIC8gMTAwKSB8IDAsXG5cbiAgICAgICAgICAgICAgICBuZXdBbHBoYSA9IChhbHBoYTEgKyBhbHBoYTIgLSBhbHBoYTEgKiBhbHBoYTIgLyAyNTUpIHwgMDtcblxuICAgICAgICAgICAgaWYgKG5ld0FscGhhID4gMCkge1xuICAgICAgICAgICAgICAgIHZhciBcbiAgICAgICAgICAgICAgICAgICAgYWxwaGExMiA9IGFscGhhMSAqIGFscGhhMjtcblxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgMzsgaSsrLCBwaXhJbmRleCsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5uZWwgPSAoYWxwaGEyICogZnVzaW9uLmRhdGFbcGl4SW5kZXhdICsgYWxwaGExICogdGhhdC5kYXRhW3BpeEluZGV4XSAtIGFscGhhMTIpIC8gbmV3QWxwaGE7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAvLyBiaW5hcnkgbWFnaWMgdG8gY2xhbXAgbmVnYXRpdmUgdmFsdWVzIHRvIHplcm8gd2l0aG91dCB1c2luZyBhIGNvbmRpdGlvblxuICAgICAgICAgICAgICAgICAgICBmdXNpb24uZGF0YVtwaXhJbmRleF0gPSBjaGFubmVsICYgKH5jaGFubmVsID4+PiAyNCk7IFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBmdXNpb24uZGF0YVtwaXhJbmRleCsrXSA9IG5ld0FscGhhO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBwaXhJbmRleCArPSBCWVRFU19QRVJfUElYRUw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgZnVzaW9uLmFscGhhID0gMTAwO1xufTtcblxuLy8gRm9yIG9wYXF1ZSBmdXNpb25cbkNQQmxlbmQucHJvdG90eXBlLmZ1c2lvbldpdGhTdWJ0cmFjdCA9IGZ1bmN0aW9uKHRoYXQsIGZ1c2lvbiwgcmVjdCkge1xuICAgIHZhclxuICAgICAgICB5U3RyaWRlID0gKCh0aGF0LndpZHRoIC0gcmVjdC5nZXRXaWR0aCgpKSAqIEJZVEVTX1BFUl9QSVhFTCkgfCAwLFxuICAgICAgICBwaXhJbmRleCA9IHRoYXQub2Zmc2V0T2ZQaXhlbChyZWN0LmxlZnQsIHJlY3QudG9wKSB8IDA7XG5cbiAgICBmb3IgKHZhciB5ID0gcmVjdC50b3A7IHkgPCByZWN0LmJvdHRvbTsgeSsrLCBwaXhJbmRleCArPSB5U3RyaWRlKSB7XG4gICAgICAgIGZvciAodmFyIHggPSByZWN0LmxlZnQ7IHggPCByZWN0LnJpZ2h0OyB4KyspIHtcbiAgICAgICAgICAgIHZhciBcbiAgICAgICAgICAgICAgICBhbHBoYTEgPSAoKHRoYXQuZGF0YVtwaXhJbmRleCArIEFMUEhBX0JZVEVfT0ZGU0VUXSAqIHRoYXQuYWxwaGEpIC8gMTAwKSB8IDAsXG4gICAgICAgICAgICAgICAgYWxwaGExMiA9IGFscGhhMSAqIDI1NTtcblxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAzOyBpKyssIHBpeEluZGV4KyspIHtcbiAgICAgICAgICAgICAgICB2YXIgXG4gICAgICAgICAgICAgICAgICAgIGNoYW5uZWwgPSAoMjU1ICogZnVzaW9uLmRhdGFbcGl4SW5kZXhdICsgYWxwaGExICogdGhhdC5kYXRhW3BpeEluZGV4XSAtIGFscGhhMTIpIC8gMjU1O1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIGJpbmFyeSBtYWdpYyB0byBjbGFtcCBuZWdhdGl2ZSB2YWx1ZXMgdG8gemVybyB3aXRob3V0IHVzaW5nIGEgY29uZGl0aW9uXG4gICAgICAgICAgICAgICAgZnVzaW9uLmRhdGFbcGl4SW5kZXhdID0gY2hhbm5lbCAmICh+Y2hhbm5lbCA+Pj4gMjQpOyBcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHBpeEluZGV4Kys7IC8vIEFscGhhIHN0YXlzIHRoZSBzYW1lXG4gICAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgZnVzaW9uLmFscGhhID0gMTAwO1xufTtcblxuLy8gU2NyZWVuIE1vZGVcbi8vIHNhbWUgYXMgTXVsdGlwbHkgZXhjZXB0IGFsbCBjb2xvciBjaGFubmVscyBhcmUgaW52ZXJ0ZWQgYW5kIHRoZSByZXN1bHQgdG9vXG4vLyBDID0gMSAtICgoKDEtQSkqYWEqKDEtYWIpICsgKDEtQikqYWIqKDEtYWEpICsgKDEtQSkqKDEtQikqYWEqYWIpIC8gKGFhICsgYWIgLSBhYSphYikpXG5cbkNQQmxlbmQucHJvdG90eXBlLmZ1c2lvbldpdGhTY3JlZW5GdWxsQWxwaGEgPSBmdW5jdGlvbih0aGF0LCBmdXNpb24sIHJlY3QpIHtcbiAgICB2YXJcbiAgICAgICAgeVN0cmlkZSA9ICh0aGF0LndpZHRoIC0gcmVjdC5nZXRXaWR0aCgpKSAqIEJZVEVTX1BFUl9QSVhFTCxcbiAgICAgICAgcGl4SW5kZXggPSB0aGF0Lm9mZnNldE9mUGl4ZWwocmVjdC5sZWZ0LCByZWN0LnRvcCk7XG5cbiAgICBmb3IgKHZhciB5ID0gcmVjdC50b3A7IHkgPCByZWN0LmJvdHRvbTsgeSsrLCBwaXhJbmRleCArPSB5U3RyaWRlKSB7XG4gICAgICAgIGZvciAodmFyIHggPSByZWN0LmxlZnQ7IHggPCByZWN0LnJpZ2h0OyB4KyspIHtcbiAgICAgICAgICAgIHZhciBcbiAgICAgICAgICAgICAgICBhbHBoYTEgPSAoKHRoYXQuZGF0YVtwaXhJbmRleCArIEFMUEhBX0JZVEVfT0ZGU0VUXSAqIHRoYXQuYWxwaGEpIC8gMTAwKSB8IDAsXG4gICAgICAgICAgICAgICAgYWxwaGEyID0gKChmdXNpb24uZGF0YVtwaXhJbmRleCArIEFMUEhBX0JZVEVfT0ZGU0VUXSAqIGZ1c2lvbi5hbHBoYSkgLyAxMDApIHwgMCxcblxuICAgICAgICAgICAgICAgIG5ld0FscGhhID0gKGFscGhhMSArIGFscGhhMiAtIGFscGhhMSAqIGFscGhhMiAvIDI1NSkgfCAwO1xuXG4gICAgICAgICAgICBpZiAobmV3QWxwaGEgPiAwKSB7XG4gICAgICAgICAgICAgICAgdmFyIFxuICAgICAgICAgICAgICAgICAgICBhbHBoYTEyID0gKGFscGhhMSAqIGFscGhhMiAvIDI1NSkgfCAwLFxuICAgICAgICAgICAgICAgICAgICBhbHBoYTFuMiA9IChhbHBoYTEgKiAoYWxwaGEyIF4gMHhGRikgLyAyNTUpIHwgMCxcbiAgICAgICAgICAgICAgICAgICAgYWxwaGFuMTIgPSAoKGFscGhhMSBeIDB4ZmYpICogYWxwaGEyIC8gMjU1KSB8IDA7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAzOyBpKyssIHBpeEluZGV4KyspIHtcbiAgICAgICAgICAgICAgICAgICAgZnVzaW9uLmRhdGFbcGl4SW5kZXhdID0gMHhGRiBeIChcbiAgICAgICAgICAgICAgICAgICAgICAgIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAodGhhdC5kYXRhW3BpeEluZGV4XSBeIDB4RkYpICogYWxwaGExbjJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICArIChmdXNpb24uZGF0YVtwaXhJbmRleF0gXiAweEZGKSAqIGFscGhhbjEyIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgKHRoYXQuZGF0YVtwaXhJbmRleF0gXiAweEZGKSAqIChmdXNpb24uZGF0YVtwaXhJbmRleF0gXiAweEZGKSAqIGFscGhhMTIgLyAyNTVcbiAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgIC8gbmV3QWxwaGFcbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZnVzaW9uLmRhdGFbcGl4SW5kZXgrK10gPSBuZXdBbHBoYTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcGl4SW5kZXggKz0gQllURVNfUEVSX1BJWEVMO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIGZ1c2lvbi5hbHBoYSA9IDEwMDtcbn07XG5cbi8vIEZvciBvcGFxdWUgZnVzaW9uXG5DUEJsZW5kLnByb3RvdHlwZS5mdXNpb25XaXRoU2NyZWVuID0gZnVuY3Rpb24odGhhdCwgZnVzaW9uLCByZWN0KSB7XG4gICAgdmFyXG4gICAgICAgIHlTdHJpZGUgPSAoKHRoYXQud2lkdGggLSByZWN0LmdldFdpZHRoKCkpICogQllURVNfUEVSX1BJWEVMKSB8IDAsXG4gICAgICAgIHBpeEluZGV4ID0gdGhhdC5vZmZzZXRPZlBpeGVsKHJlY3QubGVmdCwgcmVjdC50b3ApIHwgMDtcblxuICAgIGZvciAodmFyIHkgPSByZWN0LnRvcDsgeSA8IHJlY3QuYm90dG9tOyB5KyssIHBpeEluZGV4ICs9IHlTdHJpZGUpIHtcbiAgICAgICAgZm9yICh2YXIgeCA9IHJlY3QubGVmdDsgeCA8IHJlY3QucmlnaHQ7IHgrKykge1xuICAgICAgICAgICAgdmFyIFxuICAgICAgICAgICAgICAgIGFscGhhMSA9ICgodGhhdC5kYXRhW3BpeEluZGV4ICsgQUxQSEFfQllURV9PRkZTRVRdICogdGhhdC5hbHBoYSkgLyAxMDApIHwgMCxcbiAgICAgICAgICAgICAgICBpbnZBbHBoYTEgPSBhbHBoYTEgXiAweGZmO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IDM7IGkrKywgcGl4SW5kZXgrKykge1xuICAgICAgICAgICAgICAgIGZ1c2lvbi5kYXRhW3BpeEluZGV4XSA9IDB4RkYgXiAoXG4gICAgICAgICAgICAgICAgICAgIChcbiAgICAgICAgICAgICAgICAgICAgICAgIChmdXNpb24uZGF0YVtwaXhJbmRleF0gXiAweEZGKSAqIGludkFscGhhMVxuICAgICAgICAgICAgICAgICAgICAgICAgKyAodGhhdC5kYXRhW3BpeEluZGV4XSBeIDB4RkYpICogKGZ1c2lvbi5kYXRhW3BpeEluZGV4XSBeIDB4RkYpICogYWxwaGExIC8gMjU1XG4gICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgLyAyNTVcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcGl4SW5kZXgrKzsgLy8gQWxwaGEgc3RheXMgdGhlIHNhbWVcbiAgICAgICAgfVxuICAgIH1cbiAgICBcbiAgICBmdXNpb24uYWxwaGEgPSAxMDA7XG59O1xuXG4vLyBMaWdodGVuIE1vZGVcbi8vIGlmIEIgPj0gQTogQyA9IEEqZCArIEIqKDEtZCkgYW5kIGQgPSBhYSAqICgxLWFiKSAvIChhYSArIGFiIC0gYWEqYWIpXG4vLyBpZiBBID4gQjogQyA9IEIqZCArIEEqKDEtZCkgYW5kIGQgPSBhYiAqICgxLWFhKSAvIChhYSArIGFiIC0gYWEqYWIpXG5cbkNQQmxlbmQucHJvdG90eXBlLmZ1c2lvbldpdGhMaWdodGVuRnVsbEFscGhhID0gZnVuY3Rpb24odGhhdCwgZnVzaW9uLCByZWN0KSB7XG4gICAgdmFyXG4gICAgICAgIHlTdHJpZGUgPSAodGhhdC53aWR0aCAtIHJlY3QuZ2V0V2lkdGgoKSkgKiBCWVRFU19QRVJfUElYRUwsXG4gICAgICAgIHBpeEluZGV4ID0gdGhhdC5vZmZzZXRPZlBpeGVsKHJlY3QubGVmdCwgcmVjdC50b3ApO1xuXG4gICAgZm9yICh2YXIgeSA9IHJlY3QudG9wOyB5IDwgcmVjdC5ib3R0b207IHkrKywgcGl4SW5kZXggKz0geVN0cmlkZSkge1xuICAgICAgICBmb3IgKHZhciB4ID0gcmVjdC5sZWZ0OyB4IDwgcmVjdC5yaWdodDsgeCsrKSB7XG4gICAgICAgICAgICB2YXIgXG4gICAgICAgICAgICAgICAgYWxwaGExID0gKCh0aGF0LmRhdGFbcGl4SW5kZXggKyBBTFBIQV9CWVRFX09GRlNFVF0gKiB0aGF0LmFscGhhKSAvIDEwMCkgfCAwLFxuICAgICAgICAgICAgICAgIGFscGhhMiA9ICgoZnVzaW9uLmRhdGFbcGl4SW5kZXggKyBBTFBIQV9CWVRFX09GRlNFVF0gKiBmdXNpb24uYWxwaGEpIC8gMTAwKSB8IDAsXG5cbiAgICAgICAgICAgICAgICBuZXdBbHBoYSA9IChhbHBoYTEgKyBhbHBoYTIgLSBhbHBoYTEgKiBhbHBoYTIgLyAyNTUpIHwgMDtcblxuICAgICAgICAgICAgaWYgKG5ld0FscGhhID4gMCkge1xuICAgICAgICAgICAgICAgIHZhciBcbiAgICAgICAgICAgICAgICAvLyBUaGlzIGFscGhhIGlzIHVzZWQgd2hlbiBjb2xvcjEgPiBjb2xvcjJcbiAgICAgICAgICAgICAgICAgICAgYWxwaGExMiA9IChhbHBoYTIgKiAoYWxwaGExIF4gMHhmZikgLyBuZXdBbHBoYSkgfCAwLFxuICAgICAgICAgICAgICAgICAgICBpbnZBbHBoYTEyID0gYWxwaGExMiBeIDB4RkYsXG5cbiAgICAgICAgICAgICAgICAvLyBUaGlzIGFscGhhIGlzIHVzZWQgd2hlbiBjb2xvcjIgPiBjb2xvcjFcbiAgICAgICAgICAgICAgICAgICAgYWxwaGEyMSA9IChhbHBoYTEgKiAoYWxwaGEyIF4gMHhmZikgLyBuZXdBbHBoYSkgfCAwLFxuICAgICAgICAgICAgICAgICAgICBpbnZBbHBoYTIxID0gYWxwaGEyMSBeIDB4RkY7XG5cbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IDM7IGkrKywgcGl4SW5kZXgrKykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgXG4gICAgICAgICAgICAgICAgICAgICAgICBjMSA9IHRoYXQuZGF0YVtwaXhJbmRleF0sXG4gICAgICAgICAgICAgICAgICAgICAgICBjMiA9IGZ1c2lvbi5kYXRhW3BpeEluZGV4XTtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGZ1c2lvbi5kYXRhW3BpeEluZGV4XSA9ICgoKGMyID49IGMxKSA/IChjMSAqIGFscGhhMjEgKyBjMiAqIGludkFscGhhMjEpIDogKGMyICogYWxwaGExMiArIGMxICogaW52QWxwaGExMikpIC8gMjU1KSB8IDA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZ1c2lvbi5kYXRhW3BpeEluZGV4KytdID0gbmV3QWxwaGE7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHBpeEluZGV4ICs9IEJZVEVTX1BFUl9QSVhFTDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBcbiAgICBmdXNpb24uYWxwaGEgPSAxMDA7XG59XG5cbi8vIFdoZW4gZnVzaW9uIGlzIG9wYXF1ZVxuQ1BCbGVuZC5wcm90b3R5cGUuZnVzaW9uV2l0aExpZ2h0ZW4gPSBmdW5jdGlvbih0aGF0LCBmdXNpb24sIHJlY3QpIHtcbiAgICB2YXJcbiAgICAgICAgeVN0cmlkZSA9ICh0aGF0LndpZHRoIC0gcmVjdC5nZXRXaWR0aCgpKSAqIEJZVEVTX1BFUl9QSVhFTCxcbiAgICAgICAgcGl4SW5kZXggPSB0aGF0Lm9mZnNldE9mUGl4ZWwocmVjdC5sZWZ0LCByZWN0LnRvcCk7XG5cbiAgICBmb3IgKHZhciB5ID0gcmVjdC50b3A7IHkgPCByZWN0LmJvdHRvbTsgeSsrLCBwaXhJbmRleCArPSB5U3RyaWRlKSB7XG4gICAgICAgIGZvciAodmFyIHggPSByZWN0LmxlZnQ7IHggPCByZWN0LnJpZ2h0OyB4KyspIHtcbiAgICAgICAgICAgIHZhciBcbiAgICAgICAgICAgICAgICBhbHBoYTEgPSAoKHRoYXQuZGF0YVtwaXhJbmRleCArIEFMUEhBX0JZVEVfT0ZGU0VUXSAqIHRoYXQuYWxwaGEpIC8gMTAwKSB8IDAsXG4gICAgICAgICAgICAgICAgaW52QWxwaGExID0gYWxwaGExIF4gMHhmZjtcblxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAzOyBpKyssIHBpeEluZGV4KyspIHtcbiAgICAgICAgICAgICAgICB2YXIgXG4gICAgICAgICAgICAgICAgICAgIGMxID0gdGhhdC5kYXRhW3BpeEluZGV4XSxcbiAgICAgICAgICAgICAgICAgICAgYzIgPSBmdXNpb24uZGF0YVtwaXhJbmRleF07XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgZnVzaW9uLmRhdGFbcGl4SW5kZXhdID0gYzIgPj0gYzEgPyBjMiA6IChjMiAqIGludkFscGhhMSArIGMxICogYWxwaGExKSAvIDI1NTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHBpeEluZGV4Kys7IC8vIE9wYWNpdHkgdW5jaGFuZ2VkIChzdGlsbCAyNTUpXG4gICAgICAgIH1cbiAgICB9XG59XG5cbi8vIERhcmtlbiBNb2RlXG4vLyBpZiBCID49IEE6IEMgPSBCKmQgKyBBKigxLWQpIGFuZCBkID0gYWIgKiAoMS1hYSkgLyAoYWEgKyBhYiAtIGFhKmFiKVxuLy8gaWYgQSA+IEI6IEMgPSBBKmQgKyBCKigxLWQpIGFuZCBkID0gYWEgKiAoMS1hYikgLyAoYWEgKyBhYiAtIGFhKmFiKVxuXG5DUEJsZW5kLnByb3RvdHlwZS5mdXNpb25XaXRoRGFya2VuRnVsbEFscGhhID0gZnVuY3Rpb24odGhhdCwgZnVzaW9uLCByZWN0KSB7XG4gICAgdmFyXG4gICAgICAgIHlTdHJpZGUgPSAodGhhdC53aWR0aCAtIHJlY3QuZ2V0V2lkdGgoKSkgKiBCWVRFU19QRVJfUElYRUwsXG4gICAgICAgIHBpeEluZGV4ID0gdGhhdC5vZmZzZXRPZlBpeGVsKHJlY3QubGVmdCwgcmVjdC50b3ApO1xuXG4gICAgZm9yICh2YXIgeSA9IHJlY3QudG9wOyB5IDwgcmVjdC5ib3R0b207IHkrKywgcGl4SW5kZXggKz0geVN0cmlkZSkge1xuICAgICAgICBmb3IgKHZhciB4ID0gcmVjdC5sZWZ0OyB4IDwgcmVjdC5yaWdodDsgeCsrKSB7XG4gICAgICAgICAgICB2YXIgXG4gICAgICAgICAgICAgICAgYWxwaGExID0gKCh0aGF0LmRhdGFbcGl4SW5kZXggKyBBTFBIQV9CWVRFX09GRlNFVF0gKiB0aGF0LmFscGhhKSAvIDEwMCkgfCAwLFxuICAgICAgICAgICAgICAgIGFscGhhMiA9ICgoZnVzaW9uLmRhdGFbcGl4SW5kZXggKyBBTFBIQV9CWVRFX09GRlNFVF0gKiBmdXNpb24uYWxwaGEpIC8gMTAwKSB8IDAsXG5cbiAgICAgICAgICAgICAgICBuZXdBbHBoYSA9IChhbHBoYTEgKyBhbHBoYTIgLSBhbHBoYTEgKiBhbHBoYTIgLyAyNTUpIHwgMDtcblxuICAgICAgICAgICAgaWYgKG5ld0FscGhhID4gMCkge1xuICAgICAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgICAgICAvLyBUaGlzIGFscGhhIGlzIHVzZWQgd2hlbiBjb2xvcjEgPiBjb2xvcjJcbiAgICAgICAgICAgICAgICBhbHBoYTEyID0gKGFscGhhMSAqIChhbHBoYTIgXiAweGZmKSAvIG5ld0FscGhhKSB8IDAsXG4gICAgICAgICAgICAgICAgaW52QWxwaGExMiA9IChhbHBoYTEyIF4gMHhmZikgfCAwLFxuXG4gICAgICAgICAgICAgICAgLy8gVGhpcyBhbHBoYSBpcyB1c2VkIHdoZW4gY29sb3IyID4gY29sb3IxXG4gICAgICAgICAgICAgICAgICAgIGFscGhhMjEgPSAoYWxwaGEyICogKGFscGhhMSBeIDB4ZmYpIC8gbmV3QWxwaGEpIHwgMCxcbiAgICAgICAgICAgICAgICAgICAgaW52QWxwaGEyMSA9IChhbHBoYTIxIF4gMHhmZikgfCAwO1xuXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAzOyBpKyssIHBpeEluZGV4KyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIFxuICAgICAgICAgICAgICAgICAgICAgICAgYzEgPSB0aGF0LmRhdGFbcGl4SW5kZXhdLFxuICAgICAgICAgICAgICAgICAgICAgICAgYzIgPSBmdXNpb24uZGF0YVtwaXhJbmRleF07XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBmdXNpb24uZGF0YVtwaXhJbmRleF0gPSAoKChjMiA+PSBjMSkgPyAoYzIgKiBhbHBoYTIxICsgYzEgKiBpbnZBbHBoYTIxKSA6IChjMSAqIGFscGhhMTIgKyBjMiAqIGludkFscGhhMTIpKSAvIDI1NSkgfCAwO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBmdXNpb24uZGF0YVtwaXhJbmRleCsrXSA9IG5ld0FscGhhO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBwaXhJbmRleCArPSBCWVRFU19QRVJfUElYRUw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgZnVzaW9uLmFscGhhID0gMTAwO1xufTtcblxuLy8gV2hlbiBmdXNpb24gaXMgb3BhcXVlXG5DUEJsZW5kLnByb3RvdHlwZS5mdXNpb25XaXRoRGFya2VuID0gZnVuY3Rpb24odGhhdCwgZnVzaW9uLCByZWN0KSB7XG4gICAgdmFyXG4gICAgICAgIHlTdHJpZGUgPSAoKHRoYXQud2lkdGggLSByZWN0LmdldFdpZHRoKCkpICogQllURVNfUEVSX1BJWEVMKSB8IDAsXG4gICAgICAgIHBpeEluZGV4ID0gdGhhdC5vZmZzZXRPZlBpeGVsKHJlY3QubGVmdCwgcmVjdC50b3ApIHwgMDtcblxuICAgIGZvciAodmFyIHkgPSByZWN0LnRvcDsgeSA8IHJlY3QuYm90dG9tOyB5KyssIHBpeEluZGV4ICs9IHlTdHJpZGUpIHtcbiAgICAgICAgZm9yICh2YXIgeCA9IHJlY3QubGVmdDsgeCA8IHJlY3QucmlnaHQ7IHgrKykge1xuICAgICAgICAgICAgdmFyIFxuICAgICAgICAgICAgICAgIGFscGhhMSA9ICgodGhhdC5kYXRhW3BpeEluZGV4ICsgQUxQSEFfQllURV9PRkZTRVRdICogdGhhdC5hbHBoYSkgLyAxMDApIHwgMCxcbiAgICAgICAgICAgICAgICBpbnZBbHBoYTEgPSBhbHBoYTEgXiAweGZmO1xuXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IDM7IGkrKywgcGl4SW5kZXgrKykge1xuICAgICAgICAgICAgICAgIHZhciBcbiAgICAgICAgICAgICAgICAgICAgYzEgPSB0aGF0LmRhdGFbcGl4SW5kZXhdLFxuICAgICAgICAgICAgICAgICAgICBjMiA9IGZ1c2lvbi5kYXRhW3BpeEluZGV4XTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBmdXNpb24uZGF0YVtwaXhJbmRleF0gPSBjMiA+PSBjMSA/IChjMiAqIGludkFscGhhMSArIGMxICogYWxwaGExKSAvIDI1NSA6IGMyO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBwaXhJbmRleCsrOyAvLyBBbHBoYSBzdGF5cyB0aGUgc2FtZVxuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIGZ1c2lvbi5hbHBoYSA9IDEwMDtcbn07XG5cbi8vIERvZGdlIE1vZGVcbi8vXG4vLyBDID0gKGFhKigxLWFiKSpBICsgKDEtYWEpKmFiKkIgKyBhYSphYipCLygxLUEpKSAvIChhYSArIGFiIC0gYWEqYWIpXG5cbkNQQmxlbmQucHJvdG90eXBlLmZ1c2lvbldpdGhEb2RnZUZ1bGxBbHBoYSA9IGZ1bmN0aW9uKHRoYXQsIGZ1c2lvbiwgcmVjdCkge1xuICAgIHZhclxuICAgICAgICB5U3RyaWRlID0gKHRoYXQud2lkdGggLSByZWN0LmdldFdpZHRoKCkpICogQllURVNfUEVSX1BJWEVMLFxuICAgICAgICBwaXhJbmRleCA9IHRoYXQub2Zmc2V0T2ZQaXhlbChyZWN0LmxlZnQsIHJlY3QudG9wKTtcblxuICAgIGZvciAodmFyIHkgPSByZWN0LnRvcDsgeSA8IHJlY3QuYm90dG9tOyB5KyssIHBpeEluZGV4ICs9IHlTdHJpZGUpIHtcbiAgICAgICAgZm9yICh2YXIgeCA9IHJlY3QubGVmdDsgeCA8IHJlY3QucmlnaHQ7IHgrKykge1xuICAgICAgICAgICAgdmFyIFxuICAgICAgICAgICAgICAgIGFscGhhMSA9ICgodGhhdC5kYXRhW3BpeEluZGV4ICsgQUxQSEFfQllURV9PRkZTRVRdICogdGhhdC5hbHBoYSkgLyAxMDApIHwgMDtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKGFscGhhMSA9PSAwKSB7XG4gICAgICAgICAgICAgICAgcGl4SW5kZXggKz0gQllURVNfUEVSX1BJWEVMO1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICBhbHBoYTIgPSAoKGZ1c2lvbi5kYXRhW3BpeEluZGV4ICsgQUxQSEFfQllURV9PRkZTRVRdICogZnVzaW9uLmFscGhhKSAvIDEwMCkgfCAwLFxuICAgICAgICAgICAgICAgIG5ld0FscGhhID0gKGFscGhhMSArIGFscGhhMiAtIGFscGhhMSAqIGFscGhhMiAvIDI1NSkgfCAwO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAobmV3QWxwaGEgPiAwKSB7XG4gICAgICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgICAgIGFscGhhMTIgPSAoYWxwaGExICogYWxwaGEyIC8gMjU1KSB8IDAsXG4gICAgICAgICAgICAgICAgICAgIGFscGhhMW4yID0gKGFscGhhMSAqIChhbHBoYTIgXiAweGZmKSAvIDI1NSkgfCAwLFxuICAgICAgICAgICAgICAgICAgICBhbHBoYW4xMiA9ICgoYWxwaGExIF4gMHhmZikgKiBhbHBoYTIgLyAyNTUpIHwgMDtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IDM7IGkrKywgcGl4SW5kZXgrKykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjEgPSB0aGF0LmRhdGFbcGl4SW5kZXhdLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29sb3IyID0gZnVzaW9uLmRhdGFbcGl4SW5kZXhdLFxuICAgICAgICAgICAgICAgICAgICAgICAgaW52Q29sb3IxID0gY29sb3IxIF4gMHhGRjtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGZ1c2lvbi5kYXRhW3BpeEluZGV4XSA9IFxuICAgICAgICAgICAgICAgICAgICAgICAgKChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoY29sb3IxICogYWxwaGExbjIpIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgKGNvbG9yMiAqIGFscGhhbjEyKSBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICArIGFscGhhMTIgKiAoaW52Q29sb3IxID09IDAgPyAyNTUgOiBNYXRoLm1pbigyNTUsICgyNTUgKiBjb2xvcjIgLyBpbnZDb2xvcjEpIHwgMCkpXG4gICAgICAgICAgICAgICAgICAgICAgICApIC8gbmV3QWxwaGEpIHwgMDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZnVzaW9uLmRhdGFbcGl4SW5kZXgrK10gPSBuZXdBbHBoYTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcGl4SW5kZXggKz0gQllURVNfUEVSX1BJWEVMO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIGZ1c2lvbi5hbHBoYSA9IDEwMDtcbn07XG5cbi8vIFdoZW4gZnVzaW9uIGlzIG9wYXF1ZVxuQ1BCbGVuZC5wcm90b3R5cGUuZnVzaW9uV2l0aERvZGdlID0gZnVuY3Rpb24odGhhdCwgZnVzaW9uLCByZWN0KSB7XG4gICAgdmFyXG4gICAgICAgIHlTdHJpZGUgPSAodGhhdC53aWR0aCAtIHJlY3QuZ2V0V2lkdGgoKSkgKiBCWVRFU19QRVJfUElYRUwsXG4gICAgICAgIHBpeEluZGV4ID0gdGhhdC5vZmZzZXRPZlBpeGVsKHJlY3QubGVmdCwgcmVjdC50b3ApO1xuXG4gICAgZm9yICh2YXIgeSA9IHJlY3QudG9wOyB5IDwgcmVjdC5ib3R0b207IHkrKywgcGl4SW5kZXggKz0geVN0cmlkZSkge1xuICAgICAgICBmb3IgKHZhciB4ID0gcmVjdC5sZWZ0OyB4IDwgcmVjdC5yaWdodDsgeCsrKSB7XG4gICAgICAgICAgICB2YXIgXG4gICAgICAgICAgICAgICAgYWxwaGExID0gKCh0aGF0LmRhdGFbcGl4SW5kZXggKyBBTFBIQV9CWVRFX09GRlNFVF0gKiB0aGF0LmFscGhhKSAvIDEwMCkgfCAwO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoYWxwaGExID09IDApIHtcbiAgICAgICAgICAgICAgICBwaXhJbmRleCArPSBCWVRFU19QRVJfUElYRUw7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgIGludkFscGhhMSA9IGFscGhhMSBeIDB4ZmY7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgMzsgaSsrLCBwaXhJbmRleCsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIFxuICAgICAgICAgICAgICAgICAgICBjb2xvcjEgPSB0aGF0LmRhdGFbcGl4SW5kZXhdLFxuICAgICAgICAgICAgICAgICAgICBjb2xvcjIgPSBmdXNpb24uZGF0YVtwaXhJbmRleF0sXG4gICAgICAgICAgICAgICAgICAgIGludkNvbG9yMSA9IGNvbG9yMSBeIDB4RkY7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgZnVzaW9uLmRhdGFbcGl4SW5kZXhdID0gXG4gICAgICAgICAgICAgICAgICAgICgoXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjIgKiBpbnZBbHBoYTEgXG4gICAgICAgICAgICAgICAgICAgICAgICArIGFscGhhMSAqIChpbnZDb2xvcjEgPT0gMCA/IDI1NSA6IE1hdGgubWluKDI1NSwgKDI1NSAqIGNvbG9yMiAvIGludkNvbG9yMSkgfCAwKSlcbiAgICAgICAgICAgICAgICAgICAgKSAvIDI1NSkgfCAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcGl4SW5kZXgrKzsgLy8gQWxwaGEgc3RheXMgdGhlIHNhbWVcbiAgICAgICAgfVxuICAgIH1cbn07XG5cbi8vIEJ1cm4gTW9kZVxuLy9cbi8vIEMgPSAoYWEqKDEtYWIpKkEgKyAoMS1hYSkqYWIqQiArIGFhKmFiKigxLSgxLUIpL0EpKSAvIChhYSArIGFiIC0gYWEqYWIpXG5cbkNQQmxlbmQucHJvdG90eXBlLmZ1c2lvbldpdGhCdXJuRnVsbEFscGhhID0gZnVuY3Rpb24odGhhdCwgZnVzaW9uLCByZWN0KSB7XG4gICAgdmFyXG4gICAgICAgIHlTdHJpZGUgPSAodGhhdC53aWR0aCAtIHJlY3QuZ2V0V2lkdGgoKSkgKiBCWVRFU19QRVJfUElYRUwsXG4gICAgICAgIHBpeEluZGV4ID0gdGhhdC5vZmZzZXRPZlBpeGVsKHJlY3QubGVmdCwgcmVjdC50b3ApO1xuXG4gICAgZm9yICh2YXIgeSA9IHJlY3QudG9wOyB5IDwgcmVjdC5ib3R0b207IHkrKywgcGl4SW5kZXggKz0geVN0cmlkZSkge1xuICAgICAgICBmb3IgKHZhciB4ID0gcmVjdC5sZWZ0OyB4IDwgcmVjdC5yaWdodDsgeCsrKSB7XG4gICAgICAgICAgICB2YXIgXG4gICAgICAgICAgICAgICAgYWxwaGExID0gKCh0aGF0LmRhdGFbcGl4SW5kZXggKyBBTFBIQV9CWVRFX09GRlNFVF0gKiB0aGF0LmFscGhhKSAvIDEwMCkgfCAwO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoYWxwaGExID09IDApIHtcbiAgICAgICAgICAgICAgICBwaXhJbmRleCArPSBCWVRFU19QRVJfUElYRUw7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgIGFscGhhMiA9ICgoZnVzaW9uLmRhdGFbcGl4SW5kZXggKyBBTFBIQV9CWVRFX09GRlNFVF0gKiBmdXNpb24uYWxwaGEpIC8gMTAwKSB8IDAsXG4gICAgICAgICAgICAgICAgbmV3QWxwaGEgPSAoYWxwaGExICsgYWxwaGEyIC0gYWxwaGExICogYWxwaGEyIC8gMjU1KSB8IDA7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChuZXdBbHBoYSA+IDApIHtcbiAgICAgICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICAgICAgYWxwaGExMiA9IChhbHBoYTEgKiBhbHBoYTIgLyAyNTUpIHwgMCxcbiAgICAgICAgICAgICAgICAgICAgYWxwaGExbjIgPSAoYWxwaGExICogKGFscGhhMiBeIDB4ZmYpIC8gMjU1KSB8IDAsXG4gICAgICAgICAgICAgICAgICAgIGFscGhhbjEyID0gKChhbHBoYTEgXiAweGZmKSAqIGFscGhhMiAvIDI1NSkgfCAwO1xuXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAzOyBpKyssIHBpeEluZGV4KyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIFxuICAgICAgICAgICAgICAgICAgICAgICAgY29sb3IxID0gdGhhdC5kYXRhW3BpeEluZGV4XSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yMiA9IGZ1c2lvbi5kYXRhW3BpeEluZGV4XSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGludkNvbG9yMiA9IGNvbG9yMiBeIDB4RkY7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBmdXNpb24uZGF0YVtwaXhJbmRleF0gPSBcbiAgICAgICAgICAgICAgICAgICAgICAgICgoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3IxICogYWxwaGExbjIgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKyBjb2xvcjIgKiBhbHBoYW4xMiBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICArIGFscGhhMTIgKiAoY29sb3IxID09IDAgPyAwIDogTWF0aC5taW4oMjU1LCAyNTUgKiBpbnZDb2xvcjIgLyBjb2xvcjEpIF4gMHhmZilcbiAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgIC8gbmV3QWxwaGEpIHwgMDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZnVzaW9uLmRhdGFbcGl4SW5kZXgrK10gPSBuZXdBbHBoYTsgIFxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBwaXhJbmRleCArPSBCWVRFU19QRVJfUElYRUw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgZnVzaW9uLmFscGhhID0gMTAwO1xufTtcblxuLy8gV2hlbiBmdXNpb24gaXMgb3BhcXVlXG5DUEJsZW5kLnByb3RvdHlwZS5mdXNpb25XaXRoQnVybiA9IGZ1bmN0aW9uKHRoYXQsIGZ1c2lvbiwgcmVjdCkge1xuICAgIHZhclxuICAgICAgICB5U3RyaWRlID0gKCh0aGF0LndpZHRoIC0gcmVjdC5nZXRXaWR0aCgpKSAqIEJZVEVTX1BFUl9QSVhFTCkgfCAwLFxuICAgICAgICBwaXhJbmRleCA9IHRoYXQub2Zmc2V0T2ZQaXhlbChyZWN0LmxlZnQsIHJlY3QudG9wKSB8IDA7XG5cbiAgICBmb3IgKHZhciB5ID0gcmVjdC50b3A7IHkgPCByZWN0LmJvdHRvbTsgeSsrLCBwaXhJbmRleCArPSB5U3RyaWRlKSB7XG4gICAgICAgIGZvciAodmFyIHggPSByZWN0LmxlZnQ7IHggPCByZWN0LnJpZ2h0OyB4KyspIHtcbiAgICAgICAgICAgIHZhciBcbiAgICAgICAgICAgICAgICBhbHBoYTEgPSAoKHRoYXQuZGF0YVtwaXhJbmRleCArIEFMUEhBX0JZVEVfT0ZGU0VUXSAqIHRoYXQuYWxwaGEpIC8gMTAwKSB8IDA7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChhbHBoYTEgPT0gMCkge1xuICAgICAgICAgICAgICAgIHBpeEluZGV4ICs9IEJZVEVTX1BFUl9QSVhFTDtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgaW52QWxwaGExID0gYWxwaGExIF4gMHhmZjtcblxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAzOyBpKyssIHBpeEluZGV4KyspIHtcbiAgICAgICAgICAgICAgICB2YXIgXG4gICAgICAgICAgICAgICAgICAgIGNvbG9yMSA9IHRoYXQuZGF0YVtwaXhJbmRleF0sXG4gICAgICAgICAgICAgICAgICAgIGNvbG9yMiA9IGZ1c2lvbi5kYXRhW3BpeEluZGV4XSxcbiAgICAgICAgICAgICAgICAgICAgaW52Q29sb3IyID0gY29sb3IyIF4gMHhGRjtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBmdXNpb24uZGF0YVtwaXhJbmRleF0gPSBcbiAgICAgICAgICAgICAgICAgICAgKChcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yMiAqIGludkFscGhhMSBcbiAgICAgICAgICAgICAgICAgICAgICAgICsgYWxwaGExICogKGNvbG9yMSA9PSAwID8gMCA6IE1hdGgubWluKDI1NSwgMjU1ICogaW52Q29sb3IyIC8gY29sb3IxKSBeIDB4ZmYpXG4gICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgLyAyNTUpIHwgMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHBpeEluZGV4Kys7IC8vIEFscGhhIHN0YXlzIHRoZSBzYW1lXG4gICAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgZnVzaW9uLmFscGhhID0gMTAwO1xufTtcblxuLy8gT3ZlcmxheSBNb2RlXG4vLyBJZiBCIDw9IDAuNSBDID0gKEEqYWEqKDEtYWIpICsgQiphYiooMS1hYSkgKyBhYSphYiooMipBKkIpIC8gKGFhICsgYWIgLSBhYSphYilcbi8vIElmIEIgPiAwLjUgQyA9IChBKmFhKigxLWFiKSArIEIqYWIqKDEtYWEpICsgYWEqYWIqKDEgLSAyKigxLUEpKigxLUIpKSAvIChhYSArIGFiIC0gYWEqYWIpXG5cbkNQQmxlbmQucHJvdG90eXBlLmZ1c2lvbldpdGhPdmVybGF5RnVsbEFscGhhID0gZnVuY3Rpb24odGhhdCwgZnVzaW9uLCByZWN0KSB7XG4gICAgdmFyXG4gICAgICAgIHlTdHJpZGUgPSAodGhhdC53aWR0aCAtIHJlY3QuZ2V0V2lkdGgoKSkgKiBCWVRFU19QRVJfUElYRUwsXG4gICAgICAgIHBpeEluZGV4ID0gdGhhdC5vZmZzZXRPZlBpeGVsKHJlY3QubGVmdCwgcmVjdC50b3ApO1xuXG4gICAgZm9yICh2YXIgeSA9IHJlY3QudG9wOyB5IDwgcmVjdC5ib3R0b207IHkrKywgcGl4SW5kZXggKz0geVN0cmlkZSkge1xuICAgICAgICBmb3IgKHZhciB4ID0gcmVjdC5sZWZ0OyB4IDwgcmVjdC5yaWdodDsgeCsrKSB7XG4gICAgICAgICAgICB2YXIgXG4gICAgICAgICAgICAgICAgYWxwaGExID0gKCh0aGF0LmRhdGFbcGl4SW5kZXggKyBBTFBIQV9CWVRFX09GRlNFVF0gKiB0aGF0LmFscGhhKSAvIDEwMCkgfCAwO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoYWxwaGExID09IDApIHtcbiAgICAgICAgICAgICAgICBwaXhJbmRleCArPSBCWVRFU19QRVJfUElYRUw7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgIGFscGhhMiA9ICgoZnVzaW9uLmRhdGFbcGl4SW5kZXggKyBBTFBIQV9CWVRFX09GRlNFVF0gKiBmdXNpb24uYWxwaGEpIC8gMTAwKSB8IDAsXG4gICAgICAgICAgICAgICAgbmV3QWxwaGEgPSAoYWxwaGExICsgYWxwaGEyIC0gYWxwaGExICogYWxwaGEyIC8gMjU1KSB8IDA7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChuZXdBbHBoYSA+IDApIHtcbiAgICAgICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICAgICAgYWxwaGExMiA9IChhbHBoYTEgKiBhbHBoYTIgLyAyNTUpIHwgMCxcbiAgICAgICAgICAgICAgICAgICAgYWxwaGExbjIgPSAoYWxwaGExICogKGFscGhhMiBeIDB4ZmYpIC8gMjU1KSB8IDAsXG4gICAgICAgICAgICAgICAgICAgIGFscGhhbjEyID0gKChhbHBoYTEgXiAweGZmKSAqIGFscGhhMiAvIDI1NSkgfCAwO1xuXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAzOyBpKyssIHBpeEluZGV4KyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIFxuICAgICAgICAgICAgICAgICAgICAgICAgYzEgPSB0aGF0LmRhdGFbcGl4SW5kZXhdLFxuICAgICAgICAgICAgICAgICAgICAgICAgYzIgPSBmdXNpb24uZGF0YVtwaXhJbmRleF07XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBmdXNpb24uZGF0YVtwaXhJbmRleF0gPSBcbiAgICAgICAgICAgICAgICAgICAgICAgICgoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxwaGExbjIgKiBjMSBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICArIGFscGhhbjEyICogYzIgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKyAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGMyIDw9IDEyN1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyAoYWxwaGExMiAqIDIgKiBjMSAqIGMyIC8gMjU1KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiAoYWxwaGExMiAqICgoMiAqIChjMSBeIDB4ZmYpICogKGMyIF4gMHhmZikgLyAyNTUpIF4gMHhmZikpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgKSAvIG5ld0FscGhhKSB8IDA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZ1c2lvbi5kYXRhW3BpeEluZGV4KytdID0gbmV3QWxwaGE7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHBpeEluZGV4ICs9IEJZVEVTX1BFUl9QSVhFTDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBcbiAgICBmdXNpb24uYWxwaGEgPSAxMDA7XG59O1xuXG4vLyBXaGVuIGZ1c2lvbiBpcyBvcGFxdWVcbkNQQmxlbmQucHJvdG90eXBlLmZ1c2lvbldpdGhPdmVybGF5ID0gZnVuY3Rpb24odGhhdCwgZnVzaW9uLCByZWN0KSB7XG4gICAgdmFyXG4gICAgICAgIHlTdHJpZGUgPSAoKHRoYXQud2lkdGggLSByZWN0LmdldFdpZHRoKCkpICogQllURVNfUEVSX1BJWEVMKSB8IDAsXG4gICAgICAgIHBpeEluZGV4ID0gdGhhdC5vZmZzZXRPZlBpeGVsKHJlY3QubGVmdCwgcmVjdC50b3ApIHwgMDtcblxuICAgIGZvciAodmFyIHkgPSByZWN0LnRvcDsgeSA8IHJlY3QuYm90dG9tOyB5KyssIHBpeEluZGV4ICs9IHlTdHJpZGUpIHtcbiAgICAgICAgZm9yICh2YXIgeCA9IHJlY3QubGVmdDsgeCA8IHJlY3QucmlnaHQ7IHgrKykge1xuICAgICAgICAgICAgdmFyIFxuICAgICAgICAgICAgICAgIGFscGhhMSA9ICgodGhhdC5kYXRhW3BpeEluZGV4ICsgQUxQSEFfQllURV9PRkZTRVRdICogdGhhdC5hbHBoYSkgLyAxMDApIHwgMDtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKGFscGhhMSA9PSAwKSB7XG4gICAgICAgICAgICAgICAgcGl4SW5kZXggKz0gQllURVNfUEVSX1BJWEVMO1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICBhbHBoYW4xMiA9IGFscGhhMSBeIDB4ZmY7XG5cbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgMzsgaSsrLCBwaXhJbmRleCsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIFxuICAgICAgICAgICAgICAgICAgICBjMSA9IHRoYXQuZGF0YVtwaXhJbmRleF0sXG4gICAgICAgICAgICAgICAgICAgIGMyID0gZnVzaW9uLmRhdGFbcGl4SW5kZXhdO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGZ1c2lvbi5kYXRhW3BpeEluZGV4XSA9IFxuICAgICAgICAgICAgICAgICAgICAoKFxuICAgICAgICAgICAgICAgICAgICAgICAgYWxwaGFuMTIgKiBjMiBcbiAgICAgICAgICAgICAgICAgICAgICAgICsgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGMyIDw9IDEyN1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IChhbHBoYTEgKiAyICogYzEgKiBjMiAvIDI1NSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiAoYWxwaGExICogKCgyICogKGMxIF4gMHhmZikgKiAoYzIgXiAweGZmKSAvIDI1NSkgXiAweGZmKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgKSAvIDI1NSkgfCAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcGl4SW5kZXgrKzsgLy8gQWxwaGEgc3RheXMgMjU1XG4gICAgICAgIH1cbiAgICB9XG59O1xuXG4vLyBIYXJkIExpZ2h0IE1vZGUgKHNhbWUgYXMgT3ZlcmxheSB3aXRoIEEgYW5kIEIgc3dhcHBlZClcbi8vIElmIEEgPD0gMC41IEMgPSAoQSphYSooMS1hYikgKyBCKmFiKigxLWFhKSArIGFhKmFiKigyKkEqQikgLyAoYWEgKyBhYiAtIGFhKmFiKVxuLy8gSWYgQSA+IDAuNSBDID0gKEEqYWEqKDEtYWIpICsgQiphYiooMS1hYSkgKyBhYSphYiooMSAtIDIqKDEtQSkqKDEtQikpIC8gKGFhICsgYWIgLSBhYSphYilcblxuQ1BCbGVuZC5wcm90b3R5cGUuZnVzaW9uV2l0aEhhcmRMaWdodEZ1bGxBbHBoYSA9IGZ1bmN0aW9uKHRoYXQsIGZ1c2lvbiwgcmVjdCkge1xuICAgIHZhclxuICAgICAgICB5U3RyaWRlID0gKHRoYXQud2lkdGggLSByZWN0LmdldFdpZHRoKCkpICogQllURVNfUEVSX1BJWEVMLFxuICAgICAgICBwaXhJbmRleCA9IHRoYXQub2Zmc2V0T2ZQaXhlbChyZWN0LmxlZnQsIHJlY3QudG9wKTtcblxuICAgIGZvciAodmFyIHkgPSByZWN0LnRvcDsgeSA8IHJlY3QuYm90dG9tOyB5KyssIHBpeEluZGV4ICs9IHlTdHJpZGUpIHtcbiAgICAgICAgZm9yICh2YXIgeCA9IHJlY3QubGVmdDsgeCA8IHJlY3QucmlnaHQ7IHgrKykge1xuICAgICAgICAgICAgdmFyIFxuICAgICAgICAgICAgICAgIGFscGhhMSA9ICgodGhhdC5kYXRhW3BpeEluZGV4ICsgQUxQSEFfQllURV9PRkZTRVRdICogdGhhdC5hbHBoYSkgLyAxMDApIHwgMDtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKGFscGhhMSA9PSAwKSB7XG4gICAgICAgICAgICAgICAgcGl4SW5kZXggKz0gQllURVNfUEVSX1BJWEVMO1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICBhbHBoYTIgPSAoKGZ1c2lvbi5kYXRhW3BpeEluZGV4ICsgQUxQSEFfQllURV9PRkZTRVRdICogZnVzaW9uLmFscGhhKSAvIDEwMCkgfCAwLFxuICAgICAgICAgICAgICAgIG5ld0FscGhhID0gKGFscGhhMSArIGFscGhhMiAtIGFscGhhMSAqIGFscGhhMiAvIDI1NSkgfCAwO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAobmV3QWxwaGEgPiAwKSB7XG4gICAgICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgICAgIGFscGhhMTIgPSAoYWxwaGExICogYWxwaGEyIC8gMjU1KSB8IDAsXG4gICAgICAgICAgICAgICAgICAgIGFscGhhMW4yID0gKGFscGhhMSAqIChhbHBoYTIgXiAweGZmKSAvIDI1NSkgfCAwLFxuICAgICAgICAgICAgICAgICAgICBhbHBoYW4xMiA9ICgoYWxwaGExIF4gMHhmZikgKiBhbHBoYTIgLyAyNTUpIHwgMDtcblxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgMzsgaSsrLCBwaXhJbmRleCsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBcbiAgICAgICAgICAgICAgICAgICAgICAgIGMxID0gdGhhdC5kYXRhW3BpeEluZGV4XSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGMyID0gZnVzaW9uLmRhdGFbcGl4SW5kZXhdO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgZnVzaW9uLmRhdGFbcGl4SW5kZXhdID0gXG4gICAgICAgICAgICAgICAgICAgICAgICAoKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFscGhhMW4yICogYzEgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKyBhbHBoYW4xMiAqIGMyIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjMSA8PSAxMjdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gKGFscGhhMTIgKiAyICogYzEgKiBjMiAvIDI1NSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogKGFscGhhMTIgKiAoKDIgKiAoYzEgXiAweGZmKSAqIChjMiBeIDB4ZmYpIC8gMjU1KSBeIDB4ZmYpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICkgLyBuZXdBbHBoYSkgfCAwO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBmdXNpb24uZGF0YVtwaXhJbmRleCsrXSA9IG5ld0FscGhhO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBwaXhJbmRleCArPSBCWVRFU19QRVJfUElYRUw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgZnVzaW9uLmFscGhhID0gMTAwO1xufTtcblxuLy8gU29mdCBMaWdodCBNb2RlXG4vLyBBIDwgMC41ID0+IEMgPSAoMipBIC0gMSkgKiAoQiAtIEJeMikgKyBCXG4vLyBBID4gMC41ID0+IEMgPSAoMipBIC0gMSkgKiAoc3FydChCKSAtIEIpICsgQlxuXG5DUEJsZW5kLnByb3RvdHlwZS5mdXNpb25XaXRoU29mdExpZ2h0RnVsbEFscGhhID0gZnVuY3Rpb24odGhhdCwgZnVzaW9uLCByZWN0KSB7XG4gICAgdmFyXG4gICAgICAgIHlTdHJpZGUgPSAodGhhdC53aWR0aCAtIHJlY3QuZ2V0V2lkdGgoKSkgKiBCWVRFU19QRVJfUElYRUwsXG4gICAgICAgIHBpeEluZGV4ID0gdGhhdC5vZmZzZXRPZlBpeGVsKHJlY3QubGVmdCwgcmVjdC50b3ApO1xuXG4gICAgZm9yICh2YXIgeSA9IHJlY3QudG9wOyB5IDwgcmVjdC5ib3R0b207IHkrKywgcGl4SW5kZXggKz0geVN0cmlkZSkge1xuICAgICAgICBmb3IgKHZhciB4ID0gcmVjdC5sZWZ0OyB4IDwgcmVjdC5yaWdodDsgeCsrKSB7XG4gICAgICAgICAgICB2YXIgXG4gICAgICAgICAgICAgICAgYWxwaGExID0gKCh0aGF0LmRhdGFbcGl4SW5kZXggKyBBTFBIQV9CWVRFX09GRlNFVF0gKiB0aGF0LmFscGhhKSAvIDEwMCkgfCAwO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoYWxwaGExID09IDApIHtcbiAgICAgICAgICAgICAgICBwaXhJbmRleCArPSBCWVRFU19QRVJfUElYRUw7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgIGFscGhhMiA9ICgoZnVzaW9uLmRhdGFbcGl4SW5kZXggKyBBTFBIQV9CWVRFX09GRlNFVF0gKiBmdXNpb24uYWxwaGEpIC8gMTAwKSB8IDAsXG4gICAgICAgICAgICAgICAgbmV3QWxwaGEgPSAoYWxwaGExICsgYWxwaGEyIC0gYWxwaGExICogYWxwaGEyIC8gMjU1KSB8IDA7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChuZXdBbHBoYSA+IDApIHtcbiAgICAgICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICAgICAgYWxwaGExMiA9IChhbHBoYTEgKiBhbHBoYTIgLyAyNTUpIHwgMCxcbiAgICAgICAgICAgICAgICAgICAgYWxwaGExbjIgPSAoYWxwaGExICogKGFscGhhMiBeIDB4ZmYpIC8gMjU1KSB8IDAsXG4gICAgICAgICAgICAgICAgICAgIGFscGhhbjEyID0gKChhbHBoYTEgXiAweGZmKSAqIGFscGhhMiAvIDI1NSkgfCAwO1xuXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAzOyBpKyssIHBpeEluZGV4KyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIFxuICAgICAgICAgICAgICAgICAgICAgICAgYzEgPSB0aGF0LmRhdGFbcGl4SW5kZXhdLFxuICAgICAgICAgICAgICAgICAgICAgICAgYzIgPSBmdXNpb24uZGF0YVtwaXhJbmRleF07XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBmdXNpb24uZGF0YVtwaXhJbmRleF0gPSBcbiAgICAgICAgICAgICAgICAgICAgICAgICgoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxwaGExbjIgKiBjMSBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICArIGFscGhhbjEyICogYzIgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKyAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGMxIDw9IDEyN1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBhbHBoYTEyICogKCgyICogYzEgLSAyNTUpICogdGhhdC5zb2Z0TGlnaHRMVVRTcXVhcmVbYzJdIC8gMjU1ICsgYzIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IGFscGhhMTIgKiAoKDIgKiBjMSAtIDI1NSkgKiB0aGF0LnNvZnRMaWdodExVVFNxdWFyZVJvb3RbYzJdIC8gMjU1ICsgYzIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgKSAvIG5ld0FscGhhKSB8IDA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZ1c2lvbi5kYXRhW3BpeEluZGV4KytdID0gbmV3QWxwaGE7XG5cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcGl4SW5kZXggKz0gQllURVNfUEVSX1BJWEVMO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIGZ1c2lvbi5hbHBoYSA9IDEwMDtcbn07XG5cbi8vIFZpdmlkIExpZ2h0IE1vZGVcbi8vIEEgPCAwLjUgPT4gQyA9IDEgLSAoMS1CKSAvICgyKkEpXG4vLyBBID4gMC41ID0+IEMgPSBCIC8gKDIqKDEtQSkpXG5cbkNQQmxlbmQucHJvdG90eXBlLmZ1c2lvbldpdGhWaXZpZExpZ2h0RnVsbEFscGhhID0gZnVuY3Rpb24odGhhdCwgZnVzaW9uLCByZWN0KSB7XG4gICAgdmFyXG4gICAgICAgIHlTdHJpZGUgPSAodGhhdC53aWR0aCAtIHJlY3QuZ2V0V2lkdGgoKSkgKiBCWVRFU19QRVJfUElYRUwsXG4gICAgICAgIHBpeEluZGV4ID0gdGhhdC5vZmZzZXRPZlBpeGVsKHJlY3QubGVmdCwgcmVjdC50b3ApO1xuXG4gICAgZm9yICh2YXIgeSA9IHJlY3QudG9wOyB5IDwgcmVjdC5ib3R0b207IHkrKywgcGl4SW5kZXggKz0geVN0cmlkZSkge1xuICAgICAgICBmb3IgKHZhciB4ID0gcmVjdC5sZWZ0OyB4IDwgcmVjdC5yaWdodDsgeCsrKSB7XG4gICAgICAgICAgICB2YXIgXG4gICAgICAgICAgICAgICAgYWxwaGExID0gKCh0aGF0LmRhdGFbcGl4SW5kZXggKyBBTFBIQV9CWVRFX09GRlNFVF0gKiB0aGF0LmFscGhhKSAvIDEwMCkgfCAwO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoYWxwaGExID09IDApIHtcbiAgICAgICAgICAgICAgICBwaXhJbmRleCArPSBCWVRFU19QRVJfUElYRUw7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgIGFscGhhMiA9ICgoZnVzaW9uLmRhdGFbcGl4SW5kZXggKyBBTFBIQV9CWVRFX09GRlNFVF0gKiBmdXNpb24uYWxwaGEpIC8gMTAwKSB8IDAsXG4gICAgICAgICAgICAgICAgbmV3QWxwaGEgPSAoYWxwaGExICsgYWxwaGEyIC0gYWxwaGExICogYWxwaGEyIC8gMjU1KSB8IDA7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChuZXdBbHBoYSA+IDApIHtcbiAgICAgICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICAgICAgYWxwaGExMiA9IChhbHBoYTEgKiBhbHBoYTIgLyAyNTUpIHwgMCxcbiAgICAgICAgICAgICAgICAgICAgYWxwaGExbjIgPSAoYWxwaGExICogKGFscGhhMiBeIDB4ZmYpIC8gMjU1KSB8IDAsXG4gICAgICAgICAgICAgICAgICAgIGFscGhhbjEyID0gKChhbHBoYTEgXiAweGZmKSAqIGFscGhhMiAvIDI1NSkgfCAwO1xuXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAzOyBpKyssIHBpeEluZGV4KyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIFxuICAgICAgICAgICAgICAgICAgICAgICAgYzEgPSB0aGF0LmRhdGFbcGl4SW5kZXhdLFxuICAgICAgICAgICAgICAgICAgICAgICAgYzIgPSBmdXNpb24uZGF0YVtwaXhJbmRleF07XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBmdXNpb24uZGF0YVtwaXhJbmRleF0gPSBcbiAgICAgICAgICAgICAgICAgICAgICAgICgoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxwaGExbjIgKiBjMSBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICArIGFscGhhbjEyICogYzIgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKyAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGMxIDw9IDEyN1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyAoYWxwaGExMiAqICgoYzEgPT0gMCkgPyAwIDogMjU1IC0gTWF0aC5taW4oMjU1LCAoMjU1IC0gYzIpICogMjU1IC8gKDIgKiBjMSkpKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogKGFscGhhMTIgKiAoYzEgPT0gMjU1ID8gMjU1IDogTWF0aC5taW4oMjU1LCBjMiAqIDI1NSAvICgyICogKDI1NSAtIGMxKSkpKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICApIC8gbmV3QWxwaGEpIHwgMDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZnVzaW9uLmRhdGFbcGl4SW5kZXgrK10gPSBuZXdBbHBoYTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcGl4SW5kZXggKz0gQllURVNfUEVSX1BJWEVMO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIGZ1c2lvbi5hbHBoYSA9IDEwMDtcbn07XG5cbi8vIExpbmVhciBMaWdodCBNb2RlXG4vLyBDID0gQiArIDIqQSAtMVxuXG5DUEJsZW5kLnByb3RvdHlwZS5mdXNpb25XaXRoTGluZWFyTGlnaHRGdWxsQWxwaGEgPSBmdW5jdGlvbih0aGF0LCBmdXNpb24sIHJlY3QpIHtcbiAgICB2YXJcbiAgICAgICAgeVN0cmlkZSA9ICh0aGF0LndpZHRoIC0gcmVjdC5nZXRXaWR0aCgpKSAqIEJZVEVTX1BFUl9QSVhFTCxcbiAgICAgICAgcGl4SW5kZXggPSB0aGF0Lm9mZnNldE9mUGl4ZWwocmVjdC5sZWZ0LCByZWN0LnRvcCk7XG5cbiAgICBmb3IgKHZhciB5ID0gcmVjdC50b3A7IHkgPCByZWN0LmJvdHRvbTsgeSsrLCBwaXhJbmRleCArPSB5U3RyaWRlKSB7XG4gICAgICAgIGZvciAodmFyIHggPSByZWN0LmxlZnQ7IHggPCByZWN0LnJpZ2h0OyB4KyspIHtcbiAgICAgICAgICAgIHZhciBcbiAgICAgICAgICAgICAgICBhbHBoYTEgPSAoKHRoYXQuZGF0YVtwaXhJbmRleCArIEFMUEhBX0JZVEVfT0ZGU0VUXSAqIHRoYXQuYWxwaGEpIC8gMTAwKSB8IDA7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChhbHBoYTEgPT0gMCkge1xuICAgICAgICAgICAgICAgIHBpeEluZGV4ICs9IEJZVEVTX1BFUl9QSVhFTDtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgYWxwaGEyID0gKChmdXNpb24uZGF0YVtwaXhJbmRleCArIEFMUEhBX0JZVEVfT0ZGU0VUXSAqIGZ1c2lvbi5hbHBoYSkgLyAxMDApIHwgMCxcbiAgICAgICAgICAgICAgICBuZXdBbHBoYSA9IChhbHBoYTEgKyBhbHBoYTIgLSBhbHBoYTEgKiBhbHBoYTIgLyAyNTUpIHwgMDtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKG5ld0FscGhhID4gMCkge1xuICAgICAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgICAgICBhbHBoYTEyID0gKGFscGhhMSAqIGFscGhhMiAvIDI1NSkgfCAwLFxuICAgICAgICAgICAgICAgICAgICBhbHBoYTFuMiA9IChhbHBoYTEgKiAoYWxwaGEyIF4gMHhmZikgLyAyNTUpIHwgMCxcbiAgICAgICAgICAgICAgICAgICAgYWxwaGFuMTIgPSAoKGFscGhhMSBeIDB4ZmYpICogYWxwaGEyIC8gMjU1KSB8IDA7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgMzsgaSsrLCBwaXhJbmRleCsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBcbiAgICAgICAgICAgICAgICAgICAgICAgIGMxID0gdGhhdC5kYXRhW3BpeEluZGV4XSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGMyID0gZnVzaW9uLmRhdGFbcGl4SW5kZXhdO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgZnVzaW9uLmRhdGFbcGl4SW5kZXhdID0gXG4gICAgICAgICAgICAgICAgICAgICAgICAoKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFscGhhMW4yICogYzEgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKyBhbHBoYW4xMiAqIGMyIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgYWxwaGExMiAqIE1hdGgubWluKDI1NSwgTWF0aC5tYXgoMCwgYzIgKyAyICogYzEgLSAyNTUpKVxuICAgICAgICAgICAgICAgICAgICAgICAgKSAvIG5ld0FscGhhKSB8IDA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZ1c2lvbi5kYXRhW3BpeEluZGV4KytdID0gbmV3QWxwaGE7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHBpeEluZGV4ICs9IEJZVEVTX1BFUl9QSVhFTDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBcbiAgICBmdXNpb24uYWxwaGEgPSAxMDA7XG59O1xuXG4vLyBQaW4gTGlnaHQgTW9kZVxuLy8gQiA+IDIqQSA9PiBDID0gMipBXG4vLyBCIDwgMipBLTEgPT4gQyA9IDIqQS0xXG4vLyBlbHNlID0+IEMgPSBCXG5cbkNQQmxlbmQucHJvdG90eXBlLmZ1c2lvbldpdGhQaW5MaWdodEZ1bGxBbHBoYSA9IGZ1bmN0aW9uKHRoYXQsIGZ1c2lvbiwgcmVjdCkge1xuICAgIHZhclxuICAgICAgICB5U3RyaWRlID0gKHRoYXQud2lkdGggLSByZWN0LmdldFdpZHRoKCkpICogQllURVNfUEVSX1BJWEVMLFxuICAgICAgICBwaXhJbmRleCA9IHRoYXQub2Zmc2V0T2ZQaXhlbChyZWN0LmxlZnQsIHJlY3QudG9wKTtcblxuICAgIGZvciAodmFyIHkgPSByZWN0LnRvcDsgeSA8IHJlY3QuYm90dG9tOyB5KyssIHBpeEluZGV4ICs9IHlTdHJpZGUpIHtcbiAgICAgICAgZm9yICh2YXIgeCA9IHJlY3QubGVmdDsgeCA8IHJlY3QucmlnaHQ7IHgrKykge1xuICAgICAgICAgICAgdmFyIFxuICAgICAgICAgICAgICAgIGFscGhhMSA9ICgodGhhdC5kYXRhW3BpeEluZGV4ICsgQUxQSEFfQllURV9PRkZTRVRdICogdGhhdC5hbHBoYSkgLyAxMDApIHwgMDtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKGFscGhhMSA9PSAwKSB7XG4gICAgICAgICAgICAgICAgcGl4SW5kZXggKz0gQllURVNfUEVSX1BJWEVMO1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICBhbHBoYTIgPSAoKGZ1c2lvbi5kYXRhW3BpeEluZGV4ICsgQUxQSEFfQllURV9PRkZTRVRdICogZnVzaW9uLmFscGhhKSAvIDEwMCkgfCAwLFxuICAgICAgICAgICAgICAgIG5ld0FscGhhID0gKGFscGhhMSArIGFscGhhMiAtIGFscGhhMSAqIGFscGhhMiAvIDI1NSkgfCAwO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAobmV3QWxwaGEgPiAwKSB7XG4gICAgICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgICAgIGFscGhhMTIgPSAoYWxwaGExICogYWxwaGEyIC8gMjU1KSB8IDAsXG4gICAgICAgICAgICAgICAgICAgIGFscGhhMW4yID0gKGFscGhhMSAqIChhbHBoYTIgXiAweGZmKSAvIDI1NSkgfCAwLFxuICAgICAgICAgICAgICAgICAgICBhbHBoYW4xMiA9ICgoYWxwaGExIF4gMHhmZikgKiBhbHBoYTIgLyAyNTUpIHwgMDtcblxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgMzsgaSsrLCBwaXhJbmRleCsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBcbiAgICAgICAgICAgICAgICAgICAgICAgIGMxID0gdGhhdC5kYXRhW3BpeEluZGV4XSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGMyID0gZnVzaW9uLmRhdGFbcGl4SW5kZXhdLFxuICAgICAgICAgICAgICAgICAgICAgICAgYzMgPSAoYzIgPj0gMiAqIGMxKSA/ICgyICogYzEpIDogKGMyIDw9IDIgKiBjMSAtIDI1NSkgPyAoMiAqIGMxIC0gMjU1KSA6IGMyO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgZnVzaW9uLmRhdGFbcGl4SW5kZXhdID0gKChcbiAgICAgICAgICAgICAgICAgICAgICAgIGFscGhhMW4yICogYzEgXG4gICAgICAgICAgICAgICAgICAgICAgICArIGFscGhhbjEyICogYzIgXG4gICAgICAgICAgICAgICAgICAgICAgICArIGFscGhhMTIgKiBjM1xuICAgICAgICAgICAgICAgICAgICApIC8gbmV3QWxwaGEpIHwgMDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZnVzaW9uLmRhdGFbcGl4SW5kZXgrK10gPSBuZXdBbHBoYTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcGl4SW5kZXggKz0gQllURVNfUEVSX1BJWEVMO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIGZ1c2lvbi5hbHBoYSA9IDEwMDtcbn07IiwiLypcbiAgICBDaGlja2VuUGFpbnRcbiAgICBcbiAgICBDaGlja2VuUGFpbnQgaXMgYSB0cmFuc2xhdGlvbiBvZiBDaGliaVBhaW50IGZyb20gSmF2YSB0byBKYXZhU2NyaXB0XG4gICAgYnkgTmljaG9sYXMgU2hlcmxvY2sgLyBDaGlja2VuIFNtb290aGllLlxuICAgIFxuICAgIENoaWJpUGFpbnQgaXMgQ29weXJpZ2h0IChjKSAyMDA2LTIwMDggTWFyYyBTY2hlZmVyXG5cbiAgICBDaGlja2VuUGFpbnQgaXMgZnJlZSBzb2Z0d2FyZTogeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yIG1vZGlmeVxuICAgIGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgYXMgcHVibGlzaGVkIGJ5XG4gICAgdGhlIEZyZWUgU29mdHdhcmUgRm91bmRhdGlvbiwgZWl0aGVyIHZlcnNpb24gMyBvZiB0aGUgTGljZW5zZSwgb3JcbiAgICAoYXQgeW91ciBvcHRpb24pIGFueSBsYXRlciB2ZXJzaW9uLlxuXG4gICAgQ2hpY2tlblBhaW50IGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsXG4gICAgYnV0IFdJVEhPVVQgQU5ZIFdBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2ZcbiAgICBNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuICBTZWUgdGhlXG4gICAgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy5cblxuICAgIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXG4gICAgYWxvbmcgd2l0aCBDaGlja2VuUGFpbnQuIElmIG5vdCwgc2VlIDxodHRwOi8vd3d3LmdudS5vcmcvbGljZW5zZXMvPi5cbiovXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIENQQnJ1c2hJbmZvKHByb3BlcnRpZXMpIHtcbiAgICAvLyBTZXQgYnJ1c2ggc2V0dGluZyBmaWVsZHMgd2l0aCBkZWZhdWx0IHZhbHVlcywgdGhlbiBhcHBseSB0aGUgc3VwcGxpZWQgJ3Byb3BlcnRpZXMnIG9uIHRvcFxuICAgIGZvciAodmFyIHByb3BOYW1lIGluIENQQnJ1c2hJbmZvLkRFRkFVTFRTKSB7XG4gICAgICAgIGlmIChDUEJydXNoSW5mby5ERUZBVUxUUy5oYXNPd25Qcm9wZXJ0eShwcm9wTmFtZSkpIHtcbiAgICAgICAgICAgIHRoaXNbcHJvcE5hbWVdID0gQ1BCcnVzaEluZm8uREVGQVVMVFNbcHJvcE5hbWVdO1xuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIGZvciAodmFyIHByb3BOYW1lIGluIHByb3BlcnRpZXMpIHtcbiAgICAgICAgaWYgKHByb3BlcnRpZXMuaGFzT3duUHJvcGVydHkocHJvcE5hbWUpKSB7XG4gICAgICAgICAgICB0aGlzW3Byb3BOYW1lXSA9IHByb3BlcnRpZXNbcHJvcE5hbWVdO1xuICAgICAgICB9XG4gICAgfVxufVxuXG4vLyBTdHJva2UgbW9kZXNcbkNQQnJ1c2hJbmZvLlNNX0ZSRUVIQU5EID0gMDtcbkNQQnJ1c2hJbmZvLlNNX0xJTkUgPSAxO1xuQ1BCcnVzaEluZm8uU01fQkVaSUVSID0gMjtcblxuLy8gQnJ1c2ggZGFiIHR5cGVzXG5DUEJydXNoSW5mby5CX1JPVU5EX1BJWEVMID0gMDtcbkNQQnJ1c2hJbmZvLkJfUk9VTkRfQUEgPSAxO1xuQ1BCcnVzaEluZm8uQl9ST1VORF9BSVJCUlVTSCA9IDI7XG5DUEJydXNoSW5mby5CX1NRVUFSRV9QSVhFTCA9IDM7XG5DUEJydXNoSW5mby5CX1NRVUFSRV9BQSA9IDQ7XG5cbi8vIHBhaW50aW5nIG1vZGVzXG5DUEJydXNoSW5mby5NX1BBSU5UID0gMDtcbkNQQnJ1c2hJbmZvLk1fRVJBU0UgPSAxO1xuQ1BCcnVzaEluZm8uTV9ET0RHRSA9IDI7XG5DUEJydXNoSW5mby5NX0JVUk4gPSAzO1xuQ1BCcnVzaEluZm8uTV9XQVRFUiA9IDQ7XG5DUEJydXNoSW5mby5NX0JMVVIgPSA1O1xuQ1BCcnVzaEluZm8uTV9TTVVER0UgPSA2O1xuQ1BCcnVzaEluZm8uTV9PSUwgPSA3O1xuXG5DUEJydXNoSW5mby5ERUZBVUxUUyA9IHtcbiAgICBpc0FBOiBmYWxzZSwgaXNBaXJicnVzaDogZmFsc2UsXG4gICAgbWluU3BhY2luZzogMCwgc3BhY2luZzogMCxcbiAgICBcbiAgICBwcmVzc3VyZVNpemU6IHRydWUsXG4gICAgcHJlc3N1cmVBbHBoYTogZmFsc2UsXG4gICAgcHJlc3N1cmVTY2F0dGVyaW5nOiBmYWxzZSxcbiAgICBcbiAgICB0eXBlOiAwLCBwYWludE1vZGU6IDAsXG4gICAgc3Ryb2tlTW9kZTogQ1BCcnVzaEluZm8uU01fRlJFRUhBTkQsXG4gICAgcmVzYXQ6IDEuMCwgYmxlZWQ6IDAuMCxcblxuICAgIHRleHR1cmU6IDEuMCxcbiAgICBcbiAgICAvLyBcImN1clwiIHZhbHVlcyBhcmUgY3VycmVudCBicnVzaCBzZXR0aW5ncyAob25jZSB0YWJsZXQgcHJlc3N1cmUgYW5kIHN0dWZmIGlzIGFwcGxpZWQpXG4gICAgc2l6ZTogMCwgY3VyU2l6ZTogMCxcbiAgICBhbHBoYTogMCwgY3VyQWxwaGE6IDAsXG4gICAgc2NhdHRlcmluZzogMC4wLCBjdXJTY2F0dGVyaW5nOiAwLFxuICAgIHNxdWVlemU6IDAuMCwgY3VyU3F1ZWV6ZTogMCxcbiAgICBhbmdsZTogTWF0aC5QSSwgY3VyQW5nbGU6IDAsXG4gICAgXG4gICAgc21vb3RoaW5nOiAwLjBcbn07XG5cbkNQQnJ1c2hJbmZvLnByb3RvdHlwZS5hcHBseVByZXNzdXJlID0gZnVuY3Rpb24ocHJlc3N1cmUpIHtcbiAgICAvLyBGSVhNRTogbm8gdmFyaWFibGUgc2l6ZSBmb3Igc211ZGdlIGFuZCBvaWwgOihcbiAgICBpZiAodGhpcy5wcmVzc3VyZVNpemUgJiYgdGhpcy5wYWludE1vZGUgIT0gQ1BCcnVzaEluZm8uTV9TTVVER0UgJiYgdGhpcy5wYWludE1vZGUgIT0gQ1BCcnVzaEluZm8uTV9PSUwpIHtcbiAgICAgICAgdGhpcy5jdXJTaXplID0gTWF0aC5tYXgoMC4xLCB0aGlzLnNpemUgKiBwcmVzc3VyZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5jdXJTaXplID0gTWF0aC5tYXgoMC4xLCB0aGlzLnNpemUpO1xuICAgIH1cblxuICAgIC8vIEZJWE1FOiB3aGF0IGlzIHRoZSBwb2ludCBvZiBkb2luZyB0aGF0P1xuICAgIGlmICh0aGlzLmN1clNpemUgPiAxNikge1xuICAgICAgICB0aGlzLmN1clNpemUgPSBNYXRoLmZsb29yKHRoaXMuY3VyU2l6ZSk7XG4gICAgfVxuXG4gICAgdGhpcy5jdXJBbHBoYSA9IHRoaXMucHJlc3N1cmVBbHBoYSA/IE1hdGguZmxvb3IodGhpcy5hbHBoYSAqIE1hdGgubWluKHByZXNzdXJlLCAxLjApKSA6IHRoaXMuYWxwaGE7XG4gICAgdGhpcy5jdXJTcXVlZXplID0gdGhpcy5zcXVlZXplO1xuICAgIHRoaXMuY3VyQW5nbGUgPSB0aGlzLmFuZ2xlO1xuICAgIHRoaXMuY3VyU2NhdHRlcmluZyA9IHRoaXMuc2NhdHRlcmluZyAqIHRoaXMuY3VyU2l6ZSAqICh0aGlzLnByZXNzdXJlU2NhdHRlcmluZyA/IHByZXNzdXJlIDogMS4wKTtcbn07XG5cbkNQQnJ1c2hJbmZvLnByb3RvdHlwZS5jbG9uZSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBuZXcgQ1BCcnVzaEluZm8odGhpcyk7XG59O1xuIiwiLypcbiAgICBDaGlja2VuUGFpbnRcbiAgICBcbiAgICBDaGlja2VuUGFpbnQgaXMgYSB0cmFuc2xhdGlvbiBvZiBDaGliaVBhaW50IGZyb20gSmF2YSB0byBKYXZhU2NyaXB0XG4gICAgYnkgTmljaG9sYXMgU2hlcmxvY2sgLyBDaGlja2VuIFNtb290aGllLlxuICAgIFxuICAgIENoaWJpUGFpbnQgaXMgQ29weXJpZ2h0IChjKSAyMDA2LTIwMDggTWFyYyBTY2hlZmVyXG5cbiAgICBDaGlja2VuUGFpbnQgaXMgZnJlZSBzb2Z0d2FyZTogeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yIG1vZGlmeVxuICAgIGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgYXMgcHVibGlzaGVkIGJ5XG4gICAgdGhlIEZyZWUgU29mdHdhcmUgRm91bmRhdGlvbiwgZWl0aGVyIHZlcnNpb24gMyBvZiB0aGUgTGljZW5zZSwgb3JcbiAgICAoYXQgeW91ciBvcHRpb24pIGFueSBsYXRlciB2ZXJzaW9uLlxuXG4gICAgQ2hpY2tlblBhaW50IGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsXG4gICAgYnV0IFdJVEhPVVQgQU5ZIFdBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2ZcbiAgICBNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuICBTZWUgdGhlXG4gICAgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy5cblxuICAgIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXG4gICAgYWxvbmcgd2l0aCBDaGlja2VuUGFpbnQuIElmIG5vdCwgc2VlIDxodHRwOi8vd3d3LmdudS5vcmcvbGljZW5zZXMvPi5cbiovXG5cbmltcG9ydCBDUEJydXNoSW5mbyBmcm9tIFwiLi9DUEJydXNoSW5mb1wiO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBDUEJydXNoTWFuYWdlcigpIHtcbiAgICBjb25zdFxuICAgICAgICBNQVhfU1FVRUVaRSA9IDEwLFxuICAgICAgICBCUlVTSF9NQVhfRElNID0gMjAxLFxuICAgICAgICBCUlVTSF9BQV9NQVhfRElNID0gMjAyO1xuICAgIFxuICAgIC8qQ1BCcnVzaERhYiB7XG4gICAgICAgIC8vIHRoZSBicnVzaFxuICAgICAgICBVaW50OEFycmF5IGJydXNoO1xuICAgICAgICBpbnQgd2lkdGgsIGhlaWdodDtcbiAgICAgICAgXG4gICAgICAgIC8vIGFuZCB3aGVyZSBhbmQgaG93IHRvIGFwcGx5IGl0XG4gICAgICAgIGludCB4LCB5LCBhbHBoYTtcbiAgICB9Ki9cbiAgICBcbiAgICB2YXJcbiAgICAgICAgYnJ1c2ggPSBuZXcgVWludDhBcnJheShCUlVTSF9NQVhfRElNICogQlJVU0hfTUFYX0RJTSksXG4gICAgICAgIGJydXNoQUEgPSBuZXcgVWludDhBcnJheShCUlVTSF9BQV9NQVhfRElNICogQlJVU0hfQUFfTUFYX0RJTSksXG5cbiAgICAgICAgY2FjaGVCcnVzaCA9IG51bGwsXG4gICAgICAgIGNhY2hlU2l6ZSwgY2FjaGVTcXVlZXplLCBjYWNoZUFuZ2xlLFxuICAgICAgICBjYWNoZVR5cGUsXG5cbiAgICAgICAgdGhhdCA9IHRoaXM7IFxuXG4gICAgLyoqXG4gICAgICogU2hpZnQgYSBicnVzaCBieSBhIHBvc2l0aXZlIHN1Yi1waXhlbCBhbW91bnQgKGR4LCBkeSkgWzAuLjEpLCBhbmQgcmV0dXJuIHRoZSBuZXcgYnJ1c2guIFxuICAgICAqIFxuICAgICAqIFRoZSByZXN1bHRpbmcgYnJ1c2ggYXJyYXkgaXMgMSBwaXhlbCBsYXJnZXIgdGhhbiB0aGUgb3JpZ2luYWwgb25lIGluIGJvdGggZGltZW5zaW9ucy5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBnZXRCcnVzaFdpdGhBQShicnVzaEluZm8sIGR4LCBkeSkge1xuICAgICAgICB2YXJcbiAgICAgICAgICAgIG5vbkFBQnJ1c2ggPSBnZXRCcnVzaChicnVzaEluZm8pLFxuXG4gICAgICAgICAgICBpbnRTaXplID0gTWF0aC5jZWlsKGJydXNoSW5mby5jdXJTaXplKSxcbiAgICAgICAgICAgIGludFNpemVBQSA9IE1hdGguY2VpbChicnVzaEluZm8uY3VyU2l6ZSkgKyAxO1xuICAgICAgICBcbiAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCBpbnRTaXplQUEgKiBpbnRTaXplQUE7IHgrKykge1xuICAgICAgICAgICAgYnJ1c2hBQVt4XSA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHZhclxuICAgICAgICAgICAgaW52ZHhfaW52ZHkgPSAoMSAtIGR4KSAqICgxIC0gZHkpLFxuICAgICAgICAgICAgZHhfaW52ZHkgPSBkeCAqICgxIC0gZHkpLFxuICAgICAgICAgICAgZHhfZHkgPSBkeCAqIGR5LFxuICAgICAgICAgICAgaW52ZHhfZHkgPSAoMSAtIGR4KSAqIGR5LFxuICAgICAgICAgICAgXG4gICAgICAgICAgICBzcmNJbmRleCA9IDAsXG4gICAgICAgICAgICBkc3RJbmRleCA9IDA7XG4gICAgICAgIFxuICAgICAgICBmb3IgKHZhciB5ID0gMDsgeSA8IGludFNpemU7IHkrKykge1xuICAgICAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCBpbnRTaXplOyB4KyspIHtcbiAgICAgICAgICAgICAgICB2YXIgXG4gICAgICAgICAgICAgICAgICAgIGJydXNoQWxwaGEgPSBub25BQUJydXNoW3NyY0luZGV4XTtcblxuICAgICAgICAgICAgICAgIC8qIFxuICAgICAgICAgICAgICAgICAqIFVzZSBhIHdlaWdodGVkIHN1bSB0byBzaGlmdCB0aGUgc291cmNlIHBpeGVscydzIHBvc2l0aW9uIGJ5IGEgc3ViLXBpeGVsIGFtb3VudCBkeCwgZHkgYW5kIGFjY3VtdWxhdGVcbiAgICAgICAgICAgICAgICAgKiBpdCBpbnRvIHRoZSBmaW5hbCBicnVzaEFBIGFycmF5LlxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIGJydXNoQUFbZHN0SW5kZXhdICs9IH5+KGJydXNoQWxwaGEgKiBpbnZkeF9pbnZkeSk7XG4gICAgICAgICAgICAgICAgYnJ1c2hBQVtkc3RJbmRleCArIDFdICs9IH5+KGJydXNoQWxwaGEgKiBkeF9pbnZkeSk7XG4gICAgICAgICAgICAgICAgYnJ1c2hBQVtkc3RJbmRleCArIDEgKyBpbnRTaXplQUFdICs9IH5+KGJydXNoQWxwaGEgKiBkeF9keSk7XG4gICAgICAgICAgICAgICAgYnJ1c2hBQVtkc3RJbmRleCArIGludFNpemVBQV0gKz0gfn4oYnJ1c2hBbHBoYSAqIGludmR4X2R5KTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBzcmNJbmRleCsrO1xuICAgICAgICAgICAgICAgIGRzdEluZGV4Kys7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkc3RJbmRleCArPSBpbnRTaXplQUEgLSBpbnRTaXplO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGJydXNoQUE7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYnVpbGRCcnVzaChicnVzaCwgYnJ1c2hJbmZvKSB7XG4gICAgICAgIHZhclxuICAgICAgICAgICAgaW50U2l6ZSA9IE1hdGguY2VpbChicnVzaEluZm8uY3VyU2l6ZSksXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNlbnRlciA9IGludFNpemUgLyAyLjAsXG4gICAgICAgICAgICBzcXJSYWRpdXMgPSAoYnJ1c2hJbmZvLmN1clNpemUgLyAyKSAqIChicnVzaEluZm8uY3VyU2l6ZSAvIDIpLFxuICAgIFxuICAgICAgICAgICAgeEZhY3RvciA9IDEuMCArIGJydXNoSW5mby5jdXJTcXVlZXplICogTUFYX1NRVUVFWkUsXG4gICAgICAgICAgICBjb3NBID0gTWF0aC5jb3MoYnJ1c2hJbmZvLmN1ckFuZ2xlKSxcbiAgICAgICAgICAgIHNpbkEgPSBNYXRoLnNpbihicnVzaEluZm8uY3VyQW5nbGUpLFxuICAgIFxuICAgICAgICAgICAgb2Zmc2V0ID0gMDtcbiAgICAgICAgXG4gICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgaW50U2l6ZTsgaisrKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGludFNpemU7IGkrKykge1xuICAgICAgICAgICAgICAgIHZhciBcbiAgICAgICAgICAgICAgICAgICAgeCA9IChpICsgMC41IC0gY2VudGVyKSxcbiAgICAgICAgICAgICAgICAgICAgeSA9IChqICsgMC41IC0gY2VudGVyKSxcbiAgICAgICAgICAgICAgICAgICAgZHggPSAoeCAqIGNvc0EgLSB5ICogc2luQSkgKiB4RmFjdG9yLFxuICAgICAgICAgICAgICAgICAgICBkeSA9ICh5ICogY29zQSArIHggKiBzaW5BKSxcblxuICAgICAgICAgICAgICAgICAgICBzcXJEaXN0ID0gZHggKiBkeCArIGR5ICogZHk7XG5cbiAgICAgICAgICAgICAgICBpZiAoc3FyRGlzdCA8PSBzcXJSYWRpdXMpIHtcbiAgICAgICAgICAgICAgICAgICAgYnJ1c2hbb2Zmc2V0KytdID0gMHhGRjtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBicnVzaFtvZmZzZXQrK10gPSAwO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBicnVzaDtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBidWlsZEJydXNoQUEoYnJ1c2gsIGJydXNoSW5mbykge1xuICAgICAgICB2YXJcbiAgICAgICAgICAgIGludFNpemUgPSBNYXRoLmNlaWwoYnJ1c2hJbmZvLmN1clNpemUpLFxuICAgICAgICAgICAgXG4gICAgICAgICAgICBjZW50ZXIgPSBpbnRTaXplIC8gMi4wLFxuICAgICAgICAgICAgc3FyUmFkaXVzID0gKGJydXNoSW5mby5jdXJTaXplIC8gMikgKiAoYnJ1c2hJbmZvLmN1clNpemUgLyAyKSxcbiAgICAgICAgICAgIHNxclJhZGl1c0lubmVyID0gKChicnVzaEluZm8uY3VyU2l6ZSAtIDIpIC8gMikgKiAoKGJydXNoSW5mby5jdXJTaXplIC0gMikgLyAyKSxcbiAgICAgICAgICAgIHNxclJhZGl1c091dGVyID0gKChicnVzaEluZm8uY3VyU2l6ZSArIDIpIC8gMikgKiAoKGJydXNoSW5mby5jdXJTaXplICsgMikgLyAyKSxcblxuICAgICAgICAgICAgeEZhY3RvciA9IDEuMCArIGJydXNoSW5mby5jdXJTcXVlZXplICogTUFYX1NRVUVFWkUsXG4gICAgICAgICAgICBjb3NBID0gTWF0aC5jb3MoYnJ1c2hJbmZvLmN1ckFuZ2xlKSxcbiAgICAgICAgICAgIHNpbkEgPSBNYXRoLnNpbihicnVzaEluZm8uY3VyQW5nbGUpLFxuXG4gICAgICAgICAgICBvZmZzZXQgPSAwO1xuICAgICAgICBcbiAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBpbnRTaXplOyBqKyspIHtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaW50U2l6ZTsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIFxuICAgICAgICAgICAgICAgICAgICB4ID0gKGkgKyAwLjUgLSBjZW50ZXIpLFxuICAgICAgICAgICAgICAgICAgICB5ID0gKGogKyAwLjUgLSBjZW50ZXIpLFxuICAgICAgICAgICAgICAgICAgICBkeCA9ICh4ICogY29zQSAtIHkgKiBzaW5BKSAqIHhGYWN0b3IsXG4gICAgICAgICAgICAgICAgICAgIGR5ID0gKHkgKiBjb3NBICsgeCAqIHNpbkEpLFxuXG4gICAgICAgICAgICAgICAgICAgIHNxckRpc3QgPSBkeCAqIGR4ICsgZHkgKiBkeTtcblxuICAgICAgICAgICAgICAgIGlmIChzcXJEaXN0IDw9IHNxclJhZGl1c0lubmVyKSB7XG4gICAgICAgICAgICAgICAgICAgIGJydXNoW29mZnNldCsrXSA9IDB4RkY7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChzcXJEaXN0ID4gc3FyUmFkaXVzT3V0ZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgYnJ1c2hbb2Zmc2V0KytdID0gMDtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB2YXIgXG4gICAgICAgICAgICAgICAgICAgICAgICBjb3VudCA9IDA7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBveSA9IDA7IG95IDwgNDsgb3krKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgb3ggPSAwOyBveCA8IDQ7IG94KyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB4ID0gaSArIG94ICogKDEuMCAvIDQuMCkgLSBjZW50ZXI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeSA9IGogKyBveSAqICgxLjAgLyA0LjApIC0gY2VudGVyO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGR4ID0gKHggKiBjb3NBIC0geSAqIHNpbkEpICogeEZhY3RvcjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkeSA9ICh5ICogY29zQSArIHggKiBzaW5BKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNxckRpc3QgPSBkeCAqIGR4ICsgZHkgKiBkeTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3FyRGlzdCA8PSBzcXJSYWRpdXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY291bnQgKz0gMTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJ1c2hbb2Zmc2V0KytdID0gTWF0aC5taW4oY291bnQgKiAxNiwgMjU1KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gYnJ1c2g7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYnVpbGRCcnVzaFNxdWFyZShicnVzaCwgYnJ1c2hJbmZvKSB7XG4gICAgICAgIHZhclxuICAgICAgICAgICAgaW50U2l6ZSA9IE1hdGguY2VpbChicnVzaEluZm8uY3VyU2l6ZSksXG4gICAgICAgICAgICBjZW50ZXIgPSBpbnRTaXplIC8gMi4wLFxuXG4gICAgICAgICAgICBzaXplID0gYnJ1c2hJbmZvLmN1clNpemUgKiBNYXRoLnNpbihNYXRoLlBJIC8gNCksXG4gICAgICAgICAgICBzaXplWCA9IChzaXplIC8gMikgLyAoMS4wICsgYnJ1c2hJbmZvLmN1clNxdWVlemUgKiBNQVhfU1FVRUVaRSksXG4gICAgICAgICAgICBzaXplWSA9IChzaXplIC8gMiksXG5cbiAgICAgICAgICAgIGNvc0EgPSBNYXRoLmNvcyhicnVzaEluZm8uY3VyQW5nbGUpLFxuICAgICAgICAgICAgc2luQSA9IE1hdGguc2luKGJydXNoSW5mby5jdXJBbmdsZSksXG5cbiAgICAgICAgICAgIG9mZnNldCA9IDA7XG4gICAgICAgIFxuICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGludFNpemU7IGorKykge1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpbnRTaXplOyBpKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgXG4gICAgICAgICAgICAgICAgICAgIHggPSAoaSArIDAuNSAtIGNlbnRlciksXG4gICAgICAgICAgICAgICAgICAgIHkgPSAoaiArIDAuNSAtIGNlbnRlciksXG4gICAgICAgICAgICAgICAgICAgIGR4ID0gTWF0aC5hYnMoeCAqIGNvc0EgLSB5ICogc2luQSksXG4gICAgICAgICAgICAgICAgICAgIGR5ID0gTWF0aC5hYnMoeSAqIGNvc0EgKyB4ICogc2luQSk7XG5cbiAgICAgICAgICAgICAgICBpZiAoZHggPD0gc2l6ZVggJiYgZHkgPD0gc2l6ZVkpIHtcbiAgICAgICAgICAgICAgICAgICAgYnJ1c2hbb2Zmc2V0KytdID0gMHhGRjtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBicnVzaFtvZmZzZXQrK10gPSAwO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBicnVzaDtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBidWlsZEJydXNoU3F1YXJlQUEoYnJ1c2gsIGJydXNoSW5mbykge1xuICAgICAgICB2YXJcbiAgICAgICAgICAgIGludFNpemUgPSBNYXRoLmNlaWwoYnJ1c2hJbmZvLmN1clNpemUpLFxuICAgICAgICAgICAgY2VudGVyID0gaW50U2l6ZSAvIDIuMCxcblxuICAgICAgICAgICAgc2l6ZSA9IGJydXNoSW5mby5jdXJTaXplICogTWF0aC5zaW4oTWF0aC5QSSAvIDQpLFxuICAgICAgICAgICAgc2l6ZVggPSAoc2l6ZSAvIDIpIC8gKDEuMCArIGJydXNoSW5mby5jdXJTcXVlZXplICogTUFYX1NRVUVFWkUpLFxuICAgICAgICAgICAgc2l6ZVkgPSAoc2l6ZSAvIDIpLFxuXG4gICAgICAgICAgICBzaXplWElubmVyID0gc2l6ZVggLSAxLFxuICAgICAgICAgICAgc2l6ZVlJbm5lciA9IHNpemVZIC0gMSxcblxuICAgICAgICAgICAgc2l6ZVhPdXRlciA9IHNpemVYICsgMSxcbiAgICAgICAgICAgIHNpemVZT3V0ZXIgPSBzaXplWSArIDEsXG5cbiAgICAgICAgICAgIGNvc0EgPSBNYXRoLmNvcyhicnVzaEluZm8uY3VyQW5nbGUpLFxuICAgICAgICAgICAgc2luQSA9IE1hdGguc2luKGJydXNoSW5mby5jdXJBbmdsZSksXG5cbiAgICAgICAgICAgIG9mZnNldCA9IDA7XG4gICAgICAgIFxuICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGludFNpemU7IGorKykge1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpbnRTaXplOyBpKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgXG4gICAgICAgICAgICAgICAgICAgIHggPSAoaSArIDAuNSAtIGNlbnRlciksXG4gICAgICAgICAgICAgICAgICAgIHkgPSAoaiArIDAuNSAtIGNlbnRlciksXG4gICAgICAgICAgICAgICAgICAgIGR4ID0gTWF0aC5hYnMoeCAqIGNvc0EgLSB5ICogc2luQSksXG4gICAgICAgICAgICAgICAgICAgIGR5ID0gTWF0aC5hYnMoeSAqIGNvc0EgKyB4ICogc2luQSk7XG5cbiAgICAgICAgICAgICAgICBpZiAoZHggPD0gc2l6ZVhJbm5lciAmJiBkeSA8PSBzaXplWUlubmVyKSB7XG4gICAgICAgICAgICAgICAgICAgIGJydXNoW29mZnNldCsrXSA9IDB4RkY7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChkeCA+IHNpemVYT3V0ZXIgfHwgZHkgPiBzaXplWU91dGVyKSB7XG4gICAgICAgICAgICAgICAgICAgIGJydXNoW29mZnNldCsrXSA9IDA7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb3VudCA9IDA7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBveSA9IDA7IG95IDwgNDsgb3krKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgb3ggPSAwOyBveCA8IDQ7IG94KyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB4ID0gaSArIG94ICogKDEuMCAvIDQuMCkgLSBjZW50ZXI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeSA9IGogKyBveSAqICgxLjAgLyA0LjApIC0gY2VudGVyO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGR4ID0gTWF0aC5hYnMoeCAqIGNvc0EgLSB5ICogc2luQSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZHkgPSBNYXRoLmFicyh5ICogY29zQSArIHggKiBzaW5BKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkeCA8PSBzaXplWCAmJiBkeSA8PSBzaXplWSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3VudCsrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicnVzaFtvZmZzZXQrK10gPSBNYXRoLm1pbihjb3VudCAqIDE2LCAyNTUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBicnVzaDtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBidWlsZEJydXNoU29mdChicnVzaCwgYnJ1c2hJbmZvKSB7XG4gICAgICAgIHZhclxuICAgICAgICAgICAgaW50U2l6ZSA9IE1hdGguY2VpbChicnVzaEluZm8uY3VyU2l6ZSksXG4gICAgICAgICAgICBjZW50ZXIgPSBpbnRTaXplIC8gMi4wLFxuICAgICAgICAgICAgc3FyUmFkaXVzID0gKGJydXNoSW5mby5jdXJTaXplIC8gMikgKiAoYnJ1c2hJbmZvLmN1clNpemUgLyAyKSxcblxuICAgICAgICAgICAgeEZhY3RvciA9IDEuMCArIGJydXNoSW5mby5jdXJTcXVlZXplICogTUFYX1NRVUVFWkUsXG4gICAgICAgICAgICBjb3NBID0gTWF0aC5jb3MoYnJ1c2hJbmZvLmN1ckFuZ2xlKSxcbiAgICAgICAgICAgIHNpbkEgPSBNYXRoLnNpbihicnVzaEluZm8uY3VyQW5nbGUpLFxuXG4gICAgICAgICAgICBvZmZzZXQgPSAwO1xuICAgICAgICBcbiAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBpbnRTaXplOyBqKyspIHtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaW50U2l6ZTsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIFxuICAgICAgICAgICAgICAgICAgICB4ID0gKGkgKyAwLjUgLSBjZW50ZXIpLFxuICAgICAgICAgICAgICAgICAgICB5ID0gKGogKyAwLjUgLSBjZW50ZXIpLFxuICAgICAgICAgICAgICAgICAgICBkeCA9ICh4ICogY29zQSAtIHkgKiBzaW5BKSAqIHhGYWN0b3IsXG4gICAgICAgICAgICAgICAgICAgIGR5ID0gKHkgKiBjb3NBICsgeCAqIHNpbkEpLFxuXG4gICAgICAgICAgICAgICAgICAgIHNxckRpc3QgPSBkeCAqIGR4ICsgZHkgKiBkeTtcblxuICAgICAgICAgICAgICAgIGlmIChzcXJEaXN0IDw9IHNxclJhZGl1cykge1xuICAgICAgICAgICAgICAgICAgICBicnVzaFtvZmZzZXQrK10gPSB+figyNTUgKiAoMSAtIChzcXJEaXN0IC8gc3FyUmFkaXVzKSkpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGJydXNoW29mZnNldCsrXSA9IDA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGJydXNoO1xuICAgIH0gXG4gICAgXG4gICAgLyoqXG4gICAgICogQnVpbGQgYW5kIHJldHVybiBhIGJydXNoIHRoYXQgY29uZm9ybXMgdG8gdGhlIGdpdmVuIGJydXNoIHNldHRpbmdzLlxuICAgICAqIFxuICAgICAqIEByZXR1cm5zIGEgVWludDhBcnJheVxuICAgICAqLyBcbiAgICBmdW5jdGlvbiBnZXRCcnVzaChicnVzaEluZm8pIHtcbiAgICAgICAgaWYgKGNhY2hlQnJ1c2ggIT0gbnVsbCAmJiBicnVzaEluZm8uY3VyU2l6ZSA9PSBjYWNoZVNpemUgJiYgYnJ1c2hJbmZvLmN1clNxdWVlemUgPT0gY2FjaGVTcXVlZXplXG4gICAgICAgICAgICAgICAgJiYgYnJ1c2hJbmZvLmN1ckFuZ2xlID09IGNhY2hlQW5nbGUgJiYgYnJ1c2hJbmZvLnR5cGUgPT0gY2FjaGVUeXBlKSB7XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVCcnVzaDtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgc3dpdGNoIChicnVzaEluZm8udHlwZSkge1xuICAgICAgICAgICAgY2FzZSBDUEJydXNoSW5mby5CX1JPVU5EX0FJUkJSVVNIOlxuICAgICAgICAgICAgICAgIGJydXNoID0gYnVpbGRCcnVzaFNvZnQoYnJ1c2gsIGJydXNoSW5mbyk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgQ1BCcnVzaEluZm8uQl9ST1VORF9BQTpcbiAgICAgICAgICAgICAgICBicnVzaCA9IGJ1aWxkQnJ1c2hBQShicnVzaCwgYnJ1c2hJbmZvKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBDUEJydXNoSW5mby5CX1JPVU5EX1BJWEVMOlxuICAgICAgICAgICAgICAgIGJydXNoID0gYnVpbGRCcnVzaChicnVzaCwgYnJ1c2hJbmZvKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBDUEJydXNoSW5mby5CX1NRVUFSRV9BQTpcbiAgICAgICAgICAgICAgICBicnVzaCA9IGJ1aWxkQnJ1c2hTcXVhcmVBQShicnVzaCwgYnJ1c2hJbmZvKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBDUEJydXNoSW5mby5CX1NRVUFSRV9QSVhFTDpcbiAgICAgICAgICAgICAgICBicnVzaCA9IGJ1aWxkQnJ1c2hTcXVhcmUoYnJ1c2gsIGJydXNoSW5mbyk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuXG4gICAgICAgIGNhY2hlQnJ1c2ggPSBicnVzaDtcbiAgICAgICAgY2FjaGVTaXplID0gYnJ1c2hJbmZvLmN1clNpemU7XG4gICAgICAgIGNhY2hlVHlwZSA9IGJydXNoSW5mby50eXBlO1xuICAgICAgICBjYWNoZVNxdWVlemUgPSBicnVzaEluZm8uY3VyU3F1ZWV6ZTtcbiAgICAgICAgY2FjaGVBbmdsZSA9IGJydXNoSW5mby5jdXJBbmdsZTtcblxuICAgICAgICByZXR1cm4gYnJ1c2g7XG4gICAgfVxuICAgIFxuICAgIGZ1bmN0aW9uIGFwcGx5VGV4dHVyZShkYWIsIHRleHR1cmVBbW91bnQpIHtcbiAgICAgICAgdmFyIFxuICAgICAgICAgICAgYW1vdW50ID0gTWF0aC5mbG9vcih0ZXh0dXJlQW1vdW50ICogMjU1KSxcbiAgICAgICAgICAgIHRleHR1cmUgPSB0aGF0LnRleHR1cmUsXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRleHR1cmVYID0gZGFiLnggJSB0ZXh0dXJlLndpZHRoLFxuICAgICAgICAgICAgdGV4dHVyZVkgPSBkYWIueSAlIHRleHR1cmUuaGVpZ2h0LFxuICAgICAgICAgICAgXG4gICAgICAgICAgICBicnVzaFBvcyA9IDAsXG4gICAgICAgICAgICB0ZXh0dXJlUG9zLCB0ZXh0dXJlRU9MO1xuXG4gICAgICAgIGlmICh0ZXh0dXJlWCA8IDApIHtcbiAgICAgICAgICAgIHRleHR1cmVYICs9IHRleHR1cmUud2lkdGg7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGV4dHVyZVkgPCAwKSB7XG4gICAgICAgICAgICB0ZXh0dXJlWSArPSB0ZXh0dXJlLmhlaWdodDtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgZm9yICh2YXIgeSA9IDA7IHkgPCBkYWIuaGVpZ2h0OyB5KyspIHtcbiAgICAgICAgICAgIHRleHR1cmVQb3MgPSB0ZXh0dXJlWSAqIHRleHR1cmUud2lkdGggKyB0ZXh0dXJlWDtcbiAgICAgICAgICAgIHRleHR1cmVFT0wgPSB0ZXh0dXJlWSAqIHRleHR1cmUud2lkdGggKyB0ZXh0dXJlLndpZHRoO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IGRhYi53aWR0aDsgeCsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIFxuICAgICAgICAgICAgICAgICAgICBicnVzaFZhbHVlID0gZGFiLmJydXNoW2JydXNoUG9zXSxcbiAgICAgICAgICAgICAgICAgICAgdGV4dHVyZVZhbHVlID0gdGV4dHVyZS5kYXRhW3RleHR1cmVQb3NdO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGRhYi5icnVzaFticnVzaFBvc10gPSB+fihicnVzaFZhbHVlICogKCh0ZXh0dXJlVmFsdWUgKiBhbW91bnQgLyAyNTUpIF4gMHhmZikgLyAyNTUpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGJydXNoUG9zKys7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgdGV4dHVyZVBvcysrO1xuICAgICAgICAgICAgICAgIGlmICh0ZXh0dXJlUG9zID09IHRleHR1cmVFT0wpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gV3JhcCB0byBsZWZ0IHNpZGUgb2YgdGV4dHVyZVxuICAgICAgICAgICAgICAgICAgICB0ZXh0dXJlUG9zIC09IHRleHR1cmUud2lkdGg7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICB0ZXh0dXJlWSsrO1xuICAgICAgICAgICAgaWYgKHRleHR1cmVZID09IHRleHR1cmUuaGVpZ2h0KSB7XG4gICAgICAgICAgICAgICAgdGV4dHVyZVkgPSAwO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB4IGZsb2F0XG4gICAgICogQHBhcmFtIHkgZmxvYXRcbiAgICAgKiBicnVzaEluZm8gLSBhIENQQnJ1c2hJbmZvIG9iamVjdFxuICAgICAqL1xuICAgIHRoaXMuZ2V0RGFiID0gZnVuY3Rpb24oeCwgeSwgYnJ1c2hJbmZvKSB7XG4gICAgICAgIHZhciBcbiAgICAgICAgICAgIGRhYiA9IHtcbiAgICAgICAgICAgICAgICBhbHBoYTogYnJ1c2hJbmZvLmN1ckFscGhhLFxuICAgICAgICAgICAgICAgIHdpZHRoOiBNYXRoLmNlaWwoYnJ1c2hJbmZvLmN1clNpemUpLFxuICAgICAgICAgICAgICAgIGhlaWdodDogTWF0aC5jZWlsKGJydXNoSW5mby5jdXJTaXplKVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAvLyBGSVhNRTogSSBkb24ndCBsaWtlIHRoaXMgc3BlY2lhbCBjYXNlIGZvciBST1VORF9QSVhFTFxuICAgICAgICAvLyBpdCB3b3VsZCBiZSBiZXR0ZXIgdG8gaGF2ZSBicnVzaCBwcmVzZXRzIGZvciB3b3JraW5nIHdpdGggcGl4ZWxzXG4gICAgICAgIHZhciB1c2VBQSA9IGJydXNoSW5mby5pc0FBICYmIGJydXNoSW5mby50eXBlICE9IENQQnJ1c2hJbmZvLkJfUk9VTkRfUElYRUw7XG5cbiAgICAgICAgaWYgKHVzZUFBKSB7XG4gICAgICAgICAgICBkYWIud2lkdGgrKztcbiAgICAgICAgICAgIGRhYi5oZWlnaHQrKztcbiAgICAgICAgfVxuXG4gICAgICAgIHZhclxuICAgICAgICAgICAgbnggPSB4IC0gZGFiLndpZHRoIC8gMi4wICsgMC41LFxuICAgICAgICAgICAgbnkgPSB5IC0gZGFiLmhlaWdodCAvIDIuMCArIDAuNTtcblxuICAgICAgICAvLyB0aGlzIGlzIG5lY2Vzc2FyeSBhcyBKYXZhIHVzZXMgY29udmVydCB0b3dhcmRzIHplcm8gZmxvYXQgdG8gaW50IGNvbnZlcnNpb25cbiAgICAgICAgaWYgKG54IDwgMCkge1xuICAgICAgICAgICAgbnggLT0gMTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobnkgPCAwKSB7XG4gICAgICAgICAgICBueSAtPSAxO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHVzZUFBKSB7XG4gICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICBkeCA9IE1hdGguYWJzKG54IC0gfn5ueCksXG4gICAgICAgICAgICAgICAgZHkgPSBNYXRoLmFicyhueSAtIH5+bnkpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBkYWIuYnJ1c2ggPSBnZXRCcnVzaFdpdGhBQShicnVzaEluZm8sIGR4LCBkeSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBkYWIuYnJ1c2ggPSBnZXRCcnVzaChicnVzaEluZm8pO1xuICAgICAgICB9XG5cbiAgICAgICAgZGFiLnggPSB+fm54O1xuICAgICAgICBkYWIueSA9IH5+bnk7XG5cbiAgICAgICAgaWYgKGJydXNoSW5mby50ZXh0dXJlID4gMC4wICYmIHRoaXMudGV4dHVyZSAhPSBudWxsKSB7XG4gICAgICAgICAgICAvLyB3ZSBuZWVkIGEgYnJ1c2ggYml0bWFwIHRoYXQgY2FuIGJlIG1vZGlmaWVkIGV2ZXJ5dGltZVxuICAgICAgICAgICAgLy8gdGhlIG9uZSBpbiBcImJydXNoXCIgY2FuIGJlIGtlcHQgaW4gY2FjaGUgc28gaWYgd2UgYXJlIHVzaW5nIGl0LCBtYWtlIGEgY29weVxuICAgICAgICAgICAgaWYgKGRhYi5icnVzaCA9PSBicnVzaCkge1xuICAgICAgICAgICAgICAgIGJydXNoQUEuc2V0KGJydXNoKTtcbiAgICAgICAgICAgICAgICBkYWIuYnJ1c2ggPSBicnVzaEFBO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYXBwbHlUZXh0dXJlKGRhYiwgYnJ1c2hJbmZvLnRleHR1cmUpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gZGFiO1xuICAgIH1cblxuICAgIHRoaXMuc2V0VGV4dHVyZSA9IGZ1bmN0aW9uKHRleHR1cmUpIHtcbiAgICAgICAgdGhpcy50ZXh0dXJlID0gdGV4dHVyZTtcbiAgICB9XG59XG4iLCIvKlxuICAgIENoaWNrZW5QYWludFxuXG4gICAgQ2hpY2tlblBhaW50IGlzIGEgdHJhbnNsYXRpb24gb2YgQ2hpYmlQYWludCBmcm9tIEphdmEgdG8gSmF2YVNjcmlwdFxuICAgIGJ5IE5pY2hvbGFzIFNoZXJsb2NrIC8gQ2hpY2tlbiBTbW9vdGhpZS5cblxuICAgIENoaWJpUGFpbnQgaXMgQ29weXJpZ2h0IChjKSAyMDA2LTIwMDggTWFyYyBTY2hlZmVyXG5cbiAgICBDaGlja2VuUGFpbnQgaXMgZnJlZSBzb2Z0d2FyZTogeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yIG1vZGlmeVxuICAgIGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgYXMgcHVibGlzaGVkIGJ5XG4gICAgdGhlIEZyZWUgU29mdHdhcmUgRm91bmRhdGlvbiwgZWl0aGVyIHZlcnNpb24gMyBvZiB0aGUgTGljZW5zZSwgb3JcbiAgICAoYXQgeW91ciBvcHRpb24pIGFueSBsYXRlciB2ZXJzaW9uLlxuXG4gICAgQ2hpY2tlblBhaW50IGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsXG4gICAgYnV0IFdJVEhPVVQgQU5ZIFdBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2ZcbiAgICBNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuICBTZWUgdGhlXG4gICAgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy5cblxuICAgIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXG4gICAgYWxvbmcgd2l0aCBDaGlja2VuUGFpbnQuIElmIG5vdCwgc2VlIDxodHRwOi8vd3d3LmdudS5vcmcvbGljZW5zZXMvPi5cbiovXG5cbmltcG9ydCBDUEFydHdvcmsgZnJvbSBcIi4vQ1BBcnR3b3JrXCI7XG5pbXBvcnQgQ1BMYXllciBmcm9tIFwiLi9DUExheWVyXCI7XG5pbXBvcnQgQ1BDb2xvckJtcCBmcm9tIFwiLi9DUENvbG9yQm1wXCI7XG5pbXBvcnQgQXJyYXlEYXRhU3RyZWFtIGZyb20gXCIuLi91dGlsL0FycmF5RGF0YVN0cmVhbVwiO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBDUENoaWJpRmlsZSgpIHtcblxuICAgIGZ1bmN0aW9uIENQQ2hpYmlIZWFkZXIoc3RyZWFtLCBjaHVuaykge1xuICAgICAgICB0aGlzLnZlcnNpb24gPSBzdHJlYW0ucmVhZFUzMkJFKCk7XG4gICAgICAgIHRoaXMud2lkdGggPSBzdHJlYW0ucmVhZFUzMkJFKCk7XG4gICAgICAgIHRoaXMuaGVpZ2h0ID0gc3RyZWFtLnJlYWRVMzJCRSgpO1xuICAgICAgICB0aGlzLmxheWVyc05iID0gc3RyZWFtLnJlYWRVMzJCRSgpO1xuICAgIH1cbiAgICBcbiAgICBDUENoaWJpSGVhZGVyLkZJWEVEX0hFQURFUl9MRU5HVEggPSA0ICogNDtcblxuICAgIGZ1bmN0aW9uIENQQ2hpYmlDaHVua0hlYWRlcihzdHJlYW0pIHtcbiAgICAgICAgdmFyXG4gICAgICAgICAgICBjaHVua1R5cGUgPSBuZXcgQXJyYXkoNCk7XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjaHVua1R5cGUubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGNodW5rVHlwZVtpXSA9IFN0cmluZy5mcm9tQ2hhckNvZGUoc3RyZWFtLnJlYWRCeXRlKCkpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICB0aGlzLmNodW5rVHlwZSA9IGNodW5rVHlwZS5qb2luKFwiXCIpO1xuICAgICAgICB0aGlzLmNodW5rU2l6ZSA9IHN0cmVhbS5yZWFkVTMyQkUoKTtcblxuICAgICAgICBpZiAoc3RyZWFtLmVvZikge1xuICAgICAgICAgICAgdGhyb3cgXCJUcnVuY2F0ZWQgY2h1bmtcIjtcbiAgICAgICAgfVxuICAgIH1cbiAgICBcbiAgICBmdW5jdGlvbiBDUENoaWJpTGF5ZXJDaHVua0hlYWRlcigpIHtcbiAgICAgICAgdmFyXG4gICAgICAgICAgICBwYXlsb2FkT2Zmc2V0LFxuICAgICAgICAgICAgdGl0bGVMZW5ndGg7XG4gICAgICAgIFxuICAgICAgICB0aGlzLnJlYWRGaXhlZEhlYWRlciA9IGZ1bmN0aW9uKHN0cmVhbSkge1xuICAgICAgICAgICAgcGF5bG9hZE9mZnNldCA9IHN0cmVhbS5yZWFkVTMyQkUoKTtcbiAgICBcbiAgICAgICAgICAgIHRoaXMuYmxlbmRNb2RlID0gc3RyZWFtLnJlYWRVMzJCRSgpO1xuICAgICAgICAgICAgdGhpcy5hbHBoYSA9IHN0cmVhbS5yZWFkVTMyQkUoKTtcbiAgICAgICAgICAgIHRoaXMudmlzaWJsZSA9IChzdHJlYW0ucmVhZFUzMkJFKCkgJiAxKSAhPSAwO1xuICAgIFxuICAgICAgICAgICAgdGl0bGVMZW5ndGggPSBzdHJlYW0ucmVhZFUzMkJFKCk7XG4gICAgICAgIH07XG4gICAgICAgIFxuICAgICAgICAvKiBcbiAgICAgICAgICogQWZ0ZXIgcmVhZGluZyB0aGUgZml4ZWQgaGVhZGVyLCB1c2UgdGhpcyBmdW5jdGlvbiB0byBmaW5kIG91dCBob3cgbWFueSBtb3JlIGJ5dGVzIG9mIGhlYWRlclxuICAgICAgICAgKiBuZWVkIHRvIGJlIHJlYWQuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmdldFZhcmlhYmxlSGVhZGVyTGVuID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gcGF5bG9hZE9mZnNldCAtIENQQ2hpYmlMYXllckNodW5rSGVhZGVyLkZJWEVEX0hFQURFUl9MRU5HVEg7XG4gICAgICAgIH07XG4gICAgICAgIFxuICAgICAgICB0aGlzLmdldFRvdGFsSGVhZGVyTGVuID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gQ1BDaGliaUxheWVyQ2h1bmtIZWFkZXIuRklYRURfSEVBREVSX0xFTkdUSCArIHRoaXMuZ2V0VmFyaWFibGVIZWFkZXJMZW4oKTtcbiAgICAgICAgfTtcbiAgICAgICAgXG4gICAgICAgIHRoaXMucmVhZFZhcmlhYmxlSGVhZGVyID0gZnVuY3Rpb24oc3RyZWFtKSB7XG4gICAgICAgICAgICB0aGlzLm5hbWUgPSBzdHJlYW0ucmVhZFN0cmluZyh0aXRsZUxlbmd0aCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFNraXAgdG8gdGhlIHBpeGVsIGRhdGEgKGFsbG93cyBhZGRpdGlvbmFsIGhlYWRlciBmaWVsZHMgdG8gYmUgYWRkZWQgdGhhdCB3ZSBkb24ndCB5ZXQgc3VwcG9ydClcbiAgICAgICAgICAgIHN0cmVhbS5za2lwKHBheWxvYWRPZmZzZXQgLSB0aXRsZUxlbmd0aCAtIENQQ2hpYmlMYXllckNodW5rSGVhZGVyLkZJWEVEX0hFQURFUl9MRU5HVEgpO1xuICAgICAgICB9O1xuICAgIH1cbiAgICBcbiAgICAvLyBUaGUgc2l6ZSBvZiB0aGUgaW5pdGlhbCwgZml4ZWQtbGVuZ3RoIHBvcnRpb24gb2YgdGhlIGhlYWRlclxuICAgIENQQ2hpYmlMYXllckNodW5rSGVhZGVyLkZJWEVEX0hFQURFUl9MRU5HVEggPSA0ICogNTtcblxuICAgIGNvbnN0XG4gICAgICAgIENISV9NQUdJQyA9IFwiQ0hJQklPRUtcIixcblxuICAgICAgICBDSFVOS19UQUdfSEVBRCA9IFwiSEVBRFwiLFxuICAgICAgICBDSFVOS19UQUdfTEFZRVIgPSBcIkxBWVJcIixcbiAgICAgICAgQ0hVTktfVEFHX0VORCA9IFwiWkVORFwiLFxuICAgICAgICBcbiAgICAgICAgQllURVNfUEVSX1BJWEVMID0gQ1BDb2xvckJtcC5CWVRFU19QRVJfUElYRUwsXG4gICAgICAgIEFMUEhBX0JZVEVfT0ZGU0VUID0gQ1BDb2xvckJtcC5BTFBIQV9CWVRFX09GRlNFVCxcbiAgICAgICAgUkVEX0JZVEVfT0ZGU0VUID0gQ1BDb2xvckJtcC5SRURfQllURV9PRkZTRVQsXG4gICAgICAgIEdSRUVOX0JZVEVfT0ZGU0VUID0gQ1BDb2xvckJtcC5HUkVFTl9CWVRFX09GRlNFVCxcbiAgICAgICAgQkxVRV9CWVRFX09GRlNFVCA9IENQQ29sb3JCbXAuQkxVRV9CWVRFX09GRlNFVDtcblxuICAgIGZ1bmN0aW9uIHNlcmlhbGl6ZUVuZENodW5rKCkge1xuICAgICAgICB2YXJcbiAgICAgICAgICAgIGJ1ZmZlciA9IG5ldyBVaW50OEFycmF5KENIVU5LX1RBR19FTkQubGVuZ3RoICsgNCksXG4gICAgICAgICAgICBzdHJlYW0gPSBuZXcgQXJyYXlEYXRhU3RyZWFtKGJ1ZmZlcik7XG5cbiAgICAgICAgc3RyZWFtLndyaXRlU3RyaW5nKENIVU5LX1RBR19FTkQpO1xuICAgICAgICBzdHJlYW0ud3JpdGVVMzJCRSgwKTtcblxuICAgICAgICByZXR1cm4gc3RyZWFtLmdldEFzRGF0YUFycmF5KCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2VyaWFsaXplSGVhZGVyQ2h1bmsoYXJ0d29yaykge1xuICAgICAgICB2YXJcbiAgICAgICAgICAgIGJ1ZmZlciA9IG5ldyBVaW50OEFycmF5KENIVU5LX1RBR19IRUFELmxlbmd0aCArIDQgKiA1KSxcbiAgICAgICAgICAgIHN0cmVhbSA9IG5ldyBBcnJheURhdGFTdHJlYW0oYnVmZmVyKTtcblxuICAgICAgICBzdHJlYW0ud3JpdGVTdHJpbmcoQ0hVTktfVEFHX0hFQUQpO1xuICAgICAgICBzdHJlYW0ud3JpdGVVMzJCRSgxNik7IC8vIENodW5rU2l6ZVxuXG4gICAgICAgIHN0cmVhbS53cml0ZVUzMkJFKDApOyAvLyBDdXJyZW50IFZlcnNpb246IE1ham9yOiAwIE1pbm9yOiAwXG4gICAgICAgIHN0cmVhbS53cml0ZVUzMkJFKGFydHdvcmsud2lkdGgpO1xuICAgICAgICBzdHJlYW0ud3JpdGVVMzJCRShhcnR3b3JrLmhlaWdodCk7XG4gICAgICAgIHN0cmVhbS53cml0ZVUzMkJFKGFydHdvcmsuZ2V0TGF5ZXJDb3VudCgpKTtcblxuICAgICAgICByZXR1cm4gc3RyZWFtLmdldEFzRGF0YUFycmF5KCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2VyaWFsaXplTGF5ZXJDaHVuayhsYXllcikge1xuICAgICAgICB2YXJcbiAgICAgICAgICAgIGNodW5rU2l6ZSA9IDIwICsgbGF5ZXIubmFtZS5sZW5ndGggKyBsYXllci5kYXRhLmxlbmd0aCxcblxuICAgICAgICAgICAgYnVmZmVyID0gbmV3IFVpbnQ4QXJyYXkoQ0hVTktfVEFHX0xBWUVSLmxlbmd0aCArIDQgKyBjaHVua1NpemUpLFxuICAgICAgICAgICAgc3RyZWFtID0gbmV3IEFycmF5RGF0YVN0cmVhbShidWZmZXIpLFxuICAgICAgICAgICAgcG9zO1xuXG4gICAgICAgIHN0cmVhbS53cml0ZVN0cmluZyhDSFVOS19UQUdfTEFZRVIpOyAvLyBDaHVuayBJRFxuICAgICAgICBzdHJlYW0ud3JpdGVVMzJCRShjaHVua1NpemUpOyAvLyBDaHVua1NpemVcblxuICAgICAgICBzdHJlYW0ud3JpdGVVMzJCRSgyMCArIGxheWVyLm5hbWUubGVuZ3RoKTsgLy8gT2Zmc2V0IHRvIGxheWVyIGRhdGEgZnJvbSBzdGFydCBvZiBoZWFkZXJcblxuICAgICAgICBzdHJlYW0ud3JpdGVVMzJCRShsYXllci5ibGVuZE1vZGUpO1xuICAgICAgICBzdHJlYW0ud3JpdGVVMzJCRShsYXllci5hbHBoYSk7XG4gICAgICAgIHN0cmVhbS53cml0ZVUzMkJFKGxheWVyLnZpc2libGUgPyAxIDogMCk7IC8vIGxheWVyIHZpc2liaWxpdHkgYW5kIGZ1dHVyZSBmbGFnc1xuXG4gICAgICAgIHN0cmVhbS53cml0ZVUzMkJFKGxheWVyLm5hbWUubGVuZ3RoKTtcbiAgICAgICAgc3RyZWFtLndyaXRlU3RyaW5nKGxheWVyLm5hbWUpO1xuXG4gICAgICAgIC8vIENvbnZlcnQgbGF5ZXIgYnl0ZXMgZnJvbSBSR0JBIHRvIEFSR0Igb3JkZXIgdG8gbWF0Y2ggdGhlIENoaWJpIHNwZWNzXG4gICAgICAgIHBvcyA9IHN0cmVhbS5wb3M7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGF5ZXIuZGF0YS5sZW5ndGg7IGkgKz0gQllURVNfUEVSX1BJWEVMKSB7XG4gICAgICAgICAgICBidWZmZXJbcG9zKytdID0gbGF5ZXIuZGF0YVtpICsgQUxQSEFfQllURV9PRkZTRVRdO1xuICAgICAgICAgICAgYnVmZmVyW3BvcysrXSA9IGxheWVyLmRhdGFbaSArIFJFRF9CWVRFX09GRlNFVF07XG4gICAgICAgICAgICBidWZmZXJbcG9zKytdID0gbGF5ZXIuZGF0YVtpICsgR1JFRU5fQllURV9PRkZTRVRdO1xuICAgICAgICAgICAgYnVmZmVyW3BvcysrXSA9IGxheWVyLmRhdGFbaSArIEJMVUVfQllURV9PRkZTRVRdO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGJ1ZmZlcjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXJpYWxpemUgdGhlIGdpdmVuIGFydHdvcmsgdG8gQ2hpYmlmaWxlIGZvcm1hdC4gUmV0dXJucyBhIHByb21pc2Ugd2hpY2ggcmVzb2x2ZXMgdG8gdGhlIHNlcmlhbGl6ZWQgQmxvYi5cbiAgICAgKi9cbiAgICB0aGlzLnNlcmlhbGl6ZSA9IGZ1bmN0aW9uKGFydHdvcmspIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgZGVmbGF0b3IgPSBuZXcgd2luZG93LnBha28uRGVmbGF0ZSh7XG4gICAgICAgICAgICAgICAgICAgIGxldmVsOiA3XG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgYmxvYlBhcnRzID0gW10sXG4gICAgICAgICAgICAgICAgbWFnaWMgPSBuZXcgVWludDhBcnJheShDSElfTUFHSUMubGVuZ3RoKTtcbiAgICBcbiAgICAgICAgICAgIC8vIFRoZSBtYWdpYyBmaWxlIHNpZ25hdHVyZSBpcyBub3QgWkxJQiBjb21wcmVzc2VkOlxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBDSElfTUFHSUMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBtYWdpY1tpXSA9IENISV9NQUdJQy5jaGFyQ29kZUF0KGkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYmxvYlBhcnRzLnB1c2gobWFnaWMpO1xuICAgIFxuICAgICAgICAgICAgLy8gVGhlIHJlc3QgZ2V0cyBjb21wcmVzc2VkXG4gICAgICAgICAgICBkZWZsYXRvci5wdXNoKHNlcmlhbGl6ZUhlYWRlckNodW5rKGFydHdvcmspLCBmYWxzZSk7XG4gICAgXG4gICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICBsYXllcnMgPSBhcnR3b3JrLmdldExheWVycygpLFxuICAgICAgICAgICAgICAgIGkgPSAwO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBJbnNlcnQgYSBzZXR0aW1lb3V0IGJldHdlZW4gZWFjaCBzZXJpYWxpemVkIGxheWVyLCBzbyB3ZSBjYW4gbWFpbnRhaW4gYnJvd3NlciByZXNwb25zaXZlbmVzc1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBmdW5jdGlvbiBzZXJpYWxpemVMYXllcigpIHtcbiAgICAgICAgICAgICAgICBpZiAoaSA9PSBsYXllcnMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIGRlZmxhdG9yLnB1c2goc2VyaWFsaXplRW5kQ2h1bmsoYXJ0d29yayksIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgYmxvYlBhcnRzLnB1c2goZGVmbGF0b3IucmVzdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUobmV3IEJsb2IoYmxvYlBhcnRzLCB7dHlwZTogXCJhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW1cIn0pKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBkZWZsYXRvci5wdXNoKHNlcmlhbGl6ZUxheWVyQ2h1bmsobGF5ZXJzW2krK10pLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KHNlcmlhbGl6ZUxheWVyLCAxMCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBzZXRUaW1lb3V0KHNlcmlhbGl6ZUxheWVyLCAxMCk7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICBmdW5jdGlvbiBoYXNDaGliaU1hZ2ljTWFya2VyKGFycmF5KSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgQ0hJX01BR0lDLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAoYXJyYXlbaV0gIT0gQ0hJX01BR0lDLmNoYXJDb2RlQXQoaSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDb25jYXQgdHdvIFVpbnQ4QXJyYXlzIHRvIG1ha2UgYSBuZXcgb25lIGFuZCByZXR1cm4gaXQuXG4gICAgICogXG4gICAgICogRWl0aGVyIG9uZSBtYXkgYmUgc2V0IHRvIG51bGwuIElmIGVpdGhlciBvbmUgaXMgbnVsbCwgdGhlIG90aGVyIGlzIHJldHVybmVkLiBJZiBib3RoIGFyZSBudWxsLCBudWxsIGlzXG4gICAgICogcmV0dXJuZWQuXG4gICAgICovXG4gICAgZnVuY3Rpb24gY29uY2F0QnVmZmVycyhvbmUsIHR3bykge1xuICAgICAgICBpZiAob25lID09IG51bGwgfHwgb25lLmxlbmd0aCA9PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gdHdvO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0d28gPT0gbnVsbCB8fCB0d28ubGVuZ3RoID09IDApIHtcbiAgICAgICAgICAgIHJldHVybiBvbmU7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHZhclxuICAgICAgICAgICAgcmVzdWx0ID0gbmV3IFVpbnQ4QXJyYXkob25lLmxlbmd0aCArIHR3by5sZW5ndGgpO1xuICAgICAgICBcbiAgICAgICAgcmVzdWx0LnNldChvbmUsIDApO1xuICAgICAgICByZXN1bHQuc2V0KHR3bywgb25lLmxlbmd0aCk7XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICBcbiAgICAvKipcbiAgICAgKiBBdHRlbXB0IHRvIGxvYWQgYSBjaGliaWZpbGUgZnJvbSB0aGUgZ2l2ZW4gYXJyYXlidWZmZXIuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBBIENQQXJ0d29yayBvbiBzdWNjZXNzLCBvciBudWxsIG9uIGZhaWx1cmUuXG4gICAgICovXG4gICAgdGhpcy5yZWFkID0gZnVuY3Rpb24oYXJyYXlCdWZmZXIpIHtcbiAgICAgICAgY29uc3RcbiAgICAgICAgICAgIFNUQVRFX1dBSVRfRk9SX0NIVU5LICAgICAgICAgICAgICAgPSAwLFxuICAgICAgICAgICAgU1RBVEVfREVDT0RFX0lNQUdFX0hFQURFUiAgICAgICAgICA9IDEsXG4gICAgICAgICAgICBTVEFURV9ERUNPREVfTEFZRVJfSEVBREVSX0ZJWEVEICAgID0gMixcbiAgICAgICAgICAgIFNUQVRFX0RFQ09ERV9MQVlFUl9IRUFERVJfVkFSSUFCTEUgPSAzLFxuICAgICAgICAgICAgU1RBVEVfREVDT0RFX0xBWUVSICAgICAgICAgICAgICAgICA9IDQsXG4gICAgICAgICAgICBTVEFURV9TS0lQX1RSQUlMSU5HX0NIVU5LX0JZVEVTICAgID0gNSxcbiAgICAgICAgICAgIFNUQVRFX1NVQ0NFU1MgICAgICAgICAgICAgICAgICAgICAgPSA2LFxuICAgICAgICAgICAgU1RBVEVfRkFUQUwgICAgICAgICAgICAgICAgICAgICAgICA9IDEwO1xuICAgICAgICBcbiAgICAgICAgdmFyXG4gICAgICAgICAgICBwYWtvID0gbmV3IHdpbmRvdy5wYWtvLkluZmxhdGUoe30pLFxuICAgICAgICAgICAgc3RhdGUgPSBTVEFURV9XQUlUX0ZPUl9DSFVOSyxcbiAgICAgICAgICAgIGFydHdvcmsgPSBudWxsLFxuICAgICAgICAgICAgbGF5ZXJIZWFkZXIsIGxheWVyLCBcbiAgICAgICAgICAgIGxheWVyQnl0ZXNSZWFkLCBsYXllckJ5dGVzVG90YWwsIHNraXBDb3VudCxcbiAgICAgICAgICAgIGhlYWRlckNodW5rID0gbnVsbCwgaGVhZGVyID0gbnVsbCxcbiAgICAgICAgICAgIGNodW5rID0gbnVsbCxcbiAgICAgICAgICAgIGJ1ZmZlciA9IG51bGw7XG4gICAgICAgIFxuICAgICAgICAvKipcbiAgICAgICAgICogRGVjb2RlIEEsUixHLEIgcGl4ZWxzIGZyb20gdGhlIGdpdmVuIGJ1ZmZlciBpbnRvIHRoZSBSLEcsQixBIHBpeGVsIGFycmF5IGdpdmVuIGJ5IGxheWVyUGl4LlxuICAgICAgICAgKiBcbiAgICAgICAgICogVGhlIGxheWVyQnl0ZXNSZWFkIGFuZCBsYXllckJ5dGVzVG90YWwgdmFyaWFibGVzIGFyZSB1c2VkIHRvIGtlZXAgdHJhY2sgb2YgdGhlIGRlY29kZSBwcm9jZXNzIGFuZCB0byBcbiAgICAgICAgICogbGltaXQgdGhlIG51bWJlciBvZiBieXRlcyByZWFkLCByZXNwZWN0aXZlbHkuXG4gICAgICAgICAqIFxuICAgICAgICAgKiBSZXR1cm5zIHRoZSBidWZmZXIgd2l0aCB0aGUgcmVhZCBieXRlcyByZW1vdmVkIGZyb20gdGhlIGZyb250LCBvciBudWxsIGlmIHRoZSBidWZmZXIgd2FzIHJlYWQgaW4gaXRzIGVudGlyZXR5LlxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gZGVjb2RlUGl4ZWxzKGJ1ZmZlciwgbGF5ZXJQaXgpIHtcbiAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgIHN1YnBpeGVsID0gbGF5ZXJCeXRlc1JlYWQgJSBCWVRFU19QRVJfUElYRUwsXG4gICAgICAgICAgICAgICAgZHN0UGl4ZWxTdGFydE9mZnNldCA9IGxheWVyQnl0ZXNSZWFkIC0gc3VicGl4ZWwsXG4gICAgICAgICAgICAgICAgYnVmZmVyUG9zID0gMCxcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBNYXAgZnJvbSBzb3VyY2UgY2hhbm5lbCBvcmRlciB0byBDUExheWVyJ3MgZGVzdCBvcmRlclxuICAgICAgICAgICAgICAgIGNoYW5uZWxNYXAgPSBbXG4gICAgICAgICAgICAgICAgICAgIEFMUEhBX0JZVEVfT0ZGU0VULCBSRURfQllURV9PRkZTRVQsIEdSRUVOX0JZVEVfT0ZGU0VULCBCTFVFX0JZVEVfT0ZGU0VUXG4gICAgICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gVGhlIGZpcnN0IHBpeGVsIG1pZ2h0IGJlIGEgcGFydGlhbCBvbmUgc2luY2Ugd2UgbWlnaHQgYmUgY29udGludWluZyBhIHBpeGVsIHNwbGl0IG92ZXIgYnVmZmVyc1xuICAgICAgICAgICAgZm9yICg7IHN1YnBpeGVsIDwgQllURVNfUEVSX1BJWEVMICYmIGJ1ZmZlclBvcyA8IGJ1ZmZlci5sZW5ndGg7IHN1YnBpeGVsKyspIHtcbiAgICAgICAgICAgICAgICBsYXllclBpeFtkc3RQaXhlbFN0YXJ0T2Zmc2V0ICsgY2hhbm5lbE1hcFtzdWJwaXhlbF1dID0gYnVmZmVyW2J1ZmZlclBvc107XG4gICAgICAgICAgICAgICAgbGF5ZXJCeXRlc1JlYWQrKztcbiAgICAgICAgICAgICAgICBidWZmZXJQb3MrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gSG93IG1hbnkgbW9yZSBwaXhlbHMgYXJlIHdlIHRvIHJlYWQgaW4gdGhpcyBidWZmZXI/XG4gICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICBieXRlc1JlbWFpbiA9IE1hdGgubWluKGJ1ZmZlci5sZW5ndGggLSBidWZmZXJQb3MsIGxheWVyQnl0ZXNUb3RhbCAtIGxheWVyQnl0ZXNSZWFkKSB8IDAsXG4gICAgICAgICAgICAgICAgZnVsbFBpeGVsc1JlbWFpbiA9IChieXRlc1JlbWFpbiAvIEJZVEVTX1BFUl9QSVhFTCkgfCAwLFxuICAgICAgICAgICAgICAgIHN1YnBpeGVsc1JlbWFpbiA9IGJ5dGVzUmVtYWluICUgQllURVNfUEVSX1BJWEVMO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGZ1bGxQaXhlbHNSZW1haW47IGkrKykge1xuICAgICAgICAgICAgICAgIGxheWVyUGl4W2xheWVyQnl0ZXNSZWFkICsgQUxQSEFfQllURV9PRkZTRVRdID0gYnVmZmVyW2J1ZmZlclBvc107XG4gICAgICAgICAgICAgICAgbGF5ZXJQaXhbbGF5ZXJCeXRlc1JlYWQgKyBSRURfQllURV9PRkZTRVRdID0gYnVmZmVyW2J1ZmZlclBvcyArIDFdO1xuICAgICAgICAgICAgICAgIGxheWVyUGl4W2xheWVyQnl0ZXNSZWFkICsgR1JFRU5fQllURV9PRkZTRVRdID0gYnVmZmVyW2J1ZmZlclBvcyArIDJdO1xuICAgICAgICAgICAgICAgIGxheWVyUGl4W2xheWVyQnl0ZXNSZWFkICsgQkxVRV9CWVRFX09GRlNFVF0gPSBidWZmZXJbYnVmZmVyUG9zICsgM107XG4gICAgICAgICAgICAgICAgbGF5ZXJCeXRlc1JlYWQgKz0gQllURVNfUEVSX1BJWEVMO1xuICAgICAgICAgICAgICAgIGJ1ZmZlclBvcyArPSBCWVRFU19QRVJfUElYRUw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFJlYWQgYSBmcmFjdGlvbmFsIHBpeGVsIGF0IHRoZSBlbmQgb2YgdGhlIGJ1ZmZlclxuICAgICAgICAgICAgZHN0UGl4ZWxTdGFydE9mZnNldCA9IGxheWVyQnl0ZXNSZWFkO1xuICAgICAgICAgICAgZm9yIChzdWJwaXhlbCA9IDA7IHN1YnBpeGVsIDwgc3VicGl4ZWxzUmVtYWluOyBzdWJwaXhlbCsrKSB7XG4gICAgICAgICAgICAgICAgbGF5ZXJQaXhbZHN0UGl4ZWxTdGFydE9mZnNldCArIGNoYW5uZWxNYXBbc3VicGl4ZWxdXSA9IGJ1ZmZlcltidWZmZXJQb3NdO1xuICAgICAgICAgICAgICAgIGxheWVyQnl0ZXNSZWFkKys7XG4gICAgICAgICAgICAgICAgYnVmZmVyUG9zKys7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChidWZmZXJQb3MgPCBidWZmZXIubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgLy8gTGF5ZXIgd2FzIGNvbXBsZXRlZCBiZWZvcmUgdGhlIGVuZCBvZiB0aGUgYnVmZmVyLCB0aGVyZSBpcyBidWZmZXIgbGVmdCBvdmVyIGZvciBzb21lb25lIGVsc2UgdG8gdXNlXG4gICAgICAgICAgICAgICAgcmV0dXJuIGJ1ZmZlci5zdWJhcnJheShidWZmZXJQb3MpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBCdWZmZXIgZXhoYXVzdGVkXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGZ1bmN0aW9uIHByb2Nlc3NCbG9jayhibG9jaykge1xuICAgICAgICAgICAgdmFyIFxuICAgICAgICAgICAgICAgIHN0cmVhbTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gQWRkIGEgbG9vcCBoZXJlIHNvIHdlIGNhbiByZS1lbnRlciB0aGUgc3dpdGNoIHdpdGggJ2NvbnRpbnVlJ1xuICAgICAgICAgICAgd2hpbGUgKHRydWUpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKHN0YXRlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgU1RBVEVfV0FJVF9GT1JfQ0hVTks6XG4gICAgICAgICAgICAgICAgICAgICAgICBidWZmZXIgPSBjb25jYXRCdWZmZXJzKGJ1ZmZlciwgYmxvY2spO1xuICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2sgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBXYWl0IGZvciB3aG9sZSBjaHVuayBoZWFkZXIgdG8gYmVjb21lIGF2YWlsYWJsZVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGJ1ZmZlci5sZW5ndGggPCA4KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIERlY29kZSBjaHVuayBoZWFkZXJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0cmVhbSA9IG5ldyBBcnJheURhdGFTdHJlYW0oYnVmZmVyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNodW5rID0gbmV3IENQQ2hpYmlDaHVua0hlYWRlcihzdHJlYW0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBSZW1vdmUgdGhlIGNodW5rIGhlYWRlciBmcm9tIHRoZSBzdGFydCBvZiB0aGUgYnVmZmVyXG4gICAgICAgICAgICAgICAgICAgICAgICBidWZmZXIgPSBidWZmZXIuc3ViYXJyYXkoc3RyZWFtLnBvcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChoZWFkZXJDaHVuaykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjaHVuay5jaHVua1R5cGUgPT0gQ0hVTktfVEFHX0VORCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZSA9IFNUQVRFX1NVQ0NFU1M7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoY2h1bmsuY2h1bmtUeXBlID09IENIVU5LX1RBR19MQVlFUikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZSA9IFNUQVRFX0RFQ09ERV9MQVlFUl9IRUFERVJfRklYRUQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJVbmtub3duIGNodW5rIHR5cGUgJ1wiICsgY2h1bmsuY2h1bmtUeXBlICsgXCInLCBhdHRlbXB0aW5nIHRvIHNraXAuLi5cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9jayA9IGJ1ZmZlcjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnVmZmVyID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNraXBDb3VudCA9IGNodW5rLmNodW5rU2l6ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUgPSBTVEFURV9TS0lQX1RSQUlMSU5HX0NIVU5LX0JZVEVTO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoY2h1bmsuY2h1bmtUeXBlID09IENIVU5LX1RBR19IRUFEKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyQ2h1bmsgPSBjaHVuaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBUcnkgdG8gZGVjb2RlIHRoZSBoZWFkZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZSA9IFNUQVRFX0RFQ09ERV9JTUFHRV9IRUFERVI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZpbGUgZGlkbid0IHN0YXJ0IHdpdGggaW1hZ2UgaGVhZGVyIGNodW5rXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUgPSBTVEFURV9GQVRBTDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgU1RBVEVfREVDT0RFX0lNQUdFX0hFQURFUjpcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1ZmZlciA9IGNvbmNhdEJ1ZmZlcnMoYnVmZmVyLCBibG9jayk7XG4gICAgICAgICAgICAgICAgICAgICAgICBibG9jayA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFdhaXQgZm9yIHdob2xlIGNodW5rIHRvIGJlIGF2YWlsYWJsZVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGJ1ZmZlci5sZW5ndGggPCBoZWFkZXJDaHVuay5jaHVua1NpemUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgc3RyZWFtID0gbmV3IEFycmF5RGF0YVN0cmVhbShidWZmZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyID0gbmV3IENQQ2hpYmlIZWFkZXIoc3RyZWFtLCBoZWFkZXJDaHVuayk7XG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgoaGVhZGVyLnZlcnNpb24gPj4+IDE2KSA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZSA9IFNUQVRFX0ZBVEFMOyAvLyB0aGUgZmlsZSB2ZXJzaW9uIGlzIGhpZ2hlciB0aGFuIHdoYXQgd2UgY2FuIGRlYWwgd2l0aCwgYmFpbCBvdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgYXJ0d29yayA9IG5ldyBDUEFydHdvcmsoaGVhZGVyLndpZHRoLCBoZWFkZXIuaGVpZ2h0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2sgPSBidWZmZXI7XG4gICAgICAgICAgICAgICAgICAgICAgICBidWZmZXIgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBza2lwQ291bnQgPSBoZWFkZXJDaHVuay5jaHVua1NpemU7IC8vIFNraXAgdGhlIGhlYWRlciBjaHVuayBhbG9uZyB3aXRoIGFueSB0cmFpbGluZyBieXRlc1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUgPSBTVEFURV9TS0lQX1RSQUlMSU5HX0NIVU5LX0JZVEVTO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFNUQVRFX0RFQ09ERV9MQVlFUl9IRUFERVJfRklYRUQ6XG4gICAgICAgICAgICAgICAgICAgICAgICBidWZmZXIgPSBjb25jYXRCdWZmZXJzKGJ1ZmZlciwgYmxvY2spO1xuICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2sgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBXYWl0IGZvciBmaXJzdCBwYXJ0IG9mIGhlYWRlciB0byBhcnJpdmVcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChidWZmZXIubGVuZ3RoIDwgQ1BDaGliaUxheWVyQ2h1bmtIZWFkZXIuRklYRURfSEVBREVSX0xFTkdUSCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBsYXllckhlYWRlciA9IG5ldyBDUENoaWJpTGF5ZXJDaHVua0hlYWRlcigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHJlYW0gPSBuZXcgQXJyYXlEYXRhU3RyZWFtKGJ1ZmZlcik7XG4gICAgICAgICAgICAgICAgICAgICAgICBsYXllckhlYWRlci5yZWFkRml4ZWRIZWFkZXIoc3RyZWFtKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgYnVmZmVyID0gYnVmZmVyLnN1YmFycmF5KHN0cmVhbS5wb3MpO1xuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZSA9IFNUQVRFX0RFQ09ERV9MQVlFUl9IRUFERVJfVkFSSUFCTEVcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBTVEFURV9ERUNPREVfTEFZRVJfSEVBREVSX1ZBUklBQkxFOlxuICAgICAgICAgICAgICAgICAgICAgICAgYnVmZmVyID0gY29uY2F0QnVmZmVycyhidWZmZXIsIGJsb2NrKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gV2FpdCBmb3IgdmFyaWFibGUgcGFydCBvZiBoZWFkZXIgdG8gYXJyaXZlXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYnVmZmVyLmxlbmd0aCA8IGxheWVySGVhZGVyLmdldFZhcmlhYmxlSGVhZGVyTGVuKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgc3RyZWFtID0gbmV3IEFycmF5RGF0YVN0cmVhbShidWZmZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbGF5ZXJIZWFkZXIucmVhZFZhcmlhYmxlSGVhZGVyKHN0cmVhbSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1ZmZlciA9IGJ1ZmZlci5zdWJhcnJheShzdHJlYW0ucG9zKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgbGF5ZXIgPSBuZXcgQ1BMYXllcihoZWFkZXIud2lkdGgsIGhlYWRlci5oZWlnaHQsIGxheWVySGVhZGVyLm5hbWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbGF5ZXIuYmxlbmRNb2RlID0gbGF5ZXJIZWFkZXIuYmxlbmRNb2RlO1xuICAgICAgICAgICAgICAgICAgICAgICAgbGF5ZXIuYWxwaGEgPSBsYXllckhlYWRlci5hbHBoYTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxheWVyLnZpc2libGUgPSBsYXllckhlYWRlci52aXNpYmxlO1xuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBsYXllckJ5dGVzUmVhZCA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICBsYXllckJ5dGVzVG90YWwgPSBoZWFkZXIud2lkdGggKiBoZWFkZXIuaGVpZ2h0ICogQllURVNfUEVSX1BJWEVMO1xuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAvKiBcbiAgICAgICAgICAgICAgICAgICAgICAgICAqIFdoaWxlIGRlY29kaW5nIGxheWVycywgd2Ugd29uJ3Qga2VlcCBhIHBlcnNpc3RlbnQgYnVmZmVyIGFyb3VuZCwgc28gaWYgd2UgaGF2ZSBhbnlcbiAgICAgICAgICAgICAgICAgICAgICAgICAqIGJ5dGVzIGxlZnQgb3ZlciwgcHJvdmlkZSB0aGVtIHRvIHRoZSBuZXh0IHN0YXRlIGFzIGlmIHRoZXkgd2VyZSBhIG5ld2x5IGluZmxhdGVkIGJsb2NrLlxuICAgICAgICAgICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgICAgICAgICBibG9jayA9IGJ1ZmZlcjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1ZmZlciA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlID0gU1RBVEVfREVDT0RFX0xBWUVSO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFNUQVRFX0RFQ09ERV9MQVlFUjpcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qIFxuICAgICAgICAgICAgICAgICAgICAgICAgICogV2hlbiBkZWNvZGluZyBsYXllciBkYXRhLCB3ZSBuZXZlciBjb25jYXQgYmxvY2tzIHRvZ2V0aGVyLCB3ZSBhcmUgY2FwYWJsZSBvZiBkZWNvZGluZ1xuICAgICAgICAgICAgICAgICAgICAgICAgICogcGFydGlhbCBwaXhlbHMgdGhhdCBnZXQgc3BsaXQgb3ZlciBibG9jayBib3VuZGFyaWVzLiBTbyB3ZSBkb24ndCB1c2UgJ2J1ZmZlcicgdG8gYWNjdW11bGF0ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICogZGF0YSwgYW5kIG9ubHkgcmVhZCBmcm9tIGluY29taW5nICdibG9jaydzLlxuICAgICAgICAgICAgICAgICAgICAgICAgICovIFxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGJsb2NrICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9jayA9IGRlY29kZVBpeGVscyhibG9jaywgbGF5ZXIuZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGxheWVyQnl0ZXNSZWFkID49IGxheWVyQnl0ZXNUb3RhbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcnR3b3JrLmFkZExheWVyT2JqZWN0KGxheWVyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNraXAgYW55IHRyYWlsaW5nIGJ5dGVzIGluIHRoZSBsYXllciBjaHVua1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBza2lwQ291bnQgPSBjaHVuay5jaHVua1NpemUgLSBsYXllckhlYWRlci5nZXRUb3RhbEhlYWRlckxlbigpIC0gbGF5ZXJCeXRlc1RvdGFsO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZSA9IFNUQVRFX1NLSVBfVFJBSUxJTkdfQ0hVTktfQllURVM7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgU1RBVEVfU0tJUF9UUkFJTElOR19DSFVOS19CWVRFUzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChibG9jaykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChza2lwQ291bnQgPCBibG9jay5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2sgPSBibG9jay5zdWJhcnJheShza2lwQ291bnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBza2lwQ291bnQgPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNraXBDb3VudCAtPSBibG9jay5sZW5ndGg7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChza2lwQ291bnQgPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlID0gU1RBVEVfV0FJVF9GT1JfQ0hVTks7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgYXJyYXlCdWZmZXIgPSBuZXcgVWludDhBcnJheShhcnJheUJ1ZmZlcik7XG5cbiAgICAgICAgaWYgKCFoYXNDaGliaU1hZ2ljTWFya2VyKGFycmF5QnVmZmVyKSkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7IC8vIG5vdCBhIENoaWJpUGFpbnQgZmlsZVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBSZW1vdmUgdGhlIG1hZ2ljIGhlYWRlclxuICAgICAgICBhcnJheUJ1ZmZlciA9IGFycmF5QnVmZmVyLnN1YmFycmF5KENISV9NQUdJQy5sZW5ndGgpO1xuICAgICAgICBcbiAgICAgICAgcGFrby5vbkRhdGEgPSBwcm9jZXNzQmxvY2s7XG4gICAgICAgIFxuICAgICAgICBwYWtvLm9uRW5kID0gZnVuY3Rpb24oc3RhdHVzKSB7XG4gICAgICAgICAgICBpZiAoc3RhdHVzID09PSAwICYmIHN0YXRlID09IFNUQVRFX1NVQ0NFU1MpIHtcbiAgICAgICAgICAgICAgICBhcnR3b3JrLnNldEFjdGl2ZUxheWVySW5kZXgoYXJ0d29yay5nZXRUb3Btb3N0VmlzaWJsZUxheWVyKCkpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHRoaXMucmVzdWx0ID0gYXJ0d29yaztcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJGYXRhbCBlcnJvciBkZWNvZGluZyBDaGliaUZpbGVcIik7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgdGhpcy5yZXN1bHQgPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIC8vIEJlZ2luIGRlY29tcHJlc3Npb24vZGVjb2RpbmdcbiAgICAgICAgcGFrby5wdXNoKGFycmF5QnVmZmVyKTtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiBwYWtvLnJlc3VsdDtcbiAgICB9O1xufVxuIiwiLypcbiAgICBDaGlja2VuUGFpbnRcblxuICAgIENoaWNrZW5QYWludCBpcyBhIHRyYW5zbGF0aW9uIG9mIENoaWJpUGFpbnQgZnJvbSBKYXZhIHRvIEphdmFTY3JpcHRcbiAgICBieSBOaWNob2xhcyBTaGVybG9jayAvIENoaWNrZW4gU21vb3RoaWUuXG5cbiAgICBDaGliaVBhaW50IGlzIENvcHlyaWdodCAoYykgMjAwNi0yMDA4IE1hcmMgU2NoZWZlclxuXG4gICAgQ2hpY2tlblBhaW50IGlzIGZyZWUgc29mdHdhcmU6IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vciBtb2RpZnlcbiAgICBpdCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGFzIHB1Ymxpc2hlZCBieVxuICAgIHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb24sIGVpdGhlciB2ZXJzaW9uIDMgb2YgdGhlIExpY2Vuc2UsIG9yXG4gICAgKGF0IHlvdXIgb3B0aW9uKSBhbnkgbGF0ZXIgdmVyc2lvbi5cblxuICAgIENoaWNrZW5QYWludCBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLFxuICAgIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mXG4gICAgTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiAgU2VlIHRoZVxuICAgIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuXG5cbiAgICBZb3Ugc2hvdWxkIGhhdmUgcmVjZWl2ZWQgYSBjb3B5IG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZVxuICAgIGFsb25nIHdpdGggQ2hpY2tlblBhaW50LiBJZiBub3QsIHNlZSA8aHR0cDovL3d3dy5nbnUub3JnL2xpY2Vuc2VzLz4uXG4qL1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBDUENsaXAoYm1wLCB4LCB5KSB7XG4gICAgdGhpcy5ibXAgPSBibXA7XG4gICAgXG4gICAgdGhpcy54ID0geDtcbiAgICB0aGlzLnkgPSB5O1xufTsiLCIvKlxuICAgIENoaWNrZW5QYWludFxuICAgIFxuICAgIENoaWNrZW5QYWludCBpcyBhIHRyYW5zbGF0aW9uIG9mIENoaWJpUGFpbnQgZnJvbSBKYXZhIHRvIEphdmFTY3JpcHRcbiAgICBieSBOaWNob2xhcyBTaGVybG9jayAvIENoaWNrZW4gU21vb3RoaWUuXG4gICAgXG4gICAgQ2hpYmlQYWludCBpcyBDb3B5cmlnaHQgKGMpIDIwMDYtMjAwOCBNYXJjIFNjaGVmZXJcblxuICAgIENoaWNrZW5QYWludCBpcyBmcmVlIHNvZnR3YXJlOiB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3IgbW9kaWZ5XG4gICAgaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBhcyBwdWJsaXNoZWQgYnlcbiAgICB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uLCBlaXRoZXIgdmVyc2lvbiAzIG9mIHRoZSBMaWNlbnNlLCBvclxuICAgIChhdCB5b3VyIG9wdGlvbikgYW55IGxhdGVyIHZlcnNpb24uXG5cbiAgICBDaGlja2VuUGFpbnQgaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCxcbiAgICBidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZlxuICAgIE1FUkNIQU5UQUJJTElUWSBvciBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS4gIFNlZSB0aGVcbiAgICBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9yZSBkZXRhaWxzLlxuXG4gICAgWW91IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2VcbiAgICBhbG9uZyB3aXRoIENoaWNrZW5QYWludC4gSWYgbm90LCBzZWUgPGh0dHA6Ly93d3cuZ251Lm9yZy9saWNlbnNlcy8+LlxuKi9cblxuaW1wb3J0IENQQml0bWFwIGZyb20gXCIuL0NQQml0bWFwXCI7XG5pbXBvcnQgQ1BSZWN0IGZyb20gXCIuLi91dGlsL0NQUmVjdFwiO1xuXG5mdW5jdGlvbiBjcmVhdGVJbWFnZURhdGEod2lkdGgsIGhlaWdodCkge1xuICAgIC8vIHJldHVybiBuZXcgSW1hZ2VEYXRhKHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0KTsgLy8gRG9lc24ndCB3b3JrIG9uIG9sZCBJRVxuICAgIHZhclxuICAgICAgICBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpLFxuICAgICAgICBjb250ZXh0ID0gY2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcbiAgICBcbiAgICByZXR1cm4gY29udGV4dC5jcmVhdGVJbWFnZURhdGEod2lkdGgsIGhlaWdodCk7XG59XG5cbi8vXG4vLyBBIDMyYnBwIGJpdG1hcCBjbGFzcyAob25lIGJ5dGUgcGVyIGNoYW5uZWwgaW4gUkdCQSBvcmRlcilcbi8vXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIENQQ29sb3JCbXAod2lkdGgsIGhlaWdodCkge1xuICAgIENQQml0bWFwLmNhbGwodGhpcywgd2lkdGgsIGhlaWdodCk7XG5cbiAgICAvLyBUaGUgSW1hZ2VEYXRhIG9iamVjdCB0aGF0IGhvbGRzIHRoZSBpbWFnZSBkYXRhXG4gICAgdGhpcy5pbWFnZURhdGEgPSBjcmVhdGVJbWFnZURhdGEodGhpcy53aWR0aCwgdGhpcy5oZWlnaHQpO1xuICAgIFxuICAgIC8vIFRoZSBiaXRtYXAgZGF0YSBhcnJheSAob25lIGJ5dGUgcGVyIGNoYW5uZWwgaW4gUkdCQSBvcmRlcilcbiAgICB0aGlzLmRhdGEgPSB0aGlzLmltYWdlRGF0YS5kYXRhO1xufVxuXG5DUENvbG9yQm1wLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoQ1BCaXRtYXAucHJvdG90eXBlKTtcbkNQQ29sb3JCbXAucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gQ1BDb2xvckJtcDtcblxuQ1BDb2xvckJtcC5CWVRFU19QRVJfUElYRUwgPSA0O1xuQ1BDb2xvckJtcC5SRURfQllURV9PRkZTRVQgPSAwO1xuQ1BDb2xvckJtcC5HUkVFTl9CWVRFX09GRlNFVCA9IDE7XG5DUENvbG9yQm1wLkJMVUVfQllURV9PRkZTRVQgPSAyO1xuQ1BDb2xvckJtcC5BTFBIQV9CWVRFX09GRlNFVCA9IDM7XG5cbi8vIENyZWF0ZXMgYSBDUEJpdG1hcCBmcm9tIGEgcG9ydGlvbiBvZiB0aGlzIGJpdG1hcFxuQ1BDb2xvckJtcC5wcm90b3R5cGUuY2xvbmVSZWN0ID0gZnVuY3Rpb24ocmVjdCkge1xuICAgIHZhclxuICAgICAgICByZXN1bHQgPSBuZXcgQ1BDb2xvckJtcChyZWN0LmdldFdpZHRoKCksIHJlY3QuZ2V0SGVpZ2h0KCkpO1xuICAgIFxuICAgIHJlc3VsdC5jb3B5Qml0bWFwUmVjdCh0aGlzLCAwLCAwLCByZWN0KTtcbiAgICBcbiAgICByZXR1cm4gcmVzdWx0O1xufTtcblxuLy9cbi8vIFBpeGVsIGFjY2VzcyB3aXRoIGZyaWVuZGx5IGNsaXBwaW5nLiBQaXhlbCB3aWxsIGJlIDMyLWJpdCBpbnRlZ2VyIGluIEFSR0IgZm9ybWF0XG4vL1xuQ1BDb2xvckJtcC5wcm90b3R5cGUuZ2V0UGl4ZWwgPSBmdW5jdGlvbih4LCB5KSB7XG4gICAgeCA9IE1hdGgubWF4KDAsIE1hdGgubWluKHRoaXMud2lkdGggLSAxLCB4KSk7XG4gICAgeSA9IE1hdGgubWF4KDAsIE1hdGgubWluKHRoaXMuaGVpZ2h0IC0gMSwgeSkpO1xuXG4gICAgdmFyXG4gICAgICAgIHBpeEluZGV4ID0gdGhpcy5vZmZzZXRPZlBpeGVsKHgsIHkpO1xuICAgIFxuICAgIHJldHVybiAodGhpcy5kYXRhW3BpeEluZGV4ICsgQ1BDb2xvckJtcC5BTFBIQV9CWVRFX09GRlNFVF0gPDwgMjQpIFxuICAgICAgICB8ICh0aGlzLmRhdGFbcGl4SW5kZXggKyBDUENvbG9yQm1wLlJFRF9CWVRFX09GRlNFVF0gICAgPDwgMTYpIFxuICAgICAgICB8ICh0aGlzLmRhdGFbcGl4SW5kZXggKyBDUENvbG9yQm1wLkdSRUVOX0JZVEVfT0ZGU0VUXSAgPDwgOCkgXG4gICAgICAgIHwgdGhpcy5kYXRhW3BpeEluZGV4ICsgQ1BDb2xvckJtcC5CTFVFX0JZVEVfT0ZGU0VUXTtcbn07XG5cbi8vXG4vLyBHZXQgYW4gcixnLGIsYSBhcnJheSBvZiB0aGUgeG9yIG9mIHRoaXMgYml0bWFwIGFuZCB0aGUgZ2l2ZW4gb25lLCB3aXRoaW4gdGhlIGdpdmVuIHJlY3RhbmdsZVxuLy9cbkNQQ29sb3JCbXAucHJvdG90eXBlLmNvcHlSZWN0WE9SID0gZnVuY3Rpb24oYm1wLCByZWN0KSB7XG4gICAgcmVjdCA9IHRoaXMuZ2V0Qm91bmRzKCkuY2xpcChyZWN0KTtcbiAgICBcbiAgICB2YXIgXG4gICAgICAgIHcgPSByZWN0LmdldFdpZHRoKCksXG4gICAgICAgIGggPSByZWN0LmdldEhlaWdodCgpLFxuICAgICAgICBcbiAgICAgICAgYnVmZmVyID0gbmV3IFVpbnQ4QXJyYXkodyAqIGggKiBDUENvbG9yQm1wLkJZVEVTX1BFUl9QSVhFTCksXG4gICAgICAgIFxuICAgICAgICBvdXRwdXRJbmRleCA9IDAsXG4gICAgICAgIGJtcDFJbmRleCA9IHRoaXMub2Zmc2V0T2ZQaXhlbChyZWN0LmxlZnQsIHJlY3QudG9wKSwgXG4gICAgICAgIGJtcDJJbmRleCA9IGJtcC5vZmZzZXRPZlBpeGVsKHJlY3QubGVmdCwgcmVjdC50b3ApLFxuICAgICAgICBcbiAgICAgICAgYm1wMVlTa2lwID0gKHRoaXMud2lkdGggLSB3KSAqIENQQ29sb3JCbXAuQllURVNfUEVSX1BJWEVMLFxuICAgICAgICBibXAyWVNraXAgPSAoYm1wLndpZHRoIC0gdykgKiBDUENvbG9yQm1wLkJZVEVTX1BFUl9QSVhFTCxcbiAgICAgICAgXG4gICAgICAgIHdpZHRoQnl0ZXMgPSB3ICogQ1BDb2xvckJtcC5CWVRFU19QRVJfUElYRUw7XG4gICAgXG4gICAgZm9yICh2YXIgeSA9IHJlY3QudG9wOyB5IDwgcmVjdC5ib3R0b207IHkrKywgYm1wMUluZGV4ICs9IGJtcDFZU2tpcCwgYm1wMkluZGV4ICs9IGJtcDJZU2tpcCkge1xuICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IHdpZHRoQnl0ZXM7IHgrKywgb3V0cHV0SW5kZXgrKywgYm1wMUluZGV4KyssIGJtcDJJbmRleCsrKSB7XG4gICAgICAgICAgICBidWZmZXJbb3V0cHV0SW5kZXhdID0gdGhpcy5kYXRhW2JtcDFJbmRleF0gXiBibXAuZGF0YVtibXAySW5kZXhdO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGJ1ZmZlcjtcbn07XG5cbkNQQ29sb3JCbXAucHJvdG90eXBlLnNldFJlY3RYT1IgPSBmdW5jdGlvbihidWZmZXIsIHJlY3QpIHtcbiAgICByZWN0ID0gdGhpcy5nZXRCb3VuZHMoKS5jbGlwKHJlY3QpO1xuICAgIFxuICAgIHZhciBcbiAgICAgICAgdyA9IHJlY3QuZ2V0V2lkdGgoKSxcbiAgICAgICAgaCA9IHJlY3QuZ2V0SGVpZ2h0KCksXG4gICAgICAgIFxuICAgICAgICBibXAxSW5kZXggPSB0aGlzLm9mZnNldE9mUGl4ZWwocmVjdC5sZWZ0LCByZWN0LnRvcCksXG4gICAgICAgIGJ1ZmZlckluZGV4ID0gMCxcbiAgICAgICAgXG4gICAgICAgIGJtcDFZU2tpcCA9ICh0aGlzLndpZHRoIC0gdykgKiBDUENvbG9yQm1wLkJZVEVTX1BFUl9QSVhFTCxcbiAgICAgICAgXG4gICAgICAgIHdpZHRoQnl0ZXMgPSB3ICogQ1BDb2xvckJtcC5CWVRFU19QRVJfUElYRUw7XG4gICAgXG4gICAgZm9yICh2YXIgeSA9IDA7IHkgPCBoOyB5KyspIHtcbiAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCB3aWR0aEJ5dGVzOyB4KyspIHtcbiAgICAgICAgICAgIHRoaXMuZGF0YVtibXAxSW5kZXgrK10gXj0gYnVmZmVyW2J1ZmZlckluZGV4KytdO1xuICAgICAgICB9XG4gICAgICAgIGJtcDFJbmRleCArPSBibXAxWVNraXA7XG4gICAgfVxufTtcblxuLy9cbi8vIENvcHkgYW5vdGhlciBiaXRtYXAgaW50byB0aGlzIG9uZSB1c2luZyBhbHBoYSBibGVuZGluZ1xuLy9cbkNQQ29sb3JCbXAucHJvdG90eXBlLnBhc3RlQWxwaGFSZWN0ID0gZnVuY3Rpb24oYm1wLCBzcmNSZWN0LCB4LCB5KSB7XG4gICAgdmFyXG4gICAgICAgIHNyY1JlY3RDcHkgPSBzcmNSZWN0LmNsb25lKCksXG4gICAgICAgIGRzdFJlY3QgPSBuZXcgQ1BSZWN0KHgsIHksIDAsIDApO1xuICAgIFxuICAgIHRoaXMuZ2V0Qm91bmRzKCkuY2xpcFNvdXJjZURlc3Qoc3JjUmVjdENweSwgZHN0UmVjdCk7XG5cbiAgICB2YXJcbiAgICAgICAgc3JjWVN0cmlkZSA9IChibXAud2lkdGggLSBkc3RSZWN0LmdldFdpZHRoKCkpICogQ1BDb2xvckJtcC5CWVRFU19QRVJfUElYRUwsXG4gICAgICAgIGRzdFlTdHJpZGUgPSAodGhpcy53aWR0aCAtIGRzdFJlY3QuZ2V0V2lkdGgoKSkgKiBDUENvbG9yQm1wLkJZVEVTX1BFUl9QSVhFTCxcbiAgICAgICAgXG4gICAgICAgIHNyY09mZnNldCA9IGJtcC5vZmZzZXRPZlBpeGVsKHNyY1JlY3RDcHkubGVmdCwgc3JjUmVjdENweS50b3ApLFxuICAgICAgICBkc3RPZmZzZXQgPSB0aGlzLm9mZnNldE9mUGl4ZWwoZHN0UmVjdC5sZWZ0LCBkc3RSZWN0LnRvcCk7XG5cbiAgICBmb3IgKHZhciB5ID0gZHN0UmVjdC50b3A7IHkgPCBkc3RSZWN0LmJvdHRvbTsgeSsrLCBzcmNPZmZzZXQgKz0gc3JjWVN0cmlkZSwgZHN0T2Zmc2V0ICs9IGRzdFlTdHJpZGUpIHtcbiAgICAgICAgZm9yICh2YXIgeCA9IGRzdFJlY3QubGVmdDsgeCA8IGRzdFJlY3QucmlnaHQ7IHgrKykge1xuICAgICAgICAgICAgdmFyIFxuICAgICAgICAgICAgICAgIGFscGhhMSA9IGJtcC5kYXRhW3NyY09mZnNldCArIENQQ29sb3JCbXAuQUxQSEFfQllURV9PRkZTRVRdO1xuXG4gICAgICAgICAgICBpZiAoYWxwaGExIDw9IDApIHtcbiAgICAgICAgICAgICAgICBkc3RPZmZzZXQgKz0gQ1BDb2xvckJtcC5CWVRFU19QRVJfUElYRUw7XG4gICAgICAgICAgICAgICAgc3JjT2Zmc2V0ICs9IENQQ29sb3JCbXAuQllURVNfUEVSX1BJWEVMO1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoYWxwaGExID09IDI1NSkge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgQ1BDb2xvckJtcC5CWVRFU19QRVJfUElYRUw7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRhdGFbZHN0T2Zmc2V0KytdID0gYm1wLmRhdGFbc3JjT2Zmc2V0KytdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgYWxwaGEyID0gdGhpcy5kYXRhW2RzdE9mZnNldCArIENQQ29sb3JCbXAuQUxQSEFfQllURV9PRkZTRVRdLFxuICAgICAgICAgICAgICAgIG5ld0FscGhhID0gKGFscGhhMSArIGFscGhhMiAtIGFscGhhMSAqIGFscGhhMiAvIDI1NSkgfCAwO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAobmV3QWxwaGEgPiAwKSB7XG4gICAgICAgICAgICAgICAgdmFyIFxuICAgICAgICAgICAgICAgICAgICByZWFsQWxwaGEgPSAoYWxwaGExICogMjU1IC8gbmV3QWxwaGEpIHwgMCxcbiAgICAgICAgICAgICAgICAgICAgaW52QWxwaGEgPSAyNTUgLSByZWFsQWxwaGE7XG5cbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IDM7IGkrKywgZHN0T2Zmc2V0KyssIHNyY09mZnNldCsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGF0YVtkc3RPZmZzZXRdID0gKGJtcC5kYXRhW3NyY09mZnNldF0gKyAodGhpcy5kYXRhW2RzdE9mZnNldF0gKiBpbnZBbHBoYSAtIGJtcC5kYXRhW3NyY09mZnNldF0gKiBpbnZBbHBoYSkgLyAyNTUpIHwgMDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5kYXRhW2RzdE9mZnNldCsrXSA9IG5ld0FscGhhO1xuICAgICAgICAgICAgICAgIHNyY09mZnNldCsrO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBkc3RPZmZzZXQgKz0gQ1BDb2xvckJtcC5CWVRFU19QRVJfUElYRUw7XG4gICAgICAgICAgICAgICAgc3JjT2Zmc2V0ICs9IENQQ29sb3JCbXAuQllURVNfUEVSX1BJWEVMO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufTtcblxuLyoqIFxuICogQ29weSB0aGUgcmVjdGFuZ2xlIGF0IHNyY1JlY3QgZnJvbSBibXAgb250byB0aGlzIGltYWdlIGF0IChkc3RYLCBkc3RZKS5cbiAqLyBcbkNQQ29sb3JCbXAucHJvdG90eXBlLmNvcHlCaXRtYXBSZWN0ID0gZnVuY3Rpb24oYm1wLCBkc3RYLCBkc3RZLCBzcmNSZWN0KSB7XG4gICAgdmFyXG4gICAgICAgIHNyY1JlY3QgPSBzcmNSZWN0LmNsb25lKCksXG4gICAgICAgIGRzdFJlY3QgPSBuZXcgQ1BSZWN0KGRzdFgsIGRzdFksIDAsIDApO1xuXG4gICAgdGhpcy5nZXRCb3VuZHMoKS5jbGlwU291cmNlRGVzdChzcmNSZWN0LCBkc3RSZWN0KTtcblxuICAgIHZhciBcbiAgICAgICAgdyA9IGRzdFJlY3QuZ2V0V2lkdGgoKSB8IDAsXG4gICAgICAgIGggPSBkc3RSZWN0LmdldEhlaWdodCgpIHwgMDtcblxuICAgIC8vIEFyZSB3ZSBqdXN0IHRyeWluZyB0byBkdXBsaWNhdGUgdGhlIGJpdG1hcD9cbiAgICBpZiAoZHN0UmVjdC5sZWZ0ID09IDAgJiYgZHN0UmVjdC50b3AgPT0gMCAmJiB3ID09IHRoaXMud2lkdGggJiYgaCA9PSB0aGlzLmhlaWdodCAmJiB3ID09IGJtcC53aWR0aCAmJiBoID09IGJtcC5oZWlnaHQpIHtcbiAgICAgICAgdGhpcy5jb3B5RGF0YUZyb20oYm1wKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICB2YXJcbiAgICAgICAgICAgIGRzdEluZGV4ID0gdGhpcy5vZmZzZXRPZlBpeGVsKGRzdFJlY3QubGVmdCwgZHN0UmVjdC50b3ApLFxuICAgICAgICAgICAgc3JjSW5kZXggPSBibXAub2Zmc2V0T2ZQaXhlbChzcmNSZWN0LmxlZnQsIHNyY1JlY3QudG9wKSxcblxuICAgICAgICAgICAgZHN0WVNraXAgPSAodGhpcy53aWR0aCAtIHcpICogQ1BDb2xvckJtcC5CWVRFU19QRVJfUElYRUwsXG4gICAgICAgICAgICBzcmNZU2tpcCA9IChibXAud2lkdGggLSB3KSAqIENQQ29sb3JCbXAuQllURVNfUEVSX1BJWEVMO1xuXG4gICAgICAgIGZvciAodmFyIHkgPSAwOyB5IDwgaDsgeSsrKSB7XG4gICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IHc7IHgrKykge1xuICAgICAgICAgICAgICAgIHRoaXMuZGF0YVtkc3RJbmRleF0gPSBibXAuZGF0YVtzcmNJbmRleF07XG4gICAgICAgICAgICAgICAgdGhpcy5kYXRhW2RzdEluZGV4ICsgMV0gPSBibXAuZGF0YVtzcmNJbmRleCArIDFdO1xuICAgICAgICAgICAgICAgIHRoaXMuZGF0YVtkc3RJbmRleCArIDJdID0gYm1wLmRhdGFbc3JjSW5kZXggKyAyXTtcbiAgICAgICAgICAgICAgICB0aGlzLmRhdGFbZHN0SW5kZXggKyAzXSA9IGJtcC5kYXRhW3NyY0luZGV4ICsgM107XG4gICAgICAgICAgICAgICAgZHN0SW5kZXggKz0gNDtcbiAgICAgICAgICAgICAgICBzcmNJbmRleCArPSA0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc3JjSW5kZXggKz0gc3JjWVNraXA7XG4gICAgICAgICAgICBkc3RJbmRleCArPSBkc3RZU2tpcDtcbiAgICAgICAgfVxuICAgIH1cbn07XG5cbi8vXG4vLyBDb3BpZXMgdGhlIEFscGhhIGNoYW5uZWwgZnJvbSBhbm90aGVyIGJpdG1hcC4gQXNzdW1lcyBib3RoIGJpdG1hcHMgYXJlIHRoZSBzYW1lIHdpZHRoLlxuLy9cbkNQQ29sb3JCbXAucHJvdG90eXBlLmNvcHlBbHBoYUZyb20gPSBmdW5jdGlvbihibXAsIHJlY3QpIHtcbiAgICByZWN0ID0gdGhpcy5nZXRCb3VuZHMoKS5jbGlwKHJlY3QpO1xuXG4gICAgdmFyIFxuICAgICAgICB3ID0gcmVjdC5nZXRXaWR0aCgpLFxuICAgICAgICBoID0gcmVjdC5nZXRIZWlnaHQoKSxcbiAgICAgICAgXG4gICAgICAgIHBpeEluZGV4ID0gdGhpcy5vZmZzZXRPZlBpeGVsKHJlY3QubGVmdCwgcmVjdC50b3ApICsgQ1BDb2xvckJtcC5BTFBIQV9CWVRFX09GRlNFVCAvKiBBcHBseSBvZmZzZXQgaGVyZSBzbyB3ZSBkb24ndCBoYXZlIHRvIGRvIGl0IHBlci1waXhlbCovLFxuICAgICAgICB5U2tpcCA9ICh0aGlzLndpZHRoIC0gdykgKiBDUENvbG9yQm1wLkJZVEVTX1BFUl9QSVhFTDtcbiAgICBcbiAgICBmb3IgKHZhciB5ID0gMDsgeSA8IGg7IHkrKykge1xuICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IHc7IHgrKykge1xuICAgICAgICAgICAgdGhpcy5kYXRhW3BpeEluZGV4XSA9IGJtcC5kYXRhW3BpeEluZGV4XTtcbiAgICAgICAgICAgIHBpeEluZGV4ICs9IENQQ29sb3JCbXAuQllURVNfUEVSX1BJWEVMO1xuICAgICAgICB9XG4gICAgICAgIHBpeEluZGV4ICs9IHlTa2lwO1xuICAgIH1cbn07XG5cbkNQQ29sb3JCbXAucHJvdG90eXBlLmNvcHlEYXRhRnJvbSA9IGZ1bmN0aW9uKGJtcCkge1xuICAgIGlmIChibXAud2lkdGggIT0gdGhpcy53aWR0aCB8fCBibXAuaGVpZ2h0ICE9IHRoaXMuaGVpZ2h0KSB7XG4gICAgICAgIHRoaXMud2lkdGggPSBibXAud2lkdGg7XG4gICAgICAgIHRoaXMuaGVpZ2h0ID0gYm1wLmhlaWdodDtcbiAgICAgICAgXG4gICAgICAgIHRoaXMuaW1hZ2VEYXRhID0gY3JlYXRlSW1hZ2VEYXRhKHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0KTtcbiAgICAgICAgdGhpcy5kYXRhID0gdGhpcy5pbWFnZURhdGEuZGF0YTtcbiAgICB9XG5cbiAgICBpZiAoXCJzZXRcIiBpbiB0aGlzLmRhdGEpIHtcbiAgICAgICAgdGhpcy5kYXRhLnNldChibXAuZGF0YSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgLy8gSUUgZG9lc24ndCB1c2UgVWludDhDbGFtcGVkQXJyYXkgZm9yIEltYWdlRGF0YSwgc28gc2V0KCkgaXNuJ3QgYXZhaWxhYmxlXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5kYXRhLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB0aGlzLmRhdGFbaV0gPSBibXAuZGF0YVtpXTtcbiAgICAgICAgfVxuICAgIH1cbn07XG5cbi8qKlxuICogRmxvb2QgZmlsbCB0aGUgZ2l2ZW4gY29sb3Igc3RhcnRpbmcgZnJvbSB0aGUgZ2l2ZW4gcG9pbnRcbiAqIEBwYXJhbSB4IGludFxuICogQHBhcmFtIHkgaW50XG4gKiBAcGFyYW0gY29sb3IgaW50XG4gKi9cbkNQQ29sb3JCbXAucHJvdG90eXBlLmZsb29kRmlsbCA9IGZ1bmN0aW9uKHgsIHksIGNvbG9yKSB7XG4gICAgaWYgKCF0aGlzLmlzSW5zaWRlKHgsIHkpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXJcbiAgICAgICAgb2xkQ29sb3IgPSB0aGlzLmdldFBpeGVsKHgsIHkpLFxuICAgICAgICBcbiAgICAgICAgb2xkQWxwaGEgPSAob2xkQ29sb3IgPj4gMjQpICYgMHhGRixcbiAgICAgICAgb2xkUmVkID0gKG9sZENvbG9yID4+IDE2KSAmIDB4RkYsXG4gICAgICAgIG9sZEdyZWVuID0gKG9sZENvbG9yID4+IDgpICYgMHhGRixcbiAgICAgICAgb2xkQmx1ZSA9IG9sZENvbG9yICYgMHhGRixcbiAgICAgICAgXG4gICAgICAgIGNvbG9yQWxwaGEgPSAoY29sb3IgPj4gMjQpICYgMHhGRixcbiAgICAgICAgY29sb3JSZWQgPSAoY29sb3IgPj4gMTYpICYgMHhGRixcbiAgICAgICAgY29sb3JHcmVlbiA9IChjb2xvciA+PiA4KSAmIDB4RkYsXG4gICAgICAgIGNvbG9yQmx1ZSA9IGNvbG9yICYgMHhGRixcbiAgICAgICAgXG4gICAgICAgIHN0YWNrID0gW10sXG4gICAgICAgIGNsaXAgPSB0aGlzLmdldEJvdW5kcygpLFxuICAgICAgICBcbiAgICAgICAgZGF0YSA9IHRoaXMuZGF0YTtcbiAgICBcbiAgICAvLyBDaGFuZ2UgdGhlIGxlZnQgYW5kIHJpZ2h0IGJvdW5kcyBmcm9tIHBpeGVsIGluZGV4ZXMgaW50byBieXRlIGluZGV4ZXMgZm9yIGVhc3kgY2xpcHBpbmdcbiAgICBjbGlwLmxlZnQgKj0gQ1BDb2xvckJtcC5CWVRFU19QRVJfUElYRUw7XG4gICAgY2xpcC5yaWdodCAqPSBDUENvbG9yQm1wLkJZVEVTX1BFUl9QSVhFTDtcbiAgICBcbiAgICBzdGFjay5wdXNoKHt4MTogeCAqIENQQ29sb3JCbXAuQllURVNfUEVSX1BJWEVMLCB4MjogeCAqIENQQ29sb3JCbXAuQllURVNfUEVSX1BJWEVMLCB5OiB5LCBkeTogLTF9KTtcbiAgICBzdGFjay5wdXNoKHt4MTogeCAqIENQQ29sb3JCbXAuQllURVNfUEVSX1BJWEVMLCB4MjogeCAqIENQQ29sb3JCbXAuQllURVNfUEVSX1BJWEVMLCB5OiB5ICsgMSwgZHk6IDF9KTtcbiAgICBcbiAgICAvKiBcbiAgICAgKiBJZiB3ZSBhcmUgZmlsbGluZyAxMDAlIHRyYW5zcGFyZW50IGFyZWFzIHRoZW4gd2UgbmVlZCB0byBpZ25vcmUgdGhlIHJlc2lkdWFsIGNvbG9yIGluZm9ybWF0aW9uXG4gICAgICogKGl0IHdvdWxkIGFsc28gYmUgcG9zc2libGUgdG8gY2xlYXIgaXQgd2hlbiBlcmFzaW5nLCBidXQgdGhlbiB0aGUgcGVyZm9ybWFuY2UgaW1wYWN0IHdvdWxkIGJlIG9uIHRoZSBlcmFzZXIgXG4gICAgICogcmF0aGVyIHRoYW4gb24gdGhpcyBsb3cgaW1wb3J0YW5jZSBmbG9vZCBmaWxsKVxuICAgICAqL1xuICAgIGlmIChvbGRBbHBoYSA9PSAwKSB7XG4gICAgICAgIGlmIChjb2xvckFscGhhID09IDApIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgd2hpbGUgKHN0YWNrLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgIGxpbmUgPSBzdGFjay5wb3AoKTtcbiAgICBcbiAgICAgICAgICAgIGlmIChsaW5lLnkgPCBjbGlwLnRvcCB8fCBsaW5lLnkgPj0gY2xpcC5ib3R0b20pIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgIGxpbmVPZmZzZXQgPSB0aGlzLm9mZnNldE9mUGl4ZWwoMCwgbGluZS55KSxcbiAgICBcbiAgICAgICAgICAgICAgICBsZWZ0ID0gbGluZS54MSwgbmV4dDtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgd2hpbGUgKFxuICAgICAgICAgICAgICAgIGxlZnQgPj0gY2xpcC5sZWZ0IFxuICAgICAgICAgICAgICAgICYmIGRhdGFbbGVmdCArIGxpbmVPZmZzZXQgKyBDUENvbG9yQm1wLkFMUEhBX0JZVEVfT0ZGU0VUXSA9PSAwXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICBkYXRhW2xlZnQgKyBsaW5lT2Zmc2V0ICsgQ1BDb2xvckJtcC5SRURfQllURV9PRkZTRVRdID0gY29sb3JSZWQ7XG4gICAgICAgICAgICAgICAgZGF0YVtsZWZ0ICsgbGluZU9mZnNldCArIENQQ29sb3JCbXAuR1JFRU5fQllURV9PRkZTRVRdID0gY29sb3JHcmVlbjtcbiAgICAgICAgICAgICAgICBkYXRhW2xlZnQgKyBsaW5lT2Zmc2V0ICsgQ1BDb2xvckJtcC5CTFVFX0JZVEVfT0ZGU0VUXSA9IGNvbG9yQmx1ZTtcbiAgICAgICAgICAgICAgICBkYXRhW2xlZnQgKyBsaW5lT2Zmc2V0ICsgQ1BDb2xvckJtcC5BTFBIQV9CWVRFX09GRlNFVF0gPSBjb2xvckFscGhhO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGxlZnQgLT0gQ1BDb2xvckJtcC5CWVRFU19QRVJfUElYRUw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChsZWZ0ID49IGxpbmUueDEpIHtcbiAgICAgICAgICAgICAgICB3aGlsZSAoXG4gICAgICAgICAgICAgICAgICAgIGxlZnQgPD0gbGluZS54MiBcbiAgICAgICAgICAgICAgICAgICAgJiYgZGF0YVtsZWZ0ICsgbGluZU9mZnNldCArIENQQ29sb3JCbXAuQUxQSEFfQllURV9PRkZTRVRdICE9IG9sZEFscGhhXG4gICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgIGxlZnQgKz0gQ1BDb2xvckJtcC5CWVRFU19QRVJfUElYRUw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIG5leHQgPSBsZWZ0ICsgQ1BDb2xvckJtcC5CWVRFU19QRVJfUElYRUw7XG4gICAgICAgICAgICAgICAgaWYgKGxlZnQgPiBsaW5lLngyKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgbGVmdCArPSBDUENvbG9yQm1wLkJZVEVTX1BFUl9QSVhFTDtcbiAgICAgICAgICAgICAgICBpZiAobGVmdCA8IGxpbmUueDEpIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhY2sucHVzaCh7eDE6IGxlZnQsIHgyOiBsaW5lLngxIC0gQ1BDb2xvckJtcC5CWVRFU19QRVJfUElYRUwsIHk6IGxpbmUueSAtIGxpbmUuZHksIGR5OiAtbGluZS5keX0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBuZXh0ID0gbGluZS54MSArIENQQ29sb3JCbXAuQllURVNfUEVSX1BJWEVMO1xuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgZG8ge1xuICAgICAgICAgICAgICAgIGRhdGFbbGVmdCArIGxpbmVPZmZzZXQgKyBDUENvbG9yQm1wLlJFRF9CWVRFX09GRlNFVF0gPSBjb2xvclJlZDtcbiAgICAgICAgICAgICAgICBkYXRhW2xlZnQgKyBsaW5lT2Zmc2V0ICsgQ1BDb2xvckJtcC5HUkVFTl9CWVRFX09GRlNFVF0gPSBjb2xvckdyZWVuO1xuICAgICAgICAgICAgICAgIGRhdGFbbGVmdCArIGxpbmVPZmZzZXQgKyBDUENvbG9yQm1wLkJMVUVfQllURV9PRkZTRVRdID0gY29sb3JCbHVlO1xuICAgICAgICAgICAgICAgIGRhdGFbbGVmdCArIGxpbmVPZmZzZXQgKyBDUENvbG9yQm1wLkFMUEhBX0JZVEVfT0ZGU0VUXSA9IGNvbG9yQWxwaGE7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgd2hpbGUgKFxuICAgICAgICAgICAgICAgICAgICBuZXh0IDwgY2xpcC5yaWdodCBcbiAgICAgICAgICAgICAgICAgICAgJiYgZGF0YVtuZXh0ICsgbGluZU9mZnNldCArIENQQ29sb3JCbXAuQUxQSEFfQllURV9PRkZTRVRdID09IG9sZEFscGhhXG4gICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgIGRhdGFbbmV4dCArIGxpbmVPZmZzZXQgKyBDUENvbG9yQm1wLlJFRF9CWVRFX09GRlNFVF0gPSBjb2xvclJlZDtcbiAgICAgICAgICAgICAgICAgICAgZGF0YVtuZXh0ICsgbGluZU9mZnNldCArIENQQ29sb3JCbXAuR1JFRU5fQllURV9PRkZTRVRdID0gY29sb3JHcmVlbjtcbiAgICAgICAgICAgICAgICAgICAgZGF0YVtuZXh0ICsgbGluZU9mZnNldCArIENQQ29sb3JCbXAuQkxVRV9CWVRFX09GRlNFVF0gPSBjb2xvckJsdWU7XG4gICAgICAgICAgICAgICAgICAgIGRhdGFbbmV4dCArIGxpbmVPZmZzZXQgKyBDUENvbG9yQm1wLkFMUEhBX0JZVEVfT0ZGU0VUXSA9IGNvbG9yQWxwaGE7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBuZXh0ICs9IENQQ29sb3JCbXAuQllURVNfUEVSX1BJWEVMO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBzdGFjay5wdXNoKHt4MTogbGVmdCwgeDI6IG5leHQgLSBDUENvbG9yQm1wLkJZVEVTX1BFUl9QSVhFTCwgeTogbGluZS55ICsgbGluZS5keSwgZHk6IGxpbmUuZHl9KTtcbiAgICBcbiAgICAgICAgICAgICAgICBpZiAobmV4dCAtIENQQ29sb3JCbXAuQllURVNfUEVSX1BJWEVMID4gbGluZS54Mikge1xuICAgICAgICAgICAgICAgICAgICBzdGFjay5wdXNoKHt4MTogbGluZS54MiArIENQQ29sb3JCbXAuQllURVNfUEVSX1BJWEVMLCB4MjogbmV4dCAtIENQQ29sb3JCbXAuQllURVNfUEVSX1BJWEVMLCB5OiBsaW5lLnkgLSBsaW5lLmR5LCBkeTogLWxpbmUuZHl9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgbGVmdCA9IG5leHQgKyBDUENvbG9yQm1wLkJZVEVTX1BFUl9QSVhFTDtcbiAgICAgICAgICAgICAgICB3aGlsZSAoXG4gICAgICAgICAgICAgICAgICAgIGxlZnQgPD0gbGluZS54MiAmJiBkYXRhW2xlZnQgKyBsaW5lT2Zmc2V0ICsgQ1BDb2xvckJtcC5BTFBIQV9CWVRFX09GRlNFVF0gIT0gb2xkQWxwaGFcbiAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgbGVmdCArPSBDUENvbG9yQm1wLkJZVEVTX1BFUl9QSVhFTDtcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgbmV4dCA9IGxlZnQgKyBDUENvbG9yQm1wLkJZVEVTX1BFUl9QSVhFTDtcbiAgICAgICAgICAgIH0gd2hpbGUgKGxlZnQgPD0gbGluZS54Mik7XG4gICAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoY29sb3IgPT0gb2xkQ29sb3IpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHdoaWxlIChzdGFjay5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICBsaW5lID0gc3RhY2sucG9wKCk7XG5cbiAgICAgICAgICAgIGlmIChsaW5lLnkgPCBjbGlwLnRvcCB8fCBsaW5lLnkgPj0gY2xpcC5ib3R0b20pIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgbGluZU9mZnNldCA9IHRoaXMub2Zmc2V0T2ZQaXhlbCgwLCBsaW5lLnkpLFxuXG4gICAgICAgICAgICAgICAgbGVmdCA9IGxpbmUueDEsIG5leHQ7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHdoaWxlIChcbiAgICAgICAgICAgICAgICBsZWZ0ID49IGNsaXAubGVmdCBcbiAgICAgICAgICAgICAgICAmJiBkYXRhW2xlZnQgKyBsaW5lT2Zmc2V0ICsgQ1BDb2xvckJtcC5SRURfQllURV9PRkZTRVRdID09IG9sZFJlZFxuICAgICAgICAgICAgICAgICYmIGRhdGFbbGVmdCArIGxpbmVPZmZzZXQgKyBDUENvbG9yQm1wLkdSRUVOX0JZVEVfT0ZGU0VUXSA9PSBvbGRHcmVlblxuICAgICAgICAgICAgICAgICYmIGRhdGFbbGVmdCArIGxpbmVPZmZzZXQgKyBDUENvbG9yQm1wLkJMVUVfQllURV9PRkZTRVRdID09IG9sZEJsdWVcbiAgICAgICAgICAgICAgICAmJiBkYXRhW2xlZnQgKyBsaW5lT2Zmc2V0ICsgQ1BDb2xvckJtcC5BTFBIQV9CWVRFX09GRlNFVF0gPT0gb2xkQWxwaGFcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIGRhdGFbbGVmdCArIGxpbmVPZmZzZXQgKyBDUENvbG9yQm1wLlJFRF9CWVRFX09GRlNFVF0gPSBjb2xvclJlZDtcbiAgICAgICAgICAgICAgICBkYXRhW2xlZnQgKyBsaW5lT2Zmc2V0ICsgQ1BDb2xvckJtcC5HUkVFTl9CWVRFX09GRlNFVF0gPSBjb2xvckdyZWVuO1xuICAgICAgICAgICAgICAgIGRhdGFbbGVmdCArIGxpbmVPZmZzZXQgKyBDUENvbG9yQm1wLkJMVUVfQllURV9PRkZTRVRdID0gY29sb3JCbHVlO1xuICAgICAgICAgICAgICAgIGRhdGFbbGVmdCArIGxpbmVPZmZzZXQgKyBDUENvbG9yQm1wLkFMUEhBX0JZVEVfT0ZGU0VUXSA9IGNvbG9yQWxwaGE7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgbGVmdCAtPSBDUENvbG9yQm1wLkJZVEVTX1BFUl9QSVhFTDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKGxlZnQgPj0gbGluZS54MSkge1xuICAgICAgICAgICAgICAgIHdoaWxlIChcbiAgICAgICAgICAgICAgICAgICAgbGVmdCA8PSBsaW5lLngyIFxuICAgICAgICAgICAgICAgICAgICAmJiAhKFxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVtsZWZ0ICsgbGluZU9mZnNldCArIENQQ29sb3JCbXAuUkVEX0JZVEVfT0ZGU0VUXSA9PSBvbGRSZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICYmIGRhdGFbbGVmdCArIGxpbmVPZmZzZXQgKyBDUENvbG9yQm1wLkdSRUVOX0JZVEVfT0ZGU0VUXSA9PSBvbGRHcmVlblxuICAgICAgICAgICAgICAgICAgICAgICAgJiYgZGF0YVtsZWZ0ICsgbGluZU9mZnNldCArIENQQ29sb3JCbXAuQkxVRV9CWVRFX09GRlNFVF0gPT0gb2xkQmx1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgJiYgZGF0YVtsZWZ0ICsgbGluZU9mZnNldCArIENQQ29sb3JCbXAuQUxQSEFfQllURV9PRkZTRVRdID09IG9sZEFscGhhXG4gICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgbGVmdCArPSBDUENvbG9yQm1wLkJZVEVTX1BFUl9QSVhFTDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbmV4dCA9IGxlZnQgKyBDUENvbG9yQm1wLkJZVEVTX1BFUl9QSVhFTDtcbiAgICAgICAgICAgICAgICBpZiAobGVmdCA+IGxpbmUueDIpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBsZWZ0ICs9IENQQ29sb3JCbXAuQllURVNfUEVSX1BJWEVMO1xuICAgICAgICAgICAgICAgIGlmIChsZWZ0IDwgbGluZS54MSkge1xuICAgICAgICAgICAgICAgICAgICBzdGFjay5wdXNoKHt4MTogbGVmdCwgeDI6IGxpbmUueDEgLSBDUENvbG9yQm1wLkJZVEVTX1BFUl9QSVhFTCwgeTogbGluZS55IC0gbGluZS5keSwgZHk6IC1saW5lLmR5fSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIG5leHQgPSBsaW5lLngxICsgQ1BDb2xvckJtcC5CWVRFU19QRVJfUElYRUw7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGRvIHtcbiAgICAgICAgICAgICAgICBkYXRhW2xlZnQgKyBsaW5lT2Zmc2V0ICsgQ1BDb2xvckJtcC5SRURfQllURV9PRkZTRVRdID0gY29sb3JSZWQ7XG4gICAgICAgICAgICAgICAgZGF0YVtsZWZ0ICsgbGluZU9mZnNldCArIENQQ29sb3JCbXAuR1JFRU5fQllURV9PRkZTRVRdID0gY29sb3JHcmVlbjtcbiAgICAgICAgICAgICAgICBkYXRhW2xlZnQgKyBsaW5lT2Zmc2V0ICsgQ1BDb2xvckJtcC5CTFVFX0JZVEVfT0ZGU0VUXSA9IGNvbG9yQmx1ZTtcbiAgICAgICAgICAgICAgICBkYXRhW2xlZnQgKyBsaW5lT2Zmc2V0ICsgQ1BDb2xvckJtcC5BTFBIQV9CWVRFX09GRlNFVF0gPSBjb2xvckFscGhhO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHdoaWxlIChcbiAgICAgICAgICAgICAgICAgICAgbmV4dCA8IGNsaXAucmlnaHQgXG4gICAgICAgICAgICAgICAgICAgICYmIGRhdGFbbmV4dCArIGxpbmVPZmZzZXQgKyBDUENvbG9yQm1wLlJFRF9CWVRFX09GRlNFVF0gPT0gb2xkUmVkXG4gICAgICAgICAgICAgICAgICAgICYmIGRhdGFbbmV4dCArIGxpbmVPZmZzZXQgKyBDUENvbG9yQm1wLkdSRUVOX0JZVEVfT0ZGU0VUXSA9PSBvbGRHcmVlblxuICAgICAgICAgICAgICAgICAgICAmJiBkYXRhW25leHQgKyBsaW5lT2Zmc2V0ICsgQ1BDb2xvckJtcC5CTFVFX0JZVEVfT0ZGU0VUXSA9PSBvbGRCbHVlXG4gICAgICAgICAgICAgICAgICAgICYmIGRhdGFbbmV4dCArIGxpbmVPZmZzZXQgKyBDUENvbG9yQm1wLkFMUEhBX0JZVEVfT0ZGU0VUXSA9PSBvbGRBbHBoYVxuICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICBkYXRhW25leHQgKyBsaW5lT2Zmc2V0ICsgQ1BDb2xvckJtcC5SRURfQllURV9PRkZTRVRdID0gY29sb3JSZWQ7XG4gICAgICAgICAgICAgICAgICAgIGRhdGFbbmV4dCArIGxpbmVPZmZzZXQgKyBDUENvbG9yQm1wLkdSRUVOX0JZVEVfT0ZGU0VUXSA9IGNvbG9yR3JlZW47XG4gICAgICAgICAgICAgICAgICAgIGRhdGFbbmV4dCArIGxpbmVPZmZzZXQgKyBDUENvbG9yQm1wLkJMVUVfQllURV9PRkZTRVRdID0gY29sb3JCbHVlO1xuICAgICAgICAgICAgICAgICAgICBkYXRhW25leHQgKyBsaW5lT2Zmc2V0ICsgQ1BDb2xvckJtcC5BTFBIQV9CWVRFX09GRlNFVF0gPSBjb2xvckFscGhhO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgbmV4dCArPSBDUENvbG9yQm1wLkJZVEVTX1BFUl9QSVhFTDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgc3RhY2sucHVzaCh7eDE6IGxlZnQsIHgyOiBuZXh0IC0gQ1BDb2xvckJtcC5CWVRFU19QRVJfUElYRUwsIHk6IGxpbmUueSArIGxpbmUuZHksIGR5OiBsaW5lLmR5fSk7XG5cbiAgICAgICAgICAgICAgICBpZiAobmV4dCAtIENQQ29sb3JCbXAuQllURVNfUEVSX1BJWEVMID4gbGluZS54Mikge1xuICAgICAgICAgICAgICAgICAgICBzdGFjay5wdXNoKHt4MTogbGluZS54MiArIENQQ29sb3JCbXAuQllURVNfUEVSX1BJWEVMLCB4MjogbmV4dCAtIENQQ29sb3JCbXAuQllURVNfUEVSX1BJWEVMLCB5OiBsaW5lLnkgLSBsaW5lLmR5LCBkeTogLWxpbmUuZHl9KTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBsZWZ0ID0gbmV4dCArIENQQ29sb3JCbXAuQllURVNfUEVSX1BJWEVMO1xuICAgICAgICAgICAgICAgIHdoaWxlIChcbiAgICAgICAgICAgICAgICAgICAgbGVmdCA8PSBsaW5lLngyICYmICEoXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhW2xlZnQgKyBsaW5lT2Zmc2V0ICsgQ1BDb2xvckJtcC5SRURfQllURV9PRkZTRVRdID09IG9sZFJlZFxuICAgICAgICAgICAgICAgICAgICAgICAgJiYgZGF0YVtsZWZ0ICsgbGluZU9mZnNldCArIENQQ29sb3JCbXAuR1JFRU5fQllURV9PRkZTRVRdID09IG9sZEdyZWVuXG4gICAgICAgICAgICAgICAgICAgICAgICAmJiBkYXRhW2xlZnQgKyBsaW5lT2Zmc2V0ICsgQ1BDb2xvckJtcC5CTFVFX0JZVEVfT0ZGU0VUXSA9PSBvbGRCbHVlXG4gICAgICAgICAgICAgICAgICAgICAgICAmJiBkYXRhW2xlZnQgKyBsaW5lT2Zmc2V0ICsgQ1BDb2xvckJtcC5BTFBIQV9CWVRFX09GRlNFVF0gPT0gb2xkQWxwaGFcbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICBsZWZ0ICs9IENQQ29sb3JCbXAuQllURVNfUEVSX1BJWEVMO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIG5leHQgPSBsZWZ0ICsgQ1BDb2xvckJtcC5CWVRFU19QRVJfUElYRUw7XG4gICAgICAgICAgICB9IHdoaWxlIChsZWZ0IDw9IGxpbmUueDIpO1xuICAgICAgICB9XG4gICAgfVxufTtcblxuLyoqXG4gKiBQcmVtdWx0aXBseSB0aGUgUkdCIGNoYW5uZWxzIGluIHRoZSBnaXZlbiBSLEcsQixBIGNoYW5uZWwgYnVmZmVyIHdpdGggdGhlIGFscGhhIGNoYW5uZWwuXG4gKiBcbiAqIEBwYXJhbSBidWZmZXIgUixHLEIsQSBjaGFubmVsIGFycmF5XG4gKiBAcGFyYW0gbGVuIE51bWJlciBvZiBwaXhlbHMgaW4gYnVmZmVyIHRvIG1vZGlmeVxuICovXG5mdW5jdGlvbiBtdWx0aXBseUFscGhhKGJ1ZmZlciwgbGVuKSB7XG4gICAgdmFyXG4gICAgICAgIHBpeEluZGV4ID0gMDtcbiAgICBcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgIHZhclxuICAgICAgICAgICAgYWxwaGEgPSBidWZmZXJbcGl4SW5kZXggKyBDUENvbG9yQm1wLkFMUEhBX0JZVEVfT0ZGU0VUXTtcbiAgICAgICAgXG4gICAgICAgIC8vIE11bHRpcGx5IHRoZSBSR0IgY2hhbm5lbHMgYnkgYWxwaGFcbiAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCAzOyBqKyssIHBpeEluZGV4KyspIHtcbiAgICAgICAgICAgIGJ1ZmZlcltwaXhJbmRleF0gPSBNYXRoLnJvdW5kKGJ1ZmZlcltwaXhJbmRleF0gKiBhbHBoYSAvIDI1NSk7XG4gICAgICAgIH1cbiAgICAgICAgcGl4SW5kZXgrKzsgLy8gRG9uJ3QgbW9kaWZ5IGFscGhhIGNoYW5uZWxcbiAgICB9XG59XG5cbi8qKlxuICogSW52ZXJzZSBvZiBtdWx0aXBseUFscGhhKClcbiAqL1xuZnVuY3Rpb24gc2VwYXJhdGVBbHBoYShidWZmZXIsIGxlbikge1xuICAgIHZhclxuICAgICAgICBwaXhJbmRleCA9IDA7XG4gICAgXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgICB2YXJcbiAgICAgICAgICAgIGFscGhhID0gYnVmZmVyW3BpeEluZGV4ICsgQ1BDb2xvckJtcC5BTFBIQV9CWVRFX09GRlNFVF07XG4gICAgICAgIFxuICAgICAgICBpZiAoYWxwaGEgIT0gMCkge1xuICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgaW52QWxwaGEgPSAyNTUgLyBhbHBoYTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCAzOyBqKyssIHBpeEluZGV4KyspIHtcbiAgICAgICAgICAgICAgICBidWZmZXJbcGl4SW5kZXhdID0gTWF0aC5taW4oTWF0aC5yb3VuZChidWZmZXJbcGl4SW5kZXhdICogaW52QWxwaGEpLCAyNTUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gRG9uJ3QgbW9kaWZ5IGFscGhhIGNoYW5uZWxcbiAgICAgICAgICAgIHBpeEluZGV4Kys7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBwaXhJbmRleCArPSBDUENvbG9yQm1wLkJZVEVTX1BFUl9QSVhFTDtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuZnVuY3Rpb24gYm94Qmx1ckxpbmUoc3JjLCBkc3QsIGxlbiwgcmFkaXVzKSB7XG4gICAgdmFyXG4gICAgICAgIHRvdGFsUGl4ZWxzID0gMCwgdG90YWxDaGFubmVscyA9IFswLCAwLCAwLCAwXSxcbiAgICAgICAgcGl4SW5kZXgsIGRzdEluZGV4O1xuICAgIFxuICAgIHBpeEluZGV4ID0gMDtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJhZGl1cyAmJiBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBDUENvbG9yQm1wLkJZVEVTX1BFUl9QSVhFTDsgaisrKSB7XG4gICAgICAgICAgICB0b3RhbENoYW5uZWxzW2pdICs9IHNyY1twaXhJbmRleCsrXTtcbiAgICAgICAgfVxuICAgICAgICB0b3RhbFBpeGVscysrO1xuICAgIH1cbiAgICBcbiAgICBkc3RJbmRleCA9IDA7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAvLyBOZXcgcGl4ZWwgam9pbnMgdGhlIHdpbmRvdyBhdCB0aGUgcmlnaHRcbiAgICAgICAgaWYgKGkgKyByYWRpdXMgPCBsZW4pIHtcbiAgICAgICAgICAgIHBpeEluZGV4ID0gKGkgKyByYWRpdXMpICogQ1BDb2xvckJtcC5CWVRFU19QRVJfUElYRUw7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgQ1BDb2xvckJtcC5CWVRFU19QRVJfUElYRUw7IGorKykge1xuICAgICAgICAgICAgICAgIHRvdGFsQ2hhbm5lbHNbal0gKz0gc3JjW3BpeEluZGV4KytdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdG90YWxQaXhlbHMrKztcbiAgICAgICAgfVxuXG4gICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgQ1BDb2xvckJtcC5CWVRFU19QRVJfUElYRUw7IGorKykge1xuICAgICAgICAgICAgZHN0W2RzdEluZGV4KytdID0gTWF0aC5yb3VuZCh0b3RhbENoYW5uZWxzW2pdIC8gdG90YWxQaXhlbHMpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gT2xkIHBpeGVsIGxlYXZlcyB0aGUgd2luZG93IGF0IHRoZSBsZWZ0XG4gICAgICAgIGlmIChpIC0gcmFkaXVzID49IDApIHtcbiAgICAgICAgICAgIHBpeEluZGV4ID0gKGkgLSByYWRpdXMpICogQ1BDb2xvckJtcC5CWVRFU19QRVJfUElYRUw7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgQ1BDb2xvckJtcC5CWVRFU19QRVJfUElYRUw7IGorKykge1xuICAgICAgICAgICAgICAgIHRvdGFsQ2hhbm5lbHNbal0gLT0gc3JjW3BpeEluZGV4KytdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdG90YWxQaXhlbHMtLTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuLyoqXG4gKiBDb3B5IGEgY29sdW1uIG9mIHBpeGVscyBpbiB0aGUgYml0bWFwIHRvIHRoZSBnaXZlbiBSLEcsQixBIGJ1ZmZlci5cbiAqIFxuICogQHBhcmFtIHggWC1jb29yZGluYXRlIG9mIGNvbHVtblxuICogQHBhcmFtIHkgWS1jb29yZGluYXRlIG9mIHRvcCBvZiBjb2x1bW4gdG8gY29weVxuICogQHBhcmFtIGxlbiBOdW1iZXIgb2YgcGl4ZWxzIHRvIGNvcHlcbiAqIEBwYXJhbSBidWZmZXIgUixHLEIsQSBhcnJheVxuICovXG5DUENvbG9yQm1wLnByb3RvdHlwZS5jb3B5UGl4ZWxDb2x1bW5Ub0FycmF5ID0gZnVuY3Rpb24oeCwgeSwgbGVuLCBidWZmZXIpIHtcbiAgICB2YXJcbiAgICAgICAgeUp1bXAgPSAodGhpcy53aWR0aCAtIDEpICogQ1BDb2xvckJtcC5CWVRFU19QRVJfUElYRUwsXG4gICAgICAgIGRzdE9mZnNldCA9IDAsXG4gICAgICAgIHNyY09mZnNldCA9IHRoaXMub2Zmc2V0T2ZQaXhlbCh4LCB5KTtcbiAgICBcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgQ1BDb2xvckJtcC5CWVRFU19QRVJfUElYRUw7IGorKykge1xuICAgICAgICAgICAgYnVmZmVyW2RzdE9mZnNldCsrXSA9IHRoaXMuZGF0YVtzcmNPZmZzZXQrK107XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHNyY09mZnNldCArPSB5SnVtcDtcbiAgICB9XG59XG5cbi8qKlxuICogQ29weSB0aGUgcGl4ZWxzIGZyb20gdGhlIGdpdmVuIFIsRyxCLEEgYnVmZmVyIHRvIGEgY29sdW1uIG9mIHBpeGVscyBpbiB0aGUgYml0bWFwLlxuICogXG4gKiBAcGFyYW0geCBYLWNvb3JkaW5hdGUgb2YgY29sdW1uXG4gKiBAcGFyYW0geSBZLWNvb3JkaW5hdGUgb2YgdG9wIG9mIGNvbHVtbiB0byBjb3B5XG4gKiBAcGFyYW0gbGVuIE51bWJlciBvZiBwaXhlbHMgdG8gY29weVxuICogQHBhcmFtIGJ1ZmZlciBSLEcsQixBIGFycmF5IHRvIGNvcHkgZnJvbVxuICovXG5DUENvbG9yQm1wLnByb3RvdHlwZS5jb3B5QXJyYXlUb1BpeGVsQ29sdW1uID0gZnVuY3Rpb24oeCwgeSwgbGVuLCBidWZmZXIpIHtcbiAgICB2YXJcbiAgICAgICAgeUp1bXAgPSAodGhpcy53aWR0aCAtIDEpICogQ1BDb2xvckJtcC5CWVRFU19QRVJfUElYRUwsXG4gICAgICAgIHNyY09mZnNldCA9IDAsXG4gICAgICAgIGRzdE9mZnNldCA9IHRoaXMub2Zmc2V0T2ZQaXhlbCh4LCB5KTtcbiAgICBcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgQ1BDb2xvckJtcC5CWVRFU19QRVJfUElYRUw7IGorKykge1xuICAgICAgICAgICAgdGhpcy5kYXRhW2RzdE9mZnNldCsrXSA9IGJ1ZmZlcltzcmNPZmZzZXQrK107XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGRzdE9mZnNldCArPSB5SnVtcDtcbiAgICB9XG59XG5cbkNQQ29sb3JCbXAucHJvdG90eXBlLmJveEJsdXIgPSBmdW5jdGlvbihyZWN0LCByYWRpdXNYLCByYWRpdXNZKSB7XG4gICAgcmVjdCA9IHRoaXMuZ2V0Qm91bmRzKCkuY2xpcChyZWN0KTtcblxuICAgIHZhclxuICAgICAgICByZWN0V2lkdGggPSByZWN0LmdldFdpZHRoKCksXG4gICAgICAgIHJlY3RXaWR0aEJ5dGVzID0gcmVjdFdpZHRoICogQ1BDb2xvckJtcC5CWVRFU19QRVJfUElYRUwsXG4gICAgICAgIHJlY3RIZWlnaHQgPSByZWN0LmdldEhlaWdodCgpLFxuICAgICAgICByZWN0TGVuZ3RoID0gTWF0aC5tYXgocmVjdFdpZHRoLCByZWN0SGVpZ2h0KSxcblxuICAgICAgICBzcmMgPSBuZXcgVWludDhBcnJheShyZWN0TGVuZ3RoICogQ1BDb2xvckJtcC5CWVRFU19QRVJfUElYRUwpLFxuICAgICAgICBkc3QgPSBuZXcgVWludDhBcnJheShyZWN0TGVuZ3RoICogQ1BDb2xvckJtcC5CWVRFU19QRVJfUElYRUwpO1xuXG4gICAgZm9yICh2YXIgeSA9IHJlY3QudG9wOyB5IDwgcmVjdC5ib3R0b207IHkrKykge1xuICAgICAgICB2YXJcbiAgICAgICAgICAgIHBpeE9mZnNldCA9IHRoaXMub2Zmc2V0T2ZQaXhlbChyZWN0LmxlZnQsIHkpO1xuICAgICAgICBcbiAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCByZWN0V2lkdGhCeXRlczsgeCsrKSB7XG4gICAgICAgICAgICBzcmNbeF0gPSB0aGlzLmRhdGFbcGl4T2Zmc2V0KytdO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBtdWx0aXBseUFscGhhKHNyYywgcmVjdFdpZHRoKTtcbiAgICAgICAgYm94Qmx1ckxpbmUoc3JjLCBkc3QsIHJlY3RXaWR0aCwgcmFkaXVzWCk7XG4gICAgICAgIFxuICAgICAgICBwaXhPZmZzZXQgPSB0aGlzLm9mZnNldE9mUGl4ZWwocmVjdC5sZWZ0LCB5KTtcbiAgICAgICAgXG4gICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgcmVjdFdpZHRoQnl0ZXM7IHgrKykge1xuICAgICAgICAgICAgdGhpcy5kYXRhW3BpeE9mZnNldCsrXSA9IGRzdFt4XTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBcbiAgICBmb3IgKHZhciB4ID0gcmVjdC5sZWZ0OyB4IDwgcmVjdC5yaWdodDsgeCsrKSB7XG4gICAgICAgIHRoaXMuY29weVBpeGVsQ29sdW1uVG9BcnJheSh4LCByZWN0LnRvcCwgcmVjdEhlaWdodCwgc3JjKTtcbiAgICAgICAgXG4gICAgICAgIGJveEJsdXJMaW5lKHNyYywgZHN0LCByZWN0SGVpZ2h0LCByYWRpdXNZKTtcbiAgICAgICAgc2VwYXJhdGVBbHBoYShkc3QsIHJlY3RIZWlnaHQpO1xuICAgICAgICBcbiAgICAgICAgdGhpcy5jb3B5QXJyYXlUb1BpeGVsQ29sdW1uKHgsIHJlY3QudG9wLCByZWN0SGVpZ2h0LCBkc3QpO1xuICAgIH1cbn07XG5cbkNQQ29sb3JCbXAucHJvdG90eXBlLm9mZnNldE9mUGl4ZWwgPSBmdW5jdGlvbih4LCB5KSB7XG4gICAgcmV0dXJuICgoeSAqIHRoaXMud2lkdGggKyB4KSAqIENQQ29sb3JCbXAuQllURVNfUEVSX1BJWEVMKSB8IDA7XG59O1xuXG5DUENvbG9yQm1wLnByb3RvdHlwZS5nZXRNZW1vcnlTaXplID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuZGF0YS5sZW5ndGg7XG59O1xuXG4vLyBMb2FkIGZyb20gYSBsb2FkZWQgSFRNTCBJbWFnZSBvYmplY3RcbkNQQ29sb3JCbXAucHJvdG90eXBlLmxvYWRGcm9tSW1hZ2UgPSBmdW5jdGlvbihpbWFnZSkge1xuICAgIHZhclxuICAgICAgICBpbWFnZUNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIiksXG4gICAgICAgIGltYWdlQ29udGV4dCA9IGltYWdlQ2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcblxuICAgIGltYWdlQ2FudmFzLndpZHRoID0gaW1hZ2Uud2lkdGg7XG4gICAgaW1hZ2VDYW52YXMuaGVpZ2h0ID0gaW1hZ2UuaGVpZ2h0O1xuICAgIFxuICAgIGltYWdlQ29udGV4dC5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb24gPSBcImNvcHlcIjtcbiAgICBpbWFnZUNvbnRleHQuZHJhd0ltYWdlKGltYWdlLCAwLCAwKTtcbiAgICBcbiAgICB0aGlzLmltYWdlRGF0YSA9IGltYWdlQ29udGV4dC5nZXRJbWFnZURhdGEoMCwgMCwgdGhpcy53aWR0aCwgdGhpcy5oZWlnaHQpO1xuICAgIHRoaXMuZGF0YSA9IHRoaXMuaW1hZ2VEYXRhLmRhdGE7XG59OyIsIi8qXG4gICAgQ2hpY2tlblBhaW50XG4gICAgXG4gICAgQ2hpY2tlblBhaW50IGlzIGEgdHJhbnNsYXRpb24gb2YgQ2hpYmlQYWludCBmcm9tIEphdmEgdG8gSmF2YVNjcmlwdFxuICAgIGJ5IE5pY2hvbGFzIFNoZXJsb2NrIC8gQ2hpY2tlbiBTbW9vdGhpZS5cbiAgICBcbiAgICBDaGliaVBhaW50IGlzIENvcHlyaWdodCAoYykgMjAwNi0yMDA4IE1hcmMgU2NoZWZlclxuXG4gICAgQ2hpY2tlblBhaW50IGlzIGZyZWUgc29mdHdhcmU6IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vciBtb2RpZnlcbiAgICBpdCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGFzIHB1Ymxpc2hlZCBieVxuICAgIHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb24sIGVpdGhlciB2ZXJzaW9uIDMgb2YgdGhlIExpY2Vuc2UsIG9yXG4gICAgKGF0IHlvdXIgb3B0aW9uKSBhbnkgbGF0ZXIgdmVyc2lvbi5cblxuICAgIENoaWNrZW5QYWludCBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLFxuICAgIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mXG4gICAgTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiAgU2VlIHRoZVxuICAgIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuXG5cbiAgICBZb3Ugc2hvdWxkIGhhdmUgcmVjZWl2ZWQgYSBjb3B5IG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZVxuICAgIGFsb25nIHdpdGggQ2hpY2tlblBhaW50LiBJZiBub3QsIHNlZSA8aHR0cDovL3d3dy5nbnUub3JnL2xpY2Vuc2VzLz4uXG4qL1xuXG5pbXBvcnQgQ1BCaXRtYXAgZnJvbSBcIi4vQ1BCaXRtYXBcIjtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gQ1BHcmV5Qm1wKHdpZHRoLCBoZWlnaHQsIGJpdERlcHRoKSB7XG5cbiAgICBDUEJpdG1hcC5jYWxsKHRoaXMsIHdpZHRoLCBoZWlnaHQpO1xuXG4gICAgdGhpcy5iaXREZXB0aCA9IGJpdERlcHRoO1xuICAgIFxuICAgIHN3aXRjaCAoYml0RGVwdGgpIHtcbiAgICAgICAgY2FzZSAzMjpcbiAgICAgICAgICAgIHRoaXMuZGF0YSA9IG5ldyBVaW50MzJBcnJheSh3aWR0aCAqIGhlaWdodCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDE2OlxuICAgICAgICAgICAgdGhpcy5kYXRhID0gbmV3IFVpbnQxNkFycmF5KHdpZHRoICogaGVpZ2h0KTtcbiAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgODpcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHRoaXMuZGF0YSA9IG5ldyBVaW50OEFycmF5KHdpZHRoICogaGVpZ2h0KTtcbiAgICB9XG5cbiAgICB0aGlzLmNsb25lID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhclxuICAgICAgICAgICAgcmVzdWx0ID0gbmV3IENQR3JleUJtcCh0aGlzLndpZHRoLCB0aGlzLmhlaWdodCwgdGhpcy5iaXREZXB0aCk7XG4gICAgICAgIFxuICAgICAgICByZXN1bHQuZGF0YS5zZXQodGhpcy5kYXRhKTtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfTtcbiAgICBcbiAgICB0aGlzLmNsZWFyQWxsID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmRhdGEubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHRoaXMuZGF0YVtpXSA9IHZhbHVlO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBcbiAgICB0aGlzLmNsZWFyUmVjdCA9IGZ1bmN0aW9uKHJlY3QsIHZhbHVlKSB7XG4gICAgICAgIHZhclxuICAgICAgICAgICAgcmVjdCA9IHRoaXMuZ2V0Qm91bmRzKCkuY2xpcChyZWN0KSxcbiAgICAgICAgICAgIHlTdHJpZGUgPSB0aGlzLndpZHRoIC0gcmVjdC5nZXRXaWR0aCgpLFxuICAgICAgICAgICAgcGl4SW5kZXggPSB0aGlzLm9mZnNldE9mUGl4ZWwocmVjdC5sZWZ0LCByZWN0LnRvcCk7XG4gICAgICAgIFxuICAgICAgICBmb3IgKHZhciB5ID0gcmVjdC50b3A7IHkgPCByZWN0LmJvdHRvbTsgeSsrLCBwaXhJbmRleCArPSB5U3RyaWRlKSB7XG4gICAgICAgICAgICBmb3IgKHZhciB4ID0gcmVjdC5sZWZ0OyB4IDwgcmVjdC5yaWdodDsgeCsrLCBwaXhJbmRleCsrKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kYXRhW3BpeEluZGV4XSA9IHZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcblxuICAgIHRoaXMubWlycm9ySG9yaXpvbnRhbGx5ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhclxuICAgICAgICAgICAgbmV3RGF0YSA9IG5ldyBVaW50OEFycmF5KHdpZHRoICogaGVpZ2h0KTtcblxuICAgICAgICBmb3IgKHZhciB5ID0gMDsgeSA8IGhlaWdodDsgeSsrKSB7XG4gICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IHdpZHRoOyB4KyspIHtcbiAgICAgICAgICAgICAgICBuZXdEYXRhW3kgKiB3aWR0aCArIHhdID0gdGhpcy5kYXRhW3kgKiB3aWR0aCArIHdpZHRoIC0geCAtIDFdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5kYXRhID0gbmV3RGF0YTtcbiAgICB9O1xuXG4gICAgdGhpcy5hcHBseUxVVCA9IGZ1bmN0aW9uKGx1dCkge1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuZGF0YS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdGhpcy5kYXRhW2ldID0gbHV0LnRhYmxlW3RoaXMuZGF0YVtpXV07XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFxuICAgIHRoaXMudG9DYW52YXMgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyXG4gICAgICAgICAgICBpbWFnZURhdGEgPSB0aGlzLnRvSW1hZ2VEYXRhKCksXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIiksXG4gICAgICAgICAgICBjb250ZXh0ID0gY2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcbiAgICAgICAgXG4gICAgICAgIGNhbnZhcy53aWR0aCA9IHRoaXMud2lkdGg7XG4gICAgICAgIGNhbnZhcy5oZWlnaHQgPSB0aGlzLmhlaWdodDtcbiAgICAgICAgXG4gICAgICAgIGNvbnRleHQucHV0SW1hZ2VEYXRhKGltYWdlRGF0YSwgMCwgMCk7XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gY2FudmFzO1xuICAgIH07XG4gICAgXG4gICAgdGhpcy50b0ltYWdlRGF0YSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXJcbiAgICAgICAgICAgIGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIiksXG4gICAgICAgICAgICBjb250ZXh0ID0gY2FudmFzLmdldENvbnRleHQoXCIyZFwiKSxcbiAgICAgICAgICAgIGltYWdlRGF0YSA9IGNvbnRleHQuY3JlYXRlSW1hZ2VEYXRhKHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0KSxcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgc3JjSW5kZXggPSAwLFxuICAgICAgICAgICAgZHN0SW5kZXggPSAwO1xuICAgICAgICBcbiAgICAgICAgZm9yICh2YXIgeSA9IDA7IHkgPCB0aGlzLmhlaWdodDsgeSsrKSB7XG4gICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IHRoaXMud2lkdGg7IHgrKykge1xuICAgICAgICAgICAgICAgIGltYWdlRGF0YS5kYXRhW2RzdEluZGV4KytdID0gdGhpcy5kYXRhW3NyY0luZGV4XTtcbiAgICAgICAgICAgICAgICBpbWFnZURhdGEuZGF0YVtkc3RJbmRleCsrXSA9IHRoaXMuZGF0YVtzcmNJbmRleF07XG4gICAgICAgICAgICAgICAgaW1hZ2VEYXRhLmRhdGFbZHN0SW5kZXgrK10gPSB0aGlzLmRhdGFbc3JjSW5kZXhdO1xuICAgICAgICAgICAgICAgIGltYWdlRGF0YS5kYXRhW2RzdEluZGV4KytdID0gMHhGRjtcbiAgICAgICAgICAgICAgICBzcmNJbmRleCsrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gaW1hZ2VEYXRhO1xuICAgIH07XG59XG5cbkNQR3JleUJtcC5wcm90b3R5cGUub2Zmc2V0T2ZQaXhlbCA9IGZ1bmN0aW9uKHgsIHkpIHtcbiAgICByZXR1cm4geSAqIHRoaXMud2lkdGggKyB4O1xufSIsIi8qXG4gICAgQ2hpY2tlblBhaW50XG4gICAgXG4gICAgQ2hpY2tlblBhaW50IGlzIGEgdHJhbnNsYXRpb24gb2YgQ2hpYmlQYWludCBmcm9tIEphdmEgdG8gSmF2YVNjcmlwdFxuICAgIGJ5IE5pY2hvbGFzIFNoZXJsb2NrIC8gQ2hpY2tlbiBTbW9vdGhpZS5cbiAgICBcbiAgICBDaGliaVBhaW50IGlzIENvcHlyaWdodCAoYykgMjAwNi0yMDA4IE1hcmMgU2NoZWZlclxuXG4gICAgQ2hpY2tlblBhaW50IGlzIGZyZWUgc29mdHdhcmU6IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vciBtb2RpZnlcbiAgICBpdCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGFzIHB1Ymxpc2hlZCBieVxuICAgIHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb24sIGVpdGhlciB2ZXJzaW9uIDMgb2YgdGhlIExpY2Vuc2UsIG9yXG4gICAgKGF0IHlvdXIgb3B0aW9uKSBhbnkgbGF0ZXIgdmVyc2lvbi5cblxuICAgIENoaWNrZW5QYWludCBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLFxuICAgIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mXG4gICAgTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiAgU2VlIHRoZVxuICAgIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuXG5cbiAgICBZb3Ugc2hvdWxkIGhhdmUgcmVjZWl2ZWQgYSBjb3B5IG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZVxuICAgIGFsb25nIHdpdGggQ2hpY2tlblBhaW50LiBJZiBub3QsIHNlZSA8aHR0cDovL3d3dy5nbnUub3JnL2xpY2Vuc2VzLz4uXG4qL1xuXG5pbXBvcnQgQ1BDb2xvckJtcCBmcm9tICcuL0NQQ29sb3JCbXAnO1xuaW1wb3J0IENQQmxlbmQgZnJvbSAnLi9DUEJsZW5kJztcblxuLyoqXG4gKiBOb3RlIGxheWVyIGlzIG5vdCBjbGVhcmVkIHRvIGFueSBzcGVjaWZpYyB2YWx1ZXMgdXBvbiBpbml0aWFsIGNyZWF0aW9uLCB1c2UgY2xlYXJBbGwoKS5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gQ1BMYXllcih3aWR0aCwgaGVpZ2h0LCBuYW1lKSB7XG4gICAgLy8gU3VwZXItY29uc3RydWN0b3JcbiAgICBDUENvbG9yQm1wLmNhbGwodGhpcywgd2lkdGgsIGhlaWdodCk7XG4gICAgXG4gICAgdGhpcy5uYW1lID0gbmFtZSB8fCBcIlwiO1xuICAgIFxuICAgIHRoaXMuYWxwaGEgPSAxMDA7XG4gICAgdGhpcy52aXNpYmxlID0gdHJ1ZTtcbiAgICB0aGlzLmJsZW5kTW9kZSA9IENQTGF5ZXIuTE1fTk9STUFMO1xufVxuXG5DUExheWVyLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoQ1BDb2xvckJtcC5wcm90b3R5cGUpO1xuQ1BMYXllci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBDUExheWVyO1xuXG5jb25zdFxuICAgIEJZVEVTX1BFUl9QSVhFTCA9IDQsXG4gICAgXG4gICAgUkVEX0JZVEVfT0ZGU0VUID0gMCxcbiAgICBHUkVFTl9CWVRFX09GRlNFVCA9IDEsXG4gICAgQkxVRV9CWVRFX09GRlNFVCA9IDIsXG4gICAgQUxQSEFfQllURV9PRkZTRVQgPSAzLFxuICAgIFxuICAgIGJsZW5kID0gbmV3IENQQmxlbmQoKTtcblxuQ1BMYXllci5wcm90b3R5cGUuZnVzaW9uV2l0aCA9IGZ1bmN0aW9uKGZ1c2lvbiwgcmVjdCkge1xuICAgIGlmICh0aGlzLmFscGhhIDw9IDApIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBcbiAgICByZWN0ID0gdGhpcy5nZXRCb3VuZHMoKS5jbGlwKHJlY3QpO1xuICAgIFxuICAgIHN3aXRjaCAodGhpcy5ibGVuZE1vZGUpIHtcbiAgICAgICAgY2FzZSBDUExheWVyLkxNX05PUk1BTDpcbiAgICAgICAgICAgIGlmICh0aGlzLmFscGhhID49IDEwMCkge1xuICAgICAgICAgICAgICAgIGJsZW5kLmZ1c2lvbldpdGhOb3JtYWxOb0FscGhhKHRoaXMsIGZ1c2lvbiwgcmVjdCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGJsZW5kLmZ1c2lvbldpdGhOb3JtYWwodGhpcywgZnVzaW9uLCByZWN0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBcbiAgICAgICAgY2FzZSBDUExheWVyLkxNX01VTFRJUExZOlxuICAgICAgICAgICAgYmxlbmQuZnVzaW9uV2l0aE11bHRpcGx5KHRoaXMsIGZ1c2lvbiwgcmVjdCk7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlIENQTGF5ZXIuTE1fQUREOlxuICAgICAgICAgICAgYmxlbmQuZnVzaW9uV2l0aEFkZCh0aGlzLCBmdXNpb24sIHJlY3QpO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSBDUExheWVyLkxNX1NDUkVFTjpcbiAgICAgICAgICAgIGJsZW5kLmZ1c2lvbldpdGhTY3JlZW4odGhpcywgZnVzaW9uLCByZWN0KTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgQ1BMYXllci5MTV9MSUdIVEVOOlxuICAgICAgICAgICAgYmxlbmQuZnVzaW9uV2l0aExpZ2h0ZW4odGhpcywgZnVzaW9uLCByZWN0KTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgQ1BMYXllci5MTV9EQVJLRU46XG4gICAgICAgICAgICBibGVuZC5mdXNpb25XaXRoRGFya2VuKHRoaXMsIGZ1c2lvbiwgcmVjdCk7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlIENQTGF5ZXIuTE1fU1VCVFJBQ1Q6XG4gICAgICAgICAgICBibGVuZC5mdXNpb25XaXRoU3VidHJhY3QodGhpcywgZnVzaW9uLCByZWN0KTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgQ1BMYXllci5MTV9ET0RHRTpcbiAgICAgICAgICAgIGJsZW5kLmZ1c2lvbldpdGhEb2RnZSh0aGlzLCBmdXNpb24sIHJlY3QpO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSBDUExheWVyLkxNX0JVUk46XG4gICAgICAgICAgICBibGVuZC5mdXNpb25XaXRoQnVybih0aGlzLCBmdXNpb24sIHJlY3QpO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSBDUExheWVyLkxNX09WRVJMQVk6XG4gICAgICAgICAgICBibGVuZC5mdXNpb25XaXRoT3ZlcmxheSh0aGlzLCBmdXNpb24sIHJlY3QpO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSBDUExheWVyLkxNX0hBUkRMSUdIVDpcbiAgICAgICAgICAgIGJsZW5kLmZ1c2lvbldpdGhIYXJkTGlnaHRGdWxsQWxwaGEodGhpcywgZnVzaW9uLCByZWN0KTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgQ1BMYXllci5MTV9TT0ZUTElHSFQ6XG4gICAgICAgICAgICBibGVuZC5mdXNpb25XaXRoU29mdExpZ2h0RnVsbEFscGhhKHRoaXMsIGZ1c2lvbiwgcmVjdCk7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlIENQTGF5ZXIuTE1fVklWSURMSUdIVDpcbiAgICAgICAgICAgIGJsZW5kLmZ1c2lvbldpdGhWaXZpZExpZ2h0RnVsbEFscGhhKHRoaXMsIGZ1c2lvbiwgcmVjdCk7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlIENQTGF5ZXIuTE1fTElORUFSTElHSFQ6XG4gICAgICAgICAgICBibGVuZC5mdXNpb25XaXRoTGluZWFyTGlnaHRGdWxsQWxwaGEodGhpcywgZnVzaW9uLCByZWN0KTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgQ1BMYXllci5MTV9QSU5MSUdIVDpcbiAgICAgICAgICAgIGJsZW5kLmZ1c2lvbldpdGhQaW5MaWdodEZ1bGxBbHBoYSh0aGlzLCBmdXNpb24sIHJlY3QpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgfVxufTtcblxuQ1BMYXllci5wcm90b3R5cGUuZnVzaW9uV2l0aEZ1bGxBbHBoYSA9IGZ1bmN0aW9uKGZ1c2lvbiwgcmVjdCkge1xuICAgIGlmICh0aGlzLmFscGhhIDw9IDApIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBcbiAgICByZWN0ID0gdGhpcy5nZXRCb3VuZHMoKS5jbGlwKHJlY3QpO1xuXG4gICAgc3dpdGNoICh0aGlzLmJsZW5kTW9kZSkge1xuICAgICAgICBjYXNlIENQTGF5ZXIuTE1fTk9STUFMOlxuICAgICAgICAgICAgYmxlbmQuZnVzaW9uV2l0aE5vcm1hbEZ1bGxBbHBoYSh0aGlzLCBmdXNpb24sIHJlY3QpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIFxuICAgICAgICBjYXNlIENQTGF5ZXIuTE1fTVVMVElQTFk6XG4gICAgICAgICAgICBibGVuZC5mdXNpb25XaXRoTXVsdGlwbHlGdWxsQWxwaGEodGhpcywgZnVzaW9uLCByZWN0KTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgQ1BMYXllci5MTV9BREQ6XG4gICAgICAgICAgICBibGVuZC5mdXNpb25XaXRoQWRkRnVsbEFscGhhKHRoaXMsIGZ1c2lvbiwgcmVjdCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIFxuICAgICAgICBjYXNlIENQTGF5ZXIuTE1fU0NSRUVOOlxuICAgICAgICAgICAgYmxlbmQuZnVzaW9uV2l0aFNjcmVlbkZ1bGxBbHBoYSh0aGlzLCBmdXNpb24sIHJlY3QpO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSBDUExheWVyLkxNX0xJR0hURU46XG4gICAgICAgICAgICBibGVuZC5mdXNpb25XaXRoTGlnaHRlbkZ1bGxBbHBoYSh0aGlzLCBmdXNpb24sIHJlY3QpO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSBDUExheWVyLkxNX0RBUktFTjpcbiAgICAgICAgICAgIGJsZW5kLmZ1c2lvbldpdGhEYXJrZW5GdWxsQWxwaGEodGhpcywgZnVzaW9uLCByZWN0KTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgQ1BMYXllci5MTV9TVUJUUkFDVDpcbiAgICAgICAgICAgIGJsZW5kLmZ1c2lvbldpdGhTdWJ0cmFjdEZ1bGxBbHBoYSh0aGlzLCBmdXNpb24sIHJlY3QpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBcbiAgICAgICAgY2FzZSBDUExheWVyLkxNX0RPREdFOlxuICAgICAgICAgICAgYmxlbmQuZnVzaW9uV2l0aERvZGdlRnVsbEFscGhhKHRoaXMsIGZ1c2lvbiwgcmVjdCk7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlIENQTGF5ZXIuTE1fQlVSTjpcbiAgICAgICAgICAgIGJsZW5kLmZ1c2lvbldpdGhCdXJuRnVsbEFscGhhKHRoaXMsIGZ1c2lvbiwgcmVjdCk7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlIENQTGF5ZXIuTE1fT1ZFUkxBWTpcbiAgICAgICAgICAgIGJsZW5kLmZ1c2lvbldpdGhPdmVybGF5RnVsbEFscGhhKHRoaXMsIGZ1c2lvbiwgcmVjdCk7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlIENQTGF5ZXIuTE1fSEFSRExJR0hUOlxuICAgICAgICAgICAgYmxlbmQuZnVzaW9uV2l0aEhhcmRMaWdodEZ1bGxBbHBoYSh0aGlzLCBmdXNpb24sIHJlY3QpO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSBDUExheWVyLkxNX1NPRlRMSUdIVDpcbiAgICAgICAgICAgIGJsZW5kLmZ1c2lvbldpdGhTb2Z0TGlnaHRGdWxsQWxwaGEodGhpcywgZnVzaW9uLCByZWN0KTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgQ1BMYXllci5MTV9WSVZJRExJR0hUOlxuICAgICAgICAgICAgYmxlbmQuZnVzaW9uV2l0aFZpdmlkTGlnaHRGdWxsQWxwaGEodGhpcywgZnVzaW9uLCByZWN0KTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgQ1BMYXllci5MTV9MSU5FQVJMSUdIVDpcbiAgICAgICAgICAgIGJsZW5kLmZ1c2lvbldpdGhMaW5lYXJMaWdodEZ1bGxBbHBoYSh0aGlzLCBmdXNpb24sIHJlY3QpO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSBDUExheWVyLkxNX1BJTkxJR0hUOlxuICAgICAgICAgICAgYmxlbmQuZnVzaW9uV2l0aFBpbkxpZ2h0RnVsbEFscGhhKHRoaXMsIGZ1c2lvbiwgcmVjdCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICB9XG59O1xuXG5DUExheWVyLnByb3RvdHlwZS5jbGVhckFsbCA9IGZ1bmN0aW9uKGNvbG9yKSB7XG4gICAgdmFyXG4gICAgICAgIGEgPSAoY29sb3IgPj4gMjQpICYgMHhGRixcbiAgICAgICAgciA9IChjb2xvciA+PiAxNikgJiAweEZGLFxuICAgICAgICBnID0gKGNvbG9yID4+IDgpICYgMHhGRixcbiAgICAgICAgYiA9IGNvbG9yICYgMHhGRjtcbiAgICBcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMud2lkdGggKiB0aGlzLmhlaWdodCAqIEJZVEVTX1BFUl9QSVhFTDsgKSB7XG4gICAgICAgIHRoaXMuZGF0YVtpKytdID0gcjtcbiAgICAgICAgdGhpcy5kYXRhW2krK10gPSBnO1xuICAgICAgICB0aGlzLmRhdGFbaSsrXSA9IGI7XG4gICAgICAgIHRoaXMuZGF0YVtpKytdID0gYTtcbiAgICB9XG59O1xuXG5DUExheWVyLnByb3RvdHlwZS5jbGVhclJlY3QgPSBmdW5jdGlvbihyZWN0LCBjb2xvcikge1xuICAgIHZhclxuICAgICAgICBhID0gKGNvbG9yID4+IDI0KSAmIDB4RkYsXG4gICAgICAgIHIgPSAoY29sb3IgPj4gMTYpICYgMHhGRixcbiAgICAgICAgZyA9IChjb2xvciA+PiA4KSAmIDB4RkYsXG4gICAgICAgIGIgPSBjb2xvciAmIDB4RkY7XG4gICAgXG4gICAgdmFyXG4gICAgICAgIHJlY3QgPSB0aGlzLmdldEJvdW5kcygpLmNsaXAocmVjdCksXG4gICAgICAgIHlTdHJpZGUgPSAodGhpcy53aWR0aCAtIHJlY3QuZ2V0V2lkdGgoKSkgKiBCWVRFU19QRVJfUElYRUwsXG4gICAgICAgIFxuICAgICAgICBwaXhJbmRleCA9IHRoaXMub2Zmc2V0T2ZQaXhlbChyZWN0LmxlZnQsIHJlY3QudG9wKTtcbiAgICBcbiAgICBmb3IgKHZhciB5ID0gcmVjdC50b3A7IHkgPCByZWN0LmJvdHRvbTsgeSsrLCBwaXhJbmRleCArPSB5U3RyaWRlKSB7XG4gICAgICAgIGZvciAodmFyIHggPSByZWN0LmxlZnQ7IHggPCByZWN0LnJpZ2h0OyB4KyspIHtcbiAgICAgICAgICAgIHRoaXMuZGF0YVtwaXhJbmRleCsrXSA9IHI7XG4gICAgICAgICAgICB0aGlzLmRhdGFbcGl4SW5kZXgrK10gPSBnO1xuICAgICAgICAgICAgdGhpcy5kYXRhW3BpeEluZGV4KytdID0gYjtcbiAgICAgICAgICAgIHRoaXMuZGF0YVtwaXhJbmRleCsrXSA9IGE7XG4gICAgICAgIH1cbiAgICB9XG59O1xuXG4vKipcbiAqIEBwYXJhbSByZWN0IENQUmVjdFxuICogQHBhcmFtIHNvdXJjZSBDUExheWVyXG4gKi9cbkNQTGF5ZXIucHJvdG90eXBlLmNvcHlSZWdpb25IRmxpcCA9IGZ1bmN0aW9uKHJlY3QsIHNvdXJjZSkge1xuICAgIHJlY3QgPSB0aGlzLmdldEJvdW5kcygpLmNsaXAocmVjdCk7XG5cbiAgICBmb3IgKHZhciB5ID0gcmVjdC50b3A7IHkgPCByZWN0LmJvdHRvbTsgeSsrKSB7XG4gICAgICAgIHZhclxuICAgICAgICAgICAgZHN0T2Zmc2V0ID0gdGhpcy5vZmZzZXRPZlBpeGVsKHJlY3QubGVmdCwgeSksXG4gICAgICAgICAgICBzcmNPZmZzZXQgPSBzb3VyY2Uub2Zmc2V0T2ZQaXhlbChyZWN0LnJpZ2h0IC0gMSwgeSk7XG4gICAgICAgIFxuICAgICAgICBmb3IgKHZhciB4ID0gcmVjdC5sZWZ0OyB4IDwgcmVjdC5yaWdodDsgeCsrLCBzcmNPZmZzZXQgLT0gQ1BDb2xvckJtcC5CWVRFU19QRVJfUElYRUwgKiAyKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IENQQ29sb3JCbXAuQllURVNfUEVSX1BJWEVMOyBpKyspIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRhdGFbZHN0T2Zmc2V0KytdID0gc291cmNlLmRhdGFbc3JjT2Zmc2V0KytdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufTtcblxuLyoqXG4gKiBAcGFyYW0gcmVjdCBDUFJlY3RcbiAqIEBwYXJhbSBzb3VyY2UgQ1BMYXllclxuICovXG5DUExheWVyLnByb3RvdHlwZS5jb3B5UmVnaW9uVkZsaXAgPSBmdW5jdGlvbihyZWN0LCBzb3VyY2UpIHtcbiAgICByZWN0ID0gdGhpcy5nZXRCb3VuZHMoKS5jbGlwKHJlY3QpO1xuICAgIFxuICAgIHZhclxuICAgICAgICB3aWR0aEJ5dGVzID0gcmVjdC5nZXRXaWR0aCgpICogQ1BDb2xvckJtcC5CWVRFU19QRVJfUElYRUw7XG5cbiAgICBmb3IgKHZhciB5ID0gcmVjdC50b3A7IHkgPCByZWN0LmJvdHRvbTsgeSsrKSB7XG4gICAgICAgIHZhclxuICAgICAgICAgICAgZHN0T2Zmc2V0ID0gdGhpcy5vZmZzZXRPZlBpeGVsKHJlY3QubGVmdCwgeSksXG4gICAgICAgICAgICBzcmNPZmZzZXQgPSBzb3VyY2Uub2Zmc2V0T2ZQaXhlbChyZWN0LmxlZnQsIHJlY3QuYm90dG9tIC0gMSAtICh5IC0gcmVjdC50b3ApKTtcbiAgICAgICAgXG4gICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgd2lkdGhCeXRlczsgeCsrKSB7XG4gICAgICAgICAgICB0aGlzLmRhdGFbZHN0T2Zmc2V0KytdID0gc291cmNlLmRhdGFbc3JjT2Zmc2V0KytdO1xuICAgICAgICB9XG4gICAgfVxufVxuXG4vKipcbiAqIEBwYXJhbSByIENQUmVjdFxuICovXG5DUExheWVyLnByb3RvdHlwZS5maWxsV2l0aE5vaXNlID0gZnVuY3Rpb24ocmVjdCkge1xuICAgIHJlY3QgPSB0aGlzLmdldEJvdW5kcygpLmNsaXAocmVjdCk7XG5cbiAgICB2YXJcbiAgICAgICAgdmFsdWUsXG4gICAgICAgIHlTdHJpZGUgPSAodGhpcy53aWR0aCAtIHJlY3QuZ2V0V2lkdGgoKSkgKiBDUENvbG9yQm1wLkJZVEVTX1BFUl9QSVhFTCxcbiAgICAgICAgXG4gICAgICAgIHBpeEluZGV4ID0gdGhpcy5vZmZzZXRPZlBpeGVsKHJlY3QubGVmdCwgcmVjdC50b3ApO1xuXG4gICAgZm9yICh2YXIgeSA9IHJlY3QudG9wOyB5IDwgcmVjdC5ib3R0b207IHkrKywgcGl4SW5kZXggKz0geVN0cmlkZSkge1xuICAgICAgICBmb3IgKHZhciB4ID0gcmVjdC5sZWZ0OyB4IDwgcmVjdC5yaWdodDsgeCsrLCBwaXhJbmRleCArPSBDUENvbG9yQm1wLkJZVEVTX1BFUl9QSVhFTCkge1xuICAgICAgICAgICAgdmFsdWUgPSAoTWF0aC5yYW5kb20oKSAqIDB4MTAwKSB8IDA7XG5cbiAgICAgICAgICAgIHRoaXMuZGF0YVtwaXhJbmRleCArIENQQ29sb3JCbXAuUkVEX0JZVEVfT0ZGU0VUXSA9IHZhbHVlO1xuICAgICAgICAgICAgdGhpcy5kYXRhW3BpeEluZGV4ICsgQ1BDb2xvckJtcC5HUkVFTl9CWVRFX09GRlNFVF0gPSB2YWx1ZTtcbiAgICAgICAgICAgIHRoaXMuZGF0YVtwaXhJbmRleCArIENQQ29sb3JCbXAuQkxVRV9CWVRFX09GRlNFVF0gPSB2YWx1ZTtcbiAgICAgICAgICAgIHRoaXMuZGF0YVtwaXhJbmRleCArIENQQ29sb3JCbXAuQUxQSEFfQllURV9PRkZTRVRdID0gMHhGRjtcbiAgICAgICAgfVxuICAgIH1cbn07XG5cbi8qKlxuICogUmVwbGFjZSB0aGUgcGl4ZWxzIGluIHRoZSBnaXZlbiByZWN0IHdpdGggdGhlIGdpdmVuIGhvcml6b250YWwgZ3JhZGllbnQuXG4gKlxuICogQHBhcmFtIHJlY3QgQ1BSZWN0XG4gKiBAcGFyYW0gZnJvbVggaW50XG4gKiBAcGFyYW0gdG9YIGludFxuICogQHBhcmFtIGdyYWRpZW50UG9pbnRzIGludFtdXG4gKi9cbkNQTGF5ZXIucHJvdG90eXBlLmdyYWRpZW50SG9yelJlcGxhY2UgPSBmdW5jdGlvbihyZWN0LCBmcm9tWCwgdG9YLCBncmFkaWVudFBvaW50cykge1xuICAgIHZhclxuICAgICAgICBmcm9tQ29sb3IgPSB7XG4gICAgICAgICAgICByOiAoZ3JhZGllbnRQb2ludHNbMF0gPj4gMTYpICYgMHhGRixcbiAgICAgICAgICAgIGc6IChncmFkaWVudFBvaW50c1swXSA+PiA4KSAmIDB4RkYsXG4gICAgICAgICAgICBiOiBncmFkaWVudFBvaW50c1swXSAmIDB4RkYsXG4gICAgICAgICAgICBhOiAoZ3JhZGllbnRQb2ludHNbMF0gPj4gMjQpICYgMHhGRlxuICAgICAgICB9LFxuICAgICAgICB0b0NvbG9yID0ge1xuICAgICAgICAgICAgcjogKGdyYWRpZW50UG9pbnRzWzFdID4+IDE2KSAmIDB4RkYsXG4gICAgICAgICAgICBnOiAoZ3JhZGllbnRQb2ludHNbMV0gPj4gOCkgJiAweEZGLFxuICAgICAgICAgICAgYjogZ3JhZGllbnRQb2ludHNbMV0gJiAweEZGLFxuICAgICAgICAgICAgYTogKGdyYWRpZW50UG9pbnRzWzFdID4+IDI0KSAmIDB4RkZcbiAgICAgICAgfSxcblxuICAgICAgICB5U3RyaWRlID0gKHRoaXMud2lkdGggLSByZWN0LmdldFdpZHRoKCkpICogQ1BDb2xvckJtcC5CWVRFU19QRVJfUElYRUwsXG4gICAgICAgIHBpeEluZGV4ID0gdGhpcy5vZmZzZXRPZlBpeGVsKHJlY3QubGVmdCwgcmVjdC50b3ApIHwgMCxcbiAgICAgICAgaCA9IChyZWN0LmJvdHRvbSAtIHJlY3QudG9wKSB8IDA7XG5cbiAgICBpZiAodG9YIDwgZnJvbVgpIHtcbiAgICAgICAgdmFyXG4gICAgICAgICAgICB0ZW1wID0gdG9YO1xuICAgICAgICB0b1ggPSBmcm9tWDtcbiAgICAgICAgZnJvbVggPSB0ZW1wO1xuXG4gICAgICAgIHRlbXAgPSBmcm9tQ29sb3I7XG4gICAgICAgIGZyb21Db2xvciA9IHRvQ29sb3I7XG4gICAgICAgIHRvQ29sb3IgPSB0ZW1wO1xuICAgIH1cbiAgICBcbiAgICB2YXJcbiAgICAgICAgZ3JhZGllbnRSYW5nZSA9ICh0b1ggLSBmcm9tWCkgfCAwLFxuICAgICAgICByU3RlcCA9ICh0b0NvbG9yLnIgLSBmcm9tQ29sb3IucikgLyBncmFkaWVudFJhbmdlLFxuICAgICAgICBnU3RlcCA9ICh0b0NvbG9yLmcgLSBmcm9tQ29sb3IuZykgLyBncmFkaWVudFJhbmdlLFxuICAgICAgICBiU3RlcCA9ICh0b0NvbG9yLmIgLSBmcm9tQ29sb3IuYikgLyBncmFkaWVudFJhbmdlLFxuICAgICAgICBhU3RlcCA9ICh0b0NvbG9yLmEgLSBmcm9tQ29sb3IuYSkgLyBncmFkaWVudFJhbmdlLFxuICAgIFxuICAgICAgICBqdW1wID0gTWF0aC5tYXgocmVjdC5sZWZ0IC0gZnJvbVgsIDApO1xuXG4gICAgZm9yICh2YXIgeSA9IDA7IHkgPCBoOyB5KyssIHBpeEluZGV4ICs9IHlTdHJpZGUpIHtcbiAgICAgICAgLy8gVGhlIHNvbGlkIGNvbG9yIHNlY3Rpb24gYmVmb3JlIHRoZSBncmFkaWVudFxuICAgICAgICB2YXJcbiAgICAgICAgICAgIHggPSByZWN0LmxlZnQ7XG5cbiAgICAgICAgZm9yICh2YXIgeEVuZCA9IE1hdGgubWluKGZyb21YLCByZWN0LnJpZ2h0KSB8IDA7IHggPCB4RW5kOyB4KyssIHBpeEluZGV4ICs9IENQQ29sb3JCbXAuQllURVNfUEVSX1BJWEVMKSB7XG4gICAgICAgICAgICB0aGlzLmRhdGFbcGl4SW5kZXggKyBDUENvbG9yQm1wLlJFRF9CWVRFX09GRlNFVF0gPSBmcm9tQ29sb3IucjtcbiAgICAgICAgICAgIHRoaXMuZGF0YVtwaXhJbmRleCArIENQQ29sb3JCbXAuR1JFRU5fQllURV9PRkZTRVRdID0gZnJvbUNvbG9yLmc7XG4gICAgICAgICAgICB0aGlzLmRhdGFbcGl4SW5kZXggKyBDUENvbG9yQm1wLkJMVUVfQllURV9PRkZTRVRdID0gZnJvbUNvbG9yLmI7XG4gICAgICAgICAgICB0aGlzLmRhdGFbcGl4SW5kZXggKyBDUENvbG9yQm1wLkFMUEhBX0JZVEVfT0ZGU0VUXSA9IGZyb21Db2xvci5hO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gSW4gdGhlIGdyYWRpZW50XG4gICAgICAgIHZhclxuICAgICAgICAgICAgciA9IGZyb21Db2xvci5yICsgclN0ZXAgKiBqdW1wLFxuICAgICAgICAgICAgZyA9IGZyb21Db2xvci5nICsgZ1N0ZXAgKiBqdW1wLFxuICAgICAgICAgICAgYiA9IGZyb21Db2xvci5iICsgYlN0ZXAgKiBqdW1wLFxuICAgICAgICAgICAgYSA9IGZyb21Db2xvci5hICsgYVN0ZXAgKiBqdW1wO1xuXG4gICAgICAgIGZvciAoeEVuZCA9IE1hdGgubWluKHRvWCwgcmVjdC5yaWdodCkgfCAwOyB4IDwgeEVuZDsgeCsrLCBwaXhJbmRleCArPSBDUENvbG9yQm1wLkJZVEVTX1BFUl9QSVhFTCkge1xuICAgICAgICAgICAgdGhpcy5kYXRhW3BpeEluZGV4ICsgQ1BDb2xvckJtcC5SRURfQllURV9PRkZTRVRdID0gcjtcbiAgICAgICAgICAgIHRoaXMuZGF0YVtwaXhJbmRleCArIENQQ29sb3JCbXAuR1JFRU5fQllURV9PRkZTRVRdID0gZztcbiAgICAgICAgICAgIHRoaXMuZGF0YVtwaXhJbmRleCArIENQQ29sb3JCbXAuQkxVRV9CWVRFX09GRlNFVF0gPSBiO1xuICAgICAgICAgICAgdGhpcy5kYXRhW3BpeEluZGV4ICsgQ1BDb2xvckJtcC5BTFBIQV9CWVRFX09GRlNFVF0gPSBhO1xuXG4gICAgICAgICAgICByICs9IHJTdGVwO1xuICAgICAgICAgICAgZyArPSBnU3RlcDtcbiAgICAgICAgICAgIGIgKz0gYlN0ZXA7XG4gICAgICAgICAgICBhICs9IGFTdGVwO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gVGhlIHNlY3Rpb24gYWZ0ZXIgdGhlIGVuZCBvZiB0aGUgZ3JhZGllbnRcbiAgICAgICAgZm9yICg7IHggPCByZWN0LnJpZ2h0OyB4KyssIHBpeEluZGV4ICs9IENQQ29sb3JCbXAuQllURVNfUEVSX1BJWEVMKSB7XG4gICAgICAgICAgICB0aGlzLmRhdGFbcGl4SW5kZXggKyBDUENvbG9yQm1wLlJFRF9CWVRFX09GRlNFVF0gPSB0b0NvbG9yLnI7XG4gICAgICAgICAgICB0aGlzLmRhdGFbcGl4SW5kZXggKyBDUENvbG9yQm1wLkdSRUVOX0JZVEVfT0ZGU0VUXSA9IHRvQ29sb3IuZztcbiAgICAgICAgICAgIHRoaXMuZGF0YVtwaXhJbmRleCArIENQQ29sb3JCbXAuQkxVRV9CWVRFX09GRlNFVF0gPSB0b0NvbG9yLmI7XG4gICAgICAgICAgICB0aGlzLmRhdGFbcGl4SW5kZXggKyBDUENvbG9yQm1wLkFMUEhBX0JZVEVfT0ZGU0VUXSA9IHRvQ29sb3IuYTtcbiAgICAgICAgfVxuICAgIH1cbn07XG5cbi8qKlxuICogUmVwbGFjZSB0aGUgcGl4ZWxzIGluIHRoZSBnaXZlbiByZWN0IHdpdGggdGhlIGdpdmVuIHZlcnRpY2FsIGdyYWRpZW50LlxuICpcbiAqIEBwYXJhbSByZWN0IENQUmVjdFxuICogQHBhcmFtIGZyb21ZIGludFxuICogQHBhcmFtIHRvWSBpbnRcbiAqIEBwYXJhbSBncmFkaWVudFBvaW50cyBpbnRbXVxuICovXG5DUExheWVyLnByb3RvdHlwZS5ncmFkaWVudFZlcnRSZXBsYWNlID0gZnVuY3Rpb24ocmVjdCwgZnJvbVksIHRvWSwgZ3JhZGllbnRQb2ludHMpIHtcbiAgICB2YXJcbiAgICAgICAgZnJvbUNvbG9yID0ge1xuICAgICAgICAgICAgcjogKGdyYWRpZW50UG9pbnRzWzBdID4+IDE2KSAmIDB4RkYsXG4gICAgICAgICAgICBnOiAoZ3JhZGllbnRQb2ludHNbMF0gPj4gOCkgJiAweEZGLFxuICAgICAgICAgICAgYjogZ3JhZGllbnRQb2ludHNbMF0gJiAweEZGLFxuICAgICAgICAgICAgYTogKGdyYWRpZW50UG9pbnRzWzBdID4+IDI0KSAmIDB4RkZcbiAgICAgICAgfSxcbiAgICAgICAgdG9Db2xvciA9IHtcbiAgICAgICAgICAgIHI6IChncmFkaWVudFBvaW50c1sxXSA+PiAxNikgJiAweEZGLFxuICAgICAgICAgICAgZzogKGdyYWRpZW50UG9pbnRzWzFdID4+IDgpICYgMHhGRixcbiAgICAgICAgICAgIGI6IGdyYWRpZW50UG9pbnRzWzFdICYgMHhGRixcbiAgICAgICAgICAgIGE6IChncmFkaWVudFBvaW50c1sxXSA+PiAyNCkgJiAweEZGXG4gICAgICAgIH0sXG5cbiAgICAgICAgeVN0cmlkZSA9ICh0aGlzLndpZHRoIC0gcmVjdC5nZXRXaWR0aCgpKSAqIENQQ29sb3JCbXAuQllURVNfUEVSX1BJWEVMLFxuICAgICAgICBwaXhJbmRleCA9IHRoaXMub2Zmc2V0T2ZQaXhlbChyZWN0LmxlZnQsIHJlY3QudG9wKSB8IDAsXG4gICAgICAgIHcgPSAocmVjdC5yaWdodCAtIHJlY3QubGVmdCkgfCAwO1xuXG4gICAgaWYgKHRvWSA8IGZyb21ZKSB7XG4gICAgICAgIHZhclxuICAgICAgICAgICAgdGVtcCA9IHRvWTtcbiAgICAgICAgdG9ZID0gZnJvbVk7XG4gICAgICAgIGZyb21ZID0gdGVtcDtcblxuICAgICAgICB0ZW1wID0gZnJvbUNvbG9yO1xuICAgICAgICBmcm9tQ29sb3IgPSB0b0NvbG9yO1xuICAgICAgICB0b0NvbG9yID0gdGVtcDtcbiAgICB9XG5cbiAgICB2YXJcbiAgICAgICAgeSA9IHJlY3QudG9wO1xuXG4gICAgLy8gVGhlIHNvbGlkIGNvbG9yIHNlY3Rpb24gYmVmb3JlIHRoZSBzdGFydCBvZiB0aGUgZ3JhZGllbnRcbiAgICBmb3IgKHZhciB5RW5kID0gTWF0aC5taW4ocmVjdC5ib3R0b20sIGZyb21ZKSB8IDA7IHkgPCB5RW5kOyB5KyssIHBpeEluZGV4ICs9IHlTdHJpZGUpIHtcbiAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCB3OyB4KyssIHBpeEluZGV4ICs9IENQQ29sb3JCbXAuQllURVNfUEVSX1BJWEVMKSB7XG4gICAgICAgICAgICB0aGlzLmRhdGFbcGl4SW5kZXggKyBDUENvbG9yQm1wLlJFRF9CWVRFX09GRlNFVF0gPSBmcm9tQ29sb3IucjtcbiAgICAgICAgICAgIHRoaXMuZGF0YVtwaXhJbmRleCArIENQQ29sb3JCbXAuR1JFRU5fQllURV9PRkZTRVRdID0gZnJvbUNvbG9yLmc7XG4gICAgICAgICAgICB0aGlzLmRhdGFbcGl4SW5kZXggKyBDUENvbG9yQm1wLkJMVUVfQllURV9PRkZTRVRdID0gZnJvbUNvbG9yLmI7XG4gICAgICAgICAgICB0aGlzLmRhdGFbcGl4SW5kZXggKyBDUENvbG9yQm1wLkFMUEhBX0JZVEVfT0ZGU0VUXSA9IGZyb21Db2xvci5hO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gSW5zaWRlIHRoZSBncmFkaWVudFxuICAgIHZhclxuICAgICAgICBncmFkaWVudFJhbmdlID0gKHRvWSAtIGZyb21ZKSB8IDAsXG4gICAgICAgIHJTdGVwID0gKHRvQ29sb3IuciAtIGZyb21Db2xvci5yKSAvIGdyYWRpZW50UmFuZ2UsXG4gICAgICAgIGdTdGVwID0gKHRvQ29sb3IuZyAtIGZyb21Db2xvci5nKSAvIGdyYWRpZW50UmFuZ2UsXG4gICAgICAgIGJTdGVwID0gKHRvQ29sb3IuYiAtIGZyb21Db2xvci5iKSAvIGdyYWRpZW50UmFuZ2UsXG4gICAgICAgIGFTdGVwID0gKHRvQ29sb3IuYSAtIGZyb21Db2xvci5hKSAvIGdyYWRpZW50UmFuZ2UsXG4gICAgICAgIFxuICAgICAgICBqdW1wID0gTWF0aC5tYXgoeSAtIGZyb21ZLCAwKSxcbiAgICAgICAgciA9IGZyb21Db2xvci5yICsgclN0ZXAgKiBqdW1wLFxuICAgICAgICBnID0gZnJvbUNvbG9yLmcgKyBnU3RlcCAqIGp1bXAsXG4gICAgICAgIGIgPSBmcm9tQ29sb3IuYiArIGJTdGVwICoganVtcCxcbiAgICAgICAgYSA9IGZyb21Db2xvci5hICsgYVN0ZXAgKiBqdW1wO1xuXG4gICAgZm9yICh2YXIgeUVuZCA9IE1hdGgubWluKHJlY3QuYm90dG9tLCB0b1kpIHwgMDsgeSA8IHlFbmQ7IHkrKywgcGl4SW5kZXggKz0geVN0cmlkZSkge1xuICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IHc7IHgrKywgcGl4SW5kZXggKz0gQ1BDb2xvckJtcC5CWVRFU19QRVJfUElYRUwpIHtcbiAgICAgICAgICAgIHRoaXMuZGF0YVtwaXhJbmRleCArIENQQ29sb3JCbXAuUkVEX0JZVEVfT0ZGU0VUXSA9IHI7XG4gICAgICAgICAgICB0aGlzLmRhdGFbcGl4SW5kZXggKyBDUENvbG9yQm1wLkdSRUVOX0JZVEVfT0ZGU0VUXSA9IGc7XG4gICAgICAgICAgICB0aGlzLmRhdGFbcGl4SW5kZXggKyBDUENvbG9yQm1wLkJMVUVfQllURV9PRkZTRVRdID0gYjtcbiAgICAgICAgICAgIHRoaXMuZGF0YVtwaXhJbmRleCArIENQQ29sb3JCbXAuQUxQSEFfQllURV9PRkZTRVRdID0gYTtcbiAgICAgICAgfVxuXG4gICAgICAgIHIgKz0gclN0ZXA7XG4gICAgICAgIGcgKz0gZ1N0ZXA7XG4gICAgICAgIGIgKz0gYlN0ZXA7XG4gICAgICAgIGEgKz0gYVN0ZXA7XG4gICAgfVxuXG4gICAgLy8gVGhlIHNlY3Rpb24gYWZ0ZXIgdGhlIGVuZCBvZiB0aGUgZ3JhZGllbnRcbiAgICBmb3IgKDsgeSA8IHJlY3QuYm90dG9tOyB5KyssIHBpeEluZGV4ICs9IHlTdHJpZGUpIHtcbiAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCB3OyB4KyssIHBpeEluZGV4ICs9IENQQ29sb3JCbXAuQllURVNfUEVSX1BJWEVMKSB7XG4gICAgICAgICAgICB0aGlzLmRhdGFbcGl4SW5kZXggKyBDUENvbG9yQm1wLlJFRF9CWVRFX09GRlNFVF0gPSB0b0NvbG9yLnI7XG4gICAgICAgICAgICB0aGlzLmRhdGFbcGl4SW5kZXggKyBDUENvbG9yQm1wLkdSRUVOX0JZVEVfT0ZGU0VUXSA9IHRvQ29sb3IuZztcbiAgICAgICAgICAgIHRoaXMuZGF0YVtwaXhJbmRleCArIENQQ29sb3JCbXAuQkxVRV9CWVRFX09GRlNFVF0gPSB0b0NvbG9yLmI7XG4gICAgICAgICAgICB0aGlzLmRhdGFbcGl4SW5kZXggKyBDUENvbG9yQm1wLkFMUEhBX0JZVEVfT0ZGU0VUXSA9IHRvQ29sb3IuYTtcbiAgICAgICAgfVxuICAgIH1cbn07XG5cbi8qKlxuICogUmVwbGFjZSB0aGUgcGl4ZWxzIGluIHRoZSBnaXZlbiByZWN0IHdpdGggdGhlIGdpdmVuIGdyYWRpZW50LlxuICpcbiAqIEBwYXJhbSByZWN0IENQUmVjdFxuICogQHBhcmFtIGZyb21YIGludFxuICogQHBhcmFtIGZyb21ZIGludFxuICogQHBhcmFtIHRvWCBpbnRcbiAqIEBwYXJhbSB0b1kgaW50XG4gKiBAcGFyYW0gZ3JhZGllbnRQb2ludHMgaW50W11cbiAqL1xuQ1BMYXllci5wcm90b3R5cGUuZ3JhZGllbnRSZXBsYWNlID0gZnVuY3Rpb24ocmVjdCwgZnJvbVgsIGZyb21ZLCB0b1gsIHRvWSwgZ3JhZGllbnRQb2ludHMpIHtcbiAgICB2YXJcbiAgICAgICAgeVN0cmlkZSA9ICh0aGlzLndpZHRoIC0gcmVjdC5nZXRXaWR0aCgpKSAqIENQQ29sb3JCbXAuQllURVNfUEVSX1BJWEVMLFxuICAgICAgICBwaXhJbmRleCA9IHRoaXMub2Zmc2V0T2ZQaXhlbChyZWN0LmxlZnQsIHJlY3QudG9wKSB8IDAsXG4gICAgICAgIHcgPSAocmVjdC5yaWdodCAtIHJlY3QubGVmdCkgfCAwLFxuXG4gICAgICAgIGZyb21Db2xvciA9IHtcbiAgICAgICAgICAgIHI6IChncmFkaWVudFBvaW50c1swXSA+PiAxNikgJiAweEZGLFxuICAgICAgICAgICAgZzogKGdyYWRpZW50UG9pbnRzWzBdID4+IDgpICYgMHhGRixcbiAgICAgICAgICAgIGI6IGdyYWRpZW50UG9pbnRzWzBdICYgMHhGRixcbiAgICAgICAgICAgIGE6IChncmFkaWVudFBvaW50c1swXSA+PiAyNCkgJiAweEZGXG4gICAgICAgIH0sXG4gICAgICAgIHRvQ29sb3IgPSB7XG4gICAgICAgICAgICByOiAoZ3JhZGllbnRQb2ludHNbMV0gPj4gMTYpICYgMHhGRixcbiAgICAgICAgICAgIGc6IChncmFkaWVudFBvaW50c1sxXSA+PiA4KSAmIDB4RkYsXG4gICAgICAgICAgICBiOiBncmFkaWVudFBvaW50c1sxXSAmIDB4RkYsXG4gICAgICAgICAgICBhOiAoZ3JhZGllbnRQb2ludHNbMV0gPj4gMjQpICYgMHhGRlxuICAgICAgICB9LFxuXG4gICAgLy8gSG93IG1hbnkgcGl4ZWxzIHZlcnRpY2FsbHkgZG9lcyB0aGUgZ3JhZGllbnQgc2VxdWVuY2UgY29tcGxldGUgb3ZlciAoK2luZmluaXR5IGZvciBob3Jpem9udGFsIGdyYWRpZW50cyEpXG4gICAgICAgIHZlcnRSYW5nZSA9ICh0b1kgLSBmcm9tWSkgKyAoKHRvWCAtIGZyb21YKSAqICh0b1ggLSBmcm9tWCkpIC8gKHRvWSAtIGZyb21ZKSxcbiAgICAvLyBTYW1lIGZvciBob3Jpem9udGFsXG4gICAgICAgIGhvcnpSYW5nZSA9ICh0b1ggLSBmcm9tWCkgKyAoKHRvWSAtIGZyb21ZKSAqICh0b1kgLSBmcm9tWSkpIC8gKHRvWCAtIGZyb21YKSxcbiAgICAgICAgaG9yelN0ZXAgPSAxIC8gaG9yelJhbmdlO1xuXG4gICAgZm9yICh2YXIgeSA9IHJlY3QudG9wOyB5IDwgcmVjdC5ib3R0b207IHkrKywgcGl4SW5kZXggKz0geVN0cmlkZSkge1xuICAgICAgICB2YXJcbiAgICAgICAgLy8gVGhlIHBvc2l0aW9uIHRoZSByb3cgc3RhcnRzIGF0IGluIHRoZSBncmFkaWVudCBbMC4wIC4uLiAxLjApXG4gICAgICAgICAgICBwcm9wID0gKHJlY3QubGVmdCAtIGZyb21YKSAvIGhvcnpSYW5nZSArICh5IC0gZnJvbVkpIC8gdmVydFJhbmdlO1xuXG4gICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgdzsgeCsrLCBwaXhJbmRleCArPSBDUENvbG9yQm1wLkJZVEVTX1BFUl9QSVhFTCkge1xuICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgcHJvcENsYW1wZWQgPSBNYXRoLm1pbihNYXRoLm1heChwcm9wLCAwLjApLCAxLjApLFxuICAgICAgICAgICAgICAgIGludlByb3BDbGFtcGVkID0gMSAtIHByb3BDbGFtcGVkO1xuXG4gICAgICAgICAgICB0aGlzLmRhdGFbcGl4SW5kZXggKyBDUENvbG9yQm1wLlJFRF9CWVRFX09GRlNFVF0gPSBmcm9tQ29sb3IuciAqIGludlByb3BDbGFtcGVkICsgdG9Db2xvci5yICogcHJvcENsYW1wZWQ7XG4gICAgICAgICAgICB0aGlzLmRhdGFbcGl4SW5kZXggKyBDUENvbG9yQm1wLkdSRUVOX0JZVEVfT0ZGU0VUXSA9IGZyb21Db2xvci5nICogaW52UHJvcENsYW1wZWQgKyB0b0NvbG9yLmcgKiBwcm9wQ2xhbXBlZDtcbiAgICAgICAgICAgIHRoaXMuZGF0YVtwaXhJbmRleCArIENQQ29sb3JCbXAuQkxVRV9CWVRFX09GRlNFVF0gPSBmcm9tQ29sb3IuYiAqIGludlByb3BDbGFtcGVkICsgdG9Db2xvci5iICogcHJvcENsYW1wZWQ7XG4gICAgICAgICAgICB0aGlzLmRhdGFbcGl4SW5kZXggKyBDUENvbG9yQm1wLkFMUEhBX0JZVEVfT0ZGU0VUXSA9IGZyb21Db2xvci5hICogaW52UHJvcENsYW1wZWQgKyB0b0NvbG9yLmEgKiBwcm9wQ2xhbXBlZDtcblxuICAgICAgICAgICAgcHJvcCArPSBob3J6U3RlcDtcbiAgICAgICAgfVxuICAgIH1cbn07XG5cbi8qKlxuICogQWxwaGEgYmxlbmQgdGhlIGdpdmVuIGdyYWRpZW50IG9udG8gdGhlIHBpeGVscyBpbiB0aGUgZ2l2ZW4gcmVjdC5cbiAqXG4gKiBAcGFyYW0gcmVjdCBDUFJlY3RcbiAqIEBwYXJhbSBmcm9tWCBpbnRcbiAqIEBwYXJhbSBmcm9tWSBpbnRcbiAqIEBwYXJhbSB0b1ggaW50XG4gKiBAcGFyYW0gdG9ZIGludFxuICogQHBhcmFtIGdyYWRpZW50UG9pbnRzIGludFtdXG4gKi9cbkNQTGF5ZXIucHJvdG90eXBlLmdyYWRpZW50QWxwaGEgPSBmdW5jdGlvbihyZWN0LCBmcm9tWCwgZnJvbVksIHRvWCwgdG9ZLCBncmFkaWVudFBvaW50cykge1xuICAgIHZhclxuICAgICAgICB5U3RyaWRlID0gKHRoaXMud2lkdGggLSByZWN0LmdldFdpZHRoKCkpICogQ1BDb2xvckJtcC5CWVRFU19QRVJfUElYRUwsXG4gICAgICAgIHBpeEluZGV4ID0gdGhpcy5vZmZzZXRPZlBpeGVsKHJlY3QubGVmdCwgcmVjdC50b3ApIHwgMCxcbiAgICAgICAgdyA9IChyZWN0LnJpZ2h0IC0gcmVjdC5sZWZ0KSB8IDAsXG5cbiAgICAgICAgZnJvbUNvbG9yID0ge1xuICAgICAgICAgICAgcjogKGdyYWRpZW50UG9pbnRzWzBdID4+IDE2KSAmIDB4RkYsXG4gICAgICAgICAgICBnOiAoZ3JhZGllbnRQb2ludHNbMF0gPj4gOCkgJiAweEZGLFxuICAgICAgICAgICAgYjogZ3JhZGllbnRQb2ludHNbMF0gJiAweEZGLFxuICAgICAgICAgICAgYTogKGdyYWRpZW50UG9pbnRzWzBdID4+IDI0KSAmIDB4RkZcbiAgICAgICAgfSxcbiAgICAgICAgdG9Db2xvciA9IHtcbiAgICAgICAgICAgIHI6IChncmFkaWVudFBvaW50c1sxXSA+PiAxNikgJiAweEZGLFxuICAgICAgICAgICAgZzogKGdyYWRpZW50UG9pbnRzWzFdID4+IDgpICYgMHhGRixcbiAgICAgICAgICAgIGI6IGdyYWRpZW50UG9pbnRzWzFdICYgMHhGRixcbiAgICAgICAgICAgIGE6IChncmFkaWVudFBvaW50c1sxXSA+PiAyNCkgJiAweEZGXG4gICAgICAgIH0sXG5cbiAgICAvLyBIb3cgbWFueSBwaXhlbHMgdmVydGljYWxseSBkb2VzIHRoZSBncmFkaWVudCBzZXF1ZW5jZSBjb21wbGV0ZSBvdmVyICgraW5maW5pdHkgZm9yIGhvcml6b250YWwgZ3JhZGllbnRzISlcbiAgICAgICAgdmVydFJhbmdlID0gKHRvWSAtIGZyb21ZKSArICgodG9YIC0gZnJvbVgpICogKHRvWCAtIGZyb21YKSkgLyAodG9ZIC0gZnJvbVkpLFxuICAgIC8vIFNhbWUgZm9yIGhvcml6b250YWxcbiAgICAgICAgaG9yelJhbmdlID0gKHRvWCAtIGZyb21YKSArICgodG9ZIC0gZnJvbVkpICogKHRvWSAtIGZyb21ZKSkgLyAodG9YIC0gZnJvbVgpLFxuICAgICAgICBob3J6U3RlcCA9IDEgLyBob3J6UmFuZ2U7XG5cbiAgICBmb3IgKHZhciB5ID0gcmVjdC50b3A7IHkgPCByZWN0LmJvdHRvbTsgeSsrLCBwaXhJbmRleCArPSB5U3RyaWRlKSB7XG4gICAgICAgIHZhclxuICAgICAgICAvLyBUaGUgcG9zaXRpb24gdGhlIHJvdyBzdGFydHMgYXQgaW4gdGhlIGdyYWRpZW50IFswLjAgLi4uIDEuMClcbiAgICAgICAgICAgIHByb3AgPSAocmVjdC5sZWZ0IC0gZnJvbVgpIC8gaG9yelJhbmdlICsgKHkgLSBmcm9tWSkgLyB2ZXJ0UmFuZ2U7XG5cbiAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCB3OyB4KyssIHBpeEluZGV4ICs9IENQQ29sb3JCbXAuQllURVNfUEVSX1BJWEVMKSB7XG4gICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICBwcm9wQ2xhbXBlZCA9IE1hdGgubWluKE1hdGgubWF4KHByb3AsIDAuMCksIDEuMCksXG4gICAgICAgICAgICAgICAgaW52UHJvcENsYW1wZWQgPSAxIC0gcHJvcENsYW1wZWQsXG5cbiAgICAgICAgICAgICAgICAvLyBUaGUgZ3JhZGllbnQgY29sb3IgdG8gZHJhd1xuICAgICAgICAgICAgICAgIHIgPSBmcm9tQ29sb3IuciAqIGludlByb3BDbGFtcGVkICsgdG9Db2xvci5yICogcHJvcENsYW1wZWQsXG4gICAgICAgICAgICAgICAgZyA9IGZyb21Db2xvci5nICogaW52UHJvcENsYW1wZWQgKyB0b0NvbG9yLmcgKiBwcm9wQ2xhbXBlZCxcbiAgICAgICAgICAgICAgICBiID0gZnJvbUNvbG9yLmIgKiBpbnZQcm9wQ2xhbXBlZCArIHRvQ29sb3IuYiAqIHByb3BDbGFtcGVkLFxuICAgICAgICAgICAgICAgIGEgPSBmcm9tQ29sb3IuYSAqIGludlByb3BDbGFtcGVkICsgdG9Db2xvci5hICogcHJvcENsYW1wZWQsXG5cbiAgICAgICAgICAgICAgICBhbHBoYTIgPSB0aGlzLmRhdGFbcGl4SW5kZXggKyBBTFBIQV9CWVRFX09GRlNFVF0sXG4gICAgICAgICAgICAgICAgbmV3QWxwaGEgPSAoYSArIGFscGhhMiAtIGEgKiBhbHBoYTIgLyAyNTUpIHwgMDtcblxuICAgICAgICAgICAgaWYgKG5ld0FscGhhID4gMCkge1xuICAgICAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgICAgICByZWFsQWxwaGEgPSAoYSAqIDI1NSAvIG5ld0FscGhhKSB8IDAsXG4gICAgICAgICAgICAgICAgICAgIGludkFscGhhID0gMjU1IC0gcmVhbEFscGhhO1xuXG4gICAgICAgICAgICAgICAgdGhpcy5kYXRhW3BpeEluZGV4ICsgQ1BDb2xvckJtcC5SRURfQllURV9PRkZTRVRdID0gICAoKHIgKiByZWFsQWxwaGEgKyB0aGlzLmRhdGFbcGl4SW5kZXggKyBDUENvbG9yQm1wLlJFRF9CWVRFX09GRlNFVF0gKiBpbnZBbHBoYSkgLyAyNTUpIHwgMDtcbiAgICAgICAgICAgICAgICB0aGlzLmRhdGFbcGl4SW5kZXggKyBDUENvbG9yQm1wLkdSRUVOX0JZVEVfT0ZGU0VUXSA9ICgoZyAqIHJlYWxBbHBoYSArIHRoaXMuZGF0YVtwaXhJbmRleCArIENQQ29sb3JCbXAuR1JFRU5fQllURV9PRkZTRVRdICogaW52QWxwaGEpIC8gMjU1KSB8IDA7XG4gICAgICAgICAgICAgICAgdGhpcy5kYXRhW3BpeEluZGV4ICsgQ1BDb2xvckJtcC5CTFVFX0JZVEVfT0ZGU0VUXSA9ICAoKGIgKiByZWFsQWxwaGEgKyB0aGlzLmRhdGFbcGl4SW5kZXggKyBDUENvbG9yQm1wLkJMVUVfQllURV9PRkZTRVRdICogaW52QWxwaGEpIC8gMjU1KSB8IDA7XG4gICAgICAgICAgICAgICAgdGhpcy5kYXRhW3BpeEluZGV4ICsgQ1BDb2xvckJtcC5BTFBIQV9CWVRFX09GRlNFVF0gPSBuZXdBbHBoYTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcHJvcCArPSBob3J6U3RlcDtcbiAgICAgICAgfVxuICAgIH1cbn07XG5cbi8qKlxuICogRHJhdyBhIGdyYWRpZW50IHdoaWNoIGJlZ2lucyBhdCBmcm9tWCwgZnJvbVkgYW5kIGVuZHMgYXQgdG9YLCB0b1ksIGNsaXBwZWQgdG8gdGhlIGdpdmVuIHJlY3QsIG9uIHRvcCBvZiB0aGVcbiAqIHBpeGVscyBpbiB0aGUgbGF5ZXIuXG4gKlxuICogQHBhcmFtIGdyYWRpZW50UG9pbnRzIEFycmF5IHdpdGggZ3JhZGllbnQgY29sb3JzIChBUkdCIGludGVnZXJzKVxuICogQHBhcmFtIHJlY3QgQ1BSZWN0XG4gKiBAcGFyYW0gcmVwbGFjZSBTZXQgdG8gdHJ1ZSB0byByZXBsYWNlIHRoZSBwaXhlbHMgaW4gdGhlIGxheWVyIHJhdGhlciB0aGFuIGJsZW5kaW5nIHRoZSBncmFkaWVudCBvbiB0b3Agb2YgdGhlbS5cbiAqL1xuQ1BMYXllci5wcm90b3R5cGUuZ3JhZGllbnQgPSBmdW5jdGlvbihyZWN0LCBmcm9tWCwgZnJvbVksIHRvWCwgdG9ZLCBncmFkaWVudFBvaW50cywgcmVwbGFjZSkge1xuICAgIHJlY3QgPSB0aGlzLmdldEJvdW5kcygpLmNsaXAocmVjdCk7XG5cbiAgICAvLyBEZWdlbmVyYXRlIGNhc2VcbiAgICBpZiAoZnJvbVggPT0gdG9YICYmIGZyb21ZID09IHRvWSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gT3BhcXVlIGJsZW5kIGlmIHBvc3NpYmxlXG4gICAgaWYgKHJlcGxhY2UgfHwgZ3JhZGllbnRQb2ludHNbMF0gPj4+IDI0ID09IDI1NSAmJiBncmFkaWVudFBvaW50c1sxXSA+Pj4gMjQgPT0gMjU1KSB7XG4gICAgICAgIGlmIChmcm9tWCA9PSB0b1gpIHtcbiAgICAgICAgICAgIHRoaXMuZ3JhZGllbnRWZXJ0UmVwbGFjZShyZWN0LCBmcm9tWSwgdG9ZLCBncmFkaWVudFBvaW50cyk7XG4gICAgICAgIH0gZWxzZSBpZiAoZnJvbVkgPT0gdG9ZKSB7XG4gICAgICAgICAgICB0aGlzLmdyYWRpZW50SG9yelJlcGxhY2UocmVjdCwgZnJvbVgsIHRvWCwgZ3JhZGllbnRQb2ludHMpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5ncmFkaWVudFJlcGxhY2UocmVjdCwgZnJvbVgsIGZyb21ZLCB0b1gsIHRvWSwgZ3JhZGllbnRQb2ludHMpO1xuICAgICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5ncmFkaWVudEFscGhhKHJlY3QsIGZyb21YLCBmcm9tWSwgdG9YLCB0b1ksIGdyYWRpZW50UG9pbnRzKTtcbiAgICB9XG59O1xuXG4vKipcbiAqIEBwYXJhbSByIENQUmVjdFxuICovXG5DUExheWVyLnByb3RvdHlwZS5maWxsV2l0aENvbG9yTm9pc2UgPSBmdW5jdGlvbihyZWN0KSB7XG4gICAgcmVjdCA9IHRoaXMuZ2V0Qm91bmRzKCkuY2xpcChyZWN0KTtcblxuICAgIHZhclxuICAgICAgICB2YWx1ZSxcbiAgICAgICAgeVN0cmlkZSA9ICh0aGlzLndpZHRoIC0gcmVjdC5nZXRXaWR0aCgpKSAqIENQQ29sb3JCbXAuQllURVNfUEVSX1BJWEVMLFxuICAgICAgICBcbiAgICAgICAgcGl4SW5kZXggPSB0aGlzLm9mZnNldE9mUGl4ZWwocmVjdC5sZWZ0LCByZWN0LnRvcCk7XG5cbiAgICBmb3IgKHZhciB5ID0gcmVjdC50b3A7IHkgPCByZWN0LmJvdHRvbTsgeSsrLCBwaXhJbmRleCArPSB5U3RyaWRlKSB7XG4gICAgICAgIGZvciAodmFyIHggPSByZWN0LmxlZnQ7IHggPCByZWN0LnJpZ2h0OyB4KyssIHBpeEluZGV4ICs9IENQQ29sb3JCbXAuQllURVNfUEVSX1BJWEVMKSB7XG4gICAgICAgICAgICB2YWx1ZSA9IChNYXRoLnJhbmRvbSgpICogMHgxMDAwMDAwKSB8IDA7XG5cbiAgICAgICAgICAgIHRoaXMuZGF0YVtwaXhJbmRleCArIENQQ29sb3JCbXAuUkVEX0JZVEVfT0ZGU0VUXSA9ICh2YWx1ZSA+PiAxNikgJiAweEZGO1xuICAgICAgICAgICAgdGhpcy5kYXRhW3BpeEluZGV4ICsgQ1BDb2xvckJtcC5HUkVFTl9CWVRFX09GRlNFVF0gPSAodmFsdWUgPj4gOCkgJiAweEZGO1xuICAgICAgICAgICAgdGhpcy5kYXRhW3BpeEluZGV4ICsgQ1BDb2xvckJtcC5CTFVFX0JZVEVfT0ZGU0VUXSA9IHZhbHVlICYgMHhGRjtcbiAgICAgICAgICAgIHRoaXMuZGF0YVtwaXhJbmRleCArIENQQ29sb3JCbXAuQUxQSEFfQllURV9PRkZTRVRdID0gMHhGRjtcbiAgICAgICAgfVxuICAgIH1cbn07XG5cbi8qKlxuICogQHBhcmFtIHIgQ1BSZWN0XG4gKi9cbkNQTGF5ZXIucHJvdG90eXBlLmludmVydCA9IGZ1bmN0aW9uKHJlY3QpIHtcbiAgICByZWN0ID0gdGhpcy5nZXRCb3VuZHMoKS5jbGlwKHJlY3QpO1xuXG4gICAgdmFyXG4gICAgICAgIHlTdHJpZGUgPSAodGhpcy53aWR0aCAtIHJlY3QuZ2V0V2lkdGgoKSkgKiBDUENvbG9yQm1wLkJZVEVTX1BFUl9QSVhFTCxcbiAgICAgICAgXG4gICAgICAgIHBpeEluZGV4ID0gdGhpcy5vZmZzZXRPZlBpeGVsKHJlY3QubGVmdCwgcmVjdC50b3ApO1xuXG4gICAgZm9yICh2YXIgeSA9IHJlY3QudG9wOyB5IDwgcmVjdC5ib3R0b207IHkrKywgcGl4SW5kZXggKz0geVN0cmlkZSkge1xuICAgICAgICBmb3IgKHZhciB4ID0gcmVjdC5sZWZ0OyB4IDwgcmVjdC5yaWdodDsgeCsrLCBwaXhJbmRleCArPSBDUENvbG9yQm1wLkJZVEVTX1BFUl9QSVhFTCkge1xuICAgICAgICAgICAgdGhpcy5kYXRhW3BpeEluZGV4ICsgQ1BDb2xvckJtcC5SRURfQllURV9PRkZTRVRdIF49IDB4RkY7XG4gICAgICAgICAgICB0aGlzLmRhdGFbcGl4SW5kZXggKyBDUENvbG9yQm1wLkdSRUVOX0JZVEVfT0ZGU0VUXSBePSAweEZGO1xuICAgICAgICAgICAgdGhpcy5kYXRhW3BpeEluZGV4ICsgQ1BDb2xvckJtcC5CTFVFX0JZVEVfT0ZGU0VUXSBePSAweEZGO1xuICAgICAgICB9XG4gICAgfVxufTtcblxuQ1BMYXllci5wcm90b3R5cGUuZ2V0QWxwaGEgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5hbHBoYTtcbn07XG5cbkNQTGF5ZXIucHJvdG90eXBlLmdldEJsZW5kTW9kZSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLmJsZW5kTW9kZTtcbn07XG5cbkNQTGF5ZXIucHJvdG90eXBlLmNvcHlGcm9tID0gZnVuY3Rpb24obGF5ZXIpIHtcbiAgICB0aGlzLm5hbWUgPSBsYXllci5uYW1lO1xuICAgIHRoaXMuYmxlbmRNb2RlID0gbGF5ZXIuYmxlbmRNb2RlO1xuICAgIHRoaXMuYWxwaGEgPSBsYXllci5hbHBoYTtcbiAgICB0aGlzLnZpc2libGUgPSBsYXllci52aXNpYmxlO1xuXG4gICAgdGhpcy5jb3B5RGF0YUZyb20obGF5ZXIpO1xufTtcblxuLy8gRG8gd2UgaGF2ZSBhbnkgbm9uLW9wYXF1ZSBwaXhlbHMgaW4gdGhlIGVudGlyZSBsYXllcj9cbkNQTGF5ZXIucHJvdG90eXBlLmhhc0FscGhhID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKHRoaXMuYWxwaGEgIT0gMTAwKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBcbiAgICB2YXIgXG4gICAgICAgIHBpeEluZGV4ID0gQUxQSEFfQllURV9PRkZTRVQ7XG4gICAgXG4gICAgZm9yICh2YXIgeSA9IDA7IHkgPCBoZWlnaHQ7IHkrKykge1xuICAgICAgICB2YXJcbiAgICAgICAgICAgIGFscGhhQW5kZWQgPSAweEZGO1xuICAgICAgICBcbiAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCB0aGlzLndpZHRoOyB4KyssIHBpeEluZGV4ICs9IEJZVEVTX1BFUl9QSVhFTCkge1xuICAgICAgICAgICAgYWxwaGFBbmRlZCAmPSB0aGlzLmRhdGFbcGl4SW5kZXhdO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBPbmx5IGNoZWNrIG9uY2UgcGVyIHJvdyBpbiBvcmRlciB0byByZWR1Y2UgYnJhbmNoaW5nIGluIHRoZSBpbm5lciBsb29wXG4gICAgICAgIGlmIChhbHBoYUFuZGVkICE9IDB4RkYpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIHJldHVybiBmYWxzZTtcbn07XG5cbi8vIERvIHdlIGhhdmUgYW55IHNlbWktdHJhbnNwYXJlbnQgcGl4ZWxzIGluIHRoZSBnaXZlbiByZWN0YW5nbGU/XG5DUExheWVyLnByb3RvdHlwZS5oYXNBbHBoYUluUmVjdCA9IGZ1bmN0aW9uKHJlY3QpIHtcbiAgICBpZiAodGhpcy5hbHBoYSAhPSAxMDApIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgcmVjdCA9IHRoaXMuZ2V0Qm91bmRzKCkuY2xpcChyZWN0KTtcblxuICAgIHZhciBcbiAgICAgICAgeVN0cmlkZSA9ICh0aGlzLndpZHRoIC0gcmVjdC5nZXRXaWR0aCgpKSAqIEJZVEVTX1BFUl9QSVhFTCxcbiAgICAgICAgcGl4SW5kZXggPSB0aGlzLm9mZnNldE9mUGl4ZWwocmVjdC5sZWZ0LCByZWN0LnRvcCkgKyBBTFBIQV9CWVRFX09GRlNFVDtcbiAgICBcbiAgICBmb3IgKHZhciB5ID0gcmVjdC50b3A7IHkgPCByZWN0LmJvdHRvbTsgeSsrLCBwaXhJbmRleCArPSB5U3RyaWRlKSB7XG4gICAgICAgIHZhclxuICAgICAgICAgICAgYWxwaGFBbmRlZCA9IDB4RkY7XG4gICAgICAgIFxuICAgICAgICBmb3IgKHZhciB4ID0gcmVjdC5sZWZ0OyB4IDwgcmVjdC5yaWdodDsgeCsrLCBwaXhJbmRleCArPSBCWVRFU19QRVJfUElYRUwpIHtcbiAgICAgICAgICAgIGFscGhhQW5kZWQgJj0gdGhpcy5kYXRhW3BpeEluZGV4XTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gT25seSBjaGVjayBvbmNlIHBlciByb3cgaW4gb3JkZXIgdG8gcmVkdWNlIGJyYW5jaGluZyBpbiB0aGUgaW5uZXIgbG9vcFxuICAgICAgICBpZiAoYWxwaGFBbmRlZCAhPSAweEZGKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBcbiAgICByZXR1cm4gZmFsc2U7XG59O1xuXG4vLyBSZXR1cm4gdGhlIGNhbnZhcyBJbWFnZURhdGEgdGhhdCBiYWNrcyB0aGlzIGxheWVyXG5DUExheWVyLnByb3RvdHlwZS5nZXRJbWFnZURhdGEgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5pbWFnZURhdGE7XG59O1xuXG5DUExheWVyLkxNX05PUk1BTCA9IDA7XG5DUExheWVyLkxNX01VTFRJUExZID0gMTtcbkNQTGF5ZXIuTE1fQUREID0gMjtcbkNQTGF5ZXIuTE1fU0NSRUVOID0gMztcbkNQTGF5ZXIuTE1fTElHSFRFTiA9IDQ7XG5DUExheWVyLkxNX0RBUktFTiA9IDU7XG5DUExheWVyLkxNX1NVQlRSQUNUID0gNjtcbkNQTGF5ZXIuTE1fRE9ER0UgPSA3O1xuQ1BMYXllci5MTV9CVVJOID0gODtcbkNQTGF5ZXIuTE1fT1ZFUkxBWSA9IDk7XG5DUExheWVyLkxNX0hBUkRMSUdIVCA9IDEwO1xuQ1BMYXllci5MTV9TT0ZUTElHSFQgPSAxMTtcbkNQTGF5ZXIuTE1fVklWSURMSUdIVCA9IDEyO1xuQ1BMYXllci5MTV9MSU5FQVJMSUdIVCA9IDEzO1xuQ1BMYXllci5MTV9QSU5MSUdIVCA9IDE0O1xuXG5DUExheWVyLnByb3RvdHlwZS5tYWtlTG9va1VwVGFibGVzID0gZnVuY3Rpb24oKSB7XG4gICAgLy8gViAtIFZeMiB0YWJsZVxuICAgIENQTGF5ZXIucHJvdG90eXBlLnNvZnRMaWdodExVVFNxdWFyZSA9IG5ldyBBcnJheSgyNTYpO1xuICAgIFxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgMjU2OyBpKyspIHtcbiAgICAgICAgdmFyIFxuICAgICAgICAgICAgdiA9IGkgLyAyNTUuO1xuICAgICAgICBcbiAgICAgICAgQ1BMYXllci5wcm90b3R5cGUuc29mdExpZ2h0TFVUU3F1YXJlW2ldID0gKCh2IC0gdiAqIHYpICogMjU1LikgfCAwO1xuICAgIH1cblxuICAgIC8vIHNxcnQoVikgLSBWIHRhYmxlXG4gICAgQ1BMYXllci5wcm90b3R5cGUuc29mdExpZ2h0TFVUU3F1YXJlUm9vdCA9IG5ldyBBcnJheSgyNTYpO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgMjU2OyBpKyspIHtcbiAgICAgICAgdmFyXG4gICAgICAgICAgICB2ID0gaSAvIDI1NS47XG4gICAgICAgIFxuICAgICAgICBDUExheWVyLnByb3RvdHlwZS5zb2Z0TGlnaHRMVVRTcXVhcmVSb290W2ldID0gKChNYXRoLnNxcnQodikgLSB2KSAqIDI1NS4pIHwgMDtcbiAgICB9XG59O1xuXG5DUExheWVyLnByb3RvdHlwZS5zZXRBbHBoYSA9IGZ1bmN0aW9uKGFscGhhKSB7XG4gICAgdGhpcy5hbHBoYSA9IGFscGhhO1xufTtcblxuQ1BMYXllci5wcm90b3R5cGUuc2V0QmxlbmRNb2RlID0gZnVuY3Rpb24oYmxlbmRNb2RlKSB7XG4gICAgdGhpcy5ibGVuZE1vZGUgPSBibGVuZE1vZGU7XG59O1xuXG5DUExheWVyLnByb3RvdHlwZS5nZXRBbHBoYSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLmFscGhhO1xufTtcblxuQ1BMYXllci5wcm90b3R5cGUuZ2V0QmxlbmRNb2RlID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuYmxlbmRNb2RlO1xufTtcblxuLyoqXG4gKiBSZXR1cm5zIGEgbmV3IGNhbnZhcyB3aXRoIGEgcm90YXRlZCB2ZXJzaW9uIG9mIHRoZSBnaXZlbiBjYW52YXMuXG4gKiBcbiAqIFJvdGF0aW9uIGlzIFswLi4zXSBhbmQgc2VsZWN0cyBhIG11bHRpcGxlIG9mIDkwIGRlZ3JlZXMgb2YgY2xvY2t3aXNlIHJvdGF0aW9uIHRvIGJlIGFwcGxpZWQuXG4gKi9cbmZ1bmN0aW9uIGdldFJvdGF0ZWRDYW52YXMoY2FudmFzLCByb3RhdGlvbikge1xuICAgIHJvdGF0aW9uID0gcm90YXRpb24gJSA0O1xuICAgIFxuICAgIGlmIChyb3RhdGlvbiA9PSAwKSB7XG4gICAgICAgIHJldHVybiBjYW52YXM7XG4gICAgfVxuICAgIFxuICAgIHZhclxuICAgICAgICByb3RhdGVkQ2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKSxcbiAgICAgICAgcm90YXRlZENhbnZhc0NvbnRleHQgPSByb3RhdGVkQ2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcblxuICAgIGlmIChyb3RhdGlvbiAlIDIgPT0gMCkge1xuICAgICAgICByb3RhdGVkQ2FudmFzLndpZHRoID0gY2FudmFzLndpZHRoO1xuICAgICAgICByb3RhdGVkQ2FudmFzLmhlaWdodCA9IGNhbnZhcy5oZWlnaHQ7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcm90YXRlZENhbnZhcy53aWR0aCA9IGNhbnZhcy5oZWlnaHQ7XG4gICAgICAgIHJvdGF0ZWRDYW52YXMuaGVpZ2h0ID0gY2FudmFzLndpZHRoO1xuICAgIH1cbiAgICBcbiAgICBzd2l0Y2ggKHJvdGF0aW9uKSB7XG4gICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgIC8vIDkwIGRlZ3JlZSBjbG9ja3dpc2U6XG4gICAgICAgICAgICByb3RhdGVkQ2FudmFzQ29udGV4dC5yb3RhdGUoTWF0aC5QSSAvIDIpO1xuICAgICAgICAgICAgcm90YXRlZENhbnZhc0NvbnRleHQuZHJhd0ltYWdlKGNhbnZhcywgMCwgLWNhbnZhcy5oZWlnaHQpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgIHJvdGF0ZWRDYW52YXNDb250ZXh0LnJvdGF0ZShNYXRoLlBJKTtcbiAgICAgICAgICAgIHJvdGF0ZWRDYW52YXNDb250ZXh0LmRyYXdJbWFnZShjYW52YXMsIC1jYW52YXMud2lkdGgsIC1jYW52YXMuaGVpZ2h0KTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAvLyA5MCBkZWdyZWUgY291bnRlci1jbG9ja3dpc2U6XG4gICAgICAgICAgICByb3RhdGVkQ2FudmFzQ29udGV4dC5yb3RhdGUoLU1hdGguUEkgLyAyKTtcbiAgICAgICAgICAgIHJvdGF0ZWRDYW52YXNDb250ZXh0LmRyYXdJbWFnZShjYW52YXMsIC1jYW52YXMud2lkdGgsIDApO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMDpcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiBjYW52YXM7XG4gICAgfVxuICAgIFxuICAgIHJldHVybiByb3RhdGVkQ2FudmFzO1xufVxuXG5mdW5jdGlvbiBkZWNvZGVCYXNlNjRQTkdEYXRhVVJMKHVybCkge1xuICAgIGlmICh0eXBlb2YgdXJsICE9PSBcInN0cmluZ1wiIHx8ICF1cmwubWF0Y2goL15kYXRhOmltYWdlXFwvcG5nO2Jhc2U2NCwvaSkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4gd2luZG93LmF0b2IodXJsLnN1YnN0cmluZyhcImRhdGE6aW1hZ2VcXC9wbmc7YmFzZTY0LFwiLmxlbmd0aCkpO1xufVxuXG4vKipcbiAqIEdldCB0aGUgbGF5ZXIgYXMgYSBQTkcgaW1hZ2UuXG4gKiBcbiAqIFJvdGF0aW9uIGlzIFswLi4zXSBhbmQgc2VsZWN0cyBhIG11bHRpcGxlIG9mIDkwIGRlZ3JlZXMgb2YgY2xvY2t3aXNlIHJvdGF0aW9uIHRvIGJlIGFwcGxpZWQsIG9yIDAgdG8gbGVhdmVcbiAqIHVucm90YXRlZC5cbiAqL1xuQ1BMYXllci5wcm90b3R5cGUuZ2V0QXNQTkcgPSBmdW5jdGlvbihyb3RhdGlvbikge1xuICAgIHZhclxuICAgICAgICBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpLFxuICAgICAgICBjYW52YXNDb250ZXh0ID0gY2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcbiAgICBcbiAgICAvLyBGaXJzdCBkcmF3IG91ciBpbWFnZSBkYXRhIG9udG8gYSBjYW52YXMuLi5cbiAgICBjYW52YXMud2lkdGggPSB0aGlzLmltYWdlRGF0YS53aWR0aDtcbiAgICBjYW52YXMuaGVpZ2h0ID0gdGhpcy5pbWFnZURhdGEuaGVpZ2h0O1xuICAgIFxuICAgIGNhbnZhc0NvbnRleHQucHV0SW1hZ2VEYXRhKHRoaXMuaW1hZ2VEYXRhLCAwLCAwKTtcbiAgICBcbiAgICAvLyBSb3RhdGUgaXQgaWYgbmVlZGVkXG4gICAgY2FudmFzID0gZ2V0Um90YXRlZENhbnZhcyhjYW52YXMsIHJvdGF0aW9uIHx8IDApO1xuICAgIFxuICAgIHJldHVybiBkZWNvZGVCYXNlNjRQTkdEYXRhVVJMKGNhbnZhcy50b0RhdGFVUkwoJ2ltYWdlL3BuZycpKTtcbn07XG5cbkNQTGF5ZXIucHJvdG90eXBlLm1ha2VMb29rVXBUYWJsZXMoKTsiLCIvKlxuICAgIENoaWNrZW5QYWludFxuICAgIFxuICAgIENoaWNrZW5QYWludCBpcyBhIHRyYW5zbGF0aW9uIG9mIENoaWJpUGFpbnQgZnJvbSBKYXZhIHRvIEphdmFTY3JpcHRcbiAgICBieSBOaWNob2xhcyBTaGVybG9jayAvIENoaWNrZW4gU21vb3RoaWUuXG4gICAgXG4gICAgQ2hpYmlQYWludCBpcyBDb3B5cmlnaHQgKGMpIDIwMDYtMjAwOCBNYXJjIFNjaGVmZXJcblxuICAgIENoaWNrZW5QYWludCBpcyBmcmVlIHNvZnR3YXJlOiB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3IgbW9kaWZ5XG4gICAgaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBhcyBwdWJsaXNoZWQgYnlcbiAgICB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uLCBlaXRoZXIgdmVyc2lvbiAzIG9mIHRoZSBMaWNlbnNlLCBvclxuICAgIChhdCB5b3VyIG9wdGlvbikgYW55IGxhdGVyIHZlcnNpb24uXG5cbiAgICBDaGlja2VuUGFpbnQgaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCxcbiAgICBidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZlxuICAgIE1FUkNIQU5UQUJJTElUWSBvciBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS4gIFNlZSB0aGVcbiAgICBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9yZSBkZXRhaWxzLlxuXG4gICAgWW91IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2VcbiAgICBhbG9uZyB3aXRoIENoaWNrZW5QYWludC4gSWYgbm90LCBzZWUgPGh0dHA6Ly93d3cuZ251Lm9yZy9saWNlbnNlcy8+LlxuKi9cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gQ1BMb29rVXBUYWJsZSgpIHtcbiAgICB0aGlzLnRhYmxlID0gbmV3IFVpbnQ4QXJyYXkoMjU2KTtcblxuICAgIHRoaXMubG9hZElkZW50aXR5ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgMjU2OyBpKyspIHtcbiAgICAgICAgICAgIHRoaXMudGFibGVbaV0gPSBpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIHRoaXMubG9hZEJyaWdodG5lc3NDb250cmFzdCA9IGZ1bmN0aW9uKGJyaWdodG5lc3MsIGNvbnRyYXN0KSB7XG4gICAgICAgIHZhciBcbiAgICAgICAgICAgIHNsb3BlID0gY29udHJhc3QgPiAwLjAgPyAoMS4wIC8gKDEuMDAwMSAtIGNvbnRyYXN0KSk6IDEuMCArIGNvbnRyYXN0LFxuICAgICAgICAgICAgb2Zmc2V0ID0gMC41IC0gc2xvcGUgKiAwLjUgKyBicmlnaHRuZXNzO1xuICAgICAgICAgICAgXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgMjU2OyBpKyspIHtcbiAgICAgICAgICAgIHZhciBcbiAgICAgICAgICAgICAgICB4ID0gaSAvIDI1NS4wLFxuICAgICAgICAgICAgICAgIHkgPSB4ICogc2xvcGUgKyBvZmZzZXQ7XG5cbiAgICAgICAgICAgIHRoaXMudGFibGVbaV0gPSBNYXRoLm1pbigyNTUsIE1hdGgubWF4KH5+KHkgKiAyNTUuMCksIDApKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICB0aGlzLmludmVydCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IDI1NjsgaSsrKSB7XG4gICAgICAgICAgICB0aGlzLnRhYmxlW2ldID0gMjU1IC0gdGhpcy50YWJsZVtpXTtcbiAgICAgICAgfVxuICAgIH07XG59XG4iLCJpbXBvcnQgQ1BDaGliaUZpbGUgZnJvbSBcIi4vQ1BDaGliaUZpbGVcIjtcbmltcG9ydCBDUEFydHdvcmsgZnJvbSBcIi4vQ1BBcnR3b3JrXCI7XG5pbXBvcnQgQ1BMYXllciBmcm9tIFwiLi9DUExheWVyXCI7XG5pbXBvcnQgQWRvYmVDb2xvclRhYmxlIGZyb20gXCIuLi91dGlsL0Fkb2JlQ29sb3JUYWJsZVwiO1xuXG4vKipcbiAqIExvYWRzIENoaWNrZW5QYWludCByZXNvdXJjZXMgZnJvbSBhIHJlbW90ZSBzZXJ2ZXIgYW5kIGVtaXRzIHByb2dyZXNzIGV2ZW50cy5cbiAqXG4gKiBsb2FkSW1hZ2VVUkwgLSBVUkwgb2YgUE5HL0pQRUcgaW1hZ2UgdG8gbG9hZCBmb3IgZWRpdGluZyAob3B0aW9uYWwpXG4gKiBsb2FkQ2hpYmlGaWxlVVJMIC0gVVJMIG9mIC5jaGkgZmlsZSB0byBsb2FkIGZvciBlZGl0aW5nIChvcHRpb25hbCkuIFVzZWQgaW4gcHJlZmVyZW5jZSB0byBsb2FkSW1hZ2UuXG4gKiBsb2FkU3dhdGNoZXNVUkwgLSBVUkwgb2YgYW4gLmFjbyBwYWxldHRlIHRvIGxvYWQgKG9wdGlvbmFsKVxuICovXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBDUFJlc291cmNlTG9hZGVyKG9wdGlvbnMpIHtcbiAgICB2YXJcbiAgICAgICAgcmVzb3VyY2VzID0gW10sXG4gICAgICAgIGNvbXBsZXRlZCA9IHt9LFxuICAgICAgICB0aGF0ID0gdGhpcztcblxuICAgIGlmIChvcHRpb25zLmxvYWRDaGliaUZpbGVVcmwgJiYgKFwiXCIgKyBvcHRpb25zLmxvYWRDaGliaUZpbGVVcmwpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgcmVzb3VyY2VzLnB1c2goe1xuICAgICAgICAgICAgdXJsOiBvcHRpb25zLmxvYWRDaGliaUZpbGVVcmwsXG4gICAgICAgICAgICBmcmllbmRseTogXCJkcmF3aW5nIGxheWVyc1wiLFxuICAgICAgICAgICAgbmFtZTogXCJsYXllcnNcIixcbiAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlXG4gICAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChvcHRpb25zLmxvYWRJbWFnZVVybCAmJiAoXCJcIiArIG9wdGlvbnMubG9hZEltYWdlVXJsKS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICByZXNvdXJjZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgdXJsOiBvcHRpb25zLmxvYWRJbWFnZVVybCxcbiAgICAgICAgICAgICAgICBmcmllbmRseTogXCJkcmF3aW5nXCIsXG4gICAgICAgICAgICAgICAgbmFtZTogXCJmbGF0XCIsXG4gICAgICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWVcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIGlmIChvcHRpb25zLmxvYWRTd2F0Y2hlc1VybCkge1xuICAgICAgICByZXNvdXJjZXMucHVzaCh7XG4gICAgICAgICAgICB1cmw6IG9wdGlvbnMubG9hZFN3YXRjaGVzVXJsLFxuICAgICAgICAgICAgZnJpZW5kbHk6IFwiY29sb3Igc3dhdGNoZXNcIixcbiAgICAgICAgICAgIG5hbWU6IFwic3dhdGNoZXNcIixcbiAgICAgICAgICAgIHJlcXVpcmVkOiBmYWxzZSxcbiAgICAgICAgICAgIG5vUHJvZ3Jlc3M6IHRydWUgLy8gU28gc2hvcnQgdGhhdCB3ZSBtYXkgYXMgd2VsbCBrZWVwIHRoZSBzbW9vdGhpZSBkcmFpbmVkXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGRlY29kZVJlc291cmNlKHJlc291cmNlLCByZXNvdXJjZURhdGEpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgICAgc3dpdGNoIChyZXNvdXJjZS5uYW1lKSB7XG4gICAgICAgICAgICAgICAgY2FzZSBcImZsYXRcIjpcbiAgICAgICAgICAgICAgICAgICAgdmFyIFxuICAgICAgICAgICAgICAgICAgICAgICAgYmxvYiA9IG5ldyBCbG9iKFtyZXNvdXJjZURhdGFdLCB7dHlwZTogXCJpbWFnZS9wbmdcIn0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgaW1hZ2VVcmwgPSB3aW5kb3cuVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGlmIChpbWFnZVVybCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGltYWdlID0gbmV3IEltYWdlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGltYWdlLm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcnR3b3JrID0gbmV3IENQQXJ0d29yayh0aGlzLndpZHRoLCB0aGlzLmhlaWdodCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxheWVyID0gbmV3IENQTGF5ZXIodGhpcy53aWR0aCwgdGhpcy5oZWlnaHQsIFwiTGF5ZXIgMVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXllci5sb2FkRnJvbUltYWdlKGltYWdlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcnR3b3JrLmFkZExheWVyT2JqZWN0KGxheWVyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbWFnZSA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LlVSTC5yZXZva2VPYmplY3RVUkwoaW1hZ2VVcmwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoYXJ0d29yayk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBpbWFnZS5zcmMgPSBpbWFnZVVybDtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUobnVsbCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwic3dhdGNoZXNcIjpcbiAgICAgICAgICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWFkZXIgPSBuZXcgQWRvYmVDb2xvclRhYmxlKCksXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xvcnMgPSByZWFkZXIucmVhZChyZXNvdXJjZURhdGEpO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShjb2xvcnMpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgXCJsYXllcnNcIjpcbiAgICAgICAgICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWFkZXIgPSBuZXcgQ1BDaGliaUZpbGUoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGFydHdvcmsgPSByZWFkZXIucmVhZChyZXNvdXJjZURhdGEpO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKGFydHdvcmspO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUobnVsbCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHJlcG9ydFByb2dyZXNzKHJlc291cmNlLCBwcm9ncmVzcykge1xuICAgICAgICBpZiAocHJvZ3Jlc3MgPT09IG51bGwpIHtcbiAgICAgICAgICAgIHRoYXQuZW1pdEV2ZW50KFwibG9hZGluZ1Byb2dyZXNzXCIsIFsxLjAsIFwiTG9hZGluZyB5b3VyIFwiICsgcmVzb3VyY2UuZnJpZW5kbHkgKyBcIi4uLlwiXSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGF0LmVtaXRFdmVudChcImxvYWRpbmdQcm9ncmVzc1wiLCBbcHJvZ3Jlc3MsIFwiTG9hZGluZyB5b3VyIFwiICsgcmVzb3VyY2UuZnJpZW5kbHkgKyBcIiAoXCIgKyBNYXRoLnJvdW5kKHByb2dyZXNzICogMTAwKSArIFwiJSkuLi5cIl0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIHRoaXMubG9hZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAocmVzb3VyY2VzLmxlbmd0aCA9PSAwKSB7XG4gICAgICAgICAgICB0aGF0LmVtaXRFdmVudChcImxvYWRpbmdDb21wbGV0ZVwiLCBbY29tcGxldGVkXSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB2YXJcbiAgICAgICAgICAgIHJlc291cmNlID0gcmVzb3VyY2VzLnNoaWZ0KCksXG4gICAgICAgICAgICB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcblxuICAgICAgICB4aHIuYWRkRXZlbnRMaXN0ZW5lcihcInByb2dyZXNzXCIsIGZ1bmN0aW9uKGV2dCkge1xuICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgcHJvZ3Jlc3M7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChldnQubGVuZ3RoQ29tcHV0YWJsZSAmJiAhcmVzb3VyY2Uubm9Qcm9ncmVzcykge1xuICAgICAgICAgICAgICAgIHByb2dyZXNzID0gZXZ0LmxvYWRlZCAvIGV2dC50b3RhbDtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcHJvZ3Jlc3MgPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICByZXBvcnRQcm9ncmVzcyhyZXNvdXJjZSwgcHJvZ3Jlc3MpO1xuICAgICAgICB9LCBmYWxzZSk7XG5cbiAgICAgICAgZnVuY3Rpb24gaGFuZGxlRmF0YWwoKSB7XG4gICAgICAgICAgICBpZiAocmVzb3VyY2UucmVxdWlyZWQpIHtcbiAgICAgICAgICAgICAgICB0aGF0LmVtaXRFdmVudChcImxvYWRpbmdGYWlsdXJlXCIsIFtcIkZhaWxlZCB0byBsb2FkIHlvdXIgXCIgKyByZXNvdXJjZS5mcmllbmRseSArIFwiLCBwbGVhc2UgdHJ5IGFnYWluIGxhdGVyLlwiXSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIFNraXAgdW5pbXBvcnRhbnQgcmVzb3VyY2VzXG4gICAgICAgICAgICAgICAgdGhhdC5sb2FkKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHhoci5hZGRFdmVudExpc3RlbmVyKFwibG9hZFwiLCBmdW5jdGlvbihldnQpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnN0YXR1cyA9PSAyMDApIHtcbiAgICAgICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UgPSB0aGlzLnJlc3BvbnNlO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHRoYXQuZW1pdEV2ZW50KFwibG9hZGluZ1Byb2dyZXNzXCIsIFsxLjAsIFwiU3RhcnRpbmcgQ2hpY2tlblBhaW50Li4uXCJdKTtcbiAgICBcbiAgICAgICAgICAgICAgICAvLyBZaWVsZCB0byB0aGUgRE9NIHRvIGdpdmUgaXQgYSBjaGFuY2UgdG8gcGFpbnQgdGhlIGxvYWRlZCBtZXNzYWdlIGJlZm9yZSB3ZSBiZWdpbiBkZWNvZGluZ1xuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVjb2RlUmVzb3VyY2UocmVzb3VyY2UsIHJlc3BvbnNlKS50aGVuKGZ1bmN0aW9uKGRlY29kZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGVjb2RlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21wbGV0ZWRbcmVzb3VyY2UubmFtZV0gPSBkZWNvZGVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTW92ZSBvbiB0byB0aGUgbmV4dCBmaWxlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQubG9hZCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQuZW1pdEV2ZW50KFwibG9hZGluZ0ZhaWx1cmVcIiwgW1wiRmFpbGVkIHRvIHJlYWQgeW91ciBcIiArIHJlc291cmNlLmZyaWVuZGx5XSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIDBcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBoYW5kbGVGYXRhbCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LCBmYWxzZSk7XG5cbiAgICAgICAgeGhyLmFkZEV2ZW50TGlzdGVuZXIoXCJlcnJvclwiLCBoYW5kbGVGYXRhbCk7XG5cbiAgICAgICAgcmVwb3J0UHJvZ3Jlc3MocmVzb3VyY2UsIHJlc291cmNlLm5vUHJvZ3Jlc3MgPyBudWxsIDogMC4wKTtcblxuICAgICAgICB4aHIub3BlbihcIkdFVFwiLCByZXNvdXJjZS51cmwsIHRydWUpO1xuICAgICAgICBcbiAgICAgICAgeGhyLnJlc3BvbnNlVHlwZSA9ICdhcnJheWJ1ZmZlcic7XG5cbiAgICAgICAgeGhyLnNlbmQoKTtcbiAgICB9XG59XG5cbkNQUmVzb3VyY2VMb2FkZXIucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShFdmVudEVtaXR0ZXIucHJvdG90eXBlKTtcbkNQUmVzb3VyY2VMb2FkZXIucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gQ1BSZXNvdXJjZUxvYWRlcjtcbiIsImltcG9ydCBDUENoaWJpRmlsZSBmcm9tIFwiLi9DUENoaWJpRmlsZVwiO1xuaW1wb3J0IENQQXJ0d29yayBmcm9tIFwiLi9DUEFydHdvcmtcIjtcbmltcG9ydCBBZG9iZUNvbG9yVGFibGUgZnJvbSBcIi4uL3V0aWwvQWRvYmVDb2xvclRhYmxlXCI7XG5cbi8qKlxuICogV2UgZ2VuZXJhbGx5IGNhbid0IGRvIG11Y2ggd2l0aCBiaW5hcnkgc3RyaW5ncyBiZWNhdXNlIHZhcmlvdXMgbWV0aG9kcyB3aWxsIHRyeSB0byBVVEYtOCBtYW5nbGUgdGhlbS5cbiAqIFRoaXMgZnVuY3Rpb24gY29udmVydHMgc3VjaCBhIHN0cmluZyB0byBhIFVpbnQ4QXJyYXkgaW5zdGVhZC5cbiAqL1xuZnVuY3Rpb24gYmluYXJ5U3RyaW5nVG9CeXRlQXJyYXkocykge1xuICAgIHZhclxuICAgICAgICByZXN1bHQgPSBuZXcgVWludDhBcnJheShzLmxlbmd0aCk7XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgcmVzdWx0W2ldID0gcy5jaGFyQ29kZUF0KGkpO1xuICAgIH1cblxuICAgIHJldHVybiByZXN1bHQ7XG59XG5cbi8qKlxuICogU2F2ZXMgQ2hpY2tlblBhaW50IHJlc291cmNlcyB0byBhIHJlbW90ZSBzZXJ2ZXIgb3IgdG8gdGhlIGRpc2sgYW5kIGVtaXRzIHByb2dyZXNzIGV2ZW50cy5cbiAqXG4gKiBPcHRpb25zOlxuICogICAgIHVybCAtIFVSTCB0byBzZW5kIHRvLiBJZiBvbWl0dGVkLCB3aWxsIHNhdmUgdG8gdGhlIGRpc2sgaW5zdGVhZC5cbiAqICAgICBhcnR3b3JrIC0gQXJ0d29yayB0byBzZW5kXG4gKiAgICAgcm90YXRpb24gLSBJbnRlZ2VyIFswLi4zXSBvZiB0aGUgbnVtYmVyIG9mIDkwIGRlZ3JlZSByb3RhdGlvbiBzdGVwcyB0aGF0IHNob3VsZCBiZSBhcHBsaWVkIHRvIGNhbnZhcyB1cG9uIG9wZW5pbmcuXG4gKiAgICAgc3dhdGNoZXMgLSBBcnJheSBvZiBBUkdCIGludGVnZXIgY29sb3JzIHRvIHNhdmUgYXMgdGhlIGltYWdlIHN3YXRjaGVzIChvcHRpb25hbClcbiAqL1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gQ1BSZXNvdXJjZVNhdmVyKG9wdGlvbnMpIHtcbiAgICB2YXJcbiAgICAgICAgdGhhdCA9IHRoaXMsXG4gICAgICAgIFxuICAgICAgICBjYW5jZWxsZWQgPSBmYWxzZTtcbiAgICBcbiAgICBvcHRpb25zLnJvdGF0aW9uID0gb3B0aW9ucy5yb3RhdGlvbiB8fCAwO1xuICAgIFxuICAgIGZ1bmN0aW9uIHJlcG9ydFByb2dyZXNzKHByb2dyZXNzKSB7XG4gICAgICAgIGlmIChwcm9ncmVzcyA9PT0gbnVsbCkge1xuICAgICAgICAgICAgdGhhdC5lbWl0RXZlbnQoXCJzYXZpbmdQcm9ncmVzc1wiLCBbMS4wLCBcIlNhdmluZyB5b3VyIGRyYXdpbmcgdG8gdGhlIHNlcnZlci4uLlwiXSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGF0LmVtaXRFdmVudChcInNhdmluZ1Byb2dyZXNzXCIsIFtwcm9ncmVzcywgXCJTYXZpbmcgeW91ciBkcmF3aW5nIHRvIHRoZSBzZXJ2ZXIuLi4gIChcIiArIE1hdGgucm91bmQocHJvZ3Jlc3MgKiAxMDApICsgXCIlKVwiXSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgZnVuY3Rpb24gcmVwb3J0RmF0YWwoc2VydmVyTWVzc2FnZSkge1xuICAgICAgICB0aGF0LmVtaXRFdmVudChcInNhdmluZ0ZhaWx1cmVcIiwgW3NlcnZlck1lc3NhZ2VdKTtcbiAgICB9XG4gICAgXG4gICAgZnVuY3Rpb24gcG9zdERyYXdpbmcoZm9ybURhdGEpIHtcbiAgICAgICAgdmFyXG4gICAgICAgICAgICB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgICBcbiAgICAgICAgeGhyLnVwbG9hZC5hZGRFdmVudExpc3RlbmVyKFwicHJvZ3Jlc3NcIiwgZnVuY3Rpb24oZXZ0KSB7XG4gICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICBwcm9ncmVzcztcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKGV2dC5sZW5ndGhDb21wdXRhYmxlKSB7XG4gICAgICAgICAgICAgICAgcHJvZ3Jlc3MgPSBldnQubG9hZGVkIC8gZXZ0LnRvdGFsO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBwcm9ncmVzcyA9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzKHByb2dyZXNzKTtcbiAgICAgICAgfSwgZmFsc2UpO1xuICAgIFxuICAgICAgICB4aHIuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIiwgZnVuY3Rpb24oZXZ0KSB7XG4gICAgICAgICAgICByZXBvcnRQcm9ncmVzcygxLjApO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAodGhpcy5zdGF0dXMgPT0gMjAwICYmIC9eQ0hJQklPSy8udGVzdCh0aGlzLnJlc3BvbnNlKSkge1xuICAgICAgICAgICAgICAgIHRoYXQuZW1pdEV2ZW50KFwic2F2aW5nQ29tcGxldGVcIik7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJlcG9ydEZhdGFsKHRoaXMucmVzcG9uc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LCBmYWxzZSk7XG4gICAgXG4gICAgICAgIHhoci5hZGRFdmVudExpc3RlbmVyKFwiZXJyb3JcIiwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXBvcnRGYXRhbCh0aGlzLnJlc3BvbnNlKTtcbiAgICAgICAgfSwgZmFsc2UpO1xuICAgIFxuICAgICAgICByZXBvcnRQcm9ncmVzcygwKTtcbiAgICBcbiAgICAgICAgeGhyLm9wZW4oXCJQT1NUXCIsIG9wdGlvbnMudXJsLCB0cnVlKTtcbiAgICAgICAgXG4gICAgICAgIHhoci5yZXNwb25zZVR5cGUgPSBcInRleHRcIjtcbiAgICAgICAgXG4gICAgICAgIHhoci5zZW5kKGZvcm1EYXRhKTtcbiAgICB9XG4gICAgXG4gICAgLyoqXG4gICAgICogQmVnaW4gc2F2aW5nIHRoZSBkYXRhIHByb3ZpZGVkIGluIHRoZSBjb25zdHJ1Y3Rvci4gUmV0dXJucyBpbW1lZGlhdGVseSwgYW5kIGZpcmVzIHRoZXNlIGV2ZW50cyB0byByZXBvcnQgdGhlXG4gICAgICogc2F2aW5nIHByb2dyZXNzOlxuICAgICAqIFxuICAgICAqIHNhdmluZ1Byb2dyZXNzKHByb2dyZXNzKSAtIFByb2dyZXNzIGlzIFswLjAgLi4uIDEuMF0gYW5kIHJlcG9ydHMgaG93IG11Y2ggaGFzIHVwbG9hZGVkIHNvIGZhciwgb3IgbnVsbCBpZiB0aGUgXG4gICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgdG90YWwgcHJvZ3Jlc3MgY291bGQgbm90IGJlIGRldGVybWluZWQuXG4gICAgICogc2F2aW5nRmFpbHVyZShlcnJvcikgICAgIC0gV2hlbiBzYXZpbmcgZmFpbHMsIGFsb25nIHdpdGggYSBzdHJpbmcgZXJyb3IgbWVzc2FnZSB0byBkaXNwbGF5IHRvIHRoZSB1c2VyLiBcbiAgICAgKiBzYXZpbmdDb21wbGV0ZSgpICAgICAgICAgLSBXaGVuIHNhdmluZyBjb21wbGV0ZXMgc3VjY2VzZnVsbHlcbiAgICAgKi9cbiAgICB0aGlzLnNhdmUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyXG4gICAgICAgICAgICBmbGF0LFxuICAgICAgICAgICAgZmxhdEJsb2IsXG4gICAgICAgICAgICBzd2F0Y2hlc0Jsb2I7XG5cbiAgICAgICAgZmxhdCA9IGJpbmFyeVN0cmluZ1RvQnl0ZUFycmF5KG9wdGlvbnMuYXJ0d29yay5nZXRGbGF0UE5HKG9wdGlvbnMucm90YXRpb24pKTtcbiAgICAgICAgZmxhdEJsb2IgPSBuZXcgQmxvYihbZmxhdF0sIHt0eXBlOiBcImltYWdlL3BuZ1wifSk7XG4gICAgICAgIGZsYXQgPSBudWxsOyAvLyBEb24ndCBuZWVkIHRoaXMgYW55IG1vcmVcbiAgICAgICAgXG4gICAgICAgIHZhclxuICAgICAgICAgICAgc2VyaWFsaXplTGF5ZXJzO1xuXG4gICAgICAgIGlmIChmYWxzZSkge1xuICAgICAgICAgICAgc2VyaWFsaXplTGF5ZXJzID0gUHJvbWlzZS5yZXNvbHZlKG51bGwpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc2VyaWFsaXplTGF5ZXJzID0gKG5ldyBDUENoaWJpRmlsZSgpKS5zZXJpYWxpemUob3B0aW9ucy5hcnR3b3JrKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgc2VyaWFsaXplTGF5ZXJzLnRoZW4oZnVuY3Rpb24oY2hpYmlCbG9iKSB7XG4gICAgICAgICAgICBpZiAoY2FuY2VsbGVkKSB7XG4gICAgICAgICAgICAgICAgdGhhdC5lbWl0RXZlbnQoXCJzYXZpbmdGYWlsdXJlXCIpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKG9wdGlvbnMuc3dhdGNoZXMpIHtcbiAgICAgICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICAgICAgYWNvID0gbmV3IEFkb2JlQ29sb3JUYWJsZSgpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHN3YXRjaGVzQmxvYiA9IG5ldyBCbG9iKFthY28ud3JpdGUob3B0aW9ucy5zd2F0Y2hlcyldLCB7dHlwZTogXCJhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW1cIn0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBzd2F0Y2hlc0Jsb2IgPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKG9wdGlvbnMudXJsKSB7XG4gICAgICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgICAgIG1hcmtlciA9IFwiVGhpcyBtYXJrZXIgZW5zdXJlcyB0aGUgdXBsb2FkIHdhc24ndCB0cnVuY2F0ZWRcIixcbiAgICAgICAgICAgICAgICAgICAgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKTtcblxuICAgICAgICAgICAgICAgIGZvcm1EYXRhLmFwcGVuZChcImJlZ2luTWFya2VyXCIsIG1hcmtlcik7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgZm9ybURhdGEuYXBwZW5kKFwicGljdHVyZVwiLCBmbGF0QmxvYik7XG4gICAgICAgICAgICAgICAgZmxhdEJsb2IgPSBudWxsO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGlmIChjaGliaUJsb2IpIHtcbiAgICAgICAgICAgICAgICAgICAgZm9ybURhdGEuYXBwZW5kKFwiY2hpYmlmaWxlXCIsIGNoaWJpQmxvYik7XG4gICAgICAgICAgICAgICAgICAgIGNoaWJpQmxvYiA9IG51bGw7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gTGF5ZXJzIHdpbGwgbmVlZCB0byBiZSByb3RhdGVkIHVwb24gb3BlbmluZ1xuICAgICAgICAgICAgICAgICAgICBmb3JtRGF0YS5hcHBlbmQoXCJyb3RhdGlvblwiLCBcIlwiICsgb3B0aW9ucy5yb3RhdGlvbik7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLypcbiAgICAgICAgICAgICAgICAgICAgICogQmVjYXVzZSB0aGUgaW1hZ2UgaXMgYSBmbGF0IFBORywgd2Ugcm90YXRlIGl0IGJlZm9yZSB3ZSBzYXZlZCBpdCBhbmQgaXQgZG9lc24ndCBuZWVkIGZ1cnRoZXJcbiAgICAgICAgICAgICAgICAgICAgICogcm90YXRpb24gdXBvbiBvcGVuaW5nLlxuICAgICAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAgICAgZm9ybURhdGEuYXBwZW5kKFwicm90YXRpb25cIiwgXCIwXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBpZiAoc3dhdGNoZXNCbG9iKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvcm1EYXRhLmFwcGVuZChcInN3YXRjaGVzXCIsIHN3YXRjaGVzQmxvYik7XG4gICAgICAgICAgICAgICAgICAgIHN3YXRjaGVzQmxvYiA9IG51bGw7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgZm9ybURhdGEuYXBwZW5kKFwiZW5kTWFya2VyXCIsIG1hcmtlcik7XG5cbiAgICAgICAgICAgICAgICBwb3N0RHJhd2luZyhmb3JtRGF0YSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHdpbmRvdy5zYXZlQXMoZmxhdEJsb2IsIFwib2VrYWtpLnBuZ1wiKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBpZiAoY2hpYmlCbG9iKSB7XG4gICAgICAgICAgICAgICAgICAgIHdpbmRvdy5zYXZlQXMoY2hpYmlCbG9iLCBcIm9la2FraS5jaGlcIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChzd2F0Y2hlc0Jsb2IpIHtcbiAgICAgICAgICAgICAgICAgICAgd2luZG93LnNhdmVBcyhzd2F0Y2hlc0Jsb2IsIFwib2VrYWtpLmFjb1wiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgXG4gICAgdGhpcy5jYW5jZWwgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgY2FuY2VsbGVkID0gdHJ1ZTtcbiAgICB9O1xufVxuXG5DUFJlc291cmNlU2F2ZXIucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShFdmVudEVtaXR0ZXIucHJvdG90eXBlKTtcbkNQUmVzb3VyY2VTYXZlci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBDUFJlc291cmNlU2F2ZXI7XG4iLCIvKlxuICAgIENoaWNrZW5QYWludFxuICAgIFxuICAgIENoaWNrZW5QYWludCBpcyBhIHRyYW5zbGF0aW9uIG9mIENoaWJpUGFpbnQgZnJvbSBKYXZhIHRvIEphdmFTY3JpcHRcbiAgICBieSBOaWNob2xhcyBTaGVybG9jayAvIENoaWNrZW4gU21vb3RoaWUuXG4gICAgXG4gICAgQ2hpYmlQYWludCBpcyBDb3B5cmlnaHQgKGMpIDIwMDYtMjAwOCBNYXJjIFNjaGVmZXJcblxuICAgIENoaWNrZW5QYWludCBpcyBmcmVlIHNvZnR3YXJlOiB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3IgbW9kaWZ5XG4gICAgaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBhcyBwdWJsaXNoZWQgYnlcbiAgICB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uLCBlaXRoZXIgdmVyc2lvbiAzIG9mIHRoZSBMaWNlbnNlLCBvclxuICAgIChhdCB5b3VyIG9wdGlvbikgYW55IGxhdGVyIHZlcnNpb24uXG5cbiAgICBDaGlja2VuUGFpbnQgaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCxcbiAgICBidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZlxuICAgIE1FUkNIQU5UQUJJTElUWSBvciBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS4gIFNlZSB0aGVcbiAgICBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9yZSBkZXRhaWxzLlxuXG4gICAgWW91IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2VcbiAgICBhbG9uZyB3aXRoIENoaWNrZW5QYWludC4gSWYgbm90LCBzZWUgPGh0dHA6Ly93d3cuZ251Lm9yZy9saWNlbnNlcy8+LlxuKi9cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gQ1BVbmRvKCkge1xufVxuXG5DUFVuZG8ucHJvdG90eXBlLm1lcmdlID0gZnVuY3Rpb24odW5kbykge1xuICAgIHJldHVybiBmYWxzZTtcbn07XG5cbkNQVW5kby5wcm90b3R5cGUubm9DaGFuZ2UgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gZmFsc2U7XG59O1xuXG5DUFVuZG8ucHJvdG90eXBlLmdldE1lbW9yeVVzZWQgPSBmdW5jdGlvbih1bmRvbmUsIHBhcmFtKSB7XG4gICAgcmV0dXJuIDA7XG59XG4iLCIvKlxuICAgIENoaWNrZW5QYWludFxuICAgIFxuICAgIENoaWNrZW5QYWludCBpcyBhIHRyYW5zbGF0aW9uIG9mIENoaWJpUGFpbnQgZnJvbSBKYXZhIHRvIEphdmFTY3JpcHRcbiAgICBieSBOaWNob2xhcyBTaGVybG9jayAvIENoaWNrZW4gU21vb3RoaWUuXG4gICAgXG4gICAgQ2hpYmlQYWludCBpcyBDb3B5cmlnaHQgKGMpIDIwMDYtMjAwOCBNYXJjIFNjaGVmZXJcblxuICAgIENoaWNrZW5QYWludCBpcyBmcmVlIHNvZnR3YXJlOiB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3IgbW9kaWZ5XG4gICAgaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBhcyBwdWJsaXNoZWQgYnlcbiAgICB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uLCBlaXRoZXIgdmVyc2lvbiAzIG9mIHRoZSBMaWNlbnNlLCBvclxuICAgIChhdCB5b3VyIG9wdGlvbikgYW55IGxhdGVyIHZlcnNpb24uXG5cbiAgICBDaGlja2VuUGFpbnQgaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCxcbiAgICBidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZlxuICAgIE1FUkNIQU5UQUJJTElUWSBvciBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS4gIFNlZSB0aGVcbiAgICBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9yZSBkZXRhaWxzLlxuXG4gICAgWW91IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2VcbiAgICBhbG9uZyB3aXRoIENoaWNrZW5QYWludC4gSWYgbm90LCBzZWUgPGh0dHA6Ly93d3cuZ251Lm9yZy9saWNlbnNlcy8+LlxuKi9cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gQ1BBYm91dERpYWxvZyhwYXJlbnQpIHtcbiAgICB2YXJcbiAgICAgICAgZGlhbG9nID0gXG4gICAgICAgICAgICAkKGA8ZGl2IGNsYXNzPVwibW9kYWwgZmFkZSBjaGlja2VucGFpbnQtYWJvdXQtZGlhbG9nXCIgdGFiaW5kZXg9XCItMVwiIHJvbGU9XCJkaWFsb2dcIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibW9kYWwtZGlhbG9nXCI+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtb2RhbC1jb250ZW50XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibW9kYWwtaGVhZGVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJjbG9zZVwiIGRhdGEtZGlzbWlzcz1cIm1vZGFsXCIgYXJpYS1sYWJlbD1cIkNsb3NlXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPiZ0aW1lczs8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGg0IGNsYXNzPVwibW9kYWwtdGl0bGVcIj5BYm91dCBDaGlja2VuUGFpbnQ8L2g0PlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibW9kYWwtYm9keVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxhIGNsYXNzPVwiY2hpY2tlbnBhaW50LW9uLWdpdGh1YlwiIHRhcmdldD1cIl9ibGFua1wiIGhyZWY9XCJodHRwczovL2dpdGh1Yi5jb20vdGhlbmlja2R1ZGUvY2hpY2tlbnBhaW50XCI+PHNwYW4gY2xhc3M9XCJmYSBmYS1naXRodWJcIj48L3NwYW4+IENoaWNrZW5QYWludCBvbiBHaXRIdWI8L2E+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENoaWNrZW5QYWludCBpcyBhIHRyYW5zbGF0aW9uIG9mIDxhIGhyZWY9XCJodHRwOi8vd3d3LmNoaWJpcGFpbnQuY29tL1wiIHRhcmdldD1cIl9ibGFua1wiPkNoaWJpUGFpbnQ8L2E+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZyb20gSmF2YSB0byBKYXZhU2NyaXB0IGJ5IE5pY2hvbGFzIFNoZXJsb2NrIC8gQ2hpY2tlbiBTbW9vdGhpZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ2hpYmlQYWludCBpcyBDb3B5cmlnaHQgKGMpIDIwMDYtMjAwOCBNYXJjIFNjaGVmZXIuIEFsbCBSaWdodHMgUmVzZXJ2ZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENoaWNrZW5QYWludCBpcyBmcmVlIHNvZnR3YXJlOiB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3IgbW9kaWZ5XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgYXMgcHVibGlzaGVkIGJ5XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb24sIGVpdGhlciB2ZXJzaW9uIDMgb2YgdGhlIExpY2Vuc2UsIG9yXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChhdCB5b3VyIG9wdGlvbikgYW55IGxhdGVyIHZlcnNpb24uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ2hpY2tlblBhaW50IGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1FUkNIQU5UQUJJTElUWSBvciBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS4gIFNlZSB0aGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGEgdGFyZ2V0PVwiX2JsYW5rXCIgaHJlZj1cImh0dHA6Ly93d3cuZ251Lm9yZy9saWNlbnNlcy9cIj5HTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZTwvYT4gZm9yIG1vcmUgZGV0YWlscy5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwcmUgY2xhc3M9XCJwcmUtc2Nyb2xsYWJsZSBjaGlja2VucGFpbnQtdGhpcmQtcGFydHktbGljZW5zZXNcIj5JbmNsdWRlcyBpY29ucyBmcm9tIHRoZSA8YSBocmVmPVwiaHR0cDovL3RhbmdvLmZyZWVkZXNrdG9wLm9yZy9cIiB0YXJnZXQ9XCJfYmxhbmtcIj5UYW5nbyBEZXNrdG9wIFByb2plY3Q8L2E+XG4gICAgICAgICAgICAgICAgICAgIFxuSW5jbHVkZXMgdGhlIDxhIHRhcmdldD1cIl9ibGFua1wiIGhyZWY9XCJodHRwczovL2dpdGh1Yi5jb20vZWxpZ3JleS9GaWxlU2F2ZXIuanNcIj5GaWxlU2F2ZXIuanMgbGlicmFyeTwvYT5cbiAgICAgICAgICAgICAgICAgICAgXG4gICAgRmlsZVNhdmVyLmpzIENvcHlyaWdodCDCqSAyMDE1IDxhIHRhcmdldD1cIl9ibGFua1wiIGhyZWY9XCJodHRwOi8vZWxpZ3JleS5jb20vXCI+RWxpIEdyZXk8L2E+XG5cbiAgICBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvblxuICAgIG9idGFpbmluZyBhIGNvcHkgb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uXG4gICAgZmlsZXMgKHRoZSBcIlNvZnR3YXJlXCIpLCB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0XG4gICAgcmVzdHJpY3Rpb24sIGluY2x1ZGluZyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsXG4gICAgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCwgZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yXG4gICAgc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGVcbiAgICBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZ1xuICAgIGNvbmRpdGlvbnM6XG5cbiAgICBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZVxuICAgIGluY2x1ZGVkIGluIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuXG4gICAgVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCxcbiAgICBFWFBSRVNTIE9SIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVNcbiAgICBPRiBNRVJDSEFOVEFCSUxJVFksIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORFxuICAgIE5PTklORlJJTkdFTUVOVC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUlMgT1IgQ09QWVJJR0hUIFxuICAgIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLFxuICAgIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lOR1xuICAgIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1JcbiAgICBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuXG5cbkluY2x1ZGVzIHRoZSA8YSBocmVmPVwiaHR0cDovL3d3dy5qcXVlcnkuY29tL1wiIHRhcmdldD1cIl9ibGFua1wiPkpRdWVyeSBsaWJyYXJ5PC9hPlxuXG4gICAgQ29weXJpZ2h0IDxhIGhyZWY9XCJodHRwczovL2pxdWVyeS5vcmcvXCIgdGFyZ2V0PVwiX2JsYW5rXCI+alF1ZXJ5IEZvdW5kYXRpb24gYW5kIG90aGVyIGNvbnRyaWJ1dG9yczwvYT5cbiAgICBcbiAgICBUaGlzIHNvZnR3YXJlIGNvbnNpc3RzIG9mIHZvbHVudGFyeSBjb250cmlidXRpb25zIG1hZGUgYnkgbWFueVxuICAgIGluZGl2aWR1YWxzLiBGb3IgZXhhY3QgY29udHJpYnV0aW9uIGhpc3RvcnksIHNlZSB0aGUgcmV2aXNpb24gXG4gICAgaGlzdG9yeSBhdmFpbGFibGUgYXQgaHR0cHM6Ly9naXRodWIuY29tL2pxdWVyeS9qcXVlcnlcbiAgICBcbiAgICBUaGUgZm9sbG93aW5nIGxpY2Vuc2UgYXBwbGllcyB0byBhbGwgcGFydHMgb2YgdGhpcyBzb2Z0d2FyZSBcbiAgICBleGNlcHQgYXMgZG9jdW1lbnRlZCBiZWxvdzpcbiAgICBcbiAgICBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBcbiAgICBvYnRhaW5pbmcgYSBjb3B5IG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvblxuICAgIGZpbGVzICh0aGUgXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dFxuICAgIHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcgd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMgdG8gdXNlLCBcbiAgICBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLCBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3JcbiAgICBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZVxuICAgIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nXG4gICAgY29uZGl0aW9uczpcbiAgICBcbiAgICBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZVxuICAgIGluY2x1ZGVkIGluIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuICAgIFxuICAgIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsXG4gICAgRVhQUkVTUyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTXG4gICAgT0YgTUVSQ0hBTlRBQklMSVRZLCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkRcbiAgICBOT05JTkZSSU5HRU1FTlQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1JTIE9SIENPUFlSSUdIVFxuICAgIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLFxuICAgIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lOR1xuICAgIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1JcbiAgICBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuXG5cbkluY2x1ZGVzIHRoZSA8YSB0YXJnZXQ9XCJfYmxhbmtcIiBocmVmPVwiaHR0cHM6Ly9naXRodWIuY29tL25vZGVjYS9wYWtvXCI+UGFrbyB6bGliIGNvbXByZXNzaW9uIGxpYnJhcnk8L2E+XG5cbiAgICBDb3B5cmlnaHQgKEMpIDIwMTQtMjAxNSBieSBWaXRhbHkgUHV6cmluXG4gICAgXG4gICAgUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb25cbiAgICBvYnRhaW5pbmcgYSBjb3B5IG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvblxuICAgIGZpbGVzICh0aGUgXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dFxuICAgIHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcgd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMgdG8gdXNlLFxuICAgIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vclxuICAgIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhlXG4gICAgU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmdcbiAgICBjb25kaXRpb25zOlxuXG4gICAgVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmVcbiAgICBpbmNsdWRlZCBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cblxuICAgIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsXG4gICAgRVhQUkVTUyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTXG4gICAgT0YgTUVSQ0hBTlRBQklMSVRZLCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkRcbiAgICBOT05JTkZSSU5HRU1FTlQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1JTIE9SIENPUFlSSUdIVCBcbiAgICBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLCBEQU1BR0VTIE9SIE9USEVSIExJQUJJTElUWSxcbiAgICBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkdcbiAgICBGUk9NLCBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUgVVNFIE9SXG4gICAgT1RIRVIgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLlxuICAgIFxuSW5jbHVkZXMgdGhlIDxhIHRhcmdldD1cIl9ibGFua1wiIGhyZWY9XCJodHRwczovL2dpdGh1Yi5jb20vbWFkcm9iYnkva2V5bWFzdGVyXCI+a2V5bWFzdGVyLmpzPC9hPiBrZXlib2FyZCBsaWJyYXJ5XG4gICAgXG4gICAgQ29weXJpZ2h0IChjKSAyMDExLTIwMTMgVGhvbWFzIEZ1Y2hzXG5cbiAgICBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvblxuICAgIG9idGFpbmluZyBhIGNvcHkgb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uXG4gICAgZmlsZXMgKHRoZSBcIlNvZnR3YXJlXCIpLCB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0XG4gICAgcmVzdHJpY3Rpb24sIGluY2x1ZGluZyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsXG4gICAgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCwgZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yXG4gICAgc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGVcbiAgICBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZ1xuICAgIGNvbmRpdGlvbnM6XG5cbiAgICBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZVxuICAgIGluY2x1ZGVkIGluIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuXG4gICAgVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCxcbiAgICBFWFBSRVNTIE9SIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVNcbiAgICBPRiBNRVJDSEFOVEFCSUxJVFksIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORFxuICAgIE5PTklORlJJTkdFTUVOVC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUlMgT1IgQ09QWVJJR0hUIFxuICAgIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLFxuICAgIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lOR1xuICAgIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1JcbiAgICBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuXG4gICAgXG5JbmNsdWRlcyB0aGUgPGEgdGFyZ2V0PVwiX2JsYW5rXCIgaHJlZj1cImh0dHBzOi8vZ2l0aHViLmNvbS9zdGVmYW5wZW5uZXIvZXM2LXByb21pc2VcIj5lczYtcHJvbWlzZTwvYT4gbGlicmFyeVxuICAgIFxuICAgIENvcHlyaWdodCAoYykgMjAxNCBZZWh1ZGEgS2F0eiwgVG9tIERhbGUsIFN0ZWZhbiBQZW5uZXIgYW5kIGNvbnRyaWJ1dG9yc1xuXG4gICAgUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb25cbiAgICBvYnRhaW5pbmcgYSBjb3B5IG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvblxuICAgIGZpbGVzICh0aGUgXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dFxuICAgIHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcgd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMgdG8gdXNlLFxuICAgIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vclxuICAgIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhlXG4gICAgU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmdcbiAgICBjb25kaXRpb25zOlxuXG4gICAgVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmVcbiAgICBpbmNsdWRlZCBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cblxuICAgIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsXG4gICAgRVhQUkVTUyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTXG4gICAgT0YgTUVSQ0hBTlRBQklMSVRZLCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkRcbiAgICBOT05JTkZSSU5HRU1FTlQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1JTIE9SIENPUFlSSUdIVCBcbiAgICBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLCBEQU1BR0VTIE9SIE9USEVSIExJQUJJTElUWSxcbiAgICBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkdcbiAgICBGUk9NLCBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUgVVNFIE9SXG4gICAgT1RIRVIgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLlxuICAgICAgICAgICAgICAgICAgICA8L3ByZT5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICBgKTtcbiAgICBcbiAgICAvLyBEZXN0cm95IHRoZSBtb2RhbCB1cG9uIGNsb3NlXG4gICAgZGlhbG9nLm9uKFwiaGlkZGVuLmJzLm1vZGFsXCIsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgZGlhbG9nLnJlbW92ZSgpO1xuICAgIH0pO1xuICAgIFxuICAgIGRpYWxvZy5tb2RhbCh7XG4gICAgICAgIHNob3c6IGZhbHNlXG4gICAgfSk7XG4gICAgXG4gICAgLy8gRml4IHRoZSBiYWNrZHJvcCBsb2NhdGlvbiBpbiB0aGUgRE9NIGJ5IHJlcGFyZW50aW5nIGl0IHRvIHRoZSBjaGlja2VucGFpbnQgY29udGFpbmVyXG4gICAgZGlhbG9nLmRhdGEoXCJicy5tb2RhbFwiKS4kYm9keSA9ICQocGFyZW50KTtcbiAgICBcbiAgICBwYXJlbnQuYXBwZW5kQ2hpbGQoZGlhbG9nWzBdKTtcblxuICAgIHRoaXMuc2hvdyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBkaWFsb2cubW9kYWwoXCJzaG93XCIpO1xuICAgIH07XG59IiwiLypcbiAgICBDaGlja2VuUGFpbnRcbiAgICBcbiAgICBDaGlja2VuUGFpbnQgaXMgYSB0cmFuc2xhdGlvbiBvZiBDaGliaVBhaW50IGZyb20gSmF2YSB0byBKYXZhU2NyaXB0XG4gICAgYnkgTmljaG9sYXMgU2hlcmxvY2sgLyBDaGlja2VuIFNtb290aGllLlxuICAgIFxuICAgIENoaWJpUGFpbnQgaXMgQ29weXJpZ2h0IChjKSAyMDA2LTIwMDggTWFyYyBTY2hlZmVyXG5cbiAgICBDaGlja2VuUGFpbnQgaXMgZnJlZSBzb2Z0d2FyZTogeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yIG1vZGlmeVxuICAgIGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgYXMgcHVibGlzaGVkIGJ5XG4gICAgdGhlIEZyZWUgU29mdHdhcmUgRm91bmRhdGlvbiwgZWl0aGVyIHZlcnNpb24gMyBvZiB0aGUgTGljZW5zZSwgb3JcbiAgICAoYXQgeW91ciBvcHRpb24pIGFueSBsYXRlciB2ZXJzaW9uLlxuXG4gICAgQ2hpY2tlblBhaW50IGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsXG4gICAgYnV0IFdJVEhPVVQgQU5ZIFdBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2ZcbiAgICBNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuICBTZWUgdGhlXG4gICAgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy5cblxuICAgIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXG4gICAgYWxvbmcgd2l0aCBDaGlja2VuUGFpbnQuIElmIG5vdCwgc2VlIDxodHRwOi8vd3d3LmdudS5vcmcvbGljZW5zZXMvPi5cbiovXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIENQQm94Qmx1ckRpYWxvZyhwYXJlbnQsIGNvbnRyb2xsZXIpIHtcbiAgICB2YXJcbiAgICAgICAgZGlhbG9nID0gXG4gICAgICAgICAgICAkKGA8ZGl2IGNsYXNzPVwibW9kYWwgZmFkZVwiIHRhYmluZGV4PVwiLTFcIiByb2xlPVwiZGlhbG9nXCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm1vZGFsLWRpYWxvZ1wiPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibW9kYWwtY29udGVudFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm1vZGFsLWhlYWRlclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiY2xvc2VcIiBkYXRhLWRpc21pc3M9XCJtb2RhbFwiIGFyaWEtbGFiZWw9XCJDbG9zZVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBhcmlhLWhpZGRlbj1cInRydWVcIj4mdGltZXM7PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoNCBjbGFzcz1cIm1vZGFsLXRpdGxlXCI+Qm94IGJsdXI8L2g0PlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibW9kYWwtYm9keVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxmb3JtPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZm9ybS1ncm91cFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsPkJsdXIgYW1vdW50IChwaXhlbHMpPC9sYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIGNsYXNzPVwiZm9ybS1jb250cm9sIGNoaWNrZW5wYWludC1ibHVyLWFtb3VudFwiIHZhbHVlPVwiM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImZvcm0tZ3JvdXBcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD5JdGVyYXRpb25zICgxLTgsIGxhcmdlciBnaXZlcyBzbW9vdGhlciBibHVyKTwvbGFiZWw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cInRleHRcIiBjbGFzcz1cImZvcm0tY29udHJvbCBjaGlja2VucGFpbnQtYmx1ci1pdGVyYXRpb25zXCIgdmFsdWU9XCIxXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZm9ybT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm1vZGFsLWZvb3RlclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiYnRuIGJ0bi1kZWZhdWx0XCIgZGF0YS1kaXNtaXNzPVwibW9kYWxcIj5DYW5jZWw8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImJ0biBidG4tcHJpbWFyeSBjaGlja2VucGFpbnQtYXBwbHktYm94LWJsdXJcIiBkYXRhLWRpc21pc3M9XCJtb2RhbFwiPk9rPC9idXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgYCksXG4gICAgICAgIFxuICAgICAgICBibHVyQW1vdW50RWxlbSA9ICQoXCIuY2hpY2tlbnBhaW50LWJsdXItYW1vdW50XCIsIGRpYWxvZyksXG4gICAgICAgIGJsdXJJdGVyYXRpb25zRWxlbSA9ICQoXCIuY2hpY2tlbnBhaW50LWJsdXItaXRlcmF0aW9uc1wiLCBkaWFsb2cpLFxuICAgICAgICBhcHBseUJ1dHRvbiA9ICQoXCIuY2hpY2tlbnBhaW50LWFwcGx5LWJveC1ibHVyXCIsIGRpYWxvZyk7XG5cbiAgICB0aGlzLnNob3cgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgZGlhbG9nLm1vZGFsKFwic2hvd1wiKTtcbiAgICB9O1xuICAgIFxuICAgIGFwcGx5QnV0dG9uLmNsaWNrKGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgdmFyXG4gICAgICAgICAgICBibHVyID0gTWF0aC5tYXgocGFyc2VJbnQoYmx1ckFtb3VudEVsZW0udmFsKCksIDEwKSwgMSksXG4gICAgICAgICAgICBpdGVyYXRpb25zID0gTWF0aC5taW4oTWF0aC5tYXgocGFyc2VJbnQoYmx1ckl0ZXJhdGlvbnNFbGVtLnZhbCgpLCAxMCksIDEpLCA4KTtcbiAgICAgICAgXG4gICAgICAgIGNvbnRyb2xsZXIuZ2V0QXJ0d29yaygpLmJveEJsdXIoYmx1ciwgYmx1ciwgaXRlcmF0aW9ucyk7XG4gICAgfSk7XG4gICAgXG4gICAgZGlhbG9nXG4gICAgICAgIC5tb2RhbCh7XG4gICAgICAgICAgICBzaG93OiBmYWxzZVxuICAgICAgICB9KVxuICAgICAgICAub24oJ3Nob3duLmJzLm1vZGFsJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBibHVyQW1vdW50RWxlbS5mb2N1cygpO1xuICAgICAgICB9KVxuICAgICAgICAub24oJ2tleXByZXNzJywgZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgaWYgKGUua2V5Q29kZSA9PSAxMykge1xuICAgICAgICAgICAgICAgIGFwcGx5QnV0dG9uLmNsaWNrKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIFxuICAgIC8vIEZpeCB0aGUgYmFja2Ryb3AgbG9jYXRpb24gaW4gdGhlIERPTSBieSByZXBhcmVudGluZyBpdCB0byB0aGUgY2hpY2tlbnBhaW50IGNvbnRhaW5lclxuICAgIGRpYWxvZy5kYXRhKFwiYnMubW9kYWxcIikuJGJvZHkgPSAkKHBhcmVudCk7XG4gICAgXG4gICAgcGFyZW50LmFwcGVuZENoaWxkKGRpYWxvZ1swXSk7XG4gICAgXG4gICAgLyogVE9ET1xuICAgIHBhbmVsLmFkZChuZXcgSkxhYmVsKFwiQmx1ciBhbW91bnQ6XCIpKTtcbiAgICBTcGlubmVyTW9kZWwgYmx1clhTTSA9IG5ldyBTcGlubmVyTnVtYmVyTW9kZWwoMywgMSwgMTAwLCAxKTtcbiAgICBcbiAgICBwYW5lbC5hZGQobmV3IEpMYWJlbChcIkl0ZXJhdGlvbnM6XCIpKTtcbiAgICBTcGlubmVyTW9kZWwgaXRlclNNID0gbmV3IFNwaW5uZXJOdW1iZXJNb2RlbCgxLCAxLCA4LCAxKTtcbiAgICAqL1xufSIsIi8qXG4gICAgQ2hpY2tlblBhaW50XG4gICAgXG4gICAgQ2hpY2tlblBhaW50IGlzIGEgdHJhbnNsYXRpb24gb2YgQ2hpYmlQYWludCBmcm9tIEphdmEgdG8gSmF2YVNjcmlwdFxuICAgIGJ5IE5pY2hvbGFzIFNoZXJsb2NrIC8gQ2hpY2tlbiBTbW9vdGhpZS5cbiAgICBcbiAgICBDaGliaVBhaW50IGlzIENvcHlyaWdodCAoYykgMjAwNi0yMDA4IE1hcmMgU2NoZWZlclxuXG4gICAgQ2hpY2tlblBhaW50IGlzIGZyZWUgc29mdHdhcmU6IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vciBtb2RpZnlcbiAgICBpdCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGFzIHB1Ymxpc2hlZCBieVxuICAgIHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb24sIGVpdGhlciB2ZXJzaW9uIDMgb2YgdGhlIExpY2Vuc2UsIG9yXG4gICAgKGF0IHlvdXIgb3B0aW9uKSBhbnkgbGF0ZXIgdmVyc2lvbi5cblxuICAgIENoaWNrZW5QYWludCBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLFxuICAgIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mXG4gICAgTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiAgU2VlIHRoZVxuICAgIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuXG5cbiAgICBZb3Ugc2hvdWxkIGhhdmUgcmVjZWl2ZWQgYSBjb3B5IG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZVxuICAgIGFsb25nIHdpdGggQ2hpY2tlblBhaW50LiBJZiBub3QsIHNlZSA8aHR0cDovL3d3dy5nbnUub3JnL2xpY2Vuc2VzLz4uXG4qL1xuXG5pbXBvcnQgQ2hpY2tlblBhaW50IGZyb20gXCIuLi9DaGlja2VuUGFpbnRcIjtcblxuaW1wb3J0IENQUGFsZXR0ZSBmcm9tIFwiLi9DUFBhbGV0dGVcIjtcbmltcG9ydCBDUENoZWNrYm94IGZyb20gXCIuL0NQQ2hlY2tib3hcIjtcbmltcG9ydCBDUENvbG9yU3dhdGNoIGZyb20gXCIuL0NQQ29sb3JTd2F0Y2hcIjtcbmltcG9ydCBDUFNsaWRlciBmcm9tIFwiLi9DUFNsaWRlclwiO1xuaW1wb3J0IHtjcmVhdGVDaGVja2VyYm9hcmRQYXR0ZXJufSBmcm9tIFwiLi9DUEdVSVV0aWxzXCI7XG5cbmltcG9ydCBDUExheWVyIGZyb20gXCIuLi9lbmdpbmUvQ1BMYXllclwiO1xuXG5pbXBvcnQgQ1BDb2xvciBmcm9tIFwiLi4vdXRpbC9DUENvbG9yXCI7XG5cbmNvbnN0XG4gICAgVElQX05BTUVTID0gW1wiUm91bmQgUGl4ZWxhdGVkXCIsIFwiUm91bmQgSGFyZCBFZGdlXCIsIFwiUm91bmQgU29mdFwiLCBcIlNxdWFyZSBQaXhlbGF0ZWRcIiwgXCJTcXVhcmUgSGFyZCBFZGdlXCJdLFxuICAgIEJSVVNIX1NJWkVTID0gWzEsIDIsIDMsIDQsIDUsIDYsIDcsIDgsIDksIDEwLCAxNSwgMjAsIDI1LCAzMCwgMzUsIDQwLCA0NSwgNTAsIDYwLCA3MCwgODAsIDkwLCAxMDAsIDEyNSwgMTUwLCAxNzUsIDIwMF07XG5cbmZ1bmN0aW9uIENQR3JhZGllbnRQcmV2aWV3KGNvbnRyb2xsZXIpIHtcbiAgICB2YXJcbiAgICAgICAgdGhhdCA9IHRoaXMsXG5cbiAgICAgICAgdyA9IDE1MCwgaCA9IDMyLFxuXG4gICAgICAgIGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIiksXG4gICAgICAgIGNhbnZhc0NvbnRleHQgPSBjYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpLFxuXG4gICAgICAgIGNoZWNrZXJib2FyZCA9IGNyZWF0ZUNoZWNrZXJib2FyZFBhdHRlcm4oY2FudmFzQ29udGV4dCksXG5cbiAgICAgICAgaW1hZ2UgPSBuZXcgQ1BMYXllcih3LCBoLCBcIlwiKSxcbiAgICAgICAgaW1hZ2VDYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpLFxuICAgICAgICBpbWFnZUNhbnZhc0NvbnRleHQgPSBpbWFnZUNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIiksXG5cbiAgICAgICAgZ3JhZGllbnQgPSBjb250cm9sbGVyLmdldEN1ckdyYWRpZW50KCk7XG5cbiAgICBmdW5jdGlvbiBwYWludCgpIHtcbiAgICAgICAgaW1hZ2UuZ3JhZGllbnQoaW1hZ2UuZ2V0Qm91bmRzKCksIDAsIDAsIGltYWdlLndpZHRoLCAwLCBncmFkaWVudCwgdHJ1ZSk7XG4gICAgICAgIGltYWdlQ2FudmFzQ29udGV4dC5wdXRJbWFnZURhdGEoaW1hZ2UuaW1hZ2VEYXRhLCAwLCAwLCAwLCAwLCB3LCBoKTtcblxuICAgICAgICBjYW52YXNDb250ZXh0LmZpbGxSZWN0KDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7XG4gICAgICAgIGNhbnZhc0NvbnRleHQuZHJhd0ltYWdlKGltYWdlQ2FudmFzLCAwLCAwKTtcbiAgICB9XG5cbiAgICB0aGlzLmdldEVsZW1lbnQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIGNhbnZhcztcbiAgICB9O1xuXG4gICAgY29udHJvbGxlci5vbihcImdyYWRpZW50Q2hhbmdlXCIsIGZ1bmN0aW9uKF9ncmFkaWVudCkge1xuICAgICAgICBncmFkaWVudCA9IF9ncmFkaWVudDtcblxuICAgICAgICBwYWludCgpO1xuICAgIH0pO1xuXG4gICAgY2FudmFzLndpZHRoID0gaW1hZ2VDYW52YXMud2lkdGggPSB3O1xuICAgIGNhbnZhcy5oZWlnaHQgPSBpbWFnZUNhbnZhcy5oZWlnaHQgPSBoO1xuXG4gICAgY2FudmFzLmNsYXNzTmFtZSA9ICdjaGlja2VucGFpbnQtZ3JhZGllbnQtcHJldmlldyc7XG5cbiAgICBjYW52YXNDb250ZXh0LmZpbGxTdHlsZSA9IGNoZWNrZXJib2FyZDtcblxuICAgIHBhaW50KCk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIENQQnJ1c2hQYWxldHRlKGNvbnRyb2xsZXIpIHtcbiAgICBDUFBhbGV0dGUuY2FsbCh0aGlzLCBjb250cm9sbGVyLCBcImJydXNoXCIsIFwiVG9vbCBvcHRpb25zXCIpO1xuXG4gICAgdmFyXG4gICAgICAgIGJydXNoUGFuZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLFxuXG4gICAgICAgIHRpcENvbWJvID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNlbGVjdFwiKSxcblxuICAgICAgICBhbHBoYUNCID0gbmV3IENQQ2hlY2tib3goZmFsc2UsIFwiQ29udHJvbCBicnVzaCBvcGFjaXR5IHdpdGggcGVuIHByZXNzdXJlXCIpLCBcbiAgICAgICAgYWxwaGFTbGlkZXIgPSBuZXcgQ1BTbGlkZXIoMSwgMjU1KSxcbiAgICAgICAgXG4gICAgICAgIHNpemVDQiA9IG5ldyBDUENoZWNrYm94KHRydWUsIFwiQ29udHJvbCBicnVzaCBzaXplIHdpdGggcGVuIHByZXNzdXJlXCIpLCBcbiAgICAgICAgc2l6ZVNsaWRlciA9IG5ldyBDUFNsaWRlcigxLCAyMDAsIGZhbHNlLCB0cnVlKSxcbiAgICAgICAgXG4gICAgICAgIHNjYXR0ZXJpbmdDQiAgPSBuZXcgQ1BDaGVja2JveChmYWxzZSwgXCJDb250cm9sIGJydXNoIHNjYXR0ZXJpbmcgd2l0aCBwZW4gcHJlc3N1cmVcIiksXG4gICAgICAgIHNjYXR0ZXJpbmdTbGlkZXIgPSBuZXcgQ1BTbGlkZXIoMCwgMTAwMCwgZmFsc2UsIHRydWUpLFxuICAgIFxuICAgICAgICByZXNhdFNsaWRlciA9IG5ldyBDUFNsaWRlcigwLCAxMDAsIGZhbHNlLCB0cnVlKSxcbiAgICAgICAgYmxlZWRTbGlkZXIgPSBuZXcgQ1BTbGlkZXIoMCwgMTAwLCBmYWxzZSwgdHJ1ZSksXG4gICAgICAgIHNwYWNpbmdTbGlkZXIgPSBuZXcgQ1BTbGlkZXIoMCwgMTAwLCBmYWxzZSwgdHJ1ZSksXG4gICAgICAgIHNtb290aGluZ1NsaWRlciA9IG5ldyBDUFNsaWRlcigwLCAxMDAsIGZhbHNlLCB0cnVlKSxcblxuICAgICAgICBicnVzaFByZXZpZXcgPSBuZXcgQ1BCcnVzaFBhbGV0dGUuQ1BCcnVzaFByZXZpZXcoY29udHJvbGxlciksXG5cbiAgICAgICAgZ3JhZGllbnRQYW5lbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksXG4gICAgICAgIGdyYWRpZW50UHJldmlldyA9IG5ldyBDUEdyYWRpZW50UHJldmlldyhjb250cm9sbGVyKSxcbiAgICAgICAgXG4gICAgICAgIGdyYWRpZW50U3RhcnRTd2F0Y2ggPSBuZXcgQ1BDb2xvclN3YXRjaChuZXcgQ1BDb2xvcihjb250cm9sbGVyLmdldEN1ckdyYWRpZW50KClbMF0gJiAweEZGRkZGRikpLFxuICAgICAgICBncmFkaWVudEVuZFN3YXRjaCA9IG5ldyBDUENvbG9yU3dhdGNoKG5ldyBDUENvbG9yKGNvbnRyb2xsZXIuZ2V0Q3VyR3JhZGllbnQoKVsxXSAmIDB4RkZGRkZGKSksXG5cbiAgICAgICAgYm9keSA9IHRoaXMuZ2V0Qm9keUVsZW1lbnQoKTtcblxuICAgIGZ1bmN0aW9uIHNsaWRlckNoZWNrYm94R3JvdXAoY2hlY2tib3gsIHNsaWRlcikge1xuICAgICAgICB2YXJcbiAgICAgICAgZ3JvdXAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICBcbiAgICAgICAgZ3JvdXAuY2xhc3NOYW1lID0gXCJjaGlja2VucGFpbnQtY2hlY2tib3gtc2xpZGVyLWdyb3VwXCI7XG4gICAgICAgIFxuICAgICAgICBncm91cC5hcHBlbmRDaGlsZChjaGVja2JveC5nZXRFbGVtZW50KCkpO1xuICAgICAgICBncm91cC5hcHBlbmRDaGlsZChzbGlkZXIuZ2V0RWxlbWVudCgpKTtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiBncm91cDtcbiAgICB9XG4gICAgXG4gICAgZnVuY3Rpb24gZmlsbENvbWJvYm94KGNvbWJvLCBvcHRpb25OYW1lcykge1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG9wdGlvbk5hbWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgXG4gICAgICAgICAgICAgICAgb3B0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIm9wdGlvblwiKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgb3B0aW9uLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKG9wdGlvbk5hbWVzW2ldKSk7XG4gICAgICAgICAgICBvcHRpb24udmFsdWUgPSBpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb21iby5hcHBlbmRDaGlsZChvcHRpb24pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYnVpbGRCcnVzaFBhbmVsKCkge1xuICAgICAgICBhbHBoYVNsaWRlci50aXRsZSA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgcmV0dXJuIFwiT3BhY2l0eTogXCIgKyB2YWx1ZTtcbiAgICAgICAgfTtcblxuICAgICAgICBhbHBoYVNsaWRlci5vbigndmFsdWVDaGFuZ2UnLCBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgIGNvbnRyb2xsZXIuc2V0QWxwaGEodmFsdWUpO1xuICAgICAgICB9KTtcblxuICAgICAgICBzaXplU2xpZGVyLnRpdGxlID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICByZXR1cm4gXCJCcnVzaCBzaXplOiBcIiArIHZhbHVlO1xuICAgICAgICB9XG5cbiAgICAgICAgc2l6ZVNsaWRlci5vbigndmFsdWVDaGFuZ2UnLCBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgIGNvbnRyb2xsZXIuc2V0QnJ1c2hTaXplKHZhbHVlKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmVzYXRTbGlkZXIudGl0bGUgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgIHJldHVybiBcIkNvbG9yOiBcIiArIHZhbHVlICsgXCIlXCI7XG4gICAgICAgIH07XG5cbiAgICAgICAgcmVzYXRTbGlkZXIub24oJ3ZhbHVlQ2hhbmdlJywgZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICBjb250cm9sbGVyLmdldEJydXNoSW5mbygpLnJlc2F0ID0gdmFsdWUgLyAxMDAuMDtcbiAgICAgICAgICAgIGNvbnRyb2xsZXIuY2FsbFRvb2xMaXN0ZW5lcnMoKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgYmxlZWRTbGlkZXIudGl0bGUgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgIHJldHVybiBcIkJsZW5kOiBcIiArIHZhbHVlICsgXCIlXCI7XG4gICAgICAgIH07XG5cbiAgICAgICAgYmxlZWRTbGlkZXIub24oJ3ZhbHVlQ2hhbmdlJywgZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICBjb250cm9sbGVyLmdldEJydXNoSW5mbygpLmJsZWVkID0gdmFsdWUgLyAxMDAuMDtcbiAgICAgICAgICAgIGNvbnRyb2xsZXIuY2FsbFRvb2xMaXN0ZW5lcnMoKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgc3BhY2luZ1NsaWRlci50aXRsZSA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgcmV0dXJuIFwiU3BhY2luZzogXCIgKyB2YWx1ZSArIFwiJVwiO1xuICAgICAgICB9O1xuXG4gICAgICAgIHNwYWNpbmdTbGlkZXIub24oJ3ZhbHVlQ2hhbmdlJywgZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICBjb250cm9sbGVyLmdldEJydXNoSW5mbygpLnNwYWNpbmcgPSB2YWx1ZSAvIDEwMC4wO1xuICAgICAgICAgICAgY29udHJvbGxlci5jYWxsVG9vbExpc3RlbmVycygpO1xuICAgICAgICB9KTtcblxuICAgICAgICBzY2F0dGVyaW5nU2xpZGVyLnRpdGxlID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICByZXR1cm4gXCJTY2F0dGVyaW5nOiBcIiArIHZhbHVlICsgXCIlXCI7XG4gICAgICAgIH07XG5cbiAgICAgICAgc2NhdHRlcmluZ1NsaWRlci5vbigndmFsdWVDaGFuZ2UnLCBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgIGNvbnRyb2xsZXIuZ2V0QnJ1c2hJbmZvKCkuc2NhdHRlcmluZyA9IHZhbHVlIC8gMTAwLjA7XG4gICAgICAgICAgICBjb250cm9sbGVyLmNhbGxUb29sTGlzdGVuZXJzKCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHNtb290aGluZ1NsaWRlci50aXRsZSA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgcmV0dXJuIFwiU21vb3RoaW5nOiBcIiArIHZhbHVlICsgXCIlXCI7XG4gICAgICAgIH07XG5cbiAgICAgICAgc21vb3RoaW5nU2xpZGVyLm9uKCd2YWx1ZUNoYW5nZScsIGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgY29udHJvbGxlci5nZXRCcnVzaEluZm8oKS5zbW9vdGhpbmcgPSB2YWx1ZSAvIDEwMC4wO1xuICAgICAgICAgICAgY29udHJvbGxlci5jYWxsVG9vbExpc3RlbmVycygpO1xuICAgICAgICB9KTtcblxuICAgICAgICBzY2F0dGVyaW5nQ0Iub24oJ3ZhbHVlQ2hhbmdlJywgZnVuY3Rpb24gKHN0YXRlKSB7XG4gICAgICAgICAgICBjb250cm9sbGVyLmdldEJydXNoSW5mbygpLnByZXNzdXJlU2NhdHRlcmluZyA9IHN0YXRlO1xuICAgICAgICAgICAgY29udHJvbGxlci5jYWxsVG9vbExpc3RlbmVycygpO1xuICAgICAgICB9KTtcblxuICAgICAgICBhbHBoYUNCLm9uKCd2YWx1ZUNoYW5nZScsIGZ1bmN0aW9uIChzdGF0ZSkge1xuICAgICAgICAgICAgY29udHJvbGxlci5nZXRCcnVzaEluZm8oKS5wcmVzc3VyZUFscGhhID0gc3RhdGU7XG4gICAgICAgICAgICBjb250cm9sbGVyLmNhbGxUb29sTGlzdGVuZXJzKCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHNpemVDQi5vbigndmFsdWVDaGFuZ2UnLCBmdW5jdGlvbiAoc3RhdGUpIHtcbiAgICAgICAgICAgIGNvbnRyb2xsZXIuZ2V0QnJ1c2hJbmZvKCkucHJlc3N1cmVTaXplID0gc3RhdGU7XG4gICAgICAgICAgICBjb250cm9sbGVyLmNhbGxUb29sTGlzdGVuZXJzKCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRpcENvbWJvLmFkZEV2ZW50TGlzdGVuZXIoXCJjaGFuZ2VcIiwgZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgY29udHJvbGxlci5nZXRCcnVzaEluZm8oKS50eXBlID0gcGFyc2VJbnQodGlwQ29tYm8udmFsdWUsIDEwKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGlwQ29tYm8uY2xhc3NOYW1lID0gJ2Zvcm0tY29udHJvbCc7XG4gICAgICAgIGZpbGxDb21ib2JveCh0aXBDb21ibywgVElQX05BTUVTKTtcblxuICAgICAgICBicnVzaFBhbmVsLmFwcGVuZENoaWxkKHRpcENvbWJvKTtcblxuICAgICAgICBicnVzaFBhbmVsLmFwcGVuZENoaWxkKGJydXNoUHJldmlldy5nZXRFbGVtZW50KCkpO1xuXG4gICAgICAgIGJydXNoUGFuZWwuYXBwZW5kQ2hpbGQoc2xpZGVyQ2hlY2tib3hHcm91cChzaXplQ0IsIHNpemVTbGlkZXIpKTtcbiAgICAgICAgYnJ1c2hQYW5lbC5hcHBlbmRDaGlsZChzbGlkZXJDaGVja2JveEdyb3VwKGFscGhhQ0IsIGFscGhhU2xpZGVyKSk7XG4gICAgICAgIGJydXNoUGFuZWwuYXBwZW5kQ2hpbGQocmVzYXRTbGlkZXIuZ2V0RWxlbWVudCgpKTtcbiAgICAgICAgYnJ1c2hQYW5lbC5hcHBlbmRDaGlsZChibGVlZFNsaWRlci5nZXRFbGVtZW50KCkpO1xuICAgICAgICBicnVzaFBhbmVsLmFwcGVuZENoaWxkKHNwYWNpbmdTbGlkZXIuZ2V0RWxlbWVudCgpKTtcbiAgICAgICAgYnJ1c2hQYW5lbC5hcHBlbmRDaGlsZChzbGlkZXJDaGVja2JveEdyb3VwKHNjYXR0ZXJpbmdDQiwgc2NhdHRlcmluZ1NsaWRlcikpO1xuICAgICAgICBicnVzaFBhbmVsLmFwcGVuZENoaWxkKHNtb290aGluZ1NsaWRlci5nZXRFbGVtZW50KCkpO1xuXG4gICAgICAgIGFscGhhQ0Iuc2V0VmFsdWUoY29udHJvbGxlci5nZXRCcnVzaEluZm8oKS5wcmVzc3VyZUFscGhhKTtcbiAgICAgICAgYWxwaGFTbGlkZXIuc2V0VmFsdWUoY29udHJvbGxlci5nZXRBbHBoYSgpKTtcblxuICAgICAgICBzaXplQ0Iuc2V0VmFsdWUoY29udHJvbGxlci5nZXRCcnVzaEluZm8oKS5wcmVzc3VyZVNpemUpO1xuICAgICAgICBzaXplU2xpZGVyLnNldFZhbHVlKGNvbnRyb2xsZXIuZ2V0QnJ1c2hTaXplKCkpO1xuXG4gICAgICAgIHNjYXR0ZXJpbmdDQi5zZXRWYWx1ZShjb250cm9sbGVyLmdldEJydXNoSW5mbygpLnByZXNzdXJlU2NhdHRlcmluZyk7XG4gICAgICAgIHNjYXR0ZXJpbmdTbGlkZXIuc2V0VmFsdWUofn4oY29udHJvbGxlci5nZXRCcnVzaEluZm8oKS5zY2F0dGVyaW5nICogMTAwKSk7XG5cbiAgICAgICAgdGlwQ29tYm8udmFsdWUgPSBjb250cm9sbGVyLmdldEJydXNoSW5mbygpLnR5cGU7XG5cbiAgICAgICAgcmVzYXRTbGlkZXIuc2V0VmFsdWUofn4oY29udHJvbGxlci5nZXRCcnVzaEluZm8oKS5yZXNhdCAqIDEwMCkpO1xuICAgICAgICBibGVlZFNsaWRlci5zZXRWYWx1ZSh+fihjb250cm9sbGVyLmdldEJydXNoSW5mbygpLmJsZWVkICogMTAwKSk7XG4gICAgICAgIHNwYWNpbmdTbGlkZXIuc2V0VmFsdWUofn4oY29udHJvbGxlci5nZXRCcnVzaEluZm8oKS5zcGFjaW5nICogMTAwKSk7XG4gICAgICAgIHNtb290aGluZ1NsaWRlci5zZXRWYWx1ZSh+fihjb250cm9sbGVyLmdldEJydXNoSW5mbygpLnNtb290aGluZyAqIDEwMCkpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHVwZGF0ZUdyYWRpZW50KCkge1xuICAgICAgICB2YXJcbiAgICAgICAgICAgIGdyYWRpZW50ID0gbmV3IEFycmF5KDIpO1xuXG4gICAgICAgIGdyYWRpZW50WzBdID0gKGdyYWRpZW50U3RhcnRTd2F0Y2guZ2V0QWxwaGEoKSA8PCAyNCkgfCBncmFkaWVudFN0YXJ0U3dhdGNoLmdldENvbG9yUmdiKCk7XG4gICAgICAgIGdyYWRpZW50WzFdID0gKGdyYWRpZW50RW5kU3dhdGNoLmdldEFscGhhKCkgPDwgMjQpIHwgIGdyYWRpZW50RW5kU3dhdGNoLmdldENvbG9yUmdiKCk7XG5cbiAgICAgICAgY29udHJvbGxlci5zZXRDdXJHcmFkaWVudChncmFkaWVudCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYnVpbGRHcmFkaWVudFBhbmVsKCkge1xuICAgICAgICBncmFkaWVudFBhbmVsLmNsYXNzTmFtZSA9IFwiY2hpY2tlbnBhaW50LWdyYWRpZW50LXBhbmVsXCI7XG4gICAgICAgIGdyYWRpZW50UGFuZWwuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuXG4gICAgICAgIGdyYWRpZW50U3RhcnRTd2F0Y2gub24oXCJjb2xvckNoYW5nZVwiLCB1cGRhdGVHcmFkaWVudCk7XG4gICAgICAgIGdyYWRpZW50U3RhcnRTd2F0Y2gub24oXCJhbHBoYUNoYW5nZVwiLCB1cGRhdGVHcmFkaWVudCk7XG4gICAgICAgIGdyYWRpZW50RW5kU3dhdGNoLm9uKFwiY29sb3JDaGFuZ2VcIiwgdXBkYXRlR3JhZGllbnQpO1xuICAgICAgICBncmFkaWVudEVuZFN3YXRjaC5vbihcImFscGhhQ2hhbmdlXCIsIHVwZGF0ZUdyYWRpZW50KTtcblxuICAgICAgICB2YXJcbiAgICAgICAgICAgIHRpdGxlLCBjb2xvcnNHcm91cCwgY29sb3JHcm91cDtcblxuICAgICAgICB0aXRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpO1xuICAgICAgICB0aXRsZS5pbm5lckhUTUwgPSBcIkdyYWRpZW50XCI7XG5cbiAgICAgICAgZ3JhZGllbnRQYW5lbC5hcHBlbmRDaGlsZCh0aXRsZSk7XG4gICAgICAgIGdyYWRpZW50UGFuZWwuYXBwZW5kQ2hpbGQoZ3JhZGllbnRQcmV2aWV3LmdldEVsZW1lbnQoKSk7XG5cbiAgICAgICAgY29sb3JzR3JvdXAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICBjb2xvcnNHcm91cC5jbGFzc05hbWUgPSBcImNoaWNrZW5wYWludC1ncmFkaWVudC1jb2xvcnNcIjtcblxuICAgICAgICBjb2xvckdyb3VwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgY29sb3JHcm91cC5jbGFzc05hbWUgPSBcImNoaWNrZW5wYWludC1ncmFkaWVudC1zdGFydC1jb2xvclwiO1xuICAgICAgICBcbiAgICAgICAgY29sb3JHcm91cC5hcHBlbmRDaGlsZChncmFkaWVudFN0YXJ0U3dhdGNoLmdldEVsZW1lbnQoKSk7XG5cbiAgICAgICAgY29sb3JzR3JvdXAuYXBwZW5kQ2hpbGQoY29sb3JHcm91cCk7XG5cbiAgICAgICAgY29sb3JHcm91cCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIGNvbG9yR3JvdXAuY2xhc3NOYW1lID0gXCJjaGlja2VucGFpbnQtZ3JhZGllbnQtZW5kLWNvbG9yXCI7XG5cbiAgICAgICAgY29sb3JHcm91cC5hcHBlbmRDaGlsZChncmFkaWVudEVuZFN3YXRjaC5nZXRFbGVtZW50KCkpO1xuXG4gICAgICAgIGNvbG9yc0dyb3VwLmFwcGVuZENoaWxkKGNvbG9yR3JvdXApO1xuXG4gICAgICAgIGdyYWRpZW50UGFuZWwuYXBwZW5kQ2hpbGQoY29sb3JzR3JvdXApO1xuICAgIH1cblxuICAgIGJ1aWxkQnJ1c2hQYW5lbCgpO1xuICAgIGJvZHkuYXBwZW5kQ2hpbGQoYnJ1c2hQYW5lbCk7XG5cbiAgICBidWlsZEdyYWRpZW50UGFuZWwoKTtcbiAgICBib2R5LmFwcGVuZENoaWxkKGdyYWRpZW50UGFuZWwpO1xuXG4gICAgY29udHJvbGxlci5vbigndG9vbENoYW5nZScsIGZ1bmN0aW9uKHRvb2wsIHRvb2xJbmZvKSB7XG4gICAgICAgIGFscGhhU2xpZGVyLnNldFZhbHVlKHRvb2xJbmZvLmFscGhhKTtcbiAgICAgICAgc2l6ZVNsaWRlci5zZXRWYWx1ZSh0b29sSW5mby5zaXplKTtcbiAgICAgICAgc2l6ZUNCLnNldFZhbHVlKHRvb2xJbmZvLnByZXNzdXJlU2l6ZSk7XG4gICAgICAgIGFscGhhQ0Iuc2V0VmFsdWUodG9vbEluZm8ucHJlc3N1cmVBbHBoYSk7XG4gICAgICAgIHRpcENvbWJvLnZhbHVlID0gdG9vbEluZm8udHlwZTtcbiAgICAgICAgc2NhdHRlcmluZ0NCLnNldFZhbHVlKHRvb2xJbmZvLnByZXNzdXJlU2NhdHRlcmluZyk7XG5cbiAgICAgICAgaWYgKH5+KHRvb2xJbmZvLnJlc2F0ICogMTAwLjApICE9IHJlc2F0U2xpZGVyLnZhbHVlKSB7XG4gICAgICAgICAgICByZXNhdFNsaWRlci5zZXRWYWx1ZSh+fih0b29sSW5mby5yZXNhdCAqIDEwMC4wKSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAofn4odG9vbEluZm8uYmxlZWQgKiAxMDAuMCkgIT0gYmxlZWRTbGlkZXIudmFsdWUpIHtcbiAgICAgICAgICAgIGJsZWVkU2xpZGVyLnNldFZhbHVlKH5+KHRvb2xJbmZvLmJsZWVkICogMTAwLjApKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh+fih0b29sSW5mby5zcGFjaW5nICogMTAwLjApICE9IHNwYWNpbmdTbGlkZXIudmFsdWUpIHtcbiAgICAgICAgICAgIHNwYWNpbmdTbGlkZXIuc2V0VmFsdWUofn4odG9vbEluZm8uc3BhY2luZyAqIDEwMC4wKSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAofn4odG9vbEluZm8uc2NhdHRlcmluZyAqIDEwMC4wKSAhPSBzY2F0dGVyaW5nU2xpZGVyLnZhbHVlKSB7XG4gICAgICAgICAgICBzY2F0dGVyaW5nU2xpZGVyLnNldFZhbHVlKH5+KHRvb2xJbmZvLnNjYXR0ZXJpbmcgKiAxMDAuMCkpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKH5+KHRvb2xJbmZvLnNtb290aGluZyAqIDEwMC4wKSAhPSBzbW9vdGhpbmdTbGlkZXIudmFsdWUpIHtcbiAgICAgICAgICAgIHNtb290aGluZ1NsaWRlci5zZXRWYWx1ZSh+fih0b29sSW5mby5zbW9vdGhpbmcgKiAxMDAuMCkpO1xuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICBjb250cm9sbGVyLm9uKCdtb2RlQ2hhbmdlJywgZnVuY3Rpb24obW9kZSkge1xuICAgICAgIHN3aXRjaCAobW9kZSkge1xuICAgICAgICAgICBjYXNlIENoaWNrZW5QYWludC5NX0dSQURJRU5URklMTDpcbiAgICAgICAgICAgICAgIGJydXNoUGFuZWwuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgICAgICAgICAgZ3JhZGllbnRQYW5lbC5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgIGJydXNoUGFuZWwuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcbiAgICAgICAgICAgICAgIGdyYWRpZW50UGFuZWwuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgICAgICBicmVhaztcbiAgICAgICB9XG4gICAgfSk7XG5cbiAgICBrZXkoXCIxLDIsMyw0LDUsNiw3LDgsOSwwXCIsIGZ1bmN0aW9uKGV2ZW50LCBoYW5kbGVyKSB7XG4gICAgICAgIHZhclxuICAgICAgICAgICAgc2hvcnRjdXQgPSBwYXJzZUludChoYW5kbGVyLnNob3J0Y3V0LCAxMCk7XG5cbiAgICAgICAgaWYgKHNob3J0Y3V0ID09IDApIHtcbiAgICAgICAgICAgIHNob3J0Y3V0ID0gMTA7XG4gICAgICAgIH1cblxuICAgICAgICBjb250cm9sbGVyLnNldEFscGhhKE1hdGgucm91bmQoc2hvcnRjdXQgLyAxMCAqIDI1NSkpO1xuICAgIH0pO1xuXG4gICAga2V5KFwieyxbXCIsIGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXJcbiAgICAgICAgICAgIHNpemUgPSBjb250cm9sbGVyLmdldEJydXNoU2l6ZSgpO1xuXG4gICAgICAgIGZvciAodmFyIGkgPSBCUlVTSF9TSVpFUy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgICAgICAgaWYgKHNpemUgPiBCUlVTSF9TSVpFU1tpXSkge1xuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIuc2V0QnJ1c2hTaXplKEJSVVNIX1NJWkVTW2ldKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAga2V5KFwifSxdXCIsIGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXJcbiAgICAgICAgICAgIHNpemUgPSBjb250cm9sbGVyLmdldEJydXNoU2l6ZSgpO1xuXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgQlJVU0hfU0laRVMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmIChzaXplIDwgQlJVU0hfU0laRVNbaV0pIHtcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyLnNldEJydXNoU2l6ZShCUlVTSF9TSVpFU1tpXSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KTtcbn1cblxuQ1BCcnVzaFBhbGV0dGUucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShDUFBhbGV0dGUucHJvdG90eXBlKTtcbkNQQnJ1c2hQYWxldHRlLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IENQQnJ1c2hQYWxldHRlO1xuXG5DUEJydXNoUGFsZXR0ZS5DUEJydXNoUHJldmlldyA9IGZ1bmN0aW9uKGNvbnRyb2xsZXIpIHtcbiAgICB2YXIgXG4gICAgICAgIHNpemUgPSAxNixcbiAgICAgICAgXG4gICAgICAgIGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIiksXG4gICAgICAgIGNhbnZhc0NvbnRleHQgPSBjYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpLFxuICAgICAgICBcbiAgICAgICAgbW91c2VDYXB0dXJlZCA9IGZhbHNlO1xuICAgIFxuICAgIGZ1bmN0aW9uIHBhaW50KCkge1xuICAgICAgICBjYW52YXNDb250ZXh0LmNsZWFyUmVjdCgwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpO1xuICAgICAgICBcbiAgICAgICAgY2FudmFzQ29udGV4dC5iZWdpblBhdGgoKTtcbiAgICAgICAgY2FudmFzQ29udGV4dC5hcmMoY2FudmFzLndpZHRoIC8gMiwgY2FudmFzLmhlaWdodCAvIDIsIHNpemUgLyAyICogd2luZG93LmRldmljZVBpeGVsUmF0aW8sIDAsIE1hdGguUEkgKiAyKTtcbiAgICAgICAgY2FudmFzQ29udGV4dC5zdHJva2UoKTtcbiAgICB9XG4gICAgXG4gICAgZnVuY3Rpb24gaGFuZGxlTW91c2VEcmFnKGUpIHtcbiAgICAgICAgdmFyIFxuICAgICAgICAgICAgb2Zmc2V0ID0gJChjYW52YXMpLm9mZnNldCgpLFxuICAgICAgICAgICAgXG4gICAgICAgICAgICBwdCA9IHt4OiBlLnBhZ2VYIC0gb2Zmc2V0LmxlZnQsIHk6IGUucGFnZVkgLSBvZmZzZXQudG9wfSxcbiAgICAgICAgXG4gICAgICAgICAgICB4ID0gcHQueCAtICQoY2FudmFzKS53aWR0aCgpIC8gMixcbiAgICAgICAgICAgIHkgPSBwdC55IC0gJChjYW52YXMpLmhlaWdodCgpIC8gMixcblxuICAgICAgICAgICAgbmV3U2l6ZSA9IE1hdGgucm91bmQoTWF0aC5zcXJ0KHggKiB4ICsgeSAqIHkpICogMik7XG4gICAgICAgIFxuICAgICAgICBzaXplID0gTWF0aC5tYXgoMSwgTWF0aC5taW4oMjAwLCBuZXdTaXplKSk7XG5cbiAgICAgICAgcGFpbnQoKTtcbiAgICAgICAgY29udHJvbGxlci5zZXRCcnVzaFNpemUoc2l6ZSk7XG4gICAgfVxuICAgIFxuICAgIGZ1bmN0aW9uIGhhbmRsZU1vdXNlVXAoZSkge1xuICAgICAgICBpZiAobW91c2VDYXB0dXJlZCkge1xuICAgICAgICAgICAgbW91c2VDYXB0dXJlZCA9IGZhbHNlO1xuICAgICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCBoYW5kbGVNb3VzZVVwKTtcbiAgICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBoYW5kbGVNb3VzZURyYWcpO1xuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIHRoaXMuZ2V0RWxlbWVudCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gY2FudmFzO1xuICAgIH07XG4gICAgXG4gICAgY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgaWYgKCFtb3VzZUNhcHR1cmVkKSB7XG4gICAgICAgICAgICBtb3VzZUNhcHR1cmVkID0gdHJ1ZTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCBoYW5kbGVNb3VzZVVwKTtcbiAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBoYW5kbGVNb3VzZURyYWcpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBoYW5kbGVNb3VzZURyYWcoZSk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBcbiAgICBjb250cm9sbGVyLm9uKFwidG9vbENoYW5nZVwiLCBmdW5jdGlvbih0b29sLCB0b29sSW5mbykge1xuICAgICAgICBpZiAodG9vbEluZm8uc2l6ZSAhPSBzaXplKSB7XG4gICAgICAgICAgICBzaXplID0gdG9vbEluZm8uc2l6ZTtcbiAgICAgICAgICAgIHBhaW50KCk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBcbiAgICBjYW52YXMud2lkdGggPSA2NDsgXG4gICAgY2FudmFzLmhlaWdodCA9IDY0O1xuICAgIFxuICAgIGlmICh3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyA+IDEpIHtcbiAgICAgICAgY2FudmFzLnN0eWxlLndpZHRoID0gY2FudmFzLndpZHRoICsgJ3B4JztcbiAgICAgICAgY2FudmFzLnN0eWxlLmhlaWdodCA9IGNhbnZhcy5oZWlnaHQgKyAncHgnO1xuICAgICAgICBcbiAgICAgICAgY2FudmFzLndpZHRoID0gY2FudmFzLndpZHRoICogd2luZG93LmRldmljZVBpeGVsUmF0aW87XG4gICAgICAgIGNhbnZhcy5oZWlnaHQgPSBjYW52YXMuaGVpZ2h0ICogd2luZG93LmRldmljZVBpeGVsUmF0aW87XG4gICAgfVxuICAgIFxuICAgIGNhbnZhcy5jbGFzc05hbWUgPSAnY2hpY2tlbnBhaW50LWJydXNoLXByZXZpZXcnO1xuXG4gICAgY2FudmFzQ29udGV4dC5zdHJva2VTdHlsZSA9ICdibGFjayc7XG4gICAgY2FudmFzQ29udGV4dC5saW5lV2lkdGggPSAxLjAgKiB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbztcbiAgICBcbiAgICBwYWludCgpO1xufVxuIiwiLypcbiAgICBDaGlja2VuUGFpbnRcbiAgICBcbiAgICBDaGlja2VuUGFpbnQgaXMgYSB0cmFuc2xhdGlvbiBvZiBDaGliaVBhaW50IGZyb20gSmF2YSB0byBKYXZhU2NyaXB0XG4gICAgYnkgTmljaG9sYXMgU2hlcmxvY2sgLyBDaGlja2VuIFNtb290aGllLlxuICAgIFxuICAgIENoaWJpUGFpbnQgaXMgQ29weXJpZ2h0IChjKSAyMDA2LTIwMDggTWFyYyBTY2hlZmVyXG5cbiAgICBDaGlja2VuUGFpbnQgaXMgZnJlZSBzb2Z0d2FyZTogeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yIG1vZGlmeVxuICAgIGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgYXMgcHVibGlzaGVkIGJ5XG4gICAgdGhlIEZyZWUgU29mdHdhcmUgRm91bmRhdGlvbiwgZWl0aGVyIHZlcnNpb24gMyBvZiB0aGUgTGljZW5zZSwgb3JcbiAgICAoYXQgeW91ciBvcHRpb24pIGFueSBsYXRlciB2ZXJzaW9uLlxuXG4gICAgQ2hpY2tlblBhaW50IGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsXG4gICAgYnV0IFdJVEhPVVQgQU5ZIFdBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2ZcbiAgICBNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuICBTZWUgdGhlXG4gICAgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy5cblxuICAgIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXG4gICAgYWxvbmcgd2l0aCBDaGlja2VuUGFpbnQuIElmIG5vdCwgc2VlIDxodHRwOi8vd3d3LmdudS5vcmcvbGljZW5zZXMvPi5cbiovXG5cbmltcG9ydCBDUFJlY3QgZnJvbSBcIi4uL3V0aWwvQ1BSZWN0XCI7XG5pbXBvcnQgQ1BUcmFuc2Zvcm0gZnJvbSBcIi4uL3V0aWwvQ1BUcmFuc2Zvcm1cIjtcbmltcG9ydCBDUFdhY29tVGFibGV0IGZyb20gXCIuLi91dGlsL0NQV2Fjb21UYWJsZXRcIjtcbmltcG9ydCBDUEJlemllciBmcm9tIFwiLi4vdXRpbC9DUEJlemllclwiO1xuXG5pbXBvcnQgQ1BCcnVzaEluZm8gZnJvbSBcIi4uL2VuZ2luZS9DUEJydXNoSW5mb1wiO1xuXG5pbXBvcnQge2NyZWF0ZUNoZWNrZXJib2FyZFBhdHRlcm59IGZyb20gXCIuL0NQR1VJVXRpbHNcIjtcbmltcG9ydCBDUFNjcm9sbGJhciBmcm9tIFwiLi9DUFNjcm9sbGJhclwiO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBDUENhbnZhcyhjb250cm9sbGVyKSB7XG4gICAgY29uc3RcbiAgICAgICAgQlVUVE9OX1BSSU1BUlkgPSAwLFxuICAgICAgICBCVVRUT05fV0hFRUwgPSAxLFxuICAgICAgICBCVVRUT05fU0VDT05EQVJZID0gMixcblxuICAgICAgICBNSU5fWk9PTSA9IDAuMTAsXG4gICAgICAgIE1BWF9aT09NID0gMTYuMDtcblxuICAgIHZhclxuICAgICAgICB0aGF0ID0gdGhpcyxcbiAgICBcbiAgICAgICAgY2FudmFzQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSxcbiAgICAgICAgY2FudmFzQ29udGFpbmVyVG9wID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSxcbiAgICAgICAgY2FudmFzQ29udGFpbmVyQm90dG9tID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSxcbiAgICAgICAgXG4gICAgICAgIC8vIE91ciBjYW52YXMgdGhhdCBmaWxscyB0aGUgZW50aXJlIHNjcmVlblxuICAgICAgICBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpLFxuICAgICAgICBjYW52YXNDb250ZXh0ID0gY2FudmFzLmdldENvbnRleHQoXCIyZFwiKSxcbiAgICAgICAgXG4gICAgICAgIC8vIE91ciBjYWNoZSBvZiB0aGUgYXJ0d29yaydzIGZ1c2lvbiB0byBiZSBkcmF3biBvbnRvIG91ciBtYWluIGNhbnZhcyB1c2luZyBvdXIgY3VycmVudCB0cmFuc2Zvcm1cbiAgICAgICAgYXJ0d29ya0NhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIiksXG4gICAgICAgIGFydHdvcmtDYW52YXNDb250ZXh0ID0gYXJ0d29ya0NhbnZhcy5nZXRDb250ZXh0KFwiMmRcIiksXG4gICAgICAgIFxuICAgICAgICBjaGVja2VyYm9hcmRQYXR0ZXJuID0gY3JlYXRlQ2hlY2tlcmJvYXJkUGF0dGVybihjYW52YXNDb250ZXh0KSxcbiAgICAgICAgXG4gICAgICAgIGFydHdvcmsgPSBjb250cm9sbGVyLmdldEFydHdvcmsoKSxcblxuICAgICAgICAvLyBDYW52YXMgdHJhbnNmb3JtYXRpb25zXG4gICAgICAgIHpvb20gPSAxLFxuICAgICAgICBvZmZzZXRYID0gMCwgb2Zmc2V0WSA9IDAsXG4gICAgICAgIGNhbnZhc1JvdGF0aW9uID0gMC4wLFxuICAgICAgICB0cmFuc2Zvcm0gPSBuZXcgQ1BUcmFuc2Zvcm0oKSxcbiAgICAgICAgaW50ZXJwb2xhdGlvbiA9IGZhbHNlLFxuXG4gICAgICAgIC8vIEdyaWQgb3B0aW9uc1xuICAgICAgICBzaG93R3JpZCA9IGZhbHNlLFxuICAgICAgICBncmlkU2l6ZSA9IDMyLFxuICAgICAgICBcbiAgICAgICAgbW91c2VYID0gMCwgbW91c2VZID0gMCxcbiAgICAgICAgXG4gICAgICAgIGJydXNoUHJldmlldyA9IGZhbHNlLFxuICAgICAgICBcbiAgICAgICAgLyogVGhlIGxhc3QgcmVjdGFuZ2xlIHdlIGRpcnRpZWQgd2l0aCBhIGJydXNoIHByZXZpZXcgY2lyY2xlLCBvciBudWxsIGlmIG9uZSBoYXNuJ3QgYmVlbiBkcmF3biB5ZXQgKi9cbiAgICAgICAgb2xkUHJldmlld1JlY3QgPSBudWxsLFxuICAgICAgICBcbiAgICAgICAgZGVmYXVsdEN1cnNvciA9IFwiZGVmYXVsdFwiLCBtb3ZlQ3Vyc29yID0gXCJncmFiXCIsIG1vdmluZ0N1cnNvciA9IFwiZ3JhYmJpbmdcIiwgY3Jvc3NDdXJzb3IgPSBcImNyb3NzaGFpclwiLFxuICAgICAgICBtb3VzZUluID0gZmFsc2UsIG1vdXNlRG93biA9IGZhbHNlLCB3YWNvbVBlbkRvd24gPSBmYWxzZSxcbiAgICAgICAgXG4gICAgICAgIGRvbnRTdGVhbEZvY3VzID0gZmFsc2UsXG4gICAgICAgIFxuICAgICAgICAvKiBUaGUgYXJlYSBvZiB0aGUgZG9jdW1lbnQgdGhhdCBzaG91bGQgaGF2ZSBpdHMgbGF5ZXJzIGZ1c2VkIGFuZCByZXBhaW50ZWQgdG8gdGhlIHNjcmVlblxuICAgICAgICAgKiAoaS5lLiBhbiBhcmVhIG1vZGlmaWVkIGJ5IGRyYXdpbmcgdG9vbHMpLiBcbiAgICAgICAgICogXG4gICAgICAgICAqIEluaXRpYWxseSBzZXQgdG8gdGhlIHNpemUgb2YgdGhlIGFydHdvcmsgc28gd2UgY2FuIHJlcGFpbnQgdGhlIHdob2xlIHRoaW5nLlxuICAgICAgICAgKi9cbiAgICAgICAgYXJ0d29ya1VwZGF0ZVJlZ2lvbiA9IG5ldyBDUFJlY3QoMCwgMCwgYXJ0d29yay53aWR0aCwgYXJ0d29yay5oZWlnaHQpLFxuICAgICAgICBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBhcmVhIG9mIHRoZSBjYW52YXMgdGhhdCBzaG91bGQgYmUgcmVwYWludGVkIHRvIHRoZSBzY3JlZW4gZHVyaW5nIHRoZSBuZXh0IHJlcGFpbnQgaW50ZXJuYWwgKGluIGNhbnZhc1xuICAgICAgICAgKiBjb29yZGluYXRlcykuXG4gICAgICAgICAqL1xuICAgICAgICByZXBhaW50UmVnaW9uID0gbmV3IENQUmVjdCgwLCAwLCAwLCAwKSxcbiAgICAgICAgc2NoZWR1bGVkUmVwYWludCA9IGZhbHNlLFxuICAgICAgICBcbiAgICAgICAgLy9cbiAgICAgICAgLy8gTW9kZXMgc3lzdGVtOiBtb2RlcyBjb250cm9sIHRoZSB3YXkgdGhlIEdVSSBpcyByZWFjdGluZyB0byB0aGUgdXNlciBpbnB1dFxuICAgICAgICAvLyBBbGwgdGhlIHRvb2xzIGFyZSBpbXBsZW1lbnRlZCB0aHJvdWdoIG1vZGVzXG4gICAgICAgIC8vXG4gICAgICAgIFxuICAgICAgICBkZWZhdWx0TW9kZSxcbiAgICAgICAgY29sb3JQaWNrZXJNb2RlLFxuICAgICAgICBtb3ZlQ2FudmFzTW9kZSxcbiAgICAgICAgcm90YXRlQ2FudmFzTW9kZSxcbiAgICAgICAgZmxvb2RGaWxsTW9kZSxcbiAgICAgICAgZ3JhZGllbnRGaWxsTW9kZSxcbiAgICAgICAgcmVjdFNlbGVjdGlvbk1vZGUsXG4gICAgICAgIG1vdmVUb29sTW9kZSxcblxuICAgICAgICAvLyB0aGlzIG11c3QgY29ycmVzcG9uZCB0byB0aGUgc3Ryb2tlIG1vZGVzIGRlZmluZWQgaW4gQ1BUb29sSW5mb1xuICAgICAgICBkcmF3aW5nTW9kZXMgPSBbXSxcblxuICAgICAgICBjdXJEcmF3TW9kZSwgY3VyU2VsZWN0ZWRNb2RlLCBhY3RpdmVNb2RlLFxuICAgICAgICBcbiAgICAgICAgaG9yelNjcm9sbCA9IG5ldyBDUFNjcm9sbGJhcihmYWxzZSksIFxuICAgICAgICB2ZXJ0U2Nyb2xsID0gbmV3IENQU2Nyb2xsYmFyKHRydWUpLFxuICAgICAgICBcbiAgICAgICAgdGFibGV0ID0gQ1BXYWNvbVRhYmxldC5nZXRSZWYoKTtcblxuICAgIE1hdGguc2lnbiA9IE1hdGguc2lnbiB8fCBmdW5jdGlvbih4KSB7XG4gICAgICAgIHggPSAreDsgLy8gY29udmVydCB0byBhIG51bWJlclxuICAgICAgICBpZiAoeCA9PT0gMCB8fCBpc05hTih4KSkge1xuICAgICAgICAgICAgcmV0dXJuIHg7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHggPiAwID8gMSA6IC0xO1xuICAgIH07XG5cbiAgICAvLyBQYXJlbnQgY2xhc3Mgd2l0aCBlbXB0eSBldmVudCBoYW5kbGVycyBmb3IgdGhvc2UgZHJhd2luZyBtb2RlcyB0aGF0IGRvbid0IG5lZWQgZXZlcnkgZXZlbnRcbiAgICBmdW5jdGlvbiBDUE1vZGUoKSB7XG4gICAgfVxuICAgIFxuICAgIENQTW9kZS5wcm90b3R5cGUua2V5RG93biA9IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgaWYgKGUua2V5Q29kZSA9PSAzMiAvKiBTcGFjZSAqLykge1xuICAgICAgICAgICAgLy8gU3RvcCB0aGUgcGFnZSBmcm9tIHNjcm9sbGluZyBpbiBtb2RlcyB0aGF0IGRvbid0IGNhcmUgYWJvdXQgc3BhY2VcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgXG4gICAgQ1BNb2RlLnByb3RvdHlwZS5tb3VzZU1vdmVkID0gQ1BNb2RlLnByb3RvdHlwZS5wYWludCA9IENQTW9kZS5wcm90b3R5cGUubW91c2VQcmVzc2VkIFxuICAgICAgICA9IENQTW9kZS5wcm90b3R5cGUubW91c2VEcmFnZ2VkID0gQ1BNb2RlLnByb3RvdHlwZS5tb3VzZVJlbGVhc2VkIFxuICAgICAgICA9IENQTW9kZS5wcm90b3R5cGUua2V5VXAgPSBmdW5jdGlvbigpIHt9O1xuICAgIFxuICAgIC8vXG4gICAgLy8gRGVmYXVsdCBVSSBNb2RlIHdoZW4gbm90IGRvaW5nIGFueXRoaW5nOiB1c2VkIHRvIHN0YXJ0IHRoZSBvdGhlciBtb2Rlc1xuICAgIC8vXG5cbiAgICBmdW5jdGlvbiBDUERlZmF1bHRNb2RlKCkge1xuICAgIH1cbiAgICBcbiAgICBDUERlZmF1bHRNb2RlLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoQ1BNb2RlLnByb3RvdHlwZSk7XG4gICAgQ1BEZWZhdWx0TW9kZS5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBDUERlZmF1bHRNb2RlO1xuICAgIFxuICAgIENQRGVmYXVsdE1vZGUucHJvdG90eXBlLm1vdXNlUHJlc3NlZCA9IGZ1bmN0aW9uKGUsIHByZXNzdXJlKSB7XG4gICAgICAgIHZhclxuICAgICAgICAgICAgc3BhY2VQcmVzc2VkID0ga2V5LmlzUHJlc3NlZChcInNwYWNlXCIpO1xuICAgICAgICBcbiAgICAgICAgLy8gRklYTUU6IHJlcGxhY2UgdGhlIG1vdmVUb29sTW9kZSBoYWNrIGJ5IGEgbmV3IGFuZCBpbXByb3ZlZCBzeXN0ZW1cbiAgICAgICAgaWYgKCFzcGFjZVByZXNzZWQgJiYgZS5idXR0b24gPT0gQlVUVE9OX1BSSU1BUllcbiAgICAgICAgICAgICAgICAmJiAoIWUuYWx0S2V5IHx8IGN1clNlbGVjdGVkTW9kZSA9PSBtb3ZlVG9vbE1vZGUpKSB7XG5cbiAgICAgICAgICAgIGlmICghYXJ0d29yay5nZXRBY3RpdmVMYXllcigpLnZpc2libGUgJiYgY3VyU2VsZWN0ZWRNb2RlICE9IHJvdGF0ZUNhbnZhc01vZGVcbiAgICAgICAgICAgICAgICAgICAgJiYgY3VyU2VsZWN0ZWRNb2RlICE9IHJlY3RTZWxlY3Rpb25Nb2RlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuOyAvLyBkb24ndCBkcmF3IG9uIGEgaGlkZGVuIGxheWVyXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8qIFN3aXRjaCB0byB0aGUgbmV3IG1vZGUgYmVmb3JlIHRyeWluZyB0byByZXBhaW50IHRoZSBicnVzaCBwcmV2aWV3ICh0aGUgbmV3IG1vZGVcbiAgICAgICAgICAgICAqIG1pZ2h0IHdhbnQgdG8gZXJhc2UgaXQhXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGFjdGl2ZU1vZGUgPSBjdXJTZWxlY3RlZE1vZGU7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHJlcGFpbnRCcnVzaFByZXZpZXcoKTtcblxuICAgICAgICAgICAgYWN0aXZlTW9kZS5tb3VzZVByZXNzZWQoZSwgcHJlc3N1cmUpO1xuICAgICAgICB9IGVsc2UgaWYgKCFzcGFjZVByZXNzZWRcbiAgICAgICAgICAgICAgICAmJiAoZS5idXR0b24gPT0gQlVUVE9OX1NFQ09OREFSWSB8fCBlLmJ1dHRvbiA9PSBCVVRUT05fUFJJTUFSWSAmJiBlLmFsdEtleSkpIHtcbiAgICAgICAgICAgIHJlcGFpbnRCcnVzaFByZXZpZXcoKTtcblxuICAgICAgICAgICAgYWN0aXZlTW9kZSA9IGNvbG9yUGlja2VyTW9kZTtcbiAgICAgICAgICAgIGFjdGl2ZU1vZGUubW91c2VQcmVzc2VkKGUsIHByZXNzdXJlKTtcbiAgICAgICAgfSBlbHNlIGlmICgoZS5idXR0b24gPT0gQlVUVE9OX1dIRUVMIHx8IHNwYWNlUHJlc3NlZCkgJiYgIWUuYWx0S2V5KSB7XG4gICAgICAgICAgICByZXBhaW50QnJ1c2hQcmV2aWV3KCk7XG5cbiAgICAgICAgICAgIGFjdGl2ZU1vZGUgPSBtb3ZlQ2FudmFzTW9kZTtcbiAgICAgICAgICAgIGFjdGl2ZU1vZGUubW91c2VQcmVzc2VkKGUsIHByZXNzdXJlKTtcbiAgICAgICAgfSBlbHNlIGlmICgoZS5idXR0b24gPT0gQlVUVE9OX1dIRUVMIHx8IHNwYWNlUHJlc3NlZCkgJiYgZS5hbHRLZXkpIHtcbiAgICAgICAgICAgIHJlcGFpbnRCcnVzaFByZXZpZXcoKTtcblxuICAgICAgICAgICAgYWN0aXZlTW9kZSA9IHJvdGF0ZUNhbnZhc01vZGU7XG4gICAgICAgICAgICBhY3RpdmVNb2RlLm1vdXNlUHJlc3NlZChlLCBwcmVzc3VyZSk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgQ1BEZWZhdWx0TW9kZS5wcm90b3R5cGUubW91c2VNb3ZlZCA9IGZ1bmN0aW9uKGUsIHByZXNzdXJlKSB7XG4gICAgICAgIHZhclxuICAgICAgICAgICAgc3BhY2VQcmVzc2VkID0ga2V5LmlzUHJlc3NlZChcInNwYWNlXCIpO1xuICAgICAgICBcbiAgICAgICAgaWYgKCFzcGFjZVByZXNzZWQgJiYgY3VyU2VsZWN0ZWRNb2RlID09IGN1ckRyYXdNb2RlKSB7XG4gICAgICAgICAgICBicnVzaFByZXZpZXcgPSB0cnVlO1xuXG4gICAgICAgICAgICB2YXIgXG4gICAgICAgICAgICAgICAgLy9wZiA9IGNvb3JkVG9Eb2N1bWVudChtb3VzZUNvb3JkVG9DYW52YXMoe3g6IGUucGFnZVgsIHk6IGUucGFnZVl9KSksXG4gICAgICAgICAgICAgICAgciA9IGdldEJydXNoUHJldmlld092YWwoKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgci5ncm93KDIsIDIpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBJZiBhIGJydXNoIHByZXZpZXcgd2FzIGRyYXduIHByZXZpb3VzbHksIHN0cmV0Y2ggdGhlIHJlcGFpbnQgcmVnaW9uIHRvIHJlbW92ZSB0aGF0IG9sZCBjb3B5XG4gICAgICAgICAgICBpZiAob2xkUHJldmlld1JlY3QgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHIudW5pb24ob2xkUHJldmlld1JlY3QpO1xuICAgICAgICAgICAgICAgIG9sZFByZXZpZXdSZWN0ID0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuLyogICAgICAgICAgICBpZiAoYXJ0d29yay5pc1BvaW50V2l0aGluKHBmLngsIHBmLnkpKSB7XG4gICAgICAgICAgICAgICAgc2V0Q3Vyc29yKGRlZmF1bHRDdXJzb3IpOyAvLyBGSVhNRSBmaW5kIGEgY3Vyc29yIHRoYXQgZXZlcnlvbmUgbGlrZXNcbiAgICAgICAgICAgIH0gZWxzZSB7ICovXG4gICAgICAgICAgICAgICAgc2V0Q3Vyc29yKGRlZmF1bHRDdXJzb3IpO1xuICAgICAgICAgICAgLy99XG5cbiAgICAgICAgICAgIHJlcGFpbnRSZWN0KHIpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBcbiAgICBDUERlZmF1bHRNb2RlLnByb3RvdHlwZS5rZXlEb3duID0gZnVuY3Rpb24oZSkge1xuICAgICAgICBpZiAoZS5rZXlDb2RlID09IDMyIC8qIFNwYWNlICovKSB7XG4gICAgICAgICAgICBpZiAoZS5hbHRLZXkpIHtcbiAgICAgICAgICAgICAgICBhY3RpdmVNb2RlID0gcm90YXRlQ2FudmFzTW9kZTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgYWN0aXZlTW9kZSA9IG1vdmVDYW52YXNNb2RlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYWN0aXZlTW9kZS5rZXlEb3duKGUpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBcbiAgICBDUERlZmF1bHRNb2RlLnByb3RvdHlwZS5wYWludCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAoYnJ1c2hQcmV2aWV3ICYmIGN1clNlbGVjdGVkTW9kZSA9PSBjdXJEcmF3TW9kZSkge1xuICAgICAgICAgICAgYnJ1c2hQcmV2aWV3ID0gZmFsc2U7XG5cbiAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgIHIgPSBnZXRCcnVzaFByZXZpZXdPdmFsKCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNhbnZhc0NvbnRleHQuYmVnaW5QYXRoKCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNhbnZhc0NvbnRleHQuYXJjKFxuICAgICAgICAgICAgICAgIChyLmxlZnQgKyByLnJpZ2h0KSAvIDIsXG4gICAgICAgICAgICAgICAgKHIudG9wICsgci5ib3R0b20pIC8gMixcbiAgICAgICAgICAgICAgICByLmdldFdpZHRoKCkgLyAyLFxuICAgICAgICAgICAgICAgIDAsXG4gICAgICAgICAgICAgICAgTWF0aC5QSSAqIDJcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGNhbnZhc0NvbnRleHQuc3Ryb2tlKCk7XG5cbiAgICAgICAgICAgIHIuZ3JvdygyLCAyKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKG9sZFByZXZpZXdSZWN0ID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBvbGRQcmV2aWV3UmVjdCA9IHI7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIG9sZFByZXZpZXdSZWN0LnVuaW9uKHIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICBcbiAgICBmdW5jdGlvbiBDUEZyZWVoYW5kTW9kZSgpIHtcbiAgICAgICAgdGhpcy5kcmFnTGVmdCA9IGZhbHNlLFxuICAgICAgICB0aGlzLnNtb290aE1vdXNlID0ge3g6MC4wLCB5OjAuMH07XG4gICAgfVxuICAgIFxuICAgIENQRnJlZWhhbmRNb2RlLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoQ1BNb2RlLnByb3RvdHlwZSk7XG4gICAgQ1BGcmVlaGFuZE1vZGUucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gQ1BGcmVlaGFuZE1vZGU7XG4gICAgXG4gICAgQ1BGcmVlaGFuZE1vZGUucHJvdG90eXBlLm1vdXNlUHJlc3NlZCA9IGZ1bmN0aW9uKGUsIHByZXNzdXJlKSB7XG4gICAgICAgIGlmICghdGhpcy5kcmFnTGVmdCAmJiBlLmJ1dHRvbiA9PSBCVVRUT05fUFJJTUFSWSkge1xuICAgICAgICAgICAgdmFyIFxuICAgICAgICAgICAgICAgIHBmID0gY29vcmRUb0RvY3VtZW50KHt4OiBtb3VzZVgsIHk6bW91c2VZfSk7XG5cbiAgICAgICAgICAgIHRoaXMuZHJhZ0xlZnQgPSB0cnVlO1xuICAgICAgICAgICAgYXJ0d29yay5iZWdpblN0cm9rZShwZi54LCBwZi55LCBwcmVzc3VyZSk7XG5cbiAgICAgICAgICAgIHRoaXMuc21vb3RoTW91c2UgPSBwZjtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBDUEZyZWVoYW5kTW9kZS5wcm90b3R5cGUubW91c2VEcmFnZ2VkID0gZnVuY3Rpb24oZSwgcHJlc3N1cmUpIHtcbiAgICAgICAgdmFyIFxuICAgICAgICAgICAgcGYgPSBjb29yZFRvRG9jdW1lbnQoe3g6IG1vdXNlWCwgeTogbW91c2VZfSksXG4gICAgICAgICAgICBzbW9vdGhpbmcgPSBNYXRoLm1pbigwLjk5OSwgTWF0aC5wb3coY29udHJvbGxlci5nZXRCcnVzaEluZm8oKS5zbW9vdGhpbmcsIDAuMykpO1xuXG4gICAgICAgIHRoaXMuc21vb3RoTW91c2UueCA9ICgxLjAgLSBzbW9vdGhpbmcpICogcGYueCArIHNtb290aGluZyAqIHRoaXMuc21vb3RoTW91c2UueDtcbiAgICAgICAgdGhpcy5zbW9vdGhNb3VzZS55ID0gKDEuMCAtIHNtb290aGluZykgKiBwZi55ICsgc21vb3RoaW5nICogdGhpcy5zbW9vdGhNb3VzZS55O1xuXG4gICAgICAgIGlmICh0aGlzLmRyYWdMZWZ0KSB7XG4gICAgICAgICAgICBhcnR3b3JrLmNvbnRpbnVlU3Ryb2tlKHRoaXMuc21vb3RoTW91c2UueCwgdGhpcy5zbW9vdGhNb3VzZS55LCBwcmVzc3VyZSk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgQ1BGcmVlaGFuZE1vZGUucHJvdG90eXBlLm1vdXNlUmVsZWFzZWQgPSBmdW5jdGlvbihlKSB7XG4gICAgICAgIGlmICh0aGlzLmRyYWdMZWZ0ICYmIGUuYnV0dG9uID09IEJVVFRPTl9QUklNQVJZKSB7XG4gICAgICAgICAgICB0aGlzLmRyYWdMZWZ0ID0gZmFsc2U7XG4gICAgICAgICAgICBhcnR3b3JrLmVuZFN0cm9rZSgpO1xuXG4gICAgICAgICAgICBhY3RpdmVNb2RlID0gZGVmYXVsdE1vZGU7IC8vIHlpZWxkIGNvbnRyb2wgdG8gdGhlIGRlZmF1bHQgbW9kZVxuICAgICAgICB9XG4gICAgfTtcbiAgICAgICAgXG4gICAgQ1BGcmVlaGFuZE1vZGUucHJvdG90eXBlLm1vdXNlTW92ZWQgPSBDUEZyZWVoYW5kTW9kZS5wcm90b3R5cGUucGFpbnQgPSBmdW5jdGlvbihlKSB7XG4gICAgfTtcbiAgICBcbiAgICBmdW5jdGlvbiBDUExpbmVNb2RlKCkge1xuICAgICAgICB2YXJcbiAgICAgICAgICAgIGRyYWdMaW5lID0gZmFsc2UsXG4gICAgICAgICAgICBkcmFnTGluZUZyb20sIGRyYWdMaW5lVG8sXG4gICAgICAgICAgICBMSU5FX1BSRVZJRVdfV0lEVEggPSAxO1xuXG4gICAgICAgIHRoaXMubW91c2VQcmVzc2VkID0gZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgaWYgKCFkcmFnTGluZSAmJiBlLmJ1dHRvbiA9PSBCVVRUT05fUFJJTUFSWSkge1xuICAgICAgICAgICAgICAgIGRyYWdMaW5lID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBkcmFnTGluZUZyb20gPSBkcmFnTGluZVRvID0ge3g6IG1vdXNlWCArIDAuNSwgeTogbW91c2VZICsgMC41fTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLm1vdXNlRHJhZ2dlZCA9IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgIC8vIFRoZSBvbGQgbGluZSBwb3NpdGlvbiB0aGF0IHdlJ2xsIGludmFsaWRhdGUgZm9yIHJlZHJhd1xuICAgICAgICAgICAgICAgIGludmFsaWRhdGVSZWN0ID0gbmV3IENQUmVjdChcbiAgICAgICAgICAgICAgICAgICAgTWF0aC5taW4oZHJhZ0xpbmVGcm9tLngsIGRyYWdMaW5lVG8ueCkgLSBMSU5FX1BSRVZJRVdfV0lEVEggLSAxLFxuICAgICAgICAgICAgICAgICAgICBNYXRoLm1pbihkcmFnTGluZUZyb20ueSwgZHJhZ0xpbmVUby55KSAtIExJTkVfUFJFVklFV19XSURUSCAtIDEsXG4gICAgICAgICAgICAgICAgICAgIE1hdGgubWF4KGRyYWdMaW5lRnJvbS54LCBkcmFnTGluZVRvLngpICsgTElORV9QUkVWSUVXX1dJRFRIICsgMSArIDEsXG4gICAgICAgICAgICAgICAgICAgIE1hdGgubWF4KGRyYWdMaW5lRnJvbS55LCBkcmFnTGluZVRvLnkpICsgTElORV9QUkVWSUVXX1dJRFRIICsgMSArIDFcbiAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBkcmFnTGluZVRvID0ge3g6IG1vdXNlWCArIDAuNSwgeTogbW91c2VZICsgMC41fTsgLy8gVGFyZ2V0IGNlbnRyZSBvZiBwaXhlbFxuXG4gICAgICAgICAgICBpZiAoZS5zaGlmdEtleSkge1xuICAgICAgICAgICAgICAgIC8vIFNuYXAgdG8gbmVhcmVzdCA0NSBkZWdyZWVzXG4gICAgICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgICAgIHNuYXAgPSBNYXRoLlBJIC8gNCxcbiAgICAgICAgICAgICAgICAgICAgYW5nbGUgPSBNYXRoLnJvdW5kKE1hdGguYXRhbjIoZHJhZ0xpbmVUby55IC0gZHJhZ0xpbmVGcm9tLnksIGRyYWdMaW5lVG8ueCAtIGRyYWdMaW5lRnJvbS54KSAvIHNuYXApO1xuXG4gICAgICAgICAgICAgICAgc3dpdGNoIChhbmdsZSkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGRyYWdMaW5lVG8ueSA9IGRyYWdMaW5lRnJvbS55O1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNjpcbiAgICAgICAgICAgICAgICAgICAgICAgIGRyYWdMaW5lVG8ueCA9IGRyYWdMaW5lRnJvbS54O1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgYW5nbGUgKj0gc25hcDtcblxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVuZ3RoID0gTWF0aC5zcXJ0KChkcmFnTGluZVRvLnkgLSBkcmFnTGluZUZyb20ueSkgKiAoZHJhZ0xpbmVUby55IC0gZHJhZ0xpbmVGcm9tLnkpICsgKGRyYWdMaW5lVG8ueCAtIGRyYWdMaW5lRnJvbS54KSAqIChkcmFnTGluZVRvLnggLSBkcmFnTGluZUZyb20ueCkpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBkcmFnTGluZVRvLnggPSBkcmFnTGluZUZyb20ueCArIGxlbmd0aCAqIE1hdGguY29zKGFuZ2xlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRyYWdMaW5lVG8ueSA9IGRyYWdMaW5lRnJvbS55ICsgbGVuZ3RoICogTWF0aC5zaW4oYW5nbGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gVGhlIG5ldyBsaW5lIHBvc2l0aW9uXG4gICAgICAgICAgICBpbnZhbGlkYXRlUmVjdC51bmlvbihuZXcgQ1BSZWN0KFxuICAgICAgICAgICAgICAgIE1hdGgubWluKGRyYWdMaW5lRnJvbS54LCBkcmFnTGluZVRvLngpIC0gTElORV9QUkVWSUVXX1dJRFRIIC0gMSxcbiAgICAgICAgICAgICAgICBNYXRoLm1pbihkcmFnTGluZUZyb20ueSwgZHJhZ0xpbmVUby55KSAtIExJTkVfUFJFVklFV19XSURUSCAtIDEsXG4gICAgICAgICAgICAgICAgTWF0aC5tYXgoZHJhZ0xpbmVGcm9tLngsIGRyYWdMaW5lVG8ueCkgKyBMSU5FX1BSRVZJRVdfV0lEVEggKyAxICsgMSxcbiAgICAgICAgICAgICAgICBNYXRoLm1heChkcmFnTGluZUZyb20ueSwgZHJhZ0xpbmVUby55KSArIExJTkVfUFJFVklFV19XSURUSCArIDEgKyAxXG4gICAgICAgICAgICApKTtcblxuICAgICAgICAgICAgcmVwYWludFJlY3QoaW52YWxpZGF0ZVJlY3QpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMubW91c2VSZWxlYXNlZCA9IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgIGlmIChkcmFnTGluZSAmJiBlLmJ1dHRvbiA9PSBCVVRUT05fUFJJTUFSWSkge1xuICAgICAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgICAgICBmcm9tID0gY29vcmRUb0RvY3VtZW50KGRyYWdMaW5lRnJvbSksXG4gICAgICAgICAgICAgICAgICAgIHRvID0gY29vcmRUb0RvY3VtZW50KGRyYWdMaW5lVG8pO1xuXG4gICAgICAgICAgICAgICAgZHJhZ0xpbmUgPSBmYWxzZTtcblxuICAgICAgICAgICAgICAgIHRoaXMuZHJhd0xpbmUoZnJvbSwgdG8pO1xuXG4gICAgICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgICAgIGludmFsaWRhdGVSZWN0ID0gbmV3IENQUmVjdChcbiAgICAgICAgICAgICAgICAgICAgICAgIE1hdGgubWluKGRyYWdMaW5lRnJvbS54LCBkcmFnTGluZVRvLngpIC0gTElORV9QUkVWSUVXX1dJRFRIIC0gMSxcbiAgICAgICAgICAgICAgICAgICAgICAgIE1hdGgubWluKGRyYWdMaW5lRnJvbS55LCBkcmFnTGluZVRvLnkpIC0gTElORV9QUkVWSUVXX1dJRFRIIC0gMSxcbiAgICAgICAgICAgICAgICAgICAgICAgIE1hdGgubWF4KGRyYWdMaW5lRnJvbS54LCBkcmFnTGluZVRvLngpICsgTElORV9QUkVWSUVXX1dJRFRIICsgMSArIDEsXG4gICAgICAgICAgICAgICAgICAgICAgICBNYXRoLm1heChkcmFnTGluZUZyb20ueSwgZHJhZ0xpbmVUby55KSArIExJTkVfUFJFVklFV19XSURUSCArIDEgKyAxXG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgcmVwYWludFJlY3QoaW52YWxpZGF0ZVJlY3QpO1xuXG4gICAgICAgICAgICAgICAgYWN0aXZlTW9kZSA9IGRlZmF1bHRNb2RlOyAvLyB5aWVsZCBjb250cm9sIHRvIHRoZSBkZWZhdWx0IG1vZGVcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLnBhaW50ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpZiAoZHJhZ0xpbmUpIHtcbiAgICAgICAgICAgICAgICBjYW52YXNDb250ZXh0LmxpbmVXaWR0aCA9IExJTkVfUFJFVklFV19XSURUSDtcbiAgICAgICAgICAgICAgICBjYW52YXNDb250ZXh0LmJlZ2luUGF0aCgpO1xuICAgICAgICAgICAgICAgIGNhbnZhc0NvbnRleHQubW92ZVRvKGRyYWdMaW5lRnJvbS54LCBkcmFnTGluZUZyb20ueSk7XG4gICAgICAgICAgICAgICAgY2FudmFzQ29udGV4dC5saW5lVG8oZHJhZ0xpbmVUby54LCBkcmFnTGluZVRvLnkpO1xuICAgICAgICAgICAgICAgIGNhbnZhc0NvbnRleHQuc3Ryb2tlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxuICAgIFxuICAgIENQTGluZU1vZGUucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShDUE1vZGUucHJvdG90eXBlKTtcbiAgICBDUExpbmVNb2RlLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IENQTGluZU1vZGU7XG5cbiAgICBDUExpbmVNb2RlLnByb3RvdHlwZS5kcmF3TGluZSA9IGZ1bmN0aW9uKGZyb20sIHRvKSB7XG4gICAgICAgIGFydHdvcmsuYmVnaW5TdHJva2UoZnJvbS54LCBmcm9tLnksIDEpO1xuICAgICAgICBhcnR3b3JrLmNvbnRpbnVlU3Ryb2tlKHRvLngsIHRvLnksIDEpO1xuICAgICAgICBhcnR3b3JrLmVuZFN0cm9rZSgpO1xuICAgIH07XG5cbiAgICBmdW5jdGlvbiBDUEJlemllck1vZGUoKSB7XG4gICAgICAgIGNvbnN0XG4gICAgICAgICAgICBCRVpJRVJfUE9JTlRTID0gNTAwLFxuICAgICAgICAgICAgQkVaSUVSX1BPSU5UU19QUkVWSUVXID0gMTAwO1xuXG4gICAgICAgIHZhclxuICAgICAgICAgICAgZHJhZ0JlemllciA9IGZhbHNlLFxuICAgICAgICAgICAgZHJhZ0Jlemllck1vZGUgPSAwLCAvLyAwIEluaXRpYWwgZHJhZywgMSBmaXJzdCBjb250cm9sIHBvaW50LCAyIHNlY29uZCBwb2ludFxuICAgICAgICAgICAgZHJhZ0JlemllclAwLCBkcmFnQmV6aWVyUDEsIGRyYWdCZXppZXJQMiwgZHJhZ0JlemllclAzO1xuICAgICAgICAgICAgXG5cbiAgICAgICAgdGhpcy5tb3VzZVByZXNzZWQgPSBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICB2YXIgXG4gICAgICAgICAgICAgICAgc3BhY2VQcmVzc2VkID0ga2V5LmlzUHJlc3NlZChcInNwYWNlXCIpLFxuICAgICAgICAgICAgICAgIHAgPSBjb29yZFRvRG9jdW1lbnQobW91c2VDb29yZFRvQ2FudmFzKHt4OiBlLnBhZ2VYLCB5OiBlLnBhZ2VZfSkpO1xuXG4gICAgICAgICAgICBpZiAoIWRyYWdCZXppZXIgJiYgIXNwYWNlUHJlc3NlZCAmJiBlLmJ1dHRvbiA9PSBCVVRUT05fUFJJTUFSWSkge1xuICAgICAgICAgICAgICAgIGRyYWdCZXppZXIgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGRyYWdCZXppZXJNb2RlID0gMDtcbiAgICAgICAgICAgICAgICBkcmFnQmV6aWVyUDAgPSBkcmFnQmV6aWVyUDEgPSBkcmFnQmV6aWVyUDIgPSBkcmFnQmV6aWVyUDMgPSBwO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMubW91c2VEcmFnZ2VkID0gZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgcCA9IGNvb3JkVG9Eb2N1bWVudChtb3VzZUNvb3JkVG9DYW52YXMoe3g6IGUucGFnZVgsIHk6IGUucGFnZVl9KSk7XG5cbiAgICAgICAgICAgIGlmIChkcmFnQmV6aWVyICYmIGRyYWdCZXppZXJNb2RlID09IDApIHtcbiAgICAgICAgICAgICAgICBkcmFnQmV6aWVyUDIgPSBkcmFnQmV6aWVyUDMgPSBwO1xuICAgICAgICAgICAgICAgIHRoYXQucmVwYWludEFsbCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMubW91c2VSZWxlYXNlZCA9IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgIGlmIChkcmFnQmV6aWVyICYmIGUuYnV0dG9uID09IEJVVFRPTl9QUklNQVJZKSB7XG4gICAgICAgICAgICAgICAgaWYgKGRyYWdCZXppZXJNb2RlID09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgZHJhZ0Jlemllck1vZGUgPSAxO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZHJhZ0Jlemllck1vZGUgPT0gMSkge1xuICAgICAgICAgICAgICAgICAgICBkcmFnQmV6aWVyTW9kZSA9IDI7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChkcmFnQmV6aWVyTW9kZSA9PSAyKSB7XG4gICAgICAgICAgICAgICAgICAgIGRyYWdCZXppZXIgPSBmYWxzZTtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgXG4gICAgICAgICAgICAgICAgICAgICAgICBwMCA9IGRyYWdCZXppZXJQMCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHAxID0gZHJhZ0JlemllclAxLFxuICAgICAgICAgICAgICAgICAgICAgICAgcDIgPSBkcmFnQmV6aWVyUDIsXG4gICAgICAgICAgICAgICAgICAgICAgICBwMyA9IGRyYWdCZXppZXJQMyxcblxuICAgICAgICAgICAgICAgICAgICAgICAgYmV6aWVyID0gbmV3IENQQmV6aWVyKCk7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBiZXppZXIueDAgPSBwMC54O1xuICAgICAgICAgICAgICAgICAgICBiZXppZXIueTAgPSBwMC55O1xuICAgICAgICAgICAgICAgICAgICBiZXppZXIueDEgPSBwMS54O1xuICAgICAgICAgICAgICAgICAgICBiZXppZXIueTEgPSBwMS55O1xuICAgICAgICAgICAgICAgICAgICBiZXppZXIueDIgPSBwMi54O1xuICAgICAgICAgICAgICAgICAgICBiZXppZXIueTIgPSBwMi55O1xuICAgICAgICAgICAgICAgICAgICBiZXppZXIueDMgPSBwMy54O1xuICAgICAgICAgICAgICAgICAgICBiZXppZXIueTMgPSBwMy55O1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciBcbiAgICAgICAgICAgICAgICAgICAgICAgIHggPSBuZXcgQXJyYXkoQkVaSUVSX1BPSU5UUyksXG4gICAgICAgICAgICAgICAgICAgICAgICB5ID0gbmV3IEFycmF5KEJFWklFUl9QT0lOVFMpO1xuXG4gICAgICAgICAgICAgICAgICAgIGJlemllci5jb21wdXRlKHgsIHksIEJFWklFUl9QT0lOVFMpO1xuXG4gICAgICAgICAgICAgICAgICAgIGFydHdvcmsuYmVnaW5TdHJva2UoeFswXSwgeVswXSwgMSk7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgQkVaSUVSX1BPSU5UUzsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhcnR3b3JrLmNvbnRpbnVlU3Ryb2tlKHhbaV0sIHlbaV0sIDEpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGFydHdvcmsuZW5kU3Ryb2tlKCk7XG4gICAgICAgICAgICAgICAgICAgIHRoYXQucmVwYWludEFsbCgpO1xuXG4gICAgICAgICAgICAgICAgICAgIGFjdGl2ZU1vZGUgPSBkZWZhdWx0TW9kZTsgLy8geWllbGQgY29udHJvbCB0byB0aGUgZGVmYXVsdCBtb2RlXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMubW91c2VNb3ZlZCA9IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgIHAgPSBjb29yZFRvRG9jdW1lbnQobW91c2VDb29yZFRvQ2FudmFzKHt4OiBlLnBhZ2VYLCB5OiBlLnBhZ2VZfSkpO1xuXG4gICAgICAgICAgICBpZiAoZHJhZ0Jlemllcikge1xuICAgICAgICAgICAgICAgIGlmIChkcmFnQmV6aWVyTW9kZSA9PSAxKSB7XG4gICAgICAgICAgICAgICAgICAgIGRyYWdCZXppZXJQMSA9IHA7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChkcmFnQmV6aWVyTW9kZSA9PSAyKSB7XG4gICAgICAgICAgICAgICAgICAgIGRyYWdCZXppZXJQMiA9IHA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoYXQucmVwYWludEFsbCgpOyAvLyBGSVhNRTogcmVwYWludCBvbmx5IHRoZSBiZXppZXIgcmVnaW9uXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5wYWludCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaWYgKGRyYWdCZXppZXIpIHtcbiAgICAgICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICAgICAgYmV6aWVyID0gbmV3IENQQmV6aWVyKCksXG5cbiAgICAgICAgICAgICAgICAgICAgcDAgPSBjb29yZFRvRGlzcGxheShkcmFnQmV6aWVyUDApLFxuICAgICAgICAgICAgICAgICAgICBwMSA9IGNvb3JkVG9EaXNwbGF5KGRyYWdCZXppZXJQMSksXG4gICAgICAgICAgICAgICAgICAgIHAyID0gY29vcmRUb0Rpc3BsYXkoZHJhZ0JlemllclAyKSxcbiAgICAgICAgICAgICAgICAgICAgcDMgPSBjb29yZFRvRGlzcGxheShkcmFnQmV6aWVyUDMpO1xuXG4gICAgICAgICAgICAgICAgYmV6aWVyLngwID0gcDAueDtcbiAgICAgICAgICAgICAgICBiZXppZXIueTAgPSBwMC55O1xuICAgICAgICAgICAgICAgIGJlemllci54MSA9IHAxLng7XG4gICAgICAgICAgICAgICAgYmV6aWVyLnkxID0gcDEueTtcbiAgICAgICAgICAgICAgICBiZXppZXIueDIgPSBwMi54O1xuICAgICAgICAgICAgICAgIGJlemllci55MiA9IHAyLnk7XG4gICAgICAgICAgICAgICAgYmV6aWVyLngzID0gcDMueDtcbiAgICAgICAgICAgICAgICBiZXppZXIueTMgPSBwMy55O1xuXG4gICAgICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgICAgIHggPSBuZXcgQXJyYXkoQkVaSUVSX1BPSU5UU19QUkVWSUVXKSxcbiAgICAgICAgICAgICAgICAgICAgeSA9IG5ldyBBcnJheShCRVpJRVJfUE9JTlRTX1BSRVZJRVcpO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBiZXppZXIuY29tcHV0ZSh4LCB5LCBCRVpJRVJfUE9JTlRTX1BSRVZJRVcpO1xuXG4gICAgICAgICAgICAgICAgY2FudmFzQ29udGV4dC5iZWdpblBhdGgoKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBjYW52YXNDb250ZXh0Lm1vdmVUbyh4WzBdLCB5WzBdKTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IEJFWklFUl9QT0lOVFNfUFJFVklFVzsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhbnZhc0NvbnRleHQubGluZVRvKHhbaV0sIHlbaV0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBjYW52YXNDb250ZXh0Lm1vdmVUbyh+fnAwLngsIH5+cDAueSk7XG4gICAgICAgICAgICAgICAgY2FudmFzQ29udGV4dC5saW5lVG8ofn5wMS54LCB+fnAxLnkpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGNhbnZhc0NvbnRleHQubW92ZVRvKH5+cDIueCwgfn5wMi55KTtcbiAgICAgICAgICAgICAgICBjYW52YXNDb250ZXh0LmxpbmVUbyh+fnAzLngsIH5+cDMueSk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgY2FudmFzQ29udGV4dC5zdHJva2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9XG4gICAgXG4gICAgQ1BCZXppZXJNb2RlLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoQ1BNb2RlLnByb3RvdHlwZSk7XG4gICAgQ1BCZXppZXJNb2RlLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IENQQmV6aWVyTW9kZTtcblxuICAgIGZ1bmN0aW9uIENQQ29sb3JQaWNrZXJNb2RlKCkge1xuICAgICAgICB2YXIgXG4gICAgICAgICAgICBtb3VzZUJ1dHRvbjtcblxuICAgICAgICB0aGlzLm1vdXNlUHJlc3NlZCA9IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgIG1vdXNlQnV0dG9uID0gZS5idXR0b247XG5cbiAgICAgICAgICAgIHNldEN1cnNvcihjcm9zc0N1cnNvcik7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoaXMubW91c2VEcmFnZ2VkKGUpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMubW91c2VEcmFnZ2VkID0gZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgdmFyIHBmID0gY29vcmRUb0RvY3VtZW50KG1vdXNlQ29vcmRUb0NhbnZhcyh7eDogZS5wYWdlWCwgeTogZS5wYWdlWX0pKTtcblxuICAgICAgICAgICAgaWYgKGFydHdvcmsuaXNQb2ludFdpdGhpbihwZi54LCBwZi55KSkge1xuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIuc2V0Q3VyQ29sb3JSZ2IoYXJ0d29yay5jb2xvclBpY2tlcihwZi54LCBwZi55KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5tb3VzZVJlbGVhc2VkID0gZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgaWYgKGUuYnV0dG9uID09IG1vdXNlQnV0dG9uKSB7XG4gICAgICAgICAgICAgICAgc2V0Q3Vyc29yKGRlZmF1bHRDdXJzb3IpO1xuICAgICAgICAgICAgICAgIGFjdGl2ZU1vZGUgPSBkZWZhdWx0TW9kZTsgLy8geWllbGQgY29udHJvbCB0byB0aGUgZGVmYXVsdCBtb2RlXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxuICAgIFxuICAgIENQQ29sb3JQaWNrZXJNb2RlLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoQ1BNb2RlLnByb3RvdHlwZSk7XG4gICAgQ1BDb2xvclBpY2tlck1vZGUucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gQ1BDb2xvclBpY2tlck1vZGU7XG5cbiAgICBmdW5jdGlvbiBDUE1vdmVDYW52YXNNb2RlKCkge1xuICAgICAgICB2YXJcbiAgICAgICAgICAgIGRyYWdNaWRkbGUgPSBmYWxzZSxcbiAgICAgICAgICAgIGRyYWdNb3ZlWCwgZHJhZ01vdmVZLFxuICAgICAgICAgICAgZHJhZ01vdmVPZmZzZXQsXG4gICAgICAgICAgICBkcmFnTW92ZUJ1dHRvbjtcblxuICAgICAgICB0aGlzLmtleURvd24gPSBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICBpZiAoZS5rZXlDb2RlID09IDMyIC8qIFNwYWNlICovKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFkcmFnTWlkZGxlKSB7XG4gICAgICAgICAgICAgICAgICAgIHNldEN1cnNvcihtb3ZlQ3Vyc29yKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMua2V5VXAgPSBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICBpZiAoIWRyYWdNaWRkbGUgJiYgZS5rZXlDb2RlID09IDMyIC8qIFNwYWNlICovKSB7XG4gICAgICAgICAgICAgICAgc2V0Q3Vyc29yKGRlZmF1bHRDdXJzb3IpO1xuICAgICAgICAgICAgICAgIGFjdGl2ZU1vZGUgPSBkZWZhdWx0TW9kZTsgLy8geWllbGQgY29udHJvbCB0byB0aGUgZGVmYXVsdCBtb2RlXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5tb3VzZVByZXNzZWQgPSBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICBwID0ge3g6IGUucGFnZVgsIHk6IGUucGFnZVl9LFxuICAgICAgICAgICAgICAgIHNwYWNlUHJlc3NlZCA9IGtleS5pc1ByZXNzZWQoXCJzcGFjZVwiKTtcblxuICAgICAgICAgICAgaWYgKCFkcmFnTWlkZGxlICYmIChlLmJ1dHRvbiA9PSBCVVRUT05fV0hFRUwgfHwgc3BhY2VQcmVzc2VkKSkge1xuICAgICAgICAgICAgICAgIHJlcGFpbnRCcnVzaFByZXZpZXcoKTtcblxuICAgICAgICAgICAgICAgIGRyYWdNaWRkbGUgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGRyYWdNb3ZlQnV0dG9uID0gZS5idXR0b247XG4gICAgICAgICAgICAgICAgZHJhZ01vdmVYID0gcC54O1xuICAgICAgICAgICAgICAgIGRyYWdNb3ZlWSA9IHAueTtcbiAgICAgICAgICAgICAgICBkcmFnTW92ZU9mZnNldCA9IHRoYXQuZ2V0T2Zmc2V0KCk7XG4gICAgICAgICAgICAgICAgc2V0Q3Vyc29yKG1vdmluZ0N1cnNvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5tb3VzZURyYWdnZWQgPSBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICBpZiAoZHJhZ01pZGRsZSkge1xuICAgICAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgICAgICBwID0ge3g6IGUucGFnZVgsIHk6IGUucGFnZVl9O1xuXG4gICAgICAgICAgICAgICAgdGhhdC5zZXRPZmZzZXQoZHJhZ01vdmVPZmZzZXQueCArIHAueCAtIGRyYWdNb3ZlWCwgZHJhZ01vdmVPZmZzZXQueSArIHAueSAtIGRyYWdNb3ZlWSk7XG4gICAgICAgICAgICAgICAgdGhhdC5yZXBhaW50QWxsKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5tb3VzZVJlbGVhc2VkID0gZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgaWYgKGRyYWdNaWRkbGUgJiYgZS5idXR0b24gPT0gZHJhZ01vdmVCdXR0b24pIHtcbiAgICAgICAgICAgICAgICBkcmFnTWlkZGxlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgc2V0Q3Vyc29yKGRlZmF1bHRDdXJzb3IpO1xuXG4gICAgICAgICAgICAgICAgYWN0aXZlTW9kZSA9IGRlZmF1bHRNb2RlOyAvLyB5aWVsZCBjb250cm9sIHRvIHRoZSBkZWZhdWx0IG1vZGVcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9XG4gICAgXG4gICAgQ1BNb3ZlQ2FudmFzTW9kZS5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKENQTW9kZS5wcm90b3R5cGUpO1xuICAgIENQTW92ZUNhbnZhc01vZGUucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gQ1BGbG9vZEZpbGxNb2RlO1xuXG4gICAgZnVuY3Rpb24gQ1BGbG9vZEZpbGxNb2RlKCkge1xuICAgIH1cbiAgICBcbiAgICBDUEZsb29kRmlsbE1vZGUucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShDUE1vZGUucHJvdG90eXBlKTtcbiAgICBDUEZsb29kRmlsbE1vZGUucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gQ1BGbG9vZEZpbGxNb2RlO1xuXG4gICAgQ1BGbG9vZEZpbGxNb2RlLnByb3RvdHlwZS5tb3VzZVByZXNzZWQgPSBmdW5jdGlvbihlKSB7XG4gICAgICAgIHZhciBcbiAgICAgICAgICAgIHBmID0gY29vcmRUb0RvY3VtZW50KG1vdXNlQ29vcmRUb0NhbnZhcyh7eDogZS5wYWdlWCwgeTogZS5wYWdlWX0pKTtcbiAgICBcbiAgICAgICAgaWYgKGFydHdvcmsuaXNQb2ludFdpdGhpbihwZi54LCBwZi55KSkge1xuICAgICAgICAgICAgYXJ0d29yay5mbG9vZEZpbGwocGYueCwgcGYueSk7XG4gICAgICAgICAgICB0aGF0LnJlcGFpbnRBbGwoKTtcbiAgICAgICAgfVxuICAgIFxuICAgICAgICBhY3RpdmVNb2RlID0gZGVmYXVsdE1vZGU7IC8vIHlpZWxkIGNvbnRyb2wgdG8gdGhlIGRlZmF1bHQgbW9kZVxuICAgIH07XG5cbiAgICBmdW5jdGlvbiBDUFJlY3RTZWxlY3Rpb25Nb2RlKCkge1xuICAgICAgICB2YXJcbiAgICAgICAgICAgIGZpcnN0Q2xpY2ssXG4gICAgICAgICAgICBjdXJSZWN0ID0gbmV3IENQUmVjdCgwLCAwLCAwLCAwKTtcblxuICAgICAgICB0aGlzLm1vdXNlUHJlc3NlZCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICBwID0gY29vcmRUb0RvY3VtZW50SW50KG1vdXNlQ29vcmRUb0NhbnZhcyh7eDogZS5wYWdlWCwgeTogZS5wYWdlWX0pKTtcblxuICAgICAgICAgICAgY3VyUmVjdC5tYWtlRW1wdHkoKTtcbiAgICAgICAgICAgIGZpcnN0Q2xpY2sgPSBwO1xuXG4gICAgICAgICAgICB0aGF0LnJlcGFpbnRBbGwoKTtcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLm1vdXNlRHJhZ2dlZCA9IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgIHAgPSBjb29yZFRvRG9jdW1lbnRJbnQobW91c2VDb29yZFRvQ2FudmFzKHt4OiBlLnBhZ2VYLCB5OiBlLnBhZ2VZfSkpLFxuICAgICAgICAgICAgICAgIHNxdWFyZSA9IGUuc2hpZnRLZXksXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgc3F1YXJlRGlzdCA9IH5+TWF0aC5tYXgoTWF0aC5hYnMocC54IC0gZmlyc3RDbGljay54KSwgTWF0aC5hYnMocC55IC0gZmlyc3RDbGljay55KSk7XG5cbiAgICAgICAgICAgIGlmIChwLnggPj0gZmlyc3RDbGljay54KSB7XG4gICAgICAgICAgICAgICAgY3VyUmVjdC5sZWZ0ID0gZmlyc3RDbGljay54O1xuICAgICAgICAgICAgICAgIGN1clJlY3QucmlnaHQgPSAoc3F1YXJlID8gZmlyc3RDbGljay54ICsgc3F1YXJlRGlzdCA6IHAueCkgKyAxO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjdXJSZWN0LmxlZnQgPSBzcXVhcmUgPyBmaXJzdENsaWNrLnggLSBzcXVhcmVEaXN0IDogcC54O1xuICAgICAgICAgICAgICAgIGN1clJlY3QucmlnaHQgPSBmaXJzdENsaWNrLnggKyAxO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAocC55ID49IGZpcnN0Q2xpY2sueSkge1xuICAgICAgICAgICAgICAgIGN1clJlY3QudG9wID0gZmlyc3RDbGljay55O1xuICAgICAgICAgICAgICAgIGN1clJlY3QuYm90dG9tID0gKHNxdWFyZSA/IGZpcnN0Q2xpY2sueSArIHNxdWFyZURpc3QgOiBwLnkpICsgMTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY3VyUmVjdC50b3AgPSBzcXVhcmUgPyBmaXJzdENsaWNrLnkgLSBzcXVhcmVEaXN0IDogcC55O1xuICAgICAgICAgICAgICAgIGN1clJlY3QuYm90dG9tID0gZmlyc3RDbGljay55ICsgMTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhhdC5yZXBhaW50QWxsKCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5tb3VzZVJlbGVhc2VkID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGFydHdvcmsucmVjdGFuZ2xlU2VsZWN0aW9uKGN1clJlY3QpO1xuICAgICAgICAgICAgY3VyUmVjdC5tYWtlRW1wdHkoKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgYWN0aXZlTW9kZSA9IGRlZmF1bHRNb2RlOyAvLyB5aWVsZCBjb250cm9sIHRvIHRoZSBkZWZhdWx0IG1vZGVcbiAgICAgICAgICAgIHRoYXQucmVwYWludEFsbCgpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMucGFpbnQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmICghY3VyUmVjdC5pc0VtcHR5KCkpIHtcbiAgICAgICAgICAgICAgICBjYW52YXNDb250ZXh0LmxpbmVXaWR0aCA9IDE7XG4gICAgICAgICAgICAgICAgcGxvdFNlbGVjdGlvblJlY3QoY2FudmFzQ29udGV4dCwgY3VyUmVjdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfTtcblxuICAgIENQUmVjdFNlbGVjdGlvbk1vZGUucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShDUE1vZGUucHJvdG90eXBlKTtcbiAgICBDUFJlY3RTZWxlY3Rpb25Nb2RlLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IENQUmVjdFNlbGVjdGlvbk1vZGU7XG5cbiAgICBmdW5jdGlvbiBDUE1vdmVUb29sTW9kZSgpIHtcbiAgICAgICAgdmFyIFxuICAgICAgICAgICAgZmlyc3RDbGljaztcblxuICAgICAgICB0aGlzLm1vdXNlUHJlc3NlZCA9IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgIHAgPSBjb29yZFRvRG9jdW1lbnQobW91c2VDb29yZFRvQ2FudmFzKHt4OiBlLnBhZ2VYLCB5OiBlLnBhZ2VZfSkpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBmaXJzdENsaWNrID0gcDtcblxuICAgICAgICAgICAgYXJ0d29yay5iZWdpblByZXZpZXdNb2RlKGUuYWx0S2V5KTtcblxuICAgICAgICAgICAgLy8gRklYTUU6IFRoZSBmb2xsb3dpbmcgaGFjayBhdm9pZHMgYSBzbGlnaHQgZGlzcGxheSBnbGl0Y2hcbiAgICAgICAgICAgIC8vIGlmIHRoZSB3aG9sZSBtb3ZlIHRvb2wgbWVzcyBpcyBmaXhlZCBpdCBwcm9iYWJseSB3b24ndCBiZSBuZWNlc3NhcnkgYW55bW9yZVxuICAgICAgICAgICAgYXJ0d29yay5tb3ZlKDAsIDApO1xuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMubW91c2VEcmFnZ2VkID0gZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgcCA9IGNvb3JkVG9Eb2N1bWVudChtb3VzZUNvb3JkVG9DYW52YXMoe3g6IGUucGFnZVgsIHk6IGUucGFnZVl9KSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGFydHdvcmsubW92ZShNYXRoLnJvdW5kKHAueCAtIGZpcnN0Q2xpY2sueCksIE1hdGgucm91bmQocC55IC0gZmlyc3RDbGljay55KSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoYXQucmVwYWludEFsbCgpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMubW91c2VSZWxlYXNlZCA9IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgIGFydHdvcmsuZW5kUHJldmlld01vZGUoKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgYWN0aXZlTW9kZSA9IGRlZmF1bHRNb2RlOyAvLyB5aWVsZCBjb250cm9sIHRvIHRoZSBkZWZhdWx0IG1vZGVcbiAgICAgICAgICAgIHRoYXQucmVwYWludEFsbCgpO1xuICAgICAgICB9O1xuICAgIH1cbiAgICBcbiAgICBDUE1vdmVUb29sTW9kZS5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKENQTW9kZS5wcm90b3R5cGUpO1xuICAgIENQTW92ZVRvb2xNb2RlLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IENQTW92ZVRvb2xNb2RlO1xuXG4gICAgZnVuY3Rpb24gQ1BSb3RhdGVDYW52YXNNb2RlKCkge1xuICAgICAgICB2YXIgXG4gICAgICAgICAgICBmaXJzdENsaWNrLFxuICAgICAgICAgICAgaW5pdEFuZ2xlID0gMC4wLFxuICAgICAgICAgICAgaW5pdFRyYW5zZm9ybSxcbiAgICAgICAgICAgIGRyYWdnZWQgPSBmYWxzZTtcblxuICAgICAgICB0aGlzLm1vdXNlUHJlc3NlZCA9IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgIGZpcnN0Q2xpY2sgPSB7eDogZS5wYWdlWCAtICQoY2FudmFzKS5vZmZzZXQoKS5sZWZ0LCB5OiBlLnBhZ2VZIC0gJChjYW52YXMpLm9mZnNldCgpLnRvcH07XG5cbiAgICAgICAgICAgIGluaXRBbmdsZSA9IHRoYXQuZ2V0Um90YXRpb24oKTtcbiAgICAgICAgICAgIGluaXRUcmFuc2Zvcm0gPSB0cmFuc2Zvcm0uY2xvbmUoKTtcblxuICAgICAgICAgICAgZHJhZ2dlZCA9IGZhbHNlO1xuXG4gICAgICAgICAgICByZXBhaW50QnJ1c2hQcmV2aWV3KCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5tb3VzZURyYWdnZWQgPSBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICBkcmFnZ2VkID0gdHJ1ZTtcblxuICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgcCA9IHt4OiBlLnBhZ2VYIC0gJChjYW52YXMpLm9mZnNldCgpLmxlZnQsIHk6IGUucGFnZVkgLSAkKGNhbnZhcykub2Zmc2V0KCkudG9wfSxcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGRpc3BsYXlDZW50ZXIgPSB7eDogJChjYW52YXMpLndpZHRoKCkgLyAyLCB5OiAkKGNhbnZhcykuaGVpZ2h0KCkgLyAyfSxcbiAgICAgICAgICAgICAgICBjYW52YXNDZW50ZXIgPSB7eDogY2FudmFzLndpZHRoIC8gMiwgeTogY2FudmFzLmhlaWdodCAvIDJ9LFxuXG4gICAgICAgICAgICAgICAgZGVsdGFBbmdsZSA9IE1hdGguYXRhbjIocC55IC0gZGlzcGxheUNlbnRlci55LCBwLnggLSBkaXNwbGF5Q2VudGVyLngpIC0gTWF0aC5hdGFuMihmaXJzdENsaWNrLnkgLSBkaXNwbGF5Q2VudGVyLnksIGZpcnN0Q2xpY2sueCAtIGRpc3BsYXlDZW50ZXIueCksXG5cbiAgICAgICAgICAgICAgICByb3RUcmFucyA9IG5ldyBDUFRyYW5zZm9ybSgpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICByb3RUcmFucy5yb3RhdGVBcm91bmRQb2ludChkZWx0YUFuZ2xlLCBjYW52YXNDZW50ZXIueCwgY2FudmFzQ2VudGVyLnkpO1xuXG4gICAgICAgICAgICByb3RUcmFucy5tdWx0aXBseShpbml0VHJhbnNmb3JtKTtcblxuICAgICAgICAgICAgdGhhdC5zZXRSb3RhdGlvbihpbml0QW5nbGUgKyBkZWx0YUFuZ2xlKTtcbiAgICAgICAgICAgIHRoYXQuc2V0T2Zmc2V0KH5+cm90VHJhbnMuZ2V0VHJhbnNsYXRlWCgpLCB+fnJvdFRyYW5zLmdldFRyYW5zbGF0ZVkoKSk7XG4gICAgICAgICAgICB0aGF0LnJlcGFpbnRBbGwoKTtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogV2hlbiB0aGUgbW91c2UgaXMgcmVsZWFzZWQgYWZ0ZXIgcm90YXRpb24sIHdlIG1pZ2h0IHdhbnQgdG8gc25hcCBvdXIgYW5nbGUgdG8gdGhlIG5lYXJlc3QgOTAgZGVncmVlIG1hcmsuXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBmaW5pc2hSb3RhdGlvbigpIHtcbiAgICAgICAgICAgIGNvbnN0XG4gICAgICAgICAgICAgICAgUk9UQVRFX1NOQVBfREVHUkVFUyA9IDU7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHZhciBcbiAgICAgICAgICAgICAgICBuZWFyZXN0OTAgPSBNYXRoLnJvdW5kKGNhbnZhc1JvdGF0aW9uIC8gKE1hdGguUEkgLyAyKSkgKiBNYXRoLlBJIC8gMjtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKE1hdGguYWJzKGNhbnZhc1JvdGF0aW9uIC0gbmVhcmVzdDkwKSA8IFJPVEFURV9TTkFQX0RFR1JFRVMgLyAxODAgKiBNYXRoLlBJKSB7XG4gICAgICAgICAgICAgICAgdmFyIFxuICAgICAgICAgICAgICAgICAgICBkZWx0YUFuZ2xlID0gbmVhcmVzdDkwIC0gaW5pdEFuZ2xlLFxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBjZW50ZXIgPSB7eDogY2FudmFzLndpZHRoIC8gMiwgeTogY2FudmFzLmhlaWdodCAvIDJ9LFxuXG4gICAgICAgICAgICAgICAgICAgIHJvdFRyYW5zID0gbmV3IENQVHJhbnNmb3JtKCk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgcm90VHJhbnMucm90YXRlQXJvdW5kUG9pbnQoZGVsdGFBbmdsZSwgY2VudGVyLngsIGNlbnRlci55KTtcblxuICAgICAgICAgICAgICAgIHJvdFRyYW5zLm11bHRpcGx5KGluaXRUcmFuc2Zvcm0pO1xuXG4gICAgICAgICAgICAgICAgdGhhdC5zZXRSb3RhdGlvbihpbml0QW5nbGUgKyBkZWx0YUFuZ2xlKTtcbiAgICAgICAgICAgICAgICB0aGF0LnNldE9mZnNldCh+fnJvdFRyYW5zLmdldFRyYW5zbGF0ZVgoKSwgfn5yb3RUcmFucy5nZXRUcmFuc2xhdGVZKCkpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHRoYXQucmVwYWludEFsbCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICB0aGlzLm1vdXNlUmVsZWFzZWQgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgaWYgKGRyYWdnZWQpIHtcbiAgICAgICAgICAgICAgICBmaW5pc2hSb3RhdGlvbigpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGF0LnJlc2V0Um90YXRpb24oKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgYWN0aXZlTW9kZSA9IGRlZmF1bHRNb2RlOyAvLyB5aWVsZCBjb250cm9sIHRvIHRoZSBkZWZhdWx0IG1vZGVcbiAgICAgICAgfTtcbiAgICB9XG4gICAgXG4gICAgQ1BSb3RhdGVDYW52YXNNb2RlLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoQ1BNb2RlLnByb3RvdHlwZSk7XG4gICAgQ1BSb3RhdGVDYW52YXNNb2RlLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IENQUm90YXRlQ2FudmFzTW9kZTtcbiAgICBcbiAgICBmdW5jdGlvbiBDUEdyYWRpZW50RmlsbE1vZGUoKSB7XG4gICAgICAgIC8vIFN1cGVyIGNvbnN0cnVjdG9yXG4gICAgICAgIENQTGluZU1vZGUuY2FsbCh0aGlzKTtcbiAgICB9XG4gICAgXG4gICAgQ1BHcmFkaWVudEZpbGxNb2RlLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoQ1BMaW5lTW9kZS5wcm90b3R5cGUpO1xuICAgIENQR3JhZGllbnRGaWxsTW9kZS5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBDUEdyYWRpZW50RmlsbE1vZGU7XG5cbiAgICBDUEdyYWRpZW50RmlsbE1vZGUucHJvdG90eXBlLmRyYXdMaW5lID0gZnVuY3Rpb24oZnJvbSwgdG8pIHtcbiAgICAgICAgYXJ0d29yay5ncmFkaWVudEZpbGwoTWF0aC5yb3VuZChmcm9tLngpLCBNYXRoLnJvdW5kKGZyb20ueSksIE1hdGgucm91bmQodG8ueCksIE1hdGgucm91bmQodG8ueSksIGNvbnRyb2xsZXIuZ2V0Q3VyR3JhZGllbnQoKSk7XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIHJlcXVlc3RGb2N1c0luV2luZG93KCkge1xuICAgICAgICAvLyBUT0RPXG4gICAgfVxuICAgIFxuICAgIGZ1bmN0aW9uIHNldEN1cnNvcihjdXJzb3IpIHtcbiAgICAgICAgaWYgKGNhbnZhcy5nZXRBdHRyaWJ1dGUoXCJkYXRhLWN1cnNvclwiKSAhPSBjdXJzb3IpIHtcbiAgICAgICAgICAgIGNhbnZhcy5zZXRBdHRyaWJ1dGUoXCJkYXRhLWN1cnNvclwiLCBjdXJzb3IpO1xuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB2aXNNaW4gVGhlIHNtYWxsZXN0IGNvb3JkaW5hdGUgaW4gdGhpcyBheGlzIGluIHdoaWNoIHRoZSBkcmF3aW5nIGFwcGVhcnNcbiAgICAgKiBAcGFyYW0gdmlzV2lkdGggVGhlIGV4dGVudCBvZiB0aGUgZHJhd2luZyBpbiB0aGlzIGF4aXNcbiAgICAgKiBAcGFyYW0gdmlld1NpemUgVGhlIGV4dGVudCBvZiB0aGUgc2NyZWVuIGNhbnZhcyBpbiB0aGlzIGF4aXNcbiAgICAgKiBAcGFyYW0gb2Zmc2V0IFRoZSBwcmVzZW50IHBpeGVsIG9mZnNldCBvZiB0aGUgZHJhd2luZyBpbiB0aGlzIGF4aXNcbiAgICAgKi9cbiAgICBmdW5jdGlvbiB1cGRhdGVTY3JvbGxCYXIoc2Nyb2xsYmFyLCB2aXNNaW4sIHZpc1dpZHRoLCB2aWV3U2l6ZSwgb2Zmc2V0KSB7XG4gICAgICAgIHZhclxuICAgICAgICAgICAgeE1pbiA9IHZpc01pbiAtIHZpZXdTaXplIC0gb2Zmc2V0ICsgdmlzV2lkdGggLyA0LFxuICAgICAgICAgICAgeE1heCA9IHZpc01pbiArIHZpc1dpZHRoIC0gb2Zmc2V0IC0gdmlzV2lkdGggLyA0O1xuICAgICAgICBcbiAgICAgICAgc2Nyb2xsYmFyLnNldFZhbHVlcygtb2Zmc2V0LCB2aWV3U2l6ZSwgeE1pbiwgeE1heCk7XG4gICAgICAgIFxuICAgICAgICBzY3JvbGxiYXIuc2V0QmxvY2tJbmNyZW1lbnQoTWF0aC5tYXgoMSwgfn4odmlld1NpemUgKiAuNjYpKSk7XG4gICAgICAgIHNjcm9sbGJhci5zZXRVbml0SW5jcmVtZW50KE1hdGgubWF4KDEsIH5+KHZpZXdTaXplICogLjA1KSkpO1xuICAgIH1cbiAgICBcbiAgICBmdW5jdGlvbiB1cGRhdGVTY3JvbGxCYXJzKCkge1xuICAgICAgICBpZiAoaG9yelNjcm9sbCA9PSBudWxsIHx8IHZlcnRTY3JvbGwgPT0gbnVsbFxuICAgICAgICAgICAgICAgIHx8IGhvcnpTY3JvbGwuZ2V0VmFsdWVJc0FkanVzdGluZygpIHx8IHZlcnRTY3JvbGwuZ2V0VmFsdWVJc0FkanVzdGluZygpICkge1xuICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICB9XG5cbiAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICB2aXNpYmxlUmVjdCA9IGdldFJlZnJlc2hBcmVhKG5ldyBDUFJlY3QoMCwgMCwgYXJ0d29ya0NhbnZhcy53aWR0aCwgYXJ0d29ya0NhbnZhcy5oZWlnaHQpKTtcbiAgICAgICAgICAgXG4gICAgICAgICAgIHVwZGF0ZVNjcm9sbEJhcihob3J6U2Nyb2xsLCB2aXNpYmxlUmVjdC5sZWZ0LCB2aXNpYmxlUmVjdC5nZXRXaWR0aCgpLCAkKGNhbnZhcykud2lkdGgoKSwgdGhhdC5nZXRPZmZzZXQoKS54KTtcbiAgICAgICAgICAgdXBkYXRlU2Nyb2xsQmFyKHZlcnRTY3JvbGwsIHZpc2libGVSZWN0LnRvcCwgdmlzaWJsZVJlY3QuZ2V0SGVpZ2h0KCksICQoY2FudmFzKS5oZWlnaHQoKSwgdGhhdC5nZXRPZmZzZXQoKS55KTtcbiAgICAgICB9XG5cbiAgICBmdW5jdGlvbiB1cGRhdGVUcmFuc2Zvcm0oKSB7XG4gICAgICAgIHRyYW5zZm9ybS5zZXRUb0lkZW50aXR5KCk7XG4gICAgICAgIHRyYW5zZm9ybS50cmFuc2xhdGUob2Zmc2V0WCwgb2Zmc2V0WSk7XG4gICAgICAgIHRyYW5zZm9ybS5zY2FsZSh6b29tLCB6b29tKTtcbiAgICAgICAgdHJhbnNmb3JtLnJvdGF0ZShjYW52YXNSb3RhdGlvbik7XG5cbiAgICAgICAgdXBkYXRlU2Nyb2xsQmFycygpO1xuICAgICAgICB0aGF0LnJlcGFpbnRBbGwoKTtcbiAgICB9XG4gICAgXG4gICAgLyoqXG4gICAgICogQ29udmVydCBhIGNhbnZhcy1yZWxhdGl2ZSBjb29yZGluYXRlIGludG8gZG9jdW1lbnQgY29vcmRpbmF0ZXMuXG4gICAgICovXG4gICAgZnVuY3Rpb24gY29vcmRUb0RvY3VtZW50KGNvb3JkKSB7XG4gICAgICAgIC8vIFRPRE8gY2FjaGUgaW52ZXJ0ZWQgdHJhbnNmb3JtXG4gICAgICAgIHJldHVybiB0cmFuc2Zvcm0uZ2V0SW52ZXJ0ZWQoKS50cmFuc2Zvcm1Qb2ludChjb29yZC54LCBjb29yZC55KTtcbiAgICB9XG4gICAgXG4gICAgLyoqXG4gICAgICogQ29udmVydCBhIGNhbnZhcy1yZWxhdGl2ZSBjb29yZGluYXRlIGludG8gZG9jdW1lbnQgY29vcmRpbmF0ZXMuXG4gICAgICovXG4gICAgZnVuY3Rpb24gY29vcmRUb0RvY3VtZW50SW50KGNvb3JkKSB7XG4gICAgICAgIC8vIFRPRE8gY2FjaGUgaW52ZXJ0ZWQgdHJhbnNmb3JtXG4gICAgICAgIHZhciBcbiAgICAgICAgICAgIHJlc3VsdCA9IGNvb3JkVG9Eb2N1bWVudChjb29yZCk7XG4gICAgICAgIFxuICAgICAgICByZXN1bHQueCA9IE1hdGguZmxvb3IocmVzdWx0LngpO1xuICAgICAgICByZXN1bHQueSA9IE1hdGguZmxvb3IocmVzdWx0LnkpO1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gICAgXG4gICAgLyoqXG4gICAgICogQ29udmVydCBhIHt4OiBwYWdlWCwgeTogcGFnZVl9IGNvLW9yZGluYXRlIHBhaXIgZnJvbSBhIG1vdXNlIGV2ZW50IHRvIGNhbnZhcy1yZWxhdGl2ZSBjb29yZGluYXRlcy5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBtb3VzZUNvb3JkVG9DYW52YXMoY29vcmQpIHtcbiAgICAgICAgdmFyXG4gICAgICAgICAgICByZWN0ID0gY2FudmFzLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuXG4gICAgICAgIHJldHVybiB7eDogY29vcmQueCAtIHJlY3QubGVmdCAtIHdpbmRvdy5wYWdlWE9mZnNldCwgeTogY29vcmQueSAtIHJlY3QudG9wIC0gd2luZG93LnBhZ2VZT2Zmc2V0fTtcbiAgICB9XG4gICAgXG4gICAgZnVuY3Rpb24gY29vcmRUb0Rpc3BsYXkocCkge1xuICAgICAgICByZXR1cm4gdHJhbnNmb3JtLnRyYW5zZm9ybVBvaW50KHAueCwgcC55KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjb29yZFRvRGlzcGxheUludChwKSB7XG4gICAgICAgIHZhclxuICAgICAgICAgICAgcmVzdWx0ID0gY29vcmRUb0Rpc3BsYXkocCk7XG4gICAgICAgIFxuICAgICAgICByZXN1bHQueCA9IE1hdGgucm91bmQocmVzdWx0LngpO1xuICAgICAgICByZXN1bHQueSA9IE1hdGgucm91bmQocmVzdWx0LnkpO1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTdHJva2UgYSBzZWxlY3Rpb24gcmVjdGFuZ2xlIHRoYXQgZW5jbG9zZXMgdGhlIHBpeGVscyBpbiB0aGUgZ2l2ZW4gcmVjdGFuZ2xlIChpbiBkb2N1bWVudCBjby1vcmRpbmF0ZXMpLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHBsb3RTZWxlY3Rpb25SZWN0KGNvbnRleHQsIHJlY3QpIHtcbiAgICAgICAgY29udGV4dC5iZWdpblBhdGgoKTtcblxuICAgICAgICB2YXJcbiAgICAgICAgICAgIGNlbnRlciA9IGNvb3JkVG9EaXNwbGF5KHt4OiAocmVjdC5sZWZ0ICsgcmVjdC5yaWdodCkgLyAyLCB5OiAocmVjdC50b3AgKyByZWN0LmJvdHRvbSkgLyAyfSksXG4gICAgICAgICAgICBjb29yZHMgPSBbXG4gICAgICAgICAgICAgICAge3g6IHJlY3QubGVmdCwgeTogcmVjdC50b3B9LFxuICAgICAgICAgICAgICAgIHt4OiByZWN0LnJpZ2h0LCB5OiByZWN0LnRvcH0sXG4gICAgICAgICAgICAgICAge3g6IHJlY3QucmlnaHQsIHk6IHJlY3QuYm90dG9tfSxcbiAgICAgICAgICAgICAgICB7eDogcmVjdC5sZWZ0LCB5OiByZWN0LmJvdHRvbX0sXG4gICAgICAgICAgICBdO1xuXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY29vcmRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBjb29yZHNbaV0gPSBjb29yZFRvRGlzcGxheUludChjb29yZHNbaV0pO1xuXG4gICAgICAgICAgICAvLyBOZWVkIHRvIGluc2V0IHRoZSBjby1vcmRpbmF0ZXMgYnkgMC41IGRpc3BsYXkgcGl4ZWxzIGZvciB0aGUgbGluZSB0byBwYXNzIHRocm91Z2ggdGhlIG1pZGRsZSBvZiB0aGUgZGlzcGxheSBwaXhlbFxuICAgICAgICAgICAgY29vcmRzW2ldLnggKz0gIE1hdGguc2lnbihjZW50ZXIueCAtIGNvb3Jkc1tpXS54KSAqIDAuNTtcbiAgICAgICAgICAgIGNvb3Jkc1tpXS55ICs9ICBNYXRoLnNpZ24oY2VudGVyLnkgLSBjb29yZHNbaV0ueSkgKiAwLjU7XG4gICAgICAgIH1cblxuICAgICAgICBjb250ZXh0Lm1vdmVUbyhjb29yZHNbMF0ueCwgY29vcmRzWzBdLnkpO1xuICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGNvb3Jkcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgY29udGV4dC5saW5lVG8oY29vcmRzW2ldLngsIGNvb3Jkc1tpXS55KTtcbiAgICAgICAgfVxuICAgICAgICBjb250ZXh0LmxpbmVUbyhjb29yZHNbMF0ueCwgY29vcmRzWzBdLnkpO1xuXG4gICAgICAgIGNvbnRleHQuc3Ryb2tlKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGFrZSBhIENQUmVjdCBvZiBkb2N1bWVudCBjb29yZGluYXRlcyBhbmQgcmV0dXJuIGEgQ1BSZWN0IG9mIGNhbnZhcyBjb29yZGluYXRlcyB0byByZXBhaW50IGZvciB0aGF0IHJlZ2lvbi5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBnZXRSZWZyZXNoQXJlYShyKSB7XG4gICAgICAgIHZhclxuICAgICAgICAgICAgcDEgPSBjb29yZFRvRGlzcGxheUludCh7eDogci5sZWZ0IC0gMSwgeTogci50b3AgLSAxfSksXG4gICAgICAgICAgICBwMiA9IGNvb3JkVG9EaXNwbGF5SW50KHt4OiByLmxlZnQgLSAxLCB5OiByLmJvdHRvbX0pLFxuICAgICAgICAgICAgcDMgPSBjb29yZFRvRGlzcGxheUludCh7eDogci5yaWdodCwgeTogci50b3AgLSAxfSksXG4gICAgICAgICAgICBwNCA9IGNvb3JkVG9EaXNwbGF5SW50KHt4OiByLnJpZ2h0LCB5OiByLmJvdHRvbX0pLFxuXG4gICAgICAgICAgICByMiA9IG5ldyBDUFJlY3QoXG4gICAgICAgICAgICAgICAgTWF0aC5taW4oTWF0aC5taW4ocDEueCwgcDIueCksIE1hdGgubWluKHAzLngsIHA0LngpKSxcbiAgICAgICAgICAgICAgICBNYXRoLm1pbihNYXRoLm1pbihwMS55LCBwMi55KSwgTWF0aC5taW4ocDMueSwgcDQueSkpLFxuICAgICAgICAgICAgICAgIE1hdGgubWF4KE1hdGgubWF4KHAxLngsIHAyLngpLCBNYXRoLm1heChwMy54LCBwNC54KSkgKyAxLFxuICAgICAgICAgICAgICAgIE1hdGgubWF4KE1hdGgubWF4KHAxLnksIHAyLnkpLCBNYXRoLm1heChwMy55LCBwNC55KSkgKyAxXG4gICAgICAgICAgICApO1xuXG4gICAgICAgIHIyLmdyb3coMiwgMik7IC8vIHRvIGJlIHN1cmUgdG8gaW5jbHVkZSBldmVyeXRoaW5nXG5cbiAgICAgICAgcmV0dXJuIHIyO1xuICAgIH1cbiAgICBcbiAgICAvKipcbiAgICAgKiBSZXBhaW50IHRoZSBhcmVhIG9mIHRoZSBjYW52YXMgdGhhdCB3YXMgbGFzdCBvY2N1cGllZCBieSB0aGUgYnJ1c2ggcHJldmlldyBjaXJjbGUgKHVzZWZ1bCBmb3IgZXJhc2luZ1xuICAgICAqIHRoZSBicnVzaCBwcmV2aWV3IHdoZW4gc3dpdGNoaW5nIGRyYXdpbmcgbW9kZXMgdG8gb25lIHRoYXQgd29uJ3QgYmUgdXNpbmcgYSBwcmV2aWV3KS5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiByZXBhaW50QnJ1c2hQcmV2aWV3KCkge1xuICAgICAgICBpZiAob2xkUHJldmlld1JlY3QgIT0gbnVsbCkge1xuICAgICAgICAgICAgdmFyIHIgPSBvbGRQcmV2aWV3UmVjdDtcbiAgICAgICAgICAgIG9sZFByZXZpZXdSZWN0ID0gbnVsbDtcbiAgICAgICAgICAgIHJlcGFpbnRSZWN0KHIpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IGEgcmVjdGFuZ2xlIHRoYXQgZW5jbG9zZXMgdGhlIHByZXZpZXcgYnJ1c2gsIGluIHNjcmVlbiBjb29yZGluYXRlcy5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBnZXRCcnVzaFByZXZpZXdPdmFsKCkge1xuICAgICAgICB2YXIgXG4gICAgICAgICAgICBicnVzaFNpemUgPSBjb250cm9sbGVyLmdldEJydXNoU2l6ZSgpICogem9vbTtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiBuZXcgQ1BSZWN0KFxuICAgICAgICAgICAgbW91c2VYIC0gYnJ1c2hTaXplIC8gMixcbiAgICAgICAgICAgIG1vdXNlWSAtIGJydXNoU2l6ZSAvIDIsXG4gICAgICAgICAgICBtb3VzZVggKyBicnVzaFNpemUgLyAyLFxuICAgICAgICAgICAgbW91c2VZICsgYnJ1c2hTaXplIC8gMlxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFkanVzdCB0aGUgY3VycmVudCBvZmZzZXQgdG8gYnJpbmcgdGhlIGNlbnRlciBvZiB0aGUgYXJ0d29yayB0byB0aGUgY2VudGVyIG9mIHRoZSBjYW52YXNcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBjZW50ZXJDYW52YXMoKSB7XG4gICAgICAgIHZhclxuICAgICAgICAgICAgd2lkdGggPSBjYW52YXMud2lkdGgsXG4gICAgICAgICAgICBoZWlnaHQgPSBjYW52YXMuaGVpZ2h0LFxuICAgICAgICBcbiAgICAgICAgICAgIGFydHdvcmtDZW50ZXIgPSBjb29yZFRvRGlzcGxheSh7eDogYXJ0d29yay53aWR0aCAvIDIsIHk6IGFydHdvcmsuaGVpZ2h0IC8gMn0pO1xuICAgICAgICBcbiAgICAgICAgdGhhdC5zZXRPZmZzZXQoXG4gICAgICAgICAgICBNYXRoLnJvdW5kKG9mZnNldFggKyB3aWR0aCAvIDIuMCAtIGFydHdvcmtDZW50ZXIueCksXG4gICAgICAgICAgICBNYXRoLnJvdW5kKG9mZnNldFkgKyBoZWlnaHQgLyAyLjAgLSBhcnR3b3JrQ2VudGVyLnkpXG4gICAgICAgICk7XG4gICAgfVxuICAgIFxuICAgIHRoaXMuc2V0Wm9vbSA9IGZ1bmN0aW9uKF96b29tKSB7XG4gICAgICAgIHpvb20gPSBfem9vbTtcbiAgICAgICAgdXBkYXRlVHJhbnNmb3JtKCk7XG4gICAgfTtcblxuICAgIHRoaXMuZ2V0Wm9vbSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gem9vbTtcbiAgICB9O1xuICAgIFxuICAgIHRoaXMuc2V0R3JpZFNpemUgPSBmdW5jdGlvbihfZ3JpZFNpemUpIHtcbiAgICAgICAgZ3JpZFNpemUgPSBNYXRoLm1heChNYXRoLnJvdW5kKF9ncmlkU2l6ZSksIDEpO1xuICAgICAgICB0aGlzLnJlcGFpbnRBbGwoKTtcbiAgICB9O1xuXG4gICAgdGhpcy5nZXRHcmlkU2l6ZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gZ3JpZFNpemU7XG4gICAgfTtcblxuICAgIHRoaXMuc2V0T2Zmc2V0ID0gZnVuY3Rpb24oeCwgeSkge1xuICAgICAgICBpZiAoaXNOYU4oeCkgfHwgaXNOYU4oeSkpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQmFkIG9mZnNldFwiKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG9mZnNldFggPSB4O1xuICAgICAgICAgICAgb2Zmc2V0WSA9IHk7XG4gICAgICAgICAgICB1cGRhdGVUcmFuc2Zvcm0oKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICB0aGlzLmdldE9mZnNldCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4ge3g6IG9mZnNldFgsIHk6IG9mZnNldFl9O1xuICAgIH07XG4gICAgXG4gICAgdGhpcy5zZXRJbnRlcnBvbGF0aW9uID0gZnVuY3Rpb24oZW5hYmxlZCkge1xuICAgICAgICBpbnRlcnBvbGF0aW9uID0gZW5hYmxlZDtcbiAgICAgICAgXG4gICAgICAgIHZhclxuICAgICAgICAgICAgYnJvd3NlclByb3BlcnRpZXMgPSBbXG4gICAgICAgICAgICAgICAgIFwiaW1hZ2VTbW9vdGhpbmdFbmFibGVkXCIsIFwibW96SW1hZ2VTbW9vdGhpbmdFbmFibGVkXCIsIFwid2Via2l0SW1hZ2VTbW9vdGhpbmdFbmFibGVkXCIsXG4gICAgICAgICAgICAgICAgIFwibXNJbWFnZVNtb290aGluZ0VuYWJsZWRcIlxuICAgICAgICAgICAgXTtcbiAgICAgICAgXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYnJvd3NlclByb3BlcnRpZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmIChicm93c2VyUHJvcGVydGllc1tpXSBpbiBjYW52YXNDb250ZXh0KSB7XG4gICAgICAgICAgICAgICAgY2FudmFzQ29udGV4dFticm93c2VyUHJvcGVydGllc1tpXV0gPSBlbmFibGVkO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5yZXBhaW50QWxsKCk7XG4gICAgfTtcblxuICAgIHRoaXMuc2V0Um90YXRpb24gPSBmdW5jdGlvbihhbmdsZSkge1xuICAgICAgICBjYW52YXNSb3RhdGlvbiA9IGFuZ2xlICUgKDIgKiBNYXRoLlBJKTtcbiAgICAgICAgdXBkYXRlVHJhbnNmb3JtKCk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEdldCBjYW52YXMgcm90YXRpb24gaW4gcmFkaWFucy5cbiAgICAgKiBcbiAgICAgKiBAcmV0dXJuIGZsb2F0XG4gICAgICovXG4gICAgdGhpcy5nZXRSb3RhdGlvbiA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gY2FudmFzUm90YXRpb247XG4gICAgfTtcbiAgICBcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIHJvdGF0aW9uIGFzIHRoZSBuZWFyZXN0IG51bWJlciBvZiB3aG9sZSA5MCBkZWdyZWUgY2xvY2t3aXNlIHJvdGF0aW9ucyAoWzAuLjNdKVxuICAgICAqL1xuICAgIHRoaXMuZ2V0Um90YXRpb245MCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXJcbiAgICAgICAgICAgIHJvdGF0aW9uID0gTWF0aC5yb3VuZCh0aGlzLmdldFJvdGF0aW9uKCkgLyBNYXRoLlBJICogMik7XG4gICAgICAgIFxuICAgICAgICAvLyBKdXN0IGluIGNhc2U6XG4gICAgICAgIHJvdGF0aW9uICU9IDQ7XG4gICAgICAgIFxuICAgICAgICAvLyBXZSB3YW50IFswLi4zXSBhcyBvdXRwdXRcbiAgICAgICAgaWYgKHJvdGF0aW9uIDwgMCkge1xuICAgICAgICAgICAgcm90YXRpb24gKz0gNDtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHJvdGF0aW9uO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEBwYXJhbSB6b29tIGZsb2F0XG4gICAgICogQHBhcmFtIGNlbnRlclggZmxvYXQgWCBjby1vcmRpbmF0ZSBpbiB0aGUgY2FudmFzIHNwYWNlXG4gICAgICogQHBhcmFtIGNlbnRlclkgZmxvYXQgWSBjby1vcmRpbmF0ZSBpbiB0aGUgY2FudmFzIHNwYWNlXG4gICAgICovXG4gICAgZnVuY3Rpb24gem9vbU9uUG9pbnQoem9vbSwgY2VudGVyWCwgY2VudGVyWSkge1xuICAgICAgICB6b29tID0gTWF0aC5tYXgoTUlOX1pPT00sIE1hdGgubWluKE1BWF9aT09NLCB6b29tKSk7XG4gICAgICAgIFxuICAgICAgICBpZiAodGhhdC5nZXRab29tKCkgIT0gem9vbSkge1xuICAgICAgICAgICAgdmFyIFxuICAgICAgICAgICAgICAgIG9mZnNldCA9IHRoYXQuZ2V0T2Zmc2V0KCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoYXQuc2V0T2Zmc2V0KFxuICAgICAgICAgICAgICAgIG9mZnNldC54ICsgfn4oKGNlbnRlclggLSBvZmZzZXQueCkgKiAoMSAtIHpvb20gLyB0aGF0LmdldFpvb20oKSkpLCBcbiAgICAgICAgICAgICAgICBvZmZzZXQueSArIH5+KChjZW50ZXJZIC0gb2Zmc2V0LnkpICogKDEgLSB6b29tIC8gdGhhdC5nZXRab29tKCkpKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhhdC5zZXRab29tKHpvb20pO1xuXG4gICAgICAgICAgICAvKkNQQ29udHJvbGxlci5DUFZpZXdJbmZvIHZpZXdJbmZvID0gbmV3IENQQ29udHJvbGxlci5DUFZpZXdJbmZvKCk7XG4gICAgICAgICAgICB2aWV3SW5mby56b29tID0gem9vbTtcbiAgICAgICAgICAgIHZpZXdJbmZvLm9mZnNldFggPSBvZmZzZXRYO1xuICAgICAgICAgICAgdmlld0luZm8ub2Zmc2V0WSA9IG9mZnNldFk7XG4gICAgICAgICAgICBjb250cm9sbGVyLmNhbGxWaWV3TGlzdGVuZXJzKHZpZXdJbmZvKTsgVE9ETyAqL1xuXG4gICAgICAgICAgICB0aGF0LnJlcGFpbnRBbGwoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBcbiAgICAvLyBNb3JlIGFkdmFuY2VkIHpvb20gbWV0aG9kc1xuICAgIGZ1bmN0aW9uIHpvb21PbkNlbnRlcih6b29tKSB7XG4gICAgICAgIHZhciBcbiAgICAgICAgICAgIHdpZHRoID0gJChjYW52YXMpLndpZHRoKCksXG4gICAgICAgICAgICBoZWlnaHQgPSAkKGNhbnZhcykuaGVpZ2h0KClcbiAgICAgICAgICAgIFxuICAgICAgICB6b29tT25Qb2ludCh6b29tLCB3aWR0aCAvIDIsIGhlaWdodCAvIDIpO1xuICAgIH1cblxuICAgIHRoaXMuem9vbUluID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHpvb21PbkNlbnRlcih0aGlzLmdldFpvb20oKSAqIDIpO1xuICAgIH07XG5cbiAgICB0aGlzLnpvb21PdXQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgem9vbU9uQ2VudGVyKHRoaXMuZ2V0Wm9vbSgpICogMC41KTtcbiAgICB9O1xuXG4gICAgdGhpcy56b29tMTAwID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHpvb21PbkNlbnRlcigxKTtcbiAgICAgICAgY2VudGVyQ2FudmFzKCk7XG4gICAgfTtcblxuICAgIHRoaXMucmVzZXRSb3RhdGlvbiA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXJcbiAgICAgICAgICAgIGNlbnRlciA9IHt4OiBjYW52YXMud2lkdGggLyAyLCB5OiBjYW52YXMuaGVpZ2h0IC8gMn0sXG5cbiAgICAgICAgICAgIHJvdFRyYW5zID0gbmV3IENQVHJhbnNmb3JtKCk7XG4gICAgICAgIFxuICAgICAgICByb3RUcmFucy5yb3RhdGVBcm91bmRQb2ludCgtdGhpcy5nZXRSb3RhdGlvbigpLCBjZW50ZXIueCwgY2VudGVyLnkpO1xuICAgICAgICByb3RUcmFucy5tdWx0aXBseSh0cmFuc2Zvcm0pO1xuXG4gICAgICAgIHRoaXMuc2V0T2Zmc2V0KH5+cm90VHJhbnMuZ2V0VHJhbnNsYXRlWCgpLCB+fnJvdFRyYW5zLmdldFRyYW5zbGF0ZVkoKSk7XG4gICAgICAgIHRoaXMuc2V0Um90YXRpb24oMCk7XG4gICAgfTtcbiAgICBcbiAgICAvKipcbiAgICAgKiBBZGQgdGhlIHBvaW50ZXIgcHJlc3N1cmUgZmllbGQgdG8gdGhlIGdpdmVuIHBvaW50ZXIgZXZlbnQuXG4gICAgICovXG4gICAgZnVuY3Rpb24gZ2V0UG9pbnRlclByZXNzdXJlKGUpIHtcbiAgICAgICAgLy8gVXNlIFdhY29tIHByZXNzdXJlIGluIHByZWZlcmVuY2UgdG8gcG9pbnRlciBldmVudCBwcmVzc3VyZSAoaWYgcHJlc2VudClcbiAgICAgICAgaWYgKHdhY29tUGVuRG93bikge1xuICAgICAgICAgICAgcmV0dXJuIHRhYmxldC5nZXRQcmVzc3VyZSgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLyogSW4gdGhlIFBvaW50ZXIgRXZlbnRzIEFQSSwgbWljZSBoYXZlIGEgZGVmYXVsdCBwcmVzc3VyZSBvZiAwLjUsIGJ1dCB3ZSB3YW50IDEuMC4gU2luY2Ugd2UgY2FuJ3QgXG4gICAgICAgICAgICAgKiBkaXN0aW5ndWlzaCBiZXR3ZWVuIG1pY2UgYW5kIHBlbnMgYXQgdGhpcyBwb2ludCwgd2UgZG9uJ3QgaGF2ZSBhbnkgYmV0dGVyIG9wdGlvbnM6XG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIHJldHVybiBlLnByZXNzdXJlICogMjtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHZhclxuICAgICAgICBtb3VzZVdoZWVsRGVib3VuY2UgPSBmYWxzZTtcblxuICAgIGZ1bmN0aW9uIGhhbmRsZU1vdXNlV2hlZWwoZSkge1xuICAgICAgICBpZiAoZS5kZWx0YVkgIT0gMCkge1xuICAgICAgICAgICAgaWYgKCFtb3VzZVdoZWVsRGVib3VuY2UgfHwgTWF0aC5hYnMoZS5kZWx0YVkpID4gMjApIHtcbiAgICAgICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICAgICAgZmFjdG9yO1xuXG4gICAgICAgICAgICAgICAgaWYgKGUuZGVsdGFZID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBmYWN0b3IgPSAxIC8gMS4xNTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBmYWN0b3IgPSAxLjE1O1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgICAgICBjYW52YXNQb2ludCA9IG1vdXNlQ29vcmRUb0NhbnZhcyh7eDogZS5wYWdlWCwgeTogZS5wYWdlWX0pLFxuICAgICAgICAgICAgICAgICAgICBkb2NQb2ludCA9IGNvb3JkVG9Eb2N1bWVudChjYW52YXNQb2ludCk7XG5cbiAgICAgICAgICAgICAgICBpZiAoYXJ0d29yay5pc1BvaW50V2l0aGluKGRvY1BvaW50LngsIGRvY1BvaW50LnkpKSB7XG4gICAgICAgICAgICAgICAgICAgIHpvb21PblBvaW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC5nZXRab29tKCkgKiBmYWN0b3IsXG4gICAgICAgICAgICAgICAgICAgICAgICBjYW52YXNQb2ludC54LFxuICAgICAgICAgICAgICAgICAgICAgICAgY2FudmFzUG9pbnQueVxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHpvb21PblBvaW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC5nZXRab29tKCkgKiBmYWN0b3IsXG4gICAgICAgICAgICAgICAgICAgICAgICBvZmZzZXRYICsgfn4oYXJ0d29yay53aWR0aCAqIHpvb20gLyAyKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG9mZnNldFkgKyB+fihhcnR3b3JrLmhlaWdodCAqIHpvb20gLyAyKVxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIG1vdXNlV2hlZWxEZWJvdW5jZSA9IG1vdXNlV2hlZWxEZWJvdW5jZSB8fCBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICBtb3VzZVdoZWVsRGVib3VuY2UgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9LCA1MCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHZhclxuICAgICAgICBjYW52YXNDbGllbnRSZWN0O1xuXG4gICAgZnVuY3Rpb24gaGFuZGxlUG9pbnRlck1vdmUoZSkge1xuICAgICAgICAvLyBVc2UgdGhlIGNhY2hlZCBwb3NpdGlvbiBvZiB0aGUgY2FudmFzIG9uIHRoZSBwYWdlIGlmIHBvc3NpYmxlXG4gICAgICAgIGlmICghY2FudmFzQ2xpZW50UmVjdCkge1xuICAgICAgICAgICAgY2FudmFzQ2xpZW50UmVjdCA9IGNhbnZhcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhclxuICAgICAgICAgICAgbW91c2VQb3MgPSB7eDogZS5jbGllbnRYIC0gY2FudmFzQ2xpZW50UmVjdC5sZWZ0LCB5OiBlLmNsaWVudFkgLSBjYW52YXNDbGllbnRSZWN0LnRvcH07XG4gICAgICAgIFxuICAgICAgICAvLyBTdG9yZSB0aGVzZSBnbG9iYWxseSBmb3IgdGhlIGV2ZW50IGhhbmRsZXJzIHRvIHJlZmVyIHRvXG4gICAgICAgIG1vdXNlWCA9IG1vdXNlUG9zLng7XG4gICAgICAgIG1vdXNlWSA9IG1vdXNlUG9zLnk7XG5cbiAgICAgICAgaWYgKCFkb250U3RlYWxGb2N1cykge1xuICAgICAgICAgICAgcmVxdWVzdEZvY3VzSW5XaW5kb3coKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChtb3VzZURvd24pIHtcbiAgICAgICAgICAgIGFjdGl2ZU1vZGUubW91c2VEcmFnZ2VkKGUsIGdldFBvaW50ZXJQcmVzc3VyZShlKSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBhY3RpdmVNb2RlLm1vdXNlTW92ZWQoZSwgZ2V0UG9pbnRlclByZXNzdXJlKGUpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBcbiAgICBmdW5jdGlvbiBoYW5kbGVQb2ludGVyVXAoZSkge1xuICAgICAgICBtb3VzZURvd24gPSBmYWxzZTtcbiAgICAgICAgd2Fjb21QZW5Eb3duID0gZmFsc2U7XG4gICAgICAgIGFjdGl2ZU1vZGUubW91c2VSZWxlYXNlZChlKTtcbiAgICAgICAgY2FudmFzLnJlbGVhc2VQb2ludGVyQ2FwdHVyZShlLnBvaW50ZXJJZCk7XG4gICAgfVxuICAgIFxuICAgIGZ1bmN0aW9uIGhhbmRsZVBvaW50ZXJEb3duKGUpIHtcbiAgICAgICAgY2FudmFzLnNldFBvaW50ZXJDYXB0dXJlKGUucG9pbnRlcklkKTtcblxuICAgICAgICBjYW52YXNDbGllbnRSZWN0ID0gY2FudmFzLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuXG4gICAgICAgIHZhclxuICAgICAgICAgICAgbW91c2VQb3MgPSB7eDogZS5jbGllbnRYIC0gY2FudmFzQ2xpZW50UmVjdC5sZWZ0LCB5OiBlLmNsaWVudFkgLSBjYW52YXNDbGllbnRSZWN0LnRvcH07XG5cbiAgICAgICAgLy8gU3RvcmUgdGhlc2UgZ2xvYmFsbHkgZm9yIHRoZSBldmVudCBoYW5kbGVycyB0byByZWZlciB0b1xuICAgICAgICBtb3VzZVggPSBtb3VzZVBvcy54O1xuICAgICAgICBtb3VzZVkgPSBtb3VzZVBvcy55O1xuXG4gICAgICAgIGlmICghbW91c2VEb3duKSB7XG4gICAgICAgICAgICBtb3VzZURvd24gPSB0cnVlO1xuICAgICAgICAgICAgd2Fjb21QZW5Eb3duID0gdGFibGV0LmlzUGVuKCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHJlcXVlc3RGb2N1c0luV2luZG93KCk7XG4gICAgICAgICAgICBhY3RpdmVNb2RlLm1vdXNlUHJlc3NlZChlLCBnZXRQb2ludGVyUHJlc3N1cmUoZSkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIGZ1bmN0aW9uIGhhbmRsZUtleURvd24oZSkge1xuICAgICAgICBhY3RpdmVNb2RlLmtleURvd24oZSk7XG4gICAgfVxuICAgIFxuICAgIGZ1bmN0aW9uIGhhbmRsZUtleVVwKGUpIHtcbiAgICAgICAgYWN0aXZlTW9kZS5rZXlVcChlKTtcbiAgICB9XG4gICAgXG4gICAgLy8gR2V0IHRoZSBET00gZWxlbWVudCBmb3IgdGhlIGNhbnZhcyBhcmVhXG4gICAgdGhpcy5nZXRFbGVtZW50ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBjYW52YXNDb250YWluZXI7XG4gICAgfTtcbiAgICBcbiAgICAvKipcbiAgICAgKiBTY2hlZHVsZSBhIHJlcGFpbnQgZm9yIHRoZSBjdXJyZW50IHJlcGFpbnQgcmVnaW9uLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHJlcGFpbnQoKSB7XG4gICAgICAgIGlmICghc2NoZWR1bGVkUmVwYWludCkge1xuICAgICAgICAgICAgc2NoZWR1bGVkUmVwYWludCA9IHRydWU7XG4gICAgICAgICAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHRoYXQucGFpbnQoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8qKlxuICAgICAqIFNjaGVkdWxlIGEgcmVwYWludCBmb3IgdGhlIGVudGlyZSBzY3JlZW4uXG4gICAgICovXG4gICAgdGhpcy5yZXBhaW50QWxsID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJlcGFpbnRSZWdpb24ubGVmdCA9IDA7XG4gICAgICAgIHJlcGFpbnRSZWdpb24udG9wID0gMDtcbiAgICAgICAgcmVwYWludFJlZ2lvbi5yaWdodCA9IGNhbnZhcy53aWR0aDtcbiAgICAgICAgcmVwYWludFJlZ2lvbi5ib3R0b20gPSBjYW52YXMuaGVpZ2h0O1xuICAgICAgICBcbiAgICAgICAgcmVwYWludCgpO1xuICAgIH07XG4gICAgXG4gICAgLyoqXG4gICAgICogU2NoZWR1bGUgYSByZXBhaW50IGZvciBhbiBhcmVhIG9mIHRoZSBzY3JlZW4gZm9yIGxhdGVyLlxuICAgICAqIFxuICAgICAqIEBwYXJhbSByZWN0IENQUmVjdCBSZWdpb24gdGhhdCBzaG91bGQgYmUgcmVwYWludGVkIHVzaW5nIGRpc3BsYXkgY29vcmRpbmF0ZXNcbiAgICAgKi9cbiAgICBmdW5jdGlvbiByZXBhaW50UmVjdChyZWN0KSB7XG4gICAgICAgIHJlcGFpbnRSZWdpb24udW5pb24ocmVjdCk7XG4gICAgICAgIFxuICAgICAgICByZXBhaW50KCk7XG4gICAgfTtcbiAgICBcbiAgICB0aGlzLnBhaW50ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhclxuICAgICAgICAgICAgZHJhd2luZ1dhc0NsaXBwZWQgPSBmYWxzZTtcbiAgICAgICAgXG4gICAgICAgIHNjaGVkdWxlZFJlcGFpbnQgPSBmYWxzZTtcbiAgICAgICAgXG4gICAgICAgIC8qIENsaXAgZHJhd2luZyB0byB0aGUgYXJlYSBvZiB0aGUgc2NyZWVuIHdlIHdhbnQgdG8gcmVwYWludCAqL1xuICAgICAgICBpZiAoIXJlcGFpbnRSZWdpb24uaXNFbXB0eSgpKSB7XG4gICAgICAgICAgICBjYW52YXNDb250ZXh0LnNhdmUoKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKGNhbnZhc0NvbnRleHQuY2xpcCkge1xuICAgICAgICAgICAgICAgIGNhbnZhc0NvbnRleHQuYmVnaW5QYXRoKCk7XG5cbiAgICAgICAgICAgICAgICByZXBhaW50UmVnaW9uLmxlZnQgPSByZXBhaW50UmVnaW9uLmxlZnQgfCAwOyBcbiAgICAgICAgICAgICAgICByZXBhaW50UmVnaW9uLnRvcCA9IHJlcGFpbnRSZWdpb24udG9wIHwgMDtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBjYW52YXNDb250ZXh0LnJlY3QoXG4gICAgICAgICAgICAgICAgICAgIHJlcGFpbnRSZWdpb24ubGVmdCxcbiAgICAgICAgICAgICAgICAgICAgcmVwYWludFJlZ2lvbi50b3AsXG4gICAgICAgICAgICAgICAgICAgIE1hdGguY2VpbChyZXBhaW50UmVnaW9uLmdldFdpZHRoKCkpLFxuICAgICAgICAgICAgICAgICAgICBNYXRoLmNlaWwocmVwYWludFJlZ2lvbi5nZXRIZWlnaHQoKSlcbiAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgY2FudmFzQ29udGV4dC5jbGlwKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGRyYXdpbmdXYXNDbGlwcGVkID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLyogQ29weSBwaXhlbHMgdGhhdCBjaGFuZ2VkIGluIHRoZSBkb2N1bWVudCBpbnRvIG91ciBsb2NhbCBmdXNlZCBpbWFnZSBjYWNoZSAqL1xuICAgICAgICBpZiAoIWFydHdvcmtVcGRhdGVSZWdpb24uaXNFbXB0eSgpKSB7XG4gICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICBpbWFnZURhdGEgPSBhcnR3b3JrLmZ1c2lvbkxheWVycygpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBhcnR3b3JrQ2FudmFzQ29udGV4dC5wdXRJbWFnZURhdGEoXG4gICAgICAgICAgICAgICAgaW1hZ2VEYXRhLCAwLCAwLCBhcnR3b3JrVXBkYXRlUmVnaW9uLmxlZnQsIGFydHdvcmtVcGRhdGVSZWdpb24udG9wLCBhcnR3b3JrVXBkYXRlUmVnaW9uLnJpZ2h0IC0gYXJ0d29ya1VwZGF0ZVJlZ2lvbi5sZWZ0LCBhcnR3b3JrVXBkYXRlUmVnaW9uLmJvdHRvbSAtIGFydHdvcmtVcGRhdGVSZWdpb24udG9wXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBhcnR3b3JrVXBkYXRlUmVnaW9uLm1ha2VFbXB0eSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgY2FudmFzQ29udGV4dC5maWxsU3R5bGUgPSAnIzYwNjA2MCc7XG4gICAgICAgIGNhbnZhc0NvbnRleHQuZmlsbFJlY3QoMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTtcbiAgICAgICAgXG4gICAgICAgIC8vIFRyYW5zZm9ybSB0aGUgY29vcmRpbmF0ZSBzeXN0ZW0gdG8gYnJpbmcgdGhlIGRvY3VtZW50IGludG8gdGhlIHJpZ2h0IHBvc2l0aW9uIG9uIHRoZSBzY3JlZW4gKHRyYW5zbGF0ZS96b29tL2V0YylcbiAgICAgICAgY2FudmFzQ29udGV4dC5zYXZlKCk7XG4gICAgICAgIHtcbiAgICAgICAgICAgIGNhbnZhc0NvbnRleHQuc2V0VHJhbnNmb3JtKHRyYW5zZm9ybS5tWzBdLCB0cmFuc2Zvcm0ubVsxXSwgdHJhbnNmb3JtLm1bMl0sIHRyYW5zZm9ybS5tWzNdLCB0cmFuc2Zvcm0ubVs0XSwgdHJhbnNmb3JtLm1bNV0pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjYW52YXNDb250ZXh0LmZpbGxTdHlsZSA9IGNoZWNrZXJib2FyZFBhdHRlcm47XG4gICAgICAgICAgICBjYW52YXNDb250ZXh0LmZpbGxSZWN0KDAsIDAsIGFydHdvcmsud2lkdGgsIGFydHdvcmsuaGVpZ2h0KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY2FudmFzQ29udGV4dC5kcmF3SW1hZ2UoXG4gICAgICAgICAgICAgICAgYXJ0d29ya0NhbnZhcywgMCwgMCwgYXJ0d29ya0NhbnZhcy53aWR0aCwgYXJ0d29ya0NhbnZhcy5oZWlnaHRcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgICAgY2FudmFzQ29udGV4dC5yZXN0b3JlKCk7XG4gICAgICAgIFxuICAgICAgICAvLyBUaGUgcmVzdCBvZiB0aGUgZHJhd2luZyBoYXBwZW5zIHVzaW5nIHRoZSBvcmlnaW5hbCBzY3JlZW4gY29vcmRpbmF0ZSBzeXN0ZW1cbiAgICAgICAgXG4gICAgICAgIGNhbnZhc0NvbnRleHQuZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uID0gJ2V4Y2x1c2lvbic7XG4gICAgICAgIFxuICAgICAgICBpZiAoY2FudmFzQ29udGV4dC5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb24gPT0gXCJleGNsdXNpb25cIikge1xuICAgICAgICAgICAgLy8gV2hpdGUgKyBleGNsdXNpb24gaW52ZXJ0cyB0aGUgY29sb3JzIHVuZGVybmVhdGgsIGdpdmluZyB1cyBnb29kIGNvbnRyYXN0XG4gICAgICAgICAgICBjYW52YXNDb250ZXh0LnN0cm9rZVN0eWxlID0gJ3doaXRlJztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIElFIEVkZ2UgZG9lc24ndCBzdXBwb3J0IEV4Y2x1c2lvbiwgc28gaG93IGFib3V0IERpZmZlcmVuY2Ugd2l0aCBtaWQtZ3JleSBpbnN0ZWFkXG4gICAgICAgICAgICAvLyBUaGlzIGlzIHZpc2libGUgb24gYmxhY2sgYW5kIHdoaXRlLCBidXQgZGlzYXBwZWFycyBvbiBhIGdyZXkgYmFja2dyb3VuZFxuICAgICAgICAgICAgY2FudmFzQ29udGV4dC5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb24gPSAnZGlmZmVyZW5jZSc7XG4gICAgICAgICAgICBjYW52YXNDb250ZXh0LnN0cm9rZVN0eWxlID0gJyM4ODgnO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBGb3Igc3VwZXIgZHVtYiBicm93c2VycyAob25seSBzdXBwb3J0IHNvdXJjZS1vdmVyKSwgYXQgbGVhc3QgZG9uJ3QgbWFrZSB0aGUgY3Vyc29yIGludmlzaWJsZSBvbiBhIHdoaXRlIEJHIVxuICAgICAgICAgICAgaWYgKGNhbnZhc0NvbnRleHQuZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uICE9IFwiZGlmZmVyZW5jZVwiKSB7XG4gICAgICAgICAgICAgICAgY2FudmFzQ29udGV4dC5zdHJva2VTdHlsZSA9ICdibGFjayc7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY2FudmFzQ29udGV4dC5saW5lV2lkdGggPSAxLjA7XG4gICAgICAgIFxuICAgICAgICAvLyBEcmF3IHNlbGVjdGlvblxuICAgICAgICBpZiAoIWFydHdvcmsuZ2V0U2VsZWN0aW9uKCkuaXNFbXB0eSgpKSB7XG4gICAgICAgICAgICBjYW52YXNDb250ZXh0LnNldExpbmVEYXNoKFszLCAyXSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHBsb3RTZWxlY3Rpb25SZWN0KGNhbnZhc0NvbnRleHQsIGFydHdvcmsuZ2V0U2VsZWN0aW9uKCkpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjYW52YXNDb250ZXh0LnNldExpbmVEYXNoKFtdKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gRHJhdyBncmlkXG4gICAgICAgIGlmIChzaG93R3JpZCkge1xuICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgYm91bmRzID0gYXJ0d29yay5nZXRCb3VuZHMoKSxcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBncmlkVmlzdWFsUGl0Y2ggPSB6b29tICogZ3JpZFNpemU7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8qIElmIHRoZSBncmlkIGlzIGdvaW5nIHRvIGJlIG1pbmlzY3VsZSBvbiB0aGUgc2NyZWVuIChiYXNpY2FsbHkganVzdCBjb3ZlcmluZy9pbnZlcnRpbmcgdGhlIGVudGlyZSBhcnR3b3JrLFxuICAgICAgICAgICAgICogZG8gbm90IHBhaW50IGl0LlxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBpZiAoZ3JpZFZpc3VhbFBpdGNoID4gMikge1xuICAgICAgICAgICAgICAgIGNhbnZhc0NvbnRleHQuYmVnaW5QYXRoKCk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gVmVydGljYWwgbGluZXNcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gZ3JpZFNpemUgLSAxOyBpIDwgYm91bmRzLnJpZ2h0OyBpICs9IGdyaWRTaXplKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgICAgICAgICAgcDEgPSBjb29yZFRvRGlzcGxheSh7eDogaSwgeTogYm91bmRzLnRvcH0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgcDIgPSBjb29yZFRvRGlzcGxheSh7eDogaSwgeTogYm91bmRzLmJvdHRvbX0pO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgY2FudmFzQ29udGV4dC5tb3ZlVG8ocDEueCArIDAuNSwgcDEueSArIDAuNSk7XG4gICAgICAgICAgICAgICAgICAgIGNhbnZhc0NvbnRleHQubGluZVRvKHAyLnggKyAwLjUsIHAyLnkgKyAwLjUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICAvLyBIb3Jpem9udGFsIGxpbmVzXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IGdyaWRTaXplIC0gMTsgaSA8IGJvdW5kcy5ib3R0b207IGkgKz0gZ3JpZFNpemUpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgICAgICAgICBwMSA9IGNvb3JkVG9EaXNwbGF5KHt4OiAwLCB5OiBpfSksXG4gICAgICAgICAgICAgICAgICAgICAgICBwMiA9IGNvb3JkVG9EaXNwbGF5KHt4OiBib3VuZHMucmlnaHQsIHk6IGl9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBjYW52YXNDb250ZXh0Lm1vdmVUbyhwMS54ICsgMC41LCBwMS55ICsgMC41KTtcbiAgICAgICAgICAgICAgICAgICAgY2FudmFzQ29udGV4dC5saW5lVG8ocDIueCArIDAuNSwgcDIueSArIDAuNSk7XG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIGNhbnZhc0NvbnRleHQuc3Ryb2tlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIEFkZGl0aW9uYWwgZHJhd2luZyBieSB0aGUgY3VycmVudCBtb2RlXG4gICAgICAgIGFjdGl2ZU1vZGUucGFpbnQoY2FudmFzQ29udGV4dCk7XG4gICAgICAgIFxuICAgICAgICBjYW52YXNDb250ZXh0Lmdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbiA9ICdzb3VyY2Utb3Zlcic7XG4gICAgICAgIFxuICAgICAgICBpZiAoZHJhd2luZ1dhc0NsaXBwZWQpIHtcbiAgICAgICAgICAgIHJlcGFpbnRSZWdpb24ubWFrZUVtcHR5KCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNhbnZhc0NvbnRleHQucmVzdG9yZSgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBcbiAgICB0aGlzLnNob3dHcmlkID0gZnVuY3Rpb24oc2hvdykge1xuICAgICAgICBzaG93R3JpZCA9IHNob3c7XG4gICAgICAgIHRoaXMucmVwYWludEFsbCgpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBSZXNpemUgdGhlIGNhbnZhcyBhcmVhIHRvIHRoZSBnaXZlbiBoZWlnaHQgKGluIHBpeGVscylcbiAgICAgKlxuICAgICAqIEBwYXJhbSBoZWlnaHQgTmV3IGNhbnZhcyBhcmVhIGhlaWdodCBpbiBwaXhlbHNcbiAgICAgKi9cbiAgICB0aGlzLnJlc2l6ZSA9IGZ1bmN0aW9uKGhlaWdodCkge1xuICAgICAgICAvLyBMZWF2ZSByb29tIGZvciB0aGUgYm90dG9tIHNjcm9sbGJhclxuICAgICAgICBoZWlnaHQgLT0gJChjYW52YXNDb250YWluZXJCb3R0b20pLm91dGVySGVpZ2h0KCk7XG5cbiAgICAgICAgJChjYW52YXMpLmNzcygnaGVpZ2h0JywgaGVpZ2h0ICsgXCJweFwiKTtcblxuICAgICAgICBjYW52YXMud2lkdGggPSAkKGNhbnZhcykud2lkdGgoKTtcbiAgICAgICAgY2FudmFzLmhlaWdodCA9IGhlaWdodDtcblxuICAgICAgICBjYW52YXNDbGllbnRSZWN0ID0gbnVsbDtcblxuICAgICAgICBjZW50ZXJDYW52YXMoKTtcblxuICAgICAgICAvLyBJbnRlcnBvbGF0aW9uIHByb3BlcnR5IGdldHMgcmVzZXQgd2hlbiBjYW52YXMgcmVzaXplc1xuICAgICAgICB0aGlzLnNldEludGVycG9sYXRpb24oaW50ZXJwb2xhdGlvbik7XG5cbiAgICAgICAgdGhpcy5yZXBhaW50QWxsKCk7XG4gICAgfTtcblxuICAgIGNvbnRyb2xsZXIub24oXCJ0b29sQ2hhbmdlXCIsIGZ1bmN0aW9uKHRvb2wsIHRvb2xJbmZvKSB7XG4gICAgICAgIHZhclxuICAgICAgICAgICAgc3BhY2VQcmVzc2VkID0ga2V5LmlzUHJlc3NlZChcInNwYWNlXCIpO1xuXG4gICAgICAgIGlmIChjdXJTZWxlY3RlZE1vZGUgPT0gY3VyRHJhd01vZGUpIHtcbiAgICAgICAgICAgIGN1clNlbGVjdGVkTW9kZSA9IGRyYXdpbmdNb2Rlc1t0b29sSW5mby5zdHJva2VNb2RlXTtcbiAgICAgICAgfVxuICAgICAgICBjdXJEcmF3TW9kZSA9IGRyYXdpbmdNb2Rlc1t0b29sSW5mby5zdHJva2VNb2RlXTtcblxuICAgICAgICBpZiAoIXNwYWNlUHJlc3NlZCAmJiBtb3VzZUluKSB7XG4gICAgICAgICAgICBicnVzaFByZXZpZXcgPSB0cnVlO1xuXG4gICAgICAgICAgICB2YXIgXG4gICAgICAgICAgICAgICAgcmVjdCA9IGdldEJydXNoUHJldmlld092YWwoKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgcmVjdC5ncm93KDIsIDIpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAob2xkUHJldmlld1JlY3QgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHJlY3QudW5pb24ob2xkUHJldmlld1JlY3QpO1xuICAgICAgICAgICAgICAgIG9sZFByZXZpZXdSZWN0ID0gbnVsbDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmVwYWludFJlY3QocmVjdCk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBcbiAgICBjb250cm9sbGVyLm9uKFwibW9kZUNoYW5nZVwiLCBmdW5jdGlvbihtb2RlKSB7XG4gICAgICAgIHN3aXRjaCAobW9kZSkge1xuICAgICAgICAgICAgY2FzZSBDaGlja2VuUGFpbnQuTV9EUkFXOlxuICAgICAgICAgICAgICAgIGN1clNlbGVjdGVkTW9kZSA9IGN1ckRyYXdNb2RlO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgIFxuICAgICAgICAgICAgY2FzZSBDaGlja2VuUGFpbnQuTV9GTE9PREZJTEw6XG4gICAgICAgICAgICAgICAgY3VyU2VsZWN0ZWRNb2RlID0gZmxvb2RGaWxsTW9kZTtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgY2FzZSBDaGlja2VuUGFpbnQuTV9HUkFESUVOVEZJTEw6XG4gICAgICAgICAgICAgICAgY3VyU2VsZWN0ZWRNb2RlID0gZ3JhZGllbnRGaWxsTW9kZTtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgY2FzZSBDaGlja2VuUGFpbnQuTV9SRUNUX1NFTEVDVElPTjpcbiAgICAgICAgICAgICAgICBjdXJTZWxlY3RlZE1vZGUgPSByZWN0U2VsZWN0aW9uTW9kZTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICBcbiAgICAgICAgICAgIGNhc2UgQ2hpY2tlblBhaW50Lk1fTU9WRV9UT09MOlxuICAgICAgICAgICAgICAgIGN1clNlbGVjdGVkTW9kZSA9IG1vdmVUb29sTW9kZTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICBcbiAgICAgICAgICAgIGNhc2UgQ2hpY2tlblBhaW50Lk1fUk9UQVRFX0NBTlZBUzpcbiAgICAgICAgICAgICAgICBjdXJTZWxlY3RlZE1vZGUgPSByb3RhdGVDYW52YXNNb2RlO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgIFxuICAgICAgICAgICAgY2FzZSBDaGlja2VuUGFpbnQuTV9DT0xPUl9QSUNLRVI6XG4gICAgICAgICAgICAgICAgY3VyU2VsZWN0ZWRNb2RlID0gY29sb3JQaWNrZXJNb2RlO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgXG4gICAgLy9cbiAgICAvLyBNb2RlcyBzeXN0ZW06IG1vZGVzIGNvbnRyb2wgdGhlIHdheSB0aGUgR1VJIGlzIHJlYWN0aW5nIHRvIHRoZSB1c2VyIGlucHV0XG4gICAgLy8gQWxsIHRoZSB0b29scyBhcmUgaW1wbGVtZW50ZWQgdGhyb3VnaCBtb2Rlc1xuICAgIC8vXG4gICAgXG4gICAgZGVmYXVsdE1vZGUgPSBuZXcgQ1BEZWZhdWx0TW9kZSgpO1xuICAgIGNvbG9yUGlja2VyTW9kZSA9IG5ldyBDUENvbG9yUGlja2VyTW9kZSgpO1xuICAgIG1vdmVDYW52YXNNb2RlID0gbmV3IENQTW92ZUNhbnZhc01vZGUoKTtcbiAgICByb3RhdGVDYW52YXNNb2RlID0gbmV3IENQUm90YXRlQ2FudmFzTW9kZSgpO1xuICAgIGZsb29kRmlsbE1vZGUgPSBuZXcgQ1BGbG9vZEZpbGxNb2RlKCk7XG4gICAgZ3JhZGllbnRGaWxsTW9kZSA9IG5ldyBDUEdyYWRpZW50RmlsbE1vZGUoKTtcbiAgICByZWN0U2VsZWN0aW9uTW9kZSA9IG5ldyBDUFJlY3RTZWxlY3Rpb25Nb2RlKCk7XG4gICAgbW92ZVRvb2xNb2RlID0gbmV3IENQTW92ZVRvb2xNb2RlKCk7XG5cbiAgICAvLyB0aGlzIG11c3QgY29ycmVzcG9uZCB0byB0aGUgc3Ryb2tlIG1vZGVzIGRlZmluZWQgaW4gQ1BUb29sSW5mb1xuICAgIGRyYXdpbmdNb2RlcyA9IFtuZXcgQ1BGcmVlaGFuZE1vZGUoKSwgbmV3IENQTGluZU1vZGUoKSwgbmV3IENQQmV6aWVyTW9kZSgpXTtcblxuICAgIGN1ckRyYXdNb2RlID0gZHJhd2luZ01vZGVzW0NQQnJ1c2hJbmZvLlNNX0ZSRUVIQU5EXTtcbiAgICBjdXJTZWxlY3RlZE1vZGUgPSBjdXJEcmF3TW9kZTtcbiAgICBhY3RpdmVNb2RlID0gZGVmYXVsdE1vZGU7XG4gICAgXG4gICAgYXJ0d29ya0NhbnZhcy53aWR0aCA9IGFydHdvcmsud2lkdGg7XG4gICAgYXJ0d29ya0NhbnZhcy5oZWlnaHQgPSBhcnR3b3JrLmhlaWdodDtcbiAgICBcbiAgICBjYW52YXMud2lkdGggPSA4MDA7XG4gICAgY2FudmFzLmhlaWdodCA9IDkwMDtcbiAgICBjYW52YXMuY2xhc3NOYW1lID0gXCJjaGlja2VucGFpbnQtY2FudmFzXCI7XG4gICAgY2FudmFzLnNldEF0dHJpYnV0ZShcInRvdWNoLWFjdGlvblwiLCBcIm5vbmVcIik7XG4gICAgXG4gICAgaWYgKCFjYW52YXNDb250ZXh0LnNldExpbmVEYXNoKSB7IFxuICAgICAgICBjYW52YXNDb250ZXh0LnNldExpbmVEYXNoID0gZnVuY3Rpb24gKCkge30gLy8gRm9yIElFIDEwIGFuZCBvbGRlclxuICAgIH1cbiAgICBcbiAgICBjYW52YXMuYWRkRXZlbnRMaXN0ZW5lcihcImNvbnRleHRtZW51XCIsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH0pO1xuICAgIFxuICAgIGNhbnZhcy5hZGRFdmVudExpc3RlbmVyKFwibW91c2VlbnRlclwiLCBmdW5jdGlvbigpIHtcbiAgICAgICAgbW91c2VJbiA9IHRydWU7XG4gICAgfSk7XG4gICAgXG4gICAgY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWxlYXZlXCIsIGZ1bmN0aW9uKCkge1xuICAgICAgICBtb3VzZUluID0gZmFsc2U7XG4gICAgICAgIFxuICAgICAgICBpZiAoIW1vdXNlRG93bikge1xuICAgICAgICAgICAgdGhhdC5yZXBhaW50QWxsKCk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBcbiAgICBjYW52YXMuYWRkRXZlbnRMaXN0ZW5lcihcInBvaW50ZXJkb3duXCIsIGhhbmRsZVBvaW50ZXJEb3duKTtcbiAgICBjYW52YXMuYWRkRXZlbnRMaXN0ZW5lcihcInBvaW50ZXJtb3ZlXCIsIGhhbmRsZVBvaW50ZXJNb3ZlKTtcbiAgICBjYW52YXMuYWRkRXZlbnRMaXN0ZW5lcihcInBvaW50ZXJ1cFwiLCBoYW5kbGVQb2ludGVyVXApO1xuICAgIGNhbnZhcy5hZGRFdmVudExpc3RlbmVyKFwid2hlZWxcIiwgaGFuZGxlTW91c2VXaGVlbClcbiAgICBcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBoYW5kbGVLZXlEb3duKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5dXBcIiwgaGFuZGxlS2V5VXApO1xuXG4gICAgLyogV29ya2Fyb3VuZCBmb3IgQ2hyb21lIE1hYyBidWcgdGhhdCBjYXVzZXMgY2FudmFzIHRvIGJlIGRpc3Bvc2VkIGFuZCBuZXZlciByZWNyZWF0ZWQgd2hlbiB0YWIgaXMgc3dpdGNoZWQgaW50byB0aGUgXG4gICAgICogYmFja2dyb3VuZCBodHRwczovL2J1Z3MuY2hyb21pdW0ub3JnL3AvY2hyb21pdW0vaXNzdWVzL2RldGFpbD9pZD01ODg0MzRcbiAgICAgKi9cbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwidmlzaWJpbGl0eWNoYW5nZVwiLCBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyXG4gICAgICAgICAgICBvbGRIZWlnaHQgPSBjYW52YXMuaGVpZ2h0ICsgJChjYW52YXNDb250YWluZXJCb3R0b20pLm91dGVySGVpZ2h0KCk7XG5cbiAgICAgICAgY2FudmFzLndpZHRoID0gMTtcbiAgICAgICAgY2FudmFzLmhlaWdodCA9IDE7XG5cbiAgICAgICAgdGhhdC5yZXNpemUob2xkSGVpZ2h0KTtcbiAgICB9LCBmYWxzZSk7XG4gICAgXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJzY3JvbGxcIiwgZnVuY3Rpb24oKSB7XG4gICAgICAgIGNhbnZhc0NsaWVudFJlY3QgPSBudWxsO1xuICAgIH0pO1xuICAgIFxuICAgIGNhbnZhcy5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgaWYgKGUuYnV0dG9uID09IEJVVFRPTl9XSEVFTCkge1xuICAgICAgICAgICAgLy8gUHJldmVudCBtaWRkbGUtbW91c2Ugc2Nyb2xsaW5nIGluIEZpcmVmb3hcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIFxuICAgIGFydHdvcmsub24oXCJ1cGRhdGVSZWdpb25cIiwgZnVuY3Rpb24ocmVnaW9uKSB7XG4gICAgICAgIGFydHdvcmtVcGRhdGVSZWdpb24udW5pb24ocmVnaW9uKTtcbiAgICAgICAgXG4gICAgICAgIHJlcGFpbnRSZWN0KGdldFJlZnJlc2hBcmVhKGFydHdvcmtVcGRhdGVSZWdpb24pKTtcbiAgICB9KTtcbiAgICBcbiAgICBob3J6U2Nyb2xsLm9uKFwidmFsdWVDaGFuZ2VkXCIsIGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgIHZhciBcbiAgICAgICAgICAgIHAgPSB0aGF0LmdldE9mZnNldCgpO1xuICAgICAgICBcbiAgICAgICAgdGhhdC5zZXRPZmZzZXQoLXZhbHVlLCBwLnkpO1xuICAgIH0pO1xuICAgIFxuICAgIHZlcnRTY3JvbGwub24oXCJ2YWx1ZUNoYW5nZWRcIiwgZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgdmFyIFxuICAgICAgICAgICAgcCA9IHRoYXQuZ2V0T2Zmc2V0KCk7XG4gICAgICAgIFxuICAgICAgICB0aGF0LnNldE9mZnNldChwLngsIC12YWx1ZSk7XG4gICAgfSk7XG4gICAgXG4gICAgdGhpcy5zZXRJbnRlcnBvbGF0aW9uKGZhbHNlKTtcblxuICAgIHZhclxuICAgICAgICBjYW52YXNTcGFjaW5nV3JhcHBlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgXG4gICAgY2FudmFzU3BhY2luZ1dyYXBwZXIuY2xhc3NOYW1lID0gJ2NoaWNrZW5wYWludC1jYW52YXMtY29udGFpbmVyLXdyYXBwZXInO1xuICAgIGNhbnZhc1NwYWNpbmdXcmFwcGVyLmFwcGVuZENoaWxkKGNhbnZhcyk7XG4gICAgXG4gICAgY2FudmFzQ29udGFpbmVyVG9wLmNsYXNzTmFtZSA9ICdjaGlja2VucGFpbnQtY2FudmFzLWNvbnRhaW5lci10b3AnO1xuICAgIGNhbnZhc0NvbnRhaW5lclRvcC5hcHBlbmRDaGlsZChjYW52YXNTcGFjaW5nV3JhcHBlcik7XG4gICAgY2FudmFzQ29udGFpbmVyVG9wLmFwcGVuZENoaWxkKHZlcnRTY3JvbGwuZ2V0RWxlbWVudCgpKTtcbiAgICBcbiAgICBjYW52YXNDb250YWluZXJCb3R0b20uY2xhc3NOYW1lID0gJ2NoaWNrZW5wYWludC1jYW52YXMtY29udGFpbmVyLWJvdHRvbSc7XG4gICAgY2FudmFzQ29udGFpbmVyQm90dG9tLmFwcGVuZENoaWxkKGhvcnpTY3JvbGwuZ2V0RWxlbWVudCgpKTtcbiAgICBcbiAgICBjYW52YXNDb250YWluZXIuYXBwZW5kQ2hpbGQoY2FudmFzQ29udGFpbmVyVG9wKTtcbiAgICBjYW52YXNDb250YWluZXIuYXBwZW5kQ2hpbGQoY2FudmFzQ29udGFpbmVyQm90dG9tKTtcbiAgICBcbiAgICBjb250cm9sbGVyLnNldENhbnZhcyh0aGlzKTtcbn0iLCIvKlxuICAgIENoaWNrZW5QYWludFxuICAgIFxuICAgIENoaWNrZW5QYWludCBpcyBhIHRyYW5zbGF0aW9uIG9mIENoaWJpUGFpbnQgZnJvbSBKYXZhIHRvIEphdmFTY3JpcHRcbiAgICBieSBOaWNob2xhcyBTaGVybG9jayAvIENoaWNrZW4gU21vb3RoaWUuXG4gICAgXG4gICAgQ2hpYmlQYWludCBpcyBDb3B5cmlnaHQgKGMpIDIwMDYtMjAwOCBNYXJjIFNjaGVmZXJcblxuICAgIENoaWNrZW5QYWludCBpcyBmcmVlIHNvZnR3YXJlOiB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3IgbW9kaWZ5XG4gICAgaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBhcyBwdWJsaXNoZWQgYnlcbiAgICB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uLCBlaXRoZXIgdmVyc2lvbiAzIG9mIHRoZSBMaWNlbnNlLCBvclxuICAgIChhdCB5b3VyIG9wdGlvbikgYW55IGxhdGVyIHZlcnNpb24uXG5cbiAgICBDaGlja2VuUGFpbnQgaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCxcbiAgICBidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZlxuICAgIE1FUkNIQU5UQUJJTElUWSBvciBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS4gIFNlZSB0aGVcbiAgICBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9yZSBkZXRhaWxzLlxuXG4gICAgWW91IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2VcbiAgICBhbG9uZyB3aXRoIENoaWNrZW5QYWludC4gSWYgbm90LCBzZWUgPGh0dHA6Ly93d3cuZ251Lm9yZy9saWNlbnNlcy8+LlxuKi9cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gQ1BDaGVja2JveChzdGF0ZSwgdGl0bGUpIHtcbiAgICB2YXJcbiAgICAgICAgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyksXG4gICAgICAgIGNhbnZhc0NvbnRleHQgPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKSxcbiAgICAgICAgXG4gICAgICAgIHRoYXQgPSB0aGlzO1xuICAgIFxuICAgIHRoaXMuc3RhdGUgPSBzdGF0ZSB8fCBmYWxzZTtcbiAgICBcbiAgICBmdW5jdGlvbiBwYWludCgpIHtcbiAgICAgICAgdmFyIFxuICAgICAgICAgICAgd2lkdGggPSBjYW52YXMud2lkdGgsXG4gICAgICAgICAgICBoZWlnaHQgPSBjYW52YXMuaGVpZ2h0O1xuXG4gICAgICAgIGNhbnZhc0NvbnRleHQuY2xlYXJSZWN0KDAsIDAsIHdpZHRoLCBoZWlnaHQpO1xuICAgICAgICBcbiAgICAgICAgY2FudmFzQ29udGV4dC5iZWdpblBhdGgoKTtcbiAgICAgICAgY2FudmFzQ29udGV4dC5hcmMod2lkdGggLyAyICsgMSwgd2lkdGggLyAyICsgMSwgTWF0aC5tYXgod2lkdGggLyAyLCAxKSAtIDIsIDAsIE1hdGguUEkgKiAyKTtcbiAgICAgICAgXG4gICAgICAgIGlmICh0aGF0LnN0YXRlKSB7XG4gICAgICAgICAgICBjYW52YXNDb250ZXh0LmZpbGwoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNhbnZhc0NvbnRleHQuc3Ryb2tlKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLnNldFZhbHVlID0gZnVuY3Rpb24oYikge1xuICAgICAgICBpZiAodGhpcy5zdGF0ZSAhPSBiKSB7XG4gICAgICAgICAgICB0aGlzLnN0YXRlID0gYjtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy5lbWl0RXZlbnQoJ3ZhbHVlQ2hhbmdlJywgW2JdKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgcGFpbnQoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgXG4gICAgdGhpcy5nZXRFbGVtZW50ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBjYW52YXM7XG4gICAgfVxuICAgIFxuICAgIGNhbnZhcy5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgdGhhdC5zZXRWYWx1ZSghdGhhdC5zdGF0ZSk7XG4gICAgfSk7XG4gICAgXG4gICAgY2FudmFzLnRpdGxlID0gdGl0bGUgfHwgXCJcIjtcbiAgICBjYW52YXMuY2xhc3NOYW1lID0gJ2NoaWNrZW5wYWludC1jaGVja2JveCc7XG4gICAgXG4gICAgY2FudmFzLndpZHRoID0gMjA7XG4gICAgY2FudmFzLmhlaWdodCA9IDIwO1xuICAgIFxuICAgIGNhbnZhcy5maWxsU3R5bGUgPSAnYmxhY2snO1xuICAgIGNhbnZhcy5zdHJva2VTdHlsZSA9ICdibGFjayc7XG4gICAgXG4gICAgcGFpbnQoKTtcbn07XG5cbkNQQ2hlY2tib3gucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShFdmVudEVtaXR0ZXIucHJvdG90eXBlKTtcbkNQQ2hlY2tib3gucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gQ1BDaGVja2JveDsiLCIvKlxuICAgIENoaWNrZW5QYWludFxuICAgIFxuICAgIENoaWNrZW5QYWludCBpcyBhIHRyYW5zbGF0aW9uIG9mIENoaWJpUGFpbnQgZnJvbSBKYXZhIHRvIEphdmFTY3JpcHRcbiAgICBieSBOaWNob2xhcyBTaGVybG9jayAvIENoaWNrZW4gU21vb3RoaWUuXG4gICAgXG4gICAgQ2hpYmlQYWludCBpcyBDb3B5cmlnaHQgKGMpIDIwMDYtMjAwOCBNYXJjIFNjaGVmZXJcblxuICAgIENoaWNrZW5QYWludCBpcyBmcmVlIHNvZnR3YXJlOiB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3IgbW9kaWZ5XG4gICAgaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBhcyBwdWJsaXNoZWQgYnlcbiAgICB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uLCBlaXRoZXIgdmVyc2lvbiAzIG9mIHRoZSBMaWNlbnNlLCBvclxuICAgIChhdCB5b3VyIG9wdGlvbikgYW55IGxhdGVyIHZlcnNpb24uXG5cbiAgICBDaGlja2VuUGFpbnQgaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCxcbiAgICBidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZlxuICAgIE1FUkNIQU5UQUJJTElUWSBvciBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS4gIFNlZSB0aGVcbiAgICBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9yZSBkZXRhaWxzLlxuXG4gICAgWW91IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2VcbiAgICBhbG9uZyB3aXRoIENoaWNrZW5QYWludC4gSWYgbm90LCBzZWUgPGh0dHA6Ly93d3cuZ251Lm9yZy9saWNlbnNlcy8+LlxuKi9cblxuaW1wb3J0IENQUGFsZXR0ZSBmcm9tICcuL0NQUGFsZXR0ZSc7XG5pbXBvcnQgQ1BDb2xvclNlbGVjdCBmcm9tICcuL0NQQ29sb3JTZWxlY3QnO1xuaW1wb3J0IENQQ29sb3JTbGlkZXIgZnJvbSAnLi9DUENvbG9yU2xpZGVyJztcblxuaW1wb3J0IENQQ29sb3IgZnJvbSBcIi4uL3V0aWwvQ1BDb2xvclwiO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBDUENvbG9yUGFsZXR0ZShjcENvbnRyb2xsZXIpIHtcbiAgICBDUFBhbGV0dGUuY2FsbCh0aGlzLCBjcENvbnRyb2xsZXIsIFwiY29sb3JcIiwgXCJDb2xvclwiKTtcbiAgICBcbiAgICB2YXIgXG4gICAgICAgIGNvbG9yU2VsZWN0ID0gbmV3IENQQ29sb3JTZWxlY3QoY3BDb250cm9sbGVyKSxcbiAgICAgICAgY29sb3JTbGlkZXIgPSBuZXcgQ1BDb2xvclNsaWRlcihjcENvbnRyb2xsZXIsIGNvbG9yU2VsZWN0KSxcbiAgICAgICAgY29sb3JTaG93ID0gbmV3IENQQ29sb3JTaG93KGNwQ29udHJvbGxlciksXG4gICAgXG4gICAgICAgIGJvZHkgPSB0aGlzLmdldEJvZHlFbGVtZW50KCksXG4gICAgICAgIHRvcFNlY3Rpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIFxuICAgIHRvcFNlY3Rpb24uY2xhc3NOYW1lID0gJ2NoaWNrZW5wYWludC1jb2xvcnBpY2tlci10b3AnO1xuICAgIFxuICAgIHRvcFNlY3Rpb24uYXBwZW5kQ2hpbGQoY29sb3JTZWxlY3QuZ2V0RWxlbWVudCgpKTtcbiAgICB0b3BTZWN0aW9uLmFwcGVuZENoaWxkKGNvbG9yU2xpZGVyLmdldEVsZW1lbnQoKSk7XG4gICAgXG4gICAgYm9keS5hcHBlbmRDaGlsZCh0b3BTZWN0aW9uKTtcbiAgICBib2R5LmFwcGVuZENoaWxkKGNvbG9yU2hvdy5nZXRFbGVtZW50KCkpO1xufVxuXG5mdW5jdGlvbiBDUENvbG9yU2hvdyhjcENvbnRyb2xsZXIpIHtcbiAgICB2YXJcbiAgICAgICAgY29sb3IgPSAwLFxuICAgICAgICBcbiAgICAgICAgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG5cbiAgICBmdW5jdGlvbiBwYWRMZWZ0KHN0cmluZywgcGFkZGluZywgbGVuKSB7XG4gICAgICAgIHdoaWxlIChzdHJpbmcubGVuZ3RoIDwgbGVuKSB7XG4gICAgICAgICAgICBzdHJpbmcgPSBwYWRkaW5nICsgc3RyaW5nO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzdHJpbmc7XG4gICAgfVxuICAgIFxuICAgIGZ1bmN0aW9uIHBhaW50KCkge1xuICAgICAgICBlbGVtZW50LnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICcjJyArIHBhZExlZnQoTnVtYmVyKGNvbG9yKS50b1N0cmluZygxNiksIFwiMFwiLCA2KTtcbiAgICB9XG4gICAgXG4gICAgZnVuY3Rpb24gbW91c2VDbGljayhlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgXG4gICAgICAgIHZhciBcbiAgICAgICAgICAgIGNvbEhleCA9IFwiI1wiICsgcGFkTGVmdChOdW1iZXIoY29sb3IpLnRvU3RyaW5nKDE2KSwgXCIwXCIsIDYpO1xuXG4gICAgICAgIGNvbEhleCA9IHdpbmRvdy5wcm9tcHQoXCJQbGVhc2UgZW50ZXIgYSBjb2xvciBpbiBoZXggZm9ybWF0XCIsIGNvbEhleCk7XG4gICAgICAgIFxuICAgICAgICBpZiAoY29sSGV4ICE9IG51bGwpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgaWYgKGNvbEhleC5tYXRjaCgvXiMvKSB8fCBjb2xIZXgubWF0Y2goL14kLykpIHtcbiAgICAgICAgICAgICAgICAgICAgY29sSGV4ID0gY29sSGV4LnN1YnN0cmluZygxKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB2YXIgXG4gICAgICAgICAgICAgICAgICAgIG5ld0NvbG9yID0gcGFyc2VJbnQoY29sSGV4LCAxNik7XG5cbiAgICAgICAgICAgICAgICBjcENvbnRyb2xsZXIuc2V0Q3VyQ29sb3IobmV3IENQQ29sb3IobmV3Q29sb3IpKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBcbiAgICB0aGlzLmdldEVsZW1lbnQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIGVsZW1lbnQ7XG4gICAgfTtcbiAgICBcbiAgICBjcENvbnRyb2xsZXIub24oXCJjb2xvckNoYW5nZVwiLCBmdW5jdGlvbihfY29sb3IpIHtcbiAgICAgICAgY29sb3IgPSBfY29sb3IuZ2V0UmdiKCk7XG4gICAgICAgIHBhaW50KCk7XG4gICAgfSk7XG4gICAgXG4gICAgZWxlbWVudC5jbGFzc05hbWUgPSAnY2hpY2tlbnBhaW50LWNvbG9ycGlja2VyLXNob3cnO1xuICAgIFxuICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIG1vdXNlQ2xpY2spO1xuXG4gICAgcGFpbnQoKTtcbn1cblxuQ1BDb2xvclBhbGV0dGUucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShDUFBhbGV0dGUucHJvdG90eXBlKTtcbkNQQ29sb3JQYWxldHRlLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IENQQ29sb3JQYWxldHRlO1xuIiwiLypcbiAgICBDaGlja2VuUGFpbnRcblxuICAgIENoaWNrZW5QYWludCBpcyBhIHRyYW5zbGF0aW9uIG9mIENoaWJpUGFpbnQgZnJvbSBKYXZhIHRvIEphdmFTY3JpcHRcbiAgICBieSBOaWNob2xhcyBTaGVybG9jayAvIENoaWNrZW4gU21vb3RoaWUuXG5cbiAgICBDaGliaVBhaW50IGlzIENvcHlyaWdodCAoYykgMjAwNi0yMDA4IE1hcmMgU2NoZWZlclxuXG4gICAgQ2hpY2tlblBhaW50IGlzIGZyZWUgc29mdHdhcmU6IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vciBtb2RpZnlcbiAgICBpdCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGFzIHB1Ymxpc2hlZCBieVxuICAgIHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb24sIGVpdGhlciB2ZXJzaW9uIDMgb2YgdGhlIExpY2Vuc2UsIG9yXG4gICAgKGF0IHlvdXIgb3B0aW9uKSBhbnkgbGF0ZXIgdmVyc2lvbi5cblxuICAgIENoaWNrZW5QYWludCBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLFxuICAgIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mXG4gICAgTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiAgU2VlIHRoZVxuICAgIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuXG5cbiAgICBZb3Ugc2hvdWxkIGhhdmUgcmVjZWl2ZWQgYSBjb3B5IG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZVxuICAgIGFsb25nIHdpdGggQ2hpY2tlblBhaW50LiBJZiBub3QsIHNlZSA8aHR0cDovL3d3dy5nbnUub3JnL2xpY2Vuc2VzLz4uXG4qL1xuXG5pbXBvcnQgQ1BDb2xvciBmcm9tIFwiLi4vdXRpbC9DUENvbG9yXCI7XG5pbXBvcnQgQ1BDb2xvckJtcCBmcm9tIFwiLi4vZW5naW5lL0NQQ29sb3JCbXBcIjtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gQ1BDb2xvclNlbGVjdChjcENvbnRyb2xsZXIsIGluaXRpYWxDb2xvcikge1xuICAgIHZhclxuICAgICAgICB3ID0gMTI4LCBoID0gMTI4LFxuXG4gICAgICAgIGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIiksXG4gICAgICAgIGNhbnZhc0NvbnRleHQgPSBjYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpLFxuXG4gICAgICAgIGltYWdlRGF0YSA9IGNhbnZhc0NvbnRleHQuY3JlYXRlSW1hZ2VEYXRhKHcsIGgpLFxuICAgICAgICBkYXRhID0gaW1hZ2VEYXRhLmRhdGEsXG4gICAgICAgIGNvbG9yID0gbmV3IENQQ29sb3IoKSxcblxuICAgICAgICBuZWVkUmVmcmVzaCA9IHRydWUsXG5cbiAgICAgICAgY2FwdHVyZWRNb3VzZSA9IGZhbHNlO1xuXG4gICAgZnVuY3Rpb24gbWFrZUJpdG1hcCgpIHtcbiAgICAgICAgdmFyXG4gICAgICAgICAgICBjb2wgPSBjb2xvci5jbG9uZSgpLFxuICAgICAgICAgICAgcGl4SW5kZXggPSAwO1xuXG4gICAgICAgIGZvciAodmFyIHkgPSAwOyB5IDwgaDsgeSsrKSB7XG4gICAgICAgICAgICBjb2wuc2V0VmFsdWUoMjU1IC0gKHkgKiAyNTUpIC8gaCk7XG5cbiAgICAgICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgdzsgeCsrKSB7XG4gICAgICAgICAgICAgICAgY29sLnNldFNhdHVyYXRpb24oKHggKiAyNTUpIC8gdyk7XG5cbiAgICAgICAgICAgICAgICBkYXRhW3BpeEluZGV4ICsgQ1BDb2xvckJtcC5SRURfQllURV9PRkZTRVRdID0gKGNvbC5yZ2IgPj4gMTYpICYgMHhGRjtcbiAgICAgICAgICAgICAgICBkYXRhW3BpeEluZGV4ICsgQ1BDb2xvckJtcC5HUkVFTl9CWVRFX09GRlNFVF0gPSAoY29sLnJnYiA+PiA4KSAmIDB4RkZcbiAgICAgICAgICAgICAgICBkYXRhW3BpeEluZGV4ICsgQ1BDb2xvckJtcC5CTFVFX0JZVEVfT0ZGU0VUXSA9IGNvbC5yZ2IgJiAweEZGXG4gICAgICAgICAgICAgICAgZGF0YVtwaXhJbmRleCArIENQQ29sb3JCbXAuQUxQSEFfQllURV9PRkZTRVRdID0gMHhGRjtcblxuICAgICAgICAgICAgICAgIHBpeEluZGV4ICs9IENQQ29sb3JCbXAuQllURVNfUEVSX1BJWEVMO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgbmVlZFJlZnJlc2ggPSBmYWxzZTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBwYWludCgpIHtcbiAgICAgICAgaWYgKG5lZWRSZWZyZXNoKSB7XG4gICAgICAgICAgICBtYWtlQml0bWFwKCk7XG4gICAgICAgIH1cblxuICAgICAgICBjYW52YXNDb250ZXh0LnB1dEltYWdlRGF0YShpbWFnZURhdGEsIDAsIDAsIDAsIDAsIHcsIGgpO1xuXG4gICAgICAgIHZhclxuICAgICAgICAgICAgeCA9IGNvbG9yLmdldFNhdHVyYXRpb24oKSAqIHcgLyAyNTUsXG4gICAgICAgICAgICB5ID0gKDI1NSAtIGNvbG9yLmdldFZhbHVlKCkpICogaCAvIDI1NTtcblxuICAgICAgICBjYW52YXNDb250ZXh0Lmdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbiA9ICdleGNsdXNpb24nO1xuICAgICAgICBjYW52YXNDb250ZXh0LnN0cm9rZVN0eWxlID0gJ3doaXRlJztcbiAgICAgICAgY2FudmFzQ29udGV4dC5saW5lV2lkdGggPSAxLjU7XG5cbiAgICAgICAgY2FudmFzQ29udGV4dC5iZWdpblBhdGgoKTtcbiAgICAgICAgY2FudmFzQ29udGV4dC5hcmMoeCwgeSwgNSwgMCwgTWF0aC5QSSAqIDIpO1xuICAgICAgICBjYW52YXNDb250ZXh0LnN0cm9rZSgpO1xuXG4gICAgICAgIGNhbnZhc0NvbnRleHQuZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uID0gJ3NvdXJjZS1vdmVyJztcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBtb3VzZVBpY2tDb2xvcihlKSB7XG4gICAgICAgIHZhclxuICAgICAgICAgICAgeCA9IGUucGFnZVggLSAkKGNhbnZhcykub2Zmc2V0KCkubGVmdCxcbiAgICAgICAgICAgIHkgPSBlLnBhZ2VZIC0gJChjYW52YXMpLm9mZnNldCgpLnRvcCxcblxuICAgICAgICAgICAgc2F0ID0geCAqIDI1NSAvIHcsXG4gICAgICAgICAgICB2YWx1ZSA9IDI1NSAtIHkgKiAyNTUgLyBoO1xuXG4gICAgICAgIGNvbG9yLnNldFNhdHVyYXRpb24oTWF0aC5tYXgoMCwgTWF0aC5taW4oMjU1LCBzYXQpKSk7XG4gICAgICAgIGNvbG9yLnNldFZhbHVlKE1hdGgubWF4KDAsIE1hdGgubWluKDI1NSwgdmFsdWUpKSk7XG5cbiAgICAgICAgcGFpbnQoKTtcbiAgICAgICAgY3BDb250cm9sbGVyLnNldEN1ckNvbG9yKGNvbG9yKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjb250aW51ZURyYWcoZSkge1xuICAgICAgICBtb3VzZVBpY2tDb2xvcihlKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBlbmREcmFnKGUpIHtcbiAgICAgICAgY2FudmFzLnJlbGVhc2VQb2ludGVyQ2FwdHVyZShlLnBvaW50ZXJJZCk7XG4gICAgICAgIGNhcHR1cmVkTW91c2UgPSBmYWxzZTtcbiAgICAgICAgY2FudmFzLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJwb2ludGVydXBcIiwgZW5kRHJhZyk7XG4gICAgICAgIGNhbnZhcy5yZW1vdmVFdmVudExpc3RlbmVyKFwicG9pbnRlcm1vdmVcIiwgY29udGludWVEcmFnKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzdGFydERyYWcoZSkge1xuICAgICAgICBpZiAoIWNhcHR1cmVkTW91c2UpIHtcbiAgICAgICAgICAgIGNhcHR1cmVkTW91c2UgPSB0cnVlO1xuICAgICAgICAgICAgY2FudmFzLnNldFBvaW50ZXJDYXB0dXJlKGUucG9pbnRlcklkKTtcbiAgICAgICAgICAgIGNhbnZhcy5hZGRFdmVudExpc3RlbmVyKFwicG9pbnRlcnVwXCIsIGVuZERyYWcpO1xuICAgICAgICAgICAgY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoXCJwb2ludGVybW92ZVwiLCBjb250aW51ZURyYWcpO1xuICAgICAgICB9XG5cbiAgICAgICAgbW91c2VQaWNrQ29sb3IoZSk7XG4gICAgfVxuXG4gICAgdGhpcy5zZXRIdWUgPSBmdW5jdGlvbihodWUpIHtcbiAgICAgICAgaWYgKGNvbG9yLmdldEh1ZSgpICE9IGh1ZSkge1xuICAgICAgICAgICAgY29sb3Iuc2V0SHVlKGh1ZSk7XG4gICAgICAgICAgICBjcENvbnRyb2xsZXIuc2V0Q3VyQ29sb3IoY29sb3IpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIHRoaXMuZ2V0RWxlbWVudCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gY2FudmFzO1xuICAgIH07XG5cbiAgICBjcENvbnRyb2xsZXIub24oXCJjb2xvckNoYW5nZVwiLCBmdW5jdGlvbihjKSB7XG4gICAgICAgIGNvbG9yLmNvcHlGcm9tKGMpO1xuXG4gICAgICAgIG5lZWRSZWZyZXNoID0gdHJ1ZTtcbiAgICAgICAgcGFpbnQoKTtcbiAgICB9KTtcblxuICAgIGNhbnZhcy5hZGRFdmVudExpc3RlbmVyKFwicG9pbnRlcmRvd25cIiwgc3RhcnREcmFnKTtcblxuICAgIGNhbnZhcy5jbGFzc05hbWUgPSAnY2hpY2tlbnBhaW50LWNvbG9ycGlja2VyLXNlbGVjdCc7XG4gICAgY2FudmFzLnNldEF0dHJpYnV0ZShcInRvdWNoLWFjdGlvblwiLCBcIm5vbmVcIik7XG5cbiAgICBjYW52YXMud2lkdGggPSB3O1xuICAgIGNhbnZhcy5oZWlnaHQgPSBoO1xuXG4gICAgaWYgKGluaXRpYWxDb2xvcikge1xuICAgICAgICBjb2xvci5jb3B5RnJvbShpbml0aWFsQ29sb3IpO1xuICAgIH1cblxuICAgIHBhaW50KCk7XG59IiwiLypcbiAgICBDaGlja2VuUGFpbnRcblxuICAgIENoaWNrZW5QYWludCBpcyBhIHRyYW5zbGF0aW9uIG9mIENoaWJpUGFpbnQgZnJvbSBKYXZhIHRvIEphdmFTY3JpcHRcbiAgICBieSBOaWNob2xhcyBTaGVybG9jayAvIENoaWNrZW4gU21vb3RoaWUuXG5cbiAgICBDaGliaVBhaW50IGlzIENvcHlyaWdodCAoYykgMjAwNi0yMDA4IE1hcmMgU2NoZWZlclxuXG4gICAgQ2hpY2tlblBhaW50IGlzIGZyZWUgc29mdHdhcmU6IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vciBtb2RpZnlcbiAgICBpdCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGFzIHB1Ymxpc2hlZCBieVxuICAgIHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb24sIGVpdGhlciB2ZXJzaW9uIDMgb2YgdGhlIExpY2Vuc2UsIG9yXG4gICAgKGF0IHlvdXIgb3B0aW9uKSBhbnkgbGF0ZXIgdmVyc2lvbi5cblxuICAgIENoaWNrZW5QYWludCBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLFxuICAgIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mXG4gICAgTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiAgU2VlIHRoZVxuICAgIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuXG5cbiAgICBZb3Ugc2hvdWxkIGhhdmUgcmVjZWl2ZWQgYSBjb3B5IG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZVxuICAgIGFsb25nIHdpdGggQ2hpY2tlblBhaW50LiBJZiBub3QsIHNlZSA8aHR0cDovL3d3dy5nbnUub3JnL2xpY2Vuc2VzLz4uXG4qL1xuXG5pbXBvcnQgQ1BDb2xvciBmcm9tIFwiLi4vdXRpbC9DUENvbG9yXCI7XG5pbXBvcnQgQ1BDb2xvckJtcCBmcm9tIFwiLi4vZW5naW5lL0NQQ29sb3JCbXBcIjtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gQ1BDb2xvclNsaWRlcihjcENvbnRyb2xsZXIsIHNlbGVjdGVyLCBpbml0aWFsSHVlKSB7XG4gICAgdmFyXG4gICAgICAgIHRoYXQgPSB0aGlzLFxuXG4gICAgICAgIHcgPSAyNCwgaCA9IDEyOCxcblxuICAgICAgICBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpLFxuICAgICAgICBjYW52YXNDb250ZXh0ID0gY2FudmFzLmdldENvbnRleHQoXCIyZFwiKSxcblxuICAgICAgICBpbWFnZURhdGEgPSBjYW52YXNDb250ZXh0LmNyZWF0ZUltYWdlRGF0YSh3LCBoKSxcbiAgICAgICAgZGF0YSA9IGltYWdlRGF0YS5kYXRhLFxuXG4gICAgICAgIGNhcHR1cmVkTW91c2UgPSBmYWxzZSxcblxuICAgICAgICBodWUgPSBpbml0aWFsSHVlIHx8IDA7XG5cbiAgICBmdW5jdGlvbiBtYWtlQml0bWFwKCkge1xuICAgICAgICB2YXJcbiAgICAgICAgICAgIGNvbG9yID0gbmV3IENQQ29sb3IoKSxcbiAgICAgICAgICAgIHBpeEluZGV4ID0gMDtcblxuICAgICAgICBjb2xvci5zZXRSZ2JDb21wb25lbnRzKDAsIDI1NSwgMjU1KTtcblxuICAgICAgICBmb3IgKHZhciB5ID0gMDsgeSA8IGg7IHkrKykge1xuICAgICAgICAgICAgY29sb3Iuc2V0SHVlKCh5ICogMzU5KSAvIGgpO1xuXG4gICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IHc7IHgrKykge1xuICAgICAgICAgICAgICAgIGRhdGFbcGl4SW5kZXggKyBDUENvbG9yQm1wLlJFRF9CWVRFX09GRlNFVF0gPSAoY29sb3IucmdiID4+IDE2KSAmIDB4RkY7XG4gICAgICAgICAgICAgICAgZGF0YVtwaXhJbmRleCArIENQQ29sb3JCbXAuR1JFRU5fQllURV9PRkZTRVRdID0gKGNvbG9yLnJnYiA+PiA4KSAmIDB4RkZcbiAgICAgICAgICAgICAgICBkYXRhW3BpeEluZGV4ICsgQ1BDb2xvckJtcC5CTFVFX0JZVEVfT0ZGU0VUXSA9IGNvbG9yLnJnYiAmIDB4RkZcbiAgICAgICAgICAgICAgICBkYXRhW3BpeEluZGV4ICsgQ1BDb2xvckJtcC5BTFBIQV9CWVRFX09GRlNFVF0gPSAweEZGO1xuXG4gICAgICAgICAgICAgICAgcGl4SW5kZXggKz0gQ1BDb2xvckJtcC5CWVRFU19QRVJfUElYRUw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBwYWludCgpIHtcbiAgICAgICAgY2FudmFzQ29udGV4dC5wdXRJbWFnZURhdGEoaW1hZ2VEYXRhLCAwLCAwLCAwLCAwLCB3LCBoKTtcblxuICAgICAgICB2YXJcbiAgICAgICAgICAgIHkgPSAoaHVlICogaCkgLyAzNjA7XG5cbiAgICAgICAgY2FudmFzQ29udGV4dC5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb24gPSAnZXhjbHVzaW9uJztcbiAgICAgICAgY2FudmFzQ29udGV4dC5zdHJva2VTdHlsZSA9ICd3aGl0ZSc7XG4gICAgICAgIGNhbnZhc0NvbnRleHQubGluZVdpZHRoID0gMS41O1xuXG4gICAgICAgIGNhbnZhc0NvbnRleHQuYmVnaW5QYXRoKCk7XG4gICAgICAgIGNhbnZhc0NvbnRleHQubW92ZVRvKDAsIHkpO1xuICAgICAgICBjYW52YXNDb250ZXh0LmxpbmVUbyh3LCB5KTtcbiAgICAgICAgY2FudmFzQ29udGV4dC5zdHJva2UoKTtcblxuICAgICAgICBjYW52YXNDb250ZXh0Lmdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbiA9ICdzb3VyY2Utb3Zlcic7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbW91c2VQaWNrQ29sb3IoZSkge1xuICAgICAgICB2YXJcbiAgICAgICAgICAgIHkgPSBlLnBhZ2VZIC0gJChjYW52YXMpLm9mZnNldCgpLnRvcCxcblxuICAgICAgICAgICAgX2h1ZSA9IH5+KHkgKiAzNjAgLyBoKTtcblxuICAgICAgICBodWUgPSBNYXRoLm1heCgwLCBNYXRoLm1pbigzNTksIF9odWUpKTtcbiAgICAgICAgcGFpbnQoKTtcblxuICAgICAgICBpZiAoc2VsZWN0ZXIgIT0gbnVsbCkge1xuICAgICAgICAgICAgc2VsZWN0ZXIuc2V0SHVlKGh1ZSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjb250aW51ZURyYWcoZSkge1xuICAgICAgICBtb3VzZVBpY2tDb2xvcihlKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBlbmREcmFnKGUpIHtcbiAgICAgICAgY2FudmFzLnJlbGVhc2VQb2ludGVyQ2FwdHVyZShlLnBvaW50ZXJJZCk7XG4gICAgICAgIGNhcHR1cmVkTW91c2UgPSBmYWxzZTtcbiAgICAgICAgY2FudmFzLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJwb2ludGVydXBcIiwgZW5kRHJhZyk7XG4gICAgICAgIGNhbnZhcy5yZW1vdmVFdmVudExpc3RlbmVyKFwicG9pbnRlcm1vdmVcIiwgY29udGludWVEcmFnKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzdGFydERyYWcoZSkge1xuICAgICAgICBpZiAoIWNhcHR1cmVkTW91c2UpIHtcbiAgICAgICAgICAgIGNhcHR1cmVkTW91c2UgPSB0cnVlO1xuICAgICAgICAgICAgY2FudmFzLnNldFBvaW50ZXJDYXB0dXJlKGUucG9pbnRlcklkKTtcbiAgICAgICAgICAgIGNhbnZhcy5hZGRFdmVudExpc3RlbmVyKFwicG9pbnRlcnVwXCIsIGVuZERyYWcpO1xuICAgICAgICAgICAgY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoXCJwb2ludGVybW92ZVwiLCBjb250aW51ZURyYWcpO1xuICAgICAgICB9XG5cbiAgICAgICAgbW91c2VQaWNrQ29sb3IoZSk7XG4gICAgfVxuXG4gICAgdGhpcy5nZXRFbGVtZW50ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBjYW52YXM7XG4gICAgfTtcblxuICAgIHRoaXMuc2V0SHVlID0gZnVuY3Rpb24oaCkge1xuICAgICAgICBodWUgPSBoO1xuICAgICAgICBwYWludCgpO1xuICAgIH07XG5cbiAgICBjcENvbnRyb2xsZXIub24oXCJjb2xvckNoYW5nZVwiLCBmdW5jdGlvbihjb2xvcikge1xuICAgICAgICB0aGF0LnNldEh1ZShjb2xvci5nZXRIdWUoKSk7XG4gICAgfSk7XG5cbiAgICBjYW52YXMuc2V0QXR0cmlidXRlKFwidG91Y2gtYWN0aW9uXCIsIFwibm9uZVwiKTtcblxuICAgIGNhbnZhcy5hZGRFdmVudExpc3RlbmVyKFwicG9pbnRlcmRvd25cIiwgc3RhcnREcmFnKTtcblxuICAgIGNhbnZhcy53aWR0aCA9IHc7XG4gICAgY2FudmFzLmhlaWdodCA9IGg7XG5cbiAgICBjYW52YXMuY2xhc3NOYW1lID0gJ2NoaWNrZW5wYWludC1jb2xvcnBpY2tlci1zbGlkZXInO1xuXG4gICAgbWFrZUJpdG1hcCgpO1xuICAgIHBhaW50KCk7XG5cbn0iLCIvKlxuICAgIENoaWNrZW5QYWludFxuXG4gICAgQ2hpY2tlblBhaW50IGlzIGEgdHJhbnNsYXRpb24gb2YgQ2hpYmlQYWludCBmcm9tIEphdmEgdG8gSmF2YVNjcmlwdFxuICAgIGJ5IE5pY2hvbGFzIFNoZXJsb2NrIC8gQ2hpY2tlbiBTbW9vdGhpZS5cblxuICAgIENoaWJpUGFpbnQgaXMgQ29weXJpZ2h0IChjKSAyMDA2LTIwMDggTWFyYyBTY2hlZmVyXG5cbiAgICBDaGlja2VuUGFpbnQgaXMgZnJlZSBzb2Z0d2FyZTogeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yIG1vZGlmeVxuICAgIGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgYXMgcHVibGlzaGVkIGJ5XG4gICAgdGhlIEZyZWUgU29mdHdhcmUgRm91bmRhdGlvbiwgZWl0aGVyIHZlcnNpb24gMyBvZiB0aGUgTGljZW5zZSwgb3JcbiAgICAoYXQgeW91ciBvcHRpb24pIGFueSBsYXRlciB2ZXJzaW9uLlxuXG4gICAgQ2hpY2tlblBhaW50IGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsXG4gICAgYnV0IFdJVEhPVVQgQU5ZIFdBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2ZcbiAgICBNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuICBTZWUgdGhlXG4gICAgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy5cblxuICAgIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXG4gICAgYWxvbmcgd2l0aCBDaGlja2VuUGFpbnQuIElmIG5vdCwgc2VlIDxodHRwOi8vd3d3LmdudS5vcmcvbGljZW5zZXMvPi5cbiovXG5cbmltcG9ydCBDUENvbG9yIGZyb20gJy4uL3V0aWwvQ1BDb2xvcic7XG5cbmltcG9ydCBDUFNsaWRlciBmcm9tICcuL0NQU2xpZGVyJztcbmltcG9ydCBDUENvbG9yU2VsZWN0IGZyb20gJy4vQ1BDb2xvclNlbGVjdCc7XG5pbXBvcnQgQ1BDb2xvclNsaWRlciBmcm9tICcuL0NQQ29sb3JTbGlkZXInO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBDUENvbG9yU3dhdGNoKGluaXRpYWxDb2xvciwgaW5pdGlhbEFscGhhKSB7XG4gICAgdmFyXG4gICAgICAgIHRoYXQgPSB0aGlzLFxuICAgICAgICBjb2xvciA9IG5ldyBDUENvbG9yKDApLFxuICAgICAgICBhbHBoYSA9IDI1NSxcblxuICAgICAgICBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcblxuICAgIGZ1bmN0aW9uIHBhZExlZnQoc3RyaW5nLCBwYWRkaW5nLCBsZW4pIHtcbiAgICAgICAgd2hpbGUgKHN0cmluZy5sZW5ndGggPCBsZW4pIHtcbiAgICAgICAgICAgIHN0cmluZyA9IHBhZGRpbmcgKyBzdHJpbmc7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHN0cmluZztcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBwYWludCgpIHtcbiAgICAgICAgZWxlbWVudC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAnIycgKyBwYWRMZWZ0KE51bWJlcihjb2xvci5nZXRSZ2IoKSkudG9TdHJpbmcoMTYpLCBcIjBcIiwgNik7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbW91c2VDbGljayhlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICB9XG5cbiAgICB0aGlzLmdldEVsZW1lbnQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIGVsZW1lbnQ7XG4gICAgfTtcblxuICAgIHRoaXMuc2V0Q29sb3IgPSBmdW5jdGlvbihfY29sb3IpIHtcbiAgICAgICAgaWYgKCFjb2xvci5pc0VxdWFsKF9jb2xvcikpIHtcbiAgICAgICAgICAgIGNvbG9yLmNvcHlGcm9tKF9jb2xvcik7XG5cbiAgICAgICAgICAgIHBhaW50KCk7XG5cbiAgICAgICAgICAgIHRoaXMuZW1pdEV2ZW50KFwiY29sb3JDaGFuZ2VcIiwgW2NvbG9yXSk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgdGhpcy5zZXRBbHBoYSA9IGZ1bmN0aW9uKF9hbHBoYSkge1xuICAgICAgICBpZiAoX2FscGhhICE9IGFscGhhKSB7XG4gICAgICAgICAgICBhbHBoYSA9IF9hbHBoYTtcblxuICAgICAgICAgICAgcGFpbnQoKTtcblxuICAgICAgICAgICAgdGhpcy5lbWl0RXZlbnQoXCJhbHBoYUNoYW5nZVwiLCBbYWxwaGFdKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICB0aGlzLmdldENvbG9yUmdiID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBjb2xvci5nZXRSZ2IoKTtcbiAgICB9O1xuXG4gICAgdGhpcy5nZXRBbHBoYSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gYWxwaGE7XG4gICAgfTtcblxuICAgIHRoaXMuc2V0Q3VyQ29sb3IgPSB0aGlzLnNldENvbG9yO1xuXG4gICAgZnVuY3Rpb24gYnVpbGRDb2xvckVkaXRQYW5lbCgpIHtcbiAgICAgICAgdmFyXG4gICAgICAgICAgICBwYW5lbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksXG4gICAgICAgICAgICBncm91cCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksXG4gICAgICAgICAgICBzZWxlY3QgPSBuZXcgQ1BDb2xvclNlbGVjdCh0aGF0LCBjb2xvciksXG4gICAgICAgICAgICBzbGlkZXIgPSBuZXcgQ1BDb2xvclNsaWRlcih0aGF0LCBzZWxlY3QsIGNvbG9yLmdldEh1ZSgpKSxcbiAgICAgICAgICAgIGFscGhhU2xpZGVyID0gbmV3IENQU2xpZGVyKDAsIDI1NSk7XG5cbiAgICAgICAgcGFuZWwuY2xhc3NOYW1lID0gXCJjaGlja2VucGFpbnQtY29sb3ItcGljay1wYW5lbFwiO1xuXG4gICAgICAgIGdyb3VwLmNsYXNzTmFtZSA9IFwiY2hpY2tlbnBhaW50LWNvbG9ycGlja2VyLXRvcFwiO1xuXG4gICAgICAgIGdyb3VwLmFwcGVuZENoaWxkKHNlbGVjdC5nZXRFbGVtZW50KCkpO1xuICAgICAgICBncm91cC5hcHBlbmRDaGlsZChzbGlkZXIuZ2V0RWxlbWVudCgpKTtcblxuICAgICAgICBwYW5lbC5hcHBlbmRDaGlsZChncm91cCk7XG5cbiAgICAgICAgYWxwaGFTbGlkZXIudmFsdWUgPSBhbHBoYTtcbiAgICAgICAgYWxwaGFTbGlkZXIudGl0bGUgPSBmdW5jdGlvbihhbHBoYSkge1xuICAgICAgICAgICAgcmV0dXJuIFwiT3BhY2l0eTogXCIgKyBhbHBoYTtcbiAgICAgICAgfTtcbiAgICAgICAgYWxwaGFTbGlkZXIub24oXCJ2YWx1ZUNoYW5nZVwiLCBmdW5jdGlvbihhbHBoYSkge1xuICAgICAgICAgICAgdGhhdC5zZXRBbHBoYShhbHBoYSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHBhbmVsLmFwcGVuZENoaWxkKGFscGhhU2xpZGVyLmdldEVsZW1lbnQoKSk7XG5cbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGFscGhhU2xpZGVyLnJlc2l6ZSgpO1xuICAgICAgICB9LCAwKTtcblxuICAgICAgICByZXR1cm4gcGFuZWw7XG4gICAgfVxuXG4gICAgZWxlbWVudC5jbGFzc05hbWUgPSAnY2hpY2tlbnBhaW50LWNvbG9yLXBpY2stc3dhdGNoJztcblxuICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIG1vdXNlQ2xpY2spO1xuXG4gICAgaWYgKGluaXRpYWxDb2xvcikge1xuICAgICAgICBjb2xvci5jb3B5RnJvbShpbml0aWFsQ29sb3IpO1xuICAgIH1cblxuICAgIGlmIChpbml0aWFsQWxwaGEpIHtcbiAgICAgICAgYWxwaGEgPSBpbml0aWFsQWxwaGE7XG4gICAgfVxuXG4gICAgLy8gQ2xpY2tpbmcgb3V0c2lkZSB0aGUgcG9wb3ZlciB3aWxsIGRpc21pc3MgaXRcbiAgICBmdW5jdGlvbiBjbG9zZUNsaWNrSGFuZGxlcihlKSB7XG4gICAgICAgIGlmICgkKGUudGFyZ2V0KS5jbG9zZXN0KFwiLnBvcG92ZXJcIikubGVuZ3RoID09IDAgJiYgJChlLnRhcmdldCkuY2xvc2VzdChcIi5jaGlja2VucGFpbnQtY29sb3ItcGljay1zd2F0Y2hcIilbMF0gIT0gZWxlbWVudCkge1xuICAgICAgICAgICAgJChlbGVtZW50KS5wb3BvdmVyKFwiaGlkZVwiKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgICQoZWxlbWVudClcbiAgICAgICAgLnBvcG92ZXIoe1xuICAgICAgICAgICAgaHRtbDogdHJ1ZSxcbiAgICAgICAgICAgIGNvbnRlbnQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIGNsb3NlQ2xpY2tIYW5kbGVyKTtcblxuICAgICAgICAgICAgICAgIHJldHVybiBidWlsZENvbG9yRWRpdFBhbmVsKCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgdHJpZ2dlcjogXCJtYW51YWxcIixcbiAgICAgICAgICAgIHBsYWNlbWVudDogXCJib3R0b21cIixcblxuICAgICAgICB9KVxuICAgICAgICAub24oXCJjbGlja1wiLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICQodGhpcykucG9wb3ZlcihcInRvZ2dsZVwiKTtcbiAgICAgICAgfSlcbiAgICAgICAgLm9uKFwiaGlkZGVuLmJzLnBvcG92ZXJcIiwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCBjbG9zZUNsaWNrSGFuZGxlcik7XG4gICAgICAgIH0pO1xuXG4gICAgcGFpbnQoKTtcbn1cblxuQ1BDb2xvclN3YXRjaC5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKEV2ZW50RW1pdHRlci5wcm90b3R5cGUpO1xuQ1BDb2xvclN3YXRjaC5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBDUENvbG9yU3dhdGNoOyIsIi8qKlxuICogQ3JlYXRlIGEgY2hlY2tlcmJvYXJkIEhUTUw1IENhbnZhc1BhdHRlcm4gKHdoaWNoIGNhbiBiZSB1c2VkIGZvciBmaWxsU3R5bGUpIHVzaW5nIHRoZSBnaXZlbiBjYW52YXMgY29udGV4dC5cbiAqIFxuICogQHBhcmFtIGNhbnZhc0NvbnRleHRcbiAqIEByZXR1cm5zIHtDYW52YXNQYXR0ZXJufVxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlQ2hlY2tlcmJvYXJkUGF0dGVybihjYW52YXNDb250ZXh0KSB7XG4gICAgdmFyXG4gICAgICAgIGNoZWNrZXJib2FyZENhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIiksXG4gICAgICAgIGNoZWNrZXJib2FyZENvbnRleHQgPSBjaGVja2VyYm9hcmRDYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpLFxuICAgICAgICBcbiAgICAgICAgaW1hZ2VEYXRhID0gY2hlY2tlcmJvYXJkQ29udGV4dC5jcmVhdGVJbWFnZURhdGEoNjQsIDY0KSxcbiAgICAgICAgZGF0YSA9IGltYWdlRGF0YS5kYXRhLFxuICAgICAgICBcbiAgICAgICAgcGl4ZWxPZmZzZXQgPSAwO1xuXG4gICAgZm9yICh2YXIgaiA9IDA7IGogPCA2NDsgaisrKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgNjQ7IGkrKykge1xuICAgICAgICAgICAgaWYgKChpICYgMHg4KSAhPSAwIF4gKGogJiAweDgpICE9IDApIHtcbiAgICAgICAgICAgICAgICAvLyBXaGl0ZVxuICAgICAgICAgICAgICAgIGRhdGFbcGl4ZWxPZmZzZXQrK10gPSAweGZmO1xuICAgICAgICAgICAgICAgIGRhdGFbcGl4ZWxPZmZzZXQrK10gPSAweGZmO1xuICAgICAgICAgICAgICAgIGRhdGFbcGl4ZWxPZmZzZXQrK10gPSAweGZmO1xuICAgICAgICAgICAgICAgIGRhdGFbcGl4ZWxPZmZzZXQrK10gPSAweGZmO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBHcmV5XG4gICAgICAgICAgICAgICAgZGF0YVtwaXhlbE9mZnNldCsrXSA9IDB4Y2M7XG4gICAgICAgICAgICAgICAgZGF0YVtwaXhlbE9mZnNldCsrXSA9IDB4Y2M7XG4gICAgICAgICAgICAgICAgZGF0YVtwaXhlbE9mZnNldCsrXSA9IDB4Y2M7XG4gICAgICAgICAgICAgICAgZGF0YVtwaXhlbE9mZnNldCsrXSA9IDB4ZmY7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBjaGVja2VyYm9hcmRDYW52YXMud2lkdGggPSA2NDtcbiAgICBjaGVja2VyYm9hcmRDYW52YXMuaGVpZ2h0ID0gNjQ7XG4gICAgY2hlY2tlcmJvYXJkQ29udGV4dC5wdXRJbWFnZURhdGEoaW1hZ2VEYXRhLCAwLCAwKTtcblxuICAgIHJldHVybiBjYW52YXNDb250ZXh0LmNyZWF0ZVBhdHRlcm4oY2hlY2tlcmJvYXJkQ2FudmFzLCAncmVwZWF0Jyk7XG59IiwiLypcbiAgICBDaGlja2VuUGFpbnRcbiAgICBcbiAgICBDaGlja2VuUGFpbnQgaXMgYSB0cmFuc2xhdGlvbiBvZiBDaGliaVBhaW50IGZyb20gSmF2YSB0byBKYXZhU2NyaXB0XG4gICAgYnkgTmljaG9sYXMgU2hlcmxvY2sgLyBDaGlja2VuIFNtb290aGllLlxuICAgIFxuICAgIENoaWJpUGFpbnQgaXMgQ29weXJpZ2h0IChjKSAyMDA2LTIwMDggTWFyYyBTY2hlZmVyXG5cbiAgICBDaGlja2VuUGFpbnQgaXMgZnJlZSBzb2Z0d2FyZTogeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yIG1vZGlmeVxuICAgIGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgYXMgcHVibGlzaGVkIGJ5XG4gICAgdGhlIEZyZWUgU29mdHdhcmUgRm91bmRhdGlvbiwgZWl0aGVyIHZlcnNpb24gMyBvZiB0aGUgTGljZW5zZSwgb3JcbiAgICAoYXQgeW91ciBvcHRpb24pIGFueSBsYXRlciB2ZXJzaW9uLlxuXG4gICAgQ2hpY2tlblBhaW50IGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsXG4gICAgYnV0IFdJVEhPVVQgQU5ZIFdBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2ZcbiAgICBNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuICBTZWUgdGhlXG4gICAgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy5cblxuICAgIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXG4gICAgYWxvbmcgd2l0aCBDaGlja2VuUGFpbnQuIElmIG5vdCwgc2VlIDxodHRwOi8vd3d3LmdudS5vcmcvbGljZW5zZXMvPi5cbiovXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIENQR3JpZERpYWxvZyhwYXJlbnQsIGNhbnZhcykge1xuICAgIHZhclxuICAgICAgICBkaWFsb2cgPSBcbiAgICAgICAgICAgICQoYDxkaXYgY2xhc3M9XCJtb2RhbCBmYWRlXCIgdGFiaW5kZXg9XCItMVwiIHJvbGU9XCJkaWFsb2dcIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibW9kYWwtZGlhbG9nXCI+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtb2RhbC1jb250ZW50XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibW9kYWwtaGVhZGVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJjbG9zZVwiIGRhdGEtZGlzbWlzcz1cIm1vZGFsXCIgYXJpYS1sYWJlbD1cIkNsb3NlXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPiZ0aW1lczs8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGg0IGNsYXNzPVwibW9kYWwtdGl0bGVcIj5HcmlkIG9wdGlvbnM8L2g0PlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibW9kYWwtYm9keVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxmb3JtPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZm9ybS1ncm91cFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsPkdyaWQgc2l6ZTwvbGFiZWw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cInRleHRcIiBjbGFzcz1cImZvcm0tY29udHJvbCBjaGlja2VucGFpbnQtZ3JpZC1zaXplXCIgdmFsdWU9XCJcIiBhdXRvZm9jdXM+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZm9ybT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm1vZGFsLWZvb3RlclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiYnRuIGJ0bi1kZWZhdWx0XCIgZGF0YS1kaXNtaXNzPVwibW9kYWxcIj5DYW5jZWw8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImJ0biBidG4tcHJpbWFyeSBjaGlja2VucGFpbnQtYXBwbHktZ3JpZC1zZXR0aW5nc1wiIGRhdGEtZGlzbWlzcz1cIm1vZGFsXCI+T2s8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICBgKSxcbiAgICAgICAgXG4gICAgICAgIGdyaWRTaXplRWxlbSA9ICQoXCIuY2hpY2tlbnBhaW50LWdyaWQtc2l6ZVwiLCBkaWFsb2cpLFxuICAgICAgICBhcHBseUJ1dHRvbiA9ICQoXCIuY2hpY2tlbnBhaW50LWFwcGx5LWdyaWQtc2V0dGluZ3NcIiwgZGlhbG9nKTtcbiAgICBcbiAgICBncmlkU2l6ZUVsZW0udmFsKGNhbnZhcy5nZXRHcmlkU2l6ZSgpKTtcbiAgICBcbiAgICAkKFwiLmNoaWNrZW5wYWludC1hcHBseS1ncmlkLXNldHRpbmdzXCIsIGRpYWxvZykuY2xpY2soZnVuY3Rpb24oZSkge1xuICAgICAgICB2YXJcbiAgICAgICAgICAgIGdyaWRTaXplID0gcGFyc2VJbnQoZ3JpZFNpemVFbGVtLnZhbCgpLCAxMCk7XG4gICAgICAgIFxuICAgICAgICBjYW52YXMuc2V0R3JpZFNpemUoZ3JpZFNpemUpO1xuICAgIH0pO1xuIFxuICAgIGRpYWxvZ1xuICAgICAgICAubW9kYWwoe1xuICAgICAgICAgICAgc2hvdzogZmFsc2VcbiAgICAgICAgfSlcbiAgICAgICAgLm9uKCdzaG93bi5icy5tb2RhbCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgZ3JpZFNpemVFbGVtLmZvY3VzKCk7XG4gICAgICAgIH0pLm9uKCdrZXlwcmVzcycsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgIGlmIChlLmtleUNvZGUgPT0gMTMpIHtcbiAgICAgICAgICAgICAgICBhcHBseUJ1dHRvbi5jbGljaygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICBcbiAgICAvLyBGaXggdGhlIGJhY2tkcm9wIGxvY2F0aW9uIGluIHRoZSBET00gYnkgcmVwYXJlbnRpbmcgaXQgdG8gdGhlIGNoaWNrZW5wYWludCBjb250YWluZXJcbiAgICBkaWFsb2cuZGF0YShcImJzLm1vZGFsXCIpLiRib2R5ID0gJChwYXJlbnQpO1xuICAgIFxuICAgIHBhcmVudC5hcHBlbmRDaGlsZChkaWFsb2dbMF0pO1xuICAgIFxuICAgIHRoaXMuc2hvdyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBkaWFsb2cubW9kYWwoXCJzaG93XCIpO1xuICAgIH07XG59IiwiLypcbiAgICBDaGlja2VuUGFpbnRcbiAgICBcbiAgICBDaGlja2VuUGFpbnQgaXMgYSB0cmFuc2xhdGlvbiBvZiBDaGliaVBhaW50IGZyb20gSmF2YSB0byBKYXZhU2NyaXB0XG4gICAgYnkgTmljaG9sYXMgU2hlcmxvY2sgLyBDaGlja2VuIFNtb290aGllLlxuICAgIFxuICAgIENoaWJpUGFpbnQgaXMgQ29weXJpZ2h0IChjKSAyMDA2LTIwMDggTWFyYyBTY2hlZmVyXG5cbiAgICBDaGlja2VuUGFpbnQgaXMgZnJlZSBzb2Z0d2FyZTogeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yIG1vZGlmeVxuICAgIGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgYXMgcHVibGlzaGVkIGJ5XG4gICAgdGhlIEZyZWUgU29mdHdhcmUgRm91bmRhdGlvbiwgZWl0aGVyIHZlcnNpb24gMyBvZiB0aGUgTGljZW5zZSwgb3JcbiAgICAoYXQgeW91ciBvcHRpb24pIGFueSBsYXRlciB2ZXJzaW9uLlxuXG4gICAgQ2hpY2tlblBhaW50IGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsXG4gICAgYnV0IFdJVEhPVVQgQU5ZIFdBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2ZcbiAgICBNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuICBTZWUgdGhlXG4gICAgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy5cblxuICAgIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXG4gICAgYWxvbmcgd2l0aCBDaGlja2VuUGFpbnQuIElmIG5vdCwgc2VlIDxodHRwOi8vd3d3LmdudS5vcmcvbGljZW5zZXMvPi5cbiovXG5cbmltcG9ydCBDUFBhbGV0dGUgZnJvbSBcIi4vQ1BQYWxldHRlXCI7XG5pbXBvcnQgQ1BTbGlkZXIgZnJvbSBcIi4vQ1BTbGlkZXJcIjtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gQ1BMYXllcnNQYWxldHRlKGNvbnRyb2xsZXIpIHtcbiAgICBDUFBhbGV0dGUuY2FsbCh0aGlzLCBjb250cm9sbGVyLCBcImxheWVyc1wiLCBcIkxheWVyc1wiLCB0cnVlKTtcbiAgICBcbiAgICBjb25zdFxuICAgICAgICBNT0RFX05BTUVTID0gW1xuICAgICAgICAgICAgICBcIk5vcm1hbFwiLCBcIk11bHRpcGx5XCIsIFwiQWRkXCIsIFwiU2NyZWVuXCIsIFwiTGlnaHRlblwiLCBcIkRhcmtlblwiLCBcIlN1YnRyYWN0XCIsIFwiRG9kZ2VcIiwgXCJCdXJuXCIsXG4gICAgICAgICAgICAgIFwiT3ZlcmxheVwiLCBcIkhhcmQgTGlnaHRcIiwgXCJTb2Z0IExpZ2h0XCIsIFwiVml2aWQgTGlnaHRcIiwgXCJMaW5lYXIgTGlnaHRcIiwgXCJQaW4gTGlnaHRcIlxuICAgICAgICBdO1xuICAgIFxuICAgIHZhclxuICAgICAgICBsYXllckggPSAzMiwgZXllVyA9IDI0LFxuICAgICAgICBcbiAgICAgICAgYm9keSA9IHRoaXMuZ2V0Qm9keUVsZW1lbnQoKSxcblxuICAgICAgICBsYXllcldpZGdldCA9IG5ldyBDUExheWVyV2lkZ2V0KCksXG4gICAgICAgIGFscGhhU2xpZGVyID0gbmV3IENQU2xpZGVyKDAsIDEwMCksXG4gICAgICAgIGJsZW5kQ29tYm8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic2VsZWN0XCIpLFxuICAgIFxuICAgICAgICByZW5hbWVGaWVsZCA9IG5ldyBDUFJlbmFtZUZpZWxkKCksXG4gICAgXG4gICAgICAgIGNiU2FtcGxlQWxsTGF5ZXJzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpLFxuICAgICAgICBjYkxvY2tBbHBoYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKSxcbiAgICAgICAgXG4gICAgICAgIGFkZEJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsaVwiKSxcbiAgICAgICAgcmVtb3ZlQnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxpXCIpO1xuICAgIFxuICAgIGZ1bmN0aW9uIGZpbGxDb21ib2JveChjb21ibywgb3B0aW9uTmFtZXMpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBvcHRpb25OYW1lcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdmFyIFxuICAgICAgICAgICAgICAgIG9wdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJvcHRpb25cIik7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIG9wdGlvbi5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShvcHRpb25OYW1lc1tpXSkpO1xuICAgICAgICAgICAgb3B0aW9uLnZhbHVlID0gaTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29tYm8uYXBwZW5kQ2hpbGQob3B0aW9uKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBcbiAgICBmdW5jdGlvbiB3cmFwQ2hlY2tib3hXaXRoTGFiZWwoY2hlY2tib3gsIHRpdGxlKSB7XG4gICAgICAgIHZhclxuICAgICAgICAgICAgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSxcbiAgICAgICAgICAgIGxhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxhYmVsXCIpO1xuXG4gICAgICAgIGRpdi5jbGFzc05hbWUgPSBcImNoZWNrYm94XCI7XG4gICAgICAgIFxuICAgICAgICBsYWJlbC5hcHBlbmRDaGlsZChjaGVja2JveCk7XG4gICAgICAgIGxhYmVsLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHRpdGxlKSk7XG4gICAgICAgIFxuICAgICAgICBkaXYuYXBwZW5kQ2hpbGQobGFiZWwpO1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuIGRpdjtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzaG93UmVuYW1lQ29udHJvbChsYXllckluZGV4KSB7XG4gICAgICAgIHZhclxuICAgICAgICAgICAgZCA9IGxheWVyV2lkZ2V0LmdldENTU1NpemUoKSxcbiAgICAgICAgICAgIGFydHdvcmsgPSBjb250cm9sbGVyLmdldEFydHdvcmsoKSxcbiAgICAgICAgICAgIGxheWVyID0gYXJ0d29yay5nZXRMYXllcihsYXllckluZGV4KTtcblxuICAgICAgICByZW5hbWVGaWVsZC5zaG93KFxuICAgICAgICAgICAgZXllVyAvIHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvLCBcbiAgICAgICAgICAgIGQuaGVpZ2h0IC0gKGxheWVySW5kZXggKyAxKSAqIGxheWVySCAvIHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvLFxuICAgICAgICAgICAgbGF5ZXJJbmRleCxcbiAgICAgICAgICAgIGxheWVyLm5hbWVcbiAgICAgICApO1xuICAgIH1cbiAgICBcbiAgICB2YXJcbiAgICAgICAgcGFyZW50U2V0U2l6ZSA9IHRoaXMuc2V0U2l6ZSxcbiAgICAgICAgcGFyZW50U2V0SGVpZ2h0ID0gdGhpcy5zZXRIZWlnaHQ7XG4gICAgXG4gICAgdGhpcy5zZXRTaXplID0gZnVuY3Rpb24odywgaCkge1xuICAgICAgICBwYXJlbnRTZXRTaXplLmNhbGwodGhpcywgdywgaCk7XG4gICAgICAgIFxuICAgICAgICBsYXllcldpZGdldC5yZXNpemUoKTtcbiAgICAgICAgYWxwaGFTbGlkZXIucmVzaXplKCk7XG4gICAgfTtcblxuICAgIHRoaXMuc2V0SGVpZ2h0ID0gZnVuY3Rpb24oaCkge1xuICAgICAgICBwYXJlbnRTZXRIZWlnaHQuY2FsbCh0aGlzLCBoKTtcbiAgICAgICAgXG4gICAgICAgIGxheWVyV2lkZ2V0LnJlc2l6ZSgpO1xuICAgIH07XG5cbiAgICBmdW5jdGlvbiBDUExheWVyV2lkZ2V0KCkge1xuICAgICAgICB2YXIgXG4gICAgICAgICAgICBsYXllckRyYWcsIGxheWVyRHJhZ1JlYWxseSxcbiAgICAgICAgICAgIGxheWVyRHJhZ0luZGV4LCBsYXllckRyYWdZLFxuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLFxuICAgICAgICAgICAgXG4gICAgICAgICAgICBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpLFxuICAgICAgICAgICAgY2FudmFzQ29udGV4dCA9IGNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIiksXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoYXQgPSB0aGlzO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBHZXQgdGhlIHNpemUgb2YgdGhlIGNvbXBvbmVudCBvbiBzY3JlZW4gaW4gQ1NTIHBpeGVscy5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZ2V0Q1NTU2l6ZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIHt3aWR0aDogJChjYW52YXMpLndpZHRoKCksIGhlaWdodDogJChjYW52YXMpLmhlaWdodCgpfTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgZnVuY3Rpb24gZ2V0TGF5ZXJJbmRleChwb2ludCkge1xuICAgICAgICAgICAgcmV0dXJuIE1hdGguZmxvb3IoKGNhbnZhcy5oZWlnaHQgLSBwb2ludC55IC8gJChjYW52YXMpLmhlaWdodCgpICogY2FudmFzLmhlaWdodCkgLyBsYXllckgpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvKipcbiAgICAgICAgICogQHBhcmFtIGxheWVyIENQTGF5ZXJcbiAgICAgICAgICogQHBhcmFtIHNlbGVjdGVkIGJvb2xlYW5cbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIGRyYXdMYXllcihsYXllciwgc2VsZWN0ZWQpIHtcbiAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgIGQgPSB7d2lkdGg6IGNhbnZhcy53aWR0aCwgaGVpZ2h0OiBjYW52YXMuaGVpZ2h0fTtcblxuICAgICAgICAgICAgaWYgKHNlbGVjdGVkKSB7XG4gICAgICAgICAgICAgICAgY2FudmFzQ29udGV4dC5maWxsU3R5bGUgPSAnI0IwQjBDMCc7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNhbnZhc0NvbnRleHQuZmlsbFN0eWxlID0gJ3doaXRlJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhbnZhc0NvbnRleHQuZmlsbFJlY3QoMCwgMCwgZC53aWR0aCwgbGF5ZXJIKTtcblxuICAgICAgICAgICAgY2FudmFzQ29udGV4dC5iZWdpblBhdGgoKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY2FudmFzQ29udGV4dC5tb3ZlVG8oMCwgMCk7XG4gICAgICAgICAgICBjYW52YXNDb250ZXh0LmxpbmVUbyhkLndpZHRoLCAwKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY2FudmFzQ29udGV4dC5tb3ZlVG8oZXllVywgMCk7XG4gICAgICAgICAgICBjYW52YXNDb250ZXh0LmxpbmVUbyhleWVXLCBsYXllckgpO1xuXG4gICAgICAgICAgICBjYW52YXNDb250ZXh0Lm1vdmVUbyhleWVXICsgNiAqIHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvLCBsYXllckggLyAyKTtcbiAgICAgICAgICAgIGNhbnZhc0NvbnRleHQubGluZVRvKGQud2lkdGggLSA2ICogd2luZG93LmRldmljZVBpeGVsUmF0aW8sIGxheWVySCAvIDIpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjYW52YXNDb250ZXh0LnN0cm9rZSgpO1xuXG4gICAgICAgICAgICBjYW52YXNDb250ZXh0LmZpbGxTdHlsZSA9ICdibGFjayc7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNhbnZhc0NvbnRleHQuZmlsbFRleHQobGF5ZXIubmFtZSwgZXllVyArIDYgKiB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbywgMTIgKiB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyk7XG4gICAgICAgICAgICBjYW52YXNDb250ZXh0LmZpbGxUZXh0KE1PREVfTkFNRVNbbGF5ZXIuYmxlbmRNb2RlXSArIFwiOiBcIiArIGxheWVyLmFscGhhICsgXCIlXCIsIGV5ZVcgKyA2ICogd2luZG93LmRldmljZVBpeGVsUmF0aW8sIGxheWVySCAtIDUgKiB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyk7XG5cbiAgICAgICAgICAgIGNhbnZhc0NvbnRleHQuYmVnaW5QYXRoKCk7XG4gICAgICAgICAgICBpZiAobGF5ZXIudmlzaWJsZSkge1xuICAgICAgICAgICAgICAgIGNhbnZhc0NvbnRleHQuYXJjKGV5ZVcgLyAyLCBsYXllckggLyAyLCAxMCAqIHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvLCAwLCBNYXRoLlBJICogMik7XG4gICAgICAgICAgICAgICAgY2FudmFzQ29udGV4dC5maWxsKCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNhbnZhc0NvbnRleHQuYXJjKGV5ZVcgLyAyLCBsYXllckggLyAyLCAxMCAqIHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvLCAwLCBNYXRoLlBJICogMik7XG4gICAgICAgICAgICAgICAgY2FudmFzQ29udGV4dC5zdHJva2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgZnVuY3Rpb24gbW91c2VVcChlKSB7XG4gICAgICAgICAgICBpZiAoZS5idXR0b24gPT0gMCkge1xuICAgICAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgICAgICBvZmZzZXQgPSAkKGNhbnZhcykub2Zmc2V0KCksXG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBhcnR3b3JrID0gY29udHJvbGxlci5nZXRBcnR3b3JrKCksXG4gICAgICAgICAgICAgICAgICAgIGxheWVycyA9IGFydHdvcmsuZ2V0TGF5ZXJzKCksXG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBtb3VzZUxvYyA9IHt4OiBlLnBhZ2VYIC0gb2Zmc2V0LmxlZnQsIHk6IGUucGFnZVkgLSBvZmZzZXQudG9wfSxcbiAgICAgICAgICAgICAgICAgICAgbGF5ZXJPdmVyID0gZ2V0TGF5ZXJJbmRleChtb3VzZUxvYyk7XG5cbiAgICAgICAgICAgICAgICAvL2xheWVyRHJhZ1kgPSBlLnBhZ2VZIC0gb2Zmc2V0LnRvcDtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBpZiAobGF5ZXJPdmVyID49IDAgJiYgbGF5ZXJPdmVyIDw9IGxheWVycy5sZW5ndGggJiYgbGF5ZXJPdmVyICE9IGxheWVyRHJhZ0luZGV4ICYmIGxheWVyT3ZlciAhPSBsYXllckRyYWdJbmRleCArIDEpIHtcbiAgICAgICAgICAgICAgICAgICAgYXJ0d29yay5tb3ZlTGF5ZXIobGF5ZXJEcmFnSW5kZXgsIGxheWVyT3Zlcik7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gRG8gd2UgbmVlZCB0byByZXBhaW50IHRvIGVyYXNlIGRyYWdsaW5lcz9cbiAgICAgICAgICAgICAgICBpZiAobGF5ZXJEcmFnUmVhbGx5KSB7XG4gICAgICAgICAgICAgICAgICAgIGxheWVyRHJhZ1JlYWxseSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB0aGF0LnBhaW50KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGxheWVyRHJhZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsIG1vdXNlRHJhZ2dlZCk7XG4gICAgICAgICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsIG1vdXNlVXApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gbW91c2VEcmFnZ2VkKGUpIHtcbiAgICAgICAgICAgIGlmIChsYXllckRyYWcpIHtcbiAgICAgICAgICAgICAgICBsYXllckRyYWdSZWFsbHkgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGxheWVyRHJhZ1kgPSBlLnBhZ2VZIC0gJChjYW52YXMpLm9mZnNldCgpLnRvcDtcbiAgICAgICAgICAgICAgICB0aGF0LnBhaW50KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogUmVwYWludCBqdXN0IHRoZSBsYXllciB3aXRoIHRoZSBzcGVjaWZpZWQgaW5kZXhcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMucGFpbnRMYXllciA9IGZ1bmN0aW9uKGxheWVySW5kZXgpIHtcbiAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgIGxheWVyID0gYXJ0d29yay5nZXRMYXllcihsYXllckluZGV4KSxcbiAgICAgICAgICAgICAgICBsYXllclRvcCA9IGNhbnZhcy5oZWlnaHQgLSBsYXllckggKiAobGF5ZXJJbmRleCArIDEpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjYW52YXNDb250ZXh0LnNhdmUoKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY2FudmFzQ29udGV4dC5maWxsU3R5bGUgPSAnIzYwNjA2MCc7XG4gICAgICAgICAgICBjYW52YXNDb250ZXh0LmZpbGxSZWN0KDAsIGxheWVyVG9wLCBjYW52YXMud2lkdGgsIGxheWVySCk7XG5cbiAgICAgICAgICAgIGNhbnZhc0NvbnRleHQuc3Ryb2tlU3R5bGUgPSAnYmxhY2snO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjYW52YXNDb250ZXh0LnRyYW5zbGF0ZSgwLCBsYXllclRvcCk7XG4gICAgICAgICAgICBkcmF3TGF5ZXIobGF5ZXIsIGxheWVySW5kZXggPT0gYXJ0d29yay5nZXRBY3RpdmVMYXllckluZGV4KCkpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjYW52YXNDb250ZXh0LnJlc3RvcmUoKTtcbiAgICAgICAgfTtcbiAgICAgICAgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBSZXBhaW50IHRoZSBlbnRpcmUgY29udHJvbFxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5wYWludCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgYXJ0d29yayA9IGNvbnRyb2xsZXIuZ2V0QXJ0d29yaygpLFxuICAgICAgICAgICAgICAgIGxheWVycyA9IGFydHdvcmsuZ2V0TGF5ZXJzKCksXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgZCA9IHt3aWR0aDogY2FudmFzLndpZHRoLCBoZWlnaHQ6IGNhbnZhcy5oZWlnaHR9LFxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGNhbnZhc1NjYWxlRmFjdG9yID0gY2FudmFzLmhlaWdodCAvICQoY2FudmFzKS5oZWlnaHQoKTtcblxuICAgICAgICAgICAgY2FudmFzQ29udGV4dC5zYXZlKCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNhbnZhc0NvbnRleHQuZmlsbFN0eWxlID0gJyM2MDYwNjAnO1xuICAgICAgICAgICAgY2FudmFzQ29udGV4dC5maWxsUmVjdCgwLCAwLCBkLndpZHRoLCBkLmhlaWdodCAtIGxheWVycy5sZW5ndGggKiBsYXllckgpO1xuXG4gICAgICAgICAgICBjYW52YXNDb250ZXh0LnN0cm9rZVN0eWxlID0gJ2JsYWNrJztcblxuICAgICAgICAgICAgLy8gRHJhdyB0aGUgbGlzdCBvZiBsYXllcnMsIHdpdGggdGhlIGZpcnN0IGxheWVyIGF0IHRoZSBib3R0b20gb2YgdGhlIGNvbnRyb2xcbiAgICAgICAgICAgIGNhbnZhc0NvbnRleHQudHJhbnNsYXRlKDAsIGQuaGVpZ2h0IC0gbGF5ZXJIKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsYXllcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBkcmF3TGF5ZXIobGF5ZXJzW2ldLCBpID09IGFydHdvcmsuZ2V0QWN0aXZlTGF5ZXJJbmRleCgpKTtcbiAgICAgICAgICAgICAgICBjYW52YXNDb250ZXh0LnRyYW5zbGF0ZSgwLCAtbGF5ZXJIKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGxheWVyRHJhZ1JlYWxseSkge1xuICAgICAgICAgICAgICAgIGNhbnZhc0NvbnRleHQudHJhbnNsYXRlKDAsIGxheWVycy5sZW5ndGggKiBsYXllckggLSAoZC5oZWlnaHQgLSBsYXllckgpKTtcbiAgICAgICAgICAgICAgICBjYW52YXNDb250ZXh0LnN0cm9rZVJlY3QoMCwgbGF5ZXJEcmFnWSAqIGNhbnZhc1NjYWxlRmFjdG9yICAtIGxheWVySCAvIDIsIGQud2lkdGgsIGxheWVySCk7XG5cbiAgICAgICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICAgICAgbGF5ZXJPdmVyID0gZ2V0TGF5ZXJJbmRleCh7eDogMCwgeTogbGF5ZXJEcmFnWX0pO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGlmIChsYXllck92ZXIgPD0gbGF5ZXJzLmxlbmd0aCAmJiBsYXllck92ZXIgIT0gbGF5ZXJEcmFnSW5kZXggJiYgbGF5ZXJPdmVyICE9IGxheWVyRHJhZ0luZGV4ICsgMSkge1xuICAgICAgICAgICAgICAgICAgICBjYW52YXNDb250ZXh0LmZpbGxSZWN0KDAsIGQuaGVpZ2h0IC0gbGF5ZXJPdmVyICogbGF5ZXJIIC0gMiwgZC53aWR0aCwgNCAqIHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNhbnZhc0NvbnRleHQucmVzdG9yZSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5yZXNpemUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgIGFydHdvcmsgPSBjb250cm9sbGVyLmdldEFydHdvcmsoKSxcblxuICAgICAgICAgICAgICAgIC8vIE91ciBwYXJlbnQgY29udGFpbmVyIHdpbGwgYWN0IGFzIG91ciBzY3JvbGxiYXIgY2xpcCBhcmVhXG4gICAgICAgICAgICAgICAgcGFyZW50ID0gJChjYW52YXMpLnBhcmVudCgpLFxuICAgICAgICAgICAgICAgIHBhcmVudEhlaWdodCA9IHBhcmVudC5oZWlnaHQoKSxcbiAgICAgICAgICAgICAgICBwYXJlbnRXaWR0aCA9IHBhcmVudC53aWR0aCgpLFxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIG5ld1dpZHRoLCBuZXdIZWlnaHQ7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGxheWVySCA9IDM0ICogd2luZG93LmRldmljZVBpeGVsUmF0aW87XG4gICAgICAgICAgICBleWVXID0gMjQgKiB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbztcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgbmV3V2lkdGggPSBwYXJlbnRXaWR0aCAqIHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvO1xuICAgICAgICAgICAgbmV3SGVpZ2h0ID0gTWF0aC5tYXgobGF5ZXJIICogYXJ0d29yay5nZXRMYXllckNvdW50KCksIHBhcmVudEhlaWdodCAqIHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gU2hvdWxkIHdlIHRyaWdnZXIgYSBzY3JvbGxiYXIgdG8gYXBwZWFyP1xuICAgICAgICAgICAgaWYgKG5ld0hlaWdodCA+IHBhcmVudEhlaWdodCAqIHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvKSB7XG4gICAgICAgICAgICAgICAgLy8gVGFrZSB0aGUgc2Nyb2xsYmFyIHdpZHRoIGludG8gYWNjb3VudCBpbiBvdXIgd2lkdGhcbiAgICAgICAgICAgICAgICBuZXdXaWR0aCAtPSAxNSAqIHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvO1xuICAgICAgICAgICAgICAgIHBhcmVudFswXS5zdHlsZS5vdmVyZmxvd1kgPSAnc2Nyb2xsJztcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcGFyZW50WzBdLnN0eWxlLm92ZXJmbG93WSA9ICdoaWRkZW4nO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjYW52YXMud2lkdGggPSBuZXdXaWR0aDtcbiAgICAgICAgICAgIGNhbnZhcy5oZWlnaHQgPSBuZXdIZWlnaHQ7XG5cbiAgICAgICAgICAgIGNhbnZhcy5zdHlsZS53aWR0aCA9IChuZXdXaWR0aCAvIHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvKSArIFwicHhcIjtcbiAgICAgICAgICAgIGNhbnZhcy5zdHlsZS5oZWlnaHQgPSAobmV3SGVpZ2h0IC8gd2luZG93LmRldmljZVBpeGVsUmF0aW8pICsgXCJweFwiO1xuXG4gICAgICAgICAgICBjYW52YXNDb250ZXh0LmZvbnQgPSAobGF5ZXJIICogMC4yNSkgKyBcInB0IHNhbnMtc2VyaWZcIjtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy5wYWludCgpO1xuICAgICAgICB9O1xuICAgICAgICBcbiAgICAgICAgdGhpcy5nZXRFbGVtZW50ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gY29udGFpbmVyO1xuICAgICAgICB9O1xuICAgICAgICBcbiAgICAgICAgY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICBpZiAocmVuYW1lRmllbGQuaXNWaXNpYmxlKCkpIHtcbiAgICAgICAgICAgICAgICByZW5hbWVGaWVsZC5yZW5hbWVBbmRIaWRlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoXCJkYmxjbGlja1wiLCBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICB2YXIgXG4gICAgICAgICAgICAgICAgb2Zmc2V0ID0gJChjYW52YXMpLm9mZnNldCgpLFxuICAgICAgICAgICAgICAgIG1vdXNlTG9jID0ge3g6IGUucGFnZVggLSBvZmZzZXQubGVmdCwgeTogZS5wYWdlWSAtIG9mZnNldC50b3B9LFxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGxheWVySW5kZXggPSBnZXRMYXllckluZGV4KG1vdXNlTG9jKTtcblxuICAgICAgICAgICAgaWYgKG1vdXNlTG9jLnggKiB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyA+IGV5ZVcgJiYgbGF5ZXJJbmRleCA+PSAwICYmIGxheWVySW5kZXggPCBhcnR3b3JrLmdldExheWVyQ291bnQoKSkge1xuICAgICAgICAgICAgICAgIHNob3dSZW5hbWVDb250cm9sKGxheWVySW5kZXgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBjYW52YXMuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICBvZmZzZXQgPSAkKGNhbnZhcykub2Zmc2V0KCksXG4gICAgICAgICAgICAgICAgbW91c2VMb2MgPSB7eDogZS5wYWdlWCAtIG9mZnNldC5sZWZ0LCB5OiBlLnBhZ2VZIC0gb2Zmc2V0LnRvcH07XG5cbiAgICAgICAgICAgIC8qIENsaWNrLCBtb3ZlZCBmcm9tIG1vdXNlQ2xpY2tlZCBkdWUgdG8gcHJvYmxlbXMgd2l0aCBmb2N1cyBhbmQgc3R1ZmYgKi9cbiAgICAgICAgICAgIGlmIChlLmJ1dHRvbiA9PSAwKSB7IC8qIExlZnQgYnV0dG9uICovXG4gICAgICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgICAgIGFydHdvcmsgPSBjb250cm9sbGVyLmdldEFydHdvcmsoKSxcbiAgICAgICAgICAgICAgICAgICAgbGF5ZXJzID0gYXJ0d29yay5nZXRMYXllcnMoKSxcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGxheWVySW5kZXggPSBnZXRMYXllckluZGV4KG1vdXNlTG9jKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBpZiAobGF5ZXJJbmRleCA+PSAwICYmIGxheWVySW5kZXggPCBhcnR3b3JrLmdldExheWVyQ291bnQoKSkge1xuICAgICAgICAgICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxheWVyID0gYXJ0d29yay5nZXRMYXllcihsYXllckluZGV4KTtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGlmIChtb3VzZUxvYy54IC8gJChjYW52YXMpLndpZHRoKCkgKiBjYW52YXMud2lkdGggPCBleWVXKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhcnR3b3JrLnNldExheWVyVmlzaWJpbGl0eShsYXllckluZGV4LCAhbGF5ZXIudmlzaWJsZSk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhcnR3b3JrLnNldEFjdGl2ZUxheWVySW5kZXgobGF5ZXJJbmRleCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBTaW5jZSB0aGlzIGlzIGEgc2xvdyBHVUkgb3BlcmF0aW9uLCB0aGlzIGlzIGEgZ29vZCBjaGFuY2UgdG8gZ2V0IHRoZSBjYW52YXMgcmVhZHkgZm9yIGRyYXdpbmdcbiAgICAgICAgICAgICAgICAgICAgICAgIGFydHdvcmsucGVyZm9ybUlkbGVUYXNrcygpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGlmIChsYXllckluZGV4IDwgbGF5ZXJzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICBsYXllckRyYWcgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBsYXllckRyYWdZID0gbW91c2VMb2MueTtcbiAgICAgICAgICAgICAgICAgICAgbGF5ZXJEcmFnSW5kZXggPSBsYXllckluZGV4O1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIiwgbW91c2VEcmFnZ2VkKTtcbiAgICAgICAgICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsIG1vdXNlVXApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICBpZiAoIXdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvKSB7XG4gICAgICAgICAgICB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyA9IDEuMDtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgY2FudmFzQ29udGV4dC5zdHJva2VTdHlsZSA9ICdibGFjayc7XG4gICAgICAgIFxuICAgICAgICBjb250YWluZXIuY2xhc3NOYW1lID0gXCJjaGlja2VucGFpbnQtbGF5ZXJzLXdpZGdldFwiO1xuICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoY2FudmFzKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBDUFJlbmFtZUZpZWxkKCkge1xuICAgICAgICB2YXJcbiAgICAgICAgICAgIGxheWVySW5kZXggPSAtMSxcbiAgICAgICAgICAgIHRleHRCb3ggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIiksXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoYXQgPSB0aGlzO1xuXG4gICAgICAgIHRoaXMuaGlkZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgbGF5ZXJJbmRleCA9IC0xO1xuICAgICAgICAgICAgdGV4dEJveC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMucmVuYW1lQW5kSGlkZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIFxuICAgICAgICAgICAgICAgIGFydHdvcmsgPSBjb250cm9sbGVyLmdldEFydHdvcmsoKTtcblxuICAgICAgICAgICAgYXJ0d29yay5zZXRMYXllck5hbWUobGF5ZXJJbmRleCwgdGV4dEJveC52YWx1ZSk7XG5cbiAgICAgICAgICAgIHRoaXMuaGlkZSgpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMuaXNWaXNpYmxlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gdGV4dEJveC5zdHlsZS5kaXNwbGF5ICE9ICdub25lJztcbiAgICAgICAgfTtcbiAgICAgICAgXG4gICAgICAgIHRoaXMuc2V0TG9jYXRpb24gPSBmdW5jdGlvbihwb3NpdGlvblgsIHBvc2l0aW9uWSkge1xuICAgICAgICAgICAgdGV4dEJveC5zdHlsZS5sZWZ0ID0gcG9zaXRpb25YICsgXCJweFwiO1xuICAgICAgICAgICAgdGV4dEJveC5zdHlsZS50b3AgPSBwb3NpdGlvblkgKyBcInB4XCI7XG4gICAgICAgIH07XG4gICAgICAgIFxuICAgICAgICB0aGlzLnNob3cgPSBmdW5jdGlvbih4LCB5LCBfbGF5ZXJJbmRleCwgbGF5ZXJOYW1lKSB7XG4gICAgICAgICAgICBsYXllckluZGV4ID0gX2xheWVySW5kZXg7XG4gICAgICAgICAgICB0ZXh0Qm94LnZhbHVlID0gbGF5ZXJOYW1lO1xuICAgICAgICAgICAgdGhpcy5zZXRMb2NhdGlvbih4LCB5KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGV4dEJveC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAgICAgICAgIHRleHRCb3guc2VsZWN0KCk7XG4gICAgICAgIH07XG4gICAgICAgIFxuICAgICAgICB0aGlzLmdldEVsZW1lbnQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiB0ZXh0Qm94O1xuICAgICAgICB9O1xuICAgICAgICBcbiAgICAgICAgdGV4dEJveC50eXBlID0gXCJ0ZXh0XCI7XG4gICAgICAgIHRleHRCb3guY2xhc3NOYW1lID0gXCJjaGlja2VucGFpbnQtbGF5ZXItbmV3LW5hbWUgZm9ybS1jb250cm9sIGlucHV0LXNtXCI7XG4gICAgICAgIHRleHRCb3guc3R5bGUuZGlzcGxheSA9ICdub25lJztcblxuICAgICAgICB0ZXh0Qm94LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgIC8vIFByZXZlbnQgb3RoZXIga2V5aGFuZGxlcnMgKENQQ2FudmFzKSBmcm9tIGdldHRpbmcgdGhlaXIgZ3J1YmJ5IGhhbmRzIG9uIHRoZSBpbnB1dFxuICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGV4dEJveC5hZGRFdmVudExpc3RlbmVyKFwia2V5cHJlc3NcIiwgZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgaWYgKGUua2V5Q29kZSA9PSAxMykgeyAvLyBFbnRlclxuICAgICAgICAgICAgICAgIHRoYXQucmVuYW1lQW5kSGlkZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGV4dEJveC5hZGRFdmVudExpc3RlbmVyKFwia2V5dXBcIiwgZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgaWYgKGUua2V5Q29kZSA9PSAyNykgeyAvLyBFc2NhcGVcbiAgICAgICAgICAgICAgICB0aGF0LmhpZGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRleHRCb3guYWRkRXZlbnRMaXN0ZW5lcihcImJsdXJcIiwgZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgdGhhdC5yZW5hbWVBbmRIaWRlKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBcbiAgICBibGVuZENvbWJvLmNsYXNzTmFtZSA9IFwiZm9ybS1jb250cm9sXCI7XG4gICAgYmxlbmRDb21iby50aXRsZSA9IFwiTGF5ZXIgYmxlbmRpbmcgbW9kZVwiO1xuICAgIGJsZW5kQ29tYm8uYWRkRXZlbnRMaXN0ZW5lcihcImNoYW5nZVwiLCBmdW5jdGlvbihlKSB7XG4gICAgICAgIHZhclxuICAgICAgICAgICAgYXJ0d29yayA9IGNvbnRyb2xsZXIuZ2V0QXJ0d29yaygpO1xuICAgICAgICBcbiAgICAgICAgYXJ0d29yay5zZXRMYXllckJsZW5kTW9kZShhcnR3b3JrLmdldEFjdGl2ZUxheWVySW5kZXgoKSwgcGFyc2VJbnQoYmxlbmRDb21iby52YWx1ZSwgMTApKTtcbiAgICB9KTtcbiAgICBcbiAgICBmaWxsQ29tYm9ib3goYmxlbmRDb21ibywgTU9ERV9OQU1FUyk7XG5cbiAgICBib2R5LmFwcGVuZENoaWxkKGJsZW5kQ29tYm8pO1xuICAgIFxuICAgIGFscGhhU2xpZGVyLnRpdGxlID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIFwiT3BhY2l0eTogXCIgKyB2YWx1ZSArIFwiJVwiO1xuICAgIH07XG4gICAgXG4gICAgYWxwaGFTbGlkZXIub24oXCJ2YWx1ZUNoYW5nZVwiLCBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICB2YXJcbiAgICAgICAgICAgIGFydHdvcmsgPSBjb250cm9sbGVyLmdldEFydHdvcmsoKTtcbiAgICAgICAgXG4gICAgICAgIGFydHdvcmsuc2V0TGF5ZXJBbHBoYShhcnR3b3JrLmdldEFjdGl2ZUxheWVySW5kZXgoKSwgdmFsdWUpO1xuICAgIH0pO1xuICAgIFxuICAgIGJvZHkuYXBwZW5kQ2hpbGQoYWxwaGFTbGlkZXIuZ2V0RWxlbWVudCgpKTtcblxuICAgIGNiU2FtcGxlQWxsTGF5ZXJzLnR5cGUgPSBcImNoZWNrYm94XCI7XG4gICAgY2JTYW1wbGVBbGxMYXllcnMuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgdmFyXG4gICAgICAgICAgICBhcnR3b3JrID0gY29udHJvbGxlci5nZXRBcnR3b3JrKCk7XG4gICAgICAgIFxuICAgICAgICBhcnR3b3JrLnNldFNhbXBsZUFsbExheWVycyhjYlNhbXBsZUFsbExheWVycy5jaGVja2VkKTtcbiAgICB9KTtcbiAgICBcbiAgICBib2R5LmFwcGVuZENoaWxkKHdyYXBDaGVja2JveFdpdGhMYWJlbChjYlNhbXBsZUFsbExheWVycywgXCJTYW1wbGUgYWxsIGxheWVyc1wiKSk7XG4gICAgXG4gICAgY2JMb2NrQWxwaGEudHlwZSA9IFwiY2hlY2tib3hcIjtcbiAgICBjYkxvY2tBbHBoYS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24oZSkge1xuICAgICAgICB2YXJcbiAgICAgICAgICAgIGFydHdvcmsgPSBjb250cm9sbGVyLmdldEFydHdvcmsoKTtcbiAgICAgICAgXG4gICAgICAgYXJ0d29yay5zZXRMb2NrQWxwaGEoY2JMb2NrQWxwaGEuY2hlY2tlZCk7XG4gICAgfSk7XG4gICAgICAgIFxuICAgIGJvZHkuYXBwZW5kQ2hpbGQod3JhcENoZWNrYm94V2l0aExhYmVsKGNiTG9ja0FscGhhLCBcIkxvY2sgYWxwaGFcIikpO1xuXG4gICAgbGF5ZXJXaWRnZXQuZ2V0RWxlbWVudCgpLmFwcGVuZENoaWxkKHJlbmFtZUZpZWxkLmdldEVsZW1lbnQoKSk7XG5cbiAgICBib2R5LmFwcGVuZENoaWxkKGxheWVyV2lkZ2V0LmdldEVsZW1lbnQoKSk7XG5cbiAgICAvLyBBZGQvUmVtb3ZlIGxheWVyIGJ1dHRvbnNcbiAgICB2YXJcbiAgICAgICAgYWRkUmVtb3ZlQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInVsXCIpO1xuICAgIFxuICAgIGFkZFJlbW92ZUNvbnRhaW5lci5jbGFzc05hbWUgPSAnY2hpY2tlbnBhaW50LWxheWVyLWFkZC1yZW1vdmUgbGlzdC11bnN0eWxlZCc7XG4gICAgXG4gICAgYWRkQnV0dG9uLmNsYXNzTmFtZSA9ICdjaGlja2VucGFpbnQtc21hbGwtdG9vbGJhci1idXR0b24gY2hpY2tlbnBhaW50LWFkZC1sYXllcic7XG4gICAgYWRkQnV0dG9uLnRpdGxlID0gJ0FkZCBsYXllcic7XG4gICAgYWRkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbigpIHtcbiAgICAgICAgY29udHJvbGxlci5nZXRBcnR3b3JrKCkuYWRkTGF5ZXIoKTtcbiAgICB9KTtcblxuICAgIHJlbW92ZUJ1dHRvbi5jbGFzc05hbWUgPSAnY2hpY2tlbnBhaW50LXNtYWxsLXRvb2xiYXItYnV0dG9uIGNoaWNrZW5wYWludC1yZW1vdmUtbGF5ZXInO1xuICAgIHJlbW92ZUJ1dHRvbi50aXRsZSA9IFwiRGVsZXRlIGxheWVyXCI7XG4gICAgcmVtb3ZlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKCFjb250cm9sbGVyLmdldEFydHdvcmsoKS5yZW1vdmVMYXllcigpKSB7XG4gICAgICAgICAgICBhbGVydChcIkVycm9yOiBZb3UgY2FuJ3QgcmVtb3ZlIHRoZSBsYXN0IHJlbWFpbmluZyBsYXllciBpbiB0aGUgZHJhd2luZy5cIik7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBcbiAgICBhZGRSZW1vdmVDb250YWluZXIuYXBwZW5kQ2hpbGQoYWRkQnV0dG9uKTtcbiAgICBhZGRSZW1vdmVDb250YWluZXIuYXBwZW5kQ2hpbGQocmVtb3ZlQnV0dG9uKTtcblxuICAgIGJvZHkuYXBwZW5kQ2hpbGQoYWRkUmVtb3ZlQ29udGFpbmVyKTtcbiAgICBcbiAgICAvLyBTZXQgaW5pdGlhbCB2YWx1ZXNcbiAgICB2YXJcbiAgICAgICAgYXJ0d29yayA9IGNvbnRyb2xsZXIuZ2V0QXJ0d29yaygpO1xuICAgIFxuICAgIGFscGhhU2xpZGVyLnNldFZhbHVlKGFydHdvcmsuZ2V0QWN0aXZlTGF5ZXIoKS5nZXRBbHBoYSgpKTtcbiAgICBibGVuZENvbWJvLnZhbHVlID0gYXJ0d29yay5nZXRBY3RpdmVMYXllcigpLmdldEJsZW5kTW9kZSgpO1xuXG4gICAgLy8gYWRkIGxpc3RlbmVyc1xuICAgIGNvbnRyb2xsZXIuZ2V0QXJ0d29yaygpLm9uKFwiY2hhbmdlTGF5ZXJcIiwgZnVuY3Rpb24obGF5ZXJJbmRleCkge1xuICAgICAgICB2YXJcbiAgICAgICAgICAgIGFydHdvcmsgPSB0aGlzO1xuICAgICAgICBcbiAgICAgICAgaWYgKGFydHdvcmsuZ2V0QWN0aXZlTGF5ZXIoKS5nZXRBbHBoYSgpICE9IGFscGhhU2xpZGVyLnZhbHVlKSB7XG4gICAgICAgICAgICBhbHBoYVNsaWRlci5zZXRWYWx1ZShhcnR3b3JrLmdldEFjdGl2ZUxheWVyKCkuZ2V0QWxwaGEoKSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoYXJ0d29yay5nZXRBY3RpdmVMYXllcigpLmdldEJsZW5kTW9kZSgpICE9IHBhcnNlSW50KGJsZW5kQ29tYm8udmFsdWUsIDEwKSkge1xuICAgICAgICAgICAgYmxlbmRDb21iby52YWx1ZSA9IGFydHdvcmsuZ2V0QWN0aXZlTGF5ZXIoKS5nZXRCbGVuZE1vZGUoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChsYXllckluZGV4ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGxheWVyV2lkZ2V0LnBhaW50TGF5ZXIobGF5ZXJJbmRleCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBXZSBtYXkgaGF2ZSBhZGRlZCBvciByZW1vdmVkIGxheWVycywgcmVzaXplIGFzIGFwcHJvcHJpYXRlXG4gICAgICAgICAgICBsYXllcldpZGdldC5yZXNpemUoKTtcbiAgICAgICAgfVxuICAgIH0pO1xufVxuXG5DUExheWVyc1BhbGV0dGUucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShDUFBhbGV0dGUucHJvdG90eXBlKTtcbkNQTGF5ZXJzUGFsZXR0ZS5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBDUExheWVyc1BhbGV0dGU7IiwiLypcbiAgICBDaGlja2VuUGFpbnRcbiAgICBcbiAgICBDaGlja2VuUGFpbnQgaXMgYSB0cmFuc2xhdGlvbiBvZiBDaGliaVBhaW50IGZyb20gSmF2YSB0byBKYXZhU2NyaXB0XG4gICAgYnkgTmljaG9sYXMgU2hlcmxvY2sgLyBDaGlja2VuIFNtb290aGllLlxuICAgIFxuICAgIENoaWJpUGFpbnQgaXMgQ29weXJpZ2h0IChjKSAyMDA2LTIwMDggTWFyYyBTY2hlZmVyXG5cbiAgICBDaGlja2VuUGFpbnQgaXMgZnJlZSBzb2Z0d2FyZTogeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yIG1vZGlmeVxuICAgIGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgYXMgcHVibGlzaGVkIGJ5XG4gICAgdGhlIEZyZWUgU29mdHdhcmUgRm91bmRhdGlvbiwgZWl0aGVyIHZlcnNpb24gMyBvZiB0aGUgTGljZW5zZSwgb3JcbiAgICAoYXQgeW91ciBvcHRpb24pIGFueSBsYXRlciB2ZXJzaW9uLlxuXG4gICAgQ2hpY2tlblBhaW50IGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsXG4gICAgYnV0IFdJVEhPVVQgQU5ZIFdBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2ZcbiAgICBNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuICBTZWUgdGhlXG4gICAgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy5cblxuICAgIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXG4gICAgYWxvbmcgd2l0aCBDaGlja2VuUGFpbnQuIElmIG5vdCwgc2VlIDxodHRwOi8vd3d3LmdudS5vcmcvbGljZW5zZXMvPi5cbiovXG5cbmltcG9ydCBDUENhbnZhcyBmcm9tIFwiLi9DUENhbnZhc1wiO1xuaW1wb3J0IENQUGFsZXR0ZU1hbmFnZXIgZnJvbSBcIi4vQ1BQYWxldHRlTWFuYWdlclwiO1xuaW1wb3J0IENQTWFpbk1lbnUgZnJvbSBcIi4vQ1BNYWluTWVudVwiO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBDUE1haW5HVUkoY29udHJvbGxlciwgdWlFbGVtKSB7XG4gICAgdmFyXG4gICAgICAgIGxvd2VyQXJlYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksXG4gICAgICAgIGNhbnZhcyA9IG5ldyBDUENhbnZhcyhjb250cm9sbGVyKSxcbiAgICAgICAgcGFsZXR0ZU1hbmFnZXIgPSBuZXcgQ1BQYWxldHRlTWFuYWdlcihjb250cm9sbGVyKSxcbiAgICAgICAgbWVudUJhcixcblxuICAgICAgICBmdWxsU2NyZWVuTW9kZSA9IGZhbHNlLFxuICAgICAgICBcbiAgICAgICAgdGhhdCA9IHRoaXM7XG4gICAgXG4gICAgdGhpcy50b2dnbGVQYWxldHRlcyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBwYWxldHRlTWFuYWdlci50b2dnbGVQYWxldHRlcygpO1xuICAgIH07XG4gICAgXG4gICAgdGhpcy5hcnJhbmdlUGFsZXR0ZXMgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgLy8gR2l2ZSB0aGUgYnJvd3NlciBhIGNoYW5jZSB0byBkbyB0aGUgc2l6aW5nIG9mIHRoZSBwYWxldHRlcyBiZWZvcmUgd2UgdHJ5IHRvIHJlYXJyYW5nZSB0aGVtXG4gICAgICAgIHNldFRpbWVvdXQocGFsZXR0ZU1hbmFnZXIuYXJyYW5nZVBhbGV0dGVzLmJpbmQocGFsZXR0ZU1hbmFnZXIpLCAwKTtcbiAgICB9O1xuXG4gICAgdGhpcy5jb25zdHJhaW5QYWxldHRlcyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBwYWxldHRlTWFuYWdlci5jb25zdHJhaW5QYWxldHRlcygpO1xuICAgIH07XG4gICAgXG4gICAgdGhpcy5zaG93UGFsZXR0ZSA9IGZ1bmN0aW9uKHBhbGV0dGVOYW1lLCBzaG93KSB7XG4gICAgICAgIHBhbGV0dGVNYW5hZ2VyLnNob3dQYWxldHRlQnlOYW1lKHBhbGV0dGVOYW1lLCBzaG93KTtcbiAgICB9O1xuICAgIFxuICAgIHRoaXMuZ2V0U3dhdGNoZXMgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHBhbGV0dGVNYW5hZ2VyLnBhbGV0dGVzLnN3YXRjaGVzLmdldFN3YXRjaGVzKCk7XG4gICAgfTtcblxuICAgIHRoaXMuc2V0U3dhdGNoZXMgPSBmdW5jdGlvbihzd2F0Y2hlcykge1xuICAgICAgICBwYWxldHRlTWFuYWdlci5wYWxldHRlcy5zd2F0Y2hlcy5zZXRTd2F0Y2hlcyhzd2F0Y2hlcyk7XG4gICAgfTtcbiAgICBcbiAgICB0aGlzLmdldFBhbGV0dGVNYW5hZ2VyID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBwYWxldHRlTWFuYWdlcjtcbiAgICB9O1xuICAgIFxuICAgIHRoaXMuc2V0Um90YXRpb24gPSBmdW5jdGlvbihyb3RhdGlvbikge1xuICAgICAgICBjYW52YXMuc2V0Um90YXRpb24ocm90YXRpb24pO1xuICAgIH07XG5cbiAgICB0aGlzLnNldEZ1bGxTY3JlZW5Nb2RlID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgZnVsbFNjcmVlbk1vZGUgPSB2YWx1ZTtcblxuICAgICAgICB0aGF0LnJlc2l6ZSgpO1xuICAgICAgICB0aGF0LmFycmFuZ2VQYWxldHRlcygpO1xuICAgIH07XG5cbiAgICB0aGlzLnJlc2l6ZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXJcbiAgICAgICAgICAgIG5ld0hlaWdodDtcblxuICAgICAgICBpZiAoZnVsbFNjcmVlbk1vZGUpIHtcbiAgICAgICAgICAgIG5ld0hlaWdodCA9ICQod2luZG93KS5oZWlnaHQoKSAtICQobWVudUJhci5nZXRFbGVtZW50KCkpLmhlaWdodCgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbmV3SGVpZ2h0ID0gTWF0aC5taW4oTWF0aC5tYXgoKCQod2luZG93KS5oZWlnaHQoKSAtICQobWVudUJhci5nZXRFbGVtZW50KCkpLmhlaWdodCgpIC0gNjUpLCA1MDApLCA3NTApO1xuICAgICAgICB9XG5cbiAgICAgICAgY2FudmFzLnJlc2l6ZShuZXdIZWlnaHQpO1xuICAgICAgICB0aGF0LmNvbnN0cmFpblBhbGV0dGVzKCk7XG4gICAgfTtcblxuICAgIG1lbnVCYXIgPSBuZXcgQ1BNYWluTWVudShjb250cm9sbGVyLCB0aGlzKVxuXG4gICAgdWlFbGVtLmFwcGVuZENoaWxkKG1lbnVCYXIuZ2V0RWxlbWVudCgpKTtcbiAgICBcbiAgICBsb3dlckFyZWEuY2xhc3NOYW1lID0gJ2NoaWNrZW5wYWludC1tYWluLXNlY3Rpb24nO1xuICAgIFxuICAgIGxvd2VyQXJlYS5hcHBlbmRDaGlsZChjYW52YXMuZ2V0RWxlbWVudCgpKTtcbiAgICBsb3dlckFyZWEuYXBwZW5kQ2hpbGQocGFsZXR0ZU1hbmFnZXIuZ2V0RWxlbWVudCgpKTtcbiAgICBcbiAgICB1aUVsZW0uYXBwZW5kQ2hpbGQobG93ZXJBcmVhKTtcblxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicmVzaXplXCIsIHRoaXMucmVzaXplLmJpbmQodGhpcykpO1xuXG4gICAgc2V0VGltZW91dCh0aGlzLnJlc2l6ZS5iaW5kKHRoaXMpLCAwKTtcbn1cblxuQ1BNYWluR1VJLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoRXZlbnRFbWl0dGVyLnByb3RvdHlwZSk7XG5DUE1haW5HVUkucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gQ1BNYWluR1VJOyIsIi8qXG4gICAgQ2hpY2tlblBhaW50XG4gICAgXG4gICAgQ2hpY2tlblBhaW50IGlzIGEgdHJhbnNsYXRpb24gb2YgQ2hpYmlQYWludCBmcm9tIEphdmEgdG8gSmF2YVNjcmlwdFxuICAgIGJ5IE5pY2hvbGFzIFNoZXJsb2NrIC8gQ2hpY2tlbiBTbW9vdGhpZS5cbiAgICBcbiAgICBDaGliaVBhaW50IGlzIENvcHlyaWdodCAoYykgMjAwNi0yMDA4IE1hcmMgU2NoZWZlclxuXG4gICAgQ2hpY2tlblBhaW50IGlzIGZyZWUgc29mdHdhcmU6IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vciBtb2RpZnlcbiAgICBpdCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGFzIHB1Ymxpc2hlZCBieVxuICAgIHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb24sIGVpdGhlciB2ZXJzaW9uIDMgb2YgdGhlIExpY2Vuc2UsIG9yXG4gICAgKGF0IHlvdXIgb3B0aW9uKSBhbnkgbGF0ZXIgdmVyc2lvbi5cblxuICAgIENoaWNrZW5QYWludCBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLFxuICAgIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mXG4gICAgTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiAgU2VlIHRoZVxuICAgIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuXG5cbiAgICBZb3Ugc2hvdWxkIGhhdmUgcmVjZWl2ZWQgYSBjb3B5IG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZVxuICAgIGFsb25nIHdpdGggQ2hpY2tlblBhaW50LiBJZiBub3QsIHNlZSA8aHR0cDovL3d3dy5nbnUub3JnL2xpY2Vuc2VzLz4uXG4qL1xuXG52YXJcbiAgICBNRU5VX0VOVFJJRVMgPSBbXG4gICAgICAgIHtcbiAgICAgICAgICAgIG5hbWU6IFwiRmlsZVwiLFxuICAgICAgICAgICAgbW5lbW9uaWM6IFwiRlwiLFxuICAgICAgICAgICAgY2hpbGRyZW46IFtcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IFwiU2F2ZSB0byBteSBjb21wdXRlclwiLFxuICAgICAgICAgICAgICAgICAgICBhY3Rpb246IFwiQ1BTYXZlXCIsXG4gICAgICAgICAgICAgICAgICAgIG1uZW1vbmljOiBcIlNcIixcbiAgICAgICAgICAgICAgICAgICAgc2hvcnRjdXQ6IFwiY3RybCtzXCJcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJTYXZlIE9la2FraVwiLFxuICAgICAgICAgICAgICAgICAgICBhY3Rpb246IFwiQ1BTZW5kXCIsXG4gICAgICAgICAgICAgICAgICAgIG1uZW1vbmljOiBcIlNcIixcbiAgICAgICAgICAgICAgICAgICAgc2hvcnRjdXQ6IFwiY3RybCtzXCJcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgXSxcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgICAgbmFtZTogXCJFZGl0XCIsXG4gICAgICAgICAgICBtbmVtb25pYzogXCJFXCIsXG4gICAgICAgICAgICBjaGlsZHJlbjogW1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJVbmRvXCIsXG4gICAgICAgICAgICAgICAgICAgIGFjdGlvbjogXCJDUFVuZG9cIixcbiAgICAgICAgICAgICAgICAgICAgbW5lbW9uaWM6IFwiVVwiLFxuICAgICAgICAgICAgICAgICAgICBzaG9ydGN1dDogXCJjdHJsK3pcIixcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IFwiVW5kb2VzIHRoZSBtb3N0IHJlY2VudCBhY3Rpb25cIlxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiBcIlJlZG9cIixcbiAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiBcIkNQUmVkb1wiLFxuICAgICAgICAgICAgICAgICAgICBtbmVtb25pYzogXCJSXCIsXG4gICAgICAgICAgICAgICAgICAgIHNob3J0Y3V0OiBcInNoaWZ0K2N0cmwrelwiLFxuICAgICAgICAgICAgICAgICAgICB0aXRsZTogXCJSZWRvZXMgYSBwcmV2aW91c2x5IHVuZG9uZSBhY3Rpb25cIlxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiBcIkNsZWFyIGhpc3RvcnlcIixcbiAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiBcIkNQQ2xlYXJIaXN0b3J5XCIsXG4gICAgICAgICAgICAgICAgICAgIG1uZW1vbmljOiBcIkhcIixcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IFwiUmVtb3ZlcyBhbGwgdW5kby9yZWRvIGluZm9ybWF0aW9uIHRvIHJlZ2FpbiBtZW1vcnlcIlxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiBcIi1cIixcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJDdXRcIixcbiAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiBcIkNQQ3V0XCIsXG4gICAgICAgICAgICAgICAgICAgIG1uZW1vbmljOiBcIlRcIixcbiAgICAgICAgICAgICAgICAgICAgc2hvcnRjdXQ6IFwiY3RybCt4XCJcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJDb3B5XCIsXG4gICAgICAgICAgICAgICAgICAgIGFjdGlvbjogXCJDUENvcHlcIixcbiAgICAgICAgICAgICAgICAgICAgbW5lbW9uaWM6IFwiQ1wiLFxuICAgICAgICAgICAgICAgICAgICBzaG9ydGN1dDogXCJjdHJsK2NcIlxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiBcIkNvcHkgbWVyZ2VkXCIsXG4gICAgICAgICAgICAgICAgICAgIGFjdGlvbjogXCJDUENvcHlNZXJnZWRcIixcbiAgICAgICAgICAgICAgICAgICAgbW5lbW9uaWM6IFwiWVwiLFxuICAgICAgICAgICAgICAgICAgICBzaG9ydGN1dDogXCJzaGlmdCtjdHJsK2NcIlxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiBcIlBhc3RlXCIsXG4gICAgICAgICAgICAgICAgICAgIGFjdGlvbjogXCJDUFBhc3RlXCIsXG4gICAgICAgICAgICAgICAgICAgIG1uZW1vbmljOiBcIlBcIixcbiAgICAgICAgICAgICAgICAgICAgc2hvcnRjdXQ6IFwiY3RybCt2XCJcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogXCItXCJcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJTZWxlY3QgYWxsXCIsXG4gICAgICAgICAgICAgICAgICAgIGFjdGlvbjogXCJDUFNlbGVjdEFsbFwiLFxuICAgICAgICAgICAgICAgICAgICBtbmVtb25pYzogXCJBXCIsXG4gICAgICAgICAgICAgICAgICAgIHNob3J0Y3V0OiBcImN0cmwrYVwiXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IFwiRGVzZWxlY3RcIixcbiAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiBcIkNQRGVzZWxlY3RBbGxcIixcbiAgICAgICAgICAgICAgICAgICAgbW5lbW9uaWM6IFwiRFwiLFxuICAgICAgICAgICAgICAgICAgICBzaG9ydGN1dDogXCJjdHJsK2RcIlxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIF1cbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgICAgbmFtZTogXCJMYXllcnNcIixcbiAgICAgICAgICAgIG1uZW1vbmljOiBcIkxcIixcbiAgICAgICAgICAgIGNoaWxkcmVuOiBbXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiBcIkR1cGxpY2F0ZVwiLFxuICAgICAgICAgICAgICAgICAgICBhY3Rpb246IFwiQ1BMYXllckR1cGxpY2F0ZVwiLFxuICAgICAgICAgICAgICAgICAgICBtbmVtb25pYzogXCJEXCIsXG4gICAgICAgICAgICAgICAgICAgIHNob3J0Y3V0OiBcInNoaWZ0K2N0cmwrZFwiLFxuICAgICAgICAgICAgICAgICAgICB0aXRsZTogXCJDcmVhdGVzIGEgY29weSBvZiB0aGUgY3VycmVudGx5IHNlbGVjdGVkIGxheWVyXCJcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogXCItXCJcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJNZXJnZSBkb3duXCIsXG4gICAgICAgICAgICAgICAgICAgIGFjdGlvbjogXCJDUExheWVyTWVyZ2VEb3duXCIsXG4gICAgICAgICAgICAgICAgICAgIG1uZW1vbmljOiBcIkVcIixcbiAgICAgICAgICAgICAgICAgICAgc2hvcnRjdXQ6IFwiY3RybCtlXCIsXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiBcIk1lcmdlcyB0aGUgY3VycmVudGx5IHNlbGVjdGVkIGxheWVyIHdpdGggdGhlIG9uZSBkaXJlY3RseSBiZWxvdyBpdFwiXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IFwiTWVyZ2UgYWxsIGxheWVyc1wiLFxuICAgICAgICAgICAgICAgICAgICBhY3Rpb246IFwiQ1BMYXllck1lcmdlQWxsXCIsXG4gICAgICAgICAgICAgICAgICAgIG1uZW1vbmljOiBcIkFcIixcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IFwiTWVyZ2VzIGFsbCB0aGUgbGF5ZXJzXCJcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgXSxcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgICAgbmFtZTogXCJFZmZlY3RzXCIsXG4gICAgICAgICAgICBtbmVtb25pYzogXCJFXCIsXG4gICAgICAgICAgICBjaGlsZHJlbjogW1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJDbGVhclwiLFxuICAgICAgICAgICAgICAgICAgICBhY3Rpb246IFwiQ1BDbGVhclwiLFxuICAgICAgICAgICAgICAgICAgICBtbmVtb25pYzogXCJEXCIsXG4gICAgICAgICAgICAgICAgICAgIHNob3J0Y3V0OiBcImRlbCxiYWNrc3BhY2VcIixcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IFwiQ2xlYXJzIHRoZSBzZWxlY3RlZCBhcmVhXCJcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJGaWxsXCIsXG4gICAgICAgICAgICAgICAgICAgIGFjdGlvbjogXCJDUEZpbGxcIixcbiAgICAgICAgICAgICAgICAgICAgbW5lbW9uaWM6IFwiRlwiLFxuICAgICAgICAgICAgICAgICAgICBzaG9ydGN1dDogXCJjdHJsK2ZcIixcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IFwiRmlsbHMgdGhlIHNlbGVjdGVkIGFyZWEgd2l0aCB0aGUgY3VycmVudCBjb2xvclwiXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IFwiRmxpcCBob3Jpem9udGFsXCIsXG4gICAgICAgICAgICAgICAgICAgIGFjdGlvbjogXCJDUEhGbGlwXCIsXG4gICAgICAgICAgICAgICAgICAgIG1uZW1vbmljOiBcIkhcIixcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IFwiRmxpcHMgdGhlIGN1cnJlbnQgc2VsZWN0ZWQgYXJlYSBob3Jpem9udGFsbHlcIlxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiBcIkZsaXAgdmVydGljYWxcIixcbiAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiBcIkNQVkZsaXBcIixcbiAgICAgICAgICAgICAgICAgICAgbW5lbW9uaWM6IFwiVlwiLFxuICAgICAgICAgICAgICAgICAgICB0aXRsZTogXCJGbGlwcyB0aGUgY3VycmVudCBzZWxlY3RlZCBhcmVhIHZlcnRpY2FsbHlcIlxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiBcIkludmVydFwiLFxuICAgICAgICAgICAgICAgICAgICBhY3Rpb246IFwiQ1BGWEludmVydFwiLFxuICAgICAgICAgICAgICAgICAgICBtbmVtb25pYzogXCJJXCIsXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiBcIkludmVydCB0aGUgaW1hZ2UgY29sb3JzXCJcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogXCItXCJcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJCb3ggYmx1ci4uLlwiLFxuICAgICAgICAgICAgICAgICAgICBhY3Rpb246IFwiQ1BGWEJveEJsdXJcIixcbiAgICAgICAgICAgICAgICAgICAgbW5lbW9uaWM6IFwiQlwiLFxuICAgICAgICAgICAgICAgICAgICB0aXRsZTogXCJCbHVyIGVmZmVjdFwiXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IFwiLVwiXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IFwiTW9ub2Nocm9tYXRpYyBub2lzZVwiLFxuICAgICAgICAgICAgICAgICAgICBhY3Rpb246IFwiQ1BNTm9pc2VcIixcbiAgICAgICAgICAgICAgICAgICAgbW5lbW9uaWM6IFwiTVwiLFxuICAgICAgICAgICAgICAgICAgICB0aXRsZTogXCJGaWxscyB0aGUgc2VsZWN0aW9uIHdpdGggbm9pc2VcIlxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiBcIkNvbG9yIG5vaXNlXCIsXG4gICAgICAgICAgICAgICAgICAgIGFjdGlvbjogXCJDUENOb2lzZVwiLFxuICAgICAgICAgICAgICAgICAgICBtbmVtb25pYzogXCJDXCIsXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiBcIkZpbGxzIHRoZSBzZWxlY3Rpb24gd2l0aCBjb2xvcmVkIG5vaXNlXCJcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBdLFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgICBuYW1lOiBcIlZpZXdcIixcbiAgICAgICAgICAgIG1uZW1vbmljOiBcIlZcIixcbiAgICAgICAgICAgIGNoaWxkcmVuOiBbXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiBcIkZ1bGwtc2NyZWVuIG1vZGVcIixcbiAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiBcIkNQRnVsbFNjcmVlblwiLFxuICAgICAgICAgICAgICAgICAgICBtbmVtb25pYzogXCJGXCIsXG4gICAgICAgICAgICAgICAgICAgIGNoZWNrYm94OiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBjaGVja2VkOiBmYWxzZVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiBcIi1cIlxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiBcIlpvb20gaW5cIixcbiAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiBcIkNQWm9vbUluXCIsXG4gICAgICAgICAgICAgICAgICAgIG1uZW1vbmljOiBcIklcIixcbiAgICAgICAgICAgICAgICAgICAgc2hvcnRjdXQ6IFwiY3RybCs9XCIsXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiBcIlpvb21zIGluXCJcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJab29tIG91dFwiLFxuICAgICAgICAgICAgICAgICAgICBhY3Rpb246IFwiQ1Bab29tT3V0XCIsXG4gICAgICAgICAgICAgICAgICAgIG1uZW1vbmljOiBcIk9cIixcbiAgICAgICAgICAgICAgICAgICAgc2hvcnRjdXQ6IFwiY3RybCstXCIsXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiBcIlpvb21zIG91dFwiXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IFwiWm9vbSAxMDAlXCIsXG4gICAgICAgICAgICAgICAgICAgIGFjdGlvbjogXCJDUFpvb20xMDBcIixcbiAgICAgICAgICAgICAgICAgICAgbW5lbW9uaWM6IFwiMVwiLFxuICAgICAgICAgICAgICAgICAgICBzaG9ydGN1dDogXCJjdHJsKzBcIixcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IFwiUmVzZXRzIHRoZSB6b29tIGZhY3RvciB0byAxMDAlXCJcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogXCItXCJcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJTbW9vdGgtb3V0IHpvb21lZCBjYW52YXNcIixcbiAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiBcIkNQTGluZWFySW50ZXJwb2xhdGlvblwiLFxuICAgICAgICAgICAgICAgICAgICBtbmVtb25pYzogXCJMXCIsXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiBcIkxpbmVhciBpbnRlcnBvbGF0aW9uIGlzIHVzZWQgdG8gZ2l2ZSBhIHNtb290aGVkIGxvb2tlZCB0byB0aGUgcGljdHVyZSB3aGVuIHpvb21lZCBpblwiLFxuICAgICAgICAgICAgICAgICAgICBjaGVja2JveDogdHJ1ZVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiBcIi1cIlxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiBcIlNob3cgZ3JpZFwiLFxuICAgICAgICAgICAgICAgICAgICBhY3Rpb246IFwiQ1BUb2dnbGVHcmlkXCIsXG4gICAgICAgICAgICAgICAgICAgIG1uZW1vbmljOiBcIkdcIixcbiAgICAgICAgICAgICAgICAgICAgc2hvcnRjdXQ6IFwiY3RybCtnXCIsXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiBcIkRpc3BsYXlzIGEgZ3JpZCBvdmVyIHRoZSBpbWFnZVwiLFxuICAgICAgICAgICAgICAgICAgICBjaGVja2JveDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgY2hlY2tlZDogZmFsc2VcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJHcmlkIG9wdGlvbnMuLi5cIixcbiAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiBcIkNQR3JpZE9wdGlvbnNcIixcbiAgICAgICAgICAgICAgICAgICAgbW5lbW9uaWM6IFwiRFwiLFxuICAgICAgICAgICAgICAgICAgICB0aXRsZTogXCJTaG93cyB0aGUgZ3JpZCBvcHRpb25zIGRpYWxvZyBib3hcIixcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBdLFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgICBuYW1lOiBcIlBhbGV0dGVzXCIsXG4gICAgICAgICAgICBtbmVtb25pYzogXCJQXCIsXG4gICAgICAgICAgICBjaGlsZHJlbjogW1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJSZWFycmFuZ2VcIixcbiAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiBcIkNQQXJyYW5nZVBhbGV0dGVzXCIsXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiBcIlJlYXJyYW5nZSB0aGUgcGFsZXR0ZSB3aW5kb3dzXCJcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJUb2dnbGUgcGFsZXR0ZXNcIixcbiAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiBcIkNQVG9nZ2xlUGFsZXR0ZXNcIixcbiAgICAgICAgICAgICAgICAgICAgbW5lbW9uaWM6IFwiUFwiLFxuICAgICAgICAgICAgICAgICAgICBzaG9ydGN1dDogXCJ0YWJcIixcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IFwiSGlkZXMgb3Igc2hvd3MgYWxsIHBhbGV0dGVzXCJcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogXCItXCJcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJTaG93IHRvb2wgb3B0aW9uc1wiLFxuICAgICAgICAgICAgICAgICAgICBhY3Rpb246IFwiQ1BQYWxCcnVzaFwiLFxuICAgICAgICAgICAgICAgICAgICBtbmVtb25pYzogXCJCXCIsXG4gICAgICAgICAgICAgICAgICAgIGNoZWNrYm94OiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBjaGVja2VkOiB0cnVlXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IFwiU2hvdyBjb2xvclwiLFxuICAgICAgICAgICAgICAgICAgICBhY3Rpb246IFwiQ1BQYWxDb2xvclwiLFxuICAgICAgICAgICAgICAgICAgICBtbmVtb25pYzogXCJDXCIsXG4gICAgICAgICAgICAgICAgICAgIGNoZWNrYm94OiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBjaGVja2VkOiB0cnVlXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IFwiU2hvdyBsYXllcnNcIixcbiAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiBcIkNQUGFsTGF5ZXJzXCIsXG4gICAgICAgICAgICAgICAgICAgIG1uZW1vbmljOiBcIllcIixcbiAgICAgICAgICAgICAgICAgICAgY2hlY2tib3g6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ6IHRydWVcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJTaG93IG1pc2NcIixcbiAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiBcIkNQUGFsTWlzY1wiLFxuICAgICAgICAgICAgICAgICAgICBtbmVtb25pYzogXCJNXCIsXG4gICAgICAgICAgICAgICAgICAgIGNoZWNrYm94OiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBjaGVja2VkOiB0cnVlXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IFwiU2hvdyBzdHJva2VcIixcbiAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiBcIkNQUGFsU3Ryb2tlXCIsXG4gICAgICAgICAgICAgICAgICAgIG1uZW1vbmljOiBcIlNcIixcbiAgICAgICAgICAgICAgICAgICAgY2hlY2tib3g6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ6IHRydWVcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJTaG93IHN3YXRjaGVzXCIsXG4gICAgICAgICAgICAgICAgICAgIGFjdGlvbjogXCJDUFBhbFN3YXRjaGVzXCIsXG4gICAgICAgICAgICAgICAgICAgIG1uZW1vbmljOiBcIldcIixcbiAgICAgICAgICAgICAgICAgICAgY2hlY2tib3g6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ6IHRydWVcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJTaG93IHRleHR1cmVzXCIsXG4gICAgICAgICAgICAgICAgICAgIGFjdGlvbjogXCJDUFBhbFRleHR1cmVzXCIsXG4gICAgICAgICAgICAgICAgICAgIG1uZW1vbmljOiBcIlhcIixcbiAgICAgICAgICAgICAgICAgICAgY2hlY2tib3g6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ6IHRydWVcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJTaG93IHRvb2xzXCIsXG4gICAgICAgICAgICAgICAgICAgIGFjdGlvbjogXCJDUFBhbFRvb2xcIixcbiAgICAgICAgICAgICAgICAgICAgbW5lbW9uaWM6IFwiVFwiLFxuICAgICAgICAgICAgICAgICAgICBjaGVja2JveDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgY2hlY2tlZDogdHJ1ZVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIF1cbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgICAgbmFtZTogXCJIZWxwXCIsXG4gICAgICAgICAgICBtbmVtb25pYzogXCJIXCIsXG4gICAgICAgICAgICBjaGlsZHJlbjogW1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJUYWJsZXQgc3VwcG9ydFwiLFxuICAgICAgICAgICAgICAgICAgICBtbmVtb25pYzogXCJUXCIsXG4gICAgICAgICAgICAgICAgICAgIGFjdGlvbjogXCJDUFRhYmxldFN1cHBvcnRcIixcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IFwiSGVscCB3aXRoIGdldHRpbmcgYSBkcmF3aW5nIHRhYmxldCB3b3JraW5nXCJcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJTaG9ydGN1dHNcIixcbiAgICAgICAgICAgICAgICAgICAgbW5lbW9uaWM6IFwiU1wiLFxuICAgICAgICAgICAgICAgICAgICBhY3Rpb246IFwiQ1BTaG9ydGN1dHNcIixcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IFwiTGlzdCBvZiBrZXlib2FyZCBhbmQgbW91c2Ugc2hvcnRjdXRzXCJcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogXCItXCJcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJBYm91dFwiLFxuICAgICAgICAgICAgICAgICAgICBtbmVtb25pYzogXCJBXCIsXG4gICAgICAgICAgICAgICAgICAgIGFjdGlvbjogXCJDUEFib3V0XCIsXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiBcIkRpc3BsYXlzIHNvbWUgaW5mb3JtYXRpb24gYWJvdXQgQ2hpY2tlblBhaW50XCJcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBdXG4gICAgICAgIH0sXG4gICAgXTtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gQ1BNYWluTWVudShjb250cm9sbGVyLCBtYWluR1VJKSB7XG4gICAgdmFyXG4gICAgICAgIGJhciA9ICQoXG4gICAgICAgICAgICAnPG5hdiBjbGFzcz1cIm5hdmJhciBuYXZiYXItZGVmYXVsdFwiPidcbiAgICAgICAgICAgICAgICArICc8ZGl2IGNsYXNzPVwiY29udGFpbmVyLWZsdWlkXCI+J1xuICAgICAgICAgICAgICAgICAgICArICc8ZGl2IGNsYXNzPVwibmF2YmFyLWhlYWRlclwiPidcbiAgICAgICAgICAgICAgICAgICAgICAgICsgJzxhIGNsYXNzPVwibmF2YmFyLWJyYW5kXCIgaHJlZj1cIiNcIj5DaGlja2VuUGFpbnQ8L2E+J1xuICAgICAgICAgICAgICAgICAgICArICc8L2Rpdj4nXG4gICAgICAgICAgICAgICAgICAgICsgJzx1bCBjbGFzcz1cIm5hdiBuYXZiYXItbmF2XCI+J1xuICAgICAgICAgICAgICAgICAgICArICc8L3VsPidcbiAgICAgICAgICAgICAgICArICc8L2Rpdj4nXG4gICAgICAgICAgICArICc8L25hdj4nXG4gICAgICAgICksXG4gICAgICAgIG1hY1BsYXRmb3JtID0gL15NYWMvaS50ZXN0KG5hdmlnYXRvci5wbGF0Zm9ybSk7XG4gICAgXG4gICAgZnVuY3Rpb24gbWVudUl0ZW1DbGlja2VkKHRhcmdldCkge1xuICAgICAgICB2YXJcbiAgICAgICAgICAgIGFjdGlvbiA9IHRhcmdldC5kYXRhKCdhY3Rpb24nKSxcbiAgICAgICAgICAgIGNoZWNrYm94ID0gdGFyZ2V0LmRhdGEoJ2NoZWNrYm94JyksXG4gICAgICAgICAgICBzZWxlY3RlZDtcbiAgICAgICAgXG4gICAgICAgIGlmIChjaGVja2JveCkge1xuICAgICAgICAgICAgdGFyZ2V0LnRvZ2dsZUNsYXNzKFwic2VsZWN0ZWRcIik7XG4gICAgICAgICAgICBzZWxlY3RlZCA9IHRhcmdldC5oYXNDbGFzcyhcInNlbGVjdGVkXCIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc2VsZWN0ZWQgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgY29udHJvbGxlci5hY3Rpb25QZXJmb3JtZWQoe1xuICAgICAgICAgICAgYWN0aW9uOiBhY3Rpb24sXG4gICAgICAgICAgICBjaGVja2JveDogY2hlY2tib3gsXG4gICAgICAgICAgICBzZWxlY3RlZDogc2VsZWN0ZWRcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIFxuICAgIGZ1bmN0aW9uIHByZXNlbnRTaG9ydGN1dFRleHQoc2hvcnRjdXQpIHtcbiAgICAgICAgc2hvcnRjdXQgPSBzaG9ydGN1dC50b1VwcGVyQ2FzZSgpO1xuICAgICAgICBcbiAgICAgICAgLy8gT25seSBzaG93IHRoZSBmaXJzdCBwb3RlbnRpYWwgc2hvcnRjdXQgb3V0IG9mIHRoZSBjb21tYS1zZXBhcmF0ZWQgbGlzdFxuICAgICAgICBzaG9ydGN1dCA9IHNob3J0Y3V0LnJlcGxhY2UoLygsLispJC8sIFwiXCIpO1xuICAgICAgICBcbiAgICAgICAgLy8gQWx0aG91Z2ggdGhlIGtleWNvZGUgZm9yIHpvb20gaW4gaXMgXCI9XCIsIHdlJ2xsIHByZXNlbnQgaXQgdG8gdGhlIHVzZXIgYXMgXCIrXCJcbiAgICAgICAgc2hvcnRjdXQgPSBzaG9ydGN1dC5yZXBsYWNlKFwiY3RybCs9XCIsIFwiY3RybCsrXCIpO1xuICAgICAgICBzaG9ydGN1dCA9IHNob3J0Y3V0LnJlcGxhY2UoXCLijJgrPVwiLCBcIuKMmCsrXCIpO1xuICAgICAgICBcbiAgICAgICAgaWYgKG1hY1BsYXRmb3JtKSB7XG4gICAgICAgICAgICBzaG9ydGN1dCA9IHNob3J0Y3V0LnJlcGxhY2UoLyhbXitdKVxcKy9nLCBcIiQxXCIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc2hvcnRjdXQgPSBzaG9ydGN1dC5yZXBsYWNlKC8oW14rXSlcXCsvZywgXCIkMSBcIik7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHJldHVybiBzaG9ydGN1dDtcbiAgICB9XG4gICAgXG4gICAgZnVuY3Rpb24gcmVjdXJzZUZpbGxNZW51KG1lbnVFbGVtLCBlbnRyaWVzKSB7XG4gICAgICAgIG1lbnVFbGVtLmFwcGVuZChlbnRyaWVzLm1hcChmdW5jdGlvbihlbnRyeSkge1xuICAgICAgICAgICAgdmFyIFxuICAgICAgICAgICAgICAgIGVudHJ5RWxlbTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKGVudHJ5LmFjdGlvbiAmJiAhY29udHJvbGxlci5pc0FjdGlvblN1cHBvcnRlZChlbnRyeS5hY3Rpb24pKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoZW50cnkuY2hpbGRyZW4pIHtcbiAgICAgICAgICAgICAgICBlbnRyeUVsZW0gPSAkKFxuICAgICAgICAgICAgICAgICAgICAnPGxpIGNsYXNzPVwiZHJvcGRvd25cIj4nXG4gICAgICAgICAgICAgICAgICAgICAgICArICc8YSBocmVmPVwiI1wiIGNsYXNzPVwiZHJvcGRvd24tdG9nZ2xlXCIgZGF0YS10b2dnbGU9XCJkcm9wZG93blwiIHJvbGU9XCJidXR0b25cIiBhcmlhLWhhc3BvcHVwPVwidHJ1ZVwiIGFyaWEtZXhwYW5kZWQ9XCJmYWxzZVwiPicgKyBlbnRyeS5uYW1lICsgJyA8c3BhbiBjbGFzcz1cImNhcmV0XCI+PC9zcGFuPjwvYT4nXG4gICAgICAgICAgICAgICAgICAgICAgICArICc8dWwgY2xhc3M9XCJkcm9wZG93bi1tZW51XCI+J1xuICAgICAgICAgICAgICAgICAgICAgICAgKyAnPC91bD4nXG4gICAgICAgICAgICAgICAgICAgICsgJzwvbGk+J1xuICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICAkKFwiLmRyb3Bkb3duLXRvZ2dsZVwiLCBlbnRyeUVsZW0pLmRyb3Bkb3duKCk7XG5cbiAgICAgICAgICAgICAgICBlbnRyeUVsZW0ub24oXCJzaG93LmJzLmRyb3Bkb3duXCIsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAvKiBJbnN0ZWFkIG9mIEJvb3RzdHJhcCdzIGV4dHJlbWVseSBleHBlbnNpdmUgZGF0YSBBUEksIHdlJ2xsIG9ubHkgbGlzdGVuIGZvciBkaXNtaXNzIGNsaWNrcyBvbiB0aGVcbiAgICAgICAgICAgICAgICAgICAgICogZG9jdW1lbnQgKndoaWxlIHRoZSBtZW51IGlzIG9wZW4hKlxuICAgICAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAgICAgJChkb2N1bWVudCkub25lKFwiY2xpY2tcIiwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZW50cnlFbGVtLmhhc0NsYXNzKFwib3BlblwiKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoXCIuZHJvcGRvd24tdG9nZ2xlXCIsIGVudHJ5RWxlbSkuZHJvcGRvd24oXCJ0b2dnbGVcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHJlY3Vyc2VGaWxsTWVudSgkKFwiLmRyb3Bkb3duLW1lbnVcIiwgZW50cnlFbGVtKSwgZW50cnkuY2hpbGRyZW4pO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChlbnRyeS5uYW1lID09ICctJykge1xuICAgICAgICAgICAgICAgIGVudHJ5RWxlbSA9ICQoJzxsaSByb2xlPVwic2VwYXJhdG9yXCIgY2xhc3M9XCJkaXZpZGVyXCI+PC9saT4nKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgZW50cnlFbGVtID0gJCgnPGxpPjxhIGhyZWY9XCIjXCIgZGF0YS1hY3Rpb249XCInICsgZW50cnkuYWN0aW9uICsgJ1wiPjxzcGFuPicgKyBlbnRyeS5uYW1lICsgJzwvc3Bhbj48L2E+PC9saT4nKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBpZiAoZW50cnkuY2hlY2tib3gpIHtcbiAgICAgICAgICAgICAgICAgICAgJChcImFcIiwgZW50cnlFbGVtKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmRhdGEoXCJjaGVja2JveFwiLCB0cnVlKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnRvZ2dsZUNsYXNzKFwic2VsZWN0ZWRcIiwgISFlbnRyeS5jaGVja2VkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChlbnRyeS50aXRsZSkge1xuICAgICAgICAgICAgICAgIGVudHJ5RWxlbS5hdHRyKCd0aXRsZScsIGVudHJ5LnRpdGxlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKGVudHJ5LnNob3J0Y3V0KSB7XG4gICAgICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgICAgIG1lbnVMaW5rID0gJChcIj4gYVwiLCBlbnRyeUVsZW0pLFxuICAgICAgICAgICAgICAgICAgICBzaG9ydGN1dERlc2MgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic21hbGxcIik7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gUmV3cml0ZSB0aGUgc2hvcnRjdXRzIHRvIE1hYy1zdHlsZVxuICAgICAgICAgICAgICAgIGlmIChtYWNQbGF0Zm9ybSkge1xuICAgICAgICAgICAgICAgICAgICBlbnRyeS5zaG9ydGN1dCA9IGVudHJ5LnNob3J0Y3V0LnJlcGxhY2UoL1NISUZUL2ltLCBcIuKHp1wiKTtcbiAgICAgICAgICAgICAgICAgICAgZW50cnkuc2hvcnRjdXQgPSBlbnRyeS5zaG9ydGN1dC5yZXBsYWNlKC9BTFQvaW0sIFwi4oylXCIpO1xuICAgICAgICAgICAgICAgICAgICBlbnRyeS5zaG9ydGN1dCA9IGVudHJ5LnNob3J0Y3V0LnJlcGxhY2UoL0NUUkwvaW0sIFwi4oyYXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBzaG9ydGN1dERlc2MuY2xhc3NOYW1lID0gXCJjaGlja2VucGFpbnQtc2hvcnRjdXRcIjtcbiAgICAgICAgICAgICAgICBzaG9ydGN1dERlc2MuaW5uZXJIVE1MID0gcHJlc2VudFNob3J0Y3V0VGV4dChlbnRyeS5zaG9ydGN1dCk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgbWVudUxpbmsuYXBwZW5kKHNob3J0Y3V0RGVzYyk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAga2V5KGVudHJ5LnNob3J0Y3V0LCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgbWVudUl0ZW1DbGlja2VkKG1lbnVMaW5rKTtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgcmV0dXJuIGVudHJ5RWxlbTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBcbiAgICB0aGlzLmdldEVsZW1lbnQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIGJhclswXTtcbiAgICB9O1xuICAgIFxuICAgIHJlY3Vyc2VGaWxsTWVudSgkKFwiLm5hdmJhci1uYXZcIiwgYmFyKSwgTUVOVV9FTlRSSUVTKTtcblxuICAgICQoYmFyKS5vbignY2xpY2snLCAnYTpub3QoLmRyb3Bkb3duLXRvZ2dsZSknLCBmdW5jdGlvbihlKSB7XG4gICAgICAgIG1lbnVJdGVtQ2xpY2tlZCgkKHRoaXMpKTtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH0pO1xuICAgIFxuICAgIGZ1bmN0aW9uIG9uUGFsZXR0ZVZpc0NoYW5nZShwYWxldHRlTmFtZSwgc2hvdykge1xuICAgICAgICAvLyBUb2dnbGUgdGhlIHRpY2tib3ggb2YgdGhlIGNvcnJlc3BvbmRpbmcgbWVudSBlbnRyeSB0byBtYXRjaCB0aGUgbmV3IHBhbGV0dGUgdmlzaWJpbGl0eVxuICAgICAgICB2YXJcbiAgICAgICAgICAgIHBhbE1lbnVFbnRyeSA9ICQoJ1tkYXRhLWFjdGlvbj1cXFwiQ1BQYWwnICsgcGFsZXR0ZU5hbWUuc3Vic3RyaW5nKDAsIDEpLnRvVXBwZXJDYXNlKCkgKyBwYWxldHRlTmFtZS5zdWJzdHJpbmcoMSkgKyAnXFxcIl0nLCBiYXIpO1xuICAgICAgICBcbiAgICAgICAgcGFsTWVudUVudHJ5LnRvZ2dsZUNsYXNzKFwic2VsZWN0ZWRcIiwgc2hvdyk7XG4gICAgfVxuXG4gICAgbWFpbkdVSS5nZXRQYWxldHRlTWFuYWdlcigpLm9uKFwicGFsZXR0ZVZpc0NoYW5nZVwiLCBvblBhbGV0dGVWaXNDaGFuZ2UpO1xufSIsIi8qXG4gICAgQ2hpY2tlblBhaW50XG4gICAgXG4gICAgQ2hpY2tlblBhaW50IGlzIGEgdHJhbnNsYXRpb24gb2YgQ2hpYmlQYWludCBmcm9tIEphdmEgdG8gSmF2YVNjcmlwdFxuICAgIGJ5IE5pY2hvbGFzIFNoZXJsb2NrIC8gQ2hpY2tlbiBTbW9vdGhpZS5cbiAgICBcbiAgICBDaGliaVBhaW50IGlzIENvcHlyaWdodCAoYykgMjAwNi0yMDA4IE1hcmMgU2NoZWZlclxuXG4gICAgQ2hpY2tlblBhaW50IGlzIGZyZWUgc29mdHdhcmU6IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vciBtb2RpZnlcbiAgICBpdCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGFzIHB1Ymxpc2hlZCBieVxuICAgIHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb24sIGVpdGhlciB2ZXJzaW9uIDMgb2YgdGhlIExpY2Vuc2UsIG9yXG4gICAgKGF0IHlvdXIgb3B0aW9uKSBhbnkgbGF0ZXIgdmVyc2lvbi5cblxuICAgIENoaWNrZW5QYWludCBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLFxuICAgIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mXG4gICAgTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiAgU2VlIHRoZVxuICAgIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuXG5cbiAgICBZb3Ugc2hvdWxkIGhhdmUgcmVjZWl2ZWQgYSBjb3B5IG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZVxuICAgIGFsb25nIHdpdGggQ2hpY2tlblBhaW50LiBJZiBub3QsIHNlZSA8aHR0cDovL3d3dy5nbnUub3JnL2xpY2Vuc2VzLz4uXG4qL1xuXG5pbXBvcnQgQ1BQYWxldHRlIGZyb20gJy4vQ1BQYWxldHRlJztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gQ1BNaXNjUGFsZXR0ZShjcENvbnRyb2xsZXIpIHtcbiAgICBDUFBhbGV0dGUuY2FsbCh0aGlzLCBjcENvbnRyb2xsZXIsIFwibWlzY1wiLCBcIk1pc2NcIik7XG4gICAgXG4gICAgdmFyIFxuICAgICAgICB0aGF0ID0gdGhpcyxcblxuICAgICAgICBidXR0b25zID0gW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJjaGlja2VucGFpbnQtdG9vbC16b29tLWluXCIsXG4gICAgICAgICAgICAgICAgY29tbWFuZDogXCJDUFpvb21JblwiLFxuICAgICAgICAgICAgICAgIHRvb2xUaXA6IFwiWm9vbSBpblwiXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJjaGlja2VucGFpbnQtdG9vbC16b29tLW91dFwiLFxuICAgICAgICAgICAgICAgIGNvbW1hbmQ6IFwiQ1Bab29tT3V0XCIsXG4gICAgICAgICAgICAgICAgdG9vbFRpcDogXCJab29tIG91dFwiXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJjaGlja2VucGFpbnQtdG9vbC16b29tLTEwMFwiLFxuICAgICAgICAgICAgICAgIGNvbW1hbmQ6IFwiQ1Bab29tMTAwXCIsXG4gICAgICAgICAgICAgICAgdG9vbFRpcDogXCJab29tIDEwMCVcIlxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IFwiY2hpY2tlbnBhaW50LXRvb2wtdW5kb1wiLFxuICAgICAgICAgICAgICAgIGNvbW1hbmQ6IFwiQ1BVbmRvXCIsXG4gICAgICAgICAgICAgICAgdG9vbFRpcDogXCJVbmRvXCJcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBcImNoaWNrZW5wYWludC10b29sLXJlZG9cIixcbiAgICAgICAgICAgICAgICBjb21tYW5kOiBcIkNQUmVkb1wiLFxuICAgICAgICAgICAgICAgIHRvb2xUaXA6IFwiUmVkb1wiXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJjaGlja2VucGFpbnQtdG9vbC1zZW5kXCIsXG4gICAgICAgICAgICAgICAgY29tbWFuZDogXCJDUFNlbmRcIixcbiAgICAgICAgICAgICAgICB0b29sVGlwOiBcIlNhdmUgcGljXCJcbiAgICAgICAgICAgIH0sXG4gICAgICAgIF07XG5cbiAgICBmdW5jdGlvbiBidWlsZEJ1dHRvbnMoKSB7XG4gICAgICAgIHZhclxuICAgICAgICAgICAgYm9keSA9IHRoYXQuZ2V0Qm9keUVsZW1lbnQoKSxcbiAgICAgICAgICAgIGxpc3RFbGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInVsXCIpO1xuICAgICAgICBcbiAgICAgICAgbGlzdEVsZW0uY2xhc3NOYW1lID0gXCJjaGlja2VucGFpbnQtbWlzYy10b29scyBsaXN0LXVuc3R5bGVkXCI7XG4gICAgICAgIFxuICAgICAgICBmb3IgKHZhciBpIGluIGJ1dHRvbnMpIHtcbiAgICAgICAgICAgIHZhciBcbiAgICAgICAgICAgICAgICBidXR0b24gPSBidXR0b25zW2ldLFxuICAgICAgICAgICAgICAgIGJ1dHRvbkVsZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGlcIik7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGJ1dHRvbkVsZW0uY2xhc3NOYW1lID0gXCJjaGlja2VucGFpbnQtdG9vbGJhci1idXR0b24gXCIgKyBidXR0b24uY2xhc3NOYW1lO1xuICAgICAgICAgICAgYnV0dG9uRWxlbS5zZXRBdHRyaWJ1dGUoXCJkYXRhLWJ1dHRvbkluZGV4XCIsIGkpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBsaXN0RWxlbS5hcHBlbmRDaGlsZChidXR0b25FbGVtKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgbGlzdEVsZW0uYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICBpZiAoZS50YXJnZXQgJiYgZS50YXJnZXQubm9kZU5hbWUgPT0gXCJMSVwiKSB7XG4gICAgICAgICAgICAgICAgJChlLnRhcmdldCkuYWRkQ2xhc3MoXCJzZWxlY3RlZFwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICBsaXN0RWxlbS5hZGRFdmVudExpc3RlbmVyKFwibW91c2V1cFwiLCBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICBpZiAoZS50YXJnZXQgJiYgZS50YXJnZXQubm9kZU5hbWUgPT0gXCJMSVwiKSB7XG4gICAgICAgICAgICAgICAgJChlLnRhcmdldCkucmVtb3ZlQ2xhc3MoXCJzZWxlY3RlZFwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgbGlzdEVsZW0uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgIGlmIChlLnRhcmdldCAmJiBlLnRhcmdldC5ub2RlTmFtZSA9PSBcIkxJXCIpIHtcbiAgICAgICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICAgICAgYnV0dG9uID0gYnV0dG9uc1twYXJzZUludChlLnRhcmdldC5nZXRBdHRyaWJ1dGUoXCJkYXRhLWJ1dHRvbkluZGV4XCIpLCAxMCldO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGNwQ29udHJvbGxlci5hY3Rpb25QZXJmb3JtZWQoe2FjdGlvbjogYnV0dG9uLmNvbW1hbmR9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICBib2R5LmFwcGVuZENoaWxkKGxpc3RFbGVtKTtcbiAgICB9XG4gICAgXG4gICAgYnVpbGRCdXR0b25zKCk7XG59XG5cbkNQTWlzY1BhbGV0dGUucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShDUFBhbGV0dGUucHJvdG90eXBlKTtcbkNQTWlzY1BhbGV0dGUucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gQ1BNaXNjUGFsZXR0ZTtcbiIsIi8qXG4gICAgQ2hpY2tlblBhaW50XG4gICAgXG4gICAgQ2hpY2tlblBhaW50IGlzIGEgdHJhbnNsYXRpb24gb2YgQ2hpYmlQYWludCBmcm9tIEphdmEgdG8gSmF2YVNjcmlwdFxuICAgIGJ5IE5pY2hvbGFzIFNoZXJsb2NrIC8gQ2hpY2tlbiBTbW9vdGhpZS5cbiAgICBcbiAgICBDaGliaVBhaW50IGlzIENvcHlyaWdodCAoYykgMjAwNi0yMDA4IE1hcmMgU2NoZWZlclxuXG4gICAgQ2hpY2tlblBhaW50IGlzIGZyZWUgc29mdHdhcmU6IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vciBtb2RpZnlcbiAgICBpdCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGFzIHB1Ymxpc2hlZCBieVxuICAgIHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb24sIGVpdGhlciB2ZXJzaW9uIDMgb2YgdGhlIExpY2Vuc2UsIG9yXG4gICAgKGF0IHlvdXIgb3B0aW9uKSBhbnkgbGF0ZXIgdmVyc2lvbi5cblxuICAgIENoaWNrZW5QYWludCBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLFxuICAgIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mXG4gICAgTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiAgU2VlIHRoZVxuICAgIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuXG5cbiAgICBZb3Ugc2hvdWxkIGhhdmUgcmVjZWl2ZWQgYSBjb3B5IG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZVxuICAgIGFsb25nIHdpdGggQ2hpY2tlblBhaW50LiBJZiBub3QsIHNlZSA8aHR0cDovL3d3dy5nbnUub3JnL2xpY2Vuc2VzLz4uXG4qL1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBDUFBhbGV0dGUoY3BDb250cm9sbGVyLCBjbGFzc05hbWUsIHRpdGxlLCByZXNpemVWZXJ0KSB7XG4gICAgdGhpcy50aXRsZSA9IHRpdGxlO1xuICAgIHRoaXMubmFtZSA9IGNsYXNzTmFtZTtcbiAgICB0aGlzLnJlc2l6ZVZlcnQgPSByZXNpemVWZXJ0IHx8IGZhbHNlO1xuICAgIFxuICAgIHZhclxuICAgICAgICBjb250YWluZXJFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSxcbiAgICAgICAgaGVhZEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLFxuICAgICAgICBjbG9zZUJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIiksXG4gICAgICAgIGJvZHlFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSxcbiAgICAgICAgXG4gICAgICAgIHZlcnRIYW5kbGUgPSBudWxsLFxuICAgICAgICBcbiAgICAgICAgZHJhZ09mZnNldCxcbiAgICAgICAgXG4gICAgICAgIHRoYXQgPSB0aGlzO1xuICAgIFxuICAgIHRoaXMuZ2V0RWxlbWVudCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gY29udGFpbmVyRWxlbWVudDtcbiAgICB9O1xuICAgIFxuICAgIHRoaXMuZ2V0Qm9keUVsZW1lbnQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIGJvZHlFbGVtZW50O1xuICAgIH07XG4gICAgXG4gICAgdGhpcy5nZXRXaWR0aCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gJChjb250YWluZXJFbGVtZW50KS5vdXRlcldpZHRoKCk7XG4gICAgfTtcbiAgICBcbiAgICB0aGlzLmdldEhlaWdodCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gJChjb250YWluZXJFbGVtZW50KS5vdXRlckhlaWdodCgpO1xuICAgIH07XG4gICAgXG4gICAgdGhpcy5nZXRYID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBwYXJzZUludChjb250YWluZXJFbGVtZW50LnN0eWxlLmxlZnQsIDEwKSB8fCAwO1xuICAgIH07XG4gICAgXG4gICAgdGhpcy5nZXRZID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBwYXJzZUludChjb250YWluZXJFbGVtZW50LnN0eWxlLnRvcCwgMTApIHx8IDA7XG4gICAgfTtcbiAgICBcbiAgICB0aGlzLnNldExvY2F0aW9uID0gZnVuY3Rpb24oeCwgeSkge1xuICAgICAgICBjb250YWluZXJFbGVtZW50LnN0eWxlLmxlZnQgPSB4ICsgXCJweFwiO1xuICAgICAgICBjb250YWluZXJFbGVtZW50LnN0eWxlLnRvcCA9IHkgKyBcInB4XCI7XG4gICAgfTtcbiAgICBcbiAgICB0aGlzLnNldFdpZHRoID0gZnVuY3Rpb24od2lkdGgpIHtcbiAgICAgICAgY29udGFpbmVyRWxlbWVudC5zdHlsZS53aWR0aCA9IHdpZHRoICsgXCJweFwiO1xuICAgIH07XG5cbiAgICB0aGlzLnNldEhlaWdodCA9IGZ1bmN0aW9uKGhlaWdodCkge1xuICAgICAgICBjb250YWluZXJFbGVtZW50LnN0eWxlLmhlaWdodCA9IGhlaWdodCArIFwicHhcIjtcbiAgICB9O1xuICAgIFxuICAgIHRoaXMuc2V0U2l6ZSA9IGZ1bmN0aW9uKHdpZHRoLCBoZWlnaHQpIHtcbiAgICAgICAgdGhpcy5zZXRXaWR0aCh3aWR0aCk7XG4gICAgICAgIHRoaXMuc2V0SGVpZ2h0KGhlaWdodCk7XG4gICAgfTtcbiAgICBcbiAgICBmdW5jdGlvbiBtb3VzZURyYWcoZSkge1xuICAgICAgICB0aGF0LnNldExvY2F0aW9uKGUucGFnZVggLSBkcmFnT2Zmc2V0LngsIGUucGFnZVkgLSBkcmFnT2Zmc2V0LnkpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIG1vdXNlRHJhZ1JlbGVhc2UoZSkge1xuICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLCBtb3VzZURyYWcpO1xuICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNldXBcIiwgbW91c2VEcmFnUmVsZWFzZSk7XG4gICAgfVxuICAgIFxuICAgIGZ1bmN0aW9uIHZlcnRIYW5kbGVEcmFnKGUpIHtcbiAgICAgICAgdGhhdC5zZXRIZWlnaHQoZS5wYWdlWSAtICQoY29udGFpbmVyRWxlbWVudCkub2Zmc2V0KCkudG9wKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiB2ZXJ0SGFuZGxlUmVsZWFzZShlKSB7XG4gICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsIHZlcnRIYW5kbGVEcmFnKTtcbiAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsIHZlcnRIYW5kbGVSZWxlYXNlKTtcbiAgICB9XG4gICAgXG4gICAgZnVuY3Rpb24gdmVydEhhbmRsZU1vdXNlRG93bihlKSB7XG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsIHZlcnRIYW5kbGVEcmFnKTtcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsIHZlcnRIYW5kbGVSZWxlYXNlKTtcbiAgICB9XG4gICAgXG4gICAgZnVuY3Rpb24gYWRkVmVydFJlc2l6ZUhhbmRsZSgpIHtcbiAgICAgICAgdmVydEhhbmRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIFxuICAgICAgICB2ZXJ0SGFuZGxlLmNsYXNzTmFtZSA9IFwiY2hpY2tlbnBhaW50LXJlc2l6ZS1oYW5kbGUtdmVydFwiO1xuICAgICAgICBcbiAgICAgICAgdmVydEhhbmRsZS5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIHZlcnRIYW5kbGVNb3VzZURvd24pO1xuICAgICAgICBcbiAgICAgICAgY29udGFpbmVyRWxlbWVudC5hcHBlbmRDaGlsZCh2ZXJ0SGFuZGxlKTtcbiAgICB9XG5cbiAgICBjbG9zZUJ1dHRvbi50eXBlID0gXCJidXR0b25cIjtcbiAgICBjbG9zZUJ1dHRvbi5jbGFzc05hbWUgPSBcImNsb3NlXCI7XG4gICAgY2xvc2VCdXR0b24uaW5uZXJIVE1MID0gXCImdGltZXM7XCI7XG4gICAgXG4gICAgY29udGFpbmVyRWxlbWVudC5jbGFzc05hbWUgPSBcImNoaWNrZW5wYWludC1wYWxldHRlIGNoaWNrZW5wYWludC1wYWxldHRlLVwiICsgY2xhc3NOYW1lO1xuICAgIFxuICAgIGhlYWRFbGVtZW50LmNsYXNzTmFtZSA9IFwiY2hpY2tlbnBhaW50LXBhbGV0dGUtaGVhZFwiO1xuXG4gICAgdmFyXG4gICAgICAgIGhlYWRUaXRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJoNFwiKTtcbiAgICBcbiAgICBoZWFkVGl0bGUuY2xhc3NOYW1lID0gJ21vZGFsLXRpdGxlJztcbiAgICBoZWFkVGl0bGUuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUodGhpcy50aXRsZSkpXG4gICAgXG4gICAgaGVhZEVsZW1lbnQuYXBwZW5kQ2hpbGQoY2xvc2VCdXR0b24pO1xuICAgIGhlYWRFbGVtZW50LmFwcGVuZENoaWxkKGhlYWRUaXRsZSk7XG4gICAgXG4gICAgYm9keUVsZW1lbnQuY2xhc3NOYW1lID0gXCJjaGlja2VucGFpbnQtcGFsZXR0ZS1ib2R5XCI7XG4gICAgXG4gICAgY29udGFpbmVyRWxlbWVudC5hcHBlbmRDaGlsZChoZWFkRWxlbWVudCk7XG4gICAgY29udGFpbmVyRWxlbWVudC5hcHBlbmRDaGlsZChib2R5RWxlbWVudCk7XG5cbiAgICBpZiAodGhpcy5yZXNpemVWZXJ0KSB7XG4gICAgICAgIGFkZFZlcnRSZXNpemVIYW5kbGUoKTtcbiAgICB9XG5cbiAgICBoZWFkRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgaWYgKGUuYnV0dG9uID09IDApIHsvKiBMZWZ0ICovXG4gICAgICAgICAgICBpZiAoZS50YXJnZXQubm9kZU5hbWUgPT0gXCJCVVRUT05cIikge1xuICAgICAgICAgICAgICAgIHRoYXQuZW1pdEV2ZW50KFwicGFsZXR0ZVZpc0NoYW5nZVwiLCBbdGhhdCwgZmFsc2VdKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIiwgbW91c2VEcmFnKTtcbiAgICAgICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNldXBcIiwgbW91c2VEcmFnUmVsZWFzZSk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgZHJhZ09mZnNldCA9IHt4OiBlLnBhZ2VYIC0gJChjb250YWluZXJFbGVtZW50KS5wb3NpdGlvbigpLmxlZnQsIHk6IGUucGFnZVkgLSAkKGNvbnRhaW5lckVsZW1lbnQpLnBvc2l0aW9uKCkudG9wfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pO1xufVxuXG5DUFBhbGV0dGUucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShFdmVudEVtaXR0ZXIucHJvdG90eXBlKTtcbkNQUGFsZXR0ZS5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBFdmVudEVtaXR0ZXI7IiwiLypcbiAgICBDaGlja2VuUGFpbnRcbiAgICBcbiAgICBDaGlja2VuUGFpbnQgaXMgYSB0cmFuc2xhdGlvbiBvZiBDaGliaVBhaW50IGZyb20gSmF2YSB0byBKYXZhU2NyaXB0XG4gICAgYnkgTmljaG9sYXMgU2hlcmxvY2sgLyBDaGlja2VuIFNtb290aGllLlxuICAgIFxuICAgIENoaWJpUGFpbnQgaXMgQ29weXJpZ2h0IChjKSAyMDA2LTIwMDggTWFyYyBTY2hlZmVyXG5cbiAgICBDaGlja2VuUGFpbnQgaXMgZnJlZSBzb2Z0d2FyZTogeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yIG1vZGlmeVxuICAgIGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgYXMgcHVibGlzaGVkIGJ5XG4gICAgdGhlIEZyZWUgU29mdHdhcmUgRm91bmRhdGlvbiwgZWl0aGVyIHZlcnNpb24gMyBvZiB0aGUgTGljZW5zZSwgb3JcbiAgICAoYXQgeW91ciBvcHRpb24pIGFueSBsYXRlciB2ZXJzaW9uLlxuXG4gICAgQ2hpY2tlblBhaW50IGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsXG4gICAgYnV0IFdJVEhPVVQgQU5ZIFdBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2ZcbiAgICBNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuICBTZWUgdGhlXG4gICAgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy5cblxuICAgIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXG4gICAgYWxvbmcgd2l0aCBDaGlja2VuUGFpbnQuIElmIG5vdCwgc2VlIDxodHRwOi8vd3d3LmdudS5vcmcvbGljZW5zZXMvPi5cbiovXG5cbmltcG9ydCBDUFRvb2xQYWxldHRlIGZyb20gXCIuL0NQVG9vbFBhbGV0dGVcIjtcbmltcG9ydCBDUE1pc2NQYWxldHRlIGZyb20gXCIuL0NQTWlzY1BhbGV0dGVcIjtcbmltcG9ydCBDUFN0cm9rZVBhbGV0dGUgZnJvbSBcIi4vQ1BTdHJva2VQYWxldHRlXCI7XG5pbXBvcnQgQ1BDb2xvclBhbGV0dGUgZnJvbSBcIi4vQ1BDb2xvclBhbGV0dGVcIjtcbmltcG9ydCBDUEJydXNoUGFsZXR0ZSBmcm9tIFwiLi9DUEJydXNoUGFsZXR0ZVwiO1xuaW1wb3J0IENQTGF5ZXJzUGFsZXR0ZSBmcm9tIFwiLi9DUExheWVyc1BhbGV0dGVcIjtcbmltcG9ydCBDUFRleHR1cmVQYWxldHRlIGZyb20gXCIuL0NQVGV4dHVyZVBhbGV0dGVcIjtcbmltcG9ydCBDUFN3YXRjaGVzUGFsZXR0ZSBmcm9tIFwiLi9DUFN3YXRjaGVzUGFsZXR0ZVwiO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBDUFBhbGV0dGVNYW5hZ2VyKGNwQ29udHJvbGxlcikge1xuICAgIHZhclxuICAgICAgICBwYWxldHRlcyA9IHtcbiAgICAgICAgICAgIHRvb2w6IG5ldyBDUFRvb2xQYWxldHRlKGNwQ29udHJvbGxlciksXG4gICAgICAgICAgICBtaXNjOiBuZXcgQ1BNaXNjUGFsZXR0ZShjcENvbnRyb2xsZXIpLFxuICAgICAgICAgICAgc3Ryb2tlOiBuZXcgQ1BTdHJva2VQYWxldHRlKGNwQ29udHJvbGxlciksXG4gICAgICAgICAgICBjb2xvcjogbmV3IENQQ29sb3JQYWxldHRlKGNwQ29udHJvbGxlciksXG4gICAgICAgICAgICBicnVzaDogbmV3IENQQnJ1c2hQYWxldHRlKGNwQ29udHJvbGxlciksXG4gICAgICAgICAgICBsYXllcnM6IG5ldyBDUExheWVyc1BhbGV0dGUoY3BDb250cm9sbGVyKSxcbiAgICAgICAgICAgIHRleHR1cmVzOiBuZXcgQ1BUZXh0dXJlUGFsZXR0ZShjcENvbnRyb2xsZXIpLFxuICAgICAgICAgICAgc3dhdGNoZXM6IG5ldyBDUFN3YXRjaGVzUGFsZXR0ZShjcENvbnRyb2xsZXIpXG4gICAgICAgIH0sXG4gICAgICAgIFxuICAgICAgICBwYWxldHRlRnJhbWVzID0gW10sXG4gICAgICAgIGhpZGRlbkZyYW1lcyA9IFtdLFxuICAgICAgICBcbiAgICAgICAgcGFyZW50RWxlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksXG4gICAgICAgIFxuICAgICAgICB0aGF0ID0gdGhpcztcbiAgICBcbiAgICB0aGlzLnBhbGV0dGVzID0gcGFsZXR0ZXM7XG5cbiAgICBmdW5jdGlvbiBzaG93UGFsZXR0ZShwYWxldHRlLCBzaG93KSB7XG4gICAgICAgIHZhclxuICAgICAgICAgICAgcGFsRWxlbWVudCA9IHBhbGV0dGUuZ2V0RWxlbWVudCgpO1xuICAgICAgICBcbiAgICAgICAgaWYgKHNob3cpIHtcbiAgICAgICAgICAgIHBhcmVudEVsZW0uYXBwZW5kQ2hpbGQocGFsRWxlbWVudCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBwYXJlbnRFbGVtLnJlbW92ZUNoaWxkKHBhbEVsZW1lbnQpO1xuICAgICAgICB9XG4gICAgICAgIHRoYXQuZW1pdEV2ZW50KFwicGFsZXR0ZVZpc0NoYW5nZVwiLCBbcGFsZXR0ZS5uYW1lLCBzaG93XSk7XG5cbiAgICAgICAgLy8gRklYTUU6IGZvY3VzIGhhY2tcbiAgICAgICAgLy8gY29udHJvbGxlci5jYW52YXMuZ3JhYkZvY3VzKCk7IFRPRE9cbiAgICB9XG4gICAgXG4gICAgdGhpcy5zaG93UGFsZXR0ZUJ5TmFtZSA9IGZ1bmN0aW9uKHBhbGV0dGVOYW1lLCBzaG93KSB7XG4gICAgICAgIHZhciBcbiAgICAgICAgICAgIHBhbGV0dGUgPSBwYWxldHRlc1twYWxldHRlTmFtZV07XG4gICAgICAgIFxuICAgICAgICBpZiAocGFsZXR0ZSkge1xuICAgICAgICAgICAgc2hvd1BhbGV0dGUocGFsZXR0ZSwgc2hvdyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLnRvZ2dsZVBhbGV0dGVzID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmIChoaWRkZW5GcmFtZXMubGVuZ3RoID09IDApIHtcbiAgICAgICAgICAgICQoXCI+IC5jaGlja2VucGFpbnQtcGFsZXR0ZVwiLCBwYXJlbnRFbGVtKS5lYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHRoYXQuc2hvd1BhbGV0dGVCeU5hbWUodGhpcy5nZXRBdHRyaWJ1dGUoXCJkYXRhLXBhbGV0dGVOYW1lXCIpLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgaGlkZGVuRnJhbWVzLnB1c2godGhpcyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaGlkZGVuRnJhbWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIFxuICAgICAgICAgICAgICAgICAgICBmcmFtZSA9IGhpZGRlbkZyYW1lc1tpXTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB0aGF0LnNob3dQYWxldHRlQnlOYW1lKGZyYW1lLmdldEF0dHJpYnV0ZShcImRhdGEtcGFsZXR0ZU5hbWVcIiksIHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaGlkZGVuRnJhbWVzID0gW107XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogUG9wIHBhbGV0dGVzIHRoYXQgYXJlIGN1cnJlbnRseSBvdXRzaWRlIHRoZSB2aXNpYmxlIGFyZWEgYmFjayBpbnRvIHZpZXcuXG4gICAgICovXG4gICAgdGhpcy5jb25zdHJhaW5QYWxldHRlcyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXJcbiAgICAgICAgICAgIHdpbmRvd1dpZHRoID0gJChwYXJlbnRFbGVtKS5wYXJlbnRzKFwiLmNoaWNrZW5wYWludC1tYWluLXNlY3Rpb25cIikud2lkdGgoKSxcbiAgICAgICAgICAgIHdpbmRvd0hlaWdodCA9ICQocGFyZW50RWxlbSkucGFyZW50cyhcIi5jaGlja2VucGFpbnQtbWFpbi1zZWN0aW9uXCIpLmhlaWdodCgpO1xuXG4gICAgICAgIGZvciAodmFyIGkgaW4gcGFsZXR0ZXMpIHtcbiAgICAgICAgICAgIHZhciBwYWxldHRlID0gcGFsZXR0ZXNbaV07XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8qIE1vdmUgcGFsZXR0ZXMgdGhhdCBhcmUgbW9yZSB0aGFuIGhhbGYgb3V0IG9mIHRoZSBmcmFtZSBiYWNrIGludG8gaXQgKi9cbiAgICAgICAgICAgIGlmIChwYWxldHRlLmdldFgoKSArIHBhbGV0dGUuZ2V0V2lkdGgoKSAvIDIgPiB3aW5kb3dXaWR0aCkge1xuICAgICAgICAgICAgICAgIHBhbGV0dGUuc2V0TG9jYXRpb24od2luZG93V2lkdGggLSBwYWxldHRlLmdldFdpZHRoKCksIHBhbGV0dGUuZ2V0WSgpKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHBhbGV0dGUuZ2V0WSgpICsgcGFsZXR0ZS5nZXRIZWlnaHQoKSAvIDIgPiB3aW5kb3dIZWlnaHQpIHtcbiAgICAgICAgICAgICAgICBwYWxldHRlLnNldExvY2F0aW9uKHBhbGV0dGUuZ2V0WCgpLCB3aW5kb3dIZWlnaHQgLSBwYWxldHRlLmdldEhlaWdodCgpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy9Nb3ZlIHNtYWxsIHBhbGV0dGVzIHRvIHRoZSBmcm9udCBzbyB0aGF0IHRoZXkgYXJlbid0IGNvbXBsZXRlbHkgaGlkZGVuXG4gICAgICAgIC8vcGFsZXR0ZXMuc3dhdGNoZXMubW92ZVRvRnJvbnQoKTtcbiAgICAgICAgXG4gICAgICAgIC8vU3BlY2lhbCBoYW5kbGluZyBmb3IgdGhlIHN3YXRjaGVzIHBhbGV0dGUgYmVpbmcgdW5kZXIgdGhlIGJydXNoIHBhbGV0dGU6XG4gICAgICAgIHZhclxuICAgICAgICAgICAgd2lkdGhUb1NwYXJlID0gd2luZG93V2lkdGggLSBwYWxldHRlcy50b29sLmdldFdpZHRoKCkgLSBwYWxldHRlcy5taXNjLmdldFdpZHRoKCkgLSBwYWxldHRlcy5zdHJva2UuZ2V0V2lkdGgoKSAtIHBhbGV0dGVzLmNvbG9yLmdldFdpZHRoKCkgLSBwYWxldHRlcy5icnVzaC5nZXRXaWR0aCgpIC0gMTUgPiAwO1xuXG4gICAgICAgIGlmIChwYWxldHRlcy5zd2F0Y2hlcy5nZXRYKCkgKyBwYWxldHRlcy5zd2F0Y2hlcy5nZXRXaWR0aCgpID09ICBwYWxldHRlcy5icnVzaC5nZXRYKCkgKyBwYWxldHRlcy5icnVzaC5nZXRXaWR0aCgpICYmXG4gICAgICAgICAgICAgICAgTWF0aC5hYnMocGFsZXR0ZXMuc3dhdGNoZXMuZ2V0WSgpIC0gcGFsZXR0ZXMuYnJ1c2guZ2V0WSgpKSA8IDIwKSB7XG4gICAgICAgICAgICBwYWxldHRlcy5zd2F0Y2hlcy5zZXRMb2NhdGlvbihwYWxldHRlcy5icnVzaC5nZXRYKCkgLSBwYWxldHRlcy5zd2F0Y2hlcy5nZXRXaWR0aCgpIC0gKHdpZHRoVG9TcGFyZSA/IDUgOiAxKSwgMCk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vU3BlY2lhbCBoYW5kbGluZyBmb3IgbGF5ZXJzIHBhbGV0dGUgYmVpbmcgdG9vIGRhbW4gdGFsbDpcbiAgICAgICAgaWYgKHBhbGV0dGVzLmxheWVycy5nZXRZKCkgKyBwYWxldHRlcy5sYXllcnMuZ2V0SGVpZ2h0KCkgPiB3aW5kb3dIZWlnaHQpIHtcbiAgICAgICAgICAgIHBhbGV0dGVzLmxheWVycy5zZXRIZWlnaHQoTWF0aC5tYXgod2luZG93SGVpZ2h0IC0gcGFsZXR0ZXMubGF5ZXJzLmdldFkoKSwgMjAwKSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFxuICAgIC8qKlxuICAgICAqIFJlYXJyYW5nZSB0aGUgcGFsZXR0ZXMgZnJvbSBzY3JhdGNoIGludG8gYSB1c2VmdWwgYXJyYW5nZW1lbnQuXG4gICAgICovXG4gICAgdGhpcy5hcnJhbmdlUGFsZXR0ZXMgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyXG4gICAgICAgICAgICB3aW5kb3dXaWR0aCA9ICQocGFyZW50RWxlbSkucGFyZW50cyhcIi5jaGlja2VucGFpbnQtbWFpbi1zZWN0aW9uXCIpLndpZHRoKCksXG4gICAgICAgICAgICB3aW5kb3dIZWlnaHQgPSAkKHBhcmVudEVsZW0pLnBhcmVudHMoXCIuY2hpY2tlbnBhaW50LW1haW4tc2VjdGlvblwiKS5oZWlnaHQoKSxcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaGF2ZVdpZHRoVG9TcGFyZSA9IHdpbmRvd1dpZHRoIC0gcGFsZXR0ZXMudG9vbC5nZXRXaWR0aCgpIC0gcGFsZXR0ZXMubWlzYy5nZXRXaWR0aCgpIC0gcGFsZXR0ZXMuc3Ryb2tlLmdldFdpZHRoKCkgLSBwYWxldHRlcy5jb2xvci5nZXRXaWR0aCgpIC0gcGFsZXR0ZXMuYnJ1c2guZ2V0V2lkdGgoKSAtIDE1ID4gMDtcblxuICAgICAgICBwYWxldHRlcy5icnVzaC5zZXRMb2NhdGlvbih3aW5kb3dXaWR0aCAtIHBhbGV0dGVzLmJydXNoLmdldFdpZHRoKCkgLSAxNSwgMCk7XG5cbiAgICAgICAgdmFyIFxuICAgICAgICAgICAgYm90dG9tT2ZCcnVzaCA9IHBhbGV0dGVzLmJydXNoLmdldFkoKSArIHBhbGV0dGVzLmJydXNoLmdldEhlaWdodCgpO1xuXG4gICAgICAgIHBhbGV0dGVzLmxheWVycy5zZXRMb2NhdGlvbihwYWxldHRlcy5icnVzaC5nZXRYKCksIHdpbmRvd0hlaWdodCAtIGJvdHRvbU9mQnJ1c2ggPiAzMDAgPyBib3R0b21PZkJydXNoICsgMiA6IGJvdHRvbU9mQnJ1c2gpO1xuICAgICAgICBwYWxldHRlcy5sYXllcnMuc2V0U2l6ZShwYWxldHRlcy5icnVzaC5nZXRXaWR0aCgpLCB3aW5kb3dIZWlnaHQgLSBwYWxldHRlcy5sYXllcnMuZ2V0WSgpKTtcblxuICAgICAgICBwYWxldHRlcy50b29sLnNldExvY2F0aW9uKDAsIDApO1xuICAgICAgICBcbiAgICAgICAgcGFsZXR0ZXMubWlzYy5zZXRMb2NhdGlvbihwYWxldHRlcy50b29sLmdldFgoKSArIHBhbGV0dGVzLnRvb2wuZ2V0V2lkdGgoKSArIChoYXZlV2lkdGhUb1NwYXJlID8gNSA6IDEpLCAwKTtcbiAgICAgICAgXG4gICAgICAgIGlmIChoYXZlV2lkdGhUb1NwYXJlKSB7XG4gICAgICAgICAgICBwYWxldHRlcy5zdHJva2Uuc2V0TG9jYXRpb24ocGFsZXR0ZXMubWlzYy5nZXRYKCkgKyBwYWxldHRlcy5taXNjLmdldFdpZHRoKCkgKyAoaGF2ZVdpZHRoVG9TcGFyZSA/IDUgOiAxKSwgMCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBwYWxldHRlcy5zdHJva2Uuc2V0TG9jYXRpb24ocGFsZXR0ZXMubWlzYy5nZXRYKCksIHBhbGV0dGVzLm1pc2MuZ2V0WSgpICsgcGFsZXR0ZXMubWlzYy5nZXRIZWlnaHQoKSArIDEpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBwYWxldHRlcy5zd2F0Y2hlcy5zZXRMb2NhdGlvbihwYWxldHRlcy5icnVzaC5nZXRYKCkgLSBwYWxldHRlcy5zd2F0Y2hlcy5nZXRXaWR0aCgpIC0gKGhhdmVXaWR0aFRvU3BhcmUgPyA1IDogMSksIDApO1xuXG4gICAgICAgIHBhbGV0dGVzLnRleHR1cmVzLnNldFdpZHRoKE1hdGgubWluKHBhbGV0dGVzLmxheWVycy5nZXRYKCkgLSBwYWxldHRlcy50ZXh0dXJlcy5nZXRYKCksIDQ5MCkpO1xuICAgICAgICBwYWxldHRlcy50ZXh0dXJlcy5zZXRMb2NhdGlvbihwYWxldHRlcy5jb2xvci5nZXRYKCkgKyBwYWxldHRlcy5jb2xvci5nZXRXaWR0aCgpICsgNCwgd2luZG93SGVpZ2h0IC0gcGFsZXR0ZXMudGV4dHVyZXMuZ2V0SGVpZ2h0KCkpO1xuXG4gICAgICAgIHBhbGV0dGVzLmNvbG9yLnNldExvY2F0aW9uKDAsIE1hdGgubWF4KHBhbGV0dGVzLnRvb2wuZ2V0WSgpICsgcGFsZXR0ZXMudG9vbC5nZXRIZWlnaHQoKSwgd2luZG93SGVpZ2h0IC0gcGFsZXR0ZXMuY29sb3IuZ2V0SGVpZ2h0KCkpKTtcbiAgICB9O1xuICAgIFxuICAgIHRoaXMuZ2V0RWxlbWVudCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gcGFyZW50RWxlbTtcbiAgICB9O1xuXG4gICAgcGFyZW50RWxlbS5jbGFzc05hbWUgPSBcImNoaWNrZW5wYWludC1wYWxldHRlc1wiO1xuXG4gICAgZm9yICh2YXIgcGFsZXR0ZU5hbWUgaW4gcGFsZXR0ZXMpIHtcbiAgICAgICAgdmFyIFxuICAgICAgICAgICAgcGFsZXR0ZSA9IHBhbGV0dGVzW3BhbGV0dGVOYW1lXSxcbiAgICAgICAgICAgIHBhbEVsZW1lbnQgPSBwYWxldHRlLmdldEVsZW1lbnQoKTtcbiAgICAgICAgXG4gICAgICAgIHBhbGV0dGUub24oXCJwYWxldHRlVmlzQ2hhbmdlXCIsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgc2hvd1BhbGV0dGUodGhpcywgZmFsc2UpO1xuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIHBhbEVsZW1lbnQuc2V0QXR0cmlidXRlKFwiZGF0YS1wYWxldHRlTmFtZVwiLCBwYWxldHRlTmFtZSk7XG4gICAgICAgIHBhbGV0dGVGcmFtZXMucHVzaChwYWxFbGVtZW50KTtcbiAgICB9XG4gICAgXG4gICAgZm9yICh2YXIgcGFsZXR0ZU5hbWUgaW4gcGFsZXR0ZXMpIHtcbiAgICAgICAgdmFyIFxuICAgICAgICAgICAgcGFsRWxlbWVudCA9IHBhbGV0dGVzW3BhbGV0dGVOYW1lXS5nZXRFbGVtZW50KCk7XG5cbiAgICAgICAgcGFyZW50RWxlbS5hcHBlbmRDaGlsZChwYWxFbGVtZW50KTtcbiAgICB9XG59XG5cbkNQUGFsZXR0ZU1hbmFnZXIucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShFdmVudEVtaXR0ZXIucHJvdG90eXBlKTtcbkNQUGFsZXR0ZU1hbmFnZXIucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gQ1BQYWxldHRlTWFuYWdlcjsiLCIvKlxuICAgIENoaWNrZW5QYWludFxuICAgIFxuICAgIENoaWNrZW5QYWludCBpcyBhIHRyYW5zbGF0aW9uIG9mIENoaWJpUGFpbnQgZnJvbSBKYXZhIHRvIEphdmFTY3JpcHRcbiAgICBieSBOaWNob2xhcyBTaGVybG9jayAvIENoaWNrZW4gU21vb3RoaWUuXG4gICAgXG4gICAgQ2hpYmlQYWludCBpcyBDb3B5cmlnaHQgKGMpIDIwMDYtMjAwOCBNYXJjIFNjaGVmZXJcblxuICAgIENoaWNrZW5QYWludCBpcyBmcmVlIHNvZnR3YXJlOiB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3IgbW9kaWZ5XG4gICAgaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBhcyBwdWJsaXNoZWQgYnlcbiAgICB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uLCBlaXRoZXIgdmVyc2lvbiAzIG9mIHRoZSBMaWNlbnNlLCBvclxuICAgIChhdCB5b3VyIG9wdGlvbikgYW55IGxhdGVyIHZlcnNpb24uXG5cbiAgICBDaGlja2VuUGFpbnQgaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCxcbiAgICBidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZlxuICAgIE1FUkNIQU5UQUJJTElUWSBvciBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS4gIFNlZSB0aGVcbiAgICBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9yZSBkZXRhaWxzLlxuXG4gICAgWW91IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2VcbiAgICBhbG9uZyB3aXRoIENoaWNrZW5QYWludC4gSWYgbm90LCBzZWUgPGh0dHA6Ly93d3cuZ251Lm9yZy9saWNlbnNlcy8+LlxuKi9cblxuLyoqXG4gKiBAcGFyYW0gdmVydGljYWwgYm9vbGVhblxuICovXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBDUFNjcm9sbGJhcih2ZXJ0aWNhbCkge1xuICAgIHZhclxuICAgICAgICBiYXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLFxuICAgICAgICBoYW5kbGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLFxuICAgICAgICBoYW5kbGVJbm5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksXG4gICAgICAgIFxuICAgICAgICBtaW4gPSAwLCBtYXggPSAxLCBvZmZzZXQgPSAwLCB2aXNpYmxlUmFuZ2UgPSAxLFxuICAgICAgICBcbiAgICAgICAgYmxvY2tJbmNyZW1lbnQgPSAxMCwgdW5pdEluY3JlbWVudCA9IDEsXG4gICAgICAgIFxuICAgICAgICB2YWx1ZUlzQWRqdXN0aW5nID0gZmFsc2UsXG4gICAgICAgIFxuICAgICAgICBoYW5kbGVTaXplID0gMSxcbiAgICAgICAgXG4gICAgICAgIGRyYWdMYXN0T2Zmc2V0LFxuICAgICAgICBcbiAgICAgICAgdGhhdCA9IHRoaXM7XG4gICAgXG4gICAgZnVuY3Rpb24gdXBkYXRlQmFyKCkge1xuICAgICAgICB2YXJcbiAgICAgICAgICAgIGxvbmdEaW1lbnNpb24gPSB2ZXJ0aWNhbCA/ICQoYmFyKS5oZWlnaHQoKSA6ICQoYmFyKS53aWR0aCgpO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIC8qIEFzIHRoZSBzaXplIG9mIHRoZSBkb2N1bWVudCBhcHByb2FjaGVzIHRoZSBzaXplIG9mIHRoZSBjb250YWluZXIsIGhhbmRsZSBzaXplIGdyb3dzIHRvIGZpbGwgdGhlIFxuICAgICAgICAgICAgICogd2hvbGUgdHJhY2s6XG4gICAgICAgICAgICAgKi9cbiAgICAgICAgaGFuZGxlU2l6ZSA9IHZpc2libGVSYW5nZSAvIChtYXggLSBtaW4pICogbG9uZ0RpbWVuc2lvbjsgXG4gICAgICAgIFxuICAgICAgICB2YXJcbiAgICAgICAgICAgIGhhbmRsZU9mZnNldCA9IChvZmZzZXQgLSBtaW4pIC8gKG1heCAtIG1pbikgKiAobG9uZ0RpbWVuc2lvbiAtIGhhbmRsZVNpemUpO1xuICAgICAgICBcbiAgICAgICAgaGFuZGxlSW5uZXIuc3R5bGVbdmVydGljYWwgPyBcImhlaWdodFwiIDogXCJ3aWR0aFwiXSA9IGhhbmRsZVNpemUgKyBcInB4XCI7XG4gICAgICAgIGhhbmRsZS5zdHlsZVt2ZXJ0aWNhbCA/IFwiaGVpZ2h0XCIgOiBcIndpZHRoXCJdID0gaGFuZGxlU2l6ZSArIFwicHhcIjtcbiAgICAgICAgXG4gICAgICAgIGhhbmRsZS5zdHlsZVt2ZXJ0aWNhbCA/IFwidG9wXCIgOiBcImxlZnRcIl0gPSBoYW5kbGVPZmZzZXQgKyBcInB4XCI7XG4gICAgfVxuICAgIFxuICAgIHRoaXMuc2V0VmFsdWVzID0gZnVuY3Rpb24oX29mZnNldCwgX3Zpc2libGVSYW5nZSwgX21pbiwgX21heCkge1xuICAgICAgICBvZmZzZXQgPSBfb2Zmc2V0O1xuICAgICAgICB2aXNpYmxlUmFuZ2UgPSBfdmlzaWJsZVJhbmdlO1xuICAgICAgICBtaW4gPSBfbWluO1xuICAgICAgICBtYXggPSBfbWF4O1xuICAgICAgICBcbiAgICAgICAgdXBkYXRlQmFyKCk7XG4gICAgfTtcbiAgICBcbiAgICB0aGlzLnNldEJsb2NrSW5jcmVtZW50ID0gZnVuY3Rpb24oaW5jcmVtZW50KSB7XG4gICAgICAgIGJsb2NrSW5jcmVtZW50ID0gaW5jcmVtZW50O1xuICAgIH07XG4gICAgXG4gICAgdGhpcy5zZXRVbml0SW5jcmVtZW50ID0gZnVuY3Rpb24oaW5jcmVtZW50KSB7XG4gICAgICAgIHVuaXRJbmNyZW1lbnQgPSBpbmNyZW1lbnQ7XG4gICAgfTtcbiAgICBcbiAgICB0aGlzLmdldEVsZW1lbnQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIGJhcjtcbiAgICB9O1xuICAgIFxuICAgIHRoaXMuZ2V0VmFsdWVJc0FkanVzdGluZyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdmFsdWVJc0FkanVzdGluZztcbiAgICB9O1xuICAgIFxuICAgIGZ1bmN0aW9uIG9uQmFyQ2xpY2soZSkge1xuICAgICAgICBpZiAodGhpcyA9PSBiYXIpIHtcbiAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgIGNsaWNrUG9zID0gdmVydGljYWwgPyBlLnBhZ2VZIC0gJChiYXIpLm9mZnNldCgpLnRvcCA6IGUucGFnZVggLSAkKGJhcikub2Zmc2V0KCkubGVmdCxcbiAgICAgICAgICAgICAgICBiYXJQb3MgPSBwYXJzZUludChoYW5kbGUuc3R5bGVbdmVydGljYWwgPyBcInRvcFwiIDogXCJsZWZ0XCJdLCAxMCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChjbGlja1BvcyA8IGJhclBvcykge1xuICAgICAgICAgICAgICAgIG9mZnNldCAtPSBibG9ja0luY3JlbWVudDtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgb2Zmc2V0ICs9IGJsb2NrSW5jcmVtZW50O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICB0aGF0LmVtaXRFdmVudChcInZhbHVlQ2hhbmdlZFwiLCBbb2Zmc2V0XSk7XG4gICAgICAgICAgICB1cGRhdGVCYXIoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBcbiAgICBmdW5jdGlvbiBvbkhhbmRsZVByZXNzKGUpIHtcbiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgZHJhZ0xhc3RPZmZzZXQgPSB2ZXJ0aWNhbCA/IGUucGFnZVkgLSAkKGJhcikub2Zmc2V0KCkudG9wIDogZS5wYWdlWCAtICQoYmFyKS5vZmZzZXQoKS5sZWZ0O1xuICAgICAgICBcbiAgICAgICAgJChoYW5kbGUpLmFkZENsYXNzKFwiZHJhZ2dpbmdcIik7XG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwibW91c2V1cFwiLCBvbkhhbmRsZVJlbGVhc2UpO1xuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLCBvbkhhbmRsZURyYWcpO1xuICAgIH1cbiAgICBcbiAgICBmdW5jdGlvbiBvbkhhbmRsZUNsaWNrKGUpIHtcbiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICB9XG4gICAgXG4gICAgZnVuY3Rpb24gb25IYW5kbGVEcmFnKGUpIHtcbiAgICAgICAgdmFsdWVJc0FkanVzdGluZyA9IHRydWU7XG4gICAgICAgIFxuICAgICAgICB2YXJcbiAgICAgICAgICAgIGxvbmdEaW1lbnNpb24gPSB2ZXJ0aWNhbCA/ICQoYmFyKS5oZWlnaHQoKSA6ICQoYmFyKS53aWR0aCgpLFxuICAgICAgICAgICAgbW91c2VPZmZzZXQgPSB2ZXJ0aWNhbCA/IGUucGFnZVkgLSAkKGJhcikub2Zmc2V0KCkudG9wIDogZS5wYWdlWCAtICQoYmFyKS5vZmZzZXQoKS5sZWZ0O1xuICAgICAgICBcbiAgICAgICAgb2Zmc2V0ID0gb2Zmc2V0ICsgKG1vdXNlT2Zmc2V0IC0gZHJhZ0xhc3RPZmZzZXQpICogKG1heCAtIG1pbikgLyAobG9uZ0RpbWVuc2lvbiAtIGhhbmRsZVNpemUpO1xuICAgICAgICBcbiAgICAgICAgb2Zmc2V0ID0gTWF0aC5taW4oTWF0aC5tYXgob2Zmc2V0LCBtaW4pLCBtYXgpO1xuICAgICAgICBcbiAgICAgICAgZHJhZ0xhc3RPZmZzZXQgPSBtb3VzZU9mZnNldDtcbiAgICAgICAgXG4gICAgICAgIHRoYXQuZW1pdEV2ZW50KFwidmFsdWVDaGFuZ2VkXCIsIFtvZmZzZXRdKTtcbiAgICAgICAgdXBkYXRlQmFyKCk7XG4gICAgICAgIFxuICAgICAgICB2YWx1ZUlzQWRqdXN0aW5nID0gZmFsc2U7XG4gICAgfVxuICAgIFxuICAgIGZ1bmN0aW9uIG9uSGFuZGxlUmVsZWFzZShlKSB7XG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICQoaGFuZGxlKS5yZW1vdmVDbGFzcyhcImRyYWdnaW5nXCIpO1xuICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNldXBcIiwgb25IYW5kbGVSZWxlYXNlKTtcbiAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIiwgb25IYW5kbGVEcmFnKTtcbiAgICB9XG4gICAgXG4gICAgYmFyLmNsYXNzTmFtZSA9IFwiY2hpY2tlbnBhaW50LXNjcm9sbGJhciBcIiAgKyAodmVydGljYWwgPyBcImNoaWNrZW5wYWludC1zY3JvbGxiYXItdmVydGljYWxcIiA6IFwiY2hpY2tlbnBhaW50LXNjcm9sbGJhci1ob3Jpem9udGFsXCIpO1xuICAgIGhhbmRsZS5jbGFzc05hbWUgPSBcImNoaWNrZW5wYWludC1zY3JvbGxiYXItaGFuZGxlXCI7XG4gICAgaGFuZGxlSW5uZXIuY2xhc3NOYW1lID0gXCJjaGlja2VucGFpbnQtc2Nyb2xsYmFyLWhhbmRsZS1pbm5lclwiO1xuICAgIFxuICAgIGhhbmRsZS5hcHBlbmRDaGlsZChoYW5kbGVJbm5lcik7XG4gICAgYmFyLmFwcGVuZENoaWxkKGhhbmRsZSk7XG4gICAgXG4gICAgaGFuZGxlLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgb25IYW5kbGVQcmVzcyk7XG4gICAgaGFuZGxlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBvbkhhbmRsZUNsaWNrKTtcbiAgICBcbiAgICBiYXIuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIG9uQmFyQ2xpY2spO1xufVxuXG5DUFNjcm9sbGJhci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKEV2ZW50RW1pdHRlci5wcm90b3R5cGUpO1xuQ1BTY3JvbGxiYXIucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gQ1BTY3JvbGxiYXI7IiwiLypcbiAgICBDaGlja2VuUGFpbnRcbiAgICBcbiAgICBDaGlja2VuUGFpbnQgaXMgYSB0cmFuc2xhdGlvbiBvZiBDaGliaVBhaW50IGZyb20gSmF2YSB0byBKYXZhU2NyaXB0XG4gICAgYnkgTmljaG9sYXMgU2hlcmxvY2sgLyBDaGlja2VuIFNtb290aGllLlxuICAgIFxuICAgIENoaWJpUGFpbnQgaXMgQ29weXJpZ2h0IChjKSAyMDA2LTIwMDggTWFyYyBTY2hlZmVyXG5cbiAgICBDaGlja2VuUGFpbnQgaXMgZnJlZSBzb2Z0d2FyZTogeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yIG1vZGlmeVxuICAgIGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgYXMgcHVibGlzaGVkIGJ5XG4gICAgdGhlIEZyZWUgU29mdHdhcmUgRm91bmRhdGlvbiwgZWl0aGVyIHZlcnNpb24gMyBvZiB0aGUgTGljZW5zZSwgb3JcbiAgICAoYXQgeW91ciBvcHRpb24pIGFueSBsYXRlciB2ZXJzaW9uLlxuXG4gICAgQ2hpY2tlblBhaW50IGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsXG4gICAgYnV0IFdJVEhPVVQgQU5ZIFdBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2ZcbiAgICBNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuICBTZWUgdGhlXG4gICAgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy5cblxuICAgIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXG4gICAgYWxvbmcgd2l0aCBDaGlja2VuUGFpbnQuIElmIG5vdCwgc2VlIDxodHRwOi8vd3d3LmdudS5vcmcvbGljZW5zZXMvPi5cbiovXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIENQU2VuZERpYWxvZyhjb250cm9sbGVyLCBwYXJlbnQsIHJlc291cmNlU2F2ZXIpIHtcbiAgICB2YXJcbiAgICAgICAgZGlhbG9nID0gXG4gICAgICAgICAgICAkKGA8ZGl2IGNsYXNzPVwibW9kYWwgZmFkZVwiIHRhYmluZGV4PVwiLTFcIiByb2xlPVwiZGlhbG9nXCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm1vZGFsLWRpYWxvZ1wiPlxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibW9kYWwtY29udGVudFwiIGRhdGEtc3RhZ2U9XCJzYXZpbmdcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtb2RhbC1oZWFkZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImNsb3NlXCIgZGF0YS1kaXNtaXNzPVwibW9kYWxcIiBhcmlhLWxhYmVsPVwiQ2xvc2VcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gYXJpYS1oaWRkZW49XCJ0cnVlXCI+JnRpbWVzOzwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDQgY2xhc3M9XCJtb2RhbC10aXRsZVwiPlNhdmluZyBkcmF3aW5nLi4uPC9oND5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm1vZGFsLWJvZHlcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzcz1cImNoaWNrZW5wYWludC1zYXZpbmctcHJvZ3Jlc3MtbWVzc2FnZVwiPlByZXBhcmluZyB5b3VyIGRyYXdpbmcgdG8gYmUgc2F2ZWQsIHBsZWFzZSB3YWl0Li4uPC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwcmUgY2xhc3M9XCJjaGlja2VucGFpbnQtc2F2aW5nLWVycm9yLW1lc3NhZ2UgcHJlLXNjcm9sbGFibGVcIj48L3ByZT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwicHJvZ3Jlc3NcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInByb2dyZXNzLWJhclwiIHJvbGU9XCJwcm9ncmVzc2JhclwiIGFyaWEtdmFsdWVub3c9XCIwXCIgYXJpYS12YWx1ZW1pbj1cIjBcIiBhcmlhLXZhbHVlbWF4PVwiMTAwXCIgc3R5bGU9XCJ3aWR0aDogMCU7XCI+PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtb2RhbC1mb290ZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImJ0biBidG4tZGVmYXVsdCBjaGlja2VucGFpbnQtc2VuZC1jYW5jZWxcIiBkYXRhLWRpc21pc3M9XCJtb2RhbFwiPkNhbmNlbDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibW9kYWwtY29udGVudFwiIGRhdGEtc3RhZ2U9XCJzdWNjZXNzLW5vdC1wcmV2aW91c2x5LXBvc3RlZFwiIHN0eWxlPVwiZGlzcGxheTpub25lXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibW9kYWwtaGVhZGVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJjbG9zZVwiIGRhdGEtZGlzbWlzcz1cIm1vZGFsXCIgYXJpYS1sYWJlbD1cIkNsb3NlXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPiZ0aW1lczs8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGg0IGNsYXNzPVwibW9kYWwtdGl0bGVcIj5EcmF3aW5nIHNhdmVkITwvaDQ+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtb2RhbC1ib2R5XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHA+WW91ciBkcmF3aW5nIGhhcyBiZWVuIHNhdmVkLCB3b3VsZCB5b3UgbGlrZSB0byBwb3N0IGl0IHRvIHRoZSBmb3J1bSBub3c/PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibW9kYWwtZm9vdGVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJidG4gYnRuLXByaW1hcnkgY2hpY2tlbnBhaW50LXBvc3QtZHJhd2luZ1wiIGRhdGEtZGlzbWlzcz1cIm1vZGFsXCI+WWVzLCBwb3N0IGl0IG5vdzwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiYnRuIGJ0bi1kZWZhdWx0XCIgZGF0YS1kaXNtaXNzPVwibW9kYWxcIj5Obywga2VlcCBkcmF3aW5nPC9idXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJidG4gYnRuLWRlZmF1bHQgY2hpY2tlbnBhaW50LWV4aXRcIiBkYXRhLWRpc21pc3M9XCJtb2RhbFwiPk5vLCBxdWl0IGFuZCBJJ2xsIGZpbmlzaCBpdCBsYXRlcjwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibW9kYWwtY29udGVudFwiIGRhdGEtc3RhZ2U9XCJzdWNjZXNzLWFscmVhZHktcG9zdGVkXCIgc3R5bGU9XCJkaXNwbGF5Om5vbmVcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtb2RhbC1oZWFkZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImNsb3NlXCIgZGF0YS1kaXNtaXNzPVwibW9kYWxcIiBhcmlhLWxhYmVsPVwiQ2xvc2VcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gYXJpYS1oaWRkZW49XCJ0cnVlXCI+JnRpbWVzOzwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDQgY2xhc3M9XCJtb2RhbC10aXRsZVwiPkRyYXdpbmcgc2F2ZWQhPC9oND5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm1vZGFsLWJvZHlcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cD5Zb3VyIGRyYXdpbmcgaGFzIGJlZW4gc2F2ZWQsIHdvdWxkIHlvdSBsaWtlIHRvIHZpZXcgaXQgb24gdGhlIGZvcnVtIG5vdz88L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtb2RhbC1mb290ZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImJ0biBidG4tcHJpbWFyeSBjaGlja2VucGFpbnQtcG9zdC1kcmF3aW5nXCIgZGF0YS1kaXNtaXNzPVwibW9kYWxcIj5ZZXMsIHZpZXcgdGhlIHBvc3Q8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImJ0biBidG4tZGVmYXVsdFwiIGRhdGEtZGlzbWlzcz1cIm1vZGFsXCI+Tm8sIGtlZXAgZHJhd2luZzwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgIGApLFxuICAgICAgICBwcm9ncmVzc01lc3NhZ2VFbGVtID0gJChcIi5jaGlja2VucGFpbnQtc2F2aW5nLXByb2dyZXNzLW1lc3NhZ2VcIiwgZGlhbG9nKSxcbiAgICAgICAgcHJvZ3Jlc3NFcnJvciA9ICQoXCIuY2hpY2tlbnBhaW50LXNhdmluZy1lcnJvci1tZXNzYWdlXCIsIGRpYWxvZyksXG4gICAgICAgIHByb2dyZXNzRWxlbSA9ICQoXCIucHJvZ3Jlc3MtYmFyXCIsIGRpYWxvZyksXG5cbiAgICAgICAgdGhhdCA9IHRoaXM7XG4gICAgXG4gICAgcmVzb3VyY2VTYXZlci5vbihcInNhdmluZ1Byb2dyZXNzXCIsIGZ1bmN0aW9uKHByb2dyZXNzLCBtZXNzYWdlKSB7XG4gICAgICAgIHByb2dyZXNzICo9IDEwMDtcbiAgICAgICAgXG4gICAgICAgIHByb2dyZXNzTWVzc2FnZUVsZW0udGV4dChtZXNzYWdlKTtcbiAgICAgICAgXG4gICAgICAgICQocHJvZ3Jlc3NFbGVtKVxuICAgICAgICAgICAgLmF0dHIoXCJhcmlhLXZhbHVlbm93XCIsIHByb2dyZXNzKVxuICAgICAgICAgICAgLmNzcyhcIndpZHRoXCIsIHByb2dyZXNzICsgXCIlXCIpO1xuICAgIH0pO1xuIFxuICAgIHJlc291cmNlU2F2ZXIub24oXCJzYXZpbmdDb21wbGV0ZVwiLCBmdW5jdGlvbihwcm9ncmVzcykge1xuICAgICAgICAkKFwiLm1vZGFsLWNvbnRlbnRbZGF0YS1zdGFnZT0nc2F2aW5nJ11cIiwgZGlhbG9nKS5oaWRlKCk7XG4gICAgICAgIFxuICAgICAgICBpZiAoY29udHJvbGxlci5pc0FjdGlvblN1cHBvcnRlZChcIkNQRXhpdFwiKSkge1xuICAgICAgICAgICAgJChcIi5tb2RhbC1jb250ZW50W2RhdGEtc3RhZ2U9J3N1Y2Nlc3Mtbm90LXByZXZpb3VzbHktcG9zdGVkJ11cIiwgZGlhbG9nKS5zaG93KCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAkKFwiLm1vZGFsLWNvbnRlbnRbZGF0YS1zdGFnZT0nc3VjY2Vzcy1hbHJlYWR5LXBvc3RlZCddXCIsIGRpYWxvZykuc2hvdygpO1xuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICByZXNvdXJjZVNhdmVyLm9uKFwic2F2aW5nRmFpbHVyZVwiLCBmdW5jdGlvbihzZXJ2ZXJNZXNzYWdlKSB7XG4gICAgICAgIHByb2dyZXNzRWxlbS5hZGRDbGFzcyhcInByb2dyZXNzLWJhci1kYW5nZXJcIik7XG4gICAgICAgIFxuICAgICAgICB2YXJcbiAgICAgICAgICAgIGVycm9yTWVzc2FnZSA9IFwiU29ycnksIHlvdXIgZHJhd2luZyBjb3VsZCBub3QgYmUgc2F2ZWQsIHBsZWFzZSB0cnkgYWdhaW4gbGF0ZXIuXCI7XG4gICAgICAgIFxuICAgICAgICBpZiAoc2VydmVyTWVzc2FnZSkge1xuICAgICAgICAgICAgc2VydmVyTWVzc2FnZSA9IHNlcnZlck1lc3NhZ2UucmVwbGFjZSgvXkNISUJJRVJST1JcXHMqLywgXCJcIik7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChzZXJ2ZXJNZXNzYWdlLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBlcnJvck1lc3NhZ2UgKz0gXCI8YnI+PGJyPlRoZSBlcnJvciByZXR1cm5lZCBmcm9tIHRoZSBzZXJ2ZXIgd2FzOlwiO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHByb2dyZXNzRXJyb3JcbiAgICAgICAgICAgICAgICAgICAgLnRleHQoc2VydmVyTWVzc2FnZSlcbiAgICAgICAgICAgICAgICAgICAgLnNob3coKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgcHJvZ3Jlc3NNZXNzYWdlRWxlbS5odG1sKGVycm9yTWVzc2FnZSk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgfSk7XG4gICAgXG4gICAgJChcIi5jaGlja2VucGFpbnQtcG9zdC1kcmF3aW5nXCIsIGRpYWxvZykuY2xpY2soZnVuY3Rpb24oKSB7XG4gICAgICAgIGNvbnRyb2xsZXIuYWN0aW9uUGVyZm9ybWVkKHthY3Rpb246IFwiQ1BQb3N0XCJ9KTtcbiAgICB9KTtcblxuICAgICQoXCIuY2hpY2tlbnBhaW50LWV4aXRcIiwgZGlhbG9nKS5jbGljayhmdW5jdGlvbigpIHtcbiAgICAgICAgYWxlcnQoXCJXaGVuIHlvdSB3YW50IHRvIGNvbWUgYmFjayBhbmQgZmluaXNoIHlvdXIgZHJhd2luZywganVzdCBjbGljayB0aGUgJ25ldyBkcmF3aW5nJyBidXR0b24gYWdhaW4gYW5kIFwiIFxuICAgICAgICAgICAgKyBcInlvdSBjYW4gY2hvb3NlIHRvIGNvbnRpbnVlIHRoaXMgZHJhd2luZy5cIik7XG4gICAgICAgIGNvbnRyb2xsZXIuYWN0aW9uUGVyZm9ybWVkKHthY3Rpb246IFwiQ1BFeGl0XCJ9KTtcbiAgICB9KTtcbiAgICBcbiAgICAkKFwiLmNoaWNrZW5wYWludC1zZW5kLWNhbmNlbFwiLCBkaWFsb2cpLmNsaWNrKGZ1bmN0aW9uKCkge1xuICAgICAgICByZXNvdXJjZVNhdmVyLmNhbmNlbCgpO1xuICAgIH0pO1xuICAgIFxuICAgIC8vIERlc3Ryb3kgdGhlIG1vZGFsIHVwb24gY2xvc2VcbiAgICBkaWFsb2cub24oXCJoaWRkZW4uYnMubW9kYWxcIiwgZnVuY3Rpb24oZSkge1xuICAgICAgICBkaWFsb2cucmVtb3ZlKCk7XG4gICAgfSk7XG4gICAgXG4gICAgZGlhbG9nLm1vZGFsKHtcbiAgICAgICAgc2hvdzogZmFsc2VcbiAgICB9KTtcblxuICAgIGRpYWxvZy5vbignc2hvd24uYnMubW9kYWwnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgdGhhdC5lbWl0RXZlbnQoXCJzaG93blwiKTtcbiAgICB9KTtcbiAgICBcbiAgICAvLyBGaXggdGhlIGJhY2tkcm9wIGxvY2F0aW9uIGluIHRoZSBET00gYnkgcmVwYXJlbnRpbmcgaXQgdG8gdGhlIGNoaWNrZW5wYWludCBjb250YWluZXJcbiAgICBkaWFsb2cuZGF0YShcImJzLm1vZGFsXCIpLiRib2R5ID0gJChwYXJlbnQpO1xuICAgIFxuICAgIHBhcmVudC5hcHBlbmRDaGlsZChkaWFsb2dbMF0pO1xuXG4gICAgdGhpcy5zaG93ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGRpYWxvZy5tb2RhbChcInNob3dcIik7XG4gICAgfTtcbn1cblxuQ1BTZW5kRGlhbG9nLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoRXZlbnRFbWl0dGVyLnByb3RvdHlwZSk7XG5DUFNlbmREaWFsb2cucHJvdG90eXBlLmNvbnRydWN0b3IgPSBDUFNlbmREaWFsb2c7IiwiLypcbiAgICBDaGlja2VuUGFpbnRcbiAgICBcbiAgICBDaGlja2VuUGFpbnQgaXMgYSB0cmFuc2xhdGlvbiBvZiBDaGliaVBhaW50IGZyb20gSmF2YSB0byBKYXZhU2NyaXB0XG4gICAgYnkgTmljaG9sYXMgU2hlcmxvY2sgLyBDaGlja2VuIFNtb290aGllLlxuICAgIFxuICAgIENoaWJpUGFpbnQgaXMgQ29weXJpZ2h0IChjKSAyMDA2LTIwMDggTWFyYyBTY2hlZmVyXG5cbiAgICBDaGlja2VuUGFpbnQgaXMgZnJlZSBzb2Z0d2FyZTogeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yIG1vZGlmeVxuICAgIGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgYXMgcHVibGlzaGVkIGJ5XG4gICAgdGhlIEZyZWUgU29mdHdhcmUgRm91bmRhdGlvbiwgZWl0aGVyIHZlcnNpb24gMyBvZiB0aGUgTGljZW5zZSwgb3JcbiAgICAoYXQgeW91ciBvcHRpb24pIGFueSBsYXRlciB2ZXJzaW9uLlxuXG4gICAgQ2hpY2tlblBhaW50IGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsXG4gICAgYnV0IFdJVEhPVVQgQU5ZIFdBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2ZcbiAgICBNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuICBTZWUgdGhlXG4gICAgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy5cblxuICAgIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXG4gICAgYWxvbmcgd2l0aCBDaGlja2VuUGFpbnQuIElmIG5vdCwgc2VlIDxodHRwOi8vd3d3LmdudS5vcmcvbGljZW5zZXMvPi5cbiovXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIENQU2hvcnRjdXRzRGlhbG9nKHBhcmVudCkge1xuICAgIHZhclxuICAgICAgICBkaWFsb2cgPSBcbiAgICAgICAgICAgICQoYDxkaXYgY2xhc3M9XCJtb2RhbCBmYWRlIGNoaWNrZW5wYWludC1zaG9ydGN1dHMtZGlhbG9nXCIgdGFiaW5kZXg9XCItMVwiIHJvbGU9XCJkaWFsb2dcIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibW9kYWwtZGlhbG9nIG1vZGFsLWxnXCI+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtb2RhbC1jb250ZW50XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibW9kYWwtaGVhZGVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJjbG9zZVwiIGRhdGEtZGlzbWlzcz1cIm1vZGFsXCIgYXJpYS1sYWJlbD1cIkNsb3NlXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPiZ0aW1lczs8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGg0IGNsYXNzPVwibW9kYWwtdGl0bGVcIj5TaG9ydGN1dHM8L2g0PlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibW9kYWwtYm9keVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNYW55IG9mIHRoZSBtZW51IG9wdGlvbnMgYW5kIHBhaW50aW5nIHRvb2xzIGhhdmUga2V5Ym9hcmQgc2hvcnRjdXRzIHdoaWNoIGFyZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3cml0dGVuIG5leHQgdG8gdGhlbSBvciBhcHBlYXIgd2hlbiB5b3UgaG92ZXIuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBIZXJlIGFyZSBzb21lIG90aGVyIHNob3J0Y3V0cyB3aGljaCBhcmUgbm90IGFzIG9idmlvdXMhXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjaGlja2VucGFpbnQtc2hvcnRjdXRzLXNlY3Rpb25zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjaGlja2VucGFpbnQtc2hvcnRjdXRzLXNlY3Rpb25cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoNT5Db2xvciBzd2F0Y2hlcyBwYWxldHRlPC9oNT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx1bCBjbGFzcz1cImNoaWNrZW5wYWludC1zaG9ydGN1dHMtbGlzdCBsaXN0LXVuc3R5bGVkXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZHQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJjaGlja2VucGFpbnQtc2hvcnRjdXRcIj48c3BhbiBjbGFzcz1cImZhIGZhLW1vdXNlLXBvaW50ZXJcIj48L3NwYW4+IExlZnQ8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2R0PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFVzZSBhcyB0aGUgZHJhd2luZyBjb2xvclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkdD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImNoaWNrZW5wYWludC1zaG9ydGN1dFwiPjxzcGFuIGNsYXNzPVwiZmEgZmEtbW91c2UtcG9pbnRlclwiPjwvc3Bhbj4gUmlnaHQ8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2R0PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlbW92ZSBvciByZXBsYWNlIGEgY29sb3Igc3dhdGNoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2RkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kbD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xpPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC91bD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjaGlja2VucGFpbnQtc2hvcnRjdXRzLXNlY3Rpb25cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoNT5MaW5lIGRyYXdpbmcgbW9kZTwvaDU+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dWwgY2xhc3M9XCJjaGlja2VucGFpbnQtc2hvcnRjdXRzLWxpc3QgbGlzdC11bnN0eWxlZFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRsPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGR0PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiY2hpY2tlbnBhaW50LXNob3J0Y3V0XCI+PHNwYW4gY2xhc3M9XCJjaGlja2VucGFpbnQtc2hvcnRjdXQta2V5XCI+U2hpZnQ8L3NwYW4+ICsgPHNwYW4gY2xhc3M9XCJmYSBmYS1tb3VzZS1wb2ludGVyXCI+PC9zcGFuPiBMZWZ0PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kdD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTbmFwIGxpbmUgdG8gbmVhcmVzdCA0NSBkZWdyZWVzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2RkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kbD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xpPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC91bD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjaGlja2VucGFpbnQtc2hvcnRjdXRzLXNlY3Rpb25cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoNT5QYWludGluZyB0b29sczwvaDU+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dWwgY2xhc3M9XCJjaGlja2VucGFpbnQtc2hvcnRjdXRzLWxpc3QgbGlzdC11bnN0eWxlZFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRsPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGR0PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiY2hpY2tlbnBhaW50LXNob3J0Y3V0XCI+PHNwYW4gY2xhc3M9XCJjaGlja2VucGFpbnQtc2hvcnRjdXQta2V5XCI+MTwvc3Bhbj4gLSA8c3BhbiBjbGFzcz1cImNoaWNrZW5wYWludC1zaG9ydGN1dC1rZXlcIj45PC9zcGFuPiAsIDxzcGFuIGNsYXNzPVwiY2hpY2tlbnBhaW50LXNob3J0Y3V0LWtleVwiPjA8L3NwYW4+PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kdD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDaGFuZ2UgYnJ1c2ggb3BhY2l0eVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkdD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImNoaWNrZW5wYWludC1zaG9ydGN1dFwiPjxzcGFuIGNsYXNzPVwiY2hpY2tlbnBhaW50LXNob3J0Y3V0LWtleVwiPls8L3NwYW4+ICwgPHNwYW4gY2xhc3M9XCJjaGlja2VucGFpbnQtc2hvcnRjdXQta2V5XCI+XTwvc3Bhbj48L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2R0PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENoYW5nZSBicnVzaCBzaXplXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2RkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2RsPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGk+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3VsPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNoaWNrZW5wYWludC1zaG9ydGN1dHMtc2VjdGlvblwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGg1PkJydXNoIHBhbGV0dGU8L2g1PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHVsIGNsYXNzPVwiY2hpY2tlbnBhaW50LXNob3J0Y3V0cy1saXN0IGxpc3QtdW5zdHlsZWRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGk+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkbD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkdD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImNoaWNrZW5wYWludC1zaG9ydGN1dFwiPjxzcGFuIGNsYXNzPVwiZmEgZmEtbW91c2UtcG9pbnRlclwiPjwvc3Bhbj4gUmlnaHQgZHJhZzwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZHQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQWRqdXN0IGJydXNoIHNsaWRlcnMgbW9yZSBwcmVjaXNlbHlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9saT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdWw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY2hpY2tlbnBhaW50LXNob3J0Y3V0cy1zZWN0aW9uXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDU+RHJhd2luZyBjYW52YXM8L2g1PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHVsIGNsYXNzPVwiY2hpY2tlbnBhaW50LXNob3J0Y3V0cy1saXN0IGxpc3QtdW5zdHlsZWRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGk+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkbD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkdD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImNoaWNrZW5wYWludC1zaG9ydGN1dFwiPjxzcGFuIGNsYXNzPVwiZmEgZmEtbW91c2UtcG9pbnRlclwiPjwvc3Bhbj4gTWlkZGxlPC9zcGFuPiA8c3BhbiBjbGFzcz1cImNoaWNrZW5wYWludC1zaG9ydGN1dC1hbHRlcm5hdGVcIj5vcjwvc3Bhbj4gPHNwYW4gY2xhc3M9XCJjaGlja2VucGFpbnQtc2hvcnRjdXRcIj48c3BhbiBjbGFzcz1cImNoaWNrZW5wYWludC1zaG9ydGN1dC1rZXlcIj5TcGFjZTwvc3Bhbj4gKyA8c3BhbiBjbGFzcz1cImZhIGZhLW1vdXNlLXBvaW50ZXJcIj48L3NwYW4+IExlZnQ8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2R0PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1vdmUgdGhlIGNhbnZhcyBhcm91bmRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZHQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJjaGlja2VucGFpbnQtc2hvcnRjdXRcIj48c3BhbiBjbGFzcz1cImNoaWNrZW5wYWludC1zaG9ydGN1dC1rZXlcIj5BbHQ8L3NwYW4+ICsgPHNwYW4gY2xhc3M9XCJmYSBmYS1tb3VzZS1wb2ludGVyXCI+PC9zcGFuPiBNaWRkbGU8L3NwYW4+IDxzcGFuIGNsYXNzPVwiY2hpY2tlbnBhaW50LXNob3J0Y3V0LWFsdGVybmF0ZVwiPm9yPC9zcGFuPiA8c3BhbiBjbGFzcz1cImNoaWNrZW5wYWludC1zaG9ydGN1dFwiPjxzcGFuIGNsYXNzPVwiY2hpY2tlbnBhaW50LXNob3J0Y3V0LWtleVwiPkFsdDwvc3Bhbj4gKyA8c3BhbiBjbGFzcz1cImNoaWNrZW5wYWludC1zaG9ydGN1dC1rZXlcIj5TcGFjZTwvc3Bhbj4gKyA8c3BhbiBjbGFzcz1cImZhIGZhLW1vdXNlLXBvaW50ZXJcIj48L3NwYW4+IExlZnQ8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2R0PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJvdGF0ZSB0aGUgY2FudmFzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2RkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGR0PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiY2hpY2tlbnBhaW50LXNob3J0Y3V0XCI+PHNwYW4gY2xhc3M9XCJmYSBmYS1tb3VzZS1wb2ludGVyXCI+PC9zcGFuPiBSaWdodDwvc3Bhbj4gPHNwYW4gY2xhc3M9XCJjaGlja2VucGFpbnQtc2hvcnRjdXQtYWx0ZXJuYXRlXCI+b3I8L3NwYW4+IDxzcGFuIGNsYXNzPVwiY2hpY2tlbnBhaW50LXNob3J0Y3V0XCI+PHNwYW4gY2xhc3M9XCJjaGlja2VucGFpbnQtc2hvcnRjdXQta2V5XCI+QWx0PC9zcGFuPiArIDxzcGFuIGNsYXNzPVwiZmEgZmEtbW91c2UtcG9pbnRlclwiPjwvc3Bhbj4gTGVmdDwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZHQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU2FtcGxlIHRoZSBjb2xvciB1bmRlciB0aGUgY3Vyc29yXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2RkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kbD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xpPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC91bD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjaGlja2VucGFpbnQtc2hvcnRjdXRzLXNlY3Rpb25cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoNT5MYXllcnMgcGFsZXR0ZTwvaDU+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dWwgY2xhc3M9XCJjaGlja2VucGFpbnQtc2hvcnRjdXRzLWxpc3QgbGlzdC11bnN0eWxlZFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRsPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGR0PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiY2hpY2tlbnBhaW50LXNob3J0Y3V0XCI+PHNwYW4gY2xhc3M9XCJmYSBmYS1tb3VzZS1wb2ludGVyXCI+PC9zcGFuPiBEb3VibGUgY2xpY2s8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2R0PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlbmFtZSBsYXllclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9saT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdWw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgYCk7XG4gICAgXG4gICAgLy8gRGVzdHJveSB0aGUgbW9kYWwgdXBvbiBjbG9zZVxuICAgIGRpYWxvZy5vbihcImhpZGRlbi5icy5tb2RhbFwiLCBmdW5jdGlvbihlKSB7XG4gICAgICAgIGRpYWxvZy5yZW1vdmUoKTtcbiAgICB9KTtcbiAgICBcbiAgICBkaWFsb2cubW9kYWwoe1xuICAgICAgICBzaG93OiBmYWxzZVxuICAgIH0pO1xuICAgIFxuICAgIC8vIEZpeCB0aGUgYmFja2Ryb3AgbG9jYXRpb24gaW4gdGhlIERPTSBieSByZXBhcmVudGluZyBpdCB0byB0aGUgY2hpY2tlbnBhaW50IGNvbnRhaW5lclxuICAgIGRpYWxvZy5kYXRhKFwiYnMubW9kYWxcIikuJGJvZHkgPSAkKHBhcmVudCk7XG4gICAgXG4gICAgcGFyZW50LmFwcGVuZENoaWxkKGRpYWxvZ1swXSk7XG5cbiAgICB0aGlzLnNob3cgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgZGlhbG9nLm1vZGFsKFwic2hvd1wiKTtcbiAgICB9O1xufSIsIi8qXG4gICAgQ2hpY2tlblBhaW50XG4gICAgXG4gICAgQ2hpY2tlblBhaW50IGlzIGEgdHJhbnNsYXRpb24gb2YgQ2hpYmlQYWludCBmcm9tIEphdmEgdG8gSmF2YVNjcmlwdFxuICAgIGJ5IE5pY2hvbGFzIFNoZXJsb2NrIC8gQ2hpY2tlbiBTbW9vdGhpZS5cbiAgICBcbiAgICBDaGliaVBhaW50IGlzIENvcHlyaWdodCAoYykgMjAwNi0yMDA4IE1hcmMgU2NoZWZlclxuXG4gICAgQ2hpY2tlblBhaW50IGlzIGZyZWUgc29mdHdhcmU6IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vciBtb2RpZnlcbiAgICBpdCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGFzIHB1Ymxpc2hlZCBieVxuICAgIHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb24sIGVpdGhlciB2ZXJzaW9uIDMgb2YgdGhlIExpY2Vuc2UsIG9yXG4gICAgKGF0IHlvdXIgb3B0aW9uKSBhbnkgbGF0ZXIgdmVyc2lvbi5cblxuICAgIENoaWNrZW5QYWludCBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLFxuICAgIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mXG4gICAgTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiAgU2VlIHRoZVxuICAgIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuXG5cbiAgICBZb3Ugc2hvdWxkIGhhdmUgcmVjZWl2ZWQgYSBjb3B5IG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZVxuICAgIGFsb25nIHdpdGggQ2hpY2tlblBhaW50LiBJZiBub3QsIHNlZSA8aHR0cDovL3d3dy5nbnUub3JnL2xpY2Vuc2VzLz4uXG4qL1xuXG4vKipcbiAqIEEgc2ltcGxlIHNsaWRlciBjb250cm9sLlxuICovXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBDUFNsaWRlcihtaW5WYWx1ZSwgbWF4VmFsdWUsIGNlbnRlck1vZGUsIGV4cE1vZGUpIHtcbiAgICBjb25zdFxuICAgICAgICBQUkVDSVNFX0RSQUdfU0NBTEUgPSA0LFxuICAgICAgICBFWFBfTU9ERV9GQUNUT1IgPSAxLjU7XG5cbiAgICB2YXIgXG4gICAgICAgIGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIiksXG4gICAgICAgIGNhbnZhc0NvbnRleHQgPSBjYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpLFxuICAgICAgICBcbiAgICAgICAgdmFsdWVSYW5nZSA9IG1heFZhbHVlIC0gbWluVmFsdWUsXG4gICAgICAgIFxuICAgICAgICBkcmFnTm9ybWFsID0gZmFsc2UsIGRyYWdQcmVjaXNlID0gZmFsc2UsXG4gICAgICAgIGRyYWdQcmVjaXNlWCxcbiAgICAgICAgXG4gICAgICAgIGRvbmVJbml0aWFsUGFpbnQgPSBmYWxzZSxcbiAgICAgICAgXG4gICAgICAgIHRoYXQgPSB0aGlzO1xuICAgIFxuICAgIHRoaXMudmFsdWUgPSB1bmRlZmluZWQ7XG5cbiAgICAvKipcbiAgICAgKiBFaXRoZXIgYSBzdHJpbmcgdG8gZHJhdyBvbiB0aGUgc2xpZGVyLCBvciBhIGZ1bmN0aW9uKHZhbHVlKSB3aGljaCByZWNlaXZlcyB0aGUgY3VycmVudCB2YWx1ZSBvZiB0aGUgc2xpZGVyIGFuZFxuICAgICAqIHNob3VsZCByZXR1cm4gdGhlIHN0cmluZyB0byBiZSBwYWludGVkIHRvIHRoZSBzbGlkZXIuXG4gICAgICpcbiAgICAgKiBAbmFtZSBDUFNsaWRlciN0aXRsZVxuICAgICAqIEBkZWZhdWx0IFwiXCJcbiAgICAgKi9cbiAgICB0aGlzLnRpdGxlID0gXCJcIjtcbiAgICBcbiAgICBjZW50ZXJNb2RlID0gY2VudGVyTW9kZSB8fCBmYWxzZTtcblxuICAgIGZ1bmN0aW9uIHBhaW50KCkge1xuICAgICAgICB2YXJcbiAgICAgICAgICAgIHdpZHRoID0gY2FudmFzLndpZHRoLFxuICAgICAgICAgICAgaGVpZ2h0ID0gY2FudmFzLmhlaWdodCxcbiAgICAgICAgICAgIHRpdGxlID0gdHlwZW9mIHRoYXQudGl0bGUgPT09IFwic3RyaW5nXCIgPyB0aGF0LnRpdGxlIDogdGhhdC50aXRsZSh0aGF0LnZhbHVlKSxcbiAgICAgICAgICAgIHRleHRYID0gMiAqIHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvLFxuICAgICAgICAgICAgdGV4dFkgPSBjYW52YXMuaGVpZ2h0ICogMC43NTtcblxuICAgICAgICBpZiAoY2VudGVyTW9kZSkge1xuICAgICAgICAgICAgY2FudmFzQ29udGV4dC5zYXZlKCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNhbnZhc0NvbnRleHQuZmlsbFN0eWxlID0gJ3doaXRlJztcblxuICAgICAgICAgICAgY2FudmFzQ29udGV4dC5maWxsUmVjdCgwLCAwLCB3aWR0aCwgaGVpZ2h0KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY2FudmFzQ29udGV4dC5maWxsU3R5bGUgPSAnYmxhY2snO1xuXG4gICAgICAgICAgICBjYW52YXNDb250ZXh0LmZpbGxUZXh0KHRpdGxlLCB0ZXh0WCwgdGV4dFkpO1xuICAgICAgICAgICAgY2FudmFzQ29udGV4dC5iZWdpblBhdGgoKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKHRoYXQudmFsdWUgPj0gdmFsdWVSYW5nZSAvIDIpIHtcbiAgICAgICAgICAgICAgICBjYW52YXNDb250ZXh0LnJlY3Qod2lkdGggLyAyLCAwLCAodGhhdC52YWx1ZSAtIHZhbHVlUmFuZ2UgLyAyKSAqIHdpZHRoIC8gdmFsdWVSYW5nZSwgaGVpZ2h0KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY2FudmFzQ29udGV4dC5yZWN0KHRoYXQudmFsdWUgKiB3aWR0aCAvIHZhbHVlUmFuZ2UsIDAsICh2YWx1ZVJhbmdlIC8gMiAtIHRoYXQudmFsdWUpICogd2lkdGggLyB2YWx1ZVJhbmdlLCBoZWlnaHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBjYW52YXNDb250ZXh0LmZpbGwoKTtcbiAgICAgICAgICAgIGNhbnZhc0NvbnRleHQuY2xpcCgpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjYW52YXNDb250ZXh0LmZpbGxTdHlsZSA9ICd3aGl0ZSc7XG4gICAgICAgICAgICBjYW52YXNDb250ZXh0LmZpbGxUZXh0KHRpdGxlLCB0ZXh0WCwgdGV4dFkpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjYW52YXNDb250ZXh0LnJlc3RvcmUoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgIGJhclByb3AgPSAodGhhdC52YWx1ZSAtIG1pblZhbHVlKSAvIHZhbHVlUmFuZ2UsXG4gICAgICAgICAgICAgICAgYmFyV2lkdGg7XG5cbiAgICAgICAgICAgIGlmIChleHBNb2RlKSB7XG4gICAgICAgICAgICAgICAgYmFyUHJvcCA9IE1hdGgucG93KGJhclByb3AsIDEgLyBFWFBfTU9ERV9GQUNUT1IpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBiYXJXaWR0aCA9IGJhclByb3AgKiB3aWR0aDtcblxuICAgICAgICAgICAgY2FudmFzQ29udGV4dC5zYXZlKCk7XG4gICAgICAgICAgICBjYW52YXNDb250ZXh0LnNhdmUoKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY2FudmFzQ29udGV4dC5maWxsU3R5bGUgPSAnYmxhY2snO1xuXG4gICAgICAgICAgICBjYW52YXNDb250ZXh0LmJlZ2luUGF0aCgpO1xuICAgICAgICAgICAgY2FudmFzQ29udGV4dC5yZWN0KDAsIDAsIGJhcldpZHRoLCBoZWlnaHQpO1xuICAgICAgICAgICAgY2FudmFzQ29udGV4dC5maWxsKCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNhbnZhc0NvbnRleHQuY2xpcCgpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjYW52YXNDb250ZXh0LmZpbGxTdHlsZSA9ICd3aGl0ZSc7XG4gICAgICAgICAgICBjYW52YXNDb250ZXh0LmZpbGxUZXh0KHRpdGxlLCB0ZXh0WCwgdGV4dFkpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBSZW1vdmUgdGhlIGNsaXAgcmVnaW9uXG4gICAgICAgICAgICBjYW52YXNDb250ZXh0LnJlc3RvcmUoKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY2FudmFzQ29udGV4dC5maWxsU3R5bGUgPSAnd2hpdGUnO1xuXG4gICAgICAgICAgICBjYW52YXNDb250ZXh0LmJlZ2luUGF0aCgpO1xuICAgICAgICAgICAgY2FudmFzQ29udGV4dC5yZWN0KGJhcldpZHRoLCAwLCB3aWR0aCwgaGVpZ2h0KTtcbiAgICAgICAgICAgIGNhbnZhc0NvbnRleHQuZmlsbCgpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjYW52YXNDb250ZXh0LmNsaXAoKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY2FudmFzQ29udGV4dC5maWxsU3R5bGUgPSAnYmxhY2snO1xuICAgICAgICAgICAgY2FudmFzQ29udGV4dC5maWxsVGV4dCh0aXRsZSwgdGV4dFgsIHRleHRZKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY2FudmFzQ29udGV4dC5yZXN0b3JlKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBtb3VzZVNlbGVjdChlKSB7XG4gICAgICAgIHZhciBcbiAgICAgICAgICAgIHdpZHRoID0gJChjYW52YXMpLndpZHRoKCksXG4gICAgICAgICAgICBsZWZ0ID0gJChjYW52YXMpLm9mZnNldCgpLmxlZnQsXG5cbiAgICAgICAgICAgIHByb3BvcnRpb24gPSAoZS5wYWdlWCAtIGxlZnQpIC8gd2lkdGg7XG5cbiAgICAgICAgaWYgKGV4cE1vZGUpIHtcbiAgICAgICAgICAgIC8vIEdpdmUgdGhlIHVzZXIgZmluZXIgY29udHJvbCBvdmVyIHRoZSBsb3cgdmFsdWVzXG4gICAgICAgICAgICBwcm9wb3J0aW9uID0gTWF0aC5wb3coTWF0aC5tYXgocHJvcG9ydGlvbiwgMC4wKSwgRVhQX01PREVfRkFDVE9SKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoYXQuc2V0VmFsdWUocHJvcG9ydGlvbiAqIHZhbHVlUmFuZ2UgKyBtaW5WYWx1ZSk7XG4gICAgfVxuICAgICAgICBcbiAgICBmdW5jdGlvbiBtb3VzZURyYWdnZWQoZSkge1xuICAgICAgICBpZiAoZHJhZ05vcm1hbCkge1xuICAgICAgICAgICAgbW91c2VTZWxlY3QoZSk7XG4gICAgICAgIH0gZWxzZSBpZiAoZHJhZ1ByZWNpc2UpIHtcbiAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgIGRpZmYgPSAoZS5wYWdlWCAtIGRyYWdQcmVjaXNlWCkgLyBQUkVDSVNFX0RSQUdfU0NBTEU7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChkaWZmICE9IDApIHtcbiAgICAgICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICAgICAgdW5yb3VuZGVkID0gdGhhdC52YWx1ZSArIGRpZmYsXG4gICAgICAgICAgICAgICAgICAgIHJvdW5kZWQgPSB1bnJvdW5kZWQgfCAwO1xuXG4gICAgICAgICAgICAgICAgdGhhdC5zZXRWYWx1ZShyb3VuZGVkKTtcblxuICAgICAgICAgICAgICAgIC8qIFR3ZWFrIHRoZSBcIm9sZCBtb3VzZVhcIiBwb3NpdGlvbiBzdWNoIHRoYXQgdGhlIGZyYWN0aW9uYWwgcGFydCBvZiB0aGUgdmFsdWUgd2Ugd2VyZSB1bmFibGUgdG8gc2V0XG4gICAgICAgICAgICAgICAgICogd2lsbCBiZSBhY2N1bXVsYXRlZFxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIGRyYWdQcmVjaXNlWCA9IGUucGFnZVggLSAodW5yb3VuZGVkIC0gcm91bmRlZCkgKiBQUkVDSVNFX0RSQUdfU0NBTEU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBtb3VzZVVwKGUpIHtcbiAgICAgICAgaWYgKGRyYWdOb3JtYWwgJiYgZS5idXR0b24gPT0gMCkge1xuICAgICAgICAgICAgZHJhZ05vcm1hbCA9IGZhbHNlO1xuICAgICAgICB9IGVsc2UgaWYgKGRyYWdQcmVjaXNlICYmIGUuYnV0dG9uID09IDIpIHtcbiAgICAgICAgICAgIGRyYWdQcmVjaXNlID0gZmFsc2U7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBjYW52YXMucmVsZWFzZVBvaW50ZXJDYXB0dXJlKGUucG9pbnRlcklkKTtcbiAgICAgICAgY2FudmFzLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJwb2ludGVydXBcIiwgbW91c2VVcCk7XG4gICAgICAgIGNhbnZhcy5yZW1vdmVFdmVudExpc3RlbmVyKFwicG9pbnRlcm1vdmVcIiwgbW91c2VEcmFnZ2VkKTtcbiAgICB9XG4gICAgXG4gICAgdGhpcy5zZXRWYWx1ZSA9IGZ1bmN0aW9uKF92YWx1ZSkge1xuICAgICAgICBfdmFsdWUgPSB+fk1hdGgubWF4KG1pblZhbHVlLCBNYXRoLm1pbihtYXhWYWx1ZSwgX3ZhbHVlKSk7XG4gICAgICAgIFxuICAgICAgICBpZiAodGhpcy52YWx1ZSAhPSBfdmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXMudmFsdWUgPSBfdmFsdWU7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFRoZSBldmVudCBsaXN0ZW5lcnMgbWlnaHQgbGlrZSB0byB1cGRhdGUgb3VyIHRpdGxlIHByb3BlcnR5IGF0IHRoaXMgcG9pbnQgdG8gcmVmbGVjdCB0aGUgbmV3IHZhbHVlXG4gICAgICAgICAgICB0aGlzLmVtaXRFdmVudCgndmFsdWVDaGFuZ2UnLCBbdGhpcy52YWx1ZV0pO1xuICAgICAgICBcbiAgICAgICAgICAgIGlmIChkb25lSW5pdGlhbFBhaW50KSB7XG4gICAgICAgICAgICAgICAgcGFpbnQoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gV2UgZG9uJ3QgYm90aGVyIHRvIGRvIG91ciBjYW52YXMgZGltZW5zaW9uaW5nIHVudGlsIHdlJ3JlIHN1cHBsaWVkIHdpdGggYW4gaW5pdGlhbCB2YWx1ZVxuICAgICAgICAgICAgICAgIGRvbmVJbml0aWFsUGFpbnQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHRoaXMucmVzaXplKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgRE9NIGVsZW1lbnQgZm9yIHRoZSBzbGlkZXIgY29tcG9uZW50LlxuICAgICAqL1xuICAgIHRoaXMuZ2V0RWxlbWVudCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gY2FudmFzO1xuICAgIH07XG4gICAgXG4gICAgdGhpcy5yZXNpemUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgY2FudmFzLndpZHRoID0gJChjYW52YXMpLndpZHRoKCkgfHwgMTUwO1xuICAgICAgICBjYW52YXMuaGVpZ2h0ID0gJChjYW52YXMpLmhlaWdodCgpIHx8IDIwO1xuICAgICAgICBcbiAgICAgICAgaWYgKHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvID4gMSkge1xuICAgICAgICAgICAgLy8gQXNzdW1lIG91ciB3aWR0aCBpcyBzZXQgdG8gMTAwJSBvciBzaW1pbGFyLCBzbyB3ZSBvbmx5IG5lZWQgdG8gdGhlIGZpeCB0aGUgaGVpZ2h0XG4gICAgICAgICAgICBjYW52YXMuc3R5bGUuaGVpZ2h0ID0gY2FudmFzLmhlaWdodCArICdweCc7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNhbnZhcy53aWR0aCA9IGNhbnZhcy53aWR0aCAqIHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvO1xuICAgICAgICAgICAgY2FudmFzLmhlaWdodCA9IGNhbnZhcy5oZWlnaHQgKiB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbztcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgY2FudmFzQ29udGV4dC5mb250ID0gKGNhbnZhcy5oZWlnaHQgKiAwLjQ3KSArICdwdCBzYW5zLXNlcmlmJztcbiAgICAgICAgXG4gICAgICAgIHBhaW50KCk7XG4gICAgfTtcbiAgICBcbiAgICBjYW52YXMuYWRkRXZlbnRMaXN0ZW5lcihcInBvaW50ZXJkb3duXCIsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgdmFyXG4gICAgICAgICAgICBkcmFnZ2luZyA9IGRyYWdOb3JtYWwgfHwgZHJhZ1ByZWNpc2U7XG4gICAgICAgIFxuICAgICAgICBpZiAoIWRyYWdnaW5nKSB7XG4gICAgICAgICAgICBjYW52YXMuc2V0UG9pbnRlckNhcHR1cmUoZS5wb2ludGVySWQpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBzd2l0Y2ggKGUuYnV0dG9uKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAwOiAvLyBMZWZ0XG4gICAgICAgICAgICAgICAgICAgIGRyYWdOb3JtYWwgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBtb3VzZVNlbGVjdChlKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDI6IC8vIFJpZ2h0XG4gICAgICAgICAgICAgICAgICAgIGRyYWdQcmVjaXNlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgZHJhZ1ByZWNpc2VYID0gZS5wYWdlWDtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNhbnZhcy5hZGRFdmVudExpc3RlbmVyKFwicG9pbnRlcnVwXCIsIG1vdXNlVXApO1xuICAgICAgICAgICAgY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoXCJwb2ludGVybW92ZVwiLCBtb3VzZURyYWdnZWQpO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgXG4gICAgY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoXCJjb250ZXh0bWVudVwiLCBmdW5jdGlvbihlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKVxuICAgIH0pO1xuXG4gICAgY2FudmFzLnNldEF0dHJpYnV0ZShcInRvdWNoLWFjdGlvblwiLCBcIm5vbmVcIik7XG5cbiAgICBjYW52YXMuY2xhc3NOYW1lID0gJ2NoaWNrZW5wYWludC1zbGlkZXInO1xuICAgIFxuICAgIGlmICghd2luZG93LmRldmljZVBpeGVsUmF0aW8pIHtcbiAgICAgICAgLy8gT2xkIGJyb3dzZXJzXG4gICAgICAgIHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvID0gMS4wO1xuICAgIH1cbn1cblxuQ1BTbGlkZXIucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShFdmVudEVtaXR0ZXIucHJvdG90eXBlKTtcbkNQU2xpZGVyLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IENQU2xpZGVyO1xuIiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gQ1BTcGxhc2hTY3JlZW4odWlQYXJlbnQsIGxvYWRlciwgcmVzb3VyY2VzUm9vdCkge1xuICAgIGNvbnN0XG4gICAgICAgIE1BWF9TTU9PVEhJRV9PRkZTRVQgPSAxNzA7XG5cbiAgICB2YXJcbiAgICAgICAgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKSxcbiAgICAgICAgY2FudmFzQ29udGV4dCA9IGNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIiksXG5cbiAgICAgICAgY3VwID0gbmV3IEltYWdlKCksXG4gICAgICAgIGxpZCA9IG5ldyBJbWFnZSgpLFxuICAgICAgICBvdXRsaW5lcyA9IG5ldyBJbWFnZSgpLFxuICAgICAgICB0ZXh0ID0gbmV3IEltYWdlKCksXG5cbiAgICAgICAgc2hhZGluZyA9IG5ldyBJbWFnZSgpLFxuICAgICAgICBoaWdobGlnaHRzID0gbmV3IEltYWdlKCksXG4gICAgICAgIHNtb290aGllID0gbmV3IEltYWdlKCksXG5cbiAgICAgICAgaW1hZ2VzID0gW2N1cCwgbGlkLCBvdXRsaW5lcywgdGV4dCwgc2hhZGluZywgaGlnaGxpZ2h0cywgc21vb3RoaWVdLFxuICAgICAgICBsb2FkZWRDb3VudCA9IDAsXG5cbiAgICAgICAgY3VwQ29tcG9zaXRlLCBzbW9vdGhpZUNvbXBvc2l0ZSxcbiAgICAgICAgY3VwQ29tcG9zaXRlQ29udGV4dCwgc21vb3RoaWVDb21wb3NpdGVDb250ZXh0LFxuXG4gICAgICAgIHByb2dyZXNzID0gMC4wLFxuICAgICAgICBtZXNzYWdlID0gXCJcIixcblxuICAgICAgICBmb250SGVpZ2h0ID0gMTQ7XG5cbiAgICB2YXIgaW1hZ2VSb290ID0gcmVzb3VyY2VzUm9vdCArIFwic3BsYXNoL1wiO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpbWFnZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaW1hZ2VzW2ldLm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgbG9hZGVkQ291bnQrKztcblxuICAgICAgICAgICAgaWYgKGxvYWRlZENvdW50ID09IGltYWdlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICByZXBhaW50KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBjdXAuc3JjID0gaW1hZ2VSb290ICsgXCJjdXAucG5nXCI7XG4gICAgaGlnaGxpZ2h0cy5zcmMgPSBpbWFnZVJvb3QgKyBcImhpZ2hsaWdodHMucG5nXCI7XG4gICAgbGlkLnNyYyA9IGltYWdlUm9vdCArIFwibGlkLnBuZ1wiO1xuICAgIG91dGxpbmVzLnNyYyA9IGltYWdlUm9vdCArIFwibGluZXMucG5nXCI7XG4gICAgc2hhZGluZy5zcmMgPSBpbWFnZVJvb3QgKyBcInNoYWRpbmcucG5nXCI7XG4gICAgc21vb3RoaWUuc3JjID0gaW1hZ2VSb290ICsgXCJzbW9vdGhpZS5wbmdcIjtcbiAgICB0ZXh0LnNyYyA9IGltYWdlUm9vdCArIFwidGV4dC5wbmdcIjtcblxuICAgIGZ1bmN0aW9uIGJ1aWxkU21vb3RoaWVDb21wb3NpdGUoaW1nV2lkdGgsIGltZ0hlaWdodCwgcHJvZ3Jlc3MpIHtcbiAgICAgICAgaWYgKCFzbW9vdGhpZUNvbXBvc2l0ZSkge1xuICAgICAgICAgICAgc21vb3RoaWVDb21wb3NpdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpO1xuXG4gICAgICAgICAgICBzbW9vdGhpZUNvbXBvc2l0ZS53aWR0aCA9IGltZ1dpZHRoO1xuICAgICAgICAgICAgc21vb3RoaWVDb21wb3NpdGUuaGVpZ2h0ID0gaW1nSGVpZ2h0O1xuXG4gICAgICAgICAgICBzbW9vdGhpZUNvbXBvc2l0ZUNvbnRleHQgPSBzbW9vdGhpZUNvbXBvc2l0ZS5nZXRDb250ZXh0KFwiMmRcIik7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBGaXJzdCBkcmF3IHRoZSBzbW9vdGhpZSBpbiBpdHMgbWFzayBwb3NpdGlvbjpcbiAgICAgICAgc21vb3RoaWVDb21wb3NpdGVDb250ZXh0Lmdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbiA9IFwiY29weVwiO1xuICAgICAgICBzbW9vdGhpZUNvbXBvc2l0ZUNvbnRleHQuZHJhd0ltYWdlKHNtb290aGllLCAwLCAwKTtcblxuICAgICAgICAvLyBOb3cgc2hpZnQgdGhlIHNtb290aGllIGRvd253YXJkcyBhbmQgdXNlIHRoZSBvcmlnaW5hbCBwb3NpdGlvbiBhcyBhIG1hc2tcbiAgICAgICAgc21vb3RoaWVDb21wb3NpdGVDb250ZXh0Lmdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbiA9IFwic291cmNlLWluXCI7XG4gICAgICAgIHNtb290aGllQ29tcG9zaXRlQ29udGV4dC5kcmF3SW1hZ2Uoc21vb3RoaWUsIDAsIE1hdGgucm91bmQocHJvZ3Jlc3MgKiBNQVhfU01PT1RISUVfT0ZGU0VUKSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYnVpbGRDdXBDb21wb3NpdGUoaW1nV2lkdGgsIGltZ0hlaWdodCwgcHJvZ3Jlc3MpIHtcbiAgICAgICAgaWYgKCFjdXBDb21wb3NpdGUpIHtcbiAgICAgICAgICAgIGN1cENvbXBvc2l0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIik7XG5cbiAgICAgICAgICAgIGN1cENvbXBvc2l0ZS53aWR0aCA9IGltZ1dpZHRoO1xuICAgICAgICAgICAgY3VwQ29tcG9zaXRlLmhlaWdodCA9IGltZ0hlaWdodDtcblxuICAgICAgICAgICAgY3VwQ29tcG9zaXRlQ29udGV4dCA9IGN1cENvbXBvc2l0ZS5nZXRDb250ZXh0KFwiMmRcIik7XG4gICAgICAgIH1cblxuICAgICAgICBjdXBDb21wb3NpdGVDb250ZXh0Lmdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbiA9IFwiY29weVwiO1xuICAgICAgICBjdXBDb21wb3NpdGVDb250ZXh0LmRyYXdJbWFnZShjdXAsIDAsIDApO1xuXG4gICAgICAgIGJ1aWxkU21vb3RoaWVDb21wb3NpdGUoaW1nV2lkdGgsIGltZ0hlaWdodCwgcHJvZ3Jlc3MpO1xuXG4gICAgICAgIGN1cENvbXBvc2l0ZUNvbnRleHQuZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uID0gXCJzb3VyY2Utb3ZlclwiO1xuICAgICAgICBjdXBDb21wb3NpdGVDb250ZXh0LmRyYXdJbWFnZShzbW9vdGhpZUNvbXBvc2l0ZSwgMCwgMCk7XG5cbiAgICAgICAgY3VwQ29tcG9zaXRlQ29udGV4dC5kcmF3SW1hZ2UobGlkLCAwLCAwKTtcblxuICAgICAgICBjdXBDb21wb3NpdGVDb250ZXh0Lmdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbiA9IFwic2NyZWVuXCI7XG4gICAgICAgIGN1cENvbXBvc2l0ZUNvbnRleHQuZHJhd0ltYWdlKGhpZ2hsaWdodHMsIDAsIDApO1xuXG4gICAgICAgIGN1cENvbXBvc2l0ZUNvbnRleHQuZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uID0gXCJtdWx0aXBseVwiO1xuICAgICAgICBjdXBDb21wb3NpdGVDb250ZXh0LmRyYXdJbWFnZShzaGFkaW5nLCAwLCAwKTtcblxuICAgICAgICByZXR1cm4gY3VwQ29tcG9zaXRlO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHJlcGFpbnQoKSB7XG4gICAgICAgIHZhclxuICAgICAgICAgICAgY2VudGVyWCA9IGNhbnZhcy53aWR0aCAvIDIsXG4gICAgICAgICAgICBjZW50ZXJZID0gY2FudmFzLmhlaWdodCAvIDI7XG5cbiAgICAgICAgY2FudmFzQ29udGV4dC5maWxsU3R5bGUgPSAnd2hpdGUnO1xuICAgICAgICBjYW52YXNDb250ZXh0LmZpbGxSZWN0KDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7XG5cbiAgICAgICAgaWYgKGxvYWRlZENvdW50ID09IGltYWdlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgIGltZ1dpZHRoID0gdGV4dC53aWR0aCxcbiAgICAgICAgICAgICAgICBpbWdIZWlnaHQgPSB0ZXh0LmhlaWdodCxcbiAgICAgICAgICAgICAgICBsZWZ0ID0gTWF0aC5yb3VuZChjZW50ZXJYIC0gaW1nV2lkdGggLyAyKSxcbiAgICAgICAgICAgICAgICB0b3AgPSBNYXRoLnJvdW5kKGNlbnRlclkgLSBpbWdIZWlnaHQgLyAyKTtcblxuICAgICAgICAgICAgY2FudmFzQ29udGV4dC5kcmF3SW1hZ2UodGV4dCwgbGVmdCwgdG9wKTtcblxuICAgICAgICAgICAgYnVpbGRDdXBDb21wb3NpdGUoaW1nV2lkdGgsIGltZ0hlaWdodCwgcHJvZ3Jlc3MpO1xuXG4gICAgICAgICAgICAvL1RoZSB3aG9sZSBjdXAgY29tcG9zaXRlIGlzIHNsaWdodGx5IHRyYW5zcGFyZW50XG4gICAgICAgICAgICBjYW52YXNDb250ZXh0Lmdsb2JhbEFscGhhID0gMC44ODtcbiAgICAgICAgICAgIGNhbnZhc0NvbnRleHQuZHJhd0ltYWdlKGN1cENvbXBvc2l0ZSwgbGVmdCwgdG9wKTtcblxuICAgICAgICAgICAgY2FudmFzQ29udGV4dC5nbG9iYWxBbHBoYSA9IDEuMDtcblxuICAgICAgICAgICAgY2FudmFzQ29udGV4dC5kcmF3SW1hZ2Uob3V0bGluZXMsIGxlZnQsIHRvcCk7XG5cbiAgICAgICAgICAgIGNlbnRlclkgPSBNYXRoLnJvdW5kKGNlbnRlclkgKyBpbWdIZWlnaHQgLyAyICsgMik7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAobWVzc2FnZSAhPSBcIlwiKSB7XG4gICAgICAgICAgICBjYW52YXNDb250ZXh0LmZpbGxTdHlsZSA9IFwiYmxhY2tcIjtcblxuICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgbGluZXMgPSBtZXNzYWdlLnNwbGl0KFwiXFxuXCIpO1xuXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxpbmVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgICAgIGxpbmUgPSBsaW5lc1tpXSxcbiAgICAgICAgICAgICAgICAgICAgbGluZVdpZHRoID0gY2FudmFzQ29udGV4dC5tZWFzdXJlVGV4dChsaW5lKS53aWR0aDtcblxuICAgICAgICAgICAgICAgIGNlbnRlclkgKz0gZm9udEhlaWdodCAqIDI7XG5cbiAgICAgICAgICAgICAgICBjYW52YXNDb250ZXh0LmZpbGxUZXh0KGxpbmUsIGNlbnRlclggLSBsaW5lV2lkdGggLyAyLCBjZW50ZXJZKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHJlc2l6ZSgpIHtcbiAgICAgICAgLy8gVXNlIHRoZSBjYW52YXMgZGltZW5zaW9ucyBzZXQgYnkgdGhlIENTUyBzdHlsZXNcbiAgICAgICAgY2FudmFzLndpZHRoID0gY2FudmFzLmNsaWVudFdpZHRoO1xuICAgICAgICBjYW52YXMuaGVpZ2h0ID0gY2FudmFzLmNsaWVudEhlaWdodDtcblxuICAgICAgICBjYW52YXNDb250ZXh0LmZvbnQgPSBmb250SGVpZ2h0ICsgXCJwdCBzYW5zLXNlcmlmXCI7XG5cbiAgICAgICAgcmVwYWludCgpO1xuICAgIH1cblxuICAgIGxvYWRlci5vbihcImxvYWRpbmdQcm9ncmVzc1wiLCBmdW5jdGlvbihfcHJvZ3Jlc3MsIF9tZXNzYWdlKSB7XG4gICAgICAgIHByb2dyZXNzID0gX3Byb2dyZXNzO1xuICAgICAgICBtZXNzYWdlID0gX21lc3NhZ2U7XG5cbiAgICAgICAgcmVwYWludCgpO1xuICAgIH0pO1xuXG4gICAgbG9hZGVyLm9uKFwibG9hZGluZ0ZhaWx1cmVcIiwgZnVuY3Rpb24oX21lc3NhZ2UpIHtcbiAgICAgICAgcHJvZ3Jlc3MgPSAwO1xuICAgICAgICBtZXNzYWdlID0gX21lc3NhZ2U7XG5cbiAgICAgICAgcmVwYWludCgpO1xuICAgIH0pO1xuXG4gICAgbG9hZGVyLm9uKFwibG9hZGluZ0NvbXBsZXRlXCIsIGZ1bmN0aW9uKCkge1xuICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLCByZXNpemUpO1xuICAgICAgICB1aVBhcmVudC5yZW1vdmVDaGlsZChjYW52YXMpO1xuICAgIH0pO1xuXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIiwgcmVzaXplKTtcblxuICAgIGNhbnZhcy5jbGFzc05hbWUgPSBcImNoaWNrZW5wYWludC1zcGxhc2gtc2NyZWVuXCI7XG5cbiAgICB1aVBhcmVudC5hcHBlbmRDaGlsZChjYW52YXMpO1xuXG4gICAgcmVzaXplKCk7XG59XG4iLCIvKlxuICAgIENoaWNrZW5QYWludFxuICAgIFxuICAgIENoaWNrZW5QYWludCBpcyBhIHRyYW5zbGF0aW9uIG9mIENoaWJpUGFpbnQgZnJvbSBKYXZhIHRvIEphdmFTY3JpcHRcbiAgICBieSBOaWNob2xhcyBTaGVybG9jayAvIENoaWNrZW4gU21vb3RoaWUuXG4gICAgXG4gICAgQ2hpYmlQYWludCBpcyBDb3B5cmlnaHQgKGMpIDIwMDYtMjAwOCBNYXJjIFNjaGVmZXJcblxuICAgIENoaWNrZW5QYWludCBpcyBmcmVlIHNvZnR3YXJlOiB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3IgbW9kaWZ5XG4gICAgaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBhcyBwdWJsaXNoZWQgYnlcbiAgICB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uLCBlaXRoZXIgdmVyc2lvbiAzIG9mIHRoZSBMaWNlbnNlLCBvclxuICAgIChhdCB5b3VyIG9wdGlvbikgYW55IGxhdGVyIHZlcnNpb24uXG5cbiAgICBDaGlja2VuUGFpbnQgaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCxcbiAgICBidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZlxuICAgIE1FUkNIQU5UQUJJTElUWSBvciBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS4gIFNlZSB0aGVcbiAgICBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9yZSBkZXRhaWxzLlxuXG4gICAgWW91IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2VcbiAgICBhbG9uZyB3aXRoIENoaWNrZW5QYWludC4gSWYgbm90LCBzZWUgPGh0dHA6Ly93d3cuZ251Lm9yZy9saWNlbnNlcy8+LlxuKi9cblxuaW1wb3J0IENQUGFsZXR0ZSBmcm9tICcuL0NQUGFsZXR0ZSc7XG5cbmltcG9ydCBDUEJydXNoSW5mbyBmcm9tICcuLi9lbmdpbmUvQ1BCcnVzaEluZm8nO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBDUFN0cm9rZVBhbGV0dGUoY3BDb250cm9sbGVyKSB7XG4gICAgQ1BQYWxldHRlLmNhbGwodGhpcywgY3BDb250cm9sbGVyLCBcInN0cm9rZVwiLCBcIlN0cm9rZVwiKTtcbiAgICBcbiAgICB2YXIgXG4gICAgICAgIHRoYXQgPSB0aGlzLFxuXG4gICAgICAgIGJ1dHRvbnMgPSBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBcImNoaWNrZW5wYWludC10b29sLWZyZWVoYW5kXCIsXG4gICAgICAgICAgICAgICAgY29tbWFuZDogXCJDUEZyZWVIYW5kXCIsXG4gICAgICAgICAgICAgICAgdG9vbFRpcDogXCJGcmVlLWhhbmRcIixcbiAgICAgICAgICAgICAgICBzZWxlY3RlZDogdHJ1ZVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IFwiY2hpY2tlbnBhaW50LXRvb2wtbGluZVwiLFxuICAgICAgICAgICAgICAgIGNvbW1hbmQ6IFwiQ1BMaW5lXCIsXG4gICAgICAgICAgICAgICAgdG9vbFRpcDogXCJTdHJhaWdodCBsaW5lXCJcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBcImNoaWNrZW5wYWludC10b29sLWJlemllclwiLFxuICAgICAgICAgICAgICAgIGNvbW1hbmQ6IFwiQ1BCZXppZXJcIixcbiAgICAgICAgICAgICAgICB0b29sVGlwOiBcIkJlemllciBjdXJ2ZVwiXG4gICAgICAgICAgICB9XG4gICAgICAgIF0sXG5cbiAgICAgICAgYm9keSA9IHRoYXQuZ2V0Qm9keUVsZW1lbnQoKTtcblxuICAgIGZ1bmN0aW9uIGJ1aWxkQnV0dG9ucygpIHtcbiAgICAgICAgdmFyXG4gICAgICAgICAgICBsaXN0RWxlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ1bFwiKTtcbiAgICAgICAgXG4gICAgICAgIGxpc3RFbGVtLmNsYXNzTmFtZSA9IFwiY2hpY2tlbnBhaW50LXN0cm9rZS10b29scyBsaXN0LXVuc3R5bGVkXCI7XG4gICAgICAgIFxuICAgICAgICBmb3IgKHZhciBpIGluIGJ1dHRvbnMpIHtcbiAgICAgICAgICAgIHZhciBcbiAgICAgICAgICAgICAgICBidXR0b24gPSBidXR0b25zW2ldLFxuICAgICAgICAgICAgICAgIGJ1dHRvbkVsZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGlcIik7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGJ1dHRvbkVsZW0uY2xhc3NOYW1lID0gXCJjaGlja2VucGFpbnQtdG9vbGJhci1idXR0b24gXCIgKyBidXR0b24uY2xhc3NOYW1lO1xuICAgICAgICAgICAgYnV0dG9uRWxlbS5zZXRBdHRyaWJ1dGUoXCJkYXRhLWJ1dHRvbkluZGV4XCIsIGkpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoYnV0dG9uLnNlbGVjdGVkKSB7XG4gICAgICAgICAgICAgICAgYnV0dG9uRWxlbS5jbGFzc05hbWUgPSBidXR0b25FbGVtLmNsYXNzTmFtZSArIFwiIHNlbGVjdGVkXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGxpc3RFbGVtLmFwcGVuZENoaWxkKGJ1dHRvbkVsZW0pO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBsaXN0RWxlbS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgaWYgKGUudGFyZ2V0ICYmIGUudGFyZ2V0Lm5vZGVOYW1lID09IFwiTElcIikge1xuICAgICAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgICAgICBidXR0b24gPSBidXR0b25zW3BhcnNlSW50KGUudGFyZ2V0LmdldEF0dHJpYnV0ZShcImRhdGEtYnV0dG9uSW5kZXhcIiksIDEwKV07XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgJChcImxpXCIsIGxpc3RFbGVtKS5yZW1vdmVDbGFzcyhcInNlbGVjdGVkXCIpO1xuICAgICAgICAgICAgICAgICQoZS50YXJnZXQpLmFkZENsYXNzKFwic2VsZWN0ZWRcIik7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgY3BDb250cm9sbGVyLmFjdGlvblBlcmZvcm1lZCh7YWN0aW9uOiBidXR0b24uY29tbWFuZH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIGJvZHkuYXBwZW5kQ2hpbGQobGlzdEVsZW0pO1xuICAgIH1cbiAgICBcbiAgICBidWlsZEJ1dHRvbnMoKTtcbiAgICBcbiAgICBjcENvbnRyb2xsZXIub24oXCJ0b29sQ2hhbmdlXCIsIGZ1bmN0aW9uKHRvb2wsIHRvb2xJbmZvKSB7XG4gICAgICAgICQoXCIuY2hpY2tlbnBhaW50LXRvb2wtZnJlZWhhbmRcIiwgYm9keSkudG9nZ2xlQ2xhc3MoXCJzZWxlY3RlZFwiLCB0b29sSW5mby5zdHJva2VNb2RlID09IENQQnJ1c2hJbmZvLlNNX0ZSRUVIQU5EKTtcbiAgICAgICAgJChcIi5jaGlja2VucGFpbnQtdG9vbC1saW5lXCIsIGJvZHkpLnRvZ2dsZUNsYXNzKFwic2VsZWN0ZWRcIiwgdG9vbEluZm8uc3Ryb2tlTW9kZSA9PSBDUEJydXNoSW5mby5TTV9MSU5FKTtcbiAgICAgICAgJChcIi5jaGlja2VucGFpbnQtdG9vbC1iZXppZXJcIiwgYm9keSkudG9nZ2xlQ2xhc3MoXCJzZWxlY3RlZFwiLCB0b29sSW5mby5zdHJva2VNb2RlID09IENQQnJ1c2hJbmZvLlNNX0JFWklFUik7XG4gICAgfSk7XG59XG5cbkNQU3Ryb2tlUGFsZXR0ZS5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKENQUGFsZXR0ZS5wcm90b3R5cGUpO1xuQ1BTdHJva2VQYWxldHRlLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IENQU3Ryb2tlUGFsZXR0ZTtcbiIsIi8qXG4gICAgQ2hpY2tlblBhaW50XG4gICAgXG4gICAgQ2hpY2tlblBhaW50IGlzIGEgdHJhbnNsYXRpb24gb2YgQ2hpYmlQYWludCBmcm9tIEphdmEgdG8gSmF2YVNjcmlwdFxuICAgIGJ5IE5pY2hvbGFzIFNoZXJsb2NrIC8gQ2hpY2tlbiBTbW9vdGhpZS5cbiAgICBcbiAgICBDaGliaVBhaW50IGlzIENvcHlyaWdodCAoYykgMjAwNi0yMDA4IE1hcmMgU2NoZWZlclxuXG4gICAgQ2hpY2tlblBhaW50IGlzIGZyZWUgc29mdHdhcmU6IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vciBtb2RpZnlcbiAgICBpdCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGFzIHB1Ymxpc2hlZCBieVxuICAgIHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb24sIGVpdGhlciB2ZXJzaW9uIDMgb2YgdGhlIExpY2Vuc2UsIG9yXG4gICAgKGF0IHlvdXIgb3B0aW9uKSBhbnkgbGF0ZXIgdmVyc2lvbi5cblxuICAgIENoaWNrZW5QYWludCBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLFxuICAgIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mXG4gICAgTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiAgU2VlIHRoZVxuICAgIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuXG5cbiAgICBZb3Ugc2hvdWxkIGhhdmUgcmVjZWl2ZWQgYSBjb3B5IG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZVxuICAgIGFsb25nIHdpdGggQ2hpY2tlblBhaW50LiBJZiBub3QsIHNlZSA8aHR0cDovL3d3dy5nbnUub3JnL2xpY2Vuc2VzLz4uXG4qL1xuXG5pbXBvcnQgQ1BQYWxldHRlIGZyb20gJy4vQ1BQYWxldHRlJztcblxuaW1wb3J0IENQQ29sb3IgZnJvbSAnLi4vdXRpbC9DUENvbG9yJztcbmltcG9ydCBBZG9iZUNvbG9yVGFibGUgZnJvbSAnLi4vdXRpbC9BZG9iZUNvbG9yVGFibGUnO1xuXG5mdW5jdGlvbiBwYWRMZWZ0KHN0cmluZywgcGFkZGluZywgbGVuKSB7XG4gICAgd2hpbGUgKHN0cmluZy5sZW5ndGggPCBsZW4pIHtcbiAgICAgICAgc3RyaW5nID0gcGFkZGluZyArIHN0cmluZztcbiAgICB9XG4gICAgcmV0dXJuIHN0cmluZztcbn1cblxuZnVuY3Rpb24gd3JhcFdpdGhFbGVtKGUsIHdyYXBXaXRoTmFtZSkge1xuICAgIHZhclxuICAgICAgICBwYXJlbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KHdyYXBXaXRoTmFtZSk7XG4gICAgXG4gICAgcGFyZW50LmFwcGVuZENoaWxkKGUpO1xuICAgIFxuICAgIHJldHVybiBwYXJlbnQ7XG59XG5cbmZ1bmN0aW9uIGZpbGVBUElzU3VwcG9ydGVkKCkge1xuICAgIHJldHVybiB3aW5kb3cuRmlsZSAmJiB3aW5kb3cuRmlsZVJlYWRlciAmJiB3aW5kb3cuRmlsZUxpc3QgJiYgd2luZG93LkJsb2I7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIENQU3dhdGNoZXNQYWxldHRlKGNvbnRyb2xsZXIpIHtcbiAgICBDUFBhbGV0dGUuY2FsbCh0aGlzLCBjb250cm9sbGVyLCBcInN3YXRjaGVzXCIsIFwiQ29sb3Igc3dhdGNoZXNcIik7XG4gICAgXG4gICAgdmFyXG4gICAgICAgIElOSVRfQ09MT1JTID0gWzB4ZmZmZmZmLCAweDAwMDAwMCwgMHhmZjAwMDAsIDB4MDBmZjAwLCAweDAwMDBmZiwgMHhmZmZmMDBdLFxuICAgICAgICBcbiAgICAgICAgbW9kaWZpZWQgPSBmYWxzZSxcbiAgICAgICAgc3dhdGNoUGFuZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidWxcIiksXG4gICAgICAgIGJ1dHRvblBhbmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSxcbiAgICAgICAgXG4gICAgICAgIGZpbGVJbnB1dCxcbiAgICAgICAgXG4gICAgICAgIHRoYXQgPSB0aGlzO1xuXG4gICAgZnVuY3Rpb24gQ1BDb2xvclN3YXRjaChjb2xvcikge1xuICAgICAgICB2YXJcbiAgICAgICAgICAgIHdyYXBwZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLFxuICAgICAgICAgICAgc3dhdGNoRWxlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJhXCIpLFxuICAgICAgICAgICAgc3dhdGNoTWVudSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ1bFwiKSxcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgbW51UmVtb3ZlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImFcIiksXG4gICAgICAgICAgICBtbnVTZXRUb0N1cnJlbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYVwiKSxcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhhdCA9IHRoaXM7XG4gICAgICAgIFxuICAgICAgICB0aGlzLmdldEVsZW1lbnQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiB3cmFwcGVyO1xuICAgICAgICB9O1xuICAgICAgICBcbiAgICAgICAgdGhpcy5zZXRDb2xvciA9IGZ1bmN0aW9uKGNvbG9yKSB7XG4gICAgICAgICAgICBzd2F0Y2hFbGVtLnNldEF0dHJpYnV0ZShcImRhdGEtY29sb3JcIiwgY29sb3IpO1xuICAgICAgICAgICAgc3dhdGNoRWxlbS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAnIycgKyBwYWRMZWZ0KFwiXCIgKyBOdW1iZXIoY29sb3IpLnRvU3RyaW5nKDE2KSwgXCIwXCIsIDYpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMuc2V0Q29sb3IoY29sb3IpO1xuICAgICAgICBcbiAgICAgICAgc3dhdGNoRWxlbS5ocmVmID0gXCIjXCI7XG4gICAgICAgIHN3YXRjaEVsZW0uY2xhc3NOYW1lID0gXCJjaGlja2VucGFpbnQtY29sb3Itc3dhdGNoIGRyb3Bkb3duLXRvZ2dsZVwiO1xuICAgICAgICBzd2F0Y2hFbGVtLnNldEF0dHJpYnV0ZShcImRhdGEtdG9nZ2xlXCIsIFwiZHJvcGRvd25cIik7XG4gICAgICAgIFxuICAgICAgICBtbnVSZW1vdmUuaHJlZiA9IFwiI1wiO1xuICAgICAgICBtbnVSZW1vdmUuaW5uZXJIVE1MID0gXCJSZW1vdmVcIjtcbiAgICAgICAgXG4gICAgICAgIG1udVJlbW92ZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgJCh3cmFwcGVyKS5yZW1vdmUoKTtcblxuICAgICAgICAgICAgbW9kaWZpZWQgPSB0cnVlO1xuICAgICAgICB9KTtcbiAgICAgICAgICAgIFxuICAgICAgICBtbnVTZXRUb0N1cnJlbnQuaHJlZiA9IFwiI1wiO1xuICAgICAgICBtbnVTZXRUb0N1cnJlbnQuaW5uZXJIVE1MID0gXCJSZXBsYWNlIHdpdGggY3VycmVudCBjb2xvclwiO1xuICAgICAgICBcbiAgICAgICAgbW51U2V0VG9DdXJyZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoYXQuc2V0Q29sb3IoY29udHJvbGxlci5nZXRDdXJDb2xvcigpLmdldFJnYigpKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgbW9kaWZpZWQgPSB0cnVlO1xuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIHN3YXRjaE1lbnUuY2xhc3NOYW1lID0gXCJkcm9wZG93bi1tZW51XCI7XG4gICAgICAgIFxuICAgICAgICBzd2F0Y2hNZW51LmFwcGVuZENoaWxkKHdyYXBXaXRoRWxlbShtbnVSZW1vdmUsIFwibGlcIikpO1xuICAgICAgICBzd2F0Y2hNZW51LmFwcGVuZENoaWxkKHdyYXBXaXRoRWxlbShtbnVTZXRUb0N1cnJlbnQsIFwibGlcIikpO1xuICAgICAgICBcbiAgICAgICAgd3JhcHBlci5jbGFzc05hbWUgPSBcImNoaWNrZW5wYWludC1jb2xvci1zd2F0Y2gtd3JhcHBlclwiO1xuICAgICAgICB3cmFwcGVyLmFwcGVuZENoaWxkKHN3YXRjaEVsZW0pO1xuICAgICAgICB3cmFwcGVyLmFwcGVuZENoaWxkKHN3YXRjaE1lbnUpO1xuICAgICAgICBcbiAgICAgICAgJCh3cmFwcGVyKS5vbihcInNob3cuYnMuZHJvcGRvd25cIiwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgXG4gICAgICAgICAgICAgICAgJGJ0bkRyb3BEb3duID0gJCh0aGlzKS5maW5kKFwiLmRyb3Bkb3duLXRvZ2dsZVwiKSxcbiAgICAgICAgICAgICAgICAkbGlzdEhvbGRlciA9ICQodGhpcykuZmluZChcIi5kcm9wZG93bi1tZW51XCIpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAkbGlzdEhvbGRlci5jc3Moe1xuICAgICAgICAgICAgICAgIFwidG9wXCI6ICgkYnRuRHJvcERvd24ucG9zaXRpb24oKS50b3AgKyAkYnRuRHJvcERvd24ub3V0ZXJIZWlnaHQodHJ1ZSkpICsgXCJweFwiLFxuICAgICAgICAgICAgICAgIFwibGVmdFwiOiAkYnRuRHJvcERvd24ucG9zaXRpb24oKS5sZWZ0ICsgXCJweFwiXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIFxuICAgIGZ1bmN0aW9uIGNsZWFyU3dhdGNoZXMoKSB7XG4gICAgICAgIHdoaWxlIChzd2F0Y2hQYW5lbC5sYXN0Q2hpbGQpIHtcbiAgICAgICAgICAgIHN3YXRjaFBhbmVsLnJlbW92ZUNoaWxkKHN3YXRjaFBhbmVsLmxhc3RDaGlsZCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBhZGRTd2F0Y2goY29sb3IpIHtcbiAgICAgICAgdmFyXG4gICAgICAgICAgICBzd2F0Y2ggPSBuZXcgQ1BDb2xvclN3YXRjaChjb2xvcik7XG5cbiAgICAgICAgc3dhdGNoUGFuZWwuYXBwZW5kQ2hpbGQoc3dhdGNoLmdldEVsZW1lbnQoKSk7XG4gICAgfVxuICAgIFxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYW4gYXJyYXkgb2YgY29sb3JzIGluIFJHQiAzMi1iaXQgaW50ZWdlciBmb3JtYXRcbiAgICAgKi9cbiAgICB0aGlzLmdldFN3YXRjaGVzID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhclxuICAgICAgICAgICAgc3dhdGNoZXMgPSAkKFwiLmNoaWNrZW5wYWludC1jb2xvci1zd2F0Y2hcIiwgc3dhdGNoUGFuZWwpLFxuICAgICAgICAgICAgY29sb3JzID0gbmV3IEFycmF5KHN3YXRjaGVzLmxlbmd0aCk7XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzd2F0Y2hlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgY29sb3JzW2ldID0gcGFyc2VJbnQoc3dhdGNoZXMuZ2V0KGkpLmdldEF0dHJpYnV0ZShcImRhdGEtY29sb3JcIiksIDEwKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBjb2xvcnM7XG4gICAgfTtcblxuICAgIHRoaXMuc2V0U3dhdGNoZXMgPSBmdW5jdGlvbihzd2F0Y2hlcykge1xuICAgICAgICBjbGVhclN3YXRjaGVzKCk7XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzd2F0Y2hlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgYWRkU3dhdGNoKHN3YXRjaGVzW2ldKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgbW9kaWZpZWQgPSB0cnVlO1xuICAgIH07XG4gICAgXG4gICAgdGhpcy5pc01vZGlmaWVkID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBtb2RpZmllZDtcbiAgICB9O1xuICAgIFxuICAgIGZ1bmN0aW9uIGxvYWRTd2F0Y2hlcygpIHtcbiAgICAgICAgZmlsZUlucHV0Lm9uY2hhbmdlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgXG4gICAgICAgICAgICAgICAgZmlsZUxpc3QgPSB0aGlzLmZpbGVzO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoZmlsZUxpc3QubGVuZ3RoIDwgMSlcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgIGZpbGUgPSBmaWxlTGlzdFswXSxcbiAgICAgICAgICAgICAgICByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICByZWFkZXIub25sb2FkID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgICAgIHN3YXRjaGVzID0gbmV3IEFkb2JlQ29sb3JUYWJsZSgpLnJlYWQodGhpcy5yZXN1bHQpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGlmIChzd2F0Y2hlcyAhPSBudWxsICYmIHN3YXRjaGVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgdGhhdC5zZXRTd2F0Y2hlcyhzd2F0Y2hlcyk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgYWxlcnQoXCJUaGUgc3dhdGNoZXMgY291bGQgbm90IGJlIHJlYWQsIGRpZCB5b3Ugc2VsZWN0IGFuIC5hY28gZmlsZT9cIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgcmVhZGVyLnJlYWRBc0FycmF5QnVmZmVyKGZpbGUpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBmaWxlSW5wdXQuY2xpY2soKTtcbiAgICB9XG4gICAgXG4gICAgZnVuY3Rpb24gc2F2ZVN3YXRjaGVzKCkge1xuICAgICAgICB2YXJcbiAgICAgICAgICAgIGFjbyA9IG5ldyBBZG9iZUNvbG9yVGFibGUoKS53cml0ZSh0aGF0LmdldFN3YXRjaGVzKCkpLFxuICAgICAgICAgICAgYmxvYiA9IG5ldyBCbG9iKFthY29dLCB7dHlwZTogXCJhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW1cIn0pO1xuICAgICAgICBcbiAgICAgICAgd2luZG93LnNhdmVBcyhibG9iLCBcIm9la2FraXN3YXRjaGVzLmFjb1wiKTtcbiAgICB9XG4gICAgXG4gICAgZnVuY3Rpb24gaW5pdFN3YXRjaFBhbmVsKCkge1xuICAgICAgICBzd2F0Y2hQYW5lbC5jbGFzc05hbWUgPSBcImNoaWNrZW5wYWludC1jb2xvci1zd2F0Y2hlcyBsaXN0LXVuc3R5bGVkXCI7XG4gICAgICAgIFxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IElOSVRfQ09MT1JTLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBzd2F0Y2hQYW5lbC5hcHBlbmRDaGlsZChuZXcgQ1BDb2xvclN3YXRjaChJTklUX0NPTE9SU1tpXSkuZ2V0RWxlbWVudCgpKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgc3dhdGNoUGFuZWwuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgIHN3YXRjaCA9IGUudGFyZ2V0O1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoIS9jaGlja2VucGFpbnQtY29sb3Itc3dhdGNoLy50ZXN0KHN3YXRjaC5jbGFzc05hbWUpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoZS5idXR0b24gPT0gMCAvKiBMZWZ0ICovICYmIHN3YXRjaC5nZXRBdHRyaWJ1dGUoXCJkYXRhLWNvbG9yXCIpICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyLnNldEN1ckNvbG9yKG5ldyBDUENvbG9yKHBhcnNlSW50KHN3YXRjaC5nZXRBdHRyaWJ1dGUoXCJkYXRhLWNvbG9yXCIpLCAxMCkpKTtcbiAgICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICBzd2F0Y2hQYW5lbC5hZGRFdmVudExpc3RlbmVyKFwiY29udGV4dG1lbnVcIiwgZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgc3dhdGNoID0gZS50YXJnZXQ7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmICghL2NoaWNrZW5wYWludC1jb2xvci1zd2F0Y2gvLnRlc3Qoc3dhdGNoLmNsYXNzTmFtZSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgJChzd2F0Y2gpXG4gICAgICAgICAgICAgICAgLmRyb3Bkb3duKFwidG9nZ2xlXCIpXG4gICAgICAgICAgICAgICAgLm9mZihcImNsaWNrLmJzLmRyb3Bkb3duXCIpOyAvLyBSZW1vdmUgQm9vdHN0cmFwJ3MgbGVmdC1jbGljayBoYW5kbGVyIGluc3RhbGxlZCBieSB0b2dnbGVcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIFxuICAgIGZ1bmN0aW9uIGluaXRCdXR0b25zUGFuZWwoKSB7XG4gICAgICAgIHZhclxuICAgICAgICAgICAgYnRuU2V0dGluZ3MgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLCBcbiAgICAgICAgICAgIGJ0bkFkZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHNldHRpbmdzTWVudSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ1bFwiKSxcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgbW51U2F2ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJhXCIpLFxuICAgICAgICAgICAgbW51TG9hZCAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYVwiKTtcbiAgICAgICAgXG4gICAgICAgIGJ0bkFkZC50aXRsZSA9IFwiQWRkIHRoZSBjdXJyZW50IGJydXNoIGNvbG9yIGFzIGEgbmV3IHN3YXRjaFwiO1xuICAgICAgICBidG5BZGQuY2xhc3NOYW1lID0gXCJjaGlja2VucGFpbnQtc21hbGwtdG9vbGJhci1idXR0b24gY2hpY2tlbnBhaW50LWNvbG9yLXN3YXRjaC1hZGRcIjtcbiAgICAgICAgXG4gICAgICAgIGJ0blNldHRpbmdzLmNsYXNzTmFtZSA9IFwiY2hpY2tlbnBhaW50LXNtYWxsLXRvb2xiYXItYnV0dG9uIGNoaWNrZW5wYWludC1jb2xvci1zd2F0Y2gtc2V0dGluZ3NcIjtcbiAgICAgICAgYnRuU2V0dGluZ3Muc2V0QXR0cmlidXRlKFwiZGF0YS10b2dnbGVcIiwgXCJkcm9wZG93blwiKTtcbiAgICAgICAgJChidG5TZXR0aW5ncykuZHJvcGRvd24oKTtcblxuICAgICAgICBtbnVTYXZlLmhyZWYgPSBcIiNcIjtcbiAgICAgICAgbW51U2F2ZS5pbm5lckhUTUwgPSBcIlNhdmUgc3dhdGNoZXMgdG8geW91ciBjb21wdXRlci4uLlwiO1xuICAgICAgICBtbnVTYXZlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHNhdmVTd2F0Y2hlcygpO1xuICAgICAgICB9KTtcbiAgICAgICAgICAgIFxuICAgICAgICBtbnVMb2FkLmhyZWYgPSBcIiNcIjtcbiAgICAgICAgbW51TG9hZC5pbm5lckhUTUwgPSBcIkxvYWQgc3dhdGNoZXMgZnJvbSB5b3VyIGNvbXB1dGVyLi4uXCI7XG4gICAgICAgIG1udUxvYWQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgbG9hZFN3YXRjaGVzKCk7XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgc2V0dGluZ3NNZW51LmNsYXNzTmFtZSA9IFwiZHJvcGRvd24tbWVudSBkcm9wZG93bi1tZW51LXJpZ2h0XCI7XG4gICAgICAgIFxuICAgICAgICBzZXR0aW5nc01lbnUuYXBwZW5kQ2hpbGQod3JhcFdpdGhFbGVtKG1udVNhdmUsIFwibGlcIikpO1xuICAgICAgICBzZXR0aW5nc01lbnUuYXBwZW5kQ2hpbGQod3JhcFdpdGhFbGVtKG1udUxvYWQsIFwibGlcIikpO1xuICAgICAgICBcbiAgICAgICAgdmFyXG4gICAgICAgICAgICBidG5TZXR0aW5nc0NvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIFxuICAgICAgICBidG5TZXR0aW5nc0NvbnRhaW5lci5jbGFzc05hbWUgPSAnZHJvcGRvd24nO1xuICAgICAgICBidG5TZXR0aW5nc0NvbnRhaW5lci5hcHBlbmRDaGlsZChidG5TZXR0aW5ncyk7XG4gICAgICAgIGJ0blNldHRpbmdzQ29udGFpbmVyLmFwcGVuZENoaWxkKHNldHRpbmdzTWVudSk7XG5cbiAgICAgICAgJChidG5TZXR0aW5nc0NvbnRhaW5lcikub24oXCJzaG93LmJzLmRyb3Bkb3duXCIsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgLyogSW5zdGVhZCBvZiBCb290c3RyYXAncyBleHRyZW1lbHkgZXhwZW5zaXZlIGRhdGEgQVBJLCB3ZSdsbCBvbmx5IGxpc3RlbiBmb3IgZGlzbWlzcyBjbGlja3Mgb24gdGhlXG4gICAgICAgICAgICAgKiBkb2N1bWVudCAqd2hpbGUgdGhlIG1lbnUgaXMgb3BlbiEqXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICQoZG9jdW1lbnQpLm9uZShcImNsaWNrXCIsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIGlmICgkKGJ0blNldHRpbmdzQ29udGFpbmVyKS5oYXNDbGFzcyhcIm9wZW5cIikpIHtcbiAgICAgICAgICAgICAgICAgICAgJChidG5TZXR0aW5ncykuZHJvcGRvd24oXCJ0b2dnbGVcIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGJ0bkFkZC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgYWRkU3dhdGNoKGNvbnRyb2xsZXIuZ2V0Q3VyQ29sb3IoKS5nZXRSZ2IoKSk7XG4gICAgICAgICAgICBtb2RpZmllZCA9IHRydWU7XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgYnV0dG9uUGFuZWwuY2xhc3NOYW1lID0gJ2NoaWNrZW5wYWludC1jb2xvci1zd2F0Y2hlcy1idXR0b25zJztcbiAgICAgICAgXG4gICAgICAgIC8vIERvbid0IG9mZmVyIHRvIGxvYWQvc2F2ZSBzd2F0Y2hlcyBpZiB3ZSBkb24ndCBoYXZlIHRoZSBmaWxlIEFQSSBuZWVkZWQgZm9yIHJlYWRpbmcgdGhlbVxuICAgICAgICBpZiAoZmlsZUFQSXNTdXBwb3J0ZWQoKSkge1xuICAgICAgICAgICAgZmlsZUlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBmaWxlSW5wdXQudHlwZSA9IFwiZmlsZVwiO1xuICAgICAgICAgICAgZmlsZUlucHV0Lm11bHRpcGxlID0gZmFsc2U7XG4gICAgICAgICAgICBmaWxlSW5wdXQuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgYnV0dG9uUGFuZWwuYXBwZW5kQ2hpbGQoYnRuU2V0dGluZ3NDb250YWluZXIpO1xuICAgICAgICAgICAgYnV0dG9uUGFuZWwuYXBwZW5kQ2hpbGQoZmlsZUlucHV0KTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgYnV0dG9uUGFuZWwuYXBwZW5kQ2hpbGQoYnRuQWRkKTtcbiAgICB9XG4gICAgXG4gICAgaW5pdFN3YXRjaFBhbmVsKCk7XG4gICAgdGhpcy5nZXRCb2R5RWxlbWVudCgpLmFwcGVuZENoaWxkKHN3YXRjaFBhbmVsKTtcblxuICAgIGluaXRCdXR0b25zUGFuZWwoKTtcbiAgICB0aGlzLmdldEJvZHlFbGVtZW50KCkuYXBwZW5kQ2hpbGQoYnV0dG9uUGFuZWwpO1xufVxuXG5DUFN3YXRjaGVzUGFsZXR0ZS5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKENQUGFsZXR0ZS5wcm90b3R5cGUpO1xuQ1BTd2F0Y2hlc1BhbGV0dGUucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gQ1BTd2F0Y2hlc1BhbGV0dGU7IiwiLypcbiAgICBDaGlja2VuUGFpbnRcbiAgICBcbiAgICBDaGlja2VuUGFpbnQgaXMgYSB0cmFuc2xhdGlvbiBvZiBDaGliaVBhaW50IGZyb20gSmF2YSB0byBKYXZhU2NyaXB0XG4gICAgYnkgTmljaG9sYXMgU2hlcmxvY2sgLyBDaGlja2VuIFNtb290aGllLlxuICAgIFxuICAgIENoaWJpUGFpbnQgaXMgQ29weXJpZ2h0IChjKSAyMDA2LTIwMDggTWFyYyBTY2hlZmVyXG5cbiAgICBDaGlja2VuUGFpbnQgaXMgZnJlZSBzb2Z0d2FyZTogeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yIG1vZGlmeVxuICAgIGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgYXMgcHVibGlzaGVkIGJ5XG4gICAgdGhlIEZyZWUgU29mdHdhcmUgRm91bmRhdGlvbiwgZWl0aGVyIHZlcnNpb24gMyBvZiB0aGUgTGljZW5zZSwgb3JcbiAgICAoYXQgeW91ciBvcHRpb24pIGFueSBsYXRlciB2ZXJzaW9uLlxuXG4gICAgQ2hpY2tlblBhaW50IGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsXG4gICAgYnV0IFdJVEhPVVQgQU5ZIFdBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2ZcbiAgICBNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuICBTZWUgdGhlXG4gICAgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy5cblxuICAgIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXG4gICAgYWxvbmcgd2l0aCBDaGlja2VuUGFpbnQuIElmIG5vdCwgc2VlIDxodHRwOi8vd3d3LmdudS5vcmcvbGljZW5zZXMvPi5cbiovXG5cbmltcG9ydCBDUFdhY29tVGFibGV0IGZyb20gXCIuLi91dGlsL0NQV2Fjb21UYWJsZXRcIjtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gQ1BUYWJsZXREaWFsb2cocGFyZW50KSB7XG4gICAgdmFyXG4gICAgICAgIGRpYWxvZyA9IFxuICAgICAgICAgICAgJChgPGRpdiBjbGFzcz1cIm1vZGFsIGZhZGVcIiB0YWJpbmRleD1cIi0xXCIgcm9sZT1cImRpYWxvZ1wiPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtb2RhbC1kaWFsb2dcIj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm1vZGFsLWNvbnRlbnRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtb2RhbC1oZWFkZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImNsb3NlXCIgZGF0YS1kaXNtaXNzPVwibW9kYWxcIiBhcmlhLWxhYmVsPVwiQ2xvc2VcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gYXJpYS1oaWRkZW49XCJ0cnVlXCI+JnRpbWVzOzwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDQgY2xhc3M9XCJtb2RhbC10aXRsZVwiPkRyYXdpbmcgdGFibGV0IHN1cHBvcnQ8L2g0PlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibW9kYWwtYm9keVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzPVwiY2hpY2tlbnBhaW50LXRhYmxldC10aGVyZS1hcmUtdHdvLW9wdGlvbnNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVGhlcmUgYXJlIHR3byB3YXlzIHlvdSBjb3VsZCB1c2UgeW91ciB0YWJsZXQncyBwZW4gcHJlc3N1cmUgc3VwcG9ydCB3aXRoIENoaWNrZW5QYWludC5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNoaWNrZW5wYWludC10YWJsZXQtc3VwcG9ydCBjaGlja2VucGFpbnQtd2Fjb20tc3VwcG9ydFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBQbHVnaW4gZm9yIFdhY29tIHRhYmxldHNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9oND5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNoaWNrZW5wYWludC1zdXBwb3J0ZWQtYnJvd3NlcnNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjaGlja2VucGFpbnQtc3VwcG9ydGVkLWJyb3dzZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImZhIGZhLWludGVybmV0LWV4cGxvcmVyXCI+PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIElFIDEwLCAxMVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY2hpY2tlbnBhaW50LXN1cHBvcnRlZC1icm93c2VyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJmYSBmYS1maXJlZm94XCI+PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEZpcmVmb3ggKDMyLWJpdCBvbmx5KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY2hpY2tlbnBhaW50LXN1cHBvcnRlZC1icm93c2VyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJmYSBmYS1zYWZhcmlcIj48L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU2FmYXJpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY2hpY2tlbnBhaW50LXN1cHBvcnRlZC1icm93c2VyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJmYSBmYS1vcGVyYVwiPjwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBPcGVyYVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzcz1cImNoaWNrZW5wYWludC1ub3QtaW5zdGFsbGVkXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUaGUgcGx1Z2luIGZvciBXYWNvbSB0YWJsZXRzIGRvZXNuJ3Qgc2VlbSB0byBiZSBpbnN0YWxsZWQgaW4geW91ciBicm93c2VyIHlldC5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzcz1cImNoaWNrZW5wYWludC1ub3QtaW5zdGFsbGVkXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBQbGVhc2UgbWFrZSBzdXJlIHRoYXQgeW91J3ZlIGluc3RhbGxlZCB0aGUgbGF0ZXN0IGRyaXZlcnMgZm9yIHlvdXIgdGFibGV0IGZyb20gdGhlIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj1cImh0dHA6Ly93d3cud2Fjb20uY29tL2VuLXVzL3N1cHBvcnQvcHJvZHVjdC1zdXBwb3J0L2RyaXZlcnNcIiB0YXJnZXQ9XCJfYmxhbmtcIj5XYWNvbSBkcml2ZXJzIHBhZ2U8L2E+LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhlbiByZXN0YXJ0IHlvdXIgYnJvd3Nlci5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzcz1cImNoaWNrZW5wYWludC1ub3Qtc3VwcG9ydGVkXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBZb3VyIGJyb3dzZXIgZG9lc24ndCBzdXBwb3J0IHRoZSBXYWNvbSB0YWJsZXQgcGx1Z2luLCBwbGVhc2UgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnkgb25lIG9mIHRoZSBicm93c2VycyBsaXN0ZWQgYWJvdmUgaW5zdGVhZC5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzcz1cImNoaWNrZW5wYWludC1zdXBwb3J0ZWQgYWxlcnQgYWxlcnQtc3VjY2Vzc1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVGhlIFdhY29tIHRhYmxldCBwbHVnaW4gaXMgaW5zdGFsbGVkIGFuZCB3b3JraW5nLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNoaWNrZW5wYWludC10YWJsZXQtc3VwcG9ydCBjaGlja2VucGFpbnQtcG9pbnRlcmV2ZW50cy1zdXBwb3J0XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoND5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEJ1aWx0LWluIHN1cHBvcnQgZm9yIG1vc3QgdGFibGV0cyA8c21hbGw+aW5jbHVkaW5nIFdhY29tIHRhYmxldHM8L3NtYWxsPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2g0PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY2hpY2tlbnBhaW50LXN1cHBvcnRlZC1icm93c2Vyc1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNoaWNrZW5wYWludC1zdXBwb3J0ZWQtYnJvd3NlclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZmEgZmEtaW50ZXJuZXQtZXhwbG9yZXJcIj48L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSUUgKFdpbmRvd3MgOClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjaGlja2VucGFpbnQtc3VwcG9ydGVkLWJyb3dzZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImZhIGZhLWVkZ2VcIj48L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRWRnZSAoV2luZG93cyAxMClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNoaWNrZW5wYWludC1zdXBwb3J0ZWQtYnJvd3NlclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZmEgZmEtZmlyZWZveFwiPjwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBGaXJlZm94ICg8YSBocmVmPVwiaHR0cHM6Ly9naXRodWIuY29tL3RoZW5pY2tkdWRlL2NoaWNrZW5wYWludC9ibG9iL21hc3Rlci9oZWxwL0ZpcmVmb3ggcHJlc3N1cmUgc3VwcG9ydC5tZFwiIHRhcmdldD1cIl9ibGFua1wiPmV4cGVyaW1lbnRhbCA8aSBjbGFzcz1cImdseXBoaWNvbiBnbHlwaGljb24tbmV3LXdpbmRvd1wiPjwvaT48L2E+KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY2hpY2tlbnBhaW50LXN1cHBvcnRlZC1icm93c2VyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJmYSBmYS1jaHJvbWVcIj48L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ2hyb21lIChjb21pbmcgc29vbilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3M9XCJjaGlja2VucGFpbnQtbm90LXN1cHBvcnRlZFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgWW91ciBicm93c2VyIGRvZXNuJ3QgaGF2ZSBidWlsdC1pbiBzdXBwb3J0IGZvciBkcmF3aW5nIHRhYmxldHMsIHBsZWFzZSB0cnlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uZSBvZiB0aGUgb3RoZXIgYnJvd3NlcnMgbGlzdGVkIGFib3ZlLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzPVwiY2hpY2tlbnBhaW50LXN1cHBvcnRlZCBhbGVydCBhbGVydC1zdWNjZXNzXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBZb3VyIGJyb3dzZXIgaGFzIGJ1aWx0LWluIHN1cHBvcnQgZm9yIGRyYXdpbmcgdGFibGV0cyFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgYCk7XG4gICAgXG4gICAgdmFyXG4gICAgICAgIHdhY29tU3VwcG9ydEVsZW0gPSAkKFwiLmNoaWNrZW5wYWludC13YWNvbS1zdXBwb3J0XCIsIGRpYWxvZyksXG4gICAgICAgIHBlU3VwcG9ydEVsZW0gPSAkKFwiLmNoaWNrZW5wYWludC1wb2ludGVyZXZlbnRzLXN1cHBvcnRcIiwgZGlhbG9nKSxcbiAgICAgICAgYm90aE9wdGlvbnNFbGVtID0gJChcIi5jaGlja2VucGFpbnQtdGFibGV0LXRoZXJlLWFyZS10d28tb3B0aW9uc1wiLCBkaWFsb2cpLFxuICAgICAgICBcbiAgICAgICAgd2Fjb21QcmVzZW50ID0gQ1BXYWNvbVRhYmxldC5nZXRSZWYoKS5pc1RhYmxldFByZXNlbnQoKSxcbiAgICAgICAgcGVTdXBwb3J0ZWQgPSAhIXdpbmRvdy5oYXNOYXRpdmVQb2ludGVyRXZlbnRzO1xuICAgIFxuICAgIHdhY29tU3VwcG9ydEVsZW0udG9nZ2xlQ2xhc3MoXCJzdXBwb3J0ZWRcIiwgd2Fjb21QcmVzZW50KTtcbiAgICBcbiAgICBpZiAod2Fjb21QcmVzZW50KSB7XG4gICAgICAgIC8vIERvbid0IGJvdGhlciBkaXNwbGF5aW5nIGluZm8gYWJvdXQgUG9pbnRlciBFdmVudHMgaWYgd2UgaGF2ZSB0aGUgV2Fjb20gcGx1Z2luIGluc3RhbGxlZFxuICAgICAgICBwZVN1cHBvcnRFbGVtLmhpZGUoKTtcbiAgICAgICAgYm90aE9wdGlvbnNFbGVtLmhpZGUoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICAvLyBDaHJvbWUgaGFzIGRyb3BwZWQgTlBBUEkgc3VwcG9ydCwgc28gdGhlIFdhY29tIHBsdWdpbiBjYW5ub3QgYmUgaW5zdGFsbGVkXG4gICAgICAgIGlmICgvQ2hyb21lL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSAmJiAhL09QUi8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KVxuICAgICAgICAgICAgICAgIHx8IC9pUGFkLy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpIHx8IC9pUGhvbmUvLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkpIHtcbiAgICAgICAgICAgIHdhY29tU3VwcG9ydEVsZW0uYWRkQ2xhc3MoXCJub3Qtc3VwcG9ydGVkXCIpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBEb24ndCBib3RoZXIgc2hvd2luZyB0aGUgV2Fjb20gcGx1Z2luIGRldGFpbHMgaWYgdGhpcyBicm93c2VyIHN1cHBvcnRzIHBvaW50ZXIgZXZlbnRzXG4gICAgICAgIGlmIChwZVN1cHBvcnRlZCkge1xuICAgICAgICAgICAgd2Fjb21TdXBwb3J0RWxlbS5oaWRlKCk7XG4gICAgICAgICAgICBib3RoT3B0aW9uc0VsZW0uaGlkZSgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIHBlU3VwcG9ydEVsZW0udG9nZ2xlQ2xhc3MoXCJzdXBwb3J0ZWRcIiwgcGVTdXBwb3J0ZWQpO1xuICAgIHBlU3VwcG9ydEVsZW0udG9nZ2xlQ2xhc3MoXCJub3Qtc3VwcG9ydGVkXCIsICFwZVN1cHBvcnRlZCk7XG5cbiAgICBkaWFsb2cubW9kYWwoe1xuICAgICAgICBzaG93OiBmYWxzZVxuICAgIH0pO1xuICAgIFxuICAgIC8vIEZpeCB0aGUgYmFja2Ryb3AgbG9jYXRpb24gaW4gdGhlIERPTSBieSByZXBhcmVudGluZyBpdCB0byB0aGUgY2hpY2tlbnBhaW50IGNvbnRhaW5lclxuICAgIGRpYWxvZy5kYXRhKFwiYnMubW9kYWxcIikuJGJvZHkgPSAkKHBhcmVudCk7XG4gICAgXG4gICAgcGFyZW50LmFwcGVuZENoaWxkKGRpYWxvZ1swXSk7XG5cbiAgICB0aGlzLnNob3cgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgZGlhbG9nLm1vZGFsKFwic2hvd1wiKTtcbiAgICB9O1xufSIsIi8qXG4gICAgQ2hpY2tlblBhaW50XG4gICAgXG4gICAgQ2hpY2tlblBhaW50IGlzIGEgdHJhbnNsYXRpb24gb2YgQ2hpYmlQYWludCBmcm9tIEphdmEgdG8gSmF2YVNjcmlwdFxuICAgIGJ5IE5pY2hvbGFzIFNoZXJsb2NrIC8gQ2hpY2tlbiBTbW9vdGhpZS5cbiAgICBcbiAgICBDaGliaVBhaW50IGlzIENvcHlyaWdodCAoYykgMjAwNi0yMDA4IE1hcmMgU2NoZWZlclxuXG4gICAgQ2hpY2tlblBhaW50IGlzIGZyZWUgc29mdHdhcmU6IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vciBtb2RpZnlcbiAgICBpdCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGFzIHB1Ymxpc2hlZCBieVxuICAgIHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb24sIGVpdGhlciB2ZXJzaW9uIDMgb2YgdGhlIExpY2Vuc2UsIG9yXG4gICAgKGF0IHlvdXIgb3B0aW9uKSBhbnkgbGF0ZXIgdmVyc2lvbi5cblxuICAgIENoaWNrZW5QYWludCBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLFxuICAgIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mXG4gICAgTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiAgU2VlIHRoZVxuICAgIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuXG5cbiAgICBZb3Ugc2hvdWxkIGhhdmUgcmVjZWl2ZWQgYSBjb3B5IG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZVxuICAgIGFsb25nIHdpdGggQ2hpY2tlblBhaW50LiBJZiBub3QsIHNlZSA8aHR0cDovL3d3dy5nbnUub3JnL2xpY2Vuc2VzLz4uXG4qL1xuXG5pbXBvcnQgQ1BHcmV5Qm1wIGZyb20gJy4uL2VuZ2luZS9DUEdyZXlCbXAnO1xuaW1wb3J0IENQTG9va1VwVGFibGUgZnJvbSAnLi4vZW5naW5lL0NQTG9va1VwVGFibGUnO1xuXG5pbXBvcnQgQ1BQYWxldHRlIGZyb20gJy4vQ1BQYWxldHRlJztcbmltcG9ydCBDUFNsaWRlciBmcm9tICcuL0NQU2xpZGVyJztcblxuZnVuY3Rpb24gd3JhcENoZWNrYm94V2l0aExhYmVsKGNoZWNrYm94LCB0aXRsZSkge1xuICAgIHZhclxuICAgICAgICBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLFxuICAgICAgICBsYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsYWJlbFwiKTtcblxuICAgIGRpdi5jbGFzc05hbWUgPSBcImNoZWNrYm94XCI7XG4gICAgXG4gICAgbGFiZWwuYXBwZW5kQ2hpbGQoY2hlY2tib3gpO1xuICAgIGxhYmVsLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHRpdGxlKSk7XG4gICAgXG4gICAgZGl2LmFwcGVuZENoaWxkKGxhYmVsKTtcbiAgICBcbiAgICByZXR1cm4gZGl2O1xufVxuXG5mdW5jdGlvbiBsb2FkVGV4dHVyZXModGV4dHVyZUZpbGVuYW1lLCB3aWR0aCwgaGVpZ2h0LCB0ZXh0dXJlQ291bnQsIHRoZW4pIHtcbiAgICB2YXJcbiAgICAgICAgaW1nID0gbmV3IEltYWdlKCksXG4gICAgICAgIHRleHR1cmVzID0gW107XG4gICAgXG4gICAgaW1nLm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXJcbiAgICAgICAgICAgIGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIiksXG4gICAgICAgICAgICBjYW52YXNDb250ZXh0ID0gY2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcbiAgICAgICAgXG4gICAgICAgIGNhbnZhcy53aWR0aCA9IGltZy53aWR0aDtcbiAgICAgICAgY2FudmFzLmhlaWdodCA9IGltZy5oZWlnaHQ7XG4gICAgICAgIFxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRleHR1cmVDb3VudDsgaSsrKSB7XG4gICAgICAgICAgICBjYW52YXNDb250ZXh0LmRyYXdJbWFnZShpbWcsIDAsIGkgKiBoZWlnaHQsIHdpZHRoLCBoZWlnaHQsIDAsIDAsIHdpZHRoLCBoZWlnaHQpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgICAgICBpbWFnZURhdGEgPSBjYW52YXNDb250ZXh0LmdldEltYWdlRGF0YSgwLCAwLCB3aWR0aCwgaGVpZ2h0KSxcbiAgICAgICAgICAgICAgICAgICAgdGV4dHVyZSA9IG5ldyBDUEdyZXlCbXAod2lkdGgsIGhlaWdodCk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gVGFrZSBqdXN0IHRoZSByZWQgY2hhbm5lbCBmcm9tIHRoZSBpbWFnZSB0byBmb3JtIHRoZSBuZXcgZ3JheXNjYWxlIHRleHR1cmVcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHdpZHRoICogaGVpZ2h0OyBqKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdGV4dHVyZS5kYXRhW2pdID0gaW1hZ2VEYXRhLmRhdGFbaiAqIDRdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB0ZXh0dXJlcy5wdXNoKHRleHR1cmUpO1xuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIC8vIFF1aWV0bHkgaWdub3JlIGVycm9ycyB0aGF0IG9jY3VyIHdoaWxlIGxvYWRpbmcgdGhlIGltYWdlIChlLmcuIGNyb3NzLW9yaWdpbiBzZWN1cml0eSBmYWlsdXJlcylcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgdGhlbih0ZXh0dXJlcyk7XG4gICAgfTtcbiAgICBcbiAgICBpbWcuc3JjID0gdGV4dHVyZUZpbGVuYW1lO1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBDUFRleHR1cmVQYWxldHRlKGNvbnRyb2xsZXIpIHtcbiAgICBDUFBhbGV0dGUuY2FsbCh0aGlzLCBjb250cm9sbGVyLCBcInRleHR1cmVzXCIsIFwiVGV4dHVyZXNcIik7XG4gICAgXG4gICAgdmFyXG4gICAgICAgIFRFWFRVUkVfUFJFVklFV19TSVpFID0gNjQsXG4gICAgICAgIFRFWFRVUkVfU1dBVENIX0JVVFRPTl9TSVpFID0gMzIsXG4gICAgXG4gICAgICAgIHRleHR1cmVzID0gW10sIC8vIEFycmF5IG9mIENQR3JleUJtcFxuICAgICAgICBzZWxlY3RlZFRleHR1cmUsIHByb2Nlc3NlZFRleHR1cmUsIC8vQm90aCBDUEdyZXlCbXBcblxuICAgICAgICBtaXJyb3IgPSBmYWxzZSwgaW52ZXJzZSA9IGZhbHNlLFxuICAgICAgICBcbiAgICAgICAgYnJpZ2h0bmVzcyA9IDAuMCwgY29udHJhc3QgPSAwLjAsXG4gICAgICAgIG9wdGlvbnNQYW5lbCxcbiAgICAgICAgdGV4dHVyZXNQYW5lbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksXG4gICAgICAgIFxuICAgICAgICBib2R5ID0gdGhpcy5nZXRCb2R5RWxlbWVudCgpO1xuXG4gICAgLyoqXG4gICAgICogQWRkIGFuIGFycmF5IG9mIHRleHR1cmVzIHRvIHRoZSBnbG9iYWwgdGV4dHVyZSBsaXN0LCBhbmQgYWRkIHN3YXRjaGVzIGZvciB0aGVtIHRvIHRoZSBVSS5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBhZGRUZXh0dXJlcyhuZXdUZXh0dXJlcykge1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG5ld1RleHR1cmVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICB0ZXh0dXJlID0gbmV3VGV4dHVyZXNbaV07XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRleHR1cmVzLnB1c2godGV4dHVyZSk7XG4gICAgXG4gICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICBidXR0b24gPSBuZXcgQ1BUZXh0dXJlU3dhdGNoKHRleHR1cmUsIFRFWFRVUkVfU1dBVENIX0JVVFRPTl9TSVpFLCBURVhUVVJFX1NXQVRDSF9CVVRUT05fU0laRSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGJ1dHRvbi5vbihcImNsaWNrXCIsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHNlbGVjdGVkVGV4dHVyZSA9IHRoaXMudGV4dHVyZTtcbiAgICAgICAgICAgICAgICB1cGRhdGVTZWxlY3RlZFRleHR1cmUoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB0ZXh0dXJlc1BhbmVsLmFwcGVuZENoaWxkKGJ1dHRvbi5nZXRFbGVtZW50KCkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8qKlxuICAgICAqIEdlbmVyYXRlIGFuZCByZXR1cm4gYW4gYXJyYXkgb2YgcHJvY2VkdXJhbGx5LWdlbmVyYXRlZCB0ZXh0dXJlc1xuICAgICAqIFxuICAgICAqIEByZXR1cm5zIENQR3JleUJtcFtdXG4gICAgICovXG4gICAgZnVuY3Rpb24gbWFrZVByb2NlZHVyYWxUZXh0dXJlcygpIHtcbiAgICAgICAgdmFyXG4gICAgICAgICAgICByZXN1bHQgPSBbbnVsbF07XG4gICAgICAgIFxuICAgICAgICB2YXJcbiAgICAgICAgICAgIHRleHR1cmUgPSBuZXcgQ1BHcmV5Qm1wKDIsIDIpO1xuICAgICAgICB0ZXh0dXJlLmRhdGFbMF0gPSAweEZGO1xuICAgICAgICB0ZXh0dXJlLmRhdGFbM10gPSAweEZGO1xuICAgICAgICByZXN1bHQucHVzaCh0ZXh0dXJlKTtcblxuICAgICAgICByZXN1bHQucHVzaChtYWtlRG90VGV4dHVyZSgyKSk7XG4gICAgICAgIHJlc3VsdC5wdXNoKG1ha2VEb3RUZXh0dXJlKDMpKTtcbiAgICAgICAgcmVzdWx0LnB1c2gobWFrZURvdFRleHR1cmUoNCkpO1xuICAgICAgICByZXN1bHQucHVzaChtYWtlRG90VGV4dHVyZSg2KSk7XG4gICAgICAgIHJlc3VsdC5wdXNoKG1ha2VEb3RUZXh0dXJlKDgpKTtcblxuICAgICAgICByZXN1bHQucHVzaChtYWtlVmVydExpbmVzVGV4dHVyZSgxLCAyKSk7XG4gICAgICAgIHJlc3VsdC5wdXNoKG1ha2VWZXJ0TGluZXNUZXh0dXJlKDIsIDQpKTtcblxuICAgICAgICByZXN1bHQucHVzaChtYWtlSG9yaXpMaW5lc1RleHR1cmUoMSwgMikpO1xuICAgICAgICByZXN1bHQucHVzaChtYWtlSG9yaXpMaW5lc1RleHR1cmUoMiwgNCkpO1xuXG4gICAgICAgIHJlc3VsdC5wdXNoKG1ha2VDaGVja2VyQm9hcmRUZXh0dXJlKDIpKTtcbiAgICAgICAgcmVzdWx0LnB1c2gobWFrZUNoZWNrZXJCb2FyZFRleHR1cmUoNCkpO1xuICAgICAgICByZXN1bHQucHVzaChtYWtlQ2hlY2tlckJvYXJkVGV4dHVyZSg4KSk7XG4gICAgICAgIHJlc3VsdC5wdXNoKG1ha2VDaGVja2VyQm9hcmRUZXh0dXJlKDE2KSk7XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSBzaXplIGludFxuICAgICAqIFxuICAgICAqIEByZXR1cm5zIENQR3JleUJtcFxuICAgICAqL1xuICAgIGZ1bmN0aW9uIG1ha2VEb3RUZXh0dXJlKHNpemUpIHtcbiAgICAgICAgdmFyXG4gICAgICAgICAgICB0ZXh0dXJlID0gbmV3IENQR3JleUJtcChzaXplLCBzaXplKTtcbiAgICAgICAgXG4gICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgc2l6ZSAqIHNpemU7IGkrKykge1xuICAgICAgICAgICAgdGV4dHVyZS5kYXRhW2ldID0gMHhGRjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGV4dHVyZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBNYWtlIGEgY2hlY2tlcmJvYXJkIHRleHR1cmUgb2YgdGhlIGdpdmVuIGRpbWVuc2lvbnMuXG4gICAgICogXG4gICAgICogQHBhcmFtIHNpemUgaW50XG4gICAgICogXG4gICAgICogQHJldHVybnMgQ1BHcmV5Qm1wXG4gICAgICovXG4gICAgZnVuY3Rpb24gbWFrZUNoZWNrZXJCb2FyZFRleHR1cmUoc2l6ZSkge1xuICAgICAgICB2YXJcbiAgICAgICAgICAgIHRleHR1cmVTaXplID0gMiAqIHNpemUsXG4gICAgICAgICAgICB0ZXh0dXJlID0gbmV3IENQR3JleUJtcCh0ZXh0dXJlU2l6ZSwgdGV4dHVyZVNpemUpO1xuICAgICAgICBcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0ZXh0dXJlU2l6ZTsgaSsrKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHRleHR1cmVTaXplOyBqKyspIHtcbiAgICAgICAgICAgICAgICB0ZXh0dXJlLmRhdGFbaSArIGogKiB0ZXh0dXJlU2l6ZV0gPSAoKH5+KGkgLyBzaXplKSArIH5+KGogLyBzaXplKSkgJSAyID09IDApID8gMCA6IDB4RkY7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHJldHVybiB0ZXh0dXJlO1xuICAgIH1cblxuICAgICAvKipcbiAgICAgICogTWFrZSBhIHRleHR1cmUgY29uc2lzdGluZyBvZiBhIHNlcmllcyBvZiBldmVubHktc3BhY2VkIHZlcnRpY2FsIGxpbmVzXG4gICAgICAqIFxuICAgICAgKiBAcGFyYW0gbGluZVNpemUgaW50XG4gICAgICAqIEBwYXJhbSBzaXplIGludFxuICAgICAgKiBcbiAgICAgICogQHJldHVybnMgQ1BHcmV5Qm1wXG4gICAgICAqL1xuICAgICBmdW5jdGlvbiBtYWtlVmVydExpbmVzVGV4dHVyZShsaW5lU2l6ZSwgc2l6ZSkge1xuICAgICAgICB2YXJcbiAgICAgICAgICAgIHRleHR1cmUgPSBuZXcgQ1BHcmV5Qm1wKHNpemUsIHNpemUpO1xuICAgICAgICBcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzaXplICogc2l6ZTsgaSsrKSB7XG4gICAgICAgICAgICBpZiAofn4oaSAlIHNpemUpID49IGxpbmVTaXplKSB7XG4gICAgICAgICAgICAgICAgdGV4dHVyZS5kYXRhW2ldID0gMHhGRjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHRleHR1cmU7XG4gICAgfVxuXG4gICAgIC8qKlxuICAgICAgKiBNYWtlIGEgdGV4dHVyZSBjb25zaXN0aW5nIG9mIGEgc2VyaWVzIG9mIGV2ZW5seS1zcGFjZWQgaG9yaXpvbnRhbCBsaW5lc1xuICAgICAgKlxuICAgICAgKiBAcGFyYW0gbGluZVNpemUgaW50XG4gICAgICAqIEBwYXJhbSBzaXplIGludFxuICAgICAgKiBcbiAgICAgICogQHJldHVybnMgQ1BHcmV5Qm1wXG4gICAgICAqL1xuICAgIGZ1bmN0aW9uIG1ha2VIb3JpekxpbmVzVGV4dHVyZShsaW5lU2l6ZSwgc2l6ZSkge1xuICAgICAgICB2YXJcbiAgICAgICAgICAgIHRleHR1cmUgPSBuZXcgQ1BHcmV5Qm1wKHNpemUsIHNpemUpO1xuICAgICAgICBcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzaXplICogc2l6ZTsgaSsrKSB7XG4gICAgICAgICAgICBpZiAoaSAvIHNpemUgPj0gbGluZVNpemUpIHtcbiAgICAgICAgICAgICAgICB0ZXh0dXJlLmRhdGFbaV0gPSAweEZGO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gdGV4dHVyZTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiB1cGRhdGVTZWxlY3RlZFRleHR1cmUoKSB7XG4gICAgICAgIGlmIChzZWxlY3RlZFRleHR1cmUgIT0gbnVsbCkge1xuICAgICAgICAgICAgcHJvY2Vzc2VkVGV4dHVyZSA9IHNlbGVjdGVkVGV4dHVyZS5jbG9uZSgpO1xuXG4gICAgICAgICAgICBpZiAobWlycm9yKSB7XG4gICAgICAgICAgICAgICAgcHJvY2Vzc2VkVGV4dHVyZS5taXJyb3JIb3Jpem9udGFsbHkoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgbHV0ID0gbmV3IENQTG9va1VwVGFibGUoKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgbHV0LmxvYWRCcmlnaHRuZXNzQ29udHJhc3QoYnJpZ2h0bmVzcywgY29udHJhc3QpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoaW52ZXJzZSkge1xuICAgICAgICAgICAgICAgIGx1dC5pbnZlcnQoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcHJvY2Vzc2VkVGV4dHVyZS5hcHBseUxVVChsdXQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcHJvY2Vzc2VkVGV4dHVyZSA9IG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICBjb250cm9sbGVyLmdldEFydHdvcmsoKS5zZXRCcnVzaFRleHR1cmUocHJvY2Vzc2VkVGV4dHVyZSk7XG4gICAgICAgIFxuICAgICAgICBpZiAob3B0aW9uc1BhbmVsICE9IG51bGwpIHtcbiAgICAgICAgICAgIG9wdGlvbnNQYW5lbC51cGRhdGVUZXh0dXJlKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgZnVuY3Rpb24gQ1BUZXh0dXJlT3B0aW9uc1BhbmVsKCkge1xuICAgICAgICB2YXJcbiAgICAgICAgICAgIHBhbmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSxcbiAgICAgICAgXG4gICAgICAgICAgICBjYkludmVyc2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIiksXG4gICAgICAgICAgICBjYk1pcnJvciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKSxcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgc2xCcmlnaHRuZXNzID0gbmV3IENQU2xpZGVyKDAsIDIwMCwgdHJ1ZSksXG4gICAgICAgICAgICBzbENvbnRyYXN0ID0gbmV3IENQU2xpZGVyKDAsIDIwMCwgdHJ1ZSksXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHNhbXBsZVN3YXRjaCA9IG5ldyBDUFRleHR1cmVTd2F0Y2gobnVsbCwgVEVYVFVSRV9QUkVWSUVXX1NJWkUsIFRFWFRVUkVfUFJFVklFV19TSVpFKSxcbiAgICAgICAgICAgIGJ0bkN1c3RvbWl6ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIiksXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRleHR1cmVDb250cm9sc1BhbmVsO1xuICAgICAgICBcbiAgICAgICAgZnVuY3Rpb24gdXBkYXRlUG9wb3ZlckNvbnRyb2xzKCkge1xuICAgICAgICAgICAgY2JJbnZlcnNlLmNoZWNrZWQgPSBpbnZlcnNlO1xuICAgICAgICAgICAgY2JNaXJyb3IuY2hlY2tlZCA9IG1pcnJvcjtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgc2xCcmlnaHRuZXNzLnNldFZhbHVlKGJyaWdodG5lc3MgKiAxMDAgKyAxMDApO1xuICAgICAgICAgICAgc2xDb250cmFzdC5zZXRWYWx1ZShjb250cmFzdCAqIDEwMCArIDEwMCk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGZ1bmN0aW9uIGJ1aWxkVGV4dHVyZUNvbnRyb2xzUGFuZWwoKSB7XG4gICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICBwYW5lbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG5cbiAgICAgICAgICAgIGNiSW52ZXJzZS50eXBlID0gXCJjaGVja2JveFwiO1xuICAgICAgICAgICAgY2JJbnZlcnNlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAgICAgaW52ZXJzZSA9IHRoaXMuY2hlY2tlZDtcbiAgICAgICAgICAgICAgICB1cGRhdGVTZWxlY3RlZFRleHR1cmUoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBwYW5lbC5hcHBlbmRDaGlsZCh3cmFwQ2hlY2tib3hXaXRoTGFiZWwoY2JJbnZlcnNlLCBcIkludmVyc2VcIikpO1xuXG4gICAgICAgICAgICBjYk1pcnJvci50eXBlID0gXCJjaGVja2JveFwiO1xuICAgICAgICAgICAgY2JNaXJyb3IuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgICAgICBtaXJyb3IgPSB0aGlzLmNoZWNrZWQ7XG4gICAgICAgICAgICAgICAgdXBkYXRlU2VsZWN0ZWRUZXh0dXJlKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgcGFuZWwuYXBwZW5kQ2hpbGQod3JhcENoZWNrYm94V2l0aExhYmVsKGNiTWlycm9yLCBcIk1pcnJvclwiKSk7XG5cbiAgICAgICAgICAgIHNsQnJpZ2h0bmVzcy50aXRsZSA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiQnJpZ2h0bmVzczogXCIgKyAodmFsdWUgLSAxMDApICsgXCIlXCI7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBzbEJyaWdodG5lc3Mub24oXCJ2YWx1ZUNoYW5nZVwiLCBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICAgICAgICAgIGJyaWdodG5lc3MgPSAodmFsdWUgLSAxMDApIC8gMTAwLjA7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgdXBkYXRlU2VsZWN0ZWRUZXh0dXJlKCk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgcGFuZWwuYXBwZW5kQ2hpbGQoc2xCcmlnaHRuZXNzLmdldEVsZW1lbnQoKSk7XG5cbiAgICAgICAgICAgIHNsQ29udHJhc3QudGl0bGUgPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBcIkNvbnRyYXN0OiBcIiArICh2YWx1ZSAtIDEwMCkgKyBcIiVcIjtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHNsQ29udHJhc3Qub24oXCJ2YWx1ZUNoYW5nZVwiLCBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICAgICAgICAgIGNvbnRyYXN0ID0gKHZhbHVlIC0gMTAwKSAvIDEwMDtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB1cGRhdGVTZWxlY3RlZFRleHR1cmUoKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBwYW5lbC5hcHBlbmRDaGlsZChzbENvbnRyYXN0LmdldEVsZW1lbnQoKSk7XG5cbiAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgIG9rYXlCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpLFxuICAgICAgICAgICAgICAgIHJlc2V0QnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgb2theUJ1dHRvbi5pbm5lckhUTUwgPSBcIk9rXCI7XG4gICAgICAgICAgICBva2F5QnV0dG9uLmNsYXNzTmFtZSA9IFwiYnRuIGJ0bi1wcmltYXJ5IGJ0bi1zbVwiO1xuICAgICAgICAgICAgb2theUJ1dHRvbi50eXBlID0gXCJidXR0b25cIjtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgb2theUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgICAgICQoYnRuQ3VzdG9taXplKS5wb3BvdmVyKCdoaWRlJyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgcGFuZWwuYXBwZW5kQ2hpbGQob2theUJ1dHRvbik7XG4gICAgICAgICAgICBwYW5lbC5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShcIiBcIikpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICByZXNldEJ1dHRvbi5pbm5lckhUTUwgPSBcIlJlc2V0XCI7XG4gICAgICAgICAgICByZXNldEJ1dHRvbi5jbGFzc05hbWUgPSBcImJ0biBidG4tZGVmYXVsdCBidG4tc21cIjtcbiAgICAgICAgICAgIHJlc2V0QnV0dG9uLnR5cGUgPSBcImJ1dHRvblwiO1xuXG4gICAgICAgICAgICByZXNldEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgICAgIGJyaWdodG5lc3MgPSAwO1xuICAgICAgICAgICAgICAgIGNvbnRyYXN0ID0gMDtcbiAgICAgICAgICAgICAgICBtaXJyb3IgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBpbnZlcnNlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgdXBkYXRlUG9wb3ZlckNvbnRyb2xzKCk7XG4gICAgICAgICAgICAgICAgdXBkYXRlU2VsZWN0ZWRUZXh0dXJlKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgcGFuZWwuYXBwZW5kQ2hpbGQocmVzZXRCdXR0b24pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB1cGRhdGVQb3BvdmVyQ29udHJvbHMoKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgcmV0dXJuIHBhbmVsO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBUT0RPIHVzZSBldmVudHMgaW5zdGVhZFxuICAgICAgICB0aGlzLnVwZGF0ZVRleHR1cmUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGJ0bkN1c3RvbWl6ZS5kaXNhYmxlZCA9IChwcm9jZXNzZWRUZXh0dXJlID09IG51bGwpO1xuICAgICAgICAgICAgc2FtcGxlU3dhdGNoLnNldFRleHR1cmUocHJvY2Vzc2VkVGV4dHVyZSk7XG4gICAgICAgIH07XG4gICAgICAgIFxuICAgICAgICB0aGlzLmdldEVsZW1lbnQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiBwYW5lbDtcbiAgICAgICAgfVxuXG4gICAgICAgIHBhbmVsLmNsYXNzTmFtZSA9IFwiY2hpY2tlbnBhaW50LXRleHR1cmUtb3B0aW9uc1wiO1xuICAgICAgICBwYW5lbC5hcHBlbmRDaGlsZChzYW1wbGVTd2F0Y2guZ2V0RWxlbWVudCgpKTtcblxuICAgICAgICBidG5DdXN0b21pemUudHlwZSA9IFwiYnV0dG9uXCI7XG4gICAgICAgIGJ0bkN1c3RvbWl6ZS5jbGFzc05hbWUgPSBcImJ0biBidG4tZGVmYXVsdCBidG4tc21cIjtcbiAgICAgICAgYnRuQ3VzdG9taXplLmlubmVySFRNTCA9IFwiQ3VzdG9taXplXCI7XG5cbiAgICAgICAgdGV4dHVyZUNvbnRyb2xzUGFuZWwgPSBidWlsZFRleHR1cmVDb250cm9sc1BhbmVsKCk7XG4gICAgICAgIFxuICAgICAgICAkKGJ0bkN1c3RvbWl6ZSlcbiAgICAgICAgICAgIC5wb3BvdmVyKHtcbiAgICAgICAgICAgICAgICBodG1sOiB0cnVlLFxuICAgICAgICAgICAgICAgIGNvbnRlbnQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGV4dHVyZUNvbnRyb2xzUGFuZWw7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB0cmlnZ2VyOiBcIm1hbnVhbFwiXG4gICAgICAgICAgICB9KS5cbiAgICAgICAgICAgIG9uKFwiY2xpY2tcIiwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgJCh0aGlzKS5wb3BvdmVyKFwidG9nZ2xlXCIpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICBwYW5lbC5hcHBlbmRDaGlsZChidG5DdXN0b21pemUpO1xuICAgICAgICBcbiAgICAgICAgdGhpcy51cGRhdGVUZXh0dXJlKCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gQ1BUZXh0dXJlU3dhdGNoKHRleHR1cmUsIHdpZHRoLCBoZWlnaHQpIHtcbiAgICAgICAgdmFyXG4gICAgICAgICAgICBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpLFxuICAgICAgICAgICAgY2FudmFzQ29udGV4dCA9IGNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIiksXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoYXQgPSB0aGlzO1xuXG4gICAgICAgIHRoaXMuc2V0VGV4dHVyZSA9IGZ1bmN0aW9uKHRleHR1cmUpIHtcbiAgICAgICAgICAgIHRoaXMudGV4dHVyZSA9IHRleHR1cmU7XG5cbiAgICAgICAgICAgIHRoaXMucGFpbnQoKTtcbiAgICAgICAgfTtcbiAgICAgICAgXG4gICAgICAgIHRoaXMuZ2V0RWxlbWVudCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIGNhbnZhcztcbiAgICAgICAgfTtcbiAgICAgICAgXG4gICAgICAgIHRoaXMucGFpbnQgPSBmdW5jdGlvbigpICB7XG4gICAgICAgICAgICBpZiAodGhpcy50ZXh0dXJlICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICBjYW52YXNDb250ZXh0LmZpbGxTdHlsZSA9IGNhbnZhc0NvbnRleHQuY3JlYXRlUGF0dGVybih0aGlzLnRleHR1cmUudG9DYW52YXMoKSwgXCJyZXBlYXRcIik7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNhbnZhc0NvbnRleHQuZmlsbFN0eWxlID0gJ3doaXRlJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhbnZhc0NvbnRleHQuZmlsbFJlY3QoMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTtcbiAgICAgICAgfTtcbiAgICAgICAgXG4gICAgICAgIGNhbnZhcy5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB0aGF0LmVtaXQoXCJjbGlja1wiKTtcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICBjYW52YXMud2lkdGggPSB3aWR0aDtcbiAgICAgICAgY2FudmFzLmhlaWdodCA9IGhlaWdodDtcbiAgICAgICAgXG4gICAgICAgIHRoaXMuc2V0VGV4dHVyZSh0ZXh0dXJlKTtcbiAgICB9XG4gICAgXG4gICAgQ1BUZXh0dXJlU3dhdGNoLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoRXZlbnRFbWl0dGVyLnByb3RvdHlwZSk7XG4gICAgQ1BUZXh0dXJlU3dhdGNoLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IENQVGV4dHVyZVN3YXRjaDtcbiAgICBcbiAgICBvcHRpb25zUGFuZWwgPSBuZXcgQ1BUZXh0dXJlT3B0aW9uc1BhbmVsKClcbiAgICBcbiAgICBib2R5LmFwcGVuZENoaWxkKG9wdGlvbnNQYW5lbC5nZXRFbGVtZW50KCkpO1xuXG4gICAgdGV4dHVyZXNQYW5lbC5jbGFzc05hbWUgPSAnY2hpY2tlbnBhaW50LXRleHR1cmUtc3dhdGNoZXMnO1xuXG4gICAgYm9keS5hcHBlbmRDaGlsZCh0ZXh0dXJlc1BhbmVsKTtcbiAgICBcbiAgICBhZGRUZXh0dXJlcyhtYWtlUHJvY2VkdXJhbFRleHR1cmVzKCkpO1xuICAgIFxuICAgIGxvYWRUZXh0dXJlcyhjb250cm9sbGVyLmdldFJlc291cmNlc1Jvb3QoKSArIFwiZ2Z4L3RleHR1cmVzMzIucG5nXCIsIDMyLCAzMiwgMiwgZnVuY3Rpb24obG9hZGVkVGV4dHVyZXMpIHtcbiAgICAgICAgYWRkVGV4dHVyZXMobG9hZGVkVGV4dHVyZXMpO1xuICAgIH0pO1xufVxuXG5DUFRleHR1cmVQYWxldHRlLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoQ1BQYWxldHRlLnByb3RvdHlwZSk7XG5DUFRleHR1cmVQYWxldHRlLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IENQVGV4dHVyZVBhbGV0dGU7XG4iLCIvKlxuICAgIENoaWNrZW5QYWludFxuICAgIFxuICAgIENoaWNrZW5QYWludCBpcyBhIHRyYW5zbGF0aW9uIG9mIENoaWJpUGFpbnQgZnJvbSBKYXZhIHRvIEphdmFTY3JpcHRcbiAgICBieSBOaWNob2xhcyBTaGVybG9jayAvIENoaWNrZW4gU21vb3RoaWUuXG4gICAgXG4gICAgQ2hpYmlQYWludCBpcyBDb3B5cmlnaHQgKGMpIDIwMDYtMjAwOCBNYXJjIFNjaGVmZXJcblxuICAgIENoaWNrZW5QYWludCBpcyBmcmVlIHNvZnR3YXJlOiB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3IgbW9kaWZ5XG4gICAgaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBhcyBwdWJsaXNoZWQgYnlcbiAgICB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uLCBlaXRoZXIgdmVyc2lvbiAzIG9mIHRoZSBMaWNlbnNlLCBvclxuICAgIChhdCB5b3VyIG9wdGlvbikgYW55IGxhdGVyIHZlcnNpb24uXG5cbiAgICBDaGlja2VuUGFpbnQgaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCxcbiAgICBidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZlxuICAgIE1FUkNIQU5UQUJJTElUWSBvciBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS4gIFNlZSB0aGVcbiAgICBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9yZSBkZXRhaWxzLlxuXG4gICAgWW91IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2VcbiAgICBhbG9uZyB3aXRoIENoaWNrZW5QYWludC4gSWYgbm90LCBzZWUgPGh0dHA6Ly93d3cuZ251Lm9yZy9saWNlbnNlcy8+LlxuKi9cblxuaW1wb3J0IENQUGFsZXR0ZSBmcm9tICcuL0NQUGFsZXR0ZSc7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIENQVG9vbFBhbGV0dGUoY3BDb250cm9sbGVyKSB7XG4gICAgQ1BQYWxldHRlLmNhbGwodGhpcywgY3BDb250cm9sbGVyLCBcInRvb2xcIiwgXCJUb29sc1wiKTtcbiAgICBcbiAgICB2YXIgXG4gICAgICAgIHRoYXQgPSB0aGlzLFxuXG4gICAgICAgIGJ1dHRvbnMgPSBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBcImNoaWNrZW5wYWludC10b29sLXJlY3Qtc2VsZWN0aW9uXCIsXG4gICAgICAgICAgICAgICAgY29tbWFuZDogXCJDUFJlY3RTZWxlY3Rpb25cIixcbiAgICAgICAgICAgICAgICB0b29sVGlwOiBcIk1hcnF1ZWVcIixcbiAgICAgICAgICAgICAgICBzaG9ydGN1dDogXCJtXCJcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBcImNoaWNrZW5wYWludC10b29sLW1vdmVcIixcbiAgICAgICAgICAgICAgICBjb21tYW5kOiBcIkNQTW92ZVRvb2xcIixcbiAgICAgICAgICAgICAgICB0b29sVGlwOiBcIk1vdmUgdG9vbFwiLFxuICAgICAgICAgICAgICAgIHNob3J0Y3V0OiBcInZcIlxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IFwiY2hpY2tlbnBhaW50LXRvb2wtZmxvb2QtZmlsbFwiLFxuICAgICAgICAgICAgICAgIGNvbW1hbmQ6IFwiQ1BGbG9vZEZpbGxcIixcbiAgICAgICAgICAgICAgICB0b29sVGlwOiBcIkZsb29kIGZpbGxcIixcbiAgICAgICAgICAgICAgICBzaG9ydGN1dDogXCJmXCJcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBcImNoaWNrZW5wYWludC10b29sLWdyYWRpZW50LWZpbGxcIixcbiAgICAgICAgICAgICAgICBjb21tYW5kOiBcIkNQR3JhZGllbnRGaWxsXCIsXG4gICAgICAgICAgICAgICAgdG9vbFRpcDogXCJHcmFkaWVudCBmaWxsXCIsXG4gICAgICAgICAgICAgICAgc2hvcnRjdXQ6IFwiZ1wiXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJjaGlja2VucGFpbnQtdG9vbC1jb2xvci1waWNrZXJcIixcbiAgICAgICAgICAgICAgICBjb21tYW5kOiBcIkNQQ29sb3JQaWNrZXJcIixcbiAgICAgICAgICAgICAgICB0b29sVGlwOiBcIkNvbG9yIHBpY2tlclwiLFxuICAgICAgICAgICAgICAgIHNob3J0Y3V0OiBcImlcIlxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IFwiY2hpY2tlbnBhaW50LXRvb2wtcm90YXRlLWNhbnZhc1wiLFxuICAgICAgICAgICAgICAgIGNvbW1hbmQ6IFwiQ1BSb3RhdGVDYW52YXNcIixcbiAgICAgICAgICAgICAgICBjb21tYW5kRG91YmxlQ2xpY2s6IFwiQ1BSZXNldENhbnZhc1JvdGF0aW9uXCIsXG4gICAgICAgICAgICAgICAgdG9vbFRpcDogXCJSb3RhdGUgY2FudmFzXCJcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBcImNoaWNrZW5wYWludC10b29sLXBlbmNpbFwiLFxuICAgICAgICAgICAgICAgIGNvbW1hbmQ6IFwiQ1BQZW5jaWxcIixcbiAgICAgICAgICAgICAgICB0b29sVGlwOiBcIlBlbmNpbFwiLFxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IFwiY2hpY2tlbnBhaW50LXRvb2wtcGVuXCIsXG4gICAgICAgICAgICAgICAgY29tbWFuZDogXCJDUFBlblwiLFxuICAgICAgICAgICAgICAgIHRvb2xUaXA6IFwiUGVuXCIsXG4gICAgICAgICAgICAgICAgc2VsZWN0ZWQ6IHRydWUgLy8gVE9ETyBhIGJldHRlciBtZWNoYW5pc20gZm9yIHRoZSBjb250cm9sbGVyIHRvIGxldCB1cyBrbm93IHRoZSBpbml0aWFsIHRvb2wgXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJjaGlja2VucGFpbnQtdG9vbC1haXJicnVzaFwiLFxuICAgICAgICAgICAgICAgIGNvbW1hbmQ6IFwiQ1BBaXJicnVzaFwiLFxuICAgICAgICAgICAgICAgIHRvb2xUaXA6IFwiQWlyYnJ1c2hcIlxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IFwiY2hpY2tlbnBhaW50LXRvb2wtd2F0ZXJcIixcbiAgICAgICAgICAgICAgICBjb21tYW5kOiBcIkNQV2F0ZXJcIixcbiAgICAgICAgICAgICAgICB0b29sVGlwOiBcIldhdGVycGFpbnRcIlxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IFwiY2hpY2tlbnBhaW50LXRvb2wtZXJhc2VyXCIsXG4gICAgICAgICAgICAgICAgY29tbWFuZDogXCJDUEVyYXNlclwiLFxuICAgICAgICAgICAgICAgIHRvb2xUaXA6IFwiRXJhc2VyXCIsXG4gICAgICAgICAgICAgICAgc2hvcnRjdXQ6IFwiZVwiXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJjaGlja2VucGFpbnQtdG9vbC1zb2Z0LWVyYXNlclwiLFxuICAgICAgICAgICAgICAgIGNvbW1hbmQ6IFwiQ1BTb2Z0RXJhc2VyXCIsXG4gICAgICAgICAgICAgICAgdG9vbFRpcDogXCJTb2Z0IGVyYXNlclwiXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJjaGlja2VucGFpbnQtdG9vbC1zbXVkZ2VcIixcbiAgICAgICAgICAgICAgICBjb21tYW5kOiBcIkNQU211ZGdlXCIsXG4gICAgICAgICAgICAgICAgdG9vbFRpcDogXCJTbXVkZ2VcIlxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IFwiY2hpY2tlbnBhaW50LXRvb2wtYmxlbmRlclwiLFxuICAgICAgICAgICAgICAgIGNvbW1hbmQ6IFwiQ1BCbGVuZGVyXCIsXG4gICAgICAgICAgICAgICAgdG9vbFRpcDogXCJCbGVuZGVyXCJcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBcImNoaWNrZW5wYWludC10b29sLWRvZGdlXCIsXG4gICAgICAgICAgICAgICAgY29tbWFuZDogXCJDUERvZGdlXCIsXG4gICAgICAgICAgICAgICAgdG9vbFRpcDogXCJEb2RnZVwiLFxuICAgICAgICAgICAgICAgIHNob3J0Y3V0OiBcIm9cIlxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IFwiY2hpY2tlbnBhaW50LXRvb2wtYnVyblwiLFxuICAgICAgICAgICAgICAgIGNvbW1hbmQ6IFwiQ1BCdXJuXCIsXG4gICAgICAgICAgICAgICAgdG9vbFRpcDogXCJCdXJuXCIsXG4gICAgICAgICAgICAgICAgc2hvcnRjdXQ6IFwicFwiXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJjaGlja2VucGFpbnQtdG9vbC1ibHVyXCIsXG4gICAgICAgICAgICAgICAgY29tbWFuZDogXCJDUEJsdXJcIixcbiAgICAgICAgICAgICAgICB0b29sVGlwOiBcIkJsdXJcIlxuICAgICAgICAgICAgfVxuICAgICAgICBdLFxuICAgICAgICBsaXN0RWxlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ1bFwiKTtcbiAgICBcbiAgICBmdW5jdGlvbiBidXR0b25DbGlja2VkKGUpIHtcbiAgICAgICAgaWYgKHRoaXMubm9kZU5hbWUgPT0gXCJMSVwiKSB7XG4gICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICBidXR0b24gPSBidXR0b25zW3BhcnNlSW50KHRoaXMuZ2V0QXR0cmlidXRlKFwiZGF0YS1idXR0b25JbmRleFwiKSwgMTApXTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgJChcImxpXCIsIGxpc3RFbGVtKS5yZW1vdmVDbGFzcyhcInNlbGVjdGVkXCIpO1xuICAgICAgICAgICAgJCh0aGlzKS5hZGRDbGFzcyhcInNlbGVjdGVkXCIpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjcENvbnRyb2xsZXIuYWN0aW9uUGVyZm9ybWVkKHthY3Rpb246IGJ1dHRvbi5jb21tYW5kfSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBidWlsZEJ1dHRvbnMoKSB7XG4gICAgICAgIHZhclxuICAgICAgICAgICAgYm9keSA9IHRoYXQuZ2V0Qm9keUVsZW1lbnQoKTtcbiAgICAgICAgXG4gICAgICAgIGxpc3RFbGVtLmNsYXNzTmFtZSA9IFwiY2hpY2tlbnBhaW50LXRvb2xzIGxpc3QtdW5zdHlsZWRcIjtcbiAgICAgICAgXG4gICAgICAgIGZvciAodmFyIGkgaW4gYnV0dG9ucykge1xuICAgICAgICAgICAgKGZ1bmN0aW9uKGkpIHtcbiAgICAgICAgICAgICAgICB2YXIgXG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvbiA9IGJ1dHRvbnNbaV0sXG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvbkVsZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGlcIik7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgYnV0dG9uRWxlbS5jbGFzc05hbWUgPSBcImNoaWNrZW5wYWludC10b29sYmFyLWJ1dHRvbiBcIiArIGJ1dHRvbi5jbGFzc05hbWU7XG4gICAgICAgICAgICAgICAgYnV0dG9uRWxlbS5zZXRBdHRyaWJ1dGUoXCJkYXRhLWJ1dHRvbkluZGV4XCIsIGkpO1xuICAgICAgICAgICAgICAgIGJ1dHRvbkVsZW0udGl0bGUgPSBidXR0b24udG9vbFRpcDtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBpZiAoYnV0dG9uLnNob3J0Y3V0KSB7XG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvbkVsZW0udGl0bGUgKz0gXCIgKFwiICsgYnV0dG9uLnNob3J0Y3V0LnRvVXBwZXJDYXNlKCkgKyBcIilcIjtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGtleShidXR0b24uc2hvcnRjdXQsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYnV0dG9uQ2xpY2tlZC5jYWxsKGJ1dHRvbkVsZW0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBpZiAoYnV0dG9uLnNlbGVjdGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvbkVsZW0uY2xhc3NOYW1lID0gYnV0dG9uRWxlbS5jbGFzc05hbWUgKyBcIiBzZWxlY3RlZFwiO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBsaXN0RWxlbS5hcHBlbmRDaGlsZChidXR0b25FbGVtKTtcbiAgICAgICAgICAgIH0pKGkpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAkKGxpc3RFbGVtKS5vbihcImNsaWNrXCIsIFwibGlcIiwgYnV0dG9uQ2xpY2tlZCk7XG4gICAgICAgIFxuICAgICAgICBsaXN0RWxlbS5hZGRFdmVudExpc3RlbmVyKFwiZGJsY2xpY2tcIiwgZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgaWYgKHRoaXMubm9kZU5hbWUgPT0gXCJMSVwiKSB7XG4gICAgICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvbiA9IGJ1dHRvbnNbcGFyc2VJbnQodGhpcy5nZXRBdHRyaWJ1dGUoXCJkYXRhLWJ1dHRvbkluZGV4XCIpLCAxMCldO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGlmIChidXR0b24uY29tbWFuZERvdWJsZUNsaWNrKSB7XG4gICAgICAgICAgICAgICAgICAgIGNwQ29udHJvbGxlci5hY3Rpb25QZXJmb3JtZWQoe2FjdGlvbjogYnV0dG9uLmNvbW1hbmREb3VibGVDbGlja30pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICBib2R5LmFwcGVuZENoaWxkKGxpc3RFbGVtKTtcbiAgICB9XG4gICAgXG4gICAgYnVpbGRCdXR0b25zKCk7XG59XG5cbkNQVG9vbFBhbGV0dGUucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShDUFBhbGV0dGUucHJvdG90eXBlKTtcbkNQVG9vbFBhbGV0dGUucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gQ1BUb29sUGFsZXR0ZTtcbiIsIi8qIFxuICogQnkgTmljaG9sYXMgU2hlcmxvY2sgPG4uc2hlcmxvY2tAZ21haWwuY29tPlxuICogXG4gKiBSZWxlYXNlZCB1bmRlciB0aGUgV1RGUEx2MiBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9XVEZQTFxuICovXG5cbmltcG9ydCBBcnJheURhdGFTdHJlYW0gZnJvbSBcIi4vQXJyYXlEYXRhU3RyZWFtXCI7XG5cbnZhciBcbiAgICBBQ09fQ09MT1JTUEFDRV9SR0IgPSAwLFxuICAgIEFDT19DT0xPUlNQQUNFX0hTQiA9IDEsXG4gICAgQUNPX0NPTE9SU1BBQ0VfQ01ZSyA9IDIsXG4gICAgQUNPX0NPTE9SU1BBQ0VfTEFCID0gNyxcbiAgICBBQ09fQ09MT1JTUEFDRV9HUkFZU0NBTEUgPSA4O1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBBZG9iZUNvbG9yVGFibGUoKSB7XG59XG5cbi8qKlxuICogUmVhZCBhbiAuYWNvIChBZG9iZSBDT2xvcikgc3dhdGNoZXMgZmlsZSBhbmQgcmV0dXJuIGFuIGFycmF5IG9mIFJHQiBjb2xvcnMuXG4gKiBcbiAqIFN1cHBvcnRzIHZlcnNpb24gMSBwYWxldHRlcywgb25seSBSR0IgZm9ybWF0LlxuICogXG4gKiBAcGFyYW0gaW5wdXQgQSBVaW50OEFycmF5IG9mIHRoZSAuYWNvIGZpbGUgY29udGVudHNcbiAqIEByZXR1cm4gQW4gYXJyYXkgb2YgY29sb3Vycywgb3IgbnVsbCBpZiB0aGUgZmlsZSB3YXMgbm90IHN1cHBvcnRlZC5cbiAqL1xuQWRvYmVDb2xvclRhYmxlLnByb3RvdHlwZS5yZWFkID0gZnVuY3Rpb24oaW5wdXQpIHtcbiAgICBpZiAoaW5wdXQgPT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgXG4gICAgdmFyXG4gICAgICAgIHN0cmVhbSA9IG5ldyBBcnJheURhdGFTdHJlYW0obmV3IFVpbnQ4QXJyYXkoaW5wdXQpKSxcbiAgICAgICAgdmVyc2lvbiwgY291bnQsXG4gICAgICAgIHJlc3VsdCA9IFtdO1xuXG4gICAgdmVyc2lvbiA9IHN0cmVhbS5yZWFkVTE2QkUoKTtcbiAgICBpZiAodmVyc2lvbiAhPSAxKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBjb3VudCA9IHN0cmVhbS5yZWFkVTE2QkUoKTtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY291bnQ7IGkrKykge1xuICAgICAgICB2YXJcbiAgICAgICAgICAgIGNvbG91cnNwYWNlID0gc3RyZWFtLnJlYWRVMTZCRSgpO1xuXG4gICAgICAgIGlmIChjb2xvdXJzcGFjZSAhPSBBQ09fQ09MT1JTUEFDRV9SR0IpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlOyAvLyBEcm9wIHVuc3VwcG9ydGVkIGNvbG91cnMgc2lsZW50bHlcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFNjYWxlIGJhY2sgZG93biBmcm9tIDE2LWJpdCB0byA4LWJpdFxuICAgICAgICB2YXJcbiAgICAgICAgICAgIHIgPSAoc3RyZWFtLnJlYWRVMTZCRSgpICogMjU1KSAvIDY1NTM1LFxuICAgICAgICAgICAgZyA9IChzdHJlYW0ucmVhZFUxNkJFKCkgKiAyNTUpIC8gNjU1MzUsXG4gICAgICAgICAgICBiID0gKHN0cmVhbS5yZWFkVTE2QkUoKSAqIDI1NSkgLyA2NTUzNTtcbiAgICAgICAgXG4gICAgICAgIHN0cmVhbS5yZWFkVTE2QkUoKTsgLy8gdGhpcmQgdmFsdWUgdW51c2VkXG5cbiAgICAgICAgcmVzdWx0LnB1c2gociA8PCAxNiB8IGcgPDwgOCB8IGIpO1xuICAgIH1cblxuICAgIHJldHVybiByZXN1bHQ7XG59O1xuXG4vKipcbiAqIFdyaXRlIGFuIC5hY28gKEFkb2JlIENPbG9yKSBzd2F0Y2hlcyBmaWxlIG9mIHRoZSBnaXZlbiBhcnJheSBvZiBSR0IgY29sb3VycyAoY29sb3JzIGFyZSBpbnRlZ2VycyB3aXRoIHRoZVxuICogYmx1ZSBjaGFubmVsIGluIHRoZSBsZWFzdC1zaWduaWZpY2FudCBwb3NpdGlvbikuXG4gKi9cbkFkb2JlQ29sb3JUYWJsZS5wcm90b3R5cGUud3JpdGUgPSBmdW5jdGlvbihjb2xvdXJzKSB7XG4gICAgdmFyXG4gICAgICAgIGJ1ZmZlciA9IG5ldyBVaW50OEFycmF5KDIgKiAyICsgY29sb3Vycy5sZW5ndGggKiAxMCksXG4gICAgICAgIHN0cmVhbSA9IG5ldyBBcnJheURhdGFTdHJlYW0oYnVmZmVyKTtcbiAgICBcbiAgICBzdHJlYW0ud3JpdGVVMTZCRSgxKTsgLy8gVmVyc2lvbiAxXG4gICAgc3RyZWFtLndyaXRlVTE2QkUoY29sb3Vycy5sZW5ndGgpOyAvLyBOdW1iZXIgb2YgY29sb3Vyc1xuICAgIFxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY29sb3Vycy5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXJcbiAgICAgICAgICAgIGNvbG91ciA9IGNvbG91cnNbaV07XG4gICAgICAgIFxuICAgICAgICBzdHJlYW0ud3JpdGVVMTZCRShBQ09fQ09MT1JTUEFDRV9SR0IpO1xuXG4gICAgICAgIC8vIFNjYWxlIHVwIGNvbG91cnMgdG8gMTYtYml0cyAoNjU1MzUvMjU1ID0gMjU3KVxuICAgICAgICBzdHJlYW0ud3JpdGVVMTZCRSgoKGNvbG91ciA+PiAxNikgJiAweEZGKSAqIDI1Nyk7XG4gICAgICAgIHN0cmVhbS53cml0ZVUxNkJFKCgoY29sb3VyID4+IDgpICYgMHhGRikgKiAyNTcpO1xuICAgICAgICBzdHJlYW0ud3JpdGVVMTZCRSgoY29sb3VyICYgMHhGRikgKiAyNTcpO1xuICAgICAgICBzdHJlYW0ud3JpdGVVMTZCRSgwKTtcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIHN0cmVhbS5nZXRBc0RhdGFBcnJheSgpO1xufTtcbiIsIi8qKlxuICogQSB0b29sIGZvciBwcmVzZW50aW5nIGEgVWludDhBcnJheSBhcyBhIHN0cmVhbSBmb3IgcmVhZGluZyBhbmQgd3JpdGluZyBzb21lIHNpbXBsZSBkYXRhIHR5cGVzLlxuICogXG4gKiBCeSBOaWNob2xhcyBTaGVybG9jayA8bi5zaGVybG9ja0BnbWFpbC5jb20+IDIwMTYsIHJlbGVhc2VkIHVuZGVyIHRoZSBXVEZQTCBsaWNlbnNlLlxuICovXG5cbnZhciBFT0YgPSAtMTtcblxuZnVuY3Rpb24gc2lnbkV4dGVuZDE2Qml0KHdvcmQpIHtcbiAgICAvL0lmIHNpZ24gYml0IGlzIHNldCwgZmlsbCB0aGUgdG9wIGJpdHMgd2l0aCAxcyB0byBzaWduLWV4dGVuZFxuICAgIHJldHVybiAod29yZCAmIDB4ODAwMCkgPyAod29yZCB8IDB4RkZGRjAwMDApIDogd29yZDtcbn1cblxuZnVuY3Rpb24gc2lnbkV4dGVuZDhCaXQoYnl0ZSkge1xuICAgIC8vSWYgc2lnbiBiaXQgaXMgc2V0LCBmaWxsIHRoZSB0b3AgYml0cyB3aXRoIDFzIHRvIHNpZ24tZXh0ZW5kXG4gICAgcmV0dXJuIChieXRlICYgMHg4MCkgPyAoYnl0ZSB8IDB4RkZGRkZGMDApIDogYnl0ZTtcbn1cblxuLyoqXG4gKiBDcmVhdGUgYSBzdHJlYW0gb24gZXhpc3RpbmcgYXJyYXkgb2YgdW5zaWduZWQgYnl0ZSBkYXRhIChpLmUuIGhvcGVmdWxseSBVaW50OEFycmF5KS5cbiAqIFxuICogQHBhcmFtIGRhdGEgVWludDhBcnJheSB0byBzdHJlYW0gZGF0YSBmcm9tXG4gKiBAcGFyYW0gc3RhcnQgVGhlIGluZGV4IG9mIHRoZSBieXRlIGluIHRoZSBhcnJheSB0aGF0IHdpbGwgYmUgcmVhZCBmaXJzdCwgb3IgbGVhdmUgdW5kZWZpbmVkIHRvIGJlZ2luIGF0IHRoZVxuICogICAgICAgICAgICAgIGJlZ2lubmluZyBvZiB0aGUgYXJyYXlcbiAqIEBwYXJhbSBlbmQgVGhlIGluZGV4IG9mIHRoZSBlbmQgb2YgdGhlIHN0cmVhbSwgb3IgbGVhdmUgdW5kZWZpbmVkIHRvIHVzZSB0aGUgZW5kIG9mIHRoZSBhcnJheSBhcyB0aGUgZW5kIG9mXG4gKiAgICAgICAgICAgIHRoZSBzdHJlYW0uXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIEFycmF5RGF0YVN0cmVhbShkYXRhLCBzdGFydCwgZW5kKSB7XG4gICAgdGhpcy5kYXRhID0gZGF0YTtcbiAgICB0aGlzLmVvZiA9IGZhbHNlO1xuICAgIHRoaXMuc3RhcnQgPSBzdGFydCA9PT0gdW5kZWZpbmVkID8gMCA6IHN0YXJ0O1xuICAgIHRoaXMuZW5kID0gZW5kID09PSB1bmRlZmluZWQgPyBkYXRhLmxlbmd0aCA6IGVuZDtcbiAgICB0aGlzLnBvcyA9IHRoaXMuc3RhcnQ7XG59O1xuXG4vKipcbiAqIFJlYWQgYSBzaW5nbGUgYnl0ZSBmcm9tIHRoZSBzdHJlYW0gYW5kIHR1cm4gaXQgaW50byBhIEphdmFTY3JpcHQgc3RyaW5nIChhc3N1bWluZyBBU0NJSSkuXG4gKiBcbiAqIEByZXR1cm5zIFN0cmluZyBjb250YWluaW5nIG9uZSBjaGFyYWN0ZXIsIG9yIEVPRiBpZiB0aGUgZW5kIG9mIGZpbGUgd2FzIHJlYWNoZWQgKGVvZiBmbGFnXG4gKiBpcyBzZXQpLlxuICovXG5BcnJheURhdGFTdHJlYW0ucHJvdG90eXBlLnJlYWRDaGFyID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKHRoaXMucG9zIDwgdGhpcy5lbmQpIHtcbiAgICAgICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUodGhpcy5kYXRhW3RoaXMucG9zKytdKTtcbiAgICB9XG5cbiAgICB0aGlzLmVvZiA9IHRydWU7XG4gICAgcmV0dXJuIEVPRjtcbn07XG5cbi8qKlxuICogUmVhZCBvbmUgdW5zaWduZWQgYnl0ZSBmcm9tIHRoZSBzdHJlYW1cbiAqIFxuICogQHJldHVybnMgVW5zaWduZWQgYnl0ZSwgb3IgRU9GIGlmIHRoZSBlbmQgb2YgZmlsZSB3YXMgcmVhY2hlZCAoZW9mIGZsYWcgaXMgc2V0KS5cbiAqL1xuQXJyYXlEYXRhU3RyZWFtLnByb3RvdHlwZS5yZWFkQnl0ZSA9IGZ1bmN0aW9uKCkge1xuICAgIGlmICh0aGlzLnBvcyA8IHRoaXMuZW5kKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRhdGFbdGhpcy5wb3MrK107XG4gICAgfVxuXG4gICAgdGhpcy5lb2YgPSB0cnVlO1xuICAgIHJldHVybiBFT0Y7XG59O1xuXG4vL1N5bm9ueW06XG5BcnJheURhdGFTdHJlYW0ucHJvdG90eXBlLnJlYWRVOCA9IEFycmF5RGF0YVN0cmVhbS5wcm90b3R5cGUucmVhZEJ5dGU7XG5cbkFycmF5RGF0YVN0cmVhbS5wcm90b3R5cGUucmVhZFM4ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHNpZ25FeHRlbmQ4Qml0KHRoaXMucmVhZEJ5dGUoKSk7XG59O1xuXG5BcnJheURhdGFTdHJlYW0ucHJvdG90eXBlLnVucmVhZENoYXIgPSBmdW5jdGlvbihjKSB7XG4gICAgdGhpcy5wb3MtLTtcbn07XG4gICAgXG5BcnJheURhdGFTdHJlYW0ucHJvdG90eXBlLnBlZWtDaGFyID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKHRoaXMucG9zIDwgdGhpcy5lbmQpIHtcbiAgICAgICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUodGhpcy5kYXRhW3RoaXMucG9zXSk7XG4gICAgfVxuXG4gICAgdGhpcy5lb2YgPSB0cnVlO1xuICAgIHJldHVybiBFT0Y7XG59O1xuXG5BcnJheURhdGFTdHJlYW0ucHJvdG90eXBlLnJlYWRTdHJpbmcgPSBmdW5jdGlvbihsZW5ndGgpIHtcbiAgICB2YXIgXG4gICAgICAgIGNoYXJzID0gbmV3IEFycmF5KGxlbmd0aCksXG4gICAgICAgIGk7XG4gICAgXG4gICAgZm9yIChpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNoYXJzW2ldID0gdGhpcy5yZWFkQ2hhcigpO1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4gY2hhcnMuam9pbihcIlwiKTtcbn07XG5cbkFycmF5RGF0YVN0cmVhbS5wcm90b3R5cGUucmVhZFMxNiA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBcbiAgICAgICAgYjEgPSB0aGlzLnJlYWRCeXRlKCksXG4gICAgICAgIGIyID0gdGhpcy5yZWFkQnl0ZSgpO1xuICAgIFxuICAgIHJldHVybiBzaWduRXh0ZW5kMTZCaXQoKGIxIDw8IDgpIHwgYjIpOyBcbn07XG5cbkFycmF5RGF0YVN0cmVhbS5wcm90b3R5cGUucmVhZFUxNkJFID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIFxuICAgICAgICBiMSA9IHRoaXMucmVhZEJ5dGUoKSxcbiAgICAgICAgYjIgPSB0aGlzLnJlYWRCeXRlKCk7XG4gICAgXG4gICAgcmV0dXJuIChiMSA8PCA4KSB8IGIyOyBcbn07XG5cbkFycmF5RGF0YVN0cmVhbS5wcm90b3R5cGUucmVhZFUxNkxFID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIFxuICAgICAgICBiMSA9IHRoaXMucmVhZEJ5dGUoKSxcbiAgICAgICAgYjIgPSB0aGlzLnJlYWRCeXRlKCk7XG4gICAgXG4gICAgcmV0dXJuIChiMiA8PCA4KSB8IGIxOyBcbn07XG5cbkFycmF5RGF0YVN0cmVhbS5wcm90b3R5cGUucmVhZFUzMkJFID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIFxuICAgICAgICBiMSA9IHRoaXMucmVhZEJ5dGUoKSxcbiAgICAgICAgYjIgPSB0aGlzLnJlYWRCeXRlKCksXG4gICAgICAgIGIzID0gdGhpcy5yZWFkQnl0ZSgpLFxuICAgICAgICBiNCA9IHRoaXMucmVhZEJ5dGUoKTtcbiAgICByZXR1cm4gKChiMSA8PCAyNCkgfCAoYjIgPDwgMTYpIHwgKGIzIDw8IDgpIHwgYjQpID4+PiAwOyBcbn07XG5cbkFycmF5RGF0YVN0cmVhbS5wcm90b3R5cGUucmVhZFUzMkxFID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIFxuICAgICAgICBiMSA9IHRoaXMucmVhZEJ5dGUoKSxcbiAgICAgICAgYjIgPSB0aGlzLnJlYWRCeXRlKCksXG4gICAgICAgIGIzID0gdGhpcy5yZWFkQnl0ZSgpLFxuICAgICAgICBiNCA9IHRoaXMucmVhZEJ5dGUoKTtcbiAgICByZXR1cm4gKChiNCA8PCAyNCkgfCAoYjMgPDwgMTYpIHwgKGIyIDw8IDgpIHwgYjEpID4+PiAwOyBcbn07XG5cbkFycmF5RGF0YVN0cmVhbS5wcm90b3R5cGUucmVhZEJ5dGVzID0gZnVuY3Rpb24oY291bnQpIHtcbiAgICB2YXJcbiAgICAgICAgcmVzdWx0ID0gdGhpcy5kYXRhLnN1YmFycmF5KHRoaXMucG9zLCB0aGlzLnBvcyArIGNvdW50KTtcbiAgICBcbiAgICB0aGlzLnBvcyArPSBjb3VudDtcbiAgICBcbiAgICBpZiAodGhpcy5wb3MgPiB0aGlzLmVuZCkge1xuICAgICAgICB0aGlzLmVvZiA9IHRydWU7XG4gICAgfVxuICAgIFxuICAgIHJldHVybiByZXN1bHQ7XG59XG5cbkFycmF5RGF0YVN0cmVhbS5wcm90b3R5cGUuc2tpcCA9IGZ1bmN0aW9uKG51bUJ5dGVzKSB7XG4gICAgdGhpcy5wb3MgKz0gbnVtQnl0ZXM7XG4gICAgXG4gICAgaWYgKHRoaXMucG9zID4gdGhpcy5lbmQpIHtcbiAgICAgICAgdGhpcy5lb2YgPSB0cnVlO1xuICAgIH1cbn07XG5cbkFycmF5RGF0YVN0cmVhbS5wcm90b3R5cGUuc2VlayA9IGZ1bmN0aW9uKG9mZnNldCkge1xuICAgIHRoaXMucG9zID0gb2Zmc2V0O1xufTtcblxuQXJyYXlEYXRhU3RyZWFtLnByb3RvdHlwZS53cml0ZUJ5dGVzID0gZnVuY3Rpb24oYXJyKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdGhpcy5kYXRhW3RoaXMucG9zKytdID0gYXJyW2ldO1xuICAgIH1cbn07XG5cbkFycmF5RGF0YVN0cmVhbS5wcm90b3R5cGUud3JpdGVCeXRlID0gZnVuY3Rpb24oYikge1xuICAgIHRoaXMuZGF0YVt0aGlzLnBvcysrXSA9IGI7XG59O1xuXG4vL1N5bm9ueW06XG5BcnJheURhdGFTdHJlYW0ucHJvdG90eXBlLndyaXRlVTggPSBBcnJheURhdGFTdHJlYW0ucHJvdG90eXBlLndyaXRlQnl0ZTtcblxuQXJyYXlEYXRhU3RyZWFtLnByb3RvdHlwZS53cml0ZVUxNkxFID0gZnVuY3Rpb24odSkge1xuICAgIHRoaXMuZGF0YVt0aGlzLnBvcysrXSA9IHU7XG4gICAgdGhpcy5kYXRhW3RoaXMucG9zKytdID0gdSA+PiA4O1xufTtcblxuQXJyYXlEYXRhU3RyZWFtLnByb3RvdHlwZS53cml0ZVUxNkJFID0gZnVuY3Rpb24odSkge1xuICAgIHRoaXMuZGF0YVt0aGlzLnBvcysrXSA9IHUgPj4gODtcbiAgICB0aGlzLmRhdGFbdGhpcy5wb3MrK10gPSB1O1xufTtcblxuQXJyYXlEYXRhU3RyZWFtLnByb3RvdHlwZS53cml0ZVUzMkJFID0gZnVuY3Rpb24odSkge1xuICAgIHRoaXMuZGF0YVt0aGlzLnBvcysrXSA9IHUgPj4gMjQ7XG4gICAgdGhpcy5kYXRhW3RoaXMucG9zKytdID0gdSA+PiAxNjtcbiAgICB0aGlzLmRhdGFbdGhpcy5wb3MrK10gPSB1ID4+IDg7XG4gICAgdGhpcy5kYXRhW3RoaXMucG9zKytdID0gdTtcbn07XG5cbkFycmF5RGF0YVN0cmVhbS5wcm90b3R5cGUud3JpdGVVMzJMRSA9IGZ1bmN0aW9uKHUpIHtcbiAgICB0aGlzLmRhdGFbdGhpcy5wb3MrK10gPSB1O1xuICAgIHRoaXMuZGF0YVt0aGlzLnBvcysrXSA9IHUgPj4gODtcbiAgICB0aGlzLmRhdGFbdGhpcy5wb3MrK10gPSB1ID4+IDE2O1xuICAgIHRoaXMuZGF0YVt0aGlzLnBvcysrXSA9IHUgPj4gMjQ7XG59O1xuXG5BcnJheURhdGFTdHJlYW0ucHJvdG90eXBlLndyaXRlRG91YmxlQkUgPSBmdW5jdGlvbihkKSB7XG4gICAgdmFyIFxuICAgICAgICBieXRlcyA9IG5ldyBVaW50OEFycmF5KG5ldyBGbG9hdDY0QXJyYXkoW2RdKS5idWZmZXIpO1xuICAgIFxuICAgIGZvciAodmFyIGkgPSBieXRlcy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgICB0aGlzLndyaXRlQnl0ZShieXRlc1tpXSk7XG4gICAgfVxufTtcblxuQXJyYXlEYXRhU3RyZWFtLnByb3RvdHlwZS53cml0ZUZsb2F0QkUgPSBmdW5jdGlvbihkKSB7XG4gICAgdmFyIFxuICAgICAgICBieXRlcyA9IG5ldyBVaW50OEFycmF5KG5ldyBGbG9hdDMyQXJyYXkoW2RdKS5idWZmZXIpO1xuICAgIFxuICAgIGZvciAodmFyIGkgPSBieXRlcy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgICB0aGlzLndyaXRlQnl0ZShieXRlc1tpXSk7XG4gICAgfVxufTtcblxuLyoqXG4gKiBXcml0ZSBhbiBBU0NJSSBzdHJpbmcgdG8gdGhlIHN0cmVhbVxuICovXG5BcnJheURhdGFTdHJlYW0ucHJvdG90eXBlLndyaXRlU3RyaW5nID0gZnVuY3Rpb24ocykge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcy5sZW5ndGg7IGkrKykge1xuICAgICAgICB0aGlzLmRhdGFbdGhpcy5wb3MrK10gPSBzLmNoYXJDb2RlQXQoaSk7XG4gICAgfVxufTtcblxuLyoqXG4gKiBXcml0ZSB0aGUgZ2l2ZW4gdW5zaWduZWQgMzItYml0IGludGVnZXIgdG8gdGhlIHN0cmVhbSBpbiBiaWctZW5kaWFuIG9yZGVyIHVzaW5nIHRoZSBnaXZlbiBieXRlIHdpZHRoLlxuICogTm8gZXJyb3IgY2hlY2tpbmcgaXMgcGVyZm9ybWVkIHRvIGVuc3VyZSB0aGF0IHRoZSBzdXBwbGllZCB3aWR0aCBpcyBjb3JyZWN0IGZvciB0aGUgaW50ZWdlci5cbiAqIFxuICogT21pdCB0aGUgd2lkdGggcGFyYW1ldGVyIHRvIGhhdmUgaXQgZGV0ZXJtaW5lZCBhdXRvbWF0aWNhbGx5IGZvciB5b3UuXG4gKiBcbiAqIEBwYXJhbSB1IFVuc2lnbmVkIGludGVnZXIgdG8gYmUgd3JpdHRlblxuICogQHBhcmFtIHdpZHRoIE51bWJlciBvZiBieXRlcyB0byB3cml0ZSB0byB0aGUgc3RyZWFtXG4gKi9cbkFycmF5RGF0YVN0cmVhbS5wcm90b3R5cGUud3JpdGVVbnNpZ25lZEludEJFID0gZnVuY3Rpb24odSwgd2lkdGgpIHtcbiAgICBpZiAod2lkdGggPT09IHVuZGVmaW5lZCkge1xuICAgICAgICB3aWR0aCA9IHRoaXMubWVhc3VyZVVuc2lnbmVkSW50KHUpO1xuICAgIH1cbiAgICBcbiAgICAvLyBFYWNoIGNhc2UgZmFsbHMgdGhyb3VnaDpcbiAgICBzd2l0Y2ggKHdpZHRoKSB7XG4gICAgICAgIGNhc2UgNTpcbiAgICAgICAgICAgIHRoaXMud3JpdGVVOChNYXRoLmZsb29yKHUgLyA0Mjk0OTY3Mjk2KSk7IC8vIE5lZWQgdG8gdXNlIGRpdmlzaW9uIHRvIGFjY2VzcyA+MzIgYml0cyBvZiBmbG9hdGluZyBwb2ludCB2YXJcbiAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgdGhpcy53cml0ZVU4KHUgPj4gMjQpO1xuICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICB0aGlzLndyaXRlVTgodSA+PiAxNik7XG4gICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgIHRoaXMud3JpdGVVOCh1ID4+IDgpO1xuICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICB0aGlzLndyaXRlVTgodSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgdGhyb3cgbmV3IFJ1bnRpbWVFeGNlcHRpb24oXCJCYWQgVUlOVCBzaXplIFwiICsgd2lkdGgpO1xuICAgIH1cbn07XG5cbi8qKlxuICogUmV0dXJuIHRoZSBudW1iZXIgb2YgYnl0ZXMgbmVlZGVkIHRvIGhvbGQgdGhlIG5vbi16ZXJvIGJpdHMgb2YgdGhlIGdpdmVuIHVuc2lnbmVkIGludGVnZXIuXG4gKi9cbkFycmF5RGF0YVN0cmVhbS5wcm90b3R5cGUubWVhc3VyZVVuc2lnbmVkSW50ID0gZnVuY3Rpb24odmFsKSB7XG4gICAgLy8gRm9yY2UgdG8gMzItYml0IHVuc2lnbmVkIGludGVnZXJcbiAgICBpZiAodmFsIDwgKDEgPDwgOCkpIHtcbiAgICAgICAgcmV0dXJuIDE7XG4gICAgfSBlbHNlIGlmICh2YWwgPCAoMSA8PCAxNikpIHtcbiAgICAgICAgcmV0dXJuIDI7XG4gICAgfSBlbHNlIGlmICh2YWwgPCAoMSA8PCAyNCkpIHtcbiAgICAgICAgcmV0dXJuIDM7XG4gICAgfSBlbHNlIGlmICh2YWwgPCA0Mjk0OTY3Mjk2KSB7XG4gICAgICAgIHJldHVybiA0O1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiA1O1xuICAgIH1cbn07XG5cbi8qKlxuICogUmV0dXJuIGEgdmlldyBvbiB0aGUgcG9ydGlvbiBvZiB0aGUgYnVmZmVyIGZyb20gdGhlIGJlZ2lubmluZyB0byB0aGUgY3VycmVudCBzZWVrIHBvc2l0aW9uIGFzIGEgVWludDhBcnJheS5cbiAqL1xuQXJyYXlEYXRhU3RyZWFtLnByb3RvdHlwZS5nZXRBc0RhdGFBcnJheSA9IGZ1bmN0aW9uKCkge1xuICAgIGlmICh0aGlzLnBvcyA8IHRoaXMuZGF0YS5ieXRlTGVuZ3RoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRhdGEuc3ViYXJyYXkoMCwgdGhpcy5wb3MpO1xuICAgIH0gZWxzZSBpZiAodGhpcy5wb3MgPT0gdGhpcy5kYXRhLmJ5dGVMZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0YTtcbiAgICB9IGVsc2Uge1xuICAgICAgICB0aHJvdyBcIkFycmF5RGF0YVN0cmVhbSdzIHBvcyBsaWVzIGJleW9uZCBlbmQgb2YgYnVmZmVyXCI7IFxuICAgICAgICAvLyBDaGFuY2UgaXMgcHJldHR5IGdvb2QgdGhhdCB5b3Ugb3ZlcmZsb3dlZCB0aGUgZW5kIG9mIHRoZSBidWZmZXIgZHVyaW5nIHdyaXRpbmcgYW5kIHlvdXIgZmlsZSBpcyB0cmFzaCBcbiAgICB9XG59O1xuXG5BcnJheURhdGFTdHJlYW0ucHJvdG90eXBlLkVPRiA9IEVPRjsiLCIvKlxuICAgIENoaWNrZW5QYWludFxuICAgIFxuICAgIENoaWNrZW5QYWludCBpcyBhIHRyYW5zbGF0aW9uIG9mIENoaWJpUGFpbnQgZnJvbSBKYXZhIHRvIEphdmFTY3JpcHRcbiAgICBieSBOaWNob2xhcyBTaGVybG9jayAvIENoaWNrZW4gU21vb3RoaWUuXG4gICAgXG4gICAgQ2hpYmlQYWludCBpcyBDb3B5cmlnaHQgKGMpIDIwMDYtMjAwOCBNYXJjIFNjaGVmZXJcblxuICAgIENoaWNrZW5QYWludCBpcyBmcmVlIHNvZnR3YXJlOiB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3IgbW9kaWZ5XG4gICAgaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBhcyBwdWJsaXNoZWQgYnlcbiAgICB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uLCBlaXRoZXIgdmVyc2lvbiAzIG9mIHRoZSBMaWNlbnNlLCBvclxuICAgIChhdCB5b3VyIG9wdGlvbikgYW55IGxhdGVyIHZlcnNpb24uXG5cbiAgICBDaGlja2VuUGFpbnQgaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCxcbiAgICBidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZlxuICAgIE1FUkNIQU5UQUJJTElUWSBvciBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS4gIFNlZSB0aGVcbiAgICBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9yZSBkZXRhaWxzLlxuXG4gICAgWW91IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2VcbiAgICBhbG9uZyB3aXRoIENoaWNrZW5QYWludC4gSWYgbm90LCBzZWUgPGh0dHA6Ly93d3cuZ251Lm9yZy9saWNlbnNlcy8+LlxuKi9cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gQ1BCZXppZXIoKSB7XG5cbiAgICAvLyBIb3cgdG8gdXNlIHRoaXMgY2xhc3M6XG4gICAgLy9cbiAgICAvLyAxIC0gc2V0IHRoZSA0IHBvaW50cyBjb29yZGluYXRlcyAoeDAtMywgeTAtMylcbiAgICAvLyB0d28gb3B0aW9uczpcbiAgICAvLyAyYSAtIGNhbGwgaW5pdCgpIHdpdGggZGVzaXJlZCBkdCB0aGVuIHJlYWQgdGhlIGN1cnJlbnQgY29vcmRpbmF0ZSAoQngsIEJ5KSBhbmQgdXNlIG5leHRQb2ludCgpIHRvIGNvbXB1dGUgdGhlXG4gICAgLy8gbmV4dCBwb2ludFxuICAgIC8vIDJiIC0gdXNlIG9uZSBvZiB0aGUgXCJjb21wdXRlXCIgbWV0aG9kcyB0byBjb21wdXRlIHRoZSB2YWx1ZXMgZm9yIHRoZSB3aG9sZSBjdXJ2ZSBpbiBvbmUgc3RlcFxuXG4gICAgLy8gVGhlIDQgcG9pbnRzIGNvb3JkaW5hdGVzXG4gICAgdGhpcy54MCA9IHRoaXMueTAgPSB0aGlzLngxID0gdGhpcy55MSA9IHRoaXMueDIgPSB0aGlzLnkyID0gdGhpcy54MyA9IHRoaXMueTMgPSAwLjA7XG5cbiAgICAvLyB1c2VkIHRvIGNvbXB1dGUgdGhlIEJlemllciBjdXJ2ZSB3aXRoIHRoZSBmb3J3YXJkIGRpZmZlcmVuY2VzIG1ldGhvZFxuICAgIHZhclxuICAgICAgICBCeCwgZEJ4LCBkZEJ4LCBkZGRCeCxcbiAgICAgICAgQnksIGRCeSwgZGRCeSwgZGRkQnksXG4gICAgICAgIFxuICAgICAgICB0aGF0ID0gdGhpcztcblxuICAgIGZ1bmN0aW9uIGluaXQoZHQpIHtcbiAgICAgICAgLy8gSW1wbGVtZW50cyBhIGZhc3QgZGVncmVlLTMgQmV6aWVyIGN1cnZlIHVzaW5nIHRoZSBmb3J3YXJkIGRpZmZlcmVuY2VzIG1ldGhvZFxuICAgICAgICAvL1xuICAgICAgICAvLyBSZWZlcmVuY2UgZm9yIHRoaXMgYWxnb3JpdGhtOlxuICAgICAgICAvLyBcIkN1cnZlcyBhbmQgU3VyZmFjZXMgZm9yIENvbXB1dGVyIEdyYXBoaWNzXCIgYnkgRGF2aWQgU2Fsb21vbiwgcGFnZSAxODlcblxuICAgICAgICB2YXJcbiAgICAgICAgICAgIHExID0gMy4wICogZHQsXG4gICAgICAgICAgICBxMiA9IHExICogZHQsXG4gICAgICAgICAgICBxMyA9IGR0ICogZHQgKiBkdCxcbiAgICAgICAgICAgIHE0ID0gMi4wICogcTIsXG4gICAgICAgICAgICBxNSA9IDYuMCAqIHEzLFxuICAgICAgICAgICAgcTZ4ID0gdGhhdC54MCAtIDIuMCAqIHRoYXQueDEgKyB0aGF0LngyLFxuICAgICAgICAgICAgcTZ5ID0gdGhhdC55MCAtIDIuMCAqIHRoYXQueTEgKyB0aGF0LnkyLFxuICAgICAgICAgICAgcTd4ID0gMy4wICogKHRoYXQueDEgLSB0aGF0LngyKSAtIHRoYXQueDAgKyB0aGF0LngzLFxuICAgICAgICAgICAgcTd5ID0gMy4wICogKHRoYXQueTEgLSB0aGF0LnkyKSAtIHRoYXQueTAgKyB0aGF0LnkzO1xuXG4gICAgICAgIEJ4ID0gdGhhdC54MDtcbiAgICAgICAgQnkgPSB0aGF0LnkwO1xuXG4gICAgICAgIGRCeCA9ICh0aGF0LngxIC0gdGhhdC54MCkgKiBxMSArIHE2eCAqIHEyICsgcTd4ICogcTM7XG4gICAgICAgIGRCeSA9ICh0aGF0LnkxIC0gdGhhdC55MCkgKiBxMSArIHE2eSAqIHEyICsgcTd5ICogcTM7XG5cbiAgICAgICAgZGRCeCA9IHE2eCAqIHE0ICsgcTd4ICogcTU7XG4gICAgICAgIGRkQnkgPSBxNnkgKiBxNCArIHE3eSAqIHE1O1xuXG4gICAgICAgIGRkZEJ4ID0gcTd4ICogcTU7XG4gICAgICAgIGRkZEJ5ID0gcTd5ICogcTU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRmlsbCB0aGUgZ2l2ZW4geCx5IGFycmF5cyB3aXRoIGEgc2VyaWVzIG9mIHBvaW50cyBvbiB0aGUgY3VydmUuXG4gICAgICogXG4gICAgICogQHBhcmFtIHggaW50W11cbiAgICAgKiBAcGFyYW0geSBpbnRbXVxuICAgICAqIEBwYXJhbSBlbGVtZW50cyBpbnQgQ291bnQgb2YgZWxlbWVudHMgdG8gZmlsbCB4IGFuZCB5IGFycmF5c1xuICAgICAqL1xuICAgIHRoaXMuY29tcHV0ZSA9IGZ1bmN0aW9uKHgsIHksIGVsZW1lbnRzKSB7XG4gICAgICAgIGluaXQoMS4wIC8gZWxlbWVudHMpO1xuXG4gICAgICAgIHhbMF0gPSB+fkJ4O1xuICAgICAgICB5WzBdID0gfn5CeTtcbiAgICAgICAgXG4gICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgZWxlbWVudHM7IGkrKykge1xuICAgICAgICAgICAgQnggKz0gZEJ4O1xuICAgICAgICAgICAgQnkgKz0gZEJ5O1xuICAgICAgICAgICAgZEJ4ICs9IGRkQng7XG4gICAgICAgICAgICBkQnkgKz0gZGRCeTtcbiAgICAgICAgICAgIGRkQnggKz0gZGRkQng7XG4gICAgICAgICAgICBkZEJ5ICs9IGRkZEJ5O1xuXG4gICAgICAgICAgICB4W2ldID0gfn5CeDtcbiAgICAgICAgICAgIHlbaV0gPSB+fkJ5O1xuICAgICAgICB9XG4gICAgfTtcbn0iLCIvKlxuICAgIENoaWNrZW5QYWludFxuICAgIFxuICAgIENoaWNrZW5QYWludCBpcyBhIHRyYW5zbGF0aW9uIG9mIENoaWJpUGFpbnQgZnJvbSBKYXZhIHRvIEphdmFTY3JpcHRcbiAgICBieSBOaWNob2xhcyBTaGVybG9jayAvIENoaWNrZW4gU21vb3RoaWUuXG4gICAgXG4gICAgQ2hpYmlQYWludCBpcyBDb3B5cmlnaHQgKGMpIDIwMDYtMjAwOCBNYXJjIFNjaGVmZXJcblxuICAgIENoaWNrZW5QYWludCBpcyBmcmVlIHNvZnR3YXJlOiB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3IgbW9kaWZ5XG4gICAgaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBhcyBwdWJsaXNoZWQgYnlcbiAgICB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uLCBlaXRoZXIgdmVyc2lvbiAzIG9mIHRoZSBMaWNlbnNlLCBvclxuICAgIChhdCB5b3VyIG9wdGlvbikgYW55IGxhdGVyIHZlcnNpb24uXG5cbiAgICBDaGlja2VuUGFpbnQgaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCxcbiAgICBidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZlxuICAgIE1FUkNIQU5UQUJJTElUWSBvciBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS4gIFNlZSB0aGVcbiAgICBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9yZSBkZXRhaWxzLlxuXG4gICAgWW91IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2VcbiAgICBhbG9uZyB3aXRoIENoaWNrZW5QYWludC4gSWYgbm90LCBzZWUgPGh0dHA6Ly93d3cuZ251Lm9yZy9saWNlbnNlcy8+LlxuKi9cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gQ1BDb2xvcihyZ2IpIHtcbiAgICB2YXJcbiAgICAgICAgdGhhdCA9IHRoaXM7XG4gICAgXG4gICAgdGhpcy5yZ2IgPSAwOyAvLyBpbiBSR0IgYnl0ZSBvcmRlclxuICAgIFxuICAgIHRoaXMuaHVlID0gMDtcbiAgICB0aGlzLnNhdHVyYXRpb24gPSAwO1xuICAgIHRoaXMudmFsdWUgPSAwO1xuICAgIFxuICAgIGZ1bmN0aW9uIHJnYlRvSHN2KCkge1xuICAgICAgICB2YXJcbiAgICAgICAgICAgIHIgPSAodGhhdC5yZ2IgPj4gMTYpICYgMHhmZixcbiAgICAgICAgICAgIGcgPSAodGhhdC5yZ2IgPj4gOCkgJiAweGZmLFxuICAgICAgICAgICAgYiA9IHRoYXQucmdiICYgMHhmZjtcblxuICAgICAgICAvLyBWYWx1ZVxuICAgICAgICB0aGF0LnZhbHVlID0gTWF0aC5tYXgociwgTWF0aC5tYXgoZywgYikpO1xuXG4gICAgICAgIC8vIFNhdHVyYXRpb25cbiAgICAgICAgdmFyIFxuICAgICAgICAgICAgbWluaSA9IE1hdGgubWluKHIsIE1hdGgubWluKGcsIGIpKTtcbiAgICAgICAgXG4gICAgICAgIGlmICh0aGF0LnZhbHVlID09IDApIHtcbiAgICAgICAgICAgIHRoYXQuc2F0dXJhdGlvbiA9IDA7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGF0LnNhdHVyYXRpb24gPSB+figodGhhdC52YWx1ZSAtIG1pbmkpIC8gdGhhdC52YWx1ZSAqIDI1NSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBIdWVcbiAgICAgICAgaWYgKHRoYXQuc2F0dXJhdGlvbiA9PSAwKSB7XG4gICAgICAgICAgICB0aGF0Lmh1ZSA9IDA7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB2YXIgXG4gICAgICAgICAgICAgICAgY3IgPSAodGhhdC52YWx1ZSAtIHIpIC8gKHRoYXQudmFsdWUgLSBtaW5pKSxcbiAgICAgICAgICAgICAgICBjZyA9ICh0aGF0LnZhbHVlIC0gZykgLyAodGhhdC52YWx1ZSAtIG1pbmkpLFxuICAgICAgICAgICAgICAgIGNiID0gKHRoYXQudmFsdWUgLSBiKSAvICh0aGF0LnZhbHVlIC0gbWluaSk7XG5cbiAgICAgICAgICAgIHZhciBcbiAgICAgICAgICAgICAgICBfaHVlID0gMDtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKHRoYXQudmFsdWUgPT0gcikge1xuICAgICAgICAgICAgICAgIF9odWUgPSBjYiAtIGNnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoYXQudmFsdWUgPT0gZykge1xuICAgICAgICAgICAgICAgIF9odWUgPSAyICsgY3IgLSBjYjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGF0LnZhbHVlID09IGIpIHtcbiAgICAgICAgICAgICAgICBfaHVlID0gNCArIGNnIC0gY3I7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIF9odWUgKj0gNjA7XG4gICAgICAgICAgICBpZiAoX2h1ZSA8IDApIHtcbiAgICAgICAgICAgICAgICBfaHVlICs9IDM2MDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhhdC5odWUgPSB+fl9odWU7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBoc3ZUb1JnYigpIHtcbiAgICAgICAgLy8gbm8gc2F0dXJhdGlvbiBtZWFucyBpdCdzIGp1c3QgYSBzaGFkZSBvZiBncmV5XG4gICAgICAgIGlmICh0aGF0LnNhdHVyYXRpb24gPT0gMCkge1xuICAgICAgICAgICAgdGhhdC5yZ2IgPSAodGhhdC52YWx1ZSA8PCAxNikgfCAodGhhdC52YWx1ZSA8PCA4KSB8IHRoYXQudmFsdWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB2YXIgXG4gICAgICAgICAgICAgICAgZiA9IHRoYXQuaHVlIC8gNjA7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGYgPSBmIC0gTWF0aC5mbG9vcihmKTtcbiAgICBcbiAgICAgICAgICAgIHZhciBcbiAgICAgICAgICAgICAgICBzID0gdGhhdC5zYXR1cmF0aW9uIC8gMjU1LFxuICAgICAgICAgICAgICAgIG0gPSB+fih0aGF0LnZhbHVlICogKDEgLSBzKSksXG4gICAgICAgICAgICAgICAgbiA9IH5+KHRoYXQudmFsdWUgKiAoMSAtIHMgKiBmKSksXG4gICAgICAgICAgICAgICAgayA9IH5+KHRoYXQudmFsdWUgKiAoMSAtIHMgKiAoMSAtIGYpKSk7XG4gICAgXG4gICAgICAgICAgICBzd2l0Y2ggKH5+KHRoYXQuaHVlIC8gNjApKSB7XG4gICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgdGhhdC5yZ2IgPSAodGhhdC52YWx1ZSA8PCAxNikgfCAoayA8PCA4KSB8IG07XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgdGhhdC5yZ2IgPSAobiA8PCAxNikgfCAodGhhdC52YWx1ZSA8PCA4KSB8IG07XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgdGhhdC5yZ2IgPSAobSA8PCAxNikgfCAodGhhdC52YWx1ZSA8PCA4KSB8IGs7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgdGhhdC5yZ2IgPSAobSA8PCAxNikgfCAobiA8PCA4KSB8IHRoYXQudmFsdWU7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICAgICAgdGhhdC5yZ2IgPSAoayA8PCAxNikgfCAobSA8PCA4KSB8IHRoYXQudmFsdWU7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDU6XG4gICAgICAgICAgICAgICAgdGhhdC5yZ2IgPSAodGhhdC52YWx1ZSA8PCAxNikgfCAobSA8PCA4KSB8IG47XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHRoYXQucmdiID0gMDsgLy8gaW52YWxpZCBodWVcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuZ2V0UmdiID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJnYjtcbiAgICB9O1xuICAgIFxuICAgIHRoaXMuZ2V0U2F0dXJhdGlvbiA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zYXR1cmF0aW9uO1xuICAgIH07XG5cbiAgICB0aGlzLmdldEh1ZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5odWU7XG4gICAgfTtcbiAgICBcbiAgICB0aGlzLmdldFZhbHVlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnZhbHVlO1xuICAgIH07XG4gICAgXG4gICAgdGhpcy5zZXRSZ2JDb21wb25lbnRzID0gZnVuY3Rpb24ociwgZywgYikge1xuICAgICAgICB0aGlzLnNldFJnYigociA8PCAxNikgfCAoZyA8PCA4KSB8IGIpO1xuICAgIH1cbiAgICBcbiAgICB0aGlzLnNldFJnYiA9IGZ1bmN0aW9uKHJnYikge1xuICAgICAgICB0aGlzLnJnYiA9IHJnYjtcbiAgICAgICAgcmdiVG9Ic3YoKTtcbiAgICB9O1xuXG4gICAgdGhpcy5zZXRIc3YgPSBmdW5jdGlvbihodWUsIHZhbHVlLCBzYXR1cmF0aW9uKSB7XG4gICAgICAgIHRoaXMuaHVlID0gaHVlO1xuICAgICAgICB0aGlzLnNhdHVyYXRpb24gPSBzYXR1cmF0aW9uO1xuICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7XG5cbiAgICAgICAgaHN2VG9SZ2IoKTtcbiAgICB9O1xuXG4gICAgdGhpcy5zZXRIdWUgPSBmdW5jdGlvbihodWUpIHtcbiAgICAgICAgdGhpcy5odWUgPSBodWU7XG4gICAgICAgIGhzdlRvUmdiKCk7XG4gICAgfTtcblxuICAgIHRoaXMuc2V0U2F0dXJhdGlvbiA9IGZ1bmN0aW9uKHNhdHVyYXRpb24pIHtcbiAgICAgICAgdGhpcy5zYXR1cmF0aW9uID0gc2F0dXJhdGlvbjtcbiAgICAgICAgaHN2VG9SZ2IoKTtcbiAgICB9O1xuXG4gICAgdGhpcy5zZXRWYWx1ZSA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgaHN2VG9SZ2IoKTtcbiAgICB9O1xuXG4gICAgdGhpcy5jbG9uZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgXG4gICAgICAgICAgICByZXN1bHQgPSBuZXcgQ1BDb2xvcigpO1xuICAgICAgICBcbiAgICAgICAgcmVzdWx0LmNvcHlGcm9tKHRoaXMpO1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9O1xuXG4gICAgdGhpcy5jb3B5RnJvbSA9IGZ1bmN0aW9uKGMpIHtcbiAgICAgICAgdGhpcy5yZ2IgPSBjLnJnYjtcbiAgICAgICAgdGhpcy5odWUgPSBjLmh1ZTtcbiAgICAgICAgdGhpcy5zYXR1cmF0aW9uID0gYy5zYXR1cmF0aW9uO1xuICAgICAgICB0aGlzLnZhbHVlID0gYy52YWx1ZTtcbiAgICB9O1xuXG4gICAgdGhpcy5pc0VxdWFsID0gZnVuY3Rpb24oY29sb3IpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmdiID09IGNvbG9yLnJnYiAmJiB0aGlzLmh1ZSA9PSBjb2xvci5odWUgJiYgdGhpcy5zYXR1cmF0aW9uID09IGNvbG9yLnNhdHVyYXRpb24gJiYgdGhpcy52YWx1ZSA9PSBjb2xvci52YWx1ZTtcbiAgICB9O1xuICAgIFxuICAgIHRoaXMuc2V0UmdiKHJnYiB8fCAwKTtcbn1cbiIsIi8qXG4gICAgQ2hpY2tlblBhaW50XG4gICAgXG4gICAgQ2hpY2tlblBhaW50IGlzIGEgdHJhbnNsYXRpb24gb2YgQ2hpYmlQYWludCBmcm9tIEphdmEgdG8gSmF2YVNjcmlwdFxuICAgIGJ5IE5pY2hvbGFzIFNoZXJsb2NrIC8gQ2hpY2tlbiBTbW9vdGhpZS5cbiAgICBcbiAgICBDaGliaVBhaW50IGlzIENvcHlyaWdodCAoYykgMjAwNi0yMDA4IE1hcmMgU2NoZWZlclxuXG4gICAgQ2hpY2tlblBhaW50IGlzIGZyZWUgc29mdHdhcmU6IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vciBtb2RpZnlcbiAgICBpdCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGFzIHB1Ymxpc2hlZCBieVxuICAgIHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb24sIGVpdGhlciB2ZXJzaW9uIDMgb2YgdGhlIExpY2Vuc2UsIG9yXG4gICAgKGF0IHlvdXIgb3B0aW9uKSBhbnkgbGF0ZXIgdmVyc2lvbi5cblxuICAgIENoaWNrZW5QYWludCBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLFxuICAgIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mXG4gICAgTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiAgU2VlIHRoZVxuICAgIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuXG5cbiAgICBZb3Ugc2hvdWxkIGhhdmUgcmVjZWl2ZWQgYSBjb3B5IG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZVxuICAgIGFsb25nIHdpdGggQ2hpY2tlblBhaW50LiBJZiBub3QsIHNlZSA8aHR0cDovL3d3dy5nbnUub3JnL2xpY2Vuc2VzLz4uXG4qL1xuXG4vLyBBbiBSR0IgY29sb3Igd2l0aCBmbG9hdGluZyBwb2ludCB2YWx1ZXMgZm9yIGVhY2ggY2hhbm5lbCAoYmV0d2VlbiAwLjAgYW5kIDEuMClcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIENQQ29sb3JGbG9hdChyLCBnLCBiKSB7XG4gICAgdGhpcy5yID0gcjtcbiAgICB0aGlzLmcgPSBnO1xuICAgIHRoaXMuYiA9IGI7XG59XG5cbkNQQ29sb3JGbG9hdC5wcm90b3R5cGUudG9JbnQgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gKE1hdGgubWF4KDAsIE1hdGgubWluKDI1NSwgTWF0aC5yb3VuZCh0aGlzLnIgKiAyNTUpKSkgPDwgMTYpIFxuICAgICAgICB8IChNYXRoLm1heCgwLCBNYXRoLm1pbigyNTUsIE1hdGgucm91bmQodGhpcy5nICogMjU1KSkpIDw8IDgpXG4gICAgICAgIHwgTWF0aC5tYXgoMCwgTWF0aC5taW4oMjU1LCBNYXRoLnJvdW5kKHRoaXMuYiAqIDI1NSkpKTtcbn07XG5cbkNQQ29sb3JGbG9hdC5wcm90b3R5cGUubWl4V2l0aCA9IGZ1bmN0aW9uKGNvbG9yLCBhbHBoYSkge1xuICAgIHRoaXMuciA9IHRoaXMuciAqICgxLjAgLSBhbHBoYSkgKyBjb2xvci5yICogYWxwaGE7XG4gICAgdGhpcy5nID0gdGhpcy5nICogKDEuMCAtIGFscGhhKSArIGNvbG9yLmcgKiBhbHBoYTtcbiAgICB0aGlzLmIgPSB0aGlzLmIgKiAoMS4wIC0gYWxwaGEpICsgY29sb3IuYiAqIGFscGhhO1xufTtcblxuQ1BDb2xvckZsb2F0LnByb3RvdHlwZS5jbG9uZSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBuZXcgQ1BDb2xvckZsb2F0KHRoaXMuciwgdGhpcy5nLCB0aGlzLmIpO1xufTtcblxuQ1BDb2xvckZsb2F0LmNyZWF0ZUZyb21JbnQgPSBmdW5jdGlvbihjb2xvcikge1xuICAgIHJldHVybiBuZXcgQ1BDb2xvckZsb2F0KFxuICAgICAgICAoKGNvbG9yID4+PiAxNikgJiAweGZmKSAvIDI1NSxcbiAgICAgICAgKChjb2xvciA+Pj4gOCkgJiAweGZmKSAvIDI1NSxcbiAgICAgICAgKGNvbG9yICYgMHhmZikgLyAyNTVcbiAgICApO1xufTsiLCIvKlxuICAgIENoaWNrZW5QYWludFxuICAgIFxuICAgIENoaWNrZW5QYWludCBpcyBhIHRyYW5zbGF0aW9uIG9mIENoaWJpUGFpbnQgZnJvbSBKYXZhIHRvIEphdmFTY3JpcHRcbiAgICBieSBOaWNob2xhcyBTaGVybG9jayAvIENoaWNrZW4gU21vb3RoaWUuXG4gICAgXG4gICAgQ2hpYmlQYWludCBpcyBDb3B5cmlnaHQgKGMpIDIwMDYtMjAwOCBNYXJjIFNjaGVmZXJcblxuICAgIENoaWNrZW5QYWludCBpcyBmcmVlIHNvZnR3YXJlOiB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3IgbW9kaWZ5XG4gICAgaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBhcyBwdWJsaXNoZWQgYnlcbiAgICB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uLCBlaXRoZXIgdmVyc2lvbiAzIG9mIHRoZSBMaWNlbnNlLCBvclxuICAgIChhdCB5b3VyIG9wdGlvbikgYW55IGxhdGVyIHZlcnNpb24uXG5cbiAgICBDaGlja2VuUGFpbnQgaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCxcbiAgICBidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZlxuICAgIE1FUkNIQU5UQUJJTElUWSBvciBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS4gIFNlZSB0aGVcbiAgICBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9yZSBkZXRhaWxzLlxuXG4gICAgWW91IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2VcbiAgICBhbG9uZyB3aXRoIENoaWNrZW5QYWludC4gSWYgbm90LCBzZWUgPGh0dHA6Ly93d3cuZ251Lm9yZy9saWNlbnNlcy8+LlxuKi9cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gQ1BSYW5kb20oKSB7XG4gICAgdmFyIFxuICAgICAgICBuZXh0TmV4dEdhdXNzaWFuLCBcbiAgICAgICAgaGF2ZU5leHROZXh0R2F1c3NpYW4gPSBmYWxzZTtcblxuICAgIC8qKlxuICAgICAqIERlZmluaXRpb24gZnJvbSBKYXZhLCBtZWFuIG9mIDAuMCBhbmQgc3RhbmRhcmQgZGV2aWF0aW9uIDEuMC5cbiAgICAgKi9cbiAgICB0aGlzLm5leHRHYXVzc2lhbiA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAoaGF2ZU5leHROZXh0R2F1c3NpYW4pIHtcbiAgICAgICAgICAgIGhhdmVOZXh0TmV4dEdhdXNzaWFuID0gZmFsc2U7XG4gICAgICAgICAgICByZXR1cm4gbmV4dE5leHRHYXVzc2lhbjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgdjEsIHYyLCBzO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBkbyB7XG4gICAgICAgICAgICAgICAgdjEgPSAyICogTWF0aC5yYW5kb20oKSAtIDE7IC8vIGJldHdlZW4gLTEuMCBhbmQgMS4wXG4gICAgICAgICAgICAgICAgdjIgPSAyICogTWF0aC5yYW5kb20oKSAtIDE7IC8vIGJldHdlZW4gLTEuMCBhbmQgMS4wXG4gICAgICAgICAgICAgICAgcyA9IHYxICogdjEgKyB2MiAqIHYyO1xuICAgICAgICAgICAgfSB3aGlsZSAocyA+PSAxIHx8IHMgPT0gMCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgIG11bHRpcGxpZXIgPSBNYXRoLnNxcnQoLTIgKiBNYXRoLmxvZyhzKSAvIHMpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBuZXh0TmV4dEdhdXNzaWFuID0gdjIgKiBtdWx0aXBsaWVyO1xuICAgICAgICAgICAgaGF2ZU5leHROZXh0R2F1c3NpYW4gPSB0cnVlO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICByZXR1cm4gdjEgKiBtdWx0aXBsaWVyO1xuICAgICAgICB9XG4gICAgfTtcbn07IiwiLypcbiAgICBDaGlja2VuUGFpbnRcbiAgICBcbiAgICBDaGlja2VuUGFpbnQgaXMgYSB0cmFuc2xhdGlvbiBvZiBDaGliaVBhaW50IGZyb20gSmF2YSB0byBKYXZhU2NyaXB0XG4gICAgYnkgTmljaG9sYXMgU2hlcmxvY2sgLyBDaGlja2VuIFNtb290aGllLlxuICAgIFxuICAgIENoaWJpUGFpbnQgaXMgQ29weXJpZ2h0IChjKSAyMDA2LTIwMDggTWFyYyBTY2hlZmVyXG5cbiAgICBDaGlja2VuUGFpbnQgaXMgZnJlZSBzb2Z0d2FyZTogeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yIG1vZGlmeVxuICAgIGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgYXMgcHVibGlzaGVkIGJ5XG4gICAgdGhlIEZyZWUgU29mdHdhcmUgRm91bmRhdGlvbiwgZWl0aGVyIHZlcnNpb24gMyBvZiB0aGUgTGljZW5zZSwgb3JcbiAgICAoYXQgeW91ciBvcHRpb24pIGFueSBsYXRlciB2ZXJzaW9uLlxuXG4gICAgQ2hpY2tlblBhaW50IGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsXG4gICAgYnV0IFdJVEhPVVQgQU5ZIFdBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2ZcbiAgICBNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuICBTZWUgdGhlXG4gICAgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy5cblxuICAgIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXG4gICAgYWxvbmcgd2l0aCBDaGlja2VuUGFpbnQuIElmIG5vdCwgc2VlIDxodHRwOi8vd3d3LmdudS5vcmcvbGljZW5zZXMvPi5cbiovXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIENQUmVjdChsZWZ0LCB0b3AsIHJpZ2h0LCBib3R0b20pIHtcbiAgICAvKlxuICAgIGlmIChsZWZ0ID09PSB1bmRlZmluZWQgfHwgdG9wID09PSB1bmRlZmluZWQgfHwgcmlnaHQgPT09IHVuZGVmaW5lZCB8fCBib3R0b20gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICB0aHJvdyBcIkJhZCByZWN0XCI7XG4gICAgfVxuICAgIFxuICAgIGlmICh+fmxlZnQgIT09IGxlZnQgfHwgfn50b3AgIT09IHRvcCB8fCB+fnJpZ2h0ICE9PSByaWdodCB8fCB+fmJvdHRvbSAhPT0gYm90dG9tKSB7XG4gICAgICAgIHRocm93IFwiQmFkIHJlY3RcIjtcbiAgICB9XG4gICAgKi9cbiAgICBcbiAgICB0aGlzLmxlZnQgPSBsZWZ0O1xuICAgIHRoaXMudG9wID0gdG9wO1xuICAgIHRoaXMucmlnaHQgPSByaWdodDtcbiAgICB0aGlzLmJvdHRvbSA9IGJvdHRvbTtcbn1cblxuQ1BSZWN0LnByb3RvdHlwZS5tYWtlRW1wdHkgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLmxlZnQgPSAwO1xuICAgIHRoaXMudG9wID0gMDtcbiAgICB0aGlzLnJpZ2h0ID0gMDtcbiAgICB0aGlzLmJvdHRvbSA9IDA7XG59O1xuXG5DUFJlY3QucHJvdG90eXBlLnVuaW9uID0gZnVuY3Rpb24odGhhdCkge1xuICAgIGlmICh0aGlzLmlzRW1wdHkoKSkge1xuICAgICAgICB0aGlzLnNldCh0aGF0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmxlZnQgPSBNYXRoLm1pbih0aGlzLmxlZnQsIHRoYXQubGVmdCk7XG4gICAgICAgIHRoaXMudG9wID0gTWF0aC5taW4odGhpcy50b3AsIHRoYXQudG9wKTtcbiAgICAgICAgdGhpcy5yaWdodCA9IE1hdGgubWF4KHRoaXMucmlnaHQsIHRoYXQucmlnaHQpO1xuICAgICAgICB0aGlzLmJvdHRvbSA9IE1hdGgubWF4KHRoaXMuYm90dG9tLCB0aGF0LmJvdHRvbSk7XG4gICAgfVxufTtcblxuLyoqXG4gKiBDbGlwIHRoaXMgcmVjdGFuZ2xlIHRvIGZpdCB3aXRoaW4gYHRoYXRgLlxuICogXG4gKiBAcmV0dXJucyBhIHJlZmVuY2UgdG8gdGhpcyByZWN0YW5nbGUgZm9yIGNoYWluaW5nIFxuICovXG5DUFJlY3QucHJvdG90eXBlLmNsaXAgPSBmdW5jdGlvbih0aGF0KSB7XG4gICAgaWYgKCF0aGlzLmlzRW1wdHkoKSkge1xuICAgICAgICBpZiAodGhhdC5pc0VtcHR5KCkpIHtcbiAgICAgICAgICAgIHRoaXMubWFrZUVtcHR5KCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmxlZnQgPSBNYXRoLm1heCh0aGlzLmxlZnQsIHRoYXQubGVmdCk7XG4gICAgICAgICAgICB0aGlzLnRvcCA9IE1hdGgubWF4KHRoaXMudG9wLCB0aGF0LnRvcCk7XG4gICAgICAgICAgICB0aGlzLnJpZ2h0ID0gTWF0aC5taW4odGhpcy5yaWdodCwgdGhhdC5yaWdodCk7XG4gICAgICAgICAgICB0aGlzLmJvdHRvbSA9IE1hdGgubWluKHRoaXMuYm90dG9tLCB0aGF0LmJvdHRvbSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIHRoaXM7XG59O1xuXG5DUFJlY3QucHJvdG90eXBlLmlzSW5zaWRlID0gZnVuY3Rpb24odGhhdCkge1xuICAgIHJldHVybiB0aGlzLmxlZnQgPj0gdGhhdC5sZWZ0ICYmIHRoaXMudG9wID49IHRoYXQudG9wICYmIHRoaXMucmlnaHQgPD0gdGhhdC5yaWdodCAmJiB0aGlzLmJvdHRvbSA8PSB0aGF0LmJvdHRvbTtcbn07XG5cbi8qKlxuICogVXNlIHRoaXMgcmVjdGFuZ2xlIGFzIGJvdW5kcyB0byBjbGlwIHRoZSBwbGFjZW1lbnQgb2YgdGhlIGFyZWEgb2Ygc3JjUmVjdCBhdCB0aGUgcG9zaXRpb24gb2YgZHN0UmVjdCBpbnNpZGVcbiAqIG91ciBib3VuZHMuXG4gKlxuICogZHN0UmVjdCBoYXMgaXRzIHJpZ2h0IGFuZCBib3R0b20gc2V0IGJ5IHRoaXMgb3BlcmF0aW9uIHRvIG1hdGNoIHRoZSBhcmVhIHRoYXQgd291bGQgYmUgY29waWVkIGZyb20gdGhlIHNvdXJjZS5cbiAqIHNyY1JlY3QgaGFzIGl0cyBjb29yZGluYXRlcyB0d2Vha2VkIHRvIG1hdGNoIHRoZSBhcmVhIHRoYXQgd2lsbCBiZSBjb3BpZWQuXG4gKi9cbkNQUmVjdC5wcm90b3R5cGUuY2xpcFNvdXJjZURlc3QgPSBmdW5jdGlvbihzcmNSZWN0LCBkc3RSZWN0KSB7XG4gICAgZHN0UmVjdC5yaWdodCA9IGRzdFJlY3QubGVmdCArIHNyY1JlY3QuZ2V0V2lkdGgoKTtcbiAgICBkc3RSZWN0LmJvdHRvbSA9IGRzdFJlY3QudG9wICsgc3JjUmVjdC5nZXRIZWlnaHQoKTtcblxuICAgIGlmICh0aGlzLmlzRW1wdHkoKSB8fCBkc3RSZWN0LmxlZnQgPj0gdGhpcy5yaWdodCB8fCBkc3RSZWN0LnRvcCA+PSB0aGlzLmJvdHRvbSB8fCBkc3RSZWN0LnJpZ2h0IDw9IHRoaXMubGVmdCB8fCBkc3RSZWN0LmJvdHRvbSA8PSB0aGlzLnRvcCkge1xuICAgICAgICBzcmNSZWN0Lm1ha2VFbXB0eSgpO1xuICAgICAgICBkc3RSZWN0Lm1ha2VFbXB0eSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIGJvdHRvbS9yaWdodFxuICAgICAgICBpZiAoZHN0UmVjdC5yaWdodCA+IHRoaXMucmlnaHQpIHtcbiAgICAgICAgICAgIHNyY1JlY3QucmlnaHQgLT0gZHN0UmVjdC5yaWdodCAtIHRoaXMucmlnaHQ7XG4gICAgICAgICAgICBkc3RSZWN0LnJpZ2h0ID0gdGhpcy5yaWdodDtcbiAgICAgICAgfVxuICAgIFxuICAgICAgICBpZiAoZHN0UmVjdC5ib3R0b20gPiB0aGlzLmJvdHRvbSkge1xuICAgICAgICAgICAgc3JjUmVjdC5ib3R0b20gLT0gZHN0UmVjdC5ib3R0b20gLSB0aGlzLmJvdHRvbTtcbiAgICAgICAgICAgIGRzdFJlY3QuYm90dG9tID0gdGhpcy5ib3R0b207XG4gICAgICAgIH1cbiAgICBcbiAgICAgICAgLy8gdG9wL2xlZnRcbiAgICAgICAgaWYgKGRzdFJlY3QubGVmdCA8IHRoaXMubGVmdCkge1xuICAgICAgICAgICAgc3JjUmVjdC5sZWZ0ICs9IHRoaXMubGVmdCAtIGRzdFJlY3QubGVmdDtcbiAgICAgICAgICAgIGRzdFJlY3QubGVmdCA9IHRoaXMubGVmdDtcbiAgICAgICAgfVxuICAgIFxuICAgICAgICBpZiAoZHN0UmVjdC50b3AgPCB0aGlzLnRvcCkge1xuICAgICAgICAgICAgc3JjUmVjdC50b3AgKz0gdGhpcy50b3AgLSBkc3RSZWN0LnRvcDtcbiAgICAgICAgICAgIGRzdFJlY3QudG9wID0gdGhpcy50b3A7XG4gICAgICAgIH1cbiAgICB9XG59O1xuXG5DUFJlY3QucHJvdG90eXBlLmdldFdpZHRoID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMucmlnaHQgLSB0aGlzLmxlZnQ7XG59O1xuXG5DUFJlY3QucHJvdG90eXBlLmdldEhlaWdodCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLmJvdHRvbSAtIHRoaXMudG9wO1xufTtcblxuQ1BSZWN0LnByb3RvdHlwZS5pc0VtcHR5ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMucmlnaHQgPD0gdGhpcy5sZWZ0IHx8IHRoaXMuYm90dG9tIDw9IHRoaXMudG9wO1xufTtcblxuQ1BSZWN0LnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbihyKSB7XG4gICAgdGhpcy5sZWZ0ID0gci5sZWZ0O1xuICAgIHRoaXMudG9wID0gci50b3A7XG4gICAgdGhpcy5yaWdodCA9IHIucmlnaHQ7XG4gICAgdGhpcy5ib3R0b20gPSByLmJvdHRvbTtcbn07XG5cbkNQUmVjdC5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gbmV3IENQUmVjdCh0aGlzLmxlZnQsIHRoaXMudG9wLCB0aGlzLnJpZ2h0LCB0aGlzLmJvdHRvbSk7XG59O1xuXG5DUFJlY3QucHJvdG90eXBlLnRyYW5zbGF0ZSA9IGZ1bmN0aW9uKHgsIHkpIHtcbiAgICB0aGlzLmxlZnQgKz0geDtcbiAgICB0aGlzLnJpZ2h0ICs9IHg7XG4gICAgdGhpcy50b3AgKz0geTtcbiAgICB0aGlzLmJvdHRvbSArPSB5O1xufTtcblxuQ1BSZWN0LnByb3RvdHlwZS5tb3ZlVG8gPSBmdW5jdGlvbih4LCB5KSB7XG4gICAgdGhpcy50cmFuc2xhdGUoeCAtIHRoaXMubGVmdCwgeSAtIHRoaXMudG9wKTtcbn07XG5cbkNQUmVjdC5wcm90b3R5cGUuZXF1YWxzID0gZnVuY3Rpb24odGhhdCkge1xuICAgIHJldHVybiB0aGlzLmxlZnQgPT0gdGhhdC5sZWZ0ICYmIHRoaXMucmlnaHQgPT0gdGhhdC5yaWdodCAmJiB0aGlzLnRvcCA9PSB0aGF0LnRvcCAmJiB0aGlzLmJvdHRvbSA9PSB0aGF0LmJvdHRvbTtcbn07XG5cbi8qKlxuICogQWRkIGggcGl4ZWxzIHRvIGJvdGggdGhlIGxlZnQgYW5kIHJpZ2h0IHNpZGVzIG9mIHRoZSByZWN0YW5nbGUsIGFuZCB2IHBpeGVscyB0byBib3RoIHRoZSB0b3AgYW5kIGJvdHRvbSBzaWRlcy5cbiAqICBcbiAqIEBwYXJhbSBoXG4gKiBAcGFyYW0gdlxuICovXG5DUFJlY3QucHJvdG90eXBlLmdyb3cgPSBmdW5jdGlvbihoLCB2KSB7XG4gICAgLy8gVE9ETyBjaGVja3MgZm9yIHJlY3RhbmdsZXMgd2l0aCB6ZXJvLWV4dGVudFxuICAgIHRoaXMubGVmdCAtPSBoO1xuICAgIHRoaXMucmlnaHQgKz0gaDtcbiAgICB0aGlzLnRvcCAtPSB2O1xuICAgIHRoaXMuYm90dG9tICs9IHY7XG59O1xuXG5DUFJlY3QucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIFwiKFwiICsgdGhpcy5sZWZ0ICsgXCIsXCIgKyB0aGlzLnRvcCArIFwiLFwiICsgdGhpcy5yaWdodCArIFwiLFwiICsgdGhpcy5ib3R0b20gKyBcIilcIjtcbn07XG5cbi8qIFxuICogQ2hyb21lIGlzIGluaXRpYWxseSBlYWdlciB0byBvcHRpbWl6ZSBDUFJlY3QgYW5kIHVzZXJzIGFzc3VtaW5nIHRoYXQgYWxsIHRoZSBmaWVsZHMgYXJlIFNNSXMsIHRoZW4gbGF0ZXIgb24gZGVjaWRlc1xuICogdGhhdCB0aGV5IHNob3VsZCBiZSB0YWdnZWQgbnVtYmVycyBhZnRlciBhbGwuIFRoaXMgY2F1c2VzIGFsbCB0aGUgYmxlbmRpbmcgb3BlcmF0aW9uIGZ1bmN0aW9ucyB0byBiZSByZW9wdGltaXplZFxuICogYSBjb3VwbGUgb2YgdGltZXMuIFxuICogXG4gKiBBdm9pZCB0aGF0IG1lc3MgYnkgc3RhcnRpbmcgdGhpbmdzIG9mZiB3aXRoIGZsb2F0cyBpbiB0aGUgbWVtYmVycy4gIFxuICovXG53aW5kb3cuY3BSZWN0R2FyYmFnZSA9IG5ldyBDUFJlY3QoMS41LCAyLjUsIDMuNSwgNC41KTsiLCIvLyBNb2RpZmljYXRpb25zIGJ5IE5pY2hvbGFzIFNoZXJsb2NrLiBPcmlnaW5hbCBkb2NzIGJlbG93OlxuXG4vLyBMYXN0IHVwZGF0ZWQgTm92ZW1iZXIgMjAxMVxuLy8gQnkgU2ltb24gU2FycmlzXG4vLyB3d3cuc2ltb25zYXJyaXMuY29tXG4vLyBzYXJyaXNAYWNtLm9yZ1xuLy9cbi8vIEZyZWUgdG8gdXNlIGFuZCBkaXN0cmlidXRlIGF0IHdpbGxcbi8vIFNvIGxvbmcgYXMgeW91IGFyZSBuaWNlIHRvIHBlb3BsZSwgZXRjXG5cbi8vIFNpbXBsZSBjbGFzcyBmb3Iga2VlcGluZyB0cmFjayBvZiB0aGUgY3VycmVudCB0cmFuc2Zvcm1hdGlvbiBtYXRyaXhcblxuLy8gRm9yIGluc3RhbmNlOlxuLy8gICAgdmFyIHQgPSBuZXcgVHJhbnNmb3JtKCk7XG4vLyAgICB0LnJvdGF0ZSg1KTtcbi8vICAgIHZhciBtID0gdC5tO1xuLy8gICAgY3R4LnNldFRyYW5zZm9ybShtWzBdLCBtWzFdLCBtWzJdLCBtWzNdLCBtWzRdLCBtWzVdKTtcblxuLy8gSXMgZXF1aXZhbGVudCB0bzpcbi8vICAgIGN0eC5yb3RhdGUoNSk7XG5cbi8vIEJ1dCBub3cgeW91IGNhbiByZXRyaWV2ZSBpdCA6KVxuXG4vLyBSZW1lbWJlciB0aGF0IHRoaXMgZG9lcyBub3QgYWNjb3VudCBmb3IgYW55IENTUyB0cmFuc2Zvcm1zIGFwcGxpZWQgdG8gdGhlIGNhbnZhc1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBDUFRyYW5zZm9ybSgpIHtcbiAgICB0aGlzLnNldFRvSWRlbnRpdHkoKTtcbn1cblxuQ1BUcmFuc2Zvcm0ucHJvdG90eXBlLnNldFRvSWRlbnRpdHkgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLm0gPSBbIDEsIDAsIDAsIDEsIDAsIDAgXTtcbn07XG5cbkNQVHJhbnNmb3JtLnByb3RvdHlwZS5tdWx0aXBseSA9IGZ1bmN0aW9uKG1hdHJpeCkge1xuICAgIHZhciBcbiAgICAgICAgbTExID0gdGhpcy5tWzBdICogbWF0cml4Lm1bMF0gKyB0aGlzLm1bMl0gKiBtYXRyaXgubVsxXSxcbiAgICAgICAgbTEyID0gdGhpcy5tWzFdICogbWF0cml4Lm1bMF0gKyB0aGlzLm1bM10gKiBtYXRyaXgubVsxXSxcblxuICAgICAgICBtMjEgPSB0aGlzLm1bMF0gKiBtYXRyaXgubVsyXSArIHRoaXMubVsyXSAqIG1hdHJpeC5tWzNdLFxuICAgICAgICBtMjIgPSB0aGlzLm1bMV0gKiBtYXRyaXgubVsyXSArIHRoaXMubVszXSAqIG1hdHJpeC5tWzNdLFxuXG4gICAgICAgIGR4ID0gdGhpcy5tWzBdICogbWF0cml4Lm1bNF0gKyB0aGlzLm1bMl0gKiBtYXRyaXgubVs1XSArIHRoaXMubVs0XSxcbiAgICAgICAgZHkgPSB0aGlzLm1bMV0gKiBtYXRyaXgubVs0XSArIHRoaXMubVszXSAqIG1hdHJpeC5tWzVdICsgdGhpcy5tWzVdO1xuXG4gICAgdGhpcy5tWzBdID0gbTExO1xuICAgIHRoaXMubVsxXSA9IG0xMjtcbiAgICB0aGlzLm1bMl0gPSBtMjE7XG4gICAgdGhpcy5tWzNdID0gbTIyO1xuICAgIHRoaXMubVs0XSA9IGR4O1xuICAgIHRoaXMubVs1XSA9IGR5O1xufTtcblxuQ1BUcmFuc2Zvcm0ucHJvdG90eXBlLmludmVydCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBcbiAgICAgICAgZCA9IDEgLyAodGhpcy5tWzBdICogdGhpcy5tWzNdIC0gdGhpcy5tWzFdICogdGhpcy5tWzJdKSxcbiAgICAgICAgbTAgPSB0aGlzLm1bM10gKiBkLFxuICAgICAgICBtMSA9IC10aGlzLm1bMV0gKiBkLFxuICAgICAgICBtMiA9IC10aGlzLm1bMl0gKiBkLFxuICAgICAgICBtMyA9IHRoaXMubVswXSAqIGQsXG4gICAgICAgIG00ID0gZCAqICh0aGlzLm1bMl0gKiB0aGlzLm1bNV0gLSB0aGlzLm1bM10gKiB0aGlzLm1bNF0pLFxuICAgICAgICBtNSA9IGQgKiAodGhpcy5tWzFdICogdGhpcy5tWzRdIC0gdGhpcy5tWzBdICogdGhpcy5tWzVdKTtcbiAgICBcbiAgICB0aGlzLm1bMF0gPSBtMDtcbiAgICB0aGlzLm1bMV0gPSBtMTtcbiAgICB0aGlzLm1bMl0gPSBtMjtcbiAgICB0aGlzLm1bM10gPSBtMztcbiAgICB0aGlzLm1bNF0gPSBtNDtcbiAgICB0aGlzLm1bNV0gPSBtNTtcbn07XG5cbkNQVHJhbnNmb3JtLnByb3RvdHlwZS5nZXRJbnZlcnRlZCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhclxuICAgICAgICByZXN1bHQgPSBuZXcgQ1BUcmFuc2Zvcm0oKTtcbiAgICBcbiAgICByZXN1bHQubVswXSA9IHRoaXMubVswXTtcbiAgICByZXN1bHQubVsxXSA9IHRoaXMubVsxXTtcbiAgICByZXN1bHQubVsyXSA9IHRoaXMubVsyXTtcbiAgICByZXN1bHQubVszXSA9IHRoaXMubVszXTtcbiAgICByZXN1bHQubVs0XSA9IHRoaXMubVs0XTtcbiAgICByZXN1bHQubVs1XSA9IHRoaXMubVs1XTtcbiAgICBcbiAgICByZXN1bHQuaW52ZXJ0KCk7XG4gICAgXG4gICAgcmV0dXJuIHJlc3VsdDtcbn07XG5cbkNQVHJhbnNmb3JtLnByb3RvdHlwZS5yb3RhdGUgPSBmdW5jdGlvbihyYWQpIHtcbiAgICB2YXIgXG4gICAgICAgIGMgPSBNYXRoLmNvcyhyYWQpLFxuICAgICAgICBzID0gTWF0aC5zaW4ocmFkKSxcbiAgICAgICAgbTExID0gdGhpcy5tWzBdICogYyArIHRoaXMubVsyXSAqIHMsXG4gICAgICAgIG0xMiA9IHRoaXMubVsxXSAqIGMgKyB0aGlzLm1bM10gKiBzLFxuICAgICAgICBtMjEgPSB0aGlzLm1bMF0gKiAtcyArIHRoaXMubVsyXSAqIGMsXG4gICAgICAgIG0yMiA9IHRoaXMubVsxXSAqIC1zICsgdGhpcy5tWzNdICogYztcbiAgICBcbiAgICB0aGlzLm1bMF0gPSBtMTE7XG4gICAgdGhpcy5tWzFdID0gbTEyO1xuICAgIHRoaXMubVsyXSA9IG0yMTtcbiAgICB0aGlzLm1bM10gPSBtMjI7XG59O1xuXG5DUFRyYW5zZm9ybS5wcm90b3R5cGUucm90YXRlQXJvdW5kUG9pbnQgPSBmdW5jdGlvbihyYWQsIHgsIHkpIHtcbiAgICB0aGlzLnRyYW5zbGF0ZSh4LCB5KTtcbiAgICB0aGlzLnJvdGF0ZShyYWQpO1xuICAgIHRoaXMudHJhbnNsYXRlKC14LCAteSk7XG59O1xuXG5DUFRyYW5zZm9ybS5wcm90b3R5cGUudHJhbnNsYXRlID0gZnVuY3Rpb24oeCwgeSkge1xuICAgIHRoaXMubVs0XSArPSB0aGlzLm1bMF0gKiB4ICsgdGhpcy5tWzJdICogeTtcbiAgICB0aGlzLm1bNV0gKz0gdGhpcy5tWzFdICogeCArIHRoaXMubVszXSAqIHk7XG59O1xuXG5DUFRyYW5zZm9ybS5wcm90b3R5cGUuc2NhbGUgPSBmdW5jdGlvbihzeCwgc3kpIHtcbiAgICB0aGlzLm1bMF0gKj0gc3g7XG4gICAgdGhpcy5tWzFdICo9IHN4O1xuICAgIHRoaXMubVsyXSAqPSBzeTtcbiAgICB0aGlzLm1bM10gKj0gc3k7XG59O1xuXG5DUFRyYW5zZm9ybS5wcm90b3R5cGUudHJhbnNmb3JtUG9pbnQgPSBmdW5jdGlvbihweCwgcHkpIHtcbiAgICB2YXIgXG4gICAgICAgIHggPSBweCxcbiAgICAgICAgeSA9IHB5O1xuICAgIFxuICAgIHB4ID0geCAqIHRoaXMubVswXSArIHkgKiB0aGlzLm1bMl0gKyB0aGlzLm1bNF07XG4gICAgcHkgPSB4ICogdGhpcy5tWzFdICsgeSAqIHRoaXMubVszXSArIHRoaXMubVs1XTtcbiAgICBcbiAgICByZXR1cm4ge3g6IHB4LCB5OiBweX07XG59O1xuXG5DUFRyYW5zZm9ybS5wcm90b3R5cGUuZ2V0VHJhbnNsYXRlWCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLm1bNF07XG59O1xuXG5DUFRyYW5zZm9ybS5wcm90b3R5cGUuZ2V0VHJhbnNsYXRlWSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLm1bNV07XG59O1xuXG5DUFRyYW5zZm9ybS5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbigpIHtcbiAgICB2YXJcbiAgICAgICAgcmVzdWx0ID0gbmV3IENQVHJhbnNmb3JtKCk7XG4gICAgXG4gICAgcmVzdWx0Lm1bMF0gPSB0aGlzLm1bMF07XG4gICAgcmVzdWx0Lm1bMV0gPSB0aGlzLm1bMV07XG4gICAgcmVzdWx0Lm1bMl0gPSB0aGlzLm1bMl07XG4gICAgcmVzdWx0Lm1bM10gPSB0aGlzLm1bM107XG4gICAgcmVzdWx0Lm1bNF0gPSB0aGlzLm1bNF07XG4gICAgcmVzdWx0Lm1bNV0gPSB0aGlzLm1bNV07XG4gICAgXG4gICAgcmV0dXJuIHJlc3VsdDtcbn07IiwiLypcbiAgICBDaGlja2VuUGFpbnRcbiAgICBcbiAgICBDaGlja2VuUGFpbnQgaXMgYSB0cmFuc2xhdGlvbiBvZiBDaGliaVBhaW50IGZyb20gSmF2YSB0byBKYXZhU2NyaXB0XG4gICAgYnkgTmljaG9sYXMgU2hlcmxvY2sgLyBDaGlja2VuIFNtb290aGllLlxuICAgIFxuICAgIENoaWJpUGFpbnQgaXMgQ29weXJpZ2h0IChjKSAyMDA2LTIwMDggTWFyYyBTY2hlZmVyXG5cbiAgICBDaGlja2VuUGFpbnQgaXMgZnJlZSBzb2Z0d2FyZTogeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yIG1vZGlmeVxuICAgIGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgYXMgcHVibGlzaGVkIGJ5XG4gICAgdGhlIEZyZWUgU29mdHdhcmUgRm91bmRhdGlvbiwgZWl0aGVyIHZlcnNpb24gMyBvZiB0aGUgTGljZW5zZSwgb3JcbiAgICAoYXQgeW91ciBvcHRpb24pIGFueSBsYXRlciB2ZXJzaW9uLlxuXG4gICAgQ2hpY2tlblBhaW50IGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsXG4gICAgYnV0IFdJVEhPVVQgQU5ZIFdBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2ZcbiAgICBNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuICBTZWUgdGhlXG4gICAgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy5cblxuICAgIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXG4gICAgYWxvbmcgd2l0aCBDaGlja2VuUGFpbnQuIElmIG5vdCwgc2VlIDxodHRwOi8vd3d3LmdudS5vcmcvbGljZW5zZXMvPi5cbiovXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIENQV2Fjb21UYWJsZXQoKSB7XG4gICAgdmFyIFxuICAgICAgICBwZW5BUEkgPSBudWxsLFxuICAgICAgICBwbHVnaW5PYmplY3QsXG4gICAgICAgIFxuICAgICAgICB0aGF0ID0gdGhpcztcblxuICAgIC8qKlxuICAgICAqIElzIHRoZSBwZW4gY3VycmVudGx5IGludGVyYWN0aW5nIHdpdGggdGhlIHRhYmxldCBzdXJmYWNlP1xuICAgICAqL1xuICAgIHRoaXMuaXNQZW4gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyXG4gICAgICAgICAgICBwb2ludGVyVHlwZTtcblxuICAgICAgICBpZiAocGVuQVBJKSB7XG4gICAgICAgICAgICBwb2ludGVyVHlwZSA9IHBlbkFQSS5wb2ludGVyVHlwZTtcblxuICAgICAgICAgICAgcmV0dXJuIHBvaW50ZXJUeXBlID09IDEgLyogUGVuICovIHx8IHBvaW50ZXJUeXBlID09IDMgLyogRXJhc2VyICovO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfTtcbiAgICBcbiAgICB0aGlzLmdldFByZXNzdXJlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmIChwZW5BUEkpIHtcbiAgICAgICAgICAgIHJldHVybiBwZW5BUEkucHJlc3N1cmU7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHJldHVybiAxLjA7XG4gICAgfTtcbiAgICBcbiAgICB0aGlzLnBsdWdpbkxvYWRlZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBjb25zb2xlLmxvZyhcIldhY29tIHRhYmxldCBzdXBwb3J0IGxvYWRlZCFcIik7XG5cbiAgICAgICAgcGVuQVBJID0gcGx1Z2luT2JqZWN0LnBlbkFQSTtcbiAgICB9O1xuICAgIFxuICAgIHRoaXMuaXNUYWJsZXRQcmVzZW50ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiAhIXBlbkFQSTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQ2FsbCBhZnRlciB0aGUgZG9jdW1lbnQgYm9keSBpcyByZWFkeSAobmVlZHMgRE9NIHRvIGJlIHJlYWR5IGZvciBsb2FkaW5nIHRoZSBXYWNvbSBwbHVnaW4pLlxuICAgICAqL1xuICAgIHRoaXMuZGV0ZWN0VGFibGV0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIC8vIENocm9tZSBoYXMgZHJvcHBlZCBOUEFQSSBzdXBwb3J0LCBzbyB0aGUgV2Fjb20gcGx1Z2luIGNhbm5vdCBiZSBpbnN0YWxsZWRcbiAgICAgICAgaWYgKC9DaHJvbWUvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpICYmICEvT1BSLy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpKSB7XG4gICAgICAgICAgICAvLyBQcmV2ZW50IGFuIHVnbHkgXCJ0aGlzIHBhZ2UgaGFzIHRyaWVkIHRvIGxvYWQgYSBwbHVnaW4gd2hpY2ggaXMgbm90IHN1cHBvcnRlZFwiIGVycm9yIG1lc3NhZ2VcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiTm90IGF0dGVtcHRpbmcgdG8gbG9hZCBXYWNvbSB0YWJsZXQgcGx1Z2luLCBzaW5jZSB0aGlzIGlzIENocm9tZVwiKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgY29uc29sZS5sb2coXCJBdHRlbXB0aW5nIHRvIGxvYWQgV2Fjb20gdGFibGV0IHN1cHBvcnQuLi5cIik7XG4gICAgICAgIFxuICAgICAgICBwbHVnaW5PYmplY3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwib2JqZWN0XCIpO1xuICAgICAgICBcbiAgICAgICAgaWYgKFwiY2xhc3NpZFwiIGluIHBsdWdpbk9iamVjdCkgeyAvLyBJRVxuICAgICAgICAgICAgcGx1Z2luT2JqZWN0LmNsYXNzaWQgPSBcIkNMU0lEOjA5MmRmYTg2LTU4MDctNWE5NC1iZjNiLTVhNTNiYTllNTMwOFwiO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgcGFyYW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicGFyYW1cIik7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHBhcmFtLm5hbWUgPSBcIm9ubG9hZFwiO1xuICAgICAgICAgICAgcGFyYW0udmFsdWUgPSBcIm9uV2Fjb21QbHVnaW5Mb2FkZWRcIjtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgcGx1Z2luT2JqZWN0LmFwcGVuZENoaWxkKHBhcmFtKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgcGx1Z2luT2JqZWN0LnR5cGUgPSBcImFwcGxpY2F0aW9uL3gtd2Fjb210YWJsZXRwbHVnaW5cIjtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgcGx1Z2luT2JqZWN0LnN0eWxlLnBvc2l0aW9uID0gXCJhYnNvbHV0ZVwiO1xuICAgICAgICBwbHVnaW5PYmplY3Quc3R5bGUudmlzaWJpbGl0eSA9IFwiaGlkZGVuXCI7XG4gICAgICAgIHBsdWdpbk9iamVjdC5vbmxvYWQgPSBcIm9uV2Fjb21QbHVnaW5Mb2FkZWRcIjtcbiAgICAgICAgXG4gICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQocGx1Z2luT2JqZWN0KTtcbiAgICAgICAgXG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpZiAoIXRoYXQuaXNUYWJsZXRQcmVzZW50KCkpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkxvb2tzIGxpa2UgdGhlIFdhY29tIHBsdWdpbiBpc24ndCBpbnN0YWxsZWQsIG9yIGZhaWxlZCB0byBsb2FkLlwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgNTAwMCk7XG4gICAgfTtcbn1cblxuQ1BXYWNvbVRhYmxldC5nZXRSZWYgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAoQ1BXYWNvbVRhYmxldC5pbnN0YW5jZSA9PSBudWxsKSB7XG4gICAgICAgIENQV2Fjb21UYWJsZXQuaW5zdGFuY2UgPSBuZXcgQ1BXYWNvbVRhYmxldCgpO1xuICAgIH1cbiAgICByZXR1cm4gQ1BXYWNvbVRhYmxldC5pbnN0YW5jZTtcbn1cblxud2luZG93Lm9uV2Fjb21QbHVnaW5Mb2FkZWQgPSBmdW5jdGlvbigpIHtcbiAgICBDUFdhY29tVGFibGV0LmdldFJlZigpLnBsdWdpbkxvYWRlZCgpO1xufSJdfQ==

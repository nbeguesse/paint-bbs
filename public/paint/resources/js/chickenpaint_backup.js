(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.ChickenPaint = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
/*
    ChickenPaint

    ChickenPaint is a translation of ChibiPaint from Java to JavaScript
    by Nicholas Sherlock / Chicken Smoothie.

    ChibiPaint is Copyright (c) 2006-2008 Marc Schefer

    ChickenPaint is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    ChickenPaint is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with ChickenPaint. If not, see <http://www.gnu.org/licenses/>.
*/

"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports["default"] = ChickenPaint;

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

var _engineCPBrushInfo = require("./engine/CPBrushInfo");

var _engineCPBrushInfo2 = _interopRequireDefault(_engineCPBrushInfo);

var _engineCPArtwork = require("./engine/CPArtwork");

var _engineCPArtwork2 = _interopRequireDefault(_engineCPArtwork);

var _engineCPResourceLoader = require("./engine/CPResourceLoader");

var _engineCPResourceLoader2 = _interopRequireDefault(_engineCPResourceLoader);

var _engineCPResourceSaver = require("./engine/CPResourceSaver");

var _engineCPResourceSaver2 = _interopRequireDefault(_engineCPResourceSaver);

var _guiCPSplashScreenJs = require("./gui/CPSplashScreen.js");

var _guiCPSplashScreenJs2 = _interopRequireDefault(_guiCPSplashScreenJs);

var _guiCPMainGUI = require("./gui/CPMainGUI");

var _guiCPMainGUI2 = _interopRequireDefault(_guiCPMainGUI);

var _guiCPAboutDialog = require("./gui/CPAboutDialog");

var _guiCPAboutDialog2 = _interopRequireDefault(_guiCPAboutDialog);

var _guiCPShortcutsDialog = require("./gui/CPShortcutsDialog");

var _guiCPShortcutsDialog2 = _interopRequireDefault(_guiCPShortcutsDialog);

var _guiCPBoxBlurDialog = require("./gui/CPBoxBlurDialog");

var _guiCPBoxBlurDialog2 = _interopRequireDefault(_guiCPBoxBlurDialog);

var _guiCPTabletDialog = require("./gui/CPTabletDialog");

var _guiCPTabletDialog2 = _interopRequireDefault(_guiCPTabletDialog);

var _guiCPGridDialog = require("./gui/CPGridDialog");

var _guiCPGridDialog2 = _interopRequireDefault(_guiCPGridDialog);

var _guiCPSendDialog = require("./gui/CPSendDialog");

var _guiCPSendDialog2 = _interopRequireDefault(_guiCPSendDialog);

var _utilCPColor = require("./util/CPColor");

var _utilCPColor2 = _interopRequireDefault(_utilCPColor);

var _utilCPWacomTablet = require("./util/CPWacomTablet");

var _utilCPWacomTablet2 = _interopRequireDefault(_utilCPWacomTablet);

var _utilCPRect = require("./util/CPRect");

var _utilCPRect2 = _interopRequireDefault(_utilCPRect);

function isEventSupported(eventName) {
    var isSupported = (eventName in window);

    if (!isSupported) {
        var el = document.createElement('div');
        el.setAttribute(eventName, 'return;');

        isSupported = typeof el[eventName] == 'function';
    }

    return isSupported;
}

function isCanvasSupported() {
    var elem = document.createElement('canvas');
    return !!(elem.getContext && elem.getContext('2d'));
}

function isBrowserSupported() {
    return isCanvasSupported() && "Uint8Array" in window;
}

function createDrawingTools() {
    var tools = new Array(ChickenPaint.T_MAX);

    tools[ChickenPaint.T_PENCIL] = new _engineCPBrushInfo2["default"]({
        toolNb: ChickenPaint.T_PENCIL,
        size: 16,
        alpha: 255,
        isAA: true,
        minSpacing: 0.5,
        spacing: 0.05,
        pressureSize: false,
        pressureAlpha: true,
        type: _engineCPBrushInfo2["default"].B_ROUND_AA,
        paintMode: _engineCPBrushInfo2["default"].M_PAINT
    });

    tools[ChickenPaint.T_ERASER] = new _engineCPBrushInfo2["default"]({
        toolNb: ChickenPaint.T_ERASER,
        size: 16,
        alpha: 255,
        isAA: true,
        minSpacing: 0.5,
        spacing: 0.05,
        pressureSize: false,
        pressureAlpha: false,
        type: _engineCPBrushInfo2["default"].B_ROUND_AA,
        paintMode: _engineCPBrushInfo2["default"].M_ERASE
    });

    tools[ChickenPaint.T_PEN] = new _engineCPBrushInfo2["default"]({
        toolNb: ChickenPaint.T_PEN,
        size: 2,
        alpha: 128,
        isAA: true,
        minSpacing: 0.5,
        spacing: 0.05,
        pressureSize: true,
        pressureAlpha: false,
        type: _engineCPBrushInfo2["default"].B_ROUND_AA,
        paintMode: _engineCPBrushInfo2["default"].M_PAINT
    });

    tools[ChickenPaint.T_SOFTERASER] = new _engineCPBrushInfo2["default"]({
        toolNb: ChickenPaint.T_SOFTERASER,
        size: 16,
        alpha: 64,
        isAA: false,
        isAirbrush: true,
        minSpacing: 0.5,
        spacing: 0.05,
        pressureSize: false,
        pressureAlpha: true,
        type: _engineCPBrushInfo2["default"].B_ROUND_AIRBRUSH,
        paintMode: _engineCPBrushInfo2["default"].M_ERASE
    });

    tools[ChickenPaint.T_AIRBRUSH] = new _engineCPBrushInfo2["default"]({
        toolNb: ChickenPaint.T_AIRBRUSH,
        size: 50,
        alpha: 32,
        isAA: false,
        isAirbrush: true,
        minSpacing: 0.5,
        spacing: 0.05,
        pressureSize: false,
        pressureAlpha: true,
        type: _engineCPBrushInfo2["default"].B_ROUND_AIRBRUSH,
        paintMode: _engineCPBrushInfo2["default"].M_PAINT
    });

    tools[ChickenPaint.T_DODGE] = new _engineCPBrushInfo2["default"]({
        toolNb: ChickenPaint.T_DODGE,
        size: 30,
        alpha: 32,
        isAA: false,
        isAirbrush: true,
        minSpacing: 0.5,
        spacing: 0.05,
        pressureSize: false,
        pressureAlpha: true,
        type: _engineCPBrushInfo2["default"].B_ROUND_AIRBRUSH,
        paintMode: _engineCPBrushInfo2["default"].M_DODGE
    });

    tools[ChickenPaint.T_BURN] = new _engineCPBrushInfo2["default"]({
        toolNb: ChickenPaint.T_BURN,
        size: 30,
        alpha: 32,
        isAA: false,
        isAirbrush: true,
        minSpacing: 0.5,
        spacing: 0.05,
        pressureSize: false,
        pressureAlpha: true,
        type: _engineCPBrushInfo2["default"].B_ROUND_AIRBRUSH,
        paintMode: _engineCPBrushInfo2["default"].M_BURN
    });

    tools[ChickenPaint.T_WATER] = new _engineCPBrushInfo2["default"]({
        toolNb: ChickenPaint.T_WATER,
        size: 30,
        alpha: 70,
        isAA: false,
        isAirbrush: true,
        minSpacing: 0.5,
        spacing: 0.02,
        pressureSize: false,
        pressureAlpha: true,
        type: _engineCPBrushInfo2["default"].B_ROUND_AA,
        paintMode: _engineCPBrushInfo2["default"].M_WATER,
        resat: 0.3,
        bleed: 0.6
    });

    tools[ChickenPaint.T_BLUR] = new _engineCPBrushInfo2["default"]({
        toolNb: ChickenPaint.T_BLUR,
        size: 20,
        alpha: 255,
        isAA: false,
        isAirbrush: true,
        minSpacing: 0.5,
        spacing: 0.05,
        pressureSize: false,
        pressureAlpha: true,
        type: _engineCPBrushInfo2["default"].B_ROUND_PIXEL,
        paintMode: _engineCPBrushInfo2["default"].M_BLUR
    });

    tools[ChickenPaint.T_SMUDGE] = new _engineCPBrushInfo2["default"]({
        toolNb: ChickenPaint.T_SMUDGE,
        size: 20,
        alpha: 128,
        isAA: false,
        isAirbrush: true,
        minSpacing: 0.5,
        spacing: 0.01,
        pressureSize: false,
        pressureAlpha: true,
        type: _engineCPBrushInfo2["default"].B_ROUND_AIRBRUSH,
        paintMode: _engineCPBrushInfo2["default"].M_SMUDGE,
        resat: 0.0,
        bleed: 1.0
    });

    tools[ChickenPaint.T_BLENDER] = new _engineCPBrushInfo2["default"]({
        toolNb: ChickenPaint.T_BLENDER,
        size: 20,
        alpha: 60,
        isAA: false,
        isAirbrush: true,
        minSpacing: 0.5,
        spacing: 0.1,
        pressureSize: false,
        pressureAlpha: true,
        type: _engineCPBrushInfo2["default"].B_ROUND_AIRBRUSH,
        paintMode: _engineCPBrushInfo2["default"].M_OIL,
        resat: 0.0,
        bleed: 0.07
    });

    return tools;
}

/**
 * Creates an instance of the ChickenPaint drawing app. Options is an object with these keys:
 *
 * uiElem       - DOM element to insert ChickenPaint into (required)
 * canvasWidth  - Width in pixels to use when creating blank canvases (defaults to 800)
 * canvasHeight - Height in pixels to use when creating blank canvases (defaults to 600)
 * rotation     - Integer from [0..3], number of 90 degree right rotations that should be applied to the canvas after
 *                loading
 *
 * saveUrl   - URL to POST the drawing to to save it
 * postUrl   - URL to navigate to after saving is successful and the user chooses to see/publish their finished product
 * exitUrl   - URL to navigate to after saving is successful and the user chooses to exit (optional)
 * testUrl   - URL that ChickenPaint can simulate a drawing upload to to test the user's permissions/connection (optional)
 *
 * loadImageUrl     - URL of PNG/JPEG image to load for editing (optional)
 * loadChibiFileUrl - URL of .chi file to load for editing (optional). Used in preference to loadImage.
 * loadSwatchesUrl  - URL of an .aco palette to load (optional)
 * 
 * allowDownload - Allow the drawing to be saved to the user's computer
 * allowFullScreen - Allow the drawing tool to enter "full screen" mode, where the rest of the page contents will be hidden
 *
 * disableBootstrapAPI - Disable Bootstrap's data API on the root of the document. This speeds up things considerably.
 * 
 * resourcesRoot - URL to the directory that contains the gfx/css etc directories (relative to the page that 
 *                 ChickenPaint is loaded on)
 *
 * @throws ChickenPaint.UnsupportedBrowserException if the web browser does not support ChickenPaint
 */

function ChickenPaint(options) {
    var that = this,
        uiElem = options.uiElem,
        canvas,
        mainGUI,
        curColor = new _utilCPColor2["default"](0),
        curBrush = ChickenPaint.T_PENCIL,
        curMode = ChickenPaint.M_DRAW,
        curGradient = [0xFF000000, 0xFFFFFFFF],
        fullScreenMode = false,
        tools = createDrawingTools(),
        boxBlurDialog,
        gridDialog;

    function showBoxBlurDialog() {
        if (!boxBlurDialog) {
            boxBlurDialog = new _guiCPBoxBlurDialog2["default"](uiElem, that);
        }

        boxBlurDialog.show();
    }

    function showGridOptionsDialog() {
        if (!gridDialog) {
            gridDialog = new _guiCPGridDialog2["default"](uiElem, canvas);
        }

        gridDialog.show();
    }

    function callToolListeners() {
        that.emitEvent('toolChange', [curBrush, tools[curBrush]]);
    }

    // TODO make me private
    this.callToolListeners = function () {
        callToolListeners();
    };

    function callModeListeners() {
        that.emitEvent('modeChange', [curMode]);
    }

    function callViewListeners(viewInfo) {
        that.emitEvent('viewChange', [viewInfo]);
    }

    this.getMainGUI = function () {
        return mainGUI;
    };

    this.getArtwork = function () {
        return this.artwork;
    };

    this.setCanvas = function (_canvas) {
        canvas = _canvas;
    };

    this.setCurColor = function (color) {
        if (!curColor.isEqual(color)) {
            this.artwork.setForegroundColor(color.getRgb());

            curColor.copyFrom(color);

            this.emitEvent('colorChange', [color]);
        }
    };

    this.getCurColor = function () {
        return curColor.clone();
    };

    this.getCurColorRgb = function () {
        return curColor.getRgb();
    };

    this.setCurColorRgb = function (color) {
        this.setCurColor(new _utilCPColor2["default"](color));
    };

    this.setCurGradient = function (gradient) {
        curGradient = gradient.slice(0); // Clone

        this.emitEvent('gradientChange', [curGradient]);
    };

    this.getCurGradient = function () {
        return curGradient.slice(0); // Clone
    };

    this.setBrushSize = function (size) {
        tools[curBrush].size = Math.max(1, Math.min(200, size));
        callToolListeners();
    };

    this.getBrushSize = function () {
        return tools[curBrush].size;
    };

    this.setAlpha = function (alpha) {
        tools[curBrush].alpha = alpha;
        callToolListeners();
    };

    this.getAlpha = function () {
        return tools[curBrush].alpha;
    };

    function setMode(mode) {
        curMode = mode;
        callModeListeners();
    }

    function setTool(tool) {
        setMode(ChickenPaint.M_DRAW);
        curBrush = tool;
        that.artwork.setBrush(tools[tool]);
        callToolListeners();
    }

    this.getBrushInfo = function () {
        return tools[curBrush];
    };

    function saveDrawing() {
        var saver = new _engineCPResourceSaver2["default"]({
            artwork: that.getArtwork(),
            rotation: canvas.getRotation90(),
            swatches: mainGUI.getSwatches()
        });

        saver.on("savingComplete", function () {
            that.artwork.setHasUnsavedChanges(false);
        });

        saver.on("savingFailure", function () {
            alert("An error occured while trying to save your drawing! Please try again!");
        });

        saver.save();
    }

    function sendDrawing() {
        var saver = new _engineCPResourceSaver2["default"]({
            artwork: that.getArtwork(),
            rotation: canvas.getRotation90(),
            swatches: mainGUI.getSwatches(),
            url: options.saveUrl
        }),
            sendDialog = new _guiCPSendDialog2["default"](that, uiElem, saver);

        saver.on("savingComplete", function () {
            that.artwork.setHasUnsavedChanges(false);
        });

        // Allow the dialog to show before we begin serialization
        sendDialog.on("shown", function () {
            saver.save();
        });

        sendDialog.show();
    }

    /**
     * Not all saving actions will be supported (depending on what options we're configured with). Use this function
     * to check for support for a given action.
     */
    this.isActionSupported = function (actionName) {
        switch (actionName) {
            case "CPSend":
                return !!options.saveUrl;

            case "CPSave":
                return options.allowDownload !== false;

            case "CPExit":
                return !!options.exitUrl;

            case "CPPost":
                return !!options.postUrl;

            case "CPFullScreen":
                return options.allowFullScreen !== false;

            default:
                return true;
        }
    };

    this.actionPerformed = function (e) {
        if (this.artwork == null || canvas == null) {
            return; // this shouldn't happen but just in case
        }

        switch (e.action) {
            case "CPFullScreen":
                fullScreenMode = !fullScreenMode;

                $("body").toggleClass("chickenpaint-full-screen", fullScreenMode);
                $(uiElem).toggleClass("chickenpaint-full-screen", fullScreenMode);

                setTimeout(function () {
                    mainGUI.setFullScreenMode(fullScreenMode);
                }, 200);
                break;

            case "CPZoomIn":
                canvas.zoomIn();
                break;
            case "CPZoomOut":
                canvas.zoomOut();
                break;
            case "CPZoom100":
                canvas.zoom100();
                break;
            case "CPUndo":
                this.artwork.undo();
                break;
            case "CPRedo":
                this.artwork.redo();
                break;
            case "CPClearHistory":
                if (confirm("You're about to clear the current Undo/Redo history.\nThis operation cannot be undone, are you sure you want to do that?")) {
                    this.artwork.clearHistory();
                }
                break;
            case "CPPencil":
                setTool(ChickenPaint.T_PENCIL);
                break;
            case "CPPen":
                setTool(ChickenPaint.T_PEN);
                break;
            case "CPEraser":
                setTool(ChickenPaint.T_ERASER);
                break;
            case "CPSoftEraser":
                setTool(ChickenPaint.T_SOFTERASER);
                break;
            case "CPAirbrush":
                setTool(ChickenPaint.T_AIRBRUSH);
                break;
            case "CPDodge":
                setTool(ChickenPaint.T_DODGE);
                break;
            case "CPBurn":
                setTool(ChickenPaint.T_BURN);
                break;
            case "CPWater":
                setTool(ChickenPaint.T_WATER);
                break;
            case "CPBlur":
                setTool(ChickenPaint.T_BLUR);
                break;
            case "CPSmudge":
                setTool(ChickenPaint.T_SMUDGE);
                break;
            case "CPBlender":
                setTool(ChickenPaint.T_BLENDER);
                break;

            // Modes

            case "CPFloodFill":
                setMode(ChickenPaint.M_FLOODFILL);
                break;
            case "CPGradientFill":
                setMode(ChickenPaint.M_GRADIENTFILL);
                break;
            case "CPRectSelection":
                setMode(ChickenPaint.M_RECT_SELECTION);
                break;
            case "CPMoveTool":
                setMode(ChickenPaint.M_MOVE_TOOL);
                break;
            case "CPRotateCanvas":
                setMode(ChickenPaint.M_ROTATE_CANVAS);
                break;
            case "CPColorPicker":
                setMode(ChickenPaint.M_COLOR_PICKER);
                break;

            // Stroke modes

            case "CPFreeHand":
                tools[curBrush].strokeMode = _engineCPBrushInfo2["default"].SM_FREEHAND;
                callToolListeners();
                break;
            case "CPLine":
                tools[curBrush].strokeMode = _engineCPBrushInfo2["default"].SM_LINE;
                callToolListeners();
                break;
            case "CPBezier":
                tools[curBrush].strokeMode = _engineCPBrushInfo2["default"].SM_BEZIER;
                callToolListeners();
                break;

            case "CPAbout":
                new _guiCPAboutDialog2["default"](uiElem).show();
                break;
            case "CPShortcuts":
                new _guiCPShortcutsDialog2["default"](uiElem).show();
                break;
            case "CPTabletSupport":
                new _guiCPTabletDialog2["default"](uiElem).show();
                break;

            // Layers actions

            case "CPLayerDuplicate":
                this.artwork.duplicateLayer();
                break;
            case "CPLayerMergeDown":
                this.artwork.mergeDown(true);
                break;
            case "CPLayerMergeAll":
                this.artwork.mergeAllLayers(true);
                break;
            case "CPFill":
                this.artwork.fill(this.getCurColorRgb() | 0xff000000);
                break;
            case "CPClear":
                this.artwork.clear();
                break;
            case "CPSelectAll":
                this.artwork.rectangleSelection(this.artwork.getBounds());
                canvas.repaintAll();
                break;
            case "CPDeselectAll":
                this.artwork.rectangleSelection(new _utilCPRect2["default"](0, 0, 0, 0));
                canvas.repaintAll();
                break;
            case "CPHFlip":
                this.artwork.hFlip();
                break;
            case "CPVFlip":
                this.artwork.vFlip();
                break;
            case "CPMNoise":
                this.artwork.monochromaticNoise();
                break;
            case "CPCNoise":
                this.artwork.colorNoise();
                break;
            case "CPFXBoxBlur":
                showBoxBlurDialog();
                break;
            case "CPFXInvert":
                this.artwork.invert();
                break;
            case "CPCut":
                this.artwork.cutSelection(true);
                break;
            case "CPCopy":
                this.artwork.copySelection();
                break;
            case "CPCopyMerged":
                this.artwork.copySelectionMerged();
                break;
            case "CPPaste":
                this.artwork.pasteClipboard(true);
                break;
            case "CPLinearInterpolation":
                canvas.setInterpolation(e.selected);
                break;
            case "CPToggleGrid":
                canvas.showGrid(e.selected);
                break;
            case "CPGridOptions":
                showGridOptionsDialog();
                break;
            case "CPResetCanvasRotation":
                canvas.resetRotation();
                break;
            case "CPPalColor":
                mainGUI.showPalette("color", e.selected);
                break;
            case "CPPalBrush":
                mainGUI.showPalette("brush", e.selected);
                break;
            case "CPPalLayers":
                mainGUI.showPalette("layers", e.selected);
                break;
            case "CPPalStroke":
                mainGUI.showPalette("stroke", e.selected);
                break;
            case "CPPalSwatches":
                mainGUI.showPalette("swatches", e.selected);
                break;
            case "CPPalTool":
                mainGUI.showPalette("tool", e.selected);
                break;
            case "CPPalMisc":
                mainGUI.showPalette("misc", e.selected);
                break;
            case "CPPalTextures":
                mainGUI.showPalette("textures", e.selected);
                break;
            case "CPTogglePalettes":
                mainGUI.togglePalettes();
                break;
            case "CPArrangePalettes":
                mainGUI.arrangePalettes();
                break;

            // Saving

            case "CPSave":
                saveDrawing();
                break;
            case "CPSend":
                sendDrawing();
                break;
            case "CPPost":
                window.location = options.postUrl;
                break;
            case "CPExit":
                // Exit the drawing session without posting the drawing to the forum
                window.location = options.exitUrl;
                break;
        }

        // callCPEventListeners(); TODO
    };

    function installUnsavedWarning() {
        var confirmMessage = "Your drawing has unsaved changes!";

        if (isEventSupported("onbeforeunload")) {
            window.addEventListener("beforeunload", function (e) {
                if (that.artwork.getHasUnsavedChanges()) {
                    e.returnValue = confirmMessage;
                    return confirmMessage;
                }
            });
        } else {
            $("a").click(function (e) {
                // Fall back to just catching links
                if (that.artwork.getHasUnsavedChanges()) {
                    return confirm(confirmMessage);
                }
            });
        }
    }

    function startMainGUI(swatches, initialRotation90) {
        mainGUI = new _guiCPMainGUI2["default"](that, uiElem);

        setTool(ChickenPaint.T_PEN);
        mainGUI.arrangePalettes();

        if (swatches) {
            mainGUI.setSwatches(swatches);
        }

        if (initialRotation90) {
            mainGUI.setRotation(initialRotation90 * Math.PI / 2);
        }

        _utilCPWacomTablet2["default"].getRef().detectTablet();

        installUnsavedWarning();
    }

    this.getResourcesRoot = function () {
        return options.resourcesRoot;
    };

    if (!isBrowserSupported()) {
        throw new ChickenPaint.UnsupportedBrowserException();
    }

    if (typeof document.body.style.flexBasis != "string" && typeof document.body.style.msFlexDirection != "string") {
        uiElem.className += " no-flexbox";
    }

    uiElem.className += " chickenpaint";

    options.resourcesRoot = options.resourcesRoot || "chickenpaint/";

    if (options.disableBootstrapAPI) {
        $(document).off('.data-api');
    }

    if (options.loadImageUrl || options.loadChibiFileUrl) {
        var loader = new _engineCPResourceLoader2["default"](options);

        new _guiCPSplashScreenJs2["default"](uiElem, loader, options.resourcesRoot);

        loader.on("loadingComplete", function (resources) {
            that.artwork = resources.layers || resources.flat;

            startMainGUI(resources.swatches, options.rotation);
        });

        loader.load();
    } else {
        this.artwork = new _engineCPArtwork2["default"](options.canvasWidth || 800, options.canvasHeight || 600);
        this.artwork.addBackgroundLayer();

        startMainGUI();
    }
}

ChickenPaint.prototype = Object.create(EventEmitter.prototype);
ChickenPaint.prototype.constructor = ChickenPaint;

ChickenPaint.UnsupportedBrowserException = function () {};

ChickenPaint.UnsupportedBrowserException.prototype.toString = function () {
    return "Sorry, your web browser does not support ChickenPaint. Please try a modern browser like Chrome, Safari, Firefox, or Edge";
};

//
// Definition of all the modes available
//

ChickenPaint.M_DRAW = 0;
ChickenPaint.M_FLOODFILL = 1;
ChickenPaint.M_RECT_SELECTION = 2;
ChickenPaint.M_MOVE_TOOL = 3;
ChickenPaint.M_ROTATE_CANVAS = 4;
ChickenPaint.M_COLOR_PICKER = 5;
ChickenPaint.M_GRADIENTFILL = 6;

//
// Definition of all the standard tools available
//
ChickenPaint.T_PENCIL = 0;
ChickenPaint.T_ERASER = 1;
ChickenPaint.T_PEN = 2;
ChickenPaint.T_SOFTERASER = 3;
ChickenPaint.T_AIRBRUSH = 4;
ChickenPaint.T_DODGE = 5;
ChickenPaint.T_BURN = 6;
ChickenPaint.T_WATER = 7;
ChickenPaint.T_BLUR = 8;
ChickenPaint.T_SMUDGE = 9;
ChickenPaint.T_BLENDER = 10;
ChickenPaint.T_MAX = 11;
module.exports = exports["default"];

},{"./engine/CPArtwork":2,"./engine/CPBrushInfo":5,"./engine/CPResourceLoader":13,"./engine/CPResourceSaver":14,"./gui/CPAboutDialog":16,"./gui/CPBoxBlurDialog":17,"./gui/CPGridDialog":26,"./gui/CPMainGUI":28,"./gui/CPSendDialog":34,"./gui/CPShortcutsDialog":35,"./gui/CPSplashScreen.js":37,"./gui/CPTabletDialog":40,"./util/CPColor":46,"./util/CPRect":49,"./util/CPWacomTablet":51}],2:[function(require,module,exports){
/*
    ChickenPaint
    
    ChickenPaint is a translation of ChibiPaint from Java to JavaScript
    by Nicholas Sherlock / Chicken Smoothie.
    
    ChibiPaint is Copyright (c) 2006-2008 Marc Schefer

    ChickenPaint is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    ChickenPaint is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with ChickenPaint. If not, see <http://www.gnu.org/licenses/>.
*/

"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports["default"] = CPArtwork;

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

var _CPLayer = require("./CPLayer");

var _CPLayer2 = _interopRequireDefault(_CPLayer);

var _CPGreyBmp = require("./CPGreyBmp");

var _CPGreyBmp2 = _interopRequireDefault(_CPGreyBmp);

var _CPColorBmp = require("./CPColorBmp");

var _CPColorBmp2 = _interopRequireDefault(_CPColorBmp);

var _CPBrushManager = require("./CPBrushManager");

var _CPBrushManager2 = _interopRequireDefault(_CPBrushManager);

var _CPBrushInfo = require("./CPBrushInfo");

var _CPBrushInfo2 = _interopRequireDefault(_CPBrushInfo);

var _CPUndo = require("./CPUndo");

var _CPUndo2 = _interopRequireDefault(_CPUndo);

var _CPClip = require("./CPClip");

var _CPClip2 = _interopRequireDefault(_CPClip);

var _utilCPColorFloat = require("../util/CPColorFloat");

var _utilCPColorFloat2 = _interopRequireDefault(_utilCPColorFloat);

var _utilCPRect = require("../util/CPRect");

var _utilCPRect2 = _interopRequireDefault(_utilCPRect);

var _utilCPRandom = require("../util/CPRandom");

var _utilCPRandom2 = _interopRequireDefault(_utilCPRandom);

// Polyfill, used in duplicateLayer
if (!String.prototype.endsWith) {
    String.prototype.endsWith = function (searchString, position) {
        var subjectString = this.toString();
        if (typeof position !== 'number' || !isFinite(position) || Math.floor(position) !== position || position > subjectString.length) {
            position = subjectString.length;
        }
        position -= searchString.length;
        var lastIndex = subjectString.indexOf(searchString, position);
        return lastIndex !== -1 && lastIndex === position;
    };
}

function CPArtwork(_width, _height) {

    _width = _width | 0;
    _height = _height | 0;

    var MAX_UNDO = 30,
        EMPTY_BACKGROUND_COLOR = 0xFFFFFFFF,
        EMPTY_LAYER_COLOR = 0x00FFFFFF,
        BURN_CONSTANT = 260,
        BLUR_MIN = 64,
        BLUR_MAX = 1;

    var layers = [],
        curLayer,
        hasUnsavedChanges = false,
        curSelection = new _utilCPRect2["default"](0, 0, 0, 0),
        fusionBuffer = new _CPLayer2["default"](_width, _height),
        undoBuffer = new _CPLayer2["default"](_width, _height),
        undoBufferInvalidRegion = new _utilCPRect2["default"](0, 0, _width, _height),
        fusion = fusionBuffer,

    /* 
     * We use this buffer so we can accurately accumulate small changes to layer opacity during a brush stroke.
     * 
     * Normally we use it as a 16-bit opacity channel per pixel, but some brushes use the full 32-bits per pixel
     * as ARGB.
     */
    opacityBuffer = new _CPGreyBmp2["default"](_width, _height, 32),
        fusionArea = new _utilCPRect2["default"](0, 0, _width, _height),
        undoArea = new _utilCPRect2["default"](0, 0, 0, 0),
        opacityArea = new _utilCPRect2["default"](0, 0, 0, 0),
        rnd = new _utilCPRandom2["default"](),
        clipboard = null,
        // A CPClip
    undoList = [],
        redoList = [],
        curBrush = null,
        brushManager = new _CPBrushManager2["default"](),
        lastX = 0.0,
        lastY = 0.0,
        lastPressure = 0.0,
        brushBuffer = null,
        sampleAllLayers = false,
        lockAlpha = false,
        curColor = 0x000000,
        // Black

    that = this;

    // FIXME: 2007-01-13 I'm moving this to the CPRect class
    // find where this version is used and change the
    // code to use the CPRect version
    function clipSourceDest(srcRect, dstRect) {
        // FIXME:
        // /!\ dstRect bottom and right are ignored and instead we clip
        // against the width, height of the layer. :/
        //

        // this version would be enough in most cases (when we don't need
        // srcRect bottom and right to be clipped)
        // it's left here in case it's needed to make a faster version
        // of this function
        // dstRect.right = Math.min(width, dstRect.left + srcRect.getWidth());
        // dstRect.bottom = Math.min(height, dstRect.top + srcRect.getHeight());

        // new dest bottom/right
        dstRect.right = dstRect.left + srcRect.getWidth();
        if (dstRect.right > that.width) {
            srcRect.right -= dstRect.right - that.width;
            dstRect.right = that.width;
        }

        dstRect.bottom = dstRect.top + srcRect.getHeight();
        if (dstRect.bottom > that.height) {
            srcRect.bottom -= dstRect.bottom - that.height;
            dstRect.bottom = that.height;
        }

        // new src top/left
        if (dstRect.left < 0) {
            srcRect.left -= dstRect.left;
            dstRect.left = 0;
        }

        if (dstRect.top < 0) {
            srcRect.top -= dstRect.top;
            dstRect.top = 0;
        }
    }

    function callListenersUpdateRegion(region) {
        that.emitEvent("updateRegion", [region]);
    }

    // layerIndex is optional, provide when only one layer has been updated
    function callListenersLayerChange(layerIndex) {
        that.emitEvent("changeLayer", [layerIndex]);
    }

    this.getLayers = function () {
        return layers;
    };

    this.getLayerCount = function () {
        return layers.length;
    };

    //
    // Selection methods
    //

    /**
     * Gets the current selection rect or a rectangle covering the whole canvas if there are no selections
     * 
     * @returns CPRect
     */
    this.getSelectionAutoSelect = function () {
        var r;

        if (!curSelection.isEmpty()) {
            r = curSelection.clone();
        } else {
            r = this.getBounds();
        }

        return r;
    };

    this.getSelection = function () {
        return curSelection.clone();
    };

    /**
     * Mark the given rectangle on the canvas as needing to be re-fused (i.e. we've drawn in this region).
     * Listeners are notified about our updated canvas region.
     *
     * @param rect CPRect Rect to invalidate
     */
    function invalidateFusionRect(rect) {
        fusionArea.union(rect);

        // This updated area will need to be updated in our undo buffer later
        undoBufferInvalidRegion.union(rect);

        callListenersUpdateRegion(rect);
    };

    /**
     * Mark the entire canvas as needing to be re-fused (we've drawn to the whole canvas)
     */
    function invalidateFusion() {
        invalidateFusionRect(new _utilCPRect2["default"](0, 0, that.width, that.height));
    };

    this.setHasUnsavedChanges = function (value) {
        hasUnsavedChanges = value;
    };

    this.getHasUnsavedChanges = function () {
        return hasUnsavedChanges;
    };

    this.setLayerVisibility = function (layerIndex, visible) {
        var layer = this.getLayer(layerIndex);

        addUndo(new CPUndoLayerVisible(layerIndex, layer.visible, visible));
        layer.visible = visible;

        invalidateFusion();
        callListenersLayerChange(layerIndex);
    };

    this.addLayer = function () {
        var newLayer = new _CPLayer2["default"](this.width, this.height, this.getDefaultLayerName()),
            activeLayerIndex = this.getActiveLayerIndex();

        newLayer.clearAll(EMPTY_LAYER_COLOR); // Transparent white

        addUndo(new CPUndoAddLayer(activeLayerIndex));

        layers.splice(activeLayerIndex + 1, 0, newLayer);
        this.setActiveLayerIndex(activeLayerIndex + 1);

        invalidateFusion();
        callListenersLayerChange();
    };

    this.addLayerObject = function (layer) {
        layers.push(layer);

        if (layers.length == 1) {
            curLayer = layers[0];
        }

        invalidateFusion();
        callListenersLayerChange();
    };

    /**
     * Remove the currently selected layer.
     * 
     * Returns true if the layer was removed, or false when removal failed because there is currently only one layer in 
     * the document.
     */
    this.removeLayer = function () {
        if (layers.length > 1) {
            var activeLayerIndex = this.getActiveLayerIndex();

            addUndo(new CPUndoRemoveLayer(activeLayerIndex, curLayer));

            layers.splice(activeLayerIndex, 1);
            this.setActiveLayerIndex(activeLayerIndex < layers.length ? activeLayerIndex : activeLayerIndex - 1);

            invalidateFusion();
            callListenersLayerChange();

            return true;
        }

        return false;
    };

    this.duplicateLayer = function () {
        var copySuffix = " Copy",
            newLayer = new _CPLayer2["default"](this.width, this.height),
            activeLayerIndex = this.getActiveLayerIndex();

        addUndo(new CPUndoDuplicateLayer(activeLayerIndex));

        newLayer.copyFrom(layers[activeLayerIndex]);

        if (!newLayer.name.endsWith(copySuffix)) {
            newLayer.name += copySuffix;
        }

        layers.splice(activeLayerIndex + 1, 0, newLayer);
        this.setActiveLayerIndex(activeLayerIndex + 1);

        invalidateFusion();
        callListenersLayerChange();
    };

    this.mergeDown = function (createUndo) {
        var activeLayerIndex = this.getActiveLayerIndex();

        if (layers.length > 1 && activeLayerIndex > 0) {
            if (createUndo) {
                addUndo(new CPUndoMergeDownLayer(activeLayerIndex));
            }

            layers[activeLayerIndex].fusionWithFullAlpha(layers[activeLayerIndex - 1], this.getBounds());
            layers.splice(activeLayerIndex, 1);
            this.setActiveLayerIndex(activeLayerIndex - 1);

            invalidateFusion();
            callListenersLayerChange();
        }
    };

    this.mergeAllLayers = function (createUndo) {
        if (layers.length > 1) {
            if (createUndo) {
                addUndo(new CPUndoMergeAllLayers());
            }

            that.fusionLayers();
            layers = [];

            var layer = new _CPLayer2["default"](that.width, that.height, this.getDefaultLayerName());

            layer.copyDataFrom(fusion);

            layers.push(layer);
            this.setActiveLayerIndex(0);

            invalidateFusion();
            callListenersLayerChange();
        }
    };

    function moveLayerReal(from, to) {
        var layer = layers.splice(from, 1)[0];

        if (to <= from) {
            layers.splice(to, 0, layer);
            that.setActiveLayerIndex(to);
        } else {
            layers.splice(to - 1, 0, layer);
            that.setActiveLayerIndex(to - 1);
        }

        invalidateFusion();
        callListenersLayerChange();
    }

    /**
     * Move a layer in the stack from one index to another.
     * 
     * @param from int
     * @param to int
     */
    this.moveLayer = function (from, to) {
        if (from < 0 || from >= this.getLayerCount() || to < 0 || to > this.getLayerCount() || from == to) {
            return;
        }

        addUndo(new CPUndoMoveLayer(from, to));
        moveLayerReal(from, to);
    };

    this.setLayerAlpha = function (layerIndex, alpha) {
        var layer = this.getLayer(layerIndex);

        if (layer.getAlpha() != alpha) {
            addUndo(new CPUndoLayerAlpha(layerIndex, alpha));
            layer.setAlpha(alpha);

            invalidateFusion();
            callListenersLayerChange(layerIndex);
        }
    };

    this.setLayerBlendMode = function (layerIndex, blendMode) {
        var layer = this.getLayer(layerIndex);

        if (layer.getBlendMode() != blendMode) {
            addUndo(new CPUndoLayerMode(layerIndex, blendMode));
            layer.setBlendMode(blendMode);

            invalidateFusion();
            callListenersLayerChange(layerIndex);
        }
    };

    this.setLayerName = function (layerIndex, name) {
        var layer = this.getLayer(layerIndex);

        if (layer && layer.name != name) {
            addUndo(new CPUndoLayerRename(layerIndex, name));
            layer.name = name;

            callListenersLayerChange(layerIndex);
        }
    };

    function CPBrushToolBase() {}

    CPBrushToolBase.prototype.beginStroke = function (x, y, pressure) {
        prepareForLayerUndo();
        undoArea.makeEmpty();

        opacityBuffer.clearAll(0);
        opacityArea.makeEmpty();

        lastX = x;
        lastY = y;
        lastPressure = pressure;

        this.createAndPaintDab(x, y, pressure);
    };

    CPBrushToolBase.prototype.continueStroke = function (x, y, pressure) {
        var dist = Math.sqrt((lastX - x) * (lastX - x) + (lastY - y) * (lastY - y)),
            spacing = Math.max(curBrush.minSpacing, curBrush.curSize * curBrush.spacing);

        if (dist > spacing) {
            var nx = lastX,
                ny = lastY,
                np = lastPressure,
                df = (spacing - 0.001) / dist;

            for (var f = df; f <= 1.0; f += df) {
                nx = f * x + (1.0 - f) * lastX;
                ny = f * y + (1.0 - f) * lastY;
                np = f * pressure + (1.0 - f) * lastPressure;
                this.createAndPaintDab(nx, ny, np);
            }
            lastX = nx;
            lastY = ny;
            lastPressure = np;
        }
    };

    CPBrushToolBase.prototype.endStroke = function () {
        undoArea.clip(that.getBounds());

        // Did we end up painting anything?
        if (!undoArea.isEmpty()) {
            mergeOpacityBuffer(curColor, false);
            addUndo(new CPUndoPaint());

            /* Eagerly update the undo buffer for next time so we can avoid this lengthy
             * prepare at the beginning of a paint stroke
             */
            prepareForLayerUndo();
        }
        brushBuffer = null;
    };

    /**
     * Create a paint dab at the given position using the current brush, and paint it.
     *
     * @param x float
     * @param y float
     * @param pressure float
     */
    CPBrushToolBase.prototype.createAndPaintDab = function (x, y, pressure) {
        curBrush.applyPressure(pressure);

        if (curBrush.scattering > 0.0) {
            x += rnd.nextGaussian() * curBrush.curScattering / 4.0;
            y += rnd.nextGaussian() * curBrush.curScattering / 4.0;
        }

        var dab = brushManager.getDab(x, y, curBrush);

        this.paintDab(dab);
    };

    /**
     * Paint a dab returned by brushManager.getDab()
     *
     * @param dab {byte[] brush; int x, y, alpha, width, height}
     */
    CPBrushToolBase.prototype.paintDab = function (dab) {
        var srcRect = new _utilCPRect2["default"](0, 0, dab.width, dab.height),
            dstRect = new _utilCPRect2["default"](0, 0, dab.width, dab.height);

        dstRect.translate(dab.x, dab.y);

        clipSourceDest(srcRect, dstRect);

        // drawing entirely outside the canvas
        if (dstRect.isEmpty()) {
            return;
        }

        undoArea.union(dstRect);
        opacityArea.union(dstRect);

        this.paintDabImplementation(srcRect, dstRect, dab);

        invalidateFusionRect(dstRect);
    };

    function CPBrushToolSimpleBrush() {}

    CPBrushToolSimpleBrush.prototype = Object.create(CPBrushToolBase.prototype);
    CPBrushToolSimpleBrush.prototype.constructor = CPBrushToolSimpleBrush;

    CPBrushToolSimpleBrush.prototype.paintDabImplementation = function (srcRect, dstRect, dab) {
        // FIXME: there should be no reference to a specific tool here
        // create a new brush parameter instead
        if (curBrush.isAirbrush) {
            this.paintFlow(srcRect, dstRect, dab.brush, dab.width, Math.max(1, dab.alpha / 8));
        } else if (curBrush.toolNb == ChickenPaint.T_PEN) {
            this.paintFlow(srcRect, dstRect, dab.brush, dab.width, Math.max(1, dab.alpha / 2));
        } else {
            this.paintOpacity(srcRect, dstRect, dab.brush, dab.width, dab.alpha);
        }
    };

    CPBrushToolSimpleBrush.prototype.mergeOpacityBuf = function (dstRect, color /* int */) {
        var opacityData = opacityBuffer.data,
            undoData = undoBuffer.data,
            red = color >> 16 & 0xFF,
            green = color >> 8 & 0xFF,
            blue = color & 0xFF,
            width = dstRect.getWidth() | 0,
            height = dstRect.getHeight() | 0,
            dstOffset = curLayer.offsetOfPixel(dstRect.left, dstRect.top),
            srcOffset = opacityBuffer.offsetOfPixel(dstRect.left, dstRect.top),
            srcYStride = opacityBuffer.width - width | 0,
            dstYStride = (curLayer.width - width) * _CPColorBmp2["default"].BYTES_PER_PIXEL | 0;

        for (var y = 0; y < height; y++, srcOffset += srcYStride, dstOffset += dstYStride) {
            for (var x = 0; x < width; x++, srcOffset++, dstOffset += _CPColorBmp2["default"].BYTES_PER_PIXEL) {
                var opacityAlpha = opacityData[srcOffset] / 255 | 0;

                if (opacityAlpha > 0) {
                    var destAlpha = undoData[dstOffset + _CPColorBmp2["default"].ALPHA_BYTE_OFFSET],
                        newLayerAlpha = opacityAlpha + destAlpha * (255 - opacityAlpha) / 255 | 0,
                        realAlpha = 255 * opacityAlpha / newLayerAlpha | 0,
                        invAlpha = 255 - realAlpha;

                    curLayer.data[dstOffset] = (red * realAlpha + undoData[dstOffset] * invAlpha) / 255 & 0xff;
                    curLayer.data[dstOffset + 1] = (green * realAlpha + undoData[dstOffset + 1] * invAlpha) / 255 & 0xff;
                    curLayer.data[dstOffset + 2] = (blue * realAlpha + undoData[dstOffset + 2] * invAlpha) / 255 & 0xff;
                    curLayer.data[dstOffset + 3] = newLayerAlpha;
                }
            }
        }
    };

    /**
     *
     * @param srcRect CPRect
     * @param dstRect CPRect
     * @param brush int[]
     * @param brushWidth int
     * @param alpha float
     */
    CPBrushToolSimpleBrush.prototype.paintOpacity = function (srcRect, dstRect, brush, brushWidth, alpha) {
        var opacityData = opacityBuffer.data,
            srcOffset = srcRect.left + srcRect.top * brushWidth,
            dstOffset = opacityBuffer.offsetOfPixel(dstRect.left, dstRect.top),
            dstWidth = dstRect.getWidth(),
            srcYStride = brushWidth - dstWidth,
            dstYStride = that.width - dstWidth;

        alpha = Math.min(255, alpha);

        for (var y = dstRect.top; y < dstRect.bottom; y++, srcOffset += srcYStride, dstOffset += dstYStride) {
            for (var x = 0; x < dstWidth; x++, srcOffset++, dstOffset++) {
                opacityData[dstOffset] = Math.max(brush[srcOffset] * alpha, opacityData[dstOffset]);
            }
        }
    };

    CPBrushToolSimpleBrush.prototype.paintFlow = function (srcRect, dstRect, brush, brushWidth, alpha) {
        var opacityData = opacityBuffer.data,
            srcOffset = srcRect.left + srcRect.top * brushWidth,
            dstOffset = opacityBuffer.offsetOfPixel(dstRect.left, dstRect.top),
            dstWidth = dstRect.getWidth(),
            srcYStride = brushWidth - dstWidth,
            dstYStride = that.width - dstWidth;

        for (var y = dstRect.top; y < dstRect.bottom; y++, srcOffset += srcYStride, dstOffset += dstYStride) {
            for (var x = 0; x < dstWidth; x++, srcOffset++, dstOffset++) {
                var brushAlpha = brush[srcOffset] * alpha;

                if (brushAlpha != 0) {
                    var opacityAlpha = Math.min(255 * 255, opacityData[dstOffset] + (255 - opacityData[dstOffset] / 255) * brushAlpha / 255);

                    opacityData[dstOffset] = opacityAlpha;
                }
            }
        }
    };

    /*CPBrushToolSimpleBrush.prototype.paintOpacityFlow = function(srcRect, dstRect, brush, brushWidth, opacity, flow) {
        var 
            opacityData = opacityBuffer.data,
             by = srcRect.top;
        
        for (var y = dstRect.top; y < dstRect.bottom; y++, by++) {
            var 
                srcOffset = srcRect.left + by * brushWidth,
                dstOffset = dstRect.left + y * width;
            
            for (var x = dstRect.left; x < dstRect.right; x++, srcOffset++, dstOffset++) {
                var 
                    brushAlpha = brush[srcOffset] * flow;
                
                if (brushAlpha != 0) {
                    var
                        opacityAlpha = opacityData[dstOffset],
                        newAlpha = Math.min(255 * 255, opacityAlpha + (opacity - opacityAlpha / 255) * brushAlpha / 255);
                    
                    newAlpha = Math.min(opacity * brush[srcOffset], newAlpha);
                    
                    if (newAlpha > opacityAlpha) {
                        opacityData[dstOffset] = newAlpha;
                    }
                }
            }
        }
    };*/

    function CPBrushToolEraser() {}

    CPBrushToolEraser.prototype = Object.create(CPBrushToolSimpleBrush.prototype);
    CPBrushToolEraser.prototype.constructor = CPBrushToolEraser;

    CPBrushToolEraser.prototype.mergeOpacityBuf = function (dstRect, color) {
        var opacityData = opacityBuffer.data,
            undoData = undoBuffer.data;

        for (var y = dstRect.top; y < dstRect.bottom; y++) {
            var dstOffset = curLayer.offsetOfPixel(dstRect.left, y) + _CPColorBmp2["default"].ALPHA_BYTE_OFFSET,
                srcOffset = opacityBuffer.offsetOfPixel(dstRect.left, y);

            for (var x = dstRect.left; x < dstRect.right; x++, dstOffset += _CPColorBmp2["default"].BYTES_PER_PIXEL) {
                var opacityAlpha = opacityData[srcOffset++] / 255 | 0;

                if (opacityAlpha > 0) {
                    var destAlpha = undoData[dstOffset],
                        realAlpha = destAlpha * (255 - opacityAlpha) / 255;

                    curLayer.data[dstOffset] = realAlpha;
                }
            }
        }
    };

    function CPBrushToolDodge() {}

    CPBrushToolDodge.prototype = Object.create(CPBrushToolSimpleBrush.prototype);
    CPBrushToolDodge.prototype.constructor = CPBrushToolDodge;

    CPBrushToolDodge.prototype.mergeOpacityBuf = function (dstRect, color) {
        var opacityData = opacityBuffer.data,
            undoData = undoBuffer.data;

        for (var y = dstRect.top; y < dstRect.bottom; y++) {
            var dstOffset = curLayer.offsetOfPixel(dstRect.left, y),
                srcOffset = opacityBuffer.offsetOfPixel(dstRect.left, y);

            for (var x = dstRect.left; x < dstRect.right; x++, srcOffset++, dstOffset += _CPColorBmp2["default"].BYTES_PER_PIXEL) {
                var opacityAlpha = opacityData[srcOffset] / 255 | 0;

                if (opacityAlpha > 0 && undoData[dstOffset + _CPColorBmp2["default"].ALPHA_BYTE_OFFSET] != 0) {
                    opacityAlpha += 255;

                    for (var i = 0; i < 3; i++) {
                        var channel = undoData[dstOffset + i] * opacityAlpha / 255 | 0;

                        if (channel > 255) {
                            channel = 255;
                        }

                        curLayer.data[dstOffset + i] = channel;
                    }
                }
            }
        }
    };

    function CPBrushToolBurn() {}

    CPBrushToolBurn.prototype = Object.create(CPBrushToolSimpleBrush.prototype);
    CPBrushToolBurn.prototype.constructor = CPBrushToolBurn;

    CPBrushToolBurn.prototype.mergeOpacityBuf = function (dstRect, color) {
        var opacityData = opacityBuffer.data,
            undoData = undoBuffer.data;

        for (var y = dstRect.top; y < dstRect.bottom; y++) {
            var dstOffset = curLayer.offsetOfPixel(dstRect.left, y),
                srcOffset = opacityBuffer.offsetOfPixel(dstRect.left, y);

            for (var x = dstRect.left; x < dstRect.right; x++, srcOffset++, dstOffset += _CPColorBmp2["default"].BYTES_PER_PIXEL) {
                var opacityAlpha = opacityData[srcOffset] / 255 | 0;

                if (opacityAlpha > 0 && undoData[dstOffset + _CPColorBmp2["default"].ALPHA_BYTE_OFFSET] != 0) {
                    for (var i = 0; i < 3; i++) {
                        var channel = undoData[dstOffset + i];

                        channel = channel - (BURN_CONSTANT - channel) * opacityAlpha / 255 | 0;

                        if (channel < 0) {
                            channel = 0;
                        }

                        curLayer.data[dstOffset + i] = channel;
                    }
                }
            }
        }
    };

    function CPBrushToolBlur() {}

    CPBrushToolBlur.prototype = Object.create(CPBrushToolSimpleBrush.prototype);
    CPBrushToolBlur.prototype.constructor = CPBrushToolBlur;

    CPBrushToolBlur.prototype.mergeOpacityBuf = function (dstRect, color) {
        var opacityData = opacityBuffer.data,
            undoData = undoBuffer.data,
            dstYStride = undoBuffer.width * _CPColorBmp2["default"].BYTES_PER_PIXEL,
            r,
            g,
            b,
            a;

        function addSample(sampleOffset) {
            r += undoData[sampleOffset + _CPColorBmp2["default"].RED_BYTE_OFFSET];
            g += undoData[sampleOffset + _CPColorBmp2["default"].GREEN_BYTE_OFFSET];
            b += undoData[sampleOffset + _CPColorBmp2["default"].BLUE_BYTE_OFFSET];
            a += undoData[sampleOffset + _CPColorBmp2["default"].ALPHA_BYTE_OFFSET];
        }

        for (var y = dstRect.top; y < dstRect.bottom; y++) {
            var dstOffset = undoBuffer.offsetOfPixel(dstRect.left, y),
                srcOffset = opacityBuffer.offsetOfPixel(dstRect.left, y);

            for (var x = dstRect.left; x < dstRect.right; x++, dstOffset += _CPColorBmp2["default"].BYTES_PER_PIXEL, srcOffset++) {
                var opacityAlpha = opacityData[srcOffset] / 255 | 0;

                if (opacityAlpha > 0) {
                    var blur = BLUR_MIN + (BLUR_MAX - BLUR_MIN) * opacityAlpha / 255 | 0,
                        sum = blur + 4;

                    r = blur * undoData[dstOffset + _CPColorBmp2["default"].RED_BYTE_OFFSET];
                    g = blur * undoData[dstOffset + _CPColorBmp2["default"].GREEN_BYTE_OFFSET];
                    b = blur * undoData[dstOffset + _CPColorBmp2["default"].BLUE_BYTE_OFFSET];
                    a = blur * undoData[dstOffset + _CPColorBmp2["default"].ALPHA_BYTE_OFFSET];

                    addSample(y > 0 ? dstOffset - dstYStride : dstOffset);
                    addSample(y < undoBuffer.height - 1 ? dstOffset + dstYStride : dstOffset);
                    addSample(x > 0 ? dstOffset - _CPColorBmp2["default"].BYTES_PER_PIXEL : dstOffset);
                    addSample(x < undoBuffer.width - 1 ? dstOffset + _CPColorBmp2["default"].BYTES_PER_PIXEL : dstOffset);

                    a /= sum;
                    r /= sum;
                    g /= sum;
                    b /= sum;

                    curLayer.data[dstOffset + _CPColorBmp2["default"].RED_BYTE_OFFSET] = r | 0;
                    curLayer.data[dstOffset + _CPColorBmp2["default"].GREEN_BYTE_OFFSET] = g | 0;
                    curLayer.data[dstOffset + _CPColorBmp2["default"].BLUE_BYTE_OFFSET] = b | 0;
                    curLayer.data[dstOffset + _CPColorBmp2["default"].ALPHA_BYTE_OFFSET] = a | 0;
                }
            }
        }
    };

    /* Brushes derived from this class use the opacity buffer as a simple alpha layer (32-bit pixels in ARGB order) */
    function CPBrushToolDirectBrush() {}

    CPBrushToolDirectBrush.prototype = Object.create(CPBrushToolSimpleBrush.prototype);
    CPBrushToolDirectBrush.prototype.constructor = CPBrushToolDirectBrush;

    CPBrushToolDirectBrush.prototype.mergeOpacityBuf = function (dstRect, color) {
        var opacityData = opacityBuffer.data,
            undoData = undoBuffer.data,
            srcOffset = opacityBuffer.offsetOfPixel(dstRect.left, dstRect.top),
            dstOffset = curLayer.offsetOfPixel(dstRect.left, dstRect.top),
            width = dstRect.getWidth() | 0,
            height = dstRect.getHeight() | 0,
            srcYStride = opacityBuffer.width - width | 0,
            dstYStride = (curLayer.width - width) * _CPColorBmp2["default"].BYTES_PER_PIXEL | 0;

        for (var y = 0; y < height; y++, srcOffset += srcYStride, dstOffset += dstYStride) {
            for (var x = 0; x < width; x++, srcOffset++, dstOffset += _CPColorBmp2["default"].BYTES_PER_PIXEL) {
                var color1 = opacityData[srcOffset],
                    alpha1 = color1 >>> 24;

                if (alpha1 == 0) {
                    continue;
                }

                var
                // Pretty sure fusion.alpha is always 100 and the commented section is a copy/paste error
                alpha2 = undoData[dstOffset + _CPColorBmp2["default"].ALPHA_BYTE_OFFSET],
                    /* * fusion.alpha / 100 */
                newAlpha = alpha1 + alpha2 - alpha1 * alpha2 / 255 | 0;

                if (newAlpha > 0) {
                    var realAlpha = alpha1 * 255 / newAlpha | 0,
                        invAlpha = 255 - realAlpha;

                    curLayer.data[dstOffset] = ((color1 >> 16 & 0xFF) * realAlpha + undoData[dstOffset] * invAlpha) / 255 | 0;
                    curLayer.data[dstOffset + 1] = ((color1 >> 8 & 0xFF) * realAlpha + undoData[dstOffset + 1] * invAlpha) / 255 | 0;
                    curLayer.data[dstOffset + 2] = ((color1 & 0xFF) * realAlpha + undoData[dstOffset + 2] * invAlpha) / 255 | 0;
                    curLayer.data[dstOffset + 3] = newAlpha;
                }
            }
        }
    };

    function CPBrushToolWatercolor() {
        var WCMEMORY = 50,
            WXMAXSAMPLERADIUS = 64;

        var previousSamples = [];

        /**
         * Average out a bunch of samples around the given pixel (x, y).
         * 
         * dx, dy controls the spread of the samples.
         * 
         * @returns CPColorFloat
         */
        function sampleColor(x, y, dx, dy) {
            var samples = [],
                layerToSample = sampleAllLayers ? fusion : that.getActiveLayer();

            x = x | 0;
            y = y | 0;

            samples.push(_utilCPColorFloat2["default"].createFromInt(layerToSample.getPixel(x, y)));

            for (var r = 0.25; r < 1.001; r += .25) {
                samples.push(_utilCPColorFloat2["default"].createFromInt(layerToSample.getPixel(~ ~(x + r * dx), y)));
                samples.push(_utilCPColorFloat2["default"].createFromInt(layerToSample.getPixel(~ ~(x - r * dx), y)));
                samples.push(_utilCPColorFloat2["default"].createFromInt(layerToSample.getPixel(x, ~ ~(y + r * dy))));
                samples.push(_utilCPColorFloat2["default"].createFromInt(layerToSample.getPixel(x, ~ ~(y - r * dy))));

                samples.push(_utilCPColorFloat2["default"].createFromInt(layerToSample.getPixel(~ ~(x + r * 0.7 * dx), ~ ~(y + r * 0.7 * dy))));
                samples.push(_utilCPColorFloat2["default"].createFromInt(layerToSample.getPixel(~ ~(x + r * 0.7 * dx), ~ ~(y - r * 0.7 * dy))));
                samples.push(_utilCPColorFloat2["default"].createFromInt(layerToSample.getPixel(~ ~(x - r * 0.7 * dx), ~ ~(y + r * 0.7 * dy))));
                samples.push(_utilCPColorFloat2["default"].createFromInt(layerToSample.getPixel(~ ~(x - r * 0.7 * dx), ~ ~(y - r * 0.7 * dy))));
            }

            var average = new _utilCPColorFloat2["default"](0, 0, 0);

            for (var i = 0; i < samples.length; i++) {
                var sample = samples[i];

                average.r += sample.r;
                average.g += sample.g;
                average.b += sample.b;
            }

            average.r /= samples.length;
            average.g /= samples.length;
            average.b /= samples.length;

            return average;
        }

        // Blend the brush stroke with full color into the opacityBuffer
        function paintDirect(srcRect, dstRect, brush, brushWidth, alpha, color1) {
            var opacityData = opacityBuffer.data,
                by = srcRect.top;

            for (var y = dstRect.top; y < dstRect.bottom; y++, by++) {
                var srcOffset = srcRect.left + by * brushWidth,
                    dstOffset = opacityBuffer.offsetOfPixel(dstRect.left, y);

                for (var x = dstRect.left; x < dstRect.right; x++, srcOffset++, dstOffset++) {
                    var alpha1 = (brush[srcOffset] & 0xff) * alpha / 255 | 0;

                    if (alpha1 <= 0) {
                        continue;
                    }

                    var color2 = opacityData[dstOffset],
                        alpha2 = color2 >>> 24,
                        newAlpha = alpha1 + alpha2 - alpha1 * alpha2 / 255 | 0;

                    if (newAlpha > 0) {
                        var realAlpha = alpha1 * 255 / newAlpha | 0,
                            invAlpha = 255 - realAlpha;

                        // The usual alpha blending formula C = A * alpha + B * (1 - alpha)
                        // has to rewritten in the form C = A + (1 - alpha) * B - (1 - alpha) *A
                        // that way the rounding up errors won't cause problems

                        var newColor = newAlpha << 24 | (color1 >>> 16 & 0xff) + ((color2 >>> 16 & 0xff) * invAlpha - (color1 >>> 16 & 0xff) * invAlpha) / 255 << 16 | (color1 >>> 8 & 0xff) + ((color2 >>> 8 & 0xff) * invAlpha - (color1 >>> 8 & 0xff) * invAlpha) / 255 << 8 | (color1 & 0xff) + ((color2 & 0xff) * invAlpha - (color1 & 0xff) * invAlpha) / 255;

                        opacityData[dstOffset] = newColor;
                    }
                }
            }
        }

        this.beginStroke = function (x, y, pressure) {
            previousSamples = null;

            CPBrushToolDirectBrush.prototype.beginStroke.call(this, x, y, pressure);
        };

        this.paintDabImplementation = function (srcRect, dstRect, dab) {
            if (previousSamples == null) {
                // Seed the previousSamples list to capacity with a bunch of copies of one sample to get us started
                var startColor = sampleColor(~ ~((dstRect.left + dstRect.right) / 2), ~ ~((dstRect.top + dstRect.bottom) / 2), Math.max(1, Math.min(WXMAXSAMPLERADIUS, dstRect.getWidth() * 2 / 6)), Math.max(1, Math.min(WXMAXSAMPLERADIUS, dstRect.getHeight() * 2 / 6)));

                previousSamples = [];

                for (var i = 0; i < WCMEMORY; i++) {
                    previousSamples.push(startColor);
                }
            }

            var wcColor = new _utilCPColorFloat2["default"](0, 0, 0);

            for (var i = 0; i < previousSamples.length; i++) {
                var sample = previousSamples[i];

                wcColor.r += sample.r;
                wcColor.g += sample.g;
                wcColor.b += sample.b;
            }
            wcColor.r /= previousSamples.length;
            wcColor.g /= previousSamples.length;
            wcColor.b /= previousSamples.length;

            // resaturation
            wcColor.mixWith(_utilCPColorFloat2["default"].createFromInt(curColor), curBrush.resat * curBrush.resat);

            var newColor = wcColor.toInt();

            // bleed
            wcColor.mixWith(sampleColor((dstRect.left + dstRect.right) / 2, (dstRect.top + dstRect.bottom) / 2, Math.max(1, Math.min(WXMAXSAMPLERADIUS, dstRect.getWidth() * 2 / 6)), Math.max(1, Math.min(WXMAXSAMPLERADIUS, dstRect.getHeight() * 2 / 6))), curBrush.bleed);

            previousSamples.push(wcColor);
            previousSamples.shift();

            paintDirect(srcRect, dstRect, dab.brush, dab.width, Math.max(1, dab.alpha / 4), newColor);
            mergeOpacityBuffer(0, false);

            if (sampleAllLayers) {
                that.fusionLayers();
            }
        };
    }

    CPBrushToolWatercolor.prototype = Object.create(CPBrushToolDirectBrush.prototype);
    CPBrushToolWatercolor.prototype.constructor = CPBrushToolWatercolor;

    function CPBrushToolOil() {

        function oilAccumBuffer(srcRect, dstRect, buffer, w, alpha) {
            var layerToSample = sampleAllLayers ? fusion : that.getActiveLayer(),
                by = srcRect.top;

            for (var y = dstRect.top; y < dstRect.bottom; y++, by++) {
                var srcOffset = srcRect.left + by * w,
                    dstOffset = layerToSample.offsetOfPixel(dstRect.left, y);

                for (var x = dstRect.left; x < dstRect.right; x++, srcOffset++, dstOffset += _CPColorBmp2["default"].BYTES_PER_PIXEL) {
                    var alpha1 = layerToSample.data[dstOffset + _CPColorBmp2["default"].ALPHA_BYTE_OFFSET] * alpha / 255 | 0;

                    if (alpha1 <= 0) {
                        continue;
                    }

                    var color2 = buffer[srcOffset],
                        alpha2 = color2 >>> 24,
                        newAlpha = alpha1 + alpha2 - alpha1 * alpha2 / 255 | 0;

                    if (newAlpha > 0) {
                        var realAlpha = alpha1 * 255 / newAlpha | 0,
                            invAlpha = 255 - realAlpha,
                            color1Red = layerToSample.data[dstOffset + _CPColorBmp2["default"].RED_BYTE_OFFSET],
                            color1Green = layerToSample.data[dstOffset + _CPColorBmp2["default"].GREEN_BYTE_OFFSET],
                            color1Blue = layerToSample.data[dstOffset + _CPColorBmp2["default"].BLUE_BYTE_OFFSET],
                            newColor = newAlpha << 24 | color1Red + ((color2 >>> 16 & 0xff) * invAlpha - color1Red * invAlpha) / 255 << 16 | color1Green + ((color2 >>> 8 & 0xff) * invAlpha - color1Green * invAlpha) / 255 << 8 | color1Blue + ((color2 & 0xff) * invAlpha - color1Blue * invAlpha) / 255;

                        buffer[srcOffset] = newColor;
                    }
                }
            }
        }

        function oilResatBuffer(srcRect, dstRect, buffer, w, alpha1, color1) {
            var by = srcRect.top;

            if (alpha1 <= 0) {
                return;
            }

            for (var y = dstRect.top; y < dstRect.bottom; y++, by++) {
                var srcOffset = srcRect.left + by * w;

                for (var x = dstRect.left; x < dstRect.right; x++, srcOffset++) {
                    var color2 = buffer[srcOffset],
                        alpha2 = color2 >>> 24,
                        newAlpha = alpha1 + alpha2 - alpha1 * alpha2 / 255 | 0;

                    if (newAlpha > 0) {
                        var realAlpha = alpha1 * 255 / newAlpha | 0,
                            invAlpha = 255 - realAlpha,
                            newColor = newAlpha << 24 | (color1 >>> 16 & 0xff) + ((color2 >>> 16 & 0xff) * invAlpha - (color1 >>> 16 & 0xff) * invAlpha) / 255 << 16 | (color1 >>> 8 & 0xff) + ((color2 >>> 8 & 0xff) * invAlpha - (color1 >>> 8 & 0xff) * invAlpha) / 255 << 8 | (color1 & 0xff) + ((color2 & 0xff) * invAlpha - (color1 & 0xff) * invAlpha) / 255;

                        buffer[srcOffset] = newColor;
                    }
                }
            }
        }

        function oilPasteBuffer(srcRect, dstRect, buffer, brush, w, alpha) {
            var opacityData = opacityBuffer.data,
                by = srcRect.top;

            for (var y = dstRect.top; y < dstRect.bottom; y++, by++) {
                var bufferOffset = srcRect.left + by * w,
                    // Brush buffer is 1 integer per pixel
                opacityOffset = dstRect.left + y * that.width,
                    // Opacity buffer is 1 integer per pixel
                layerOffset = curLayer.offsetOfPixel(dstRect.left, y); // 4 bytes per pixel

                for (var x = dstRect.left; x < dstRect.right; x++, bufferOffset++, layerOffset += _CPColorBmp2["default"].BYTES_PER_PIXEL, opacityOffset++) {
                    var color1 = buffer[bufferOffset],
                        alpha1 = (color1 >>> 24) * (brush[bufferOffset] & 0xff) * alpha / (255 * 255) | 0;

                    if (alpha1 <= 0) {
                        continue;
                    }

                    var alpha2 = curLayer.data[layerOffset + _CPColorBmp2["default"].ALPHA_BYTE_OFFSET],
                        newAlpha = alpha1 + alpha2 - alpha1 * alpha2 / 255 | 0;

                    if (newAlpha > 0) {
                        var color2Red = curLayer.data[layerOffset + _CPColorBmp2["default"].RED_BYTE_OFFSET],
                            color2Green = curLayer.data[layerOffset + _CPColorBmp2["default"].GREEN_BYTE_OFFSET],
                            color2Blue = curLayer.data[layerOffset + _CPColorBmp2["default"].BLUE_BYTE_OFFSET],
                            realAlpha = alpha1 * 255 / newAlpha | 0,
                            invAlpha = 255 - realAlpha,
                            newColor = newAlpha << 24 | (color1 >>> 16 & 0xff) + (color2Red * invAlpha - (color1 >>> 16 & 0xff) * invAlpha) / 255 << 16 | (color1 >>> 8 & 0xff) + (color2Green * invAlpha - (color1 >>> 8 & 0xff) * invAlpha) / 255 << 8 | (color1 & 0xff) + (color2Blue * invAlpha - (color1 & 0xff) * invAlpha) / 255;

                        opacityData[opacityOffset] = newColor;
                    }
                }
            }
        }

        this.paintDabImplementation = function (srcRect, dstRect, dab) {
            if (brushBuffer == null) {
                brushBuffer = new Uint32Array(dab.width * dab.height); // Initialized to 0 for us by the browser

                oilAccumBuffer(srcRect, dstRect, brushBuffer, dab.width, 255);
            } else {
                oilResatBuffer(srcRect, dstRect, brushBuffer, dab.width, ~ ~(curBrush.resat <= 0.0 ? 0 : Math.max(1, curBrush.resat * curBrush.resat * 255)), curColor & 0xFFFFFF);
                oilPasteBuffer(srcRect, dstRect, brushBuffer, dab.brush, dab.width, dab.alpha);
                oilAccumBuffer(srcRect, dstRect, brushBuffer, dab.width, ~ ~(curBrush.bleed * 255));
            }

            mergeOpacityBuffer(0, false);

            if (sampleAllLayers) {
                that.fusionLayers();
            }
        };
    }

    CPBrushToolOil.prototype = Object.create(CPBrushToolDirectBrush.prototype);
    CPBrushToolOil.prototype.constructor = CPBrushToolOil;

    function CPBrushToolSmudge() {

        /**
         * 
         * @param srcRect
         * @param dstRect
         * @param buffer Uint32Array
         * @param w int
         * @param alpha int
         */
        function smudgeAccumBuffer(srcRect, dstRect, buffer, w, alpha) {
            var layerToSample = sampleAllLayers ? fusion : that.getActiveLayer(),
                by = srcRect.top;

            for (var y = dstRect.top; y < dstRect.bottom; y++, by++) {
                var srcOffset = srcRect.left + by * w,
                    dstOffset = layerToSample.offsetOfPixel(dstRect.left, y);

                for (var x = dstRect.left; x < dstRect.right; x++, srcOffset++, dstOffset += _CPColorBmp2["default"].BYTES_PER_PIXEL) {
                    var layerRed = layerToSample.data[dstOffset + _CPColorBmp2["default"].RED_BYTE_OFFSET],
                        layerGreen = layerToSample.data[dstOffset + _CPColorBmp2["default"].GREEN_BYTE_OFFSET],
                        layerBlue = layerToSample.data[dstOffset + _CPColorBmp2["default"].BLUE_BYTE_OFFSET],
                        layerAlpha = layerToSample.data[dstOffset + _CPColorBmp2["default"].ALPHA_BYTE_OFFSET],
                        opacityAlpha = 255 - alpha;

                    if (opacityAlpha > 0) {
                        var destColor = buffer[srcOffset],
                            destAlpha = 255,
                            newLayerAlpha = opacityAlpha + destAlpha * (255 - opacityAlpha) / 255 | 0,
                            realAlpha = 255 * opacityAlpha / newLayerAlpha | 0,
                            invAlpha = 255 - realAlpha,
                            newColor = (layerAlpha * realAlpha + (destColor >>> 24 & 0xff) * invAlpha) / 255 << 24 & 0xff000000 | (layerRed * realAlpha + (destColor >>> 16 & 0xff) * invAlpha) / 255 << 16 & 0xff0000 | (layerGreen * realAlpha + (destColor >>> 8 & 0xff) * invAlpha) / 255 << 8 & 0xff00 | (layerBlue * realAlpha + (destColor & 0xff) * invAlpha) / 255 & 0xff;

                        if (newColor == destColor) {
                            if (layerRed > (destColor & 0xff0000)) {
                                newColor += 1 << 16;
                            } else if (layerRed < (destColor & 0xff0000)) {
                                newColor -= 1 << 16;
                            }

                            if (layerGreen > (destColor & 0xff00)) {
                                newColor += 1 << 8;
                            } else if (layerGreen < (destColor & 0xff00)) {
                                newColor -= 1 << 8;
                            }

                            if (layerBlue > (destColor & 0xff)) {
                                newColor += 1;
                            } else if (layerBlue < (destColor & 0xff)) {
                                newColor -= 1;
                            }
                        }

                        buffer[srcOffset] = newColor;
                    }
                }
            }

            if (srcRect.left > 0) {
                var fill = srcRect.left;

                for (var y = srcRect.top; y < srcRect.bottom; y++) {
                    var offset = y * w,
                        fillColor = buffer[offset + srcRect.left];

                    for (var x = 0; x < fill; x++) {
                        buffer[offset++] = fillColor;
                    }
                }
            }

            if (srcRect.right < w) {
                var fill = w - srcRect.right;

                for (var y = srcRect.top; y < srcRect.bottom; y++) {
                    var offset = y * w + srcRect.right,
                        fillColor = buffer[offset - 1];

                    for (var x = 0; x < fill; x++) {
                        buffer[offset++] = fillColor;
                    }
                }
            }

            for (var y = 0; y < srcRect.top; y++) {
                var srcOffset = srcRect.top * w,
                    dstOffset = y * w;

                for (var x = 0; x < w; x++, srcOffset++, dstOffset++) {
                    buffer[dstOffset] = buffer[srcOffset];
                }
            }

            for (var y = srcRect.bottom; y < w; y++) {
                var srcOffset = (srcRect.bottom - 1) * w,
                    dstOffset = y * w;

                for (var x = 0; x < w; x++, srcOffset++, dstOffset++) {
                    buffer[dstOffset] = buffer[srcOffset];
                }
            }
        }

        /**
         * 
         * @param srcRect CPRect
         * @param dstRect CPRect
         * @param buffer Uint32Array
         * @param brush Uint8Array
         * @param w int
         * @param alpha int
         */
        function smudgePasteBuffer(srcRect, dstRect, buffer, brush, w, alpha) {
            var by = srcRect.top;

            for (var y = dstRect.top; y < dstRect.bottom; y++, by++) {
                var srcOffset = srcRect.left + by * w,
                    dstOffset = curLayer.offsetOfPixel(dstRect.left, y);

                for (var x = dstRect.left; x < dstRect.right; x++, srcOffset++, dstOffset += _CPColorBmp2["default"].BYTES_PER_PIXEL) {
                    var bufferColor = buffer[srcOffset],
                        opacityAlpha = (bufferColor >>> 24) * (brush[srcOffset] & 0xff) / 255;

                    if (opacityAlpha > 0) {
                        curLayer.data[dstOffset + _CPColorBmp2["default"].RED_BYTE_OFFSET] = bufferColor >> 16 & 0xff;
                        curLayer.data[dstOffset + _CPColorBmp2["default"].GREEN_BYTE_OFFSET] = bufferColor >> 8 & 0xff;
                        curLayer.data[dstOffset + _CPColorBmp2["default"].BLUE_BYTE_OFFSET] = bufferColor & 0xff;
                        curLayer.data[dstOffset + _CPColorBmp2["default"].ALPHA_BYTE_OFFSET] = bufferColor >> 24 & 0xff;
                    }
                }
            }
        }

        /**
         * @param srcRect CPRect
         * @param dstRect CPRect
         * @param dab CPBrushDab
         */
        this.paintDabImplementation = function (srcRect, dstRect, dab) {
            if (brushBuffer == null) {
                brushBuffer = new Uint32Array(dab.width * dab.height);
                smudgeAccumBuffer(srcRect, dstRect, brushBuffer, dab.width, 0);
            } else {
                smudgeAccumBuffer(srcRect, dstRect, brushBuffer, dab.width, dab.alpha);
                smudgePasteBuffer(srcRect, dstRect, brushBuffer, dab.brush, dab.width, dab.alpha);

                if (lockAlpha) {
                    restoreAlpha(dstRect);
                }
            }

            opacityArea.makeEmpty();

            if (sampleAllLayers) {
                that.fusionLayers();
            }
        };
    }

    CPBrushToolSmudge.prototype = Object.create(CPBrushToolDirectBrush.prototype);
    CPBrushToolSmudge.prototype.constructor = CPBrushToolSmudge;

    CPBrushToolSmudge.prototype.mergeOpacityBuf = function (dstRect, color) {};

    var paintingModes = [new CPBrushToolSimpleBrush(), new CPBrushToolEraser(), new CPBrushToolDodge(), new CPBrushToolBurn(), new CPBrushToolWatercolor(), new CPBrushToolBlur(), new CPBrushToolSmudge(), new CPBrushToolOil()];

    this.width = _width;
    this.height = _height;

    this.getDefaultLayerName = function () {
        var prefix = "Layer ",
            highestLayerNb = 0;

        for (var i = 0; i < layers.length; i++) {
            var layer = layers[i];

            if (/^Layer [0-9]+$/.test(layer.name)) {
                highestLayerNb = Math.max(highestLayerNb, parseInt(layer.name.substring(prefix.length), 10));
            }
        }
        return prefix + (highestLayerNb + 1);
    };

    function restoreAlpha(rect) {
        that.getActiveLayer().copyAlphaFrom(undoBuffer, rect);
    }

    /**
     * Merge the opacity buffer from the current drawing operation to the active layer.
     */
    function mergeOpacityBuffer(color, clear) {
        if (!opacityArea.isEmpty()) {
            if (curBrush.paintMode != _CPBrushInfo2["default"].M_ERASE || !lockAlpha) {
                paintingModes[curBrush.paintMode].mergeOpacityBuf(opacityArea, color);
            } else {
                // FIXME: it would be nice to be able to set the paper color
                paintingModes[_CPBrushInfo2["default"].M_PAINT].mergeOpacityBuf(opacityArea, EMPTY_LAYER_COLOR);
            }

            if (lockAlpha) {
                restoreAlpha(opacityArea);
            }

            if (clear) {
                opacityBuffer.clearRect(opacityArea, 0);
            }

            opacityArea.makeEmpty();
        }
    }

    this.addBackgroundLayer = function () {
        var layer = new _CPLayer2["default"](that.width, that.height, this.getDefaultLayerName());

        layer.clearAll(EMPTY_BACKGROUND_COLOR);

        this.addLayerObject(layer);
    };

    /**
     * Merge together the visible layers and return the resulting ImageData for display to the screen.
     * 
     * The image is cached, so repeat calls are cheap.
     */
    this.fusionLayers = function () {
        // Is there anything to update from last call?
        if (!fusionArea.isEmpty()) {
            // The current brush renders out its buffers to the layer stack for us
            mergeOpacityBuffer(curColor, false);

            // If the drawing is single-layered and opaque, just use the bottom-most layer as our fusion, we don't need to blend anything!
            if (layers.length == 1 && layers[0].alpha >= 100 && layers[0].visible) {
                fusion = layers[0];
            } else {
                // Fuse into the actual fusion buffer since we need to blend
                fusion = fusionBuffer;

                var fusionIsSemiTransparent = true,
                    first = true;

                layers.forEach(function (layer) {
                    if (!first) {
                        fusionIsSemiTransparent = fusionIsSemiTransparent && fusion.hasAlphaInRect(fusionArea);
                    }

                    if (layer.visible && layer.alpha > 0) {
                        if (first) {
                            first = false;

                            if (layer.alpha == 100) {
                                /*
                                 * Instead of blending the layer onto the empty transparent fusion, we can just copy the
                                 * layer data right into the fusion. This works for all of our blending modes.
                                 */

                                fusion.copyBitmapRect(layer, fusionArea.left, fusionArea.top, fusionArea);
                                return;
                            }

                            fusion.clearRect(fusionArea, 0x00FFFFFF); // Transparent white
                        }

                        // If we're merging onto a semi-transparent canvas then we need to blend our opacity values onto the existing ones
                        if (fusionIsSemiTransparent) {
                            layer.fusionWithFullAlpha(fusion, fusionArea);
                        } else {
                            // Most drawings will end up having 100% coverage and we can speed things up with this version instead
                            layer.fusionWith(fusion, fusionArea);
                        }
                    }
                });

                if (first) {
                    // Didn't draw any layers? We have to clear the area, then
                    fusion.clearRect(fusionArea, 0x00FFFFFF); // Transparent white
                }
            }

            fusionArea.makeEmpty();
        }

        return fusion.getImageData();
    };

    this.setActiveLayerIndex = function (newIndex) {
        if (newIndex < 0 || newIndex >= layers.length) {
            return;
        }

        if (curLayer != layers[newIndex]) {
            var oldIndex = this.getActiveLayerIndex();

            curLayer = layers[newIndex];

            // Was the old layer deleted?
            if (oldIndex == -1) {
                callListenersLayerChange();
            } else {
                callListenersLayerChange(oldIndex); // Old layer has now been deselected
                callListenersLayerChange(newIndex); // New layer has now been selected
            }

            invalidateLayerUndo();
        }
    };

    this.getActiveLayerIndex = function () {
        for (var i = 0; i < layers.length; i++) {
            if (layers[i] == curLayer) {
                return i;
            }
        }

        return -1;
    };

    /*
     * Get the index of the topmost visible layer, or 0.
     */
    this.getTopmostVisibleLayer = function () {
        for (var i = layers.length - 1; i >= 0; i--) {
            if (layers[i].visible) {
                return i;
            }
        }

        return 0;
    };

    this.getLayer = function (i) {
        return layers[i];
    };

    this.getActiveLayer = function () {
        return curLayer;
    };

    //
    // Undo / Redo
    //

    function canUndo() {
        return undoList.length > 0;
    }

    function canRedo() {
        return redoList.length > 0;
    }

    this.undo = function () {
        if (!canUndo()) {
            return;
        }
        hasUnsavedChanges = true;

        var undo = undoList.pop();

        undo.undo();

        redoList.push(undo);
    };

    this.redo = function () {
        if (!canRedo()) {
            return;
        }
        hasUnsavedChanges = true;

        var redo = redoList.pop();

        redo.redo();

        undoList.push(redo);
    };

    /**
     * Ensures that the state of the current layer has been stored in undoBuffer so it can be undone later.
     */
    function prepareForLayerUndo() {
        if (!undoBufferInvalidRegion.isEmpty()) {
            //console.log("Copying " + undoBufferInvalidRegion + " to the undo buffer");
            undoBuffer.copyBitmapRect(curLayer, undoBufferInvalidRegion.left, undoBufferInvalidRegion.top, undoBufferInvalidRegion);
            undoBufferInvalidRegion.makeEmpty();
        }
    }

    /**
     * Call when the undo buffer has become completely worthless (e.g. after the active layer index changes, the undo
     * buffer won't contain any data from the new layer to begin with).
     */
    function invalidateLayerUndo() {
        undoBufferInvalidRegion = that.getBounds();
    }

    /**
     * The result of some of our operations aren't needed until later, so we can defer them until the user is idle.
     *
     * You may call this routine at any time (or never, if you like) as a hint that the user is idle and we should
     * try to perform pending operations before we will need to block on their results.
     */
    this.performIdleTasks = function () {
        prepareForLayerUndo();
    };

    function addUndo(undo) {
        hasUnsavedChanges = true;

        if (undoList.length == 0 || !undoList[undoList.length - 1].merge(undo)) {
            if (undoList.length >= MAX_UNDO) {
                undoList.unshift();
            }
            undoList.push(undo);
        } else {
            // Two merged changes can mean no change at all
            // don't leave a useless undo in the list
            if (undoList[undoList.length - 1].noChange()) {
                undoList.pop();
            }
        }
        if (redoList.length > 0) {
            redoList = [];
        }
    }

    this.clearHistory = function () {
        undoList = [];
        redoList = [];
    };

    this.colorPicker = function (x, y) {
        // not really necessary and could potentially the repaint
        // of the canvas to miss that area
        // this.fusionLayers();

        return fusion.getPixel(~ ~x, ~ ~y) & 0xFFFFFF;
    };

    this.setSelection = function (rect) {
        curSelection.set(rect);
        curSelection.clip(this.getBounds());
    };

    this.emptySelection = function () {
        curSelection.makeEmpty();
    };

    this.floodFill = function (x, y) {
        prepareForLayerUndo();
        undoArea = this.getBounds();

        curLayer.floodFill(~ ~x, ~ ~y, curColor | 0xff000000);

        addUndo(new CPUndoPaint());
        invalidateFusion();
    };

    this.gradientFill = function (fromX, fromY, toX, toY, gradientPoints) {
        var r = this.getSelectionAutoSelect();

        prepareForLayerUndo();
        undoArea = r;

        curLayer.gradient(r, fromX, fromY, toX, toY, gradientPoints);

        if (lockAlpha) {
            restoreAlpha(r);
        }

        addUndo(new CPUndoPaint());
        invalidateFusion();
    };

    this.fill = function (color) {
        var r = this.getSelectionAutoSelect();

        prepareForLayerUndo();
        undoArea = r;

        curLayer.clearRect(r, color);

        addUndo(new CPUndoPaint());
        invalidateFusion();
    };

    this.clear = function () {
        this.fill(0xffffff);
    };

    this.hFlip = function () {
        var r = this.getSelectionAutoSelect();

        prepareForLayerUndo();
        undoArea = r;

        curLayer.copyRegionHFlip(r, undoBuffer);

        addUndo(new CPUndoPaint());
        invalidateFusion();
    };

    this.vFlip = function () {
        var r = this.getSelectionAutoSelect();

        prepareForLayerUndo();
        undoArea = r;

        curLayer.copyRegionVFlip(r, undoBuffer);

        addUndo(new CPUndoPaint());
        invalidateFusion();
    };

    this.monochromaticNoise = function () {
        var r = this.getSelectionAutoSelect();

        prepareForLayerUndo();
        undoArea = r;

        curLayer.fillWithNoise(r);

        addUndo(new CPUndoPaint());
        invalidateFusion();
    };

    this.colorNoise = function () {
        var r = this.getSelectionAutoSelect();

        prepareForLayerUndo();
        undoArea = r;

        curLayer.fillWithColorNoise(r);

        addUndo(new CPUndoPaint());
        invalidateFusion();
    };

    this.invert = function () {
        var r = this.getSelectionAutoSelect();

        prepareForLayerUndo();
        undoArea = r;

        curLayer.invert(r);

        addUndo(new CPUndoPaint());
        invalidateFusion();
    };

    this.boxBlur = function (radiusX, radiusY, iterations) {
        var r = this.getSelectionAutoSelect();

        prepareForLayerUndo();
        undoArea = r;

        for (var i = 0; i < iterations; i++) {
            curLayer.boxBlur(r, radiusX, radiusY);
        }

        addUndo(new CPUndoPaint());
        invalidateFusion();
    };

    this.rectangleSelection = function (r) {
        var newSelection = r.clone();

        newSelection.clip(this.getBounds());

        addUndo(new CPUndoRectangleSelection(this.getSelection(), newSelection));

        this.setSelection(newSelection);
    };

    // temp awful hack
    var moveInitSelect = null,
        // CPRect
    movePrevX,
        movePrevY,
        movePrevX2,
        movePrevY2,
        moveModeCopy,
        prevModeCopy;

    this.beginPreviewMode = function (copy) {
        // !!!! awful awful hack !!! will break as soon as CPMultiUndo is used for other things
        // FIXME: ASAP!
        if (!copy && undoList.length > 0 && redoList.length == 0 && undoList[undoList.length - 1] instanceof CPMultiUndo && undoList[undoList.length - 1].undoes[0] instanceof CPUndoPaint && undoList[undoList.length - 1].undoes[0].layer == this.getActiveLayerIndex()) {
            this.undo();
            copy = prevModeCopy;
        } else {
            movePrevX = 0;
            movePrevY = 0;

            prepareForLayerUndo();
            undoArea.makeEmpty();

            opacityBuffer.clearAll();
            opacityArea.makeEmpty();
        }

        moveInitSelect = null;
        moveModeCopy = copy;
    };

    this.endPreviewMode = function () {
        var undo = new CPUndoPaint();

        if (moveInitSelect != null) {
            undo = new CPMultiUndo([undo, new CPUndoRectangleSelection(moveInitSelect, this.getSelection())]);
        } else {
            // !!!!!!
            // FIXME: this is required just to make the awful move hack work
            undo = new CPMultiUndo([undo]);
        }

        addUndo(undo);

        moveInitSelect = null;
        movePrevX = movePrevX2;
        movePrevY = movePrevY2;
        prevModeCopy = moveModeCopy;
    };

    /**
     * Move the selected layer data by the given offset.
     *
     * @param offsetX int
     * @param offsetY int
     */
    this.move = function (offsetX, offsetY) {
        var srcRect;

        // Add rounding to ensure we haven't been given float coordinates
        offsetX = movePrevX + offsetX | 0;
        offsetY = movePrevY + offsetY | 0;

        if (moveInitSelect == null) {
            srcRect = this.getSelectionAutoSelect();
            if (!this.getSelection().isEmpty()) {
                moveInitSelect = this.getSelection();
            }
        } else {
            srcRect = moveInitSelect.clone();
        }
        curLayer.copyDataFrom(undoBuffer);

        if (!moveModeCopy) {
            curLayer.clearRect(srcRect, 0);
        }

        curLayer.pasteAlphaRect(undoBuffer, srcRect, srcRect.left + offsetX, srcRect.top + offsetY);

        undoArea.makeEmpty();
        if (!moveModeCopy) {
            undoArea.union(srcRect);
        }
        srcRect.translate(offsetX, offsetY);
        undoArea.union(srcRect);

        invalidateFusion(); // TODO make more precise

        if (moveInitSelect != null) {
            var sel = moveInitSelect.clone();
            sel.translate(offsetX, offsetY);
            this.setSelection(sel);
        }

        // this is a really bad idea :D
        movePrevX2 = offsetX;
        movePrevY2 = offsetY;
    };

    // Copy/Paste functions

    this.cutSelection = function (createUndo) {
        var selection = this.getSelection();

        if (selection.isEmpty()) {
            return;
        }

        clipboard = new _CPClip2["default"](curLayer.cloneRect(selection), selection.left, selection.top);

        if (createUndo) {
            addUndo(new CPUndoCut(clipboard.bmp, this.getActiveLayerIndex(), selection));
        }

        curLayer.clearRect(selection, EMPTY_LAYER_COLOR);
        invalidateFusionRect(selection);
    };

    this.copySelection = function () {
        var selection = that.getSelection();

        if (selection.isEmpty()) {
            return;
        }

        clipboard = new _CPClip2["default"](curLayer.cloneRect(selection), selection.left, selection.top);
    };

    this.copySelectionMerged = function () {
        var selection = that.getSelection();

        if (selection.isEmpty()) {
            return;
        }

        // make sure the fusioned picture is up to date
        this.fusionLayers();
        clipboard = new _CPClip2["default"](fusion.cloneRect(selection), selection.left, selection.top);
    };

    /**
     *
     * @param createUndo boolean
     * @param clip CPClip
     */
    function pasteClip(createUndo, clip) {
        var activeLayerIndex = that.getActiveLayerIndex();

        if (createUndo) {
            addUndo(new CPUndoPaste(clip, activeLayerIndex, that.getSelection()));
        }

        var newLayer = new _CPLayer2["default"](that.width, that.height, that.getDefaultLayerName()),
            sourceRect = clip.bmp.getBounds(),
            x,
            y;

        layers.splice(activeLayerIndex + 1, 0, newLayer);
        that.setActiveLayerIndex(activeLayerIndex + 1);

        if (sourceRect.isInside(that.getBounds())) {
            x = clip.x;
            y = clip.y;
        } else {
            x = (that.width - clip.bmp.width) / 2 | 0;
            y = (that.height - clip.bmp.height) / 2 | 0;
        }

        curLayer.copyBitmapRect(clip.bmp, x, y, sourceRect);
        that.emptySelection();

        invalidateFusion();
        callListenersLayerChange();
    }

    this.pasteClipboard = function (createUndo) {
        if (clipboard != null) {
            pasteClip(createUndo, clipboard);
        }
    };

    this.setSampleAllLayers = function (b) {
        sampleAllLayers = b;
    };

    this.setLockAlpha = function (b) {
        lockAlpha = b;
    };

    this.setForegroundColor = function (color) {
        curColor = color;
    };

    this.setBrush = function (brush) {
        curBrush = brush;
    };

    this.setBrushTexture = function (texture) {
        brushManager.setTexture(texture);
    };

    // ///////////////////////////////////////////////////////////////////////////////////
    // Paint engine
    // ///////////////////////////////////////////////////////////////////////////////////

    this.beginStroke = function (x, y, pressure) {
        if (curBrush == null) {
            return;
        }

        paintingModes[curBrush.paintMode].beginStroke(x, y, pressure);
    };

    this.continueStroke = function (x, y, pressure) {
        if (curBrush == null) {
            return;
        }

        paintingModes[curBrush.paintMode].continueStroke(x, y, pressure);
    };

    this.endStroke = function () {
        if (curBrush == null) {
            return;
        }

        paintingModes[curBrush.paintMode].endStroke();
    };

    this.hasAlpha = function () {
        return fusion.hasAlpha();
    };

    /**
     * Get the artwork as a single flat PNG image.
     * 
     * Rotation is [0..3] and selects a multiple of 90 degrees of clockwise rotation to be applied to the drawing before
     * saving.
     * 
     * @return A binary string of the PNG file data.
     */
    this.getFlatPNG = function (rotation) {
        this.fusionLayers();

        return fusion.getAsPNG(rotation);
    };

    /**
     * Returns true if this artwork can be exactly represented as a simple transparent PNG (i.e. doesn't have multiple 
     * layers, and base layer's opacity is set to 100%).
     */
    this.isSimpleDrawing = function () {
        return this.getLayerCount() == 1 && this.getLayer(0).getAlpha() == 100;
    };

    // ////////////////////////////////////////////////////
    // Undo classes

    /**
     * Save the difference between the current layer and the undoBuffer (within the undoArea) for undo, and clear
     * the undoArea.
     *
     * @constructor
     */
    function CPUndoPaint() {
        var rect = undoArea.clone(),
            data = undoBuffer.copyRectXOR(curLayer, rect);

        this.layer = that.getActiveLayerIndex();

        undoArea.makeEmpty();

        this.undo = function () {
            that.getLayer(this.layer).setRectXOR(data, rect);
            invalidateFusionRect(rect);
        };

        this.redo = function () {
            that.getLayer(this.layer).setRectXOR(data, rect);
            invalidateFusionRect(rect);
        };

        that.getMemoryUsed = function (undone, param) {
            return undoBuffer.getMemorySize();
        };
    }

    CPUndoPaint.prototype = Object.create(_CPUndo2["default"].prototype);
    CPUndoPaint.prototype.constructor = CPUndoPaint;

    function CPUndoLayerVisible(_layerIndex, _oldVis, _newVis) {
        this.layerIndex = _layerIndex;
        this.oldVis = _oldVis;
        this.newVis = _newVis;
    }

    CPUndoLayerVisible.prototype = Object.create(_CPUndo2["default"].prototype);
    CPUndoLayerVisible.prototype.constructor = CPUndoLayerVisible;

    CPUndoLayerVisible.prototype.redo = function () {
        that.getLayer(this.layerIndex).visible = this.newVis;

        invalidateFusion();
        callListenersLayerChange(this.layerIndex);
    };

    CPUndoLayerVisible.prototype.undo = function () {
        that.getLayer(this.layerIndex).visible = this.oldVis;

        invalidateFusion();
        callListenersLayerChange(this.layerIndex);
    };

    CPUndoLayerVisible.prototype.merge = function (u) {
        if (u instanceof CPUndoLayerVisible && this.layerIndex == u.layerIndex) {
            this.newVis = u.newVis;
            return true;
        }
        return false;
    };

    CPUndoLayerVisible.prototype.noChange = function () {
        return this.oldVis == this.newVis;
    };

    function CPUndoAddLayer(layerIndex) {
        this.undo = function () {
            layers.splice(layerIndex + 1, 1);
            that.setActiveLayerIndex(layerIndex);
            invalidateFusion();
            callListenersLayerChange();
        };

        this.redo = function () {
            var newLayer = new _CPLayer2["default"](that.width, that.height, that.getDefaultLayerName());
            newLayer.clearAll(EMPTY_LAYER_COLOR);
            layers.splice(layerIndex + 1, 0, newLayer);
            that.setActiveLayerIndex(layerIndex + 1);

            invalidateFusion();
            callListenersLayerChange();
        };
    }

    CPUndoAddLayer.prototype = Object.create(_CPUndo2["default"].prototype);
    CPUndoAddLayer.prototype.constructor = CPUndoAddLayer;

    function CPUndoDuplicateLayer(layerIndex) {
        this.undo = function () {
            layers.splice(layerIndex + 1, 1);
            that.setActiveLayerIndex(layerIndex);

            invalidateFusion();
            callListenersLayerChange();
        };

        this.redo = function () {
            var copySuffix = " Copy",
                sourceLayer = layers[layerIndex],
                newLayer = new _CPLayer2["default"](that.width, that.height),
                newLayerName = sourceLayer.name;

            if (!newLayerName.endsWith(copySuffix)) {
                newLayerName += copySuffix;
            }

            newLayer.copyFrom(sourceLayer);
            newLayer.name = newLayerName;

            layers.splice(layerIndex + 1, 0, newLayer);

            that.setActiveLayerIndex(layerIndex + 1);

            invalidateFusion();
            callListenersLayerChange();
        };
    }

    CPUndoDuplicateLayer.prototype = Object.create(_CPUndo2["default"].prototype);
    CPUndoDuplicateLayer.prototype.constructor = CPUndoDuplicateLayer;

    /**
     * @param layerIndex int
     * @param layer CPLayer
     */
    function CPUndoRemoveLayer(layerIndex, layer) {
        this.undo = function () {
            layers.splice(layerIndex, 0, layer);
            that.setActiveLayerIndex(layerIndex);

            invalidateFusion();
            callListenersLayerChange();
        };

        this.redo = function () {
            layers.splice(layerIndex, 1);
            that.setActiveLayerIndex(layerIndex < layers.length ? layerIndex : layerIndex - 1);

            invalidateFusion();
            callListenersLayerChange();
        };

        this.getMemoryUsed = function (undone) {
            return undone ? 0 : layer.width * layer.height * _CPColorBmp2["default"].BYTES_PER_PIXEL;
        };
    }

    CPUndoRemoveLayer.prototype = Object.create(_CPUndo2["default"].prototype);
    CPUndoRemoveLayer.prototype.constructor = CPUndoRemoveLayer;

    function CPUndoMergeDownLayer(layerIndex) {
        var layerBottom = layerBottom = new _CPLayer2["default"](that.width, that.height),
            layerTop;

        layerBottom.copyFrom(layers[layerIndex - 1]);
        layerTop = layers[layerIndex];

        this.undo = function () {
            layers[layerIndex - 1].copyFrom(layerBottom);
            layers.splice(layerIndex, 0, layerTop);
            that.setActiveLayerIndex(layerIndex);

            layerBottom = layerTop = null;

            invalidateFusion();
            callListenersLayerChange();
        };

        this.redo = function () {
            layerBottom = new _CPLayer2["default"](that.width, that.height);
            layerBottom.copyFrom(layers[layerIndex - 1]);
            layerTop = layers[layerIndex];

            that.setActiveLayerIndex(layerIndex);
            that.mergeDown(false);
        };

        this.getMemoryUsed = function (undone, param) {
            return undone ? 0 : that.width * that.height * _CPColorBmp2["default"].BYTES_PER_PIXEL * 2;
        };
    }

    CPUndoMergeDownLayer.prototype = Object.create(_CPUndo2["default"].prototype);
    CPUndoMergeDownLayer.prototype.constructor = CPUndoMergeDownLayer;

    function CPUndoMergeAllLayers() {
        var oldActiveLayerIndex = that.getActiveLayerIndex(),
            oldLayers = layers.slice(0); // Clone old layers array

        this.undo = function () {
            layers = oldLayers.slice(0);
            that.setActiveLayerIndex(oldActiveLayerIndex);

            invalidateFusion();
            callListenersLayerChange();
        };

        this.redo = function () {
            that.mergeAllLayers(false);
        };

        this.getMemoryUsed = function (undone, param) {
            return undone ? 0 : oldLayers.length * width * height * _CPColorBmp2["default"].BYTES_PER_PIXEL;
        };
    }

    CPUndoMergeAllLayers.prototype = Object.create(_CPUndo2["default"].prototype);
    CPUndoMergeAllLayers.prototype.constructor = CPUndoMergeAllLayers;

    function CPUndoMoveLayer(from, to) {
        this.undo = function () {
            if (to <= from) {
                moveLayerReal(to, from + 1);
            } else {
                moveLayerReal(to - 1, from);
            }
        };

        this.redo = function () {
            moveLayerReal(from, to);
        };
    }

    CPUndoMoveLayer.prototype = Object.create(_CPUndo2["default"].prototype);
    CPUndoMoveLayer.prototype.constructor = CPUndoMoveLayer;

    function CPUndoLayerAlpha(layerIndex, alpha) {
        this.from = that.getLayer(layerIndex).getAlpha();
        this.to = alpha;
        this.layerIndex = layerIndex;
    }

    CPUndoLayerAlpha.prototype = Object.create(_CPUndo2["default"].prototype);
    CPUndoLayerAlpha.prototype.constructor = CPUndoLayerAlpha;

    CPUndoLayerAlpha.prototype.undo = function () {
        that.getLayer(this.layerIndex).setAlpha(this.from);

        invalidateFusion();
        callListenersLayerChange(this.layerIndex);
    };

    CPUndoLayerAlpha.prototype.redo = function () {
        that.getLayer(this.layerIndex).setAlpha(this.to);

        invalidateFusion();
        callListenersLayerChange(this.layerIndex);
    };

    CPUndoLayerAlpha.prototype.merge = function (u) {
        if (u instanceof CPUndoLayerAlpha && this.layerIndex == u.layerIndex) {
            this.to = u.to;
            return true;
        }
        return false;
    };

    CPUndoLayerAlpha.prototype.noChange = function () {
        return this.from == this.to;
    };

    function CPUndoLayerMode(layerIndex, to) {
        this.layerIndex = layerIndex;
        this.from = that.getLayer(layerIndex).getBlendMode();
        this.to = to;
    }

    CPUndoLayerMode.prototype = Object.create(_CPUndo2["default"].prototype);
    CPUndoLayerMode.prototype.constructor = CPUndoLayerMode;

    CPUndoLayerMode.prototype.undo = function () {
        that.getLayer(this.layerIndex).setBlendMode(this.from);

        invalidateFusion();
        callListenersLayerChange();
    };

    CPUndoLayerMode.prototype.redo = function () {
        that.getLayer(this.layerIndex).setBlendMode(this.to);

        invalidateFusion();
        callListenersLayerChange();
    };

    CPUndoLayerMode.prototype.merge = function (u) {
        if (u instanceof CPUndoLayerMode && this.layerIndex == u.layerIndex) {
            this.to = u.to;
            return true;
        }
        return false;
    };

    CPUndoLayerMode.prototype.noChange = function () {
        return this.from == this.to;
    };

    function CPUndoLayerRename(layerIndex, to) {
        this.layerIndex = layerIndex;
        this.to = to;
        this.from = that.getLayer(layerIndex).name;
    }

    CPUndoLayerRename.prototype = Object.create(_CPUndo2["default"].prototype);
    CPUndoLayerRename.prototype.constructor = CPUndoLayerRename;

    CPUndoLayerRename.prototype.undo = function () {
        that.getLayer(this.layerIndex).name = this.from;
        callListenersLayerChange(this.layerIndex);
    };

    CPUndoLayerRename.prototype.redo = function () {
        that.getLayer(this.layerIndex).name = this.to;
        callListenersLayerChange(this.layerIndex);
    };

    CPUndoLayerRename.prototype.merge = function (u) {
        if (u instanceof CPUndoLayerRename && this.layerIndex == u.layerIndex) {
            this.to = u.to;
            return true;
        }
        return false;
    };

    CPUndoLayerRename.prototype.noChange = function () {
        return this.from == this.to;
    };

    /**
     * @param from CPRect
     * @param to CPRect
     */
    function CPUndoRectangleSelection(from, to) {
        from = from.clone();
        to = to.clone();

        this.undo = function () {
            that.setSelection(from);
            callListenersUpdateRegion(that.getBounds());
        };

        this.redo = function () {
            that.setSelection(to);
            callListenersUpdateRegion(that.getBounds());
        };

        this.noChange = function () {
            return from.equals(to);
        };
    }

    CPUndoRectangleSelection.prototype = Object.create(_CPUndo2["default"].prototype);
    CPUndoRectangleSelection.prototype.constructor = CPUndoRectangleSelection;

    /**
     * Used to encapsulate multiple undo operation as one
     * 
     * @param undoes CPUndo[] List of undo operations to encapsulate
     */
    function CPMultiUndo(undoes) {
        this.undoes = undoes;
    }

    CPMultiUndo.prototype = Object.create(_CPUndo2["default"].prototype);
    CPMultiUndo.prototype.constructor = CPMultiUndo;

    CPMultiUndo.prototype.undo = function () {
        for (var i = this.undoes.length - 1; i >= 0; i--) {
            this.undoes[i].undo();
        }
    };

    CPMultiUndo.prototype.redo = function () {
        for (var i = 0; i < this.undoes.length; i++) {
            this.undoes[i].redo();
        }
    };

    CPMultiUndo.prototype.noChange = function () {
        for (var i = 0; i < undoes.length; i++) {
            if (!undoes[i].noChange()) {
                return false;
            }
        }

        return true;
    };

    CPMultiUndo.prototype.getMemoryUsed = function (undone, param) {
        var total = 0;

        for (var i = 0; i < undoes.length; i++) {
            total += undoes[i].getMemoryUsed(undone, param);
        }

        return total;
    };

    /**
     * Store data to undo a cut operation
     * 
     * @param bmp CPColorBmp The rectangle of image data that was cut
     * @param layerIndex int Index of the layer the cut came from
     * @param selection CPRect The cut rectangle co-ordinates
     */
    function CPUndoCut(bmp, layerIndex, selection) {
        selection = selection.clone();

        this.undo = function () {
            that.setActiveLayerIndex(layerIndex);
            curLayer.copyBitmapRect(bmp, selection.left, selection.top, bmp.getBounds());
            that.setSelection(selection);
            invalidateFusionRect(selection);
        };

        this.redo = function () {
            that.setActiveLayerIndex(layerIndex);
            curLayer.clearRect(selection, EMPTY_LAYER_COLOR);
            that.emptySelection();
            invalidateFusionRect(selection);
        };

        this.getMemoryUsed = function (undone, param) {
            return bmp == param ? 0 : bmp.width * bmp.height * _CPColorBmp2["default"].BYTES_PER_PIXEL;
        };
    }

    CPUndoCut.prototype = Object.create(_CPUndo2["default"].prototype);
    CPUndoCut.prototype.constructor = CPUndoCut;

    /**
     * Store data to undo a paste operation
     * 
     * @param clip CPClip
     * @param layerIndex int
     * @param selection CPRect
     */
    function CPUndoPaste(clip, layerIndex, selection) {
        selection = selection.clone();

        this.undo = function () {
            layers.splice(layerIndex + 1, 1);

            that.setActiveLayerIndex(layerIndex);
            that.setSelection(selection);

            invalidateFusionRect(selection);
            callListenersLayerChange();
        };

        this.redo = function () {
            that.setActiveLayerIndex(layerIndex);
            pasteClip(false, clip);
        };

        this.getMemoryUsed = function (undone, param) {
            return clip.bmp == param ? 0 : clip.bmp.width * clip.bmp.height * 4;
        };
    }

    CPUndoPaste.prototype = Object.create(_CPUndo2["default"].prototype);
    CPUndoPaste.prototype.constructor = CPUndoPaste;
}

;

CPArtwork.prototype = Object.create(EventEmitter.prototype);
CPArtwork.prototype.constructor = CPArtwork;

CPArtwork.prototype.getBounds = function () {
    return new _utilCPRect2["default"](0, 0, this.width, this.height);
};

CPArtwork.prototype.isPointWithin = function (x, y) {
    return x >= 0 && y >= 0 && x < this.width && y < this.height;
};
module.exports = exports["default"];

},{"../util/CPColorFloat":47,"../util/CPRandom":48,"../util/CPRect":49,"./CPBrushInfo":5,"./CPBrushManager":6,"./CPClip":8,"./CPColorBmp":9,"./CPGreyBmp":10,"./CPLayer":11,"./CPUndo":15}],3:[function(require,module,exports){
/*
    ChickenPaint
    
    ChickenPaint is a translation of ChibiPaint from Java to JavaScript
    by Nicholas Sherlock / Chicken Smoothie.
    
    ChibiPaint is Copyright (c) 2006-2008 Marc Schefer

    ChickenPaint is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    ChickenPaint is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with ChickenPaint. If not, see <http://www.gnu.org/licenses/>.
*/

"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports["default"] = CPBitmap;

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

var _utilCPRect = require("../util/CPRect");

var _utilCPRect2 = _interopRequireDefault(_utilCPRect);

function CPBitmap(width, height) {
    // Width and height forced to integers
    this.width = width | 0;
    this.height = height | 0;
}

CPBitmap.prototype.getBounds = function () {
    return new _utilCPRect2["default"](0, 0, this.width, this.height);
};

CPBitmap.prototype.isInside = function (x, y) {
    return x >= 0 && y >= 0 && x < this.width && y < this.height;
};
module.exports = exports["default"];

},{"../util/CPRect":49}],4:[function(require,module,exports){
// Layer blending functions
//
// The FullAlpha versions are the ones that work in all cases
// others need the bottom layer to be 100% opaque but are faster
"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports["default"] = CPBlend;

function CPBlend() {}

var BYTES_PER_PIXEL = 4,
    RED_BYTE_OFFSET = 0,
    GREEN_BYTE_OFFSET = 1,
    BLUE_BYTE_OFFSET = 2,
    ALPHA_BYTE_OFFSET = 3;

CPBlend.prototype.fusionWithMultiply = function (that, fusion, rect) {
    var yStride = (that.width - rect.getWidth()) * BYTES_PER_PIXEL,
        pixIndex = that.offsetOfPixel(rect.left, rect.top);

    for (var y = rect.top; y < rect.bottom; y++, pixIndex += yStride) {
        for (var x = rect.left; x < rect.right; x++) {
            var alpha = that.data[pixIndex + ALPHA_BYTE_OFFSET] * that.alpha / 100 | 0;

            if (alpha > 0) {
                for (var i = 0; i < 3; i++, pixIndex++) {
                    fusion.data[pixIndex] = fusion.data[pixIndex] - (that.data[pixIndex] ^ 0xFF) * fusion.data[pixIndex] * alpha / (255 * 255) | 0;
                }
                pixIndex++; // Don't need to update the alpha because it started out as 100%
            } else {
                    pixIndex += BYTES_PER_PIXEL;
                }
        }
    }
};

/* Blend onto an opaque fusion. Supports .alpha < 100 on this layer */
CPBlend.prototype.fusionWithNormal = function (that, fusion, rect) {
    var yStride = (that.width - rect.getWidth()) * BYTES_PER_PIXEL | 0,
        pixIndex = that.offsetOfPixel(rect.left, rect.top) | 0,
        h = rect.bottom - rect.top | 0,
        w = rect.right - rect.left | 0;

    for (var y = 0; y < h; y++, pixIndex += yStride) {
        for (var x = 0; x < w; x++) {
            var alpha = that.data[pixIndex + ALPHA_BYTE_OFFSET] * that.alpha / 100 | 0;

            if (alpha > 0) {
                if (alpha == 255) {
                    fusion.data[pixIndex] = that.data[pixIndex];
                    fusion.data[pixIndex + 1] = that.data[pixIndex + 1];
                    fusion.data[pixIndex + 2] = that.data[pixIndex + 2];
                    fusion.data[pixIndex + 3] = 255;
                } else {
                    var invAlpha = 255 - alpha;

                    fusion.data[pixIndex] = (that.data[pixIndex] * alpha + fusion.data[pixIndex] * invAlpha) / 255 | 0;
                    fusion.data[pixIndex + 1] = (that.data[pixIndex + 1] * alpha + fusion.data[pixIndex + 1] * invAlpha) / 255 | 0;
                    fusion.data[pixIndex + 2] = (that.data[pixIndex + 2] * alpha + fusion.data[pixIndex + 2] * invAlpha) / 255 | 0;
                }
            }

            pixIndex += BYTES_PER_PIXEL;
        }
    }
};

// Fusing onto an opaque layer when this layer has alpha set to 100
CPBlend.prototype.fusionWithNormalNoAlpha = function (that, fusion, rect) {
    var yStride = (that.width - rect.getWidth()) * BYTES_PER_PIXEL | 0,
        pixIndex = that.offsetOfPixel(rect.left, rect.top) | 0,
        h = rect.bottom - rect.top | 0,
        w = rect.right - rect.left | 0;

    for (var y = 0; y < h; y++, pixIndex += yStride) {
        for (var x = 0; x < w; x++) {
            var alpha = that.data[pixIndex + ALPHA_BYTE_OFFSET];

            if (alpha > 0) {
                if (alpha == 255) {
                    fusion.data[pixIndex] = that.data[pixIndex];
                    fusion.data[pixIndex + 1] = that.data[pixIndex + 1];
                    fusion.data[pixIndex + 2] = that.data[pixIndex + 2];
                    fusion.data[pixIndex + 3] = that.data[pixIndex + 3];
                } else {
                    var invAlpha = 255 - alpha;

                    fusion.data[pixIndex] = (that.data[pixIndex] * alpha + fusion.data[pixIndex] * invAlpha) / 255;
                    fusion.data[pixIndex + 1] = (that.data[pixIndex + 1] * alpha + fusion.data[pixIndex + 1] * invAlpha) / 255;
                    fusion.data[pixIndex + 2] = (that.data[pixIndex + 2] * alpha + fusion.data[pixIndex + 2] * invAlpha) / 255;
                }
            }

            pixIndex += BYTES_PER_PIXEL;
        }
    }
};

CPBlend.prototype.fusionWithAdd = function (that, fusion, rect) {
    var yStride = (that.width - rect.getWidth()) * BYTES_PER_PIXEL,
        pixIndex = that.offsetOfPixel(rect.left, rect.top);

    for (var y = rect.top; y < rect.bottom; y++, pixIndex += yStride) {
        for (var x = rect.left; x < rect.right; x++) {
            var alpha = that.data[pixIndex + ALPHA_BYTE_OFFSET] * that.alpha / 100 | 0;

            if (alpha > 0) {
                for (var i = 0; i < 3; i++, pixIndex++) {
                    fusion.data[pixIndex] = Math.min(255, fusion.data[pixIndex] + alpha * that.data[pixIndex] / 255 | 0);
                }
                pixIndex++; // Don't need to update the alpha because it started out as 100%
            } else {
                    pixIndex += BYTES_PER_PIXEL;
                }
        }
    }
};

// Normal Alpha Mode
// C = A*d + B*(1-d) and d = aa / (aa + ab - aa*ab)
CPBlend.prototype.fusionWithNormalFullAlpha = function (that, fusion, rect) {
    var yStride = (that.width - rect.getWidth()) * BYTES_PER_PIXEL | 0,
        pixIndex = that.offsetOfPixel(rect.left, rect.top) | 0,
        h = rect.bottom - rect.top | 0,
        w = rect.right - rect.left | 0;

    for (var y = 0; y < h; y++, pixIndex += yStride) {
        for (var x = 0; x < w; x++) {
            var alpha1 = that.data[pixIndex + ALPHA_BYTE_OFFSET] * that.alpha / 100,
                alpha2 = fusion.data[pixIndex + ALPHA_BYTE_OFFSET] * fusion.alpha / 100,
                newAlpha = alpha1 + alpha2 - alpha1 * alpha2 / 255 | 0;

            if (newAlpha > 0) {
                var realAlpha = alpha1 * 255 / newAlpha | 0,
                    invAlpha = 255 - realAlpha;

                fusion.data[pixIndex] = (that.data[pixIndex] * realAlpha + fusion.data[pixIndex] * invAlpha) / 255;
                fusion.data[pixIndex + 1] = (that.data[pixIndex + 1] * realAlpha + fusion.data[pixIndex + 1] * invAlpha) / 255;
                fusion.data[pixIndex + 2] = (that.data[pixIndex + 2] * realAlpha + fusion.data[pixIndex + 2] * invAlpha) / 255;
                fusion.data[pixIndex + 3] = newAlpha;
            }

            pixIndex += BYTES_PER_PIXEL;
        }
    }

    fusion.alpha = 100;
};

// Multiply Mode
// C = (A*aa*(1-ab) + B*ab*(1-aa) + A*B*aa*ab) / (aa + ab - aa*ab)

CPBlend.prototype.fusionWithMultiplyFullAlpha = function (that, fusion, rect) {
    var yStride = (that.width - rect.getWidth()) * BYTES_PER_PIXEL,
        pixIndex = that.offsetOfPixel(rect.left, rect.top);

    for (var y = rect.top; y < rect.bottom; y++, pixIndex += yStride) {
        for (var x = rect.left; x < rect.right; x++) {
            var alpha1 = that.data[pixIndex + ALPHA_BYTE_OFFSET] * that.alpha / 100,
                alpha2 = fusion.data[pixIndex + ALPHA_BYTE_OFFSET] * fusion.alpha / 100,
                newAlpha = alpha1 + alpha2 - alpha1 * alpha2 / 255 | 0;

            if (newAlpha > 0) {
                var alpha12 = alpha1 * alpha2 / 255 | 0,
                    alpha1n2 = alpha1 * (alpha2 ^ 0xFF) / 255 | 0,
                    alphan12 = (alpha1 ^ 0xff) * alpha2 / 255 | 0;

                for (var i = 0; i < 3; i++, pixIndex++) {
                    fusion.data[pixIndex] = (that.data[pixIndex] * alpha1n2 + fusion.data[pixIndex] * alphan12 + that.data[pixIndex] * fusion.data[pixIndex] * alpha12 / 255) / newAlpha | 0;
                }
                fusion.data[pixIndex++] = newAlpha;
            } else {
                pixIndex += BYTES_PER_PIXEL;
            }
        }
    }

    fusion.alpha = 100;
};

// Linear Dodge (Add) Mode
// C = (aa * A + ab * B) / (aa + ab - aa*ab)

CPBlend.prototype.fusionWithAddFullAlpha = function (that, fusion, rect) {
    var yStride = (that.width - rect.getWidth()) * BYTES_PER_PIXEL,
        pixIndex = that.offsetOfPixel(rect.left, rect.top);

    for (var y = rect.top; y < rect.bottom; y++, pixIndex += yStride) {
        for (var x = rect.left; x < rect.right; x++) {
            var alpha1 = that.data[pixIndex + ALPHA_BYTE_OFFSET] * that.alpha / 100,
                alpha2 = fusion.data[pixIndex + ALPHA_BYTE_OFFSET] * fusion.alpha / 100,
                newAlpha = alpha1 + alpha2 - alpha1 * alpha2 / 255 | 0;

            if (newAlpha > 0) {

                /*
                * // this version seems slower than the Math.min one int r = (alpha2 * (color2 >>> 16 & 0xff) +
                * alpha1 * (color1 >>> 16 & 0xff)) / newAlpha; r |= ((~((r & 0xffffff00) - 1) >> 16) | r) & 0xff;
                * int g = (alpha2 * (color2 >>> 8 & 0xff) + alpha1 * (color1 >>> 8 & 0xff)) / newAlpha; g |= ((~((g &
                * 0xffffff00) - 1) >> 16) | g) & 0xff; int b = (alpha2 * (color2 & 0xff) + alpha1 * (color1 &
                * 0xff)) / newAlpha; b |= ((~((b & 0xffffff00) - 1) >> 16) | b) & 0xff;
                */

                for (var i = 0; i < 3; i++, pixIndex++) {
                    fusion.data[pixIndex] = Math.min(255, (alpha2 * fusion.data[pixIndex] + alpha1 * that.data[pixIndex]) / newAlpha | 0);
                }
                fusion.data[pixIndex++] = newAlpha;
            } else {
                pixIndex += BYTES_PER_PIXEL;
            }
        }
    }

    fusion.alpha = 100;
};

// Linear Burn (Sub) Mode
// C = (aa * A + ab * B - aa*ab ) / (aa + ab - aa*ab)

CPBlend.prototype.fusionWithSubtractFullAlpha = function (that, fusion, rect) {
    var yStride = (that.width - rect.getWidth()) * BYTES_PER_PIXEL,
        pixIndex = that.offsetOfPixel(rect.left, rect.top);

    for (var y = rect.top; y < rect.bottom; y++, pixIndex += yStride) {
        for (var x = rect.left; x < rect.right; x++) {
            var alpha1 = that.data[pixIndex + ALPHA_BYTE_OFFSET] * that.alpha / 100 | 0,
                alpha2 = fusion.data[pixIndex + ALPHA_BYTE_OFFSET] * fusion.alpha / 100 | 0,
                newAlpha = alpha1 + alpha2 - alpha1 * alpha2 / 255 | 0;

            if (newAlpha > 0) {
                var alpha12 = alpha1 * alpha2;

                for (var i = 0; i < 3; i++, pixIndex++) {
                    var channel = (alpha2 * fusion.data[pixIndex] + alpha1 * that.data[pixIndex] - alpha12) / newAlpha;

                    // binary magic to clamp negative values to zero without using a condition
                    fusion.data[pixIndex] = channel & ~channel >>> 24;
                }
                fusion.data[pixIndex++] = newAlpha;
            } else {
                pixIndex += BYTES_PER_PIXEL;
            }
        }
    }

    fusion.alpha = 100;
};

// For opaque fusion
CPBlend.prototype.fusionWithSubtract = function (that, fusion, rect) {
    var yStride = (that.width - rect.getWidth()) * BYTES_PER_PIXEL | 0,
        pixIndex = that.offsetOfPixel(rect.left, rect.top) | 0;

    for (var y = rect.top; y < rect.bottom; y++, pixIndex += yStride) {
        for (var x = rect.left; x < rect.right; x++) {
            var alpha1 = that.data[pixIndex + ALPHA_BYTE_OFFSET] * that.alpha / 100 | 0,
                alpha12 = alpha1 * 255;

            for (var i = 0; i < 3; i++, pixIndex++) {
                var channel = (255 * fusion.data[pixIndex] + alpha1 * that.data[pixIndex] - alpha12) / 255;

                // binary magic to clamp negative values to zero without using a condition
                fusion.data[pixIndex] = channel & ~channel >>> 24;
            }
            pixIndex++; // Alpha stays the same
        }
    }

    fusion.alpha = 100;
};

// Screen Mode
// same as Multiply except all color channels are inverted and the result too
// C = 1 - (((1-A)*aa*(1-ab) + (1-B)*ab*(1-aa) + (1-A)*(1-B)*aa*ab) / (aa + ab - aa*ab))

CPBlend.prototype.fusionWithScreenFullAlpha = function (that, fusion, rect) {
    var yStride = (that.width - rect.getWidth()) * BYTES_PER_PIXEL,
        pixIndex = that.offsetOfPixel(rect.left, rect.top);

    for (var y = rect.top; y < rect.bottom; y++, pixIndex += yStride) {
        for (var x = rect.left; x < rect.right; x++) {
            var alpha1 = that.data[pixIndex + ALPHA_BYTE_OFFSET] * that.alpha / 100 | 0,
                alpha2 = fusion.data[pixIndex + ALPHA_BYTE_OFFSET] * fusion.alpha / 100 | 0,
                newAlpha = alpha1 + alpha2 - alpha1 * alpha2 / 255 | 0;

            if (newAlpha > 0) {
                var alpha12 = alpha1 * alpha2 / 255 | 0,
                    alpha1n2 = alpha1 * (alpha2 ^ 0xFF) / 255 | 0,
                    alphan12 = (alpha1 ^ 0xff) * alpha2 / 255 | 0;

                for (var i = 0; i < 3; i++, pixIndex++) {
                    fusion.data[pixIndex] = 0xFF ^ ((that.data[pixIndex] ^ 0xFF) * alpha1n2 + (fusion.data[pixIndex] ^ 0xFF) * alphan12 + (that.data[pixIndex] ^ 0xFF) * (fusion.data[pixIndex] ^ 0xFF) * alpha12 / 255) / newAlpha;
                }
                fusion.data[pixIndex++] = newAlpha;
            } else {
                pixIndex += BYTES_PER_PIXEL;
            }
        }
    }

    fusion.alpha = 100;
};

// For opaque fusion
CPBlend.prototype.fusionWithScreen = function (that, fusion, rect) {
    var yStride = (that.width - rect.getWidth()) * BYTES_PER_PIXEL | 0,
        pixIndex = that.offsetOfPixel(rect.left, rect.top) | 0;

    for (var y = rect.top; y < rect.bottom; y++, pixIndex += yStride) {
        for (var x = rect.left; x < rect.right; x++) {
            var alpha1 = that.data[pixIndex + ALPHA_BYTE_OFFSET] * that.alpha / 100 | 0,
                invAlpha1 = alpha1 ^ 0xff;

            for (var i = 0; i < 3; i++, pixIndex++) {
                fusion.data[pixIndex] = 0xFF ^ ((fusion.data[pixIndex] ^ 0xFF) * invAlpha1 + (that.data[pixIndex] ^ 0xFF) * (fusion.data[pixIndex] ^ 0xFF) * alpha1 / 255) / 255;
            }
            pixIndex++; // Alpha stays the same
        }
    }

    fusion.alpha = 100;
};

// Lighten Mode
// if B >= A: C = A*d + B*(1-d) and d = aa * (1-ab) / (aa + ab - aa*ab)
// if A > B: C = B*d + A*(1-d) and d = ab * (1-aa) / (aa + ab - aa*ab)

CPBlend.prototype.fusionWithLightenFullAlpha = function (that, fusion, rect) {
    var yStride = (that.width - rect.getWidth()) * BYTES_PER_PIXEL,
        pixIndex = that.offsetOfPixel(rect.left, rect.top);

    for (var y = rect.top; y < rect.bottom; y++, pixIndex += yStride) {
        for (var x = rect.left; x < rect.right; x++) {
            var alpha1 = that.data[pixIndex + ALPHA_BYTE_OFFSET] * that.alpha / 100 | 0,
                alpha2 = fusion.data[pixIndex + ALPHA_BYTE_OFFSET] * fusion.alpha / 100 | 0,
                newAlpha = alpha1 + alpha2 - alpha1 * alpha2 / 255 | 0;

            if (newAlpha > 0) {
                var
                // This alpha is used when color1 > color2
                alpha12 = alpha2 * (alpha1 ^ 0xff) / newAlpha | 0,
                    invAlpha12 = alpha12 ^ 0xFF,

                // This alpha is used when color2 > color1
                alpha21 = alpha1 * (alpha2 ^ 0xff) / newAlpha | 0,
                    invAlpha21 = alpha21 ^ 0xFF;

                for (var i = 0; i < 3; i++, pixIndex++) {
                    var c1 = that.data[pixIndex],
                        c2 = fusion.data[pixIndex];

                    fusion.data[pixIndex] = (c2 >= c1 ? c1 * alpha21 + c2 * invAlpha21 : c2 * alpha12 + c1 * invAlpha12) / 255 | 0;
                }
                fusion.data[pixIndex++] = newAlpha;
            } else {
                pixIndex += BYTES_PER_PIXEL;
            }
        }
    }

    fusion.alpha = 100;
};

// When fusion is opaque
CPBlend.prototype.fusionWithLighten = function (that, fusion, rect) {
    var yStride = (that.width - rect.getWidth()) * BYTES_PER_PIXEL,
        pixIndex = that.offsetOfPixel(rect.left, rect.top);

    for (var y = rect.top; y < rect.bottom; y++, pixIndex += yStride) {
        for (var x = rect.left; x < rect.right; x++) {
            var alpha1 = that.data[pixIndex + ALPHA_BYTE_OFFSET] * that.alpha / 100 | 0,
                invAlpha1 = alpha1 ^ 0xff;

            for (var i = 0; i < 3; i++, pixIndex++) {
                var c1 = that.data[pixIndex],
                    c2 = fusion.data[pixIndex];

                fusion.data[pixIndex] = c2 >= c1 ? c2 : (c2 * invAlpha1 + c1 * alpha1) / 255;
            }
            pixIndex++; // Opacity unchanged (still 255)
        }
    }
};

// Darken Mode
// if B >= A: C = B*d + A*(1-d) and d = ab * (1-aa) / (aa + ab - aa*ab)
// if A > B: C = A*d + B*(1-d) and d = aa * (1-ab) / (aa + ab - aa*ab)

CPBlend.prototype.fusionWithDarkenFullAlpha = function (that, fusion, rect) {
    var yStride = (that.width - rect.getWidth()) * BYTES_PER_PIXEL,
        pixIndex = that.offsetOfPixel(rect.left, rect.top);

    for (var y = rect.top; y < rect.bottom; y++, pixIndex += yStride) {
        for (var x = rect.left; x < rect.right; x++) {
            var alpha1 = that.data[pixIndex + ALPHA_BYTE_OFFSET] * that.alpha / 100 | 0,
                alpha2 = fusion.data[pixIndex + ALPHA_BYTE_OFFSET] * fusion.alpha / 100 | 0,
                newAlpha = alpha1 + alpha2 - alpha1 * alpha2 / 255 | 0;

            if (newAlpha > 0) {
                var
                // This alpha is used when color1 > color2
                alpha12 = alpha1 * (alpha2 ^ 0xff) / newAlpha | 0,
                    invAlpha12 = alpha12 ^ 0xff | 0,

                // This alpha is used when color2 > color1
                alpha21 = alpha2 * (alpha1 ^ 0xff) / newAlpha | 0,
                    invAlpha21 = alpha21 ^ 0xff | 0;

                for (var i = 0; i < 3; i++, pixIndex++) {
                    var c1 = that.data[pixIndex],
                        c2 = fusion.data[pixIndex];

                    fusion.data[pixIndex] = (c2 >= c1 ? c2 * alpha21 + c1 * invAlpha21 : c1 * alpha12 + c2 * invAlpha12) / 255 | 0;
                }
                fusion.data[pixIndex++] = newAlpha;
            } else {
                pixIndex += BYTES_PER_PIXEL;
            }
        }
    }

    fusion.alpha = 100;
};

// When fusion is opaque
CPBlend.prototype.fusionWithDarken = function (that, fusion, rect) {
    var yStride = (that.width - rect.getWidth()) * BYTES_PER_PIXEL | 0,
        pixIndex = that.offsetOfPixel(rect.left, rect.top) | 0;

    for (var y = rect.top; y < rect.bottom; y++, pixIndex += yStride) {
        for (var x = rect.left; x < rect.right; x++) {
            var alpha1 = that.data[pixIndex + ALPHA_BYTE_OFFSET] * that.alpha / 100 | 0,
                invAlpha1 = alpha1 ^ 0xff;

            for (var i = 0; i < 3; i++, pixIndex++) {
                var c1 = that.data[pixIndex],
                    c2 = fusion.data[pixIndex];

                fusion.data[pixIndex] = c2 >= c1 ? (c2 * invAlpha1 + c1 * alpha1) / 255 : c2;
            }

            pixIndex++; // Alpha stays the same
        }
    }

    fusion.alpha = 100;
};

// Dodge Mode
//
// C = (aa*(1-ab)*A + (1-aa)*ab*B + aa*ab*B/(1-A)) / (aa + ab - aa*ab)

CPBlend.prototype.fusionWithDodgeFullAlpha = function (that, fusion, rect) {
    var yStride = (that.width - rect.getWidth()) * BYTES_PER_PIXEL,
        pixIndex = that.offsetOfPixel(rect.left, rect.top);

    for (var y = rect.top; y < rect.bottom; y++, pixIndex += yStride) {
        for (var x = rect.left; x < rect.right; x++) {
            var alpha1 = that.data[pixIndex + ALPHA_BYTE_OFFSET] * that.alpha / 100 | 0;

            if (alpha1 == 0) {
                pixIndex += BYTES_PER_PIXEL;
                continue;
            }

            var alpha2 = fusion.data[pixIndex + ALPHA_BYTE_OFFSET] * fusion.alpha / 100 | 0,
                newAlpha = alpha1 + alpha2 - alpha1 * alpha2 / 255 | 0;

            if (newAlpha > 0) {
                var alpha12 = alpha1 * alpha2 / 255 | 0,
                    alpha1n2 = alpha1 * (alpha2 ^ 0xff) / 255 | 0,
                    alphan12 = (alpha1 ^ 0xff) * alpha2 / 255 | 0;

                for (var i = 0; i < 3; i++, pixIndex++) {
                    var color1 = that.data[pixIndex],
                        color2 = fusion.data[pixIndex],
                        invColor1 = color1 ^ 0xFF;

                    fusion.data[pixIndex] = (color1 * alpha1n2 + color2 * alphan12 + alpha12 * (invColor1 == 0 ? 255 : Math.min(255, 255 * color2 / invColor1 | 0))) / newAlpha | 0;
                }
                fusion.data[pixIndex++] = newAlpha;
            } else {
                pixIndex += BYTES_PER_PIXEL;
            }
        }
    }

    fusion.alpha = 100;
};

// When fusion is opaque
CPBlend.prototype.fusionWithDodge = function (that, fusion, rect) {
    var yStride = (that.width - rect.getWidth()) * BYTES_PER_PIXEL,
        pixIndex = that.offsetOfPixel(rect.left, rect.top);

    for (var y = rect.top; y < rect.bottom; y++, pixIndex += yStride) {
        for (var x = rect.left; x < rect.right; x++) {
            var alpha1 = that.data[pixIndex + ALPHA_BYTE_OFFSET] * that.alpha / 100 | 0;

            if (alpha1 == 0) {
                pixIndex += BYTES_PER_PIXEL;
                continue;
            }

            var invAlpha1 = alpha1 ^ 0xff;

            for (var i = 0; i < 3; i++, pixIndex++) {
                var color1 = that.data[pixIndex],
                    color2 = fusion.data[pixIndex],
                    invColor1 = color1 ^ 0xFF;

                fusion.data[pixIndex] = (color2 * invAlpha1 + alpha1 * (invColor1 == 0 ? 255 : Math.min(255, 255 * color2 / invColor1 | 0))) / 255 | 0;
            }
            pixIndex++; // Alpha stays the same
        }
    }
};

// Burn Mode
//
// C = (aa*(1-ab)*A + (1-aa)*ab*B + aa*ab*(1-(1-B)/A)) / (aa + ab - aa*ab)

CPBlend.prototype.fusionWithBurnFullAlpha = function (that, fusion, rect) {
    var yStride = (that.width - rect.getWidth()) * BYTES_PER_PIXEL,
        pixIndex = that.offsetOfPixel(rect.left, rect.top);

    for (var y = rect.top; y < rect.bottom; y++, pixIndex += yStride) {
        for (var x = rect.left; x < rect.right; x++) {
            var alpha1 = that.data[pixIndex + ALPHA_BYTE_OFFSET] * that.alpha / 100 | 0;

            if (alpha1 == 0) {
                pixIndex += BYTES_PER_PIXEL;
                continue;
            }

            var alpha2 = fusion.data[pixIndex + ALPHA_BYTE_OFFSET] * fusion.alpha / 100 | 0,
                newAlpha = alpha1 + alpha2 - alpha1 * alpha2 / 255 | 0;

            if (newAlpha > 0) {
                var alpha12 = alpha1 * alpha2 / 255 | 0,
                    alpha1n2 = alpha1 * (alpha2 ^ 0xff) / 255 | 0,
                    alphan12 = (alpha1 ^ 0xff) * alpha2 / 255 | 0;

                for (var i = 0; i < 3; i++, pixIndex++) {
                    var color1 = that.data[pixIndex],
                        color2 = fusion.data[pixIndex],
                        invColor2 = color2 ^ 0xFF;

                    fusion.data[pixIndex] = (color1 * alpha1n2 + color2 * alphan12 + alpha12 * (color1 == 0 ? 0 : Math.min(255, 255 * invColor2 / color1) ^ 0xff)) / newAlpha | 0;
                }
                fusion.data[pixIndex++] = newAlpha;
            } else {
                pixIndex += BYTES_PER_PIXEL;
            }
        }
    }

    fusion.alpha = 100;
};

// When fusion is opaque
CPBlend.prototype.fusionWithBurn = function (that, fusion, rect) {
    var yStride = (that.width - rect.getWidth()) * BYTES_PER_PIXEL | 0,
        pixIndex = that.offsetOfPixel(rect.left, rect.top) | 0;

    for (var y = rect.top; y < rect.bottom; y++, pixIndex += yStride) {
        for (var x = rect.left; x < rect.right; x++) {
            var alpha1 = that.data[pixIndex + ALPHA_BYTE_OFFSET] * that.alpha / 100 | 0;

            if (alpha1 == 0) {
                pixIndex += BYTES_PER_PIXEL;
                continue;
            }

            var invAlpha1 = alpha1 ^ 0xff;

            for (var i = 0; i < 3; i++, pixIndex++) {
                var color1 = that.data[pixIndex],
                    color2 = fusion.data[pixIndex],
                    invColor2 = color2 ^ 0xFF;

                fusion.data[pixIndex] = (color2 * invAlpha1 + alpha1 * (color1 == 0 ? 0 : Math.min(255, 255 * invColor2 / color1) ^ 0xff)) / 255 | 0;
            }
            pixIndex++; // Alpha stays the same
        }
    }

    fusion.alpha = 100;
};

// Overlay Mode
// If B <= 0.5 C = (A*aa*(1-ab) + B*ab*(1-aa) + aa*ab*(2*A*B) / (aa + ab - aa*ab)
// If B > 0.5 C = (A*aa*(1-ab) + B*ab*(1-aa) + aa*ab*(1 - 2*(1-A)*(1-B)) / (aa + ab - aa*ab)

CPBlend.prototype.fusionWithOverlayFullAlpha = function (that, fusion, rect) {
    var yStride = (that.width - rect.getWidth()) * BYTES_PER_PIXEL,
        pixIndex = that.offsetOfPixel(rect.left, rect.top);

    for (var y = rect.top; y < rect.bottom; y++, pixIndex += yStride) {
        for (var x = rect.left; x < rect.right; x++) {
            var alpha1 = that.data[pixIndex + ALPHA_BYTE_OFFSET] * that.alpha / 100 | 0;

            if (alpha1 == 0) {
                pixIndex += BYTES_PER_PIXEL;
                continue;
            }

            var alpha2 = fusion.data[pixIndex + ALPHA_BYTE_OFFSET] * fusion.alpha / 100 | 0,
                newAlpha = alpha1 + alpha2 - alpha1 * alpha2 / 255 | 0;

            if (newAlpha > 0) {
                var alpha12 = alpha1 * alpha2 / 255 | 0,
                    alpha1n2 = alpha1 * (alpha2 ^ 0xff) / 255 | 0,
                    alphan12 = (alpha1 ^ 0xff) * alpha2 / 255 | 0;

                for (var i = 0; i < 3; i++, pixIndex++) {
                    var c1 = that.data[pixIndex],
                        c2 = fusion.data[pixIndex];

                    fusion.data[pixIndex] = (alpha1n2 * c1 + alphan12 * c2 + (c2 <= 127 ? alpha12 * 2 * c1 * c2 / 255 : alpha12 * (2 * (c1 ^ 0xff) * (c2 ^ 0xff) / 255 ^ 0xff))) / newAlpha | 0;
                }
                fusion.data[pixIndex++] = newAlpha;
            } else {
                pixIndex += BYTES_PER_PIXEL;
            }
        }
    }

    fusion.alpha = 100;
};

// When fusion is opaque
CPBlend.prototype.fusionWithOverlay = function (that, fusion, rect) {
    var yStride = (that.width - rect.getWidth()) * BYTES_PER_PIXEL | 0,
        pixIndex = that.offsetOfPixel(rect.left, rect.top) | 0;

    for (var y = rect.top; y < rect.bottom; y++, pixIndex += yStride) {
        for (var x = rect.left; x < rect.right; x++) {
            var alpha1 = that.data[pixIndex + ALPHA_BYTE_OFFSET] * that.alpha / 100 | 0;

            if (alpha1 == 0) {
                pixIndex += BYTES_PER_PIXEL;
                continue;
            }

            var alphan12 = alpha1 ^ 0xff;

            for (var i = 0; i < 3; i++, pixIndex++) {
                var c1 = that.data[pixIndex],
                    c2 = fusion.data[pixIndex];

                fusion.data[pixIndex] = (alphan12 * c2 + (c2 <= 127 ? alpha1 * 2 * c1 * c2 / 255 : alpha1 * (2 * (c1 ^ 0xff) * (c2 ^ 0xff) / 255 ^ 0xff))) / 255 | 0;
            }
            pixIndex++; // Alpha stays 255
        }
    }
};

// Hard Light Mode (same as Overlay with A and B swapped)
// If A <= 0.5 C = (A*aa*(1-ab) + B*ab*(1-aa) + aa*ab*(2*A*B) / (aa + ab - aa*ab)
// If A > 0.5 C = (A*aa*(1-ab) + B*ab*(1-aa) + aa*ab*(1 - 2*(1-A)*(1-B)) / (aa + ab - aa*ab)

CPBlend.prototype.fusionWithHardLightFullAlpha = function (that, fusion, rect) {
    var yStride = (that.width - rect.getWidth()) * BYTES_PER_PIXEL,
        pixIndex = that.offsetOfPixel(rect.left, rect.top);

    for (var y = rect.top; y < rect.bottom; y++, pixIndex += yStride) {
        for (var x = rect.left; x < rect.right; x++) {
            var alpha1 = that.data[pixIndex + ALPHA_BYTE_OFFSET] * that.alpha / 100 | 0;

            if (alpha1 == 0) {
                pixIndex += BYTES_PER_PIXEL;
                continue;
            }

            var alpha2 = fusion.data[pixIndex + ALPHA_BYTE_OFFSET] * fusion.alpha / 100 | 0,
                newAlpha = alpha1 + alpha2 - alpha1 * alpha2 / 255 | 0;

            if (newAlpha > 0) {
                var alpha12 = alpha1 * alpha2 / 255 | 0,
                    alpha1n2 = alpha1 * (alpha2 ^ 0xff) / 255 | 0,
                    alphan12 = (alpha1 ^ 0xff) * alpha2 / 255 | 0;

                for (var i = 0; i < 3; i++, pixIndex++) {
                    var c1 = that.data[pixIndex],
                        c2 = fusion.data[pixIndex];

                    fusion.data[pixIndex] = (alpha1n2 * c1 + alphan12 * c2 + (c1 <= 127 ? alpha12 * 2 * c1 * c2 / 255 : alpha12 * (2 * (c1 ^ 0xff) * (c2 ^ 0xff) / 255 ^ 0xff))) / newAlpha | 0;
                }
                fusion.data[pixIndex++] = newAlpha;
            } else {
                pixIndex += BYTES_PER_PIXEL;
            }
        }
    }

    fusion.alpha = 100;
};

// Soft Light Mode
// A < 0.5 => C = (2*A - 1) * (B - B^2) + B
// A > 0.5 => C = (2*A - 1) * (sqrt(B) - B) + B

CPBlend.prototype.fusionWithSoftLightFullAlpha = function (that, fusion, rect) {
    var yStride = (that.width - rect.getWidth()) * BYTES_PER_PIXEL,
        pixIndex = that.offsetOfPixel(rect.left, rect.top);

    for (var y = rect.top; y < rect.bottom; y++, pixIndex += yStride) {
        for (var x = rect.left; x < rect.right; x++) {
            var alpha1 = that.data[pixIndex + ALPHA_BYTE_OFFSET] * that.alpha / 100 | 0;

            if (alpha1 == 0) {
                pixIndex += BYTES_PER_PIXEL;
                continue;
            }

            var alpha2 = fusion.data[pixIndex + ALPHA_BYTE_OFFSET] * fusion.alpha / 100 | 0,
                newAlpha = alpha1 + alpha2 - alpha1 * alpha2 / 255 | 0;

            if (newAlpha > 0) {
                var alpha12 = alpha1 * alpha2 / 255 | 0,
                    alpha1n2 = alpha1 * (alpha2 ^ 0xff) / 255 | 0,
                    alphan12 = (alpha1 ^ 0xff) * alpha2 / 255 | 0;

                for (var i = 0; i < 3; i++, pixIndex++) {
                    var c1 = that.data[pixIndex],
                        c2 = fusion.data[pixIndex];

                    fusion.data[pixIndex] = (alpha1n2 * c1 + alphan12 * c2 + (c1 <= 127 ? alpha12 * ((2 * c1 - 255) * that.softLightLUTSquare[c2] / 255 + c2) : alpha12 * ((2 * c1 - 255) * that.softLightLUTSquareRoot[c2] / 255 + c2))) / newAlpha | 0;
                }
                fusion.data[pixIndex++] = newAlpha;
            } else {
                pixIndex += BYTES_PER_PIXEL;
            }
        }
    }

    fusion.alpha = 100;
};

// Vivid Light Mode
// A < 0.5 => C = 1 - (1-B) / (2*A)
// A > 0.5 => C = B / (2*(1-A))

CPBlend.prototype.fusionWithVividLightFullAlpha = function (that, fusion, rect) {
    var yStride = (that.width - rect.getWidth()) * BYTES_PER_PIXEL,
        pixIndex = that.offsetOfPixel(rect.left, rect.top);

    for (var y = rect.top; y < rect.bottom; y++, pixIndex += yStride) {
        for (var x = rect.left; x < rect.right; x++) {
            var alpha1 = that.data[pixIndex + ALPHA_BYTE_OFFSET] * that.alpha / 100 | 0;

            if (alpha1 == 0) {
                pixIndex += BYTES_PER_PIXEL;
                continue;
            }

            var alpha2 = fusion.data[pixIndex + ALPHA_BYTE_OFFSET] * fusion.alpha / 100 | 0,
                newAlpha = alpha1 + alpha2 - alpha1 * alpha2 / 255 | 0;

            if (newAlpha > 0) {
                var alpha12 = alpha1 * alpha2 / 255 | 0,
                    alpha1n2 = alpha1 * (alpha2 ^ 0xff) / 255 | 0,
                    alphan12 = (alpha1 ^ 0xff) * alpha2 / 255 | 0;

                for (var i = 0; i < 3; i++, pixIndex++) {
                    var c1 = that.data[pixIndex],
                        c2 = fusion.data[pixIndex];

                    fusion.data[pixIndex] = (alpha1n2 * c1 + alphan12 * c2 + (c1 <= 127 ? alpha12 * (c1 == 0 ? 0 : 255 - Math.min(255, (255 - c2) * 255 / (2 * c1))) : alpha12 * (c1 == 255 ? 255 : Math.min(255, c2 * 255 / (2 * (255 - c1)))))) / newAlpha | 0;
                }
                fusion.data[pixIndex++] = newAlpha;
            } else {
                pixIndex += BYTES_PER_PIXEL;
            }
        }
    }

    fusion.alpha = 100;
};

// Linear Light Mode
// C = B + 2*A -1

CPBlend.prototype.fusionWithLinearLightFullAlpha = function (that, fusion, rect) {
    var yStride = (that.width - rect.getWidth()) * BYTES_PER_PIXEL,
        pixIndex = that.offsetOfPixel(rect.left, rect.top);

    for (var y = rect.top; y < rect.bottom; y++, pixIndex += yStride) {
        for (var x = rect.left; x < rect.right; x++) {
            var alpha1 = that.data[pixIndex + ALPHA_BYTE_OFFSET] * that.alpha / 100 | 0;

            if (alpha1 == 0) {
                pixIndex += BYTES_PER_PIXEL;
                continue;
            }

            var alpha2 = fusion.data[pixIndex + ALPHA_BYTE_OFFSET] * fusion.alpha / 100 | 0,
                newAlpha = alpha1 + alpha2 - alpha1 * alpha2 / 255 | 0;

            if (newAlpha > 0) {
                var alpha12 = alpha1 * alpha2 / 255 | 0,
                    alpha1n2 = alpha1 * (alpha2 ^ 0xff) / 255 | 0,
                    alphan12 = (alpha1 ^ 0xff) * alpha2 / 255 | 0;

                for (var i = 0; i < 3; i++, pixIndex++) {
                    var c1 = that.data[pixIndex],
                        c2 = fusion.data[pixIndex];

                    fusion.data[pixIndex] = (alpha1n2 * c1 + alphan12 * c2 + alpha12 * Math.min(255, Math.max(0, c2 + 2 * c1 - 255))) / newAlpha | 0;
                }
                fusion.data[pixIndex++] = newAlpha;
            } else {
                pixIndex += BYTES_PER_PIXEL;
            }
        }
    }

    fusion.alpha = 100;
};

// Pin Light Mode
// B > 2*A => C = 2*A
// B < 2*A-1 => C = 2*A-1
// else => C = B

CPBlend.prototype.fusionWithPinLightFullAlpha = function (that, fusion, rect) {
    var yStride = (that.width - rect.getWidth()) * BYTES_PER_PIXEL,
        pixIndex = that.offsetOfPixel(rect.left, rect.top);

    for (var y = rect.top; y < rect.bottom; y++, pixIndex += yStride) {
        for (var x = rect.left; x < rect.right; x++) {
            var alpha1 = that.data[pixIndex + ALPHA_BYTE_OFFSET] * that.alpha / 100 | 0;

            if (alpha1 == 0) {
                pixIndex += BYTES_PER_PIXEL;
                continue;
            }

            var alpha2 = fusion.data[pixIndex + ALPHA_BYTE_OFFSET] * fusion.alpha / 100 | 0,
                newAlpha = alpha1 + alpha2 - alpha1 * alpha2 / 255 | 0;

            if (newAlpha > 0) {
                var alpha12 = alpha1 * alpha2 / 255 | 0,
                    alpha1n2 = alpha1 * (alpha2 ^ 0xff) / 255 | 0,
                    alphan12 = (alpha1 ^ 0xff) * alpha2 / 255 | 0;

                for (var i = 0; i < 3; i++, pixIndex++) {
                    var c1 = that.data[pixIndex],
                        c2 = fusion.data[pixIndex],
                        c3 = c2 >= 2 * c1 ? 2 * c1 : c2 <= 2 * c1 - 255 ? 2 * c1 - 255 : c2;

                    fusion.data[pixIndex] = (alpha1n2 * c1 + alphan12 * c2 + alpha12 * c3) / newAlpha | 0;
                }
                fusion.data[pixIndex++] = newAlpha;
            } else {
                pixIndex += BYTES_PER_PIXEL;
            }
        }
    }

    fusion.alpha = 100;
};
module.exports = exports["default"];

},{}],5:[function(require,module,exports){
/*
    ChickenPaint
    
    ChickenPaint is a translation of ChibiPaint from Java to JavaScript
    by Nicholas Sherlock / Chicken Smoothie.
    
    ChibiPaint is Copyright (c) 2006-2008 Marc Schefer

    ChickenPaint is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    ChickenPaint is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with ChickenPaint. If not, see <http://www.gnu.org/licenses/>.
*/

"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports["default"] = CPBrushInfo;

function CPBrushInfo(properties) {
    // Set brush setting fields with default values, then apply the supplied 'properties' on top
    for (var propName in CPBrushInfo.DEFAULTS) {
        if (CPBrushInfo.DEFAULTS.hasOwnProperty(propName)) {
            this[propName] = CPBrushInfo.DEFAULTS[propName];
        }
    }

    for (var propName in properties) {
        if (properties.hasOwnProperty(propName)) {
            this[propName] = properties[propName];
        }
    }
}

// Stroke modes
CPBrushInfo.SM_FREEHAND = 0;
CPBrushInfo.SM_LINE = 1;
CPBrushInfo.SM_BEZIER = 2;

// Brush dab types
CPBrushInfo.B_ROUND_PIXEL = 0;
CPBrushInfo.B_ROUND_AA = 1;
CPBrushInfo.B_ROUND_AIRBRUSH = 2;
CPBrushInfo.B_SQUARE_PIXEL = 3;
CPBrushInfo.B_SQUARE_AA = 4;

// painting modes
CPBrushInfo.M_PAINT = 0;
CPBrushInfo.M_ERASE = 1;
CPBrushInfo.M_DODGE = 2;
CPBrushInfo.M_BURN = 3;
CPBrushInfo.M_WATER = 4;
CPBrushInfo.M_BLUR = 5;
CPBrushInfo.M_SMUDGE = 6;
CPBrushInfo.M_OIL = 7;

CPBrushInfo.DEFAULTS = {
    isAA: false, isAirbrush: false,
    minSpacing: 0, spacing: 0,

    pressureSize: true,
    pressureAlpha: false,
    pressureScattering: false,

    type: 0, paintMode: 0,
    strokeMode: CPBrushInfo.SM_FREEHAND,
    resat: 1.0, bleed: 0.0,

    texture: 1.0,

    // "cur" values are current brush settings (once tablet pressure and stuff is applied)
    size: 0, curSize: 0,
    alpha: 0, curAlpha: 0,
    scattering: 0.0, curScattering: 0,
    squeeze: 0.0, curSqueeze: 0,
    angle: Math.PI, curAngle: 0,

    smoothing: 0.0
};

CPBrushInfo.prototype.applyPressure = function (pressure) {
    // FIXME: no variable size for smudge and oil :(
    if (this.pressureSize && this.paintMode != CPBrushInfo.M_SMUDGE && this.paintMode != CPBrushInfo.M_OIL) {
        this.curSize = Math.max(0.1, this.size * pressure);
    } else {
        this.curSize = Math.max(0.1, this.size);
    }

    // FIXME: what is the point of doing that?
    if (this.curSize > 16) {
        this.curSize = Math.floor(this.curSize);
    }

    this.curAlpha = this.pressureAlpha ? Math.floor(this.alpha * Math.min(pressure, 1.0)) : this.alpha;
    this.curSqueeze = this.squeeze;
    this.curAngle = this.angle;
    this.curScattering = this.scattering * this.curSize * (this.pressureScattering ? pressure : 1.0);
};

CPBrushInfo.prototype.clone = function () {
    return new CPBrushInfo(this);
};
module.exports = exports["default"];

},{}],6:[function(require,module,exports){
/*
    ChickenPaint
    
    ChickenPaint is a translation of ChibiPaint from Java to JavaScript
    by Nicholas Sherlock / Chicken Smoothie.
    
    ChibiPaint is Copyright (c) 2006-2008 Marc Schefer

    ChickenPaint is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    ChickenPaint is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with ChickenPaint. If not, see <http://www.gnu.org/licenses/>.
*/

"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports["default"] = CPBrushManager;

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

var _CPBrushInfo = require("./CPBrushInfo");

var _CPBrushInfo2 = _interopRequireDefault(_CPBrushInfo);

function CPBrushManager() {
    var MAX_SQUEEZE = 10,
        BRUSH_MAX_DIM = 201,
        BRUSH_AA_MAX_DIM = 202;

    /*CPBrushDab {
        // the brush
        Uint8Array brush;
        int width, height;
        
        // and where and how to apply it
        int x, y, alpha;
    }*/

    var brush = new Uint8Array(BRUSH_MAX_DIM * BRUSH_MAX_DIM),
        brushAA = new Uint8Array(BRUSH_AA_MAX_DIM * BRUSH_AA_MAX_DIM),
        cacheBrush = null,
        cacheSize,
        cacheSqueeze,
        cacheAngle,
        cacheType,
        that = this;

    /**
     * Shift a brush by a positive sub-pixel amount (dx, dy) [0..1), and return the new brush. 
     * 
     * The resulting brush array is 1 pixel larger than the original one in both dimensions.
     */
    function getBrushWithAA(brushInfo, dx, dy) {
        var nonAABrush = getBrush(brushInfo),
            intSize = Math.ceil(brushInfo.curSize),
            intSizeAA = Math.ceil(brushInfo.curSize) + 1;

        for (var x = 0; x < intSizeAA * intSizeAA; x++) {
            brushAA[x] = 0;
        }

        var invdx_invdy = (1 - dx) * (1 - dy),
            dx_invdy = dx * (1 - dy),
            dx_dy = dx * dy,
            invdx_dy = (1 - dx) * dy,
            srcIndex = 0,
            dstIndex = 0;

        for (var y = 0; y < intSize; y++) {
            for (var x = 0; x < intSize; x++) {
                var brushAlpha = nonAABrush[srcIndex];

                /* 
                 * Use a weighted sum to shift the source pixels's position by a sub-pixel amount dx, dy and accumulate
                 * it into the final brushAA array.
                 */
                brushAA[dstIndex] += ~ ~(brushAlpha * invdx_invdy);
                brushAA[dstIndex + 1] += ~ ~(brushAlpha * dx_invdy);
                brushAA[dstIndex + 1 + intSizeAA] += ~ ~(brushAlpha * dx_dy);
                brushAA[dstIndex + intSizeAA] += ~ ~(brushAlpha * invdx_dy);

                srcIndex++;
                dstIndex++;
            }
            dstIndex += intSizeAA - intSize;
        }

        return brushAA;
    }

    function buildBrush(brush, brushInfo) {
        var intSize = Math.ceil(brushInfo.curSize),
            center = intSize / 2.0,
            sqrRadius = brushInfo.curSize / 2 * (brushInfo.curSize / 2),
            xFactor = 1.0 + brushInfo.curSqueeze * MAX_SQUEEZE,
            cosA = Math.cos(brushInfo.curAngle),
            sinA = Math.sin(brushInfo.curAngle),
            offset = 0;

        for (var j = 0; j < intSize; j++) {
            for (var i = 0; i < intSize; i++) {
                var x = i + 0.5 - center,
                    y = j + 0.5 - center,
                    dx = (x * cosA - y * sinA) * xFactor,
                    dy = y * cosA + x * sinA,
                    sqrDist = dx * dx + dy * dy;

                if (sqrDist <= sqrRadius) {
                    brush[offset++] = 0xFF;
                } else {
                    brush[offset++] = 0;
                }
            }
        }

        return brush;
    }

    function buildBrushAA(brush, brushInfo) {
        var intSize = Math.ceil(brushInfo.curSize),
            center = intSize / 2.0,
            sqrRadius = brushInfo.curSize / 2 * (brushInfo.curSize / 2),
            sqrRadiusInner = (brushInfo.curSize - 2) / 2 * ((brushInfo.curSize - 2) / 2),
            sqrRadiusOuter = (brushInfo.curSize + 2) / 2 * ((brushInfo.curSize + 2) / 2),
            xFactor = 1.0 + brushInfo.curSqueeze * MAX_SQUEEZE,
            cosA = Math.cos(brushInfo.curAngle),
            sinA = Math.sin(brushInfo.curAngle),
            offset = 0;

        for (var j = 0; j < intSize; j++) {
            for (var i = 0; i < intSize; i++) {
                var x = i + 0.5 - center,
                    y = j + 0.5 - center,
                    dx = (x * cosA - y * sinA) * xFactor,
                    dy = y * cosA + x * sinA,
                    sqrDist = dx * dx + dy * dy;

                if (sqrDist <= sqrRadiusInner) {
                    brush[offset++] = 0xFF;
                } else if (sqrDist > sqrRadiusOuter) {
                    brush[offset++] = 0;
                } else {
                    var count = 0;

                    for (var oy = 0; oy < 4; oy++) {
                        for (var ox = 0; ox < 4; ox++) {
                            x = i + ox * (1.0 / 4.0) - center;
                            y = j + oy * (1.0 / 4.0) - center;
                            dx = (x * cosA - y * sinA) * xFactor;
                            dy = y * cosA + x * sinA;

                            sqrDist = dx * dx + dy * dy;
                            if (sqrDist <= sqrRadius) {
                                count += 1;
                            }
                        }
                    }
                    brush[offset++] = Math.min(count * 16, 255);
                }
            }
        }

        return brush;
    }

    function buildBrushSquare(brush, brushInfo) {
        var intSize = Math.ceil(brushInfo.curSize),
            center = intSize / 2.0,
            size = brushInfo.curSize * Math.sin(Math.PI / 4),
            sizeX = size / 2 / (1.0 + brushInfo.curSqueeze * MAX_SQUEEZE),
            sizeY = size / 2,
            cosA = Math.cos(brushInfo.curAngle),
            sinA = Math.sin(brushInfo.curAngle),
            offset = 0;

        for (var j = 0; j < intSize; j++) {
            for (var i = 0; i < intSize; i++) {
                var x = i + 0.5 - center,
                    y = j + 0.5 - center,
                    dx = Math.abs(x * cosA - y * sinA),
                    dy = Math.abs(y * cosA + x * sinA);

                if (dx <= sizeX && dy <= sizeY) {
                    brush[offset++] = 0xFF;
                } else {
                    brush[offset++] = 0;
                }
            }
        }

        return brush;
    }

    function buildBrushSquareAA(brush, brushInfo) {
        var intSize = Math.ceil(brushInfo.curSize),
            center = intSize / 2.0,
            size = brushInfo.curSize * Math.sin(Math.PI / 4),
            sizeX = size / 2 / (1.0 + brushInfo.curSqueeze * MAX_SQUEEZE),
            sizeY = size / 2,
            sizeXInner = sizeX - 1,
            sizeYInner = sizeY - 1,
            sizeXOuter = sizeX + 1,
            sizeYOuter = sizeY + 1,
            cosA = Math.cos(brushInfo.curAngle),
            sinA = Math.sin(brushInfo.curAngle),
            offset = 0;

        for (var j = 0; j < intSize; j++) {
            for (var i = 0; i < intSize; i++) {
                var x = i + 0.5 - center,
                    y = j + 0.5 - center,
                    dx = Math.abs(x * cosA - y * sinA),
                    dy = Math.abs(y * cosA + x * sinA);

                if (dx <= sizeXInner && dy <= sizeYInner) {
                    brush[offset++] = 0xFF;
                } else if (dx > sizeXOuter || dy > sizeYOuter) {
                    brush[offset++] = 0;
                } else {
                    var count = 0;

                    for (var oy = 0; oy < 4; oy++) {
                        for (var ox = 0; ox < 4; ox++) {
                            x = i + ox * (1.0 / 4.0) - center;
                            y = j + oy * (1.0 / 4.0) - center;
                            dx = Math.abs(x * cosA - y * sinA);
                            dy = Math.abs(y * cosA + x * sinA);

                            if (dx <= sizeX && dy <= sizeY) {
                                count++;
                            }
                        }
                    }
                    brush[offset++] = Math.min(count * 16, 255);
                }
            }
        }

        return brush;
    }

    function buildBrushSoft(brush, brushInfo) {
        var intSize = Math.ceil(brushInfo.curSize),
            center = intSize / 2.0,
            sqrRadius = brushInfo.curSize / 2 * (brushInfo.curSize / 2),
            xFactor = 1.0 + brushInfo.curSqueeze * MAX_SQUEEZE,
            cosA = Math.cos(brushInfo.curAngle),
            sinA = Math.sin(brushInfo.curAngle),
            offset = 0;

        for (var j = 0; j < intSize; j++) {
            for (var i = 0; i < intSize; i++) {
                var x = i + 0.5 - center,
                    y = j + 0.5 - center,
                    dx = (x * cosA - y * sinA) * xFactor,
                    dy = y * cosA + x * sinA,
                    sqrDist = dx * dx + dy * dy;

                if (sqrDist <= sqrRadius) {
                    brush[offset++] = ~ ~(255 * (1 - sqrDist / sqrRadius));
                } else {
                    brush[offset++] = 0;
                }
            }
        }

        return brush;
    }

    /**
     * Build and return a brush that conforms to the given brush settings.
     * 
     * @returns a Uint8Array
     */
    function getBrush(brushInfo) {
        if (cacheBrush != null && brushInfo.curSize == cacheSize && brushInfo.curSqueeze == cacheSqueeze && brushInfo.curAngle == cacheAngle && brushInfo.type == cacheType) {
            return cacheBrush;
        }

        switch (brushInfo.type) {
            case _CPBrushInfo2["default"].B_ROUND_AIRBRUSH:
                brush = buildBrushSoft(brush, brushInfo);
                break;
            case _CPBrushInfo2["default"].B_ROUND_AA:
                brush = buildBrushAA(brush, brushInfo);
                break;
            case _CPBrushInfo2["default"].B_ROUND_PIXEL:
                brush = buildBrush(brush, brushInfo);
                break;
            case _CPBrushInfo2["default"].B_SQUARE_AA:
                brush = buildBrushSquareAA(brush, brushInfo);
                break;
            case _CPBrushInfo2["default"].B_SQUARE_PIXEL:
                brush = buildBrushSquare(brush, brushInfo);
                break;
        }

        cacheBrush = brush;
        cacheSize = brushInfo.curSize;
        cacheType = brushInfo.type;
        cacheSqueeze = brushInfo.curSqueeze;
        cacheAngle = brushInfo.curAngle;

        return brush;
    }

    function applyTexture(dab, textureAmount) {
        var amount = Math.floor(textureAmount * 255),
            texture = that.texture,
            textureX = dab.x % texture.width,
            textureY = dab.y % texture.height,
            brushPos = 0,
            texturePos,
            textureEOL;

        if (textureX < 0) {
            textureX += texture.width;
        }

        if (textureY < 0) {
            textureY += texture.height;
        }

        for (var y = 0; y < dab.height; y++) {
            texturePos = textureY * texture.width + textureX;
            textureEOL = textureY * texture.width + texture.width;

            for (var x = 0; x < dab.width; x++) {
                var brushValue = dab.brush[brushPos],
                    textureValue = texture.data[texturePos];

                dab.brush[brushPos] = ~ ~(brushValue * (textureValue * amount / 255 ^ 0xff) / 255);

                brushPos++;

                texturePos++;
                if (texturePos == textureEOL) {
                    // Wrap to left side of texture
                    texturePos -= texture.width;
                }
            }

            textureY++;
            if (textureY == texture.height) {
                textureY = 0;
            }
        }
    }

    /**
     * @param x float
     * @param y float
     * brushInfo - a CPBrushInfo object
     */
    this.getDab = function (x, y, brushInfo) {
        var dab = {
            alpha: brushInfo.curAlpha,
            width: Math.ceil(brushInfo.curSize),
            height: Math.ceil(brushInfo.curSize)
        };

        // FIXME: I don't like this special case for ROUND_PIXEL
        // it would be better to have brush presets for working with pixels
        var useAA = brushInfo.isAA && brushInfo.type != _CPBrushInfo2["default"].B_ROUND_PIXEL;

        if (useAA) {
            dab.width++;
            dab.height++;
        }

        var nx = x - dab.width / 2.0 + 0.5,
            ny = y - dab.height / 2.0 + 0.5;

        // this is necessary as Java uses convert towards zero float to int conversion
        if (nx < 0) {
            nx -= 1;
        }
        if (ny < 0) {
            ny -= 1;
        }

        if (useAA) {
            var dx = Math.abs(nx - ~ ~nx),
                dy = Math.abs(ny - ~ ~ny);

            dab.brush = getBrushWithAA(brushInfo, dx, dy);
        } else {
            dab.brush = getBrush(brushInfo);
        }

        dab.x = ~ ~nx;
        dab.y = ~ ~ny;

        if (brushInfo.texture > 0.0 && this.texture != null) {
            // we need a brush bitmap that can be modified everytime
            // the one in "brush" can be kept in cache so if we are using it, make a copy
            if (dab.brush == brush) {
                brushAA.set(brush);
                dab.brush = brushAA;
            }
            applyTexture(dab, brushInfo.texture);
        }

        return dab;
    };

    this.setTexture = function (texture) {
        this.texture = texture;
    };
}

module.exports = exports["default"];

},{"./CPBrushInfo":5}],7:[function(require,module,exports){
/*
    ChickenPaint

    ChickenPaint is a translation of ChibiPaint from Java to JavaScript
    by Nicholas Sherlock / Chicken Smoothie.

    ChibiPaint is Copyright (c) 2006-2008 Marc Schefer

    ChickenPaint is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    ChickenPaint is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with ChickenPaint. If not, see <http://www.gnu.org/licenses/>.
*/

"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports["default"] = CPChibiFile;

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

var _CPArtwork = require("./CPArtwork");

var _CPArtwork2 = _interopRequireDefault(_CPArtwork);

var _CPLayer = require("./CPLayer");

var _CPLayer2 = _interopRequireDefault(_CPLayer);

var _CPColorBmp = require("./CPColorBmp");

var _CPColorBmp2 = _interopRequireDefault(_CPColorBmp);

var _utilArrayDataStream = require("../util/ArrayDataStream");

var _utilArrayDataStream2 = _interopRequireDefault(_utilArrayDataStream);

function CPChibiFile() {

    function CPChibiHeader(stream, chunk) {
        this.version = stream.readU32BE();
        this.width = stream.readU32BE();
        this.height = stream.readU32BE();
        this.layersNb = stream.readU32BE();
    }

    CPChibiHeader.FIXED_HEADER_LENGTH = 4 * 4;

    function CPChibiChunkHeader(stream) {
        var chunkType = new Array(4);

        for (var i = 0; i < chunkType.length; i++) {
            chunkType[i] = String.fromCharCode(stream.readByte());
        }

        this.chunkType = chunkType.join("");
        this.chunkSize = stream.readU32BE();

        if (stream.eof) {
            throw "Truncated chunk";
        }
    }

    function CPChibiLayerChunkHeader() {
        var payloadOffset, titleLength;

        this.readFixedHeader = function (stream) {
            payloadOffset = stream.readU32BE();

            this.blendMode = stream.readU32BE();
            this.alpha = stream.readU32BE();
            this.visible = (stream.readU32BE() & 1) != 0;

            titleLength = stream.readU32BE();
        };

        /* 
         * After reading the fixed header, use this function to find out how many more bytes of header
         * need to be read.
         */
        this.getVariableHeaderLen = function () {
            return payloadOffset - CPChibiLayerChunkHeader.FIXED_HEADER_LENGTH;
        };

        this.getTotalHeaderLen = function () {
            return CPChibiLayerChunkHeader.FIXED_HEADER_LENGTH + this.getVariableHeaderLen();
        };

        this.readVariableHeader = function (stream) {
            this.name = stream.readString(titleLength);

            // Skip to the pixel data (allows additional header fields to be added that we don't yet support)
            stream.skip(payloadOffset - titleLength - CPChibiLayerChunkHeader.FIXED_HEADER_LENGTH);
        };
    }

    // The size of the initial, fixed-length portion of the header
    CPChibiLayerChunkHeader.FIXED_HEADER_LENGTH = 4 * 5;

    var CHI_MAGIC = "CHIBIOEK",
        CHUNK_TAG_HEAD = "HEAD",
        CHUNK_TAG_LAYER = "LAYR",
        CHUNK_TAG_END = "ZEND",
        BYTES_PER_PIXEL = _CPColorBmp2["default"].BYTES_PER_PIXEL,
        ALPHA_BYTE_OFFSET = _CPColorBmp2["default"].ALPHA_BYTE_OFFSET,
        RED_BYTE_OFFSET = _CPColorBmp2["default"].RED_BYTE_OFFSET,
        GREEN_BYTE_OFFSET = _CPColorBmp2["default"].GREEN_BYTE_OFFSET,
        BLUE_BYTE_OFFSET = _CPColorBmp2["default"].BLUE_BYTE_OFFSET;

    function serializeEndChunk() {
        var buffer = new Uint8Array(CHUNK_TAG_END.length + 4),
            stream = new _utilArrayDataStream2["default"](buffer);

        stream.writeString(CHUNK_TAG_END);
        stream.writeU32BE(0);

        return stream.getAsDataArray();
    }

    function serializeHeaderChunk(artwork) {
        var buffer = new Uint8Array(CHUNK_TAG_HEAD.length + 4 * 5),
            stream = new _utilArrayDataStream2["default"](buffer);

        stream.writeString(CHUNK_TAG_HEAD);
        stream.writeU32BE(16); // ChunkSize

        stream.writeU32BE(0); // Current Version: Major: 0 Minor: 0
        stream.writeU32BE(artwork.width);
        stream.writeU32BE(artwork.height);
        stream.writeU32BE(artwork.getLayerCount());

        return stream.getAsDataArray();
    }

    function serializeLayerChunk(layer) {
        var chunkSize = 20 + layer.name.length + layer.data.length,
            buffer = new Uint8Array(CHUNK_TAG_LAYER.length + 4 + chunkSize),
            stream = new _utilArrayDataStream2["default"](buffer),
            pos;

        stream.writeString(CHUNK_TAG_LAYER); // Chunk ID
        stream.writeU32BE(chunkSize); // ChunkSize

        stream.writeU32BE(20 + layer.name.length); // Offset to layer data from start of header

        stream.writeU32BE(layer.blendMode);
        stream.writeU32BE(layer.alpha);
        stream.writeU32BE(layer.visible ? 1 : 0); // layer visibility and future flags

        stream.writeU32BE(layer.name.length);
        stream.writeString(layer.name);

        // Convert layer bytes from RGBA to ARGB order to match the Chibi specs
        pos = stream.pos;
        for (var i = 0; i < layer.data.length; i += BYTES_PER_PIXEL) {
            buffer[pos++] = layer.data[i + ALPHA_BYTE_OFFSET];
            buffer[pos++] = layer.data[i + RED_BYTE_OFFSET];
            buffer[pos++] = layer.data[i + GREEN_BYTE_OFFSET];
            buffer[pos++] = layer.data[i + BLUE_BYTE_OFFSET];
        }

        return buffer;
    }

    /**
     * Serialize the given artwork to Chibifile format. Returns a promise which resolves to the serialized Blob.
     */
    this.serialize = function (artwork) {
        return new Promise(function (resolve, reject) {
            var deflator = new window.pako.Deflate({
                level: 7
            }),
                blobParts = [],
                magic = new Uint8Array(CHI_MAGIC.length);

            // The magic file signature is not ZLIB compressed:
            for (var i = 0; i < CHI_MAGIC.length; i++) {
                magic[i] = CHI_MAGIC.charCodeAt(i);
            }
            blobParts.push(magic);

            // The rest gets compressed
            deflator.push(serializeHeaderChunk(artwork), false);

            var layers = artwork.getLayers(),
                i = 0;

            // Insert a settimeout between each serialized layer, so we can maintain browser responsiveness

            function serializeLayer() {
                if (i == layers.length) {
                    deflator.push(serializeEndChunk(artwork), true);

                    blobParts.push(deflator.result);

                    resolve(new Blob(blobParts, { type: "application/octet-stream" }));
                } else {
                    deflator.push(serializeLayerChunk(layers[i++]), false);

                    setTimeout(serializeLayer, 10);
                }
            }

            setTimeout(serializeLayer, 10);
        });
    };

    function hasChibiMagicMarker(array) {
        for (var i = 0; i < CHI_MAGIC.length; i++) {
            if (array[i] != CHI_MAGIC.charCodeAt(i)) {
                return false;
            }
        }

        return true;
    }

    /**
     * Concat two Uint8Arrays to make a new one and return it.
     * 
     * Either one may be set to null. If either one is null, the other is returned. If both are null, null is
     * returned.
     */
    function concatBuffers(one, two) {
        if (one == null || one.length == 0) {
            return two;
        }
        if (two == null || two.length == 0) {
            return one;
        }

        var result = new Uint8Array(one.length + two.length);

        result.set(one, 0);
        result.set(two, one.length);

        return result;
    }

    /**
     * Attempt to load a chibifile from the given arraybuffer.
     *
     * @returns A CPArtwork on success, or null on failure.
     */
    this.read = function (arrayBuffer) {
        var STATE_WAIT_FOR_CHUNK = 0,
            STATE_DECODE_IMAGE_HEADER = 1,
            STATE_DECODE_LAYER_HEADER_FIXED = 2,
            STATE_DECODE_LAYER_HEADER_VARIABLE = 3,
            STATE_DECODE_LAYER = 4,
            STATE_SKIP_TRAILING_CHUNK_BYTES = 5,
            STATE_SUCCESS = 6,
            STATE_FATAL = 10;

        var pako = new window.pako.Inflate({}),
            state = STATE_WAIT_FOR_CHUNK,
            artwork = null,
            layerHeader,
            layer,
            layerBytesRead,
            layerBytesTotal,
            skipCount,
            headerChunk = null,
            header = null,
            chunk = null,
            buffer = null;

        /**
         * Decode A,R,G,B pixels from the given buffer into the R,G,B,A pixel array given by layerPix.
         * 
         * The layerBytesRead and layerBytesTotal variables are used to keep track of the decode process and to 
         * limit the number of bytes read, respectively.
         * 
         * Returns the buffer with the read bytes removed from the front, or null if the buffer was read in its entirety.
         */
        function decodePixels(buffer, layerPix) {
            var subpixel = layerBytesRead % BYTES_PER_PIXEL,
                dstPixelStartOffset = layerBytesRead - subpixel,
                bufferPos = 0,

            // Map from source channel order to CPLayer's dest order
            channelMap = [ALPHA_BYTE_OFFSET, RED_BYTE_OFFSET, GREEN_BYTE_OFFSET, BLUE_BYTE_OFFSET];

            // The first pixel might be a partial one since we might be continuing a pixel split over buffers
            for (; subpixel < BYTES_PER_PIXEL && bufferPos < buffer.length; subpixel++) {
                layerPix[dstPixelStartOffset + channelMap[subpixel]] = buffer[bufferPos];
                layerBytesRead++;
                bufferPos++;
            }

            // How many more pixels are we to read in this buffer?
            var bytesRemain = Math.min(buffer.length - bufferPos, layerBytesTotal - layerBytesRead) | 0,
                fullPixelsRemain = bytesRemain / BYTES_PER_PIXEL | 0,
                subpixelsRemain = bytesRemain % BYTES_PER_PIXEL;

            for (var i = 0; i < fullPixelsRemain; i++) {
                layerPix[layerBytesRead + ALPHA_BYTE_OFFSET] = buffer[bufferPos];
                layerPix[layerBytesRead + RED_BYTE_OFFSET] = buffer[bufferPos + 1];
                layerPix[layerBytesRead + GREEN_BYTE_OFFSET] = buffer[bufferPos + 2];
                layerPix[layerBytesRead + BLUE_BYTE_OFFSET] = buffer[bufferPos + 3];
                layerBytesRead += BYTES_PER_PIXEL;
                bufferPos += BYTES_PER_PIXEL;
            }

            // Read a fractional pixel at the end of the buffer
            dstPixelStartOffset = layerBytesRead;
            for (subpixel = 0; subpixel < subpixelsRemain; subpixel++) {
                layerPix[dstPixelStartOffset + channelMap[subpixel]] = buffer[bufferPos];
                layerBytesRead++;
                bufferPos++;
            }

            if (bufferPos < buffer.length) {
                // Layer was completed before the end of the buffer, there is buffer left over for someone else to use
                return buffer.subarray(bufferPos);
            } else {
                // Buffer exhausted
                return null;
            }
        }

        function processBlock(block) {
            var stream;

            // Add a loop here so we can re-enter the switch with 'continue'
            while (true) {
                switch (state) {
                    case STATE_WAIT_FOR_CHUNK:
                        buffer = concatBuffers(buffer, block);
                        block = null;

                        // Wait for whole chunk header to become available
                        if (buffer.length < 8) {
                            break;
                        }

                        // Decode chunk header
                        stream = new _utilArrayDataStream2["default"](buffer);
                        chunk = new CPChibiChunkHeader(stream);

                        // Remove the chunk header from the start of the buffer
                        buffer = buffer.subarray(stream.pos);

                        if (headerChunk) {
                            if (chunk.chunkType == CHUNK_TAG_END) {
                                state = STATE_SUCCESS;
                                break;
                            } else if (chunk.chunkType == CHUNK_TAG_LAYER) {
                                state = STATE_DECODE_LAYER_HEADER_FIXED;
                            } else {
                                console.log("Unknown chunk type '" + chunk.chunkType + "', attempting to skip...");

                                block = buffer;
                                buffer = null;

                                skipCount = chunk.chunkSize;
                                state = STATE_SKIP_TRAILING_CHUNK_BYTES;
                            }
                        } else if (chunk.chunkType == CHUNK_TAG_HEAD) {
                            headerChunk = chunk;

                            // Try to decode the header
                            state = STATE_DECODE_IMAGE_HEADER;
                            continue;
                        } else {
                            // File didn't start with image header chunk
                            state = STATE_FATAL;
                        }
                        break;
                    case STATE_DECODE_IMAGE_HEADER:
                        buffer = concatBuffers(buffer, block);
                        block = null;

                        // Wait for whole chunk to be available
                        if (buffer.length < headerChunk.chunkSize) {
                            break;
                        }

                        stream = new _utilArrayDataStream2["default"](buffer);
                        header = new CPChibiHeader(stream, headerChunk);

                        if (header.version >>> 16 > 0) {
                            state = STATE_FATAL; // the file version is higher than what we can deal with, bail out
                            break;
                        }

                        artwork = new _CPArtwork2["default"](header.width, header.height);

                        block = buffer;
                        buffer = null;

                        skipCount = headerChunk.chunkSize; // Skip the header chunk along with any trailing bytes
                        state = STATE_SKIP_TRAILING_CHUNK_BYTES;
                        continue;
                        break;
                    case STATE_DECODE_LAYER_HEADER_FIXED:
                        buffer = concatBuffers(buffer, block);
                        block = null;

                        // Wait for first part of header to arrive
                        if (buffer.length < CPChibiLayerChunkHeader.FIXED_HEADER_LENGTH) {
                            break;
                        }

                        layerHeader = new CPChibiLayerChunkHeader();

                        stream = new _utilArrayDataStream2["default"](buffer);
                        layerHeader.readFixedHeader(stream);

                        buffer = buffer.subarray(stream.pos);

                        state = STATE_DECODE_LAYER_HEADER_VARIABLE;
                        continue;
                        break;
                    case STATE_DECODE_LAYER_HEADER_VARIABLE:
                        buffer = concatBuffers(buffer, block);
                        block = null;

                        // Wait for variable part of header to arrive
                        if (buffer.length < layerHeader.getVariableHeaderLen()) {
                            break;
                        }

                        stream = new _utilArrayDataStream2["default"](buffer);
                        layerHeader.readVariableHeader(stream);

                        buffer = buffer.subarray(stream.pos);

                        layer = new _CPLayer2["default"](header.width, header.height, layerHeader.name);
                        layer.blendMode = layerHeader.blendMode;
                        layer.alpha = layerHeader.alpha;
                        layer.visible = layerHeader.visible;

                        layerBytesRead = 0;
                        layerBytesTotal = header.width * header.height * BYTES_PER_PIXEL;

                        /* 
                         * While decoding layers, we won't keep a persistent buffer around, so if we have any
                         * bytes left over, provide them to the next state as if they were a newly inflated block.
                         */
                        block = buffer;
                        buffer = null;

                        state = STATE_DECODE_LAYER;
                        continue;
                        break;
                    case STATE_DECODE_LAYER:
                        /* 
                         * When decoding layer data, we never concat blocks together, we are capable of decoding
                         * partial pixels that get split over block boundaries. So we don't use 'buffer' to accumulate
                         * data, and only read from incoming 'block's.
                         */
                        if (block != null) {
                            block = decodePixels(block, layer.data);

                            if (layerBytesRead >= layerBytesTotal) {
                                artwork.addLayerObject(layer);

                                // Skip any trailing bytes in the layer chunk
                                skipCount = chunk.chunkSize - layerHeader.getTotalHeaderLen() - layerBytesTotal;
                                state = STATE_SKIP_TRAILING_CHUNK_BYTES;
                                continue;
                            }
                        }
                        break;
                    case STATE_SKIP_TRAILING_CHUNK_BYTES:
                        if (block) {
                            if (skipCount < block.length) {
                                block = block.subarray(skipCount);
                                skipCount = 0;
                            } else {
                                skipCount -= block.length;
                                block = null;
                            }
                        }

                        if (skipCount == 0) {
                            state = STATE_WAIT_FOR_CHUNK;
                            continue;
                        }
                        break;
                }

                break;
            }
        }

        arrayBuffer = new Uint8Array(arrayBuffer);

        if (!hasChibiMagicMarker(arrayBuffer)) {
            return null; // not a ChibiPaint file
        }

        // Remove the magic header
        arrayBuffer = arrayBuffer.subarray(CHI_MAGIC.length);

        pako.onData = processBlock;

        pako.onEnd = function (status) {
            if (status === 0 && state == STATE_SUCCESS) {
                artwork.setActiveLayerIndex(artwork.getTopmostVisibleLayer());

                this.result = artwork;
            } else {
                console.log("Fatal error decoding ChibiFile");

                this.result = null;
            }
        };

        // Begin decompression/decoding
        pako.push(arrayBuffer);

        return pako.result;
    };
}

module.exports = exports["default"];

},{"../util/ArrayDataStream":44,"./CPArtwork":2,"./CPColorBmp":9,"./CPLayer":11}],8:[function(require,module,exports){
/*
    ChickenPaint

    ChickenPaint is a translation of ChibiPaint from Java to JavaScript
    by Nicholas Sherlock / Chicken Smoothie.

    ChibiPaint is Copyright (c) 2006-2008 Marc Schefer

    ChickenPaint is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    ChickenPaint is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with ChickenPaint. If not, see <http://www.gnu.org/licenses/>.
*/

"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports["default"] = CPClip;

function CPClip(bmp, x, y) {
    this.bmp = bmp;

    this.x = x;
    this.y = y;
}

;
module.exports = exports["default"];

},{}],9:[function(require,module,exports){
/*
    ChickenPaint
    
    ChickenPaint is a translation of ChibiPaint from Java to JavaScript
    by Nicholas Sherlock / Chicken Smoothie.
    
    ChibiPaint is Copyright (c) 2006-2008 Marc Schefer

    ChickenPaint is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    ChickenPaint is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with ChickenPaint. If not, see <http://www.gnu.org/licenses/>.
*/

"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports["default"] = CPColorBmp;

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

var _CPBitmap = require("./CPBitmap");

var _CPBitmap2 = _interopRequireDefault(_CPBitmap);

var _utilCPRect = require("../util/CPRect");

var _utilCPRect2 = _interopRequireDefault(_utilCPRect);

function createImageData(width, height) {
    // return new ImageData(this.width, this.height); // Doesn't work on old IE
    var canvas = document.createElement("canvas"),
        context = canvas.getContext("2d");

    return context.createImageData(width, height);
}

//
// A 32bpp bitmap class (one byte per channel in RGBA order)
//

function CPColorBmp(width, height) {
    _CPBitmap2["default"].call(this, width, height);

    // The ImageData object that holds the image data
    this.imageData = createImageData(this.width, this.height);

    // The bitmap data array (one byte per channel in RGBA order)
    this.data = this.imageData.data;
}

CPColorBmp.prototype = Object.create(_CPBitmap2["default"].prototype);
CPColorBmp.prototype.constructor = CPColorBmp;

CPColorBmp.BYTES_PER_PIXEL = 4;
CPColorBmp.RED_BYTE_OFFSET = 0;
CPColorBmp.GREEN_BYTE_OFFSET = 1;
CPColorBmp.BLUE_BYTE_OFFSET = 2;
CPColorBmp.ALPHA_BYTE_OFFSET = 3;

// Creates a CPBitmap from a portion of this bitmap
CPColorBmp.prototype.cloneRect = function (rect) {
    var result = new CPColorBmp(rect.getWidth(), rect.getHeight());

    result.copyBitmapRect(this, 0, 0, rect);

    return result;
};

//
// Pixel access with friendly clipping. Pixel will be 32-bit integer in ARGB format
//
CPColorBmp.prototype.getPixel = function (x, y) {
    x = Math.max(0, Math.min(this.width - 1, x));
    y = Math.max(0, Math.min(this.height - 1, y));

    var pixIndex = this.offsetOfPixel(x, y);

    return this.data[pixIndex + CPColorBmp.ALPHA_BYTE_OFFSET] << 24 | this.data[pixIndex + CPColorBmp.RED_BYTE_OFFSET] << 16 | this.data[pixIndex + CPColorBmp.GREEN_BYTE_OFFSET] << 8 | this.data[pixIndex + CPColorBmp.BLUE_BYTE_OFFSET];
};

//
// Get an r,g,b,a array of the xor of this bitmap and the given one, within the given rectangle
//
CPColorBmp.prototype.copyRectXOR = function (bmp, rect) {
    rect = this.getBounds().clip(rect);

    var w = rect.getWidth(),
        h = rect.getHeight(),
        buffer = new Uint8Array(w * h * CPColorBmp.BYTES_PER_PIXEL),
        outputIndex = 0,
        bmp1Index = this.offsetOfPixel(rect.left, rect.top),
        bmp2Index = bmp.offsetOfPixel(rect.left, rect.top),
        bmp1YSkip = (this.width - w) * CPColorBmp.BYTES_PER_PIXEL,
        bmp2YSkip = (bmp.width - w) * CPColorBmp.BYTES_PER_PIXEL,
        widthBytes = w * CPColorBmp.BYTES_PER_PIXEL;

    for (var y = rect.top; y < rect.bottom; y++, bmp1Index += bmp1YSkip, bmp2Index += bmp2YSkip) {
        for (var x = 0; x < widthBytes; x++, outputIndex++, bmp1Index++, bmp2Index++) {
            buffer[outputIndex] = this.data[bmp1Index] ^ bmp.data[bmp2Index];
        }
    }

    return buffer;
};

CPColorBmp.prototype.setRectXOR = function (buffer, rect) {
    rect = this.getBounds().clip(rect);

    var w = rect.getWidth(),
        h = rect.getHeight(),
        bmp1Index = this.offsetOfPixel(rect.left, rect.top),
        bufferIndex = 0,
        bmp1YSkip = (this.width - w) * CPColorBmp.BYTES_PER_PIXEL,
        widthBytes = w * CPColorBmp.BYTES_PER_PIXEL;

    for (var y = 0; y < h; y++) {
        for (var x = 0; x < widthBytes; x++) {
            this.data[bmp1Index++] ^= buffer[bufferIndex++];
        }
        bmp1Index += bmp1YSkip;
    }
};

//
// Copy another bitmap into this one using alpha blending
//
CPColorBmp.prototype.pasteAlphaRect = function (bmp, srcRect, x, y) {
    var srcRectCpy = srcRect.clone(),
        dstRect = new _utilCPRect2["default"](x, y, 0, 0);

    this.getBounds().clipSourceDest(srcRectCpy, dstRect);

    var srcYStride = (bmp.width - dstRect.getWidth()) * CPColorBmp.BYTES_PER_PIXEL,
        dstYStride = (this.width - dstRect.getWidth()) * CPColorBmp.BYTES_PER_PIXEL,
        srcOffset = bmp.offsetOfPixel(srcRectCpy.left, srcRectCpy.top),
        dstOffset = this.offsetOfPixel(dstRect.left, dstRect.top);

    for (var y = dstRect.top; y < dstRect.bottom; y++, srcOffset += srcYStride, dstOffset += dstYStride) {
        for (var x = dstRect.left; x < dstRect.right; x++) {
            var alpha1 = bmp.data[srcOffset + CPColorBmp.ALPHA_BYTE_OFFSET];

            if (alpha1 <= 0) {
                dstOffset += CPColorBmp.BYTES_PER_PIXEL;
                srcOffset += CPColorBmp.BYTES_PER_PIXEL;
                continue;
            }

            if (alpha1 == 255) {
                for (var i = 0; i < CPColorBmp.BYTES_PER_PIXEL; i++) {
                    this.data[dstOffset++] = bmp.data[srcOffset++];
                }
                continue;
            }

            var alpha2 = this.data[dstOffset + CPColorBmp.ALPHA_BYTE_OFFSET],
                newAlpha = alpha1 + alpha2 - alpha1 * alpha2 / 255 | 0;

            if (newAlpha > 0) {
                var realAlpha = alpha1 * 255 / newAlpha | 0,
                    invAlpha = 255 - realAlpha;

                for (var i = 0; i < 3; i++, dstOffset++, srcOffset++) {
                    this.data[dstOffset] = bmp.data[srcOffset] + (this.data[dstOffset] * invAlpha - bmp.data[srcOffset] * invAlpha) / 255 | 0;
                }
                this.data[dstOffset++] = newAlpha;
                srcOffset++;
            } else {
                dstOffset += CPColorBmp.BYTES_PER_PIXEL;
                srcOffset += CPColorBmp.BYTES_PER_PIXEL;
            }
        }
    }
};

/** 
 * Copy the rectangle at srcRect from bmp onto this image at (dstX, dstY).
 */
CPColorBmp.prototype.copyBitmapRect = function (bmp, dstX, dstY, srcRect) {
    var srcRect = srcRect.clone(),
        dstRect = new _utilCPRect2["default"](dstX, dstY, 0, 0);

    this.getBounds().clipSourceDest(srcRect, dstRect);

    var w = dstRect.getWidth() | 0,
        h = dstRect.getHeight() | 0;

    // Are we just trying to duplicate the bitmap?
    if (dstRect.left == 0 && dstRect.top == 0 && w == this.width && h == this.height && w == bmp.width && h == bmp.height) {
        this.copyDataFrom(bmp);
    } else {
        var dstIndex = this.offsetOfPixel(dstRect.left, dstRect.top),
            srcIndex = bmp.offsetOfPixel(srcRect.left, srcRect.top),
            dstYSkip = (this.width - w) * CPColorBmp.BYTES_PER_PIXEL,
            srcYSkip = (bmp.width - w) * CPColorBmp.BYTES_PER_PIXEL;

        for (var y = 0; y < h; y++) {
            for (var x = 0; x < w; x++) {
                this.data[dstIndex] = bmp.data[srcIndex];
                this.data[dstIndex + 1] = bmp.data[srcIndex + 1];
                this.data[dstIndex + 2] = bmp.data[srcIndex + 2];
                this.data[dstIndex + 3] = bmp.data[srcIndex + 3];
                dstIndex += 4;
                srcIndex += 4;
            }
            srcIndex += srcYSkip;
            dstIndex += dstYSkip;
        }
    }
};

//
// Copies the Alpha channel from another bitmap. Assumes both bitmaps are the same width.
//
CPColorBmp.prototype.copyAlphaFrom = function (bmp, rect) {
    rect = this.getBounds().clip(rect);

    var w = rect.getWidth(),
        h = rect.getHeight(),
        pixIndex = this.offsetOfPixel(rect.left, rect.top) + CPColorBmp.ALPHA_BYTE_OFFSET,
        /* Apply offset here so we don't have to do it per-pixel*/
    ySkip = (this.width - w) * CPColorBmp.BYTES_PER_PIXEL;

    for (var y = 0; y < h; y++) {
        for (var x = 0; x < w; x++) {
            this.data[pixIndex] = bmp.data[pixIndex];
            pixIndex += CPColorBmp.BYTES_PER_PIXEL;
        }
        pixIndex += ySkip;
    }
};

CPColorBmp.prototype.copyDataFrom = function (bmp) {
    if (bmp.width != this.width || bmp.height != this.height) {
        this.width = bmp.width;
        this.height = bmp.height;

        this.imageData = createImageData(this.width, this.height);
        this.data = this.imageData.data;
    }

    if ("set" in this.data) {
        this.data.set(bmp.data);
    } else {
        // IE doesn't use Uint8ClampedArray for ImageData, so set() isn't available
        for (var i = 0; i < this.data.length; i++) {
            this.data[i] = bmp.data[i];
        }
    }
};

/**
 * Flood fill the given color starting from the given point
 * @param x int
 * @param y int
 * @param color int
 */
CPColorBmp.prototype.floodFill = function (x, y, color) {
    if (!this.isInside(x, y)) {
        return;
    }

    var oldColor = this.getPixel(x, y),
        oldAlpha = oldColor >> 24 & 0xFF,
        oldRed = oldColor >> 16 & 0xFF,
        oldGreen = oldColor >> 8 & 0xFF,
        oldBlue = oldColor & 0xFF,
        colorAlpha = color >> 24 & 0xFF,
        colorRed = color >> 16 & 0xFF,
        colorGreen = color >> 8 & 0xFF,
        colorBlue = color & 0xFF,
        stack = [],
        clip = this.getBounds(),
        data = this.data;

    // Change the left and right bounds from pixel indexes into byte indexes for easy clipping
    clip.left *= CPColorBmp.BYTES_PER_PIXEL;
    clip.right *= CPColorBmp.BYTES_PER_PIXEL;

    stack.push({ x1: x * CPColorBmp.BYTES_PER_PIXEL, x2: x * CPColorBmp.BYTES_PER_PIXEL, y: y, dy: -1 });
    stack.push({ x1: x * CPColorBmp.BYTES_PER_PIXEL, x2: x * CPColorBmp.BYTES_PER_PIXEL, y: y + 1, dy: 1 });

    /* 
     * If we are filling 100% transparent areas then we need to ignore the residual color information
     * (it would also be possible to clear it when erasing, but then the performance impact would be on the eraser 
     * rather than on this low importance flood fill)
     */
    if (oldAlpha == 0) {
        if (colorAlpha == 0) {
            return;
        }

        while (stack.length > 0) {
            var line = stack.pop();

            if (line.y < clip.top || line.y >= clip.bottom) {
                continue;
            }

            var lineOffset = this.offsetOfPixel(0, line.y),
                left = line.x1,
                next;

            while (left >= clip.left && data[left + lineOffset + CPColorBmp.ALPHA_BYTE_OFFSET] == 0) {
                data[left + lineOffset + CPColorBmp.RED_BYTE_OFFSET] = colorRed;
                data[left + lineOffset + CPColorBmp.GREEN_BYTE_OFFSET] = colorGreen;
                data[left + lineOffset + CPColorBmp.BLUE_BYTE_OFFSET] = colorBlue;
                data[left + lineOffset + CPColorBmp.ALPHA_BYTE_OFFSET] = colorAlpha;

                left -= CPColorBmp.BYTES_PER_PIXEL;
            }

            if (left >= line.x1) {
                while (left <= line.x2 && data[left + lineOffset + CPColorBmp.ALPHA_BYTE_OFFSET] != oldAlpha) {
                    left += CPColorBmp.BYTES_PER_PIXEL;
                }
                next = left + CPColorBmp.BYTES_PER_PIXEL;
                if (left > line.x2) {
                    continue;
                }
            } else {
                left += CPColorBmp.BYTES_PER_PIXEL;
                if (left < line.x1) {
                    stack.push({ x1: left, x2: line.x1 - CPColorBmp.BYTES_PER_PIXEL, y: line.y - line.dy, dy: -line.dy });
                }
                next = line.x1 + CPColorBmp.BYTES_PER_PIXEL;
            }

            do {
                data[left + lineOffset + CPColorBmp.RED_BYTE_OFFSET] = colorRed;
                data[left + lineOffset + CPColorBmp.GREEN_BYTE_OFFSET] = colorGreen;
                data[left + lineOffset + CPColorBmp.BLUE_BYTE_OFFSET] = colorBlue;
                data[left + lineOffset + CPColorBmp.ALPHA_BYTE_OFFSET] = colorAlpha;

                while (next < clip.right && data[next + lineOffset + CPColorBmp.ALPHA_BYTE_OFFSET] == oldAlpha) {
                    data[next + lineOffset + CPColorBmp.RED_BYTE_OFFSET] = colorRed;
                    data[next + lineOffset + CPColorBmp.GREEN_BYTE_OFFSET] = colorGreen;
                    data[next + lineOffset + CPColorBmp.BLUE_BYTE_OFFSET] = colorBlue;
                    data[next + lineOffset + CPColorBmp.ALPHA_BYTE_OFFSET] = colorAlpha;

                    next += CPColorBmp.BYTES_PER_PIXEL;
                }
                stack.push({ x1: left, x2: next - CPColorBmp.BYTES_PER_PIXEL, y: line.y + line.dy, dy: line.dy });

                if (next - CPColorBmp.BYTES_PER_PIXEL > line.x2) {
                    stack.push({ x1: line.x2 + CPColorBmp.BYTES_PER_PIXEL, x2: next - CPColorBmp.BYTES_PER_PIXEL, y: line.y - line.dy, dy: -line.dy });
                }

                left = next + CPColorBmp.BYTES_PER_PIXEL;
                while (left <= line.x2 && data[left + lineOffset + CPColorBmp.ALPHA_BYTE_OFFSET] != oldAlpha) {
                    left += CPColorBmp.BYTES_PER_PIXEL;
                }

                next = left + CPColorBmp.BYTES_PER_PIXEL;
            } while (left <= line.x2);
        }
    } else {
        if (color == oldColor) {
            return;
        }

        while (stack.length > 0) {
            var line = stack.pop();

            if (line.y < clip.top || line.y >= clip.bottom) {
                continue;
            }

            var lineOffset = this.offsetOfPixel(0, line.y),
                left = line.x1,
                next;

            while (left >= clip.left && data[left + lineOffset + CPColorBmp.RED_BYTE_OFFSET] == oldRed && data[left + lineOffset + CPColorBmp.GREEN_BYTE_OFFSET] == oldGreen && data[left + lineOffset + CPColorBmp.BLUE_BYTE_OFFSET] == oldBlue && data[left + lineOffset + CPColorBmp.ALPHA_BYTE_OFFSET] == oldAlpha) {
                data[left + lineOffset + CPColorBmp.RED_BYTE_OFFSET] = colorRed;
                data[left + lineOffset + CPColorBmp.GREEN_BYTE_OFFSET] = colorGreen;
                data[left + lineOffset + CPColorBmp.BLUE_BYTE_OFFSET] = colorBlue;
                data[left + lineOffset + CPColorBmp.ALPHA_BYTE_OFFSET] = colorAlpha;

                left -= CPColorBmp.BYTES_PER_PIXEL;
            }

            if (left >= line.x1) {
                while (left <= line.x2 && !(data[left + lineOffset + CPColorBmp.RED_BYTE_OFFSET] == oldRed && data[left + lineOffset + CPColorBmp.GREEN_BYTE_OFFSET] == oldGreen && data[left + lineOffset + CPColorBmp.BLUE_BYTE_OFFSET] == oldBlue && data[left + lineOffset + CPColorBmp.ALPHA_BYTE_OFFSET] == oldAlpha)) {
                    left += CPColorBmp.BYTES_PER_PIXEL;
                }
                next = left + CPColorBmp.BYTES_PER_PIXEL;
                if (left > line.x2) {
                    continue;
                }
            } else {
                left += CPColorBmp.BYTES_PER_PIXEL;
                if (left < line.x1) {
                    stack.push({ x1: left, x2: line.x1 - CPColorBmp.BYTES_PER_PIXEL, y: line.y - line.dy, dy: -line.dy });
                }
                next = line.x1 + CPColorBmp.BYTES_PER_PIXEL;
            }

            do {
                data[left + lineOffset + CPColorBmp.RED_BYTE_OFFSET] = colorRed;
                data[left + lineOffset + CPColorBmp.GREEN_BYTE_OFFSET] = colorGreen;
                data[left + lineOffset + CPColorBmp.BLUE_BYTE_OFFSET] = colorBlue;
                data[left + lineOffset + CPColorBmp.ALPHA_BYTE_OFFSET] = colorAlpha;

                while (next < clip.right && data[next + lineOffset + CPColorBmp.RED_BYTE_OFFSET] == oldRed && data[next + lineOffset + CPColorBmp.GREEN_BYTE_OFFSET] == oldGreen && data[next + lineOffset + CPColorBmp.BLUE_BYTE_OFFSET] == oldBlue && data[next + lineOffset + CPColorBmp.ALPHA_BYTE_OFFSET] == oldAlpha) {
                    data[next + lineOffset + CPColorBmp.RED_BYTE_OFFSET] = colorRed;
                    data[next + lineOffset + CPColorBmp.GREEN_BYTE_OFFSET] = colorGreen;
                    data[next + lineOffset + CPColorBmp.BLUE_BYTE_OFFSET] = colorBlue;
                    data[next + lineOffset + CPColorBmp.ALPHA_BYTE_OFFSET] = colorAlpha;

                    next += CPColorBmp.BYTES_PER_PIXEL;
                }
                stack.push({ x1: left, x2: next - CPColorBmp.BYTES_PER_PIXEL, y: line.y + line.dy, dy: line.dy });

                if (next - CPColorBmp.BYTES_PER_PIXEL > line.x2) {
                    stack.push({ x1: line.x2 + CPColorBmp.BYTES_PER_PIXEL, x2: next - CPColorBmp.BYTES_PER_PIXEL, y: line.y - line.dy, dy: -line.dy });
                }

                left = next + CPColorBmp.BYTES_PER_PIXEL;
                while (left <= line.x2 && !(data[left + lineOffset + CPColorBmp.RED_BYTE_OFFSET] == oldRed && data[left + lineOffset + CPColorBmp.GREEN_BYTE_OFFSET] == oldGreen && data[left + lineOffset + CPColorBmp.BLUE_BYTE_OFFSET] == oldBlue && data[left + lineOffset + CPColorBmp.ALPHA_BYTE_OFFSET] == oldAlpha)) {
                    left += CPColorBmp.BYTES_PER_PIXEL;
                }

                next = left + CPColorBmp.BYTES_PER_PIXEL;
            } while (left <= line.x2);
        }
    }
};

/**
 * Premultiply the RGB channels in the given R,G,B,A channel buffer with the alpha channel.
 * 
 * @param buffer R,G,B,A channel array
 * @param len Number of pixels in buffer to modify
 */
function multiplyAlpha(buffer, len) {
    var pixIndex = 0;

    for (var i = 0; i < len; i++) {
        var alpha = buffer[pixIndex + CPColorBmp.ALPHA_BYTE_OFFSET];

        // Multiply the RGB channels by alpha
        for (var j = 0; j < 3; j++, pixIndex++) {
            buffer[pixIndex] = Math.round(buffer[pixIndex] * alpha / 255);
        }
        pixIndex++; // Don't modify alpha channel
    }
}

/**
 * Inverse of multiplyAlpha()
 */
function separateAlpha(buffer, len) {
    var pixIndex = 0;

    for (var i = 0; i < len; i++) {
        var alpha = buffer[pixIndex + CPColorBmp.ALPHA_BYTE_OFFSET];

        if (alpha != 0) {
            var invAlpha = 255 / alpha;

            for (var j = 0; j < 3; j++, pixIndex++) {
                buffer[pixIndex] = Math.min(Math.round(buffer[pixIndex] * invAlpha), 255);
            }
            // Don't modify alpha channel
            pixIndex++;
        } else {
            pixIndex += CPColorBmp.BYTES_PER_PIXEL;
        }
    }
}

function boxBlurLine(src, dst, len, radius) {
    var totalPixels = 0,
        totalChannels = [0, 0, 0, 0],
        pixIndex,
        dstIndex;

    pixIndex = 0;
    for (var i = 0; i < radius && i < len; i++) {
        for (var j = 0; j < CPColorBmp.BYTES_PER_PIXEL; j++) {
            totalChannels[j] += src[pixIndex++];
        }
        totalPixels++;
    }

    dstIndex = 0;
    for (var i = 0; i < len; i++) {
        // New pixel joins the window at the right
        if (i + radius < len) {
            pixIndex = (i + radius) * CPColorBmp.BYTES_PER_PIXEL;

            for (var j = 0; j < CPColorBmp.BYTES_PER_PIXEL; j++) {
                totalChannels[j] += src[pixIndex++];
            }
            totalPixels++;
        }

        for (var j = 0; j < CPColorBmp.BYTES_PER_PIXEL; j++) {
            dst[dstIndex++] = Math.round(totalChannels[j] / totalPixels);
        }

        // Old pixel leaves the window at the left
        if (i - radius >= 0) {
            pixIndex = (i - radius) * CPColorBmp.BYTES_PER_PIXEL;

            for (var j = 0; j < CPColorBmp.BYTES_PER_PIXEL; j++) {
                totalChannels[j] -= src[pixIndex++];
            }
            totalPixels--;
        }
    }
}

/**
 * Copy a column of pixels in the bitmap to the given R,G,B,A buffer.
 * 
 * @param x X-coordinate of column
 * @param y Y-coordinate of top of column to copy
 * @param len Number of pixels to copy
 * @param buffer R,G,B,A array
 */
CPColorBmp.prototype.copyPixelColumnToArray = function (x, y, len, buffer) {
    var yJump = (this.width - 1) * CPColorBmp.BYTES_PER_PIXEL,
        dstOffset = 0,
        srcOffset = this.offsetOfPixel(x, y);

    for (var i = 0; i < len; i++) {
        for (var j = 0; j < CPColorBmp.BYTES_PER_PIXEL; j++) {
            buffer[dstOffset++] = this.data[srcOffset++];
        }

        srcOffset += yJump;
    }
};

/**
 * Copy the pixels from the given R,G,B,A buffer to a column of pixels in the bitmap.
 * 
 * @param x X-coordinate of column
 * @param y Y-coordinate of top of column to copy
 * @param len Number of pixels to copy
 * @param buffer R,G,B,A array to copy from
 */
CPColorBmp.prototype.copyArrayToPixelColumn = function (x, y, len, buffer) {
    var yJump = (this.width - 1) * CPColorBmp.BYTES_PER_PIXEL,
        srcOffset = 0,
        dstOffset = this.offsetOfPixel(x, y);

    for (var i = 0; i < len; i++) {
        for (var j = 0; j < CPColorBmp.BYTES_PER_PIXEL; j++) {
            this.data[dstOffset++] = buffer[srcOffset++];
        }

        dstOffset += yJump;
    }
};

CPColorBmp.prototype.boxBlur = function (rect, radiusX, radiusY) {
    rect = this.getBounds().clip(rect);

    var rectWidth = rect.getWidth(),
        rectWidthBytes = rectWidth * CPColorBmp.BYTES_PER_PIXEL,
        rectHeight = rect.getHeight(),
        rectLength = Math.max(rectWidth, rectHeight),
        src = new Uint8Array(rectLength * CPColorBmp.BYTES_PER_PIXEL),
        dst = new Uint8Array(rectLength * CPColorBmp.BYTES_PER_PIXEL);

    for (var y = rect.top; y < rect.bottom; y++) {
        var pixOffset = this.offsetOfPixel(rect.left, y);

        for (var x = 0; x < rectWidthBytes; x++) {
            src[x] = this.data[pixOffset++];
        }

        multiplyAlpha(src, rectWidth);
        boxBlurLine(src, dst, rectWidth, radiusX);

        pixOffset = this.offsetOfPixel(rect.left, y);

        for (var x = 0; x < rectWidthBytes; x++) {
            this.data[pixOffset++] = dst[x];
        }
    }

    for (var x = rect.left; x < rect.right; x++) {
        this.copyPixelColumnToArray(x, rect.top, rectHeight, src);

        boxBlurLine(src, dst, rectHeight, radiusY);
        separateAlpha(dst, rectHeight);

        this.copyArrayToPixelColumn(x, rect.top, rectHeight, dst);
    }
};

CPColorBmp.prototype.offsetOfPixel = function (x, y) {
    return (y * this.width + x) * CPColorBmp.BYTES_PER_PIXEL | 0;
};

CPColorBmp.prototype.getMemorySize = function () {
    return this.data.length;
};

// Load from a loaded HTML Image object
CPColorBmp.prototype.loadFromImage = function (image) {
    var imageCanvas = document.createElement("canvas"),
        imageContext = imageCanvas.getContext("2d");

    imageCanvas.width = image.width;
    imageCanvas.height = image.height;

    imageContext.globalCompositeOperation = "copy";
    imageContext.drawImage(image, 0, 0);

    this.imageData = imageContext.getImageData(0, 0, this.width, this.height);
    this.data = this.imageData.data;
};
module.exports = exports["default"];

},{"../util/CPRect":49,"./CPBitmap":3}],10:[function(require,module,exports){
/*
    ChickenPaint
    
    ChickenPaint is a translation of ChibiPaint from Java to JavaScript
    by Nicholas Sherlock / Chicken Smoothie.
    
    ChibiPaint is Copyright (c) 2006-2008 Marc Schefer

    ChickenPaint is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    ChickenPaint is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with ChickenPaint. If not, see <http://www.gnu.org/licenses/>.
*/

"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports["default"] = CPGreyBmp;

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

var _CPBitmap = require("./CPBitmap");

var _CPBitmap2 = _interopRequireDefault(_CPBitmap);

function CPGreyBmp(width, height, bitDepth) {

    _CPBitmap2["default"].call(this, width, height);

    this.bitDepth = bitDepth;

    switch (bitDepth) {
        case 32:
            this.data = new Uint32Array(width * height);
            break;
        case 16:
            this.data = new Uint16Array(width * height);
            break;
        case 8:
        default:
            this.data = new Uint8Array(width * height);
    }

    this.clone = function () {
        var result = new CPGreyBmp(this.width, this.height, this.bitDepth);

        result.data.set(this.data);

        return result;
    };

    this.clearAll = function (value) {
        for (var i = 0; i < this.data.length; i++) {
            this.data[i] = value;
        }
    };

    this.clearRect = function (rect, value) {
        var rect = this.getBounds().clip(rect),
            yStride = this.width - rect.getWidth(),
            pixIndex = this.offsetOfPixel(rect.left, rect.top);

        for (var y = rect.top; y < rect.bottom; y++, pixIndex += yStride) {
            for (var x = rect.left; x < rect.right; x++, pixIndex++) {
                this.data[pixIndex] = value;
            }
        }
    };

    this.mirrorHorizontally = function () {
        var newData = new Uint8Array(width * height);

        for (var y = 0; y < height; y++) {
            for (var x = 0; x < width; x++) {
                newData[y * width + x] = this.data[y * width + width - x - 1];
            }
        }

        this.data = newData;
    };

    this.applyLUT = function (lut) {
        for (var i = 0; i < this.data.length; i++) {
            this.data[i] = lut.table[this.data[i]];
        }
    };

    this.toCanvas = function () {
        var imageData = this.toImageData(),
            canvas = document.createElement("canvas"),
            context = canvas.getContext("2d");

        canvas.width = this.width;
        canvas.height = this.height;

        context.putImageData(imageData, 0, 0);

        return canvas;
    };

    this.toImageData = function () {
        var canvas = document.createElement("canvas"),
            context = canvas.getContext("2d"),
            imageData = context.createImageData(this.width, this.height),
            srcIndex = 0,
            dstIndex = 0;

        for (var y = 0; y < this.height; y++) {
            for (var x = 0; x < this.width; x++) {
                imageData.data[dstIndex++] = this.data[srcIndex];
                imageData.data[dstIndex++] = this.data[srcIndex];
                imageData.data[dstIndex++] = this.data[srcIndex];
                imageData.data[dstIndex++] = 0xFF;
                srcIndex++;
            }
        }

        return imageData;
    };
}

CPGreyBmp.prototype.offsetOfPixel = function (x, y) {
    return y * this.width + x;
};
module.exports = exports["default"];

},{"./CPBitmap":3}],11:[function(require,module,exports){
/*
    ChickenPaint
    
    ChickenPaint is a translation of ChibiPaint from Java to JavaScript
    by Nicholas Sherlock / Chicken Smoothie.
    
    ChibiPaint is Copyright (c) 2006-2008 Marc Schefer

    ChickenPaint is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    ChickenPaint is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with ChickenPaint. If not, see <http://www.gnu.org/licenses/>.
*/

'use strict';

Object.defineProperty(exports, '__esModule', {
    value: true
});
exports['default'] = CPLayer;

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }

var _CPColorBmp = require('./CPColorBmp');

var _CPColorBmp2 = _interopRequireDefault(_CPColorBmp);

var _CPBlend = require('./CPBlend');

var _CPBlend2 = _interopRequireDefault(_CPBlend);

/**
 * Note layer is not cleared to any specific values upon initial creation, use clearAll().
 */

function CPLayer(width, height, name) {
    // Super-constructor
    _CPColorBmp2['default'].call(this, width, height);

    this.name = name || "";

    this.alpha = 100;
    this.visible = true;
    this.blendMode = CPLayer.LM_NORMAL;
}

CPLayer.prototype = Object.create(_CPColorBmp2['default'].prototype);
CPLayer.prototype.constructor = CPLayer;

var BYTES_PER_PIXEL = 4,
    RED_BYTE_OFFSET = 0,
    GREEN_BYTE_OFFSET = 1,
    BLUE_BYTE_OFFSET = 2,
    ALPHA_BYTE_OFFSET = 3,
    blend = new _CPBlend2['default']();

CPLayer.prototype.fusionWith = function (fusion, rect) {
    if (this.alpha <= 0) {
        return;
    }

    rect = this.getBounds().clip(rect);

    switch (this.blendMode) {
        case CPLayer.LM_NORMAL:
            if (this.alpha >= 100) {
                blend.fusionWithNormalNoAlpha(this, fusion, rect);
            } else {
                blend.fusionWithNormal(this, fusion, rect);
            }
            break;

        case CPLayer.LM_MULTIPLY:
            blend.fusionWithMultiply(this, fusion, rect);
            break;

        case CPLayer.LM_ADD:
            blend.fusionWithAdd(this, fusion, rect);
            break;

        case CPLayer.LM_SCREEN:
            blend.fusionWithScreen(this, fusion, rect);
            break;

        case CPLayer.LM_LIGHTEN:
            blend.fusionWithLighten(this, fusion, rect);
            break;

        case CPLayer.LM_DARKEN:
            blend.fusionWithDarken(this, fusion, rect);
            break;

        case CPLayer.LM_SUBTRACT:
            blend.fusionWithSubtract(this, fusion, rect);
            break;

        case CPLayer.LM_DODGE:
            blend.fusionWithDodge(this, fusion, rect);
            break;

        case CPLayer.LM_BURN:
            blend.fusionWithBurn(this, fusion, rect);
            break;

        case CPLayer.LM_OVERLAY:
            blend.fusionWithOverlay(this, fusion, rect);
            break;

        case CPLayer.LM_HARDLIGHT:
            blend.fusionWithHardLightFullAlpha(this, fusion, rect);
            break;

        case CPLayer.LM_SOFTLIGHT:
            blend.fusionWithSoftLightFullAlpha(this, fusion, rect);
            break;

        case CPLayer.LM_VIVIDLIGHT:
            blend.fusionWithVividLightFullAlpha(this, fusion, rect);
            break;

        case CPLayer.LM_LINEARLIGHT:
            blend.fusionWithLinearLightFullAlpha(this, fusion, rect);
            break;

        case CPLayer.LM_PINLIGHT:
            blend.fusionWithPinLightFullAlpha(this, fusion, rect);
            break;
    }
};

CPLayer.prototype.fusionWithFullAlpha = function (fusion, rect) {
    if (this.alpha <= 0) {
        return;
    }

    rect = this.getBounds().clip(rect);

    switch (this.blendMode) {
        case CPLayer.LM_NORMAL:
            blend.fusionWithNormalFullAlpha(this, fusion, rect);
            break;

        case CPLayer.LM_MULTIPLY:
            blend.fusionWithMultiplyFullAlpha(this, fusion, rect);
            break;

        case CPLayer.LM_ADD:
            blend.fusionWithAddFullAlpha(this, fusion, rect);
            break;

        case CPLayer.LM_SCREEN:
            blend.fusionWithScreenFullAlpha(this, fusion, rect);
            break;

        case CPLayer.LM_LIGHTEN:
            blend.fusionWithLightenFullAlpha(this, fusion, rect);
            break;

        case CPLayer.LM_DARKEN:
            blend.fusionWithDarkenFullAlpha(this, fusion, rect);
            break;

        case CPLayer.LM_SUBTRACT:
            blend.fusionWithSubtractFullAlpha(this, fusion, rect);
            break;

        case CPLayer.LM_DODGE:
            blend.fusionWithDodgeFullAlpha(this, fusion, rect);
            break;

        case CPLayer.LM_BURN:
            blend.fusionWithBurnFullAlpha(this, fusion, rect);
            break;

        case CPLayer.LM_OVERLAY:
            blend.fusionWithOverlayFullAlpha(this, fusion, rect);
            break;

        case CPLayer.LM_HARDLIGHT:
            blend.fusionWithHardLightFullAlpha(this, fusion, rect);
            break;

        case CPLayer.LM_SOFTLIGHT:
            blend.fusionWithSoftLightFullAlpha(this, fusion, rect);
            break;

        case CPLayer.LM_VIVIDLIGHT:
            blend.fusionWithVividLightFullAlpha(this, fusion, rect);
            break;

        case CPLayer.LM_LINEARLIGHT:
            blend.fusionWithLinearLightFullAlpha(this, fusion, rect);
            break;

        case CPLayer.LM_PINLIGHT:
            blend.fusionWithPinLightFullAlpha(this, fusion, rect);
            break;
    }
};

CPLayer.prototype.clearAll = function (color) {
    var a = color >> 24 & 0xFF,
        r = color >> 16 & 0xFF,
        g = color >> 8 & 0xFF,
        b = color & 0xFF;

    for (var i = 0; i < this.width * this.height * BYTES_PER_PIXEL;) {
        this.data[i++] = r;
        this.data[i++] = g;
        this.data[i++] = b;
        this.data[i++] = a;
    }
};

CPLayer.prototype.clearRect = function (rect, color) {
    var a = color >> 24 & 0xFF,
        r = color >> 16 & 0xFF,
        g = color >> 8 & 0xFF,
        b = color & 0xFF;

    var rect = this.getBounds().clip(rect),
        yStride = (this.width - rect.getWidth()) * BYTES_PER_PIXEL,
        pixIndex = this.offsetOfPixel(rect.left, rect.top);

    for (var y = rect.top; y < rect.bottom; y++, pixIndex += yStride) {
        for (var x = rect.left; x < rect.right; x++) {
            this.data[pixIndex++] = r;
            this.data[pixIndex++] = g;
            this.data[pixIndex++] = b;
            this.data[pixIndex++] = a;
        }
    }
};

/**
 * @param rect CPRect
 * @param source CPLayer
 */
CPLayer.prototype.copyRegionHFlip = function (rect, source) {
    rect = this.getBounds().clip(rect);

    for (var y = rect.top; y < rect.bottom; y++) {
        var dstOffset = this.offsetOfPixel(rect.left, y),
            srcOffset = source.offsetOfPixel(rect.right - 1, y);

        for (var x = rect.left; x < rect.right; x++, srcOffset -= _CPColorBmp2['default'].BYTES_PER_PIXEL * 2) {
            for (var i = 0; i < _CPColorBmp2['default'].BYTES_PER_PIXEL; i++) {
                this.data[dstOffset++] = source.data[srcOffset++];
            }
        }
    }
};

/**
 * @param rect CPRect
 * @param source CPLayer
 */
CPLayer.prototype.copyRegionVFlip = function (rect, source) {
    rect = this.getBounds().clip(rect);

    var widthBytes = rect.getWidth() * _CPColorBmp2['default'].BYTES_PER_PIXEL;

    for (var y = rect.top; y < rect.bottom; y++) {
        var dstOffset = this.offsetOfPixel(rect.left, y),
            srcOffset = source.offsetOfPixel(rect.left, rect.bottom - 1 - (y - rect.top));

        for (var x = 0; x < widthBytes; x++) {
            this.data[dstOffset++] = source.data[srcOffset++];
        }
    }
};

/**
 * @param r CPRect
 */
CPLayer.prototype.fillWithNoise = function (rect) {
    rect = this.getBounds().clip(rect);

    var value,
        yStride = (this.width - rect.getWidth()) * _CPColorBmp2['default'].BYTES_PER_PIXEL,
        pixIndex = this.offsetOfPixel(rect.left, rect.top);

    for (var y = rect.top; y < rect.bottom; y++, pixIndex += yStride) {
        for (var x = rect.left; x < rect.right; x++, pixIndex += _CPColorBmp2['default'].BYTES_PER_PIXEL) {
            value = Math.random() * 0x100 | 0;

            this.data[pixIndex + _CPColorBmp2['default'].RED_BYTE_OFFSET] = value;
            this.data[pixIndex + _CPColorBmp2['default'].GREEN_BYTE_OFFSET] = value;
            this.data[pixIndex + _CPColorBmp2['default'].BLUE_BYTE_OFFSET] = value;
            this.data[pixIndex + _CPColorBmp2['default'].ALPHA_BYTE_OFFSET] = 0xFF;
        }
    }
};

/**
 * Replace the pixels in the given rect with the given horizontal gradient.
 *
 * @param rect CPRect
 * @param fromX int
 * @param toX int
 * @param gradientPoints int[]
 */
CPLayer.prototype.gradientHorzReplace = function (rect, fromX, toX, gradientPoints) {
    var fromColor = {
        r: gradientPoints[0] >> 16 & 0xFF,
        g: gradientPoints[0] >> 8 & 0xFF,
        b: gradientPoints[0] & 0xFF,
        a: gradientPoints[0] >> 24 & 0xFF
    },
        toColor = {
        r: gradientPoints[1] >> 16 & 0xFF,
        g: gradientPoints[1] >> 8 & 0xFF,
        b: gradientPoints[1] & 0xFF,
        a: gradientPoints[1] >> 24 & 0xFF
    },
        yStride = (this.width - rect.getWidth()) * _CPColorBmp2['default'].BYTES_PER_PIXEL,
        pixIndex = this.offsetOfPixel(rect.left, rect.top) | 0,
        h = rect.bottom - rect.top | 0;

    if (toX < fromX) {
        var temp = toX;
        toX = fromX;
        fromX = temp;

        temp = fromColor;
        fromColor = toColor;
        toColor = temp;
    }

    var gradientRange = toX - fromX | 0,
        rStep = (toColor.r - fromColor.r) / gradientRange,
        gStep = (toColor.g - fromColor.g) / gradientRange,
        bStep = (toColor.b - fromColor.b) / gradientRange,
        aStep = (toColor.a - fromColor.a) / gradientRange,
        jump = Math.max(rect.left - fromX, 0);

    for (var y = 0; y < h; y++, pixIndex += yStride) {
        // The solid color section before the gradient
        var x = rect.left;

        for (var xEnd = Math.min(fromX, rect.right) | 0; x < xEnd; x++, pixIndex += _CPColorBmp2['default'].BYTES_PER_PIXEL) {
            this.data[pixIndex + _CPColorBmp2['default'].RED_BYTE_OFFSET] = fromColor.r;
            this.data[pixIndex + _CPColorBmp2['default'].GREEN_BYTE_OFFSET] = fromColor.g;
            this.data[pixIndex + _CPColorBmp2['default'].BLUE_BYTE_OFFSET] = fromColor.b;
            this.data[pixIndex + _CPColorBmp2['default'].ALPHA_BYTE_OFFSET] = fromColor.a;
        }

        // In the gradient
        var r = fromColor.r + rStep * jump,
            g = fromColor.g + gStep * jump,
            b = fromColor.b + bStep * jump,
            a = fromColor.a + aStep * jump;

        for (xEnd = Math.min(toX, rect.right) | 0; x < xEnd; x++, pixIndex += _CPColorBmp2['default'].BYTES_PER_PIXEL) {
            this.data[pixIndex + _CPColorBmp2['default'].RED_BYTE_OFFSET] = r;
            this.data[pixIndex + _CPColorBmp2['default'].GREEN_BYTE_OFFSET] = g;
            this.data[pixIndex + _CPColorBmp2['default'].BLUE_BYTE_OFFSET] = b;
            this.data[pixIndex + _CPColorBmp2['default'].ALPHA_BYTE_OFFSET] = a;

            r += rStep;
            g += gStep;
            b += bStep;
            a += aStep;
        }

        // The section after the end of the gradient
        for (; x < rect.right; x++, pixIndex += _CPColorBmp2['default'].BYTES_PER_PIXEL) {
            this.data[pixIndex + _CPColorBmp2['default'].RED_BYTE_OFFSET] = toColor.r;
            this.data[pixIndex + _CPColorBmp2['default'].GREEN_BYTE_OFFSET] = toColor.g;
            this.data[pixIndex + _CPColorBmp2['default'].BLUE_BYTE_OFFSET] = toColor.b;
            this.data[pixIndex + _CPColorBmp2['default'].ALPHA_BYTE_OFFSET] = toColor.a;
        }
    }
};

/**
 * Replace the pixels in the given rect with the given vertical gradient.
 *
 * @param rect CPRect
 * @param fromY int
 * @param toY int
 * @param gradientPoints int[]
 */
CPLayer.prototype.gradientVertReplace = function (rect, fromY, toY, gradientPoints) {
    var fromColor = {
        r: gradientPoints[0] >> 16 & 0xFF,
        g: gradientPoints[0] >> 8 & 0xFF,
        b: gradientPoints[0] & 0xFF,
        a: gradientPoints[0] >> 24 & 0xFF
    },
        toColor = {
        r: gradientPoints[1] >> 16 & 0xFF,
        g: gradientPoints[1] >> 8 & 0xFF,
        b: gradientPoints[1] & 0xFF,
        a: gradientPoints[1] >> 24 & 0xFF
    },
        yStride = (this.width - rect.getWidth()) * _CPColorBmp2['default'].BYTES_PER_PIXEL,
        pixIndex = this.offsetOfPixel(rect.left, rect.top) | 0,
        w = rect.right - rect.left | 0;

    if (toY < fromY) {
        var temp = toY;
        toY = fromY;
        fromY = temp;

        temp = fromColor;
        fromColor = toColor;
        toColor = temp;
    }

    var y = rect.top;

    // The solid color section before the start of the gradient
    for (var yEnd = Math.min(rect.bottom, fromY) | 0; y < yEnd; y++, pixIndex += yStride) {
        for (var x = 0; x < w; x++, pixIndex += _CPColorBmp2['default'].BYTES_PER_PIXEL) {
            this.data[pixIndex + _CPColorBmp2['default'].RED_BYTE_OFFSET] = fromColor.r;
            this.data[pixIndex + _CPColorBmp2['default'].GREEN_BYTE_OFFSET] = fromColor.g;
            this.data[pixIndex + _CPColorBmp2['default'].BLUE_BYTE_OFFSET] = fromColor.b;
            this.data[pixIndex + _CPColorBmp2['default'].ALPHA_BYTE_OFFSET] = fromColor.a;
        }
    }

    // Inside the gradient
    var gradientRange = toY - fromY | 0,
        rStep = (toColor.r - fromColor.r) / gradientRange,
        gStep = (toColor.g - fromColor.g) / gradientRange,
        bStep = (toColor.b - fromColor.b) / gradientRange,
        aStep = (toColor.a - fromColor.a) / gradientRange,
        jump = Math.max(y - fromY, 0),
        r = fromColor.r + rStep * jump,
        g = fromColor.g + gStep * jump,
        b = fromColor.b + bStep * jump,
        a = fromColor.a + aStep * jump;

    for (var yEnd = Math.min(rect.bottom, toY) | 0; y < yEnd; y++, pixIndex += yStride) {
        for (var x = 0; x < w; x++, pixIndex += _CPColorBmp2['default'].BYTES_PER_PIXEL) {
            this.data[pixIndex + _CPColorBmp2['default'].RED_BYTE_OFFSET] = r;
            this.data[pixIndex + _CPColorBmp2['default'].GREEN_BYTE_OFFSET] = g;
            this.data[pixIndex + _CPColorBmp2['default'].BLUE_BYTE_OFFSET] = b;
            this.data[pixIndex + _CPColorBmp2['default'].ALPHA_BYTE_OFFSET] = a;
        }

        r += rStep;
        g += gStep;
        b += bStep;
        a += aStep;
    }

    // The section after the end of the gradient
    for (; y < rect.bottom; y++, pixIndex += yStride) {
        for (var x = 0; x < w; x++, pixIndex += _CPColorBmp2['default'].BYTES_PER_PIXEL) {
            this.data[pixIndex + _CPColorBmp2['default'].RED_BYTE_OFFSET] = toColor.r;
            this.data[pixIndex + _CPColorBmp2['default'].GREEN_BYTE_OFFSET] = toColor.g;
            this.data[pixIndex + _CPColorBmp2['default'].BLUE_BYTE_OFFSET] = toColor.b;
            this.data[pixIndex + _CPColorBmp2['default'].ALPHA_BYTE_OFFSET] = toColor.a;
        }
    }
};

/**
 * Replace the pixels in the given rect with the given gradient.
 *
 * @param rect CPRect
 * @param fromX int
 * @param fromY int
 * @param toX int
 * @param toY int
 * @param gradientPoints int[]
 */
CPLayer.prototype.gradientReplace = function (rect, fromX, fromY, toX, toY, gradientPoints) {
    var yStride = (this.width - rect.getWidth()) * _CPColorBmp2['default'].BYTES_PER_PIXEL,
        pixIndex = this.offsetOfPixel(rect.left, rect.top) | 0,
        w = rect.right - rect.left | 0,
        fromColor = {
        r: gradientPoints[0] >> 16 & 0xFF,
        g: gradientPoints[0] >> 8 & 0xFF,
        b: gradientPoints[0] & 0xFF,
        a: gradientPoints[0] >> 24 & 0xFF
    },
        toColor = {
        r: gradientPoints[1] >> 16 & 0xFF,
        g: gradientPoints[1] >> 8 & 0xFF,
        b: gradientPoints[1] & 0xFF,
        a: gradientPoints[1] >> 24 & 0xFF
    },

    // How many pixels vertically does the gradient sequence complete over (+infinity for horizontal gradients!)
    vertRange = toY - fromY + (toX - fromX) * (toX - fromX) / (toY - fromY),

    // Same for horizontal
    horzRange = toX - fromX + (toY - fromY) * (toY - fromY) / (toX - fromX),
        horzStep = 1 / horzRange;

    for (var y = rect.top; y < rect.bottom; y++, pixIndex += yStride) {
        var
        // The position the row starts at in the gradient [0.0 ... 1.0)
        prop = (rect.left - fromX) / horzRange + (y - fromY) / vertRange;

        for (var x = 0; x < w; x++, pixIndex += _CPColorBmp2['default'].BYTES_PER_PIXEL) {
            var propClamped = Math.min(Math.max(prop, 0.0), 1.0),
                invPropClamped = 1 - propClamped;

            this.data[pixIndex + _CPColorBmp2['default'].RED_BYTE_OFFSET] = fromColor.r * invPropClamped + toColor.r * propClamped;
            this.data[pixIndex + _CPColorBmp2['default'].GREEN_BYTE_OFFSET] = fromColor.g * invPropClamped + toColor.g * propClamped;
            this.data[pixIndex + _CPColorBmp2['default'].BLUE_BYTE_OFFSET] = fromColor.b * invPropClamped + toColor.b * propClamped;
            this.data[pixIndex + _CPColorBmp2['default'].ALPHA_BYTE_OFFSET] = fromColor.a * invPropClamped + toColor.a * propClamped;

            prop += horzStep;
        }
    }
};

/**
 * Alpha blend the given gradient onto the pixels in the given rect.
 *
 * @param rect CPRect
 * @param fromX int
 * @param fromY int
 * @param toX int
 * @param toY int
 * @param gradientPoints int[]
 */
CPLayer.prototype.gradientAlpha = function (rect, fromX, fromY, toX, toY, gradientPoints) {
    var yStride = (this.width - rect.getWidth()) * _CPColorBmp2['default'].BYTES_PER_PIXEL,
        pixIndex = this.offsetOfPixel(rect.left, rect.top) | 0,
        w = rect.right - rect.left | 0,
        fromColor = {
        r: gradientPoints[0] >> 16 & 0xFF,
        g: gradientPoints[0] >> 8 & 0xFF,
        b: gradientPoints[0] & 0xFF,
        a: gradientPoints[0] >> 24 & 0xFF
    },
        toColor = {
        r: gradientPoints[1] >> 16 & 0xFF,
        g: gradientPoints[1] >> 8 & 0xFF,
        b: gradientPoints[1] & 0xFF,
        a: gradientPoints[1] >> 24 & 0xFF
    },

    // How many pixels vertically does the gradient sequence complete over (+infinity for horizontal gradients!)
    vertRange = toY - fromY + (toX - fromX) * (toX - fromX) / (toY - fromY),

    // Same for horizontal
    horzRange = toX - fromX + (toY - fromY) * (toY - fromY) / (toX - fromX),
        horzStep = 1 / horzRange;

    for (var y = rect.top; y < rect.bottom; y++, pixIndex += yStride) {
        var
        // The position the row starts at in the gradient [0.0 ... 1.0)
        prop = (rect.left - fromX) / horzRange + (y - fromY) / vertRange;

        for (var x = 0; x < w; x++, pixIndex += _CPColorBmp2['default'].BYTES_PER_PIXEL) {
            var propClamped = Math.min(Math.max(prop, 0.0), 1.0),
                invPropClamped = 1 - propClamped,

            // The gradient color to draw
            r = fromColor.r * invPropClamped + toColor.r * propClamped,
                g = fromColor.g * invPropClamped + toColor.g * propClamped,
                b = fromColor.b * invPropClamped + toColor.b * propClamped,
                a = fromColor.a * invPropClamped + toColor.a * propClamped,
                alpha2 = this.data[pixIndex + ALPHA_BYTE_OFFSET],
                newAlpha = a + alpha2 - a * alpha2 / 255 | 0;

            if (newAlpha > 0) {
                var realAlpha = a * 255 / newAlpha | 0,
                    invAlpha = 255 - realAlpha;

                this.data[pixIndex + _CPColorBmp2['default'].RED_BYTE_OFFSET] = (r * realAlpha + this.data[pixIndex + _CPColorBmp2['default'].RED_BYTE_OFFSET] * invAlpha) / 255 | 0;
                this.data[pixIndex + _CPColorBmp2['default'].GREEN_BYTE_OFFSET] = (g * realAlpha + this.data[pixIndex + _CPColorBmp2['default'].GREEN_BYTE_OFFSET] * invAlpha) / 255 | 0;
                this.data[pixIndex + _CPColorBmp2['default'].BLUE_BYTE_OFFSET] = (b * realAlpha + this.data[pixIndex + _CPColorBmp2['default'].BLUE_BYTE_OFFSET] * invAlpha) / 255 | 0;
                this.data[pixIndex + _CPColorBmp2['default'].ALPHA_BYTE_OFFSET] = newAlpha;
            }

            prop += horzStep;
        }
    }
};

/**
 * Draw a gradient which begins at fromX, fromY and ends at toX, toY, clipped to the given rect, on top of the
 * pixels in the layer.
 *
 * @param gradientPoints Array with gradient colors (ARGB integers)
 * @param rect CPRect
 * @param replace Set to true to replace the pixels in the layer rather than blending the gradient on top of them.
 */
CPLayer.prototype.gradient = function (rect, fromX, fromY, toX, toY, gradientPoints, replace) {
    rect = this.getBounds().clip(rect);

    // Degenerate case
    if (fromX == toX && fromY == toY) {
        return;
    }

    // Opaque blend if possible
    if (replace || gradientPoints[0] >>> 24 == 255 && gradientPoints[1] >>> 24 == 255) {
        if (fromX == toX) {
            this.gradientVertReplace(rect, fromY, toY, gradientPoints);
        } else if (fromY == toY) {
            this.gradientHorzReplace(rect, fromX, toX, gradientPoints);
        } else {
            this.gradientReplace(rect, fromX, fromY, toX, toY, gradientPoints);
        }
    } else {
        this.gradientAlpha(rect, fromX, fromY, toX, toY, gradientPoints);
    }
};

/**
 * @param r CPRect
 */
CPLayer.prototype.fillWithColorNoise = function (rect) {
    rect = this.getBounds().clip(rect);

    var value,
        yStride = (this.width - rect.getWidth()) * _CPColorBmp2['default'].BYTES_PER_PIXEL,
        pixIndex = this.offsetOfPixel(rect.left, rect.top);

    for (var y = rect.top; y < rect.bottom; y++, pixIndex += yStride) {
        for (var x = rect.left; x < rect.right; x++, pixIndex += _CPColorBmp2['default'].BYTES_PER_PIXEL) {
            value = Math.random() * 0x1000000 | 0;

            this.data[pixIndex + _CPColorBmp2['default'].RED_BYTE_OFFSET] = value >> 16 & 0xFF;
            this.data[pixIndex + _CPColorBmp2['default'].GREEN_BYTE_OFFSET] = value >> 8 & 0xFF;
            this.data[pixIndex + _CPColorBmp2['default'].BLUE_BYTE_OFFSET] = value & 0xFF;
            this.data[pixIndex + _CPColorBmp2['default'].ALPHA_BYTE_OFFSET] = 0xFF;
        }
    }
};

/**
 * @param r CPRect
 */
CPLayer.prototype.invert = function (rect) {
    rect = this.getBounds().clip(rect);

    var yStride = (this.width - rect.getWidth()) * _CPColorBmp2['default'].BYTES_PER_PIXEL,
        pixIndex = this.offsetOfPixel(rect.left, rect.top);

    for (var y = rect.top; y < rect.bottom; y++, pixIndex += yStride) {
        for (var x = rect.left; x < rect.right; x++, pixIndex += _CPColorBmp2['default'].BYTES_PER_PIXEL) {
            this.data[pixIndex + _CPColorBmp2['default'].RED_BYTE_OFFSET] ^= 0xFF;
            this.data[pixIndex + _CPColorBmp2['default'].GREEN_BYTE_OFFSET] ^= 0xFF;
            this.data[pixIndex + _CPColorBmp2['default'].BLUE_BYTE_OFFSET] ^= 0xFF;
        }
    }
};

CPLayer.prototype.getAlpha = function () {
    return this.alpha;
};

CPLayer.prototype.getBlendMode = function () {
    return this.blendMode;
};

CPLayer.prototype.copyFrom = function (layer) {
    this.name = layer.name;
    this.blendMode = layer.blendMode;
    this.alpha = layer.alpha;
    this.visible = layer.visible;

    this.copyDataFrom(layer);
};

// Do we have any non-opaque pixels in the entire layer?
CPLayer.prototype.hasAlpha = function () {
    if (this.alpha != 100) {
        return true;
    }

    var pixIndex = ALPHA_BYTE_OFFSET;

    for (var y = 0; y < height; y++) {
        var alphaAnded = 0xFF;

        for (var x = 0; x < this.width; x++, pixIndex += BYTES_PER_PIXEL) {
            alphaAnded &= this.data[pixIndex];
        }

        // Only check once per row in order to reduce branching in the inner loop
        if (alphaAnded != 0xFF) {
            return true;
        }
    }

    return false;
};

// Do we have any semi-transparent pixels in the given rectangle?
CPLayer.prototype.hasAlphaInRect = function (rect) {
    if (this.alpha != 100) {
        return true;
    }

    rect = this.getBounds().clip(rect);

    var yStride = (this.width - rect.getWidth()) * BYTES_PER_PIXEL,
        pixIndex = this.offsetOfPixel(rect.left, rect.top) + ALPHA_BYTE_OFFSET;

    for (var y = rect.top; y < rect.bottom; y++, pixIndex += yStride) {
        var alphaAnded = 0xFF;

        for (var x = rect.left; x < rect.right; x++, pixIndex += BYTES_PER_PIXEL) {
            alphaAnded &= this.data[pixIndex];
        }

        // Only check once per row in order to reduce branching in the inner loop
        if (alphaAnded != 0xFF) {
            return true;
        }
    }

    return false;
};

// Return the canvas ImageData that backs this layer
CPLayer.prototype.getImageData = function () {
    return this.imageData;
};

CPLayer.LM_NORMAL = 0;
CPLayer.LM_MULTIPLY = 1;
CPLayer.LM_ADD = 2;
CPLayer.LM_SCREEN = 3;
CPLayer.LM_LIGHTEN = 4;
CPLayer.LM_DARKEN = 5;
CPLayer.LM_SUBTRACT = 6;
CPLayer.LM_DODGE = 7;
CPLayer.LM_BURN = 8;
CPLayer.LM_OVERLAY = 9;
CPLayer.LM_HARDLIGHT = 10;
CPLayer.LM_SOFTLIGHT = 11;
CPLayer.LM_VIVIDLIGHT = 12;
CPLayer.LM_LINEARLIGHT = 13;
CPLayer.LM_PINLIGHT = 14;

CPLayer.prototype.makeLookUpTables = function () {
    // V - V^2 table
    CPLayer.prototype.softLightLUTSquare = new Array(256);

    for (var i = 0; i < 256; i++) {
        var v = i / 255.;

        CPLayer.prototype.softLightLUTSquare[i] = (v - v * v) * 255. | 0;
    }

    // sqrt(V) - V table
    CPLayer.prototype.softLightLUTSquareRoot = new Array(256);
    for (var i = 0; i < 256; i++) {
        var v = i / 255.;

        CPLayer.prototype.softLightLUTSquareRoot[i] = (Math.sqrt(v) - v) * 255. | 0;
    }
};

CPLayer.prototype.setAlpha = function (alpha) {
    this.alpha = alpha;
};

CPLayer.prototype.setBlendMode = function (blendMode) {
    this.blendMode = blendMode;
};

CPLayer.prototype.getAlpha = function () {
    return this.alpha;
};

CPLayer.prototype.getBlendMode = function () {
    return this.blendMode;
};

/**
 * Returns a new canvas with a rotated version of the given canvas.
 * 
 * Rotation is [0..3] and selects a multiple of 90 degrees of clockwise rotation to be applied.
 */
function getRotatedCanvas(canvas, rotation) {
    rotation = rotation % 4;

    if (rotation == 0) {
        return canvas;
    }

    var rotatedCanvas = document.createElement("canvas"),
        rotatedCanvasContext = rotatedCanvas.getContext("2d");

    if (rotation % 2 == 0) {
        rotatedCanvas.width = canvas.width;
        rotatedCanvas.height = canvas.height;
    } else {
        rotatedCanvas.width = canvas.height;
        rotatedCanvas.height = canvas.width;
    }

    switch (rotation) {
        case 1:
            // 90 degree clockwise:
            rotatedCanvasContext.rotate(Math.PI / 2);
            rotatedCanvasContext.drawImage(canvas, 0, -canvas.height);
            break;
        case 2:
            rotatedCanvasContext.rotate(Math.PI);
            rotatedCanvasContext.drawImage(canvas, -canvas.width, -canvas.height);
            break;
        case 3:
            // 90 degree counter-clockwise:
            rotatedCanvasContext.rotate(-Math.PI / 2);
            rotatedCanvasContext.drawImage(canvas, -canvas.width, 0);
            break;
        case 0:
        default:
            return canvas;
    }

    return rotatedCanvas;
}

function decodeBase64PNGDataURL(url) {
    if (typeof url !== "string" || !url.match(/^data:image\/png;base64,/i)) {
        return false;
    }

    return window.atob(url.substring("data:image\/png;base64,".length));
}

/**
 * Get the layer as a PNG image.
 * 
 * Rotation is [0..3] and selects a multiple of 90 degrees of clockwise rotation to be applied, or 0 to leave
 * unrotated.
 */
CPLayer.prototype.getAsPNG = function (rotation) {
    var canvas = document.createElement("canvas"),
        canvasContext = canvas.getContext("2d");

    // First draw our image data onto a canvas...
    canvas.width = this.imageData.width;
    canvas.height = this.imageData.height;

    canvasContext.putImageData(this.imageData, 0, 0);

    // Rotate it if needed
    canvas = getRotatedCanvas(canvas, rotation || 0);

    return decodeBase64PNGDataURL(canvas.toDataURL('image/png'));
};

CPLayer.prototype.makeLookUpTables();
module.exports = exports['default'];

},{"./CPBlend":4,"./CPColorBmp":9}],12:[function(require,module,exports){
/*
    ChickenPaint
    
    ChickenPaint is a translation of ChibiPaint from Java to JavaScript
    by Nicholas Sherlock / Chicken Smoothie.
    
    ChibiPaint is Copyright (c) 2006-2008 Marc Schefer

    ChickenPaint is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    ChickenPaint is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with ChickenPaint. If not, see <http://www.gnu.org/licenses/>.
*/

"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports["default"] = CPLookUpTable;

function CPLookUpTable() {
    this.table = new Uint8Array(256);

    this.loadIdentity = function () {
        for (var i = 0; i < 256; i++) {
            this.table[i] = i;
        }
    };

    this.loadBrightnessContrast = function (brightness, contrast) {
        var slope = contrast > 0.0 ? 1.0 / (1.0001 - contrast) : 1.0 + contrast,
            offset = 0.5 - slope * 0.5 + brightness;

        for (var i = 0; i < 256; i++) {
            var x = i / 255.0,
                y = x * slope + offset;

            this.table[i] = Math.min(255, Math.max(~ ~(y * 255.0), 0));
        }
    };

    this.invert = function () {
        for (var i = 0; i < 256; i++) {
            this.table[i] = 255 - this.table[i];
        }
    };
}

module.exports = exports["default"];

},{}],13:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports["default"] = CPResourceLoader;

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

var _CPChibiFile = require("./CPChibiFile");

var _CPChibiFile2 = _interopRequireDefault(_CPChibiFile);

var _CPArtwork = require("./CPArtwork");

var _CPArtwork2 = _interopRequireDefault(_CPArtwork);

var _CPLayer = require("./CPLayer");

var _CPLayer2 = _interopRequireDefault(_CPLayer);

var _utilAdobeColorTable = require("../util/AdobeColorTable");

var _utilAdobeColorTable2 = _interopRequireDefault(_utilAdobeColorTable);

/**
 * Loads ChickenPaint resources from a remote server and emits progress events.
 *
 * loadImageURL - URL of PNG/JPEG image to load for editing (optional)
 * loadChibiFileURL - URL of .chi file to load for editing (optional). Used in preference to loadImage.
 * loadSwatchesURL - URL of an .aco palette to load (optional)
 */

function CPResourceLoader(options) {
    var resources = [],
        completed = {},
        that = this;

    if (options.loadChibiFileUrl && ("" + options.loadChibiFileUrl).length > 0) {
        resources.push({
            url: options.loadChibiFileUrl,
            friendly: "drawing layers",
            name: "layers",
            required: true
        });
    } else {
        if (options.loadImageUrl && ("" + options.loadImageUrl).length > 0) {
            resources.push({
                url: options.loadImageUrl,
                friendly: "drawing",
                name: "flat",
                required: true
            });
        }
    }

    if (options.loadSwatchesUrl) {
        resources.push({
            url: options.loadSwatchesUrl,
            friendly: "color swatches",
            name: "swatches",
            required: false,
            noProgress: true // So short that we may as well keep the smoothie drained
        });
    }

    function decodeResource(resource, resourceData) {
        return new Promise(function (resolve, reject) {
            switch (resource.name) {
                case "flat":
                    var blob = new Blob([resourceData], { type: "image/png" }),
                        imageUrl = window.URL.createObjectURL(blob);

                    if (imageUrl) {
                        var image = new Image();

                        image.onload = function () {
                            var artwork = new _CPArtwork2["default"](this.width, this.height),
                                layer = new _CPLayer2["default"](this.width, this.height, "Layer 1");

                            layer.loadFromImage(image);
                            artwork.addLayerObject(layer);

                            image = null;
                            window.URL.revokeObjectURL(imageUrl);

                            resolve(artwork);
                        };

                        image.src = imageUrl;
                    } else {
                        resolve(null);
                    }
                    break;
                case "swatches":
                    var reader = new _utilAdobeColorTable2["default"](),
                        colors = reader.read(resourceData);

                    resolve(colors);
                    break;
                case "layers":
                    var reader = new _CPChibiFile2["default"](),
                        artwork = reader.read(resourceData);

                    resolve(artwork);
                    break;
                default:
                    resolve(null);
                    break;
            }
        });
    }

    function reportProgress(resource, progress) {
        if (progress === null) {
            that.emitEvent("loadingProgress", [1.0, "Loading your " + resource.friendly + "..."]);
        } else {
            that.emitEvent("loadingProgress", [progress, "Loading your " + resource.friendly + " (" + Math.round(progress * 100) + "%)..."]);
        }
    }

    this.load = function () {
        if (resources.length == 0) {
            that.emitEvent("loadingComplete", [completed]);
            return;
        }

        var resource = resources.shift(),
            xhr = new XMLHttpRequest();

        xhr.addEventListener("progress", function (evt) {
            var progress;

            if (evt.lengthComputable && !resource.noProgress) {
                progress = evt.loaded / evt.total;
            } else {
                progress = null;
            }

            reportProgress(resource, progress);
        }, false);

        function handleFatal() {
            if (resource.required) {
                that.emitEvent("loadingFailure", ["Failed to load your " + resource.friendly + ", please try again later."]);
            } else {
                // Skip unimportant resources
                that.load();
            }
        }

        xhr.addEventListener("load", function (evt) {
            if (this.status == 200) {
                var response = this.response;

                that.emitEvent("loadingProgress", [1.0, "Starting ChickenPaint..."]);

                // Yield to the DOM to give it a chance to paint the loaded message before we begin decoding
                setTimeout(function () {
                    decodeResource(resource, response).then(function (decoded) {
                        if (decoded) {
                            completed[resource.name] = decoded;

                            // Move on to the next file
                            that.load();
                        } else {
                            that.emitEvent("loadingFailure", ["Failed to read your " + resource.friendly]);
                        }
                    });
                }, 0);
            } else {
                handleFatal();
            }
        }, false);

        xhr.addEventListener("error", handleFatal);

        reportProgress(resource, resource.noProgress ? null : 0.0);

        xhr.open("GET", resource.url, true);

        xhr.responseType = 'arraybuffer';

        xhr.send();
    };
}

CPResourceLoader.prototype = Object.create(EventEmitter.prototype);
CPResourceLoader.prototype.constructor = CPResourceLoader;
module.exports = exports["default"];

},{"../util/AdobeColorTable":43,"./CPArtwork":2,"./CPChibiFile":7,"./CPLayer":11}],14:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports["default"] = CPResourceSaver;

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

var _CPChibiFile = require("./CPChibiFile");

var _CPChibiFile2 = _interopRequireDefault(_CPChibiFile);

var _CPArtwork = require("./CPArtwork");

var _CPArtwork2 = _interopRequireDefault(_CPArtwork);

var _utilAdobeColorTable = require("../util/AdobeColorTable");

var _utilAdobeColorTable2 = _interopRequireDefault(_utilAdobeColorTable);

/**
 * We generally can't do much with binary strings because various methods will try to UTF-8 mangle them.
 * This function converts such a string to a Uint8Array instead.
 */
function binaryStringToByteArray(s) {
    var result = new Uint8Array(s.length);

    for (var i = 0; i < s.length; i++) {
        result[i] = s.charCodeAt(i);
    }

    return result;
}

/**
 * Saves ChickenPaint resources to a remote server or to the disk and emits progress events.
 *
 * Options:
 *     url - URL to send to. If omitted, will save to the disk instead.
 *     artwork - Artwork to send
 *     rotation - Integer [0..3] of the number of 90 degree rotation steps that should be applied to canvas upon opening.
 *     swatches - Array of ARGB integer colors to save as the image swatches (optional)
 */

function CPResourceSaver(options) {
    var that = this,
        cancelled = false;

    options.rotation = options.rotation || 0;

    function reportProgress(progress) {
        if (progress === null) {
            that.emitEvent("savingProgress", [1.0, "Saving your drawing to the server..."]);
        } else {
            that.emitEvent("savingProgress", [progress, "Saving your drawing to the server...  (" + Math.round(progress * 100) + "%)"]);
        }
    }

    function reportFatal(serverMessage) {
        that.emitEvent("savingFailure", [serverMessage]);
    }

    function postDrawing(formData) {
        var xhr = new XMLHttpRequest();

        xhr.upload.addEventListener("progress", function (evt) {
            var progress;

            if (evt.lengthComputable) {
                progress = evt.loaded / evt.total;
            } else {
                progress = null;
            }

            reportProgress(progress);
        }, false);

        xhr.addEventListener("load", function (evt) {
            reportProgress(1.0);

            if (this.status == 200 && /^CHIBIOK/.test(this.response)) {
                that.emitEvent("savingComplete");
            } else {
                reportFatal(this.response);
            }
        }, false);

        xhr.addEventListener("error", function () {
            reportFatal(this.response);
        }, false);

        reportProgress(0);

        xhr.open("POST", options.url, true);

        xhr.responseType = "text";

        xhr.send(formData);
    }

    /**
     * Begin saving the data provided in the constructor. Returns immediately, and fires these events to report the
     * saving progress:
     * 
     * savingProgress(progress) - Progress is [0.0 ... 1.0] and reports how much has uploaded so far, or null if the 
     *                            total progress could not be determined.
     * savingFailure(error)     - When saving fails, along with a string error message to display to the user. 
     * savingComplete()         - When saving completes succesfully
     */
    this.save = function () {
        var flat, flatBlob, swatchesBlob;

        flat = binaryStringToByteArray(options.artwork.getFlatPNG(options.rotation));
        flatBlob = new Blob([flat], { type: "image/png" });
        flat = null; // Don't need this any more

        var serializeLayers;

        if (options.artwork.isSimpleDrawing()) {
            serializeLayers = Promise.resolve(null);
        } else {
            serializeLayers = new _CPChibiFile2["default"]().serialize(options.artwork);
        }

        serializeLayers.then(function (chibiBlob) {
            if (cancelled) {
                that.emitEvent("savingFailure");
                return;
            }

            if (options.swatches) {
                var aco = new _utilAdobeColorTable2["default"]();

                swatchesBlob = new Blob([aco.write(options.swatches)], { type: "application/octet-stream" });
            } else {
                swatchesBlob = null;
            }

            if (options.url) {
                var marker = "This marker ensures the upload wasn't truncated",
                    formData = new FormData();

                formData.append("beginMarker", marker);

                formData.append("picture", flatBlob);
                flatBlob = null;

                if (chibiBlob) {
                    formData.append("chibifile", chibiBlob);
                    chibiBlob = null;

                    // Layers will need to be rotated upon opening
                    formData.append("rotation", "" + options.rotation);
                } else {
                    /*
                     * Because the image is a flat PNG, we rotate it before we saved it and it doesn't need further
                     * rotation upon opening.
                     */
                    formData.append("rotation", "0");
                }

                if (swatchesBlob) {
                    formData.append("swatches", swatchesBlob);
                    swatchesBlob = null;
                }

                formData.append("endMarker", marker);

                postDrawing(formData);
            } else {
                window.saveAs(flatBlob, "oekaki.png");

                if (chibiBlob) {
                    window.saveAs(chibiBlob, "oekaki.chi");
                }
                if (swatchesBlob) {
                    window.saveAs(swatchesBlob, "oekaki.aco");
                }
            }
        });
    };

    this.cancel = function () {
        cancelled = true;
    };
}

CPResourceSaver.prototype = Object.create(EventEmitter.prototype);
CPResourceSaver.prototype.constructor = CPResourceSaver;
module.exports = exports["default"];

},{"../util/AdobeColorTable":43,"./CPArtwork":2,"./CPChibiFile":7}],15:[function(require,module,exports){
/*
    ChickenPaint
    
    ChickenPaint is a translation of ChibiPaint from Java to JavaScript
    by Nicholas Sherlock / Chicken Smoothie.
    
    ChibiPaint is Copyright (c) 2006-2008 Marc Schefer

    ChickenPaint is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    ChickenPaint is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with ChickenPaint. If not, see <http://www.gnu.org/licenses/>.
*/

"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports["default"] = CPUndo;

function CPUndo() {}

CPUndo.prototype.merge = function (undo) {
    return false;
};

CPUndo.prototype.noChange = function () {
    return false;
};

CPUndo.prototype.getMemoryUsed = function (undone, param) {
    return 0;
};
module.exports = exports["default"];

},{}],16:[function(require,module,exports){
/*
    ChickenPaint
    
    ChickenPaint is a translation of ChibiPaint from Java to JavaScript
    by Nicholas Sherlock / Chicken Smoothie.
    
    ChibiPaint is Copyright (c) 2006-2008 Marc Schefer

    ChickenPaint is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    ChickenPaint is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with ChickenPaint. If not, see <http://www.gnu.org/licenses/>.
*/

"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports["default"] = CPAboutDialog;

function CPAboutDialog(parent) {
    var dialog = $("<div class=\"modal fade chickenpaint-about-dialog\" tabindex=\"-1\" role=\"dialog\">\n                <div class=\"modal-dialog\">\n                    <div class=\"modal-content\">\n                        <div class=\"modal-header\">\n                            <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\n                                <span aria-hidden=\"true\">&times;</span>\n                            </button>\n                            <h4 class=\"modal-title\">About ChickenPaint</h4>\n                        </div>\n                        <div class=\"modal-body\">\n                            <a class=\"chickenpaint-on-github\" target=\"_blank\" href=\"https://github.com/thenickdude/chickenpaint\"><span class=\"fa fa-github\"></span> ChickenPaint on GitHub</a>\n                            \n                            <p>\n                                ChickenPaint is a translation of <a href=\"http://www.chibipaint.com/\" target=\"_blank\">ChibiPaint</a>\n                                from Java to JavaScript by Nicholas Sherlock / Chicken Smoothie\n                            </p>\n                            <p>\n                                ChibiPaint is Copyright (c) 2006-2008 Marc Schefer. All Rights Reserved\n                            </p>\n                            <p>\n                                ChickenPaint is free software: you can redistribute it and/or modify\n                                it under the terms of the GNU General Public License as published by\n                                the Free Software Foundation, either version 3 of the License, or\n                                (at your option) any later version.\n                            </p>\n        \n                            <p>\n                                ChickenPaint is distributed in the hope that it will be useful,\n                                but WITHOUT ANY WARRANTY; without even the implied warranty of\n                                MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n                                <a target=\"_blank\" href=\"http://www.gnu.org/licenses/\">GNU General Public License</a> for more details.\n                            </p>\n        \n                            <pre class=\"pre-scrollable chickenpaint-third-party-licenses\">Includes icons from the <a href=\"http://tango.freedesktop.org/\" target=\"_blank\">Tango Desktop Project</a>\n                    \nIncludes the <a target=\"_blank\" href=\"https://github.com/eligrey/FileSaver.js\">FileSaver.js library</a>\n                    \n    FileSaver.js Copyright © 2015 <a target=\"_blank\" href=\"http://eligrey.com/\">Eli Grey</a>\n\n    Permission is hereby granted, free of charge, to any person\n    obtaining a copy of this software and associated documentation\n    files (the \"Software\"), to deal in the Software without\n    restriction, including without limitation the rights to use,\n    copy, modify, merge, publish, distribute, sublicense, and/or\n    sell copies of the Software, and to permit persons to whom the\n    Software is furnished to do so, subject to the following\n    conditions:\n\n    The above copyright notice and this permission notice shall be\n    included in all copies or substantial portions of the Software.\n\n    THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n    EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES\n    OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n    NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT \n    HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,\n    WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n    FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR\n    OTHER DEALINGS IN THE SOFTWARE.\n\nIncludes the <a href=\"http://www.jquery.com/\" target=\"_blank\">JQuery library</a>\n\n    Copyright <a href=\"https://jquery.org/\" target=\"_blank\">jQuery Foundation and other contributors</a>\n    \n    This software consists of voluntary contributions made by many\n    individuals. For exact contribution history, see the revision \n    history available at https://github.com/jquery/jquery\n    \n    The following license applies to all parts of this software \n    except as documented below:\n    \n    Permission is hereby granted, free of charge, to any person \n    obtaining a copy of this software and associated documentation\n    files (the \"Software\"), to deal in the Software without\n    restriction, including without limitation the rights to use, \n    copy, modify, merge, publish, distribute, sublicense, and/or\n    sell copies of the Software, and to permit persons to whom the\n    Software is furnished to do so, subject to the following\n    conditions:\n    \n    The above copyright notice and this permission notice shall be\n    included in all copies or substantial portions of the Software.\n    \n    THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n    EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES\n    OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n    NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n    HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,\n    WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n    FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR\n    OTHER DEALINGS IN THE SOFTWARE.\n\nIncludes the <a target=\"_blank\" href=\"https://github.com/nodeca/pako\">Pako zlib compression library</a>\n\n    Copyright (C) 2014-2015 by Vitaly Puzrin\n    \n    Permission is hereby granted, free of charge, to any person\n    obtaining a copy of this software and associated documentation\n    files (the \"Software\"), to deal in the Software without\n    restriction, including without limitation the rights to use,\n    copy, modify, merge, publish, distribute, sublicense, and/or\n    sell copies of the Software, and to permit persons to whom the\n    Software is furnished to do so, subject to the following\n    conditions:\n\n    The above copyright notice and this permission notice shall be\n    included in all copies or substantial portions of the Software.\n\n    THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n    EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES\n    OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n    NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT \n    HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,\n    WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n    FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR\n    OTHER DEALINGS IN THE SOFTWARE.\n    \nIncludes the <a target=\"_blank\" href=\"https://github.com/madrobby/keymaster\">keymaster.js</a> keyboard library\n    \n    Copyright (c) 2011-2013 Thomas Fuchs\n\n    Permission is hereby granted, free of charge, to any person\n    obtaining a copy of this software and associated documentation\n    files (the \"Software\"), to deal in the Software without\n    restriction, including without limitation the rights to use,\n    copy, modify, merge, publish, distribute, sublicense, and/or\n    sell copies of the Software, and to permit persons to whom the\n    Software is furnished to do so, subject to the following\n    conditions:\n\n    The above copyright notice and this permission notice shall be\n    included in all copies or substantial portions of the Software.\n\n    THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n    EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES\n    OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n    NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT \n    HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,\n    WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n    FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR\n    OTHER DEALINGS IN THE SOFTWARE.\n    \nIncludes the <a target=\"_blank\" href=\"https://github.com/stefanpenner/es6-promise\">es6-promise</a> library\n    \n    Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors\n\n    Permission is hereby granted, free of charge, to any person\n    obtaining a copy of this software and associated documentation\n    files (the \"Software\"), to deal in the Software without\n    restriction, including without limitation the rights to use,\n    copy, modify, merge, publish, distribute, sublicense, and/or\n    sell copies of the Software, and to permit persons to whom the\n    Software is furnished to do so, subject to the following\n    conditions:\n\n    The above copyright notice and this permission notice shall be\n    included in all copies or substantial portions of the Software.\n\n    THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n    EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES\n    OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n    NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT \n    HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,\n    WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n    FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR\n    OTHER DEALINGS IN THE SOFTWARE.\n                    </pre>\n                </div>\n            </div>\n        </div>\n    ");

    // Destroy the modal upon close
    dialog.on("hidden.bs.modal", function (e) {
        dialog.remove();
    });

    dialog.modal({
        show: false
    });

    // Fix the backdrop location in the DOM by reparenting it to the chickenpaint container
    dialog.data("bs.modal").$body = $(parent);

    parent.appendChild(dialog[0]);

    this.show = function () {
        dialog.modal("show");
    };
}

module.exports = exports["default"];

},{}],17:[function(require,module,exports){
/*
    ChickenPaint
    
    ChickenPaint is a translation of ChibiPaint from Java to JavaScript
    by Nicholas Sherlock / Chicken Smoothie.
    
    ChibiPaint is Copyright (c) 2006-2008 Marc Schefer

    ChickenPaint is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    ChickenPaint is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with ChickenPaint. If not, see <http://www.gnu.org/licenses/>.
*/

"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports["default"] = CPBoxBlurDialog;

function CPBoxBlurDialog(parent, controller) {
    var dialog = $("<div class=\"modal fade\" tabindex=\"-1\" role=\"dialog\">\n                <div class=\"modal-dialog\">\n                    <div class=\"modal-content\">\n                        <div class=\"modal-header\">\n                            <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\n                                <span aria-hidden=\"true\">&times;</span>\n                            </button>\n                            <h4 class=\"modal-title\">Box blur</h4>\n                        </div>\n                        <div class=\"modal-body\">\n                            <form>\n                                <div class=\"form-group\">\n                                    <label>Blur amount (pixels)</label>\n                                    <input type=\"text\" class=\"form-control chickenpaint-blur-amount\" value=\"3\">\n                                </div>\n                                <div class=\"form-group\">\n                                    <label>Iterations (1-8, larger gives smoother blur)</label>\n                                    <input type=\"text\" class=\"form-control chickenpaint-blur-iterations\" value=\"1\">\n                                </div>\n                            </form>\n                        </div>\n                        <div class=\"modal-footer\">\n                            <button type=\"button\" class=\"btn btn-default\" data-dismiss=\"modal\">Cancel</button>\n                            <button type=\"button\" class=\"btn btn-primary chickenpaint-apply-box-blur\" data-dismiss=\"modal\">Ok</button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        "),
        blurAmountElem = $(".chickenpaint-blur-amount", dialog),
        blurIterationsElem = $(".chickenpaint-blur-iterations", dialog),
        applyButton = $(".chickenpaint-apply-box-blur", dialog);

    this.show = function () {
        dialog.modal("show");
    };

    applyButton.click(function (e) {
        var blur = Math.max(parseInt(blurAmountElem.val(), 10), 1),
            iterations = Math.min(Math.max(parseInt(blurIterationsElem.val(), 10), 1), 8);

        controller.getArtwork().boxBlur(blur, blur, iterations);
    });

    dialog.modal({
        show: false
    }).on('shown.bs.modal', function () {
        blurAmountElem.focus();
    }).on('keypress', function (e) {
        if (e.keyCode == 13) {
            applyButton.click();
        }
    });

    // Fix the backdrop location in the DOM by reparenting it to the chickenpaint container
    dialog.data("bs.modal").$body = $(parent);

    parent.appendChild(dialog[0]);

    /* TODO
    panel.add(new JLabel("Blur amount:"));
    SpinnerModel blurXSM = new SpinnerNumberModel(3, 1, 100, 1);
    
    panel.add(new JLabel("Iterations:"));
    SpinnerModel iterSM = new SpinnerNumberModel(1, 1, 8, 1);
    */
}

module.exports = exports["default"];

},{}],18:[function(require,module,exports){
/*
    ChickenPaint
    
    ChickenPaint is a translation of ChibiPaint from Java to JavaScript
    by Nicholas Sherlock / Chicken Smoothie.
    
    ChibiPaint is Copyright (c) 2006-2008 Marc Schefer

    ChickenPaint is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    ChickenPaint is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with ChickenPaint. If not, see <http://www.gnu.org/licenses/>.
*/

"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports["default"] = CPBrushPalette;

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

var _ChickenPaint = require("../ChickenPaint");

var _ChickenPaint2 = _interopRequireDefault(_ChickenPaint);

var _CPPalette = require("./CPPalette");

var _CPPalette2 = _interopRequireDefault(_CPPalette);

var _CPCheckbox = require("./CPCheckbox");

var _CPCheckbox2 = _interopRequireDefault(_CPCheckbox);

var _CPColorSwatch = require("./CPColorSwatch");

var _CPColorSwatch2 = _interopRequireDefault(_CPColorSwatch);

var _CPSlider = require("./CPSlider");

var _CPSlider2 = _interopRequireDefault(_CPSlider);

var _CPGUIUtils = require("./CPGUIUtils");

var _engineCPLayer = require("../engine/CPLayer");

var _engineCPLayer2 = _interopRequireDefault(_engineCPLayer);

var _utilCPColor = require("../util/CPColor");

var _utilCPColor2 = _interopRequireDefault(_utilCPColor);

var TIP_NAMES = ["Round Pixelated", "Round Hard Edge", "Round Soft", "Square Pixelated", "Square Hard Edge"],
    BRUSH_SIZES = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 15, 20, 25, 30, 35, 40, 45, 50, 60, 70, 80, 90, 100, 125, 150, 175, 200];

function CPGradientPreview(controller) {
    var that = this,
        w = 150,
        h = 32,
        canvas = document.createElement("canvas"),
        canvasContext = canvas.getContext("2d"),
        checkerboard = (0, _CPGUIUtils.createCheckerboardPattern)(canvasContext),
        image = new _engineCPLayer2["default"](w, h, ""),
        imageCanvas = document.createElement("canvas"),
        imageCanvasContext = imageCanvas.getContext("2d"),
        gradient = controller.getCurGradient();

    function paint() {
        image.gradient(image.getBounds(), 0, 0, image.width, 0, gradient, true);
        imageCanvasContext.putImageData(image.imageData, 0, 0, 0, 0, w, h);

        canvasContext.fillRect(0, 0, canvas.width, canvas.height);
        canvasContext.drawImage(imageCanvas, 0, 0);
    }

    this.getElement = function () {
        return canvas;
    };

    controller.on("gradientChange", function (_gradient) {
        gradient = _gradient;

        paint();
    });

    canvas.width = imageCanvas.width = w;
    canvas.height = imageCanvas.height = h;

    canvas.className = 'chickenpaint-gradient-preview';

    canvasContext.fillStyle = checkerboard;

    paint();
}

function CPBrushPalette(controller) {
    _CPPalette2["default"].call(this, controller, "brush", "Tool options");

    var brushPanel = document.createElement("div"),
        tipCombo = document.createElement("select"),
        alphaCB = new _CPCheckbox2["default"](false, "Control brush opacity with pen pressure"),
        alphaSlider = new _CPSlider2["default"](1, 255),
        sizeCB = new _CPCheckbox2["default"](true, "Control brush size with pen pressure"),
        sizeSlider = new _CPSlider2["default"](1, 200, false, true),
        scatteringCB = new _CPCheckbox2["default"](false, "Control brush scattering with pen pressure"),
        scatteringSlider = new _CPSlider2["default"](0, 1000, false, true),
        resatSlider = new _CPSlider2["default"](0, 100, false, true),
        bleedSlider = new _CPSlider2["default"](0, 100, false, true),
        spacingSlider = new _CPSlider2["default"](0, 100, false, true),
        smoothingSlider = new _CPSlider2["default"](0, 100, false, true),
        brushPreview = new CPBrushPalette.CPBrushPreview(controller),
        gradientPanel = document.createElement("div"),
        gradientPreview = new CPGradientPreview(controller),
        gradientStartSwatch = new _CPColorSwatch2["default"](new _utilCPColor2["default"](controller.getCurGradient()[0] & 0xFFFFFF)),
        gradientEndSwatch = new _CPColorSwatch2["default"](new _utilCPColor2["default"](controller.getCurGradient()[1] & 0xFFFFFF)),
        body = this.getBodyElement();

    function sliderCheckboxGroup(checkbox, slider) {
        var group = document.createElement("div");

        group.className = "chickenpaint-checkbox-slider-group";

        group.appendChild(checkbox.getElement());
        group.appendChild(slider.getElement());

        return group;
    }

    function fillCombobox(combo, optionNames) {
        for (var i = 0; i < optionNames.length; i++) {
            var option = document.createElement("option");

            option.appendChild(document.createTextNode(optionNames[i]));
            option.value = i;

            combo.appendChild(option);
        }
    }

    function buildBrushPanel() {
        alphaSlider.title = function (value) {
            return "Opacity: " + value;
        };

        alphaSlider.on('valueChange', function (value) {
            controller.setAlpha(value);
        });

        sizeSlider.title = function (value) {
            return "Brush size: " + value;
        };

        sizeSlider.on('valueChange', function (value) {
            controller.setBrushSize(value);
        });

        resatSlider.title = function (value) {
            return "Color: " + value + "%";
        };

        resatSlider.on('valueChange', function (value) {
            controller.getBrushInfo().resat = value / 100.0;
            controller.callToolListeners();
        });

        bleedSlider.title = function (value) {
            return "Blend: " + value + "%";
        };

        bleedSlider.on('valueChange', function (value) {
            controller.getBrushInfo().bleed = value / 100.0;
            controller.callToolListeners();
        });

        spacingSlider.title = function (value) {
            return "Spacing: " + value + "%";
        };

        spacingSlider.on('valueChange', function (value) {
            controller.getBrushInfo().spacing = value / 100.0;
            controller.callToolListeners();
        });

        scatteringSlider.title = function (value) {
            return "Scattering: " + value + "%";
        };

        scatteringSlider.on('valueChange', function (value) {
            controller.getBrushInfo().scattering = value / 100.0;
            controller.callToolListeners();
        });

        smoothingSlider.title = function (value) {
            return "Smoothing: " + value + "%";
        };

        smoothingSlider.on('valueChange', function (value) {
            controller.getBrushInfo().smoothing = value / 100.0;
            controller.callToolListeners();
        });

        scatteringCB.on('valueChange', function (state) {
            controller.getBrushInfo().pressureScattering = state;
            controller.callToolListeners();
        });

        alphaCB.on('valueChange', function (state) {
            controller.getBrushInfo().pressureAlpha = state;
            controller.callToolListeners();
        });

        sizeCB.on('valueChange', function (state) {
            controller.getBrushInfo().pressureSize = state;
            controller.callToolListeners();
        });

        tipCombo.addEventListener("change", function (e) {
            controller.getBrushInfo().type = parseInt(tipCombo.value, 10);
        });

        tipCombo.className = 'form-control';
        fillCombobox(tipCombo, TIP_NAMES);

        brushPanel.appendChild(tipCombo);

        brushPanel.appendChild(brushPreview.getElement());

        brushPanel.appendChild(sliderCheckboxGroup(sizeCB, sizeSlider));
        brushPanel.appendChild(sliderCheckboxGroup(alphaCB, alphaSlider));
        brushPanel.appendChild(resatSlider.getElement());
        brushPanel.appendChild(bleedSlider.getElement());
        brushPanel.appendChild(spacingSlider.getElement());
        brushPanel.appendChild(sliderCheckboxGroup(scatteringCB, scatteringSlider));
        brushPanel.appendChild(smoothingSlider.getElement());

        alphaCB.setValue(controller.getBrushInfo().pressureAlpha);
        alphaSlider.setValue(controller.getAlpha());

        sizeCB.setValue(controller.getBrushInfo().pressureSize);
        sizeSlider.setValue(controller.getBrushSize());

        scatteringCB.setValue(controller.getBrushInfo().pressureScattering);
        scatteringSlider.setValue(~ ~(controller.getBrushInfo().scattering * 100));

        tipCombo.value = controller.getBrushInfo().type;

        resatSlider.setValue(~ ~(controller.getBrushInfo().resat * 100));
        bleedSlider.setValue(~ ~(controller.getBrushInfo().bleed * 100));
        spacingSlider.setValue(~ ~(controller.getBrushInfo().spacing * 100));
        smoothingSlider.setValue(~ ~(controller.getBrushInfo().smoothing * 100));
    }

    function updateGradient() {
        var gradient = new Array(2);

        gradient[0] = gradientStartSwatch.getAlpha() << 24 | gradientStartSwatch.getColorRgb();
        gradient[1] = gradientEndSwatch.getAlpha() << 24 | gradientEndSwatch.getColorRgb();

        controller.setCurGradient(gradient);
    }

    function buildGradientPanel() {
        gradientPanel.className = "chickenpaint-gradient-panel";
        gradientPanel.style.display = "none";

        gradientStartSwatch.on("colorChange", updateGradient);
        gradientStartSwatch.on("alphaChange", updateGradient);
        gradientEndSwatch.on("colorChange", updateGradient);
        gradientEndSwatch.on("alphaChange", updateGradient);

        var title, colorsGroup, colorGroup;

        title = document.createElement("p");
        title.innerHTML = "Gradient";

        gradientPanel.appendChild(title);
        gradientPanel.appendChild(gradientPreview.getElement());

        colorsGroup = document.createElement("div");
        colorsGroup.className = "chickenpaint-gradient-colors";

        colorGroup = document.createElement("div");
        colorGroup.className = "chickenpaint-gradient-start-color";

        colorGroup.appendChild(gradientStartSwatch.getElement());

        colorsGroup.appendChild(colorGroup);

        colorGroup = document.createElement("div");
        colorGroup.className = "chickenpaint-gradient-end-color";

        colorGroup.appendChild(gradientEndSwatch.getElement());

        colorsGroup.appendChild(colorGroup);

        gradientPanel.appendChild(colorsGroup);
    }

    buildBrushPanel();
    body.appendChild(brushPanel);

    buildGradientPanel();
    body.appendChild(gradientPanel);

    controller.on('toolChange', function (tool, toolInfo) {
        alphaSlider.setValue(toolInfo.alpha);
        sizeSlider.setValue(toolInfo.size);
        sizeCB.setValue(toolInfo.pressureSize);
        alphaCB.setValue(toolInfo.pressureAlpha);
        tipCombo.value = toolInfo.type;
        scatteringCB.setValue(toolInfo.pressureScattering);

        if (~ ~(toolInfo.resat * 100.0) != resatSlider.value) {
            resatSlider.setValue(~ ~(toolInfo.resat * 100.0));
        }

        if (~ ~(toolInfo.bleed * 100.0) != bleedSlider.value) {
            bleedSlider.setValue(~ ~(toolInfo.bleed * 100.0));
        }

        if (~ ~(toolInfo.spacing * 100.0) != spacingSlider.value) {
            spacingSlider.setValue(~ ~(toolInfo.spacing * 100.0));
        }

        if (~ ~(toolInfo.scattering * 100.0) != scatteringSlider.value) {
            scatteringSlider.setValue(~ ~(toolInfo.scattering * 100.0));
        }

        if (~ ~(toolInfo.smoothing * 100.0) != smoothingSlider.value) {
            smoothingSlider.setValue(~ ~(toolInfo.smoothing * 100.0));
        }
    });

    controller.on('modeChange', function (mode) {
        switch (mode) {
            case _ChickenPaint2["default"].M_GRADIENTFILL:
                brushPanel.style.display = "none";
                gradientPanel.style.display = "block";
                break;
            default:
                brushPanel.style.display = "block";
                gradientPanel.style.display = "none";
                break;
        }
    });

    key("1,2,3,4,5,6,7,8,9,0", function (event, handler) {
        var shortcut = parseInt(handler.shortcut, 10);

        if (shortcut == 0) {
            shortcut = 10;
        }

        controller.setAlpha(Math.round(shortcut / 10 * 255));
    });

    key("{,[", function () {
        var size = controller.getBrushSize();

        for (var i = BRUSH_SIZES.length - 1; i >= 0; i--) {
            if (size > BRUSH_SIZES[i]) {
                controller.setBrushSize(BRUSH_SIZES[i]);
                break;
            }
        }
    });

    key("},]", function () {
        var size = controller.getBrushSize();

        for (var i = 0; i < BRUSH_SIZES.length; i++) {
            if (size < BRUSH_SIZES[i]) {
                controller.setBrushSize(BRUSH_SIZES[i]);
                break;
            }
        }
    });
}

CPBrushPalette.prototype = Object.create(_CPPalette2["default"].prototype);
CPBrushPalette.prototype.constructor = CPBrushPalette;

CPBrushPalette.CPBrushPreview = function (controller) {
    var size = 16,
        canvas = document.createElement("canvas"),
        canvasContext = canvas.getContext("2d"),
        mouseCaptured = false;

    function paint() {
        canvasContext.clearRect(0, 0, canvas.width, canvas.height);

        canvasContext.beginPath();
        canvasContext.arc(canvas.width / 2, canvas.height / 2, size / 2 * window.devicePixelRatio, 0, Math.PI * 2);
        canvasContext.stroke();
    }

    function handleMouseDrag(e) {
        var offset = $(canvas).offset(),
            pt = { x: e.pageX - offset.left, y: e.pageY - offset.top },
            x = pt.x - $(canvas).width() / 2,
            y = pt.y - $(canvas).height() / 2,
            newSize = Math.round(Math.sqrt(x * x + y * y) * 2);

        size = Math.max(1, Math.min(200, newSize));

        paint();
        controller.setBrushSize(size);
    }

    function handleMouseUp(e) {
        if (mouseCaptured) {
            mouseCaptured = false;
            window.removeEventListener('mouseup', handleMouseUp);
            window.removeEventListener('mousemove', handleMouseDrag);
        }
    }

    this.getElement = function () {
        return canvas;
    };

    canvas.addEventListener('mousedown', function (e) {
        if (!mouseCaptured) {
            mouseCaptured = true;

            window.addEventListener('mouseup', handleMouseUp);
            window.addEventListener('mousemove', handleMouseDrag);

            handleMouseDrag(e);
        }
    });

    controller.on("toolChange", function (tool, toolInfo) {
        if (toolInfo.size != size) {
            size = toolInfo.size;
            paint();
        }
    });

    canvas.width = 64;
    canvas.height = 64;

    if (window.devicePixelRatio > 1) {
        canvas.style.width = canvas.width + 'px';
        canvas.style.height = canvas.height + 'px';

        canvas.width = canvas.width * window.devicePixelRatio;
        canvas.height = canvas.height * window.devicePixelRatio;
    }

    canvas.className = 'chickenpaint-brush-preview';

    canvasContext.strokeStyle = 'black';
    canvasContext.lineWidth = 1.0 * window.devicePixelRatio;

    paint();
};
module.exports = exports["default"];

},{"../ChickenPaint":1,"../engine/CPLayer":11,"../util/CPColor":46,"./CPCheckbox":20,"./CPColorSwatch":24,"./CPGUIUtils":25,"./CPPalette":31,"./CPSlider":36}],19:[function(require,module,exports){
/*
    ChickenPaint
    
    ChickenPaint is a translation of ChibiPaint from Java to JavaScript
    by Nicholas Sherlock / Chicken Smoothie.
    
    ChibiPaint is Copyright (c) 2006-2008 Marc Schefer

    ChickenPaint is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    ChickenPaint is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with ChickenPaint. If not, see <http://www.gnu.org/licenses/>.
*/

"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports["default"] = CPCanvas;

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

var _utilCPRect = require("../util/CPRect");

var _utilCPRect2 = _interopRequireDefault(_utilCPRect);

var _utilCPTransform = require("../util/CPTransform");

var _utilCPTransform2 = _interopRequireDefault(_utilCPTransform);

var _utilCPWacomTablet = require("../util/CPWacomTablet");

var _utilCPWacomTablet2 = _interopRequireDefault(_utilCPWacomTablet);

var _utilCPBezier = require("../util/CPBezier");

var _utilCPBezier2 = _interopRequireDefault(_utilCPBezier);

var _engineCPBrushInfo = require("../engine/CPBrushInfo");

var _engineCPBrushInfo2 = _interopRequireDefault(_engineCPBrushInfo);

var _CPGUIUtils = require("./CPGUIUtils");

var _CPScrollbar = require("./CPScrollbar");

var _CPScrollbar2 = _interopRequireDefault(_CPScrollbar);

function CPCanvas(controller) {
    var BUTTON_PRIMARY = 0,
        BUTTON_WHEEL = 1,
        BUTTON_SECONDARY = 2,
        MIN_ZOOM = 0.10,
        MAX_ZOOM = 16.0;

    var that = this,
        canvasContainer = document.createElement("div"),
        canvasContainerTop = document.createElement("div"),
        canvasContainerBottom = document.createElement("div"),

    // Our canvas that fills the entire screen
    canvas = document.createElement("canvas"),
        canvasContext = canvas.getContext("2d"),

    // Our cache of the artwork's fusion to be drawn onto our main canvas using our current transform
    artworkCanvas = document.createElement("canvas"),
        artworkCanvasContext = artworkCanvas.getContext("2d"),
        checkerboardPattern = (0, _CPGUIUtils.createCheckerboardPattern)(canvasContext),
        artwork = controller.getArtwork(),

    // Canvas transformations
    zoom = 1,
        offsetX = 0,
        offsetY = 0,
        canvasRotation = 0.0,
        transform = new _utilCPTransform2["default"](),
        interpolation = false,

    // Grid options
    showGrid = false,
        gridSize = 32,
        mouseX = 0,
        mouseY = 0,
        brushPreview = false,

    /* The last rectangle we dirtied with a brush preview circle, or null if one hasn't been drawn yet */
    oldPreviewRect = null,
        defaultCursor = "default",
        moveCursor = "grab",
        movingCursor = "grabbing",
        crossCursor = "crosshair",
        mouseIn = false,
        mouseDown = false,
        wacomPenDown = false,
        dontStealFocus = false,

    /* The area of the document that should have its layers fused and repainted to the screen
     * (i.e. an area modified by drawing tools). 
     * 
     * Initially set to the size of the artwork so we can repaint the whole thing.
     */
    artworkUpdateRegion = new _utilCPRect2["default"](0, 0, artwork.width, artwork.height),

    /**
     * The area of the canvas that should be repainted to the screen during the next repaint internal (in canvas
     * coordinates).
     */
    repaintRegion = new _utilCPRect2["default"](0, 0, 0, 0),
        scheduledRepaint = false,

    //
    // Modes system: modes control the way the GUI is reacting to the user input
    // All the tools are implemented through modes
    //

    defaultMode,
        colorPickerMode,
        moveCanvasMode,
        rotateCanvasMode,
        floodFillMode,
        gradientFillMode,
        rectSelectionMode,
        moveToolMode,

    // this must correspond to the stroke modes defined in CPToolInfo
    drawingModes = [],
        curDrawMode,
        curSelectedMode,
        activeMode,
        horzScroll = new _CPScrollbar2["default"](false),
        vertScroll = new _CPScrollbar2["default"](true),
        tablet = _utilCPWacomTablet2["default"].getRef();

    Math.sign = Math.sign || function (x) {
        x = +x; // convert to a number
        if (x === 0 || isNaN(x)) {
            return x;
        }
        return x > 0 ? 1 : -1;
    };

    // Parent class with empty event handlers for those drawing modes that don't need every event
    function CPMode() {}

    CPMode.prototype.keyDown = function (e) {
        if (e.keyCode == 32 /* Space */) {
                // Stop the page from scrolling in modes that don't care about space
                e.preventDefault();
            }
    };

    CPMode.prototype.mouseMoved = CPMode.prototype.paint = CPMode.prototype.mousePressed = CPMode.prototype.mouseDragged = CPMode.prototype.mouseReleased = CPMode.prototype.keyUp = function () {};

    //
    // Default UI Mode when not doing anything: used to start the other modes
    //

    function CPDefaultMode() {}

    CPDefaultMode.prototype = Object.create(CPMode.prototype);
    CPDefaultMode.prototype.constructor = CPDefaultMode;

    CPDefaultMode.prototype.mousePressed = function (e, pressure) {
        var spacePressed = key.isPressed("space");

        // FIXME: replace the moveToolMode hack by a new and improved system
        if (!spacePressed && e.button == BUTTON_PRIMARY && (!e.altKey || curSelectedMode == moveToolMode)) {

            if (!artwork.getActiveLayer().visible && curSelectedMode != rotateCanvasMode && curSelectedMode != rectSelectionMode) {
                return; // don't draw on a hidden layer
            }

            /* Switch to the new mode before trying to repaint the brush preview (the new mode
             * might want to erase it!
             */
            activeMode = curSelectedMode;

            repaintBrushPreview();

            activeMode.mousePressed(e, pressure);
        } else if (!spacePressed && (e.button == BUTTON_SECONDARY || e.button == BUTTON_PRIMARY && e.altKey)) {
            repaintBrushPreview();

            activeMode = colorPickerMode;
            activeMode.mousePressed(e, pressure);
        } else if ((e.button == BUTTON_WHEEL || spacePressed) && !e.altKey) {
            repaintBrushPreview();

            activeMode = moveCanvasMode;
            activeMode.mousePressed(e, pressure);
        } else if ((e.button == BUTTON_WHEEL || spacePressed) && e.altKey) {
            repaintBrushPreview();

            activeMode = rotateCanvasMode;
            activeMode.mousePressed(e, pressure);
        }
    };

    CPDefaultMode.prototype.mouseMoved = function (e, pressure) {
        var spacePressed = key.isPressed("space");

        if (!spacePressed && curSelectedMode == curDrawMode) {
            brushPreview = true;

            var
            //pf = coordToDocument(mouseCoordToCanvas({x: e.pageX, y: e.pageY})),
            r = getBrushPreviewOval();

            r.grow(2, 2);

            // If a brush preview was drawn previously, stretch the repaint region to remove that old copy
            if (oldPreviewRect != null) {
                r.union(oldPreviewRect);
                oldPreviewRect = null;
            }

            /*            if (artwork.isPointWithin(pf.x, pf.y)) {
                            setCursor(defaultCursor); // FIXME find a cursor that everyone likes
                        } else { */
            setCursor(defaultCursor);
            //}

            repaintRect(r);
        }
    };

    CPDefaultMode.prototype.keyDown = function (e) {
        if (e.keyCode == 32 /* Space */) {
                if (e.altKey) {
                    activeMode = rotateCanvasMode;
                } else {
                    activeMode = moveCanvasMode;
                }
                activeMode.keyDown(e);
            }
    };

    CPDefaultMode.prototype.paint = function () {
        if (brushPreview && curSelectedMode == curDrawMode) {
            brushPreview = false;

            var r = getBrushPreviewOval();

            canvasContext.beginPath();

            canvasContext.arc((r.left + r.right) / 2, (r.top + r.bottom) / 2, r.getWidth() / 2, 0, Math.PI * 2);

            canvasContext.stroke();

            r.grow(2, 2);

            if (oldPreviewRect == null) {
                oldPreviewRect = r;
            } else {
                oldPreviewRect.union(r);
            }
        }
    };

    function CPFreehandMode() {
        this.dragLeft = false, this.smoothMouse = { x: 0.0, y: 0.0 };
    }

    CPFreehandMode.prototype = Object.create(CPMode.prototype);
    CPFreehandMode.prototype.constructor = CPFreehandMode;

    CPFreehandMode.prototype.mousePressed = function (e, pressure) {
        if (!this.dragLeft && e.button == BUTTON_PRIMARY) {
            var pf = coordToDocument({ x: mouseX, y: mouseY });

            this.dragLeft = true;
            artwork.beginStroke(pf.x, pf.y, pressure);

            this.smoothMouse = pf;
        }
    };

    CPFreehandMode.prototype.mouseDragged = function (e, pressure) {
        var pf = coordToDocument({ x: mouseX, y: mouseY }),
            smoothing = Math.min(0.999, Math.pow(controller.getBrushInfo().smoothing, 0.3));

        this.smoothMouse.x = (1.0 - smoothing) * pf.x + smoothing * this.smoothMouse.x;
        this.smoothMouse.y = (1.0 - smoothing) * pf.y + smoothing * this.smoothMouse.y;

        if (this.dragLeft) {
            artwork.continueStroke(this.smoothMouse.x, this.smoothMouse.y, pressure);
        }
    };

    CPFreehandMode.prototype.mouseReleased = function (e) {
        if (this.dragLeft && e.button == BUTTON_PRIMARY) {
            this.dragLeft = false;
            artwork.endStroke();

            activeMode = defaultMode; // yield control to the default mode
        }
    };

    CPFreehandMode.prototype.mouseMoved = CPFreehandMode.prototype.paint = function (e) {};

    function CPLineMode() {
        var dragLine = false,
            dragLineFrom,
            dragLineTo,
            LINE_PREVIEW_WIDTH = 1;

        this.mousePressed = function (e) {
            if (!dragLine && e.button == BUTTON_PRIMARY) {
                dragLine = true;
                dragLineFrom = dragLineTo = { x: mouseX + 0.5, y: mouseY + 0.5 };
            }
        };

        this.mouseDragged = function (e) {
            var
            // The old line position that we'll invalidate for redraw
            invalidateRect = new _utilCPRect2["default"](Math.min(dragLineFrom.x, dragLineTo.x) - LINE_PREVIEW_WIDTH - 1, Math.min(dragLineFrom.y, dragLineTo.y) - LINE_PREVIEW_WIDTH - 1, Math.max(dragLineFrom.x, dragLineTo.x) + LINE_PREVIEW_WIDTH + 1 + 1, Math.max(dragLineFrom.y, dragLineTo.y) + LINE_PREVIEW_WIDTH + 1 + 1);

            dragLineTo = { x: mouseX + 0.5, y: mouseY + 0.5 }; // Target centre of pixel

            if (e.shiftKey) {
                // Snap to nearest 45 degrees
                var snap = Math.PI / 4,
                    angle = Math.round(Math.atan2(dragLineTo.y - dragLineFrom.y, dragLineTo.x - dragLineFrom.x) / snap);

                switch (angle) {
                    case 0:
                    case 4:
                        dragLineTo.y = dragLineFrom.y;
                        break;

                    case 2:
                    case 6:
                        dragLineTo.x = dragLineFrom.x;
                        break;

                    default:
                        angle *= snap;

                        var length = Math.sqrt((dragLineTo.y - dragLineFrom.y) * (dragLineTo.y - dragLineFrom.y) + (dragLineTo.x - dragLineFrom.x) * (dragLineTo.x - dragLineFrom.x));

                        dragLineTo.x = dragLineFrom.x + length * Math.cos(angle);
                        dragLineTo.y = dragLineFrom.y + length * Math.sin(angle);
                }
            }

            // The new line position
            invalidateRect.union(new _utilCPRect2["default"](Math.min(dragLineFrom.x, dragLineTo.x) - LINE_PREVIEW_WIDTH - 1, Math.min(dragLineFrom.y, dragLineTo.y) - LINE_PREVIEW_WIDTH - 1, Math.max(dragLineFrom.x, dragLineTo.x) + LINE_PREVIEW_WIDTH + 1 + 1, Math.max(dragLineFrom.y, dragLineTo.y) + LINE_PREVIEW_WIDTH + 1 + 1));

            repaintRect(invalidateRect);
        };

        this.mouseReleased = function (e) {
            if (dragLine && e.button == BUTTON_PRIMARY) {
                var from = coordToDocument(dragLineFrom),
                    to = coordToDocument(dragLineTo);

                dragLine = false;

                this.drawLine(from, to);

                var invalidateRect = new _utilCPRect2["default"](Math.min(dragLineFrom.x, dragLineTo.x) - LINE_PREVIEW_WIDTH - 1, Math.min(dragLineFrom.y, dragLineTo.y) - LINE_PREVIEW_WIDTH - 1, Math.max(dragLineFrom.x, dragLineTo.x) + LINE_PREVIEW_WIDTH + 1 + 1, Math.max(dragLineFrom.y, dragLineTo.y) + LINE_PREVIEW_WIDTH + 1 + 1);

                repaintRect(invalidateRect);

                activeMode = defaultMode; // yield control to the default mode
            }
        };

        this.paint = function () {
            if (dragLine) {
                canvasContext.lineWidth = LINE_PREVIEW_WIDTH;
                canvasContext.beginPath();
                canvasContext.moveTo(dragLineFrom.x, dragLineFrom.y);
                canvasContext.lineTo(dragLineTo.x, dragLineTo.y);
                canvasContext.stroke();
            }
        };
    }

    CPLineMode.prototype = Object.create(CPMode.prototype);
    CPLineMode.prototype.constructor = CPLineMode;

    CPLineMode.prototype.drawLine = function (from, to) {
        artwork.beginStroke(from.x, from.y, 1);
        artwork.continueStroke(to.x, to.y, 1);
        artwork.endStroke();
    };

    function CPBezierMode() {
        var BEZIER_POINTS = 500,
            BEZIER_POINTS_PREVIEW = 100;

        var dragBezier = false,
            dragBezierMode = 0,
            // 0 Initial drag, 1 first control point, 2 second point
        dragBezierP0,
            dragBezierP1,
            dragBezierP2,
            dragBezierP3;

        this.mousePressed = function (e) {
            var spacePressed = key.isPressed("space"),
                p = coordToDocument(mouseCoordToCanvas({ x: e.pageX, y: e.pageY }));

            if (!dragBezier && !spacePressed && e.button == BUTTON_PRIMARY) {
                dragBezier = true;
                dragBezierMode = 0;
                dragBezierP0 = dragBezierP1 = dragBezierP2 = dragBezierP3 = p;
            }
        };

        this.mouseDragged = function (e) {
            var p = coordToDocument(mouseCoordToCanvas({ x: e.pageX, y: e.pageY }));

            if (dragBezier && dragBezierMode == 0) {
                dragBezierP2 = dragBezierP3 = p;
                that.repaintAll();
            }
        };

        this.mouseReleased = function (e) {
            if (dragBezier && e.button == BUTTON_PRIMARY) {
                if (dragBezierMode == 0) {
                    dragBezierMode = 1;
                } else if (dragBezierMode == 1) {
                    dragBezierMode = 2;
                } else if (dragBezierMode == 2) {
                    dragBezier = false;

                    var p0 = dragBezierP0,
                        p1 = dragBezierP1,
                        p2 = dragBezierP2,
                        p3 = dragBezierP3,
                        bezier = new _utilCPBezier2["default"]();

                    bezier.x0 = p0.x;
                    bezier.y0 = p0.y;
                    bezier.x1 = p1.x;
                    bezier.y1 = p1.y;
                    bezier.x2 = p2.x;
                    bezier.y2 = p2.y;
                    bezier.x3 = p3.x;
                    bezier.y3 = p3.y;

                    var x = new Array(BEZIER_POINTS),
                        y = new Array(BEZIER_POINTS);

                    bezier.compute(x, y, BEZIER_POINTS);

                    artwork.beginStroke(x[0], y[0], 1);
                    for (var i = 1; i < BEZIER_POINTS; i++) {
                        artwork.continueStroke(x[i], y[i], 1);
                    }
                    artwork.endStroke();
                    that.repaintAll();

                    activeMode = defaultMode; // yield control to the default mode
                }
            }
        };

        this.mouseMoved = function (e) {
            var p = coordToDocument(mouseCoordToCanvas({ x: e.pageX, y: e.pageY }));

            if (dragBezier) {
                if (dragBezierMode == 1) {
                    dragBezierP1 = p;
                } else if (dragBezierMode == 2) {
                    dragBezierP2 = p;
                }
                that.repaintAll(); // FIXME: repaint only the bezier region
            }
        };

        this.paint = function () {
            if (dragBezier) {
                var bezier = new _utilCPBezier2["default"](),
                    p0 = coordToDisplay(dragBezierP0),
                    p1 = coordToDisplay(dragBezierP1),
                    p2 = coordToDisplay(dragBezierP2),
                    p3 = coordToDisplay(dragBezierP3);

                bezier.x0 = p0.x;
                bezier.y0 = p0.y;
                bezier.x1 = p1.x;
                bezier.y1 = p1.y;
                bezier.x2 = p2.x;
                bezier.y2 = p2.y;
                bezier.x3 = p3.x;
                bezier.y3 = p3.y;

                var x = new Array(BEZIER_POINTS_PREVIEW),
                    y = new Array(BEZIER_POINTS_PREVIEW);

                bezier.compute(x, y, BEZIER_POINTS_PREVIEW);

                canvasContext.beginPath();

                canvasContext.moveTo(x[0], y[0]);
                for (var i = 1; i < BEZIER_POINTS_PREVIEW; i++) {
                    canvasContext.lineTo(x[i], y[i]);
                }

                canvasContext.moveTo(~ ~p0.x, ~ ~p0.y);
                canvasContext.lineTo(~ ~p1.x, ~ ~p1.y);

                canvasContext.moveTo(~ ~p2.x, ~ ~p2.y);
                canvasContext.lineTo(~ ~p3.x, ~ ~p3.y);

                canvasContext.stroke();
            }
        };
    }

    CPBezierMode.prototype = Object.create(CPMode.prototype);
    CPBezierMode.prototype.constructor = CPBezierMode;

    function CPColorPickerMode() {
        var mouseButton;

        this.mousePressed = function (e) {
            mouseButton = e.button;

            setCursor(crossCursor);

            this.mouseDragged(e);
        };

        this.mouseDragged = function (e) {
            var pf = coordToDocument(mouseCoordToCanvas({ x: e.pageX, y: e.pageY }));

            if (artwork.isPointWithin(pf.x, pf.y)) {
                controller.setCurColorRgb(artwork.colorPicker(pf.x, pf.y));
            }
        };

        this.mouseReleased = function (e) {
            if (e.button == mouseButton) {
                setCursor(defaultCursor);
                activeMode = defaultMode; // yield control to the default mode
            }
        };
    }

    CPColorPickerMode.prototype = Object.create(CPMode.prototype);
    CPColorPickerMode.prototype.constructor = CPColorPickerMode;

    function CPMoveCanvasMode() {
        var dragMiddle = false,
            dragMoveX,
            dragMoveY,
            dragMoveOffset,
            dragMoveButton;

        this.keyDown = function (e) {
            if (e.keyCode == 32 /* Space */) {
                    if (!dragMiddle) {
                        setCursor(moveCursor);
                    }
                    e.preventDefault();
                }
        };

        this.keyUp = function (e) {
            if (!dragMiddle && e.keyCode == 32 /* Space */) {
                    setCursor(defaultCursor);
                    activeMode = defaultMode; // yield control to the default mode
                }
        };

        this.mousePressed = function (e) {
            var p = { x: e.pageX, y: e.pageY },
                spacePressed = key.isPressed("space");

            if (!dragMiddle && (e.button == BUTTON_WHEEL || spacePressed)) {
                repaintBrushPreview();

                dragMiddle = true;
                dragMoveButton = e.button;
                dragMoveX = p.x;
                dragMoveY = p.y;
                dragMoveOffset = that.getOffset();
                setCursor(movingCursor);
            }
        };

        this.mouseDragged = function (e) {
            if (dragMiddle) {
                var p = { x: e.pageX, y: e.pageY };

                that.setOffset(dragMoveOffset.x + p.x - dragMoveX, dragMoveOffset.y + p.y - dragMoveY);
                that.repaintAll();
            }
        };

        this.mouseReleased = function (e) {
            if (dragMiddle && e.button == dragMoveButton) {
                dragMiddle = false;
                setCursor(defaultCursor);

                activeMode = defaultMode; // yield control to the default mode
            }
        };
    }

    CPMoveCanvasMode.prototype = Object.create(CPMode.prototype);
    CPMoveCanvasMode.prototype.constructor = CPFloodFillMode;

    function CPFloodFillMode() {}

    CPFloodFillMode.prototype = Object.create(CPMode.prototype);
    CPFloodFillMode.prototype.constructor = CPFloodFillMode;

    CPFloodFillMode.prototype.mousePressed = function (e) {
        var pf = coordToDocument(mouseCoordToCanvas({ x: e.pageX, y: e.pageY }));

        if (artwork.isPointWithin(pf.x, pf.y)) {
            artwork.floodFill(pf.x, pf.y);
            that.repaintAll();
        }

        activeMode = defaultMode; // yield control to the default mode
    };

    function CPRectSelectionMode() {
        var firstClick,
            curRect = new _utilCPRect2["default"](0, 0, 0, 0);

        this.mousePressed = function (e) {
            var p = coordToDocumentInt(mouseCoordToCanvas({ x: e.pageX, y: e.pageY }));

            curRect.makeEmpty();
            firstClick = p;

            that.repaintAll();
        };

        this.mouseDragged = function (e) {
            var p = coordToDocumentInt(mouseCoordToCanvas({ x: e.pageX, y: e.pageY })),
                square = e.shiftKey,
                squareDist = ~ ~Math.max(Math.abs(p.x - firstClick.x), Math.abs(p.y - firstClick.y));

            if (p.x >= firstClick.x) {
                curRect.left = firstClick.x;
                curRect.right = (square ? firstClick.x + squareDist : p.x) + 1;
            } else {
                curRect.left = square ? firstClick.x - squareDist : p.x;
                curRect.right = firstClick.x + 1;
            }

            if (p.y >= firstClick.y) {
                curRect.top = firstClick.y;
                curRect.bottom = (square ? firstClick.y + squareDist : p.y) + 1;
            } else {
                curRect.top = square ? firstClick.y - squareDist : p.y;
                curRect.bottom = firstClick.y + 1;
            }

            that.repaintAll();
        };

        this.mouseReleased = function (e) {
            artwork.rectangleSelection(curRect);
            curRect.makeEmpty();

            activeMode = defaultMode; // yield control to the default mode
            that.repaintAll();
        };

        this.paint = function () {
            if (!curRect.isEmpty()) {
                canvasContext.lineWidth = 1;
                plotSelectionRect(canvasContext, curRect);
            }
        };
    };

    CPRectSelectionMode.prototype = Object.create(CPMode.prototype);
    CPRectSelectionMode.prototype.constructor = CPRectSelectionMode;

    function CPMoveToolMode() {
        var firstClick;

        this.mousePressed = function (e) {
            var p = coordToDocument(mouseCoordToCanvas({ x: e.pageX, y: e.pageY }));

            firstClick = p;

            artwork.beginPreviewMode(e.altKey);

            // FIXME: The following hack avoids a slight display glitch
            // if the whole move tool mess is fixed it probably won't be necessary anymore
            artwork.move(0, 0);
        };

        this.mouseDragged = function (e) {
            var p = coordToDocument(mouseCoordToCanvas({ x: e.pageX, y: e.pageY }));

            artwork.move(Math.round(p.x - firstClick.x), Math.round(p.y - firstClick.y));

            that.repaintAll();
        };

        this.mouseReleased = function (e) {
            artwork.endPreviewMode();

            activeMode = defaultMode; // yield control to the default mode
            that.repaintAll();
        };
    }

    CPMoveToolMode.prototype = Object.create(CPMode.prototype);
    CPMoveToolMode.prototype.constructor = CPMoveToolMode;

    function CPRotateCanvasMode() {
        var firstClick,
            initAngle = 0.0,
            initTransform,
            dragged = false;

        this.mousePressed = function (e) {
            firstClick = { x: e.pageX - $(canvas).offset().left, y: e.pageY - $(canvas).offset().top };

            initAngle = that.getRotation();
            initTransform = transform.clone();

            dragged = false;

            repaintBrushPreview();
        };

        this.mouseDragged = function (e) {
            dragged = true;

            var p = { x: e.pageX - $(canvas).offset().left, y: e.pageY - $(canvas).offset().top },
                displayCenter = { x: $(canvas).width() / 2, y: $(canvas).height() / 2 },
                canvasCenter = { x: canvas.width / 2, y: canvas.height / 2 },
                deltaAngle = Math.atan2(p.y - displayCenter.y, p.x - displayCenter.x) - Math.atan2(firstClick.y - displayCenter.y, firstClick.x - displayCenter.x),
                rotTrans = new _utilCPTransform2["default"]();

            rotTrans.rotateAroundPoint(deltaAngle, canvasCenter.x, canvasCenter.y);

            rotTrans.multiply(initTransform);

            that.setRotation(initAngle + deltaAngle);
            that.setOffset(~ ~rotTrans.getTranslateX(), ~ ~rotTrans.getTranslateY());
            that.repaintAll();
        };

        /**
         * When the mouse is released after rotation, we might want to snap our angle to the nearest 90 degree mark.
         */
        function finishRotation() {
            var ROTATE_SNAP_DEGREES = 5;

            var nearest90 = Math.round(canvasRotation / (Math.PI / 2)) * Math.PI / 2;

            if (Math.abs(canvasRotation - nearest90) < ROTATE_SNAP_DEGREES / 180 * Math.PI) {
                var deltaAngle = nearest90 - initAngle,
                    center = { x: canvas.width / 2, y: canvas.height / 2 },
                    rotTrans = new _utilCPTransform2["default"]();

                rotTrans.rotateAroundPoint(deltaAngle, center.x, center.y);

                rotTrans.multiply(initTransform);

                that.setRotation(initAngle + deltaAngle);
                that.setOffset(~ ~rotTrans.getTranslateX(), ~ ~rotTrans.getTranslateY());

                that.repaintAll();
            }
        }

        this.mouseReleased = function (e) {
            if (dragged) {
                finishRotation();
            } else {
                that.resetRotation();
            }

            activeMode = defaultMode; // yield control to the default mode
        };
    }

    CPRotateCanvasMode.prototype = Object.create(CPMode.prototype);
    CPRotateCanvasMode.prototype.constructor = CPRotateCanvasMode;

    function CPGradientFillMode() {
        // Super constructor
        CPLineMode.call(this);
    }

    CPGradientFillMode.prototype = Object.create(CPLineMode.prototype);
    CPGradientFillMode.prototype.constructor = CPGradientFillMode;

    CPGradientFillMode.prototype.drawLine = function (from, to) {
        artwork.gradientFill(Math.round(from.x), Math.round(from.y), Math.round(to.x), Math.round(to.y), controller.getCurGradient());
    };

    function requestFocusInWindow() {
        // TODO
    }

    function setCursor(cursor) {
        if (canvas.getAttribute("data-cursor") != cursor) {
            canvas.setAttribute("data-cursor", cursor);
        }
    }

    /**
     * @param visMin The smallest coordinate in this axis in which the drawing appears
     * @param visWidth The extent of the drawing in this axis
     * @param viewSize The extent of the screen canvas in this axis
     * @param offset The present pixel offset of the drawing in this axis
     */
    function updateScrollBar(scrollbar, visMin, visWidth, viewSize, offset) {
        var xMin = visMin - viewSize - offset + visWidth / 4,
            xMax = visMin + visWidth - offset - visWidth / 4;

        scrollbar.setValues(-offset, viewSize, xMin, xMax);

        scrollbar.setBlockIncrement(Math.max(1, ~ ~(viewSize * .66)));
        scrollbar.setUnitIncrement(Math.max(1, ~ ~(viewSize * .05)));
    }

    function updateScrollBars() {
        if (horzScroll == null || vertScroll == null || horzScroll.getValueIsAdjusting() || vertScroll.getValueIsAdjusting()) {
            return;
        }

        var visibleRect = getRefreshArea(new _utilCPRect2["default"](0, 0, artworkCanvas.width, artworkCanvas.height));

        updateScrollBar(horzScroll, visibleRect.left, visibleRect.getWidth(), $(canvas).width(), that.getOffset().x);
        updateScrollBar(vertScroll, visibleRect.top, visibleRect.getHeight(), $(canvas).height(), that.getOffset().y);
    }

    function updateTransform() {
        transform.setToIdentity();
        transform.translate(offsetX, offsetY);
        transform.scale(zoom, zoom);
        transform.rotate(canvasRotation);

        updateScrollBars();
        that.repaintAll();
    }

    /**
     * Convert a canvas-relative coordinate into document coordinates.
     */
    function coordToDocument(coord) {
        // TODO cache inverted transform
        return transform.getInverted().transformPoint(coord.x, coord.y);
    }

    /**
     * Convert a canvas-relative coordinate into document coordinates.
     */
    function coordToDocumentInt(coord) {
        // TODO cache inverted transform
        var result = coordToDocument(coord);

        result.x = Math.floor(result.x);
        result.y = Math.floor(result.y);

        return result;
    }

    /**
     * Convert a {x: pageX, y: pageY} co-ordinate pair from a mouse event to canvas-relative coordinates.
     */
    function mouseCoordToCanvas(coord) {
        var rect = canvas.getBoundingClientRect();

        return { x: coord.x - rect.left - window.pageXOffset, y: coord.y - rect.top - window.pageYOffset };
    }

    function coordToDisplay(p) {
        return transform.transformPoint(p.x, p.y);
    }

    function coordToDisplayInt(p) {
        var result = coordToDisplay(p);

        result.x = Math.round(result.x);
        result.y = Math.round(result.y);

        return result;
    }

    /**
     * Stroke a selection rectangle that encloses the pixels in the given rectangle (in document co-ordinates).
     */
    function plotSelectionRect(context, rect) {
        context.beginPath();

        var center = coordToDisplay({ x: (rect.left + rect.right) / 2, y: (rect.top + rect.bottom) / 2 }),
            coords = [{ x: rect.left, y: rect.top }, { x: rect.right, y: rect.top }, { x: rect.right, y: rect.bottom }, { x: rect.left, y: rect.bottom }];

        for (var i = 0; i < coords.length; i++) {
            coords[i] = coordToDisplayInt(coords[i]);

            // Need to inset the co-ordinates by 0.5 display pixels for the line to pass through the middle of the display pixel
            coords[i].x += Math.sign(center.x - coords[i].x) * 0.5;
            coords[i].y += Math.sign(center.y - coords[i].y) * 0.5;
        }

        context.moveTo(coords[0].x, coords[0].y);
        for (var i = 1; i < coords.length; i++) {
            context.lineTo(coords[i].x, coords[i].y);
        }
        context.lineTo(coords[0].x, coords[0].y);

        context.stroke();
    }

    /**
     * Take a CPRect of document coordinates and return a CPRect of canvas coordinates to repaint for that region.
     */
    function getRefreshArea(r) {
        var p1 = coordToDisplayInt({ x: r.left - 1, y: r.top - 1 }),
            p2 = coordToDisplayInt({ x: r.left - 1, y: r.bottom }),
            p3 = coordToDisplayInt({ x: r.right, y: r.top - 1 }),
            p4 = coordToDisplayInt({ x: r.right, y: r.bottom }),
            r2 = new _utilCPRect2["default"](Math.min(Math.min(p1.x, p2.x), Math.min(p3.x, p4.x)), Math.min(Math.min(p1.y, p2.y), Math.min(p3.y, p4.y)), Math.max(Math.max(p1.x, p2.x), Math.max(p3.x, p4.x)) + 1, Math.max(Math.max(p1.y, p2.y), Math.max(p3.y, p4.y)) + 1);

        r2.grow(2, 2); // to be sure to include everything

        return r2;
    }

    /**
     * Repaint the area of the canvas that was last occupied by the brush preview circle (useful for erasing
     * the brush preview when switching drawing modes to one that won't be using a preview).
     */
    function repaintBrushPreview() {
        if (oldPreviewRect != null) {
            var r = oldPreviewRect;
            oldPreviewRect = null;
            repaintRect(r);
        }
    }

    /**
     * Get a rectangle that encloses the preview brush, in screen coordinates.
     */
    function getBrushPreviewOval() {
        var brushSize = controller.getBrushSize() * zoom;

        return new _utilCPRect2["default"](mouseX - brushSize / 2, mouseY - brushSize / 2, mouseX + brushSize / 2, mouseY + brushSize / 2);
    }

    /**
     * Adjust the current offset to bring the center of the artwork to the center of the canvas
     */
    function centerCanvas() {
        var width = canvas.width,
            height = canvas.height,
            artworkCenter = coordToDisplay({ x: artwork.width / 2, y: artwork.height / 2 });

        that.setOffset(Math.round(offsetX + width / 2.0 - artworkCenter.x), Math.round(offsetY + height / 2.0 - artworkCenter.y));
    }

    this.setZoom = function (_zoom) {
        zoom = _zoom;
        updateTransform();
    };

    this.getZoom = function () {
        return zoom;
    };

    this.setGridSize = function (_gridSize) {
        gridSize = Math.max(Math.round(_gridSize), 1);
        this.repaintAll();
    };

    this.getGridSize = function () {
        return gridSize;
    };

    this.setOffset = function (x, y) {
        if (isNaN(x) || isNaN(y)) {
            console.log("Bad offset");
        } else {
            offsetX = x;
            offsetY = y;
            updateTransform();
        }
    };

    this.getOffset = function () {
        return { x: offsetX, y: offsetY };
    };

    this.setInterpolation = function (enabled) {
        interpolation = enabled;

        var browserProperties = ["imageSmoothingEnabled", "mozImageSmoothingEnabled", "webkitImageSmoothingEnabled", "msImageSmoothingEnabled"];

        for (var i = 0; i < browserProperties.length; i++) {
            if (browserProperties[i] in canvasContext) {
                canvasContext[browserProperties[i]] = enabled;
                break;
            }
        }

        this.repaintAll();
    };

    this.setRotation = function (angle) {
        canvasRotation = angle % (2 * Math.PI);
        updateTransform();
    };

    /**
     * Get canvas rotation in radians.
     * 
     * @return float
     */
    this.getRotation = function () {
        return canvasRotation;
    };

    /**
     * Get the rotation as the nearest number of whole 90 degree clockwise rotations ([0..3])
     */
    this.getRotation90 = function () {
        var rotation = Math.round(this.getRotation() / Math.PI * 2);

        // Just in case:
        rotation %= 4;

        // We want [0..3] as output
        if (rotation < 0) {
            rotation += 4;
        }

        return rotation;
    };

    /**
     *
     * @param zoom float
     * @param centerX float X co-ordinate in the canvas space
     * @param centerY float Y co-ordinate in the canvas space
     */
    function zoomOnPoint(zoom, centerX, centerY) {
        zoom = Math.max(MIN_ZOOM, Math.min(MAX_ZOOM, zoom));

        if (that.getZoom() != zoom) {
            var offset = that.getOffset();

            that.setOffset(offset.x + ~ ~((centerX - offset.x) * (1 - zoom / that.getZoom())), offset.y + ~ ~((centerY - offset.y) * (1 - zoom / that.getZoom())));

            that.setZoom(zoom);

            /*CPController.CPViewInfo viewInfo = new CPController.CPViewInfo();
            viewInfo.zoom = zoom;
            viewInfo.offsetX = offsetX;
            viewInfo.offsetY = offsetY;
            controller.callViewListeners(viewInfo); TODO */

            that.repaintAll();
        }
    }

    // More advanced zoom methods
    function zoomOnCenter(zoom) {
        var width = $(canvas).width(),
            height = $(canvas).height();

        zoomOnPoint(zoom, width / 2, height / 2);
    }

    this.zoomIn = function () {
        zoomOnCenter(this.getZoom() * 2);
    };

    this.zoomOut = function () {
        zoomOnCenter(this.getZoom() * 0.5);
    };

    this.zoom100 = function () {
        zoomOnCenter(1);
        centerCanvas();
    };

    this.resetRotation = function () {
        var center = { x: canvas.width / 2, y: canvas.height / 2 },
            rotTrans = new _utilCPTransform2["default"]();

        rotTrans.rotateAroundPoint(-this.getRotation(), center.x, center.y);
        rotTrans.multiply(transform);

        this.setOffset(~ ~rotTrans.getTranslateX(), ~ ~rotTrans.getTranslateY());
        this.setRotation(0);
    };

    /**
     * Add the pointer pressure field to the given pointer event.
     */
    function getPointerPressure(e) {
        // Use Wacom pressure in preference to pointer event pressure (if present)
        if (wacomPenDown) {
            return tablet.getPressure();
        } else {
            /* In the Pointer Events API, mice have a default pressure of 0.5, but we want 1.0. Since we can't 
             * distinguish between mice and pens at this point, we don't have any better options:
             */
            return e.pressure * 2;
        }
    }

    var mouseWheelDebounce = false;

    function handleMouseWheel(e) {
        if (e.deltaY != 0) {
            if (!mouseWheelDebounce || Math.abs(e.deltaY) > 20) {
                var factor;

                if (e.deltaY > 0) {
                    factor = 1 / 1.15;
                } else {
                    factor = 1.15;
                }

                var canvasPoint = mouseCoordToCanvas({ x: e.pageX, y: e.pageY }),
                    docPoint = coordToDocument(canvasPoint);

                if (artwork.isPointWithin(docPoint.x, docPoint.y)) {
                    zoomOnPoint(that.getZoom() * factor, canvasPoint.x, canvasPoint.y);
                } else {
                    zoomOnPoint(that.getZoom() * factor, offsetX + ~ ~(artwork.width * zoom / 2), offsetY + ~ ~(artwork.height * zoom / 2));
                }

                mouseWheelDebounce = mouseWheelDebounce || setTimeout(function () {
                    mouseWheelDebounce = false;
                }, 50);
            }

            e.preventDefault();
        }
    }

    var canvasClientRect;

    function handlePointerMove(e) {
        // Use the cached position of the canvas on the page if possible
        if (!canvasClientRect) {
            canvasClientRect = canvas.getBoundingClientRect();
        }

        var mousePos = { x: e.clientX - canvasClientRect.left, y: e.clientY - canvasClientRect.top };

        // Store these globally for the event handlers to refer to
        mouseX = mousePos.x;
        mouseY = mousePos.y;

        if (!dontStealFocus) {
            requestFocusInWindow();
        }

        if (mouseDown) {
            activeMode.mouseDragged(e, getPointerPressure(e));
        } else {
            activeMode.mouseMoved(e, getPointerPressure(e));
        }
    }

    function handlePointerUp(e) {
        mouseDown = false;
        wacomPenDown = false;
        activeMode.mouseReleased(e);
        canvas.releasePointerCapture(e.pointerId);
    }

    function handlePointerDown(e) {
        canvas.setPointerCapture(e.pointerId);

        canvasClientRect = canvas.getBoundingClientRect();

        var mousePos = { x: e.clientX - canvasClientRect.left, y: e.clientY - canvasClientRect.top };

        // Store these globally for the event handlers to refer to
        mouseX = mousePos.x;
        mouseY = mousePos.y;

        if (!mouseDown) {
            mouseDown = true;
            wacomPenDown = tablet.isPen();

            requestFocusInWindow();
            activeMode.mousePressed(e, getPointerPressure(e));
        }
    }

    function handleKeyDown(e) {
        activeMode.keyDown(e);
    }

    function handleKeyUp(e) {
        activeMode.keyUp(e);
    }

    // Get the DOM element for the canvas area
    this.getElement = function () {
        return canvasContainer;
    };

    /**
     * Schedule a repaint for the current repaint region.
     */
    function repaint() {
        if (!scheduledRepaint) {
            scheduledRepaint = true;
            window.requestAnimationFrame(function () {
                that.paint();
            });
        }
    }

    /**
     * Schedule a repaint for the entire screen.
     */
    this.repaintAll = function () {
        repaintRegion.left = 0;
        repaintRegion.top = 0;
        repaintRegion.right = canvas.width;
        repaintRegion.bottom = canvas.height;

        repaint();
    };

    /**
     * Schedule a repaint for an area of the screen for later.
     * 
     * @param rect CPRect Region that should be repainted using display coordinates
     */
    function repaintRect(rect) {
        repaintRegion.union(rect);

        repaint();
    };

    this.paint = function () {
        var drawingWasClipped = false;

        scheduledRepaint = false;

        /* Clip drawing to the area of the screen we want to repaint */
        if (!repaintRegion.isEmpty()) {
            canvasContext.save();

            if (canvasContext.clip) {
                canvasContext.beginPath();

                repaintRegion.left = repaintRegion.left | 0;
                repaintRegion.top = repaintRegion.top | 0;

                canvasContext.rect(repaintRegion.left, repaintRegion.top, Math.ceil(repaintRegion.getWidth()), Math.ceil(repaintRegion.getHeight()));

                canvasContext.clip();
            }

            drawingWasClipped = true;
        }

        /* Copy pixels that changed in the document into our local fused image cache */
        if (!artworkUpdateRegion.isEmpty()) {
            var imageData = artwork.fusionLayers();

            artworkCanvasContext.putImageData(imageData, 0, 0, artworkUpdateRegion.left, artworkUpdateRegion.top, artworkUpdateRegion.right - artworkUpdateRegion.left, artworkUpdateRegion.bottom - artworkUpdateRegion.top);

            artworkUpdateRegion.makeEmpty();
        }

        canvasContext.fillStyle = '#606060';
        canvasContext.fillRect(0, 0, canvas.width, canvas.height);

        // Transform the coordinate system to bring the document into the right position on the screen (translate/zoom/etc)
        canvasContext.save();
        {
            canvasContext.setTransform(transform.m[0], transform.m[1], transform.m[2], transform.m[3], transform.m[4], transform.m[5]);

            canvasContext.fillStyle = checkerboardPattern;
            canvasContext.fillRect(0, 0, artwork.width, artwork.height);

            canvasContext.drawImage(artworkCanvas, 0, 0, artworkCanvas.width, artworkCanvas.height);
        }
        canvasContext.restore();

        // The rest of the drawing happens using the original screen coordinate system

        canvasContext.globalCompositeOperation = 'exclusion';

        if (canvasContext.globalCompositeOperation == "exclusion") {
            // White + exclusion inverts the colors underneath, giving us good contrast
            canvasContext.strokeStyle = 'white';
        } else {
            // IE Edge doesn't support Exclusion, so how about Difference with mid-grey instead
            // This is visible on black and white, but disappears on a grey background
            canvasContext.globalCompositeOperation = 'difference';
            canvasContext.strokeStyle = '#888';

            // For super dumb browsers (only support source-over), at least don't make the cursor invisible on a white BG!
            if (canvasContext.globalCompositeOperation != "difference") {
                canvasContext.strokeStyle = 'black';
            }
        }
        canvasContext.lineWidth = 1.0;

        // Draw selection
        if (!artwork.getSelection().isEmpty()) {
            canvasContext.setLineDash([3, 2]);

            plotSelectionRect(canvasContext, artwork.getSelection());

            canvasContext.setLineDash([]);
        }

        // Draw grid
        if (showGrid) {
            var bounds = artwork.getBounds(),
                gridVisualPitch = zoom * gridSize;

            /* If the grid is going to be miniscule on the screen (basically just covering/inverting the entire artwork,
             * do not paint it.
             */
            if (gridVisualPitch > 2) {
                canvasContext.beginPath();

                // Vertical lines
                for (var i = gridSize - 1; i < bounds.right; i += gridSize) {
                    var p1 = coordToDisplay({ x: i, y: bounds.top }),
                        p2 = coordToDisplay({ x: i, y: bounds.bottom });

                    canvasContext.moveTo(p1.x + 0.5, p1.y + 0.5);
                    canvasContext.lineTo(p2.x + 0.5, p2.y + 0.5);
                }

                // Horizontal lines
                for (var i = gridSize - 1; i < bounds.bottom; i += gridSize) {
                    var p1 = coordToDisplay({ x: 0, y: i }),
                        p2 = coordToDisplay({ x: bounds.right, y: i });

                    canvasContext.moveTo(p1.x + 0.5, p1.y + 0.5);
                    canvasContext.lineTo(p2.x + 0.5, p2.y + 0.5);
                }

                canvasContext.stroke();
            }
        }

        // Additional drawing by the current mode
        activeMode.paint(canvasContext);

        canvasContext.globalCompositeOperation = 'source-over';

        if (drawingWasClipped) {
            repaintRegion.makeEmpty();

            canvasContext.restore();
        }
    };

    this.showGrid = function (show) {
        showGrid = show;
        this.repaintAll();
    };

    /**
     * Resize the canvas area to the given height (in pixels)
     *
     * @param height New canvas area height in pixels
     */
    this.resize = function (height) {
        // Leave room for the bottom scrollbar
        height -= $(canvasContainerBottom).outerHeight();

        $(canvas).css('height', height + "px");

        canvas.width = $(canvas).width();
        canvas.height = height;

        canvasClientRect = null;

        centerCanvas();

        // Interpolation property gets reset when canvas resizes
        this.setInterpolation(interpolation);

        this.repaintAll();
    };

    controller.on("toolChange", function (tool, toolInfo) {
        var spacePressed = key.isPressed("space");

        if (curSelectedMode == curDrawMode) {
            curSelectedMode = drawingModes[toolInfo.strokeMode];
        }
        curDrawMode = drawingModes[toolInfo.strokeMode];

        if (!spacePressed && mouseIn) {
            brushPreview = true;

            var rect = getBrushPreviewOval();

            rect.grow(2, 2);

            if (oldPreviewRect != null) {
                rect.union(oldPreviewRect);
                oldPreviewRect = null;
            }

            repaintRect(rect);
        }
    });

    controller.on("modeChange", function (mode) {
        switch (mode) {
            case ChickenPaint.M_DRAW:
                curSelectedMode = curDrawMode;
                break;

            case ChickenPaint.M_FLOODFILL:
                curSelectedMode = floodFillMode;
                break;

            case ChickenPaint.M_GRADIENTFILL:
                curSelectedMode = gradientFillMode;
                break;

            case ChickenPaint.M_RECT_SELECTION:
                curSelectedMode = rectSelectionMode;
                break;

            case ChickenPaint.M_MOVE_TOOL:
                curSelectedMode = moveToolMode;
                break;

            case ChickenPaint.M_ROTATE_CANVAS:
                curSelectedMode = rotateCanvasMode;
                break;

            case ChickenPaint.M_COLOR_PICKER:
                curSelectedMode = colorPickerMode;
                break;
        }
    });

    //
    // Modes system: modes control the way the GUI is reacting to the user input
    // All the tools are implemented through modes
    //

    defaultMode = new CPDefaultMode();
    colorPickerMode = new CPColorPickerMode();
    moveCanvasMode = new CPMoveCanvasMode();
    rotateCanvasMode = new CPRotateCanvasMode();
    floodFillMode = new CPFloodFillMode();
    gradientFillMode = new CPGradientFillMode();
    rectSelectionMode = new CPRectSelectionMode();
    moveToolMode = new CPMoveToolMode();

    // this must correspond to the stroke modes defined in CPToolInfo
    drawingModes = [new CPFreehandMode(), new CPLineMode(), new CPBezierMode()];

    curDrawMode = drawingModes[_engineCPBrushInfo2["default"].SM_FREEHAND];
    curSelectedMode = curDrawMode;
    activeMode = defaultMode;

    artworkCanvas.width = artwork.width;
    artworkCanvas.height = artwork.height;

    canvas.width = 800;
    canvas.height = 900;
    canvas.className = "chickenpaint-canvas";
    canvas.setAttribute("touch-action", "none");

    if (!canvasContext.setLineDash) {
        canvasContext.setLineDash = function () {}; // For IE 10 and older
    }

    canvas.addEventListener("contextmenu", function (e) {
        e.preventDefault();
    });

    canvas.addEventListener("mouseenter", function () {
        mouseIn = true;
    });

    canvas.addEventListener("mouseleave", function () {
        mouseIn = false;

        if (!mouseDown) {
            that.repaintAll();
        }
    });

    canvas.addEventListener("pointerdown", handlePointerDown);
    canvas.addEventListener("pointermove", handlePointerMove);
    canvas.addEventListener("pointerup", handlePointerUp);
    canvas.addEventListener("wheel", handleMouseWheel);

    document.addEventListener("keydown", handleKeyDown);
    document.addEventListener("keyup", handleKeyUp);

    /* Workaround for Chrome Mac bug that causes canvas to be disposed and never recreated when tab is switched into the 
     * background https://bugs.chromium.org/p/chromium/issues/detail?id=588434
     */
    document.addEventListener("visibilitychange", function () {
        var oldHeight = canvas.height + $(canvasContainerBottom).outerHeight();

        canvas.width = 1;
        canvas.height = 1;

        that.resize(oldHeight);
    }, false);

    window.addEventListener("scroll", function () {
        canvasClientRect = null;
    });

    canvas.addEventListener("mousedown", function (e) {
        if (e.button == BUTTON_WHEEL) {
            // Prevent middle-mouse scrolling in Firefox
            e.preventDefault();
        }
    });

    artwork.on("updateRegion", function (region) {
        artworkUpdateRegion.union(region);

        repaintRect(getRefreshArea(artworkUpdateRegion));
    });

    horzScroll.on("valueChanged", function (value) {
        var p = that.getOffset();

        that.setOffset(-value, p.y);
    });

    vertScroll.on("valueChanged", function (value) {
        var p = that.getOffset();

        that.setOffset(p.x, -value);
    });

    this.setInterpolation(false);

    var canvasSpacingWrapper = document.createElement("div");

    canvasSpacingWrapper.className = 'chickenpaint-canvas-container-wrapper';
    canvasSpacingWrapper.appendChild(canvas);

    canvasContainerTop.className = 'chickenpaint-canvas-container-top';
    canvasContainerTop.appendChild(canvasSpacingWrapper);
    canvasContainerTop.appendChild(vertScroll.getElement());

    canvasContainerBottom.className = 'chickenpaint-canvas-container-bottom';
    canvasContainerBottom.appendChild(horzScroll.getElement());

    canvasContainer.appendChild(canvasContainerTop);
    canvasContainer.appendChild(canvasContainerBottom);

    controller.setCanvas(this);
}

module.exports = exports["default"];

},{"../engine/CPBrushInfo":5,"../util/CPBezier":45,"../util/CPRect":49,"../util/CPTransform":50,"../util/CPWacomTablet":51,"./CPGUIUtils":25,"./CPScrollbar":33}],20:[function(require,module,exports){
/*
    ChickenPaint
    
    ChickenPaint is a translation of ChibiPaint from Java to JavaScript
    by Nicholas Sherlock / Chicken Smoothie.
    
    ChibiPaint is Copyright (c) 2006-2008 Marc Schefer

    ChickenPaint is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    ChickenPaint is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with ChickenPaint. If not, see <http://www.gnu.org/licenses/>.
*/

'use strict';

Object.defineProperty(exports, '__esModule', {
    value: true
});
exports['default'] = CPCheckbox;

function CPCheckbox(state, title) {
    var canvas = document.createElement('canvas'),
        canvasContext = canvas.getContext('2d'),
        that = this;

    this.state = state || false;

    function paint() {
        var width = canvas.width,
            height = canvas.height;

        canvasContext.clearRect(0, 0, width, height);

        canvasContext.beginPath();
        canvasContext.arc(width / 2 + 1, width / 2 + 1, Math.max(width / 2, 1) - 2, 0, Math.PI * 2);

        if (that.state) {
            canvasContext.fill();
        } else {
            canvasContext.stroke();
        }
    }

    this.setValue = function (b) {
        if (this.state != b) {
            this.state = b;

            this.emitEvent('valueChange', [b]);

            paint();
        }
    };

    this.getElement = function () {
        return canvas;
    };

    canvas.addEventListener("mousedown", function (e) {
        that.setValue(!that.state);
    });

    canvas.title = title || "";
    canvas.className = 'chickenpaint-checkbox';

    canvas.width = 20;
    canvas.height = 20;

    canvas.fillStyle = 'black';
    canvas.strokeStyle = 'black';

    paint();
}

;

CPCheckbox.prototype = Object.create(EventEmitter.prototype);
CPCheckbox.prototype.constructor = CPCheckbox;
module.exports = exports['default'];

},{}],21:[function(require,module,exports){
/*
    ChickenPaint
    
    ChickenPaint is a translation of ChibiPaint from Java to JavaScript
    by Nicholas Sherlock / Chicken Smoothie.
    
    ChibiPaint is Copyright (c) 2006-2008 Marc Schefer

    ChickenPaint is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    ChickenPaint is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with ChickenPaint. If not, see <http://www.gnu.org/licenses/>.
*/

'use strict';

Object.defineProperty(exports, '__esModule', {
    value: true
});
exports['default'] = CPColorPalette;

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }

var _CPPalette = require('./CPPalette');

var _CPPalette2 = _interopRequireDefault(_CPPalette);

var _CPColorSelect = require('./CPColorSelect');

var _CPColorSelect2 = _interopRequireDefault(_CPColorSelect);

var _CPColorSlider = require('./CPColorSlider');

var _CPColorSlider2 = _interopRequireDefault(_CPColorSlider);

var _utilCPColor = require("../util/CPColor");

var _utilCPColor2 = _interopRequireDefault(_utilCPColor);

function CPColorPalette(cpController) {
    _CPPalette2['default'].call(this, cpController, "color", "Color");

    var colorSelect = new _CPColorSelect2['default'](cpController),
        colorSlider = new _CPColorSlider2['default'](cpController, colorSelect),
        colorShow = new CPColorShow(cpController),
        body = this.getBodyElement(),
        topSection = document.createElement("div");

    topSection.className = 'chickenpaint-colorpicker-top';

    topSection.appendChild(colorSelect.getElement());
    topSection.appendChild(colorSlider.getElement());

    body.appendChild(topSection);
    body.appendChild(colorShow.getElement());
}

function CPColorShow(cpController) {
    var color = 0,
        element = document.createElement("div");

    function padLeft(string, padding, len) {
        while (string.length < len) {
            string = padding + string;
        }
        return string;
    }

    function paint() {
        element.style.backgroundColor = '#' + padLeft(Number(color).toString(16), "0", 6);
    }

    function mouseClick(e) {
        e.preventDefault();

        var colHex = "#" + padLeft(Number(color).toString(16), "0", 6);

        colHex = window.prompt("Please enter a color in hex format", colHex);

        if (colHex != null) {
            try {
                if (colHex.match(/^#/) || colHex.match(/^$/)) {
                    colHex = colHex.substring(1);
                }

                var newColor = parseInt(colHex, 16);

                cpController.setCurColor(new _utilCPColor2['default'](newColor));
            } catch (e) {}
        }
    }

    this.getElement = function () {
        return element;
    };

    cpController.on("colorChange", function (_color) {
        color = _color.getRgb();
        paint();
    });

    element.className = 'chickenpaint-colorpicker-show';

    element.addEventListener("click", mouseClick);

    paint();
}

CPColorPalette.prototype = Object.create(_CPPalette2['default'].prototype);
CPColorPalette.prototype.constructor = CPColorPalette;
module.exports = exports['default'];

},{"../util/CPColor":46,"./CPColorSelect":22,"./CPColorSlider":23,"./CPPalette":31}],22:[function(require,module,exports){
/*
    ChickenPaint

    ChickenPaint is a translation of ChibiPaint from Java to JavaScript
    by Nicholas Sherlock / Chicken Smoothie.

    ChibiPaint is Copyright (c) 2006-2008 Marc Schefer

    ChickenPaint is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    ChickenPaint is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with ChickenPaint. If not, see <http://www.gnu.org/licenses/>.
*/

"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports["default"] = CPColorSelect;

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

var _utilCPColor = require("../util/CPColor");

var _utilCPColor2 = _interopRequireDefault(_utilCPColor);

var _engineCPColorBmp = require("../engine/CPColorBmp");

var _engineCPColorBmp2 = _interopRequireDefault(_engineCPColorBmp);

function CPColorSelect(cpController, initialColor) {
    var w = 128,
        h = 128,
        canvas = document.createElement("canvas"),
        canvasContext = canvas.getContext("2d"),
        imageData = canvasContext.createImageData(w, h),
        data = imageData.data,
        color = new _utilCPColor2["default"](),
        needRefresh = true,
        capturedMouse = false;

    function makeBitmap() {
        var col = color.clone(),
            pixIndex = 0;

        for (var y = 0; y < h; y++) {
            col.setValue(255 - y * 255 / h);

            for (var x = 0; x < w; x++) {
                col.setSaturation(x * 255 / w);

                data[pixIndex + _engineCPColorBmp2["default"].RED_BYTE_OFFSET] = col.rgb >> 16 & 0xFF;
                data[pixIndex + _engineCPColorBmp2["default"].GREEN_BYTE_OFFSET] = col.rgb >> 8 & 0xFF;
                data[pixIndex + _engineCPColorBmp2["default"].BLUE_BYTE_OFFSET] = col.rgb & 0xFF;
                data[pixIndex + _engineCPColorBmp2["default"].ALPHA_BYTE_OFFSET] = 0xFF;

                pixIndex += _engineCPColorBmp2["default"].BYTES_PER_PIXEL;
            }
        }

        needRefresh = false;
    }

    function paint() {
        if (needRefresh) {
            makeBitmap();
        }

        canvasContext.putImageData(imageData, 0, 0, 0, 0, w, h);

        var x = color.getSaturation() * w / 255,
            y = (255 - color.getValue()) * h / 255;

        canvasContext.globalCompositeOperation = 'exclusion';
        canvasContext.strokeStyle = 'white';
        canvasContext.lineWidth = 1.5;

        canvasContext.beginPath();
        canvasContext.arc(x, y, 5, 0, Math.PI * 2);
        canvasContext.stroke();

        canvasContext.globalCompositeOperation = 'source-over';
    }

    function mousePickColor(e) {
        var x = e.pageX - $(canvas).offset().left,
            y = e.pageY - $(canvas).offset().top,
            sat = x * 255 / w,
            value = 255 - y * 255 / h;

        color.setSaturation(Math.max(0, Math.min(255, sat)));
        color.setValue(Math.max(0, Math.min(255, value)));

        paint();
        cpController.setCurColor(color);
    }

    function continueDrag(e) {
        mousePickColor(e);
    }

    function endDrag(e) {
        canvas.releasePointerCapture(e.pointerId);
        capturedMouse = false;
        canvas.removeEventListener("pointerup", endDrag);
        canvas.removeEventListener("pointermove", continueDrag);
    }

    function startDrag(e) {
        if (!capturedMouse) {
            capturedMouse = true;
            canvas.setPointerCapture(e.pointerId);
            canvas.addEventListener("pointerup", endDrag);
            canvas.addEventListener("pointermove", continueDrag);
        }

        mousePickColor(e);
    }

    this.setHue = function (hue) {
        if (color.getHue() != hue) {
            color.setHue(hue);
            cpController.setCurColor(color);
        }
    };

    this.getElement = function () {
        return canvas;
    };

    cpController.on("colorChange", function (c) {
        color.copyFrom(c);

        needRefresh = true;
        paint();
    });

    canvas.addEventListener("pointerdown", startDrag);

    canvas.className = 'chickenpaint-colorpicker-select';
    canvas.setAttribute("touch-action", "none");

    canvas.width = w;
    canvas.height = h;

    if (initialColor) {
        color.copyFrom(initialColor);
    }

    paint();
}

module.exports = exports["default"];

},{"../engine/CPColorBmp":9,"../util/CPColor":46}],23:[function(require,module,exports){
/*
    ChickenPaint

    ChickenPaint is a translation of ChibiPaint from Java to JavaScript
    by Nicholas Sherlock / Chicken Smoothie.

    ChibiPaint is Copyright (c) 2006-2008 Marc Schefer

    ChickenPaint is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    ChickenPaint is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with ChickenPaint. If not, see <http://www.gnu.org/licenses/>.
*/

"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports["default"] = CPColorSlider;

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

var _utilCPColor = require("../util/CPColor");

var _utilCPColor2 = _interopRequireDefault(_utilCPColor);

var _engineCPColorBmp = require("../engine/CPColorBmp");

var _engineCPColorBmp2 = _interopRequireDefault(_engineCPColorBmp);

function CPColorSlider(cpController, selecter, initialHue) {
    var that = this,
        w = 24,
        h = 128,
        canvas = document.createElement("canvas"),
        canvasContext = canvas.getContext("2d"),
        imageData = canvasContext.createImageData(w, h),
        data = imageData.data,
        capturedMouse = false,
        hue = initialHue || 0;

    function makeBitmap() {
        var color = new _utilCPColor2["default"](),
            pixIndex = 0;

        color.setRgbComponents(0, 255, 255);

        for (var y = 0; y < h; y++) {
            color.setHue(y * 359 / h);

            for (var x = 0; x < w; x++) {
                data[pixIndex + _engineCPColorBmp2["default"].RED_BYTE_OFFSET] = color.rgb >> 16 & 0xFF;
                data[pixIndex + _engineCPColorBmp2["default"].GREEN_BYTE_OFFSET] = color.rgb >> 8 & 0xFF;
                data[pixIndex + _engineCPColorBmp2["default"].BLUE_BYTE_OFFSET] = color.rgb & 0xFF;
                data[pixIndex + _engineCPColorBmp2["default"].ALPHA_BYTE_OFFSET] = 0xFF;

                pixIndex += _engineCPColorBmp2["default"].BYTES_PER_PIXEL;
            }
        }
    }

    function paint() {
        canvasContext.putImageData(imageData, 0, 0, 0, 0, w, h);

        var y = hue * h / 360;

        canvasContext.globalCompositeOperation = 'exclusion';
        canvasContext.strokeStyle = 'white';
        canvasContext.lineWidth = 1.5;

        canvasContext.beginPath();
        canvasContext.moveTo(0, y);
        canvasContext.lineTo(w, y);
        canvasContext.stroke();

        canvasContext.globalCompositeOperation = 'source-over';
    }

    function mousePickColor(e) {
        var y = e.pageY - $(canvas).offset().top,
            _hue = ~ ~(y * 360 / h);

        hue = Math.max(0, Math.min(359, _hue));
        paint();

        if (selecter != null) {
            selecter.setHue(hue);
        }
    }

    function continueDrag(e) {
        mousePickColor(e);
    }

    function endDrag(e) {
        canvas.releasePointerCapture(e.pointerId);
        capturedMouse = false;
        canvas.removeEventListener("pointerup", endDrag);
        canvas.removeEventListener("pointermove", continueDrag);
    }

    function startDrag(e) {
        if (!capturedMouse) {
            capturedMouse = true;
            canvas.setPointerCapture(e.pointerId);
            canvas.addEventListener("pointerup", endDrag);
            canvas.addEventListener("pointermove", continueDrag);
        }

        mousePickColor(e);
    }

    this.getElement = function () {
        return canvas;
    };

    this.setHue = function (h) {
        hue = h;
        paint();
    };

    cpController.on("colorChange", function (color) {
        that.setHue(color.getHue());
    });

    canvas.setAttribute("touch-action", "none");

    canvas.addEventListener("pointerdown", startDrag);

    canvas.width = w;
    canvas.height = h;

    canvas.className = 'chickenpaint-colorpicker-slider';

    makeBitmap();
    paint();
}

module.exports = exports["default"];

},{"../engine/CPColorBmp":9,"../util/CPColor":46}],24:[function(require,module,exports){
/*
    ChickenPaint

    ChickenPaint is a translation of ChibiPaint from Java to JavaScript
    by Nicholas Sherlock / Chicken Smoothie.

    ChibiPaint is Copyright (c) 2006-2008 Marc Schefer

    ChickenPaint is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    ChickenPaint is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with ChickenPaint. If not, see <http://www.gnu.org/licenses/>.
*/

'use strict';

Object.defineProperty(exports, '__esModule', {
    value: true
});
exports['default'] = CPColorSwatch;

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }

var _utilCPColor = require('../util/CPColor');

var _utilCPColor2 = _interopRequireDefault(_utilCPColor);

var _CPSlider = require('./CPSlider');

var _CPSlider2 = _interopRequireDefault(_CPSlider);

var _CPColorSelect = require('./CPColorSelect');

var _CPColorSelect2 = _interopRequireDefault(_CPColorSelect);

var _CPColorSlider = require('./CPColorSlider');

var _CPColorSlider2 = _interopRequireDefault(_CPColorSlider);

function CPColorSwatch(initialColor, initialAlpha) {
    var that = this,
        color = new _utilCPColor2['default'](0),
        alpha = 255,
        element = document.createElement("div");

    function padLeft(string, padding, len) {
        while (string.length < len) {
            string = padding + string;
        }
        return string;
    }

    function paint() {
        element.style.backgroundColor = '#' + padLeft(Number(color.getRgb()).toString(16), "0", 6);
    }

    function mouseClick(e) {
        e.preventDefault();
    }

    this.getElement = function () {
        return element;
    };

    this.setColor = function (_color) {
        if (!color.isEqual(_color)) {
            color.copyFrom(_color);

            paint();

            this.emitEvent("colorChange", [color]);
        }
    };

    this.setAlpha = function (_alpha) {
        if (_alpha != alpha) {
            alpha = _alpha;

            paint();

            this.emitEvent("alphaChange", [alpha]);
        }
    };

    this.getColorRgb = function () {
        return color.getRgb();
    };

    this.getAlpha = function () {
        return alpha;
    };

    this.setCurColor = this.setColor;

    function buildColorEditPanel() {
        var panel = document.createElement("div"),
            group = document.createElement("div"),
            select = new _CPColorSelect2['default'](that, color),
            slider = new _CPColorSlider2['default'](that, select, color.getHue()),
            alphaSlider = new _CPSlider2['default'](0, 255);

        panel.className = "chickenpaint-color-pick-panel";

        group.className = "chickenpaint-colorpicker-top";

        group.appendChild(select.getElement());
        group.appendChild(slider.getElement());

        panel.appendChild(group);

        alphaSlider.value = alpha;
        alphaSlider.title = function (alpha) {
            return "Opacity: " + alpha;
        };
        alphaSlider.on("valueChange", function (alpha) {
            that.setAlpha(alpha);
        });

        panel.appendChild(alphaSlider.getElement());

        setTimeout(function () {
            alphaSlider.resize();
        }, 0);

        return panel;
    }

    element.className = 'chickenpaint-color-pick-swatch';

    element.addEventListener("click", mouseClick);

    if (initialColor) {
        color.copyFrom(initialColor);
    }

    if (initialAlpha) {
        alpha = initialAlpha;
    }

    // Clicking outside the popover will dismiss it
    function closeClickHandler(e) {
        if ($(e.target).closest(".popover").length == 0 && $(e.target).closest(".chickenpaint-color-pick-swatch")[0] != element) {
            $(element).popover("hide");
        }
    }

    $(element).popover({
        html: true,
        content: function content() {
            window.addEventListener("mousedown", closeClickHandler);

            return buildColorEditPanel();
        },
        trigger: "manual",
        placement: "bottom"

    }).on("click", function () {
        $(this).popover("toggle");
    }).on("hidden.bs.popover", function () {
        window.removeEventListener("mousedown", closeClickHandler);
    });

    paint();
}

CPColorSwatch.prototype = Object.create(EventEmitter.prototype);
CPColorSwatch.prototype.constructor = CPColorSwatch;
module.exports = exports['default'];

},{"../util/CPColor":46,"./CPColorSelect":22,"./CPColorSlider":23,"./CPSlider":36}],25:[function(require,module,exports){
/**
 * Create a checkerboard HTML5 CanvasPattern (which can be used for fillStyle) using the given canvas context.
 * 
 * @param canvasContext
 * @returns {CanvasPattern}
 */
"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.createCheckerboardPattern = createCheckerboardPattern;

function createCheckerboardPattern(canvasContext) {
    var checkerboardCanvas = document.createElement("canvas"),
        checkerboardContext = checkerboardCanvas.getContext("2d"),
        imageData = checkerboardContext.createImageData(64, 64),
        data = imageData.data,
        pixelOffset = 0;

    for (var j = 0; j < 64; j++) {
        for (var i = 0; i < 64; i++) {
            if ((i & 0x8) != 0 ^ (j & 0x8) != 0) {
                // White
                data[pixelOffset++] = 0xff;
                data[pixelOffset++] = 0xff;
                data[pixelOffset++] = 0xff;
                data[pixelOffset++] = 0xff;
            } else {
                // Grey
                data[pixelOffset++] = 0xcc;
                data[pixelOffset++] = 0xcc;
                data[pixelOffset++] = 0xcc;
                data[pixelOffset++] = 0xff;
            }
        }
    }

    checkerboardCanvas.width = 64;
    checkerboardCanvas.height = 64;
    checkerboardContext.putImageData(imageData, 0, 0);

    return canvasContext.createPattern(checkerboardCanvas, 'repeat');
}

},{}],26:[function(require,module,exports){
/*
    ChickenPaint
    
    ChickenPaint is a translation of ChibiPaint from Java to JavaScript
    by Nicholas Sherlock / Chicken Smoothie.
    
    ChibiPaint is Copyright (c) 2006-2008 Marc Schefer

    ChickenPaint is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    ChickenPaint is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with ChickenPaint. If not, see <http://www.gnu.org/licenses/>.
*/

"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports["default"] = CPGridDialog;

function CPGridDialog(parent, canvas) {
    var dialog = $("<div class=\"modal fade\" tabindex=\"-1\" role=\"dialog\">\n                <div class=\"modal-dialog\">\n                    <div class=\"modal-content\">\n                        <div class=\"modal-header\">\n                            <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\n                                <span aria-hidden=\"true\">&times;</span>\n                            </button>\n                            <h4 class=\"modal-title\">Grid options</h4>\n                        </div>\n                        <div class=\"modal-body\">\n                            <form>\n                                <div class=\"form-group\">\n                                    <label>Grid size</label>\n                                    <input type=\"text\" class=\"form-control chickenpaint-grid-size\" value=\"\" autofocus>\n                                </div>\n                            </form>\n                        </div>\n                        <div class=\"modal-footer\">\n                            <button type=\"button\" class=\"btn btn-default\" data-dismiss=\"modal\">Cancel</button>\n                            <button type=\"button\" class=\"btn btn-primary chickenpaint-apply-grid-settings\" data-dismiss=\"modal\">Ok</button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        "),
        gridSizeElem = $(".chickenpaint-grid-size", dialog),
        applyButton = $(".chickenpaint-apply-grid-settings", dialog);

    gridSizeElem.val(canvas.getGridSize());

    $(".chickenpaint-apply-grid-settings", dialog).click(function (e) {
        var gridSize = parseInt(gridSizeElem.val(), 10);

        canvas.setGridSize(gridSize);
    });

    dialog.modal({
        show: false
    }).on('shown.bs.modal', function () {
        gridSizeElem.focus();
    }).on('keypress', function (e) {
        if (e.keyCode == 13) {
            applyButton.click();
        }
    });

    // Fix the backdrop location in the DOM by reparenting it to the chickenpaint container
    dialog.data("bs.modal").$body = $(parent);

    parent.appendChild(dialog[0]);

    this.show = function () {
        dialog.modal("show");
    };
}

module.exports = exports["default"];

},{}],27:[function(require,module,exports){
/*
    ChickenPaint
    
    ChickenPaint is a translation of ChibiPaint from Java to JavaScript
    by Nicholas Sherlock / Chicken Smoothie.
    
    ChibiPaint is Copyright (c) 2006-2008 Marc Schefer

    ChickenPaint is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    ChickenPaint is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with ChickenPaint. If not, see <http://www.gnu.org/licenses/>.
*/

"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports["default"] = CPLayersPalette;

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

var _CPPalette = require("./CPPalette");

var _CPPalette2 = _interopRequireDefault(_CPPalette);

var _CPSlider = require("./CPSlider");

var _CPSlider2 = _interopRequireDefault(_CPSlider);

function CPLayersPalette(controller) {
    _CPPalette2["default"].call(this, controller, "layers", "Layers", true);

    var MODE_NAMES = ["Normal", "Multiply", "Add", "Screen", "Lighten", "Darken", "Subtract", "Dodge", "Burn", "Overlay", "Hard Light", "Soft Light", "Vivid Light", "Linear Light", "Pin Light"];

    var layerH = 32,
        eyeW = 24,
        body = this.getBodyElement(),
        layerWidget = new CPLayerWidget(),
        alphaSlider = new _CPSlider2["default"](0, 100),
        blendCombo = document.createElement("select"),
        renameField = new CPRenameField(),
        cbSampleAllLayers = document.createElement("input"),
        cbLockAlpha = document.createElement("input"),
        addButton = document.createElement("li"),
        removeButton = document.createElement("li");

    function fillCombobox(combo, optionNames) {
        for (var i = 0; i < optionNames.length; i++) {
            var option = document.createElement("option");

            option.appendChild(document.createTextNode(optionNames[i]));
            option.value = i;

            combo.appendChild(option);
        }
    }

    function wrapCheckboxWithLabel(checkbox, title) {
        var div = document.createElement("div"),
            label = document.createElement("label");

        div.className = "checkbox";

        label.appendChild(checkbox);
        label.appendChild(document.createTextNode(title));

        div.appendChild(label);

        return div;
    }

    function showRenameControl(layerIndex) {
        var d = layerWidget.getCSSSize(),
            artwork = controller.getArtwork(),
            layer = artwork.getLayer(layerIndex);

        renameField.show(eyeW / window.devicePixelRatio, d.height - (layerIndex + 1) * layerH / window.devicePixelRatio, layerIndex, layer.name);
    }

    var parentSetSize = this.setSize,
        parentSetHeight = this.setHeight;

    this.setSize = function (w, h) {
        parentSetSize.call(this, w, h);

        layerWidget.resize();
        alphaSlider.resize();
    };

    this.setHeight = function (h) {
        parentSetHeight.call(this, h);

        layerWidget.resize();
    };

    function CPLayerWidget() {
        var layerDrag,
            layerDragReally,
            layerDragIndex,
            layerDragY,
            container = document.createElement("div"),
            canvas = document.createElement("canvas"),
            canvasContext = canvas.getContext("2d"),
            that = this;

        /**
         * Get the size of the component on screen in CSS pixels.
         */
        this.getCSSSize = function () {
            return { width: $(canvas).width(), height: $(canvas).height() };
        };

        function getLayerIndex(point) {
            return Math.floor((canvas.height - point.y / $(canvas).height() * canvas.height) / layerH);
        }

        /**
         * @param layer CPLayer
         * @param selected boolean
         */
        function drawLayer(layer, selected) {
            var d = { width: canvas.width, height: canvas.height };

            if (selected) {
                canvasContext.fillStyle = '#B0B0C0';
            } else {
                canvasContext.fillStyle = 'white';
            }
            canvasContext.fillRect(0, 0, d.width, layerH);

            canvasContext.beginPath();

            canvasContext.moveTo(0, 0);
            canvasContext.lineTo(d.width, 0);

            canvasContext.moveTo(eyeW, 0);
            canvasContext.lineTo(eyeW, layerH);

            canvasContext.moveTo(eyeW + 6 * window.devicePixelRatio, layerH / 2);
            canvasContext.lineTo(d.width - 6 * window.devicePixelRatio, layerH / 2);

            canvasContext.stroke();

            canvasContext.fillStyle = 'black';

            canvasContext.fillText(layer.name, eyeW + 6 * window.devicePixelRatio, 12 * window.devicePixelRatio);
            canvasContext.fillText(MODE_NAMES[layer.blendMode] + ": " + layer.alpha + "%", eyeW + 6 * window.devicePixelRatio, layerH - 5 * window.devicePixelRatio);

            canvasContext.beginPath();
            if (layer.visible) {
                canvasContext.arc(eyeW / 2, layerH / 2, 10 * window.devicePixelRatio, 0, Math.PI * 2);
                canvasContext.fill();
            } else {
                canvasContext.arc(eyeW / 2, layerH / 2, 10 * window.devicePixelRatio, 0, Math.PI * 2);
                canvasContext.stroke();
            }
        }

        function mouseUp(e) {
            if (e.button == 0) {
                var offset = $(canvas).offset(),
                    artwork = controller.getArtwork(),
                    layers = artwork.getLayers(),
                    mouseLoc = { x: e.pageX - offset.left, y: e.pageY - offset.top },
                    layerOver = getLayerIndex(mouseLoc);

                //layerDragY = e.pageY - offset.top;

                if (layerOver >= 0 && layerOver <= layers.length && layerOver != layerDragIndex && layerOver != layerDragIndex + 1) {
                    artwork.moveLayer(layerDragIndex, layerOver);
                }

                // Do we need to repaint to erase draglines?
                if (layerDragReally) {
                    layerDragReally = false;
                    that.paint();
                }

                layerDrag = false;

                window.removeEventListener("mousemove", mouseDragged);
                window.removeEventListener("mouseup", mouseUp);
            }
        }

        function mouseDragged(e) {
            if (layerDrag) {
                layerDragReally = true;
                layerDragY = e.pageY - $(canvas).offset().top;
                that.paint();
            }
        }

        /**
         * Repaint just the layer with the specified index
         */
        this.paintLayer = function (layerIndex) {
            var layer = artwork.getLayer(layerIndex),
                layerTop = canvas.height - layerH * (layerIndex + 1);

            canvasContext.save();

            canvasContext.fillStyle = '#606060';
            canvasContext.fillRect(0, layerTop, canvas.width, layerH);

            canvasContext.strokeStyle = 'black';

            canvasContext.translate(0, layerTop);
            drawLayer(layer, layerIndex == artwork.getActiveLayerIndex());

            canvasContext.restore();
        };

        /**
         * Repaint the entire control
         */
        this.paint = function () {
            var artwork = controller.getArtwork(),
                layers = artwork.getLayers(),
                d = { width: canvas.width, height: canvas.height },
                canvasScaleFactor = canvas.height / $(canvas).height();

            canvasContext.save();

            canvasContext.fillStyle = '#606060';
            canvasContext.fillRect(0, 0, d.width, d.height - layers.length * layerH);

            canvasContext.strokeStyle = 'black';

            // Draw the list of layers, with the first layer at the bottom of the control
            canvasContext.translate(0, d.height - layerH);

            for (var i = 0; i < layers.length; i++) {
                drawLayer(layers[i], i == artwork.getActiveLayerIndex());
                canvasContext.translate(0, -layerH);
            }

            if (layerDragReally) {
                canvasContext.translate(0, layers.length * layerH - (d.height - layerH));
                canvasContext.strokeRect(0, layerDragY * canvasScaleFactor - layerH / 2, d.width, layerH);

                var layerOver = getLayerIndex({ x: 0, y: layerDragY });

                if (layerOver <= layers.length && layerOver != layerDragIndex && layerOver != layerDragIndex + 1) {
                    canvasContext.fillRect(0, d.height - layerOver * layerH - 2, d.width, 4 * window.devicePixelRatio);
                }
            }

            canvasContext.restore();
        };

        this.resize = function () {
            var artwork = controller.getArtwork(),

            // Our parent container will act as our scrollbar clip area
            parent = $(canvas).parent(),
                parentHeight = parent.height(),
                parentWidth = parent.width(),
                newWidth,
                newHeight;

            layerH = 34 * window.devicePixelRatio;
            eyeW = 24 * window.devicePixelRatio;

            newWidth = parentWidth * window.devicePixelRatio;
            newHeight = Math.max(layerH * artwork.getLayerCount(), parentHeight * window.devicePixelRatio);

            // Should we trigger a scrollbar to appear?
            if (newHeight > parentHeight * window.devicePixelRatio) {
                // Take the scrollbar width into account in our width
                newWidth -= 15 * window.devicePixelRatio;
                parent[0].style.overflowY = 'scroll';
            } else {
                parent[0].style.overflowY = 'hidden';
            }

            canvas.width = newWidth;
            canvas.height = newHeight;

            canvas.style.width = newWidth / window.devicePixelRatio + "px";
            canvas.style.height = newHeight / window.devicePixelRatio + "px";

            canvasContext.font = layerH * 0.25 + "pt sans-serif";

            this.paint();
        };

        this.getElement = function () {
            return container;
        };

        canvas.addEventListener("click", function (e) {
            if (renameField.isVisible()) {
                renameField.renameAndHide();
            }
        });

        canvas.addEventListener("dblclick", function (e) {
            var offset = $(canvas).offset(),
                mouseLoc = { x: e.pageX - offset.left, y: e.pageY - offset.top },
                layerIndex = getLayerIndex(mouseLoc);

            if (mouseLoc.x * window.devicePixelRatio > eyeW && layerIndex >= 0 && layerIndex < artwork.getLayerCount()) {
                showRenameControl(layerIndex);
            }
        });

        canvas.addEventListener("mousedown", function (e) {
            var offset = $(canvas).offset(),
                mouseLoc = { x: e.pageX - offset.left, y: e.pageY - offset.top };

            /* Click, moved from mouseClicked due to problems with focus and stuff */
            if (e.button == 0) {
                /* Left button */
                var artwork = controller.getArtwork(),
                    layers = artwork.getLayers(),
                    layerIndex = getLayerIndex(mouseLoc);

                if (layerIndex >= 0 && layerIndex < artwork.getLayerCount()) {
                    var layer = artwork.getLayer(layerIndex);

                    if (mouseLoc.x / $(canvas).width() * canvas.width < eyeW) {
                        artwork.setLayerVisibility(layerIndex, !layer.visible);
                    } else {
                        artwork.setActiveLayerIndex(layerIndex);
                        // Since this is a slow GUI operation, this is a good chance to get the canvas ready for drawing
                        artwork.performIdleTasks();
                    }
                }

                if (layerIndex < layers.length) {
                    layerDrag = true;
                    layerDragY = mouseLoc.y;
                    layerDragIndex = layerIndex;

                    window.addEventListener("mousemove", mouseDragged);
                    window.addEventListener("mouseup", mouseUp);
                }
            }
        });

        if (!window.devicePixelRatio) {
            window.devicePixelRatio = 1.0;
        }

        canvasContext.strokeStyle = 'black';

        container.className = "chickenpaint-layers-widget";
        container.appendChild(canvas);
    }

    function CPRenameField() {
        var layerIndex = -1,
            textBox = document.createElement("input"),
            that = this;

        this.hide = function () {
            layerIndex = -1;
            textBox.style.display = 'none';
        };

        this.renameAndHide = function () {
            var artwork = controller.getArtwork();

            artwork.setLayerName(layerIndex, textBox.value);

            this.hide();
        };

        this.isVisible = function () {
            return textBox.style.display != 'none';
        };

        this.setLocation = function (positionX, positionY) {
            textBox.style.left = positionX + "px";
            textBox.style.top = positionY + "px";
        };

        this.show = function (x, y, _layerIndex, layerName) {
            layerIndex = _layerIndex;
            textBox.value = layerName;
            this.setLocation(x, y);

            textBox.style.display = 'block';
            textBox.select();
        };

        this.getElement = function () {
            return textBox;
        };

        textBox.type = "text";
        textBox.className = "chickenpaint-layer-new-name form-control input-sm";
        textBox.style.display = 'none';

        textBox.addEventListener("keydown", function (e) {
            // Prevent other keyhandlers (CPCanvas) from getting their grubby hands on the input
            e.stopPropagation();
        });

        textBox.addEventListener("keypress", function (e) {
            if (e.keyCode == 13) {
                // Enter
                that.renameAndHide();
            }
            e.stopPropagation();
        });

        textBox.addEventListener("keyup", function (e) {
            if (e.keyCode == 27) {
                // Escape
                that.hide();
            }
            e.stopPropagation();
        });

        textBox.addEventListener("blur", function (e) {
            that.renameAndHide();
        });
    }

    blendCombo.className = "form-control";
    blendCombo.title = "Layer blending mode";
    blendCombo.addEventListener("change", function (e) {
        var artwork = controller.getArtwork();

        artwork.setLayerBlendMode(artwork.getActiveLayerIndex(), parseInt(blendCombo.value, 10));
    });

    fillCombobox(blendCombo, MODE_NAMES);

    body.appendChild(blendCombo);

    alphaSlider.title = function (value) {
        return "Opacity: " + value + "%";
    };

    alphaSlider.on("valueChange", function (value) {
        var artwork = controller.getArtwork();

        artwork.setLayerAlpha(artwork.getActiveLayerIndex(), value);
    });

    body.appendChild(alphaSlider.getElement());

    cbSampleAllLayers.type = "checkbox";
    cbSampleAllLayers.addEventListener("click", function (e) {
        var artwork = controller.getArtwork();

        artwork.setSampleAllLayers(cbSampleAllLayers.checked);
    });

    body.appendChild(wrapCheckboxWithLabel(cbSampleAllLayers, "Sample all layers"));

    cbLockAlpha.type = "checkbox";
    cbLockAlpha.addEventListener("click", function (e) {
        var artwork = controller.getArtwork();

        artwork.setLockAlpha(cbLockAlpha.checked);
    });

    body.appendChild(wrapCheckboxWithLabel(cbLockAlpha, "Lock alpha"));

    layerWidget.getElement().appendChild(renameField.getElement());

    body.appendChild(layerWidget.getElement());

    // Add/Remove layer buttons
    var addRemoveContainer = document.createElement("ul");

    addRemoveContainer.className = 'chickenpaint-layer-add-remove list-unstyled';

    addButton.className = 'chickenpaint-small-toolbar-button chickenpaint-add-layer';
    addButton.title = 'Add layer';
    addButton.addEventListener("click", function () {
        controller.getArtwork().addLayer();
    });

    removeButton.className = 'chickenpaint-small-toolbar-button chickenpaint-remove-layer';
    removeButton.title = "Delete layer";
    removeButton.addEventListener("click", function () {
        if (!controller.getArtwork().removeLayer()) {
            alert("Error: You can't remove the last remaining layer in the drawing.");
        }
    });

    addRemoveContainer.appendChild(addButton);
    addRemoveContainer.appendChild(removeButton);

    body.appendChild(addRemoveContainer);

    // Set initial values
    var artwork = controller.getArtwork();

    alphaSlider.setValue(artwork.getActiveLayer().getAlpha());
    blendCombo.value = artwork.getActiveLayer().getBlendMode();

    // add listeners
    controller.getArtwork().on("changeLayer", function (layerIndex) {
        var artwork = this;

        if (artwork.getActiveLayer().getAlpha() != alphaSlider.value) {
            alphaSlider.setValue(artwork.getActiveLayer().getAlpha());
        }

        if (artwork.getActiveLayer().getBlendMode() != parseInt(blendCombo.value, 10)) {
            blendCombo.value = artwork.getActiveLayer().getBlendMode();
        }

        if (layerIndex !== undefined) {
            layerWidget.paintLayer(layerIndex);
        } else {
            // We may have added or removed layers, resize as appropriate
            layerWidget.resize();
        }
    });
}

CPLayersPalette.prototype = Object.create(_CPPalette2["default"].prototype);
CPLayersPalette.prototype.constructor = CPLayersPalette;
module.exports = exports["default"];

},{"./CPPalette":31,"./CPSlider":36}],28:[function(require,module,exports){
/*
    ChickenPaint
    
    ChickenPaint is a translation of ChibiPaint from Java to JavaScript
    by Nicholas Sherlock / Chicken Smoothie.
    
    ChibiPaint is Copyright (c) 2006-2008 Marc Schefer

    ChickenPaint is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    ChickenPaint is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with ChickenPaint. If not, see <http://www.gnu.org/licenses/>.
*/

"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports["default"] = CPMainGUI;

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

var _CPCanvas = require("./CPCanvas");

var _CPCanvas2 = _interopRequireDefault(_CPCanvas);

var _CPPaletteManager = require("./CPPaletteManager");

var _CPPaletteManager2 = _interopRequireDefault(_CPPaletteManager);

var _CPMainMenu = require("./CPMainMenu");

var _CPMainMenu2 = _interopRequireDefault(_CPMainMenu);

function CPMainGUI(controller, uiElem) {
    var lowerArea = document.createElement("div"),
        canvas = new _CPCanvas2["default"](controller),
        paletteManager = new _CPPaletteManager2["default"](controller),
        menuBar,
        fullScreenMode = false,
        that = this;

    this.togglePalettes = function () {
        paletteManager.togglePalettes();
    };

    this.arrangePalettes = function () {
        // Give the browser a chance to do the sizing of the palettes before we try to rearrange them
        setTimeout(paletteManager.arrangePalettes.bind(paletteManager), 0);
    };

    this.constrainPalettes = function () {
        paletteManager.constrainPalettes();
    };

    this.showPalette = function (paletteName, show) {
        paletteManager.showPaletteByName(paletteName, show);
    };

    this.getSwatches = function () {
        return paletteManager.palettes.swatches.getSwatches();
    };

    this.setSwatches = function (swatches) {
        paletteManager.palettes.swatches.setSwatches(swatches);
    };

    this.getPaletteManager = function () {
        return paletteManager;
    };

    this.setRotation = function (rotation) {
        canvas.setRotation(rotation);
    };

    this.setFullScreenMode = function (value) {
        fullScreenMode = value;

        that.resize();
        that.arrangePalettes();
    };

    this.resize = function () {
        var newHeight;

        if (fullScreenMode) {
            newHeight = $(window).height() - $(menuBar.getElement()).height();
        } else {
            newHeight = Math.min(Math.max($(window).height() - $(menuBar.getElement()).height() - 65, 500), 750);
        }

        canvas.resize(newHeight);
        that.constrainPalettes();
    };

    menuBar = new _CPMainMenu2["default"](controller, this);

    uiElem.appendChild(menuBar.getElement());

    lowerArea.className = 'chickenpaint-main-section';

    lowerArea.appendChild(canvas.getElement());
    lowerArea.appendChild(paletteManager.getElement());

    uiElem.appendChild(lowerArea);

    window.addEventListener("resize", this.resize.bind(this));

    setTimeout(this.resize.bind(this), 0);
}

CPMainGUI.prototype = Object.create(EventEmitter.prototype);
CPMainGUI.prototype.constructor = CPMainGUI;
module.exports = exports["default"];

},{"./CPCanvas":19,"./CPMainMenu":29,"./CPPaletteManager":32}],29:[function(require,module,exports){
/*
    ChickenPaint
    
    ChickenPaint is a translation of ChibiPaint from Java to JavaScript
    by Nicholas Sherlock / Chicken Smoothie.
    
    ChibiPaint is Copyright (c) 2006-2008 Marc Schefer

    ChickenPaint is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    ChickenPaint is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with ChickenPaint. If not, see <http://www.gnu.org/licenses/>.
*/

"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports["default"] = CPMainMenu;
var MENU_ENTRIES = [{
    name: "File",
    mnemonic: "F",
    children: [{
        name: "Save to my computer",
        action: "CPSave",
        mnemonic: "S",
        shortcut: "ctrl+s"
    }, {
        name: "Save Oekaki",
        action: "CPSend",
        mnemonic: "S",
        shortcut: "ctrl+s"
    }]
}, {
    name: "Edit",
    mnemonic: "E",
    children: [{
        name: "Undo",
        action: "CPUndo",
        mnemonic: "U",
        shortcut: "ctrl+z",
        title: "Undoes the most recent action"
    }, {
        name: "Redo",
        action: "CPRedo",
        mnemonic: "R",
        shortcut: "shift+ctrl+z",
        title: "Redoes a previously undone action"
    }, {
        name: "Clear history",
        action: "CPClearHistory",
        mnemonic: "H",
        title: "Removes all undo/redo information to regain memory"
    }, {
        name: "-"
    }, {
        name: "Cut",
        action: "CPCut",
        mnemonic: "T",
        shortcut: "ctrl+x"
    }, {
        name: "Copy",
        action: "CPCopy",
        mnemonic: "C",
        shortcut: "ctrl+c"
    }, {
        name: "Copy merged",
        action: "CPCopyMerged",
        mnemonic: "Y",
        shortcut: "shift+ctrl+c"
    }, {
        name: "Paste",
        action: "CPPaste",
        mnemonic: "P",
        shortcut: "ctrl+v"
    }, {
        name: "-"
    }, {
        name: "Select all",
        action: "CPSelectAll",
        mnemonic: "A",
        shortcut: "ctrl+a"
    }, {
        name: "Deselect",
        action: "CPDeselectAll",
        mnemonic: "D",
        shortcut: "ctrl+d"
    }]
}, {
    name: "Layers",
    mnemonic: "L",
    children: [{
        name: "Duplicate",
        action: "CPLayerDuplicate",
        mnemonic: "D",
        shortcut: "shift+ctrl+d",
        title: "Creates a copy of the currently selected layer"
    }, {
        name: "-"
    }, {
        name: "Merge down",
        action: "CPLayerMergeDown",
        mnemonic: "E",
        shortcut: "ctrl+e",
        title: "Merges the currently selected layer with the one directly below it"
    }, {
        name: "Merge all layers",
        action: "CPLayerMergeAll",
        mnemonic: "A",
        title: "Merges all the layers"
    }]
}, {
    name: "Effects",
    mnemonic: "E",
    children: [{
        name: "Clear",
        action: "CPClear",
        mnemonic: "D",
        shortcut: "del,backspace",
        title: "Clears the selected area"
    }, {
        name: "Fill",
        action: "CPFill",
        mnemonic: "F",
        shortcut: "ctrl+f",
        title: "Fills the selected area with the current color"
    }, {
        name: "Flip horizontal",
        action: "CPHFlip",
        mnemonic: "H",
        title: "Flips the current selected area horizontally"
    }, {
        name: "Flip vertical",
        action: "CPVFlip",
        mnemonic: "V",
        title: "Flips the current selected area vertically"
    }, {
        name: "Invert",
        action: "CPFXInvert",
        mnemonic: "I",
        title: "Invert the image colors"
    }, {
        name: "-"
    }, {
        name: "Box blur...",
        action: "CPFXBoxBlur",
        mnemonic: "B",
        title: "Blur effect"
    }, {
        name: "-"
    }, {
        name: "Monochromatic noise",
        action: "CPMNoise",
        mnemonic: "M",
        title: "Fills the selection with noise"
    }, {
        name: "Color noise",
        action: "CPCNoise",
        mnemonic: "C",
        title: "Fills the selection with colored noise"
    }]
}, {
    name: "View",
    mnemonic: "V",
    children: [{
        name: "Full-screen mode",
        action: "CPFullScreen",
        mnemonic: "F",
        checkbox: true,
        checked: false
    }, {
        name: "-"
    }, {
        name: "Zoom in",
        action: "CPZoomIn",
        mnemonic: "I",
        shortcut: "ctrl+=",
        title: "Zooms in"
    }, {
        name: "Zoom out",
        action: "CPZoomOut",
        mnemonic: "O",
        shortcut: "ctrl+-",
        title: "Zooms out"
    }, {
        name: "Zoom 100%",
        action: "CPZoom100",
        mnemonic: "1",
        shortcut: "ctrl+0",
        title: "Resets the zoom factor to 100%"
    }, {
        name: "-"
    }, {
        name: "Smooth-out zoomed canvas",
        action: "CPLinearInterpolation",
        mnemonic: "L",
        title: "Linear interpolation is used to give a smoothed looked to the picture when zoomed in",
        checkbox: true
    }, {
        name: "-"
    }, {
        name: "Show grid",
        action: "CPToggleGrid",
        mnemonic: "G",
        shortcut: "ctrl+g",
        title: "Displays a grid over the image",
        checkbox: true,
        checked: false
    }, {
        name: "Grid options...",
        action: "CPGridOptions",
        mnemonic: "D",
        title: "Shows the grid options dialog box"
    }]
}, {
    name: "Palettes",
    mnemonic: "P",
    children: [{
        name: "Rearrange",
        action: "CPArrangePalettes",
        title: "Rearrange the palette windows"
    }, {
        name: "Toggle palettes",
        action: "CPTogglePalettes",
        mnemonic: "P",
        shortcut: "tab",
        title: "Hides or shows all palettes"
    }, {
        name: "-"
    }, {
        name: "Show tool options",
        action: "CPPalBrush",
        mnemonic: "B",
        checkbox: true,
        checked: true
    }, {
        name: "Show color",
        action: "CPPalColor",
        mnemonic: "C",
        checkbox: true,
        checked: true
    }, {
        name: "Show layers",
        action: "CPPalLayers",
        mnemonic: "Y",
        checkbox: true,
        checked: true
    }, {
        name: "Show misc",
        action: "CPPalMisc",
        mnemonic: "M",
        checkbox: true,
        checked: true
    }, {
        name: "Show stroke",
        action: "CPPalStroke",
        mnemonic: "S",
        checkbox: true,
        checked: true
    }, {
        name: "Show swatches",
        action: "CPPalSwatches",
        mnemonic: "W",
        checkbox: true,
        checked: true
    }, {
        name: "Show textures",
        action: "CPPalTextures",
        mnemonic: "X",
        checkbox: true,
        checked: true
    }, {
        name: "Show tools",
        action: "CPPalTool",
        mnemonic: "T",
        checkbox: true,
        checked: true
    }]
}, {
    name: "Help",
    mnemonic: "H",
    children: [{
        name: "Tablet support",
        mnemonic: "T",
        action: "CPTabletSupport",
        title: "Help with getting a drawing tablet working"
    }, {
        name: "Shortcuts",
        mnemonic: "S",
        action: "CPShortcuts",
        title: "List of keyboard and mouse shortcuts"
    }, {
        name: "-"
    }, {
        name: "About",
        mnemonic: "A",
        action: "CPAbout",
        title: "Displays some information about ChickenPaint"
    }]
}];

function CPMainMenu(controller, mainGUI) {
    var bar = $('<nav class="navbar navbar-default">' + '<div class="container-fluid">' + '<div class="navbar-header">' + '<a class="navbar-brand" href="#">ChickenPaint</a>' + '</div>' + '<ul class="nav navbar-nav">' + '</ul>' + '</div>' + '</nav>'),
        macPlatform = /^Mac/i.test(navigator.platform);

    function menuItemClicked(target) {
        var action = target.data('action'),
            checkbox = target.data('checkbox'),
            selected;

        if (checkbox) {
            target.toggleClass("selected");
            selected = target.hasClass("selected");
        } else {
            selected = false;
        }

        controller.actionPerformed({
            action: action,
            checkbox: checkbox,
            selected: selected
        });
    }

    function presentShortcutText(shortcut) {
        shortcut = shortcut.toUpperCase();

        // Only show the first potential shortcut out of the comma-separated list
        shortcut = shortcut.replace(/(,.+)$/, "");

        // Although the keycode for zoom in is "=", we'll present it to the user as "+"
        shortcut = shortcut.replace("ctrl+=", "ctrl++");
        shortcut = shortcut.replace("⌘+=", "⌘++");

        if (macPlatform) {
            shortcut = shortcut.replace(/([^+])\+/g, "$1");
        } else {
            shortcut = shortcut.replace(/([^+])\+/g, "$1 ");
        }

        return shortcut;
    }

    function recurseFillMenu(menuElem, entries) {
        menuElem.append(entries.map(function (entry) {
            var entryElem;

            if (entry.action && !controller.isActionSupported(entry.action)) {
                return;
            }

            if (entry.children) {
                entryElem = $('<li class="dropdown">' + '<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">' + entry.name + ' <span class="caret"></span></a>' + '<ul class="dropdown-menu">' + '</ul>' + '</li>');

                $(".dropdown-toggle", entryElem).dropdown();

                entryElem.on("show.bs.dropdown", function () {
                    /* Instead of Bootstrap's extremely expensive data API, we'll only listen for dismiss clicks on the
                     * document *while the menu is open!*
                     */
                    $(document).one("click", function () {
                        if (entryElem.hasClass("open")) {
                            $(".dropdown-toggle", entryElem).dropdown("toggle");
                        }
                    });
                });

                recurseFillMenu($(".dropdown-menu", entryElem), entry.children);
            } else if (entry.name == '-') {
                entryElem = $('<li role="separator" class="divider"></li>');
            } else {
                entryElem = $('<li><a href="#" data-action="' + entry.action + '"><span>' + entry.name + '</span></a></li>');

                if (entry.checkbox) {
                    $("a", entryElem).data("checkbox", true).toggleClass("selected", !!entry.checked);
                }
            }

            if (entry.title) {
                entryElem.attr('title', entry.title);
            }

            if (entry.shortcut) {
                var menuLink = $("> a", entryElem),
                    shortcutDesc = document.createElement("small");

                // Rewrite the shortcuts to Mac-style
                if (macPlatform) {
                    entry.shortcut = entry.shortcut.replace(/SHIFT/im, "⇧");
                    entry.shortcut = entry.shortcut.replace(/ALT/im, "⌥");
                    entry.shortcut = entry.shortcut.replace(/CTRL/im, "⌘");
                }

                shortcutDesc.className = "chickenpaint-shortcut";
                shortcutDesc.innerHTML = presentShortcutText(entry.shortcut);

                menuLink.append(shortcutDesc);

                key(entry.shortcut, function () {
                    menuItemClicked(menuLink);

                    return false;
                });
            }

            return entryElem;
        }));
    }

    this.getElement = function () {
        return bar[0];
    };

    recurseFillMenu($(".navbar-nav", bar), MENU_ENTRIES);

    $(bar).on('click', 'a:not(.dropdown-toggle)', function (e) {
        menuItemClicked($(this));
        e.preventDefault();
    });

    function onPaletteVisChange(paletteName, show) {
        // Toggle the tickbox of the corresponding menu entry to match the new palette visibility
        var palMenuEntry = $('[data-action=\"CPPal' + paletteName.substring(0, 1).toUpperCase() + paletteName.substring(1) + '\"]', bar);

        palMenuEntry.toggleClass("selected", show);
    }

    mainGUI.getPaletteManager().on("paletteVisChange", onPaletteVisChange);
}

module.exports = exports["default"];

},{}],30:[function(require,module,exports){
/*
    ChickenPaint
    
    ChickenPaint is a translation of ChibiPaint from Java to JavaScript
    by Nicholas Sherlock / Chicken Smoothie.
    
    ChibiPaint is Copyright (c) 2006-2008 Marc Schefer

    ChickenPaint is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    ChickenPaint is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with ChickenPaint. If not, see <http://www.gnu.org/licenses/>.
*/

"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports["default"] = CPMiscPalette;

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

var _CPPalette = require('./CPPalette');

var _CPPalette2 = _interopRequireDefault(_CPPalette);

function CPMiscPalette(cpController) {
    _CPPalette2["default"].call(this, cpController, "misc", "Misc");

    var that = this,
        buttons = [{
        className: "chickenpaint-tool-zoom-in",
        command: "CPZoomIn",
        toolTip: "Zoom in"
    }, {
        className: "chickenpaint-tool-zoom-out",
        command: "CPZoomOut",
        toolTip: "Zoom out"
    }, {
        className: "chickenpaint-tool-zoom-100",
        command: "CPZoom100",
        toolTip: "Zoom 100%"
    }, {
        className: "chickenpaint-tool-undo",
        command: "CPUndo",
        toolTip: "Undo"
    }, {
        className: "chickenpaint-tool-redo",
        command: "CPRedo",
        toolTip: "Redo"
    }, {
        className: "chickenpaint-tool-send",
        command: "CPSend",
        toolTip: "Save pic"
    }];

    function buildButtons() {
        var body = that.getBodyElement(),
            listElem = document.createElement("ul");

        listElem.className = "chickenpaint-misc-tools list-unstyled";

        for (var i in buttons) {
            var button = buttons[i],
                buttonElem = document.createElement("li");

            buttonElem.className = "chickenpaint-toolbar-button " + button.className;
            buttonElem.setAttribute("data-buttonIndex", i);

            listElem.appendChild(buttonElem);
        }

        listElem.addEventListener("mousedown", function (e) {
            if (e.target && e.target.nodeName == "LI") {
                $(e.target).addClass("selected");
            }
        });

        listElem.addEventListener("mouseup", function (e) {
            if (e.target && e.target.nodeName == "LI") {
                $(e.target).removeClass("selected");
            }
        });

        listElem.addEventListener("click", function (e) {
            if (e.target && e.target.nodeName == "LI") {
                var button = buttons[parseInt(e.target.getAttribute("data-buttonIndex"), 10)];

                cpController.actionPerformed({ action: button.command });
            }
        });

        body.appendChild(listElem);
    }

    buildButtons();
}

CPMiscPalette.prototype = Object.create(_CPPalette2["default"].prototype);
CPMiscPalette.prototype.constructor = CPMiscPalette;
module.exports = exports["default"];

},{"./CPPalette":31}],31:[function(require,module,exports){
/*
    ChickenPaint
    
    ChickenPaint is a translation of ChibiPaint from Java to JavaScript
    by Nicholas Sherlock / Chicken Smoothie.
    
    ChibiPaint is Copyright (c) 2006-2008 Marc Schefer

    ChickenPaint is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    ChickenPaint is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with ChickenPaint. If not, see <http://www.gnu.org/licenses/>.
*/

"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports["default"] = CPPalette;

function CPPalette(cpController, className, title, resizeVert) {
    this.title = title;
    this.name = className;
    this.resizeVert = resizeVert || false;

    var containerElement = document.createElement("div"),
        headElement = document.createElement("div"),
        closeButton = document.createElement("button"),
        bodyElement = document.createElement("div"),
        vertHandle = null,
        dragOffset,
        that = this;

    this.getElement = function () {
        return containerElement;
    };

    this.getBodyElement = function () {
        return bodyElement;
    };

    this.getWidth = function () {
        return $(containerElement).outerWidth();
    };

    this.getHeight = function () {
        return $(containerElement).outerHeight();
    };

    this.getX = function () {
        return parseInt(containerElement.style.left, 10) || 0;
    };

    this.getY = function () {
        return parseInt(containerElement.style.top, 10) || 0;
    };

    this.setLocation = function (x, y) {
        containerElement.style.left = x + "px";
        containerElement.style.top = y + "px";
    };

    this.setWidth = function (width) {
        containerElement.style.width = width + "px";
    };

    this.setHeight = function (height) {
        containerElement.style.height = height + "px";
    };

    this.setSize = function (width, height) {
        this.setWidth(width);
        this.setHeight(height);
    };

    function mouseDrag(e) {
        that.setLocation(e.pageX - dragOffset.x, e.pageY - dragOffset.y);
    }

    function mouseDragRelease(e) {
        window.removeEventListener("mousemove", mouseDrag);
        window.removeEventListener("mouseup", mouseDragRelease);
    }

    function vertHandleDrag(e) {
        that.setHeight(e.pageY - $(containerElement).offset().top);
    }

    function vertHandleRelease(e) {
        window.removeEventListener("mousemove", vertHandleDrag);
        window.removeEventListener("mouseup", vertHandleRelease);
    }

    function vertHandleMouseDown(e) {
        window.addEventListener("mousemove", vertHandleDrag);
        window.addEventListener("mouseup", vertHandleRelease);
    }

    function addVertResizeHandle() {
        vertHandle = document.createElement("div");

        vertHandle.className = "chickenpaint-resize-handle-vert";

        vertHandle.addEventListener("mousedown", vertHandleMouseDown);

        containerElement.appendChild(vertHandle);
    }

    closeButton.type = "button";
    closeButton.className = "close";
    closeButton.innerHTML = "&times;";

    containerElement.className = "chickenpaint-palette chickenpaint-palette-" + className;

    headElement.className = "chickenpaint-palette-head";

    var headTitle = document.createElement("h4");

    headTitle.className = 'modal-title';
    headTitle.appendChild(document.createTextNode(this.title));

    headElement.appendChild(closeButton);
    headElement.appendChild(headTitle);

    bodyElement.className = "chickenpaint-palette-body";

    containerElement.appendChild(headElement);
    containerElement.appendChild(bodyElement);

    if (this.resizeVert) {
        addVertResizeHandle();
    }

    headElement.addEventListener("mousedown", function (e) {
        if (e.button == 0) {
            /* Left */
            if (e.target.nodeName == "BUTTON") {
                that.emitEvent("paletteVisChange", [that, false]);
            } else {
                window.addEventListener("mousemove", mouseDrag);
                window.addEventListener("mouseup", mouseDragRelease);

                dragOffset = { x: e.pageX - $(containerElement).position().left, y: e.pageY - $(containerElement).position().top };
            }
        }
    });
}

CPPalette.prototype = Object.create(EventEmitter.prototype);
CPPalette.prototype.constructor = EventEmitter;
module.exports = exports["default"];

},{}],32:[function(require,module,exports){
/*
    ChickenPaint
    
    ChickenPaint is a translation of ChibiPaint from Java to JavaScript
    by Nicholas Sherlock / Chicken Smoothie.
    
    ChibiPaint is Copyright (c) 2006-2008 Marc Schefer

    ChickenPaint is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    ChickenPaint is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with ChickenPaint. If not, see <http://www.gnu.org/licenses/>.
*/

"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports["default"] = CPPaletteManager;

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

var _CPToolPalette = require("./CPToolPalette");

var _CPToolPalette2 = _interopRequireDefault(_CPToolPalette);

var _CPMiscPalette = require("./CPMiscPalette");

var _CPMiscPalette2 = _interopRequireDefault(_CPMiscPalette);

var _CPStrokePalette = require("./CPStrokePalette");

var _CPStrokePalette2 = _interopRequireDefault(_CPStrokePalette);

var _CPColorPalette = require("./CPColorPalette");

var _CPColorPalette2 = _interopRequireDefault(_CPColorPalette);

var _CPBrushPalette = require("./CPBrushPalette");

var _CPBrushPalette2 = _interopRequireDefault(_CPBrushPalette);

var _CPLayersPalette = require("./CPLayersPalette");

var _CPLayersPalette2 = _interopRequireDefault(_CPLayersPalette);

var _CPTexturePalette = require("./CPTexturePalette");

var _CPTexturePalette2 = _interopRequireDefault(_CPTexturePalette);

var _CPSwatchesPalette = require("./CPSwatchesPalette");

var _CPSwatchesPalette2 = _interopRequireDefault(_CPSwatchesPalette);

function CPPaletteManager(cpController) {
    var palettes = {
        tool: new _CPToolPalette2["default"](cpController),
        misc: new _CPMiscPalette2["default"](cpController),
        stroke: new _CPStrokePalette2["default"](cpController),
        color: new _CPColorPalette2["default"](cpController),
        brush: new _CPBrushPalette2["default"](cpController),
        layers: new _CPLayersPalette2["default"](cpController),
        textures: new _CPTexturePalette2["default"](cpController),
        swatches: new _CPSwatchesPalette2["default"](cpController)
    },
        paletteFrames = [],
        hiddenFrames = [],
        parentElem = document.createElement("div"),
        that = this;

    this.palettes = palettes;

    function showPalette(palette, show) {
        var palElement = palette.getElement();

        if (show) {
            parentElem.appendChild(palElement);
        } else {
            parentElem.removeChild(palElement);
        }
        that.emitEvent("paletteVisChange", [palette.name, show]);

        // FIXME: focus hack
        // controller.canvas.grabFocus(); TODO
    }

    this.showPaletteByName = function (paletteName, show) {
        var palette = palettes[paletteName];

        if (palette) {
            showPalette(palette, show);
        }
    };

    this.togglePalettes = function () {
        if (hiddenFrames.length == 0) {
            $("> .chickenpaint-palette", parentElem).each(function () {
                that.showPaletteByName(this.getAttribute("data-paletteName"), false);
                hiddenFrames.push(this);
            });
        } else {
            for (var i = 0; i < hiddenFrames.length; i++) {
                var frame = hiddenFrames[i];

                that.showPaletteByName(frame.getAttribute("data-paletteName"), true);
            }
            hiddenFrames = [];
        }
    };

    /**
     * Pop palettes that are currently outside the visible area back into view.
     */
    this.constrainPalettes = function () {
        var windowWidth = $(parentElem).parents(".chickenpaint-main-section").width(),
            windowHeight = $(parentElem).parents(".chickenpaint-main-section").height();

        for (var i in palettes) {
            var palette = palettes[i];

            /* Move palettes that are more than half out of the frame back into it */
            if (palette.getX() + palette.getWidth() / 2 > windowWidth) {
                palette.setLocation(windowWidth - palette.getWidth(), palette.getY());
            }

            if (palette.getY() + palette.getHeight() / 2 > windowHeight) {
                palette.setLocation(palette.getX(), windowHeight - palette.getHeight());
            }
        }

        //Move small palettes to the front so that they aren't completely hidden
        //palettes.swatches.moveToFront();

        //Special handling for the swatches palette being under the brush palette:
        var widthToSpare = windowWidth - palettes.tool.getWidth() - palettes.misc.getWidth() - palettes.stroke.getWidth() - palettes.color.getWidth() - palettes.brush.getWidth() - 15 > 0;

        if (palettes.swatches.getX() + palettes.swatches.getWidth() == palettes.brush.getX() + palettes.brush.getWidth() && Math.abs(palettes.swatches.getY() - palettes.brush.getY()) < 20) {
            palettes.swatches.setLocation(palettes.brush.getX() - palettes.swatches.getWidth() - (widthToSpare ? 5 : 1), 0);
        }

        //Special handling for layers palette being too damn tall:
        if (palettes.layers.getY() + palettes.layers.getHeight() > windowHeight) {
            palettes.layers.setHeight(Math.max(windowHeight - palettes.layers.getY(), 200));
        }
    };

    /**
     * Rearrange the palettes from scratch into a useful arrangement.
     */
    this.arrangePalettes = function () {
        var windowWidth = $(parentElem).parents(".chickenpaint-main-section").width(),
            windowHeight = $(parentElem).parents(".chickenpaint-main-section").height(),
            haveWidthToSpare = windowWidth - palettes.tool.getWidth() - palettes.misc.getWidth() - palettes.stroke.getWidth() - palettes.color.getWidth() - palettes.brush.getWidth() - 15 > 0;

        palettes.brush.setLocation(windowWidth - palettes.brush.getWidth() - 15, 0);

        var bottomOfBrush = palettes.brush.getY() + palettes.brush.getHeight();

        palettes.layers.setLocation(palettes.brush.getX(), windowHeight - bottomOfBrush > 300 ? bottomOfBrush + 2 : bottomOfBrush);
        palettes.layers.setSize(palettes.brush.getWidth(), windowHeight - palettes.layers.getY());

        palettes.tool.setLocation(0, 0);

        palettes.misc.setLocation(palettes.tool.getX() + palettes.tool.getWidth() + (haveWidthToSpare ? 5 : 1), 0);

        if (haveWidthToSpare) {
            palettes.stroke.setLocation(palettes.misc.getX() + palettes.misc.getWidth() + (haveWidthToSpare ? 5 : 1), 0);
        } else {
            palettes.stroke.setLocation(palettes.misc.getX(), palettes.misc.getY() + palettes.misc.getHeight() + 1);
        }

        palettes.swatches.setLocation(palettes.brush.getX() - palettes.swatches.getWidth() - (haveWidthToSpare ? 5 : 1), 0);

        palettes.textures.setWidth(Math.min(palettes.layers.getX() - palettes.textures.getX(), 490));
        palettes.textures.setLocation(palettes.color.getX() + palettes.color.getWidth() + 4, windowHeight - palettes.textures.getHeight());

        palettes.color.setLocation(0, Math.max(palettes.tool.getY() + palettes.tool.getHeight(), windowHeight - palettes.color.getHeight()));
    };

    this.getElement = function () {
        return parentElem;
    };

    parentElem.className = "chickenpaint-palettes";

    for (var paletteName in palettes) {
        var palette = palettes[paletteName],
            palElement = palette.getElement();

        palette.on("paletteVisChange", function () {
            showPalette(this, false);
        });

        palElement.setAttribute("data-paletteName", paletteName);
        paletteFrames.push(palElement);
    }

    for (var paletteName in palettes) {
        var palElement = palettes[paletteName].getElement();

        parentElem.appendChild(palElement);
    }
}

CPPaletteManager.prototype = Object.create(EventEmitter.prototype);
CPPaletteManager.prototype.constructor = CPPaletteManager;
module.exports = exports["default"];

},{"./CPBrushPalette":18,"./CPColorPalette":21,"./CPLayersPalette":27,"./CPMiscPalette":30,"./CPStrokePalette":38,"./CPSwatchesPalette":39,"./CPTexturePalette":41,"./CPToolPalette":42}],33:[function(require,module,exports){
/*
    ChickenPaint
    
    ChickenPaint is a translation of ChibiPaint from Java to JavaScript
    by Nicholas Sherlock / Chicken Smoothie.
    
    ChibiPaint is Copyright (c) 2006-2008 Marc Schefer

    ChickenPaint is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    ChickenPaint is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with ChickenPaint. If not, see <http://www.gnu.org/licenses/>.
*/

/**
 * @param vertical boolean
 */
"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports["default"] = CPScrollbar;

function CPScrollbar(vertical) {
    var bar = document.createElement("div"),
        handle = document.createElement("div"),
        handleInner = document.createElement("div"),
        min = 0,
        max = 1,
        offset = 0,
        visibleRange = 1,
        blockIncrement = 10,
        unitIncrement = 1,
        valueIsAdjusting = false,
        handleSize = 1,
        dragLastOffset,
        that = this;

    function updateBar() {
        var longDimension = vertical ? $(bar).height() : $(bar).width();

        /* As the size of the document approaches the size of the container, handle size grows to fill the 
         * whole track:
         */
        handleSize = visibleRange / (max - min) * longDimension;

        var handleOffset = (offset - min) / (max - min) * (longDimension - handleSize);

        handleInner.style[vertical ? "height" : "width"] = handleSize + "px";
        handle.style[vertical ? "height" : "width"] = handleSize + "px";

        handle.style[vertical ? "top" : "left"] = handleOffset + "px";
    }

    this.setValues = function (_offset, _visibleRange, _min, _max) {
        offset = _offset;
        visibleRange = _visibleRange;
        min = _min;
        max = _max;

        updateBar();
    };

    this.setBlockIncrement = function (increment) {
        blockIncrement = increment;
    };

    this.setUnitIncrement = function (increment) {
        unitIncrement = increment;
    };

    this.getElement = function () {
        return bar;
    };

    this.getValueIsAdjusting = function () {
        return valueIsAdjusting;
    };

    function onBarClick(e) {
        if (this == bar) {
            var clickPos = vertical ? e.pageY - $(bar).offset().top : e.pageX - $(bar).offset().left,
                barPos = parseInt(handle.style[vertical ? "top" : "left"], 10);

            if (clickPos < barPos) {
                offset -= blockIncrement;
            } else {
                offset += blockIncrement;
            }

            that.emitEvent("valueChanged", [offset]);
            updateBar();
        }
    }

    function onHandlePress(e) {
        e.stopPropagation();
        dragLastOffset = vertical ? e.pageY - $(bar).offset().top : e.pageX - $(bar).offset().left;

        $(handle).addClass("dragging");
        window.addEventListener("mouseup", onHandleRelease);
        window.addEventListener("mousemove", onHandleDrag);
    }

    function onHandleClick(e) {
        e.stopPropagation();
    }

    function onHandleDrag(e) {
        valueIsAdjusting = true;

        var longDimension = vertical ? $(bar).height() : $(bar).width(),
            mouseOffset = vertical ? e.pageY - $(bar).offset().top : e.pageX - $(bar).offset().left;

        offset = offset + (mouseOffset - dragLastOffset) * (max - min) / (longDimension - handleSize);

        offset = Math.min(Math.max(offset, min), max);

        dragLastOffset = mouseOffset;

        that.emitEvent("valueChanged", [offset]);
        updateBar();

        valueIsAdjusting = false;
    }

    function onHandleRelease(e) {
        e.stopPropagation();
        $(handle).removeClass("dragging");
        window.removeEventListener("mouseup", onHandleRelease);
        window.removeEventListener("mousemove", onHandleDrag);
    }

    bar.className = "chickenpaint-scrollbar " + (vertical ? "chickenpaint-scrollbar-vertical" : "chickenpaint-scrollbar-horizontal");
    handle.className = "chickenpaint-scrollbar-handle";
    handleInner.className = "chickenpaint-scrollbar-handle-inner";

    handle.appendChild(handleInner);
    bar.appendChild(handle);

    handle.addEventListener("mousedown", onHandlePress);
    handle.addEventListener("click", onHandleClick);

    bar.addEventListener("click", onBarClick);
}

CPScrollbar.prototype = Object.create(EventEmitter.prototype);
CPScrollbar.prototype.constructor = CPScrollbar;
module.exports = exports["default"];

},{}],34:[function(require,module,exports){
/*
    ChickenPaint
    
    ChickenPaint is a translation of ChibiPaint from Java to JavaScript
    by Nicholas Sherlock / Chicken Smoothie.
    
    ChibiPaint is Copyright (c) 2006-2008 Marc Schefer

    ChickenPaint is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    ChickenPaint is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with ChickenPaint. If not, see <http://www.gnu.org/licenses/>.
*/

"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports["default"] = CPSendDialog;

function CPSendDialog(controller, parent, resourceSaver) {
    var dialog = $("<div class=\"modal fade\" tabindex=\"-1\" role=\"dialog\">\n                <div class=\"modal-dialog\">\n                \n                    <div class=\"modal-content\" data-stage=\"saving\">\n                        <div class=\"modal-header\">\n                            <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\n                                <span aria-hidden=\"true\">&times;</span>\n                            </button>\n                            <h4 class=\"modal-title\">Saving drawing...</h4>\n                        </div>\n                        <div class=\"modal-body\">\n                            <p class=\"chickenpaint-saving-progress-message\">Preparing your drawing to be saved, please wait...</p>\n                            <pre class=\"chickenpaint-saving-error-message pre-scrollable\"></pre>\n                            <div class=\"progress\">\n                                <div class=\"progress-bar\" role=\"progressbar\" aria-valuenow=\"0\" aria-valuemin=\"0\" aria-valuemax=\"100\" style=\"width: 0%;\"></div>\n                            </div>\n                        </div>\n                        <div class=\"modal-footer\">\n                            <button type=\"button\" class=\"btn btn-default chickenpaint-send-cancel\" data-dismiss=\"modal\">Cancel</button>\n                        </div>\n                    </div>\n                    <div class=\"modal-content\" data-stage=\"success-not-previously-posted\" style=\"display:none\">\n                        <div class=\"modal-header\">\n                            <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\n                                <span aria-hidden=\"true\">&times;</span>\n                            </button>\n                            <h4 class=\"modal-title\">Drawing saved!</h4>\n                        </div>\n                        <div class=\"modal-body\">\n                            <p>Your drawing has been saved, would you like to post it to the forum now?</p>\n                        </div>\n                        <div class=\"modal-footer\">\n                            <button type=\"button\" class=\"btn btn-primary chickenpaint-post-drawing\" data-dismiss=\"modal\">Yes, post it now</button>\n                            <button type=\"button\" class=\"btn btn-default\" data-dismiss=\"modal\">No, keep drawing</button>\n                            <button type=\"button\" class=\"btn btn-default chickenpaint-exit\" data-dismiss=\"modal\">No, quit and I'll finish it later</button>\n                        </div>\n                    </div>\n                    <div class=\"modal-content\" data-stage=\"success-already-posted\" style=\"display:none\">\n                        <div class=\"modal-header\">\n                            <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\n                                <span aria-hidden=\"true\">&times;</span>\n                            </button>\n                            <h4 class=\"modal-title\">Drawing saved!</h4>\n                        </div>\n                        <div class=\"modal-body\">\n                            <p>Your drawing has been saved, would you like to view it on the forum now?</p>\n                        </div>\n                        <div class=\"modal-footer\">\n                            <button type=\"button\" class=\"btn btn-primary chickenpaint-post-drawing\" data-dismiss=\"modal\">Yes, view the post</button>\n                            <button type=\"button\" class=\"btn btn-default\" data-dismiss=\"modal\">No, keep drawing</button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        "),
        progressMessageElem = $(".chickenpaint-saving-progress-message", dialog),
        progressError = $(".chickenpaint-saving-error-message", dialog),
        progressElem = $(".progress-bar", dialog),
        that = this;

    resourceSaver.on("savingProgress", function (progress, message) {
        progress *= 100;

        progressMessageElem.text(message);

        $(progressElem).attr("aria-valuenow", progress).css("width", progress + "%");
    });

    resourceSaver.on("savingComplete", function (progress) {
        $(".modal-content[data-stage='saving']", dialog).hide();

        if (controller.isActionSupported("CPExit")) {
            $(".modal-content[data-stage='success-not-previously-posted']", dialog).show();
        } else {
            $(".modal-content[data-stage='success-already-posted']", dialog).show();
        }
    });

    resourceSaver.on("savingFailure", function (serverMessage) {
        progressElem.addClass("progress-bar-danger");

        var errorMessage = "Sorry, your drawing could not be saved, please try again later.";

        if (serverMessage) {
            serverMessage = serverMessage.replace(/^CHIBIERROR\s*/, "");

            if (serverMessage.length > 0) {
                errorMessage += "<br><br>The error returned from the server was:";

                progressError.text(serverMessage).show();
            }

            progressMessageElem.html(errorMessage);
        }
    });

    $(".chickenpaint-post-drawing", dialog).click(function () {
        controller.actionPerformed({ action: "CPPost" });
    });

    $(".chickenpaint-exit", dialog).click(function () {
        alert("When you want to come back and finish your drawing, just click the 'new drawing' button again and " + "you can choose to continue this drawing.");
        controller.actionPerformed({ action: "CPExit" });
    });

    $(".chickenpaint-send-cancel", dialog).click(function () {
        resourceSaver.cancel();
    });

    // Destroy the modal upon close
    dialog.on("hidden.bs.modal", function (e) {
        dialog.remove();
    });

    dialog.modal({
        show: false
    });

    dialog.on('shown.bs.modal', function () {
        that.emitEvent("shown");
    });

    // Fix the backdrop location in the DOM by reparenting it to the chickenpaint container
    dialog.data("bs.modal").$body = $(parent);

    parent.appendChild(dialog[0]);

    this.show = function () {
        dialog.modal("show");
    };
}

CPSendDialog.prototype = Object.create(EventEmitter.prototype);
CPSendDialog.prototype.contructor = CPSendDialog;
module.exports = exports["default"];

},{}],35:[function(require,module,exports){
/*
    ChickenPaint
    
    ChickenPaint is a translation of ChibiPaint from Java to JavaScript
    by Nicholas Sherlock / Chicken Smoothie.
    
    ChibiPaint is Copyright (c) 2006-2008 Marc Schefer

    ChickenPaint is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    ChickenPaint is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with ChickenPaint. If not, see <http://www.gnu.org/licenses/>.
*/

"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports["default"] = CPShortcutsDialog;

function CPShortcutsDialog(parent) {
    var dialog = $("<div class=\"modal fade chickenpaint-shortcuts-dialog\" tabindex=\"-1\" role=\"dialog\">\n                <div class=\"modal-dialog modal-lg\">\n                    <div class=\"modal-content\">\n                        <div class=\"modal-header\">\n                            <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\n                                <span aria-hidden=\"true\">&times;</span>\n                            </button>\n                            <h4 class=\"modal-title\">Shortcuts</h4>\n                        </div>\n                        <div class=\"modal-body\">\n                            <p>\n                                Many of the menu options and painting tools have keyboard shortcuts which are\n                                written next to them or appear when you hover.\n                            </p>\n                            <p>\n                                Here are some other shortcuts which are not as obvious!\n                            </p>\n                            <div class=\"chickenpaint-shortcuts-sections\">\n                                <div class=\"chickenpaint-shortcuts-section\">\n                                    <h5>Color swatches palette</h5>\n                                    <ul class=\"chickenpaint-shortcuts-list list-unstyled\">\n                                        <li>\n                                            <dl>\n                                                <dt>\n                                                    <span class=\"chickenpaint-shortcut\"><span class=\"fa fa-mouse-pointer\"></span> Left</span>\n                                                </dt>\n                                                <dd>\n                                                    Use as the drawing color\n                                                </dd>\n                                                <dt>\n                                                    <span class=\"chickenpaint-shortcut\"><span class=\"fa fa-mouse-pointer\"></span> Right</span>\n                                                </dt>\n                                                <dd>\n                                                    Remove or replace a color swatch\n                                                </dd>\n                                             </dl>\n                                        </li>\n                                    </ul>\n                                </div>\n                                <div class=\"chickenpaint-shortcuts-section\">\n                                    <h5>Line drawing mode</h5>\n                                    <ul class=\"chickenpaint-shortcuts-list list-unstyled\">\n                                        <li>\n                                            <dl>\n                                                <dt>\n                                                    <span class=\"chickenpaint-shortcut\"><span class=\"chickenpaint-shortcut-key\">Shift</span> + <span class=\"fa fa-mouse-pointer\"></span> Left</span>\n                                                </dt>\n                                                <dd>\n                                                    Snap line to nearest 45 degrees\n                                                </dd>\n                                             </dl>\n                                        </li>\n                                    </ul>\n                                </div>\n                                <div class=\"chickenpaint-shortcuts-section\">\n                                    <h5>Painting tools</h5>\n                                    <ul class=\"chickenpaint-shortcuts-list list-unstyled\">\n                                        <li>\n                                            <dl>\n                                                <dt>\n                                                    <span class=\"chickenpaint-shortcut\"><span class=\"chickenpaint-shortcut-key\">1</span> - <span class=\"chickenpaint-shortcut-key\">9</span> , <span class=\"chickenpaint-shortcut-key\">0</span></span>\n                                                </dt>\n                                                <dd>\n                                                    Change brush opacity\n                                                </dd>\n                                                <dt>\n                                                    <span class=\"chickenpaint-shortcut\"><span class=\"chickenpaint-shortcut-key\">[</span> , <span class=\"chickenpaint-shortcut-key\">]</span></span>\n                                                </dt>\n                                                <dd>\n                                                    Change brush size\n                                                </dd>\n                                            </dl>\n                                        </li>\n                                    </ul>\n                                </div>\n                                <div class=\"chickenpaint-shortcuts-section\">\n                                    <h5>Brush palette</h5>\n                                    <ul class=\"chickenpaint-shortcuts-list list-unstyled\">\n                                        <li>\n                                            <dl>\n                                                <dt>\n                                                    <span class=\"chickenpaint-shortcut\"><span class=\"fa fa-mouse-pointer\"></span> Right drag</span>\n                                                </dt>\n                                                <dd>\n                                                    Adjust brush sliders more precisely\n                                                </dd>\n                                            </dl>\n                                        </li>\n                                    </ul>\n                                </div>\n                                <div class=\"chickenpaint-shortcuts-section\">\n                                    <h5>Drawing canvas</h5>\n                                    <ul class=\"chickenpaint-shortcuts-list list-unstyled\">\n                                        <li>\n                                            <dl>\n                                                <dt>\n                                                    <span class=\"chickenpaint-shortcut\"><span class=\"fa fa-mouse-pointer\"></span> Middle</span> <span class=\"chickenpaint-shortcut-alternate\">or</span> <span class=\"chickenpaint-shortcut\"><span class=\"chickenpaint-shortcut-key\">Space</span> + <span class=\"fa fa-mouse-pointer\"></span> Left</span>\n                                                </dt>\n                                                <dd>\n                                                    Move the canvas around\n                                                </dd>\n                                                <dt>\n                                                    <span class=\"chickenpaint-shortcut\"><span class=\"chickenpaint-shortcut-key\">Alt</span> + <span class=\"fa fa-mouse-pointer\"></span> Middle</span> <span class=\"chickenpaint-shortcut-alternate\">or</span> <span class=\"chickenpaint-shortcut\"><span class=\"chickenpaint-shortcut-key\">Alt</span> + <span class=\"chickenpaint-shortcut-key\">Space</span> + <span class=\"fa fa-mouse-pointer\"></span> Left</span>\n                                                </dt>\n                                                <dd>\n                                                    Rotate the canvas\n                                                </dd>\n                                                <dt>\n                                                    <span class=\"chickenpaint-shortcut\"><span class=\"fa fa-mouse-pointer\"></span> Right</span> <span class=\"chickenpaint-shortcut-alternate\">or</span> <span class=\"chickenpaint-shortcut\"><span class=\"chickenpaint-shortcut-key\">Alt</span> + <span class=\"fa fa-mouse-pointer\"></span> Left</span>\n                                                </dt>\n                                                <dd>\n                                                    Sample the color under the cursor\n                                                </dd>\n                                             </dl>\n                                        </li>\n                                    </ul>\n                                </div>\n                                <div class=\"chickenpaint-shortcuts-section\">\n                                    <h5>Layers palette</h5>\n                                    <ul class=\"chickenpaint-shortcuts-list list-unstyled\">\n                                        <li>\n                                            <dl>\n                                                <dt>\n                                                    <span class=\"chickenpaint-shortcut\"><span class=\"fa fa-mouse-pointer\"></span> Double click</span>\n                                                </dt>\n                                                <dd>\n                                                    Rename layer\n                                                </dd>\n                                             </dl>\n                                        </li>\n                                    </ul>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            ");

    // Destroy the modal upon close
    dialog.on("hidden.bs.modal", function (e) {
        dialog.remove();
    });

    dialog.modal({
        show: false
    });

    // Fix the backdrop location in the DOM by reparenting it to the chickenpaint container
    dialog.data("bs.modal").$body = $(parent);

    parent.appendChild(dialog[0]);

    this.show = function () {
        dialog.modal("show");
    };
}

module.exports = exports["default"];

},{}],36:[function(require,module,exports){
/*
    ChickenPaint
    
    ChickenPaint is a translation of ChibiPaint from Java to JavaScript
    by Nicholas Sherlock / Chicken Smoothie.
    
    ChibiPaint is Copyright (c) 2006-2008 Marc Schefer

    ChickenPaint is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    ChickenPaint is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with ChickenPaint. If not, see <http://www.gnu.org/licenses/>.
*/

/**
 * A simple slider control.
 */
"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports["default"] = CPSlider;

function CPSlider(minValue, maxValue, centerMode, expMode) {
    var PRECISE_DRAG_SCALE = 4,
        EXP_MODE_FACTOR = 1.5;

    var canvas = document.createElement("canvas"),
        canvasContext = canvas.getContext("2d"),
        valueRange = maxValue - minValue,
        dragNormal = false,
        dragPrecise = false,
        dragPreciseX,
        doneInitialPaint = false,
        that = this;

    this.value = undefined;

    /**
     * Either a string to draw on the slider, or a function(value) which receives the current value of the slider and
     * should return the string to be painted to the slider.
     *
     * @name CPSlider#title
     * @default ""
     */
    this.title = "";

    centerMode = centerMode || false;

    function paint() {
        var width = canvas.width,
            height = canvas.height,
            title = typeof that.title === "string" ? that.title : that.title(that.value),
            textX = 2 * window.devicePixelRatio,
            textY = canvas.height * 0.75;

        if (centerMode) {
            canvasContext.save();

            canvasContext.fillStyle = 'white';

            canvasContext.fillRect(0, 0, width, height);

            canvasContext.fillStyle = 'black';

            canvasContext.fillText(title, textX, textY);
            canvasContext.beginPath();

            if (that.value >= valueRange / 2) {
                canvasContext.rect(width / 2, 0, (that.value - valueRange / 2) * width / valueRange, height);
            } else {
                canvasContext.rect(that.value * width / valueRange, 0, (valueRange / 2 - that.value) * width / valueRange, height);
            }

            canvasContext.fill();
            canvasContext.clip();

            canvasContext.fillStyle = 'white';
            canvasContext.fillText(title, textX, textY);

            canvasContext.restore();
        } else {
            var barProp = (that.value - minValue) / valueRange,
                barWidth;

            if (expMode) {
                barProp = Math.pow(barProp, 1 / EXP_MODE_FACTOR);
            }

            barWidth = barProp * width;

            canvasContext.save();
            canvasContext.save();

            canvasContext.fillStyle = 'black';

            canvasContext.beginPath();
            canvasContext.rect(0, 0, barWidth, height);
            canvasContext.fill();

            canvasContext.clip();

            canvasContext.fillStyle = 'white';
            canvasContext.fillText(title, textX, textY);

            // Remove the clip region
            canvasContext.restore();

            canvasContext.fillStyle = 'white';

            canvasContext.beginPath();
            canvasContext.rect(barWidth, 0, width, height);
            canvasContext.fill();

            canvasContext.clip();

            canvasContext.fillStyle = 'black';
            canvasContext.fillText(title, textX, textY);

            canvasContext.restore();
        }
    }

    function mouseSelect(e) {
        var width = $(canvas).width(),
            left = $(canvas).offset().left,
            proportion = (e.pageX - left) / width;

        if (expMode) {
            // Give the user finer control over the low values
            proportion = Math.pow(Math.max(proportion, 0.0), EXP_MODE_FACTOR);
        }

        that.setValue(proportion * valueRange + minValue);
    }

    function mouseDragged(e) {
        if (dragNormal) {
            mouseSelect(e);
        } else if (dragPrecise) {
            var diff = (e.pageX - dragPreciseX) / PRECISE_DRAG_SCALE;

            if (diff != 0) {
                var unrounded = that.value + diff,
                    rounded = unrounded | 0;

                that.setValue(rounded);

                /* Tweak the "old mouseX" position such that the fractional part of the value we were unable to set
                 * will be accumulated
                 */
                dragPreciseX = e.pageX - (unrounded - rounded) * PRECISE_DRAG_SCALE;
            }
        }
    }

    function mouseUp(e) {
        if (dragNormal && e.button == 0) {
            dragNormal = false;
        } else if (dragPrecise && e.button == 2) {
            dragPrecise = false;
        } else {
            return;
        }

        canvas.releasePointerCapture(e.pointerId);
        canvas.removeEventListener("pointerup", mouseUp);
        canvas.removeEventListener("pointermove", mouseDragged);
    }

    this.setValue = function (_value) {
        _value = ~ ~Math.max(minValue, Math.min(maxValue, _value));

        if (this.value != _value) {
            this.value = _value;

            // The event listeners might like to update our title property at this point to reflect the new value
            this.emitEvent('valueChange', [this.value]);

            if (doneInitialPaint) {
                paint();
            } else {
                // We don't bother to do our canvas dimensioning until we're supplied with an initial value
                doneInitialPaint = true;
                this.resize();
            }
        }
    };

    /**
     * Get the DOM element for the slider component.
     */
    this.getElement = function () {
        return canvas;
    };

    this.resize = function () {
        canvas.width = $(canvas).width() || 150;
        canvas.height = $(canvas).height() || 20;

        if (window.devicePixelRatio > 1) {
            // Assume our width is set to 100% or similar, so we only need to the fix the height
            canvas.style.height = canvas.height + 'px';

            canvas.width = canvas.width * window.devicePixelRatio;
            canvas.height = canvas.height * window.devicePixelRatio;
        }

        canvasContext.font = canvas.height * 0.47 + 'pt sans-serif';

        paint();
    };

    canvas.addEventListener("pointerdown", function (e) {
        var dragging = dragNormal || dragPrecise;

        if (!dragging) {
            canvas.setPointerCapture(e.pointerId);

            switch (e.button) {
                case 0:
                    // Left
                    dragNormal = true;
                    mouseSelect(e);
                    break;
                case 2:
                    // Right
                    dragPrecise = true;
                    dragPreciseX = e.pageX;
                    break;
                default:
                    return;
            }

            canvas.addEventListener("pointerup", mouseUp);
            canvas.addEventListener("pointermove", mouseDragged);
        }
    });

    canvas.addEventListener("contextmenu", function (e) {
        e.preventDefault();
    });

    canvas.setAttribute("touch-action", "none");

    canvas.className = 'chickenpaint-slider';

    if (!window.devicePixelRatio) {
        // Old browsers
        window.devicePixelRatio = 1.0;
    }
}

CPSlider.prototype = Object.create(EventEmitter.prototype);
CPSlider.prototype.constructor = CPSlider;
module.exports = exports["default"];

},{}],37:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports["default"] = CPSplashScreen;

function CPSplashScreen(uiParent, loader, resourcesRoot) {
    var MAX_SMOOTHIE_OFFSET = 170;

    var canvas = document.createElement("canvas"),
        canvasContext = canvas.getContext("2d"),
        cup = new Image(),
        lid = new Image(),
        outlines = new Image(),
        text = new Image(),
        shading = new Image(),
        highlights = new Image(),
        smoothie = new Image(),
        images = [cup, lid, outlines, text, shading, highlights, smoothie],
        loadedCount = 0,
        cupComposite,
        smoothieComposite,
        cupCompositeContext,
        smoothieCompositeContext,
        progress = 0.0,
        message = "",
        fontHeight = 14;

    var imageRoot = resourcesRoot + "splash/";

    for (var i = 0; i < images.length; i++) {
        images[i].onload = function () {
            loadedCount++;

            if (loadedCount == images.length) {
                repaint();
            }
        };
    }

    cup.src = imageRoot + "cup.png";
    highlights.src = imageRoot + "highlights.png";
    lid.src = imageRoot + "lid.png";
    outlines.src = imageRoot + "lines.png";
    shading.src = imageRoot + "shading.png";
    smoothie.src = imageRoot + "smoothie.png";
    text.src = imageRoot + "text.png";

    function buildSmoothieComposite(imgWidth, imgHeight, progress) {
        if (!smoothieComposite) {
            smoothieComposite = document.createElement("canvas");

            smoothieComposite.width = imgWidth;
            smoothieComposite.height = imgHeight;

            smoothieCompositeContext = smoothieComposite.getContext("2d");
        }

        // First draw the smoothie in its mask position:
        smoothieCompositeContext.globalCompositeOperation = "copy";
        smoothieCompositeContext.drawImage(smoothie, 0, 0);

        // Now shift the smoothie downwards and use the original position as a mask
        smoothieCompositeContext.globalCompositeOperation = "source-in";
        smoothieCompositeContext.drawImage(smoothie, 0, Math.round(progress * MAX_SMOOTHIE_OFFSET));
    }

    function buildCupComposite(imgWidth, imgHeight, progress) {
        if (!cupComposite) {
            cupComposite = document.createElement("canvas");

            cupComposite.width = imgWidth;
            cupComposite.height = imgHeight;

            cupCompositeContext = cupComposite.getContext("2d");
        }

        cupCompositeContext.globalCompositeOperation = "copy";
        cupCompositeContext.drawImage(cup, 0, 0);

        buildSmoothieComposite(imgWidth, imgHeight, progress);

        cupCompositeContext.globalCompositeOperation = "source-over";
        cupCompositeContext.drawImage(smoothieComposite, 0, 0);

        cupCompositeContext.drawImage(lid, 0, 0);

        cupCompositeContext.globalCompositeOperation = "screen";
        cupCompositeContext.drawImage(highlights, 0, 0);

        cupCompositeContext.globalCompositeOperation = "multiply";
        cupCompositeContext.drawImage(shading, 0, 0);

        return cupComposite;
    }

    function repaint() {
        var centerX = canvas.width / 2,
            centerY = canvas.height / 2;

        canvasContext.fillStyle = 'white';
        canvasContext.fillRect(0, 0, canvas.width, canvas.height);

        if (loadedCount == images.length) {
            var imgWidth = text.width,
                imgHeight = text.height,
                left = Math.round(centerX - imgWidth / 2),
                top = Math.round(centerY - imgHeight / 2);

            canvasContext.drawImage(text, left, top);

            buildCupComposite(imgWidth, imgHeight, progress);

            //The whole cup composite is slightly transparent
            canvasContext.globalAlpha = 0.88;
            canvasContext.drawImage(cupComposite, left, top);

            canvasContext.globalAlpha = 1.0;

            canvasContext.drawImage(outlines, left, top);

            centerY = Math.round(centerY + imgHeight / 2 + 2);
        }

        if (message != "") {
            canvasContext.fillStyle = "black";

            var lines = message.split("\n");

            for (var i = 0; i < lines.length; i++) {
                var line = lines[i],
                    lineWidth = canvasContext.measureText(line).width;

                centerY += fontHeight * 2;

                canvasContext.fillText(line, centerX - lineWidth / 2, centerY);
            }
        }
    }

    function resize() {
        // Use the canvas dimensions set by the CSS styles
        canvas.width = canvas.clientWidth;
        canvas.height = canvas.clientHeight;

        canvasContext.font = fontHeight + "pt sans-serif";

        repaint();
    }

    loader.on("loadingProgress", function (_progress, _message) {
        progress = _progress;
        message = _message;

        repaint();
    });

    loader.on("loadingFailure", function (_message) {
        progress = 0;
        message = _message;

        repaint();
    });

    loader.on("loadingComplete", function () {
        window.removeEventListener("resize", resize);
        uiParent.removeChild(canvas);
    });

    window.addEventListener("resize", resize);

    canvas.className = "chickenpaint-splash-screen";

    uiParent.appendChild(canvas);

    resize();
}

module.exports = exports["default"];

},{}],38:[function(require,module,exports){
/*
    ChickenPaint
    
    ChickenPaint is a translation of ChibiPaint from Java to JavaScript
    by Nicholas Sherlock / Chicken Smoothie.
    
    ChibiPaint is Copyright (c) 2006-2008 Marc Schefer

    ChickenPaint is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    ChickenPaint is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with ChickenPaint. If not, see <http://www.gnu.org/licenses/>.
*/

'use strict';

Object.defineProperty(exports, '__esModule', {
    value: true
});
exports['default'] = CPStrokePalette;

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }

var _CPPalette = require('./CPPalette');

var _CPPalette2 = _interopRequireDefault(_CPPalette);

var _engineCPBrushInfo = require('../engine/CPBrushInfo');

var _engineCPBrushInfo2 = _interopRequireDefault(_engineCPBrushInfo);

function CPStrokePalette(cpController) {
    _CPPalette2['default'].call(this, cpController, "stroke", "Stroke");

    var that = this,
        buttons = [{
        className: "chickenpaint-tool-freehand",
        command: "CPFreeHand",
        toolTip: "Free-hand",
        selected: true
    }, {
        className: "chickenpaint-tool-line",
        command: "CPLine",
        toolTip: "Straight line"
    }, {
        className: "chickenpaint-tool-bezier",
        command: "CPBezier",
        toolTip: "Bezier curve"
    }],
        body = that.getBodyElement();

    function buildButtons() {
        var listElem = document.createElement("ul");

        listElem.className = "chickenpaint-stroke-tools list-unstyled";

        for (var i in buttons) {
            var button = buttons[i],
                buttonElem = document.createElement("li");

            buttonElem.className = "chickenpaint-toolbar-button " + button.className;
            buttonElem.setAttribute("data-buttonIndex", i);

            if (button.selected) {
                buttonElem.className = buttonElem.className + " selected";
            }

            listElem.appendChild(buttonElem);
        }

        listElem.addEventListener("click", function (e) {
            if (e.target && e.target.nodeName == "LI") {
                var button = buttons[parseInt(e.target.getAttribute("data-buttonIndex"), 10)];

                $("li", listElem).removeClass("selected");
                $(e.target).addClass("selected");

                cpController.actionPerformed({ action: button.command });
            }
        });

        body.appendChild(listElem);
    }

    buildButtons();

    cpController.on("toolChange", function (tool, toolInfo) {
        $(".chickenpaint-tool-freehand", body).toggleClass("selected", toolInfo.strokeMode == _engineCPBrushInfo2['default'].SM_FREEHAND);
        $(".chickenpaint-tool-line", body).toggleClass("selected", toolInfo.strokeMode == _engineCPBrushInfo2['default'].SM_LINE);
        $(".chickenpaint-tool-bezier", body).toggleClass("selected", toolInfo.strokeMode == _engineCPBrushInfo2['default'].SM_BEZIER);
    });
}

CPStrokePalette.prototype = Object.create(_CPPalette2['default'].prototype);
CPStrokePalette.prototype.constructor = CPStrokePalette;
module.exports = exports['default'];

},{"../engine/CPBrushInfo":5,"./CPPalette":31}],39:[function(require,module,exports){
/*
    ChickenPaint
    
    ChickenPaint is a translation of ChibiPaint from Java to JavaScript
    by Nicholas Sherlock / Chicken Smoothie.
    
    ChibiPaint is Copyright (c) 2006-2008 Marc Schefer

    ChickenPaint is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    ChickenPaint is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with ChickenPaint. If not, see <http://www.gnu.org/licenses/>.
*/

'use strict';

Object.defineProperty(exports, '__esModule', {
    value: true
});
exports['default'] = CPSwatchesPalette;

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }

var _CPPalette = require('./CPPalette');

var _CPPalette2 = _interopRequireDefault(_CPPalette);

var _utilCPColor = require('../util/CPColor');

var _utilCPColor2 = _interopRequireDefault(_utilCPColor);

var _utilAdobeColorTable = require('../util/AdobeColorTable');

var _utilAdobeColorTable2 = _interopRequireDefault(_utilAdobeColorTable);

function padLeft(string, padding, len) {
    while (string.length < len) {
        string = padding + string;
    }
    return string;
}

function wrapWithElem(e, wrapWithName) {
    var parent = document.createElement(wrapWithName);

    parent.appendChild(e);

    return parent;
}

function fileAPIsSupported() {
    return window.File && window.FileReader && window.FileList && window.Blob;
}

function CPSwatchesPalette(controller) {
    _CPPalette2['default'].call(this, controller, "swatches", "Color swatches");

    var INIT_COLORS = [0xffffff, 0x000000, 0xff0000, 0x00ff00, 0x0000ff, 0xffff00],
        modified = false,
        swatchPanel = document.createElement("ul"),
        buttonPanel = document.createElement("div"),
        fileInput,
        that = this;

    function CPColorSwatch(color) {
        var wrapper = document.createElement("div"),
            swatchElem = document.createElement("a"),
            swatchMenu = document.createElement("ul"),
            mnuRemove = document.createElement("a"),
            mnuSetToCurrent = document.createElement("a"),
            that = this;

        this.getElement = function () {
            return wrapper;
        };

        this.setColor = function (color) {
            swatchElem.setAttribute("data-color", color);
            swatchElem.style.backgroundColor = '#' + padLeft("" + Number(color).toString(16), "0", 6);
        };

        this.setColor(color);

        swatchElem.href = "#";
        swatchElem.className = "chickenpaint-color-swatch dropdown-toggle";
        swatchElem.setAttribute("data-toggle", "dropdown");

        mnuRemove.href = "#";
        mnuRemove.innerHTML = "Remove";

        mnuRemove.addEventListener("click", function (e) {
            e.preventDefault();
            $(wrapper).remove();

            modified = true;
        });

        mnuSetToCurrent.href = "#";
        mnuSetToCurrent.innerHTML = "Replace with current color";

        mnuSetToCurrent.addEventListener("click", function (e) {
            e.preventDefault();

            that.setColor(controller.getCurColor().getRgb());

            modified = true;
        });

        swatchMenu.className = "dropdown-menu";

        swatchMenu.appendChild(wrapWithElem(mnuRemove, "li"));
        swatchMenu.appendChild(wrapWithElem(mnuSetToCurrent, "li"));

        wrapper.className = "chickenpaint-color-swatch-wrapper";
        wrapper.appendChild(swatchElem);
        wrapper.appendChild(swatchMenu);

        $(wrapper).on("show.bs.dropdown", function () {
            var $btnDropDown = $(this).find(".dropdown-toggle"),
                $listHolder = $(this).find(".dropdown-menu");

            $listHolder.css({
                "top": $btnDropDown.position().top + $btnDropDown.outerHeight(true) + "px",
                "left": $btnDropDown.position().left + "px"
            });
        });
    }

    function clearSwatches() {
        while (swatchPanel.lastChild) {
            swatchPanel.removeChild(swatchPanel.lastChild);
        }
    }

    function addSwatch(color) {
        var swatch = new CPColorSwatch(color);

        swatchPanel.appendChild(swatch.getElement());
    }

    /**
     * Returns an array of colors in RGB 32-bit integer format
     */
    this.getSwatches = function () {
        var swatches = $(".chickenpaint-color-swatch", swatchPanel),
            colors = new Array(swatches.length);

        for (var i = 0; i < swatches.length; i++) {
            colors[i] = parseInt(swatches.get(i).getAttribute("data-color"), 10);
        }

        return colors;
    };

    this.setSwatches = function (swatches) {
        clearSwatches();

        for (var i = 0; i < swatches.length; i++) {
            addSwatch(swatches[i]);
        }

        modified = true;
    };

    this.isModified = function () {
        return modified;
    };

    function loadSwatches() {
        fileInput.onchange = function () {
            var fileList = this.files;

            if (fileList.length < 1) return;

            var file = fileList[0],
                reader = new FileReader();

            reader.onload = function () {
                var swatches = new _utilAdobeColorTable2['default']().read(this.result);

                if (swatches != null && swatches.length > 0) {
                    that.setSwatches(swatches);
                } else {
                    alert("The swatches could not be read, did you select an .aco file?");
                }
            };

            reader.readAsArrayBuffer(file);
        };

        fileInput.click();
    }

    function saveSwatches() {
        var aco = new _utilAdobeColorTable2['default']().write(that.getSwatches()),
            blob = new Blob([aco], { type: "application/octet-stream" });

        window.saveAs(blob, "oekakiswatches.aco");
    }

    function initSwatchPanel() {
        swatchPanel.className = "chickenpaint-color-swatches list-unstyled";

        for (var i = 0; i < INIT_COLORS.length; i++) {
            swatchPanel.appendChild(new CPColorSwatch(INIT_COLORS[i]).getElement());
        }

        swatchPanel.addEventListener("click", function (e) {
            var swatch = e.target;

            if (!/chickenpaint-color-swatch/.test(swatch.className)) {
                return;
            }

            if (e.button == 0 /* Left */ && swatch.getAttribute("data-color") !== undefined) {
                controller.setCurColor(new _utilCPColor2['default'](parseInt(swatch.getAttribute("data-color"), 10)));
                e.stopPropagation();
                e.preventDefault();
            }
        });

        swatchPanel.addEventListener("contextmenu", function (e) {
            var swatch = e.target;

            if (!/chickenpaint-color-swatch/.test(swatch.className)) {
                return;
            }

            e.preventDefault();

            $(swatch).dropdown("toggle").off("click.bs.dropdown"); // Remove Bootstrap's left-click handler installed by toggle
        });
    }

    function initButtonsPanel() {
        var btnSettings = document.createElement("div"),
            btnAdd = document.createElement("div"),
            settingsMenu = document.createElement("ul"),
            mnuSave = document.createElement("a"),
            mnuLoad = document.createElement("a");

        btnAdd.title = "Add the current brush color as a new swatch";
        btnAdd.className = "chickenpaint-small-toolbar-button chickenpaint-color-swatch-add";

        btnSettings.className = "chickenpaint-small-toolbar-button chickenpaint-color-swatch-settings";
        btnSettings.setAttribute("data-toggle", "dropdown");
        $(btnSettings).dropdown();

        mnuSave.href = "#";
        mnuSave.innerHTML = "Save swatches to your computer...";
        mnuSave.addEventListener("click", function (e) {
            e.preventDefault();

            saveSwatches();
        });

        mnuLoad.href = "#";
        mnuLoad.innerHTML = "Load swatches from your computer...";
        mnuLoad.addEventListener("click", function (e) {
            e.preventDefault();

            loadSwatches();
        });

        settingsMenu.className = "dropdown-menu dropdown-menu-right";

        settingsMenu.appendChild(wrapWithElem(mnuSave, "li"));
        settingsMenu.appendChild(wrapWithElem(mnuLoad, "li"));

        var btnSettingsContainer = document.createElement("div");

        btnSettingsContainer.className = 'dropdown';
        btnSettingsContainer.appendChild(btnSettings);
        btnSettingsContainer.appendChild(settingsMenu);

        $(btnSettingsContainer).on("show.bs.dropdown", function () {
            /* Instead of Bootstrap's extremely expensive data API, we'll only listen for dismiss clicks on the
             * document *while the menu is open!*
             */
            $(document).one("click", function () {
                if ($(btnSettingsContainer).hasClass("open")) {
                    $(btnSettings).dropdown("toggle");
                }
            });
        });

        btnAdd.addEventListener("click", function (e) {
            addSwatch(controller.getCurColor().getRgb());
            modified = true;
        });

        buttonPanel.className = 'chickenpaint-color-swatches-buttons';

        // Don't offer to load/save swatches if we don't have the file API needed for reading them
        if (fileAPIsSupported()) {
            fileInput = document.createElement("input");

            fileInput.type = "file";
            fileInput.multiple = false;
            fileInput.style.display = "none";

            buttonPanel.appendChild(btnSettingsContainer);
            buttonPanel.appendChild(fileInput);
        }

        buttonPanel.appendChild(btnAdd);
    }

    initSwatchPanel();
    this.getBodyElement().appendChild(swatchPanel);

    initButtonsPanel();
    this.getBodyElement().appendChild(buttonPanel);
}

CPSwatchesPalette.prototype = Object.create(_CPPalette2['default'].prototype);
CPSwatchesPalette.prototype.constructor = CPSwatchesPalette;
module.exports = exports['default'];

},{"../util/AdobeColorTable":43,"../util/CPColor":46,"./CPPalette":31}],40:[function(require,module,exports){
/*
    ChickenPaint
    
    ChickenPaint is a translation of ChibiPaint from Java to JavaScript
    by Nicholas Sherlock / Chicken Smoothie.
    
    ChibiPaint is Copyright (c) 2006-2008 Marc Schefer

    ChickenPaint is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    ChickenPaint is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with ChickenPaint. If not, see <http://www.gnu.org/licenses/>.
*/

"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports["default"] = CPTabletDialog;

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

var _utilCPWacomTablet = require("../util/CPWacomTablet");

var _utilCPWacomTablet2 = _interopRequireDefault(_utilCPWacomTablet);

function CPTabletDialog(parent) {
    var dialog = $("<div class=\"modal fade\" tabindex=\"-1\" role=\"dialog\">\n                <div class=\"modal-dialog\">\n                    <div class=\"modal-content\">\n                        <div class=\"modal-header\">\n                            <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\n                                <span aria-hidden=\"true\">&times;</span>\n                            </button>\n                            <h4 class=\"modal-title\">Drawing tablet support</h4>\n                        </div>\n                        <div class=\"modal-body\">\n                            <p class=\"chickenpaint-tablet-there-are-two-options\">\n                                There are two ways you could use your tablet's pen pressure support with ChickenPaint.\n                            </p>\n                            <div class=\"chickenpaint-tablet-support chickenpaint-wacom-support\">\n                                <h4>\n                                    Plugin for Wacom tablets\n                                </h4>\n                                <div class=\"chickenpaint-supported-browsers\">\n                                    <div class=\"chickenpaint-supported-browser\">\n                                        <span class=\"fa fa-internet-explorer\"></span>\n                                        IE 10, 11\n                                    </div>\n                                    <div class=\"chickenpaint-supported-browser\">\n                                        <span class=\"fa fa-firefox\"></span>\n                                        Firefox (32-bit only)\n                                    </div>\n                                    <div class=\"chickenpaint-supported-browser\">\n                                        <span class=\"fa fa-safari\"></span>\n                                        Safari\n                                    </div>\n                                        <div class=\"chickenpaint-supported-browser\">\n                                        <span class=\"fa fa-opera\"></span>\n                                        Opera\n                                    </div>\n                                </div>\n                                <p class=\"chickenpaint-not-installed\">\n                                    The plugin for Wacom tablets doesn't seem to be installed in your browser yet.\n                                </p>\n                                <p class=\"chickenpaint-not-installed\">\n                                    Please make sure that you've installed the latest drivers for your tablet from the \n                                    <a href=\"http://www.wacom.com/en-us/support/product-support/drivers\" target=\"_blank\">Wacom drivers page</a>,\n                                    then restart your browser.\n                                </p>\n                                <p class=\"chickenpaint-not-supported\">\n                                    Your browser doesn't support the Wacom tablet plugin, please \n                                    try one of the browsers listed above instead.\n                                </p>\n                                <p class=\"chickenpaint-supported alert alert-success\">\n                                    The Wacom tablet plugin is installed and working.\n                                </p>\n                            </div>\n                            <div class=\"chickenpaint-tablet-support chickenpaint-pointerevents-support\">\n                                <h4>\n                                    Built-in support for most tablets <small>including Wacom tablets</small>\n                                </h4>\n                                <div class=\"chickenpaint-supported-browsers\">\n                                    <div class=\"chickenpaint-supported-browser\">\n                                        <span class=\"fa fa-internet-explorer\"></span>\n                                        IE (Windows 8)\n                                    </div>\n                                        <div class=\"chickenpaint-supported-browser\">\n                                        <span class=\"fa fa-edge\"></span>\n                                        Edge (Windows 10)\n                                    </div>\n                                    <div class=\"chickenpaint-supported-browser\">\n                                        <span class=\"fa fa-firefox\"></span>\n                                        Firefox (<a href=\"https://github.com/thenickdude/chickenpaint/blob/master/help/Firefox pressure support.md\" target=\"_blank\">experimental <i class=\"glyphicon glyphicon-new-window\"></i></a>)\n                                    </div>\n                                    <div class=\"chickenpaint-supported-browser\">\n                                        <span class=\"fa fa-chrome\"></span>\n                                        Chrome (coming soon)\n                                    </div>\n                                </div>\n                                <p class=\"chickenpaint-not-supported\">\n                                    Your browser doesn't have built-in support for drawing tablets, please try\n                                    one of the other browsers listed above.\n                                </p>\n                                <p class=\"chickenpaint-supported alert alert-success\">\n                                    Your browser has built-in support for drawing tablets!\n                                </p>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n       ");

    var wacomSupportElem = $(".chickenpaint-wacom-support", dialog),
        peSupportElem = $(".chickenpaint-pointerevents-support", dialog),
        bothOptionsElem = $(".chickenpaint-tablet-there-are-two-options", dialog),
        wacomPresent = _utilCPWacomTablet2["default"].getRef().isTabletPresent(),
        peSupported = !!window.hasNativePointerEvents;

    wacomSupportElem.toggleClass("supported", wacomPresent);

    if (wacomPresent) {
        // Don't bother displaying info about Pointer Events if we have the Wacom plugin installed
        peSupportElem.hide();
        bothOptionsElem.hide();
    } else {
        // Chrome has dropped NPAPI support, so the Wacom plugin cannot be installed
        if (/Chrome/i.test(navigator.userAgent) && !/OPR/.test(navigator.userAgent) || /iPad/.test(navigator.userAgent) || /iPhone/.test(navigator.userAgent)) {
            wacomSupportElem.addClass("not-supported");
        }

        // Don't bother showing the Wacom plugin details if this browser supports pointer events
        if (peSupported) {
            wacomSupportElem.hide();
            bothOptionsElem.hide();
        }
    }

    peSupportElem.toggleClass("supported", peSupported);
    peSupportElem.toggleClass("not-supported", !peSupported);

    dialog.modal({
        show: false
    });

    // Fix the backdrop location in the DOM by reparenting it to the chickenpaint container
    dialog.data("bs.modal").$body = $(parent);

    parent.appendChild(dialog[0]);

    this.show = function () {
        dialog.modal("show");
    };
}

module.exports = exports["default"];

},{"../util/CPWacomTablet":51}],41:[function(require,module,exports){
/*
    ChickenPaint
    
    ChickenPaint is a translation of ChibiPaint from Java to JavaScript
    by Nicholas Sherlock / Chicken Smoothie.
    
    ChibiPaint is Copyright (c) 2006-2008 Marc Schefer

    ChickenPaint is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    ChickenPaint is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with ChickenPaint. If not, see <http://www.gnu.org/licenses/>.
*/

'use strict';

Object.defineProperty(exports, '__esModule', {
    value: true
});
exports['default'] = CPTexturePalette;

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }

var _engineCPGreyBmp = require('../engine/CPGreyBmp');

var _engineCPGreyBmp2 = _interopRequireDefault(_engineCPGreyBmp);

var _engineCPLookUpTable = require('../engine/CPLookUpTable');

var _engineCPLookUpTable2 = _interopRequireDefault(_engineCPLookUpTable);

var _CPPalette = require('./CPPalette');

var _CPPalette2 = _interopRequireDefault(_CPPalette);

var _CPSlider = require('./CPSlider');

var _CPSlider2 = _interopRequireDefault(_CPSlider);

function wrapCheckboxWithLabel(checkbox, title) {
    var div = document.createElement("div"),
        label = document.createElement("label");

    div.className = "checkbox";

    label.appendChild(checkbox);
    label.appendChild(document.createTextNode(title));

    div.appendChild(label);

    return div;
}

function loadTextures(textureFilename, width, height, textureCount, then) {
    var img = new Image(),
        textures = [];

    img.onload = function () {
        var canvas = document.createElement("canvas"),
            canvasContext = canvas.getContext("2d");

        canvas.width = img.width;
        canvas.height = img.height;

        for (var i = 0; i < textureCount; i++) {
            canvasContext.drawImage(img, 0, i * height, width, height, 0, 0, width, height);

            try {
                var imageData = canvasContext.getImageData(0, 0, width, height),
                    texture = new _engineCPGreyBmp2['default'](width, height);

                // Take just the red channel from the image to form the new grayscale texture
                for (var j = 0; j < width * height; j++) {
                    texture.data[j] = imageData.data[j * 4];
                }

                textures.push(texture);
            } catch (e) {
                // Quietly ignore errors that occur while loading the image (e.g. cross-origin security failures)
                console.log(e);
            }
        }

        then(textures);
    };

    img.src = textureFilename;
}

function CPTexturePalette(controller) {
    _CPPalette2['default'].call(this, controller, "textures", "Textures");

    var TEXTURE_PREVIEW_SIZE = 64,
        TEXTURE_SWATCH_BUTTON_SIZE = 32,
        textures = [],
        // Array of CPGreyBmp
    selectedTexture,
        processedTexture,
        //Both CPGreyBmp

    mirror = false,
        inverse = false,
        brightness = 0.0,
        contrast = 0.0,
        optionsPanel,
        texturesPanel = document.createElement("div"),
        body = this.getBodyElement();

    /**
     * Add an array of textures to the global texture list, and add swatches for them to the UI.
     */
    function addTextures(newTextures) {
        for (var i = 0; i < newTextures.length; i++) {
            var texture = newTextures[i];

            textures.push(texture);

            var button = new CPTextureSwatch(texture, TEXTURE_SWATCH_BUTTON_SIZE, TEXTURE_SWATCH_BUTTON_SIZE);

            button.on("click", function () {
                selectedTexture = this.texture;
                updateSelectedTexture();
            });

            texturesPanel.appendChild(button.getElement());
        }
    }

    /**
     * Generate and return an array of procedurally-generated textures
     * 
     * @returns CPGreyBmp[]
     */
    function makeProceduralTextures() {
        var result = [null];

        var texture = new _engineCPGreyBmp2['default'](2, 2);
        texture.data[0] = 0xFF;
        texture.data[3] = 0xFF;
        result.push(texture);

        result.push(makeDotTexture(2));
        result.push(makeDotTexture(3));
        result.push(makeDotTexture(4));
        result.push(makeDotTexture(6));
        result.push(makeDotTexture(8));

        result.push(makeVertLinesTexture(1, 2));
        result.push(makeVertLinesTexture(2, 4));

        result.push(makeHorizLinesTexture(1, 2));
        result.push(makeHorizLinesTexture(2, 4));

        result.push(makeCheckerBoardTexture(2));
        result.push(makeCheckerBoardTexture(4));
        result.push(makeCheckerBoardTexture(8));
        result.push(makeCheckerBoardTexture(16));

        return result;
    }

    /**
     * @param size int
     * 
     * @returns CPGreyBmp
     */
    function makeDotTexture(size) {
        var texture = new _engineCPGreyBmp2['default'](size, size);

        for (var i = 1; i < size * size; i++) {
            texture.data[i] = 0xFF;
        }
        return texture;
    }

    /**
     * Make a checkerboard texture of the given dimensions.
     * 
     * @param size int
     * 
     * @returns CPGreyBmp
     */
    function makeCheckerBoardTexture(size) {
        var textureSize = 2 * size,
            texture = new _engineCPGreyBmp2['default'](textureSize, textureSize);

        for (var i = 0; i < textureSize; i++) {
            for (var j = 0; j < textureSize; j++) {
                texture.data[i + j * textureSize] = (~ ~(i / size) + ~ ~(j / size)) % 2 == 0 ? 0 : 0xFF;
            }
        }

        return texture;
    }

    /**
     * Make a texture consisting of a series of evenly-spaced vertical lines
     * 
     * @param lineSize int
     * @param size int
     * 
     * @returns CPGreyBmp
     */
    function makeVertLinesTexture(lineSize, size) {
        var texture = new _engineCPGreyBmp2['default'](size, size);

        for (var i = 0; i < size * size; i++) {
            if (~ ~(i % size) >= lineSize) {
                texture.data[i] = 0xFF;
            }
        }

        return texture;
    }

    /**
     * Make a texture consisting of a series of evenly-spaced horizontal lines
     *
     * @param lineSize int
     * @param size int
     * 
     * @returns CPGreyBmp
     */
    function makeHorizLinesTexture(lineSize, size) {
        var texture = new _engineCPGreyBmp2['default'](size, size);

        for (var i = 0; i < size * size; i++) {
            if (i / size >= lineSize) {
                texture.data[i] = 0xFF;
            }
        }

        return texture;
    }

    function updateSelectedTexture() {
        if (selectedTexture != null) {
            processedTexture = selectedTexture.clone();

            if (mirror) {
                processedTexture.mirrorHorizontally();
            }

            var lut = new _engineCPLookUpTable2['default']();

            lut.loadBrightnessContrast(brightness, contrast);

            if (inverse) {
                lut.invert();
            }

            processedTexture.applyLUT(lut);
        } else {
            processedTexture = null;
        }

        controller.getArtwork().setBrushTexture(processedTexture);

        if (optionsPanel != null) {
            optionsPanel.updateTexture();
        }
    }

    function CPTextureOptionsPanel() {
        var panel = document.createElement("div"),
            cbInverse = document.createElement("input"),
            cbMirror = document.createElement("input"),
            slBrightness = new _CPSlider2['default'](0, 200, true),
            slContrast = new _CPSlider2['default'](0, 200, true),
            sampleSwatch = new CPTextureSwatch(null, TEXTURE_PREVIEW_SIZE, TEXTURE_PREVIEW_SIZE),
            btnCustomize = document.createElement("button"),
            textureControlsPanel;

        function updatePopoverControls() {
            cbInverse.checked = inverse;
            cbMirror.checked = mirror;

            slBrightness.setValue(brightness * 100 + 100);
            slContrast.setValue(contrast * 100 + 100);
        }

        function buildTextureControlsPanel() {
            var panel = document.createElement("div");

            cbInverse.type = "checkbox";
            cbInverse.addEventListener("click", function (e) {
                inverse = this.checked;
                updateSelectedTexture();
            });

            panel.appendChild(wrapCheckboxWithLabel(cbInverse, "Inverse"));

            cbMirror.type = "checkbox";
            cbMirror.addEventListener("click", function (e) {
                mirror = this.checked;
                updateSelectedTexture();
            });

            panel.appendChild(wrapCheckboxWithLabel(cbMirror, "Mirror"));

            slBrightness.title = function (value) {
                return "Brightness: " + (value - 100) + "%";
            };

            slBrightness.on("valueChange", function (value) {
                brightness = (value - 100) / 100.0;

                updateSelectedTexture();
            });

            panel.appendChild(slBrightness.getElement());

            slContrast.title = function (value) {
                return "Contrast: " + (value - 100) + "%";
            };

            slContrast.on("valueChange", function (value) {
                contrast = (value - 100) / 100;

                updateSelectedTexture();
            });

            panel.appendChild(slContrast.getElement());

            var okayButton = document.createElement("button"),
                resetButton = document.createElement("button");

            okayButton.innerHTML = "Ok";
            okayButton.className = "btn btn-primary btn-sm";
            okayButton.type = "button";

            okayButton.addEventListener("click", function (e) {
                $(btnCustomize).popover('hide');
            });

            panel.appendChild(okayButton);
            panel.appendChild(document.createTextNode(" "));

            resetButton.innerHTML = "Reset";
            resetButton.className = "btn btn-default btn-sm";
            resetButton.type = "button";

            resetButton.addEventListener("click", function (e) {
                brightness = 0;
                contrast = 0;
                mirror = false;
                inverse = false;

                updatePopoverControls();
                updateSelectedTexture();
            });

            panel.appendChild(resetButton);

            updatePopoverControls();

            return panel;
        }

        // TODO use events instead
        this.updateTexture = function () {
            btnCustomize.disabled = processedTexture == null;
            sampleSwatch.setTexture(processedTexture);
        };

        this.getElement = function () {
            return panel;
        };

        panel.className = "chickenpaint-texture-options";
        panel.appendChild(sampleSwatch.getElement());

        btnCustomize.type = "button";
        btnCustomize.className = "btn btn-default btn-sm";
        btnCustomize.innerHTML = "Customize";

        textureControlsPanel = buildTextureControlsPanel();

        $(btnCustomize).popover({
            html: true,
            content: function content() {
                return textureControlsPanel;
            },
            trigger: "manual"
        }).on("click", function () {
            $(this).popover("toggle");
        });

        panel.appendChild(btnCustomize);

        this.updateTexture();
    }

    function CPTextureSwatch(texture, width, height) {
        var canvas = document.createElement("canvas"),
            canvasContext = canvas.getContext("2d"),
            that = this;

        this.setTexture = function (texture) {
            this.texture = texture;

            this.paint();
        };

        this.getElement = function () {
            return canvas;
        };

        this.paint = function () {
            if (this.texture != null) {
                canvasContext.fillStyle = canvasContext.createPattern(this.texture.toCanvas(), "repeat");
            } else {
                canvasContext.fillStyle = 'white';
            }
            canvasContext.fillRect(0, 0, canvas.width, canvas.height);
        };

        canvas.addEventListener("click", function () {
            that.emit("click");
        });

        canvas.width = width;
        canvas.height = height;

        this.setTexture(texture);
    }

    CPTextureSwatch.prototype = Object.create(EventEmitter.prototype);
    CPTextureSwatch.prototype.constructor = CPTextureSwatch;

    optionsPanel = new CPTextureOptionsPanel();

    body.appendChild(optionsPanel.getElement());

    texturesPanel.className = 'chickenpaint-texture-swatches';

    body.appendChild(texturesPanel);

    addTextures(makeProceduralTextures());

    loadTextures(controller.getResourcesRoot() + "gfx/textures32.png", 32, 32, 2, function (loadedTextures) {
        addTextures(loadedTextures);
    });
}

CPTexturePalette.prototype = Object.create(_CPPalette2['default'].prototype);
CPTexturePalette.prototype.constructor = CPTexturePalette;
module.exports = exports['default'];

},{"../engine/CPGreyBmp":10,"../engine/CPLookUpTable":12,"./CPPalette":31,"./CPSlider":36}],42:[function(require,module,exports){
/*
    ChickenPaint
    
    ChickenPaint is a translation of ChibiPaint from Java to JavaScript
    by Nicholas Sherlock / Chicken Smoothie.
    
    ChibiPaint is Copyright (c) 2006-2008 Marc Schefer

    ChickenPaint is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    ChickenPaint is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with ChickenPaint. If not, see <http://www.gnu.org/licenses/>.
*/

"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports["default"] = CPToolPalette;

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

var _CPPalette = require('./CPPalette');

var _CPPalette2 = _interopRequireDefault(_CPPalette);

function CPToolPalette(cpController) {
    _CPPalette2["default"].call(this, cpController, "tool", "Tools");

    var that = this,
        buttons = [{
        className: "chickenpaint-tool-rect-selection",
        command: "CPRectSelection",
        toolTip: "Marquee",
        shortcut: "m"
    }, {
        className: "chickenpaint-tool-move",
        command: "CPMoveTool",
        toolTip: "Move tool",
        shortcut: "v"
    }, {
        className: "chickenpaint-tool-flood-fill",
        command: "CPFloodFill",
        toolTip: "Flood fill",
        shortcut: "f"
    }, {
        className: "chickenpaint-tool-gradient-fill",
        command: "CPGradientFill",
        toolTip: "Gradient fill",
        shortcut: "g"
    }, {
        className: "chickenpaint-tool-color-picker",
        command: "CPColorPicker",
        toolTip: "Color picker",
        shortcut: "i"
    }, {
        className: "chickenpaint-tool-rotate-canvas",
        command: "CPRotateCanvas",
        commandDoubleClick: "CPResetCanvasRotation",
        toolTip: "Rotate canvas"
    }, {
        className: "chickenpaint-tool-pencil",
        command: "CPPencil",
        toolTip: "Pencil"

    }, {
        className: "chickenpaint-tool-pen",
        command: "CPPen",
        toolTip: "Pen",
        selected: true // TODO a better mechanism for the controller to let us know the initial tool
    }, {
        className: "chickenpaint-tool-airbrush",
        command: "CPAirbrush",
        toolTip: "Airbrush"
    }, {
        className: "chickenpaint-tool-water",
        command: "CPWater",
        toolTip: "Waterpaint"
    }, {
        className: "chickenpaint-tool-eraser",
        command: "CPEraser",
        toolTip: "Eraser",
        shortcut: "e"
    }, {
        className: "chickenpaint-tool-soft-eraser",
        command: "CPSoftEraser",
        toolTip: "Soft eraser"
    }, {
        className: "chickenpaint-tool-smudge",
        command: "CPSmudge",
        toolTip: "Smudge"
    }, {
        className: "chickenpaint-tool-blender",
        command: "CPBlender",
        toolTip: "Blender"
    }, {
        className: "chickenpaint-tool-dodge",
        command: "CPDodge",
        toolTip: "Dodge",
        shortcut: "o"
    }, {
        className: "chickenpaint-tool-burn",
        command: "CPBurn",
        toolTip: "Burn",
        shortcut: "p"
    }, {
        className: "chickenpaint-tool-blur",
        command: "CPBlur",
        toolTip: "Blur"
    }],
        listElem = document.createElement("ul");

    function buttonClicked(e) {
        if (this.nodeName == "LI") {
            var button = buttons[parseInt(this.getAttribute("data-buttonIndex"), 10)];

            $("li", listElem).removeClass("selected");
            $(this).addClass("selected");

            cpController.actionPerformed({ action: button.command });
        }
    }

    function buildButtons() {
        var body = that.getBodyElement();

        listElem.className = "chickenpaint-tools list-unstyled";

        for (var i in buttons) {
            (function (i) {
                var button = buttons[i],
                    buttonElem = document.createElement("li");

                buttonElem.className = "chickenpaint-toolbar-button " + button.className;
                buttonElem.setAttribute("data-buttonIndex", i);
                buttonElem.title = button.toolTip;

                if (button.shortcut) {
                    buttonElem.title += " (" + button.shortcut.toUpperCase() + ")";

                    key(button.shortcut, function () {
                        buttonClicked.call(buttonElem);

                        return false;
                    });
                }

                if (button.selected) {
                    buttonElem.className = buttonElem.className + " selected";
                }

                listElem.appendChild(buttonElem);
            })(i);
        }

        $(listElem).on("click", "li", buttonClicked);

        listElem.addEventListener("dblclick", function (e) {
            if (this.nodeName == "LI") {
                var button = buttons[parseInt(this.getAttribute("data-buttonIndex"), 10)];

                if (button.commandDoubleClick) {
                    cpController.actionPerformed({ action: button.commandDoubleClick });
                }
            }
        });

        body.appendChild(listElem);
    }

    buildButtons();
}

CPToolPalette.prototype = Object.create(_CPPalette2["default"].prototype);
CPToolPalette.prototype.constructor = CPToolPalette;
module.exports = exports["default"];

},{"./CPPalette":31}],43:[function(require,module,exports){
/* 
 * By Nicholas Sherlock <n.sherlock@gmail.com>
 * 
 * Released under the WTFPLv2 https://en.wikipedia.org/wiki/WTFPL
 */

"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports["default"] = AdobeColorTable;

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

var _ArrayDataStream = require("./ArrayDataStream");

var _ArrayDataStream2 = _interopRequireDefault(_ArrayDataStream);

var ACO_COLORSPACE_RGB = 0,
    ACO_COLORSPACE_HSB = 1,
    ACO_COLORSPACE_CMYK = 2,
    ACO_COLORSPACE_LAB = 7,
    ACO_COLORSPACE_GRAYSCALE = 8;

function AdobeColorTable() {}

/**
 * Read an .aco (Adobe COlor) swatches file and return an array of RGB colors.
 * 
 * Supports version 1 palettes, only RGB format.
 * 
 * @param input A Uint8Array of the .aco file contents
 * @return An array of colours, or null if the file was not supported.
 */
AdobeColorTable.prototype.read = function (input) {
    if (input == null) {
        return null;
    }

    var stream = new _ArrayDataStream2["default"](new Uint8Array(input)),
        version,
        count,
        result = [];

    version = stream.readU16BE();
    if (version != 1) {
        return null;
    }
    count = stream.readU16BE();

    for (var i = 0; i < count; i++) {
        var colourspace = stream.readU16BE();

        if (colourspace != ACO_COLORSPACE_RGB) {
            continue; // Drop unsupported colours silently
        }

        // Scale back down from 16-bit to 8-bit
        var r = stream.readU16BE() * 255 / 65535,
            g = stream.readU16BE() * 255 / 65535,
            b = stream.readU16BE() * 255 / 65535;

        stream.readU16BE(); // third value unused

        result.push(r << 16 | g << 8 | b);
    }

    return result;
};

/**
 * Write an .aco (Adobe COlor) swatches file of the given array of RGB colours (colors are integers with the
 * blue channel in the least-significant position).
 */
AdobeColorTable.prototype.write = function (colours) {
    var buffer = new Uint8Array(2 * 2 + colours.length * 10),
        stream = new _ArrayDataStream2["default"](buffer);

    stream.writeU16BE(1); // Version 1
    stream.writeU16BE(colours.length); // Number of colours

    for (var i = 0; i < colours.length; i++) {
        var colour = colours[i];

        stream.writeU16BE(ACO_COLORSPACE_RGB);

        // Scale up colours to 16-bits (65535/255 = 257)
        stream.writeU16BE((colour >> 16 & 0xFF) * 257);
        stream.writeU16BE((colour >> 8 & 0xFF) * 257);
        stream.writeU16BE((colour & 0xFF) * 257);
        stream.writeU16BE(0);
    }

    return stream.getAsDataArray();
};
module.exports = exports["default"];

},{"./ArrayDataStream":44}],44:[function(require,module,exports){
/**
 * A tool for presenting a Uint8Array as a stream for reading and writing some simple data types.
 * 
 * By Nicholas Sherlock <n.sherlock@gmail.com> 2016, released under the WTFPL license.
 */

"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports["default"] = ArrayDataStream;
var EOF = -1;

function signExtend16Bit(word) {
    //If sign bit is set, fill the top bits with 1s to sign-extend
    return word & 0x8000 ? word | 0xFFFF0000 : word;
}

function signExtend8Bit(byte) {
    //If sign bit is set, fill the top bits with 1s to sign-extend
    return byte & 0x80 ? byte | 0xFFFFFF00 : byte;
}

/**
 * Create a stream on existing array of unsigned byte data (i.e. hopefully Uint8Array).
 * 
 * @param data Uint8Array to stream data from
 * @param start The index of the byte in the array that will be read first, or leave undefined to begin at the
 *              beginning of the array
 * @param end The index of the end of the stream, or leave undefined to use the end of the array as the end of
 *            the stream.
 */

function ArrayDataStream(data, start, end) {
    this.data = data;
    this.eof = false;
    this.start = start === undefined ? 0 : start;
    this.end = end === undefined ? data.length : end;
    this.pos = this.start;
}

;

/**
 * Read a single byte from the stream and turn it into a JavaScript string (assuming ASCII).
 * 
 * @returns String containing one character, or EOF if the end of file was reached (eof flag
 * is set).
 */
ArrayDataStream.prototype.readChar = function () {
    if (this.pos < this.end) {
        return String.fromCharCode(this.data[this.pos++]);
    }

    this.eof = true;
    return EOF;
};

/**
 * Read one unsigned byte from the stream
 * 
 * @returns Unsigned byte, or EOF if the end of file was reached (eof flag is set).
 */
ArrayDataStream.prototype.readByte = function () {
    if (this.pos < this.end) {
        return this.data[this.pos++];
    }

    this.eof = true;
    return EOF;
};

//Synonym:
ArrayDataStream.prototype.readU8 = ArrayDataStream.prototype.readByte;

ArrayDataStream.prototype.readS8 = function () {
    return signExtend8Bit(this.readByte());
};

ArrayDataStream.prototype.unreadChar = function (c) {
    this.pos--;
};

ArrayDataStream.prototype.peekChar = function () {
    if (this.pos < this.end) {
        return String.fromCharCode(this.data[this.pos]);
    }

    this.eof = true;
    return EOF;
};

ArrayDataStream.prototype.readString = function (length) {
    var chars = new Array(length),
        i;

    for (i = 0; i < length; i++) {
        chars[i] = this.readChar();
    }

    return chars.join("");
};

ArrayDataStream.prototype.readS16 = function () {
    var b1 = this.readByte(),
        b2 = this.readByte();

    return signExtend16Bit(b1 << 8 | b2);
};

ArrayDataStream.prototype.readU16BE = function () {
    var b1 = this.readByte(),
        b2 = this.readByte();

    return b1 << 8 | b2;
};

ArrayDataStream.prototype.readU16LE = function () {
    var b1 = this.readByte(),
        b2 = this.readByte();

    return b2 << 8 | b1;
};

ArrayDataStream.prototype.readU32BE = function () {
    var b1 = this.readByte(),
        b2 = this.readByte(),
        b3 = this.readByte(),
        b4 = this.readByte();
    return (b1 << 24 | b2 << 16 | b3 << 8 | b4) >>> 0;
};

ArrayDataStream.prototype.readU32LE = function () {
    var b1 = this.readByte(),
        b2 = this.readByte(),
        b3 = this.readByte(),
        b4 = this.readByte();
    return (b4 << 24 | b3 << 16 | b2 << 8 | b1) >>> 0;
};

ArrayDataStream.prototype.readBytes = function (count) {
    var result = this.data.subarray(this.pos, this.pos + count);

    this.pos += count;

    if (this.pos > this.end) {
        this.eof = true;
    }

    return result;
};

ArrayDataStream.prototype.skip = function (numBytes) {
    this.pos += numBytes;

    if (this.pos > this.end) {
        this.eof = true;
    }
};

ArrayDataStream.prototype.seek = function (offset) {
    this.pos = offset;
};

ArrayDataStream.prototype.writeBytes = function (arr) {
    for (var i = 0; i < arr.length; i++) {
        this.data[this.pos++] = arr[i];
    }
};

ArrayDataStream.prototype.writeByte = function (b) {
    this.data[this.pos++] = b;
};

//Synonym:
ArrayDataStream.prototype.writeU8 = ArrayDataStream.prototype.writeByte;

ArrayDataStream.prototype.writeU16LE = function (u) {
    this.data[this.pos++] = u;
    this.data[this.pos++] = u >> 8;
};

ArrayDataStream.prototype.writeU16BE = function (u) {
    this.data[this.pos++] = u >> 8;
    this.data[this.pos++] = u;
};

ArrayDataStream.prototype.writeU32BE = function (u) {
    this.data[this.pos++] = u >> 24;
    this.data[this.pos++] = u >> 16;
    this.data[this.pos++] = u >> 8;
    this.data[this.pos++] = u;
};

ArrayDataStream.prototype.writeU32LE = function (u) {
    this.data[this.pos++] = u;
    this.data[this.pos++] = u >> 8;
    this.data[this.pos++] = u >> 16;
    this.data[this.pos++] = u >> 24;
};

ArrayDataStream.prototype.writeDoubleBE = function (d) {
    var bytes = new Uint8Array(new Float64Array([d]).buffer);

    for (var i = bytes.length - 1; i >= 0; i--) {
        this.writeByte(bytes[i]);
    }
};

ArrayDataStream.prototype.writeFloatBE = function (d) {
    var bytes = new Uint8Array(new Float32Array([d]).buffer);

    for (var i = bytes.length - 1; i >= 0; i--) {
        this.writeByte(bytes[i]);
    }
};

/**
 * Write an ASCII string to the stream
 */
ArrayDataStream.prototype.writeString = function (s) {
    for (var i = 0; i < s.length; i++) {
        this.data[this.pos++] = s.charCodeAt(i);
    }
};

/**
 * Write the given unsigned 32-bit integer to the stream in big-endian order using the given byte width.
 * No error checking is performed to ensure that the supplied width is correct for the integer.
 * 
 * Omit the width parameter to have it determined automatically for you.
 * 
 * @param u Unsigned integer to be written
 * @param width Number of bytes to write to the stream
 */
ArrayDataStream.prototype.writeUnsignedIntBE = function (u, width) {
    if (width === undefined) {
        width = this.measureUnsignedInt(u);
    }

    // Each case falls through:
    switch (width) {
        case 5:
            this.writeU8(Math.floor(u / 4294967296)); // Need to use division to access >32 bits of floating point var
        case 4:
            this.writeU8(u >> 24);
        case 3:
            this.writeU8(u >> 16);
        case 2:
            this.writeU8(u >> 8);
        case 1:
            this.writeU8(u);
            break;
        default:
            throw new RuntimeException("Bad UINT size " + width);
    }
};

/**
 * Return the number of bytes needed to hold the non-zero bits of the given unsigned integer.
 */
ArrayDataStream.prototype.measureUnsignedInt = function (val) {
    // Force to 32-bit unsigned integer
    if (val < 1 << 8) {
        return 1;
    } else if (val < 1 << 16) {
        return 2;
    } else if (val < 1 << 24) {
        return 3;
    } else if (val < 4294967296) {
        return 4;
    } else {
        return 5;
    }
};

/**
 * Return a view on the portion of the buffer from the beginning to the current seek position as a Uint8Array.
 */
ArrayDataStream.prototype.getAsDataArray = function () {
    if (this.pos < this.data.byteLength) {
        return this.data.subarray(0, this.pos);
    } else if (this.pos == this.data.byteLength) {
        return this.data;
    } else {
        throw "ArrayDataStream's pos lies beyond end of buffer";
        // Chance is pretty good that you overflowed the end of the buffer during writing and your file is trash
    }
};

ArrayDataStream.prototype.EOF = EOF;
module.exports = exports["default"];

},{}],45:[function(require,module,exports){
/*
    ChickenPaint
    
    ChickenPaint is a translation of ChibiPaint from Java to JavaScript
    by Nicholas Sherlock / Chicken Smoothie.
    
    ChibiPaint is Copyright (c) 2006-2008 Marc Schefer

    ChickenPaint is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    ChickenPaint is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with ChickenPaint. If not, see <http://www.gnu.org/licenses/>.
*/

"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports["default"] = CPBezier;

function CPBezier() {

    // How to use this class:
    //
    // 1 - set the 4 points coordinates (x0-3, y0-3)
    // two options:
    // 2a - call init() with desired dt then read the current coordinate (Bx, By) and use nextPoint() to compute the
    // next point
    // 2b - use one of the "compute" methods to compute the values for the whole curve in one step

    // The 4 points coordinates
    this.x0 = this.y0 = this.x1 = this.y1 = this.x2 = this.y2 = this.x3 = this.y3 = 0.0;

    // used to compute the Bezier curve with the forward differences method
    var Bx,
        dBx,
        ddBx,
        dddBx,
        By,
        dBy,
        ddBy,
        dddBy,
        that = this;

    function init(dt) {
        // Implements a fast degree-3 Bezier curve using the forward differences method
        //
        // Reference for this algorithm:
        // "Curves and Surfaces for Computer Graphics" by David Salomon, page 189

        var q1 = 3.0 * dt,
            q2 = q1 * dt,
            q3 = dt * dt * dt,
            q4 = 2.0 * q2,
            q5 = 6.0 * q3,
            q6x = that.x0 - 2.0 * that.x1 + that.x2,
            q6y = that.y0 - 2.0 * that.y1 + that.y2,
            q7x = 3.0 * (that.x1 - that.x2) - that.x0 + that.x3,
            q7y = 3.0 * (that.y1 - that.y2) - that.y0 + that.y3;

        Bx = that.x0;
        By = that.y0;

        dBx = (that.x1 - that.x0) * q1 + q6x * q2 + q7x * q3;
        dBy = (that.y1 - that.y0) * q1 + q6y * q2 + q7y * q3;

        ddBx = q6x * q4 + q7x * q5;
        ddBy = q6y * q4 + q7y * q5;

        dddBx = q7x * q5;
        dddBy = q7y * q5;
    }

    /**
     * Fill the given x,y arrays with a series of points on the curve.
     * 
     * @param x int[]
     * @param y int[]
     * @param elements int Count of elements to fill x and y arrays
     */
    this.compute = function (x, y, elements) {
        init(1.0 / elements);

        x[0] = ~ ~Bx;
        y[0] = ~ ~By;

        for (var i = 1; i < elements; i++) {
            Bx += dBx;
            By += dBy;
            dBx += ddBx;
            dBy += ddBy;
            ddBx += dddBx;
            ddBy += dddBy;

            x[i] = ~ ~Bx;
            y[i] = ~ ~By;
        }
    };
}

module.exports = exports["default"];

},{}],46:[function(require,module,exports){
/*
    ChickenPaint
    
    ChickenPaint is a translation of ChibiPaint from Java to JavaScript
    by Nicholas Sherlock / Chicken Smoothie.
    
    ChibiPaint is Copyright (c) 2006-2008 Marc Schefer

    ChickenPaint is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    ChickenPaint is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with ChickenPaint. If not, see <http://www.gnu.org/licenses/>.
*/

"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports["default"] = CPColor;

function CPColor(rgb) {
    var that = this;

    this.rgb = 0; // in RGB byte order

    this.hue = 0;
    this.saturation = 0;
    this.value = 0;

    function rgbToHsv() {
        var r = that.rgb >> 16 & 0xff,
            g = that.rgb >> 8 & 0xff,
            b = that.rgb & 0xff;

        // Value
        that.value = Math.max(r, Math.max(g, b));

        // Saturation
        var mini = Math.min(r, Math.min(g, b));

        if (that.value == 0) {
            that.saturation = 0;
        } else {
            that.saturation = ~ ~((that.value - mini) / that.value * 255);
        }

        // Hue
        if (that.saturation == 0) {
            that.hue = 0;
        } else {
            var cr = (that.value - r) / (that.value - mini),
                cg = (that.value - g) / (that.value - mini),
                cb = (that.value - b) / (that.value - mini);

            var _hue = 0;

            if (that.value == r) {
                _hue = cb - cg;
            }
            if (that.value == g) {
                _hue = 2 + cr - cb;
            }
            if (that.value == b) {
                _hue = 4 + cg - cr;
            }

            _hue *= 60;
            if (_hue < 0) {
                _hue += 360;
            }

            that.hue = ~ ~_hue;
        }
    }

    function hsvToRgb() {
        // no saturation means it's just a shade of grey
        if (that.saturation == 0) {
            that.rgb = that.value << 16 | that.value << 8 | that.value;
        } else {
            var f = that.hue / 60;

            f = f - Math.floor(f);

            var s = that.saturation / 255,
                m = ~ ~(that.value * (1 - s)),
                n = ~ ~(that.value * (1 - s * f)),
                k = ~ ~(that.value * (1 - s * (1 - f)));

            switch (~ ~(that.hue / 60)) {
                case 0:
                    that.rgb = that.value << 16 | k << 8 | m;
                    break;
                case 1:
                    that.rgb = n << 16 | that.value << 8 | m;
                    break;
                case 2:
                    that.rgb = m << 16 | that.value << 8 | k;
                    break;
                case 3:
                    that.rgb = m << 16 | n << 8 | that.value;
                    break;
                case 4:
                    that.rgb = k << 16 | m << 8 | that.value;
                    break;
                case 5:
                    that.rgb = that.value << 16 | m << 8 | n;
                    break;
                default:
                    that.rgb = 0; // invalid hue
                    break;
            }
        }
    }

    this.getRgb = function () {
        return this.rgb;
    };

    this.getSaturation = function () {
        return this.saturation;
    };

    this.getHue = function () {
        return this.hue;
    };

    this.getValue = function () {
        return this.value;
    };

    this.setRgbComponents = function (r, g, b) {
        this.setRgb(r << 16 | g << 8 | b);
    };

    this.setRgb = function (rgb) {
        this.rgb = rgb;
        rgbToHsv();
    };

    this.setHsv = function (hue, value, saturation) {
        this.hue = hue;
        this.saturation = saturation;
        this.value = value;

        hsvToRgb();
    };

    this.setHue = function (hue) {
        this.hue = hue;
        hsvToRgb();
    };

    this.setSaturation = function (saturation) {
        this.saturation = saturation;
        hsvToRgb();
    };

    this.setValue = function (value) {
        this.value = value;
        hsvToRgb();
    };

    this.clone = function () {
        var result = new CPColor();

        result.copyFrom(this);

        return result;
    };

    this.copyFrom = function (c) {
        this.rgb = c.rgb;
        this.hue = c.hue;
        this.saturation = c.saturation;
        this.value = c.value;
    };

    this.isEqual = function (color) {
        return this.rgb == color.rgb && this.hue == color.hue && this.saturation == color.saturation && this.value == color.value;
    };

    this.setRgb(rgb || 0);
}

module.exports = exports["default"];

},{}],47:[function(require,module,exports){
/*
    ChickenPaint
    
    ChickenPaint is a translation of ChibiPaint from Java to JavaScript
    by Nicholas Sherlock / Chicken Smoothie.
    
    ChibiPaint is Copyright (c) 2006-2008 Marc Schefer

    ChickenPaint is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    ChickenPaint is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with ChickenPaint. If not, see <http://www.gnu.org/licenses/>.
*/

// An RGB color with floating point values for each channel (between 0.0 and 1.0)
"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports["default"] = CPColorFloat;

function CPColorFloat(r, g, b) {
    this.r = r;
    this.g = g;
    this.b = b;
}

CPColorFloat.prototype.toInt = function () {
    return Math.max(0, Math.min(255, Math.round(this.r * 255))) << 16 | Math.max(0, Math.min(255, Math.round(this.g * 255))) << 8 | Math.max(0, Math.min(255, Math.round(this.b * 255)));
};

CPColorFloat.prototype.mixWith = function (color, alpha) {
    this.r = this.r * (1.0 - alpha) + color.r * alpha;
    this.g = this.g * (1.0 - alpha) + color.g * alpha;
    this.b = this.b * (1.0 - alpha) + color.b * alpha;
};

CPColorFloat.prototype.clone = function () {
    return new CPColorFloat(this.r, this.g, this.b);
};

CPColorFloat.createFromInt = function (color) {
    return new CPColorFloat((color >>> 16 & 0xff) / 255, (color >>> 8 & 0xff) / 255, (color & 0xff) / 255);
};
module.exports = exports["default"];

},{}],48:[function(require,module,exports){
/*
    ChickenPaint
    
    ChickenPaint is a translation of ChibiPaint from Java to JavaScript
    by Nicholas Sherlock / Chicken Smoothie.
    
    ChibiPaint is Copyright (c) 2006-2008 Marc Schefer

    ChickenPaint is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    ChickenPaint is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with ChickenPaint. If not, see <http://www.gnu.org/licenses/>.
*/

"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports["default"] = CPRandom;

function CPRandom() {
    var nextNextGaussian,
        haveNextNextGaussian = false;

    /**
     * Definition from Java, mean of 0.0 and standard deviation 1.0.
     */
    this.nextGaussian = function () {
        if (haveNextNextGaussian) {
            haveNextNextGaussian = false;
            return nextNextGaussian;
        } else {

            var v1, v2, s;

            do {
                v1 = 2 * Math.random() - 1; // between -1.0 and 1.0
                v2 = 2 * Math.random() - 1; // between -1.0 and 1.0
                s = v1 * v1 + v2 * v2;
            } while (s >= 1 || s == 0);

            var multiplier = Math.sqrt(-2 * Math.log(s) / s);

            nextNextGaussian = v2 * multiplier;
            haveNextNextGaussian = true;

            return v1 * multiplier;
        }
    };
}

;
module.exports = exports["default"];

},{}],49:[function(require,module,exports){
/*
    ChickenPaint
    
    ChickenPaint is a translation of ChibiPaint from Java to JavaScript
    by Nicholas Sherlock / Chicken Smoothie.
    
    ChibiPaint is Copyright (c) 2006-2008 Marc Schefer

    ChickenPaint is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    ChickenPaint is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with ChickenPaint. If not, see <http://www.gnu.org/licenses/>.
*/

"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports["default"] = CPRect;

function CPRect(left, top, right, bottom) {
    /*
    if (left === undefined || top === undefined || right === undefined || bottom === undefined) {
        throw "Bad rect";
    }
    
    if (~~left !== left || ~~top !== top || ~~right !== right || ~~bottom !== bottom) {
        throw "Bad rect";
    }
    */

    this.left = left;
    this.top = top;
    this.right = right;
    this.bottom = bottom;
}

CPRect.prototype.makeEmpty = function () {
    this.left = 0;
    this.top = 0;
    this.right = 0;
    this.bottom = 0;
};

CPRect.prototype.union = function (that) {
    if (this.isEmpty()) {
        this.set(that);
    } else {
        this.left = Math.min(this.left, that.left);
        this.top = Math.min(this.top, that.top);
        this.right = Math.max(this.right, that.right);
        this.bottom = Math.max(this.bottom, that.bottom);
    }
};

/**
 * Clip this rectangle to fit within `that`.
 * 
 * @returns a refence to this rectangle for chaining 
 */
CPRect.prototype.clip = function (that) {
    if (!this.isEmpty()) {
        if (that.isEmpty()) {
            this.makeEmpty();
        } else {
            this.left = Math.max(this.left, that.left);
            this.top = Math.max(this.top, that.top);
            this.right = Math.min(this.right, that.right);
            this.bottom = Math.min(this.bottom, that.bottom);
        }
    }

    return this;
};

CPRect.prototype.isInside = function (that) {
    return this.left >= that.left && this.top >= that.top && this.right <= that.right && this.bottom <= that.bottom;
};

/**
 * Use this rectangle as bounds to clip the placement of the area of srcRect at the position of dstRect inside
 * our bounds.
 *
 * dstRect has its right and bottom set by this operation to match the area that would be copied from the source.
 * srcRect has its coordinates tweaked to match the area that will be copied.
 */
CPRect.prototype.clipSourceDest = function (srcRect, dstRect) {
    dstRect.right = dstRect.left + srcRect.getWidth();
    dstRect.bottom = dstRect.top + srcRect.getHeight();

    if (this.isEmpty() || dstRect.left >= this.right || dstRect.top >= this.bottom || dstRect.right <= this.left || dstRect.bottom <= this.top) {
        srcRect.makeEmpty();
        dstRect.makeEmpty();
    } else {
        // bottom/right
        if (dstRect.right > this.right) {
            srcRect.right -= dstRect.right - this.right;
            dstRect.right = this.right;
        }

        if (dstRect.bottom > this.bottom) {
            srcRect.bottom -= dstRect.bottom - this.bottom;
            dstRect.bottom = this.bottom;
        }

        // top/left
        if (dstRect.left < this.left) {
            srcRect.left += this.left - dstRect.left;
            dstRect.left = this.left;
        }

        if (dstRect.top < this.top) {
            srcRect.top += this.top - dstRect.top;
            dstRect.top = this.top;
        }
    }
};

CPRect.prototype.getWidth = function () {
    return this.right - this.left;
};

CPRect.prototype.getHeight = function () {
    return this.bottom - this.top;
};

CPRect.prototype.isEmpty = function () {
    return this.right <= this.left || this.bottom <= this.top;
};

CPRect.prototype.set = function (r) {
    this.left = r.left;
    this.top = r.top;
    this.right = r.right;
    this.bottom = r.bottom;
};

CPRect.prototype.clone = function () {
    return new CPRect(this.left, this.top, this.right, this.bottom);
};

CPRect.prototype.translate = function (x, y) {
    this.left += x;
    this.right += x;
    this.top += y;
    this.bottom += y;
};

CPRect.prototype.moveTo = function (x, y) {
    this.translate(x - this.left, y - this.top);
};

CPRect.prototype.equals = function (that) {
    return this.left == that.left && this.right == that.right && this.top == that.top && this.bottom == that.bottom;
};

/**
 * Add h pixels to both the left and right sides of the rectangle, and v pixels to both the top and bottom sides.
 *  
 * @param h
 * @param v
 */
CPRect.prototype.grow = function (h, v) {
    // TODO checks for rectangles with zero-extent
    this.left -= h;
    this.right += h;
    this.top -= v;
    this.bottom += v;
};

CPRect.prototype.toString = function () {
    return "(" + this.left + "," + this.top + "," + this.right + "," + this.bottom + ")";
};

/* 
 * Chrome is initially eager to optimize CPRect and users assuming that all the fields are SMIs, then later on decides
 * that they should be tagged numbers after all. This causes all the blending operation functions to be reoptimized
 * a couple of times. 
 * 
 * Avoid that mess by starting things off with floats in the members.  
 */
window.cpRectGarbage = new CPRect(1.5, 2.5, 3.5, 4.5);
module.exports = exports["default"];

},{}],50:[function(require,module,exports){
// Modifications by Nicholas Sherlock. Original docs below:

// Last updated November 2011
// By Simon Sarris
// www.simonsarris.com
// sarris@acm.org
//
// Free to use and distribute at will
// So long as you are nice to people, etc

// Simple class for keeping track of the current transformation matrix

// For instance:
//    var t = new Transform();
//    t.rotate(5);
//    var m = t.m;
//    ctx.setTransform(m[0], m[1], m[2], m[3], m[4], m[5]);

// Is equivalent to:
//    ctx.rotate(5);

// But now you can retrieve it :)

// Remember that this does not account for any CSS transforms applied to the canvas

"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports["default"] = CPTransform;

function CPTransform() {
    this.setToIdentity();
}

CPTransform.prototype.setToIdentity = function () {
    this.m = [1, 0, 0, 1, 0, 0];
};

CPTransform.prototype.multiply = function (matrix) {
    var m11 = this.m[0] * matrix.m[0] + this.m[2] * matrix.m[1],
        m12 = this.m[1] * matrix.m[0] + this.m[3] * matrix.m[1],
        m21 = this.m[0] * matrix.m[2] + this.m[2] * matrix.m[3],
        m22 = this.m[1] * matrix.m[2] + this.m[3] * matrix.m[3],
        dx = this.m[0] * matrix.m[4] + this.m[2] * matrix.m[5] + this.m[4],
        dy = this.m[1] * matrix.m[4] + this.m[3] * matrix.m[5] + this.m[5];

    this.m[0] = m11;
    this.m[1] = m12;
    this.m[2] = m21;
    this.m[3] = m22;
    this.m[4] = dx;
    this.m[5] = dy;
};

CPTransform.prototype.invert = function () {
    var d = 1 / (this.m[0] * this.m[3] - this.m[1] * this.m[2]),
        m0 = this.m[3] * d,
        m1 = -this.m[1] * d,
        m2 = -this.m[2] * d,
        m3 = this.m[0] * d,
        m4 = d * (this.m[2] * this.m[5] - this.m[3] * this.m[4]),
        m5 = d * (this.m[1] * this.m[4] - this.m[0] * this.m[5]);

    this.m[0] = m0;
    this.m[1] = m1;
    this.m[2] = m2;
    this.m[3] = m3;
    this.m[4] = m4;
    this.m[5] = m5;
};

CPTransform.prototype.getInverted = function () {
    var result = new CPTransform();

    result.m[0] = this.m[0];
    result.m[1] = this.m[1];
    result.m[2] = this.m[2];
    result.m[3] = this.m[3];
    result.m[4] = this.m[4];
    result.m[5] = this.m[5];

    result.invert();

    return result;
};

CPTransform.prototype.rotate = function (rad) {
    var c = Math.cos(rad),
        s = Math.sin(rad),
        m11 = this.m[0] * c + this.m[2] * s,
        m12 = this.m[1] * c + this.m[3] * s,
        m21 = this.m[0] * -s + this.m[2] * c,
        m22 = this.m[1] * -s + this.m[3] * c;

    this.m[0] = m11;
    this.m[1] = m12;
    this.m[2] = m21;
    this.m[3] = m22;
};

CPTransform.prototype.rotateAroundPoint = function (rad, x, y) {
    this.translate(x, y);
    this.rotate(rad);
    this.translate(-x, -y);
};

CPTransform.prototype.translate = function (x, y) {
    this.m[4] += this.m[0] * x + this.m[2] * y;
    this.m[5] += this.m[1] * x + this.m[3] * y;
};

CPTransform.prototype.scale = function (sx, sy) {
    this.m[0] *= sx;
    this.m[1] *= sx;
    this.m[2] *= sy;
    this.m[3] *= sy;
};

CPTransform.prototype.transformPoint = function (px, py) {
    var x = px,
        y = py;

    px = x * this.m[0] + y * this.m[2] + this.m[4];
    py = x * this.m[1] + y * this.m[3] + this.m[5];

    return { x: px, y: py };
};

CPTransform.prototype.getTranslateX = function () {
    return this.m[4];
};

CPTransform.prototype.getTranslateY = function () {
    return this.m[5];
};

CPTransform.prototype.clone = function () {
    var result = new CPTransform();

    result.m[0] = this.m[0];
    result.m[1] = this.m[1];
    result.m[2] = this.m[2];
    result.m[3] = this.m[3];
    result.m[4] = this.m[4];
    result.m[5] = this.m[5];

    return result;
};
module.exports = exports["default"];

},{}],51:[function(require,module,exports){
/*
    ChickenPaint
    
    ChickenPaint is a translation of ChibiPaint from Java to JavaScript
    by Nicholas Sherlock / Chicken Smoothie.
    
    ChibiPaint is Copyright (c) 2006-2008 Marc Schefer

    ChickenPaint is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    ChickenPaint is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with ChickenPaint. If not, see <http://www.gnu.org/licenses/>.
*/

"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports["default"] = CPWacomTablet;

function CPWacomTablet() {
    var penAPI = null,
        pluginObject,
        that = this;

    /**
     * Is the pen currently interacting with the tablet surface?
     */
    this.isPen = function () {
        var pointerType;

        if (penAPI) {
            pointerType = penAPI.pointerType;

            return pointerType == 1 /* Pen */ || pointerType == 3 /* Eraser */;
        }

        return false;
    };

    this.getPressure = function () {
        if (penAPI) {
            return penAPI.pressure;
        }

        return 1.0;
    };

    this.pluginLoaded = function () {
        console.log("Wacom tablet support loaded!");

        penAPI = pluginObject.penAPI;
    };

    this.isTabletPresent = function () {
        return !!penAPI;
    };

    /**
     * Call after the document body is ready (needs DOM to be ready for loading the Wacom plugin).
     */
    this.detectTablet = function () {
        // Chrome has dropped NPAPI support, so the Wacom plugin cannot be installed
        if (/Chrome/i.test(navigator.userAgent) && !/OPR/.test(navigator.userAgent)) {
            // Prevent an ugly "this page has tried to load a plugin which is not supported" error message
            console.log("Not attempting to load Wacom tablet plugin, since this is Chrome");
            return;
        }

        console.log("Attempting to load Wacom tablet support...");

        pluginObject = document.createElement("object");

        if ("classid" in pluginObject) {
            // IE
            pluginObject.classid = "CLSID:092dfa86-5807-5a94-bf3b-5a53ba9e5308";
        } else {
            var param = document.createElement("param");

            param.name = "onload";
            param.value = "onWacomPluginLoaded";

            pluginObject.appendChild(param);

            pluginObject.type = "application/x-wacomtabletplugin";
        }

        pluginObject.style.position = "absolute";
        pluginObject.style.visibility = "hidden";
        pluginObject.onload = "onWacomPluginLoaded";

        document.body.appendChild(pluginObject);

        setTimeout(function () {
            if (!that.isTabletPresent()) {
                console.log("Looks like the Wacom plugin isn't installed, or failed to load.");
            }
        }, 5000);
    };
}

CPWacomTablet.getRef = function () {
    if (CPWacomTablet.instance == null) {
        CPWacomTablet.instance = new CPWacomTablet();
    }
    return CPWacomTablet.instance;
};

window.onWacomPluginLoaded = function () {
    CPWacomTablet.getRef().pluginLoaded();
};
module.exports = exports["default"];

},{}]},{},[1])(1)
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3Vzci9sb2NhbC9saWIvbm9kZV9tb2R1bGVzL2Jyb3dzZXJpZnkvbm9kZV9tb2R1bGVzL2Jyb3dzZXItcGFjay9fcHJlbHVkZS5qcyIsIi9Vc2Vycy9uaWNvbGViZWd1ZXNzZS9Eb3dubG9hZHMvY2hpY2tlbnBhaW50LW1hc3Rlci9qcy9DaGlja2VuUGFpbnQuanMiLCIvVXNlcnMvbmljb2xlYmVndWVzc2UvRG93bmxvYWRzL2NoaWNrZW5wYWludC1tYXN0ZXIvanMvZW5naW5lL0NQQXJ0d29yay5qcyIsIi9Vc2Vycy9uaWNvbGViZWd1ZXNzZS9Eb3dubG9hZHMvY2hpY2tlbnBhaW50LW1hc3Rlci9qcy9lbmdpbmUvQ1BCaXRtYXAuanMiLCIvVXNlcnMvbmljb2xlYmVndWVzc2UvRG93bmxvYWRzL2NoaWNrZW5wYWludC1tYXN0ZXIvanMvZW5naW5lL0NQQmxlbmQuanMiLCIvVXNlcnMvbmljb2xlYmVndWVzc2UvRG93bmxvYWRzL2NoaWNrZW5wYWludC1tYXN0ZXIvanMvZW5naW5lL0NQQnJ1c2hJbmZvLmpzIiwiL1VzZXJzL25pY29sZWJlZ3Vlc3NlL0Rvd25sb2Fkcy9jaGlja2VucGFpbnQtbWFzdGVyL2pzL2VuZ2luZS9DUEJydXNoTWFuYWdlci5qcyIsIi9Vc2Vycy9uaWNvbGViZWd1ZXNzZS9Eb3dubG9hZHMvY2hpY2tlbnBhaW50LW1hc3Rlci9qcy9lbmdpbmUvQ1BDaGliaUZpbGUuanMiLCIvVXNlcnMvbmljb2xlYmVndWVzc2UvRG93bmxvYWRzL2NoaWNrZW5wYWludC1tYXN0ZXIvanMvZW5naW5lL0NQQ2xpcC5qcyIsIi9Vc2Vycy9uaWNvbGViZWd1ZXNzZS9Eb3dubG9hZHMvY2hpY2tlbnBhaW50LW1hc3Rlci9qcy9lbmdpbmUvQ1BDb2xvckJtcC5qcyIsIi9Vc2Vycy9uaWNvbGViZWd1ZXNzZS9Eb3dubG9hZHMvY2hpY2tlbnBhaW50LW1hc3Rlci9qcy9lbmdpbmUvQ1BHcmV5Qm1wLmpzIiwiL1VzZXJzL25pY29sZWJlZ3Vlc3NlL0Rvd25sb2Fkcy9jaGlja2VucGFpbnQtbWFzdGVyL2pzL2VuZ2luZS9DUExheWVyLmpzIiwiL1VzZXJzL25pY29sZWJlZ3Vlc3NlL0Rvd25sb2Fkcy9jaGlja2VucGFpbnQtbWFzdGVyL2pzL2VuZ2luZS9DUExvb2tVcFRhYmxlLmpzIiwiL1VzZXJzL25pY29sZWJlZ3Vlc3NlL0Rvd25sb2Fkcy9jaGlja2VucGFpbnQtbWFzdGVyL2pzL2VuZ2luZS9DUFJlc291cmNlTG9hZGVyLmpzIiwiL1VzZXJzL25pY29sZWJlZ3Vlc3NlL0Rvd25sb2Fkcy9jaGlja2VucGFpbnQtbWFzdGVyL2pzL2VuZ2luZS9DUFJlc291cmNlU2F2ZXIuanMiLCIvVXNlcnMvbmljb2xlYmVndWVzc2UvRG93bmxvYWRzL2NoaWNrZW5wYWludC1tYXN0ZXIvanMvZW5naW5lL0NQVW5kby5qcyIsIi9Vc2Vycy9uaWNvbGViZWd1ZXNzZS9Eb3dubG9hZHMvY2hpY2tlbnBhaW50LW1hc3Rlci9qcy9ndWkvQ1BBYm91dERpYWxvZy5qcyIsIi9Vc2Vycy9uaWNvbGViZWd1ZXNzZS9Eb3dubG9hZHMvY2hpY2tlbnBhaW50LW1hc3Rlci9qcy9ndWkvQ1BCb3hCbHVyRGlhbG9nLmpzIiwiL1VzZXJzL25pY29sZWJlZ3Vlc3NlL0Rvd25sb2Fkcy9jaGlja2VucGFpbnQtbWFzdGVyL2pzL2d1aS9DUEJydXNoUGFsZXR0ZS5qcyIsIi9Vc2Vycy9uaWNvbGViZWd1ZXNzZS9Eb3dubG9hZHMvY2hpY2tlbnBhaW50LW1hc3Rlci9qcy9ndWkvQ1BDYW52YXMuanMiLCIvVXNlcnMvbmljb2xlYmVndWVzc2UvRG93bmxvYWRzL2NoaWNrZW5wYWludC1tYXN0ZXIvanMvZ3VpL0NQQ2hlY2tib3guanMiLCIvVXNlcnMvbmljb2xlYmVndWVzc2UvRG93bmxvYWRzL2NoaWNrZW5wYWludC1tYXN0ZXIvanMvZ3VpL0NQQ29sb3JQYWxldHRlLmpzIiwiL1VzZXJzL25pY29sZWJlZ3Vlc3NlL0Rvd25sb2Fkcy9jaGlja2VucGFpbnQtbWFzdGVyL2pzL2d1aS9DUENvbG9yU2VsZWN0LmpzIiwiL1VzZXJzL25pY29sZWJlZ3Vlc3NlL0Rvd25sb2Fkcy9jaGlja2VucGFpbnQtbWFzdGVyL2pzL2d1aS9DUENvbG9yU2xpZGVyLmpzIiwiL1VzZXJzL25pY29sZWJlZ3Vlc3NlL0Rvd25sb2Fkcy9jaGlja2VucGFpbnQtbWFzdGVyL2pzL2d1aS9DUENvbG9yU3dhdGNoLmpzIiwiL1VzZXJzL25pY29sZWJlZ3Vlc3NlL0Rvd25sb2Fkcy9jaGlja2VucGFpbnQtbWFzdGVyL2pzL2d1aS9DUEdVSVV0aWxzLmpzIiwiL1VzZXJzL25pY29sZWJlZ3Vlc3NlL0Rvd25sb2Fkcy9jaGlja2VucGFpbnQtbWFzdGVyL2pzL2d1aS9DUEdyaWREaWFsb2cuanMiLCIvVXNlcnMvbmljb2xlYmVndWVzc2UvRG93bmxvYWRzL2NoaWNrZW5wYWludC1tYXN0ZXIvanMvZ3VpL0NQTGF5ZXJzUGFsZXR0ZS5qcyIsIi9Vc2Vycy9uaWNvbGViZWd1ZXNzZS9Eb3dubG9hZHMvY2hpY2tlbnBhaW50LW1hc3Rlci9qcy9ndWkvQ1BNYWluR1VJLmpzIiwiL1VzZXJzL25pY29sZWJlZ3Vlc3NlL0Rvd25sb2Fkcy9jaGlja2VucGFpbnQtbWFzdGVyL2pzL2d1aS9DUE1haW5NZW51LmpzIiwiL1VzZXJzL25pY29sZWJlZ3Vlc3NlL0Rvd25sb2Fkcy9jaGlja2VucGFpbnQtbWFzdGVyL2pzL2d1aS9DUE1pc2NQYWxldHRlLmpzIiwiL1VzZXJzL25pY29sZWJlZ3Vlc3NlL0Rvd25sb2Fkcy9jaGlja2VucGFpbnQtbWFzdGVyL2pzL2d1aS9DUFBhbGV0dGUuanMiLCIvVXNlcnMvbmljb2xlYmVndWVzc2UvRG93bmxvYWRzL2NoaWNrZW5wYWludC1tYXN0ZXIvanMvZ3VpL0NQUGFsZXR0ZU1hbmFnZXIuanMiLCIvVXNlcnMvbmljb2xlYmVndWVzc2UvRG93bmxvYWRzL2NoaWNrZW5wYWludC1tYXN0ZXIvanMvZ3VpL0NQU2Nyb2xsYmFyLmpzIiwiL1VzZXJzL25pY29sZWJlZ3Vlc3NlL0Rvd25sb2Fkcy9jaGlja2VucGFpbnQtbWFzdGVyL2pzL2d1aS9DUFNlbmREaWFsb2cuanMiLCIvVXNlcnMvbmljb2xlYmVndWVzc2UvRG93bmxvYWRzL2NoaWNrZW5wYWludC1tYXN0ZXIvanMvZ3VpL0NQU2hvcnRjdXRzRGlhbG9nLmpzIiwiL1VzZXJzL25pY29sZWJlZ3Vlc3NlL0Rvd25sb2Fkcy9jaGlja2VucGFpbnQtbWFzdGVyL2pzL2d1aS9DUFNsaWRlci5qcyIsIi9Vc2Vycy9uaWNvbGViZWd1ZXNzZS9Eb3dubG9hZHMvY2hpY2tlbnBhaW50LW1hc3Rlci9qcy9ndWkvQ1BTcGxhc2hTY3JlZW4uanMiLCIvVXNlcnMvbmljb2xlYmVndWVzc2UvRG93bmxvYWRzL2NoaWNrZW5wYWludC1tYXN0ZXIvanMvZ3VpL0NQU3Ryb2tlUGFsZXR0ZS5qcyIsIi9Vc2Vycy9uaWNvbGViZWd1ZXNzZS9Eb3dubG9hZHMvY2hpY2tlbnBhaW50LW1hc3Rlci9qcy9ndWkvQ1BTd2F0Y2hlc1BhbGV0dGUuanMiLCIvVXNlcnMvbmljb2xlYmVndWVzc2UvRG93bmxvYWRzL2NoaWNrZW5wYWludC1tYXN0ZXIvanMvZ3VpL0NQVGFibGV0RGlhbG9nLmpzIiwiL1VzZXJzL25pY29sZWJlZ3Vlc3NlL0Rvd25sb2Fkcy9jaGlja2VucGFpbnQtbWFzdGVyL2pzL2d1aS9DUFRleHR1cmVQYWxldHRlLmpzIiwiL1VzZXJzL25pY29sZWJlZ3Vlc3NlL0Rvd25sb2Fkcy9jaGlja2VucGFpbnQtbWFzdGVyL2pzL2d1aS9DUFRvb2xQYWxldHRlLmpzIiwiL1VzZXJzL25pY29sZWJlZ3Vlc3NlL0Rvd25sb2Fkcy9jaGlja2VucGFpbnQtbWFzdGVyL2pzL3V0aWwvQWRvYmVDb2xvclRhYmxlLmpzIiwiL1VzZXJzL25pY29sZWJlZ3Vlc3NlL0Rvd25sb2Fkcy9jaGlja2VucGFpbnQtbWFzdGVyL2pzL3V0aWwvQXJyYXlEYXRhU3RyZWFtLmpzIiwiL1VzZXJzL25pY29sZWJlZ3Vlc3NlL0Rvd25sb2Fkcy9jaGlja2VucGFpbnQtbWFzdGVyL2pzL3V0aWwvQ1BCZXppZXIuanMiLCIvVXNlcnMvbmljb2xlYmVndWVzc2UvRG93bmxvYWRzL2NoaWNrZW5wYWludC1tYXN0ZXIvanMvdXRpbC9DUENvbG9yLmpzIiwiL1VzZXJzL25pY29sZWJlZ3Vlc3NlL0Rvd25sb2Fkcy9jaGlja2VucGFpbnQtbWFzdGVyL2pzL3V0aWwvQ1BDb2xvckZsb2F0LmpzIiwiL1VzZXJzL25pY29sZWJlZ3Vlc3NlL0Rvd25sb2Fkcy9jaGlja2VucGFpbnQtbWFzdGVyL2pzL3V0aWwvQ1BSYW5kb20uanMiLCIvVXNlcnMvbmljb2xlYmVndWVzc2UvRG93bmxvYWRzL2NoaWNrZW5wYWludC1tYXN0ZXIvanMvdXRpbC9DUFJlY3QuanMiLCIvVXNlcnMvbmljb2xlYmVndWVzc2UvRG93bmxvYWRzL2NoaWNrZW5wYWludC1tYXN0ZXIvanMvdXRpbC9DUFRyYW5zZm9ybS5qcyIsIi9Vc2Vycy9uaWNvbGViZWd1ZXNzZS9Eb3dubG9hZHMvY2hpY2tlbnBhaW50LW1hc3Rlci9qcy91dGlsL0NQV2Fjb21UYWJsZXQuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7cUJDa1F3QixZQUFZOzs7O2lDQTVPWixzQkFBc0I7Ozs7K0JBQ3hCLG9CQUFvQjs7OztzQ0FDYiwyQkFBMkI7Ozs7cUNBQzVCLDBCQUEwQjs7OzttQ0FFNUIseUJBQXlCOzs7OzRCQUU3QixpQkFBaUI7Ozs7Z0NBRWIscUJBQXFCOzs7O29DQUNqQix5QkFBeUI7Ozs7a0NBQzNCLHVCQUF1Qjs7OztpQ0FDeEIsc0JBQXNCOzs7OytCQUN4QixvQkFBb0I7Ozs7K0JBQ3BCLG9CQUFvQjs7OzsyQkFFekIsZ0JBQWdCOzs7O2lDQUNWLHNCQUFzQjs7OzswQkFDN0IsZUFBZTs7OztBQUVsQyxTQUFTLGdCQUFnQixDQUFDLFNBQVMsRUFBRTtBQUNqQyxRQUNJLFdBQVcsSUFBRyxTQUFTLElBQUksTUFBTSxDQUFBLENBQUM7O0FBRXRDLFFBQUksQ0FBQyxXQUFXLEVBQUU7QUFD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SUFBSSxDQUFDLDhCQUFhLGFBQWEsQ0FBQyxhQUFhLENBQUMsUUFBUSxDQUFDLEVBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxHQUFHLEVBQUUsQ0FBQSxBQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ3BGLHVCQUFPLENBQUMsSUFBSSxDQUFDLDhCQUFhLGFBQWEsQ0FBQyxhQUFhLENBQUMsUUFBUSxDQUFDLEVBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxHQUFHLEVBQUUsQ0FBQSxBQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ3BGLHVCQUFPLENBQUMsSUFBSSxDQUFDLDhCQUFhLGFBQWEsQ0FBQyxhQUFhLENBQUMsUUFBUSxDQUFDLENBQUMsRUFBRSxFQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsR0FBRyxFQUFFLENBQUEsQUFBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ3BGLHVCQUFPLENBQUMsSUFBSSxDQUFDLDhCQUFhLGFBQWEsQ0FBQyxhQUFhLENBQUMsUUFBUSxDQUFDLENBQUMsRUFBRSxFQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsR0FBRyxFQUFFLENBQUEsQUFBQyxDQUFDLENBQUMsQ0FBQyxDQUFDOztBQUVwRix1QkFBTyxDQUFDLElBQUksQ0FBQyw4QkFBYSxhQUFhLENBQUMsYUFBYSxDQUFDLFFBQVEsQ0FBQyxFQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsR0FBRyxHQUFHLEdBQUcsRUFBRSxDQUFBLEFBQUMsRUFBRSxFQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsR0FBRyxHQUFHLEdBQUcsRUFBRSxDQUFBLEFBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUM3Ryx1QkFBTyxDQUFDLElBQUksQ0FBQyw4QkFBYSxhQUFhLENBQUMsYUFBYSxDQUFDLFFBQVEsQ0FBQyxFQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsR0FBRyxHQUFHLEdBQUcsRUFBRSxDQUFBLEFBQUMsRUFBRSxFQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsR0FBRyxHQUFHLEdBQUcsRUFB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QUMsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDO0FBQzVDLDBCQUFNLENBQUMsSUFBSSxDQUFDLFFBQVEsR0FBRyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLFFBQVEsR0FBRyxDQUFDLENBQUMsQ0FBQztBQUNwRCwwQkFBTSxDQUFDLElBQUksQ0FBQyxRQUFRLEdBQUcsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxRQUFRLEdBQUcsQ0FBQyxDQUFDLENBQUM7QUFDcEQsMEJBQU0sQ0FBQyxJQUFJLENBQUMsUUFBUSxHQUFHLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQztpQkFDbkMsTUFBTTtBQUNILHdCQUNJLFFBQVEsR0FBRyxHQUFHLEdBQUcsS0FBSyxDQUFDOztBQUUzQiwwQkFBTSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsR0FBRyxBQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsR0FBRyxLQUFLLEdBQUcsTUFBTSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsR0FBRyxRQUFRLENBQUEsR0FBSSxHQUFHLEdBQUksQ0FBQyxDQUFDO0FBQ3JHLDBCQUFNLENBQUMsSUFBSSxDQUFDLFFBQVEsR0FBRyxDQUFDLENBQUMsR0FBRyxBQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxRQUFRLEdBQUcsQ0FBQyxDQUFDLEdBQUcsS0FBSyxHQUFHLE1BQU0sQ0FBQyxJQUFJLENBQUMsUUFBUSxHQUFHLENBQUMsQ0FBQyxHQUFHLFFBQVEsQ0FBQSxHQUFJLEdBQUcsR0FBSSxDQUFDLENBQUM7QUFDakgsMEJBQU0sQ0FBQyxJQUFJLENBQUMsUUFBUSxHQUFHLENBQUMsQ0FBQyxHQUFHLEFBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLFFBQVEsR0FBRyxDQUFDLENBQUMsR0FBRyxLQUFLLEdBQUcsTUFBTSxDQUFDLElBQUksQ0FBQyxRQUFRLEdBQUcsQ0FBQyxDQUFDLEdBQUcsUUFBUSxDQUFBLEdBQUksR0FBRyxH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Q0FDakMsQ0FBQzs7QUFFRixXQUFXLENBQUMsU0FBUyxDQUFDLFFBQVEsR0FBRyxVQUFTLE1BQU0sRUFBRTtBQUM5QyxRQUNJLEdBQUcsR0FBRyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUN2RCxHQUFHLEdBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFFdkQsR0FBRyxHQUFHLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ3ZELEdBQUcsR0FBRyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUV2RCxFQUFFLEdBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNsRSxFQUFFLEdBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDOztBQUV2RSxRQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQztBQUNoQixRQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQztBQUNoQixRQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQztBQUNoQixRQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQztBQUNoQixRQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQztBQUNmLFFBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDO0NBQ2xCLENBQUM7O0FBRUYsV0FBVyxDQUFDLFNBQVMsQ0FBQyxNQUFNLEdBQUcsWUFBVztBQUN0QyxRQUNJLENBQUMsR0FBRyxDQUFDLElBQUksSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQSxBQUFDO1FBQ3ZELEVBQUUsR0FBRyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUM7UUFDbEIsRUFBRSxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDO1FBQ25CLEVBQUUsR0FBRyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQztRQUNuQixFQUFFLEdBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDO1FBQ2xCLEVBQUUsR0FBRyxDQUFDLElBQUksSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQSxBQUFDO1FBQ3hELEVBQUUsR0FBRyxDQUFDLElBQUksSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQSxBQUFDLENBQUM7O0FBRTdELFFBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDO0FBQ2YsUUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUM7QUFDZixRQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQztBQUNmLFFBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDO0FBQ2YsUUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUM7QUFDZixRQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQztDQUNsQixDQUFDOztBQUVGLFdBQVcsQ0FBQyxTQUFTLENBQUMsV0FBVyxHQUFHLFlBQVc7QUFDM0MsUUFDSSxNQUFNLEdBQUcsSUFBSSxXQUFXLEVBQUUsQ0FBQzs7QUFFL0IsVUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ3hCLFVBQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUN4QixVQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDeEIsVUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ3hCLFVBQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUN4QixVQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7O0FBRXhCLFVBQU0sQ0FBQyxNQUFNLEVBQUUsQ0FBQzs7QUFFaEIsV0FBTyxNQUFNLENBQUM7Q0FDakIsQ0FBQzs7QUFFRixXQUFXLENBQUMsU0FBUyxDQUFDLE1BQU0sR0FBRyxVQUFTLEdBQUcsRUFBRTtBQUN6QyxRQUNJLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQztRQUNqQixDQUFDLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUM7UUFDakIsR0FBRyxHQUFHLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQztRQUNuQyxHQUFHLEdBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDO1FBQ25DLEdBQUcsR0FBRyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQztRQUNwQyxHQUFHLEdBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQzs7QUFFekMsUUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxHQUFHLENBQUM7QUFDaEIsUUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxHQUFHLENBQUM7QUFDaEIsUUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxHQUFHLENBQUM7QUFDaEIsUUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxHQUFHLENBQUM7Q0FDbkIsQ0FBQzs7QUFFRixXQUFXLENBQUMsU0FBUyxDQUFDLGlCQUFpQixHQUFHLFVBQVMsR0FBRyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUU7QUFDMUQsUUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7QUFDckIsUUFBSSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQztBQUNqQixRQUFJLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7Q0FDMUIsQ0FBQzs7QUFFRixXQUFXLENBQUMsU0FBUyxDQUFDLFNBQVMsR0FBRyxVQUFTLENBQUMsRUFBRSxDQUFDLEVBQUU7QUFDN0MsUUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQztBQUMzQyxRQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0NBQzlDLENBQUM7O0FBRUYsV0FBVyxDQUFDLFNBQVMsQ0FBQyxLQUFLLEdBQUcsVUFBUyxFQUFFLEVBQUUsRUFBRSxFQUFFO0FBQzND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LG9CQUFZLENBQUMsS0FBSyxDQUFDLFFBQVEsR0FBRyxVQUFVLENBQUM7QUFDekMsb0JBQVksQ0FBQyxLQUFLLENBQUMsVUFBVSxHQUFHLFFBQVEsQ0FBQztBQUN6QyxvQkFBWSxDQUFDLE1BQU0sR0FBRyxxQkFBcUIsQ0FBQzs7QUFFNUMsZ0JBQVEsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLFlBQVksQ0FBQyxDQUFDOztBQUV4QyxrQkFBVSxDQUFDLFlBQVc7QUFDbEIsZ0JBQUksQ0FBQyxJQUFJLENBQUMsZUFBZSxFQUFFLEVBQUU7QUFDekIsdUJBQU8sQ0FBQyxHQUFHLENBQUMsaUVBQWlFLENBQUMsQ0FBQzthQUNsRjtTQUNKLEVBQUUsSUFBSSxDQUFDLENBQUM7S0FDWixDQUFDO0NBQ0w7O0FBRUQsYUFBYSxDQUFDLE1BQU0sR0FBRyxZQUFXO0FBQzlCLFFBQUksYUFBYSxDQUFDLFFBQVEsSUFBSSxJQUFJLEVBQUU7QUFDaEMscUJBQWEsQ0FBQyxRQUFRLEdBQUcsSUFBSSxhQUFhLEVBQUUsQ0FBQztLQUNoRDtBQUNELFdBQU8sYUFBYSxDQUFDLFFBQVEsQ0FBQztDQUNqQyxDQUFBOztBQUVELE1BQU0sQ0FBQyxtQkFBbUIsR0FBRyxZQUFXO0FBQ3BDLGlCQUFhLENBQUMsTUFBTSxFQUFFLENBQUMsWUFBWSxFQUFFLENBQUM7Q0FDekMsQ0FBQSIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCIvKlxuICAgIENoaWNrZW5QYWludFxuXG4gICAgQ2hpY2tlblBhaW50IGlzIGEgdHJhbnNsYXRpb24gb2YgQ2hpYmlQYWludCBmcm9tIEphdmEgdG8gSmF2YVNjcmlwdFxuICAgIGJ5IE5pY2hvbGFzIFNoZXJsb2NrIC8gQ2hpY2tlbiBTbW9vdGhpZS5cblxuICAgIENoaWJpUGFpbnQgaXMgQ29weXJpZ2h0IChjKSAyMDA2LTIwMDggTWFyYyBTY2hlZmVyXG5cbiAgICBDaGlja2VuUGFpbnQgaXMgZnJlZSBzb2Z0d2FyZTogeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yIG1vZGlmeVxuICAgIGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgYXMgcHVibGlzaGVkIGJ5XG4gICAgdGhlIEZyZWUgU29mdHdhcmUgRm91bmRhdGlvbiwgZWl0aGVyIHZlcnNpb24gMyBvZiB0aGUgTGljZW5zZSwgb3JcbiAgICAoYXQgeW91ciBvcHRpb24pIGFueSBsYXRlciB2ZXJzaW9uLlxuXG4gICAgQ2hpY2tlblBhaW50IGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsXG4gICAgYnV0IFdJVEhPVVQgQU5ZIFdBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2ZcbiAgICBNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuICBTZWUgdGhlXG4gICAgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy5cblxuICAgIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXG4gICAgYWxvbmcgd2l0aCBDaGlja2VuUGFpbnQuIElmIG5vdCwgc2VlIDxodHRwOi8vd3d3LmdudS5vcmcvbGljZW5zZXMvPi5cbiovXG5cbmltcG9ydCBDUEJydXNoSW5mbyBmcm9tIFwiLi9lbmdpbmUvQ1BCcnVzaEluZm9cIjtcbmltcG9ydCBDUEFydHdvcmsgZnJvbSBcIi4vZW5naW5lL0NQQXJ0d29ya1wiO1xuaW1wb3J0IENQUmVzb3VyY2VMb2FkZXIgZnJvbSBcIi4vZW5naW5lL0NQUmVzb3VyY2VMb2FkZXJcIjtcbmltcG9ydCBDUFJlc291cmNlU2F2ZXIgZnJvbSBcIi4vZW5naW5lL0NQUmVzb3VyY2VTYXZlclwiO1xuXG5pbXBvcnQgQ1BTcGFzaFNjcmVlbiBmcm9tIFwiLi9ndWkvQ1BTcGxhc2hTY3JlZW4uanNcIjtcblxuaW1wb3J0IENQTWFpbkdVSSBmcm9tIFwiLi9ndWkvQ1BNYWluR1VJXCI7XG5cbmltcG9ydCBDUEFib3V0RGlhbG9nIGZyb20gXCIuL2d1aS9DUEFib3V0RGlhbG9nXCI7XG5pbXBvcnQgQ1BTaG9ydGN1dHNEaWFsb2cgZnJvbSBcIi4vZ3VpL0NQU2hvcnRjdXRzRGlhbG9nXCI7XG5pbXBvcnQgQ1BCb3hCbHVyRGlhbG9nIGZyb20gXCIuL2d1aS9DUEJveEJsdXJEaWFsb2dcIjtcbmltcG9ydCBDUFRhYmxldERpYWxvZyBmcm9tIFwiLi9ndWkvQ1BUYWJsZXREaWFsb2dcIjtcbmltcG9ydCBDUEdyaWREaWFsb2cgZnJvbSBcIi4vZ3VpL0NQR3JpZERpYWxvZ1wiO1xuaW1wb3J0IENQU2VuZERpYWxvZyBmcm9tIFwiLi9ndWkvQ1BTZW5kRGlhbG9nXCI7XG5cbmltcG9ydCBDUENvbG9yIGZyb20gXCIuL3V0aWwvQ1BDb2xvclwiO1xuaW1wb3J0IENQV2Fjb21UYWJsZXQgZnJvbSBcIi4vdXRpbC9DUFdhY29tVGFibGV0XCI7XG5pbXBvcnQgQ1BSZWN0IGZyb20gXCIuL3V0aWwvQ1BSZWN0XCI7XG5cbmZ1bmN0aW9uIGlzRXZlbnRTdXBwb3J0ZWQoZXZlbnROYW1lKSB7XG4gICAgdmFyIFxuICAgICAgICBpc1N1cHBvcnRlZCA9IGV2ZW50TmFtZSBpbiB3aW5kb3c7XG4gICAgXG4gICAgaWYgKCFpc1N1cHBvcnRlZCkge1xuICAgICAgdmFyIFxuICAgICAgICAgIGVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICBlbC5zZXRBdHRyaWJ1dGUoZXZlbnROYW1lLCAncmV0dXJuOycpO1xuICAgICAgXG4gICAgICBpc1N1cHBvcnRlZCA9IHR5cGVvZiBlbFtldmVudE5hbWVdID09ICdmdW5jdGlvbic7XG4gICAgfVxuICAgIFxuICAgIHJldHVybiBpc1N1cHBvcnRlZDtcbn1cblxuZnVuY3Rpb24gaXNDYW52YXNTdXBwb3J0ZWQoKXtcbiAgICB2YXIgZWxlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xuICAgIHJldHVybiAhIShlbGVtLmdldENvbnRleHQgJiYgZWxlbS5nZXRDb250ZXh0KCcyZCcpKTtcbn1cblxuZnVuY3Rpb24gaXNCcm93c2VyU3VwcG9ydGVkKCkge1xuICAgIHJldHVybiBpc0NhbnZhc1N1cHBvcnRlZCgpICYmIFwiVWludDhBcnJheVwiIGluIHdpbmRvdztcbn1cblxuZnVuY3Rpb24gY3JlYXRlRHJhd2luZ1Rvb2xzKCkge1xuICAgIHZhclxuICAgICAgICB0b29scyA9IG5ldyBBcnJheShDaGlja2VuUGFpbnQuVF9NQVgpO1xuXG4gICAgdG9vbHNbQ2hpY2tlblBhaW50LlRfUEVOQ0lMXSA9IG5ldyBDUEJydXNoSW5mbyh7XG4gICAgICAgIHRvb2xOYjogQ2hpY2tlblBhaW50LlRfUEVOQ0lMLFxuICAgICAgICBzaXplOiAxNixcbiAgICAgICAgYWxwaGE6IDI1NSxcbiAgICAgICAgaXNBQTogdHJ1ZSxcbiAgICAgICAgbWluU3BhY2luZzogMC41LFxuICAgICAgICBzcGFjaW5nOiAwLjA1LFxuICAgICAgICBwcmVzc3VyZVNpemU6IGZhbHNlLFxuICAgICAgICBwcmVzc3VyZUFscGhhOiB0cnVlLFxuICAgICAgICB0eXBlOiBDUEJydXNoSW5mby5CX1JPVU5EX0FBLFxuICAgICAgICBwYWludE1vZGU6IENQQnJ1c2hJbmZvLk1fUEFJTlRcbiAgICB9KTtcblxuICAgIHRvb2xzW0NoaWNrZW5QYWludC5UX0VSQVNFUl0gPSBuZXcgQ1BCcnVzaEluZm8oe1xuICAgICAgICB0b29sTmI6IENoaWNrZW5QYWludC5UX0VSQVNFUixcbiAgICAgICAgc2l6ZTogMTYsXG4gICAgICAgIGFscGhhOiAyNTUsXG4gICAgICAgIGlzQUE6IHRydWUsXG4gICAgICAgIG1pblNwYWNpbmc6IDAuNSxcbiAgICAgICAgc3BhY2luZzogMC4wNSxcbiAgICAgICAgcHJlc3N1cmVTaXplOiBmYWxzZSxcbiAgICAgICAgcHJlc3N1cmVBbHBoYTogZmFsc2UsXG4gICAgICAgIHR5cGU6IENQQnJ1c2hJbmZvLkJfUk9VTkRfQUEsXG4gICAgICAgIHBhaW50TW9kZTogQ1BCcnVzaEluZm8uTV9FUkFTRVxuICAgIH0pO1xuXG4gICAgdG9vbHNbQ2hpY2tlblBhaW50LlRfUEVOXSA9IG5ldyBDUEJydXNoSW5mbyh7XG4gICAgICAgIHRvb2xOYjogQ2hpY2tlblBhaW50LlRfUEVOLFxuICAgICAgICBzaXplOiAyLFxuICAgICAgICBhbHBoYTogMTI4LFxuICAgICAgICBpc0FBOiB0cnVlLFxuICAgICAgICBtaW5TcGFjaW5nOiAwLjUsXG4gICAgICAgIHNwYWNpbmc6IDAuMDUsXG4gICAgICAgIHByZXNzdXJlU2l6ZTogdHJ1ZSxcbiAgICAgICAgcHJlc3N1cmVBbHBoYTogZmFsc2UsXG4gICAgICAgIHR5cGU6IENQQnJ1c2hJbmZvLkJfUk9VTkRfQUEsXG4gICAgICAgIHBhaW50TW9kZTogQ1BCcnVzaEluZm8uTV9QQUlOVFxuICAgIH0pO1xuXG4gICAgdG9vbHNbQ2hpY2tlblBhaW50LlRfU09GVEVSQVNFUl0gPSBuZXcgQ1BCcnVzaEluZm8oe1xuICAgICAgICB0b29sTmI6IENoaWNrZW5QYWludC5UX1NPRlRFUkFTRVIsXG4gICAgICAgIHNpemU6IDE2LFxuICAgICAgICBhbHBoYTogNjQsXG4gICAgICAgIGlzQUE6IGZhbHNlLFxuICAgICAgICBpc0FpcmJydXNoOiB0cnVlLFxuICAgICAgICBtaW5TcGFjaW5nOiAwLjUsXG4gICAgICAgIHNwYWNpbmc6IDAuMDUsXG4gICAgICAgIHByZXNzdXJlU2l6ZTogZmFsc2UsXG4gICAgICAgIHByZXNzdXJlQWxwaGE6IHRydWUsXG4gICAgICAgIHR5cGU6IENQQnJ1c2hJbmZvLkJfUk9VTkRfQUlSQlJVU0gsXG4gICAgICAgIHBhaW50TW9kZTogQ1BCcnVzaEluZm8uTV9FUkFTRVxuICAgIH0pO1xuXG4gICAgdG9vbHNbQ2hpY2tlblBhaW50LlRfQUlSQlJVU0hdID0gbmV3IENQQnJ1c2hJbmZvKHtcbiAgICAgICAgdG9vbE5iOiBDaGlja2VuUGFpbnQuVF9BSVJCUlVTSCxcbiAgICAgICAgc2l6ZTogNTAsXG4gICAgICAgIGFscGhhOiAzMixcbiAgICAgICAgaXNBQTogZmFsc2UsXG4gICAgICAgIGlzQWlyYnJ1c2g6IHRydWUsXG4gICAgICAgIG1pblNwYWNpbmc6IDAuNSxcbiAgICAgICAgc3BhY2luZzogMC4wNSxcbiAgICAgICAgcHJlc3N1cmVTaXplOiBmYWxzZSxcbiAgICAgICAgcHJlc3N1cmVBbHBoYTogdHJ1ZSxcbiAgICAgICAgdHlwZTogQ1BCcnVzaEluZm8uQl9ST1VORF9BSVJCUlVTSCxcbiAgICAgICAgcGFpbnRNb2RlOiBDUEJydXNoSW5mby5NX1BBSU5UXG4gICAgfSk7XG5cbiAgICB0b29sc1tDaGlja2VuUGFpbnQuVF9ET0RHRV0gPSBuZXcgQ1BCcnVzaEluZm8oe1xuICAgICAgICB0b29sTmI6IENoaWNrZW5QYWludC5UX0RPREdFLFxuICAgICAgICBzaXplOiAzMCxcbiAgICAgICAgYWxwaGE6IDMyLFxuICAgICAgICBpc0FBOiBmYWxzZSxcbiAgICAgICAgaXNBaXJicnVzaDogdHJ1ZSxcbiAgICAgICAgbWluU3BhY2luZzogMC41LFxuICAgICAgICBzcGFjaW5nOiAwLjA1LFxuICAgICAgICBwcmVzc3VyZVNpemU6IGZhbHNlLFxuICAgICAgICBwcmVzc3VyZUFscGhhOiB0cnVlLFxuICAgICAgICB0eXBlOiBDUEJydXNoSW5mby5CX1JPVU5EX0FJUkJSVVNILFxuICAgICAgICBwYWludE1vZGU6IENQQnJ1c2hJbmZvLk1fRE9ER0VcbiAgICB9KTtcblxuICAgIHRvb2xzW0NoaWNrZW5QYWludC5UX0JVUk5dID0gbmV3IENQQnJ1c2hJbmZvKHtcbiAgICAgICAgdG9vbE5iOiBDaGlja2VuUGFpbnQuVF9CVVJOLFxuICAgICAgICBzaXplOiAzMCxcbiAgICAgICAgYWxwaGE6IDMyLFxuICAgICAgICBpc0FBOiBmYWxzZSxcbiAgICAgICAgaXNBaXJicnVzaDogdHJ1ZSxcbiAgICAgICAgbWluU3BhY2luZzogMC41LFxuICAgICAgICBzcGFjaW5nOiAwLjA1LFxuICAgICAgICBwcmVzc3VyZVNpemU6IGZhbHNlLFxuICAgICAgICBwcmVzc3VyZUFscGhhOiB0cnVlLFxuICAgICAgICB0eXBlOiBDUEJydXNoSW5mby5CX1JPVU5EX0FJUkJSVVNILFxuICAgICAgICBwYWludE1vZGU6IENQQnJ1c2hJbmZvLk1fQlVSTlxuICAgIH0pO1xuXG4gICAgdG9vbHNbQ2hpY2tlblBhaW50LlRfV0FURVJdID0gbmV3IENQQnJ1c2hJbmZvKHtcbiAgICAgICAgdG9vbE5iOiBDaGlja2VuUGFpbnQuVF9XQVRFUixcbiAgICAgICAgc2l6ZTogMzAsXG4gICAgICAgIGFscGhhOiA3MCxcbiAgICAgICAgaXNBQTogZmFsc2UsXG4gICAgICAgIGlzQWlyYnJ1c2g6IHRydWUsXG4gICAgICAgIG1pblNwYWNpbmc6IDAuNSxcbiAgICAgICAgc3BhY2luZzogMC4wMixcbiAgICAgICAgcHJlc3N1cmVTaXplOiBmYWxzZSxcbiAgICAgICAgcHJlc3N1cmVBbHBoYTogdHJ1ZSxcbiAgICAgICAgdHlwZTogQ1BCcnVzaEluZm8uQl9ST1VORF9BQSxcbiAgICAgICAgcGFpbnRNb2RlOiBDUEJydXNoSW5mby5NX1dBVEVSLFxuICAgICAgICByZXNhdDogMC4zLFxuICAgICAgICBibGVlZDogMC42XG4gICAgfSk7XG5cbiAgICB0b29sc1tDaGlja2VuUGFpbnQuVF9CTFVSXSA9IG5ldyBDUEJydXNoSW5mbyh7XG4gICAgICAgIHRvb2xOYjogQ2hpY2tlblBhaW50LlRfQkxVUixcbiAgICAgICAgc2l6ZTogMjAsXG4gICAgICAgIGFscGhhOiAyNTUsXG4gICAgICAgIGlzQUE6IGZhbHNlLFxuICAgICAgICBpc0FpcmJydXNoOiB0cnVlLFxuICAgICAgICBtaW5TcGFjaW5nOiAwLjUsXG4gICAgICAgIHNwYWNpbmc6IDAuMDUsXG4gICAgICAgIHByZXNzdXJlU2l6ZTogZmFsc2UsXG4gICAgICAgIHByZXNzdXJlQWxwaGE6IHRydWUsXG4gICAgICAgIHR5cGU6IENQQnJ1c2hJbmZvLkJfUk9VTkRfUElYRUwsXG4gICAgICAgIHBhaW50TW9kZTogQ1BCcnVzaEluZm8uTV9CTFVSXG4gICAgfSk7XG5cbiAgICB0b29sc1tDaGlja2VuUGFpbnQuVF9TTVVER0VdID0gbmV3IENQQnJ1c2hJbmZvKHtcbiAgICAgICAgdG9vbE5iOiBDaGlja2VuUGFpbnQuVF9TTVVER0UsXG4gICAgICAgIHNpemU6IDIwLFxuICAgICAgICBhbHBoYTogMTI4LFxuICAgICAgICBpc0FBOiBmYWxzZSxcbiAgICAgICAgaXNBaXJicnVzaDogdHJ1ZSxcbiAgICAgICAgbWluU3BhY2luZzogMC41LFxuICAgICAgICBzcGFjaW5nOiAwLjAxLFxuICAgICAgICBwcmVzc3VyZVNpemU6IGZhbHNlLFxuICAgICAgICBwcmVzc3VyZUFscGhhOiB0cnVlLFxuICAgICAgICB0eXBlOiBDUEJydXNoSW5mby5CX1JPVU5EX0FJUkJSVVNILFxuICAgICAgICBwYWludE1vZGU6IENQQnJ1c2hJbmZvLk1fU01VREdFLFxuICAgICAgICByZXNhdDogMC4wLFxuICAgICAgICBibGVlZDogMS4wXG4gICAgfSk7XG5cbiAgICB0b29sc1tDaGlja2VuUGFpbnQuVF9CTEVOREVSXSA9IG5ldyBDUEJydXNoSW5mbyh7XG4gICAgICAgIHRvb2xOYjogQ2hpY2tlblBhaW50LlRfQkxFTkRFUixcbiAgICAgICAgc2l6ZTogMjAsXG4gICAgICAgIGFscGhhOiA2MCxcbiAgICAgICAgaXNBQTogZmFsc2UsXG4gICAgICAgIGlzQWlyYnJ1c2g6IHRydWUsXG4gICAgICAgIG1pblNwYWNpbmc6IDAuNSxcbiAgICAgICAgc3BhY2luZzogMC4xLFxuICAgICAgICBwcmVzc3VyZVNpemU6IGZhbHNlLFxuICAgICAgICBwcmVzc3VyZUFscGhhOiB0cnVlLFxuICAgICAgICB0eXBlOiBDUEJydXNoSW5mby5CX1JPVU5EX0FJUkJSVVNILFxuICAgICAgICBwYWludE1vZGU6IENQQnJ1c2hJbmZvLk1fT0lMLFxuICAgICAgICByZXNhdDogMC4wLFxuICAgICAgICBibGVlZDogMC4wN1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIHRvb2xzO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYW4gaW5zdGFuY2Ugb2YgdGhlIENoaWNrZW5QYWludCBkcmF3aW5nIGFwcC4gT3B0aW9ucyBpcyBhbiBvYmplY3Qgd2l0aCB0aGVzZSBrZXlzOlxuICpcbiAqIHVpRWxlbSAgICAgICAtIERPTSBlbGVtZW50IHRvIGluc2VydCBDaGlja2VuUGFpbnQgaW50byAocmVxdWlyZWQpXG4gKiBjYW52YXNXaWR0aCAgLSBXaWR0aCBpbiBwaXhlbHMgdG8gdXNlIHdoZW4gY3JlYXRpbmcgYmxhbmsgY2FudmFzZXMgKGRlZmF1bHRzIHRvIDgwMClcbiAqIGNhbnZhc0hlaWdodCAtIEhlaWdodCBpbiBwaXhlbHMgdG8gdXNlIHdoZW4gY3JlYXRpbmcgYmxhbmsgY2FudmFzZXMgKGRlZmF1bHRzIHRvIDYwMClcbiAqIHJvdGF0aW9uICAgICAtIEludGVnZXIgZnJvbSBbMC4uM10sIG51bWJlciBvZiA5MCBkZWdyZWUgcmlnaHQgcm90YXRpb25zIHRoYXQgc2hvdWxkIGJlIGFwcGxpZWQgdG8gdGhlIGNhbnZhcyBhZnRlclxuICogICAgICAgICAgICAgICAgbG9hZGluZ1xuICpcbiAqIHNhdmVVcmwgICAtIFVSTCB0byBQT1NUIHRoZSBkcmF3aW5nIHRvIHRvIHNhdmUgaXRcbiAqIHBvc3RVcmwgICAtIFVSTCB0byBuYXZpZ2F0ZSB0byBhZnRlciBzYXZpbmcgaXMgc3VjY2Vzc2Z1bCBhbmQgdGhlIHVzZXIgY2hvb3NlcyB0byBzZWUvcHVibGlzaCB0aGVpciBmaW5pc2hlZCBwcm9kdWN0XG4gKiBleGl0VXJsICAgLSBVUkwgdG8gbmF2aWdhdGUgdG8gYWZ0ZXIgc2F2aW5nIGlzIHN1Y2Nlc3NmdWwgYW5kIHRoZSB1c2VyIGNob29zZXMgdG8gZXhpdCAob3B0aW9uYWwpXG4gKiB0ZXN0VXJsICAgLSBVUkwgdGhhdCBDaGlja2VuUGFpbnQgY2FuIHNpbXVsYXRlIGEgZHJhd2luZyB1cGxvYWQgdG8gdG8gdGVzdCB0aGUgdXNlcidzIHBlcm1pc3Npb25zL2Nvbm5lY3Rpb24gKG9wdGlvbmFsKVxuICpcbiAqIGxvYWRJbWFnZVVybCAgICAgLSBVUkwgb2YgUE5HL0pQRUcgaW1hZ2UgdG8gbG9hZCBmb3IgZWRpdGluZyAob3B0aW9uYWwpXG4gKiBsb2FkQ2hpYmlGaWxlVXJsIC0gVVJMIG9mIC5jaGkgZmlsZSB0byBsb2FkIGZvciBlZGl0aW5nIChvcHRpb25hbCkuIFVzZWQgaW4gcHJlZmVyZW5jZSB0byBsb2FkSW1hZ2UuXG4gKiBsb2FkU3dhdGNoZXNVcmwgIC0gVVJMIG9mIGFuIC5hY28gcGFsZXR0ZSB0byBsb2FkIChvcHRpb25hbClcbiAqIFxuICogYWxsb3dEb3dubG9hZCAtIEFsbG93IHRoZSBkcmF3aW5nIHRvIGJlIHNhdmVkIHRvIHRoZSB1c2VyJ3MgY29tcHV0ZXJcbiAqIGFsbG93RnVsbFNjcmVlbiAtIEFsbG93IHRoZSBkcmF3aW5nIHRvb2wgdG8gZW50ZXIgXCJmdWxsIHNjcmVlblwiIG1vZGUsIHdoZXJlIHRoZSByZXN0IG9mIHRoZSBwYWdlIGNvbnRlbnRzIHdpbGwgYmUgaGlkZGVuXG4gKlxuICogZGlzYWJsZUJvb3RzdHJhcEFQSSAtIERpc2FibGUgQm9vdHN0cmFwJ3MgZGF0YSBBUEkgb24gdGhlIHJvb3Qgb2YgdGhlIGRvY3VtZW50LiBUaGlzIHNwZWVkcyB1cCB0aGluZ3MgY29uc2lkZXJhYmx5LlxuICogXG4gKiByZXNvdXJjZXNSb290IC0gVVJMIHRvIHRoZSBkaXJlY3RvcnkgdGhhdCBjb250YWlucyB0aGUgZ2Z4L2NzcyBldGMgZGlyZWN0b3JpZXMgKHJlbGF0aXZlIHRvIHRoZSBwYWdlIHRoYXQgXG4gKiAgICAgICAgICAgICAgICAgQ2hpY2tlblBhaW50IGlzIGxvYWRlZCBvbilcbiAqXG4gKiBAdGhyb3dzIENoaWNrZW5QYWludC5VbnN1cHBvcnRlZEJyb3dzZXJFeGNlcHRpb24gaWYgdGhlIHdlYiBicm93c2VyIGRvZXMgbm90IHN1cHBvcnQgQ2hpY2tlblBhaW50XG4gKi9cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIENoaWNrZW5QYWludChvcHRpb25zKSB7XG4gICAgdmFyXG4gICAgICAgIHRoYXQgPSB0aGlzLFxuXG4gICAgICAgIHVpRWxlbSA9IG9wdGlvbnMudWlFbGVtLFxuXG4gICAgICAgIGNhbnZhcyxcbiAgICAgICAgbWFpbkdVSSxcblxuICAgICAgICBjdXJDb2xvciA9IG5ldyBDUENvbG9yKDApLFxuICAgICAgICBjdXJCcnVzaCA9IENoaWNrZW5QYWludC5UX1BFTkNJTCxcbiAgICAgICAgY3VyTW9kZSA9IENoaWNrZW5QYWludC5NX0RSQVcsXG4gICAgICAgIGN1ckdyYWRpZW50ID0gWzB4RkYwMDAwMDAsIDB4RkZGRkZGRkZdLFxuXG4gICAgICAgIGZ1bGxTY3JlZW5Nb2RlID0gZmFsc2UsXG5cbiAgICAgICAgdG9vbHMgPSBjcmVhdGVEcmF3aW5nVG9vbHMoKSxcblxuICAgICAgICBib3hCbHVyRGlhbG9nLCBncmlkRGlhbG9nO1xuXG4gICAgZnVuY3Rpb24gc2hvd0JveEJsdXJEaWFsb2coKSB7XG4gICAgICAgIGlmICghYm94Qmx1ckRpYWxvZykge1xuICAgICAgICAgICAgYm94Qmx1ckRpYWxvZyA9IG5ldyBDUEJveEJsdXJEaWFsb2codWlFbGVtLCB0aGF0KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGJveEJsdXJEaWFsb2cuc2hvdygpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNob3dHcmlkT3B0aW9uc0RpYWxvZygpIHtcbiAgICAgICAgaWYgKCFncmlkRGlhbG9nKSB7XG4gICAgICAgICAgICBncmlkRGlhbG9nID0gbmV3IENQR3JpZERpYWxvZyh1aUVsZW0sIGNhbnZhcyk7XG4gICAgICAgIH1cblxuICAgICAgICBncmlkRGlhbG9nLnNob3coKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjYWxsVG9vbExpc3RlbmVycygpIHtcbiAgICAgICAgdGhhdC5lbWl0RXZlbnQoJ3Rvb2xDaGFuZ2UnLCBbY3VyQnJ1c2gsIHRvb2xzW2N1ckJydXNoXV0pO1xuICAgIH1cblxuICAgIC8vIFRPRE8gbWFrZSBtZSBwcml2YXRlXG4gICAgdGhpcy5jYWxsVG9vbExpc3RlbmVycyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBjYWxsVG9vbExpc3RlbmVycygpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNhbGxNb2RlTGlzdGVuZXJzKCkge1xuICAgICAgICB0aGF0LmVtaXRFdmVudCgnbW9kZUNoYW5nZScsIFtjdXJNb2RlXSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY2FsbFZpZXdMaXN0ZW5lcnModmlld0luZm8pIHtcbiAgICAgICAgdGhhdC5lbWl0RXZlbnQoJ3ZpZXdDaGFuZ2UnLCBbdmlld0luZm9dKTtcbiAgICB9XG4gICAgXG4gICAgdGhpcy5nZXRNYWluR1VJID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBtYWluR1VJO1xuICAgIH07XG5cbiAgICB0aGlzLmdldEFydHdvcmsgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYXJ0d29yaztcbiAgICB9O1xuXG4gICAgdGhpcy5zZXRDYW52YXMgPSBmdW5jdGlvbihfY2FudmFzKSB7XG4gICAgICAgIGNhbnZhcyA9IF9jYW52YXM7XG4gICAgfTtcblxuICAgIHRoaXMuc2V0Q3VyQ29sb3IgPSBmdW5jdGlvbihjb2xvcikge1xuICAgICAgICBpZiAoIWN1ckNvbG9yLmlzRXF1YWwoY29sb3IpKSB7XG4gICAgICAgICAgICB0aGlzLmFydHdvcmsuc2V0Rm9yZWdyb3VuZENvbG9yKGNvbG9yLmdldFJnYigpKTtcblxuICAgICAgICAgICAgY3VyQ29sb3IuY29weUZyb20oY29sb3IpO1xuXG4gICAgICAgICAgICB0aGlzLmVtaXRFdmVudCgnY29sb3JDaGFuZ2UnLCBbY29sb3JdKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICB0aGlzLmdldEN1ckNvbG9yID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBjdXJDb2xvci5jbG9uZSgpO1xuICAgIH07XG5cbiAgICB0aGlzLmdldEN1ckNvbG9yUmdiID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBjdXJDb2xvci5nZXRSZ2IoKTtcbiAgICB9O1xuXG4gICAgdGhpcy5zZXRDdXJDb2xvclJnYiA9IGZ1bmN0aW9uKGNvbG9yKSB7XG4gICAgICAgIHRoaXMuc2V0Q3VyQ29sb3IobmV3IENQQ29sb3IoY29sb3IpKTtcbiAgICB9O1xuXG4gICAgdGhpcy5zZXRDdXJHcmFkaWVudCA9IGZ1bmN0aW9uKGdyYWRpZW50KSB7XG4gICAgICAgIGN1ckdyYWRpZW50ID0gZ3JhZGllbnQuc2xpY2UoMCk7IC8vIENsb25lXG5cbiAgICAgICAgdGhpcy5lbWl0RXZlbnQoJ2dyYWRpZW50Q2hhbmdlJywgW2N1ckdyYWRpZW50XSk7XG4gICAgfTtcblxuICAgIHRoaXMuZ2V0Q3VyR3JhZGllbnQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIGN1ckdyYWRpZW50LnNsaWNlKDApOyAvLyBDbG9uZVxuICAgIH07XG5cbiAgICB0aGlzLnNldEJydXNoU2l6ZSA9IGZ1bmN0aW9uKHNpemUpIHtcbiAgICAgICAgdG9vbHNbY3VyQnJ1c2hdLnNpemUgPSBNYXRoLm1heCgxLCBNYXRoLm1pbigyMDAsIHNpemUpKTtcbiAgICAgICAgY2FsbFRvb2xMaXN0ZW5lcnMoKTtcbiAgICB9O1xuXG4gICAgdGhpcy5nZXRCcnVzaFNpemUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRvb2xzW2N1ckJydXNoXS5zaXplO1xuICAgIH07XG5cbiAgICB0aGlzLnNldEFscGhhID0gZnVuY3Rpb24oYWxwaGEpIHtcbiAgICAgICAgdG9vbHNbY3VyQnJ1c2hdLmFscGhhID0gYWxwaGE7XG4gICAgICAgIGNhbGxUb29sTGlzdGVuZXJzKCk7XG4gICAgfTtcblxuICAgIHRoaXMuZ2V0QWxwaGEgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRvb2xzW2N1ckJydXNoXS5hbHBoYTtcbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gc2V0TW9kZShtb2RlKSB7XG4gICAgICAgIGN1ck1vZGUgPSBtb2RlO1xuICAgICAgICBjYWxsTW9kZUxpc3RlbmVycygpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNldFRvb2wodG9vbCkge1xuICAgICAgICBzZXRNb2RlKENoaWNrZW5QYWludC5NX0RSQVcpO1xuICAgICAgICBjdXJCcnVzaCA9IHRvb2w7XG4gICAgICAgIHRoYXQuYXJ0d29yay5zZXRCcnVzaCh0b29sc1t0b29sXSk7XG4gICAgICAgIGNhbGxUb29sTGlzdGVuZXJzKCk7XG4gICAgfVxuXG4gICAgdGhpcy5nZXRCcnVzaEluZm8gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRvb2xzW2N1ckJydXNoXTtcbiAgICB9XG4gICAgXG4gICAgZnVuY3Rpb24gc2F2ZURyYXdpbmcoKSB7XG4gICAgICAgIHZhclxuICAgICAgICAgICAgc2F2ZXIgPSBuZXcgQ1BSZXNvdXJjZVNhdmVyKHtcbiAgICAgICAgICAgICAgICBhcnR3b3JrOiB0aGF0LmdldEFydHdvcmsoKSxcbiAgICAgICAgICAgICAgICByb3RhdGlvbjogY2FudmFzLmdldFJvdGF0aW9uOTAoKSxcbiAgICAgICAgICAgICAgICBzd2F0Y2hlczogbWFpbkdVSS5nZXRTd2F0Y2hlcygpXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIHNhdmVyLm9uKFwic2F2aW5nQ29tcGxldGVcIiwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB0aGF0LmFydHdvcmsuc2V0SGFzVW5zYXZlZENoYW5nZXMoZmFsc2UpO1xuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIHNhdmVyLm9uKFwic2F2aW5nRmFpbHVyZVwiLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGFsZXJ0KFwiQW4gZXJyb3Igb2NjdXJlZCB3aGlsZSB0cnlpbmcgdG8gc2F2ZSB5b3VyIGRyYXdpbmchIFBsZWFzZSB0cnkgYWdhaW4hXCIpO1xuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIHNhdmVyLnNhdmUoKTtcbiAgICB9XG4gICAgXG4gICAgZnVuY3Rpb24gc2VuZERyYXdpbmcoKSB7XG4gICAgICAgIHZhclxuICAgICAgICAgICAgc2F2ZXIgPSBuZXcgQ1BSZXNvdXJjZVNhdmVyKHtcbiAgICAgICAgICAgICAgICBhcnR3b3JrOiB0aGF0LmdldEFydHdvcmsoKSxcbiAgICAgICAgICAgICAgICByb3RhdGlvbjogY2FudmFzLmdldFJvdGF0aW9uOTAoKSxcbiAgICAgICAgICAgICAgICBzd2F0Y2hlczogbWFpbkdVSS5nZXRTd2F0Y2hlcygpLFxuICAgICAgICAgICAgICAgIHVybDogb3B0aW9ucy5zYXZlVXJsXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIHNlbmREaWFsb2cgPSBuZXcgQ1BTZW5kRGlhbG9nKHRoYXQsIHVpRWxlbSwgc2F2ZXIpO1xuICAgICAgICBcbiAgICAgICAgc2F2ZXIub24oXCJzYXZpbmdDb21wbGV0ZVwiLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHRoYXQuYXJ0d29yay5zZXRIYXNVbnNhdmVkQ2hhbmdlcyhmYWxzZSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIEFsbG93IHRoZSBkaWFsb2cgdG8gc2hvdyBiZWZvcmUgd2UgYmVnaW4gc2VyaWFsaXphdGlvblxuICAgICAgICBzZW5kRGlhbG9nLm9uKFwic2hvd25cIiwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBzYXZlci5zYXZlKCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHNlbmREaWFsb2cuc2hvdygpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE5vdCBhbGwgc2F2aW5nIGFjdGlvbnMgd2lsbCBiZSBzdXBwb3J0ZWQgKGRlcGVuZGluZyBvbiB3aGF0IG9wdGlvbnMgd2UncmUgY29uZmlndXJlZCB3aXRoKS4gVXNlIHRoaXMgZnVuY3Rpb25cbiAgICAgKiB0byBjaGVjayBmb3Igc3VwcG9ydCBmb3IgYSBnaXZlbiBhY3Rpb24uXG4gICAgICovXG4gICAgdGhpcy5pc0FjdGlvblN1cHBvcnRlZCA9IGZ1bmN0aW9uKGFjdGlvbk5hbWUpIHtcbiAgICAgICAgc3dpdGNoIChhY3Rpb25OYW1lKSB7XG4gICAgICAgICAgICBjYXNlIFwiQ1BTZW5kXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuICEhb3B0aW9ucy5zYXZlVXJsO1xuXG4gICAgICAgICAgICBjYXNlIFwiQ1BTYXZlXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG9wdGlvbnMuYWxsb3dEb3dubG9hZCAhPT0gZmFsc2U7XG5cbiAgICAgICAgICAgIGNhc2UgXCJDUEV4aXRcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gISFvcHRpb25zLmV4aXRVcmw7XG5cbiAgICAgICAgICAgIGNhc2UgXCJDUFBvc3RcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gISFvcHRpb25zLnBvc3RVcmw7XG5cbiAgICAgICAgICAgIGNhc2UgXCJDUEZ1bGxTY3JlZW5cIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gb3B0aW9ucy5hbGxvd0Z1bGxTY3JlZW4gIT09IGZhbHNlO1xuXG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBcbiAgICB0aGlzLmFjdGlvblBlcmZvcm1lZCA9IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgaWYgKHRoaXMuYXJ0d29yayA9PSBudWxsIHx8IGNhbnZhcyA9PSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm47IC8vIHRoaXMgc2hvdWxkbid0IGhhcHBlbiBidXQganVzdCBpbiBjYXNlXG4gICAgICAgIH1cblxuICAgICAgICBzd2l0Y2ggKGUuYWN0aW9uKSB7XG4gICAgICAgICAgICBjYXNlIFwiQ1BGdWxsU2NyZWVuXCI6XG4gICAgICAgICAgICAgICAgZnVsbFNjcmVlbk1vZGUgPSAhZnVsbFNjcmVlbk1vZGU7XG5cbiAgICAgICAgICAgICAgICAkKFwiYm9keVwiKS50b2dnbGVDbGFzcyhcImNoaWNrZW5wYWludC1mdWxsLXNjcmVlblwiLCBmdWxsU2NyZWVuTW9kZSk7XG4gICAgICAgICAgICAgICAgJCh1aUVsZW0pLnRvZ2dsZUNsYXNzKFwiY2hpY2tlbnBhaW50LWZ1bGwtc2NyZWVuXCIsIGZ1bGxTY3JlZW5Nb2RlKTtcblxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIG1haW5HVUkuc2V0RnVsbFNjcmVlbk1vZGUoZnVsbFNjcmVlbk1vZGUpO1xuICAgICAgICAgICAgICAgIH0sIDIwMCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY2FzZSBcIkNQWm9vbUluXCI6XG4gICAgICAgICAgICAgICAgY2FudmFzLnpvb21JbigpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiQ1Bab29tT3V0XCI6XG4gICAgICAgICAgICAgICAgY2FudmFzLnpvb21PdXQoKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcIkNQWm9vbTEwMFwiOlxuICAgICAgICAgICAgICAgIGNhbnZhcy56b29tMTAwKCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJDUFVuZG9cIjpcbiAgICAgICAgICAgICAgICB0aGlzLmFydHdvcmsudW5kbygpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiQ1BSZWRvXCI6XG4gICAgICAgICAgICAgICAgdGhpcy5hcnR3b3JrLnJlZG8oKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcIkNQQ2xlYXJIaXN0b3J5XCI6XG4gICAgICAgICAgICAgICAgaWYgKGNvbmZpcm0oXCJZb3UncmUgYWJvdXQgdG8gY2xlYXIgdGhlIGN1cnJlbnQgVW5kby9SZWRvIGhpc3RvcnkuXFxuVGhpcyBvcGVyYXRpb24gY2Fubm90IGJlIHVuZG9uZSwgYXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIGRvIHRoYXQ/XCIpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYXJ0d29yay5jbGVhckhpc3RvcnkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJDUFBlbmNpbFwiOlxuICAgICAgICAgICAgICAgIHNldFRvb2woQ2hpY2tlblBhaW50LlRfUEVOQ0lMKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcIkNQUGVuXCI6XG4gICAgICAgICAgICAgICAgc2V0VG9vbChDaGlja2VuUGFpbnQuVF9QRU4pO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiQ1BFcmFzZXJcIjpcbiAgICAgICAgICAgICAgICBzZXRUb29sKENoaWNrZW5QYWludC5UX0VSQVNFUik7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJDUFNvZnRFcmFzZXJcIjpcbiAgICAgICAgICAgICAgICBzZXRUb29sKENoaWNrZW5QYWludC5UX1NPRlRFUkFTRVIpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiQ1BBaXJicnVzaFwiOlxuICAgICAgICAgICAgICAgIHNldFRvb2woQ2hpY2tlblBhaW50LlRfQUlSQlJVU0gpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiQ1BEb2RnZVwiOlxuICAgICAgICAgICAgICAgIHNldFRvb2woQ2hpY2tlblBhaW50LlRfRE9ER0UpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiQ1BCdXJuXCI6XG4gICAgICAgICAgICAgICAgc2V0VG9vbChDaGlja2VuUGFpbnQuVF9CVVJOKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcIkNQV2F0ZXJcIjpcbiAgICAgICAgICAgICAgICBzZXRUb29sKENoaWNrZW5QYWludC5UX1dBVEVSKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcIkNQQmx1clwiOlxuICAgICAgICAgICAgICAgIHNldFRvb2woQ2hpY2tlblBhaW50LlRfQkxVUik7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJDUFNtdWRnZVwiOlxuICAgICAgICAgICAgICAgIHNldFRvb2woQ2hpY2tlblBhaW50LlRfU01VREdFKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcIkNQQmxlbmRlclwiOlxuICAgICAgICAgICAgICAgIHNldFRvb2woQ2hpY2tlblBhaW50LlRfQkxFTkRFUik7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgLy8gTW9kZXNcblxuICAgICAgICAgICAgY2FzZSBcIkNQRmxvb2RGaWxsXCI6XG4gICAgICAgICAgICAgICAgc2V0TW9kZShDaGlja2VuUGFpbnQuTV9GTE9PREZJTEwpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiQ1BHcmFkaWVudEZpbGxcIjpcbiAgICAgICAgICAgICAgICBzZXRNb2RlKENoaWNrZW5QYWludC5NX0dSQURJRU5URklMTCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJDUFJlY3RTZWxlY3Rpb25cIjpcbiAgICAgICAgICAgICAgICBzZXRNb2RlKENoaWNrZW5QYWludC5NX1JFQ1RfU0VMRUNUSU9OKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcIkNQTW92ZVRvb2xcIjpcbiAgICAgICAgICAgICAgICBzZXRNb2RlKENoaWNrZW5QYWludC5NX01PVkVfVE9PTCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJDUFJvdGF0ZUNhbnZhc1wiOlxuICAgICAgICAgICAgICAgIHNldE1vZGUoQ2hpY2tlblBhaW50Lk1fUk9UQVRFX0NBTlZBUyk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJDUENvbG9yUGlja2VyXCI6XG4gICAgICAgICAgICAgICAgc2V0TW9kZShDaGlja2VuUGFpbnQuTV9DT0xPUl9QSUNLRVIpO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIC8vIFN0cm9rZSBtb2Rlc1xuXG4gICAgICAgICAgICBjYXNlIFwiQ1BGcmVlSGFuZFwiOlxuICAgICAgICAgICAgICAgIHRvb2xzW2N1ckJydXNoXS5zdHJva2VNb2RlID0gQ1BCcnVzaEluZm8uU01fRlJFRUhBTkQ7XG4gICAgICAgICAgICAgICAgY2FsbFRvb2xMaXN0ZW5lcnMoKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcIkNQTGluZVwiOlxuICAgICAgICAgICAgICAgIHRvb2xzW2N1ckJydXNoXS5zdHJva2VNb2RlID0gQ1BCcnVzaEluZm8uU01fTElORTtcbiAgICAgICAgICAgICAgICBjYWxsVG9vbExpc3RlbmVycygpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiQ1BCZXppZXJcIjpcbiAgICAgICAgICAgICAgICB0b29sc1tjdXJCcnVzaF0uc3Ryb2tlTW9kZSA9IENQQnJ1c2hJbmZvLlNNX0JFWklFUjtcbiAgICAgICAgICAgICAgICBjYWxsVG9vbExpc3RlbmVycygpO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIGNhc2UgXCJDUEFib3V0XCI6XG4gICAgICAgICAgICAgICAgbmV3IENQQWJvdXREaWFsb2codWlFbGVtKS5zaG93KCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJDUFNob3J0Y3V0c1wiOlxuICAgICAgICAgICAgICAgIG5ldyBDUFNob3J0Y3V0c0RpYWxvZyh1aUVsZW0pLnNob3coKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcIkNQVGFibGV0U3VwcG9ydFwiOlxuICAgICAgICAgICAgICAgIG5ldyBDUFRhYmxldERpYWxvZyh1aUVsZW0pLnNob3coKTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAvLyBMYXllcnMgYWN0aW9uc1xuXG4gICAgICAgICAgICBjYXNlIFwiQ1BMYXllckR1cGxpY2F0ZVwiOlxuICAgICAgICAgICAgICAgIHRoaXMuYXJ0d29yay5kdXBsaWNhdGVMYXllcigpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiQ1BMYXllck1lcmdlRG93blwiOlxuICAgICAgICAgICAgICAgIHRoaXMuYXJ0d29yay5tZXJnZURvd24odHJ1ZSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJDUExheWVyTWVyZ2VBbGxcIjpcbiAgICAgICAgICAgICAgICB0aGlzLmFydHdvcmsubWVyZ2VBbGxMYXllcnModHJ1ZSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJDUEZpbGxcIjpcbiAgICAgICAgICAgICAgICB0aGlzLmFydHdvcmsuZmlsbCh0aGlzLmdldEN1ckNvbG9yUmdiKCkgfCAweGZmMDAwMDAwKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcIkNQQ2xlYXJcIjpcbiAgICAgICAgICAgICAgICB0aGlzLmFydHdvcmsuY2xlYXIoKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcIkNQU2VsZWN0QWxsXCI6XG4gICAgICAgICAgICAgICAgdGhpcy5hcnR3b3JrLnJlY3RhbmdsZVNlbGVjdGlvbih0aGlzLmFydHdvcmsuZ2V0Qm91bmRzKCkpO1xuICAgICAgICAgICAgICAgIGNhbnZhcy5yZXBhaW50QWxsKCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJDUERlc2VsZWN0QWxsXCI6XG4gICAgICAgICAgICAgICAgdGhpcy5hcnR3b3JrLnJlY3RhbmdsZVNlbGVjdGlvbihuZXcgQ1BSZWN0KDAsIDAsIDAsIDApKTtcbiAgICAgICAgICAgICAgICBjYW52YXMucmVwYWludEFsbCgpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiQ1BIRmxpcFwiOlxuICAgICAgICAgICAgICAgIHRoaXMuYXJ0d29yay5oRmxpcCgpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiQ1BWRmxpcFwiOlxuICAgICAgICAgICAgICAgIHRoaXMuYXJ0d29yay52RmxpcCgpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiQ1BNTm9pc2VcIjpcbiAgICAgICAgICAgICAgICB0aGlzLmFydHdvcmsubW9ub2Nocm9tYXRpY05vaXNlKCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJDUENOb2lzZVwiOlxuICAgICAgICAgICAgICAgIHRoaXMuYXJ0d29yay5jb2xvck5vaXNlKCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJDUEZYQm94Qmx1clwiOlxuICAgICAgICAgICAgICAgIHNob3dCb3hCbHVyRGlhbG9nKCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJDUEZYSW52ZXJ0XCI6XG4gICAgICAgICAgICAgICAgdGhpcy5hcnR3b3JrLmludmVydCgpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiQ1BDdXRcIjpcbiAgICAgICAgICAgICAgICB0aGlzLmFydHdvcmsuY3V0U2VsZWN0aW9uKHRydWUpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiQ1BDb3B5XCI6XG4gICAgICAgICAgICAgICAgdGhpcy5hcnR3b3JrLmNvcHlTZWxlY3Rpb24oKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcIkNQQ29weU1lcmdlZFwiOlxuICAgICAgICAgICAgICAgIHRoaXMuYXJ0d29yay5jb3B5U2VsZWN0aW9uTWVyZ2VkKCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJDUFBhc3RlXCI6XG4gICAgICAgICAgICAgICAgdGhpcy5hcnR3b3JrLnBhc3RlQ2xpcGJvYXJkKHRydWUpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiQ1BMaW5lYXJJbnRlcnBvbGF0aW9uXCI6XG4gICAgICAgICAgICAgICAgY2FudmFzLnNldEludGVycG9sYXRpb24oZS5zZWxlY3RlZCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJDUFRvZ2dsZUdyaWRcIjpcbiAgICAgICAgICAgICAgICBjYW52YXMuc2hvd0dyaWQoZS5zZWxlY3RlZCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJDUEdyaWRPcHRpb25zXCI6XG4gICAgICAgICAgICAgICAgc2hvd0dyaWRPcHRpb25zRGlhbG9nKCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJDUFJlc2V0Q2FudmFzUm90YXRpb25cIjpcbiAgICAgICAgICAgICAgICBjYW52YXMucmVzZXRSb3RhdGlvbigpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiQ1BQYWxDb2xvclwiOlxuICAgICAgICAgICAgICAgIG1haW5HVUkuc2hvd1BhbGV0dGUoXCJjb2xvclwiLCBlLnNlbGVjdGVkKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcIkNQUGFsQnJ1c2hcIjpcbiAgICAgICAgICAgICAgICBtYWluR1VJLnNob3dQYWxldHRlKFwiYnJ1c2hcIiwgZS5zZWxlY3RlZCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJDUFBhbExheWVyc1wiOlxuICAgICAgICAgICAgICAgIG1haW5HVUkuc2hvd1BhbGV0dGUoXCJsYXllcnNcIiwgZS5zZWxlY3RlZCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJDUFBhbFN0cm9rZVwiOlxuICAgICAgICAgICAgICAgIG1haW5HVUkuc2hvd1BhbGV0dGUoXCJzdHJva2VcIiwgZS5zZWxlY3RlZCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJDUFBhbFN3YXRjaGVzXCI6XG4gICAgICAgICAgICAgICAgbWFpbkdVSS5zaG93UGFsZXR0ZShcInN3YXRjaGVzXCIsIGUuc2VsZWN0ZWQpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiQ1BQYWxUb29sXCI6XG4gICAgICAgICAgICAgICAgbWFpbkdVSS5zaG93UGFsZXR0ZShcInRvb2xcIiwgZS5zZWxlY3RlZCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJDUFBhbE1pc2NcIjpcbiAgICAgICAgICAgICAgICBtYWluR1VJLnNob3dQYWxldHRlKFwibWlzY1wiLCBlLnNlbGVjdGVkKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcIkNQUGFsVGV4dHVyZXNcIjpcbiAgICAgICAgICAgICAgICBtYWluR1VJLnNob3dQYWxldHRlKFwidGV4dHVyZXNcIiwgZS5zZWxlY3RlZCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJDUFRvZ2dsZVBhbGV0dGVzXCI6XG4gICAgICAgICAgICAgICAgbWFpbkdVSS50b2dnbGVQYWxldHRlcygpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiQ1BBcnJhbmdlUGFsZXR0ZXNcIjpcbiAgICAgICAgICAgICAgICBtYWluR1VJLmFycmFuZ2VQYWxldHRlcygpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFNhdmluZ1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjYXNlIFwiQ1BTYXZlXCI6XG4gICAgICAgICAgICAgICAgc2F2ZURyYXdpbmcoKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcIkNQU2VuZFwiOlxuICAgICAgICAgICAgICAgIHNlbmREcmF3aW5nKCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJDUFBvc3RcIjpcbiAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24gPSBvcHRpb25zLnBvc3RVcmw7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJDUEV4aXRcIjpcbiAgICAgICAgICAgICAgICAvLyBFeGl0IHRoZSBkcmF3aW5nIHNlc3Npb24gd2l0aG91dCBwb3N0aW5nIHRoZSBkcmF3aW5nIHRvIHRoZSBmb3J1bVxuICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbiA9IG9wdGlvbnMuZXhpdFVybDtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gY2FsbENQRXZlbnRMaXN0ZW5lcnMoKTsgVE9ET1xuICAgIH07XG5cbiAgICBmdW5jdGlvbiBpbnN0YWxsVW5zYXZlZFdhcm5pbmcoKSB7XG4gICAgICAgIHZhclxuICAgICAgICAgICAgY29uZmlybU1lc3NhZ2UgPSBcIllvdXIgZHJhd2luZyBoYXMgdW5zYXZlZCBjaGFuZ2VzIVwiO1xuICAgICAgICBcbiAgICAgICAgaWYgKGlzRXZlbnRTdXBwb3J0ZWQoXCJvbmJlZm9yZXVubG9hZFwiKSkge1xuICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJiZWZvcmV1bmxvYWRcIiwgZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgICAgIGlmICh0aGF0LmFydHdvcmsuZ2V0SGFzVW5zYXZlZENoYW5nZXMoKSkge1xuICAgICAgICAgICAgICAgICAgICBlLnJldHVyblZhbHVlID0gY29uZmlybU1lc3NhZ2U7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjb25maXJtTWVzc2FnZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICQoXCJhXCIpLmNsaWNrKGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgICAgICAvLyBGYWxsIGJhY2sgdG8ganVzdCBjYXRjaGluZyBsaW5rc1xuICAgICAgICAgICAgICAgIGlmICh0aGF0LmFydHdvcmsuZ2V0SGFzVW5zYXZlZENoYW5nZXMoKSkgeyBcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbmZpcm0oY29uZmlybU1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIGZ1bmN0aW9uIHN0YXJ0TWFpbkdVSShzd2F0Y2hlcywgaW5pdGlhbFJvdGF0aW9uOTApIHtcbiAgICAgICAgbWFpbkdVSSA9IG5ldyBDUE1haW5HVUkodGhhdCwgdWlFbGVtKTtcblxuICAgICAgICBzZXRUb29sKENoaWNrZW5QYWludC5UX1BFTik7XG4gICAgICAgIG1haW5HVUkuYXJyYW5nZVBhbGV0dGVzKCk7XG4gICAgICAgIFxuICAgICAgICBpZiAoc3dhdGNoZXMpIHtcbiAgICAgICAgICAgIG1haW5HVUkuc2V0U3dhdGNoZXMoc3dhdGNoZXMpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBpZiAoaW5pdGlhbFJvdGF0aW9uOTApIHtcbiAgICAgICAgICAgIG1haW5HVUkuc2V0Um90YXRpb24oaW5pdGlhbFJvdGF0aW9uOTAgKiBNYXRoLlBJIC8gMik7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIENQV2Fjb21UYWJsZXQuZ2V0UmVmKCkuZGV0ZWN0VGFibGV0KCk7XG4gICAgICAgIFxuICAgICAgICBpbnN0YWxsVW5zYXZlZFdhcm5pbmcoKTtcbiAgICB9XG4gICAgXG4gICAgdGhpcy5nZXRSZXNvdXJjZXNSb290ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBvcHRpb25zLnJlc291cmNlc1Jvb3Q7XG4gICAgfTtcblxuICAgIGlmICghaXNCcm93c2VyU3VwcG9ydGVkKCkpIHtcbiAgICAgICAgdGhyb3cgbmV3IENoaWNrZW5QYWludC5VbnN1cHBvcnRlZEJyb3dzZXJFeGNlcHRpb24oKTtcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIGRvY3VtZW50LmJvZHkuc3R5bGUuZmxleEJhc2lzICE9IFwic3RyaW5nXCIgJiYgdHlwZW9mIGRvY3VtZW50LmJvZHkuc3R5bGUubXNGbGV4RGlyZWN0aW9uICE9IFwic3RyaW5nXCIpIHtcbiAgICAgICAgdWlFbGVtLmNsYXNzTmFtZSArPSBcIiBuby1mbGV4Ym94XCI7XG4gICAgfVxuXG4gICAgdWlFbGVtLmNsYXNzTmFtZSArPSBcIiBjaGlja2VucGFpbnRcIjtcblxuICAgIG9wdGlvbnMucmVzb3VyY2VzUm9vdCA9IG9wdGlvbnMucmVzb3VyY2VzUm9vdCB8fCBcImNoaWNrZW5wYWludC9cIjtcblxuICAgIGlmIChvcHRpb25zLmRpc2FibGVCb290c3RyYXBBUEkpIHtcbiAgICAgICAgJChkb2N1bWVudCkub2ZmKCcuZGF0YS1hcGknKTtcbiAgICB9XG5cbiAgICBpZiAob3B0aW9ucy5sb2FkSW1hZ2VVcmwgfHwgb3B0aW9ucy5sb2FkQ2hpYmlGaWxlVXJsKSB7XG4gICAgICAgIHZhclxuICAgICAgICAgICAgbG9hZGVyID0gbmV3IENQUmVzb3VyY2VMb2FkZXIob3B0aW9ucyk7XG4gICAgICAgIFxuICAgICAgICBuZXcgQ1BTcGFzaFNjcmVlbih1aUVsZW0sIGxvYWRlciwgb3B0aW9ucy5yZXNvdXJjZXNSb290KTtcblxuICAgICAgICBsb2FkZXIub24oXCJsb2FkaW5nQ29tcGxldGVcIiwgZnVuY3Rpb24ocmVzb3VyY2VzKSB7XG4gICAgICAgICAgICB0aGF0LmFydHdvcmsgPSByZXNvdXJjZXMubGF5ZXJzIHx8IHJlc291cmNlcy5mbGF0O1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBzdGFydE1haW5HVUkocmVzb3VyY2VzLnN3YXRjaGVzLCBvcHRpb25zLnJvdGF0aW9uKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgbG9hZGVyLmxvYWQoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmFydHdvcmsgPSBuZXcgQ1BBcnR3b3JrKG9wdGlvbnMuY2FudmFzV2lkdGggfHwgODAwLCBvcHRpb25zLmNhbnZhc0hlaWdodCB8fCA2MDApO1xuICAgICAgICB0aGlzLmFydHdvcmsuYWRkQmFja2dyb3VuZExheWVyKCk7XG4gICAgICAgIFxuICAgICAgICBzdGFydE1haW5HVUkoKTtcbiAgICB9XG59XG5cbkNoaWNrZW5QYWludC5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKEV2ZW50RW1pdHRlci5wcm90b3R5cGUpO1xuQ2hpY2tlblBhaW50LnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IENoaWNrZW5QYWludDtcblxuQ2hpY2tlblBhaW50LlVuc3VwcG9ydGVkQnJvd3NlckV4Y2VwdGlvbiA9IGZ1bmN0aW9uKCkge1xufTtcblxuQ2hpY2tlblBhaW50LlVuc3VwcG9ydGVkQnJvd3NlckV4Y2VwdGlvbi5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gXCJTb3JyeSwgeW91ciB3ZWIgYnJvd3NlciBkb2VzIG5vdCBzdXBwb3J0IENoaWNrZW5QYWludC4gUGxlYXNlIHRyeSBhIG1vZGVybiBicm93c2VyIGxpa2UgQ2hyb21lLCBTYWZhcmksIEZpcmVmb3gsIG9yIEVkZ2VcIjtcbn07XG5cbi8vXG4vLyBEZWZpbml0aW9uIG9mIGFsbCB0aGUgbW9kZXMgYXZhaWxhYmxlXG4vL1xuXG5DaGlja2VuUGFpbnQuTV9EUkFXID0gMDtcbkNoaWNrZW5QYWludC5NX0ZMT09ERklMTCA9IDE7XG5DaGlja2VuUGFpbnQuTV9SRUNUX1NFTEVDVElPTiA9IDI7XG5DaGlja2VuUGFpbnQuTV9NT1ZFX1RPT0wgPSAzO1xuQ2hpY2tlblBhaW50Lk1fUk9UQVRFX0NBTlZBUyA9IDQ7XG5DaGlja2VuUGFpbnQuTV9DT0xPUl9QSUNLRVIgPSA1O1xuQ2hpY2tlblBhaW50Lk1fR1JBRElFTlRGSUxMID0gNjtcblxuLy9cbi8vIERlZmluaXRpb24gb2YgYWxsIHRoZSBzdGFuZGFyZCB0b29scyBhdmFpbGFibGVcbi8vXG5DaGlja2VuUGFpbnQuVF9QRU5DSUwgPSAwO1xuQ2hpY2tlblBhaW50LlRfRVJBU0VSID0gMTtcbkNoaWNrZW5QYWludC5UX1BFTiA9IDI7XG5DaGlja2VuUGFpbnQuVF9TT0ZURVJBU0VSID0gMztcbkNoaWNrZW5QYWludC5UX0FJUkJSVVNIID0gNDtcbkNoaWNrZW5QYWludC5UX0RPREdFID0gNTtcbkNoaWNrZW5QYWludC5UX0JVUk4gPSA2O1xuQ2hpY2tlblBhaW50LlRfV0FURVIgPSA3O1xuQ2hpY2tlblBhaW50LlRfQkxVUiA9IDg7XG5DaGlja2VuUGFpbnQuVF9TTVVER0UgPSA5O1xuQ2hpY2tlblBhaW50LlRfQkxFTkRFUiA9IDEwO1xuQ2hpY2tlblBhaW50LlRfTUFYID0gMTE7XG4iLCIvKlxuICAgIENoaWNrZW5QYWludFxuICAgIFxuICAgIENoaWNrZW5QYWludCBpcyBhIHRyYW5zbGF0aW9uIG9mIENoaWJpUGFpbnQgZnJvbSBKYXZhIHRvIEphdmFTY3JpcHRcbiAgICBieSBOaWNob2xhcyBTaGVybG9jayAvIENoaWNrZW4gU21vb3RoaWUuXG4gICAgXG4gICAgQ2hpYmlQYWludCBpcyBDb3B5cmlnaHQgKGMpIDIwMDYtMjAwOCBNYXJjIFNjaGVmZXJcblxuICAgIENoaWNrZW5QYWludCBpcyBmcmVlIHNvZnR3YXJlOiB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3IgbW9kaWZ5XG4gICAgaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBhcyBwdWJsaXNoZWQgYnlcbiAgICB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uLCBlaXRoZXIgdmVyc2lvbiAzIG9mIHRoZSBMaWNlbnNlLCBvclxuICAgIChhdCB5b3VyIG9wdGlvbikgYW55IGxhdGVyIHZlcnNpb24uXG5cbiAgICBDaGlja2VuUGFpbnQgaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCxcbiAgICBidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZlxuICAgIE1FUkNIQU5UQUJJTElUWSBvciBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS4gIFNlZSB0aGVcbiAgICBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9yZSBkZXRhaWxzLlxuXG4gICAgWW91IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2VcbiAgICBhbG9uZyB3aXRoIENoaWNrZW5QYWludC4gSWYgbm90LCBzZWUgPGh0dHA6Ly93d3cuZ251Lm9yZy9saWNlbnNlcy8+LlxuKi9cblxuaW1wb3J0IENQTGF5ZXIgZnJvbSBcIi4vQ1BMYXllclwiO1xuaW1wb3J0IENQR3JleUJtcCBmcm9tIFwiLi9DUEdyZXlCbXBcIjtcbmltcG9ydCBDUENvbG9yQm1wIGZyb20gXCIuL0NQQ29sb3JCbXBcIjtcbmltcG9ydCBDUEJydXNoTWFuYWdlciBmcm9tIFwiLi9DUEJydXNoTWFuYWdlclwiO1xuaW1wb3J0IENQQnJ1c2hJbmZvIGZyb20gXCIuL0NQQnJ1c2hJbmZvXCI7XG5pbXBvcnQgQ1BVbmRvIGZyb20gXCIuL0NQVW5kb1wiO1xuaW1wb3J0IENQQ2xpcCBmcm9tIFwiLi9DUENsaXBcIjtcblxuaW1wb3J0IENQQ29sb3JGbG9hdCBmcm9tIFwiLi4vdXRpbC9DUENvbG9yRmxvYXRcIjtcbmltcG9ydCBDUFJlY3QgZnJvbSBcIi4uL3V0aWwvQ1BSZWN0XCI7XG5pbXBvcnQgQ1BSYW5kb20gZnJvbSBcIi4uL3V0aWwvQ1BSYW5kb21cIjtcblxuLy8gUG9seWZpbGwsIHVzZWQgaW4gZHVwbGljYXRlTGF5ZXJcbmlmICghU3RyaW5nLnByb3RvdHlwZS5lbmRzV2l0aCkge1xuICAgIFN0cmluZy5wcm90b3R5cGUuZW5kc1dpdGggPSBmdW5jdGlvbihzZWFyY2hTdHJpbmcsIHBvc2l0aW9uKSB7XG4gICAgICAgIHZhciBzdWJqZWN0U3RyaW5nID0gdGhpcy50b1N0cmluZygpO1xuICAgICAgICBpZiAodHlwZW9mIHBvc2l0aW9uICE9PSAnbnVtYmVyJyB8fCAhaXNGaW5pdGUocG9zaXRpb24pIHx8IE1hdGguZmxvb3IocG9zaXRpb24pICE9PSBwb3NpdGlvbiB8fCBwb3NpdGlvbiA+IHN1YmplY3RTdHJpbmcubGVuZ3RoKSB7XG4gICAgICAgICAgICBwb3NpdGlvbiA9IHN1YmplY3RTdHJpbmcubGVuZ3RoO1xuICAgICAgICB9XG4gICAgICAgIHBvc2l0aW9uIC09IHNlYXJjaFN0cmluZy5sZW5ndGg7XG4gICAgICAgIHZhciBsYXN0SW5kZXggPSBzdWJqZWN0U3RyaW5nLmluZGV4T2Yoc2VhcmNoU3RyaW5nLCBwb3NpdGlvbik7XG4gICAgICAgIHJldHVybiBsYXN0SW5kZXggIT09IC0xICYmIGxhc3RJbmRleCA9PT0gcG9zaXRpb247XG4gICAgfTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gQ1BBcnR3b3JrKF93aWR0aCwgX2hlaWdodCkge1xuICAgIFxuICAgIF93aWR0aCA9IF93aWR0aCB8IDA7XG4gICAgX2hlaWdodCA9IF9oZWlnaHQgfCAwO1xuICAgIFxuICAgIHZhclxuICAgICAgICBNQVhfVU5ETyA9IDMwLFxuICAgICAgICBFTVBUWV9CQUNLR1JPVU5EX0NPTE9SID0gMHhGRkZGRkZGRixcbiAgICAgICAgRU1QVFlfTEFZRVJfQ09MT1IgPSAweDAwRkZGRkZGLFxuICAgICAgICBcbiAgICAgICAgQlVSTl9DT05TVEFOVCA9IDI2MCxcbiAgICAgICAgQkxVUl9NSU4gPSA2NCxcbiAgICAgICAgQkxVUl9NQVggPSAxO1xuICAgIFxuICAgIHZhclxuICAgICAgICBsYXllcnMgPSBbXSxcbiAgICAgICAgY3VyTGF5ZXIsXG4gICAgICAgIFxuICAgICAgICBoYXNVbnNhdmVkQ2hhbmdlcyA9IGZhbHNlLFxuICAgICAgICBcbiAgICAgICAgY3VyU2VsZWN0aW9uID0gbmV3IENQUmVjdCgwLCAwLCAwLCAwKSxcbiAgICAgICAgXG4gICAgICAgIGZ1c2lvbkJ1ZmZlciA9IG5ldyBDUExheWVyKF93aWR0aCwgX2hlaWdodCksXG5cbiAgICAgICAgdW5kb0J1ZmZlciA9IG5ldyBDUExheWVyKF93aWR0aCwgX2hlaWdodCksXG4gICAgICAgIHVuZG9CdWZmZXJJbnZhbGlkUmVnaW9uID0gbmV3IENQUmVjdCgwLCAwLCBfd2lkdGgsIF9oZWlnaHQpLFxuXG4gICAgICAgIGZ1c2lvbiA9IGZ1c2lvbkJ1ZmZlcixcbiAgICAgICAgXG4gICAgICAgIC8qIFxuICAgICAgICAgKiBXZSB1c2UgdGhpcyBidWZmZXIgc28gd2UgY2FuIGFjY3VyYXRlbHkgYWNjdW11bGF0ZSBzbWFsbCBjaGFuZ2VzIHRvIGxheWVyIG9wYWNpdHkgZHVyaW5nIGEgYnJ1c2ggc3Ryb2tlLlxuICAgICAgICAgKiBcbiAgICAgICAgICogTm9ybWFsbHkgd2UgdXNlIGl0IGFzIGEgMTYtYml0IG9wYWNpdHkgY2hhbm5lbCBwZXIgcGl4ZWwsIGJ1dCBzb21lIGJydXNoZXMgdXNlIHRoZSBmdWxsIDMyLWJpdHMgcGVyIHBpeGVsXG4gICAgICAgICAqIGFzIEFSR0IuXG4gICAgICAgICAqL1xuICAgICAgICBvcGFjaXR5QnVmZmVyID0gbmV3IENQR3JleUJtcChfd2lkdGgsIF9oZWlnaHQsIDMyKSxcbiAgICAgICAgXG4gICAgICAgIGZ1c2lvbkFyZWEgPSBuZXcgQ1BSZWN0KDAsIDAsIF93aWR0aCwgX2hlaWdodCksIFxuICAgICAgICB1bmRvQXJlYSA9IG5ldyBDUFJlY3QoMCwgMCwgMCwgMCksIG9wYWNpdHlBcmVhID0gbmV3IENQUmVjdCgwLCAwLCAwLCAwKSxcbiAgICAgICAgXG4gICAgICAgIHJuZCA9IG5ldyBDUFJhbmRvbSgpLFxuICAgICAgICBcbiAgICAgICAgY2xpcGJvYXJkID0gbnVsbCwgLy8gQSBDUENsaXBcbiAgICAgICAgdW5kb0xpc3QgPSBbXSwgcmVkb0xpc3QgPSBbXSxcbiAgICAgICAgXG4gICAgICAgIGN1ckJydXNoID0gbnVsbCxcbiAgICAgICAgXG4gICAgICAgIGJydXNoTWFuYWdlciA9IG5ldyBDUEJydXNoTWFuYWdlcigpLFxuICAgICAgICBcbiAgICAgICAgbGFzdFggPSAwLjAsIGxhc3RZID0gMC4wLCBsYXN0UHJlc3N1cmUgPSAwLjAsXG4gICAgICAgIGJydXNoQnVmZmVyID0gbnVsbCxcbiAgICAgICAgXG4gICAgICAgIHNhbXBsZUFsbExheWVycyA9IGZhbHNlLFxuICAgICAgICBsb2NrQWxwaGEgPSBmYWxzZSxcbiAgICAgICAgXG4gICAgICAgIGN1ckNvbG9yID0gMHgwMDAwMDAsIC8vIEJsYWNrXG4gICAgICAgIFxuICAgICAgICB0aGF0ID0gdGhpcztcbiAgICBcbiAgICAvLyBGSVhNRTogMjAwNy0wMS0xMyBJJ20gbW92aW5nIHRoaXMgdG8gdGhlIENQUmVjdCBjbGFzc1xuICAgIC8vIGZpbmQgd2hlcmUgdGhpcyB2ZXJzaW9uIGlzIHVzZWQgYW5kIGNoYW5nZSB0aGVcbiAgICAvLyBjb2RlIHRvIHVzZSB0aGUgQ1BSZWN0IHZlcnNpb25cbiAgICBmdW5jdGlvbiBjbGlwU291cmNlRGVzdChzcmNSZWN0LCBkc3RSZWN0KSB7XG4gICAgICAgIC8vIEZJWE1FOlxuICAgICAgICAvLyAvIVxcIGRzdFJlY3QgYm90dG9tIGFuZCByaWdodCBhcmUgaWdub3JlZCBhbmQgaW5zdGVhZCB3ZSBjbGlwXG4gICAgICAgIC8vIGFnYWluc3QgdGhlIHdpZHRoLCBoZWlnaHQgb2YgdGhlIGxheWVyLiA6L1xuICAgICAgICAvL1xuXG4gICAgICAgIC8vIHRoaXMgdmVyc2lvbiB3b3VsZCBiZSBlbm91Z2ggaW4gbW9zdCBjYXNlcyAod2hlbiB3ZSBkb24ndCBuZWVkXG4gICAgICAgIC8vIHNyY1JlY3QgYm90dG9tIGFuZCByaWdodCB0byBiZSBjbGlwcGVkKVxuICAgICAgICAvLyBpdCdzIGxlZnQgaGVyZSBpbiBjYXNlIGl0J3MgbmVlZGVkIHRvIG1ha2UgYSBmYXN0ZXIgdmVyc2lvblxuICAgICAgICAvLyBvZiB0aGlzIGZ1bmN0aW9uXG4gICAgICAgIC8vIGRzdFJlY3QucmlnaHQgPSBNYXRoLm1pbih3aWR0aCwgZHN0UmVjdC5sZWZ0ICsgc3JjUmVjdC5nZXRXaWR0aCgpKTtcbiAgICAgICAgLy8gZHN0UmVjdC5ib3R0b20gPSBNYXRoLm1pbihoZWlnaHQsIGRzdFJlY3QudG9wICsgc3JjUmVjdC5nZXRIZWlnaHQoKSk7XG5cbiAgICAgICAgLy8gbmV3IGRlc3QgYm90dG9tL3JpZ2h0XG4gICAgICAgIGRzdFJlY3QucmlnaHQgPSBkc3RSZWN0LmxlZnQgKyBzcmNSZWN0LmdldFdpZHRoKCk7XG4gICAgICAgIGlmIChkc3RSZWN0LnJpZ2h0ID4gdGhhdC53aWR0aCkge1xuICAgICAgICAgICAgc3JjUmVjdC5yaWdodCAtPSBkc3RSZWN0LnJpZ2h0IC0gdGhhdC53aWR0aDtcbiAgICAgICAgICAgIGRzdFJlY3QucmlnaHQgPSB0aGF0LndpZHRoO1xuICAgICAgICB9XG5cbiAgICAgICAgZHN0UmVjdC5ib3R0b20gPSBkc3RSZWN0LnRvcCArIHNyY1JlY3QuZ2V0SGVpZ2h0KCk7XG4gICAgICAgIGlmIChkc3RSZWN0LmJvdHRvbSA+IHRoYXQuaGVpZ2h0KSB7XG4gICAgICAgICAgICBzcmNSZWN0LmJvdHRvbSAtPSBkc3RSZWN0LmJvdHRvbSAtIHRoYXQuaGVpZ2h0O1xuICAgICAgICAgICAgZHN0UmVjdC5ib3R0b20gPSB0aGF0LmhlaWdodDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIG5ldyBzcmMgdG9wL2xlZnRcbiAgICAgICAgaWYgKGRzdFJlY3QubGVmdCA8IDApIHtcbiAgICAgICAgICAgIHNyY1JlY3QubGVmdCAtPSBkc3RSZWN0LmxlZnQ7XG4gICAgICAgICAgICBkc3RSZWN0LmxlZnQgPSAwO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGRzdFJlY3QudG9wIDwgMCkge1xuICAgICAgICAgICAgc3JjUmVjdC50b3AgLT0gZHN0UmVjdC50b3A7XG4gICAgICAgICAgICBkc3RSZWN0LnRvcCA9IDA7XG4gICAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgZnVuY3Rpb24gY2FsbExpc3RlbmVyc1VwZGF0ZVJlZ2lvbihyZWdpb24pIHtcbiAgICAgICAgdGhhdC5lbWl0RXZlbnQoXCJ1cGRhdGVSZWdpb25cIiwgW3JlZ2lvbl0pO1xuICAgIH1cblxuICAgIC8vIGxheWVySW5kZXggaXMgb3B0aW9uYWwsIHByb3ZpZGUgd2hlbiBvbmx5IG9uZSBsYXllciBoYXMgYmVlbiB1cGRhdGVkXG4gICAgZnVuY3Rpb24gY2FsbExpc3RlbmVyc0xheWVyQ2hhbmdlKGxheWVySW5kZXgpIHtcbiAgICAgICAgdGhhdC5lbWl0RXZlbnQoXCJjaGFuZ2VMYXllclwiLCBbbGF5ZXJJbmRleF0pO1xuICAgIH1cbiAgICBcbiAgICB0aGlzLmdldExheWVycyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gbGF5ZXJzO1xuICAgIH07XG5cbiAgICB0aGlzLmdldExheWVyQ291bnQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIGxheWVycy5sZW5ndGg7XG4gICAgfTtcbiAgICBcbiAgICAvL1xuICAgIC8vIFNlbGVjdGlvbiBtZXRob2RzXG4gICAgLy9cblxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIGN1cnJlbnQgc2VsZWN0aW9uIHJlY3Qgb3IgYSByZWN0YW5nbGUgY292ZXJpbmcgdGhlIHdob2xlIGNhbnZhcyBpZiB0aGVyZSBhcmUgbm8gc2VsZWN0aW9uc1xuICAgICAqIFxuICAgICAqIEByZXR1cm5zIENQUmVjdFxuICAgICAqL1xuICAgIHRoaXMuZ2V0U2VsZWN0aW9uQXV0b1NlbGVjdCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXJcbiAgICAgICAgICAgIHI7XG5cbiAgICAgICAgaWYgKCFjdXJTZWxlY3Rpb24uaXNFbXB0eSgpKSB7XG4gICAgICAgICAgICByID0gY3VyU2VsZWN0aW9uLmNsb25lKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByID0gdGhpcy5nZXRCb3VuZHMoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiByO1xuICAgIH07XG4gICAgXG4gICAgdGhpcy5nZXRTZWxlY3Rpb24gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIGN1clNlbGVjdGlvbi5jbG9uZSgpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBNYXJrIHRoZSBnaXZlbiByZWN0YW5nbGUgb24gdGhlIGNhbnZhcyBhcyBuZWVkaW5nIHRvIGJlIHJlLWZ1c2VkIChpLmUuIHdlJ3ZlIGRyYXduIGluIHRoaXMgcmVnaW9uKS5cbiAgICAgKiBMaXN0ZW5lcnMgYXJlIG5vdGlmaWVkIGFib3V0IG91ciB1cGRhdGVkIGNhbnZhcyByZWdpb24uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcmVjdCBDUFJlY3QgUmVjdCB0byBpbnZhbGlkYXRlXG4gICAgICovXG4gICAgZnVuY3Rpb24gaW52YWxpZGF0ZUZ1c2lvblJlY3QocmVjdCkge1xuICAgICAgICBmdXNpb25BcmVhLnVuaW9uKHJlY3QpO1xuXG4gICAgICAgIC8vIFRoaXMgdXBkYXRlZCBhcmVhIHdpbGwgbmVlZCB0byBiZSB1cGRhdGVkIGluIG91ciB1bmRvIGJ1ZmZlciBsYXRlclxuICAgICAgICB1bmRvQnVmZmVySW52YWxpZFJlZ2lvbi51bmlvbihyZWN0KTtcblxuICAgICAgICBjYWxsTGlzdGVuZXJzVXBkYXRlUmVnaW9uKHJlY3QpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBNYXJrIHRoZSBlbnRpcmUgY2FudmFzIGFzIG5lZWRpbmcgdG8gYmUgcmUtZnVzZWQgKHdlJ3ZlIGRyYXduIHRvIHRoZSB3aG9sZSBjYW52YXMpXG4gICAgICovXG4gICAgZnVuY3Rpb24gaW52YWxpZGF0ZUZ1c2lvbigpIHtcbiAgICAgICAgaW52YWxpZGF0ZUZ1c2lvblJlY3QobmV3IENQUmVjdCgwLCAwLCB0aGF0LndpZHRoLCB0aGF0LmhlaWdodCkpO1xuICAgIH07XG4gICAgXG4gICAgdGhpcy5zZXRIYXNVbnNhdmVkQ2hhbmdlcyA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgIGhhc1Vuc2F2ZWRDaGFuZ2VzID0gdmFsdWU7XG4gICAgfTtcbiAgICBcbiAgICB0aGlzLmdldEhhc1Vuc2F2ZWRDaGFuZ2VzID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBoYXNVbnNhdmVkQ2hhbmdlcztcbiAgICB9O1xuICAgIFxuICAgIHRoaXMuc2V0TGF5ZXJWaXNpYmlsaXR5ID0gZnVuY3Rpb24obGF5ZXJJbmRleCwgdmlzaWJsZSkge1xuICAgICAgICB2YXJcbiAgICAgICAgICAgIGxheWVyID0gdGhpcy5nZXRMYXllcihsYXllckluZGV4KTtcbiAgICAgICAgXG4gICAgICAgIGFkZFVuZG8obmV3IENQVW5kb0xheWVyVmlzaWJsZShsYXllckluZGV4LCBsYXllci52aXNpYmxlLCB2aXNpYmxlKSk7XG4gICAgICAgIGxheWVyLnZpc2libGUgPSB2aXNpYmxlO1xuICAgICAgICBcbiAgICAgICAgaW52YWxpZGF0ZUZ1c2lvbigpO1xuICAgICAgICBjYWxsTGlzdGVuZXJzTGF5ZXJDaGFuZ2UobGF5ZXJJbmRleCk7XG4gICAgfTtcblxuICAgIHRoaXMuYWRkTGF5ZXIgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyXG4gICAgICAgICAgICBuZXdMYXllciA9IG5ldyBDUExheWVyKHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0LCB0aGlzLmdldERlZmF1bHRMYXllck5hbWUoKSksXG4gICAgICAgICAgICBhY3RpdmVMYXllckluZGV4ID0gdGhpcy5nZXRBY3RpdmVMYXllckluZGV4KCk7XG4gICAgICAgIFxuICAgICAgICBuZXdMYXllci5jbGVhckFsbChFTVBUWV9MQVlFUl9DT0xPUik7IC8vIFRyYW5zcGFyZW50IHdoaXRlXG4gICAgICAgIFxuICAgICAgICBhZGRVbmRvKG5ldyBDUFVuZG9BZGRMYXllcihhY3RpdmVMYXllckluZGV4KSk7XG5cbiAgICAgICAgbGF5ZXJzLnNwbGljZShhY3RpdmVMYXllckluZGV4ICsgMSwgMCwgbmV3TGF5ZXIpO1xuICAgICAgICB0aGlzLnNldEFjdGl2ZUxheWVySW5kZXgoYWN0aXZlTGF5ZXJJbmRleCArIDEpO1xuXG4gICAgICAgIGludmFsaWRhdGVGdXNpb24oKTtcbiAgICAgICAgY2FsbExpc3RlbmVyc0xheWVyQ2hhbmdlKCk7XG4gICAgfTtcbiAgICBcbiAgICB0aGlzLmFkZExheWVyT2JqZWN0ID0gZnVuY3Rpb24obGF5ZXIpIHtcbiAgICAgICAgbGF5ZXJzLnB1c2gobGF5ZXIpO1xuICAgICAgICBcbiAgICAgICAgaWYgKGxheWVycy5sZW5ndGggPT0gMSkge1xuICAgICAgICAgICAgY3VyTGF5ZXIgPSBsYXllcnNbMF07XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGludmFsaWRhdGVGdXNpb24oKTtcbiAgICAgICAgY2FsbExpc3RlbmVyc0xheWVyQ2hhbmdlKCk7XG4gICAgfTtcbiAgICBcbiAgICAvKipcbiAgICAgKiBSZW1vdmUgdGhlIGN1cnJlbnRseSBzZWxlY3RlZCBsYXllci5cbiAgICAgKiBcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgdGhlIGxheWVyIHdhcyByZW1vdmVkLCBvciBmYWxzZSB3aGVuIHJlbW92YWwgZmFpbGVkIGJlY2F1c2UgdGhlcmUgaXMgY3VycmVudGx5IG9ubHkgb25lIGxheWVyIGluIFxuICAgICAqIHRoZSBkb2N1bWVudC5cbiAgICAgKi9cbiAgICB0aGlzLnJlbW92ZUxheWVyID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmIChsYXllcnMubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgYWN0aXZlTGF5ZXJJbmRleCA9IHRoaXMuZ2V0QWN0aXZlTGF5ZXJJbmRleCgpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBhZGRVbmRvKG5ldyBDUFVuZG9SZW1vdmVMYXllcihhY3RpdmVMYXllckluZGV4LCBjdXJMYXllcikpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBsYXllcnMuc3BsaWNlKGFjdGl2ZUxheWVySW5kZXgsIDEpO1xuICAgICAgICAgICAgdGhpcy5zZXRBY3RpdmVMYXllckluZGV4KGFjdGl2ZUxheWVySW5kZXggPCBsYXllcnMubGVuZ3RoID8gYWN0aXZlTGF5ZXJJbmRleCA6IGFjdGl2ZUxheWVySW5kZXggLSAxKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaW52YWxpZGF0ZUZ1c2lvbigpO1xuICAgICAgICAgICAgY2FsbExpc3RlbmVyc0xheWVyQ2hhbmdlKCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfTtcblxuICAgIHRoaXMuZHVwbGljYXRlTGF5ZXIgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIFxuICAgICAgICAgICAgY29weVN1ZmZpeCA9IFwiIENvcHlcIixcbiAgICAgICAgICAgIG5ld0xheWVyID0gbmV3IENQTGF5ZXIodGhpcy53aWR0aCwgdGhpcy5oZWlnaHQpLFxuICAgICAgICAgICAgYWN0aXZlTGF5ZXJJbmRleCA9IHRoaXMuZ2V0QWN0aXZlTGF5ZXJJbmRleCgpO1xuXG4gICAgICAgIGFkZFVuZG8obmV3IENQVW5kb0R1cGxpY2F0ZUxheWVyKGFjdGl2ZUxheWVySW5kZXgpKTtcbiAgICAgICAgXG4gICAgICAgIG5ld0xheWVyLmNvcHlGcm9tKGxheWVyc1thY3RpdmVMYXllckluZGV4XSk7XG4gICAgICAgIFxuICAgICAgICBpZiAoIW5ld0xheWVyLm5hbWUuZW5kc1dpdGgoY29weVN1ZmZpeCkpIHtcbiAgICAgICAgICAgIG5ld0xheWVyLm5hbWUgKz0gY29weVN1ZmZpeDtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgbGF5ZXJzLnNwbGljZShhY3RpdmVMYXllckluZGV4ICsgMSwgMCwgbmV3TGF5ZXIpO1xuICAgICAgICB0aGlzLnNldEFjdGl2ZUxheWVySW5kZXgoYWN0aXZlTGF5ZXJJbmRleCArIDEpO1xuICAgICAgICBcbiAgICAgICAgaW52YWxpZGF0ZUZ1c2lvbigpO1xuICAgICAgICBjYWxsTGlzdGVuZXJzTGF5ZXJDaGFuZ2UoKTtcbiAgICB9O1xuICAgIFxuICAgIHRoaXMubWVyZ2VEb3duID0gZnVuY3Rpb24oY3JlYXRlVW5kbykge1xuICAgICAgICB2YXJcbiAgICAgICAgICAgIGFjdGl2ZUxheWVySW5kZXggPSB0aGlzLmdldEFjdGl2ZUxheWVySW5kZXgoKTtcbiAgICAgICAgXG4gICAgICAgIGlmIChsYXllcnMubGVuZ3RoID4gMSAmJiBhY3RpdmVMYXllckluZGV4ID4gMCkge1xuICAgICAgICAgICAgaWYgKGNyZWF0ZVVuZG8pIHtcbiAgICAgICAgICAgICAgICBhZGRVbmRvKG5ldyBDUFVuZG9NZXJnZURvd25MYXllcihhY3RpdmVMYXllckluZGV4KSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGxheWVyc1thY3RpdmVMYXllckluZGV4XS5mdXNpb25XaXRoRnVsbEFscGhhKGxheWVyc1thY3RpdmVMYXllckluZGV4IC0gMV0sIHRoaXMuZ2V0Qm91bmRzKCkpO1xuICAgICAgICAgICAgbGF5ZXJzLnNwbGljZShhY3RpdmVMYXllckluZGV4LCAxKTtcbiAgICAgICAgICAgIHRoaXMuc2V0QWN0aXZlTGF5ZXJJbmRleChhY3RpdmVMYXllckluZGV4IC0gMSk7XG5cbiAgICAgICAgICAgIGludmFsaWRhdGVGdXNpb24oKTtcbiAgICAgICAgICAgIGNhbGxMaXN0ZW5lcnNMYXllckNoYW5nZSgpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIHRoaXMubWVyZ2VBbGxMYXllcnMgPSBmdW5jdGlvbihjcmVhdGVVbmRvKSB7XG4gICAgICAgIGlmIChsYXllcnMubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgaWYgKGNyZWF0ZVVuZG8pIHtcbiAgICAgICAgICAgICAgICBhZGRVbmRvKG5ldyBDUFVuZG9NZXJnZUFsbExheWVycygpKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhhdC5mdXNpb25MYXllcnMoKTtcbiAgICAgICAgICAgIGxheWVycyA9IFtdO1xuXG4gICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICBsYXllciA9IG5ldyBDUExheWVyKHRoYXQud2lkdGgsIHRoYXQuaGVpZ2h0LCB0aGlzLmdldERlZmF1bHRMYXllck5hbWUoKSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGxheWVyLmNvcHlEYXRhRnJvbShmdXNpb24pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBsYXllcnMucHVzaChsYXllcik7XG4gICAgICAgICAgICB0aGlzLnNldEFjdGl2ZUxheWVySW5kZXgoMCk7XG5cbiAgICAgICAgICAgIGludmFsaWRhdGVGdXNpb24oKTtcbiAgICAgICAgICAgIGNhbGxMaXN0ZW5lcnNMYXllckNoYW5nZSgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBcbiAgICBmdW5jdGlvbiBtb3ZlTGF5ZXJSZWFsKGZyb20sIHRvKSB7XG4gICAgICAgIHZhclxuICAgICAgICAgICAgbGF5ZXIgPSBsYXllcnMuc3BsaWNlKGZyb20sIDEpWzBdO1xuICAgICAgICBcbiAgICAgICAgaWYgKHRvIDw9IGZyb20pIHtcbiAgICAgICAgICAgIGxheWVycy5zcGxpY2UodG8sIDAsIGxheWVyKTtcbiAgICAgICAgICAgIHRoYXQuc2V0QWN0aXZlTGF5ZXJJbmRleCh0byk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBsYXllcnMuc3BsaWNlKHRvIC0gMSwgMCwgbGF5ZXIpO1xuICAgICAgICAgICAgdGhhdC5zZXRBY3RpdmVMYXllckluZGV4KHRvIC0gMSk7XG4gICAgICAgIH1cblxuICAgICAgICBpbnZhbGlkYXRlRnVzaW9uKCk7XG4gICAgICAgIGNhbGxMaXN0ZW5lcnNMYXllckNoYW5nZSgpO1xuICAgIH1cbiAgICBcbiAgICAvKipcbiAgICAgKiBNb3ZlIGEgbGF5ZXIgaW4gdGhlIHN0YWNrIGZyb20gb25lIGluZGV4IHRvIGFub3RoZXIuXG4gICAgICogXG4gICAgICogQHBhcmFtIGZyb20gaW50XG4gICAgICogQHBhcmFtIHRvIGludFxuICAgICAqL1xuICAgIHRoaXMubW92ZUxheWVyID0gZnVuY3Rpb24oZnJvbSwgdG8pIHtcbiAgICAgICAgaWYgKGZyb20gPCAwIHx8IGZyb20gPj0gdGhpcy5nZXRMYXllckNvdW50KCkgfHwgdG8gPCAwIHx8IHRvID4gdGhpcy5nZXRMYXllckNvdW50KCkgfHwgZnJvbSA9PSB0bykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBhZGRVbmRvKG5ldyBDUFVuZG9Nb3ZlTGF5ZXIoZnJvbSwgdG8pKTtcbiAgICAgICAgbW92ZUxheWVyUmVhbChmcm9tLCB0byk7XG4gICAgfVxuICAgIFxuICAgIHRoaXMuc2V0TGF5ZXJBbHBoYSA9IGZ1bmN0aW9uKGxheWVySW5kZXgsIGFscGhhKSB7XG4gICAgICAgIHZhclxuICAgICAgICAgICAgbGF5ZXIgPSB0aGlzLmdldExheWVyKGxheWVySW5kZXgpO1xuICAgICAgICBcbiAgICAgICAgaWYgKGxheWVyLmdldEFscGhhKCkgIT0gYWxwaGEpIHtcbiAgICAgICAgICAgIGFkZFVuZG8obmV3IENQVW5kb0xheWVyQWxwaGEobGF5ZXJJbmRleCwgYWxwaGEpKTtcbiAgICAgICAgICAgIGxheWVyLnNldEFscGhhKGFscGhhKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaW52YWxpZGF0ZUZ1c2lvbigpO1xuICAgICAgICAgICAgY2FsbExpc3RlbmVyc0xheWVyQ2hhbmdlKGxheWVySW5kZXgpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIHRoaXMuc2V0TGF5ZXJCbGVuZE1vZGUgPSBmdW5jdGlvbihsYXllckluZGV4LCBibGVuZE1vZGUpIHtcbiAgICAgICAgdmFyXG4gICAgICAgICAgICBsYXllciA9IHRoaXMuZ2V0TGF5ZXIobGF5ZXJJbmRleCk7XG4gICAgXG4gICAgICAgIGlmIChsYXllci5nZXRCbGVuZE1vZGUoKSAhPSBibGVuZE1vZGUpIHtcbiAgICAgICAgICAgIGFkZFVuZG8obmV3IENQVW5kb0xheWVyTW9kZShsYXllckluZGV4LCBibGVuZE1vZGUpKTtcbiAgICAgICAgICAgIGxheWVyLnNldEJsZW5kTW9kZShibGVuZE1vZGUpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpbnZhbGlkYXRlRnVzaW9uKCk7XG4gICAgICAgICAgICBjYWxsTGlzdGVuZXJzTGF5ZXJDaGFuZ2UobGF5ZXJJbmRleCk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgdGhpcy5zZXRMYXllck5hbWUgPSBmdW5jdGlvbihsYXllckluZGV4LCBuYW1lKSB7XG4gICAgICAgIHZhclxuICAgICAgICAgICAgbGF5ZXIgPSB0aGlzLmdldExheWVyKGxheWVySW5kZXgpO1xuICAgICAgICBcbiAgICAgICAgaWYgKGxheWVyICYmIGxheWVyLm5hbWUgIT0gbmFtZSkge1xuICAgICAgICAgICAgYWRkVW5kbyhuZXcgQ1BVbmRvTGF5ZXJSZW5hbWUobGF5ZXJJbmRleCwgbmFtZSkpO1xuICAgICAgICAgICAgbGF5ZXIubmFtZSA9IG5hbWU7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNhbGxMaXN0ZW5lcnNMYXllckNoYW5nZShsYXllckluZGV4KTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgXG4gICAgZnVuY3Rpb24gQ1BCcnVzaFRvb2xCYXNlKCkge1xuICAgIH1cbiAgICBcbiAgICBDUEJydXNoVG9vbEJhc2UucHJvdG90eXBlLmJlZ2luU3Ryb2tlID0gZnVuY3Rpb24oeCwgeSwgcHJlc3N1cmUpIHtcbiAgICAgICAgcHJlcGFyZUZvckxheWVyVW5kbygpO1xuICAgICAgICB1bmRvQXJlYS5tYWtlRW1wdHkoKTtcblxuICAgICAgICBvcGFjaXR5QnVmZmVyLmNsZWFyQWxsKDApO1xuICAgICAgICBvcGFjaXR5QXJlYS5tYWtlRW1wdHkoKTtcblxuICAgICAgICBsYXN0WCA9IHg7XG4gICAgICAgIGxhc3RZID0geTtcbiAgICAgICAgbGFzdFByZXNzdXJlID0gcHJlc3N1cmU7XG4gICAgICAgIFxuICAgICAgICB0aGlzLmNyZWF0ZUFuZFBhaW50RGFiKHgsIHksIHByZXNzdXJlKTtcbiAgICB9O1xuXG4gICAgQ1BCcnVzaFRvb2xCYXNlLnByb3RvdHlwZS5jb250aW51ZVN0cm9rZSA9IGZ1bmN0aW9uKHgsIHksIHByZXNzdXJlKSB7XG4gICAgICAgIHZhciBcbiAgICAgICAgICAgIGRpc3QgPSBNYXRoLnNxcnQoKChsYXN0WCAtIHgpICogKGxhc3RYIC0geCkgKyAobGFzdFkgLSB5KSAqIChsYXN0WSAtIHkpKSksXG4gICAgICAgICAgICBzcGFjaW5nID0gTWF0aC5tYXgoY3VyQnJ1c2gubWluU3BhY2luZywgY3VyQnJ1c2guY3VyU2l6ZSAqIGN1ckJydXNoLnNwYWNpbmcpO1xuXG4gICAgICAgIGlmIChkaXN0ID4gc3BhY2luZykge1xuICAgICAgICAgICAgdmFyIFxuICAgICAgICAgICAgICAgIG54ID0gbGFzdFgsIG55ID0gbGFzdFksIG5wID0gbGFzdFByZXNzdXJlLFxuICAgICAgICAgICAgICAgIGRmID0gKHNwYWNpbmcgLSAwLjAwMSkgLyBkaXN0O1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBmb3IgKHZhciBmID0gZGY7IGYgPD0gMS4wOyBmICs9IGRmKSB7XG4gICAgICAgICAgICAgICAgbnggPSBmICogeCArICgxLjAgLSBmKSAqIGxhc3RYO1xuICAgICAgICAgICAgICAgIG55ID0gZiAqIHkgKyAoMS4wIC0gZikgKiBsYXN0WTtcbiAgICAgICAgICAgICAgICBucCA9IGYgKiBwcmVzc3VyZSArICgxLjAgLSBmKSAqIGxhc3RQcmVzc3VyZTtcbiAgICAgICAgICAgICAgICB0aGlzLmNyZWF0ZUFuZFBhaW50RGFiKG54LCBueSwgbnApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGFzdFggPSBueDtcbiAgICAgICAgICAgIGxhc3RZID0gbnk7XG4gICAgICAgICAgICBsYXN0UHJlc3N1cmUgPSBucDtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBDUEJydXNoVG9vbEJhc2UucHJvdG90eXBlLmVuZFN0cm9rZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB1bmRvQXJlYS5jbGlwKHRoYXQuZ2V0Qm91bmRzKCkpO1xuXG4gICAgICAgIC8vIERpZCB3ZSBlbmQgdXAgcGFpbnRpbmcgYW55dGhpbmc/XG4gICAgICAgIGlmICghdW5kb0FyZWEuaXNFbXB0eSgpKSB7XG4gICAgICAgICAgICBtZXJnZU9wYWNpdHlCdWZmZXIoY3VyQ29sb3IsIGZhbHNlKTtcbiAgICAgICAgICAgIGFkZFVuZG8obmV3IENQVW5kb1BhaW50KCkpO1xuXG4gICAgICAgICAgICAvKiBFYWdlcmx5IHVwZGF0ZSB0aGUgdW5kbyBidWZmZXIgZm9yIG5leHQgdGltZSBzbyB3ZSBjYW4gYXZvaWQgdGhpcyBsZW5ndGh5XG4gICAgICAgICAgICAgKiBwcmVwYXJlIGF0IHRoZSBiZWdpbm5pbmcgb2YgYSBwYWludCBzdHJva2VcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgcHJlcGFyZUZvckxheWVyVW5kbygpOyBcbiAgICAgICAgfVxuICAgICAgICBicnVzaEJ1ZmZlciA9IG51bGw7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIHBhaW50IGRhYiBhdCB0aGUgZ2l2ZW4gcG9zaXRpb24gdXNpbmcgdGhlIGN1cnJlbnQgYnJ1c2gsIGFuZCBwYWludCBpdC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB4IGZsb2F0XG4gICAgICogQHBhcmFtIHkgZmxvYXRcbiAgICAgKiBAcGFyYW0gcHJlc3N1cmUgZmxvYXRcbiAgICAgKi9cbiAgICBDUEJydXNoVG9vbEJhc2UucHJvdG90eXBlLmNyZWF0ZUFuZFBhaW50RGFiID0gZnVuY3Rpb24oeCwgeSwgcHJlc3N1cmUpIHtcbiAgICAgICAgY3VyQnJ1c2guYXBwbHlQcmVzc3VyZShwcmVzc3VyZSk7XG4gICAgICAgIFxuICAgICAgICBpZiAoY3VyQnJ1c2guc2NhdHRlcmluZyA+IDAuMCkge1xuICAgICAgICAgICAgeCArPSBybmQubmV4dEdhdXNzaWFuKCkgKiBjdXJCcnVzaC5jdXJTY2F0dGVyaW5nIC8gNC4wO1xuICAgICAgICAgICAgeSArPSBybmQubmV4dEdhdXNzaWFuKCkgKiBjdXJCcnVzaC5jdXJTY2F0dGVyaW5nIC8gNC4wO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICB2YXIgXG4gICAgICAgICAgICBkYWIgPSBicnVzaE1hbmFnZXIuZ2V0RGFiKHgsIHksIGN1ckJydXNoKTtcbiAgICAgICAgXG4gICAgICAgIHRoaXMucGFpbnREYWIoZGFiKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogUGFpbnQgYSBkYWIgcmV0dXJuZWQgYnkgYnJ1c2hNYW5hZ2VyLmdldERhYigpXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZGFiIHtieXRlW10gYnJ1c2g7IGludCB4LCB5LCBhbHBoYSwgd2lkdGgsIGhlaWdodH1cbiAgICAgKi9cbiAgICBDUEJydXNoVG9vbEJhc2UucHJvdG90eXBlLnBhaW50RGFiID0gZnVuY3Rpb24oZGFiKSB7XG4gICAgICAgIHZhclxuICAgICAgICAgICAgc3JjUmVjdCA9IG5ldyBDUFJlY3QoMCwgMCwgZGFiLndpZHRoLCBkYWIuaGVpZ2h0KSxcbiAgICAgICAgICAgIGRzdFJlY3QgPSBuZXcgQ1BSZWN0KDAsIDAsIGRhYi53aWR0aCwgZGFiLmhlaWdodCk7XG4gICAgICAgIFxuICAgICAgICBkc3RSZWN0LnRyYW5zbGF0ZShkYWIueCwgZGFiLnkpO1xuXG4gICAgICAgIGNsaXBTb3VyY2VEZXN0KHNyY1JlY3QsIGRzdFJlY3QpO1xuXG4gICAgICAgIC8vIGRyYXdpbmcgZW50aXJlbHkgb3V0c2lkZSB0aGUgY2FudmFzXG4gICAgICAgIGlmIChkc3RSZWN0LmlzRW1wdHkoKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdW5kb0FyZWEudW5pb24oZHN0UmVjdCk7XG4gICAgICAgIG9wYWNpdHlBcmVhLnVuaW9uKGRzdFJlY3QpO1xuXG4gICAgICAgIHRoaXMucGFpbnREYWJJbXBsZW1lbnRhdGlvbihzcmNSZWN0LCBkc3RSZWN0LCBkYWIpO1xuICAgICAgICBcbiAgICAgICAgaW52YWxpZGF0ZUZ1c2lvblJlY3QoZHN0UmVjdCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gQ1BCcnVzaFRvb2xTaW1wbGVCcnVzaCgpIHtcbiAgICB9XG5cbiAgICBDUEJydXNoVG9vbFNpbXBsZUJydXNoLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoQ1BCcnVzaFRvb2xCYXNlLnByb3RvdHlwZSk7XG4gICAgQ1BCcnVzaFRvb2xTaW1wbGVCcnVzaC5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBDUEJydXNoVG9vbFNpbXBsZUJydXNoOyBcbiAgICBcbiAgICBDUEJydXNoVG9vbFNpbXBsZUJydXNoLnByb3RvdHlwZS5wYWludERhYkltcGxlbWVudGF0aW9uID0gZnVuY3Rpb24oc3JjUmVjdCwgZHN0UmVjdCwgZGFiKSB7XG4gICAgICAgIC8vIEZJWE1FOiB0aGVyZSBzaG91bGQgYmUgbm8gcmVmZXJlbmNlIHRvIGEgc3BlY2lmaWMgdG9vbCBoZXJlXG4gICAgICAgIC8vIGNyZWF0ZSBhIG5ldyBicnVzaCBwYXJhbWV0ZXIgaW5zdGVhZFxuICAgICAgICBpZiAoY3VyQnJ1c2guaXNBaXJicnVzaCkge1xuICAgICAgICAgICAgdGhpcy5wYWludEZsb3coc3JjUmVjdCwgZHN0UmVjdCwgZGFiLmJydXNoLCBkYWIud2lkdGgsIE1hdGgubWF4KDEsIGRhYi5hbHBoYSAvIDgpKTtcbiAgICAgICAgfSBlbHNlIGlmIChjdXJCcnVzaC50b29sTmIgPT0gQ2hpY2tlblBhaW50LlRfUEVOKSB7XG4gICAgICAgICAgICB0aGlzLnBhaW50RmxvdyhzcmNSZWN0LCBkc3RSZWN0LCBkYWIuYnJ1c2gsIGRhYi53aWR0aCwgTWF0aC5tYXgoMSwgZGFiLmFscGhhIC8gMikpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5wYWludE9wYWNpdHkoc3JjUmVjdCwgZHN0UmVjdCwgZGFiLmJydXNoLCBkYWIud2lkdGgsIGRhYi5hbHBoYSk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgQ1BCcnVzaFRvb2xTaW1wbGVCcnVzaC5wcm90b3R5cGUubWVyZ2VPcGFjaXR5QnVmID0gZnVuY3Rpb24oZHN0UmVjdCwgY29sb3IgLyogaW50ICovKSB7XG4gICAgICAgIHZhciBcbiAgICAgICAgICAgIG9wYWNpdHlEYXRhID0gb3BhY2l0eUJ1ZmZlci5kYXRhLFxuICAgICAgICAgICAgdW5kb0RhdGEgPSB1bmRvQnVmZmVyLmRhdGEsXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHJlZCA9IChjb2xvciA+PiAxNikgJiAweEZGLFxuICAgICAgICAgICAgZ3JlZW4gPSAoY29sb3IgPj4gOCkgJiAweEZGLFxuICAgICAgICAgICAgYmx1ZSA9IGNvbG9yICYgMHhGRixcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgd2lkdGggPSBkc3RSZWN0LmdldFdpZHRoKCkgfCAwLFxuICAgICAgICAgICAgaGVpZ2h0ID0gZHN0UmVjdC5nZXRIZWlnaHQoKSB8IDAsXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGRzdE9mZnNldCA9IGN1ckxheWVyLm9mZnNldE9mUGl4ZWwoZHN0UmVjdC5sZWZ0LCBkc3RSZWN0LnRvcCksXG4gICAgICAgICAgICBzcmNPZmZzZXQgPSBvcGFjaXR5QnVmZmVyLm9mZnNldE9mUGl4ZWwoZHN0UmVjdC5sZWZ0LCBkc3RSZWN0LnRvcCksXG4gICAgICAgIFxuICAgICAgICAgICAgc3JjWVN0cmlkZSA9IChvcGFjaXR5QnVmZmVyLndpZHRoIC0gd2lkdGgpIHwgMCxcbiAgICAgICAgICAgIGRzdFlTdHJpZGUgPSAoKGN1ckxheWVyLndpZHRoIC0gd2lkdGgpICogQ1BDb2xvckJtcC5CWVRFU19QRVJfUElYRUwpIHwgMDtcblxuICAgICAgICBmb3IgKHZhciB5ID0gMDsgeSA8IGhlaWdodDsgeSsrLCBzcmNPZmZzZXQgKz0gc3JjWVN0cmlkZSwgZHN0T2Zmc2V0ICs9IGRzdFlTdHJpZGUpIHtcbiAgICAgICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgd2lkdGg7IHgrKywgc3JjT2Zmc2V0KyssIGRzdE9mZnNldCArPSBDUENvbG9yQm1wLkJZVEVTX1BFUl9QSVhFTCkge1xuICAgICAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgICAgICBvcGFjaXR5QWxwaGEgPSAob3BhY2l0eURhdGFbc3JjT2Zmc2V0XSAvIDI1NSkgfCAwO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGlmIChvcGFjaXR5QWxwaGEgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVzdEFscGhhID0gdW5kb0RhdGFbZHN0T2Zmc2V0ICsgQ1BDb2xvckJtcC5BTFBIQV9CWVRFX09GRlNFVF0sXG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3TGF5ZXJBbHBoYSA9IChvcGFjaXR5QWxwaGEgKyBkZXN0QWxwaGEgKiAoMjU1IC0gb3BhY2l0eUFscGhhKSAvIDI1NSkgfCAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVhbEFscGhhID0gKDI1NSAqIG9wYWNpdHlBbHBoYSAvIG5ld0xheWVyQWxwaGEpIHwgMCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGludkFscGhhID0gMjU1IC0gcmVhbEFscGhhO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgY3VyTGF5ZXIuZGF0YVtkc3RPZmZzZXRdID0gKChyZWQgKiByZWFsQWxwaGEgKyB1bmRvRGF0YVtkc3RPZmZzZXRdICogaW52QWxwaGEpIC8gMjU1KSAmIDB4ZmY7XG4gICAgICAgICAgICAgICAgICAgIGN1ckxheWVyLmRhdGFbZHN0T2Zmc2V0ICsgMV0gPSAoKGdyZWVuICogcmVhbEFscGhhICsgdW5kb0RhdGFbZHN0T2Zmc2V0ICsgMV0gKiBpbnZBbHBoYSkgLyAyNTUpICYgMHhmZjtcbiAgICAgICAgICAgICAgICAgICAgY3VyTGF5ZXIuZGF0YVtkc3RPZmZzZXQgKyAyXSA9ICgoYmx1ZSAqIHJlYWxBbHBoYSArIHVuZG9EYXRhW2RzdE9mZnNldCArIDJdICogaW52QWxwaGEpIC8gMjU1KSAmIDB4ZmY7XG4gICAgICAgICAgICAgICAgICAgIGN1ckxheWVyLmRhdGFbZHN0T2Zmc2V0ICsgM10gPSBuZXdMYXllckFscGhhO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEBwYXJhbSBzcmNSZWN0IENQUmVjdFxuICAgICAqIEBwYXJhbSBkc3RSZWN0IENQUmVjdFxuICAgICAqIEBwYXJhbSBicnVzaCBpbnRbXVxuICAgICAqIEBwYXJhbSBicnVzaFdpZHRoIGludFxuICAgICAqIEBwYXJhbSBhbHBoYSBmbG9hdFxuICAgICAqL1xuICAgIENQQnJ1c2hUb29sU2ltcGxlQnJ1c2gucHJvdG90eXBlLnBhaW50T3BhY2l0eSA9IGZ1bmN0aW9uKHNyY1JlY3QsIGRzdFJlY3QsIGJydXNoLCBicnVzaFdpZHRoLCBhbHBoYSkge1xuICAgICAgICB2YXIgXG4gICAgICAgICAgICBvcGFjaXR5RGF0YSA9IG9wYWNpdHlCdWZmZXIuZGF0YSxcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgc3JjT2Zmc2V0ID0gc3JjUmVjdC5sZWZ0ICsgc3JjUmVjdC50b3AgKiBicnVzaFdpZHRoLFxuICAgICAgICAgICAgZHN0T2Zmc2V0ID0gb3BhY2l0eUJ1ZmZlci5vZmZzZXRPZlBpeGVsKGRzdFJlY3QubGVmdCwgZHN0UmVjdC50b3ApLFxuICAgICAgICAgICAgXG4gICAgICAgICAgICBkc3RXaWR0aCA9IGRzdFJlY3QuZ2V0V2lkdGgoKSxcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgc3JjWVN0cmlkZSA9IGJydXNoV2lkdGggLSBkc3RXaWR0aCxcbiAgICAgICAgICAgIGRzdFlTdHJpZGUgPSB0aGF0LndpZHRoIC0gZHN0V2lkdGg7XG5cbiAgICAgICAgYWxwaGEgPSBNYXRoLm1pbigyNTUsIGFscGhhKTtcblxuICAgICAgICBmb3IgKHZhciB5ID0gZHN0UmVjdC50b3A7IHkgPCBkc3RSZWN0LmJvdHRvbTsgeSsrLCBzcmNPZmZzZXQgKz0gc3JjWVN0cmlkZSwgZHN0T2Zmc2V0ICs9IGRzdFlTdHJpZGUpIHtcbiAgICAgICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgZHN0V2lkdGg7IHgrKywgc3JjT2Zmc2V0KyssIGRzdE9mZnNldCsrKSB7XG4gICAgICAgICAgICAgICAgb3BhY2l0eURhdGFbZHN0T2Zmc2V0XSA9IE1hdGgubWF4KGJydXNoW3NyY09mZnNldF0gKiBhbHBoYSwgb3BhY2l0eURhdGFbZHN0T2Zmc2V0XSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgQ1BCcnVzaFRvb2xTaW1wbGVCcnVzaC5wcm90b3R5cGUucGFpbnRGbG93ID0gZnVuY3Rpb24oc3JjUmVjdCwgZHN0UmVjdCwgYnJ1c2gsIGJydXNoV2lkdGgsIGFscGhhKSB7XG4gICAgICAgIHZhciBcbiAgICAgICAgICAgIG9wYWNpdHlEYXRhID0gb3BhY2l0eUJ1ZmZlci5kYXRhLFxuXG4gICAgICAgICAgICBzcmNPZmZzZXQgPSBzcmNSZWN0LmxlZnQgKyBzcmNSZWN0LnRvcCAqIGJydXNoV2lkdGgsXG4gICAgICAgICAgICBkc3RPZmZzZXQgPSBvcGFjaXR5QnVmZmVyLm9mZnNldE9mUGl4ZWwoZHN0UmVjdC5sZWZ0LCBkc3RSZWN0LnRvcCksXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGRzdFdpZHRoID0gZHN0UmVjdC5nZXRXaWR0aCgpLFxuXG4gICAgICAgICAgICBzcmNZU3RyaWRlID0gYnJ1c2hXaWR0aCAtIGRzdFdpZHRoLFxuICAgICAgICAgICAgZHN0WVN0cmlkZSA9IHRoYXQud2lkdGggLSBkc3RXaWR0aDtcbiAgICAgICAgXG4gICAgICAgIGZvciAodmFyIHkgPSBkc3RSZWN0LnRvcDsgeSA8IGRzdFJlY3QuYm90dG9tOyB5KyssIHNyY09mZnNldCArPSBzcmNZU3RyaWRlLCBkc3RPZmZzZXQgKz0gZHN0WVN0cmlkZSkge1xuICAgICAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCBkc3RXaWR0aDsgeCsrLCBzcmNPZmZzZXQrKywgZHN0T2Zmc2V0KyspIHtcbiAgICAgICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICAgICAgYnJ1c2hBbHBoYSA9IGJydXNoW3NyY09mZnNldF0gKiBhbHBoYTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBpZiAoYnJ1c2hBbHBoYSAhPSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgICAgICAgICAgb3BhY2l0eUFscGhhID0gTWF0aC5taW4oMjU1ICogMjU1LCBvcGFjaXR5RGF0YVtkc3RPZmZzZXRdICsgKDI1NSAtIG9wYWNpdHlEYXRhW2RzdE9mZnNldF0gLyAyNTUpICogYnJ1c2hBbHBoYSAvIDI1NSk7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBvcGFjaXR5RGF0YVtkc3RPZmZzZXRdID0gb3BhY2l0eUFscGhhO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG5cbiAgICAvKkNQQnJ1c2hUb29sU2ltcGxlQnJ1c2gucHJvdG90eXBlLnBhaW50T3BhY2l0eUZsb3cgPSBmdW5jdGlvbihzcmNSZWN0LCBkc3RSZWN0LCBicnVzaCwgYnJ1c2hXaWR0aCwgb3BhY2l0eSwgZmxvdykge1xuICAgICAgICB2YXIgXG4gICAgICAgICAgICBvcGFjaXR5RGF0YSA9IG9wYWNpdHlCdWZmZXIuZGF0YSxcblxuICAgICAgICAgICAgYnkgPSBzcmNSZWN0LnRvcDtcbiAgICAgICAgXG4gICAgICAgIGZvciAodmFyIHkgPSBkc3RSZWN0LnRvcDsgeSA8IGRzdFJlY3QuYm90dG9tOyB5KyssIGJ5KyspIHtcbiAgICAgICAgICAgIHZhciBcbiAgICAgICAgICAgICAgICBzcmNPZmZzZXQgPSBzcmNSZWN0LmxlZnQgKyBieSAqIGJydXNoV2lkdGgsXG4gICAgICAgICAgICAgICAgZHN0T2Zmc2V0ID0gZHN0UmVjdC5sZWZ0ICsgeSAqIHdpZHRoO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBmb3IgKHZhciB4ID0gZHN0UmVjdC5sZWZ0OyB4IDwgZHN0UmVjdC5yaWdodDsgeCsrLCBzcmNPZmZzZXQrKywgZHN0T2Zmc2V0KyspIHtcbiAgICAgICAgICAgICAgICB2YXIgXG4gICAgICAgICAgICAgICAgICAgIGJydXNoQWxwaGEgPSBicnVzaFtzcmNPZmZzZXRdICogZmxvdztcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBpZiAoYnJ1c2hBbHBoYSAhPSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgICAgICAgICAgb3BhY2l0eUFscGhhID0gb3BhY2l0eURhdGFbZHN0T2Zmc2V0XSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld0FscGhhID0gTWF0aC5taW4oMjU1ICogMjU1LCBvcGFjaXR5QWxwaGEgKyAob3BhY2l0eSAtIG9wYWNpdHlBbHBoYSAvIDI1NSkgKiBicnVzaEFscGhhIC8gMjU1KTtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIG5ld0FscGhhID0gTWF0aC5taW4ob3BhY2l0eSAqIGJydXNoW3NyY09mZnNldF0sIG5ld0FscGhhKTtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGlmIChuZXdBbHBoYSA+IG9wYWNpdHlBbHBoYSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgb3BhY2l0eURhdGFbZHN0T2Zmc2V0XSA9IG5ld0FscGhhO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTsqL1xuXG4gICAgZnVuY3Rpb24gQ1BCcnVzaFRvb2xFcmFzZXIoKSB7XG4gICAgfVxuICAgIFxuICAgIENQQnJ1c2hUb29sRXJhc2VyLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoQ1BCcnVzaFRvb2xTaW1wbGVCcnVzaC5wcm90b3R5cGUpO1xuICAgIENQQnJ1c2hUb29sRXJhc2VyLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IENQQnJ1c2hUb29sRXJhc2VyO1xuICAgIFxuICAgIENQQnJ1c2hUb29sRXJhc2VyLnByb3RvdHlwZS5tZXJnZU9wYWNpdHlCdWYgPSBmdW5jdGlvbihkc3RSZWN0LCBjb2xvcikge1xuICAgICAgICB2YXIgXG4gICAgICAgICAgICBvcGFjaXR5RGF0YSA9IG9wYWNpdHlCdWZmZXIuZGF0YSxcbiAgICAgICAgICAgIHVuZG9EYXRhID0gdW5kb0J1ZmZlci5kYXRhO1xuICAgIFxuICAgICAgICBmb3IgKHZhciB5ID0gZHN0UmVjdC50b3A7IHkgPCBkc3RSZWN0LmJvdHRvbTsgeSsrKSB7XG4gICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICBkc3RPZmZzZXQgPSBjdXJMYXllci5vZmZzZXRPZlBpeGVsKGRzdFJlY3QubGVmdCwgeSkgKyBDUENvbG9yQm1wLkFMUEhBX0JZVEVfT0ZGU0VULFxuICAgICAgICAgICAgICAgIHNyY09mZnNldCA9IG9wYWNpdHlCdWZmZXIub2Zmc2V0T2ZQaXhlbChkc3RSZWN0LmxlZnQsIHkpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBmb3IgKHZhciB4ID0gZHN0UmVjdC5sZWZ0OyB4IDwgZHN0UmVjdC5yaWdodDsgeCsrLCBkc3RPZmZzZXQgKz0gQ1BDb2xvckJtcC5CWVRFU19QRVJfUElYRUwpIHtcbiAgICAgICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eUFscGhhID0gKG9wYWNpdHlEYXRhW3NyY09mZnNldCsrXSAvIDI1NSkgfCAwO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGlmIChvcGFjaXR5QWxwaGEgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVzdEFscGhhID0gdW5kb0RhdGFbZHN0T2Zmc2V0XSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlYWxBbHBoYSA9IGRlc3RBbHBoYSAqICgyNTUgLSBvcGFjaXR5QWxwaGEpIC8gMjU1O1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgY3VyTGF5ZXIuZGF0YVtkc3RPZmZzZXRdID0gcmVhbEFscGhhO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBmdW5jdGlvbiBDUEJydXNoVG9vbERvZGdlKCkge1xuICAgIH1cbiAgICBcbiAgICBDUEJydXNoVG9vbERvZGdlLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoQ1BCcnVzaFRvb2xTaW1wbGVCcnVzaC5wcm90b3R5cGUpO1xuICAgIENQQnJ1c2hUb29sRG9kZ2UucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gQ1BCcnVzaFRvb2xEb2RnZTtcbiAgICBcbiAgICBDUEJydXNoVG9vbERvZGdlLnByb3RvdHlwZS5tZXJnZU9wYWNpdHlCdWYgPSBmdW5jdGlvbihkc3RSZWN0LCBjb2xvcikge1xuICAgICAgICB2YXIgXG4gICAgICAgICAgICBvcGFjaXR5RGF0YSA9IG9wYWNpdHlCdWZmZXIuZGF0YSxcbiAgICAgICAgICAgIHVuZG9EYXRhID0gdW5kb0J1ZmZlci5kYXRhO1xuICAgIFxuICAgICAgICBmb3IgKHZhciB5ID0gZHN0UmVjdC50b3A7IHkgPCBkc3RSZWN0LmJvdHRvbTsgeSsrKSB7XG4gICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICBkc3RPZmZzZXQgPSBjdXJMYXllci5vZmZzZXRPZlBpeGVsKGRzdFJlY3QubGVmdCwgeSksXG4gICAgICAgICAgICAgICAgc3JjT2Zmc2V0ID0gb3BhY2l0eUJ1ZmZlci5vZmZzZXRPZlBpeGVsKGRzdFJlY3QubGVmdCwgeSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGZvciAodmFyIHggPSBkc3RSZWN0LmxlZnQ7IHggPCBkc3RSZWN0LnJpZ2h0OyB4KyssIHNyY09mZnNldCsrLCBkc3RPZmZzZXQgKz0gQ1BDb2xvckJtcC5CWVRFU19QRVJfUElYRUwpIHtcbiAgICAgICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eUFscGhhID0gKG9wYWNpdHlEYXRhW3NyY09mZnNldF0gLyAyNTUpIHwgMDtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBpZiAob3BhY2l0eUFscGhhID4gMCAmJiB1bmRvRGF0YVtkc3RPZmZzZXQgKyBDUENvbG9yQm1wLkFMUEhBX0JZVEVfT0ZGU0VUXSAhPSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIG9wYWNpdHlBbHBoYSArPSAyNTU7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IDM7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNoYW5uZWwgPSAodW5kb0RhdGFbZHN0T2Zmc2V0ICsgaV0gKiBvcGFjaXR5QWxwaGEgLyAyNTUpIHwgMDtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2hhbm5lbCA+IDI1NSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5uZWwgPSAyNTU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1ckxheWVyLmRhdGFbZHN0T2Zmc2V0ICsgaV0gPSBjaGFubmVsO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIENQQnJ1c2hUb29sQnVybigpIHtcbiAgICB9XG4gICAgXG4gICAgQ1BCcnVzaFRvb2xCdXJuLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoQ1BCcnVzaFRvb2xTaW1wbGVCcnVzaC5wcm90b3R5cGUpO1xuICAgIENQQnJ1c2hUb29sQnVybi5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBDUEJydXNoVG9vbEJ1cm47XG4gICAgXG4gICAgQ1BCcnVzaFRvb2xCdXJuLnByb3RvdHlwZS5tZXJnZU9wYWNpdHlCdWYgPSBmdW5jdGlvbihkc3RSZWN0LCBjb2xvcikge1xuICAgICAgICB2YXIgXG4gICAgICAgICAgICBvcGFjaXR5RGF0YSA9IG9wYWNpdHlCdWZmZXIuZGF0YSxcbiAgICAgICAgICAgIHVuZG9EYXRhID0gdW5kb0J1ZmZlci5kYXRhO1xuICAgIFxuICAgICAgICBmb3IgKHZhciB5ID0gZHN0UmVjdC50b3A7IHkgPCBkc3RSZWN0LmJvdHRvbTsgeSsrKSB7XG4gICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICBkc3RPZmZzZXQgPSBjdXJMYXllci5vZmZzZXRPZlBpeGVsKGRzdFJlY3QubGVmdCwgeSksXG4gICAgICAgICAgICAgICAgc3JjT2Zmc2V0ID0gb3BhY2l0eUJ1ZmZlci5vZmZzZXRPZlBpeGVsKGRzdFJlY3QubGVmdCwgeSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGZvciAodmFyIHggPSBkc3RSZWN0LmxlZnQ7IHggPCBkc3RSZWN0LnJpZ2h0OyB4KyssIHNyY09mZnNldCsrLCBkc3RPZmZzZXQgKz0gQ1BDb2xvckJtcC5CWVRFU19QRVJfUElYRUwpIHtcbiAgICAgICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eUFscGhhID0gKG9wYWNpdHlEYXRhW3NyY09mZnNldF0gLyAyNTUpIHwgMDtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBpZiAob3BhY2l0eUFscGhhID4gMCAmJiB1bmRvRGF0YVtkc3RPZmZzZXQgKyBDUENvbG9yQm1wLkFMUEhBX0JZVEVfT0ZGU0VUXSAhPSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgMzsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY2hhbm5lbCA9IHVuZG9EYXRhW2RzdE9mZnNldCArIGldO1xuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBjaGFubmVsID0gKGNoYW5uZWwgLSAoQlVSTl9DT05TVEFOVCAtIGNoYW5uZWwpICogb3BhY2l0eUFscGhhIC8gMjU1KSB8IDA7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNoYW5uZWwgPCAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hhbm5lbCA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1ckxheWVyLmRhdGFbZHN0T2Zmc2V0ICsgaV0gPSBjaGFubmVsO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICBcbiAgICBmdW5jdGlvbiBDUEJydXNoVG9vbEJsdXIoKSB7XG4gICAgfVxuICAgIFxuICAgIENQQnJ1c2hUb29sQmx1ci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKENQQnJ1c2hUb29sU2ltcGxlQnJ1c2gucHJvdG90eXBlKTtcbiAgICBDUEJydXNoVG9vbEJsdXIucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gQ1BCcnVzaFRvb2xCbHVyO1xuXG4gICAgQ1BCcnVzaFRvb2xCbHVyLnByb3RvdHlwZS5tZXJnZU9wYWNpdHlCdWYgPSBmdW5jdGlvbihkc3RSZWN0LCBjb2xvcikge1xuICAgICAgICB2YXIgXG4gICAgICAgICAgICBvcGFjaXR5RGF0YSA9IG9wYWNpdHlCdWZmZXIuZGF0YSxcbiAgICAgICAgICAgIHVuZG9EYXRhID0gdW5kb0J1ZmZlci5kYXRhLFxuICAgICAgICAgICAgXG4gICAgICAgICAgICBkc3RZU3RyaWRlID0gdW5kb0J1ZmZlci53aWR0aCAqIENQQ29sb3JCbXAuQllURVNfUEVSX1BJWEVMLFxuICAgICAgICAgICAgXG4gICAgICAgICAgICByLCBnLCBiLCBhO1xuXG4gICAgICAgIGZ1bmN0aW9uIGFkZFNhbXBsZShzYW1wbGVPZmZzZXQpIHtcbiAgICAgICAgICAgIHIgKz0gdW5kb0RhdGFbc2FtcGxlT2Zmc2V0ICsgQ1BDb2xvckJtcC5SRURfQllURV9PRkZTRVRdO1xuICAgICAgICAgICAgZyArPSB1bmRvRGF0YVtzYW1wbGVPZmZzZXQgKyBDUENvbG9yQm1wLkdSRUVOX0JZVEVfT0ZGU0VUXTtcbiAgICAgICAgICAgIGIgKz0gdW5kb0RhdGFbc2FtcGxlT2Zmc2V0ICsgQ1BDb2xvckJtcC5CTFVFX0JZVEVfT0ZGU0VUXTtcbiAgICAgICAgICAgIGEgKz0gdW5kb0RhdGFbc2FtcGxlT2Zmc2V0ICsgQ1BDb2xvckJtcC5BTFBIQV9CWVRFX09GRlNFVF07XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGZvciAodmFyIHkgPSBkc3RSZWN0LnRvcDsgeSA8IGRzdFJlY3QuYm90dG9tOyB5KyspIHtcbiAgICAgICAgICAgIHZhciBcbiAgICAgICAgICAgICAgICBkc3RPZmZzZXQgPSB1bmRvQnVmZmVyLm9mZnNldE9mUGl4ZWwoZHN0UmVjdC5sZWZ0LCB5KSxcbiAgICAgICAgICAgICAgICBzcmNPZmZzZXQgPSBvcGFjaXR5QnVmZmVyLm9mZnNldE9mUGl4ZWwoZHN0UmVjdC5sZWZ0LCB5KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZm9yICh2YXIgeCA9IGRzdFJlY3QubGVmdDsgeCA8IGRzdFJlY3QucmlnaHQ7IHgrKywgZHN0T2Zmc2V0ICs9IENQQ29sb3JCbXAuQllURVNfUEVSX1BJWEVMLCBzcmNPZmZzZXQrKykge1xuICAgICAgICAgICAgICAgIHZhciBcbiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eUFscGhhID0gKG9wYWNpdHlEYXRhW3NyY09mZnNldF0gLyAyNTUpIHwgMDtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBpZiAob3BhY2l0eUFscGhhID4gMCkge1xuICAgICAgICAgICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJsdXIgPSAoQkxVUl9NSU4gKyAoQkxVUl9NQVggLSBCTFVSX01JTikgKiBvcGFjaXR5QWxwaGEgLyAyNTUpIHwgMCxcblxuICAgICAgICAgICAgICAgICAgICAgICAgc3VtID0gYmx1ciArIDQ7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICByID0gYmx1ciAqIHVuZG9EYXRhW2RzdE9mZnNldCArIENQQ29sb3JCbXAuUkVEX0JZVEVfT0ZGU0VUXTtcbiAgICAgICAgICAgICAgICAgICAgZyA9IGJsdXIgKiB1bmRvRGF0YVtkc3RPZmZzZXQgKyBDUENvbG9yQm1wLkdSRUVOX0JZVEVfT0ZGU0VUXTtcbiAgICAgICAgICAgICAgICAgICAgYiA9IGJsdXIgKiB1bmRvRGF0YVtkc3RPZmZzZXQgKyBDUENvbG9yQm1wLkJMVUVfQllURV9PRkZTRVRdO1xuICAgICAgICAgICAgICAgICAgICBhID0gYmx1ciAqIHVuZG9EYXRhW2RzdE9mZnNldCArIENQQ29sb3JCbXAuQUxQSEFfQllURV9PRkZTRVRdO1xuXG4gICAgICAgICAgICAgICAgICAgIGFkZFNhbXBsZSh5ID4gMCA/IGRzdE9mZnNldCAtIGRzdFlTdHJpZGUgOiBkc3RPZmZzZXQpO1xuICAgICAgICAgICAgICAgICAgICBhZGRTYW1wbGUoeSA8IHVuZG9CdWZmZXIuaGVpZ2h0IC0gMSA/IGRzdE9mZnNldCArIGRzdFlTdHJpZGUgOiBkc3RPZmZzZXQpO1xuICAgICAgICAgICAgICAgICAgICBhZGRTYW1wbGUoeCA+IDAgPyBkc3RPZmZzZXQgLSBDUENvbG9yQm1wLkJZVEVTX1BFUl9QSVhFTCA6IGRzdE9mZnNldCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZFNhbXBsZSh4IDwgdW5kb0J1ZmZlci53aWR0aCAtIDEgPyBkc3RPZmZzZXQgKyBDUENvbG9yQm1wLkJZVEVTX1BFUl9QSVhFTCA6IGRzdE9mZnNldCk7XG5cbiAgICAgICAgICAgICAgICAgICAgYSAvPSBzdW07XG4gICAgICAgICAgICAgICAgICAgIHIgLz0gc3VtO1xuICAgICAgICAgICAgICAgICAgICBnIC89IHN1bTtcbiAgICAgICAgICAgICAgICAgICAgYiAvPSBzdW07XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBjdXJMYXllci5kYXRhW2RzdE9mZnNldCArIENQQ29sb3JCbXAuUkVEX0JZVEVfT0ZGU0VUXSA9IHIgfCAwO1xuICAgICAgICAgICAgICAgICAgICBjdXJMYXllci5kYXRhW2RzdE9mZnNldCArIENQQ29sb3JCbXAuR1JFRU5fQllURV9PRkZTRVRdID0gZyB8IDA7XG4gICAgICAgICAgICAgICAgICAgIGN1ckxheWVyLmRhdGFbZHN0T2Zmc2V0ICsgQ1BDb2xvckJtcC5CTFVFX0JZVEVfT0ZGU0VUXSA9IGIgfCAwO1xuICAgICAgICAgICAgICAgICAgICBjdXJMYXllci5kYXRhW2RzdE9mZnNldCArIENQQ29sb3JCbXAuQUxQSEFfQllURV9PRkZTRVRdID0gYSB8IDA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8qIEJydXNoZXMgZGVyaXZlZCBmcm9tIHRoaXMgY2xhc3MgdXNlIHRoZSBvcGFjaXR5IGJ1ZmZlciBhcyBhIHNpbXBsZSBhbHBoYSBsYXllciAoMzItYml0IHBpeGVscyBpbiBBUkdCIG9yZGVyKSAqL1xuICAgIGZ1bmN0aW9uIENQQnJ1c2hUb29sRGlyZWN0QnJ1c2goKSB7XG4gICAgfVxuICAgIFxuICAgIENQQnJ1c2hUb29sRGlyZWN0QnJ1c2gucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShDUEJydXNoVG9vbFNpbXBsZUJydXNoLnByb3RvdHlwZSk7XG4gICAgQ1BCcnVzaFRvb2xEaXJlY3RCcnVzaC5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBDUEJydXNoVG9vbERpcmVjdEJydXNoO1xuXG4gICAgQ1BCcnVzaFRvb2xEaXJlY3RCcnVzaC5wcm90b3R5cGUubWVyZ2VPcGFjaXR5QnVmID0gZnVuY3Rpb24oZHN0UmVjdCwgY29sb3IpIHtcbiAgICAgICAgdmFyIFxuICAgICAgICAgICAgb3BhY2l0eURhdGEgPSBvcGFjaXR5QnVmZmVyLmRhdGEsXG4gICAgICAgICAgICB1bmRvRGF0YSA9IHVuZG9CdWZmZXIuZGF0YSxcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgc3JjT2Zmc2V0ID0gb3BhY2l0eUJ1ZmZlci5vZmZzZXRPZlBpeGVsKGRzdFJlY3QubGVmdCwgZHN0UmVjdC50b3ApLFxuICAgICAgICAgICAgZHN0T2Zmc2V0ID0gY3VyTGF5ZXIub2Zmc2V0T2ZQaXhlbChkc3RSZWN0LmxlZnQsIGRzdFJlY3QudG9wKSxcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgd2lkdGggPSBkc3RSZWN0LmdldFdpZHRoKCkgfCAwLFxuICAgICAgICAgICAgaGVpZ2h0ID0gZHN0UmVjdC5nZXRIZWlnaHQoKSB8IDAsXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHNyY1lTdHJpZGUgPSAob3BhY2l0eUJ1ZmZlci53aWR0aCAtIHdpZHRoKSB8IDAsXG4gICAgICAgICAgICBkc3RZU3RyaWRlID0gKChjdXJMYXllci53aWR0aCAtIHdpZHRoKSAqIENQQ29sb3JCbXAuQllURVNfUEVSX1BJWEVMKSB8IDA7XG5cbiAgICAgICAgZm9yICh2YXIgeSA9IDA7IHkgPCBoZWlnaHQ7IHkrKywgc3JjT2Zmc2V0ICs9IHNyY1lTdHJpZGUsIGRzdE9mZnNldCArPSBkc3RZU3RyaWRlKSB7XG4gICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IHdpZHRoOyB4KyssIHNyY09mZnNldCsrLCBkc3RPZmZzZXQgKz0gQ1BDb2xvckJtcC5CWVRFU19QRVJfUElYRUwpIHtcbiAgICAgICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICAgICAgY29sb3IxID0gb3BhY2l0eURhdGFbc3JjT2Zmc2V0XSxcbiAgICAgICAgICAgICAgICAgICAgYWxwaGExID0gY29sb3IxID4+PiAyNDtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBpZiAoYWxwaGExID09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHZhciBcbiAgICAgICAgICAgICAgICAvLyBQcmV0dHkgc3VyZSBmdXNpb24uYWxwaGEgaXMgYWx3YXlzIDEwMCBhbmQgdGhlIGNvbW1lbnRlZCBzZWN0aW9uIGlzIGEgY29weS9wYXN0ZSBlcnJvclxuICAgICAgICAgICAgICAgICAgICBhbHBoYTIgPSB1bmRvRGF0YVtkc3RPZmZzZXQgKyBDUENvbG9yQm1wLkFMUEhBX0JZVEVfT0ZGU0VUXSAvKiAqIGZ1c2lvbi5hbHBoYSAvIDEwMCAqLywgXG4gICAgICAgICAgICAgICAgICAgIG5ld0FscGhhID0gKGFscGhhMSArIGFscGhhMiAtIGFscGhhMSAqIGFscGhhMiAvIDI1NSkgfCAwO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGlmIChuZXdBbHBoYSA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWFsQWxwaGEgPSAoYWxwaGExICogMjU1IC8gbmV3QWxwaGEpIHwgMCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGludkFscGhhID0gMjU1IC0gcmVhbEFscGhhO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgY3VyTGF5ZXIuZGF0YVtkc3RPZmZzZXRdID0gKCgoKGNvbG9yMSA+PiAxNikgJiAweEZGKSAqIHJlYWxBbHBoYSArIHVuZG9EYXRhW2RzdE9mZnNldF0gKiBpbnZBbHBoYSkgLyAyNTUpIHwgMDtcbiAgICAgICAgICAgICAgICAgICAgY3VyTGF5ZXIuZGF0YVtkc3RPZmZzZXQgKyAxXSA9ICgoKChjb2xvcjEgPj4gOCkgJiAweEZGKSAqIHJlYWxBbHBoYSArIHVuZG9EYXRhW2RzdE9mZnNldCArIDFdICogaW52QWxwaGEpIC8gMjU1KSB8IDA7XG4gICAgICAgICAgICAgICAgICAgIGN1ckxheWVyLmRhdGFbZHN0T2Zmc2V0ICsgMl0gPSAoKChjb2xvcjEgJiAweEZGKSAqIHJlYWxBbHBoYSArIHVuZG9EYXRhW2RzdE9mZnNldCArIDJdICogaW52QWxwaGEpIC8gMjU1KSB8IDA7XG4gICAgICAgICAgICAgICAgICAgIGN1ckxheWVyLmRhdGFbZHN0T2Zmc2V0ICsgM10gPSBuZXdBbHBoYTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFxuICAgIGZ1bmN0aW9uIENQQnJ1c2hUb29sV2F0ZXJjb2xvcigpIHtcbiAgICAgICAgY29uc3RcbiAgICAgICAgICAgIFdDTUVNT1JZID0gNTAsXG4gICAgICAgICAgICBXWE1BWFNBTVBMRVJBRElVUyA9IDY0O1xuXG4gICAgICAgIHZhclxuICAgICAgICAgICAgcHJldmlvdXNTYW1wbGVzID0gW107XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEF2ZXJhZ2Ugb3V0IGEgYnVuY2ggb2Ygc2FtcGxlcyBhcm91bmQgdGhlIGdpdmVuIHBpeGVsICh4LCB5KS5cbiAgICAgICAgICogXG4gICAgICAgICAqIGR4LCBkeSBjb250cm9scyB0aGUgc3ByZWFkIG9mIHRoZSBzYW1wbGVzLlxuICAgICAgICAgKiBcbiAgICAgICAgICogQHJldHVybnMgQ1BDb2xvckZsb2F0XG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBzYW1wbGVDb2xvcih4LCB5LCBkeCwgZHkpIHtcbiAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgIHNhbXBsZXMgPSBbXSxcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBsYXllclRvU2FtcGxlID0gc2FtcGxlQWxsTGF5ZXJzID8gZnVzaW9uIDogdGhhdC5nZXRBY3RpdmVMYXllcigpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB4ID0geCB8IDA7XG4gICAgICAgICAgICB5ID0geSB8IDA7XG5cbiAgICAgICAgICAgIHNhbXBsZXMucHVzaChDUENvbG9yRmxvYXQuY3JlYXRlRnJvbUludChsYXllclRvU2FtcGxlLmdldFBpeGVsKHgsIHkpKSk7XG5cbiAgICAgICAgICAgIGZvciAodmFyIHIgPSAwLjI1OyByIDwgMS4wMDE7IHIgKz0gLjI1KSB7XG4gICAgICAgICAgICAgICAgc2FtcGxlcy5wdXNoKENQQ29sb3JGbG9hdC5jcmVhdGVGcm9tSW50KGxheWVyVG9TYW1wbGUuZ2V0UGl4ZWwofn4oeCArIHIgKiBkeCksIHkpKSk7XG4gICAgICAgICAgICAgICAgc2FtcGxlcy5wdXNoKENQQ29sb3JGbG9hdC5jcmVhdGVGcm9tSW50KGxheWVyVG9TYW1wbGUuZ2V0UGl4ZWwofn4oeCAtIHIgKiBkeCksIHkpKSk7XG4gICAgICAgICAgICAgICAgc2FtcGxlcy5wdXNoKENQQ29sb3JGbG9hdC5jcmVhdGVGcm9tSW50KGxheWVyVG9TYW1wbGUuZ2V0UGl4ZWwoeCwgfn4oeSArIHIgKiBkeSkpKSk7XG4gICAgICAgICAgICAgICAgc2FtcGxlcy5wdXNoKENQQ29sb3JGbG9hdC5jcmVhdGVGcm9tSW50KGxheWVyVG9TYW1wbGUuZ2V0UGl4ZWwoeCwgfn4oeSAtIHIgKiBkeSkpKSk7XG5cbiAgICAgICAgICAgICAgICBzYW1wbGVzLnB1c2goQ1BDb2xvckZsb2F0LmNyZWF0ZUZyb21JbnQobGF5ZXJUb1NhbXBsZS5nZXRQaXhlbCh+fih4ICsgciAqIDAuNyAqIGR4KSwgfn4oeSArIHIgKiAwLjcgKiBkeSkpKSk7XG4gICAgICAgICAgICAgICAgc2FtcGxlcy5wdXNoKENQQ29sb3JGbG9hdC5jcmVhdGVGcm9tSW50KGxheWVyVG9TYW1wbGUuZ2V0UGl4ZWwofn4oeCArIHIgKiAwLjcgKiBkeCksIH5+KHkgLSByICogMC43ICogZHkpKSkpO1xuICAgICAgICAgICAgICAgIHNhbXBsZXMucHVzaChDUENvbG9yRmxvYXQuY3JlYXRlRnJvbUludChsYXllclRvU2FtcGxlLmdldFBpeGVsKH5+KHggLSByICogMC43ICogZHgpLCB+fih5ICsgciAqIDAuNyAqIGR5KSkpKTtcbiAgICAgICAgICAgICAgICBzYW1wbGVzLnB1c2goQ1BDb2xvckZsb2F0LmNyZWF0ZUZyb21JbnQobGF5ZXJUb1NhbXBsZS5nZXRQaXhlbCh+fih4IC0gciAqIDAuNyAqIGR4KSwgfn4oeSAtIHIgKiAwLjcgKiBkeSkpKSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgIGF2ZXJhZ2UgPSBuZXcgQ1BDb2xvckZsb2F0KDAsIDAsIDApO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNhbXBsZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICAgICAgc2FtcGxlID0gc2FtcGxlc1tpXTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBhdmVyYWdlLnIgKz0gc2FtcGxlLnI7XG4gICAgICAgICAgICAgICAgYXZlcmFnZS5nICs9IHNhbXBsZS5nO1xuICAgICAgICAgICAgICAgIGF2ZXJhZ2UuYiArPSBzYW1wbGUuYjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgYXZlcmFnZS5yIC89IHNhbXBsZXMubGVuZ3RoO1xuICAgICAgICAgICAgYXZlcmFnZS5nIC89IHNhbXBsZXMubGVuZ3RoO1xuICAgICAgICAgICAgYXZlcmFnZS5iIC89IHNhbXBsZXMubGVuZ3RoO1xuXG4gICAgICAgICAgICByZXR1cm4gYXZlcmFnZTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gQmxlbmQgdGhlIGJydXNoIHN0cm9rZSB3aXRoIGZ1bGwgY29sb3IgaW50byB0aGUgb3BhY2l0eUJ1ZmZlclxuICAgICAgICBmdW5jdGlvbiBwYWludERpcmVjdChzcmNSZWN0LCBkc3RSZWN0LCBicnVzaCwgYnJ1c2hXaWR0aCwgYWxwaGEsIGNvbG9yMSkge1xuICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgb3BhY2l0eURhdGEgPSBvcGFjaXR5QnVmZmVyLmRhdGEsXG5cbiAgICAgICAgICAgICAgICBieSA9IHNyY1JlY3QudG9wO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBmb3IgKHZhciB5ID0gZHN0UmVjdC50b3A7IHkgPCBkc3RSZWN0LmJvdHRvbTsgeSsrLCBieSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgICAgIHNyY09mZnNldCA9IHNyY1JlY3QubGVmdCArIGJ5ICogYnJ1c2hXaWR0aCxcbiAgICAgICAgICAgICAgICAgICAgZHN0T2Zmc2V0ID0gb3BhY2l0eUJ1ZmZlci5vZmZzZXRPZlBpeGVsKGRzdFJlY3QubGVmdCwgeSk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgeCA9IGRzdFJlY3QubGVmdDsgeCA8IGRzdFJlY3QucmlnaHQ7IHgrKywgc3JjT2Zmc2V0KyssIGRzdE9mZnNldCsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBcbiAgICAgICAgICAgICAgICAgICAgICAgIGFscGhhMSA9ICgoYnJ1c2hbc3JjT2Zmc2V0XSAmIDB4ZmYpICogYWxwaGEgLyAyNTUpIHwgMDtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGlmIChhbHBoYTEgPD0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yMiA9IG9wYWNpdHlEYXRhW2RzdE9mZnNldF0sXG4gICAgICAgICAgICAgICAgICAgICAgICBhbHBoYTIgPSBjb2xvcjIgPj4+IDI0LFxuXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdBbHBoYSA9IChhbHBoYTEgKyBhbHBoYTIgLSBhbHBoYTEgKiBhbHBoYTIgLyAyNTUpIHwgMDtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGlmIChuZXdBbHBoYSA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFsQWxwaGEgPSAoYWxwaGExICogMjU1IC8gbmV3QWxwaGEpIHwgMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnZBbHBoYSA9IDI1NSAtIHJlYWxBbHBoYTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhlIHVzdWFsIGFscGhhIGJsZW5kaW5nIGZvcm11bGEgQyA9IEEgKiBhbHBoYSArIEIgKiAoMSAtIGFscGhhKVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gaGFzIHRvIHJld3JpdHRlbiBpbiB0aGUgZm9ybSBDID0gQSArICgxIC0gYWxwaGEpICogQiAtICgxIC0gYWxwaGEpICpBXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB0aGF0IHdheSB0aGUgcm91bmRpbmcgdXAgZXJyb3JzIHdvbid0IGNhdXNlIHByb2JsZW1zXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdDb2xvciA9IG5ld0FscGhhIDw8IDI0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgKChjb2xvcjEgPj4+IDE2ICYgMHhmZikgKyAoKChjb2xvcjIgPj4+IDE2ICYgMHhmZikgKiBpbnZBbHBoYSAtIChjb2xvcjEgPj4+IDE2ICYgMHhmZikgKiBpbnZBbHBoYSkgLyAyNTUpKSA8PCAxNlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICgoY29sb3IxID4+PiA4ICYgMHhmZikgKyAoKChjb2xvcjIgPj4+IDggJiAweGZmKSAqIGludkFscGhhIC0gKGNvbG9yMSA+Pj4gOCAmIDB4ZmYpICogaW52QWxwaGEpIC8gMjU1KSkgPDwgOFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICgoY29sb3IxICYgMHhmZikgKyAoKChjb2xvcjIgJiAweGZmKSAqIGludkFscGhhIC0gKGNvbG9yMSAmIDB4ZmYpICogaW52QWxwaGEpIC8gMjU1KSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIG9wYWNpdHlEYXRhW2RzdE9mZnNldF0gPSBuZXdDb2xvcjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgdGhpcy5iZWdpblN0cm9rZSA9IGZ1bmN0aW9uKHgsIHksIHByZXNzdXJlKSB7XG4gICAgICAgICAgICBwcmV2aW91c1NhbXBsZXMgPSBudWxsO1xuXG4gICAgICAgICAgICBDUEJydXNoVG9vbERpcmVjdEJydXNoLnByb3RvdHlwZS5iZWdpblN0cm9rZS5jYWxsKHRoaXMsIHgsIHksIHByZXNzdXJlKTtcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLnBhaW50RGFiSW1wbGVtZW50YXRpb24gPSBmdW5jdGlvbihzcmNSZWN0LCBkc3RSZWN0LCBkYWIpIHtcbiAgICAgICAgICAgIGlmIChwcmV2aW91c1NhbXBsZXMgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIC8vIFNlZWQgdGhlIHByZXZpb3VzU2FtcGxlcyBsaXN0IHRvIGNhcGFjaXR5IHdpdGggYSBidW5jaCBvZiBjb3BpZXMgb2Ygb25lIHNhbXBsZSB0byBnZXQgdXMgc3RhcnRlZFxuICAgICAgICAgICAgICAgIHZhciBcbiAgICAgICAgICAgICAgICAgICAgc3RhcnRDb2xvciA9IHNhbXBsZUNvbG9yKFxuICAgICAgICAgICAgICAgICAgICAgICAgfn4oKGRzdFJlY3QubGVmdCArIGRzdFJlY3QucmlnaHQpIC8gMiksXG4gICAgICAgICAgICAgICAgICAgICAgICB+figoZHN0UmVjdC50b3AgKyBkc3RSZWN0LmJvdHRvbSkgLyAyKSwgXG4gICAgICAgICAgICAgICAgICAgICAgICBNYXRoLm1heCgxLCBNYXRoLm1pbihXWE1BWFNBTVBMRVJBRElVUywgZHN0UmVjdC5nZXRXaWR0aCgpICogMiAvIDYpKSwgXG4gICAgICAgICAgICAgICAgICAgICAgICBNYXRoLm1heCgxLCBNYXRoLm1pbihXWE1BWFNBTVBMRVJBRElVUywgZHN0UmVjdC5nZXRIZWlnaHQoKSAqIDIgLyA2KSlcbiAgICAgICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgIHByZXZpb3VzU2FtcGxlcyA9IFtdO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgV0NNRU1PUlk7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBwcmV2aW91c1NhbXBsZXMucHVzaChzdGFydENvbG9yKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHZhciBcbiAgICAgICAgICAgICAgICB3Y0NvbG9yID0gbmV3IENQQ29sb3JGbG9hdCgwLCAwLCAwKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcmV2aW91c1NhbXBsZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICAgICAgc2FtcGxlID0gcHJldmlvdXNTYW1wbGVzW2ldO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHdjQ29sb3IuciArPSBzYW1wbGUucjtcbiAgICAgICAgICAgICAgICB3Y0NvbG9yLmcgKz0gc2FtcGxlLmc7XG4gICAgICAgICAgICAgICAgd2NDb2xvci5iICs9IHNhbXBsZS5iO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgd2NDb2xvci5yIC89IHByZXZpb3VzU2FtcGxlcy5sZW5ndGg7XG4gICAgICAgICAgICB3Y0NvbG9yLmcgLz0gcHJldmlvdXNTYW1wbGVzLmxlbmd0aDtcbiAgICAgICAgICAgIHdjQ29sb3IuYiAvPSBwcmV2aW91c1NhbXBsZXMubGVuZ3RoO1xuXG4gICAgICAgICAgICAvLyByZXNhdHVyYXRpb25cbiAgICAgICAgICAgIHdjQ29sb3IubWl4V2l0aChDUENvbG9yRmxvYXQuY3JlYXRlRnJvbUludChjdXJDb2xvciksIGN1ckJydXNoLnJlc2F0ICogY3VyQnJ1c2gucmVzYXQpO1xuXG4gICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICBuZXdDb2xvciA9IHdjQ29sb3IudG9JbnQoKTtcblxuICAgICAgICAgICAgLy8gYmxlZWRcbiAgICAgICAgICAgIHdjQ29sb3IubWl4V2l0aChcbiAgICAgICAgICAgICAgICBzYW1wbGVDb2xvcihcbiAgICAgICAgICAgICAgICAgICAgKGRzdFJlY3QubGVmdCArIGRzdFJlY3QucmlnaHQpIC8gMixcbiAgICAgICAgICAgICAgICAgICAgKGRzdFJlY3QudG9wICsgZHN0UmVjdC5ib3R0b20pIC8gMixcbiAgICAgICAgICAgICAgICAgICAgTWF0aC5tYXgoMSwgTWF0aC5taW4oV1hNQVhTQU1QTEVSQURJVVMsIGRzdFJlY3QuZ2V0V2lkdGgoKSAqIDIgLyA2KSksXG4gICAgICAgICAgICAgICAgICAgIE1hdGgubWF4KDEsIE1hdGgubWluKFdYTUFYU0FNUExFUkFESVVTLCBkc3RSZWN0LmdldEhlaWdodCgpICogMiAvIDYpKVxuICAgICAgICAgICAgICAgICksIFxuICAgICAgICAgICAgICAgIGN1ckJydXNoLmJsZWVkXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBwcmV2aW91c1NhbXBsZXMucHVzaCh3Y0NvbG9yKTtcbiAgICAgICAgICAgIHByZXZpb3VzU2FtcGxlcy5zaGlmdCgpO1xuXG4gICAgICAgICAgICBwYWludERpcmVjdChzcmNSZWN0LCBkc3RSZWN0LCBkYWIuYnJ1c2gsIGRhYi53aWR0aCwgTWF0aC5tYXgoMSwgZGFiLmFscGhhIC8gNCksIG5ld0NvbG9yKTtcbiAgICAgICAgICAgIG1lcmdlT3BhY2l0eUJ1ZmZlcigwLCBmYWxzZSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChzYW1wbGVBbGxMYXllcnMpIHtcbiAgICAgICAgICAgICAgICB0aGF0LmZ1c2lvbkxheWVycygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH1cbiAgICBcbiAgICBDUEJydXNoVG9vbFdhdGVyY29sb3IucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShDUEJydXNoVG9vbERpcmVjdEJydXNoLnByb3RvdHlwZSk7XG4gICAgQ1BCcnVzaFRvb2xXYXRlcmNvbG9yLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IENQQnJ1c2hUb29sV2F0ZXJjb2xvcjtcbiAgICBcbiAgICBmdW5jdGlvbiBDUEJydXNoVG9vbE9pbCgpIHtcblxuICAgICAgICBmdW5jdGlvbiBvaWxBY2N1bUJ1ZmZlcihzcmNSZWN0LCBkc3RSZWN0LCBidWZmZXIsIHcsIGFscGhhKSB7XG4gICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICBsYXllclRvU2FtcGxlID0gc2FtcGxlQWxsTGF5ZXJzID8gZnVzaW9uIDogdGhhdC5nZXRBY3RpdmVMYXllcigpLFxuXG4gICAgICAgICAgICAgICAgYnkgPSBzcmNSZWN0LnRvcDtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZm9yICh2YXIgeSA9IGRzdFJlY3QudG9wOyB5IDwgZHN0UmVjdC5ib3R0b207IHkrKywgYnkrKykge1xuICAgICAgICAgICAgICAgIHZhciBcbiAgICAgICAgICAgICAgICAgICAgc3JjT2Zmc2V0ID0gc3JjUmVjdC5sZWZ0ICsgYnkgKiB3LFxuICAgICAgICAgICAgICAgICAgICBkc3RPZmZzZXQgPSBsYXllclRvU2FtcGxlLm9mZnNldE9mUGl4ZWwoZHN0UmVjdC5sZWZ0LCB5KTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBmb3IgKHZhciB4ID0gZHN0UmVjdC5sZWZ0OyB4IDwgZHN0UmVjdC5yaWdodDsgeCsrLCBzcmNPZmZzZXQrKywgZHN0T2Zmc2V0ICs9IENQQ29sb3JCbXAuQllURVNfUEVSX1BJWEVMKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgICAgICAgICAgYWxwaGExID0gKGxheWVyVG9TYW1wbGUuZGF0YVtkc3RPZmZzZXQgKyBDUENvbG9yQm1wLkFMUEhBX0JZVEVfT0ZGU0VUXSAqIGFscGhhIC8gMjU1KSB8IDA7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAoYWxwaGExIDw9IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjIgPSBidWZmZXJbc3JjT2Zmc2V0XSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGFscGhhMiA9IGNvbG9yMiA+Pj4gMjQsXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld0FscGhhID0gKGFscGhhMSArIGFscGhhMiAtIGFscGhhMSAqIGFscGhhMiAvIDI1NSkgfCAwO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5ld0FscGhhID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlYWxBbHBoYSA9IChhbHBoYTEgKiAyNTUgLyBuZXdBbHBoYSkgfCAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGludkFscGhhID0gMjU1IC0gcmVhbEFscGhhLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yMVJlZCA9IGxheWVyVG9TYW1wbGUuZGF0YVtkc3RPZmZzZXQgKyBDUENvbG9yQm1wLlJFRF9CWVRFX09GRlNFVF0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3IxR3JlZW4gPSBsYXllclRvU2FtcGxlLmRhdGFbZHN0T2Zmc2V0ICsgQ1BDb2xvckJtcC5HUkVFTl9CWVRFX09GRlNFVF0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3IxQmx1ZSA9IGxheWVyVG9TYW1wbGUuZGF0YVtkc3RPZmZzZXQgKyBDUENvbG9yQm1wLkJMVUVfQllURV9PRkZTRVRdLFxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3Q29sb3IgPSBuZXdBbHBoYSA8PCAyNFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IChjb2xvcjFSZWQgKyAoKChjb2xvcjIgPj4+IDE2ICYgMHhmZikgKiBpbnZBbHBoYSAtIGNvbG9yMVJlZCAqIGludkFscGhhKSAvIDI1NSkpIDw8IDE2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgKGNvbG9yMUdyZWVuICsgKCgoY29sb3IyID4+PiA4ICYgMHhmZikgKiBpbnZBbHBoYSAtIGNvbG9yMUdyZWVuICogaW52QWxwaGEpIC8gMjU1KSkgPDwgOFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IChjb2xvcjFCbHVlICsgKCgoY29sb3IyICYgMHhmZikgKiBpbnZBbHBoYSAtIGNvbG9yMUJsdWUgKiBpbnZBbHBoYSkgLyAyNTUpKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgYnVmZmVyW3NyY09mZnNldF0gPSBuZXdDb2xvcjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIG9pbFJlc2F0QnVmZmVyKHNyY1JlY3QsIGRzdFJlY3QsIGJ1ZmZlciwgdywgYWxwaGExLCBjb2xvcjEpIHtcbiAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgIGJ5ID0gc3JjUmVjdC50b3A7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChhbHBoYTEgPD0gMCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZm9yICh2YXIgeSA9IGRzdFJlY3QudG9wOyB5IDwgZHN0UmVjdC5ib3R0b207IHkrKywgYnkrKykge1xuICAgICAgICAgICAgICAgIHZhciBcbiAgICAgICAgICAgICAgICAgICAgc3JjT2Zmc2V0ID0gc3JjUmVjdC5sZWZ0ICsgYnkgKiB3O1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGZvciAodmFyIHggPSBkc3RSZWN0LmxlZnQ7IHggPCBkc3RSZWN0LnJpZ2h0OyB4KyssIHNyY09mZnNldCsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgICAgICAgICAgY29sb3IyID0gYnVmZmVyW3NyY09mZnNldF0sXG4gICAgICAgICAgICAgICAgICAgICAgICBhbHBoYTIgPSAoY29sb3IyID4+PiAyNCksXG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdBbHBoYSA9IChhbHBoYTEgKyBhbHBoYTIgLSBhbHBoYTEgKiBhbHBoYTIgLyAyNTUpIHwgMDtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGlmIChuZXdBbHBoYSA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFsQWxwaGEgPSAoYWxwaGExICogMjU1IC8gbmV3QWxwaGEpIHwgMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnZBbHBoYSA9IDI1NSAtIHJlYWxBbHBoYSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdDb2xvciA9IG5ld0FscGhhIDw8IDI0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgKChjb2xvcjEgPj4+IDE2ICYgMHhmZikgKyAoKChjb2xvcjIgPj4+IDE2ICYgMHhmZikgKiBpbnZBbHBoYSAtIChjb2xvcjEgPj4+IDE2ICYgMHhmZikgKiBpbnZBbHBoYSkgLyAyNTUpKSA8PCAxNlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICgoY29sb3IxID4+PiA4ICYgMHhmZikgKyAoKChjb2xvcjIgPj4+IDggJiAweGZmKSAqIGludkFscGhhIC0gKGNvbG9yMSA+Pj4gOCAmIDB4ZmYpICogaW52QWxwaGEpIC8gMjU1KSkgPDwgOFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICgoY29sb3IxICYgMHhmZikgKyAoKChjb2xvcjIgJiAweGZmKSAqIGludkFscGhhIC0gKGNvbG9yMSAmIDB4ZmYpICogaW52QWxwaGEpIC8gMjU1KSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1ZmZlcltzcmNPZmZzZXRdID0gbmV3Q29sb3I7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBvaWxQYXN0ZUJ1ZmZlcihzcmNSZWN0LCBkc3RSZWN0LCBidWZmZXIsIGJydXNoLCB3LCBhbHBoYSkge1xuICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgb3BhY2l0eURhdGEgPSBvcGFjaXR5QnVmZmVyLmRhdGEsXG4gICAgXG4gICAgICAgICAgICAgICAgYnkgPSBzcmNSZWN0LnRvcDtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZm9yICh2YXIgeSA9IGRzdFJlY3QudG9wOyB5IDwgZHN0UmVjdC5ib3R0b207IHkrKywgYnkrKykge1xuICAgICAgICAgICAgICAgIHZhciBcbiAgICAgICAgICAgICAgICAgICAgYnVmZmVyT2Zmc2V0ID0gc3JjUmVjdC5sZWZ0ICsgYnkgKiB3LCAvLyBCcnVzaCBidWZmZXIgaXMgMSBpbnRlZ2VyIHBlciBwaXhlbFxuICAgICAgICAgICAgICAgICAgICBvcGFjaXR5T2Zmc2V0ID0gZHN0UmVjdC5sZWZ0ICsgeSAqIHRoYXQud2lkdGgsIC8vIE9wYWNpdHkgYnVmZmVyIGlzIDEgaW50ZWdlciBwZXIgcGl4ZWxcbiAgICAgICAgICAgICAgICAgICAgbGF5ZXJPZmZzZXQgPSBjdXJMYXllci5vZmZzZXRPZlBpeGVsKGRzdFJlY3QubGVmdCwgeSk7IC8vIDQgYnl0ZXMgcGVyIHBpeGVsIFxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGZvciAodmFyIHggPSBkc3RSZWN0LmxlZnQ7IHggPCBkc3RSZWN0LnJpZ2h0OyB4KyssIGJ1ZmZlck9mZnNldCsrLCBsYXllck9mZnNldCArPSBDUENvbG9yQm1wLkJZVEVTX1BFUl9QSVhFTCwgb3BhY2l0eU9mZnNldCsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yMSA9IGJ1ZmZlcltidWZmZXJPZmZzZXRdLFxuICAgICAgICAgICAgICAgICAgICAgICAgYWxwaGExID0gKChjb2xvcjEgPj4+IDI0KSAqIChicnVzaFtidWZmZXJPZmZzZXRdICYgMHhmZikgKiBhbHBoYSAvICgyNTUgKiAyNTUpKSB8IDA7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAoYWxwaGExIDw9IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgICAgICAgICBhbHBoYTIgPSBjdXJMYXllci5kYXRhW2xheWVyT2Zmc2V0ICsgQ1BDb2xvckJtcC5BTFBIQV9CWVRFX09GRlNFVF0sXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld0FscGhhID0gKGFscGhhMSArIGFscGhhMiAtIGFscGhhMSAqIGFscGhhMiAvIDI1NSkgfCAwO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5ld0FscGhhID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yMlJlZCA9IGN1ckxheWVyLmRhdGFbbGF5ZXJPZmZzZXQgKyBDUENvbG9yQm1wLlJFRF9CWVRFX09GRlNFVF0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3IyR3JlZW4gPSBjdXJMYXllci5kYXRhW2xheWVyT2Zmc2V0ICsgQ1BDb2xvckJtcC5HUkVFTl9CWVRFX09GRlNFVF0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3IyQmx1ZSA9IGN1ckxheWVyLmRhdGFbbGF5ZXJPZmZzZXQgKyBDUENvbG9yQm1wLkJMVUVfQllURV9PRkZTRVRdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlYWxBbHBoYSA9IChhbHBoYTEgKiAyNTUgLyBuZXdBbHBoYSkgfCAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGludkFscGhhID0gMjU1IC0gcmVhbEFscGhhLFxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3Q29sb3IgPSBuZXdBbHBoYSA8PCAyNFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICgoY29sb3IxID4+PiAxNiAmIDB4ZmYpICsgKChjb2xvcjJSZWQgKiBpbnZBbHBoYSAtIChjb2xvcjEgPj4+IDE2ICYgMHhmZikgKiBpbnZBbHBoYSkgLyAyNTUpKSA8PCAxNlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICgoY29sb3IxID4+PiA4ICYgMHhmZikgKyAoKGNvbG9yMkdyZWVuICogaW52QWxwaGEgLSAoY29sb3IxID4+PiA4ICYgMHhmZikgKiBpbnZBbHBoYSkgLyAyNTUpKSA8PCA4XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgKChjb2xvcjEgJiAweGZmKSArICgoY29sb3IyQmx1ZSAqIGludkFscGhhIC0gKGNvbG9yMSAmIDB4ZmYpICogaW52QWxwaGEpIC8gMjU1KSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIG9wYWNpdHlEYXRhW29wYWNpdHlPZmZzZXRdID0gbmV3Q29sb3I7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHRoaXMucGFpbnREYWJJbXBsZW1lbnRhdGlvbiA9IGZ1bmN0aW9uKHNyY1JlY3QsIGRzdFJlY3QsIGRhYikge1xuICAgICAgICAgICAgaWYgKGJydXNoQnVmZmVyID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBicnVzaEJ1ZmZlciA9IG5ldyBVaW50MzJBcnJheShkYWIud2lkdGggKiBkYWIuaGVpZ2h0KTsgLy8gSW5pdGlhbGl6ZWQgdG8gMCBmb3IgdXMgYnkgdGhlIGJyb3dzZXJcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBvaWxBY2N1bUJ1ZmZlcihzcmNSZWN0LCBkc3RSZWN0LCBicnVzaEJ1ZmZlciwgZGFiLndpZHRoLCAyNTUpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBvaWxSZXNhdEJ1ZmZlcihzcmNSZWN0LCBkc3RSZWN0LCBicnVzaEJ1ZmZlciwgZGFiLndpZHRoLCB+figoY3VyQnJ1c2gucmVzYXQgPD0gMC4wKSA/IDAgOiBNYXRoLm1heCgxLCAoY3VyQnJ1c2gucmVzYXQgKiBjdXJCcnVzaC5yZXNhdCkgKiAyNTUpKSwgY3VyQ29sb3IgJiAweEZGRkZGRik7XG4gICAgICAgICAgICAgICAgb2lsUGFzdGVCdWZmZXIoc3JjUmVjdCwgZHN0UmVjdCwgYnJ1c2hCdWZmZXIsIGRhYi5icnVzaCwgZGFiLndpZHRoLCBkYWIuYWxwaGEpO1xuICAgICAgICAgICAgICAgIG9pbEFjY3VtQnVmZmVyKHNyY1JlY3QsIGRzdFJlY3QsIGJydXNoQnVmZmVyLCBkYWIud2lkdGgsIH5+KGN1ckJydXNoLmJsZWVkICogMjU1KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIG1lcmdlT3BhY2l0eUJ1ZmZlcigwLCBmYWxzZSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChzYW1wbGVBbGxMYXllcnMpIHtcbiAgICAgICAgICAgICAgICB0aGF0LmZ1c2lvbkxheWVycygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH1cbiAgICBcbiAgICBDUEJydXNoVG9vbE9pbC5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKENQQnJ1c2hUb29sRGlyZWN0QnJ1c2gucHJvdG90eXBlKTtcbiAgICBDUEJydXNoVG9vbE9pbC5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBDUEJydXNoVG9vbE9pbDtcbiAgICBcbiAgICBmdW5jdGlvbiBDUEJydXNoVG9vbFNtdWRnZSgpIHtcbiAgICAgICAgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBcbiAgICAgICAgICogQHBhcmFtIHNyY1JlY3RcbiAgICAgICAgICogQHBhcmFtIGRzdFJlY3RcbiAgICAgICAgICogQHBhcmFtIGJ1ZmZlciBVaW50MzJBcnJheVxuICAgICAgICAgKiBAcGFyYW0gdyBpbnRcbiAgICAgICAgICogQHBhcmFtIGFscGhhIGludFxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gc211ZGdlQWNjdW1CdWZmZXIoc3JjUmVjdCwgZHN0UmVjdCwgYnVmZmVyLCB3LCBhbHBoYSkge1xuICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgbGF5ZXJUb1NhbXBsZSA9IHNhbXBsZUFsbExheWVycyA/IGZ1c2lvbiA6IHRoYXQuZ2V0QWN0aXZlTGF5ZXIoKSxcblxuICAgICAgICAgICAgICAgIGJ5ID0gc3JjUmVjdC50b3A7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGZvciAodmFyIHkgPSBkc3RSZWN0LnRvcDsgeSA8IGRzdFJlY3QuYm90dG9tOyB5KyssIGJ5KyspIHtcbiAgICAgICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICAgICAgc3JjT2Zmc2V0ID0gc3JjUmVjdC5sZWZ0ICsgYnkgKiB3LFxuICAgICAgICAgICAgICAgICAgICBkc3RPZmZzZXQgPSBsYXllclRvU2FtcGxlLm9mZnNldE9mUGl4ZWwoZHN0UmVjdC5sZWZ0LCB5KTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBmb3IgKHZhciB4ID0gZHN0UmVjdC5sZWZ0OyB4IDwgZHN0UmVjdC5yaWdodDsgeCsrLCBzcmNPZmZzZXQrKywgZHN0T2Zmc2V0ICs9IENQQ29sb3JCbXAuQllURVNfUEVSX1BJWEVMKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgICAgICAgICAgbGF5ZXJSZWQgPSBsYXllclRvU2FtcGxlLmRhdGFbZHN0T2Zmc2V0ICsgQ1BDb2xvckJtcC5SRURfQllURV9PRkZTRVRdLFxuICAgICAgICAgICAgICAgICAgICAgICAgbGF5ZXJHcmVlbiA9IGxheWVyVG9TYW1wbGUuZGF0YVtkc3RPZmZzZXQgKyBDUENvbG9yQm1wLkdSRUVOX0JZVEVfT0ZGU0VUXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGxheWVyQmx1ZSA9IGxheWVyVG9TYW1wbGUuZGF0YVtkc3RPZmZzZXQgKyBDUENvbG9yQm1wLkJMVUVfQllURV9PRkZTRVRdLFxuICAgICAgICAgICAgICAgICAgICAgICAgbGF5ZXJBbHBoYSA9IGxheWVyVG9TYW1wbGUuZGF0YVtkc3RPZmZzZXQgKyBDUENvbG9yQm1wLkFMUEhBX0JZVEVfT0ZGU0VUXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgb3BhY2l0eUFscGhhID0gMjU1IC0gYWxwaGE7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAob3BhY2l0eUFscGhhID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVzdENvbG9yID0gYnVmZmVyW3NyY09mZnNldF0sXG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXN0QWxwaGEgPSAyNTUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3TGF5ZXJBbHBoYSA9IChvcGFjaXR5QWxwaGEgKyBkZXN0QWxwaGEgKiAoMjU1IC0gb3BhY2l0eUFscGhhKSAvIDI1NSkgfCAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlYWxBbHBoYSA9ICgyNTUgKiBvcGFjaXR5QWxwaGEgLyBuZXdMYXllckFscGhhKSB8IDAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW52QWxwaGEgPSAyNTUgLSByZWFsQWxwaGEsXG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdDb2xvciA9IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoKGxheWVyQWxwaGEgKiByZWFsQWxwaGEgKyAoZGVzdENvbG9yID4+PiAyNCAmIDB4ZmYpICogaW52QWxwaGEpIC8gMjU1KSA8PCAyNCAmIDB4ZmYwMDAwMDBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAoKGxheWVyUmVkICogcmVhbEFscGhhICsgKGRlc3RDb2xvciA+Pj4gMTYgJiAweGZmKSAqIGludkFscGhhKSAvIDI1NSkgPDwgMTYgJiAweGZmMDAwMFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICgobGF5ZXJHcmVlbiAqIHJlYWxBbHBoYSArIChkZXN0Q29sb3IgPj4+IDggJiAweGZmKSAqIGludkFscGhhKSAvIDI1NSkgPDwgOCAmIDB4ZmYwMFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICgobGF5ZXJCbHVlICogcmVhbEFscGhhICsgKGRlc3RDb2xvciAmIDB4ZmYpICogaW52QWxwaGEpIC8gMjU1KSAmIDB4ZmY7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuZXdDb2xvciA9PSBkZXN0Q29sb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobGF5ZXJSZWQgPiAoZGVzdENvbG9yICYgMHhmZjAwMDApKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld0NvbG9yICs9IDEgPDwgMTY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChsYXllclJlZCA8IChkZXN0Q29sb3IgJiAweGZmMDAwMCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3Q29sb3IgLT0gMSA8PCAxNjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobGF5ZXJHcmVlbj4gKGRlc3RDb2xvciAmIDB4ZmYwMCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3Q29sb3IgKz0gMSA8PCA4O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobGF5ZXJHcmVlbiA8IChkZXN0Q29sb3IgJiAweGZmMDApKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld0NvbG9yIC09IDEgPDwgODtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobGF5ZXJCbHVlID4gKGRlc3RDb2xvciAmIDB4ZmYpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld0NvbG9yICs9IDE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChsYXllckJsdWUgPCAoZGVzdENvbG9yICYgMHhmZikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3Q29sb3IgLT0gMTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1ZmZlcltzcmNPZmZzZXRdID0gbmV3Q29sb3I7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChzcmNSZWN0LmxlZnQgPiAwKSB7XG4gICAgICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgICAgIGZpbGwgPSBzcmNSZWN0LmxlZnQ7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgeSA9IHNyY1JlY3QudG9wOyB5IDwgc3JjUmVjdC5ib3R0b207IHkrKykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgXG4gICAgICAgICAgICAgICAgICAgICAgICBvZmZzZXQgPSB5ICogdyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpbGxDb2xvciA9IGJ1ZmZlcltvZmZzZXQgKyBzcmNSZWN0LmxlZnRdO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCBmaWxsOyB4KyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1ZmZlcltvZmZzZXQrK10gPSBmaWxsQ29sb3I7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChzcmNSZWN0LnJpZ2h0IDwgdykge1xuICAgICAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgICAgICBmaWxsID0gdyAtIHNyY1JlY3QucmlnaHQ7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgeSA9IHNyY1JlY3QudG9wOyB5IDwgc3JjUmVjdC5ib3R0b207IHkrKykge1xuICAgICAgICAgICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9mZnNldCA9IHkgKiB3ICsgc3JjUmVjdC5yaWdodCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpbGxDb2xvciA9IGJ1ZmZlcltvZmZzZXQgLSAxXTtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgZmlsbDsgeCsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBidWZmZXJbb2Zmc2V0KytdID0gZmlsbENvbG9yO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmb3IgKHZhciB5ID0gMDsgeSA8IHNyY1JlY3QudG9wOyB5KyspIHtcbiAgICAgICAgICAgICAgICB2YXIgXG4gICAgICAgICAgICAgICAgICAgIHNyY09mZnNldCA9IHNyY1JlY3QudG9wICogdyxcbiAgICAgICAgICAgICAgICAgICAgZHN0T2Zmc2V0ID0geSAqIHc7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCB3OyB4KyssIHNyY09mZnNldCsrLCBkc3RPZmZzZXQrKykge1xuICAgICAgICAgICAgICAgICAgICBidWZmZXJbZHN0T2Zmc2V0XSA9IGJ1ZmZlcltzcmNPZmZzZXRdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZm9yICh2YXIgeSA9IHNyY1JlY3QuYm90dG9tOyB5IDwgdzsgeSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIFxuICAgICAgICAgICAgICAgICAgICBzcmNPZmZzZXQgPSAoc3JjUmVjdC5ib3R0b20gLSAxKSAqIHcsXG4gICAgICAgICAgICAgICAgICAgIGRzdE9mZnNldCA9IHkgKiB3O1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgdzsgeCsrLCBzcmNPZmZzZXQrKywgZHN0T2Zmc2V0KyspIHtcbiAgICAgICAgICAgICAgICAgICAgYnVmZmVyW2RzdE9mZnNldF0gPSBidWZmZXJbc3JjT2Zmc2V0XTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogXG4gICAgICAgICAqIEBwYXJhbSBzcmNSZWN0IENQUmVjdFxuICAgICAgICAgKiBAcGFyYW0gZHN0UmVjdCBDUFJlY3RcbiAgICAgICAgICogQHBhcmFtIGJ1ZmZlciBVaW50MzJBcnJheVxuICAgICAgICAgKiBAcGFyYW0gYnJ1c2ggVWludDhBcnJheVxuICAgICAgICAgKiBAcGFyYW0gdyBpbnRcbiAgICAgICAgICogQHBhcmFtIGFscGhhIGludFxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gc211ZGdlUGFzdGVCdWZmZXIoc3JjUmVjdCwgZHN0UmVjdCwgYnVmZmVyLCBicnVzaCwgdywgYWxwaGEpIHtcbiAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgIGJ5ID0gc3JjUmVjdC50b3A7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGZvciAodmFyIHkgPSBkc3RSZWN0LnRvcDsgeSA8IGRzdFJlY3QuYm90dG9tOyB5KyssIGJ5KyspIHtcbiAgICAgICAgICAgICAgICB2YXIgXG4gICAgICAgICAgICAgICAgICAgIHNyY09mZnNldCA9IHNyY1JlY3QubGVmdCArIGJ5ICogdyxcbiAgICAgICAgICAgICAgICAgICAgZHN0T2Zmc2V0ID0gY3VyTGF5ZXIub2Zmc2V0T2ZQaXhlbChkc3RSZWN0LmxlZnQsIHkpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGZvciAodmFyIHggPSBkc3RSZWN0LmxlZnQ7IHggPCBkc3RSZWN0LnJpZ2h0OyB4KyssIHNyY09mZnNldCsrLCBkc3RPZmZzZXQgKz0gQ1BDb2xvckJtcC5CWVRFU19QRVJfUElYRUwpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgICAgICAgICBidWZmZXJDb2xvciA9IGJ1ZmZlcltzcmNPZmZzZXRdLFxuICAgICAgICAgICAgICAgICAgICAgICAgb3BhY2l0eUFscGhhID0gKGJ1ZmZlckNvbG9yID4+PiAyNCkgKiAoYnJ1c2hbc3JjT2Zmc2V0XSAmIDB4ZmYpIC8gMjU1O1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wYWNpdHlBbHBoYSA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1ckxheWVyLmRhdGFbZHN0T2Zmc2V0ICsgQ1BDb2xvckJtcC5SRURfQllURV9PRkZTRVRdID0gKGJ1ZmZlckNvbG9yID4+IDE2KSAmIDB4ZmY7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJMYXllci5kYXRhW2RzdE9mZnNldCArIENQQ29sb3JCbXAuR1JFRU5fQllURV9PRkZTRVRdID0gKGJ1ZmZlckNvbG9yID4+IDgpICYgMHhmZjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1ckxheWVyLmRhdGFbZHN0T2Zmc2V0ICsgQ1BDb2xvckJtcC5CTFVFX0JZVEVfT0ZGU0VUXSA9IGJ1ZmZlckNvbG9yICYgMHhmZjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1ckxheWVyLmRhdGFbZHN0T2Zmc2V0ICsgQ1BDb2xvckJtcC5BTFBIQV9CWVRFX09GRlNFVF0gPSAoYnVmZmVyQ29sb3IgPj4gMjQpICYgMHhmZjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwYXJhbSBzcmNSZWN0IENQUmVjdFxuICAgICAgICAgKiBAcGFyYW0gZHN0UmVjdCBDUFJlY3RcbiAgICAgICAgICogQHBhcmFtIGRhYiBDUEJydXNoRGFiXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnBhaW50RGFiSW1wbGVtZW50YXRpb24gPSBmdW5jdGlvbihzcmNSZWN0LCBkc3RSZWN0LCBkYWIpIHtcbiAgICAgICAgICAgIGlmIChicnVzaEJ1ZmZlciA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgYnJ1c2hCdWZmZXIgPSBuZXcgVWludDMyQXJyYXkoZGFiLndpZHRoICogZGFiLmhlaWdodCk7XG4gICAgICAgICAgICAgICAgc211ZGdlQWNjdW1CdWZmZXIoc3JjUmVjdCwgZHN0UmVjdCwgYnJ1c2hCdWZmZXIsIGRhYi53aWR0aCwgMCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHNtdWRnZUFjY3VtQnVmZmVyKHNyY1JlY3QsIGRzdFJlY3QsIGJydXNoQnVmZmVyLCBkYWIud2lkdGgsIGRhYi5hbHBoYSk7XG4gICAgICAgICAgICAgICAgc211ZGdlUGFzdGVCdWZmZXIoc3JjUmVjdCwgZHN0UmVjdCwgYnJ1c2hCdWZmZXIsIGRhYi5icnVzaCwgZGFiLndpZHRoLCBkYWIuYWxwaGEpO1xuXG4gICAgICAgICAgICAgICAgaWYgKGxvY2tBbHBoYSkge1xuICAgICAgICAgICAgICAgICAgICByZXN0b3JlQWxwaGEoZHN0UmVjdCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBvcGFjaXR5QXJlYS5tYWtlRW1wdHkoKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKHNhbXBsZUFsbExheWVycykge1xuICAgICAgICAgICAgICAgIHRoYXQuZnVzaW9uTGF5ZXJzKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxuICAgIFxuICAgIENQQnJ1c2hUb29sU211ZGdlLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoQ1BCcnVzaFRvb2xEaXJlY3RCcnVzaC5wcm90b3R5cGUpO1xuICAgIENQQnJ1c2hUb29sU211ZGdlLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IENQQnJ1c2hUb29sU211ZGdlO1xuXG4gICAgQ1BCcnVzaFRvb2xTbXVkZ2UucHJvdG90eXBlLm1lcmdlT3BhY2l0eUJ1ZiA9IGZ1bmN0aW9uKGRzdFJlY3QsIGNvbG9yKSB7XG4gICAgfTtcbiAgICBcbiAgICB2YXIgcGFpbnRpbmdNb2RlcyA9IFtcbiAgICAgICAgbmV3IENQQnJ1c2hUb29sU2ltcGxlQnJ1c2goKSwgbmV3IENQQnJ1c2hUb29sRXJhc2VyKCksIG5ldyBDUEJydXNoVG9vbERvZGdlKCksXG4gICAgICAgIG5ldyBDUEJydXNoVG9vbEJ1cm4oKSwgbmV3IENQQnJ1c2hUb29sV2F0ZXJjb2xvcigpLCBuZXcgQ1BCcnVzaFRvb2xCbHVyKCksIG5ldyBDUEJydXNoVG9vbFNtdWRnZSgpLFxuICAgICAgICBuZXcgQ1BCcnVzaFRvb2xPaWwoKVxuICAgIF07XG4gICAgXG4gICAgdGhpcy53aWR0aCA9IF93aWR0aDtcbiAgICB0aGlzLmhlaWdodCA9IF9oZWlnaHQ7XG5cbiAgICB0aGlzLmdldERlZmF1bHRMYXllck5hbWUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyXG4gICAgICAgICAgICBwcmVmaXggPSBcIkxheWVyIFwiLFxuICAgICAgICAgICAgaGlnaGVzdExheWVyTmIgPSAwO1xuICAgICAgICBcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsYXllcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgIGxheWVyID0gbGF5ZXJzW2ldO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoL15MYXllciBbMC05XSskLy50ZXN0KGxheWVyLm5hbWUpKSB7XG4gICAgICAgICAgICAgICAgaGlnaGVzdExheWVyTmIgPSBNYXRoLm1heChoaWdoZXN0TGF5ZXJOYiwgcGFyc2VJbnQobGF5ZXIubmFtZS5zdWJzdHJpbmcocHJlZml4Lmxlbmd0aCksIDEwKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHByZWZpeCArIChoaWdoZXN0TGF5ZXJOYiArIDEpO1xuICAgIH07XG4gICAgXG4gICAgZnVuY3Rpb24gcmVzdG9yZUFscGhhKHJlY3QpIHtcbiAgICAgICAgdGhhdC5nZXRBY3RpdmVMYXllcigpLmNvcHlBbHBoYUZyb20odW5kb0J1ZmZlciwgcmVjdCk7XG4gICAgfVxuICAgIFxuICAgIC8qKlxuICAgICAqIE1lcmdlIHRoZSBvcGFjaXR5IGJ1ZmZlciBmcm9tIHRoZSBjdXJyZW50IGRyYXdpbmcgb3BlcmF0aW9uIHRvIHRoZSBhY3RpdmUgbGF5ZXIuXG4gICAgICovXG4gICAgZnVuY3Rpb24gbWVyZ2VPcGFjaXR5QnVmZmVyKGNvbG9yLCBjbGVhcikge1xuICAgICAgICBpZiAoIW9wYWNpdHlBcmVhLmlzRW1wdHkoKSkge1xuICAgICAgICAgICAgaWYgKGN1ckJydXNoLnBhaW50TW9kZSAhPSBDUEJydXNoSW5mby5NX0VSQVNFIHx8ICFsb2NrQWxwaGEpIHtcbiAgICAgICAgICAgICAgICBwYWludGluZ01vZGVzW2N1ckJydXNoLnBhaW50TW9kZV0ubWVyZ2VPcGFjaXR5QnVmKG9wYWNpdHlBcmVhLCBjb2xvcik7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIEZJWE1FOiBpdCB3b3VsZCBiZSBuaWNlIHRvIGJlIGFibGUgdG8gc2V0IHRoZSBwYXBlciBjb2xvclxuICAgICAgICAgICAgICAgIHBhaW50aW5nTW9kZXNbQ1BCcnVzaEluZm8uTV9QQUlOVF0ubWVyZ2VPcGFjaXR5QnVmKG9wYWNpdHlBcmVhLCBFTVBUWV9MQVlFUl9DT0xPUik7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChsb2NrQWxwaGEpIHtcbiAgICAgICAgICAgICAgICByZXN0b3JlQWxwaGEob3BhY2l0eUFyZWEpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoY2xlYXIpIHtcbiAgICAgICAgICAgICAgICBvcGFjaXR5QnVmZmVyLmNsZWFyUmVjdChvcGFjaXR5QXJlYSwgMCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIG9wYWNpdHlBcmVhLm1ha2VFbXB0eSgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIHRoaXMuYWRkQmFja2dyb3VuZExheWVyID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhclxuICAgICAgICAgICAgbGF5ZXIgPSBuZXcgQ1BMYXllcih0aGF0LndpZHRoLCB0aGF0LmhlaWdodCwgdGhpcy5nZXREZWZhdWx0TGF5ZXJOYW1lKCkpO1xuICAgICAgICBcbiAgICAgICAgbGF5ZXIuY2xlYXJBbGwoRU1QVFlfQkFDS0dST1VORF9DT0xPUik7XG4gICAgICAgIFxuICAgICAgICB0aGlzLmFkZExheWVyT2JqZWN0KGxheWVyKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogTWVyZ2UgdG9nZXRoZXIgdGhlIHZpc2libGUgbGF5ZXJzIGFuZCByZXR1cm4gdGhlIHJlc3VsdGluZyBJbWFnZURhdGEgZm9yIGRpc3BsYXkgdG8gdGhlIHNjcmVlbi5cbiAgICAgKiBcbiAgICAgKiBUaGUgaW1hZ2UgaXMgY2FjaGVkLCBzbyByZXBlYXQgY2FsbHMgYXJlIGNoZWFwLlxuICAgICAqL1xuICAgIHRoaXMuZnVzaW9uTGF5ZXJzID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIC8vIElzIHRoZXJlIGFueXRoaW5nIHRvIHVwZGF0ZSBmcm9tIGxhc3QgY2FsbD9cbiAgICAgICAgaWYgKCFmdXNpb25BcmVhLmlzRW1wdHkoKSkge1xuICAgICAgICAgICAgLy8gVGhlIGN1cnJlbnQgYnJ1c2ggcmVuZGVycyBvdXQgaXRzIGJ1ZmZlcnMgdG8gdGhlIGxheWVyIHN0YWNrIGZvciB1c1xuICAgICAgICAgICAgbWVyZ2VPcGFjaXR5QnVmZmVyKGN1ckNvbG9yLCBmYWxzZSk7XG5cbiAgICAgICAgICAgIC8vIElmIHRoZSBkcmF3aW5nIGlzIHNpbmdsZS1sYXllcmVkIGFuZCBvcGFxdWUsIGp1c3QgdXNlIHRoZSBib3R0b20tbW9zdCBsYXllciBhcyBvdXIgZnVzaW9uLCB3ZSBkb24ndCBuZWVkIHRvIGJsZW5kIGFueXRoaW5nIVxuICAgICAgICAgICAgaWYgKGxheWVycy5sZW5ndGggPT0gMSAmJiBsYXllcnNbMF0uYWxwaGEgPj0gMTAwICYmIGxheWVyc1swXS52aXNpYmxlKSB7XG4gICAgICAgICAgICAgICAgZnVzaW9uID0gbGF5ZXJzWzBdO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBGdXNlIGludG8gdGhlIGFjdHVhbCBmdXNpb24gYnVmZmVyIHNpbmNlIHdlIG5lZWQgdG8gYmxlbmRcbiAgICAgICAgICAgICAgICBmdXNpb24gPSBmdXNpb25CdWZmZXI7XG5cbiAgICAgICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICAgICAgZnVzaW9uSXNTZW1pVHJhbnNwYXJlbnQgPSB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBmaXJzdCA9IHRydWU7XG5cbiAgICAgICAgICAgICAgICBsYXllcnMuZm9yRWFjaChmdW5jdGlvbiAobGF5ZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFmaXJzdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZnVzaW9uSXNTZW1pVHJhbnNwYXJlbnQgPSBmdXNpb25Jc1NlbWlUcmFuc3BhcmVudCAmJiBmdXNpb24uaGFzQWxwaGFJblJlY3QoZnVzaW9uQXJlYSk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBpZiAobGF5ZXIudmlzaWJsZSAmJiBsYXllci5hbHBoYSA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmaXJzdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpcnN0ID0gZmFsc2U7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobGF5ZXIuYWxwaGEgPT0gMTAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIEluc3RlYWQgb2YgYmxlbmRpbmcgdGhlIGxheWVyIG9udG8gdGhlIGVtcHR5IHRyYW5zcGFyZW50IGZ1c2lvbiwgd2UgY2FuIGp1c3QgY29weSB0aGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogbGF5ZXIgZGF0YSByaWdodCBpbnRvIHRoZSBmdXNpb24uIFRoaXMgd29ya3MgZm9yIGFsbCBvZiBvdXIgYmxlbmRpbmcgbW9kZXMuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1c2lvbi5jb3B5Qml0bWFwUmVjdChsYXllciwgZnVzaW9uQXJlYS5sZWZ0LCBmdXNpb25BcmVhLnRvcCwgZnVzaW9uQXJlYSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdXNpb24uY2xlYXJSZWN0KGZ1c2lvbkFyZWEsIDB4MDBGRkZGRkYpOyAvLyBUcmFuc3BhcmVudCB3aGl0ZVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiB3ZSdyZSBtZXJnaW5nIG9udG8gYSBzZW1pLXRyYW5zcGFyZW50IGNhbnZhcyB0aGVuIHdlIG5lZWQgdG8gYmxlbmQgb3VyIG9wYWNpdHkgdmFsdWVzIG9udG8gdGhlIGV4aXN0aW5nIG9uZXNcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmdXNpb25Jc1NlbWlUcmFuc3BhcmVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxheWVyLmZ1c2lvbldpdGhGdWxsQWxwaGEoZnVzaW9uLCBmdXNpb25BcmVhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTW9zdCBkcmF3aW5ncyB3aWxsIGVuZCB1cCBoYXZpbmcgMTAwJSBjb3ZlcmFnZSBhbmQgd2UgY2FuIHNwZWVkIHRoaW5ncyB1cCB3aXRoIHRoaXMgdmVyc2lvbiBpbnN0ZWFkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGF5ZXIuZnVzaW9uV2l0aChmdXNpb24sIGZ1c2lvbkFyZWEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBpZiAoZmlyc3QpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gRGlkbid0IGRyYXcgYW55IGxheWVycz8gV2UgaGF2ZSB0byBjbGVhciB0aGUgYXJlYSwgdGhlblxuICAgICAgICAgICAgICAgICAgICBmdXNpb24uY2xlYXJSZWN0KGZ1c2lvbkFyZWEsIDB4MDBGRkZGRkYpOyAvLyBUcmFuc3BhcmVudCB3aGl0ZVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVzaW9uQXJlYS5tYWtlRW1wdHkoKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgcmV0dXJuIGZ1c2lvbi5nZXRJbWFnZURhdGEoKTtcbiAgICB9XG4gICAgXG4gICAgdGhpcy5zZXRBY3RpdmVMYXllckluZGV4ID0gZnVuY3Rpb24obmV3SW5kZXgpIHtcbiAgICAgICAgaWYgKG5ld0luZGV4IDwgMCB8fCBuZXdJbmRleCA+PSBsYXllcnMubGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoY3VyTGF5ZXIgIT0gbGF5ZXJzW25ld0luZGV4XSkge1xuICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgb2xkSW5kZXggPSB0aGlzLmdldEFjdGl2ZUxheWVySW5kZXgoKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY3VyTGF5ZXIgPSBsYXllcnNbbmV3SW5kZXhdO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBXYXMgdGhlIG9sZCBsYXllciBkZWxldGVkP1xuICAgICAgICAgICAgaWYgKG9sZEluZGV4ID09IC0xKSB7XG4gICAgICAgICAgICAgICAgY2FsbExpc3RlbmVyc0xheWVyQ2hhbmdlKCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNhbGxMaXN0ZW5lcnNMYXllckNoYW5nZShvbGRJbmRleCk7IC8vIE9sZCBsYXllciBoYXMgbm93IGJlZW4gZGVzZWxlY3RlZFxuICAgICAgICAgICAgICAgIGNhbGxMaXN0ZW5lcnNMYXllckNoYW5nZShuZXdJbmRleCk7IC8vIE5ldyBsYXllciBoYXMgbm93IGJlZW4gc2VsZWN0ZWRcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaW52YWxpZGF0ZUxheWVyVW5kbygpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBcbiAgICB0aGlzLmdldEFjdGl2ZUxheWVySW5kZXggPSBmdW5jdGlvbigpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsYXllcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmIChsYXllcnNbaV0gPT0gY3VyTGF5ZXIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gaTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgcmV0dXJuIC0xO1xuICAgIH07XG4gICAgXG4gICAgLypcbiAgICAgKiBHZXQgdGhlIGluZGV4IG9mIHRoZSB0b3Btb3N0IHZpc2libGUgbGF5ZXIsIG9yIDAuXG4gICAgICovXG4gICAgdGhpcy5nZXRUb3Btb3N0VmlzaWJsZUxheWVyID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSBsYXllcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgICAgIGlmIChsYXllcnNbaV0udmlzaWJsZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gMDtcbiAgICB9O1xuICAgIFxuICAgIHRoaXMuZ2V0TGF5ZXIgPSBmdW5jdGlvbihpKSB7XG4gICAgICAgIHJldHVybiBsYXllcnNbaV07XG4gICAgfTtcbiAgICBcbiAgICB0aGlzLmdldEFjdGl2ZUxheWVyID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBjdXJMYXllcjtcbiAgICB9O1xuICAgIFxuICAgIC8vXG4gICAgLy8gVW5kbyAvIFJlZG9cbiAgICAvL1xuXG4gICAgZnVuY3Rpb24gY2FuVW5kbygpIHtcbiAgICAgICAgcmV0dXJuIHVuZG9MaXN0Lmxlbmd0aCA+IDA7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY2FuUmVkbygpIHtcbiAgICAgICAgcmV0dXJuIHJlZG9MaXN0Lmxlbmd0aCA+IDA7XG4gICAgfVxuICAgIFxuICAgIHRoaXMudW5kbyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAoIWNhblVuZG8oKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGhhc1Vuc2F2ZWRDaGFuZ2VzID0gdHJ1ZTtcbiAgICAgICAgXG4gICAgICAgIHZhclxuICAgICAgICAgICAgdW5kbyA9IHVuZG9MaXN0LnBvcCgpO1xuICAgICAgICBcbiAgICAgICAgdW5kby51bmRvKCk7XG4gICAgICAgIFxuICAgICAgICByZWRvTGlzdC5wdXNoKHVuZG8pO1xuICAgIH1cblxuICAgIHRoaXMucmVkbyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAoIWNhblJlZG8oKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGhhc1Vuc2F2ZWRDaGFuZ2VzID0gdHJ1ZTtcblxuICAgICAgICB2YXJcbiAgICAgICAgICAgIHJlZG8gPSByZWRvTGlzdC5wb3AoKTtcbiAgICAgICAgXG4gICAgICAgIHJlZG8ucmVkbygpO1xuICAgICAgICBcbiAgICAgICAgdW5kb0xpc3QucHVzaChyZWRvKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBFbnN1cmVzIHRoYXQgdGhlIHN0YXRlIG9mIHRoZSBjdXJyZW50IGxheWVyIGhhcyBiZWVuIHN0b3JlZCBpbiB1bmRvQnVmZmVyIHNvIGl0IGNhbiBiZSB1bmRvbmUgbGF0ZXIuXG4gICAgICovXG4gICAgZnVuY3Rpb24gcHJlcGFyZUZvckxheWVyVW5kbygpIHtcbiAgICAgICAgaWYgKCF1bmRvQnVmZmVySW52YWxpZFJlZ2lvbi5pc0VtcHR5KCkpIHtcbiAgICAgICAgICAgIC8vY29uc29sZS5sb2coXCJDb3B5aW5nIFwiICsgdW5kb0J1ZmZlckludmFsaWRSZWdpb24gKyBcIiB0byB0aGUgdW5kbyBidWZmZXJcIik7XG4gICAgICAgICAgICB1bmRvQnVmZmVyLmNvcHlCaXRtYXBSZWN0KGN1ckxheWVyLCB1bmRvQnVmZmVySW52YWxpZFJlZ2lvbi5sZWZ0LCB1bmRvQnVmZmVySW52YWxpZFJlZ2lvbi50b3AsIHVuZG9CdWZmZXJJbnZhbGlkUmVnaW9uKTtcbiAgICAgICAgICAgIHVuZG9CdWZmZXJJbnZhbGlkUmVnaW9uLm1ha2VFbXB0eSgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2FsbCB3aGVuIHRoZSB1bmRvIGJ1ZmZlciBoYXMgYmVjb21lIGNvbXBsZXRlbHkgd29ydGhsZXNzIChlLmcuIGFmdGVyIHRoZSBhY3RpdmUgbGF5ZXIgaW5kZXggY2hhbmdlcywgdGhlIHVuZG9cbiAgICAgKiBidWZmZXIgd29uJ3QgY29udGFpbiBhbnkgZGF0YSBmcm9tIHRoZSBuZXcgbGF5ZXIgdG8gYmVnaW4gd2l0aCkuXG4gICAgICovXG4gICAgZnVuY3Rpb24gaW52YWxpZGF0ZUxheWVyVW5kbygpIHtcbiAgICAgICAgdW5kb0J1ZmZlckludmFsaWRSZWdpb24gPSB0aGF0LmdldEJvdW5kcygpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoZSByZXN1bHQgb2Ygc29tZSBvZiBvdXIgb3BlcmF0aW9ucyBhcmVuJ3QgbmVlZGVkIHVudGlsIGxhdGVyLCBzbyB3ZSBjYW4gZGVmZXIgdGhlbSB1bnRpbCB0aGUgdXNlciBpcyBpZGxlLlxuICAgICAqXG4gICAgICogWW91IG1heSBjYWxsIHRoaXMgcm91dGluZSBhdCBhbnkgdGltZSAob3IgbmV2ZXIsIGlmIHlvdSBsaWtlKSBhcyBhIGhpbnQgdGhhdCB0aGUgdXNlciBpcyBpZGxlIGFuZCB3ZSBzaG91bGRcbiAgICAgKiB0cnkgdG8gcGVyZm9ybSBwZW5kaW5nIG9wZXJhdGlvbnMgYmVmb3JlIHdlIHdpbGwgbmVlZCB0byBibG9jayBvbiB0aGVpciByZXN1bHRzLlxuICAgICAqL1xuICAgIHRoaXMucGVyZm9ybUlkbGVUYXNrcyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBwcmVwYXJlRm9yTGF5ZXJVbmRvKCk7XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIGFkZFVuZG8odW5kbykge1xuICAgICAgICBoYXNVbnNhdmVkQ2hhbmdlcyA9IHRydWU7XG4gICAgICAgIFxuICAgICAgICBpZiAodW5kb0xpc3QubGVuZ3RoID09IDAgfHwgIXVuZG9MaXN0W3VuZG9MaXN0Lmxlbmd0aCAtIDFdLm1lcmdlKHVuZG8pKSB7XG4gICAgICAgICAgICBpZiAodW5kb0xpc3QubGVuZ3RoID49IE1BWF9VTkRPKSB7XG4gICAgICAgICAgICAgICAgdW5kb0xpc3QudW5zaGlmdCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdW5kb0xpc3QucHVzaCh1bmRvKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIFR3byBtZXJnZWQgY2hhbmdlcyBjYW4gbWVhbiBubyBjaGFuZ2UgYXQgYWxsXG4gICAgICAgICAgICAvLyBkb24ndCBsZWF2ZSBhIHVzZWxlc3MgdW5kbyBpbiB0aGUgbGlzdFxuICAgICAgICAgICAgaWYgKHVuZG9MaXN0W3VuZG9MaXN0Lmxlbmd0aCAtIDFdLm5vQ2hhbmdlKCkpIHtcbiAgICAgICAgICAgICAgICB1bmRvTGlzdC5wb3AoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAocmVkb0xpc3QubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgcmVkb0xpc3QgPSBbXTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuY2xlYXJIaXN0b3J5ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHVuZG9MaXN0ID0gW107XG4gICAgICAgIHJlZG9MaXN0ID0gW107XG4gICAgfTtcbiAgICBcbiAgICB0aGlzLmNvbG9yUGlja2VyID0gZnVuY3Rpb24oeCwgeSkge1xuICAgICAgICAvLyBub3QgcmVhbGx5IG5lY2Vzc2FyeSBhbmQgY291bGQgcG90ZW50aWFsbHkgdGhlIHJlcGFpbnRcbiAgICAgICAgLy8gb2YgdGhlIGNhbnZhcyB0byBtaXNzIHRoYXQgYXJlYVxuICAgICAgICAvLyB0aGlzLmZ1c2lvbkxheWVycygpO1xuXG4gICAgICAgIHJldHVybiBmdXNpb24uZ2V0UGl4ZWwofn54LCB+fnkpICYgMHhGRkZGRkY7XG4gICAgfVxuXG4gICAgdGhpcy5zZXRTZWxlY3Rpb24gPSBmdW5jdGlvbihyZWN0KSB7XG4gICAgICAgIGN1clNlbGVjdGlvbi5zZXQocmVjdCk7XG4gICAgICAgIGN1clNlbGVjdGlvbi5jbGlwKHRoaXMuZ2V0Qm91bmRzKCkpO1xuICAgIH07XG5cbiAgICB0aGlzLmVtcHR5U2VsZWN0aW9uID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGN1clNlbGVjdGlvbi5tYWtlRW1wdHkoKTtcbiAgICB9XG5cbiAgICB0aGlzLmZsb29kRmlsbCA9IGZ1bmN0aW9uKHgsIHkpIHtcbiAgICAgICAgcHJlcGFyZUZvckxheWVyVW5kbygpO1xuICAgICAgICB1bmRvQXJlYSA9IHRoaXMuZ2V0Qm91bmRzKCk7XG5cbiAgICAgICAgY3VyTGF5ZXIuZmxvb2RGaWxsKH5+eCwgfn55LCBjdXJDb2xvciB8IDB4ZmYwMDAwMDApO1xuXG4gICAgICAgIGFkZFVuZG8obmV3IENQVW5kb1BhaW50KCkpO1xuICAgICAgICBpbnZhbGlkYXRlRnVzaW9uKCk7XG4gICAgfTtcblxuICAgIHRoaXMuZ3JhZGllbnRGaWxsID0gZnVuY3Rpb24oZnJvbVgsIGZyb21ZLCB0b1gsIHRvWSwgZ3JhZGllbnRQb2ludHMpIHtcbiAgICAgICAgdmFyXG4gICAgICAgICAgICByID0gdGhpcy5nZXRTZWxlY3Rpb25BdXRvU2VsZWN0KCk7XG5cbiAgICAgICAgcHJlcGFyZUZvckxheWVyVW5kbygpO1xuICAgICAgICB1bmRvQXJlYSA9IHI7XG5cbiAgICAgICAgY3VyTGF5ZXIuZ3JhZGllbnQociwgZnJvbVgsIGZyb21ZLCB0b1gsIHRvWSwgZ3JhZGllbnRQb2ludHMpO1xuXG4gICAgICAgIGlmIChsb2NrQWxwaGEpIHtcbiAgICAgICAgICAgIHJlc3RvcmVBbHBoYShyKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGFkZFVuZG8obmV3IENQVW5kb1BhaW50KCkpO1xuICAgICAgICBpbnZhbGlkYXRlRnVzaW9uKCk7XG4gICAgfTtcblxuICAgIHRoaXMuZmlsbCA9IGZ1bmN0aW9uKGNvbG9yKSB7XG4gICAgICAgIHZhclxuICAgICAgICAgICAgciA9IHRoaXMuZ2V0U2VsZWN0aW9uQXV0b1NlbGVjdCgpO1xuXG4gICAgICAgIHByZXBhcmVGb3JMYXllclVuZG8oKTtcbiAgICAgICAgdW5kb0FyZWEgPSByO1xuXG4gICAgICAgIGN1ckxheWVyLmNsZWFyUmVjdChyLCBjb2xvcik7XG5cbiAgICAgICAgYWRkVW5kbyhuZXcgQ1BVbmRvUGFpbnQoKSk7XG4gICAgICAgIGludmFsaWRhdGVGdXNpb24oKTtcbiAgICB9O1xuXG4gICAgdGhpcy5jbGVhciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB0aGlzLmZpbGwoMHhmZmZmZmYpO1xuICAgIH07XG5cbiAgICB0aGlzLmhGbGlwID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhclxuICAgICAgICAgICAgciA9IHRoaXMuZ2V0U2VsZWN0aW9uQXV0b1NlbGVjdCgpO1xuXG4gICAgICAgIHByZXBhcmVGb3JMYXllclVuZG8oKTtcbiAgICAgICAgdW5kb0FyZWEgPSByO1xuXG4gICAgICAgIGN1ckxheWVyLmNvcHlSZWdpb25IRmxpcChyLCB1bmRvQnVmZmVyKTtcblxuICAgICAgICBhZGRVbmRvKG5ldyBDUFVuZG9QYWludCgpKTtcbiAgICAgICAgaW52YWxpZGF0ZUZ1c2lvbigpO1xuICAgIH07XG5cbiAgICB0aGlzLnZGbGlwID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhclxuICAgICAgICAgICAgciA9IHRoaXMuZ2V0U2VsZWN0aW9uQXV0b1NlbGVjdCgpO1xuXG4gICAgICAgIHByZXBhcmVGb3JMYXllclVuZG8oKTtcbiAgICAgICAgdW5kb0FyZWEgPSByO1xuXG4gICAgICAgIGN1ckxheWVyLmNvcHlSZWdpb25WRmxpcChyLCB1bmRvQnVmZmVyKTtcblxuICAgICAgICBhZGRVbmRvKG5ldyBDUFVuZG9QYWludCgpKTtcbiAgICAgICAgaW52YWxpZGF0ZUZ1c2lvbigpO1xuICAgIH07XG5cbiAgICB0aGlzLm1vbm9jaHJvbWF0aWNOb2lzZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXJcbiAgICAgICAgICAgIHIgPSB0aGlzLmdldFNlbGVjdGlvbkF1dG9TZWxlY3QoKTtcblxuICAgICAgICBwcmVwYXJlRm9yTGF5ZXJVbmRvKCk7XG4gICAgICAgIHVuZG9BcmVhID0gcjtcblxuICAgICAgICBjdXJMYXllci5maWxsV2l0aE5vaXNlKHIpO1xuXG4gICAgICAgIGFkZFVuZG8obmV3IENQVW5kb1BhaW50KCkpO1xuICAgICAgICBpbnZhbGlkYXRlRnVzaW9uKCk7XG4gICAgfTtcblxuICAgIHRoaXMuY29sb3JOb2lzZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXJcbiAgICAgICAgICAgIHIgPSB0aGlzLmdldFNlbGVjdGlvbkF1dG9TZWxlY3QoKTtcblxuICAgICAgICBwcmVwYXJlRm9yTGF5ZXJVbmRvKCk7XG4gICAgICAgIHVuZG9BcmVhID0gcjtcblxuICAgICAgICBjdXJMYXllci5maWxsV2l0aENvbG9yTm9pc2Uocik7XG5cbiAgICAgICAgYWRkVW5kbyhuZXcgQ1BVbmRvUGFpbnQoKSk7XG4gICAgICAgIGludmFsaWRhdGVGdXNpb24oKTtcbiAgICB9O1xuICAgIFxuICAgIHRoaXMuaW52ZXJ0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhclxuICAgICAgICAgICAgciA9IHRoaXMuZ2V0U2VsZWN0aW9uQXV0b1NlbGVjdCgpO1xuXG4gICAgICAgIHByZXBhcmVGb3JMYXllclVuZG8oKTtcbiAgICAgICAgdW5kb0FyZWEgPSByO1xuXG4gICAgICAgIGN1ckxheWVyLmludmVydChyKTtcblxuICAgICAgICBhZGRVbmRvKG5ldyBDUFVuZG9QYWludCgpKTtcbiAgICAgICAgaW52YWxpZGF0ZUZ1c2lvbigpO1xuICAgIH07XG4gICAgXG4gICAgdGhpcy5ib3hCbHVyID0gZnVuY3Rpb24ocmFkaXVzWCwgcmFkaXVzWSwgaXRlcmF0aW9ucykge1xuICAgICAgICB2YXJcbiAgICAgICAgICAgIHIgPSB0aGlzLmdldFNlbGVjdGlvbkF1dG9TZWxlY3QoKTtcblxuICAgICAgICBwcmVwYXJlRm9yTGF5ZXJVbmRvKCk7XG4gICAgICAgIHVuZG9BcmVhID0gcjtcblxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGl0ZXJhdGlvbnM7IGkrKykge1xuICAgICAgICAgICAgY3VyTGF5ZXIuYm94Qmx1cihyLCByYWRpdXNYLCByYWRpdXNZKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGFkZFVuZG8obmV3IENQVW5kb1BhaW50KCkpO1xuICAgICAgICBpbnZhbGlkYXRlRnVzaW9uKCk7XG4gICAgfTtcbiAgICBcbiAgICB0aGlzLnJlY3RhbmdsZVNlbGVjdGlvbiA9IGZ1bmN0aW9uKHIpIHtcbiAgICAgICAgdmFyXG4gICAgICAgICAgICBuZXdTZWxlY3Rpb24gPSByLmNsb25lKCk7XG4gICAgICAgIFxuICAgICAgICBuZXdTZWxlY3Rpb24uY2xpcCh0aGlzLmdldEJvdW5kcygpKTtcblxuICAgICAgICBhZGRVbmRvKG5ldyBDUFVuZG9SZWN0YW5nbGVTZWxlY3Rpb24odGhpcy5nZXRTZWxlY3Rpb24oKSwgbmV3U2VsZWN0aW9uKSk7XG5cbiAgICAgICAgdGhpcy5zZXRTZWxlY3Rpb24obmV3U2VsZWN0aW9uKTtcbiAgICB9O1xuICAgIFxuICAgIC8vIHRlbXAgYXdmdWwgaGFja1xuICAgIHZhclxuICAgICAgICBtb3ZlSW5pdFNlbGVjdCA9IG51bGwsIC8vIENQUmVjdFxuICAgICAgICBtb3ZlUHJldlgsIG1vdmVQcmV2WSwgbW92ZVByZXZYMiwgbW92ZVByZXZZMixcbiAgICAgICAgbW92ZU1vZGVDb3B5LCBwcmV2TW9kZUNvcHk7XG4gICAgXG4gICAgdGhpcy5iZWdpblByZXZpZXdNb2RlID0gZnVuY3Rpb24oY29weSkge1xuICAgICAgICAvLyAhISEhIGF3ZnVsIGF3ZnVsIGhhY2sgISEhIHdpbGwgYnJlYWsgYXMgc29vbiBhcyBDUE11bHRpVW5kbyBpcyB1c2VkIGZvciBvdGhlciB0aGluZ3NcbiAgICAgICAgLy8gRklYTUU6IEFTQVAhXG4gICAgICAgIGlmICghY29weSAmJiB1bmRvTGlzdC5sZW5ndGggPiAwICYmIHJlZG9MaXN0Lmxlbmd0aCA9PSAwICYmIHVuZG9MaXN0W3VuZG9MaXN0Lmxlbmd0aCAtIDFdIGluc3RhbmNlb2YgQ1BNdWx0aVVuZG9cbiAgICAgICAgICAgICAgICAmJiB1bmRvTGlzdFt1bmRvTGlzdC5sZW5ndGggLSAxXS51bmRvZXNbMF0gaW5zdGFuY2VvZiBDUFVuZG9QYWludFxuICAgICAgICAgICAgICAgICYmIHVuZG9MaXN0W3VuZG9MaXN0Lmxlbmd0aCAtIDFdLnVuZG9lc1swXS5sYXllciA9PSB0aGlzLmdldEFjdGl2ZUxheWVySW5kZXgoKSkge1xuICAgICAgICAgICAgdGhpcy51bmRvKCk7XG4gICAgICAgICAgICBjb3B5ID0gcHJldk1vZGVDb3B5O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbW92ZVByZXZYID0gMDtcbiAgICAgICAgICAgIG1vdmVQcmV2WSA9IDA7XG5cbiAgICAgICAgICAgIHByZXBhcmVGb3JMYXllclVuZG8oKTtcbiAgICAgICAgICAgIHVuZG9BcmVhLm1ha2VFbXB0eSgpO1xuXG4gICAgICAgICAgICBvcGFjaXR5QnVmZmVyLmNsZWFyQWxsKCk7XG4gICAgICAgICAgICBvcGFjaXR5QXJlYS5tYWtlRW1wdHkoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIG1vdmVJbml0U2VsZWN0ID0gbnVsbDtcbiAgICAgICAgbW92ZU1vZGVDb3B5ID0gY29weTtcbiAgICB9XG5cbiAgICB0aGlzLmVuZFByZXZpZXdNb2RlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBcbiAgICAgICAgICAgIHVuZG8gPSBuZXcgQ1BVbmRvUGFpbnQoKTtcbiAgICAgICAgXG4gICAgICAgIGlmIChtb3ZlSW5pdFNlbGVjdCAhPSBudWxsKSB7XG4gICAgICAgICAgICB1bmRvID0gbmV3IENQTXVsdGlVbmRvKFt1bmRvLCBuZXcgQ1BVbmRvUmVjdGFuZ2xlU2VsZWN0aW9uKG1vdmVJbml0U2VsZWN0LCB0aGlzLmdldFNlbGVjdGlvbigpKV0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gISEhISEhXG4gICAgICAgICAgICAvLyBGSVhNRTogdGhpcyBpcyByZXF1aXJlZCBqdXN0IHRvIG1ha2UgdGhlIGF3ZnVsIG1vdmUgaGFjayB3b3JrXG4gICAgICAgICAgICB1bmRvID0gbmV3IENQTXVsdGlVbmRvKFt1bmRvXSk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGFkZFVuZG8odW5kbyk7XG5cbiAgICAgICAgbW92ZUluaXRTZWxlY3QgPSBudWxsO1xuICAgICAgICBtb3ZlUHJldlggPSBtb3ZlUHJldlgyO1xuICAgICAgICBtb3ZlUHJldlkgPSBtb3ZlUHJldlkyO1xuICAgICAgICBwcmV2TW9kZUNvcHkgPSBtb3ZlTW9kZUNvcHk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIE1vdmUgdGhlIHNlbGVjdGVkIGxheWVyIGRhdGEgYnkgdGhlIGdpdmVuIG9mZnNldC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvZmZzZXRYIGludFxuICAgICAqIEBwYXJhbSBvZmZzZXRZIGludFxuICAgICAqL1xuICAgIHRoaXMubW92ZSA9IGZ1bmN0aW9uKG9mZnNldFgsIG9mZnNldFkpIHtcbiAgICAgICAgdmFyXG4gICAgICAgICAgICBzcmNSZWN0O1xuXG4gICAgICAgIC8vIEFkZCByb3VuZGluZyB0byBlbnN1cmUgd2UgaGF2ZW4ndCBiZWVuIGdpdmVuIGZsb2F0IGNvb3JkaW5hdGVzXG4gICAgICAgIG9mZnNldFggPSAobW92ZVByZXZYICsgb2Zmc2V0WCkgfCAwO1xuICAgICAgICBvZmZzZXRZID0gKG1vdmVQcmV2WSArIG9mZnNldFkpIHwgMDtcblxuICAgICAgICBpZiAobW92ZUluaXRTZWxlY3QgPT0gbnVsbCkge1xuICAgICAgICAgICAgc3JjUmVjdCA9IHRoaXMuZ2V0U2VsZWN0aW9uQXV0b1NlbGVjdCgpO1xuICAgICAgICAgICAgaWYgKCF0aGlzLmdldFNlbGVjdGlvbigpLmlzRW1wdHkoKSkge1xuICAgICAgICAgICAgICAgIG1vdmVJbml0U2VsZWN0ID0gdGhpcy5nZXRTZWxlY3Rpb24oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHNyY1JlY3QgPSBtb3ZlSW5pdFNlbGVjdC5jbG9uZSgpO1xuICAgICAgICB9XG4gICAgICAgIGN1ckxheWVyLmNvcHlEYXRhRnJvbSh1bmRvQnVmZmVyKTtcblxuICAgICAgICBpZiAoIW1vdmVNb2RlQ29weSkge1xuICAgICAgICAgICAgY3VyTGF5ZXIuY2xlYXJSZWN0KHNyY1JlY3QsIDApO1xuICAgICAgICB9XG5cbiAgICAgICAgY3VyTGF5ZXIucGFzdGVBbHBoYVJlY3QodW5kb0J1ZmZlciwgc3JjUmVjdCwgc3JjUmVjdC5sZWZ0ICsgb2Zmc2V0WCwgc3JjUmVjdC50b3AgKyBvZmZzZXRZKTtcblxuICAgICAgICB1bmRvQXJlYS5tYWtlRW1wdHkoKTtcbiAgICAgICAgaWYgKCFtb3ZlTW9kZUNvcHkpIHtcbiAgICAgICAgICAgIHVuZG9BcmVhLnVuaW9uKHNyY1JlY3QpO1xuICAgICAgICB9XG4gICAgICAgIHNyY1JlY3QudHJhbnNsYXRlKG9mZnNldFgsIG9mZnNldFkpO1xuICAgICAgICB1bmRvQXJlYS51bmlvbihzcmNSZWN0KTtcblxuICAgICAgICBpbnZhbGlkYXRlRnVzaW9uKCk7IC8vIFRPRE8gbWFrZSBtb3JlIHByZWNpc2VcblxuICAgICAgICBpZiAobW92ZUluaXRTZWxlY3QgIT0gbnVsbCkge1xuICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgc2VsID0gbW92ZUluaXRTZWxlY3QuY2xvbmUoKTtcbiAgICAgICAgICAgIHNlbC50cmFuc2xhdGUob2Zmc2V0WCwgb2Zmc2V0WSk7XG4gICAgICAgICAgICB0aGlzLnNldFNlbGVjdGlvbihzZWwpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gdGhpcyBpcyBhIHJlYWxseSBiYWQgaWRlYSA6RFxuICAgICAgICBtb3ZlUHJldlgyID0gb2Zmc2V0WDtcbiAgICAgICAgbW92ZVByZXZZMiA9IG9mZnNldFk7XG4gICAgfTtcbiAgICBcbiAgICAvLyBDb3B5L1Bhc3RlIGZ1bmN0aW9uc1xuICAgIFxuICAgIHRoaXMuY3V0U2VsZWN0aW9uID0gZnVuY3Rpb24oY3JlYXRlVW5kbykge1xuICAgICAgICB2YXJcbiAgICAgICAgICAgIHNlbGVjdGlvbiA9IHRoaXMuZ2V0U2VsZWN0aW9uKCk7XG4gICAgICAgIFxuICAgICAgICBpZiAoc2VsZWN0aW9uLmlzRW1wdHkoKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgY2xpcGJvYXJkID0gbmV3IENQQ2xpcChjdXJMYXllci5jbG9uZVJlY3Qoc2VsZWN0aW9uKSwgc2VsZWN0aW9uLmxlZnQsIHNlbGVjdGlvbi50b3ApO1xuXG4gICAgICAgIGlmIChjcmVhdGVVbmRvKSB7XG4gICAgICAgICAgICBhZGRVbmRvKG5ldyBDUFVuZG9DdXQoY2xpcGJvYXJkLmJtcCwgdGhpcy5nZXRBY3RpdmVMYXllckluZGV4KCksIHNlbGVjdGlvbikpO1xuICAgICAgICB9XG5cbiAgICAgICAgY3VyTGF5ZXIuY2xlYXJSZWN0KHNlbGVjdGlvbiwgRU1QVFlfTEFZRVJfQ09MT1IpO1xuICAgICAgICBpbnZhbGlkYXRlRnVzaW9uUmVjdChzZWxlY3Rpb24pO1xuICAgIH07XG5cbiAgICB0aGlzLmNvcHlTZWxlY3Rpb24gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyXG4gICAgICAgICAgICBzZWxlY3Rpb24gPSB0aGF0LmdldFNlbGVjdGlvbigpO1xuICAgICAgICBcbiAgICAgICAgaWYgKHNlbGVjdGlvbi5pc0VtcHR5KCkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNsaXBib2FyZCA9IG5ldyBDUENsaXAoY3VyTGF5ZXIuY2xvbmVSZWN0KHNlbGVjdGlvbiksIHNlbGVjdGlvbi5sZWZ0LCBzZWxlY3Rpb24udG9wKTtcbiAgICB9O1xuXG4gICAgdGhpcy5jb3B5U2VsZWN0aW9uTWVyZ2VkID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBcbiAgICAgICAgICAgIHNlbGVjdGlvbiA9IHRoYXQuZ2V0U2VsZWN0aW9uKCk7XG4gICAgICAgIFxuICAgICAgICBpZiAoc2VsZWN0aW9uLmlzRW1wdHkoKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gbWFrZSBzdXJlIHRoZSBmdXNpb25lZCBwaWN0dXJlIGlzIHVwIHRvIGRhdGVcbiAgICAgICAgdGhpcy5mdXNpb25MYXllcnMoKTtcbiAgICAgICAgY2xpcGJvYXJkID0gbmV3IENQQ2xpcChmdXNpb24uY2xvbmVSZWN0KHNlbGVjdGlvbiksIHNlbGVjdGlvbi5sZWZ0LCBzZWxlY3Rpb24udG9wKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBAcGFyYW0gY3JlYXRlVW5kbyBib29sZWFuXG4gICAgICogQHBhcmFtIGNsaXAgQ1BDbGlwXG4gICAgICovXG4gICAgZnVuY3Rpb24gcGFzdGVDbGlwKGNyZWF0ZVVuZG8sIGNsaXApIHtcbiAgICAgICAgdmFyXG4gICAgICAgICAgICBhY3RpdmVMYXllckluZGV4ID0gdGhhdC5nZXRBY3RpdmVMYXllckluZGV4KCk7XG4gICAgICAgIFxuICAgICAgICBpZiAoY3JlYXRlVW5kbykge1xuICAgICAgICAgICAgYWRkVW5kbyhuZXcgQ1BVbmRvUGFzdGUoY2xpcCwgYWN0aXZlTGF5ZXJJbmRleCwgdGhhdC5nZXRTZWxlY3Rpb24oKSkpO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyXG4gICAgICAgICAgICBuZXdMYXllciA9IG5ldyBDUExheWVyKHRoYXQud2lkdGgsIHRoYXQuaGVpZ2h0LCB0aGF0LmdldERlZmF1bHRMYXllck5hbWUoKSksXG4gICAgICAgICAgICBzb3VyY2VSZWN0ID0gY2xpcC5ibXAuZ2V0Qm91bmRzKCksXG4gICAgICAgICAgICB4LCB5O1xuICAgICAgICBcbiAgICAgICAgbGF5ZXJzLnNwbGljZShhY3RpdmVMYXllckluZGV4ICsgMSwgMCwgbmV3TGF5ZXIpO1xuICAgICAgICB0aGF0LnNldEFjdGl2ZUxheWVySW5kZXgoYWN0aXZlTGF5ZXJJbmRleCArIDEpO1xuXG4gICAgICAgIGlmIChzb3VyY2VSZWN0LmlzSW5zaWRlKHRoYXQuZ2V0Qm91bmRzKCkpKSB7XG4gICAgICAgICAgICB4ID0gY2xpcC54O1xuICAgICAgICAgICAgeSA9IGNsaXAueTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHggPSAoKHRoYXQud2lkdGggLSBjbGlwLmJtcC53aWR0aCkgLyAyKSB8IDA7XG4gICAgICAgICAgICB5ID0gKCh0aGF0LmhlaWdodCAtIGNsaXAuYm1wLmhlaWdodCkgLyAyKSB8IDA7XG4gICAgICAgIH1cblxuICAgICAgICBjdXJMYXllci5jb3B5Qml0bWFwUmVjdChjbGlwLmJtcCwgeCwgeSwgc291cmNlUmVjdCk7XG4gICAgICAgIHRoYXQuZW1wdHlTZWxlY3Rpb24oKTtcblxuICAgICAgICBpbnZhbGlkYXRlRnVzaW9uKCk7XG4gICAgICAgIGNhbGxMaXN0ZW5lcnNMYXllckNoYW5nZSgpO1xuICAgIH1cbiAgICBcbiAgICB0aGlzLnBhc3RlQ2xpcGJvYXJkID0gZnVuY3Rpb24oY3JlYXRlVW5kbykge1xuICAgICAgICBpZiAoY2xpcGJvYXJkICE9IG51bGwpIHtcbiAgICAgICAgICAgIHBhc3RlQ2xpcChjcmVhdGVVbmRvLCBjbGlwYm9hcmQpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBcbiAgICB0aGlzLnNldFNhbXBsZUFsbExheWVycyA9IGZ1bmN0aW9uKGIpIHtcbiAgICAgICAgc2FtcGxlQWxsTGF5ZXJzID0gYjtcbiAgICB9O1xuXG4gICAgdGhpcy5zZXRMb2NrQWxwaGEgPSBmdW5jdGlvbihiKSB7XG4gICAgICAgIGxvY2tBbHBoYSA9IGI7XG4gICAgfTtcblxuICAgIHRoaXMuc2V0Rm9yZWdyb3VuZENvbG9yID0gZnVuY3Rpb24oY29sb3IpIHtcbiAgICAgICAgY3VyQ29sb3IgPSBjb2xvcjtcbiAgICB9O1xuICAgIFxuICAgIHRoaXMuc2V0QnJ1c2ggPSBmdW5jdGlvbihicnVzaCkge1xuICAgICAgICBjdXJCcnVzaCA9IGJydXNoO1xuICAgIH07XG4gICAgXG4gICAgdGhpcy5zZXRCcnVzaFRleHR1cmUgPSBmdW5jdGlvbih0ZXh0dXJlKSB7XG4gICAgICAgIGJydXNoTWFuYWdlci5zZXRUZXh0dXJlKHRleHR1cmUpO1xuICAgIH1cbiAgICBcbiAgICAvLyAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuICAgIC8vIFBhaW50IGVuZ2luZVxuICAgIC8vIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cbiAgICB0aGlzLmJlZ2luU3Ryb2tlID0gZnVuY3Rpb24oeCwgeSwgcHJlc3N1cmUpIHtcbiAgICAgICAgaWYgKGN1ckJydXNoID09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHBhaW50aW5nTW9kZXNbY3VyQnJ1c2gucGFpbnRNb2RlXS5iZWdpblN0cm9rZSh4LCB5LCBwcmVzc3VyZSk7XG4gICAgfTtcblxuICAgIHRoaXMuY29udGludWVTdHJva2UgPSBmdW5jdGlvbih4LCB5LCBwcmVzc3VyZSkge1xuICAgICAgICBpZiAoY3VyQnJ1c2ggPT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgcGFpbnRpbmdNb2Rlc1tjdXJCcnVzaC5wYWludE1vZGVdLmNvbnRpbnVlU3Ryb2tlKHgsIHksIHByZXNzdXJlKTtcbiAgICB9O1xuXG4gICAgdGhpcy5lbmRTdHJva2UgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKGN1ckJydXNoID09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHBhaW50aW5nTW9kZXNbY3VyQnJ1c2gucGFpbnRNb2RlXS5lbmRTdHJva2UoKTtcbiAgICB9O1xuICAgIFxuICAgIHRoaXMuaGFzQWxwaGEgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIGZ1c2lvbi5oYXNBbHBoYSgpO1xuICAgIH07XG4gICAgXG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBhcnR3b3JrIGFzIGEgc2luZ2xlIGZsYXQgUE5HIGltYWdlLlxuICAgICAqIFxuICAgICAqIFJvdGF0aW9uIGlzIFswLi4zXSBhbmQgc2VsZWN0cyBhIG11bHRpcGxlIG9mIDkwIGRlZ3JlZXMgb2YgY2xvY2t3aXNlIHJvdGF0aW9uIHRvIGJlIGFwcGxpZWQgdG8gdGhlIGRyYXdpbmcgYmVmb3JlXG4gICAgICogc2F2aW5nLlxuICAgICAqIFxuICAgICAqIEByZXR1cm4gQSBiaW5hcnkgc3RyaW5nIG9mIHRoZSBQTkcgZmlsZSBkYXRhLlxuICAgICAqL1xuICAgIHRoaXMuZ2V0RmxhdFBORyA9IGZ1bmN0aW9uKHJvdGF0aW9uKSB7XG4gICAgICAgIHRoaXMuZnVzaW9uTGF5ZXJzKCk7XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gZnVzaW9uLmdldEFzUE5HKHJvdGF0aW9uKTtcbiAgICB9O1xuICAgIFxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdHJ1ZSBpZiB0aGlzIGFydHdvcmsgY2FuIGJlIGV4YWN0bHkgcmVwcmVzZW50ZWQgYXMgYSBzaW1wbGUgdHJhbnNwYXJlbnQgUE5HIChpLmUuIGRvZXNuJ3QgaGF2ZSBtdWx0aXBsZSBcbiAgICAgKiBsYXllcnMsIGFuZCBiYXNlIGxheWVyJ3Mgb3BhY2l0eSBpcyBzZXQgdG8gMTAwJSkuXG4gICAgICovXG4gICAgdGhpcy5pc1NpbXBsZURyYXdpbmcgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0TGF5ZXJDb3VudCgpID09IDEgJiYgdGhpcy5nZXRMYXllcigwKS5nZXRBbHBoYSgpID09IDEwMDtcbiAgICB9O1xuICAgIFxuICAgIC8vIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgICAvLyBVbmRvIGNsYXNzZXNcblxuICAgIC8qKlxuICAgICAqIFNhdmUgdGhlIGRpZmZlcmVuY2UgYmV0d2VlbiB0aGUgY3VycmVudCBsYXllciBhbmQgdGhlIHVuZG9CdWZmZXIgKHdpdGhpbiB0aGUgdW5kb0FyZWEpIGZvciB1bmRvLCBhbmQgY2xlYXJcbiAgICAgKiB0aGUgdW5kb0FyZWEuXG4gICAgICpcbiAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBDUFVuZG9QYWludCgpIHtcbiAgICAgICAgdmFyXG4gICAgICAgICAgICByZWN0ID0gdW5kb0FyZWEuY2xvbmUoKSxcbiAgICAgICAgICAgIGRhdGEgPSB1bmRvQnVmZmVyLmNvcHlSZWN0WE9SKGN1ckxheWVyLCByZWN0KTtcbiAgICAgICAgXG4gICAgICAgIHRoaXMubGF5ZXIgPSB0aGF0LmdldEFjdGl2ZUxheWVySW5kZXgoKTtcblxuICAgICAgICB1bmRvQXJlYS5tYWtlRW1wdHkoKTtcblxuICAgICAgICB0aGlzLnVuZG8gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHRoYXQuZ2V0TGF5ZXIodGhpcy5sYXllcikuc2V0UmVjdFhPUihkYXRhLCByZWN0KTtcbiAgICAgICAgICAgIGludmFsaWRhdGVGdXNpb25SZWN0KHJlY3QpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMucmVkbyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdGhhdC5nZXRMYXllcih0aGlzLmxheWVyKS5zZXRSZWN0WE9SKGRhdGEsIHJlY3QpO1xuICAgICAgICAgICAgaW52YWxpZGF0ZUZ1c2lvblJlY3QocmVjdCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhhdC5nZXRNZW1vcnlVc2VkID0gZnVuY3Rpb24odW5kb25lLCBwYXJhbSkge1xuICAgICAgICAgICAgcmV0dXJuIHVuZG9CdWZmZXIuZ2V0TWVtb3J5U2l6ZSgpO1xuICAgICAgICB9O1xuICAgIH1cbiAgICBcbiAgICBDUFVuZG9QYWludC5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKENQVW5kby5wcm90b3R5cGUpO1xuICAgIENQVW5kb1BhaW50LnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IENQVW5kb1BhaW50O1xuICAgIFxuICAgIGZ1bmN0aW9uIENQVW5kb0xheWVyVmlzaWJsZShfbGF5ZXJJbmRleCwgX29sZFZpcywgX25ld1Zpcykge1xuICAgICAgICB0aGlzLmxheWVySW5kZXggPSBfbGF5ZXJJbmRleDtcbiAgICAgICAgdGhpcy5vbGRWaXMgPSBfb2xkVmlzO1xuICAgICAgICB0aGlzLm5ld1ZpcyA9IF9uZXdWaXM7XG4gICAgfVxuICAgIFxuICAgIENQVW5kb0xheWVyVmlzaWJsZS5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKENQVW5kby5wcm90b3R5cGUpO1xuICAgIENQVW5kb0xheWVyVmlzaWJsZS5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBDUFVuZG9MYXllclZpc2libGU7XG4gICAgXG4gICAgQ1BVbmRvTGF5ZXJWaXNpYmxlLnByb3RvdHlwZS5yZWRvID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHRoYXQuZ2V0TGF5ZXIodGhpcy5sYXllckluZGV4KS52aXNpYmxlID0gdGhpcy5uZXdWaXM7XG4gICAgICAgIFxuICAgICAgICBpbnZhbGlkYXRlRnVzaW9uKCk7XG4gICAgICAgIGNhbGxMaXN0ZW5lcnNMYXllckNoYW5nZSh0aGlzLmxheWVySW5kZXgpO1xuICAgIH07XG5cbiAgICBDUFVuZG9MYXllclZpc2libGUucHJvdG90eXBlLnVuZG8gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdGhhdC5nZXRMYXllcih0aGlzLmxheWVySW5kZXgpLnZpc2libGUgPSB0aGlzLm9sZFZpcztcbiAgICAgICAgXG4gICAgICAgIGludmFsaWRhdGVGdXNpb24oKTtcbiAgICAgICAgY2FsbExpc3RlbmVyc0xheWVyQ2hhbmdlKHRoaXMubGF5ZXJJbmRleCk7XG4gICAgfTtcblxuICAgIENQVW5kb0xheWVyVmlzaWJsZS5wcm90b3R5cGUubWVyZ2UgPSBmdW5jdGlvbih1KSB7XG4gICAgICAgIGlmICh1IGluc3RhbmNlb2YgQ1BVbmRvTGF5ZXJWaXNpYmxlICYmIHRoaXMubGF5ZXJJbmRleCA9PSB1LmxheWVySW5kZXgpIHtcbiAgICAgICAgICAgIHRoaXMubmV3VmlzID0gdS5uZXdWaXM7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfTtcblxuICAgIENQVW5kb0xheWVyVmlzaWJsZS5wcm90b3R5cGUubm9DaGFuZ2UgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub2xkVmlzID09IHRoaXMubmV3VmlzO1xuICAgIH07XG4gICAgXG4gICAgZnVuY3Rpb24gQ1BVbmRvQWRkTGF5ZXIobGF5ZXJJbmRleCkge1xuICAgICAgICB0aGlzLnVuZG8gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGxheWVycy5zcGxpY2UobGF5ZXJJbmRleCArIDEsIDEpO1xuICAgICAgICAgICAgdGhhdC5zZXRBY3RpdmVMYXllckluZGV4KGxheWVySW5kZXgpO1xuICAgICAgICAgICAgaW52YWxpZGF0ZUZ1c2lvbigpO1xuICAgICAgICAgICAgY2FsbExpc3RlbmVyc0xheWVyQ2hhbmdlKCk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnJlZG8gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgIG5ld0xheWVyID0gbmV3IENQTGF5ZXIodGhhdC53aWR0aCwgdGhhdC5oZWlnaHQsIHRoYXQuZ2V0RGVmYXVsdExheWVyTmFtZSgpKTtcbiAgICAgICAgICAgIG5ld0xheWVyLmNsZWFyQWxsKEVNUFRZX0xBWUVSX0NPTE9SKTtcbiAgICAgICAgICAgIGxheWVycy5zcGxpY2UobGF5ZXJJbmRleCArIDEsIDAsIG5ld0xheWVyKTtcbiAgICAgICAgICAgIHRoYXQuc2V0QWN0aXZlTGF5ZXJJbmRleChsYXllckluZGV4ICsgMSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGludmFsaWRhdGVGdXNpb24oKTtcbiAgICAgICAgICAgIGNhbGxMaXN0ZW5lcnNMYXllckNoYW5nZSgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIENQVW5kb0FkZExheWVyLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoQ1BVbmRvLnByb3RvdHlwZSk7XG4gICAgQ1BVbmRvQWRkTGF5ZXIucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gQ1BVbmRvQWRkTGF5ZXI7XG5cbiAgICBmdW5jdGlvbiBDUFVuZG9EdXBsaWNhdGVMYXllcihsYXllckluZGV4KSB7XG4gICAgICAgIHRoaXMudW5kbyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgbGF5ZXJzLnNwbGljZShsYXllckluZGV4ICsgMSwgMSk7XG4gICAgICAgICAgICB0aGF0LnNldEFjdGl2ZUxheWVySW5kZXgobGF5ZXJJbmRleCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGludmFsaWRhdGVGdXNpb24oKTtcbiAgICAgICAgICAgIGNhbGxMaXN0ZW5lcnNMYXllckNoYW5nZSgpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMucmVkbyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgY29weVN1ZmZpeCA9IFwiIENvcHlcIixcblxuICAgICAgICAgICAgICAgIHNvdXJjZUxheWVyID0gbGF5ZXJzW2xheWVySW5kZXhdLFxuICAgICAgICAgICAgICAgIG5ld0xheWVyID0gbmV3IENQTGF5ZXIodGhhdC53aWR0aCwgdGhhdC5oZWlnaHQpLFxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIG5ld0xheWVyTmFtZSA9IHNvdXJjZUxheWVyLm5hbWU7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmICghbmV3TGF5ZXJOYW1lLmVuZHNXaXRoKGNvcHlTdWZmaXgpKSB7XG4gICAgICAgICAgICAgICAgbmV3TGF5ZXJOYW1lICs9IGNvcHlTdWZmaXg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIG5ld0xheWVyLmNvcHlGcm9tKHNvdXJjZUxheWVyKTtcbiAgICAgICAgICAgIG5ld0xheWVyLm5hbWUgPSBuZXdMYXllck5hbWU7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGxheWVycy5zcGxpY2UobGF5ZXJJbmRleCArIDEsIDAsIG5ld0xheWVyKTtcblxuICAgICAgICAgICAgdGhhdC5zZXRBY3RpdmVMYXllckluZGV4KGxheWVySW5kZXggKyAxKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaW52YWxpZGF0ZUZ1c2lvbigpO1xuICAgICAgICAgICAgY2FsbExpc3RlbmVyc0xheWVyQ2hhbmdlKCk7XG4gICAgICAgIH07XG4gICAgfVxuICAgIFxuICAgIENQVW5kb0R1cGxpY2F0ZUxheWVyLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoQ1BVbmRvLnByb3RvdHlwZSk7XG4gICAgQ1BVbmRvRHVwbGljYXRlTGF5ZXIucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gQ1BVbmRvRHVwbGljYXRlTGF5ZXI7XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0gbGF5ZXJJbmRleCBpbnRcbiAgICAgKiBAcGFyYW0gbGF5ZXIgQ1BMYXllclxuICAgICAqL1xuICAgIGZ1bmN0aW9uIENQVW5kb1JlbW92ZUxheWVyKGxheWVySW5kZXgsIGxheWVyKSB7XG4gICAgICAgIHRoaXMudW5kbyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgbGF5ZXJzLnNwbGljZShsYXllckluZGV4LCAwLCBsYXllcik7XG4gICAgICAgICAgICB0aGF0LnNldEFjdGl2ZUxheWVySW5kZXgobGF5ZXJJbmRleCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGludmFsaWRhdGVGdXNpb24oKTtcbiAgICAgICAgICAgIGNhbGxMaXN0ZW5lcnNMYXllckNoYW5nZSgpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMucmVkbyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgbGF5ZXJzLnNwbGljZShsYXllckluZGV4LCAxKTtcbiAgICAgICAgICAgIHRoYXQuc2V0QWN0aXZlTGF5ZXJJbmRleChsYXllckluZGV4IDwgbGF5ZXJzLmxlbmd0aCA/IGxheWVySW5kZXggOiBsYXllckluZGV4IC0gMSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGludmFsaWRhdGVGdXNpb24oKTtcbiAgICAgICAgICAgIGNhbGxMaXN0ZW5lcnNMYXllckNoYW5nZSgpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMuZ2V0TWVtb3J5VXNlZCA9IGZ1bmN0aW9uKHVuZG9uZSkge1xuICAgICAgICAgICAgcmV0dXJuIHVuZG9uZSA/IDAgOiBsYXllci53aWR0aCAqIGxheWVyLmhlaWdodCAqIENQQ29sb3JCbXAuQllURVNfUEVSX1BJWEVMO1xuICAgICAgICB9O1xuICAgIH1cbiAgICBcbiAgICBDUFVuZG9SZW1vdmVMYXllci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKENQVW5kby5wcm90b3R5cGUpO1xuICAgIENQVW5kb1JlbW92ZUxheWVyLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IENQVW5kb1JlbW92ZUxheWVyO1xuICAgIFxuICAgIGZ1bmN0aW9uIENQVW5kb01lcmdlRG93bkxheWVyKGxheWVySW5kZXgpIHtcbiAgICAgICAgdmFyXG4gICAgICAgICAgICBsYXllckJvdHRvbSA9IGxheWVyQm90dG9tID0gbmV3IENQTGF5ZXIodGhhdC53aWR0aCwgdGhhdC5oZWlnaHQpLCBcbiAgICAgICAgICAgIGxheWVyVG9wO1xuXG4gICAgICAgIGxheWVyQm90dG9tLmNvcHlGcm9tKGxheWVyc1tsYXllckluZGV4IC0gMV0pO1xuICAgICAgICBsYXllclRvcCA9IGxheWVyc1tsYXllckluZGV4XTtcblxuICAgICAgICB0aGlzLnVuZG8gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGxheWVyc1tsYXllckluZGV4IC0gMV0uY29weUZyb20obGF5ZXJCb3R0b20pO1xuICAgICAgICAgICAgbGF5ZXJzLnNwbGljZShsYXllckluZGV4LCAwLCBsYXllclRvcCk7XG4gICAgICAgICAgICB0aGF0LnNldEFjdGl2ZUxheWVySW5kZXgobGF5ZXJJbmRleCk7XG5cbiAgICAgICAgICAgIGxheWVyQm90dG9tID0gbGF5ZXJUb3AgPSBudWxsO1xuXG4gICAgICAgICAgICBpbnZhbGlkYXRlRnVzaW9uKCk7XG4gICAgICAgICAgICBjYWxsTGlzdGVuZXJzTGF5ZXJDaGFuZ2UoKTtcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLnJlZG8gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGxheWVyQm90dG9tID0gbmV3IENQTGF5ZXIodGhhdC53aWR0aCwgdGhhdC5oZWlnaHQpO1xuICAgICAgICAgICAgbGF5ZXJCb3R0b20uY29weUZyb20obGF5ZXJzW2xheWVySW5kZXggLSAxXSk7XG4gICAgICAgICAgICBsYXllclRvcCA9IGxheWVyc1tsYXllckluZGV4XTtcblxuICAgICAgICAgICAgdGhhdC5zZXRBY3RpdmVMYXllckluZGV4KGxheWVySW5kZXgpO1xuICAgICAgICAgICAgdGhhdC5tZXJnZURvd24oZmFsc2UpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMuZ2V0TWVtb3J5VXNlZCA9IGZ1bmN0aW9uKHVuZG9uZSwgcGFyYW0pIHtcbiAgICAgICAgICAgIHJldHVybiB1bmRvbmUgPyAwIDogdGhhdC53aWR0aCAqIHRoYXQuaGVpZ2h0ICogQ1BDb2xvckJtcC5CWVRFU19QRVJfUElYRUwgKiAyO1xuICAgICAgICB9O1xuICAgIH1cbiAgICBcbiAgICBDUFVuZG9NZXJnZURvd25MYXllci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKENQVW5kby5wcm90b3R5cGUpO1xuICAgIENQVW5kb01lcmdlRG93bkxheWVyLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IENQVW5kb01lcmdlRG93bkxheWVyO1xuXG4gICAgZnVuY3Rpb24gQ1BVbmRvTWVyZ2VBbGxMYXllcnMoKSB7XG4gICAgICAgIHZhciBcbiAgICAgICAgICAgIG9sZEFjdGl2ZUxheWVySW5kZXggPSB0aGF0LmdldEFjdGl2ZUxheWVySW5kZXgoKSxcbiAgICAgICAgICAgIG9sZExheWVycyA9IGxheWVycy5zbGljZSgwKTsgLy8gQ2xvbmUgb2xkIGxheWVycyBhcnJheVxuXG4gICAgICAgIHRoaXMudW5kbyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgbGF5ZXJzID0gb2xkTGF5ZXJzLnNsaWNlKDApO1xuICAgICAgICAgICAgdGhhdC5zZXRBY3RpdmVMYXllckluZGV4KG9sZEFjdGl2ZUxheWVySW5kZXgpO1xuXG4gICAgICAgICAgICBpbnZhbGlkYXRlRnVzaW9uKCk7XG4gICAgICAgICAgICBjYWxsTGlzdGVuZXJzTGF5ZXJDaGFuZ2UoKTtcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLnJlZG8gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHRoYXQubWVyZ2VBbGxMYXllcnMoZmFsc2UpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMuZ2V0TWVtb3J5VXNlZCA9IGZ1bmN0aW9uKHVuZG9uZSwgcGFyYW0pIHtcbiAgICAgICAgICAgIHJldHVybiB1bmRvbmUgPyAwIDogb2xkTGF5ZXJzLmxlbmd0aCAqIHdpZHRoICogaGVpZ2h0ICogQ1BDb2xvckJtcC5CWVRFU19QRVJfUElYRUw7XG4gICAgICAgIH07XG4gICAgfVxuICAgIFxuICAgIENQVW5kb01lcmdlQWxsTGF5ZXJzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoQ1BVbmRvLnByb3RvdHlwZSk7XG4gICAgQ1BVbmRvTWVyZ2VBbGxMYXllcnMucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gQ1BVbmRvTWVyZ2VBbGxMYXllcnM7XG4gICAgXG4gICAgZnVuY3Rpb24gQ1BVbmRvTW92ZUxheWVyKGZyb20sIHRvKSB7XG4gICAgICAgIHRoaXMudW5kbyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaWYgKHRvIDw9IGZyb20pIHtcbiAgICAgICAgICAgICAgICBtb3ZlTGF5ZXJSZWFsKHRvLCBmcm9tICsgMSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIG1vdmVMYXllclJlYWwodG8gLSAxLCBmcm9tKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLnJlZG8gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIG1vdmVMYXllclJlYWwoZnJvbSwgdG8pO1xuICAgICAgICB9O1xuICAgIH1cbiAgICBcbiAgICBDUFVuZG9Nb3ZlTGF5ZXIucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShDUFVuZG8ucHJvdG90eXBlKTtcbiAgICBDUFVuZG9Nb3ZlTGF5ZXIucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gQ1BVbmRvTW92ZUxheWVyO1xuXG4gICAgZnVuY3Rpb24gQ1BVbmRvTGF5ZXJBbHBoYShsYXllckluZGV4LCBhbHBoYSkge1xuICAgICAgICB0aGlzLmZyb20gPSB0aGF0LmdldExheWVyKGxheWVySW5kZXgpLmdldEFscGhhKCk7XG4gICAgICAgIHRoaXMudG8gPSBhbHBoYTtcbiAgICAgICAgdGhpcy5sYXllckluZGV4ID0gbGF5ZXJJbmRleDtcbiAgICB9XG4gICAgXG4gICAgQ1BVbmRvTGF5ZXJBbHBoYS5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKENQVW5kby5wcm90b3R5cGUpO1xuICAgIENQVW5kb0xheWVyQWxwaGEucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gQ1BVbmRvTGF5ZXJBbHBoYTtcblxuICAgIENQVW5kb0xheWVyQWxwaGEucHJvdG90eXBlLnVuZG8gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdGhhdC5nZXRMYXllcih0aGlzLmxheWVySW5kZXgpLnNldEFscGhhKHRoaXMuZnJvbSk7XG4gICAgICAgIFxuICAgICAgICBpbnZhbGlkYXRlRnVzaW9uKCk7XG4gICAgICAgIGNhbGxMaXN0ZW5lcnNMYXllckNoYW5nZSh0aGlzLmxheWVySW5kZXgpO1xuICAgIH07XG5cbiAgICBDUFVuZG9MYXllckFscGhhLnByb3RvdHlwZS5yZWRvID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHRoYXQuZ2V0TGF5ZXIodGhpcy5sYXllckluZGV4KS5zZXRBbHBoYSh0aGlzLnRvKTtcbiAgICAgICAgXG4gICAgICAgIGludmFsaWRhdGVGdXNpb24oKTtcbiAgICAgICAgY2FsbExpc3RlbmVyc0xheWVyQ2hhbmdlKHRoaXMubGF5ZXJJbmRleCk7XG4gICAgfVxuXG4gICAgQ1BVbmRvTGF5ZXJBbHBoYS5wcm90b3R5cGUubWVyZ2UgPSBmdW5jdGlvbih1KSB7XG4gICAgICAgIGlmICh1IGluc3RhbmNlb2YgQ1BVbmRvTGF5ZXJBbHBoYSAmJiB0aGlzLmxheWVySW5kZXggPT0gdS5sYXllckluZGV4KSB7XG4gICAgICAgICAgICB0aGlzLnRvID0gdS50bztcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9O1xuXG4gICAgQ1BVbmRvTGF5ZXJBbHBoYS5wcm90b3R5cGUubm9DaGFuZ2UgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZnJvbSA9PSB0aGlzLnRvO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIENQVW5kb0xheWVyTW9kZShsYXllckluZGV4LCB0bykge1xuICAgICAgICB0aGlzLmxheWVySW5kZXggPSBsYXllckluZGV4O1xuICAgICAgICB0aGlzLmZyb20gPSB0aGF0LmdldExheWVyKGxheWVySW5kZXgpLmdldEJsZW5kTW9kZSgpO1xuICAgICAgICB0aGlzLnRvID0gdG87XG4gICAgfVxuICAgIFxuICAgIENQVW5kb0xheWVyTW9kZS5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKENQVW5kby5wcm90b3R5cGUpO1xuICAgIENQVW5kb0xheWVyTW9kZS5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBDUFVuZG9MYXllck1vZGU7XG5cbiAgICBDUFVuZG9MYXllck1vZGUucHJvdG90eXBlLnVuZG8gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdGhhdC5nZXRMYXllcih0aGlzLmxheWVySW5kZXgpLnNldEJsZW5kTW9kZSh0aGlzLmZyb20pO1xuICAgICAgICBcbiAgICAgICAgaW52YWxpZGF0ZUZ1c2lvbigpO1xuICAgICAgICBjYWxsTGlzdGVuZXJzTGF5ZXJDaGFuZ2UoKTtcbiAgICB9O1xuXG4gICAgQ1BVbmRvTGF5ZXJNb2RlLnByb3RvdHlwZS5yZWRvID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHRoYXQuZ2V0TGF5ZXIodGhpcy5sYXllckluZGV4KS5zZXRCbGVuZE1vZGUodGhpcy50byk7XG4gICAgICAgIFxuICAgICAgICBpbnZhbGlkYXRlRnVzaW9uKCk7XG4gICAgICAgIGNhbGxMaXN0ZW5lcnNMYXllckNoYW5nZSgpO1xuICAgIH07XG5cbiAgICBDUFVuZG9MYXllck1vZGUucHJvdG90eXBlLm1lcmdlID0gZnVuY3Rpb24odSkge1xuICAgICAgICBpZiAodSBpbnN0YW5jZW9mIENQVW5kb0xheWVyTW9kZSAmJiB0aGlzLmxheWVySW5kZXggPT0gdS5sYXllckluZGV4KSB7XG4gICAgICAgICAgICB0aGlzLnRvID0gdS50bztcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9O1xuXG4gICAgQ1BVbmRvTGF5ZXJNb2RlLnByb3RvdHlwZS5ub0NoYW5nZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5mcm9tID09IHRoaXMudG87XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gQ1BVbmRvTGF5ZXJSZW5hbWUobGF5ZXJJbmRleCwgdG8pIHtcbiAgICAgICAgdGhpcy5sYXllckluZGV4ID0gbGF5ZXJJbmRleDtcbiAgICAgICAgdGhpcy50byA9IHRvO1xuICAgICAgICB0aGlzLmZyb20gPSB0aGF0LmdldExheWVyKGxheWVySW5kZXgpLm5hbWU7XG4gICAgfVxuICAgIFxuICAgIENQVW5kb0xheWVyUmVuYW1lLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoQ1BVbmRvLnByb3RvdHlwZSk7XG4gICAgQ1BVbmRvTGF5ZXJSZW5hbWUucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gQ1BVbmRvTGF5ZXJSZW5hbWU7XG4gICAgXG4gICAgQ1BVbmRvTGF5ZXJSZW5hbWUucHJvdG90eXBlLnVuZG8gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdGhhdC5nZXRMYXllcih0aGlzLmxheWVySW5kZXgpLm5hbWUgPSB0aGlzLmZyb207XG4gICAgICAgIGNhbGxMaXN0ZW5lcnNMYXllckNoYW5nZSh0aGlzLmxheWVySW5kZXgpO1xuICAgIH07XG5cbiAgICBDUFVuZG9MYXllclJlbmFtZS5wcm90b3R5cGUucmVkbyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB0aGF0LmdldExheWVyKHRoaXMubGF5ZXJJbmRleCkubmFtZSA9IHRoaXMudG87XG4gICAgICAgIGNhbGxMaXN0ZW5lcnNMYXllckNoYW5nZSh0aGlzLmxheWVySW5kZXgpO1xuICAgIH07XG5cbiAgICBDUFVuZG9MYXllclJlbmFtZS5wcm90b3R5cGUubWVyZ2UgPSBmdW5jdGlvbih1KSB7XG4gICAgICAgIGlmICh1IGluc3RhbmNlb2YgQ1BVbmRvTGF5ZXJSZW5hbWUgJiYgdGhpcy5sYXllckluZGV4ID09IHUubGF5ZXJJbmRleCkge1xuICAgICAgICAgICAgdGhpcy50byA9IHUudG87XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfTtcblxuICAgIENQVW5kb0xheWVyUmVuYW1lLnByb3RvdHlwZS5ub0NoYW5nZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5mcm9tID09IHRoaXMudG87XG4gICAgfTtcbiAgICBcbiAgICAvKipcbiAgICAgKiBAcGFyYW0gZnJvbSBDUFJlY3RcbiAgICAgKiBAcGFyYW0gdG8gQ1BSZWN0XG4gICAgICovXG4gICAgZnVuY3Rpb24gQ1BVbmRvUmVjdGFuZ2xlU2VsZWN0aW9uKGZyb20sIHRvKSB7XG4gICAgICAgIGZyb20gPSBmcm9tLmNsb25lKCk7XG4gICAgICAgIHRvID0gdG8uY2xvbmUoKTtcblxuICAgICAgICB0aGlzLnVuZG8gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHRoYXQuc2V0U2VsZWN0aW9uKGZyb20pO1xuICAgICAgICAgICAgY2FsbExpc3RlbmVyc1VwZGF0ZVJlZ2lvbih0aGF0LmdldEJvdW5kcygpKTtcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLnJlZG8gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHRoYXQuc2V0U2VsZWN0aW9uKHRvKTtcbiAgICAgICAgICAgIGNhbGxMaXN0ZW5lcnNVcGRhdGVSZWdpb24odGhhdC5nZXRCb3VuZHMoKSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5ub0NoYW5nZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIGZyb20uZXF1YWxzKHRvKTtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgXG4gICAgQ1BVbmRvUmVjdGFuZ2xlU2VsZWN0aW9uLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoQ1BVbmRvLnByb3RvdHlwZSk7XG4gICAgQ1BVbmRvUmVjdGFuZ2xlU2VsZWN0aW9uLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IENQVW5kb1JlY3RhbmdsZVNlbGVjdGlvbjtcbiAgICBcbiAgICAvKipcbiAgICAgKiBVc2VkIHRvIGVuY2Fwc3VsYXRlIG11bHRpcGxlIHVuZG8gb3BlcmF0aW9uIGFzIG9uZVxuICAgICAqIFxuICAgICAqIEBwYXJhbSB1bmRvZXMgQ1BVbmRvW10gTGlzdCBvZiB1bmRvIG9wZXJhdGlvbnMgdG8gZW5jYXBzdWxhdGVcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBDUE11bHRpVW5kbyh1bmRvZXMpIHtcbiAgICAgICAgdGhpcy51bmRvZXMgPSB1bmRvZXM7XG4gICAgfVxuXG4gICAgQ1BNdWx0aVVuZG8ucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShDUFVuZG8ucHJvdG90eXBlKTtcbiAgICBDUE11bHRpVW5kby5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBDUE11bHRpVW5kbztcblxuICAgIENQTXVsdGlVbmRvLnByb3RvdHlwZS51bmRvID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSB0aGlzLnVuZG9lcy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgICAgICAgdGhpcy51bmRvZXNbaV0udW5kbygpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIENQTXVsdGlVbmRvLnByb3RvdHlwZS5yZWRvID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy51bmRvZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHRoaXMudW5kb2VzW2ldLnJlZG8oKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBDUE11bHRpVW5kby5wcm90b3R5cGUubm9DaGFuZ2UgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB1bmRvZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmICghdW5kb2VzW2ldLm5vQ2hhbmdlKCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH07XG5cbiAgICBDUE11bHRpVW5kby5wcm90b3R5cGUuZ2V0TWVtb3J5VXNlZCA9IGZ1bmN0aW9uKHVuZG9uZSwgcGFyYW0pIHtcbiAgICAgICAgdmFyXG4gICAgICAgICAgICB0b3RhbCA9IDA7XG4gICAgICAgIFxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHVuZG9lcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdG90YWwgKz0gdW5kb2VzW2ldLmdldE1lbW9yeVVzZWQodW5kb25lLCBwYXJhbSk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHJldHVybiB0b3RhbDtcbiAgICB9O1xuICAgIFxuICAgIC8qKlxuICAgICAqIFN0b3JlIGRhdGEgdG8gdW5kbyBhIGN1dCBvcGVyYXRpb25cbiAgICAgKiBcbiAgICAgKiBAcGFyYW0gYm1wIENQQ29sb3JCbXAgVGhlIHJlY3RhbmdsZSBvZiBpbWFnZSBkYXRhIHRoYXQgd2FzIGN1dFxuICAgICAqIEBwYXJhbSBsYXllckluZGV4IGludCBJbmRleCBvZiB0aGUgbGF5ZXIgdGhlIGN1dCBjYW1lIGZyb21cbiAgICAgKiBAcGFyYW0gc2VsZWN0aW9uIENQUmVjdCBUaGUgY3V0IHJlY3RhbmdsZSBjby1vcmRpbmF0ZXNcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBDUFVuZG9DdXQoYm1wLCBsYXllckluZGV4LCBzZWxlY3Rpb24pIHtcbiAgICAgICAgc2VsZWN0aW9uID0gc2VsZWN0aW9uLmNsb25lKCk7XG5cbiAgICAgICAgdGhpcy51bmRvID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB0aGF0LnNldEFjdGl2ZUxheWVySW5kZXgobGF5ZXJJbmRleCk7XG4gICAgICAgICAgICBjdXJMYXllci5jb3B5Qml0bWFwUmVjdChibXAsIHNlbGVjdGlvbi5sZWZ0LCBzZWxlY3Rpb24udG9wLCBibXAuZ2V0Qm91bmRzKCkpO1xuICAgICAgICAgICAgdGhhdC5zZXRTZWxlY3Rpb24oc2VsZWN0aW9uKTtcbiAgICAgICAgICAgIGludmFsaWRhdGVGdXNpb25SZWN0KHNlbGVjdGlvbik7XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5yZWRvID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB0aGF0LnNldEFjdGl2ZUxheWVySW5kZXgobGF5ZXJJbmRleCk7XG4gICAgICAgICAgICBjdXJMYXllci5jbGVhclJlY3Qoc2VsZWN0aW9uLCBFTVBUWV9MQVlFUl9DT0xPUik7XG4gICAgICAgICAgICB0aGF0LmVtcHR5U2VsZWN0aW9uKCk7XG4gICAgICAgICAgICBpbnZhbGlkYXRlRnVzaW9uUmVjdChzZWxlY3Rpb24pO1xuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMuZ2V0TWVtb3J5VXNlZCA9IGZ1bmN0aW9uKHVuZG9uZSwgcGFyYW0pIHtcbiAgICAgICAgICAgIHJldHVybiBibXAgPT0gcGFyYW0gPyAwIDogYm1wLndpZHRoICogYm1wLmhlaWdodCAqIENQQ29sb3JCbXAuQllURVNfUEVSX1BJWEVMO1xuICAgICAgICB9O1xuICAgIH1cbiAgICBcbiAgICBDUFVuZG9DdXQucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShDUFVuZG8ucHJvdG90eXBlKTtcbiAgICBDUFVuZG9DdXQucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gQ1BVbmRvQ3V0O1xuXG4gICAgLyoqXG4gICAgICogU3RvcmUgZGF0YSB0byB1bmRvIGEgcGFzdGUgb3BlcmF0aW9uXG4gICAgICogXG4gICAgICogQHBhcmFtIGNsaXAgQ1BDbGlwXG4gICAgICogQHBhcmFtIGxheWVySW5kZXggaW50XG4gICAgICogQHBhcmFtIHNlbGVjdGlvbiBDUFJlY3RcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBDUFVuZG9QYXN0ZShjbGlwLCBsYXllckluZGV4LCBzZWxlY3Rpb24pIHtcbiAgICAgICAgc2VsZWN0aW9uID0gc2VsZWN0aW9uLmNsb25lKCk7XG5cbiAgICAgICAgdGhpcy51bmRvID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBsYXllcnMuc3BsaWNlKGxheWVySW5kZXggKyAxLCAxKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhhdC5zZXRBY3RpdmVMYXllckluZGV4KGxheWVySW5kZXgpO1xuICAgICAgICAgICAgdGhhdC5zZXRTZWxlY3Rpb24oc2VsZWN0aW9uKTtcblxuICAgICAgICAgICAgaW52YWxpZGF0ZUZ1c2lvblJlY3Qoc2VsZWN0aW9uKTtcbiAgICAgICAgICAgIGNhbGxMaXN0ZW5lcnNMYXllckNoYW5nZSgpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMucmVkbyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdGhhdC5zZXRBY3RpdmVMYXllckluZGV4KGxheWVySW5kZXgpO1xuICAgICAgICAgICAgcGFzdGVDbGlwKGZhbHNlLCBjbGlwKTtcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLmdldE1lbW9yeVVzZWQgPSBmdW5jdGlvbih1bmRvbmUsIHBhcmFtKSB7XG4gICAgICAgICAgICByZXR1cm4gY2xpcC5ibXAgPT0gcGFyYW0gPyAwIDogY2xpcC5ibXAud2lkdGggKiBjbGlwLmJtcC5oZWlnaHQgKiA0O1xuICAgICAgICB9O1xuICAgIH1cbiAgICBcbiAgICBDUFVuZG9QYXN0ZS5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKENQVW5kby5wcm90b3R5cGUpO1xuICAgIENQVW5kb1Bhc3RlLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IENQVW5kb1Bhc3RlO1xufTtcblxuQ1BBcnR3b3JrLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoRXZlbnRFbWl0dGVyLnByb3RvdHlwZSk7XG5DUEFydHdvcmsucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gQ1BBcnR3b3JrO1xuXG5DUEFydHdvcmsucHJvdG90eXBlLmdldEJvdW5kcyA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBuZXcgQ1BSZWN0KDAsIDAsIHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0KTtcbn1cblxuQ1BBcnR3b3JrLnByb3RvdHlwZS5pc1BvaW50V2l0aGluID0gZnVuY3Rpb24oeCwgeSkge1xuICAgIHJldHVybiB4ID49IDAgJiYgeSA+PSAwICYmIHggPCB0aGlzLndpZHRoICYmIHkgPCB0aGlzLmhlaWdodDtcbn07XG4iLCIvKlxuICAgIENoaWNrZW5QYWludFxuICAgIFxuICAgIENoaWNrZW5QYWludCBpcyBhIHRyYW5zbGF0aW9uIG9mIENoaWJpUGFpbnQgZnJvbSBKYXZhIHRvIEphdmFTY3JpcHRcbiAgICBieSBOaWNob2xhcyBTaGVybG9jayAvIENoaWNrZW4gU21vb3RoaWUuXG4gICAgXG4gICAgQ2hpYmlQYWludCBpcyBDb3B5cmlnaHQgKGMpIDIwMDYtMjAwOCBNYXJjIFNjaGVmZXJcblxuICAgIENoaWNrZW5QYWludCBpcyBmcmVlIHNvZnR3YXJlOiB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3IgbW9kaWZ5XG4gICAgaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBhcyBwdWJsaXNoZWQgYnlcbiAgICB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uLCBlaXRoZXIgdmVyc2lvbiAzIG9mIHRoZSBMaWNlbnNlLCBvclxuICAgIChhdCB5b3VyIG9wdGlvbikgYW55IGxhdGVyIHZlcnNpb24uXG5cbiAgICBDaGlja2VuUGFpbnQgaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCxcbiAgICBidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZlxuICAgIE1FUkNIQU5UQUJJTElUWSBvciBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS4gIFNlZSB0aGVcbiAgICBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9yZSBkZXRhaWxzLlxuXG4gICAgWW91IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2VcbiAgICBhbG9uZyB3aXRoIENoaWNrZW5QYWludC4gSWYgbm90LCBzZWUgPGh0dHA6Ly93d3cuZ251Lm9yZy9saWNlbnNlcy8+LlxuKi9cblxuaW1wb3J0IENQUmVjdCBmcm9tIFwiLi4vdXRpbC9DUFJlY3RcIjtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gQ1BCaXRtYXAod2lkdGgsIGhlaWdodCkge1xuICAgIC8vIFdpZHRoIGFuZCBoZWlnaHQgZm9yY2VkIHRvIGludGVnZXJzXG4gICAgdGhpcy53aWR0aCA9IHdpZHRoIHwgMDtcbiAgICB0aGlzLmhlaWdodCA9IGhlaWdodCB8IDA7XG59XG5cbkNQQml0bWFwLnByb3RvdHlwZS5nZXRCb3VuZHMgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gbmV3IENQUmVjdCgwLCAwLCB0aGlzLndpZHRoLCB0aGlzLmhlaWdodCk7XG59O1xuXG5DUEJpdG1hcC5wcm90b3R5cGUuaXNJbnNpZGUgPSBmdW5jdGlvbih4LCB5KSB7XG4gICAgcmV0dXJuIHggPj0gMCAmJiB5ID49IDAgJiYgeCA8IHRoaXMud2lkdGggJiYgeSA8IHRoaXMuaGVpZ2h0O1xufTsiLCIvLyBMYXllciBibGVuZGluZyBmdW5jdGlvbnNcbi8vXG4vLyBUaGUgRnVsbEFscGhhIHZlcnNpb25zIGFyZSB0aGUgb25lcyB0aGF0IHdvcmsgaW4gYWxsIGNhc2VzXG4vLyBvdGhlcnMgbmVlZCB0aGUgYm90dG9tIGxheWVyIHRvIGJlIDEwMCUgb3BhcXVlIGJ1dCBhcmUgZmFzdGVyXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBDUEJsZW5kKCkge1xufVxuXG5jb25zdFxuICAgIEJZVEVTX1BFUl9QSVhFTCA9IDQsXG4gICAgXG4gICAgUkVEX0JZVEVfT0ZGU0VUID0gMCxcbiAgICBHUkVFTl9CWVRFX09GRlNFVCA9IDEsXG4gICAgQkxVRV9CWVRFX09GRlNFVCA9IDIsXG4gICAgQUxQSEFfQllURV9PRkZTRVQgPSAzO1xuXG5DUEJsZW5kLnByb3RvdHlwZS5mdXNpb25XaXRoTXVsdGlwbHkgPSBmdW5jdGlvbih0aGF0LCBmdXNpb24sIHJlY3QpIHtcbiAgICB2YXIgXG4gICAgICAgIHlTdHJpZGUgPSAodGhhdC53aWR0aCAtIHJlY3QuZ2V0V2lkdGgoKSkgKiBCWVRFU19QRVJfUElYRUwsXG4gICAgICAgIHBpeEluZGV4ID0gdGhhdC5vZmZzZXRPZlBpeGVsKHJlY3QubGVmdCwgcmVjdC50b3ApO1xuXG4gICAgZm9yICh2YXIgeSA9IHJlY3QudG9wOyB5IDwgcmVjdC5ib3R0b207IHkrKywgcGl4SW5kZXggKz0geVN0cmlkZSkge1xuICAgICAgICBmb3IgKHZhciB4ID0gcmVjdC5sZWZ0OyB4IDwgcmVjdC5yaWdodDsgeCsrKSB7XG4gICAgICAgICAgICB2YXIgXG4gICAgICAgICAgICAgICAgYWxwaGEgPSAodGhhdC5kYXRhW3BpeEluZGV4ICsgQUxQSEFfQllURV9PRkZTRVRdICogdGhhdC5hbHBoYSAvIDEwMCkgfCAwO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoYWxwaGEgPiAwKSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAzOyBpKyssIHBpeEluZGV4KyspIHtcbiAgICAgICAgICAgICAgICAgICAgZnVzaW9uLmRhdGFbcGl4SW5kZXhdID0gKGZ1c2lvbi5kYXRhW3BpeEluZGV4XSAtICh0aGF0LmRhdGFbcGl4SW5kZXhdIF4gMHhGRikgKiBmdXNpb24uZGF0YVtwaXhJbmRleF0gKiBhbHBoYSAvICgyNTUgKiAyNTUpKSB8IDA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHBpeEluZGV4Kys7IC8vIERvbid0IG5lZWQgdG8gdXBkYXRlIHRoZSBhbHBoYSBiZWNhdXNlIGl0IHN0YXJ0ZWQgb3V0IGFzIDEwMCVcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcGl4SW5kZXggKz0gQllURVNfUEVSX1BJWEVMO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufTtcblxuLyogQmxlbmQgb250byBhbiBvcGFxdWUgZnVzaW9uLiBTdXBwb3J0cyAuYWxwaGEgPCAxMDAgb24gdGhpcyBsYXllciAqL1xuQ1BCbGVuZC5wcm90b3R5cGUuZnVzaW9uV2l0aE5vcm1hbCA9IGZ1bmN0aW9uKHRoYXQsIGZ1c2lvbiwgcmVjdCkge1xuICAgIHZhclxuICAgICAgICB5U3RyaWRlID0gKCh0aGF0LndpZHRoIC0gcmVjdC5nZXRXaWR0aCgpKSAqIEJZVEVTX1BFUl9QSVhFTCkgfCAwLFxuICAgICAgICBwaXhJbmRleCA9IHRoYXQub2Zmc2V0T2ZQaXhlbChyZWN0LmxlZnQsIHJlY3QudG9wKSB8IDAsXG4gICAgICAgIGggPSAocmVjdC5ib3R0b20gLSByZWN0LnRvcCkgfCAwLFxuICAgICAgICB3ID0gKHJlY3QucmlnaHQgLSByZWN0LmxlZnQpIHwgMDtcblxuICAgIGZvciAodmFyIHkgPSAwIDsgeSA8IGg7IHkrKywgcGl4SW5kZXggKz0geVN0cmlkZSkge1xuICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IHc7IHgrKykge1xuICAgICAgICAgICAgdmFyIFxuICAgICAgICAgICAgICAgIGFscGhhID0gKHRoYXQuZGF0YVtwaXhJbmRleCArIEFMUEhBX0JZVEVfT0ZGU0VUXSAqIHRoYXQuYWxwaGEgLyAxMDApIHwgMDtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKGFscGhhID4gMCkge1xuICAgICAgICAgICAgICAgIGlmIChhbHBoYSA9PSAyNTUpIHtcbiAgICAgICAgICAgICAgICAgICAgZnVzaW9uLmRhdGFbcGl4SW5kZXhdID0gdGhhdC5kYXRhW3BpeEluZGV4XTtcbiAgICAgICAgICAgICAgICAgICAgZnVzaW9uLmRhdGFbcGl4SW5kZXggKyAxXSA9IHRoYXQuZGF0YVtwaXhJbmRleCArIDFdO1xuICAgICAgICAgICAgICAgICAgICBmdXNpb24uZGF0YVtwaXhJbmRleCArIDJdID0gdGhhdC5kYXRhW3BpeEluZGV4ICsgMl07XG4gICAgICAgICAgICAgICAgICAgIGZ1c2lvbi5kYXRhW3BpeEluZGV4ICsgM10gPSAyNTU7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnZBbHBoYSA9IDI1NSAtIGFscGhhO1xuXG4gICAgICAgICAgICAgICAgICAgIGZ1c2lvbi5kYXRhW3BpeEluZGV4XSA9ICgodGhhdC5kYXRhW3BpeEluZGV4XSAqIGFscGhhICsgZnVzaW9uLmRhdGFbcGl4SW5kZXhdICogaW52QWxwaGEpIC8gMjU1KSB8IDA7XG4gICAgICAgICAgICAgICAgICAgIGZ1c2lvbi5kYXRhW3BpeEluZGV4ICsgMV0gPSAoKHRoYXQuZGF0YVtwaXhJbmRleCArIDFdICogYWxwaGEgKyBmdXNpb24uZGF0YVtwaXhJbmRleCArIDFdICogaW52QWxwaGEpIC8gMjU1KSB8IDA7XG4gICAgICAgICAgICAgICAgICAgIGZ1c2lvbi5kYXRhW3BpeEluZGV4ICsgMl0gPSAoKHRoYXQuZGF0YVtwaXhJbmRleCArIDJdICogYWxwaGEgKyBmdXNpb24uZGF0YVtwaXhJbmRleCArIDJdICogaW52QWxwaGEpIC8gMjU1KSB8IDA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBwaXhJbmRleCArPSBCWVRFU19QRVJfUElYRUw7XG4gICAgICAgIH1cbiAgICB9XG59O1xuXG4vLyBGdXNpbmcgb250byBhbiBvcGFxdWUgbGF5ZXIgd2hlbiB0aGlzIGxheWVyIGhhcyBhbHBoYSBzZXQgdG8gMTAwXG5DUEJsZW5kLnByb3RvdHlwZS5mdXNpb25XaXRoTm9ybWFsTm9BbHBoYSA9IGZ1bmN0aW9uKHRoYXQsIGZ1c2lvbiwgcmVjdCkge1xuICAgIHZhciBcbiAgICAgICAgeVN0cmlkZSA9ICgodGhhdC53aWR0aCAtIHJlY3QuZ2V0V2lkdGgoKSkgKiBCWVRFU19QRVJfUElYRUwpIHwgMCxcbiAgICAgICAgcGl4SW5kZXggPSB0aGF0Lm9mZnNldE9mUGl4ZWwocmVjdC5sZWZ0LCByZWN0LnRvcCkgfCAwLFxuICAgICAgICBoID0gKHJlY3QuYm90dG9tIC0gcmVjdC50b3ApIHwgMCxcbiAgICAgICAgdyA9IChyZWN0LnJpZ2h0IC0gcmVjdC5sZWZ0KSB8IDA7XG4gICAgXG4gICAgZm9yICh2YXIgeSA9IDAgOyB5IDwgaDsgeSsrLCBwaXhJbmRleCArPSB5U3RyaWRlKSB7XG4gICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgdzsgeCsrKSB7XG4gICAgICAgICAgICB2YXIgXG4gICAgICAgICAgICAgICAgYWxwaGEgPSB0aGF0LmRhdGFbcGl4SW5kZXggKyBBTFBIQV9CWVRFX09GRlNFVF07XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChhbHBoYSA+IDApIHtcbiAgICAgICAgICAgICAgICBpZiAoYWxwaGEgPT0gMjU1KSB7XG4gICAgICAgICAgICAgICAgICAgIGZ1c2lvbi5kYXRhW3BpeEluZGV4XSA9IHRoYXQuZGF0YVtwaXhJbmRleF07XG4gICAgICAgICAgICAgICAgICAgIGZ1c2lvbi5kYXRhW3BpeEluZGV4ICsgMV0gPSB0aGF0LmRhdGFbcGl4SW5kZXggKyAxXTtcbiAgICAgICAgICAgICAgICAgICAgZnVzaW9uLmRhdGFbcGl4SW5kZXggKyAyXSA9IHRoYXQuZGF0YVtwaXhJbmRleCArIDJdO1xuICAgICAgICAgICAgICAgICAgICBmdXNpb24uZGF0YVtwaXhJbmRleCArIDNdID0gdGhhdC5kYXRhW3BpeEluZGV4ICsgM107XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIFxuICAgICAgICAgICAgICAgICAgICAgICAgaW52QWxwaGEgPSAyNTUgLSBhbHBoYTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgZnVzaW9uLmRhdGFbcGl4SW5kZXhdID0gKHRoYXQuZGF0YVtwaXhJbmRleF0gKiBhbHBoYSArIGZ1c2lvbi5kYXRhW3BpeEluZGV4XSAqIGludkFscGhhKSAvIDI1NTtcbiAgICAgICAgICAgICAgICAgICAgZnVzaW9uLmRhdGFbcGl4SW5kZXggKyAxXSA9ICh0aGF0LmRhdGFbcGl4SW5kZXggKyAxXSAqIGFscGhhICsgZnVzaW9uLmRhdGFbcGl4SW5kZXggKyAxXSAqIGludkFscGhhKSAvIDI1NTtcbiAgICAgICAgICAgICAgICAgICAgZnVzaW9uLmRhdGFbcGl4SW5kZXggKyAyXSA9ICh0aGF0LmRhdGFbcGl4SW5kZXggKyAyXSAqIGFscGhhICsgZnVzaW9uLmRhdGFbcGl4SW5kZXggKyAyXSAqIGludkFscGhhKSAvIDI1NTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHBpeEluZGV4ICs9IEJZVEVTX1BFUl9QSVhFTDtcbiAgICAgICAgfVxuICAgIH1cbn07XG5cbkNQQmxlbmQucHJvdG90eXBlLmZ1c2lvbldpdGhBZGQgPSBmdW5jdGlvbih0aGF0LCBmdXNpb24sIHJlY3QpIHtcbiAgICB2YXIgXG4gICAgICAgIHlTdHJpZGUgPSAodGhhdC53aWR0aCAtIHJlY3QuZ2V0V2lkdGgoKSkgKiBCWVRFU19QRVJfUElYRUwsXG4gICAgICAgIHBpeEluZGV4ID0gdGhhdC5vZmZzZXRPZlBpeGVsKHJlY3QubGVmdCwgcmVjdC50b3ApO1xuXG4gICAgZm9yICh2YXIgeSA9IHJlY3QudG9wOyB5IDwgcmVjdC5ib3R0b207IHkrKywgcGl4SW5kZXggKz0geVN0cmlkZSkge1xuICAgICAgICBmb3IgKHZhciB4ID0gcmVjdC5sZWZ0OyB4IDwgcmVjdC5yaWdodDsgeCsrKSB7XG4gICAgICAgICAgICB2YXIgXG4gICAgICAgICAgICAgICAgYWxwaGEgPSAodGhhdC5kYXRhW3BpeEluZGV4ICsgQUxQSEFfQllURV9PRkZTRVRdICogdGhhdC5hbHBoYSAvIDEwMCkgfCAwO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoYWxwaGEgPiAwKSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAzOyBpKyssIHBpeEluZGV4KyspIHtcbiAgICAgICAgICAgICAgICAgICAgZnVzaW9uLmRhdGFbcGl4SW5kZXhdID0gTWF0aC5taW4oMjU1LCAoZnVzaW9uLmRhdGFbcGl4SW5kZXhdICsgYWxwaGEgKiB0aGF0LmRhdGFbcGl4SW5kZXhdIC8gMjU1KSB8IDApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBwaXhJbmRleCsrOyAvLyBEb24ndCBuZWVkIHRvIHVwZGF0ZSB0aGUgYWxwaGEgYmVjYXVzZSBpdCBzdGFydGVkIG91dCBhcyAxMDAlXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHBpeEluZGV4ICs9IEJZVEVTX1BFUl9QSVhFTDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn07XG5cbi8vIE5vcm1hbCBBbHBoYSBNb2RlXG4vLyBDID0gQSpkICsgQiooMS1kKSBhbmQgZCA9IGFhIC8gKGFhICsgYWIgLSBhYSphYilcbkNQQmxlbmQucHJvdG90eXBlLmZ1c2lvbldpdGhOb3JtYWxGdWxsQWxwaGEgPSBmdW5jdGlvbih0aGF0LCBmdXNpb24sIHJlY3QpIHtcbiAgICB2YXJcbiAgICAgICAgeVN0cmlkZSA9ICgodGhhdC53aWR0aCAtIHJlY3QuZ2V0V2lkdGgoKSkgKiBCWVRFU19QRVJfUElYRUwpIHwgMCxcbiAgICAgICAgcGl4SW5kZXggPSB0aGF0Lm9mZnNldE9mUGl4ZWwocmVjdC5sZWZ0LCByZWN0LnRvcCkgfCAwLFxuICAgICAgICBoID0gKHJlY3QuYm90dG9tIC0gcmVjdC50b3ApIHwgMCxcbiAgICAgICAgdyA9IChyZWN0LnJpZ2h0IC0gcmVjdC5sZWZ0KSB8IDA7XG5cbiAgICBmb3IgKHZhciB5ID0gMCA7IHkgPCBoOyB5KyssIHBpeEluZGV4ICs9IHlTdHJpZGUpIHtcbiAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCB3OyB4KyspIHtcbiAgICAgICAgICAgIHZhciBcbiAgICAgICAgICAgICAgICBhbHBoYTEgPSAodGhhdC5kYXRhW3BpeEluZGV4ICsgQUxQSEFfQllURV9PRkZTRVRdICogdGhhdC5hbHBoYSkgLyAxMDAsXG4gICAgICAgICAgICAgICAgYWxwaGEyID0gKGZ1c2lvbi5kYXRhW3BpeEluZGV4ICsgQUxQSEFfQllURV9PRkZTRVRdICogZnVzaW9uLmFscGhhKSAvIDEwMCxcblxuICAgICAgICAgICAgICAgIG5ld0FscGhhID0gKGFscGhhMSArIGFscGhhMiAtIGFscGhhMSAqIGFscGhhMiAvIDI1NSkgfCAwO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAobmV3QWxwaGEgPiAwKSB7XG4gICAgICAgICAgICAgICAgdmFyIFxuICAgICAgICAgICAgICAgICAgICByZWFsQWxwaGEgPSAoYWxwaGExICogMjU1IC8gbmV3QWxwaGEpIHwgMCxcbiAgICAgICAgICAgICAgICAgICAgaW52QWxwaGEgPSAyNTUgLSByZWFsQWxwaGE7XG5cbiAgICAgICAgICAgICAgICBmdXNpb24uZGF0YVtwaXhJbmRleF0gPSAodGhhdC5kYXRhW3BpeEluZGV4XSAqIHJlYWxBbHBoYSArIGZ1c2lvbi5kYXRhW3BpeEluZGV4XSAqIGludkFscGhhKSAvIDI1NTtcbiAgICAgICAgICAgICAgICBmdXNpb24uZGF0YVtwaXhJbmRleCArIDFdID0gKHRoYXQuZGF0YVtwaXhJbmRleCArIDFdICogcmVhbEFscGhhICsgZnVzaW9uLmRhdGFbcGl4SW5kZXggKyAxXSAqIGludkFscGhhKSAvIDI1NTtcbiAgICAgICAgICAgICAgICBmdXNpb24uZGF0YVtwaXhJbmRleCArIDJdID0gKHRoYXQuZGF0YVtwaXhJbmRleCArIDJdICogcmVhbEFscGhhICsgZnVzaW9uLmRhdGFbcGl4SW5kZXggKyAyXSAqIGludkFscGhhKSAvIDI1NTtcbiAgICAgICAgICAgICAgICBmdXNpb24uZGF0YVtwaXhJbmRleCArIDNdID0gbmV3QWxwaGE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHBpeEluZGV4ICs9IEJZVEVTX1BFUl9QSVhFTDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1c2lvbi5hbHBoYSA9IDEwMDtcbn07XG5cbi8vIE11bHRpcGx5IE1vZGVcbi8vIEMgPSAoQSphYSooMS1hYikgKyBCKmFiKigxLWFhKSArIEEqQiphYSphYikgLyAoYWEgKyBhYiAtIGFhKmFiKVxuXG5DUEJsZW5kLnByb3RvdHlwZS5mdXNpb25XaXRoTXVsdGlwbHlGdWxsQWxwaGEgPSBmdW5jdGlvbih0aGF0LCBmdXNpb24sIHJlY3QpIHtcbiAgICB2YXJcbiAgICAgICAgeVN0cmlkZSA9ICh0aGF0LndpZHRoIC0gcmVjdC5nZXRXaWR0aCgpKSAqIEJZVEVTX1BFUl9QSVhFTCxcbiAgICAgICAgcGl4SW5kZXggPSB0aGF0Lm9mZnNldE9mUGl4ZWwocmVjdC5sZWZ0LCByZWN0LnRvcCk7XG5cbiAgICBmb3IgKHZhciB5ID0gcmVjdC50b3A7IHkgPCByZWN0LmJvdHRvbTsgeSsrLCBwaXhJbmRleCArPSB5U3RyaWRlKSB7XG4gICAgICAgIGZvciAodmFyIHggPSByZWN0LmxlZnQ7IHggPCByZWN0LnJpZ2h0OyB4KyspIHtcbiAgICAgICAgICAgIHZhciBcbiAgICAgICAgICAgICAgICBhbHBoYTEgPSAodGhhdC5kYXRhW3BpeEluZGV4ICsgQUxQSEFfQllURV9PRkZTRVRdICogdGhhdC5hbHBoYSkgLyAxMDAsXG4gICAgICAgICAgICAgICAgYWxwaGEyID0gKGZ1c2lvbi5kYXRhW3BpeEluZGV4ICsgQUxQSEFfQllURV9PRkZTRVRdICogZnVzaW9uLmFscGhhKSAvIDEwMCxcblxuICAgICAgICAgICAgICAgIG5ld0FscGhhID0gKGFscGhhMSArIGFscGhhMiAtIGFscGhhMSAqIGFscGhhMiAvIDI1NSkgfCAwO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAobmV3QWxwaGEgPiAwKSB7XG4gICAgICAgICAgICAgICAgdmFyIFxuICAgICAgICAgICAgICAgICAgICBhbHBoYTEyID0gKGFscGhhMSAqIGFscGhhMiAvIDI1NSkgfCAwLFxuICAgICAgICAgICAgICAgICAgICBhbHBoYTFuMiA9IChhbHBoYTEgKiAoYWxwaGEyIF4gMHhGRikgLyAyNTUpIHwgMCxcbiAgICAgICAgICAgICAgICAgICAgYWxwaGFuMTIgPSAoKGFscGhhMSBeIDB4ZmYpICogYWxwaGEyIC8gMjU1KSB8IDA7XG5cbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IDM7IGkrKywgcGl4SW5kZXgrKykge1xuICAgICAgICAgICAgICAgICAgICBmdXNpb24uZGF0YVtwaXhJbmRleF0gPSAoKHRoYXQuZGF0YVtwaXhJbmRleF0gKiBhbHBoYTFuMiArIGZ1c2lvbi5kYXRhW3BpeEluZGV4XSAqIGFscGhhbjEyICsgdGhhdC5kYXRhW3BpeEluZGV4XVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICogZnVzaW9uLmRhdGFbcGl4SW5kZXhdICogYWxwaGExMiAvIDI1NSkgLyBuZXdBbHBoYSkgfCAwO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBmdXNpb24uZGF0YVtwaXhJbmRleCsrXSA9IG5ld0FscGhhO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBwaXhJbmRleCArPSBCWVRFU19QRVJfUElYRUw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgZnVzaW9uLmFscGhhID0gMTAwO1xufTtcblxuLy8gTGluZWFyIERvZGdlIChBZGQpIE1vZGVcbi8vIEMgPSAoYWEgKiBBICsgYWIgKiBCKSAvIChhYSArIGFiIC0gYWEqYWIpXG5cbkNQQmxlbmQucHJvdG90eXBlLmZ1c2lvbldpdGhBZGRGdWxsQWxwaGEgPSBmdW5jdGlvbih0aGF0LCBmdXNpb24sIHJlY3QpIHtcbiAgICB2YXJcbiAgICAgICAgeVN0cmlkZSA9ICh0aGF0LndpZHRoIC0gcmVjdC5nZXRXaWR0aCgpKSAqIEJZVEVTX1BFUl9QSVhFTCxcbiAgICAgICAgcGl4SW5kZXggPSB0aGF0Lm9mZnNldE9mUGl4ZWwocmVjdC5sZWZ0LCByZWN0LnRvcCk7XG5cbiAgICBmb3IgKHZhciB5ID0gcmVjdC50b3A7IHkgPCByZWN0LmJvdHRvbTsgeSsrLCBwaXhJbmRleCArPSB5U3RyaWRlKSB7XG4gICAgICAgIGZvciAodmFyIHggPSByZWN0LmxlZnQ7IHggPCByZWN0LnJpZ2h0OyB4KyspIHtcbiAgICAgICAgICAgIHZhciBcbiAgICAgICAgICAgICAgICBhbHBoYTEgPSAodGhhdC5kYXRhW3BpeEluZGV4ICsgQUxQSEFfQllURV9PRkZTRVRdICogdGhhdC5hbHBoYSkgLyAxMDAsXG4gICAgICAgICAgICAgICAgYWxwaGEyID0gKGZ1c2lvbi5kYXRhW3BpeEluZGV4ICsgQUxQSEFfQllURV9PRkZTRVRdICogZnVzaW9uLmFscGhhKSAvIDEwMCxcblxuICAgICAgICAgICAgICAgIG5ld0FscGhhID0gKGFscGhhMSArIGFscGhhMiAtIGFscGhhMSAqIGFscGhhMiAvIDI1NSkgfCAwO1xuXG4gICAgICAgICAgICBpZiAobmV3QWxwaGEgPiAwKSB7XG5cbiAgICAgICAgICAgICAgICAvKlxuICAgICAgICAgICAgICogLy8gdGhpcyB2ZXJzaW9uIHNlZW1zIHNsb3dlciB0aGFuIHRoZSBNYXRoLm1pbiBvbmUgaW50IHIgPSAoYWxwaGEyICogKGNvbG9yMiA+Pj4gMTYgJiAweGZmKSArXG4gICAgICAgICAgICAgKiBhbHBoYTEgKiAoY29sb3IxID4+PiAxNiAmIDB4ZmYpKSAvIG5ld0FscGhhOyByIHw9ICgofigociAmIDB4ZmZmZmZmMDApIC0gMSkgPj4gMTYpIHwgcikgJiAweGZmO1xuICAgICAgICAgICAgICogaW50IGcgPSAoYWxwaGEyICogKGNvbG9yMiA+Pj4gOCAmIDB4ZmYpICsgYWxwaGExICogKGNvbG9yMSA+Pj4gOCAmIDB4ZmYpKSAvIG5ld0FscGhhOyBnIHw9ICgofigoZyAmXG4gICAgICAgICAgICAgKiAweGZmZmZmZjAwKSAtIDEpID4+IDE2KSB8IGcpICYgMHhmZjsgaW50IGIgPSAoYWxwaGEyICogKGNvbG9yMiAmIDB4ZmYpICsgYWxwaGExICogKGNvbG9yMSAmXG4gICAgICAgICAgICAgKiAweGZmKSkgLyBuZXdBbHBoYTsgYiB8PSAoKH4oKGIgJiAweGZmZmZmZjAwKSAtIDEpID4+IDE2KSB8IGIpICYgMHhmZjtcbiAgICAgICAgICAgICAqL1xuXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAzOyBpKyssIHBpeEluZGV4KyspIHtcbiAgICAgICAgICAgICAgICAgICAgZnVzaW9uLmRhdGFbcGl4SW5kZXhdID0gTWF0aC5taW4oMjU1LCAoKGFscGhhMiAqIGZ1c2lvbi5kYXRhW3BpeEluZGV4XSArIGFscGhhMSAqIHRoYXQuZGF0YVtwaXhJbmRleF0pIC8gbmV3QWxwaGEpIHwgMCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZ1c2lvbi5kYXRhW3BpeEluZGV4KytdID0gbmV3QWxwaGE7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHBpeEluZGV4ICs9IEJZVEVTX1BFUl9QSVhFTDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBcbiAgICBmdXNpb24uYWxwaGEgPSAxMDA7XG59O1xuXG4vLyBMaW5lYXIgQnVybiAoU3ViKSBNb2RlXG4vLyBDID0gKGFhICogQSArIGFiICogQiAtIGFhKmFiICkgLyAoYWEgKyBhYiAtIGFhKmFiKVxuXG5DUEJsZW5kLnByb3RvdHlwZS5mdXNpb25XaXRoU3VidHJhY3RGdWxsQWxwaGEgPSBmdW5jdGlvbih0aGF0LCBmdXNpb24sIHJlY3QpIHtcbiAgICB2YXJcbiAgICAgICAgeVN0cmlkZSA9ICh0aGF0LndpZHRoIC0gcmVjdC5nZXRXaWR0aCgpKSAqIEJZVEVTX1BFUl9QSVhFTCxcbiAgICAgICAgcGl4SW5kZXggPSB0aGF0Lm9mZnNldE9mUGl4ZWwocmVjdC5sZWZ0LCByZWN0LnRvcCk7XG5cbiAgICBmb3IgKHZhciB5ID0gcmVjdC50b3A7IHkgPCByZWN0LmJvdHRvbTsgeSsrLCBwaXhJbmRleCArPSB5U3RyaWRlKSB7XG4gICAgICAgIGZvciAodmFyIHggPSByZWN0LmxlZnQ7IHggPCByZWN0LnJpZ2h0OyB4KyspIHtcbiAgICAgICAgICAgIHZhciBcbiAgICAgICAgICAgICAgICBhbHBoYTEgPSAoKHRoYXQuZGF0YVtwaXhJbmRleCArIEFMUEhBX0JZVEVfT0ZGU0VUXSAqIHRoYXQuYWxwaGEpIC8gMTAwKSB8IDAsXG4gICAgICAgICAgICAgICAgYWxwaGEyID0gKChmdXNpb24uZGF0YVtwaXhJbmRleCArIEFMUEhBX0JZVEVfT0ZGU0VUXSAqIGZ1c2lvbi5hbHBoYSkgLyAxMDApIHwgMCxcblxuICAgICAgICAgICAgICAgIG5ld0FscGhhID0gKGFscGhhMSArIGFscGhhMiAtIGFscGhhMSAqIGFscGhhMiAvIDI1NSkgfCAwO1xuXG4gICAgICAgICAgICBpZiAobmV3QWxwaGEgPiAwKSB7XG4gICAgICAgICAgICAgICAgdmFyIFxuICAgICAgICAgICAgICAgICAgICBhbHBoYTEyID0gYWxwaGExICogYWxwaGEyO1xuXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAzOyBpKyssIHBpeEluZGV4KyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIFxuICAgICAgICAgICAgICAgICAgICAgICAgY2hhbm5lbCA9IChhbHBoYTIgKiBmdXNpb24uZGF0YVtwaXhJbmRleF0gKyBhbHBoYTEgKiB0aGF0LmRhdGFbcGl4SW5kZXhdIC0gYWxwaGExMikgLyBuZXdBbHBoYTtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIC8vIGJpbmFyeSBtYWdpYyB0byBjbGFtcCBuZWdhdGl2ZSB2YWx1ZXMgdG8gemVybyB3aXRob3V0IHVzaW5nIGEgY29uZGl0aW9uXG4gICAgICAgICAgICAgICAgICAgIGZ1c2lvbi5kYXRhW3BpeEluZGV4XSA9IGNoYW5uZWwgJiAofmNoYW5uZWwgPj4+IDI0KTsgXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZ1c2lvbi5kYXRhW3BpeEluZGV4KytdID0gbmV3QWxwaGE7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHBpeEluZGV4ICs9IEJZVEVTX1BFUl9QSVhFTDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBcbiAgICBmdXNpb24uYWxwaGEgPSAxMDA7XG59O1xuXG4vLyBGb3Igb3BhcXVlIGZ1c2lvblxuQ1BCbGVuZC5wcm90b3R5cGUuZnVzaW9uV2l0aFN1YnRyYWN0ID0gZnVuY3Rpb24odGhhdCwgZnVzaW9uLCByZWN0KSB7XG4gICAgdmFyXG4gICAgICAgIHlTdHJpZGUgPSAoKHRoYXQud2lkdGggLSByZWN0LmdldFdpZHRoKCkpICogQllURVNfUEVSX1BJWEVMKSB8IDAsXG4gICAgICAgIHBpeEluZGV4ID0gdGhhdC5vZmZzZXRPZlBpeGVsKHJlY3QubGVmdCwgcmVjdC50b3ApIHwgMDtcblxuICAgIGZvciAodmFyIHkgPSByZWN0LnRvcDsgeSA8IHJlY3QuYm90dG9tOyB5KyssIHBpeEluZGV4ICs9IHlTdHJpZGUpIHtcbiAgICAgICAgZm9yICh2YXIgeCA9IHJlY3QubGVmdDsgeCA8IHJlY3QucmlnaHQ7IHgrKykge1xuICAgICAgICAgICAgdmFyIFxuICAgICAgICAgICAgICAgIGFscGhhMSA9ICgodGhhdC5kYXRhW3BpeEluZGV4ICsgQUxQSEFfQllURV9PRkZTRVRdICogdGhhdC5hbHBoYSkgLyAxMDApIHwgMCxcbiAgICAgICAgICAgICAgICBhbHBoYTEyID0gYWxwaGExICogMjU1O1xuXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IDM7IGkrKywgcGl4SW5kZXgrKykge1xuICAgICAgICAgICAgICAgIHZhciBcbiAgICAgICAgICAgICAgICAgICAgY2hhbm5lbCA9ICgyNTUgKiBmdXNpb24uZGF0YVtwaXhJbmRleF0gKyBhbHBoYTEgKiB0aGF0LmRhdGFbcGl4SW5kZXhdIC0gYWxwaGExMikgLyAyNTU7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gYmluYXJ5IG1hZ2ljIHRvIGNsYW1wIG5lZ2F0aXZlIHZhbHVlcyB0byB6ZXJvIHdpdGhvdXQgdXNpbmcgYSBjb25kaXRpb25cbiAgICAgICAgICAgICAgICBmdXNpb24uZGF0YVtwaXhJbmRleF0gPSBjaGFubmVsICYgKH5jaGFubmVsID4+PiAyNCk7IFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcGl4SW5kZXgrKzsgLy8gQWxwaGEgc3RheXMgdGhlIHNhbWVcbiAgICAgICAgfVxuICAgIH1cbiAgICBcbiAgICBmdXNpb24uYWxwaGEgPSAxMDA7XG59O1xuXG4vLyBTY3JlZW4gTW9kZVxuLy8gc2FtZSBhcyBNdWx0aXBseSBleGNlcHQgYWxsIGNvbG9yIGNoYW5uZWxzIGFyZSBpbnZlcnRlZCBhbmQgdGhlIHJlc3VsdCB0b29cbi8vIEMgPSAxIC0gKCgoMS1BKSphYSooMS1hYikgKyAoMS1CKSphYiooMS1hYSkgKyAoMS1BKSooMS1CKSphYSphYikgLyAoYWEgKyBhYiAtIGFhKmFiKSlcblxuQ1BCbGVuZC5wcm90b3R5cGUuZnVzaW9uV2l0aFNjcmVlbkZ1bGxBbHBoYSA9IGZ1bmN0aW9uKHRoYXQsIGZ1c2lvbiwgcmVjdCkge1xuICAgIHZhclxuICAgICAgICB5U3RyaWRlID0gKHRoYXQud2lkdGggLSByZWN0LmdldFdpZHRoKCkpICogQllURVNfUEVSX1BJWEVMLFxuICAgICAgICBwaXhJbmRleCA9IHRoYXQub2Zmc2V0T2ZQaXhlbChyZWN0LmxlZnQsIHJlY3QudG9wKTtcblxuICAgIGZvciAodmFyIHkgPSByZWN0LnRvcDsgeSA8IHJlY3QuYm90dG9tOyB5KyssIHBpeEluZGV4ICs9IHlTdHJpZGUpIHtcbiAgICAgICAgZm9yICh2YXIgeCA9IHJlY3QubGVmdDsgeCA8IHJlY3QucmlnaHQ7IHgrKykge1xuICAgICAgICAgICAgdmFyIFxuICAgICAgICAgICAgICAgIGFscGhhMSA9ICgodGhhdC5kYXRhW3BpeEluZGV4ICsgQUxQSEFfQllURV9PRkZTRVRdICogdGhhdC5hbHBoYSkgLyAxMDApIHwgMCxcbiAgICAgICAgICAgICAgICBhbHBoYTIgPSAoKGZ1c2lvbi5kYXRhW3BpeEluZGV4ICsgQUxQSEFfQllURV9PRkZTRVRdICogZnVzaW9uLmFscGhhKSAvIDEwMCkgfCAwLFxuXG4gICAgICAgICAgICAgICAgbmV3QWxwaGEgPSAoYWxwaGExICsgYWxwaGEyIC0gYWxwaGExICogYWxwaGEyIC8gMjU1KSB8IDA7XG5cbiAgICAgICAgICAgIGlmIChuZXdBbHBoYSA+IDApIHtcbiAgICAgICAgICAgICAgICB2YXIgXG4gICAgICAgICAgICAgICAgICAgIGFscGhhMTIgPSAoYWxwaGExICogYWxwaGEyIC8gMjU1KSB8IDAsXG4gICAgICAgICAgICAgICAgICAgIGFscGhhMW4yID0gKGFscGhhMSAqIChhbHBoYTIgXiAweEZGKSAvIDI1NSkgfCAwLFxuICAgICAgICAgICAgICAgICAgICBhbHBoYW4xMiA9ICgoYWxwaGExIF4gMHhmZikgKiBhbHBoYTIgLyAyNTUpIHwgMDtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IDM7IGkrKywgcGl4SW5kZXgrKykge1xuICAgICAgICAgICAgICAgICAgICBmdXNpb24uZGF0YVtwaXhJbmRleF0gPSAweEZGIF4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICh0aGF0LmRhdGFbcGl4SW5kZXhdIF4gMHhGRikgKiBhbHBoYTFuMlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgKGZ1c2lvbi5kYXRhW3BpeEluZGV4XSBeIDB4RkYpICogYWxwaGFuMTIgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKyAodGhhdC5kYXRhW3BpeEluZGV4XSBeIDB4RkYpICogKGZ1c2lvbi5kYXRhW3BpeEluZGV4XSBeIDB4RkYpICogYWxwaGExMiAvIDI1NVxuICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgLyBuZXdBbHBoYVxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBmdXNpb24uZGF0YVtwaXhJbmRleCsrXSA9IG5ld0FscGhhO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBwaXhJbmRleCArPSBCWVRFU19QRVJfUElYRUw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgZnVzaW9uLmFscGhhID0gMTAwO1xufTtcblxuLy8gRm9yIG9wYXF1ZSBmdXNpb25cbkNQQmxlbmQucHJvdG90eXBlLmZ1c2lvbldpdGhTY3JlZW4gPSBmdW5jdGlvbih0aGF0LCBmdXNpb24sIHJlY3QpIHtcbiAgICB2YXJcbiAgICAgICAgeVN0cmlkZSA9ICgodGhhdC53aWR0aCAtIHJlY3QuZ2V0V2lkdGgoKSkgKiBCWVRFU19QRVJfUElYRUwpIHwgMCxcbiAgICAgICAgcGl4SW5kZXggPSB0aGF0Lm9mZnNldE9mUGl4ZWwocmVjdC5sZWZ0LCByZWN0LnRvcCkgfCAwO1xuXG4gICAgZm9yICh2YXIgeSA9IHJlY3QudG9wOyB5IDwgcmVjdC5ib3R0b207IHkrKywgcGl4SW5kZXggKz0geVN0cmlkZSkge1xuICAgICAgICBmb3IgKHZhciB4ID0gcmVjdC5sZWZ0OyB4IDwgcmVjdC5yaWdodDsgeCsrKSB7XG4gICAgICAgICAgICB2YXIgXG4gICAgICAgICAgICAgICAgYWxwaGExID0gKCh0aGF0LmRhdGFbcGl4SW5kZXggKyBBTFBIQV9CWVRFX09GRlNFVF0gKiB0aGF0LmFscGhhKSAvIDEwMCkgfCAwLFxuICAgICAgICAgICAgICAgIGludkFscGhhMSA9IGFscGhhMSBeIDB4ZmY7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgMzsgaSsrLCBwaXhJbmRleCsrKSB7XG4gICAgICAgICAgICAgICAgZnVzaW9uLmRhdGFbcGl4SW5kZXhdID0gMHhGRiBeIChcbiAgICAgICAgICAgICAgICAgICAgKFxuICAgICAgICAgICAgICAgICAgICAgICAgKGZ1c2lvbi5kYXRhW3BpeEluZGV4XSBeIDB4RkYpICogaW52QWxwaGExXG4gICAgICAgICAgICAgICAgICAgICAgICArICh0aGF0LmRhdGFbcGl4SW5kZXhdIF4gMHhGRikgKiAoZnVzaW9uLmRhdGFbcGl4SW5kZXhdIF4gMHhGRikgKiBhbHBoYTEgLyAyNTVcbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAvIDI1NVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwaXhJbmRleCsrOyAvLyBBbHBoYSBzdGF5cyB0aGUgc2FtZVxuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIGZ1c2lvbi5hbHBoYSA9IDEwMDtcbn07XG5cbi8vIExpZ2h0ZW4gTW9kZVxuLy8gaWYgQiA+PSBBOiBDID0gQSpkICsgQiooMS1kKSBhbmQgZCA9IGFhICogKDEtYWIpIC8gKGFhICsgYWIgLSBhYSphYilcbi8vIGlmIEEgPiBCOiBDID0gQipkICsgQSooMS1kKSBhbmQgZCA9IGFiICogKDEtYWEpIC8gKGFhICsgYWIgLSBhYSphYilcblxuQ1BCbGVuZC5wcm90b3R5cGUuZnVzaW9uV2l0aExpZ2h0ZW5GdWxsQWxwaGEgPSBmdW5jdGlvbih0aGF0LCBmdXNpb24sIHJlY3QpIHtcbiAgICB2YXJcbiAgICAgICAgeVN0cmlkZSA9ICh0aGF0LndpZHRoIC0gcmVjdC5nZXRXaWR0aCgpKSAqIEJZVEVTX1BFUl9QSVhFTCxcbiAgICAgICAgcGl4SW5kZXggPSB0aGF0Lm9mZnNldE9mUGl4ZWwocmVjdC5sZWZ0LCByZWN0LnRvcCk7XG5cbiAgICBmb3IgKHZhciB5ID0gcmVjdC50b3A7IHkgPCByZWN0LmJvdHRvbTsgeSsrLCBwaXhJbmRleCArPSB5U3RyaWRlKSB7XG4gICAgICAgIGZvciAodmFyIHggPSByZWN0LmxlZnQ7IHggPCByZWN0LnJpZ2h0OyB4KyspIHtcbiAgICAgICAgICAgIHZhciBcbiAgICAgICAgICAgICAgICBhbHBoYTEgPSAoKHRoYXQuZGF0YVtwaXhJbmRleCArIEFMUEhBX0JZVEVfT0ZGU0VUXSAqIHRoYXQuYWxwaGEpIC8gMTAwKSB8IDAsXG4gICAgICAgICAgICAgICAgYWxwaGEyID0gKChmdXNpb24uZGF0YVtwaXhJbmRleCArIEFMUEhBX0JZVEVfT0ZGU0VUXSAqIGZ1c2lvbi5hbHBoYSkgLyAxMDApIHwgMCxcblxuICAgICAgICAgICAgICAgIG5ld0FscGhhID0gKGFscGhhMSArIGFscGhhMiAtIGFscGhhMSAqIGFscGhhMiAvIDI1NSkgfCAwO1xuXG4gICAgICAgICAgICBpZiAobmV3QWxwaGEgPiAwKSB7XG4gICAgICAgICAgICAgICAgdmFyIFxuICAgICAgICAgICAgICAgIC8vIFRoaXMgYWxwaGEgaXMgdXNlZCB3aGVuIGNvbG9yMSA+IGNvbG9yMlxuICAgICAgICAgICAgICAgICAgICBhbHBoYTEyID0gKGFscGhhMiAqIChhbHBoYTEgXiAweGZmKSAvIG5ld0FscGhhKSB8IDAsXG4gICAgICAgICAgICAgICAgICAgIGludkFscGhhMTIgPSBhbHBoYTEyIF4gMHhGRixcblxuICAgICAgICAgICAgICAgIC8vIFRoaXMgYWxwaGEgaXMgdXNlZCB3aGVuIGNvbG9yMiA+IGNvbG9yMVxuICAgICAgICAgICAgICAgICAgICBhbHBoYTIxID0gKGFscGhhMSAqIChhbHBoYTIgXiAweGZmKSAvIG5ld0FscGhhKSB8IDAsXG4gICAgICAgICAgICAgICAgICAgIGludkFscGhhMjEgPSBhbHBoYTIxIF4gMHhGRjtcblxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgMzsgaSsrLCBwaXhJbmRleCsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBcbiAgICAgICAgICAgICAgICAgICAgICAgIGMxID0gdGhhdC5kYXRhW3BpeEluZGV4XSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGMyID0gZnVzaW9uLmRhdGFbcGl4SW5kZXhdO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgZnVzaW9uLmRhdGFbcGl4SW5kZXhdID0gKCgoYzIgPj0gYzEpID8gKGMxICogYWxwaGEyMSArIGMyICogaW52QWxwaGEyMSkgOiAoYzIgKiBhbHBoYTEyICsgYzEgKiBpbnZBbHBoYTEyKSkgLyAyNTUpIHwgMDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZnVzaW9uLmRhdGFbcGl4SW5kZXgrK10gPSBuZXdBbHBoYTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcGl4SW5kZXggKz0gQllURVNfUEVSX1BJWEVMO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIGZ1c2lvbi5hbHBoYSA9IDEwMDtcbn1cblxuLy8gV2hlbiBmdXNpb24gaXMgb3BhcXVlXG5DUEJsZW5kLnByb3RvdHlwZS5mdXNpb25XaXRoTGlnaHRlbiA9IGZ1bmN0aW9uKHRoYXQsIGZ1c2lvbiwgcmVjdCkge1xuICAgIHZhclxuICAgICAgICB5U3RyaWRlID0gKHRoYXQud2lkdGggLSByZWN0LmdldFdpZHRoKCkpICogQllURVNfUEVSX1BJWEVMLFxuICAgICAgICBwaXhJbmRleCA9IHRoYXQub2Zmc2V0T2ZQaXhlbChyZWN0LmxlZnQsIHJlY3QudG9wKTtcblxuICAgIGZvciAodmFyIHkgPSByZWN0LnRvcDsgeSA8IHJlY3QuYm90dG9tOyB5KyssIHBpeEluZGV4ICs9IHlTdHJpZGUpIHtcbiAgICAgICAgZm9yICh2YXIgeCA9IHJlY3QubGVmdDsgeCA8IHJlY3QucmlnaHQ7IHgrKykge1xuICAgICAgICAgICAgdmFyIFxuICAgICAgICAgICAgICAgIGFscGhhMSA9ICgodGhhdC5kYXRhW3BpeEluZGV4ICsgQUxQSEFfQllURV9PRkZTRVRdICogdGhhdC5hbHBoYSkgLyAxMDApIHwgMCxcbiAgICAgICAgICAgICAgICBpbnZBbHBoYTEgPSBhbHBoYTEgXiAweGZmO1xuXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IDM7IGkrKywgcGl4SW5kZXgrKykge1xuICAgICAgICAgICAgICAgIHZhciBcbiAgICAgICAgICAgICAgICAgICAgYzEgPSB0aGF0LmRhdGFbcGl4SW5kZXhdLFxuICAgICAgICAgICAgICAgICAgICBjMiA9IGZ1c2lvbi5kYXRhW3BpeEluZGV4XTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBmdXNpb24uZGF0YVtwaXhJbmRleF0gPSBjMiA+PSBjMSA/IGMyIDogKGMyICogaW52QWxwaGExICsgYzEgKiBhbHBoYTEpIC8gMjU1O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcGl4SW5kZXgrKzsgLy8gT3BhY2l0eSB1bmNoYW5nZWQgKHN0aWxsIDI1NSlcbiAgICAgICAgfVxuICAgIH1cbn1cblxuLy8gRGFya2VuIE1vZGVcbi8vIGlmIEIgPj0gQTogQyA9IEIqZCArIEEqKDEtZCkgYW5kIGQgPSBhYiAqICgxLWFhKSAvIChhYSArIGFiIC0gYWEqYWIpXG4vLyBpZiBBID4gQjogQyA9IEEqZCArIEIqKDEtZCkgYW5kIGQgPSBhYSAqICgxLWFiKSAvIChhYSArIGFiIC0gYWEqYWIpXG5cbkNQQmxlbmQucHJvdG90eXBlLmZ1c2lvbldpdGhEYXJrZW5GdWxsQWxwaGEgPSBmdW5jdGlvbih0aGF0LCBmdXNpb24sIHJlY3QpIHtcbiAgICB2YXJcbiAgICAgICAgeVN0cmlkZSA9ICh0aGF0LndpZHRoIC0gcmVjdC5nZXRXaWR0aCgpKSAqIEJZVEVTX1BFUl9QSVhFTCxcbiAgICAgICAgcGl4SW5kZXggPSB0aGF0Lm9mZnNldE9mUGl4ZWwocmVjdC5sZWZ0LCByZWN0LnRvcCk7XG5cbiAgICBmb3IgKHZhciB5ID0gcmVjdC50b3A7IHkgPCByZWN0LmJvdHRvbTsgeSsrLCBwaXhJbmRleCArPSB5U3RyaWRlKSB7XG4gICAgICAgIGZvciAodmFyIHggPSByZWN0LmxlZnQ7IHggPCByZWN0LnJpZ2h0OyB4KyspIHtcbiAgICAgICAgICAgIHZhciBcbiAgICAgICAgICAgICAgICBhbHBoYTEgPSAoKHRoYXQuZGF0YVtwaXhJbmRleCArIEFMUEhBX0JZVEVfT0ZGU0VUXSAqIHRoYXQuYWxwaGEpIC8gMTAwKSB8IDAsXG4gICAgICAgICAgICAgICAgYWxwaGEyID0gKChmdXNpb24uZGF0YVtwaXhJbmRleCArIEFMUEhBX0JZVEVfT0ZGU0VUXSAqIGZ1c2lvbi5hbHBoYSkgLyAxMDApIHwgMCxcblxuICAgICAgICAgICAgICAgIG5ld0FscGhhID0gKGFscGhhMSArIGFscGhhMiAtIGFscGhhMSAqIGFscGhhMiAvIDI1NSkgfCAwO1xuXG4gICAgICAgICAgICBpZiAobmV3QWxwaGEgPiAwKSB7XG4gICAgICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgICAgIC8vIFRoaXMgYWxwaGEgaXMgdXNlZCB3aGVuIGNvbG9yMSA+IGNvbG9yMlxuICAgICAgICAgICAgICAgIGFscGhhMTIgPSAoYWxwaGExICogKGFscGhhMiBeIDB4ZmYpIC8gbmV3QWxwaGEpIHwgMCxcbiAgICAgICAgICAgICAgICBpbnZBbHBoYTEyID0gKGFscGhhMTIgXiAweGZmKSB8IDAsXG5cbiAgICAgICAgICAgICAgICAvLyBUaGlzIGFscGhhIGlzIHVzZWQgd2hlbiBjb2xvcjIgPiBjb2xvcjFcbiAgICAgICAgICAgICAgICAgICAgYWxwaGEyMSA9IChhbHBoYTIgKiAoYWxwaGExIF4gMHhmZikgLyBuZXdBbHBoYSkgfCAwLFxuICAgICAgICAgICAgICAgICAgICBpbnZBbHBoYTIxID0gKGFscGhhMjEgXiAweGZmKSB8IDA7XG5cbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IDM7IGkrKywgcGl4SW5kZXgrKykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgXG4gICAgICAgICAgICAgICAgICAgICAgICBjMSA9IHRoYXQuZGF0YVtwaXhJbmRleF0sXG4gICAgICAgICAgICAgICAgICAgICAgICBjMiA9IGZ1c2lvbi5kYXRhW3BpeEluZGV4XTtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGZ1c2lvbi5kYXRhW3BpeEluZGV4XSA9ICgoKGMyID49IGMxKSA/IChjMiAqIGFscGhhMjEgKyBjMSAqIGludkFscGhhMjEpIDogKGMxICogYWxwaGExMiArIGMyICogaW52QWxwaGExMikpIC8gMjU1KSB8IDA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZ1c2lvbi5kYXRhW3BpeEluZGV4KytdID0gbmV3QWxwaGE7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHBpeEluZGV4ICs9IEJZVEVTX1BFUl9QSVhFTDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBcbiAgICBmdXNpb24uYWxwaGEgPSAxMDA7XG59O1xuXG4vLyBXaGVuIGZ1c2lvbiBpcyBvcGFxdWVcbkNQQmxlbmQucHJvdG90eXBlLmZ1c2lvbldpdGhEYXJrZW4gPSBmdW5jdGlvbih0aGF0LCBmdXNpb24sIHJlY3QpIHtcbiAgICB2YXJcbiAgICAgICAgeVN0cmlkZSA9ICgodGhhdC53aWR0aCAtIHJlY3QuZ2V0V2lkdGgoKSkgKiBCWVRFU19QRVJfUElYRUwpIHwgMCxcbiAgICAgICAgcGl4SW5kZXggPSB0aGF0Lm9mZnNldE9mUGl4ZWwocmVjdC5sZWZ0LCByZWN0LnRvcCkgfCAwO1xuXG4gICAgZm9yICh2YXIgeSA9IHJlY3QudG9wOyB5IDwgcmVjdC5ib3R0b207IHkrKywgcGl4SW5kZXggKz0geVN0cmlkZSkge1xuICAgICAgICBmb3IgKHZhciB4ID0gcmVjdC5sZWZ0OyB4IDwgcmVjdC5yaWdodDsgeCsrKSB7XG4gICAgICAgICAgICB2YXIgXG4gICAgICAgICAgICAgICAgYWxwaGExID0gKCh0aGF0LmRhdGFbcGl4SW5kZXggKyBBTFBIQV9CWVRFX09GRlNFVF0gKiB0aGF0LmFscGhhKSAvIDEwMCkgfCAwLFxuICAgICAgICAgICAgICAgIGludkFscGhhMSA9IGFscGhhMSBeIDB4ZmY7XG5cbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgMzsgaSsrLCBwaXhJbmRleCsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIFxuICAgICAgICAgICAgICAgICAgICBjMSA9IHRoYXQuZGF0YVtwaXhJbmRleF0sXG4gICAgICAgICAgICAgICAgICAgIGMyID0gZnVzaW9uLmRhdGFbcGl4SW5kZXhdO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGZ1c2lvbi5kYXRhW3BpeEluZGV4XSA9IGMyID49IGMxID8gKGMyICogaW52QWxwaGExICsgYzEgKiBhbHBoYTEpIC8gMjU1IDogYzI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHBpeEluZGV4Kys7IC8vIEFscGhhIHN0YXlzIHRoZSBzYW1lXG4gICAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgZnVzaW9uLmFscGhhID0gMTAwO1xufTtcblxuLy8gRG9kZ2UgTW9kZVxuLy9cbi8vIEMgPSAoYWEqKDEtYWIpKkEgKyAoMS1hYSkqYWIqQiArIGFhKmFiKkIvKDEtQSkpIC8gKGFhICsgYWIgLSBhYSphYilcblxuQ1BCbGVuZC5wcm90b3R5cGUuZnVzaW9uV2l0aERvZGdlRnVsbEFscGhhID0gZnVuY3Rpb24odGhhdCwgZnVzaW9uLCByZWN0KSB7XG4gICAgdmFyXG4gICAgICAgIHlTdHJpZGUgPSAodGhhdC53aWR0aCAtIHJlY3QuZ2V0V2lkdGgoKSkgKiBCWVRFU19QRVJfUElYRUwsXG4gICAgICAgIHBpeEluZGV4ID0gdGhhdC5vZmZzZXRPZlBpeGVsKHJlY3QubGVmdCwgcmVjdC50b3ApO1xuXG4gICAgZm9yICh2YXIgeSA9IHJlY3QudG9wOyB5IDwgcmVjdC5ib3R0b207IHkrKywgcGl4SW5kZXggKz0geVN0cmlkZSkge1xuICAgICAgICBmb3IgKHZhciB4ID0gcmVjdC5sZWZ0OyB4IDwgcmVjdC5yaWdodDsgeCsrKSB7XG4gICAgICAgICAgICB2YXIgXG4gICAgICAgICAgICAgICAgYWxwaGExID0gKCh0aGF0LmRhdGFbcGl4SW5kZXggKyBBTFBIQV9CWVRFX09GRlNFVF0gKiB0aGF0LmFscGhhKSAvIDEwMCkgfCAwO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoYWxwaGExID09IDApIHtcbiAgICAgICAgICAgICAgICBwaXhJbmRleCArPSBCWVRFU19QRVJfUElYRUw7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgIGFscGhhMiA9ICgoZnVzaW9uLmRhdGFbcGl4SW5kZXggKyBBTFBIQV9CWVRFX09GRlNFVF0gKiBmdXNpb24uYWxwaGEpIC8gMTAwKSB8IDAsXG4gICAgICAgICAgICAgICAgbmV3QWxwaGEgPSAoYWxwaGExICsgYWxwaGEyIC0gYWxwaGExICogYWxwaGEyIC8gMjU1KSB8IDA7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChuZXdBbHBoYSA+IDApIHtcbiAgICAgICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICAgICAgYWxwaGExMiA9IChhbHBoYTEgKiBhbHBoYTIgLyAyNTUpIHwgMCxcbiAgICAgICAgICAgICAgICAgICAgYWxwaGExbjIgPSAoYWxwaGExICogKGFscGhhMiBeIDB4ZmYpIC8gMjU1KSB8IDAsXG4gICAgICAgICAgICAgICAgICAgIGFscGhhbjEyID0gKChhbHBoYTEgXiAweGZmKSAqIGFscGhhMiAvIDI1NSkgfCAwO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgMzsgaSsrLCBwaXhJbmRleCsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yMSA9IHRoYXQuZGF0YVtwaXhJbmRleF0sXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjIgPSBmdXNpb24uZGF0YVtwaXhJbmRleF0sXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnZDb2xvcjEgPSBjb2xvcjEgXiAweEZGO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgZnVzaW9uLmRhdGFbcGl4SW5kZXhdID0gXG4gICAgICAgICAgICAgICAgICAgICAgICAoKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIChjb2xvcjEgKiBhbHBoYTFuMikgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKyAoY29sb3IyICogYWxwaGFuMTIpIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgYWxwaGExMiAqIChpbnZDb2xvcjEgPT0gMCA/IDI1NSA6IE1hdGgubWluKDI1NSwgKDI1NSAqIGNvbG9yMiAvIGludkNvbG9yMSkgfCAwKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICkgLyBuZXdBbHBoYSkgfCAwO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBmdXNpb24uZGF0YVtwaXhJbmRleCsrXSA9IG5ld0FscGhhO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBwaXhJbmRleCArPSBCWVRFU19QRVJfUElYRUw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgZnVzaW9uLmFscGhhID0gMTAwO1xufTtcblxuLy8gV2hlbiBmdXNpb24gaXMgb3BhcXVlXG5DUEJsZW5kLnByb3RvdHlwZS5mdXNpb25XaXRoRG9kZ2UgPSBmdW5jdGlvbih0aGF0LCBmdXNpb24sIHJlY3QpIHtcbiAgICB2YXJcbiAgICAgICAgeVN0cmlkZSA9ICh0aGF0LndpZHRoIC0gcmVjdC5nZXRXaWR0aCgpKSAqIEJZVEVTX1BFUl9QSVhFTCxcbiAgICAgICAgcGl4SW5kZXggPSB0aGF0Lm9mZnNldE9mUGl4ZWwocmVjdC5sZWZ0LCByZWN0LnRvcCk7XG5cbiAgICBmb3IgKHZhciB5ID0gcmVjdC50b3A7IHkgPCByZWN0LmJvdHRvbTsgeSsrLCBwaXhJbmRleCArPSB5U3RyaWRlKSB7XG4gICAgICAgIGZvciAodmFyIHggPSByZWN0LmxlZnQ7IHggPCByZWN0LnJpZ2h0OyB4KyspIHtcbiAgICAgICAgICAgIHZhciBcbiAgICAgICAgICAgICAgICBhbHBoYTEgPSAoKHRoYXQuZGF0YVtwaXhJbmRleCArIEFMUEhBX0JZVEVfT0ZGU0VUXSAqIHRoYXQuYWxwaGEpIC8gMTAwKSB8IDA7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChhbHBoYTEgPT0gMCkge1xuICAgICAgICAgICAgICAgIHBpeEluZGV4ICs9IEJZVEVTX1BFUl9QSVhFTDtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgaW52QWxwaGExID0gYWxwaGExIF4gMHhmZjtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAzOyBpKyssIHBpeEluZGV4KyspIHtcbiAgICAgICAgICAgICAgICB2YXIgXG4gICAgICAgICAgICAgICAgICAgIGNvbG9yMSA9IHRoYXQuZGF0YVtwaXhJbmRleF0sXG4gICAgICAgICAgICAgICAgICAgIGNvbG9yMiA9IGZ1c2lvbi5kYXRhW3BpeEluZGV4XSxcbiAgICAgICAgICAgICAgICAgICAgaW52Q29sb3IxID0gY29sb3IxIF4gMHhGRjtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBmdXNpb24uZGF0YVtwaXhJbmRleF0gPSBcbiAgICAgICAgICAgICAgICAgICAgKChcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yMiAqIGludkFscGhhMSBcbiAgICAgICAgICAgICAgICAgICAgICAgICsgYWxwaGExICogKGludkNvbG9yMSA9PSAwID8gMjU1IDogTWF0aC5taW4oMjU1LCAoMjU1ICogY29sb3IyIC8gaW52Q29sb3IxKSB8IDApKVxuICAgICAgICAgICAgICAgICAgICApIC8gMjU1KSB8IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwaXhJbmRleCsrOyAvLyBBbHBoYSBzdGF5cyB0aGUgc2FtZVxuICAgICAgICB9XG4gICAgfVxufTtcblxuLy8gQnVybiBNb2RlXG4vL1xuLy8gQyA9IChhYSooMS1hYikqQSArICgxLWFhKSphYipCICsgYWEqYWIqKDEtKDEtQikvQSkpIC8gKGFhICsgYWIgLSBhYSphYilcblxuQ1BCbGVuZC5wcm90b3R5cGUuZnVzaW9uV2l0aEJ1cm5GdWxsQWxwaGEgPSBmdW5jdGlvbih0aGF0LCBmdXNpb24sIHJlY3QpIHtcbiAgICB2YXJcbiAgICAgICAgeVN0cmlkZSA9ICh0aGF0LndpZHRoIC0gcmVjdC5nZXRXaWR0aCgpKSAqIEJZVEVTX1BFUl9QSVhFTCxcbiAgICAgICAgcGl4SW5kZXggPSB0aGF0Lm9mZnNldE9mUGl4ZWwocmVjdC5sZWZ0LCByZWN0LnRvcCk7XG5cbiAgICBmb3IgKHZhciB5ID0gcmVjdC50b3A7IHkgPCByZWN0LmJvdHRvbTsgeSsrLCBwaXhJbmRleCArPSB5U3RyaWRlKSB7XG4gICAgICAgIGZvciAodmFyIHggPSByZWN0LmxlZnQ7IHggPCByZWN0LnJpZ2h0OyB4KyspIHtcbiAgICAgICAgICAgIHZhciBcbiAgICAgICAgICAgICAgICBhbHBoYTEgPSAoKHRoYXQuZGF0YVtwaXhJbmRleCArIEFMUEhBX0JZVEVfT0ZGU0VUXSAqIHRoYXQuYWxwaGEpIC8gMTAwKSB8IDA7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChhbHBoYTEgPT0gMCkge1xuICAgICAgICAgICAgICAgIHBpeEluZGV4ICs9IEJZVEVTX1BFUl9QSVhFTDtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgYWxwaGEyID0gKChmdXNpb24uZGF0YVtwaXhJbmRleCArIEFMUEhBX0JZVEVfT0ZGU0VUXSAqIGZ1c2lvbi5hbHBoYSkgLyAxMDApIHwgMCxcbiAgICAgICAgICAgICAgICBuZXdBbHBoYSA9IChhbHBoYTEgKyBhbHBoYTIgLSBhbHBoYTEgKiBhbHBoYTIgLyAyNTUpIHwgMDtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKG5ld0FscGhhID4gMCkge1xuICAgICAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgICAgICBhbHBoYTEyID0gKGFscGhhMSAqIGFscGhhMiAvIDI1NSkgfCAwLFxuICAgICAgICAgICAgICAgICAgICBhbHBoYTFuMiA9IChhbHBoYTEgKiAoYWxwaGEyIF4gMHhmZikgLyAyNTUpIHwgMCxcbiAgICAgICAgICAgICAgICAgICAgYWxwaGFuMTIgPSAoKGFscGhhMSBeIDB4ZmYpICogYWxwaGEyIC8gMjU1KSB8IDA7XG5cbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IDM7IGkrKywgcGl4SW5kZXgrKykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjEgPSB0aGF0LmRhdGFbcGl4SW5kZXhdLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29sb3IyID0gZnVzaW9uLmRhdGFbcGl4SW5kZXhdLFxuICAgICAgICAgICAgICAgICAgICAgICAgaW52Q29sb3IyID0gY29sb3IyIF4gMHhGRjtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGZ1c2lvbi5kYXRhW3BpeEluZGV4XSA9IFxuICAgICAgICAgICAgICAgICAgICAgICAgKChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjEgKiBhbHBoYTFuMiBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICArIGNvbG9yMiAqIGFscGhhbjEyIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgYWxwaGExMiAqIChjb2xvcjEgPT0gMCA/IDAgOiBNYXRoLm1pbigyNTUsIDI1NSAqIGludkNvbG9yMiAvIGNvbG9yMSkgXiAweGZmKVxuICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgLyBuZXdBbHBoYSkgfCAwO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBmdXNpb24uZGF0YVtwaXhJbmRleCsrXSA9IG5ld0FscGhhOyAgXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHBpeEluZGV4ICs9IEJZVEVTX1BFUl9QSVhFTDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBcbiAgICBmdXNpb24uYWxwaGEgPSAxMDA7XG59O1xuXG4vLyBXaGVuIGZ1c2lvbiBpcyBvcGFxdWVcbkNQQmxlbmQucHJvdG90eXBlLmZ1c2lvbldpdGhCdXJuID0gZnVuY3Rpb24odGhhdCwgZnVzaW9uLCByZWN0KSB7XG4gICAgdmFyXG4gICAgICAgIHlTdHJpZGUgPSAoKHRoYXQud2lkdGggLSByZWN0LmdldFdpZHRoKCkpICogQllURVNfUEVSX1BJWEVMKSB8IDAsXG4gICAgICAgIHBpeEluZGV4ID0gdGhhdC5vZmZzZXRPZlBpeGVsKHJlY3QubGVmdCwgcmVjdC50b3ApIHwgMDtcblxuICAgIGZvciAodmFyIHkgPSByZWN0LnRvcDsgeSA8IHJlY3QuYm90dG9tOyB5KyssIHBpeEluZGV4ICs9IHlTdHJpZGUpIHtcbiAgICAgICAgZm9yICh2YXIgeCA9IHJlY3QubGVmdDsgeCA8IHJlY3QucmlnaHQ7IHgrKykge1xuICAgICAgICAgICAgdmFyIFxuICAgICAgICAgICAgICAgIGFscGhhMSA9ICgodGhhdC5kYXRhW3BpeEluZGV4ICsgQUxQSEFfQllURV9PRkZTRVRdICogdGhhdC5hbHBoYSkgLyAxMDApIHwgMDtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKGFscGhhMSA9PSAwKSB7XG4gICAgICAgICAgICAgICAgcGl4SW5kZXggKz0gQllURVNfUEVSX1BJWEVMO1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICBpbnZBbHBoYTEgPSBhbHBoYTEgXiAweGZmO1xuXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IDM7IGkrKywgcGl4SW5kZXgrKykge1xuICAgICAgICAgICAgICAgIHZhciBcbiAgICAgICAgICAgICAgICAgICAgY29sb3IxID0gdGhhdC5kYXRhW3BpeEluZGV4XSxcbiAgICAgICAgICAgICAgICAgICAgY29sb3IyID0gZnVzaW9uLmRhdGFbcGl4SW5kZXhdLFxuICAgICAgICAgICAgICAgICAgICBpbnZDb2xvcjIgPSBjb2xvcjIgXiAweEZGO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGZ1c2lvbi5kYXRhW3BpeEluZGV4XSA9IFxuICAgICAgICAgICAgICAgICAgICAoKFxuICAgICAgICAgICAgICAgICAgICAgICAgY29sb3IyICogaW52QWxwaGExIFxuICAgICAgICAgICAgICAgICAgICAgICAgKyBhbHBoYTEgKiAoY29sb3IxID09IDAgPyAwIDogTWF0aC5taW4oMjU1LCAyNTUgKiBpbnZDb2xvcjIgLyBjb2xvcjEpIF4gMHhmZilcbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAvIDI1NSkgfCAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcGl4SW5kZXgrKzsgLy8gQWxwaGEgc3RheXMgdGhlIHNhbWVcbiAgICAgICAgfVxuICAgIH1cbiAgICBcbiAgICBmdXNpb24uYWxwaGEgPSAxMDA7XG59O1xuXG4vLyBPdmVybGF5IE1vZGVcbi8vIElmIEIgPD0gMC41IEMgPSAoQSphYSooMS1hYikgKyBCKmFiKigxLWFhKSArIGFhKmFiKigyKkEqQikgLyAoYWEgKyBhYiAtIGFhKmFiKVxuLy8gSWYgQiA+IDAuNSBDID0gKEEqYWEqKDEtYWIpICsgQiphYiooMS1hYSkgKyBhYSphYiooMSAtIDIqKDEtQSkqKDEtQikpIC8gKGFhICsgYWIgLSBhYSphYilcblxuQ1BCbGVuZC5wcm90b3R5cGUuZnVzaW9uV2l0aE92ZXJsYXlGdWxsQWxwaGEgPSBmdW5jdGlvbih0aGF0LCBmdXNpb24sIHJlY3QpIHtcbiAgICB2YXJcbiAgICAgICAgeVN0cmlkZSA9ICh0aGF0LndpZHRoIC0gcmVjdC5nZXRXaWR0aCgpKSAqIEJZVEVTX1BFUl9QSVhFTCxcbiAgICAgICAgcGl4SW5kZXggPSB0aGF0Lm9mZnNldE9mUGl4ZWwocmVjdC5sZWZ0LCByZWN0LnRvcCk7XG5cbiAgICBmb3IgKHZhciB5ID0gcmVjdC50b3A7IHkgPCByZWN0LmJvdHRvbTsgeSsrLCBwaXhJbmRleCArPSB5U3RyaWRlKSB7XG4gICAgICAgIGZvciAodmFyIHggPSByZWN0LmxlZnQ7IHggPCByZWN0LnJpZ2h0OyB4KyspIHtcbiAgICAgICAgICAgIHZhciBcbiAgICAgICAgICAgICAgICBhbHBoYTEgPSAoKHRoYXQuZGF0YVtwaXhJbmRleCArIEFMUEhBX0JZVEVfT0ZGU0VUXSAqIHRoYXQuYWxwaGEpIC8gMTAwKSB8IDA7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChhbHBoYTEgPT0gMCkge1xuICAgICAgICAgICAgICAgIHBpeEluZGV4ICs9IEJZVEVTX1BFUl9QSVhFTDtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgYWxwaGEyID0gKChmdXNpb24uZGF0YVtwaXhJbmRleCArIEFMUEhBX0JZVEVfT0ZGU0VUXSAqIGZ1c2lvbi5hbHBoYSkgLyAxMDApIHwgMCxcbiAgICAgICAgICAgICAgICBuZXdBbHBoYSA9IChhbHBoYTEgKyBhbHBoYTIgLSBhbHBoYTEgKiBhbHBoYTIgLyAyNTUpIHwgMDtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKG5ld0FscGhhID4gMCkge1xuICAgICAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgICAgICBhbHBoYTEyID0gKGFscGhhMSAqIGFscGhhMiAvIDI1NSkgfCAwLFxuICAgICAgICAgICAgICAgICAgICBhbHBoYTFuMiA9IChhbHBoYTEgKiAoYWxwaGEyIF4gMHhmZikgLyAyNTUpIHwgMCxcbiAgICAgICAgICAgICAgICAgICAgYWxwaGFuMTIgPSAoKGFscGhhMSBeIDB4ZmYpICogYWxwaGEyIC8gMjU1KSB8IDA7XG5cbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IDM7IGkrKywgcGl4SW5kZXgrKykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgXG4gICAgICAgICAgICAgICAgICAgICAgICBjMSA9IHRoYXQuZGF0YVtwaXhJbmRleF0sXG4gICAgICAgICAgICAgICAgICAgICAgICBjMiA9IGZ1c2lvbi5kYXRhW3BpeEluZGV4XTtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGZ1c2lvbi5kYXRhW3BpeEluZGV4XSA9IFxuICAgICAgICAgICAgICAgICAgICAgICAgKChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbHBoYTFuMiAqIGMxIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgYWxwaGFuMTIgKiBjMiBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICArIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYzIgPD0gMTI3XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IChhbHBoYTEyICogMiAqIGMxICogYzIgLyAyNTUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IChhbHBoYTEyICogKCgyICogKGMxIF4gMHhmZikgKiAoYzIgXiAweGZmKSAvIDI1NSkgXiAweGZmKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICApIC8gbmV3QWxwaGEpIHwgMDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZnVzaW9uLmRhdGFbcGl4SW5kZXgrK10gPSBuZXdBbHBoYTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcGl4SW5kZXggKz0gQllURVNfUEVSX1BJWEVMO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIGZ1c2lvbi5hbHBoYSA9IDEwMDtcbn07XG5cbi8vIFdoZW4gZnVzaW9uIGlzIG9wYXF1ZVxuQ1BCbGVuZC5wcm90b3R5cGUuZnVzaW9uV2l0aE92ZXJsYXkgPSBmdW5jdGlvbih0aGF0LCBmdXNpb24sIHJlY3QpIHtcbiAgICB2YXJcbiAgICAgICAgeVN0cmlkZSA9ICgodGhhdC53aWR0aCAtIHJlY3QuZ2V0V2lkdGgoKSkgKiBCWVRFU19QRVJfUElYRUwpIHwgMCxcbiAgICAgICAgcGl4SW5kZXggPSB0aGF0Lm9mZnNldE9mUGl4ZWwocmVjdC5sZWZ0LCByZWN0LnRvcCkgfCAwO1xuXG4gICAgZm9yICh2YXIgeSA9IHJlY3QudG9wOyB5IDwgcmVjdC5ib3R0b207IHkrKywgcGl4SW5kZXggKz0geVN0cmlkZSkge1xuICAgICAgICBmb3IgKHZhciB4ID0gcmVjdC5sZWZ0OyB4IDwgcmVjdC5yaWdodDsgeCsrKSB7XG4gICAgICAgICAgICB2YXIgXG4gICAgICAgICAgICAgICAgYWxwaGExID0gKCh0aGF0LmRhdGFbcGl4SW5kZXggKyBBTFBIQV9CWVRFX09GRlNFVF0gKiB0aGF0LmFscGhhKSAvIDEwMCkgfCAwO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoYWxwaGExID09IDApIHtcbiAgICAgICAgICAgICAgICBwaXhJbmRleCArPSBCWVRFU19QRVJfUElYRUw7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgIGFscGhhbjEyID0gYWxwaGExIF4gMHhmZjtcblxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAzOyBpKyssIHBpeEluZGV4KyspIHtcbiAgICAgICAgICAgICAgICB2YXIgXG4gICAgICAgICAgICAgICAgICAgIGMxID0gdGhhdC5kYXRhW3BpeEluZGV4XSxcbiAgICAgICAgICAgICAgICAgICAgYzIgPSBmdXNpb24uZGF0YVtwaXhJbmRleF07XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgZnVzaW9uLmRhdGFbcGl4SW5kZXhdID0gXG4gICAgICAgICAgICAgICAgICAgICgoXG4gICAgICAgICAgICAgICAgICAgICAgICBhbHBoYW4xMiAqIGMyIFxuICAgICAgICAgICAgICAgICAgICAgICAgKyAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYzIgPD0gMTI3XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gKGFscGhhMSAqIDIgKiBjMSAqIGMyIC8gMjU1KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IChhbHBoYTEgKiAoKDIgKiAoYzEgXiAweGZmKSAqIChjMiBeIDB4ZmYpIC8gMjU1KSBeIDB4ZmYpKVxuICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICApIC8gMjU1KSB8IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwaXhJbmRleCsrOyAvLyBBbHBoYSBzdGF5cyAyNTVcbiAgICAgICAgfVxuICAgIH1cbn07XG5cbi8vIEhhcmQgTGlnaHQgTW9kZSAoc2FtZSBhcyBPdmVybGF5IHdpdGggQSBhbmQgQiBzd2FwcGVkKVxuLy8gSWYgQSA8PSAwLjUgQyA9IChBKmFhKigxLWFiKSArIEIqYWIqKDEtYWEpICsgYWEqYWIqKDIqQSpCKSAvIChhYSArIGFiIC0gYWEqYWIpXG4vLyBJZiBBID4gMC41IEMgPSAoQSphYSooMS1hYikgKyBCKmFiKigxLWFhKSArIGFhKmFiKigxIC0gMiooMS1BKSooMS1CKSkgLyAoYWEgKyBhYiAtIGFhKmFiKVxuXG5DUEJsZW5kLnByb3RvdHlwZS5mdXNpb25XaXRoSGFyZExpZ2h0RnVsbEFscGhhID0gZnVuY3Rpb24odGhhdCwgZnVzaW9uLCByZWN0KSB7XG4gICAgdmFyXG4gICAgICAgIHlTdHJpZGUgPSAodGhhdC53aWR0aCAtIHJlY3QuZ2V0V2lkdGgoKSkgKiBCWVRFU19QRVJfUElYRUwsXG4gICAgICAgIHBpeEluZGV4ID0gdGhhdC5vZmZzZXRPZlBpeGVsKHJlY3QubGVmdCwgcmVjdC50b3ApO1xuXG4gICAgZm9yICh2YXIgeSA9IHJlY3QudG9wOyB5IDwgcmVjdC5ib3R0b207IHkrKywgcGl4SW5kZXggKz0geVN0cmlkZSkge1xuICAgICAgICBmb3IgKHZhciB4ID0gcmVjdC5sZWZ0OyB4IDwgcmVjdC5yaWdodDsgeCsrKSB7XG4gICAgICAgICAgICB2YXIgXG4gICAgICAgICAgICAgICAgYWxwaGExID0gKCh0aGF0LmRhdGFbcGl4SW5kZXggKyBBTFBIQV9CWVRFX09GRlNFVF0gKiB0aGF0LmFscGhhKSAvIDEwMCkgfCAwO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoYWxwaGExID09IDApIHtcbiAgICAgICAgICAgICAgICBwaXhJbmRleCArPSBCWVRFU19QRVJfUElYRUw7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgIGFscGhhMiA9ICgoZnVzaW9uLmRhdGFbcGl4SW5kZXggKyBBTFBIQV9CWVRFX09GRlNFVF0gKiBmdXNpb24uYWxwaGEpIC8gMTAwKSB8IDAsXG4gICAgICAgICAgICAgICAgbmV3QWxwaGEgPSAoYWxwaGExICsgYWxwaGEyIC0gYWxwaGExICogYWxwaGEyIC8gMjU1KSB8IDA7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChuZXdBbHBoYSA+IDApIHtcbiAgICAgICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICAgICAgYWxwaGExMiA9IChhbHBoYTEgKiBhbHBoYTIgLyAyNTUpIHwgMCxcbiAgICAgICAgICAgICAgICAgICAgYWxwaGExbjIgPSAoYWxwaGExICogKGFscGhhMiBeIDB4ZmYpIC8gMjU1KSB8IDAsXG4gICAgICAgICAgICAgICAgICAgIGFscGhhbjEyID0gKChhbHBoYTEgXiAweGZmKSAqIGFscGhhMiAvIDI1NSkgfCAwO1xuXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAzOyBpKyssIHBpeEluZGV4KyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIFxuICAgICAgICAgICAgICAgICAgICAgICAgYzEgPSB0aGF0LmRhdGFbcGl4SW5kZXhdLFxuICAgICAgICAgICAgICAgICAgICAgICAgYzIgPSBmdXNpb24uZGF0YVtwaXhJbmRleF07XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBmdXNpb24uZGF0YVtwaXhJbmRleF0gPSBcbiAgICAgICAgICAgICAgICAgICAgICAgICgoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxwaGExbjIgKiBjMSBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICArIGFscGhhbjEyICogYzIgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKyAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGMxIDw9IDEyN1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyAoYWxwaGExMiAqIDIgKiBjMSAqIGMyIC8gMjU1KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiAoYWxwaGExMiAqICgoMiAqIChjMSBeIDB4ZmYpICogKGMyIF4gMHhmZikgLyAyNTUpIF4gMHhmZikpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgKSAvIG5ld0FscGhhKSB8IDA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZ1c2lvbi5kYXRhW3BpeEluZGV4KytdID0gbmV3QWxwaGE7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHBpeEluZGV4ICs9IEJZVEVTX1BFUl9QSVhFTDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBcbiAgICBmdXNpb24uYWxwaGEgPSAxMDA7XG59O1xuXG4vLyBTb2Z0IExpZ2h0IE1vZGVcbi8vIEEgPCAwLjUgPT4gQyA9ICgyKkEgLSAxKSAqIChCIC0gQl4yKSArIEJcbi8vIEEgPiAwLjUgPT4gQyA9ICgyKkEgLSAxKSAqIChzcXJ0KEIpIC0gQikgKyBCXG5cbkNQQmxlbmQucHJvdG90eXBlLmZ1c2lvbldpdGhTb2Z0TGlnaHRGdWxsQWxwaGEgPSBmdW5jdGlvbih0aGF0LCBmdXNpb24sIHJlY3QpIHtcbiAgICB2YXJcbiAgICAgICAgeVN0cmlkZSA9ICh0aGF0LndpZHRoIC0gcmVjdC5nZXRXaWR0aCgpKSAqIEJZVEVTX1BFUl9QSVhFTCxcbiAgICAgICAgcGl4SW5kZXggPSB0aGF0Lm9mZnNldE9mUGl4ZWwocmVjdC5sZWZ0LCByZWN0LnRvcCk7XG5cbiAgICBmb3IgKHZhciB5ID0gcmVjdC50b3A7IHkgPCByZWN0LmJvdHRvbTsgeSsrLCBwaXhJbmRleCArPSB5U3RyaWRlKSB7XG4gICAgICAgIGZvciAodmFyIHggPSByZWN0LmxlZnQ7IHggPCByZWN0LnJpZ2h0OyB4KyspIHtcbiAgICAgICAgICAgIHZhciBcbiAgICAgICAgICAgICAgICBhbHBoYTEgPSAoKHRoYXQuZGF0YVtwaXhJbmRleCArIEFMUEhBX0JZVEVfT0ZGU0VUXSAqIHRoYXQuYWxwaGEpIC8gMTAwKSB8IDA7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChhbHBoYTEgPT0gMCkge1xuICAgICAgICAgICAgICAgIHBpeEluZGV4ICs9IEJZVEVTX1BFUl9QSVhFTDtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgYWxwaGEyID0gKChmdXNpb24uZGF0YVtwaXhJbmRleCArIEFMUEhBX0JZVEVfT0ZGU0VUXSAqIGZ1c2lvbi5hbHBoYSkgLyAxMDApIHwgMCxcbiAgICAgICAgICAgICAgICBuZXdBbHBoYSA9IChhbHBoYTEgKyBhbHBoYTIgLSBhbHBoYTEgKiBhbHBoYTIgLyAyNTUpIHwgMDtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKG5ld0FscGhhID4gMCkge1xuICAgICAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgICAgICBhbHBoYTEyID0gKGFscGhhMSAqIGFscGhhMiAvIDI1NSkgfCAwLFxuICAgICAgICAgICAgICAgICAgICBhbHBoYTFuMiA9IChhbHBoYTEgKiAoYWxwaGEyIF4gMHhmZikgLyAyNTUpIHwgMCxcbiAgICAgICAgICAgICAgICAgICAgYWxwaGFuMTIgPSAoKGFscGhhMSBeIDB4ZmYpICogYWxwaGEyIC8gMjU1KSB8IDA7XG5cbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IDM7IGkrKywgcGl4SW5kZXgrKykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgXG4gICAgICAgICAgICAgICAgICAgICAgICBjMSA9IHRoYXQuZGF0YVtwaXhJbmRleF0sXG4gICAgICAgICAgICAgICAgICAgICAgICBjMiA9IGZ1c2lvbi5kYXRhW3BpeEluZGV4XTtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGZ1c2lvbi5kYXRhW3BpeEluZGV4XSA9IFxuICAgICAgICAgICAgICAgICAgICAgICAgKChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbHBoYTFuMiAqIGMxIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgYWxwaGFuMTIgKiBjMiBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICArIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYzEgPD0gMTI3XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IGFscGhhMTIgKiAoKDIgKiBjMSAtIDI1NSkgKiB0aGF0LnNvZnRMaWdodExVVFNxdWFyZVtjMl0gLyAyNTUgKyBjMilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogYWxwaGExMiAqICgoMiAqIGMxIC0gMjU1KSAqIHRoYXQuc29mdExpZ2h0TFVUU3F1YXJlUm9vdFtjMl0gLyAyNTUgKyBjMilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICApIC8gbmV3QWxwaGEpIHwgMDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZnVzaW9uLmRhdGFbcGl4SW5kZXgrK10gPSBuZXdBbHBoYTtcblxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBwaXhJbmRleCArPSBCWVRFU19QRVJfUElYRUw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgZnVzaW9uLmFscGhhID0gMTAwO1xufTtcblxuLy8gVml2aWQgTGlnaHQgTW9kZVxuLy8gQSA8IDAuNSA9PiBDID0gMSAtICgxLUIpIC8gKDIqQSlcbi8vIEEgPiAwLjUgPT4gQyA9IEIgLyAoMiooMS1BKSlcblxuQ1BCbGVuZC5wcm90b3R5cGUuZnVzaW9uV2l0aFZpdmlkTGlnaHRGdWxsQWxwaGEgPSBmdW5jdGlvbih0aGF0LCBmdXNpb24sIHJlY3QpIHtcbiAgICB2YXJcbiAgICAgICAgeVN0cmlkZSA9ICh0aGF0LndpZHRoIC0gcmVjdC5nZXRXaWR0aCgpKSAqIEJZVEVTX1BFUl9QSVhFTCxcbiAgICAgICAgcGl4SW5kZXggPSB0aGF0Lm9mZnNldE9mUGl4ZWwocmVjdC5sZWZ0LCByZWN0LnRvcCk7XG5cbiAgICBmb3IgKHZhciB5ID0gcmVjdC50b3A7IHkgPCByZWN0LmJvdHRvbTsgeSsrLCBwaXhJbmRleCArPSB5U3RyaWRlKSB7XG4gICAgICAgIGZvciAodmFyIHggPSByZWN0LmxlZnQ7IHggPCByZWN0LnJpZ2h0OyB4KyspIHtcbiAgICAgICAgICAgIHZhciBcbiAgICAgICAgICAgICAgICBhbHBoYTEgPSAoKHRoYXQuZGF0YVtwaXhJbmRleCArIEFMUEhBX0JZVEVfT0ZGU0VUXSAqIHRoYXQuYWxwaGEpIC8gMTAwKSB8IDA7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChhbHBoYTEgPT0gMCkge1xuICAgICAgICAgICAgICAgIHBpeEluZGV4ICs9IEJZVEVTX1BFUl9QSVhFTDtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgYWxwaGEyID0gKChmdXNpb24uZGF0YVtwaXhJbmRleCArIEFMUEhBX0JZVEVfT0ZGU0VUXSAqIGZ1c2lvbi5hbHBoYSkgLyAxMDApIHwgMCxcbiAgICAgICAgICAgICAgICBuZXdBbHBoYSA9IChhbHBoYTEgKyBhbHBoYTIgLSBhbHBoYTEgKiBhbHBoYTIgLyAyNTUpIHwgMDtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKG5ld0FscGhhID4gMCkge1xuICAgICAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgICAgICBhbHBoYTEyID0gKGFscGhhMSAqIGFscGhhMiAvIDI1NSkgfCAwLFxuICAgICAgICAgICAgICAgICAgICBhbHBoYTFuMiA9IChhbHBoYTEgKiAoYWxwaGEyIF4gMHhmZikgLyAyNTUpIHwgMCxcbiAgICAgICAgICAgICAgICAgICAgYWxwaGFuMTIgPSAoKGFscGhhMSBeIDB4ZmYpICogYWxwaGEyIC8gMjU1KSB8IDA7XG5cbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IDM7IGkrKywgcGl4SW5kZXgrKykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgXG4gICAgICAgICAgICAgICAgICAgICAgICBjMSA9IHRoYXQuZGF0YVtwaXhJbmRleF0sXG4gICAgICAgICAgICAgICAgICAgICAgICBjMiA9IGZ1c2lvbi5kYXRhW3BpeEluZGV4XTtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGZ1c2lvbi5kYXRhW3BpeEluZGV4XSA9IFxuICAgICAgICAgICAgICAgICAgICAgICAgKChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbHBoYTFuMiAqIGMxIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgYWxwaGFuMTIgKiBjMiBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICArIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYzEgPD0gMTI3XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IChhbHBoYTEyICogKChjMSA9PSAwKSA/IDAgOiAyNTUgLSBNYXRoLm1pbigyNTUsICgyNTUgLSBjMikgKiAyNTUgLyAoMiAqIGMxKSkpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiAoYWxwaGExMiAqIChjMSA9PSAyNTUgPyAyNTUgOiBNYXRoLm1pbigyNTUsIGMyICogMjU1IC8gKDIgKiAoMjU1IC0gYzEpKSkpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICkgLyBuZXdBbHBoYSkgfCAwO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBmdXNpb24uZGF0YVtwaXhJbmRleCsrXSA9IG5ld0FscGhhO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBwaXhJbmRleCArPSBCWVRFU19QRVJfUElYRUw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgZnVzaW9uLmFscGhhID0gMTAwO1xufTtcblxuLy8gTGluZWFyIExpZ2h0IE1vZGVcbi8vIEMgPSBCICsgMipBIC0xXG5cbkNQQmxlbmQucHJvdG90eXBlLmZ1c2lvbldpdGhMaW5lYXJMaWdodEZ1bGxBbHBoYSA9IGZ1bmN0aW9uKHRoYXQsIGZ1c2lvbiwgcmVjdCkge1xuICAgIHZhclxuICAgICAgICB5U3RyaWRlID0gKHRoYXQud2lkdGggLSByZWN0LmdldFdpZHRoKCkpICogQllURVNfUEVSX1BJWEVMLFxuICAgICAgICBwaXhJbmRleCA9IHRoYXQub2Zmc2V0T2ZQaXhlbChyZWN0LmxlZnQsIHJlY3QudG9wKTtcblxuICAgIGZvciAodmFyIHkgPSByZWN0LnRvcDsgeSA8IHJlY3QuYm90dG9tOyB5KyssIHBpeEluZGV4ICs9IHlTdHJpZGUpIHtcbiAgICAgICAgZm9yICh2YXIgeCA9IHJlY3QubGVmdDsgeCA8IHJlY3QucmlnaHQ7IHgrKykge1xuICAgICAgICAgICAgdmFyIFxuICAgICAgICAgICAgICAgIGFscGhhMSA9ICgodGhhdC5kYXRhW3BpeEluZGV4ICsgQUxQSEFfQllURV9PRkZTRVRdICogdGhhdC5hbHBoYSkgLyAxMDApIHwgMDtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKGFscGhhMSA9PSAwKSB7XG4gICAgICAgICAgICAgICAgcGl4SW5kZXggKz0gQllURVNfUEVSX1BJWEVMO1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICBhbHBoYTIgPSAoKGZ1c2lvbi5kYXRhW3BpeEluZGV4ICsgQUxQSEFfQllURV9PRkZTRVRdICogZnVzaW9uLmFscGhhKSAvIDEwMCkgfCAwLFxuICAgICAgICAgICAgICAgIG5ld0FscGhhID0gKGFscGhhMSArIGFscGhhMiAtIGFscGhhMSAqIGFscGhhMiAvIDI1NSkgfCAwO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAobmV3QWxwaGEgPiAwKSB7XG4gICAgICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgICAgIGFscGhhMTIgPSAoYWxwaGExICogYWxwaGEyIC8gMjU1KSB8IDAsXG4gICAgICAgICAgICAgICAgICAgIGFscGhhMW4yID0gKGFscGhhMSAqIChhbHBoYTIgXiAweGZmKSAvIDI1NSkgfCAwLFxuICAgICAgICAgICAgICAgICAgICBhbHBoYW4xMiA9ICgoYWxwaGExIF4gMHhmZikgKiBhbHBoYTIgLyAyNTUpIHwgMDtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAzOyBpKyssIHBpeEluZGV4KyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIFxuICAgICAgICAgICAgICAgICAgICAgICAgYzEgPSB0aGF0LmRhdGFbcGl4SW5kZXhdLFxuICAgICAgICAgICAgICAgICAgICAgICAgYzIgPSBmdXNpb24uZGF0YVtwaXhJbmRleF07XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBmdXNpb24uZGF0YVtwaXhJbmRleF0gPSBcbiAgICAgICAgICAgICAgICAgICAgICAgICgoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxwaGExbjIgKiBjMSBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICArIGFscGhhbjEyICogYzIgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKyBhbHBoYTEyICogTWF0aC5taW4oMjU1LCBNYXRoLm1heCgwLCBjMiArIDIgKiBjMSAtIDI1NSkpXG4gICAgICAgICAgICAgICAgICAgICAgICApIC8gbmV3QWxwaGEpIHwgMDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZnVzaW9uLmRhdGFbcGl4SW5kZXgrK10gPSBuZXdBbHBoYTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcGl4SW5kZXggKz0gQllURVNfUEVSX1BJWEVMO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIGZ1c2lvbi5hbHBoYSA9IDEwMDtcbn07XG5cbi8vIFBpbiBMaWdodCBNb2RlXG4vLyBCID4gMipBID0+IEMgPSAyKkFcbi8vIEIgPCAyKkEtMSA9PiBDID0gMipBLTFcbi8vIGVsc2UgPT4gQyA9IEJcblxuQ1BCbGVuZC5wcm90b3R5cGUuZnVzaW9uV2l0aFBpbkxpZ2h0RnVsbEFscGhhID0gZnVuY3Rpb24odGhhdCwgZnVzaW9uLCByZWN0KSB7XG4gICAgdmFyXG4gICAgICAgIHlTdHJpZGUgPSAodGhhdC53aWR0aCAtIHJlY3QuZ2V0V2lkdGgoKSkgKiBCWVRFU19QRVJfUElYRUwsXG4gICAgICAgIHBpeEluZGV4ID0gdGhhdC5vZmZzZXRPZlBpeGVsKHJlY3QubGVmdCwgcmVjdC50b3ApO1xuXG4gICAgZm9yICh2YXIgeSA9IHJlY3QudG9wOyB5IDwgcmVjdC5ib3R0b207IHkrKywgcGl4SW5kZXggKz0geVN0cmlkZSkge1xuICAgICAgICBmb3IgKHZhciB4ID0gcmVjdC5sZWZ0OyB4IDwgcmVjdC5yaWdodDsgeCsrKSB7XG4gICAgICAgICAgICB2YXIgXG4gICAgICAgICAgICAgICAgYWxwaGExID0gKCh0aGF0LmRhdGFbcGl4SW5kZXggKyBBTFBIQV9CWVRFX09GRlNFVF0gKiB0aGF0LmFscGhhKSAvIDEwMCkgfCAwO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoYWxwaGExID09IDApIHtcbiAgICAgICAgICAgICAgICBwaXhJbmRleCArPSBCWVRFU19QRVJfUElYRUw7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgIGFscGhhMiA9ICgoZnVzaW9uLmRhdGFbcGl4SW5kZXggKyBBTFBIQV9CWVRFX09GRlNFVF0gKiBmdXNpb24uYWxwaGEpIC8gMTAwKSB8IDAsXG4gICAgICAgICAgICAgICAgbmV3QWxwaGEgPSAoYWxwaGExICsgYWxwaGEyIC0gYWxwaGExICogYWxwaGEyIC8gMjU1KSB8IDA7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChuZXdBbHBoYSA+IDApIHtcbiAgICAgICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICAgICAgYWxwaGExMiA9IChhbHBoYTEgKiBhbHBoYTIgLyAyNTUpIHwgMCxcbiAgICAgICAgICAgICAgICAgICAgYWxwaGExbjIgPSAoYWxwaGExICogKGFscGhhMiBeIDB4ZmYpIC8gMjU1KSB8IDAsXG4gICAgICAgICAgICAgICAgICAgIGFscGhhbjEyID0gKChhbHBoYTEgXiAweGZmKSAqIGFscGhhMiAvIDI1NSkgfCAwO1xuXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAzOyBpKyssIHBpeEluZGV4KyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIFxuICAgICAgICAgICAgICAgICAgICAgICAgYzEgPSB0aGF0LmRhdGFbcGl4SW5kZXhdLFxuICAgICAgICAgICAgICAgICAgICAgICAgYzIgPSBmdXNpb24uZGF0YVtwaXhJbmRleF0sXG4gICAgICAgICAgICAgICAgICAgICAgICBjMyA9IChjMiA+PSAyICogYzEpID8gKDIgKiBjMSkgOiAoYzIgPD0gMiAqIGMxIC0gMjU1KSA/ICgyICogYzEgLSAyNTUpIDogYzI7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBmdXNpb24uZGF0YVtwaXhJbmRleF0gPSAoKFxuICAgICAgICAgICAgICAgICAgICAgICAgYWxwaGExbjIgKiBjMSBcbiAgICAgICAgICAgICAgICAgICAgICAgICsgYWxwaGFuMTIgKiBjMiBcbiAgICAgICAgICAgICAgICAgICAgICAgICsgYWxwaGExMiAqIGMzXG4gICAgICAgICAgICAgICAgICAgICkgLyBuZXdBbHBoYSkgfCAwO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBmdXNpb24uZGF0YVtwaXhJbmRleCsrXSA9IG5ld0FscGhhO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBwaXhJbmRleCArPSBCWVRFU19QRVJfUElYRUw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgZnVzaW9uLmFscGhhID0gMTAwO1xufTsiLCIvKlxuICAgIENoaWNrZW5QYWludFxuICAgIFxuICAgIENoaWNrZW5QYWludCBpcyBhIHRyYW5zbGF0aW9uIG9mIENoaWJpUGFpbnQgZnJvbSBKYXZhIHRvIEphdmFTY3JpcHRcbiAgICBieSBOaWNob2xhcyBTaGVybG9jayAvIENoaWNrZW4gU21vb3RoaWUuXG4gICAgXG4gICAgQ2hpYmlQYWludCBpcyBDb3B5cmlnaHQgKGMpIDIwMDYtMjAwOCBNYXJjIFNjaGVmZXJcblxuICAgIENoaWNrZW5QYWludCBpcyBmcmVlIHNvZnR3YXJlOiB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3IgbW9kaWZ5XG4gICAgaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBhcyBwdWJsaXNoZWQgYnlcbiAgICB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uLCBlaXRoZXIgdmVyc2lvbiAzIG9mIHRoZSBMaWNlbnNlLCBvclxuICAgIChhdCB5b3VyIG9wdGlvbikgYW55IGxhdGVyIHZlcnNpb24uXG5cbiAgICBDaGlja2VuUGFpbnQgaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCxcbiAgICBidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZlxuICAgIE1FUkNIQU5UQUJJTElUWSBvciBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS4gIFNlZSB0aGVcbiAgICBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9yZSBkZXRhaWxzLlxuXG4gICAgWW91IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2VcbiAgICBhbG9uZyB3aXRoIENoaWNrZW5QYWludC4gSWYgbm90LCBzZWUgPGh0dHA6Ly93d3cuZ251Lm9yZy9saWNlbnNlcy8+LlxuKi9cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gQ1BCcnVzaEluZm8ocHJvcGVydGllcykge1xuICAgIC8vIFNldCBicnVzaCBzZXR0aW5nIGZpZWxkcyB3aXRoIGRlZmF1bHQgdmFsdWVzLCB0aGVuIGFwcGx5IHRoZSBzdXBwbGllZCAncHJvcGVydGllcycgb24gdG9wXG4gICAgZm9yICh2YXIgcHJvcE5hbWUgaW4gQ1BCcnVzaEluZm8uREVGQVVMVFMpIHtcbiAgICAgICAgaWYgKENQQnJ1c2hJbmZvLkRFRkFVTFRTLmhhc093blByb3BlcnR5KHByb3BOYW1lKSkge1xuICAgICAgICAgICAgdGhpc1twcm9wTmFtZV0gPSBDUEJydXNoSW5mby5ERUZBVUxUU1twcm9wTmFtZV07XG4gICAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgZm9yICh2YXIgcHJvcE5hbWUgaW4gcHJvcGVydGllcykge1xuICAgICAgICBpZiAocHJvcGVydGllcy5oYXNPd25Qcm9wZXJ0eShwcm9wTmFtZSkpIHtcbiAgICAgICAgICAgIHRoaXNbcHJvcE5hbWVdID0gcHJvcGVydGllc1twcm9wTmFtZV07XG4gICAgICAgIH1cbiAgICB9XG59XG5cbi8vIFN0cm9rZSBtb2Rlc1xuQ1BCcnVzaEluZm8uU01fRlJFRUhBTkQgPSAwO1xuQ1BCcnVzaEluZm8uU01fTElORSA9IDE7XG5DUEJydXNoSW5mby5TTV9CRVpJRVIgPSAyO1xuXG4vLyBCcnVzaCBkYWIgdHlwZXNcbkNQQnJ1c2hJbmZvLkJfUk9VTkRfUElYRUwgPSAwO1xuQ1BCcnVzaEluZm8uQl9ST1VORF9BQSA9IDE7XG5DUEJydXNoSW5mby5CX1JPVU5EX0FJUkJSVVNIID0gMjtcbkNQQnJ1c2hJbmZvLkJfU1FVQVJFX1BJWEVMID0gMztcbkNQQnJ1c2hJbmZvLkJfU1FVQVJFX0FBID0gNDtcblxuLy8gcGFpbnRpbmcgbW9kZXNcbkNQQnJ1c2hJbmZvLk1fUEFJTlQgPSAwO1xuQ1BCcnVzaEluZm8uTV9FUkFTRSA9IDE7XG5DUEJydXNoSW5mby5NX0RPREdFID0gMjtcbkNQQnJ1c2hJbmZvLk1fQlVSTiA9IDM7XG5DUEJydXNoSW5mby5NX1dBVEVSID0gNDtcbkNQQnJ1c2hJbmZvLk1fQkxVUiA9IDU7XG5DUEJydXNoSW5mby5NX1NNVURHRSA9IDY7XG5DUEJydXNoSW5mby5NX09JTCA9IDc7XG5cbkNQQnJ1c2hJbmZvLkRFRkFVTFRTID0ge1xuICAgIGlzQUE6IGZhbHNlLCBpc0FpcmJydXNoOiBmYWxzZSxcbiAgICBtaW5TcGFjaW5nOiAwLCBzcGFjaW5nOiAwLFxuICAgIFxuICAgIHByZXNzdXJlU2l6ZTogdHJ1ZSxcbiAgICBwcmVzc3VyZUFscGhhOiBmYWxzZSxcbiAgICBwcmVzc3VyZVNjYXR0ZXJpbmc6IGZhbHNlLFxuICAgIFxuICAgIHR5cGU6IDAsIHBhaW50TW9kZTogMCxcbiAgICBzdHJva2VNb2RlOiBDUEJydXNoSW5mby5TTV9GUkVFSEFORCxcbiAgICByZXNhdDogMS4wLCBibGVlZDogMC4wLFxuXG4gICAgdGV4dHVyZTogMS4wLFxuICAgIFxuICAgIC8vIFwiY3VyXCIgdmFsdWVzIGFyZSBjdXJyZW50IGJydXNoIHNldHRpbmdzIChvbmNlIHRhYmxldCBwcmVzc3VyZSBhbmQgc3R1ZmYgaXMgYXBwbGllZClcbiAgICBzaXplOiAwLCBjdXJTaXplOiAwLFxuICAgIGFscGhhOiAwLCBjdXJBbHBoYTogMCxcbiAgICBzY2F0dGVyaW5nOiAwLjAsIGN1clNjYXR0ZXJpbmc6IDAsXG4gICAgc3F1ZWV6ZTogMC4wLCBjdXJTcXVlZXplOiAwLFxuICAgIGFuZ2xlOiBNYXRoLlBJLCBjdXJBbmdsZTogMCxcbiAgICBcbiAgICBzbW9vdGhpbmc6IDAuMFxufTtcblxuQ1BCcnVzaEluZm8ucHJvdG90eXBlLmFwcGx5UHJlc3N1cmUgPSBmdW5jdGlvbihwcmVzc3VyZSkge1xuICAgIC8vIEZJWE1FOiBubyB2YXJpYWJsZSBzaXplIGZvciBzbXVkZ2UgYW5kIG9pbCA6KFxuICAgIGlmICh0aGlzLnByZXNzdXJlU2l6ZSAmJiB0aGlzLnBhaW50TW9kZSAhPSBDUEJydXNoSW5mby5NX1NNVURHRSAmJiB0aGlzLnBhaW50TW9kZSAhPSBDUEJydXNoSW5mby5NX09JTCkge1xuICAgICAgICB0aGlzLmN1clNpemUgPSBNYXRoLm1heCgwLjEsIHRoaXMuc2l6ZSAqIHByZXNzdXJlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmN1clNpemUgPSBNYXRoLm1heCgwLjEsIHRoaXMuc2l6ZSk7XG4gICAgfVxuXG4gICAgLy8gRklYTUU6IHdoYXQgaXMgdGhlIHBvaW50IG9mIGRvaW5nIHRoYXQ/XG4gICAgaWYgKHRoaXMuY3VyU2l6ZSA+IDE2KSB7XG4gICAgICAgIHRoaXMuY3VyU2l6ZSA9IE1hdGguZmxvb3IodGhpcy5jdXJTaXplKTtcbiAgICB9XG5cbiAgICB0aGlzLmN1ckFscGhhID0gdGhpcy5wcmVzc3VyZUFscGhhID8gTWF0aC5mbG9vcih0aGlzLmFscGhhICogTWF0aC5taW4ocHJlc3N1cmUsIDEuMCkpIDogdGhpcy5hbHBoYTtcbiAgICB0aGlzLmN1clNxdWVlemUgPSB0aGlzLnNxdWVlemU7XG4gICAgdGhpcy5jdXJBbmdsZSA9IHRoaXMuYW5nbGU7XG4gICAgdGhpcy5jdXJTY2F0dGVyaW5nID0gdGhpcy5zY2F0dGVyaW5nICogdGhpcy5jdXJTaXplICogKHRoaXMucHJlc3N1cmVTY2F0dGVyaW5nID8gcHJlc3N1cmUgOiAxLjApO1xufTtcblxuQ1BCcnVzaEluZm8ucHJvdG90eXBlLmNsb25lID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIG5ldyBDUEJydXNoSW5mbyh0aGlzKTtcbn07XG4iLCIvKlxuICAgIENoaWNrZW5QYWludFxuICAgIFxuICAgIENoaWNrZW5QYWludCBpcyBhIHRyYW5zbGF0aW9uIG9mIENoaWJpUGFpbnQgZnJvbSBKYXZhIHRvIEphdmFTY3JpcHRcbiAgICBieSBOaWNob2xhcyBTaGVybG9jayAvIENoaWNrZW4gU21vb3RoaWUuXG4gICAgXG4gICAgQ2hpYmlQYWludCBpcyBDb3B5cmlnaHQgKGMpIDIwMDYtMjAwOCBNYXJjIFNjaGVmZXJcblxuICAgIENoaWNrZW5QYWludCBpcyBmcmVlIHNvZnR3YXJlOiB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3IgbW9kaWZ5XG4gICAgaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBhcyBwdWJsaXNoZWQgYnlcbiAgICB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uLCBlaXRoZXIgdmVyc2lvbiAzIG9mIHRoZSBMaWNlbnNlLCBvclxuICAgIChhdCB5b3VyIG9wdGlvbikgYW55IGxhdGVyIHZlcnNpb24uXG5cbiAgICBDaGlja2VuUGFpbnQgaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCxcbiAgICBidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZlxuICAgIE1FUkNIQU5UQUJJTElUWSBvciBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS4gIFNlZSB0aGVcbiAgICBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9yZSBkZXRhaWxzLlxuXG4gICAgWW91IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2VcbiAgICBhbG9uZyB3aXRoIENoaWNrZW5QYWludC4gSWYgbm90LCBzZWUgPGh0dHA6Ly93d3cuZ251Lm9yZy9saWNlbnNlcy8+LlxuKi9cblxuaW1wb3J0IENQQnJ1c2hJbmZvIGZyb20gXCIuL0NQQnJ1c2hJbmZvXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIENQQnJ1c2hNYW5hZ2VyKCkge1xuICAgIGNvbnN0XG4gICAgICAgIE1BWF9TUVVFRVpFID0gMTAsXG4gICAgICAgIEJSVVNIX01BWF9ESU0gPSAyMDEsXG4gICAgICAgIEJSVVNIX0FBX01BWF9ESU0gPSAyMDI7XG4gICAgXG4gICAgLypDUEJydXNoRGFiIHtcbiAgICAgICAgLy8gdGhlIGJydXNoXG4gICAgICAgIFVpbnQ4QXJyYXkgYnJ1c2g7XG4gICAgICAgIGludCB3aWR0aCwgaGVpZ2h0O1xuICAgICAgICBcbiAgICAgICAgLy8gYW5kIHdoZXJlIGFuZCBob3cgdG8gYXBwbHkgaXRcbiAgICAgICAgaW50IHgsIHksIGFscGhhO1xuICAgIH0qL1xuICAgIFxuICAgIHZhclxuICAgICAgICBicnVzaCA9IG5ldyBVaW50OEFycmF5KEJSVVNIX01BWF9ESU0gKiBCUlVTSF9NQVhfRElNKSxcbiAgICAgICAgYnJ1c2hBQSA9IG5ldyBVaW50OEFycmF5KEJSVVNIX0FBX01BWF9ESU0gKiBCUlVTSF9BQV9NQVhfRElNKSxcblxuICAgICAgICBjYWNoZUJydXNoID0gbnVsbCxcbiAgICAgICAgY2FjaGVTaXplLCBjYWNoZVNxdWVlemUsIGNhY2hlQW5nbGUsXG4gICAgICAgIGNhY2hlVHlwZSxcblxuICAgICAgICB0aGF0ID0gdGhpczsgXG5cbiAgICAvKipcbiAgICAgKiBTaGlmdCBhIGJydXNoIGJ5IGEgcG9zaXRpdmUgc3ViLXBpeGVsIGFtb3VudCAoZHgsIGR5KSBbMC4uMSksIGFuZCByZXR1cm4gdGhlIG5ldyBicnVzaC4gXG4gICAgICogXG4gICAgICogVGhlIHJlc3VsdGluZyBicnVzaCBhcnJheSBpcyAxIHBpeGVsIGxhcmdlciB0aGFuIHRoZSBvcmlnaW5hbCBvbmUgaW4gYm90aCBkaW1lbnNpb25zLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGdldEJydXNoV2l0aEFBKGJydXNoSW5mbywgZHgsIGR5KSB7XG4gICAgICAgIHZhclxuICAgICAgICAgICAgbm9uQUFCcnVzaCA9IGdldEJydXNoKGJydXNoSW5mbyksXG5cbiAgICAgICAgICAgIGludFNpemUgPSBNYXRoLmNlaWwoYnJ1c2hJbmZvLmN1clNpemUpLFxuICAgICAgICAgICAgaW50U2l6ZUFBID0gTWF0aC5jZWlsKGJydXNoSW5mby5jdXJTaXplKSArIDE7XG4gICAgICAgIFxuICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IGludFNpemVBQSAqIGludFNpemVBQTsgeCsrKSB7XG4gICAgICAgICAgICBicnVzaEFBW3hdID0gMDtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgdmFyXG4gICAgICAgICAgICBpbnZkeF9pbnZkeSA9ICgxIC0gZHgpICogKDEgLSBkeSksXG4gICAgICAgICAgICBkeF9pbnZkeSA9IGR4ICogKDEgLSBkeSksXG4gICAgICAgICAgICBkeF9keSA9IGR4ICogZHksXG4gICAgICAgICAgICBpbnZkeF9keSA9ICgxIC0gZHgpICogZHksXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHNyY0luZGV4ID0gMCxcbiAgICAgICAgICAgIGRzdEluZGV4ID0gMDtcbiAgICAgICAgXG4gICAgICAgIGZvciAodmFyIHkgPSAwOyB5IDwgaW50U2l6ZTsgeSsrKSB7XG4gICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IGludFNpemU7IHgrKykge1xuICAgICAgICAgICAgICAgIHZhciBcbiAgICAgICAgICAgICAgICAgICAgYnJ1c2hBbHBoYSA9IG5vbkFBQnJ1c2hbc3JjSW5kZXhdO1xuXG4gICAgICAgICAgICAgICAgLyogXG4gICAgICAgICAgICAgICAgICogVXNlIGEgd2VpZ2h0ZWQgc3VtIHRvIHNoaWZ0IHRoZSBzb3VyY2UgcGl4ZWxzJ3MgcG9zaXRpb24gYnkgYSBzdWItcGl4ZWwgYW1vdW50IGR4LCBkeSBhbmQgYWNjdW11bGF0ZVxuICAgICAgICAgICAgICAgICAqIGl0IGludG8gdGhlIGZpbmFsIGJydXNoQUEgYXJyYXkuXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgYnJ1c2hBQVtkc3RJbmRleF0gKz0gfn4oYnJ1c2hBbHBoYSAqIGludmR4X2ludmR5KTtcbiAgICAgICAgICAgICAgICBicnVzaEFBW2RzdEluZGV4ICsgMV0gKz0gfn4oYnJ1c2hBbHBoYSAqIGR4X2ludmR5KTtcbiAgICAgICAgICAgICAgICBicnVzaEFBW2RzdEluZGV4ICsgMSArIGludFNpemVBQV0gKz0gfn4oYnJ1c2hBbHBoYSAqIGR4X2R5KTtcbiAgICAgICAgICAgICAgICBicnVzaEFBW2RzdEluZGV4ICsgaW50U2l6ZUFBXSArPSB+fihicnVzaEFscGhhICogaW52ZHhfZHkpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHNyY0luZGV4Kys7XG4gICAgICAgICAgICAgICAgZHN0SW5kZXgrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRzdEluZGV4ICs9IGludFNpemVBQSAtIGludFNpemU7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gYnJ1c2hBQTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBidWlsZEJydXNoKGJydXNoLCBicnVzaEluZm8pIHtcbiAgICAgICAgdmFyXG4gICAgICAgICAgICBpbnRTaXplID0gTWF0aC5jZWlsKGJydXNoSW5mby5jdXJTaXplKSxcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY2VudGVyID0gaW50U2l6ZSAvIDIuMCxcbiAgICAgICAgICAgIHNxclJhZGl1cyA9IChicnVzaEluZm8uY3VyU2l6ZSAvIDIpICogKGJydXNoSW5mby5jdXJTaXplIC8gMiksXG4gICAgXG4gICAgICAgICAgICB4RmFjdG9yID0gMS4wICsgYnJ1c2hJbmZvLmN1clNxdWVlemUgKiBNQVhfU1FVRUVaRSxcbiAgICAgICAgICAgIGNvc0EgPSBNYXRoLmNvcyhicnVzaEluZm8uY3VyQW5nbGUpLFxuICAgICAgICAgICAgc2luQSA9IE1hdGguc2luKGJydXNoSW5mby5jdXJBbmdsZSksXG4gICAgXG4gICAgICAgICAgICBvZmZzZXQgPSAwO1xuICAgICAgICBcbiAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBpbnRTaXplOyBqKyspIHtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaW50U2l6ZTsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIFxuICAgICAgICAgICAgICAgICAgICB4ID0gKGkgKyAwLjUgLSBjZW50ZXIpLFxuICAgICAgICAgICAgICAgICAgICB5ID0gKGogKyAwLjUgLSBjZW50ZXIpLFxuICAgICAgICAgICAgICAgICAgICBkeCA9ICh4ICogY29zQSAtIHkgKiBzaW5BKSAqIHhGYWN0b3IsXG4gICAgICAgICAgICAgICAgICAgIGR5ID0gKHkgKiBjb3NBICsgeCAqIHNpbkEpLFxuXG4gICAgICAgICAgICAgICAgICAgIHNxckRpc3QgPSBkeCAqIGR4ICsgZHkgKiBkeTtcblxuICAgICAgICAgICAgICAgIGlmIChzcXJEaXN0IDw9IHNxclJhZGl1cykge1xuICAgICAgICAgICAgICAgICAgICBicnVzaFtvZmZzZXQrK10gPSAweEZGO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGJydXNoW29mZnNldCsrXSA9IDA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGJydXNoO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGJ1aWxkQnJ1c2hBQShicnVzaCwgYnJ1c2hJbmZvKSB7XG4gICAgICAgIHZhclxuICAgICAgICAgICAgaW50U2l6ZSA9IE1hdGguY2VpbChicnVzaEluZm8uY3VyU2l6ZSksXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNlbnRlciA9IGludFNpemUgLyAyLjAsXG4gICAgICAgICAgICBzcXJSYWRpdXMgPSAoYnJ1c2hJbmZvLmN1clNpemUgLyAyKSAqIChicnVzaEluZm8uY3VyU2l6ZSAvIDIpLFxuICAgICAgICAgICAgc3FyUmFkaXVzSW5uZXIgPSAoKGJydXNoSW5mby5jdXJTaXplIC0gMikgLyAyKSAqICgoYnJ1c2hJbmZvLmN1clNpemUgLSAyKSAvIDIpLFxuICAgICAgICAgICAgc3FyUmFkaXVzT3V0ZXIgPSAoKGJydXNoSW5mby5jdXJTaXplICsgMikgLyAyKSAqICgoYnJ1c2hJbmZvLmN1clNpemUgKyAyKSAvIDIpLFxuXG4gICAgICAgICAgICB4RmFjdG9yID0gMS4wICsgYnJ1c2hJbmZvLmN1clNxdWVlemUgKiBNQVhfU1FVRUVaRSxcbiAgICAgICAgICAgIGNvc0EgPSBNYXRoLmNvcyhicnVzaEluZm8uY3VyQW5nbGUpLFxuICAgICAgICAgICAgc2luQSA9IE1hdGguc2luKGJydXNoSW5mby5jdXJBbmdsZSksXG5cbiAgICAgICAgICAgIG9mZnNldCA9IDA7XG4gICAgICAgIFxuICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGludFNpemU7IGorKykge1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpbnRTaXplOyBpKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgXG4gICAgICAgICAgICAgICAgICAgIHggPSAoaSArIDAuNSAtIGNlbnRlciksXG4gICAgICAgICAgICAgICAgICAgIHkgPSAoaiArIDAuNSAtIGNlbnRlciksXG4gICAgICAgICAgICAgICAgICAgIGR4ID0gKHggKiBjb3NBIC0geSAqIHNpbkEpICogeEZhY3RvcixcbiAgICAgICAgICAgICAgICAgICAgZHkgPSAoeSAqIGNvc0EgKyB4ICogc2luQSksXG5cbiAgICAgICAgICAgICAgICAgICAgc3FyRGlzdCA9IGR4ICogZHggKyBkeSAqIGR5O1xuXG4gICAgICAgICAgICAgICAgaWYgKHNxckRpc3QgPD0gc3FyUmFkaXVzSW5uZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgYnJ1c2hbb2Zmc2V0KytdID0gMHhGRjtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHNxckRpc3QgPiBzcXJSYWRpdXNPdXRlcikge1xuICAgICAgICAgICAgICAgICAgICBicnVzaFtvZmZzZXQrK10gPSAwO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvdW50ID0gMDtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIG95ID0gMDsgb3kgPCA0OyBveSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBveCA9IDA7IG94IDwgNDsgb3grKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHggPSBpICsgb3ggKiAoMS4wIC8gNC4wKSAtIGNlbnRlcjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB5ID0gaiArIG95ICogKDEuMCAvIDQuMCkgLSBjZW50ZXI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZHggPSAoeCAqIGNvc0EgLSB5ICogc2luQSkgKiB4RmFjdG9yO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGR5ID0gKHkgKiBjb3NBICsgeCAqIHNpbkEpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3FyRGlzdCA9IGR4ICogZHggKyBkeSAqIGR5O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzcXJEaXN0IDw9IHNxclJhZGl1cykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3VudCArPSAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicnVzaFtvZmZzZXQrK10gPSBNYXRoLm1pbihjb3VudCAqIDE2LCAyNTUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBicnVzaDtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBidWlsZEJydXNoU3F1YXJlKGJydXNoLCBicnVzaEluZm8pIHtcbiAgICAgICAgdmFyXG4gICAgICAgICAgICBpbnRTaXplID0gTWF0aC5jZWlsKGJydXNoSW5mby5jdXJTaXplKSxcbiAgICAgICAgICAgIGNlbnRlciA9IGludFNpemUgLyAyLjAsXG5cbiAgICAgICAgICAgIHNpemUgPSBicnVzaEluZm8uY3VyU2l6ZSAqIE1hdGguc2luKE1hdGguUEkgLyA0KSxcbiAgICAgICAgICAgIHNpemVYID0gKHNpemUgLyAyKSAvICgxLjAgKyBicnVzaEluZm8uY3VyU3F1ZWV6ZSAqIE1BWF9TUVVFRVpFKSxcbiAgICAgICAgICAgIHNpemVZID0gKHNpemUgLyAyKSxcblxuICAgICAgICAgICAgY29zQSA9IE1hdGguY29zKGJydXNoSW5mby5jdXJBbmdsZSksXG4gICAgICAgICAgICBzaW5BID0gTWF0aC5zaW4oYnJ1c2hJbmZvLmN1ckFuZ2xlKSxcblxuICAgICAgICAgICAgb2Zmc2V0ID0gMDtcbiAgICAgICAgXG4gICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgaW50U2l6ZTsgaisrKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGludFNpemU7IGkrKykge1xuICAgICAgICAgICAgICAgIHZhciBcbiAgICAgICAgICAgICAgICAgICAgeCA9IChpICsgMC41IC0gY2VudGVyKSxcbiAgICAgICAgICAgICAgICAgICAgeSA9IChqICsgMC41IC0gY2VudGVyKSxcbiAgICAgICAgICAgICAgICAgICAgZHggPSBNYXRoLmFicyh4ICogY29zQSAtIHkgKiBzaW5BKSxcbiAgICAgICAgICAgICAgICAgICAgZHkgPSBNYXRoLmFicyh5ICogY29zQSArIHggKiBzaW5BKTtcblxuICAgICAgICAgICAgICAgIGlmIChkeCA8PSBzaXplWCAmJiBkeSA8PSBzaXplWSkge1xuICAgICAgICAgICAgICAgICAgICBicnVzaFtvZmZzZXQrK10gPSAweEZGO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGJydXNoW29mZnNldCsrXSA9IDA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGJydXNoO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGJ1aWxkQnJ1c2hTcXVhcmVBQShicnVzaCwgYnJ1c2hJbmZvKSB7XG4gICAgICAgIHZhclxuICAgICAgICAgICAgaW50U2l6ZSA9IE1hdGguY2VpbChicnVzaEluZm8uY3VyU2l6ZSksXG4gICAgICAgICAgICBjZW50ZXIgPSBpbnRTaXplIC8gMi4wLFxuXG4gICAgICAgICAgICBzaXplID0gYnJ1c2hJbmZvLmN1clNpemUgKiBNYXRoLnNpbihNYXRoLlBJIC8gNCksXG4gICAgICAgICAgICBzaXplWCA9IChzaXplIC8gMikgLyAoMS4wICsgYnJ1c2hJbmZvLmN1clNxdWVlemUgKiBNQVhfU1FVRUVaRSksXG4gICAgICAgICAgICBzaXplWSA9IChzaXplIC8gMiksXG5cbiAgICAgICAgICAgIHNpemVYSW5uZXIgPSBzaXplWCAtIDEsXG4gICAgICAgICAgICBzaXplWUlubmVyID0gc2l6ZVkgLSAxLFxuXG4gICAgICAgICAgICBzaXplWE91dGVyID0gc2l6ZVggKyAxLFxuICAgICAgICAgICAgc2l6ZVlPdXRlciA9IHNpemVZICsgMSxcblxuICAgICAgICAgICAgY29zQSA9IE1hdGguY29zKGJydXNoSW5mby5jdXJBbmdsZSksXG4gICAgICAgICAgICBzaW5BID0gTWF0aC5zaW4oYnJ1c2hJbmZvLmN1ckFuZ2xlKSxcblxuICAgICAgICAgICAgb2Zmc2V0ID0gMDtcbiAgICAgICAgXG4gICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgaW50U2l6ZTsgaisrKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGludFNpemU7IGkrKykge1xuICAgICAgICAgICAgICAgIHZhciBcbiAgICAgICAgICAgICAgICAgICAgeCA9IChpICsgMC41IC0gY2VudGVyKSxcbiAgICAgICAgICAgICAgICAgICAgeSA9IChqICsgMC41IC0gY2VudGVyKSxcbiAgICAgICAgICAgICAgICAgICAgZHggPSBNYXRoLmFicyh4ICogY29zQSAtIHkgKiBzaW5BKSxcbiAgICAgICAgICAgICAgICAgICAgZHkgPSBNYXRoLmFicyh5ICogY29zQSArIHggKiBzaW5BKTtcblxuICAgICAgICAgICAgICAgIGlmIChkeCA8PSBzaXplWElubmVyICYmIGR5IDw9IHNpemVZSW5uZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgYnJ1c2hbb2Zmc2V0KytdID0gMHhGRjtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGR4ID4gc2l6ZVhPdXRlciB8fCBkeSA+IHNpemVZT3V0ZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgYnJ1c2hbb2Zmc2V0KytdID0gMDtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvdW50ID0gMDtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIG95ID0gMDsgb3kgPCA0OyBveSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBveCA9IDA7IG94IDwgNDsgb3grKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHggPSBpICsgb3ggKiAoMS4wIC8gNC4wKSAtIGNlbnRlcjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB5ID0gaiArIG95ICogKDEuMCAvIDQuMCkgLSBjZW50ZXI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZHggPSBNYXRoLmFicyh4ICogY29zQSAtIHkgKiBzaW5BKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkeSA9IE1hdGguYWJzKHkgKiBjb3NBICsgeCAqIHNpbkEpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGR4IDw9IHNpemVYICYmIGR5IDw9IHNpemVZKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvdW50Kys7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJydXNoW29mZnNldCsrXSA9IE1hdGgubWluKGNvdW50ICogMTYsIDI1NSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGJydXNoO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGJ1aWxkQnJ1c2hTb2Z0KGJydXNoLCBicnVzaEluZm8pIHtcbiAgICAgICAgdmFyXG4gICAgICAgICAgICBpbnRTaXplID0gTWF0aC5jZWlsKGJydXNoSW5mby5jdXJTaXplKSxcbiAgICAgICAgICAgIGNlbnRlciA9IGludFNpemUgLyAyLjAsXG4gICAgICAgICAgICBzcXJSYWRpdXMgPSAoYnJ1c2hJbmZvLmN1clNpemUgLyAyKSAqIChicnVzaEluZm8uY3VyU2l6ZSAvIDIpLFxuXG4gICAgICAgICAgICB4RmFjdG9yID0gMS4wICsgYnJ1c2hJbmZvLmN1clNxdWVlemUgKiBNQVhfU1FVRUVaRSxcbiAgICAgICAgICAgIGNvc0EgPSBNYXRoLmNvcyhicnVzaEluZm8uY3VyQW5nbGUpLFxuICAgICAgICAgICAgc2luQSA9IE1hdGguc2luKGJydXNoSW5mby5jdXJBbmdsZSksXG5cbiAgICAgICAgICAgIG9mZnNldCA9IDA7XG4gICAgICAgIFxuICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGludFNpemU7IGorKykge1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpbnRTaXplOyBpKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgXG4gICAgICAgICAgICAgICAgICAgIHggPSAoaSArIDAuNSAtIGNlbnRlciksXG4gICAgICAgICAgICAgICAgICAgIHkgPSAoaiArIDAuNSAtIGNlbnRlciksXG4gICAgICAgICAgICAgICAgICAgIGR4ID0gKHggKiBjb3NBIC0geSAqIHNpbkEpICogeEZhY3RvcixcbiAgICAgICAgICAgICAgICAgICAgZHkgPSAoeSAqIGNvc0EgKyB4ICogc2luQSksXG5cbiAgICAgICAgICAgICAgICAgICAgc3FyRGlzdCA9IGR4ICogZHggKyBkeSAqIGR5O1xuXG4gICAgICAgICAgICAgICAgaWYgKHNxckRpc3QgPD0gc3FyUmFkaXVzKSB7XG4gICAgICAgICAgICAgICAgICAgIGJydXNoW29mZnNldCsrXSA9IH5+KDI1NSAqICgxIC0gKHNxckRpc3QgLyBzcXJSYWRpdXMpKSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgYnJ1c2hbb2Zmc2V0KytdID0gMDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gYnJ1c2g7XG4gICAgfSBcbiAgICBcbiAgICAvKipcbiAgICAgKiBCdWlsZCBhbmQgcmV0dXJuIGEgYnJ1c2ggdGhhdCBjb25mb3JtcyB0byB0aGUgZ2l2ZW4gYnJ1c2ggc2V0dGluZ3MuXG4gICAgICogXG4gICAgICogQHJldHVybnMgYSBVaW50OEFycmF5XG4gICAgICovIFxuICAgIGZ1bmN0aW9uIGdldEJydXNoKGJydXNoSW5mbykge1xuICAgICAgICBpZiAoY2FjaGVCcnVzaCAhPSBudWxsICYmIGJydXNoSW5mby5jdXJTaXplID09IGNhY2hlU2l6ZSAmJiBicnVzaEluZm8uY3VyU3F1ZWV6ZSA9PSBjYWNoZVNxdWVlemVcbiAgICAgICAgICAgICAgICAmJiBicnVzaEluZm8uY3VyQW5nbGUgPT0gY2FjaGVBbmdsZSAmJiBicnVzaEluZm8udHlwZSA9PSBjYWNoZVR5cGUpIHtcbiAgICAgICAgICAgIHJldHVybiBjYWNoZUJydXNoO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBzd2l0Y2ggKGJydXNoSW5mby50eXBlKSB7XG4gICAgICAgICAgICBjYXNlIENQQnJ1c2hJbmZvLkJfUk9VTkRfQUlSQlJVU0g6XG4gICAgICAgICAgICAgICAgYnJ1c2ggPSBidWlsZEJydXNoU29mdChicnVzaCwgYnJ1c2hJbmZvKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBDUEJydXNoSW5mby5CX1JPVU5EX0FBOlxuICAgICAgICAgICAgICAgIGJydXNoID0gYnVpbGRCcnVzaEFBKGJydXNoLCBicnVzaEluZm8pO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIENQQnJ1c2hJbmZvLkJfUk9VTkRfUElYRUw6XG4gICAgICAgICAgICAgICAgYnJ1c2ggPSBidWlsZEJydXNoKGJydXNoLCBicnVzaEluZm8pO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIENQQnJ1c2hJbmZvLkJfU1FVQVJFX0FBOlxuICAgICAgICAgICAgICAgIGJydXNoID0gYnVpbGRCcnVzaFNxdWFyZUFBKGJydXNoLCBicnVzaEluZm8pO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIENQQnJ1c2hJbmZvLkJfU1FVQVJFX1BJWEVMOlxuICAgICAgICAgICAgICAgIGJydXNoID0gYnVpbGRCcnVzaFNxdWFyZShicnVzaCwgYnJ1c2hJbmZvKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG5cbiAgICAgICAgY2FjaGVCcnVzaCA9IGJydXNoO1xuICAgICAgICBjYWNoZVNpemUgPSBicnVzaEluZm8uY3VyU2l6ZTtcbiAgICAgICAgY2FjaGVUeXBlID0gYnJ1c2hJbmZvLnR5cGU7XG4gICAgICAgIGNhY2hlU3F1ZWV6ZSA9IGJydXNoSW5mby5jdXJTcXVlZXplO1xuICAgICAgICBjYWNoZUFuZ2xlID0gYnJ1c2hJbmZvLmN1ckFuZ2xlO1xuXG4gICAgICAgIHJldHVybiBicnVzaDtcbiAgICB9XG4gICAgXG4gICAgZnVuY3Rpb24gYXBwbHlUZXh0dXJlKGRhYiwgdGV4dHVyZUFtb3VudCkge1xuICAgICAgICB2YXIgXG4gICAgICAgICAgICBhbW91bnQgPSBNYXRoLmZsb29yKHRleHR1cmVBbW91bnQgKiAyNTUpLFxuICAgICAgICAgICAgdGV4dHVyZSA9IHRoYXQudGV4dHVyZSxcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGV4dHVyZVggPSBkYWIueCAlIHRleHR1cmUud2lkdGgsXG4gICAgICAgICAgICB0ZXh0dXJlWSA9IGRhYi55ICUgdGV4dHVyZS5oZWlnaHQsXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGJydXNoUG9zID0gMCxcbiAgICAgICAgICAgIHRleHR1cmVQb3MsIHRleHR1cmVFT0w7XG5cbiAgICAgICAgaWYgKHRleHR1cmVYIDwgMCkge1xuICAgICAgICAgICAgdGV4dHVyZVggKz0gdGV4dHVyZS53aWR0aDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0ZXh0dXJlWSA8IDApIHtcbiAgICAgICAgICAgIHRleHR1cmVZICs9IHRleHR1cmUuaGVpZ2h0O1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBmb3IgKHZhciB5ID0gMDsgeSA8IGRhYi5oZWlnaHQ7IHkrKykge1xuICAgICAgICAgICAgdGV4dHVyZVBvcyA9IHRleHR1cmVZICogdGV4dHVyZS53aWR0aCArIHRleHR1cmVYO1xuICAgICAgICAgICAgdGV4dHVyZUVPTCA9IHRleHR1cmVZICogdGV4dHVyZS53aWR0aCArIHRleHR1cmUud2lkdGg7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgZGFiLndpZHRoOyB4KyspIHtcbiAgICAgICAgICAgICAgICB2YXIgXG4gICAgICAgICAgICAgICAgICAgIGJydXNoVmFsdWUgPSBkYWIuYnJ1c2hbYnJ1c2hQb3NdLFxuICAgICAgICAgICAgICAgICAgICB0ZXh0dXJlVmFsdWUgPSB0ZXh0dXJlLmRhdGFbdGV4dHVyZVBvc107XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgZGFiLmJydXNoW2JydXNoUG9zXSA9IH5+KGJydXNoVmFsdWUgKiAoKHRleHR1cmVWYWx1ZSAqIGFtb3VudCAvIDI1NSkgXiAweGZmKSAvIDI1NSk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgYnJ1c2hQb3MrKztcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB0ZXh0dXJlUG9zKys7XG4gICAgICAgICAgICAgICAgaWYgKHRleHR1cmVQb3MgPT0gdGV4dHVyZUVPTCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBXcmFwIHRvIGxlZnQgc2lkZSBvZiB0ZXh0dXJlXG4gICAgICAgICAgICAgICAgICAgIHRleHR1cmVQb3MgLT0gdGV4dHVyZS53aWR0aDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRleHR1cmVZKys7XG4gICAgICAgICAgICBpZiAodGV4dHVyZVkgPT0gdGV4dHVyZS5oZWlnaHQpIHtcbiAgICAgICAgICAgICAgICB0ZXh0dXJlWSA9IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHggZmxvYXRcbiAgICAgKiBAcGFyYW0geSBmbG9hdFxuICAgICAqIGJydXNoSW5mbyAtIGEgQ1BCcnVzaEluZm8gb2JqZWN0XG4gICAgICovXG4gICAgdGhpcy5nZXREYWIgPSBmdW5jdGlvbih4LCB5LCBicnVzaEluZm8pIHtcbiAgICAgICAgdmFyIFxuICAgICAgICAgICAgZGFiID0ge1xuICAgICAgICAgICAgICAgIGFscGhhOiBicnVzaEluZm8uY3VyQWxwaGEsXG4gICAgICAgICAgICAgICAgd2lkdGg6IE1hdGguY2VpbChicnVzaEluZm8uY3VyU2l6ZSksXG4gICAgICAgICAgICAgICAgaGVpZ2h0OiBNYXRoLmNlaWwoYnJ1c2hJbmZvLmN1clNpemUpXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgIC8vIEZJWE1FOiBJIGRvbid0IGxpa2UgdGhpcyBzcGVjaWFsIGNhc2UgZm9yIFJPVU5EX1BJWEVMXG4gICAgICAgIC8vIGl0IHdvdWxkIGJlIGJldHRlciB0byBoYXZlIGJydXNoIHByZXNldHMgZm9yIHdvcmtpbmcgd2l0aCBwaXhlbHNcbiAgICAgICAgdmFyIHVzZUFBID0gYnJ1c2hJbmZvLmlzQUEgJiYgYnJ1c2hJbmZvLnR5cGUgIT0gQ1BCcnVzaEluZm8uQl9ST1VORF9QSVhFTDtcblxuICAgICAgICBpZiAodXNlQUEpIHtcbiAgICAgICAgICAgIGRhYi53aWR0aCsrO1xuICAgICAgICAgICAgZGFiLmhlaWdodCsrO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyXG4gICAgICAgICAgICBueCA9IHggLSBkYWIud2lkdGggLyAyLjAgKyAwLjUsXG4gICAgICAgICAgICBueSA9IHkgLSBkYWIuaGVpZ2h0IC8gMi4wICsgMC41O1xuXG4gICAgICAgIC8vIHRoaXMgaXMgbmVjZXNzYXJ5IGFzIEphdmEgdXNlcyBjb252ZXJ0IHRvd2FyZHMgemVybyBmbG9hdCB0byBpbnQgY29udmVyc2lvblxuICAgICAgICBpZiAobnggPCAwKSB7XG4gICAgICAgICAgICBueCAtPSAxO1xuICAgICAgICB9XG4gICAgICAgIGlmIChueSA8IDApIHtcbiAgICAgICAgICAgIG55IC09IDE7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodXNlQUEpIHtcbiAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgIGR4ID0gTWF0aC5hYnMobnggLSB+fm54KSxcbiAgICAgICAgICAgICAgICBkeSA9IE1hdGguYWJzKG55IC0gfn5ueSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGRhYi5icnVzaCA9IGdldEJydXNoV2l0aEFBKGJydXNoSW5mbywgZHgsIGR5KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGRhYi5icnVzaCA9IGdldEJydXNoKGJydXNoSW5mbyk7XG4gICAgICAgIH1cblxuICAgICAgICBkYWIueCA9IH5+bng7XG4gICAgICAgIGRhYi55ID0gfn5ueTtcblxuICAgICAgICBpZiAoYnJ1c2hJbmZvLnRleHR1cmUgPiAwLjAgJiYgdGhpcy50ZXh0dXJlICE9IG51bGwpIHtcbiAgICAgICAgICAgIC8vIHdlIG5lZWQgYSBicnVzaCBiaXRtYXAgdGhhdCBjYW4gYmUgbW9kaWZpZWQgZXZlcnl0aW1lXG4gICAgICAgICAgICAvLyB0aGUgb25lIGluIFwiYnJ1c2hcIiBjYW4gYmUga2VwdCBpbiBjYWNoZSBzbyBpZiB3ZSBhcmUgdXNpbmcgaXQsIG1ha2UgYSBjb3B5XG4gICAgICAgICAgICBpZiAoZGFiLmJydXNoID09IGJydXNoKSB7XG4gICAgICAgICAgICAgICAgYnJ1c2hBQS5zZXQoYnJ1c2gpO1xuICAgICAgICAgICAgICAgIGRhYi5icnVzaCA9IGJydXNoQUE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhcHBseVRleHR1cmUoZGFiLCBicnVzaEluZm8udGV4dHVyZSk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHJldHVybiBkYWI7XG4gICAgfVxuXG4gICAgdGhpcy5zZXRUZXh0dXJlID0gZnVuY3Rpb24odGV4dHVyZSkge1xuICAgICAgICB0aGlzLnRleHR1cmUgPSB0ZXh0dXJlO1xuICAgIH1cbn1cbiIsIi8qXG4gICAgQ2hpY2tlblBhaW50XG5cbiAgICBDaGlja2VuUGFpbnQgaXMgYSB0cmFuc2xhdGlvbiBvZiBDaGliaVBhaW50IGZyb20gSmF2YSB0byBKYXZhU2NyaXB0XG4gICAgYnkgTmljaG9sYXMgU2hlcmxvY2sgLyBDaGlja2VuIFNtb290aGllLlxuXG4gICAgQ2hpYmlQYWludCBpcyBDb3B5cmlnaHQgKGMpIDIwMDYtMjAwOCBNYXJjIFNjaGVmZXJcblxuICAgIENoaWNrZW5QYWludCBpcyBmcmVlIHNvZnR3YXJlOiB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3IgbW9kaWZ5XG4gICAgaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBhcyBwdWJsaXNoZWQgYnlcbiAgICB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uLCBlaXRoZXIgdmVyc2lvbiAzIG9mIHRoZSBMaWNlbnNlLCBvclxuICAgIChhdCB5b3VyIG9wdGlvbikgYW55IGxhdGVyIHZlcnNpb24uXG5cbiAgICBDaGlja2VuUGFpbnQgaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCxcbiAgICBidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZlxuICAgIE1FUkNIQU5UQUJJTElUWSBvciBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS4gIFNlZSB0aGVcbiAgICBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9yZSBkZXRhaWxzLlxuXG4gICAgWW91IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2VcbiAgICBhbG9uZyB3aXRoIENoaWNrZW5QYWludC4gSWYgbm90LCBzZWUgPGh0dHA6Ly93d3cuZ251Lm9yZy9saWNlbnNlcy8+LlxuKi9cblxuaW1wb3J0IENQQXJ0d29yayBmcm9tIFwiLi9DUEFydHdvcmtcIjtcbmltcG9ydCBDUExheWVyIGZyb20gXCIuL0NQTGF5ZXJcIjtcbmltcG9ydCBDUENvbG9yQm1wIGZyb20gXCIuL0NQQ29sb3JCbXBcIjtcbmltcG9ydCBBcnJheURhdGFTdHJlYW0gZnJvbSBcIi4uL3V0aWwvQXJyYXlEYXRhU3RyZWFtXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIENQQ2hpYmlGaWxlKCkge1xuXG4gICAgZnVuY3Rpb24gQ1BDaGliaUhlYWRlcihzdHJlYW0sIGNodW5rKSB7XG4gICAgICAgIHRoaXMudmVyc2lvbiA9IHN0cmVhbS5yZWFkVTMyQkUoKTtcbiAgICAgICAgdGhpcy53aWR0aCA9IHN0cmVhbS5yZWFkVTMyQkUoKTtcbiAgICAgICAgdGhpcy5oZWlnaHQgPSBzdHJlYW0ucmVhZFUzMkJFKCk7XG4gICAgICAgIHRoaXMubGF5ZXJzTmIgPSBzdHJlYW0ucmVhZFUzMkJFKCk7XG4gICAgfVxuICAgIFxuICAgIENQQ2hpYmlIZWFkZXIuRklYRURfSEVBREVSX0xFTkdUSCA9IDQgKiA0O1xuXG4gICAgZnVuY3Rpb24gQ1BDaGliaUNodW5rSGVhZGVyKHN0cmVhbSkge1xuICAgICAgICB2YXJcbiAgICAgICAgICAgIGNodW5rVHlwZSA9IG5ldyBBcnJheSg0KTtcblxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNodW5rVHlwZS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgY2h1bmtUeXBlW2ldID0gU3RyaW5nLmZyb21DaGFyQ29kZShzdHJlYW0ucmVhZEJ5dGUoKSk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHRoaXMuY2h1bmtUeXBlID0gY2h1bmtUeXBlLmpvaW4oXCJcIik7XG4gICAgICAgIHRoaXMuY2h1bmtTaXplID0gc3RyZWFtLnJlYWRVMzJCRSgpO1xuXG4gICAgICAgIGlmIChzdHJlYW0uZW9mKSB7XG4gICAgICAgICAgICB0aHJvdyBcIlRydW5jYXRlZCBjaHVua1wiO1xuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIGZ1bmN0aW9uIENQQ2hpYmlMYXllckNodW5rSGVhZGVyKCkge1xuICAgICAgICB2YXJcbiAgICAgICAgICAgIHBheWxvYWRPZmZzZXQsXG4gICAgICAgICAgICB0aXRsZUxlbmd0aDtcbiAgICAgICAgXG4gICAgICAgIHRoaXMucmVhZEZpeGVkSGVhZGVyID0gZnVuY3Rpb24oc3RyZWFtKSB7XG4gICAgICAgICAgICBwYXlsb2FkT2Zmc2V0ID0gc3RyZWFtLnJlYWRVMzJCRSgpO1xuICAgIFxuICAgICAgICAgICAgdGhpcy5ibGVuZE1vZGUgPSBzdHJlYW0ucmVhZFUzMkJFKCk7XG4gICAgICAgICAgICB0aGlzLmFscGhhID0gc3RyZWFtLnJlYWRVMzJCRSgpO1xuICAgICAgICAgICAgdGhpcy52aXNpYmxlID0gKHN0cmVhbS5yZWFkVTMyQkUoKSAmIDEpICE9IDA7XG4gICAgXG4gICAgICAgICAgICB0aXRsZUxlbmd0aCA9IHN0cmVhbS5yZWFkVTMyQkUoKTtcbiAgICAgICAgfTtcbiAgICAgICAgXG4gICAgICAgIC8qIFxuICAgICAgICAgKiBBZnRlciByZWFkaW5nIHRoZSBmaXhlZCBoZWFkZXIsIHVzZSB0aGlzIGZ1bmN0aW9uIHRvIGZpbmQgb3V0IGhvdyBtYW55IG1vcmUgYnl0ZXMgb2YgaGVhZGVyXG4gICAgICAgICAqIG5lZWQgdG8gYmUgcmVhZC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZ2V0VmFyaWFibGVIZWFkZXJMZW4gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiBwYXlsb2FkT2Zmc2V0IC0gQ1BDaGliaUxheWVyQ2h1bmtIZWFkZXIuRklYRURfSEVBREVSX0xFTkdUSDtcbiAgICAgICAgfTtcbiAgICAgICAgXG4gICAgICAgIHRoaXMuZ2V0VG90YWxIZWFkZXJMZW4gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiBDUENoaWJpTGF5ZXJDaHVua0hlYWRlci5GSVhFRF9IRUFERVJfTEVOR1RIICsgdGhpcy5nZXRWYXJpYWJsZUhlYWRlckxlbigpO1xuICAgICAgICB9O1xuICAgICAgICBcbiAgICAgICAgdGhpcy5yZWFkVmFyaWFibGVIZWFkZXIgPSBmdW5jdGlvbihzdHJlYW0pIHtcbiAgICAgICAgICAgIHRoaXMubmFtZSA9IHN0cmVhbS5yZWFkU3RyaW5nKHRpdGxlTGVuZ3RoKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gU2tpcCB0byB0aGUgcGl4ZWwgZGF0YSAoYWxsb3dzIGFkZGl0aW9uYWwgaGVhZGVyIGZpZWxkcyB0byBiZSBhZGRlZCB0aGF0IHdlIGRvbid0IHlldCBzdXBwb3J0KVxuICAgICAgICAgICAgc3RyZWFtLnNraXAocGF5bG9hZE9mZnNldCAtIHRpdGxlTGVuZ3RoIC0gQ1BDaGliaUxheWVyQ2h1bmtIZWFkZXIuRklYRURfSEVBREVSX0xFTkdUSCk7XG4gICAgICAgIH07XG4gICAgfVxuICAgIFxuICAgIC8vIFRoZSBzaXplIG9mIHRoZSBpbml0aWFsLCBmaXhlZC1sZW5ndGggcG9ydGlvbiBvZiB0aGUgaGVhZGVyXG4gICAgQ1BDaGliaUxheWVyQ2h1bmtIZWFkZXIuRklYRURfSEVBREVSX0xFTkdUSCA9IDQgKiA1O1xuXG4gICAgY29uc3RcbiAgICAgICAgQ0hJX01BR0lDID0gXCJDSElCSU9FS1wiLFxuXG4gICAgICAgIENIVU5LX1RBR19IRUFEID0gXCJIRUFEXCIsXG4gICAgICAgIENIVU5LX1RBR19MQVlFUiA9IFwiTEFZUlwiLFxuICAgICAgICBDSFVOS19UQUdfRU5EID0gXCJaRU5EXCIsXG4gICAgICAgIFxuICAgICAgICBCWVRFU19QRVJfUElYRUwgPSBDUENvbG9yQm1wLkJZVEVTX1BFUl9QSVhFTCxcbiAgICAgICAgQUxQSEFfQllURV9PRkZTRVQgPSBDUENvbG9yQm1wLkFMUEhBX0JZVEVfT0ZGU0VULFxuICAgICAgICBSRURfQllURV9PRkZTRVQgPSBDUENvbG9yQm1wLlJFRF9CWVRFX09GRlNFVCxcbiAgICAgICAgR1JFRU5fQllURV9PRkZTRVQgPSBDUENvbG9yQm1wLkdSRUVOX0JZVEVfT0ZGU0VULFxuICAgICAgICBCTFVFX0JZVEVfT0ZGU0VUID0gQ1BDb2xvckJtcC5CTFVFX0JZVEVfT0ZGU0VUO1xuXG4gICAgZnVuY3Rpb24gc2VyaWFsaXplRW5kQ2h1bmsoKSB7XG4gICAgICAgIHZhclxuICAgICAgICAgICAgYnVmZmVyID0gbmV3IFVpbnQ4QXJyYXkoQ0hVTktfVEFHX0VORC5sZW5ndGggKyA0KSxcbiAgICAgICAgICAgIHN0cmVhbSA9IG5ldyBBcnJheURhdGFTdHJlYW0oYnVmZmVyKTtcblxuICAgICAgICBzdHJlYW0ud3JpdGVTdHJpbmcoQ0hVTktfVEFHX0VORCk7XG4gICAgICAgIHN0cmVhbS53cml0ZVUzMkJFKDApO1xuXG4gICAgICAgIHJldHVybiBzdHJlYW0uZ2V0QXNEYXRhQXJyYXkoKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzZXJpYWxpemVIZWFkZXJDaHVuayhhcnR3b3JrKSB7XG4gICAgICAgIHZhclxuICAgICAgICAgICAgYnVmZmVyID0gbmV3IFVpbnQ4QXJyYXkoQ0hVTktfVEFHX0hFQUQubGVuZ3RoICsgNCAqIDUpLFxuICAgICAgICAgICAgc3RyZWFtID0gbmV3IEFycmF5RGF0YVN0cmVhbShidWZmZXIpO1xuXG4gICAgICAgIHN0cmVhbS53cml0ZVN0cmluZyhDSFVOS19UQUdfSEVBRCk7XG4gICAgICAgIHN0cmVhbS53cml0ZVUzMkJFKDE2KTsgLy8gQ2h1bmtTaXplXG5cbiAgICAgICAgc3RyZWFtLndyaXRlVTMyQkUoMCk7IC8vIEN1cnJlbnQgVmVyc2lvbjogTWFqb3I6IDAgTWlub3I6IDBcbiAgICAgICAgc3RyZWFtLndyaXRlVTMyQkUoYXJ0d29yay53aWR0aCk7XG4gICAgICAgIHN0cmVhbS53cml0ZVUzMkJFKGFydHdvcmsuaGVpZ2h0KTtcbiAgICAgICAgc3RyZWFtLndyaXRlVTMyQkUoYXJ0d29yay5nZXRMYXllckNvdW50KCkpO1xuXG4gICAgICAgIHJldHVybiBzdHJlYW0uZ2V0QXNEYXRhQXJyYXkoKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzZXJpYWxpemVMYXllckNodW5rKGxheWVyKSB7XG4gICAgICAgIHZhclxuICAgICAgICAgICAgY2h1bmtTaXplID0gMjAgKyBsYXllci5uYW1lLmxlbmd0aCArIGxheWVyLmRhdGEubGVuZ3RoLFxuXG4gICAgICAgICAgICBidWZmZXIgPSBuZXcgVWludDhBcnJheShDSFVOS19UQUdfTEFZRVIubGVuZ3RoICsgNCArIGNodW5rU2l6ZSksXG4gICAgICAgICAgICBzdHJlYW0gPSBuZXcgQXJyYXlEYXRhU3RyZWFtKGJ1ZmZlciksXG4gICAgICAgICAgICBwb3M7XG5cbiAgICAgICAgc3RyZWFtLndyaXRlU3RyaW5nKENIVU5LX1RBR19MQVlFUik7IC8vIENodW5rIElEXG4gICAgICAgIHN0cmVhbS53cml0ZVUzMkJFKGNodW5rU2l6ZSk7IC8vIENodW5rU2l6ZVxuXG4gICAgICAgIHN0cmVhbS53cml0ZVUzMkJFKDIwICsgbGF5ZXIubmFtZS5sZW5ndGgpOyAvLyBPZmZzZXQgdG8gbGF5ZXIgZGF0YSBmcm9tIHN0YXJ0IG9mIGhlYWRlclxuXG4gICAgICAgIHN0cmVhbS53cml0ZVUzMkJFKGxheWVyLmJsZW5kTW9kZSk7XG4gICAgICAgIHN0cmVhbS53cml0ZVUzMkJFKGxheWVyLmFscGhhKTtcbiAgICAgICAgc3RyZWFtLndyaXRlVTMyQkUobGF5ZXIudmlzaWJsZSA/IDEgOiAwKTsgLy8gbGF5ZXIgdmlzaWJpbGl0eSBhbmQgZnV0dXJlIGZsYWdzXG5cbiAgICAgICAgc3RyZWFtLndyaXRlVTMyQkUobGF5ZXIubmFtZS5sZW5ndGgpO1xuICAgICAgICBzdHJlYW0ud3JpdGVTdHJpbmcobGF5ZXIubmFtZSk7XG5cbiAgICAgICAgLy8gQ29udmVydCBsYXllciBieXRlcyBmcm9tIFJHQkEgdG8gQVJHQiBvcmRlciB0byBtYXRjaCB0aGUgQ2hpYmkgc3BlY3NcbiAgICAgICAgcG9zID0gc3RyZWFtLnBvcztcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsYXllci5kYXRhLmxlbmd0aDsgaSArPSBCWVRFU19QRVJfUElYRUwpIHtcbiAgICAgICAgICAgIGJ1ZmZlcltwb3MrK10gPSBsYXllci5kYXRhW2kgKyBBTFBIQV9CWVRFX09GRlNFVF07XG4gICAgICAgICAgICBidWZmZXJbcG9zKytdID0gbGF5ZXIuZGF0YVtpICsgUkVEX0JZVEVfT0ZGU0VUXTtcbiAgICAgICAgICAgIGJ1ZmZlcltwb3MrK10gPSBsYXllci5kYXRhW2kgKyBHUkVFTl9CWVRFX09GRlNFVF07XG4gICAgICAgICAgICBidWZmZXJbcG9zKytdID0gbGF5ZXIuZGF0YVtpICsgQkxVRV9CWVRFX09GRlNFVF07XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gYnVmZmVyO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNlcmlhbGl6ZSB0aGUgZ2l2ZW4gYXJ0d29yayB0byBDaGliaWZpbGUgZm9ybWF0LiBSZXR1cm5zIGEgcHJvbWlzZSB3aGljaCByZXNvbHZlcyB0byB0aGUgc2VyaWFsaXplZCBCbG9iLlxuICAgICAqL1xuICAgIHRoaXMuc2VyaWFsaXplID0gZnVuY3Rpb24oYXJ0d29yaykge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICBkZWZsYXRvciA9IG5ldyB3aW5kb3cucGFrby5EZWZsYXRlKHtcbiAgICAgICAgICAgICAgICAgICAgbGV2ZWw6IDdcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICBibG9iUGFydHMgPSBbXSxcbiAgICAgICAgICAgICAgICBtYWdpYyA9IG5ldyBVaW50OEFycmF5KENISV9NQUdJQy5sZW5ndGgpO1xuICAgIFxuICAgICAgICAgICAgLy8gVGhlIG1hZ2ljIGZpbGUgc2lnbmF0dXJlIGlzIG5vdCBaTElCIGNvbXByZXNzZWQ6XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IENISV9NQUdJQy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIG1hZ2ljW2ldID0gQ0hJX01BR0lDLmNoYXJDb2RlQXQoaSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBibG9iUGFydHMucHVzaChtYWdpYyk7XG4gICAgXG4gICAgICAgICAgICAvLyBUaGUgcmVzdCBnZXRzIGNvbXByZXNzZWRcbiAgICAgICAgICAgIGRlZmxhdG9yLnB1c2goc2VyaWFsaXplSGVhZGVyQ2h1bmsoYXJ0d29yayksIGZhbHNlKTtcbiAgICBcbiAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgIGxheWVycyA9IGFydHdvcmsuZ2V0TGF5ZXJzKCksXG4gICAgICAgICAgICAgICAgaSA9IDA7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIEluc2VydCBhIHNldHRpbWVvdXQgYmV0d2VlbiBlYWNoIHNlcmlhbGl6ZWQgbGF5ZXIsIHNvIHdlIGNhbiBtYWludGFpbiBicm93c2VyIHJlc3BvbnNpdmVuZXNzXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGZ1bmN0aW9uIHNlcmlhbGl6ZUxheWVyKCkge1xuICAgICAgICAgICAgICAgIGlmIChpID09IGxheWVycy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgZGVmbGF0b3IucHVzaChzZXJpYWxpemVFbmRDaHVuayhhcnR3b3JrKSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBibG9iUGFydHMucHVzaChkZWZsYXRvci5yZXN1bHQpO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShuZXcgQmxvYihibG9iUGFydHMsIHt0eXBlOiBcImFwcGxpY2F0aW9uL29jdGV0LXN0cmVhbVwifSkpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGRlZmxhdG9yLnB1c2goc2VyaWFsaXplTGF5ZXJDaHVuayhsYXllcnNbaSsrXSksIGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoc2VyaWFsaXplTGF5ZXIsIDEwKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHNldFRpbWVvdXQoc2VyaWFsaXplTGF5ZXIsIDEwKTtcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIGhhc0NoaWJpTWFnaWNNYXJrZXIoYXJyYXkpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBDSElfTUFHSUMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmIChhcnJheVtpXSAhPSBDSElfTUFHSUMuY2hhckNvZGVBdChpKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENvbmNhdCB0d28gVWludDhBcnJheXMgdG8gbWFrZSBhIG5ldyBvbmUgYW5kIHJldHVybiBpdC5cbiAgICAgKiBcbiAgICAgKiBFaXRoZXIgb25lIG1heSBiZSBzZXQgdG8gbnVsbC4gSWYgZWl0aGVyIG9uZSBpcyBudWxsLCB0aGUgb3RoZXIgaXMgcmV0dXJuZWQuIElmIGJvdGggYXJlIG51bGwsIG51bGwgaXNcbiAgICAgKiByZXR1cm5lZC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBjb25jYXRCdWZmZXJzKG9uZSwgdHdvKSB7XG4gICAgICAgIGlmIChvbmUgPT0gbnVsbCB8fCBvbmUubGVuZ3RoID09IDApIHtcbiAgICAgICAgICAgIHJldHVybiB0d287XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR3byA9PSBudWxsIHx8IHR3by5sZW5ndGggPT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIG9uZTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgdmFyXG4gICAgICAgICAgICByZXN1bHQgPSBuZXcgVWludDhBcnJheShvbmUubGVuZ3RoICsgdHdvLmxlbmd0aCk7XG4gICAgICAgIFxuICAgICAgICByZXN1bHQuc2V0KG9uZSwgMCk7XG4gICAgICAgIHJlc3VsdC5zZXQodHdvLCBvbmUubGVuZ3RoKTtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIFxuICAgIC8qKlxuICAgICAqIEF0dGVtcHQgdG8gbG9hZCBhIGNoaWJpZmlsZSBmcm9tIHRoZSBnaXZlbiBhcnJheWJ1ZmZlci5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIEEgQ1BBcnR3b3JrIG9uIHN1Y2Nlc3MsIG9yIG51bGwgb24gZmFpbHVyZS5cbiAgICAgKi9cbiAgICB0aGlzLnJlYWQgPSBmdW5jdGlvbihhcnJheUJ1ZmZlcikge1xuICAgICAgICBjb25zdFxuICAgICAgICAgICAgU1RBVEVfV0FJVF9GT1JfQ0hVTksgICAgICAgICAgICAgICA9IDAsXG4gICAgICAgICAgICBTVEFURV9ERUNPREVfSU1BR0VfSEVBREVSICAgICAgICAgID0gMSxcbiAgICAgICAgICAgIFNUQVRFX0RFQ09ERV9MQVlFUl9IRUFERVJfRklYRUQgICAgPSAyLFxuICAgICAgICAgICAgU1RBVEVfREVDT0RFX0xBWUVSX0hFQURFUl9WQVJJQUJMRSA9IDMsXG4gICAgICAgICAgICBTVEFURV9ERUNPREVfTEFZRVIgICAgICAgICAgICAgICAgID0gNCxcbiAgICAgICAgICAgIFNUQVRFX1NLSVBfVFJBSUxJTkdfQ0hVTktfQllURVMgICAgPSA1LFxuICAgICAgICAgICAgU1RBVEVfU1VDQ0VTUyAgICAgICAgICAgICAgICAgICAgICA9IDYsXG4gICAgICAgICAgICBTVEFURV9GQVRBTCAgICAgICAgICAgICAgICAgICAgICAgID0gMTA7XG4gICAgICAgIFxuICAgICAgICB2YXJcbiAgICAgICAgICAgIHBha28gPSBuZXcgd2luZG93LnBha28uSW5mbGF0ZSh7fSksXG4gICAgICAgICAgICBzdGF0ZSA9IFNUQVRFX1dBSVRfRk9SX0NIVU5LLFxuICAgICAgICAgICAgYXJ0d29yayA9IG51bGwsXG4gICAgICAgICAgICBsYXllckhlYWRlciwgbGF5ZXIsIFxuICAgICAgICAgICAgbGF5ZXJCeXRlc1JlYWQsIGxheWVyQnl0ZXNUb3RhbCwgc2tpcENvdW50LFxuICAgICAgICAgICAgaGVhZGVyQ2h1bmsgPSBudWxsLCBoZWFkZXIgPSBudWxsLFxuICAgICAgICAgICAgY2h1bmsgPSBudWxsLFxuICAgICAgICAgICAgYnVmZmVyID0gbnVsbDtcbiAgICAgICAgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBEZWNvZGUgQSxSLEcsQiBwaXhlbHMgZnJvbSB0aGUgZ2l2ZW4gYnVmZmVyIGludG8gdGhlIFIsRyxCLEEgcGl4ZWwgYXJyYXkgZ2l2ZW4gYnkgbGF5ZXJQaXguXG4gICAgICAgICAqIFxuICAgICAgICAgKiBUaGUgbGF5ZXJCeXRlc1JlYWQgYW5kIGxheWVyQnl0ZXNUb3RhbCB2YXJpYWJsZXMgYXJlIHVzZWQgdG8ga2VlcCB0cmFjayBvZiB0aGUgZGVjb2RlIHByb2Nlc3MgYW5kIHRvIFxuICAgICAgICAgKiBsaW1pdCB0aGUgbnVtYmVyIG9mIGJ5dGVzIHJlYWQsIHJlc3BlY3RpdmVseS5cbiAgICAgICAgICogXG4gICAgICAgICAqIFJldHVybnMgdGhlIGJ1ZmZlciB3aXRoIHRoZSByZWFkIGJ5dGVzIHJlbW92ZWQgZnJvbSB0aGUgZnJvbnQsIG9yIG51bGwgaWYgdGhlIGJ1ZmZlciB3YXMgcmVhZCBpbiBpdHMgZW50aXJldHkuXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBkZWNvZGVQaXhlbHMoYnVmZmVyLCBsYXllclBpeCkge1xuICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgc3VicGl4ZWwgPSBsYXllckJ5dGVzUmVhZCAlIEJZVEVTX1BFUl9QSVhFTCxcbiAgICAgICAgICAgICAgICBkc3RQaXhlbFN0YXJ0T2Zmc2V0ID0gbGF5ZXJCeXRlc1JlYWQgLSBzdWJwaXhlbCxcbiAgICAgICAgICAgICAgICBidWZmZXJQb3MgPSAwLFxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIE1hcCBmcm9tIHNvdXJjZSBjaGFubmVsIG9yZGVyIHRvIENQTGF5ZXIncyBkZXN0IG9yZGVyXG4gICAgICAgICAgICAgICAgY2hhbm5lbE1hcCA9IFtcbiAgICAgICAgICAgICAgICAgICAgQUxQSEFfQllURV9PRkZTRVQsIFJFRF9CWVRFX09GRlNFVCwgR1JFRU5fQllURV9PRkZTRVQsIEJMVUVfQllURV9PRkZTRVRcbiAgICAgICAgICAgICAgICBdO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBUaGUgZmlyc3QgcGl4ZWwgbWlnaHQgYmUgYSBwYXJ0aWFsIG9uZSBzaW5jZSB3ZSBtaWdodCBiZSBjb250aW51aW5nIGEgcGl4ZWwgc3BsaXQgb3ZlciBidWZmZXJzXG4gICAgICAgICAgICBmb3IgKDsgc3VicGl4ZWwgPCBCWVRFU19QRVJfUElYRUwgJiYgYnVmZmVyUG9zIDwgYnVmZmVyLmxlbmd0aDsgc3VicGl4ZWwrKykge1xuICAgICAgICAgICAgICAgIGxheWVyUGl4W2RzdFBpeGVsU3RhcnRPZmZzZXQgKyBjaGFubmVsTWFwW3N1YnBpeGVsXV0gPSBidWZmZXJbYnVmZmVyUG9zXTtcbiAgICAgICAgICAgICAgICBsYXllckJ5dGVzUmVhZCsrO1xuICAgICAgICAgICAgICAgIGJ1ZmZlclBvcysrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBIb3cgbWFueSBtb3JlIHBpeGVscyBhcmUgd2UgdG8gcmVhZCBpbiB0aGlzIGJ1ZmZlcj9cbiAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgIGJ5dGVzUmVtYWluID0gTWF0aC5taW4oYnVmZmVyLmxlbmd0aCAtIGJ1ZmZlclBvcywgbGF5ZXJCeXRlc1RvdGFsIC0gbGF5ZXJCeXRlc1JlYWQpIHwgMCxcbiAgICAgICAgICAgICAgICBmdWxsUGl4ZWxzUmVtYWluID0gKGJ5dGVzUmVtYWluIC8gQllURVNfUEVSX1BJWEVMKSB8IDAsXG4gICAgICAgICAgICAgICAgc3VicGl4ZWxzUmVtYWluID0gYnl0ZXNSZW1haW4gJSBCWVRFU19QRVJfUElYRUw7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZnVsbFBpeGVsc1JlbWFpbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgbGF5ZXJQaXhbbGF5ZXJCeXRlc1JlYWQgKyBBTFBIQV9CWVRFX09GRlNFVF0gPSBidWZmZXJbYnVmZmVyUG9zXTtcbiAgICAgICAgICAgICAgICBsYXllclBpeFtsYXllckJ5dGVzUmVhZCArIFJFRF9CWVRFX09GRlNFVF0gPSBidWZmZXJbYnVmZmVyUG9zICsgMV07XG4gICAgICAgICAgICAgICAgbGF5ZXJQaXhbbGF5ZXJCeXRlc1JlYWQgKyBHUkVFTl9CWVRFX09GRlNFVF0gPSBidWZmZXJbYnVmZmVyUG9zICsgMl07XG4gICAgICAgICAgICAgICAgbGF5ZXJQaXhbbGF5ZXJCeXRlc1JlYWQgKyBCTFVFX0JZVEVfT0ZGU0VUXSA9IGJ1ZmZlcltidWZmZXJQb3MgKyAzXTtcbiAgICAgICAgICAgICAgICBsYXllckJ5dGVzUmVhZCArPSBCWVRFU19QRVJfUElYRUw7XG4gICAgICAgICAgICAgICAgYnVmZmVyUG9zICs9IEJZVEVTX1BFUl9QSVhFTDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gUmVhZCBhIGZyYWN0aW9uYWwgcGl4ZWwgYXQgdGhlIGVuZCBvZiB0aGUgYnVmZmVyXG4gICAgICAgICAgICBkc3RQaXhlbFN0YXJ0T2Zmc2V0ID0gbGF5ZXJCeXRlc1JlYWQ7XG4gICAgICAgICAgICBmb3IgKHN1YnBpeGVsID0gMDsgc3VicGl4ZWwgPCBzdWJwaXhlbHNSZW1haW47IHN1YnBpeGVsKyspIHtcbiAgICAgICAgICAgICAgICBsYXllclBpeFtkc3RQaXhlbFN0YXJ0T2Zmc2V0ICsgY2hhbm5lbE1hcFtzdWJwaXhlbF1dID0gYnVmZmVyW2J1ZmZlclBvc107XG4gICAgICAgICAgICAgICAgbGF5ZXJCeXRlc1JlYWQrKztcbiAgICAgICAgICAgICAgICBidWZmZXJQb3MrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKGJ1ZmZlclBvcyA8IGJ1ZmZlci5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAvLyBMYXllciB3YXMgY29tcGxldGVkIGJlZm9yZSB0aGUgZW5kIG9mIHRoZSBidWZmZXIsIHRoZXJlIGlzIGJ1ZmZlciBsZWZ0IG92ZXIgZm9yIHNvbWVvbmUgZWxzZSB0byB1c2VcbiAgICAgICAgICAgICAgICByZXR1cm4gYnVmZmVyLnN1YmFycmF5KGJ1ZmZlclBvcyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIEJ1ZmZlciBleGhhdXN0ZWRcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgZnVuY3Rpb24gcHJvY2Vzc0Jsb2NrKGJsb2NrKSB7XG4gICAgICAgICAgICB2YXIgXG4gICAgICAgICAgICAgICAgc3RyZWFtO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBBZGQgYSBsb29wIGhlcmUgc28gd2UgY2FuIHJlLWVudGVyIHRoZSBzd2l0Y2ggd2l0aCAnY29udGludWUnXG4gICAgICAgICAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoc3RhdGUpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBTVEFURV9XQUlUX0ZPUl9DSFVOSzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1ZmZlciA9IGNvbmNhdEJ1ZmZlcnMoYnVmZmVyLCBibG9jayk7XG4gICAgICAgICAgICAgICAgICAgICAgICBibG9jayA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFdhaXQgZm9yIHdob2xlIGNodW5rIGhlYWRlciB0byBiZWNvbWUgYXZhaWxhYmxlXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYnVmZmVyLmxlbmd0aCA8IDgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gRGVjb2RlIGNodW5rIGhlYWRlclxuICAgICAgICAgICAgICAgICAgICAgICAgc3RyZWFtID0gbmV3IEFycmF5RGF0YVN0cmVhbShidWZmZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2h1bmsgPSBuZXcgQ1BDaGliaUNodW5rSGVhZGVyKHN0cmVhbSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJlbW92ZSB0aGUgY2h1bmsgaGVhZGVyIGZyb20gdGhlIHN0YXJ0IG9mIHRoZSBidWZmZXJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1ZmZlciA9IGJ1ZmZlci5zdWJhcnJheShzdHJlYW0ucG9zKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGhlYWRlckNodW5rKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNodW5rLmNodW5rVHlwZSA9PSBDSFVOS19UQUdfRU5EKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlID0gU1RBVEVfU1VDQ0VTUztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChjaHVuay5jaHVua1R5cGUgPT0gQ0hVTktfVEFHX0xBWUVSKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlID0gU1RBVEVfREVDT0RFX0xBWUVSX0hFQURFUl9GSVhFRDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIlVua25vd24gY2h1bmsgdHlwZSAnXCIgKyBjaHVuay5jaHVua1R5cGUgKyBcIicsIGF0dGVtcHRpbmcgdG8gc2tpcC4uLlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrID0gYnVmZmVyO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBidWZmZXIgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2tpcENvdW50ID0gY2h1bmsuY2h1bmtTaXplO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZSA9IFNUQVRFX1NLSVBfVFJBSUxJTkdfQ0hVTktfQllURVM7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChjaHVuay5jaHVua1R5cGUgPT0gQ0hVTktfVEFHX0hFQUQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJDaHVuayA9IGNodW5rO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRyeSB0byBkZWNvZGUgdGhlIGhlYWRlclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlID0gU1RBVEVfREVDT0RFX0lNQUdFX0hFQURFUjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRmlsZSBkaWRuJ3Qgc3RhcnQgd2l0aCBpbWFnZSBoZWFkZXIgY2h1bmtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZSA9IFNUQVRFX0ZBVEFMO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBTVEFURV9ERUNPREVfSU1BR0VfSEVBREVSOlxuICAgICAgICAgICAgICAgICAgICAgICAgYnVmZmVyID0gY29uY2F0QnVmZmVycyhidWZmZXIsIGJsb2NrKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gV2FpdCBmb3Igd2hvbGUgY2h1bmsgdG8gYmUgYXZhaWxhYmxlXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYnVmZmVyLmxlbmd0aCA8IGhlYWRlckNodW5rLmNodW5rU2l6ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHJlYW0gPSBuZXcgQXJyYXlEYXRhU3RyZWFtKGJ1ZmZlcik7XG4gICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXIgPSBuZXcgQ1BDaGliaUhlYWRlcihzdHJlYW0sIGhlYWRlckNodW5rKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKChoZWFkZXIudmVyc2lvbiA+Pj4gMTYpID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlID0gU1RBVEVfRkFUQUw7IC8vIHRoZSBmaWxlIHZlcnNpb24gaXMgaGlnaGVyIHRoYW4gd2hhdCB3ZSBjYW4gZGVhbCB3aXRoLCBiYWlsIG91dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBhcnR3b3JrID0gbmV3IENQQXJ0d29yayhoZWFkZXIud2lkdGgsIGhlYWRlci5oZWlnaHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBibG9jayA9IGJ1ZmZlcjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1ZmZlciA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIHNraXBDb3VudCA9IGhlYWRlckNodW5rLmNodW5rU2l6ZTsgLy8gU2tpcCB0aGUgaGVhZGVyIGNodW5rIGFsb25nIHdpdGggYW55IHRyYWlsaW5nIGJ5dGVzXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZSA9IFNUQVRFX1NLSVBfVFJBSUxJTkdfQ0hVTktfQllURVM7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgU1RBVEVfREVDT0RFX0xBWUVSX0hFQURFUl9GSVhFRDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1ZmZlciA9IGNvbmNhdEJ1ZmZlcnMoYnVmZmVyLCBibG9jayk7XG4gICAgICAgICAgICAgICAgICAgICAgICBibG9jayA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFdhaXQgZm9yIGZpcnN0IHBhcnQgb2YgaGVhZGVyIHRvIGFycml2ZVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGJ1ZmZlci5sZW5ndGggPCBDUENoaWJpTGF5ZXJDaHVua0hlYWRlci5GSVhFRF9IRUFERVJfTEVOR1RIKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGxheWVySGVhZGVyID0gbmV3IENQQ2hpYmlMYXllckNodW5rSGVhZGVyKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0cmVhbSA9IG5ldyBBcnJheURhdGFTdHJlYW0oYnVmZmVyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxheWVySGVhZGVyLnJlYWRGaXhlZEhlYWRlcihzdHJlYW0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBidWZmZXIgPSBidWZmZXIuc3ViYXJyYXkoc3RyZWFtLnBvcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlID0gU1RBVEVfREVDT0RFX0xBWUVSX0hFQURFUl9WQVJJQUJMRVxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFNUQVRFX0RFQ09ERV9MQVlFUl9IRUFERVJfVkFSSUFCTEU6XG4gICAgICAgICAgICAgICAgICAgICAgICBidWZmZXIgPSBjb25jYXRCdWZmZXJzKGJ1ZmZlciwgYmxvY2spO1xuICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2sgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBXYWl0IGZvciB2YXJpYWJsZSBwYXJ0IG9mIGhlYWRlciB0byBhcnJpdmVcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChidWZmZXIubGVuZ3RoIDwgbGF5ZXJIZWFkZXIuZ2V0VmFyaWFibGVIZWFkZXJMZW4oKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHJlYW0gPSBuZXcgQXJyYXlEYXRhU3RyZWFtKGJ1ZmZlcik7XG4gICAgICAgICAgICAgICAgICAgICAgICBsYXllckhlYWRlci5yZWFkVmFyaWFibGVIZWFkZXIoc3RyZWFtKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgYnVmZmVyID0gYnVmZmVyLnN1YmFycmF5KHN0cmVhbS5wb3MpO1xuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBsYXllciA9IG5ldyBDUExheWVyKGhlYWRlci53aWR0aCwgaGVhZGVyLmhlaWdodCwgbGF5ZXJIZWFkZXIubmFtZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBsYXllci5ibGVuZE1vZGUgPSBsYXllckhlYWRlci5ibGVuZE1vZGU7XG4gICAgICAgICAgICAgICAgICAgICAgICBsYXllci5hbHBoYSA9IGxheWVySGVhZGVyLmFscGhhO1xuICAgICAgICAgICAgICAgICAgICAgICAgbGF5ZXIudmlzaWJsZSA9IGxheWVySGVhZGVyLnZpc2libGU7XG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGxheWVyQnl0ZXNSZWFkID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxheWVyQnl0ZXNUb3RhbCA9IGhlYWRlci53aWR0aCAqIGhlYWRlci5oZWlnaHQgKiBCWVRFU19QRVJfUElYRUw7XG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qIFxuICAgICAgICAgICAgICAgICAgICAgICAgICogV2hpbGUgZGVjb2RpbmcgbGF5ZXJzLCB3ZSB3b24ndCBrZWVwIGEgcGVyc2lzdGVudCBidWZmZXIgYXJvdW5kLCBzbyBpZiB3ZSBoYXZlIGFueVxuICAgICAgICAgICAgICAgICAgICAgICAgICogYnl0ZXMgbGVmdCBvdmVyLCBwcm92aWRlIHRoZW0gdG8gdGhlIG5leHQgc3RhdGUgYXMgaWYgdGhleSB3ZXJlIGEgbmV3bHkgaW5mbGF0ZWQgYmxvY2suXG4gICAgICAgICAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrID0gYnVmZmVyO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnVmZmVyID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUgPSBTVEFURV9ERUNPREVfTEFZRVI7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgU1RBVEVfREVDT0RFX0xBWUVSOlxuICAgICAgICAgICAgICAgICAgICAgICAgLyogXG4gICAgICAgICAgICAgICAgICAgICAgICAgKiBXaGVuIGRlY29kaW5nIGxheWVyIGRhdGEsIHdlIG5ldmVyIGNvbmNhdCBibG9ja3MgdG9nZXRoZXIsIHdlIGFyZSBjYXBhYmxlIG9mIGRlY29kaW5nXG4gICAgICAgICAgICAgICAgICAgICAgICAgKiBwYXJ0aWFsIHBpeGVscyB0aGF0IGdldCBzcGxpdCBvdmVyIGJsb2NrIGJvdW5kYXJpZXMuIFNvIHdlIGRvbid0IHVzZSAnYnVmZmVyJyB0byBhY2N1bXVsYXRlXG4gICAgICAgICAgICAgICAgICAgICAgICAgKiBkYXRhLCBhbmQgb25seSByZWFkIGZyb20gaW5jb21pbmcgJ2Jsb2NrJ3MuXG4gICAgICAgICAgICAgICAgICAgICAgICAgKi8gXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYmxvY2sgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrID0gZGVjb2RlUGl4ZWxzKGJsb2NrLCBsYXllci5kYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobGF5ZXJCeXRlc1JlYWQgPj0gbGF5ZXJCeXRlc1RvdGFsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFydHdvcmsuYWRkTGF5ZXJPYmplY3QobGF5ZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2tpcCBhbnkgdHJhaWxpbmcgYnl0ZXMgaW4gdGhlIGxheWVyIGNodW5rXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNraXBDb3VudCA9IGNodW5rLmNodW5rU2l6ZSAtIGxheWVySGVhZGVyLmdldFRvdGFsSGVhZGVyTGVuKCkgLSBsYXllckJ5dGVzVG90YWw7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlID0gU1RBVEVfU0tJUF9UUkFJTElOR19DSFVOS19CWVRFUztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBTVEFURV9TS0lQX1RSQUlMSU5HX0NIVU5LX0JZVEVTOlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGJsb2NrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNraXBDb3VudCA8IGJsb2NrLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9jayA9IGJsb2NrLnN1YmFycmF5KHNraXBDb3VudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNraXBDb3VudCA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2tpcENvdW50IC09IGJsb2NrLmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2sgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNraXBDb3VudCA9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUgPSBTVEFURV9XQUlUX0ZPUl9DSFVOSztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBhcnJheUJ1ZmZlciA9IG5ldyBVaW50OEFycmF5KGFycmF5QnVmZmVyKTtcblxuICAgICAgICBpZiAoIWhhc0NoaWJpTWFnaWNNYXJrZXIoYXJyYXlCdWZmZXIpKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDsgLy8gbm90IGEgQ2hpYmlQYWludCBmaWxlXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIFJlbW92ZSB0aGUgbWFnaWMgaGVhZGVyXG4gICAgICAgIGFycmF5QnVmZmVyID0gYXJyYXlCdWZmZXIuc3ViYXJyYXkoQ0hJX01BR0lDLmxlbmd0aCk7XG4gICAgICAgIFxuICAgICAgICBwYWtvLm9uRGF0YSA9IHByb2Nlc3NCbG9jaztcbiAgICAgICAgXG4gICAgICAgIHBha28ub25FbmQgPSBmdW5jdGlvbihzdGF0dXMpIHtcbiAgICAgICAgICAgIGlmIChzdGF0dXMgPT09IDAgJiYgc3RhdGUgPT0gU1RBVEVfU1VDQ0VTUykge1xuICAgICAgICAgICAgICAgIGFydHdvcmsuc2V0QWN0aXZlTGF5ZXJJbmRleChhcnR3b3JrLmdldFRvcG1vc3RWaXNpYmxlTGF5ZXIoKSk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgdGhpcy5yZXN1bHQgPSBhcnR3b3JrO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkZhdGFsIGVycm9yIGRlY29kaW5nIENoaWJpRmlsZVwiKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB0aGlzLnJlc3VsdCA9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gQmVnaW4gZGVjb21wcmVzc2lvbi9kZWNvZGluZ1xuICAgICAgICBwYWtvLnB1c2goYXJyYXlCdWZmZXIpO1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHBha28ucmVzdWx0O1xuICAgIH07XG59XG4iLCIvKlxuICAgIENoaWNrZW5QYWludFxuXG4gICAgQ2hpY2tlblBhaW50IGlzIGEgdHJhbnNsYXRpb24gb2YgQ2hpYmlQYWludCBmcm9tIEphdmEgdG8gSmF2YVNjcmlwdFxuICAgIGJ5IE5pY2hvbGFzIFNoZXJsb2NrIC8gQ2hpY2tlbiBTbW9vdGhpZS5cblxuICAgIENoaWJpUGFpbnQgaXMgQ29weXJpZ2h0IChjKSAyMDA2LTIwMDggTWFyYyBTY2hlZmVyXG5cbiAgICBDaGlja2VuUGFpbnQgaXMgZnJlZSBzb2Z0d2FyZTogeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yIG1vZGlmeVxuICAgIGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgYXMgcHVibGlzaGVkIGJ5XG4gICAgdGhlIEZyZWUgU29mdHdhcmUgRm91bmRhdGlvbiwgZWl0aGVyIHZlcnNpb24gMyBvZiB0aGUgTGljZW5zZSwgb3JcbiAgICAoYXQgeW91ciBvcHRpb24pIGFueSBsYXRlciB2ZXJzaW9uLlxuXG4gICAgQ2hpY2tlblBhaW50IGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsXG4gICAgYnV0IFdJVEhPVVQgQU5ZIFdBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2ZcbiAgICBNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuICBTZWUgdGhlXG4gICAgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy5cblxuICAgIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXG4gICAgYWxvbmcgd2l0aCBDaGlja2VuUGFpbnQuIElmIG5vdCwgc2VlIDxodHRwOi8vd3d3LmdudS5vcmcvbGljZW5zZXMvPi5cbiovXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIENQQ2xpcChibXAsIHgsIHkpIHtcbiAgICB0aGlzLmJtcCA9IGJtcDtcbiAgICBcbiAgICB0aGlzLnggPSB4O1xuICAgIHRoaXMueSA9IHk7XG59OyIsIi8qXG4gICAgQ2hpY2tlblBhaW50XG4gICAgXG4gICAgQ2hpY2tlblBhaW50IGlzIGEgdHJhbnNsYXRpb24gb2YgQ2hpYmlQYWludCBmcm9tIEphdmEgdG8gSmF2YVNjcmlwdFxuICAgIGJ5IE5pY2hvbGFzIFNoZXJsb2NrIC8gQ2hpY2tlbiBTbW9vdGhpZS5cbiAgICBcbiAgICBDaGliaVBhaW50IGlzIENvcHlyaWdodCAoYykgMjAwNi0yMDA4IE1hcmMgU2NoZWZlclxuXG4gICAgQ2hpY2tlblBhaW50IGlzIGZyZWUgc29mdHdhcmU6IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vciBtb2RpZnlcbiAgICBpdCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGFzIHB1Ymxpc2hlZCBieVxuICAgIHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb24sIGVpdGhlciB2ZXJzaW9uIDMgb2YgdGhlIExpY2Vuc2UsIG9yXG4gICAgKGF0IHlvdXIgb3B0aW9uKSBhbnkgbGF0ZXIgdmVyc2lvbi5cblxuICAgIENoaWNrZW5QYWludCBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLFxuICAgIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mXG4gICAgTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiAgU2VlIHRoZVxuICAgIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuXG5cbiAgICBZb3Ugc2hvdWxkIGhhdmUgcmVjZWl2ZWQgYSBjb3B5IG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZVxuICAgIGFsb25nIHdpdGggQ2hpY2tlblBhaW50LiBJZiBub3QsIHNlZSA8aHR0cDovL3d3dy5nbnUub3JnL2xpY2Vuc2VzLz4uXG4qL1xuXG5pbXBvcnQgQ1BCaXRtYXAgZnJvbSBcIi4vQ1BCaXRtYXBcIjtcbmltcG9ydCBDUFJlY3QgZnJvbSBcIi4uL3V0aWwvQ1BSZWN0XCI7XG5cbmZ1bmN0aW9uIGNyZWF0ZUltYWdlRGF0YSh3aWR0aCwgaGVpZ2h0KSB7XG4gICAgLy8gcmV0dXJuIG5ldyBJbWFnZURhdGEodGhpcy53aWR0aCwgdGhpcy5oZWlnaHQpOyAvLyBEb2Vzbid0IHdvcmsgb24gb2xkIElFXG4gICAgdmFyXG4gICAgICAgIGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIiksXG4gICAgICAgIGNvbnRleHQgPSBjYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpO1xuICAgIFxuICAgIHJldHVybiBjb250ZXh0LmNyZWF0ZUltYWdlRGF0YSh3aWR0aCwgaGVpZ2h0KTtcbn1cblxuLy9cbi8vIEEgMzJicHAgYml0bWFwIGNsYXNzIChvbmUgYnl0ZSBwZXIgY2hhbm5lbCBpbiBSR0JBIG9yZGVyKVxuLy9cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gQ1BDb2xvckJtcCh3aWR0aCwgaGVpZ2h0KSB7XG4gICAgQ1BCaXRtYXAuY2FsbCh0aGlzLCB3aWR0aCwgaGVpZ2h0KTtcblxuICAgIC8vIFRoZSBJbWFnZURhdGEgb2JqZWN0IHRoYXQgaG9sZHMgdGhlIGltYWdlIGRhdGFcbiAgICB0aGlzLmltYWdlRGF0YSA9IGNyZWF0ZUltYWdlRGF0YSh0aGlzLndpZHRoLCB0aGlzLmhlaWdodCk7XG4gICAgXG4gICAgLy8gVGhlIGJpdG1hcCBkYXRhIGFycmF5IChvbmUgYnl0ZSBwZXIgY2hhbm5lbCBpbiBSR0JBIG9yZGVyKVxuICAgIHRoaXMuZGF0YSA9IHRoaXMuaW1hZ2VEYXRhLmRhdGE7XG59XG5cbkNQQ29sb3JCbXAucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShDUEJpdG1hcC5wcm90b3R5cGUpO1xuQ1BDb2xvckJtcC5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBDUENvbG9yQm1wO1xuXG5DUENvbG9yQm1wLkJZVEVTX1BFUl9QSVhFTCA9IDQ7XG5DUENvbG9yQm1wLlJFRF9CWVRFX09GRlNFVCA9IDA7XG5DUENvbG9yQm1wLkdSRUVOX0JZVEVfT0ZGU0VUID0gMTtcbkNQQ29sb3JCbXAuQkxVRV9CWVRFX09GRlNFVCA9IDI7XG5DUENvbG9yQm1wLkFMUEhBX0JZVEVfT0ZGU0VUID0gMztcblxuLy8gQ3JlYXRlcyBhIENQQml0bWFwIGZyb20gYSBwb3J0aW9uIG9mIHRoaXMgYml0bWFwXG5DUENvbG9yQm1wLnByb3RvdHlwZS5jbG9uZVJlY3QgPSBmdW5jdGlvbihyZWN0KSB7XG4gICAgdmFyXG4gICAgICAgIHJlc3VsdCA9IG5ldyBDUENvbG9yQm1wKHJlY3QuZ2V0V2lkdGgoKSwgcmVjdC5nZXRIZWlnaHQoKSk7XG4gICAgXG4gICAgcmVzdWx0LmNvcHlCaXRtYXBSZWN0KHRoaXMsIDAsIDAsIHJlY3QpO1xuICAgIFxuICAgIHJldHVybiByZXN1bHQ7XG59O1xuXG4vL1xuLy8gUGl4ZWwgYWNjZXNzIHdpdGggZnJpZW5kbHkgY2xpcHBpbmcuIFBpeGVsIHdpbGwgYmUgMzItYml0IGludGVnZXIgaW4gQVJHQiBmb3JtYXRcbi8vXG5DUENvbG9yQm1wLnByb3RvdHlwZS5nZXRQaXhlbCA9IGZ1bmN0aW9uKHgsIHkpIHtcbiAgICB4ID0gTWF0aC5tYXgoMCwgTWF0aC5taW4odGhpcy53aWR0aCAtIDEsIHgpKTtcbiAgICB5ID0gTWF0aC5tYXgoMCwgTWF0aC5taW4odGhpcy5oZWlnaHQgLSAxLCB5KSk7XG5cbiAgICB2YXJcbiAgICAgICAgcGl4SW5kZXggPSB0aGlzLm9mZnNldE9mUGl4ZWwoeCwgeSk7XG4gICAgXG4gICAgcmV0dXJuICh0aGlzLmRhdGFbcGl4SW5kZXggKyBDUENvbG9yQm1wLkFMUEhBX0JZVEVfT0ZGU0VUXSA8PCAyNCkgXG4gICAgICAgIHwgKHRoaXMuZGF0YVtwaXhJbmRleCArIENQQ29sb3JCbXAuUkVEX0JZVEVfT0ZGU0VUXSAgICA8PCAxNikgXG4gICAgICAgIHwgKHRoaXMuZGF0YVtwaXhJbmRleCArIENQQ29sb3JCbXAuR1JFRU5fQllURV9PRkZTRVRdICA8PCA4KSBcbiAgICAgICAgfCB0aGlzLmRhdGFbcGl4SW5kZXggKyBDUENvbG9yQm1wLkJMVUVfQllURV9PRkZTRVRdO1xufTtcblxuLy9cbi8vIEdldCBhbiByLGcsYixhIGFycmF5IG9mIHRoZSB4b3Igb2YgdGhpcyBiaXRtYXAgYW5kIHRoZSBnaXZlbiBvbmUsIHdpdGhpbiB0aGUgZ2l2ZW4gcmVjdGFuZ2xlXG4vL1xuQ1BDb2xvckJtcC5wcm90b3R5cGUuY29weVJlY3RYT1IgPSBmdW5jdGlvbihibXAsIHJlY3QpIHtcbiAgICByZWN0ID0gdGhpcy5nZXRCb3VuZHMoKS5jbGlwKHJlY3QpO1xuICAgIFxuICAgIHZhciBcbiAgICAgICAgdyA9IHJlY3QuZ2V0V2lkdGgoKSxcbiAgICAgICAgaCA9IHJlY3QuZ2V0SGVpZ2h0KCksXG4gICAgICAgIFxuICAgICAgICBidWZmZXIgPSBuZXcgVWludDhBcnJheSh3ICogaCAqIENQQ29sb3JCbXAuQllURVNfUEVSX1BJWEVMKSxcbiAgICAgICAgXG4gICAgICAgIG91dHB1dEluZGV4ID0gMCxcbiAgICAgICAgYm1wMUluZGV4ID0gdGhpcy5vZmZzZXRPZlBpeGVsKHJlY3QubGVmdCwgcmVjdC50b3ApLCBcbiAgICAgICAgYm1wMkluZGV4ID0gYm1wLm9mZnNldE9mUGl4ZWwocmVjdC5sZWZ0LCByZWN0LnRvcCksXG4gICAgICAgIFxuICAgICAgICBibXAxWVNraXAgPSAodGhpcy53aWR0aCAtIHcpICogQ1BDb2xvckJtcC5CWVRFU19QRVJfUElYRUwsXG4gICAgICAgIGJtcDJZU2tpcCA9IChibXAud2lkdGggLSB3KSAqIENQQ29sb3JCbXAuQllURVNfUEVSX1BJWEVMLFxuICAgICAgICBcbiAgICAgICAgd2lkdGhCeXRlcyA9IHcgKiBDUENvbG9yQm1wLkJZVEVTX1BFUl9QSVhFTDtcbiAgICBcbiAgICBmb3IgKHZhciB5ID0gcmVjdC50b3A7IHkgPCByZWN0LmJvdHRvbTsgeSsrLCBibXAxSW5kZXggKz0gYm1wMVlTa2lwLCBibXAySW5kZXggKz0gYm1wMllTa2lwKSB7XG4gICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgd2lkdGhCeXRlczsgeCsrLCBvdXRwdXRJbmRleCsrLCBibXAxSW5kZXgrKywgYm1wMkluZGV4KyspIHtcbiAgICAgICAgICAgIGJ1ZmZlcltvdXRwdXRJbmRleF0gPSB0aGlzLmRhdGFbYm1wMUluZGV4XSBeIGJtcC5kYXRhW2JtcDJJbmRleF07XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gYnVmZmVyO1xufTtcblxuQ1BDb2xvckJtcC5wcm90b3R5cGUuc2V0UmVjdFhPUiA9IGZ1bmN0aW9uKGJ1ZmZlciwgcmVjdCkge1xuICAgIHJlY3QgPSB0aGlzLmdldEJvdW5kcygpLmNsaXAocmVjdCk7XG4gICAgXG4gICAgdmFyIFxuICAgICAgICB3ID0gcmVjdC5nZXRXaWR0aCgpLFxuICAgICAgICBoID0gcmVjdC5nZXRIZWlnaHQoKSxcbiAgICAgICAgXG4gICAgICAgIGJtcDFJbmRleCA9IHRoaXMub2Zmc2V0T2ZQaXhlbChyZWN0LmxlZnQsIHJlY3QudG9wKSxcbiAgICAgICAgYnVmZmVySW5kZXggPSAwLFxuICAgICAgICBcbiAgICAgICAgYm1wMVlTa2lwID0gKHRoaXMud2lkdGggLSB3KSAqIENQQ29sb3JCbXAuQllURVNfUEVSX1BJWEVMLFxuICAgICAgICBcbiAgICAgICAgd2lkdGhCeXRlcyA9IHcgKiBDUENvbG9yQm1wLkJZVEVTX1BFUl9QSVhFTDtcbiAgICBcbiAgICBmb3IgKHZhciB5ID0gMDsgeSA8IGg7IHkrKykge1xuICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IHdpZHRoQnl0ZXM7IHgrKykge1xuICAgICAgICAgICAgdGhpcy5kYXRhW2JtcDFJbmRleCsrXSBePSBidWZmZXJbYnVmZmVySW5kZXgrK107XG4gICAgICAgIH1cbiAgICAgICAgYm1wMUluZGV4ICs9IGJtcDFZU2tpcDtcbiAgICB9XG59O1xuXG4vL1xuLy8gQ29weSBhbm90aGVyIGJpdG1hcCBpbnRvIHRoaXMgb25lIHVzaW5nIGFscGhhIGJsZW5kaW5nXG4vL1xuQ1BDb2xvckJtcC5wcm90b3R5cGUucGFzdGVBbHBoYVJlY3QgPSBmdW5jdGlvbihibXAsIHNyY1JlY3QsIHgsIHkpIHtcbiAgICB2YXJcbiAgICAgICAgc3JjUmVjdENweSA9IHNyY1JlY3QuY2xvbmUoKSxcbiAgICAgICAgZHN0UmVjdCA9IG5ldyBDUFJlY3QoeCwgeSwgMCwgMCk7XG4gICAgXG4gICAgdGhpcy5nZXRCb3VuZHMoKS5jbGlwU291cmNlRGVzdChzcmNSZWN0Q3B5LCBkc3RSZWN0KTtcblxuICAgIHZhclxuICAgICAgICBzcmNZU3RyaWRlID0gKGJtcC53aWR0aCAtIGRzdFJlY3QuZ2V0V2lkdGgoKSkgKiBDUENvbG9yQm1wLkJZVEVTX1BFUl9QSVhFTCxcbiAgICAgICAgZHN0WVN0cmlkZSA9ICh0aGlzLndpZHRoIC0gZHN0UmVjdC5nZXRXaWR0aCgpKSAqIENQQ29sb3JCbXAuQllURVNfUEVSX1BJWEVMLFxuICAgICAgICBcbiAgICAgICAgc3JjT2Zmc2V0ID0gYm1wLm9mZnNldE9mUGl4ZWwoc3JjUmVjdENweS5sZWZ0LCBzcmNSZWN0Q3B5LnRvcCksXG4gICAgICAgIGRzdE9mZnNldCA9IHRoaXMub2Zmc2V0T2ZQaXhlbChkc3RSZWN0LmxlZnQsIGRzdFJlY3QudG9wKTtcblxuICAgIGZvciAodmFyIHkgPSBkc3RSZWN0LnRvcDsgeSA8IGRzdFJlY3QuYm90dG9tOyB5KyssIHNyY09mZnNldCArPSBzcmNZU3RyaWRlLCBkc3RPZmZzZXQgKz0gZHN0WVN0cmlkZSkge1xuICAgICAgICBmb3IgKHZhciB4ID0gZHN0UmVjdC5sZWZ0OyB4IDwgZHN0UmVjdC5yaWdodDsgeCsrKSB7XG4gICAgICAgICAgICB2YXIgXG4gICAgICAgICAgICAgICAgYWxwaGExID0gYm1wLmRhdGFbc3JjT2Zmc2V0ICsgQ1BDb2xvckJtcC5BTFBIQV9CWVRFX09GRlNFVF07XG5cbiAgICAgICAgICAgIGlmIChhbHBoYTEgPD0gMCkge1xuICAgICAgICAgICAgICAgIGRzdE9mZnNldCArPSBDUENvbG9yQm1wLkJZVEVTX1BFUl9QSVhFTDtcbiAgICAgICAgICAgICAgICBzcmNPZmZzZXQgKz0gQ1BDb2xvckJtcC5CWVRFU19QRVJfUElYRUw7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChhbHBoYTEgPT0gMjU1KSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBDUENvbG9yQm1wLkJZVEVTX1BFUl9QSVhFTDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGF0YVtkc3RPZmZzZXQrK10gPSBibXAuZGF0YVtzcmNPZmZzZXQrK107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICBhbHBoYTIgPSB0aGlzLmRhdGFbZHN0T2Zmc2V0ICsgQ1BDb2xvckJtcC5BTFBIQV9CWVRFX09GRlNFVF0sXG4gICAgICAgICAgICAgICAgbmV3QWxwaGEgPSAoYWxwaGExICsgYWxwaGEyIC0gYWxwaGExICogYWxwaGEyIC8gMjU1KSB8IDA7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChuZXdBbHBoYSA+IDApIHtcbiAgICAgICAgICAgICAgICB2YXIgXG4gICAgICAgICAgICAgICAgICAgIHJlYWxBbHBoYSA9IChhbHBoYTEgKiAyNTUgLyBuZXdBbHBoYSkgfCAwLFxuICAgICAgICAgICAgICAgICAgICBpbnZBbHBoYSA9IDI1NSAtIHJlYWxBbHBoYTtcblxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgMzsgaSsrLCBkc3RPZmZzZXQrKywgc3JjT2Zmc2V0KyspIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kYXRhW2RzdE9mZnNldF0gPSAoYm1wLmRhdGFbc3JjT2Zmc2V0XSArICh0aGlzLmRhdGFbZHN0T2Zmc2V0XSAqIGludkFscGhhIC0gYm1wLmRhdGFbc3JjT2Zmc2V0XSAqIGludkFscGhhKSAvIDI1NSkgfCAwO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLmRhdGFbZHN0T2Zmc2V0KytdID0gbmV3QWxwaGE7XG4gICAgICAgICAgICAgICAgc3JjT2Zmc2V0Kys7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGRzdE9mZnNldCArPSBDUENvbG9yQm1wLkJZVEVTX1BFUl9QSVhFTDtcbiAgICAgICAgICAgICAgICBzcmNPZmZzZXQgKz0gQ1BDb2xvckJtcC5CWVRFU19QRVJfUElYRUw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59O1xuXG4vKiogXG4gKiBDb3B5IHRoZSByZWN0YW5nbGUgYXQgc3JjUmVjdCBmcm9tIGJtcCBvbnRvIHRoaXMgaW1hZ2UgYXQgKGRzdFgsIGRzdFkpLlxuICovIFxuQ1BDb2xvckJtcC5wcm90b3R5cGUuY29weUJpdG1hcFJlY3QgPSBmdW5jdGlvbihibXAsIGRzdFgsIGRzdFksIHNyY1JlY3QpIHtcbiAgICB2YXJcbiAgICAgICAgc3JjUmVjdCA9IHNyY1JlY3QuY2xvbmUoKSxcbiAgICAgICAgZHN0UmVjdCA9IG5ldyBDUFJlY3QoZHN0WCwgZHN0WSwgMCwgMCk7XG5cbiAgICB0aGlzLmdldEJvdW5kcygpLmNsaXBTb3VyY2VEZXN0KHNyY1JlY3QsIGRzdFJlY3QpO1xuXG4gICAgdmFyIFxuICAgICAgICB3ID0gZHN0UmVjdC5nZXRXaWR0aCgpIHwgMCxcbiAgICAgICAgaCA9IGRzdFJlY3QuZ2V0SGVpZ2h0KCkgfCAwO1xuXG4gICAgLy8gQXJlIHdlIGp1c3QgdHJ5aW5nIHRvIGR1cGxpY2F0ZSB0aGUgYml0bWFwP1xuICAgIGlmIChkc3RSZWN0LmxlZnQgPT0gMCAmJiBkc3RSZWN0LnRvcCA9PSAwICYmIHcgPT0gdGhpcy53aWR0aCAmJiBoID09IHRoaXMuaGVpZ2h0ICYmIHcgPT0gYm1wLndpZHRoICYmIGggPT0gYm1wLmhlaWdodCkge1xuICAgICAgICB0aGlzLmNvcHlEYXRhRnJvbShibXApO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHZhclxuICAgICAgICAgICAgZHN0SW5kZXggPSB0aGlzLm9mZnNldE9mUGl4ZWwoZHN0UmVjdC5sZWZ0LCBkc3RSZWN0LnRvcCksXG4gICAgICAgICAgICBzcmNJbmRleCA9IGJtcC5vZmZzZXRPZlBpeGVsKHNyY1JlY3QubGVmdCwgc3JjUmVjdC50b3ApLFxuXG4gICAgICAgICAgICBkc3RZU2tpcCA9ICh0aGlzLndpZHRoIC0gdykgKiBDUENvbG9yQm1wLkJZVEVTX1BFUl9QSVhFTCxcbiAgICAgICAgICAgIHNyY1lTa2lwID0gKGJtcC53aWR0aCAtIHcpICogQ1BDb2xvckJtcC5CWVRFU19QRVJfUElYRUw7XG5cbiAgICAgICAgZm9yICh2YXIgeSA9IDA7IHkgPCBoOyB5KyspIHtcbiAgICAgICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgdzsgeCsrKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kYXRhW2RzdEluZGV4XSA9IGJtcC5kYXRhW3NyY0luZGV4XTtcbiAgICAgICAgICAgICAgICB0aGlzLmRhdGFbZHN0SW5kZXggKyAxXSA9IGJtcC5kYXRhW3NyY0luZGV4ICsgMV07XG4gICAgICAgICAgICAgICAgdGhpcy5kYXRhW2RzdEluZGV4ICsgMl0gPSBibXAuZGF0YVtzcmNJbmRleCArIDJdO1xuICAgICAgICAgICAgICAgIHRoaXMuZGF0YVtkc3RJbmRleCArIDNdID0gYm1wLmRhdGFbc3JjSW5kZXggKyAzXTtcbiAgICAgICAgICAgICAgICBkc3RJbmRleCArPSA0O1xuICAgICAgICAgICAgICAgIHNyY0luZGV4ICs9IDQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzcmNJbmRleCArPSBzcmNZU2tpcDtcbiAgICAgICAgICAgIGRzdEluZGV4ICs9IGRzdFlTa2lwO1xuICAgICAgICB9XG4gICAgfVxufTtcblxuLy9cbi8vIENvcGllcyB0aGUgQWxwaGEgY2hhbm5lbCBmcm9tIGFub3RoZXIgYml0bWFwLiBBc3N1bWVzIGJvdGggYml0bWFwcyBhcmUgdGhlIHNhbWUgd2lkdGguXG4vL1xuQ1BDb2xvckJtcC5wcm90b3R5cGUuY29weUFscGhhRnJvbSA9IGZ1bmN0aW9uKGJtcCwgcmVjdCkge1xuICAgIHJlY3QgPSB0aGlzLmdldEJvdW5kcygpLmNsaXAocmVjdCk7XG5cbiAgICB2YXIgXG4gICAgICAgIHcgPSByZWN0LmdldFdpZHRoKCksXG4gICAgICAgIGggPSByZWN0LmdldEhlaWdodCgpLFxuICAgICAgICBcbiAgICAgICAgcGl4SW5kZXggPSB0aGlzLm9mZnNldE9mUGl4ZWwocmVjdC5sZWZ0LCByZWN0LnRvcCkgKyBDUENvbG9yQm1wLkFMUEhBX0JZVEVfT0ZGU0VUIC8qIEFwcGx5IG9mZnNldCBoZXJlIHNvIHdlIGRvbid0IGhhdmUgdG8gZG8gaXQgcGVyLXBpeGVsKi8sXG4gICAgICAgIHlTa2lwID0gKHRoaXMud2lkdGggLSB3KSAqIENQQ29sb3JCbXAuQllURVNfUEVSX1BJWEVMO1xuICAgIFxuICAgIGZvciAodmFyIHkgPSAwOyB5IDwgaDsgeSsrKSB7XG4gICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgdzsgeCsrKSB7XG4gICAgICAgICAgICB0aGlzLmRhdGFbcGl4SW5kZXhdID0gYm1wLmRhdGFbcGl4SW5kZXhdO1xuICAgICAgICAgICAgcGl4SW5kZXggKz0gQ1BDb2xvckJtcC5CWVRFU19QRVJfUElYRUw7XG4gICAgICAgIH1cbiAgICAgICAgcGl4SW5kZXggKz0geVNraXA7XG4gICAgfVxufTtcblxuQ1BDb2xvckJtcC5wcm90b3R5cGUuY29weURhdGFGcm9tID0gZnVuY3Rpb24oYm1wKSB7XG4gICAgaWYgKGJtcC53aWR0aCAhPSB0aGlzLndpZHRoIHx8IGJtcC5oZWlnaHQgIT0gdGhpcy5oZWlnaHQpIHtcbiAgICAgICAgdGhpcy53aWR0aCA9IGJtcC53aWR0aDtcbiAgICAgICAgdGhpcy5oZWlnaHQgPSBibXAuaGVpZ2h0O1xuICAgICAgICBcbiAgICAgICAgdGhpcy5pbWFnZURhdGEgPSBjcmVhdGVJbWFnZURhdGEodGhpcy53aWR0aCwgdGhpcy5oZWlnaHQpO1xuICAgICAgICB0aGlzLmRhdGEgPSB0aGlzLmltYWdlRGF0YS5kYXRhO1xuICAgIH1cblxuICAgIGlmIChcInNldFwiIGluIHRoaXMuZGF0YSkge1xuICAgICAgICB0aGlzLmRhdGEuc2V0KGJtcC5kYXRhKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICAvLyBJRSBkb2Vzbid0IHVzZSBVaW50OENsYW1wZWRBcnJheSBmb3IgSW1hZ2VEYXRhLCBzbyBzZXQoKSBpc24ndCBhdmFpbGFibGVcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmRhdGEubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHRoaXMuZGF0YVtpXSA9IGJtcC5kYXRhW2ldO1xuICAgICAgICB9XG4gICAgfVxufTtcblxuLyoqXG4gKiBGbG9vZCBmaWxsIHRoZSBnaXZlbiBjb2xvciBzdGFydGluZyBmcm9tIHRoZSBnaXZlbiBwb2ludFxuICogQHBhcmFtIHggaW50XG4gKiBAcGFyYW0geSBpbnRcbiAqIEBwYXJhbSBjb2xvciBpbnRcbiAqL1xuQ1BDb2xvckJtcC5wcm90b3R5cGUuZmxvb2RGaWxsID0gZnVuY3Rpb24oeCwgeSwgY29sb3IpIHtcbiAgICBpZiAoIXRoaXMuaXNJbnNpZGUoeCwgeSkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhclxuICAgICAgICBvbGRDb2xvciA9IHRoaXMuZ2V0UGl4ZWwoeCwgeSksXG4gICAgICAgIFxuICAgICAgICBvbGRBbHBoYSA9IChvbGRDb2xvciA+PiAyNCkgJiAweEZGLFxuICAgICAgICBvbGRSZWQgPSAob2xkQ29sb3IgPj4gMTYpICYgMHhGRixcbiAgICAgICAgb2xkR3JlZW4gPSAob2xkQ29sb3IgPj4gOCkgJiAweEZGLFxuICAgICAgICBvbGRCbHVlID0gb2xkQ29sb3IgJiAweEZGLFxuICAgICAgICBcbiAgICAgICAgY29sb3JBbHBoYSA9IChjb2xvciA+PiAyNCkgJiAweEZGLFxuICAgICAgICBjb2xvclJlZCA9IChjb2xvciA+PiAxNikgJiAweEZGLFxuICAgICAgICBjb2xvckdyZWVuID0gKGNvbG9yID4+IDgpICYgMHhGRixcbiAgICAgICAgY29sb3JCbHVlID0gY29sb3IgJiAweEZGLFxuICAgICAgICBcbiAgICAgICAgc3RhY2sgPSBbXSxcbiAgICAgICAgY2xpcCA9IHRoaXMuZ2V0Qm91bmRzKCksXG4gICAgICAgIFxuICAgICAgICBkYXRhID0gdGhpcy5kYXRhO1xuICAgIFxuICAgIC8vIENoYW5nZSB0aGUgbGVmdCBhbmQgcmlnaHQgYm91bmRzIGZyb20gcGl4ZWwgaW5kZXhlcyBpbnRvIGJ5dGUgaW5kZXhlcyBmb3IgZWFzeSBjbGlwcGluZ1xuICAgIGNsaXAubGVmdCAqPSBDUENvbG9yQm1wLkJZVEVTX1BFUl9QSVhFTDtcbiAgICBjbGlwLnJpZ2h0ICo9IENQQ29sb3JCbXAuQllURVNfUEVSX1BJWEVMO1xuICAgIFxuICAgIHN0YWNrLnB1c2goe3gxOiB4ICogQ1BDb2xvckJtcC5CWVRFU19QRVJfUElYRUwsIHgyOiB4ICogQ1BDb2xvckJtcC5CWVRFU19QRVJfUElYRUwsIHk6IHksIGR5OiAtMX0pO1xuICAgIHN0YWNrLnB1c2goe3gxOiB4ICogQ1BDb2xvckJtcC5CWVRFU19QRVJfUElYRUwsIHgyOiB4ICogQ1BDb2xvckJtcC5CWVRFU19QRVJfUElYRUwsIHk6IHkgKyAxLCBkeTogMX0pO1xuICAgIFxuICAgIC8qIFxuICAgICAqIElmIHdlIGFyZSBmaWxsaW5nIDEwMCUgdHJhbnNwYXJlbnQgYXJlYXMgdGhlbiB3ZSBuZWVkIHRvIGlnbm9yZSB0aGUgcmVzaWR1YWwgY29sb3IgaW5mb3JtYXRpb25cbiAgICAgKiAoaXQgd291bGQgYWxzbyBiZSBwb3NzaWJsZSB0byBjbGVhciBpdCB3aGVuIGVyYXNpbmcsIGJ1dCB0aGVuIHRoZSBwZXJmb3JtYW5jZSBpbXBhY3Qgd291bGQgYmUgb24gdGhlIGVyYXNlciBcbiAgICAgKiByYXRoZXIgdGhhbiBvbiB0aGlzIGxvdyBpbXBvcnRhbmNlIGZsb29kIGZpbGwpXG4gICAgICovXG4gICAgaWYgKG9sZEFscGhhID09IDApIHtcbiAgICAgICAgaWYgKGNvbG9yQWxwaGEgPT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICB3aGlsZSAoc3RhY2subGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgbGluZSA9IHN0YWNrLnBvcCgpO1xuICAgIFxuICAgICAgICAgICAgaWYgKGxpbmUueSA8IGNsaXAudG9wIHx8IGxpbmUueSA+PSBjbGlwLmJvdHRvbSkge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgbGluZU9mZnNldCA9IHRoaXMub2Zmc2V0T2ZQaXhlbCgwLCBsaW5lLnkpLFxuICAgIFxuICAgICAgICAgICAgICAgIGxlZnQgPSBsaW5lLngxLCBuZXh0O1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB3aGlsZSAoXG4gICAgICAgICAgICAgICAgbGVmdCA+PSBjbGlwLmxlZnQgXG4gICAgICAgICAgICAgICAgJiYgZGF0YVtsZWZ0ICsgbGluZU9mZnNldCArIENQQ29sb3JCbXAuQUxQSEFfQllURV9PRkZTRVRdID09IDBcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIGRhdGFbbGVmdCArIGxpbmVPZmZzZXQgKyBDUENvbG9yQm1wLlJFRF9CWVRFX09GRlNFVF0gPSBjb2xvclJlZDtcbiAgICAgICAgICAgICAgICBkYXRhW2xlZnQgKyBsaW5lT2Zmc2V0ICsgQ1BDb2xvckJtcC5HUkVFTl9CWVRFX09GRlNFVF0gPSBjb2xvckdyZWVuO1xuICAgICAgICAgICAgICAgIGRhdGFbbGVmdCArIGxpbmVPZmZzZXQgKyBDUENvbG9yQm1wLkJMVUVfQllURV9PRkZTRVRdID0gY29sb3JCbHVlO1xuICAgICAgICAgICAgICAgIGRhdGFbbGVmdCArIGxpbmVPZmZzZXQgKyBDUENvbG9yQm1wLkFMUEhBX0JZVEVfT0ZGU0VUXSA9IGNvbG9yQWxwaGE7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgbGVmdCAtPSBDUENvbG9yQm1wLkJZVEVTX1BFUl9QSVhFTDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKGxlZnQgPj0gbGluZS54MSkge1xuICAgICAgICAgICAgICAgIHdoaWxlIChcbiAgICAgICAgICAgICAgICAgICAgbGVmdCA8PSBsaW5lLngyIFxuICAgICAgICAgICAgICAgICAgICAmJiBkYXRhW2xlZnQgKyBsaW5lT2Zmc2V0ICsgQ1BDb2xvckJtcC5BTFBIQV9CWVRFX09GRlNFVF0gIT0gb2xkQWxwaGFcbiAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgbGVmdCArPSBDUENvbG9yQm1wLkJZVEVTX1BFUl9QSVhFTDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbmV4dCA9IGxlZnQgKyBDUENvbG9yQm1wLkJZVEVTX1BFUl9QSVhFTDtcbiAgICAgICAgICAgICAgICBpZiAobGVmdCA+IGxpbmUueDIpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBsZWZ0ICs9IENQQ29sb3JCbXAuQllURVNfUEVSX1BJWEVMO1xuICAgICAgICAgICAgICAgIGlmIChsZWZ0IDwgbGluZS54MSkge1xuICAgICAgICAgICAgICAgICAgICBzdGFjay5wdXNoKHt4MTogbGVmdCwgeDI6IGxpbmUueDEgLSBDUENvbG9yQm1wLkJZVEVTX1BFUl9QSVhFTCwgeTogbGluZS55IC0gbGluZS5keSwgZHk6IC1saW5lLmR5fSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIG5leHQgPSBsaW5lLngxICsgQ1BDb2xvckJtcC5CWVRFU19QRVJfUElYRUw7XG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICBkbyB7XG4gICAgICAgICAgICAgICAgZGF0YVtsZWZ0ICsgbGluZU9mZnNldCArIENQQ29sb3JCbXAuUkVEX0JZVEVfT0ZGU0VUXSA9IGNvbG9yUmVkO1xuICAgICAgICAgICAgICAgIGRhdGFbbGVmdCArIGxpbmVPZmZzZXQgKyBDUENvbG9yQm1wLkdSRUVOX0JZVEVfT0ZGU0VUXSA9IGNvbG9yR3JlZW47XG4gICAgICAgICAgICAgICAgZGF0YVtsZWZ0ICsgbGluZU9mZnNldCArIENQQ29sb3JCbXAuQkxVRV9CWVRFX09GRlNFVF0gPSBjb2xvckJsdWU7XG4gICAgICAgICAgICAgICAgZGF0YVtsZWZ0ICsgbGluZU9mZnNldCArIENQQ29sb3JCbXAuQUxQSEFfQllURV9PRkZTRVRdID0gY29sb3JBbHBoYTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB3aGlsZSAoXG4gICAgICAgICAgICAgICAgICAgIG5leHQgPCBjbGlwLnJpZ2h0IFxuICAgICAgICAgICAgICAgICAgICAmJiBkYXRhW25leHQgKyBsaW5lT2Zmc2V0ICsgQ1BDb2xvckJtcC5BTFBIQV9CWVRFX09GRlNFVF0gPT0gb2xkQWxwaGFcbiAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YVtuZXh0ICsgbGluZU9mZnNldCArIENQQ29sb3JCbXAuUkVEX0JZVEVfT0ZGU0VUXSA9IGNvbG9yUmVkO1xuICAgICAgICAgICAgICAgICAgICBkYXRhW25leHQgKyBsaW5lT2Zmc2V0ICsgQ1BDb2xvckJtcC5HUkVFTl9CWVRFX09GRlNFVF0gPSBjb2xvckdyZWVuO1xuICAgICAgICAgICAgICAgICAgICBkYXRhW25leHQgKyBsaW5lT2Zmc2V0ICsgQ1BDb2xvckJtcC5CTFVFX0JZVEVfT0ZGU0VUXSA9IGNvbG9yQmx1ZTtcbiAgICAgICAgICAgICAgICAgICAgZGF0YVtuZXh0ICsgbGluZU9mZnNldCArIENQQ29sb3JCbXAuQUxQSEFfQllURV9PRkZTRVRdID0gY29sb3JBbHBoYTtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIG5leHQgKz0gQ1BDb2xvckJtcC5CWVRFU19QRVJfUElYRUw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHN0YWNrLnB1c2goe3gxOiBsZWZ0LCB4MjogbmV4dCAtIENQQ29sb3JCbXAuQllURVNfUEVSX1BJWEVMLCB5OiBsaW5lLnkgKyBsaW5lLmR5LCBkeTogbGluZS5keX0pO1xuICAgIFxuICAgICAgICAgICAgICAgIGlmIChuZXh0IC0gQ1BDb2xvckJtcC5CWVRFU19QRVJfUElYRUwgPiBsaW5lLngyKSB7XG4gICAgICAgICAgICAgICAgICAgIHN0YWNrLnB1c2goe3gxOiBsaW5lLngyICsgQ1BDb2xvckJtcC5CWVRFU19QRVJfUElYRUwsIHgyOiBuZXh0IC0gQ1BDb2xvckJtcC5CWVRFU19QRVJfUElYRUwsIHk6IGxpbmUueSAtIGxpbmUuZHksIGR5OiAtbGluZS5keX0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICBsZWZ0ID0gbmV4dCArIENQQ29sb3JCbXAuQllURVNfUEVSX1BJWEVMO1xuICAgICAgICAgICAgICAgIHdoaWxlIChcbiAgICAgICAgICAgICAgICAgICAgbGVmdCA8PSBsaW5lLngyICYmIGRhdGFbbGVmdCArIGxpbmVPZmZzZXQgKyBDUENvbG9yQm1wLkFMUEhBX0JZVEVfT0ZGU0VUXSAhPSBvbGRBbHBoYVxuICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICBsZWZ0ICs9IENQQ29sb3JCbXAuQllURVNfUEVSX1BJWEVMO1xuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICBuZXh0ID0gbGVmdCArIENQQ29sb3JCbXAuQllURVNfUEVSX1BJWEVMO1xuICAgICAgICAgICAgfSB3aGlsZSAobGVmdCA8PSBsaW5lLngyKTtcbiAgICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChjb2xvciA9PSBvbGRDb2xvcikge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgd2hpbGUgKHN0YWNrLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgIGxpbmUgPSBzdGFjay5wb3AoKTtcblxuICAgICAgICAgICAgaWYgKGxpbmUueSA8IGNsaXAudG9wIHx8IGxpbmUueSA+PSBjbGlwLmJvdHRvbSkge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICBsaW5lT2Zmc2V0ID0gdGhpcy5vZmZzZXRPZlBpeGVsKDAsIGxpbmUueSksXG5cbiAgICAgICAgICAgICAgICBsZWZ0ID0gbGluZS54MSwgbmV4dDtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgd2hpbGUgKFxuICAgICAgICAgICAgICAgIGxlZnQgPj0gY2xpcC5sZWZ0IFxuICAgICAgICAgICAgICAgICYmIGRhdGFbbGVmdCArIGxpbmVPZmZzZXQgKyBDUENvbG9yQm1wLlJFRF9CWVRFX09GRlNFVF0gPT0gb2xkUmVkXG4gICAgICAgICAgICAgICAgJiYgZGF0YVtsZWZ0ICsgbGluZU9mZnNldCArIENQQ29sb3JCbXAuR1JFRU5fQllURV9PRkZTRVRdID09IG9sZEdyZWVuXG4gICAgICAgICAgICAgICAgJiYgZGF0YVtsZWZ0ICsgbGluZU9mZnNldCArIENQQ29sb3JCbXAuQkxVRV9CWVRFX09GRlNFVF0gPT0gb2xkQmx1ZVxuICAgICAgICAgICAgICAgICYmIGRhdGFbbGVmdCArIGxpbmVPZmZzZXQgKyBDUENvbG9yQm1wLkFMUEhBX0JZVEVfT0ZGU0VUXSA9PSBvbGRBbHBoYVxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgZGF0YVtsZWZ0ICsgbGluZU9mZnNldCArIENQQ29sb3JCbXAuUkVEX0JZVEVfT0ZGU0VUXSA9IGNvbG9yUmVkO1xuICAgICAgICAgICAgICAgIGRhdGFbbGVmdCArIGxpbmVPZmZzZXQgKyBDUENvbG9yQm1wLkdSRUVOX0JZVEVfT0ZGU0VUXSA9IGNvbG9yR3JlZW47XG4gICAgICAgICAgICAgICAgZGF0YVtsZWZ0ICsgbGluZU9mZnNldCArIENQQ29sb3JCbXAuQkxVRV9CWVRFX09GRlNFVF0gPSBjb2xvckJsdWU7XG4gICAgICAgICAgICAgICAgZGF0YVtsZWZ0ICsgbGluZU9mZnNldCArIENQQ29sb3JCbXAuQUxQSEFfQllURV9PRkZTRVRdID0gY29sb3JBbHBoYTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBsZWZ0IC09IENQQ29sb3JCbXAuQllURVNfUEVSX1BJWEVMO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAobGVmdCA+PSBsaW5lLngxKSB7XG4gICAgICAgICAgICAgICAgd2hpbGUgKFxuICAgICAgICAgICAgICAgICAgICBsZWZ0IDw9IGxpbmUueDIgXG4gICAgICAgICAgICAgICAgICAgICYmICEoXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhW2xlZnQgKyBsaW5lT2Zmc2V0ICsgQ1BDb2xvckJtcC5SRURfQllURV9PRkZTRVRdID09IG9sZFJlZFxuICAgICAgICAgICAgICAgICAgICAgICAgJiYgZGF0YVtsZWZ0ICsgbGluZU9mZnNldCArIENQQ29sb3JCbXAuR1JFRU5fQllURV9PRkZTRVRdID09IG9sZEdyZWVuXG4gICAgICAgICAgICAgICAgICAgICAgICAmJiBkYXRhW2xlZnQgKyBsaW5lT2Zmc2V0ICsgQ1BDb2xvckJtcC5CTFVFX0JZVEVfT0ZGU0VUXSA9PSBvbGRCbHVlXG4gICAgICAgICAgICAgICAgICAgICAgICAmJiBkYXRhW2xlZnQgKyBsaW5lT2Zmc2V0ICsgQ1BDb2xvckJtcC5BTFBIQV9CWVRFX09GRlNFVF0gPT0gb2xkQWxwaGFcbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICBsZWZ0ICs9IENQQ29sb3JCbXAuQllURVNfUEVSX1BJWEVMO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBuZXh0ID0gbGVmdCArIENQQ29sb3JCbXAuQllURVNfUEVSX1BJWEVMO1xuICAgICAgICAgICAgICAgIGlmIChsZWZ0ID4gbGluZS54Mikge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGxlZnQgKz0gQ1BDb2xvckJtcC5CWVRFU19QRVJfUElYRUw7XG4gICAgICAgICAgICAgICAgaWYgKGxlZnQgPCBsaW5lLngxKSB7XG4gICAgICAgICAgICAgICAgICAgIHN0YWNrLnB1c2goe3gxOiBsZWZ0LCB4MjogbGluZS54MSAtIENQQ29sb3JCbXAuQllURVNfUEVSX1BJWEVMLCB5OiBsaW5lLnkgLSBsaW5lLmR5LCBkeTogLWxpbmUuZHl9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbmV4dCA9IGxpbmUueDEgKyBDUENvbG9yQm1wLkJZVEVTX1BFUl9QSVhFTDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZG8ge1xuICAgICAgICAgICAgICAgIGRhdGFbbGVmdCArIGxpbmVPZmZzZXQgKyBDUENvbG9yQm1wLlJFRF9CWVRFX09GRlNFVF0gPSBjb2xvclJlZDtcbiAgICAgICAgICAgICAgICBkYXRhW2xlZnQgKyBsaW5lT2Zmc2V0ICsgQ1BDb2xvckJtcC5HUkVFTl9CWVRFX09GRlNFVF0gPSBjb2xvckdyZWVuO1xuICAgICAgICAgICAgICAgIGRhdGFbbGVmdCArIGxpbmVPZmZzZXQgKyBDUENvbG9yQm1wLkJMVUVfQllURV9PRkZTRVRdID0gY29sb3JCbHVlO1xuICAgICAgICAgICAgICAgIGRhdGFbbGVmdCArIGxpbmVPZmZzZXQgKyBDUENvbG9yQm1wLkFMUEhBX0JZVEVfT0ZGU0VUXSA9IGNvbG9yQWxwaGE7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgd2hpbGUgKFxuICAgICAgICAgICAgICAgICAgICBuZXh0IDwgY2xpcC5yaWdodCBcbiAgICAgICAgICAgICAgICAgICAgJiYgZGF0YVtuZXh0ICsgbGluZU9mZnNldCArIENQQ29sb3JCbXAuUkVEX0JZVEVfT0ZGU0VUXSA9PSBvbGRSZWRcbiAgICAgICAgICAgICAgICAgICAgJiYgZGF0YVtuZXh0ICsgbGluZU9mZnNldCArIENQQ29sb3JCbXAuR1JFRU5fQllURV9PRkZTRVRdID09IG9sZEdyZWVuXG4gICAgICAgICAgICAgICAgICAgICYmIGRhdGFbbmV4dCArIGxpbmVPZmZzZXQgKyBDUENvbG9yQm1wLkJMVUVfQllURV9PRkZTRVRdID09IG9sZEJsdWVcbiAgICAgICAgICAgICAgICAgICAgJiYgZGF0YVtuZXh0ICsgbGluZU9mZnNldCArIENQQ29sb3JCbXAuQUxQSEFfQllURV9PRkZTRVRdID09IG9sZEFscGhhXG4gICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgIGRhdGFbbmV4dCArIGxpbmVPZmZzZXQgKyBDUENvbG9yQm1wLlJFRF9CWVRFX09GRlNFVF0gPSBjb2xvclJlZDtcbiAgICAgICAgICAgICAgICAgICAgZGF0YVtuZXh0ICsgbGluZU9mZnNldCArIENQQ29sb3JCbXAuR1JFRU5fQllURV9PRkZTRVRdID0gY29sb3JHcmVlbjtcbiAgICAgICAgICAgICAgICAgICAgZGF0YVtuZXh0ICsgbGluZU9mZnNldCArIENQQ29sb3JCbXAuQkxVRV9CWVRFX09GRlNFVF0gPSBjb2xvckJsdWU7XG4gICAgICAgICAgICAgICAgICAgIGRhdGFbbmV4dCArIGxpbmVPZmZzZXQgKyBDUENvbG9yQm1wLkFMUEhBX0JZVEVfT0ZGU0VUXSA9IGNvbG9yQWxwaGE7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBuZXh0ICs9IENQQ29sb3JCbXAuQllURVNfUEVSX1BJWEVMO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBzdGFjay5wdXNoKHt4MTogbGVmdCwgeDI6IG5leHQgLSBDUENvbG9yQm1wLkJZVEVTX1BFUl9QSVhFTCwgeTogbGluZS55ICsgbGluZS5keSwgZHk6IGxpbmUuZHl9KTtcblxuICAgICAgICAgICAgICAgIGlmIChuZXh0IC0gQ1BDb2xvckJtcC5CWVRFU19QRVJfUElYRUwgPiBsaW5lLngyKSB7XG4gICAgICAgICAgICAgICAgICAgIHN0YWNrLnB1c2goe3gxOiBsaW5lLngyICsgQ1BDb2xvckJtcC5CWVRFU19QRVJfUElYRUwsIHgyOiBuZXh0IC0gQ1BDb2xvckJtcC5CWVRFU19QRVJfUElYRUwsIHk6IGxpbmUueSAtIGxpbmUuZHksIGR5OiAtbGluZS5keX0pO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGxlZnQgPSBuZXh0ICsgQ1BDb2xvckJtcC5CWVRFU19QRVJfUElYRUw7XG4gICAgICAgICAgICAgICAgd2hpbGUgKFxuICAgICAgICAgICAgICAgICAgICBsZWZ0IDw9IGxpbmUueDIgJiYgIShcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFbbGVmdCArIGxpbmVPZmZzZXQgKyBDUENvbG9yQm1wLlJFRF9CWVRFX09GRlNFVF0gPT0gb2xkUmVkXG4gICAgICAgICAgICAgICAgICAgICAgICAmJiBkYXRhW2xlZnQgKyBsaW5lT2Zmc2V0ICsgQ1BDb2xvckJtcC5HUkVFTl9CWVRFX09GRlNFVF0gPT0gb2xkR3JlZW5cbiAgICAgICAgICAgICAgICAgICAgICAgICYmIGRhdGFbbGVmdCArIGxpbmVPZmZzZXQgKyBDUENvbG9yQm1wLkJMVUVfQllURV9PRkZTRVRdID09IG9sZEJsdWVcbiAgICAgICAgICAgICAgICAgICAgICAgICYmIGRhdGFbbGVmdCArIGxpbmVPZmZzZXQgKyBDUENvbG9yQm1wLkFMUEhBX0JZVEVfT0ZGU0VUXSA9PSBvbGRBbHBoYVxuICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgIGxlZnQgKz0gQ1BDb2xvckJtcC5CWVRFU19QRVJfUElYRUw7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgbmV4dCA9IGxlZnQgKyBDUENvbG9yQm1wLkJZVEVTX1BFUl9QSVhFTDtcbiAgICAgICAgICAgIH0gd2hpbGUgKGxlZnQgPD0gbGluZS54Mik7XG4gICAgICAgIH1cbiAgICB9XG59O1xuXG4vKipcbiAqIFByZW11bHRpcGx5IHRoZSBSR0IgY2hhbm5lbHMgaW4gdGhlIGdpdmVuIFIsRyxCLEEgY2hhbm5lbCBidWZmZXIgd2l0aCB0aGUgYWxwaGEgY2hhbm5lbC5cbiAqIFxuICogQHBhcmFtIGJ1ZmZlciBSLEcsQixBIGNoYW5uZWwgYXJyYXlcbiAqIEBwYXJhbSBsZW4gTnVtYmVyIG9mIHBpeGVscyBpbiBidWZmZXIgdG8gbW9kaWZ5XG4gKi9cbmZ1bmN0aW9uIG11bHRpcGx5QWxwaGEoYnVmZmVyLCBsZW4pIHtcbiAgICB2YXJcbiAgICAgICAgcGl4SW5kZXggPSAwO1xuICAgIFxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgdmFyXG4gICAgICAgICAgICBhbHBoYSA9IGJ1ZmZlcltwaXhJbmRleCArIENQQ29sb3JCbXAuQUxQSEFfQllURV9PRkZTRVRdO1xuICAgICAgICBcbiAgICAgICAgLy8gTXVsdGlwbHkgdGhlIFJHQiBjaGFubmVscyBieSBhbHBoYVxuICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IDM7IGorKywgcGl4SW5kZXgrKykge1xuICAgICAgICAgICAgYnVmZmVyW3BpeEluZGV4XSA9IE1hdGgucm91bmQoYnVmZmVyW3BpeEluZGV4XSAqIGFscGhhIC8gMjU1KTtcbiAgICAgICAgfVxuICAgICAgICBwaXhJbmRleCsrOyAvLyBEb24ndCBtb2RpZnkgYWxwaGEgY2hhbm5lbFxuICAgIH1cbn1cblxuLyoqXG4gKiBJbnZlcnNlIG9mIG11bHRpcGx5QWxwaGEoKVxuICovXG5mdW5jdGlvbiBzZXBhcmF0ZUFscGhhKGJ1ZmZlciwgbGVuKSB7XG4gICAgdmFyXG4gICAgICAgIHBpeEluZGV4ID0gMDtcbiAgICBcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgIHZhclxuICAgICAgICAgICAgYWxwaGEgPSBidWZmZXJbcGl4SW5kZXggKyBDUENvbG9yQm1wLkFMUEhBX0JZVEVfT0ZGU0VUXTtcbiAgICAgICAgXG4gICAgICAgIGlmIChhbHBoYSAhPSAwKSB7XG4gICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICBpbnZBbHBoYSA9IDI1NSAvIGFscGhhO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IDM7IGorKywgcGl4SW5kZXgrKykge1xuICAgICAgICAgICAgICAgIGJ1ZmZlcltwaXhJbmRleF0gPSBNYXRoLm1pbihNYXRoLnJvdW5kKGJ1ZmZlcltwaXhJbmRleF0gKiBpbnZBbHBoYSksIDI1NSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBEb24ndCBtb2RpZnkgYWxwaGEgY2hhbm5lbFxuICAgICAgICAgICAgcGl4SW5kZXgrKztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHBpeEluZGV4ICs9IENQQ29sb3JCbXAuQllURVNfUEVSX1BJWEVMO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5mdW5jdGlvbiBib3hCbHVyTGluZShzcmMsIGRzdCwgbGVuLCByYWRpdXMpIHtcbiAgICB2YXJcbiAgICAgICAgdG90YWxQaXhlbHMgPSAwLCB0b3RhbENoYW5uZWxzID0gWzAsIDAsIDAsIDBdLFxuICAgICAgICBwaXhJbmRleCwgZHN0SW5kZXg7XG4gICAgXG4gICAgcGl4SW5kZXggPSAwO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmFkaXVzICYmIGkgPCBsZW47IGkrKykge1xuICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IENQQ29sb3JCbXAuQllURVNfUEVSX1BJWEVMOyBqKyspIHtcbiAgICAgICAgICAgIHRvdGFsQ2hhbm5lbHNbal0gKz0gc3JjW3BpeEluZGV4KytdO1xuICAgICAgICB9XG4gICAgICAgIHRvdGFsUGl4ZWxzKys7XG4gICAgfVxuICAgIFxuICAgIGRzdEluZGV4ID0gMDtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgIC8vIE5ldyBwaXhlbCBqb2lucyB0aGUgd2luZG93IGF0IHRoZSByaWdodFxuICAgICAgICBpZiAoaSArIHJhZGl1cyA8IGxlbikge1xuICAgICAgICAgICAgcGl4SW5kZXggPSAoaSArIHJhZGl1cykgKiBDUENvbG9yQm1wLkJZVEVTX1BFUl9QSVhFTDtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBDUENvbG9yQm1wLkJZVEVTX1BFUl9QSVhFTDsgaisrKSB7XG4gICAgICAgICAgICAgICAgdG90YWxDaGFubmVsc1tqXSArPSBzcmNbcGl4SW5kZXgrK107XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0b3RhbFBpeGVscysrO1xuICAgICAgICB9XG5cbiAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBDUENvbG9yQm1wLkJZVEVTX1BFUl9QSVhFTDsgaisrKSB7XG4gICAgICAgICAgICBkc3RbZHN0SW5kZXgrK10gPSBNYXRoLnJvdW5kKHRvdGFsQ2hhbm5lbHNbal0gLyB0b3RhbFBpeGVscyk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBPbGQgcGl4ZWwgbGVhdmVzIHRoZSB3aW5kb3cgYXQgdGhlIGxlZnRcbiAgICAgICAgaWYgKGkgLSByYWRpdXMgPj0gMCkge1xuICAgICAgICAgICAgcGl4SW5kZXggPSAoaSAtIHJhZGl1cykgKiBDUENvbG9yQm1wLkJZVEVTX1BFUl9QSVhFTDtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBDUENvbG9yQm1wLkJZVEVTX1BFUl9QSVhFTDsgaisrKSB7XG4gICAgICAgICAgICAgICAgdG90YWxDaGFubmVsc1tqXSAtPSBzcmNbcGl4SW5kZXgrK107XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0b3RhbFBpeGVscy0tO1xuICAgICAgICB9XG4gICAgfVxufVxuXG4vKipcbiAqIENvcHkgYSBjb2x1bW4gb2YgcGl4ZWxzIGluIHRoZSBiaXRtYXAgdG8gdGhlIGdpdmVuIFIsRyxCLEEgYnVmZmVyLlxuICogXG4gKiBAcGFyYW0geCBYLWNvb3JkaW5hdGUgb2YgY29sdW1uXG4gKiBAcGFyYW0geSBZLWNvb3JkaW5hdGUgb2YgdG9wIG9mIGNvbHVtbiB0byBjb3B5XG4gKiBAcGFyYW0gbGVuIE51bWJlciBvZiBwaXhlbHMgdG8gY29weVxuICogQHBhcmFtIGJ1ZmZlciBSLEcsQixBIGFycmF5XG4gKi9cbkNQQ29sb3JCbXAucHJvdG90eXBlLmNvcHlQaXhlbENvbHVtblRvQXJyYXkgPSBmdW5jdGlvbih4LCB5LCBsZW4sIGJ1ZmZlcikge1xuICAgIHZhclxuICAgICAgICB5SnVtcCA9ICh0aGlzLndpZHRoIC0gMSkgKiBDUENvbG9yQm1wLkJZVEVTX1BFUl9QSVhFTCxcbiAgICAgICAgZHN0T2Zmc2V0ID0gMCxcbiAgICAgICAgc3JjT2Zmc2V0ID0gdGhpcy5vZmZzZXRPZlBpeGVsKHgsIHkpO1xuICAgIFxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBDUENvbG9yQm1wLkJZVEVTX1BFUl9QSVhFTDsgaisrKSB7XG4gICAgICAgICAgICBidWZmZXJbZHN0T2Zmc2V0KytdID0gdGhpcy5kYXRhW3NyY09mZnNldCsrXTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgc3JjT2Zmc2V0ICs9IHlKdW1wO1xuICAgIH1cbn1cblxuLyoqXG4gKiBDb3B5IHRoZSBwaXhlbHMgZnJvbSB0aGUgZ2l2ZW4gUixHLEIsQSBidWZmZXIgdG8gYSBjb2x1bW4gb2YgcGl4ZWxzIGluIHRoZSBiaXRtYXAuXG4gKiBcbiAqIEBwYXJhbSB4IFgtY29vcmRpbmF0ZSBvZiBjb2x1bW5cbiAqIEBwYXJhbSB5IFktY29vcmRpbmF0ZSBvZiB0b3Agb2YgY29sdW1uIHRvIGNvcHlcbiAqIEBwYXJhbSBsZW4gTnVtYmVyIG9mIHBpeGVscyB0byBjb3B5XG4gKiBAcGFyYW0gYnVmZmVyIFIsRyxCLEEgYXJyYXkgdG8gY29weSBmcm9tXG4gKi9cbkNQQ29sb3JCbXAucHJvdG90eXBlLmNvcHlBcnJheVRvUGl4ZWxDb2x1bW4gPSBmdW5jdGlvbih4LCB5LCBsZW4sIGJ1ZmZlcikge1xuICAgIHZhclxuICAgICAgICB5SnVtcCA9ICh0aGlzLndpZHRoIC0gMSkgKiBDUENvbG9yQm1wLkJZVEVTX1BFUl9QSVhFTCxcbiAgICAgICAgc3JjT2Zmc2V0ID0gMCxcbiAgICAgICAgZHN0T2Zmc2V0ID0gdGhpcy5vZmZzZXRPZlBpeGVsKHgsIHkpO1xuICAgIFxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBDUENvbG9yQm1wLkJZVEVTX1BFUl9QSVhFTDsgaisrKSB7XG4gICAgICAgICAgICB0aGlzLmRhdGFbZHN0T2Zmc2V0KytdID0gYnVmZmVyW3NyY09mZnNldCsrXTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgZHN0T2Zmc2V0ICs9IHlKdW1wO1xuICAgIH1cbn1cblxuQ1BDb2xvckJtcC5wcm90b3R5cGUuYm94Qmx1ciA9IGZ1bmN0aW9uKHJlY3QsIHJhZGl1c1gsIHJhZGl1c1kpIHtcbiAgICByZWN0ID0gdGhpcy5nZXRCb3VuZHMoKS5jbGlwKHJlY3QpO1xuXG4gICAgdmFyXG4gICAgICAgIHJlY3RXaWR0aCA9IHJlY3QuZ2V0V2lkdGgoKSxcbiAgICAgICAgcmVjdFdpZHRoQnl0ZXMgPSByZWN0V2lkdGggKiBDUENvbG9yQm1wLkJZVEVTX1BFUl9QSVhFTCxcbiAgICAgICAgcmVjdEhlaWdodCA9IHJlY3QuZ2V0SGVpZ2h0KCksXG4gICAgICAgIHJlY3RMZW5ndGggPSBNYXRoLm1heChyZWN0V2lkdGgsIHJlY3RIZWlnaHQpLFxuXG4gICAgICAgIHNyYyA9IG5ldyBVaW50OEFycmF5KHJlY3RMZW5ndGggKiBDUENvbG9yQm1wLkJZVEVTX1BFUl9QSVhFTCksXG4gICAgICAgIGRzdCA9IG5ldyBVaW50OEFycmF5KHJlY3RMZW5ndGggKiBDUENvbG9yQm1wLkJZVEVTX1BFUl9QSVhFTCk7XG5cbiAgICBmb3IgKHZhciB5ID0gcmVjdC50b3A7IHkgPCByZWN0LmJvdHRvbTsgeSsrKSB7XG4gICAgICAgIHZhclxuICAgICAgICAgICAgcGl4T2Zmc2V0ID0gdGhpcy5vZmZzZXRPZlBpeGVsKHJlY3QubGVmdCwgeSk7XG4gICAgICAgIFxuICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IHJlY3RXaWR0aEJ5dGVzOyB4KyspIHtcbiAgICAgICAgICAgIHNyY1t4XSA9IHRoaXMuZGF0YVtwaXhPZmZzZXQrK107XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIG11bHRpcGx5QWxwaGEoc3JjLCByZWN0V2lkdGgpO1xuICAgICAgICBib3hCbHVyTGluZShzcmMsIGRzdCwgcmVjdFdpZHRoLCByYWRpdXNYKTtcbiAgICAgICAgXG4gICAgICAgIHBpeE9mZnNldCA9IHRoaXMub2Zmc2V0T2ZQaXhlbChyZWN0LmxlZnQsIHkpO1xuICAgICAgICBcbiAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCByZWN0V2lkdGhCeXRlczsgeCsrKSB7XG4gICAgICAgICAgICB0aGlzLmRhdGFbcGl4T2Zmc2V0KytdID0gZHN0W3hdO1xuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIGZvciAodmFyIHggPSByZWN0LmxlZnQ7IHggPCByZWN0LnJpZ2h0OyB4KyspIHtcbiAgICAgICAgdGhpcy5jb3B5UGl4ZWxDb2x1bW5Ub0FycmF5KHgsIHJlY3QudG9wLCByZWN0SGVpZ2h0LCBzcmMpO1xuICAgICAgICBcbiAgICAgICAgYm94Qmx1ckxpbmUoc3JjLCBkc3QsIHJlY3RIZWlnaHQsIHJhZGl1c1kpO1xuICAgICAgICBzZXBhcmF0ZUFscGhhKGRzdCwgcmVjdEhlaWdodCk7XG4gICAgICAgIFxuICAgICAgICB0aGlzLmNvcHlBcnJheVRvUGl4ZWxDb2x1bW4oeCwgcmVjdC50b3AsIHJlY3RIZWlnaHQsIGRzdCk7XG4gICAgfVxufTtcblxuQ1BDb2xvckJtcC5wcm90b3R5cGUub2Zmc2V0T2ZQaXhlbCA9IGZ1bmN0aW9uKHgsIHkpIHtcbiAgICByZXR1cm4gKCh5ICogdGhpcy53aWR0aCArIHgpICogQ1BDb2xvckJtcC5CWVRFU19QRVJfUElYRUwpIHwgMDtcbn07XG5cbkNQQ29sb3JCbXAucHJvdG90eXBlLmdldE1lbW9yeVNpemUgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5kYXRhLmxlbmd0aDtcbn07XG5cbi8vIExvYWQgZnJvbSBhIGxvYWRlZCBIVE1MIEltYWdlIG9iamVjdFxuQ1BDb2xvckJtcC5wcm90b3R5cGUubG9hZEZyb21JbWFnZSA9IGZ1bmN0aW9uKGltYWdlKSB7XG4gICAgdmFyXG4gICAgICAgIGltYWdlQ2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKSxcbiAgICAgICAgaW1hZ2VDb250ZXh0ID0gaW1hZ2VDYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpO1xuXG4gICAgaW1hZ2VDYW52YXMud2lkdGggPSBpbWFnZS53aWR0aDtcbiAgICBpbWFnZUNhbnZhcy5oZWlnaHQgPSBpbWFnZS5oZWlnaHQ7XG4gICAgXG4gICAgaW1hZ2VDb250ZXh0Lmdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbiA9IFwiY29weVwiO1xuICAgIGltYWdlQ29udGV4dC5kcmF3SW1hZ2UoaW1hZ2UsIDAsIDApO1xuICAgIFxuICAgIHRoaXMuaW1hZ2VEYXRhID0gaW1hZ2VDb250ZXh0LmdldEltYWdlRGF0YSgwLCAwLCB0aGlzLndpZHRoLCB0aGlzLmhlaWdodCk7XG4gICAgdGhpcy5kYXRhID0gdGhpcy5pbWFnZURhdGEuZGF0YTtcbn07IiwiLypcbiAgICBDaGlja2VuUGFpbnRcbiAgICBcbiAgICBDaGlja2VuUGFpbnQgaXMgYSB0cmFuc2xhdGlvbiBvZiBDaGliaVBhaW50IGZyb20gSmF2YSB0byBKYXZhU2NyaXB0XG4gICAgYnkgTmljaG9sYXMgU2hlcmxvY2sgLyBDaGlja2VuIFNtb290aGllLlxuICAgIFxuICAgIENoaWJpUGFpbnQgaXMgQ29weXJpZ2h0IChjKSAyMDA2LTIwMDggTWFyYyBTY2hlZmVyXG5cbiAgICBDaGlja2VuUGFpbnQgaXMgZnJlZSBzb2Z0d2FyZTogeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yIG1vZGlmeVxuICAgIGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgYXMgcHVibGlzaGVkIGJ5XG4gICAgdGhlIEZyZWUgU29mdHdhcmUgRm91bmRhdGlvbiwgZWl0aGVyIHZlcnNpb24gMyBvZiB0aGUgTGljZW5zZSwgb3JcbiAgICAoYXQgeW91ciBvcHRpb24pIGFueSBsYXRlciB2ZXJzaW9uLlxuXG4gICAgQ2hpY2tlblBhaW50IGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsXG4gICAgYnV0IFdJVEhPVVQgQU5ZIFdBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2ZcbiAgICBNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuICBTZWUgdGhlXG4gICAgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy5cblxuICAgIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXG4gICAgYWxvbmcgd2l0aCBDaGlja2VuUGFpbnQuIElmIG5vdCwgc2VlIDxodHRwOi8vd3d3LmdudS5vcmcvbGljZW5zZXMvPi5cbiovXG5cbmltcG9ydCBDUEJpdG1hcCBmcm9tIFwiLi9DUEJpdG1hcFwiO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBDUEdyZXlCbXAod2lkdGgsIGhlaWdodCwgYml0RGVwdGgpIHtcblxuICAgIENQQml0bWFwLmNhbGwodGhpcywgd2lkdGgsIGhlaWdodCk7XG5cbiAgICB0aGlzLmJpdERlcHRoID0gYml0RGVwdGg7XG4gICAgXG4gICAgc3dpdGNoIChiaXREZXB0aCkge1xuICAgICAgICBjYXNlIDMyOlxuICAgICAgICAgICAgdGhpcy5kYXRhID0gbmV3IFVpbnQzMkFycmF5KHdpZHRoICogaGVpZ2h0KTtcbiAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMTY6XG4gICAgICAgICAgICB0aGlzLmRhdGEgPSBuZXcgVWludDE2QXJyYXkod2lkdGggKiBoZWlnaHQpO1xuICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSA4OlxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgdGhpcy5kYXRhID0gbmV3IFVpbnQ4QXJyYXkod2lkdGggKiBoZWlnaHQpO1xuICAgIH1cblxuICAgIHRoaXMuY2xvbmUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyXG4gICAgICAgICAgICByZXN1bHQgPSBuZXcgQ1BHcmV5Qm1wKHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0LCB0aGlzLmJpdERlcHRoKTtcbiAgICAgICAgXG4gICAgICAgIHJlc3VsdC5kYXRhLnNldCh0aGlzLmRhdGEpO1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9O1xuICAgIFxuICAgIHRoaXMuY2xlYXJBbGwgPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuZGF0YS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdGhpcy5kYXRhW2ldID0gdmFsdWU7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFxuICAgIHRoaXMuY2xlYXJSZWN0ID0gZnVuY3Rpb24ocmVjdCwgdmFsdWUpIHtcbiAgICAgICAgdmFyXG4gICAgICAgICAgICByZWN0ID0gdGhpcy5nZXRCb3VuZHMoKS5jbGlwKHJlY3QpLFxuICAgICAgICAgICAgeVN0cmlkZSA9IHRoaXMud2lkdGggLSByZWN0LmdldFdpZHRoKCksXG4gICAgICAgICAgICBwaXhJbmRleCA9IHRoaXMub2Zmc2V0T2ZQaXhlbChyZWN0LmxlZnQsIHJlY3QudG9wKTtcbiAgICAgICAgXG4gICAgICAgIGZvciAodmFyIHkgPSByZWN0LnRvcDsgeSA8IHJlY3QuYm90dG9tOyB5KyssIHBpeEluZGV4ICs9IHlTdHJpZGUpIHtcbiAgICAgICAgICAgIGZvciAodmFyIHggPSByZWN0LmxlZnQ7IHggPCByZWN0LnJpZ2h0OyB4KyssIHBpeEluZGV4KyspIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRhdGFbcGl4SW5kZXhdID0gdmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgdGhpcy5taXJyb3JIb3Jpem9udGFsbHkgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyXG4gICAgICAgICAgICBuZXdEYXRhID0gbmV3IFVpbnQ4QXJyYXkod2lkdGggKiBoZWlnaHQpO1xuXG4gICAgICAgIGZvciAodmFyIHkgPSAwOyB5IDwgaGVpZ2h0OyB5KyspIHtcbiAgICAgICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgd2lkdGg7IHgrKykge1xuICAgICAgICAgICAgICAgIG5ld0RhdGFbeSAqIHdpZHRoICsgeF0gPSB0aGlzLmRhdGFbeSAqIHdpZHRoICsgd2lkdGggLSB4IC0gMV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmRhdGEgPSBuZXdEYXRhO1xuICAgIH07XG5cbiAgICB0aGlzLmFwcGx5TFVUID0gZnVuY3Rpb24obHV0KSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5kYXRhLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB0aGlzLmRhdGFbaV0gPSBsdXQudGFibGVbdGhpcy5kYXRhW2ldXTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgXG4gICAgdGhpcy50b0NhbnZhcyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXJcbiAgICAgICAgICAgIGltYWdlRGF0YSA9IHRoaXMudG9JbWFnZURhdGEoKSxcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKSxcbiAgICAgICAgICAgIGNvbnRleHQgPSBjYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpO1xuICAgICAgICBcbiAgICAgICAgY2FudmFzLndpZHRoID0gdGhpcy53aWR0aDtcbiAgICAgICAgY2FudmFzLmhlaWdodCA9IHRoaXMuaGVpZ2h0O1xuICAgICAgICBcbiAgICAgICAgY29udGV4dC5wdXRJbWFnZURhdGEoaW1hZ2VEYXRhLCAwLCAwKTtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiBjYW52YXM7XG4gICAgfTtcbiAgICBcbiAgICB0aGlzLnRvSW1hZ2VEYXRhID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhclxuICAgICAgICAgICAgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKSxcbiAgICAgICAgICAgIGNvbnRleHQgPSBjYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpLFxuICAgICAgICAgICAgaW1hZ2VEYXRhID0gY29udGV4dC5jcmVhdGVJbWFnZURhdGEodGhpcy53aWR0aCwgdGhpcy5oZWlnaHQpLFxuICAgICAgICAgICAgXG4gICAgICAgICAgICBzcmNJbmRleCA9IDAsXG4gICAgICAgICAgICBkc3RJbmRleCA9IDA7XG4gICAgICAgIFxuICAgICAgICBmb3IgKHZhciB5ID0gMDsgeSA8IHRoaXMuaGVpZ2h0OyB5KyspIHtcbiAgICAgICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgdGhpcy53aWR0aDsgeCsrKSB7XG4gICAgICAgICAgICAgICAgaW1hZ2VEYXRhLmRhdGFbZHN0SW5kZXgrK10gPSB0aGlzLmRhdGFbc3JjSW5kZXhdO1xuICAgICAgICAgICAgICAgIGltYWdlRGF0YS5kYXRhW2RzdEluZGV4KytdID0gdGhpcy5kYXRhW3NyY0luZGV4XTtcbiAgICAgICAgICAgICAgICBpbWFnZURhdGEuZGF0YVtkc3RJbmRleCsrXSA9IHRoaXMuZGF0YVtzcmNJbmRleF07XG4gICAgICAgICAgICAgICAgaW1hZ2VEYXRhLmRhdGFbZHN0SW5kZXgrK10gPSAweEZGO1xuICAgICAgICAgICAgICAgIHNyY0luZGV4Kys7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHJldHVybiBpbWFnZURhdGE7XG4gICAgfTtcbn1cblxuQ1BHcmV5Qm1wLnByb3RvdHlwZS5vZmZzZXRPZlBpeGVsID0gZnVuY3Rpb24oeCwgeSkge1xuICAgIHJldHVybiB5ICogdGhpcy53aWR0aCArIHg7XG59IiwiLypcbiAgICBDaGlja2VuUGFpbnRcbiAgICBcbiAgICBDaGlja2VuUGFpbnQgaXMgYSB0cmFuc2xhdGlvbiBvZiBDaGliaVBhaW50IGZyb20gSmF2YSB0byBKYXZhU2NyaXB0XG4gICAgYnkgTmljaG9sYXMgU2hlcmxvY2sgLyBDaGlja2VuIFNtb290aGllLlxuICAgIFxuICAgIENoaWJpUGFpbnQgaXMgQ29weXJpZ2h0IChjKSAyMDA2LTIwMDggTWFyYyBTY2hlZmVyXG5cbiAgICBDaGlja2VuUGFpbnQgaXMgZnJlZSBzb2Z0d2FyZTogeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yIG1vZGlmeVxuICAgIGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgYXMgcHVibGlzaGVkIGJ5XG4gICAgdGhlIEZyZWUgU29mdHdhcmUgRm91bmRhdGlvbiwgZWl0aGVyIHZlcnNpb24gMyBvZiB0aGUgTGljZW5zZSwgb3JcbiAgICAoYXQgeW91ciBvcHRpb24pIGFueSBsYXRlciB2ZXJzaW9uLlxuXG4gICAgQ2hpY2tlblBhaW50IGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsXG4gICAgYnV0IFdJVEhPVVQgQU5ZIFdBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2ZcbiAgICBNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuICBTZWUgdGhlXG4gICAgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy5cblxuICAgIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXG4gICAgYWxvbmcgd2l0aCBDaGlja2VuUGFpbnQuIElmIG5vdCwgc2VlIDxodHRwOi8vd3d3LmdudS5vcmcvbGljZW5zZXMvPi5cbiovXG5cbmltcG9ydCBDUENvbG9yQm1wIGZyb20gJy4vQ1BDb2xvckJtcCc7XG5pbXBvcnQgQ1BCbGVuZCBmcm9tICcuL0NQQmxlbmQnO1xuXG4vKipcbiAqIE5vdGUgbGF5ZXIgaXMgbm90IGNsZWFyZWQgdG8gYW55IHNwZWNpZmljIHZhbHVlcyB1cG9uIGluaXRpYWwgY3JlYXRpb24sIHVzZSBjbGVhckFsbCgpLlxuICovXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBDUExheWVyKHdpZHRoLCBoZWlnaHQsIG5hbWUpIHtcbiAgICAvLyBTdXBlci1jb25zdHJ1Y3RvclxuICAgIENQQ29sb3JCbXAuY2FsbCh0aGlzLCB3aWR0aCwgaGVpZ2h0KTtcbiAgICBcbiAgICB0aGlzLm5hbWUgPSBuYW1lIHx8IFwiXCI7XG4gICAgXG4gICAgdGhpcy5hbHBoYSA9IDEwMDtcbiAgICB0aGlzLnZpc2libGUgPSB0cnVlO1xuICAgIHRoaXMuYmxlbmRNb2RlID0gQ1BMYXllci5MTV9OT1JNQUw7XG59XG5cbkNQTGF5ZXIucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShDUENvbG9yQm1wLnByb3RvdHlwZSk7XG5DUExheWVyLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IENQTGF5ZXI7XG5cbmNvbnN0XG4gICAgQllURVNfUEVSX1BJWEVMID0gNCxcbiAgICBcbiAgICBSRURfQllURV9PRkZTRVQgPSAwLFxuICAgIEdSRUVOX0JZVEVfT0ZGU0VUID0gMSxcbiAgICBCTFVFX0JZVEVfT0ZGU0VUID0gMixcbiAgICBBTFBIQV9CWVRFX09GRlNFVCA9IDMsXG4gICAgXG4gICAgYmxlbmQgPSBuZXcgQ1BCbGVuZCgpO1xuXG5DUExheWVyLnByb3RvdHlwZS5mdXNpb25XaXRoID0gZnVuY3Rpb24oZnVzaW9uLCByZWN0KSB7XG4gICAgaWYgKHRoaXMuYWxwaGEgPD0gMCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIFxuICAgIHJlY3QgPSB0aGlzLmdldEJvdW5kcygpLmNsaXAocmVjdCk7XG4gICAgXG4gICAgc3dpdGNoICh0aGlzLmJsZW5kTW9kZSkge1xuICAgICAgICBjYXNlIENQTGF5ZXIuTE1fTk9STUFMOlxuICAgICAgICAgICAgaWYgKHRoaXMuYWxwaGEgPj0gMTAwKSB7XG4gICAgICAgICAgICAgICAgYmxlbmQuZnVzaW9uV2l0aE5vcm1hbE5vQWxwaGEodGhpcywgZnVzaW9uLCByZWN0KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgYmxlbmQuZnVzaW9uV2l0aE5vcm1hbCh0aGlzLCBmdXNpb24sIHJlY3QpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIFxuICAgICAgICBjYXNlIENQTGF5ZXIuTE1fTVVMVElQTFk6XG4gICAgICAgICAgICBibGVuZC5mdXNpb25XaXRoTXVsdGlwbHkodGhpcywgZnVzaW9uLCByZWN0KTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgQ1BMYXllci5MTV9BREQ6XG4gICAgICAgICAgICBibGVuZC5mdXNpb25XaXRoQWRkKHRoaXMsIGZ1c2lvbiwgcmVjdCk7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlIENQTGF5ZXIuTE1fU0NSRUVOOlxuICAgICAgICAgICAgYmxlbmQuZnVzaW9uV2l0aFNjcmVlbih0aGlzLCBmdXNpb24sIHJlY3QpO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSBDUExheWVyLkxNX0xJR0hURU46XG4gICAgICAgICAgICBibGVuZC5mdXNpb25XaXRoTGlnaHRlbih0aGlzLCBmdXNpb24sIHJlY3QpO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSBDUExheWVyLkxNX0RBUktFTjpcbiAgICAgICAgICAgIGJsZW5kLmZ1c2lvbldpdGhEYXJrZW4odGhpcywgZnVzaW9uLCByZWN0KTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgQ1BMYXllci5MTV9TVUJUUkFDVDpcbiAgICAgICAgICAgIGJsZW5kLmZ1c2lvbldpdGhTdWJ0cmFjdCh0aGlzLCBmdXNpb24sIHJlY3QpO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSBDUExheWVyLkxNX0RPREdFOlxuICAgICAgICAgICAgYmxlbmQuZnVzaW9uV2l0aERvZGdlKHRoaXMsIGZ1c2lvbiwgcmVjdCk7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlIENQTGF5ZXIuTE1fQlVSTjpcbiAgICAgICAgICAgIGJsZW5kLmZ1c2lvbldpdGhCdXJuKHRoaXMsIGZ1c2lvbiwgcmVjdCk7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlIENQTGF5ZXIuTE1fT1ZFUkxBWTpcbiAgICAgICAgICAgIGJsZW5kLmZ1c2lvbldpdGhPdmVybGF5KHRoaXMsIGZ1c2lvbiwgcmVjdCk7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlIENQTGF5ZXIuTE1fSEFSRExJR0hUOlxuICAgICAgICAgICAgYmxlbmQuZnVzaW9uV2l0aEhhcmRMaWdodEZ1bGxBbHBoYSh0aGlzLCBmdXNpb24sIHJlY3QpO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSBDUExheWVyLkxNX1NPRlRMSUdIVDpcbiAgICAgICAgICAgIGJsZW5kLmZ1c2lvbldpdGhTb2Z0TGlnaHRGdWxsQWxwaGEodGhpcywgZnVzaW9uLCByZWN0KTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgQ1BMYXllci5MTV9WSVZJRExJR0hUOlxuICAgICAgICAgICAgYmxlbmQuZnVzaW9uV2l0aFZpdmlkTGlnaHRGdWxsQWxwaGEodGhpcywgZnVzaW9uLCByZWN0KTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgQ1BMYXllci5MTV9MSU5FQVJMSUdIVDpcbiAgICAgICAgICAgIGJsZW5kLmZ1c2lvbldpdGhMaW5lYXJMaWdodEZ1bGxBbHBoYSh0aGlzLCBmdXNpb24sIHJlY3QpO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSBDUExheWVyLkxNX1BJTkxJR0hUOlxuICAgICAgICAgICAgYmxlbmQuZnVzaW9uV2l0aFBpbkxpZ2h0RnVsbEFscGhhKHRoaXMsIGZ1c2lvbiwgcmVjdCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICB9XG59O1xuXG5DUExheWVyLnByb3RvdHlwZS5mdXNpb25XaXRoRnVsbEFscGhhID0gZnVuY3Rpb24oZnVzaW9uLCByZWN0KSB7XG4gICAgaWYgKHRoaXMuYWxwaGEgPD0gMCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIFxuICAgIHJlY3QgPSB0aGlzLmdldEJvdW5kcygpLmNsaXAocmVjdCk7XG5cbiAgICBzd2l0Y2ggKHRoaXMuYmxlbmRNb2RlKSB7XG4gICAgICAgIGNhc2UgQ1BMYXllci5MTV9OT1JNQUw6XG4gICAgICAgICAgICBibGVuZC5mdXNpb25XaXRoTm9ybWFsRnVsbEFscGhhKHRoaXMsIGZ1c2lvbiwgcmVjdCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgXG4gICAgICAgIGNhc2UgQ1BMYXllci5MTV9NVUxUSVBMWTpcbiAgICAgICAgICAgIGJsZW5kLmZ1c2lvbldpdGhNdWx0aXBseUZ1bGxBbHBoYSh0aGlzLCBmdXNpb24sIHJlY3QpO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSBDUExheWVyLkxNX0FERDpcbiAgICAgICAgICAgIGJsZW5kLmZ1c2lvbldpdGhBZGRGdWxsQWxwaGEodGhpcywgZnVzaW9uLCByZWN0KTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgXG4gICAgICAgIGNhc2UgQ1BMYXllci5MTV9TQ1JFRU46XG4gICAgICAgICAgICBibGVuZC5mdXNpb25XaXRoU2NyZWVuRnVsbEFscGhhKHRoaXMsIGZ1c2lvbiwgcmVjdCk7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlIENQTGF5ZXIuTE1fTElHSFRFTjpcbiAgICAgICAgICAgIGJsZW5kLmZ1c2lvbldpdGhMaWdodGVuRnVsbEFscGhhKHRoaXMsIGZ1c2lvbiwgcmVjdCk7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlIENQTGF5ZXIuTE1fREFSS0VOOlxuICAgICAgICAgICAgYmxlbmQuZnVzaW9uV2l0aERhcmtlbkZ1bGxBbHBoYSh0aGlzLCBmdXNpb24sIHJlY3QpO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSBDUExheWVyLkxNX1NVQlRSQUNUOlxuICAgICAgICAgICAgYmxlbmQuZnVzaW9uV2l0aFN1YnRyYWN0RnVsbEFscGhhKHRoaXMsIGZ1c2lvbiwgcmVjdCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIFxuICAgICAgICBjYXNlIENQTGF5ZXIuTE1fRE9ER0U6XG4gICAgICAgICAgICBibGVuZC5mdXNpb25XaXRoRG9kZ2VGdWxsQWxwaGEodGhpcywgZnVzaW9uLCByZWN0KTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgQ1BMYXllci5MTV9CVVJOOlxuICAgICAgICAgICAgYmxlbmQuZnVzaW9uV2l0aEJ1cm5GdWxsQWxwaGEodGhpcywgZnVzaW9uLCByZWN0KTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgQ1BMYXllci5MTV9PVkVSTEFZOlxuICAgICAgICAgICAgYmxlbmQuZnVzaW9uV2l0aE92ZXJsYXlGdWxsQWxwaGEodGhpcywgZnVzaW9uLCByZWN0KTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgQ1BMYXllci5MTV9IQVJETElHSFQ6XG4gICAgICAgICAgICBibGVuZC5mdXNpb25XaXRoSGFyZExpZ2h0RnVsbEFscGhhKHRoaXMsIGZ1c2lvbiwgcmVjdCk7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlIENQTGF5ZXIuTE1fU09GVExJR0hUOlxuICAgICAgICAgICAgYmxlbmQuZnVzaW9uV2l0aFNvZnRMaWdodEZ1bGxBbHBoYSh0aGlzLCBmdXNpb24sIHJlY3QpO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSBDUExheWVyLkxNX1ZJVklETElHSFQ6XG4gICAgICAgICAgICBibGVuZC5mdXNpb25XaXRoVml2aWRMaWdodEZ1bGxBbHBoYSh0aGlzLCBmdXNpb24sIHJlY3QpO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSBDUExheWVyLkxNX0xJTkVBUkxJR0hUOlxuICAgICAgICAgICAgYmxlbmQuZnVzaW9uV2l0aExpbmVhckxpZ2h0RnVsbEFscGhhKHRoaXMsIGZ1c2lvbiwgcmVjdCk7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlIENQTGF5ZXIuTE1fUElOTElHSFQ6XG4gICAgICAgICAgICBibGVuZC5mdXNpb25XaXRoUGluTGlnaHRGdWxsQWxwaGEodGhpcywgZnVzaW9uLCByZWN0KTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgIH1cbn07XG5cbkNQTGF5ZXIucHJvdG90eXBlLmNsZWFyQWxsID0gZnVuY3Rpb24oY29sb3IpIHtcbiAgICB2YXJcbiAgICAgICAgYSA9IChjb2xvciA+PiAyNCkgJiAweEZGLFxuICAgICAgICByID0gKGNvbG9yID4+IDE2KSAmIDB4RkYsXG4gICAgICAgIGcgPSAoY29sb3IgPj4gOCkgJiAweEZGLFxuICAgICAgICBiID0gY29sb3IgJiAweEZGO1xuICAgIFxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy53aWR0aCAqIHRoaXMuaGVpZ2h0ICogQllURVNfUEVSX1BJWEVMOyApIHtcbiAgICAgICAgdGhpcy5kYXRhW2krK10gPSByO1xuICAgICAgICB0aGlzLmRhdGFbaSsrXSA9IGc7XG4gICAgICAgIHRoaXMuZGF0YVtpKytdID0gYjtcbiAgICAgICAgdGhpcy5kYXRhW2krK10gPSBhO1xuICAgIH1cbn07XG5cbkNQTGF5ZXIucHJvdG90eXBlLmNsZWFyUmVjdCA9IGZ1bmN0aW9uKHJlY3QsIGNvbG9yKSB7XG4gICAgdmFyXG4gICAgICAgIGEgPSAoY29sb3IgPj4gMjQpICYgMHhGRixcbiAgICAgICAgciA9IChjb2xvciA+PiAxNikgJiAweEZGLFxuICAgICAgICBnID0gKGNvbG9yID4+IDgpICYgMHhGRixcbiAgICAgICAgYiA9IGNvbG9yICYgMHhGRjtcbiAgICBcbiAgICB2YXJcbiAgICAgICAgcmVjdCA9IHRoaXMuZ2V0Qm91bmRzKCkuY2xpcChyZWN0KSxcbiAgICAgICAgeVN0cmlkZSA9ICh0aGlzLndpZHRoIC0gcmVjdC5nZXRXaWR0aCgpKSAqIEJZVEVTX1BFUl9QSVhFTCxcbiAgICAgICAgXG4gICAgICAgIHBpeEluZGV4ID0gdGhpcy5vZmZzZXRPZlBpeGVsKHJlY3QubGVmdCwgcmVjdC50b3ApO1xuICAgIFxuICAgIGZvciAodmFyIHkgPSByZWN0LnRvcDsgeSA8IHJlY3QuYm90dG9tOyB5KyssIHBpeEluZGV4ICs9IHlTdHJpZGUpIHtcbiAgICAgICAgZm9yICh2YXIgeCA9IHJlY3QubGVmdDsgeCA8IHJlY3QucmlnaHQ7IHgrKykge1xuICAgICAgICAgICAgdGhpcy5kYXRhW3BpeEluZGV4KytdID0gcjtcbiAgICAgICAgICAgIHRoaXMuZGF0YVtwaXhJbmRleCsrXSA9IGc7XG4gICAgICAgICAgICB0aGlzLmRhdGFbcGl4SW5kZXgrK10gPSBiO1xuICAgICAgICAgICAgdGhpcy5kYXRhW3BpeEluZGV4KytdID0gYTtcbiAgICAgICAgfVxuICAgIH1cbn07XG5cbi8qKlxuICogQHBhcmFtIHJlY3QgQ1BSZWN0XG4gKiBAcGFyYW0gc291cmNlIENQTGF5ZXJcbiAqL1xuQ1BMYXllci5wcm90b3R5cGUuY29weVJlZ2lvbkhGbGlwID0gZnVuY3Rpb24ocmVjdCwgc291cmNlKSB7XG4gICAgcmVjdCA9IHRoaXMuZ2V0Qm91bmRzKCkuY2xpcChyZWN0KTtcblxuICAgIGZvciAodmFyIHkgPSByZWN0LnRvcDsgeSA8IHJlY3QuYm90dG9tOyB5KyspIHtcbiAgICAgICAgdmFyXG4gICAgICAgICAgICBkc3RPZmZzZXQgPSB0aGlzLm9mZnNldE9mUGl4ZWwocmVjdC5sZWZ0LCB5KSxcbiAgICAgICAgICAgIHNyY09mZnNldCA9IHNvdXJjZS5vZmZzZXRPZlBpeGVsKHJlY3QucmlnaHQgLSAxLCB5KTtcbiAgICAgICAgXG4gICAgICAgIGZvciAodmFyIHggPSByZWN0LmxlZnQ7IHggPCByZWN0LnJpZ2h0OyB4KyssIHNyY09mZnNldCAtPSBDUENvbG9yQm1wLkJZVEVTX1BFUl9QSVhFTCAqIDIpIHtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgQ1BDb2xvckJtcC5CWVRFU19QRVJfUElYRUw7IGkrKykge1xuICAgICAgICAgICAgICAgIHRoaXMuZGF0YVtkc3RPZmZzZXQrK10gPSBzb3VyY2UuZGF0YVtzcmNPZmZzZXQrK107XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59O1xuXG4vKipcbiAqIEBwYXJhbSByZWN0IENQUmVjdFxuICogQHBhcmFtIHNvdXJjZSBDUExheWVyXG4gKi9cbkNQTGF5ZXIucHJvdG90eXBlLmNvcHlSZWdpb25WRmxpcCA9IGZ1bmN0aW9uKHJlY3QsIHNvdXJjZSkge1xuICAgIHJlY3QgPSB0aGlzLmdldEJvdW5kcygpLmNsaXAocmVjdCk7XG4gICAgXG4gICAgdmFyXG4gICAgICAgIHdpZHRoQnl0ZXMgPSByZWN0LmdldFdpZHRoKCkgKiBDUENvbG9yQm1wLkJZVEVTX1BFUl9QSVhFTDtcblxuICAgIGZvciAodmFyIHkgPSByZWN0LnRvcDsgeSA8IHJlY3QuYm90dG9tOyB5KyspIHtcbiAgICAgICAgdmFyXG4gICAgICAgICAgICBkc3RPZmZzZXQgPSB0aGlzLm9mZnNldE9mUGl4ZWwocmVjdC5sZWZ0LCB5KSxcbiAgICAgICAgICAgIHNyY09mZnNldCA9IHNvdXJjZS5vZmZzZXRPZlBpeGVsKHJlY3QubGVmdCwgcmVjdC5ib3R0b20gLSAxIC0gKHkgLSByZWN0LnRvcCkpO1xuICAgICAgICBcbiAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCB3aWR0aEJ5dGVzOyB4KyspIHtcbiAgICAgICAgICAgIHRoaXMuZGF0YVtkc3RPZmZzZXQrK10gPSBzb3VyY2UuZGF0YVtzcmNPZmZzZXQrK107XG4gICAgICAgIH1cbiAgICB9XG59XG5cbi8qKlxuICogQHBhcmFtIHIgQ1BSZWN0XG4gKi9cbkNQTGF5ZXIucHJvdG90eXBlLmZpbGxXaXRoTm9pc2UgPSBmdW5jdGlvbihyZWN0KSB7XG4gICAgcmVjdCA9IHRoaXMuZ2V0Qm91bmRzKCkuY2xpcChyZWN0KTtcblxuICAgIHZhclxuICAgICAgICB2YWx1ZSxcbiAgICAgICAgeVN0cmlkZSA9ICh0aGlzLndpZHRoIC0gcmVjdC5nZXRXaWR0aCgpKSAqIENQQ29sb3JCbXAuQllURVNfUEVSX1BJWEVMLFxuICAgICAgICBcbiAgICAgICAgcGl4SW5kZXggPSB0aGlzLm9mZnNldE9mUGl4ZWwocmVjdC5sZWZ0LCByZWN0LnRvcCk7XG5cbiAgICBmb3IgKHZhciB5ID0gcmVjdC50b3A7IHkgPCByZWN0LmJvdHRvbTsgeSsrLCBwaXhJbmRleCArPSB5U3RyaWRlKSB7XG4gICAgICAgIGZvciAodmFyIHggPSByZWN0LmxlZnQ7IHggPCByZWN0LnJpZ2h0OyB4KyssIHBpeEluZGV4ICs9IENQQ29sb3JCbXAuQllURVNfUEVSX1BJWEVMKSB7XG4gICAgICAgICAgICB2YWx1ZSA9IChNYXRoLnJhbmRvbSgpICogMHgxMDApIHwgMDtcblxuICAgICAgICAgICAgdGhpcy5kYXRhW3BpeEluZGV4ICsgQ1BDb2xvckJtcC5SRURfQllURV9PRkZTRVRdID0gdmFsdWU7XG4gICAgICAgICAgICB0aGlzLmRhdGFbcGl4SW5kZXggKyBDUENvbG9yQm1wLkdSRUVOX0JZVEVfT0ZGU0VUXSA9IHZhbHVlO1xuICAgICAgICAgICAgdGhpcy5kYXRhW3BpeEluZGV4ICsgQ1BDb2xvckJtcC5CTFVFX0JZVEVfT0ZGU0VUXSA9IHZhbHVlO1xuICAgICAgICAgICAgdGhpcy5kYXRhW3BpeEluZGV4ICsgQ1BDb2xvckJtcC5BTFBIQV9CWVRFX09GRlNFVF0gPSAweEZGO1xuICAgICAgICB9XG4gICAgfVxufTtcblxuLyoqXG4gKiBSZXBsYWNlIHRoZSBwaXhlbHMgaW4gdGhlIGdpdmVuIHJlY3Qgd2l0aCB0aGUgZ2l2ZW4gaG9yaXpvbnRhbCBncmFkaWVudC5cbiAqXG4gKiBAcGFyYW0gcmVjdCBDUFJlY3RcbiAqIEBwYXJhbSBmcm9tWCBpbnRcbiAqIEBwYXJhbSB0b1ggaW50XG4gKiBAcGFyYW0gZ3JhZGllbnRQb2ludHMgaW50W11cbiAqL1xuQ1BMYXllci5wcm90b3R5cGUuZ3JhZGllbnRIb3J6UmVwbGFjZSA9IGZ1bmN0aW9uKHJlY3QsIGZyb21YLCB0b1gsIGdyYWRpZW50UG9pbnRzKSB7XG4gICAgdmFyXG4gICAgICAgIGZyb21Db2xvciA9IHtcbiAgICAgICAgICAgIHI6IChncmFkaWVudFBvaW50c1swXSA+PiAxNikgJiAweEZGLFxuICAgICAgICAgICAgZzogKGdyYWRpZW50UG9pbnRzWzBdID4+IDgpICYgMHhGRixcbiAgICAgICAgICAgIGI6IGdyYWRpZW50UG9pbnRzWzBdICYgMHhGRixcbiAgICAgICAgICAgIGE6IChncmFkaWVudFBvaW50c1swXSA+PiAyNCkgJiAweEZGXG4gICAgICAgIH0sXG4gICAgICAgIHRvQ29sb3IgPSB7XG4gICAgICAgICAgICByOiAoZ3JhZGllbnRQb2ludHNbMV0gPj4gMTYpICYgMHhGRixcbiAgICAgICAgICAgIGc6IChncmFkaWVudFBvaW50c1sxXSA+PiA4KSAmIDB4RkYsXG4gICAgICAgICAgICBiOiBncmFkaWVudFBvaW50c1sxXSAmIDB4RkYsXG4gICAgICAgICAgICBhOiAoZ3JhZGllbnRQb2ludHNbMV0gPj4gMjQpICYgMHhGRlxuICAgICAgICB9LFxuXG4gICAgICAgIHlTdHJpZGUgPSAodGhpcy53aWR0aCAtIHJlY3QuZ2V0V2lkdGgoKSkgKiBDUENvbG9yQm1wLkJZVEVTX1BFUl9QSVhFTCxcbiAgICAgICAgcGl4SW5kZXggPSB0aGlzLm9mZnNldE9mUGl4ZWwocmVjdC5sZWZ0LCByZWN0LnRvcCkgfCAwLFxuICAgICAgICBoID0gKHJlY3QuYm90dG9tIC0gcmVjdC50b3ApIHwgMDtcblxuICAgIGlmICh0b1ggPCBmcm9tWCkge1xuICAgICAgICB2YXJcbiAgICAgICAgICAgIHRlbXAgPSB0b1g7XG4gICAgICAgIHRvWCA9IGZyb21YO1xuICAgICAgICBmcm9tWCA9IHRlbXA7XG5cbiAgICAgICAgdGVtcCA9IGZyb21Db2xvcjtcbiAgICAgICAgZnJvbUNvbG9yID0gdG9Db2xvcjtcbiAgICAgICAgdG9Db2xvciA9IHRlbXA7XG4gICAgfVxuICAgIFxuICAgIHZhclxuICAgICAgICBncmFkaWVudFJhbmdlID0gKHRvWCAtIGZyb21YKSB8IDAsXG4gICAgICAgIHJTdGVwID0gKHRvQ29sb3IuciAtIGZyb21Db2xvci5yKSAvIGdyYWRpZW50UmFuZ2UsXG4gICAgICAgIGdTdGVwID0gKHRvQ29sb3IuZyAtIGZyb21Db2xvci5nKSAvIGdyYWRpZW50UmFuZ2UsXG4gICAgICAgIGJTdGVwID0gKHRvQ29sb3IuYiAtIGZyb21Db2xvci5iKSAvIGdyYWRpZW50UmFuZ2UsXG4gICAgICAgIGFTdGVwID0gKHRvQ29sb3IuYSAtIGZyb21Db2xvci5hKSAvIGdyYWRpZW50UmFuZ2UsXG4gICAgXG4gICAgICAgIGp1bXAgPSBNYXRoLm1heChyZWN0LmxlZnQgLSBmcm9tWCwgMCk7XG5cbiAgICBmb3IgKHZhciB5ID0gMDsgeSA8IGg7IHkrKywgcGl4SW5kZXggKz0geVN0cmlkZSkge1xuICAgICAgICAvLyBUaGUgc29saWQgY29sb3Igc2VjdGlvbiBiZWZvcmUgdGhlIGdyYWRpZW50XG4gICAgICAgIHZhclxuICAgICAgICAgICAgeCA9IHJlY3QubGVmdDtcblxuICAgICAgICBmb3IgKHZhciB4RW5kID0gTWF0aC5taW4oZnJvbVgsIHJlY3QucmlnaHQpIHwgMDsgeCA8IHhFbmQ7IHgrKywgcGl4SW5kZXggKz0gQ1BDb2xvckJtcC5CWVRFU19QRVJfUElYRUwpIHtcbiAgICAgICAgICAgIHRoaXMuZGF0YVtwaXhJbmRleCArIENQQ29sb3JCbXAuUkVEX0JZVEVfT0ZGU0VUXSA9IGZyb21Db2xvci5yO1xuICAgICAgICAgICAgdGhpcy5kYXRhW3BpeEluZGV4ICsgQ1BDb2xvckJtcC5HUkVFTl9CWVRFX09GRlNFVF0gPSBmcm9tQ29sb3IuZztcbiAgICAgICAgICAgIHRoaXMuZGF0YVtwaXhJbmRleCArIENQQ29sb3JCbXAuQkxVRV9CWVRFX09GRlNFVF0gPSBmcm9tQ29sb3IuYjtcbiAgICAgICAgICAgIHRoaXMuZGF0YVtwaXhJbmRleCArIENQQ29sb3JCbXAuQUxQSEFfQllURV9PRkZTRVRdID0gZnJvbUNvbG9yLmE7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBJbiB0aGUgZ3JhZGllbnRcbiAgICAgICAgdmFyXG4gICAgICAgICAgICByID0gZnJvbUNvbG9yLnIgKyByU3RlcCAqIGp1bXAsXG4gICAgICAgICAgICBnID0gZnJvbUNvbG9yLmcgKyBnU3RlcCAqIGp1bXAsXG4gICAgICAgICAgICBiID0gZnJvbUNvbG9yLmIgKyBiU3RlcCAqIGp1bXAsXG4gICAgICAgICAgICBhID0gZnJvbUNvbG9yLmEgKyBhU3RlcCAqIGp1bXA7XG5cbiAgICAgICAgZm9yICh4RW5kID0gTWF0aC5taW4odG9YLCByZWN0LnJpZ2h0KSB8IDA7IHggPCB4RW5kOyB4KyssIHBpeEluZGV4ICs9IENQQ29sb3JCbXAuQllURVNfUEVSX1BJWEVMKSB7XG4gICAgICAgICAgICB0aGlzLmRhdGFbcGl4SW5kZXggKyBDUENvbG9yQm1wLlJFRF9CWVRFX09GRlNFVF0gPSByO1xuICAgICAgICAgICAgdGhpcy5kYXRhW3BpeEluZGV4ICsgQ1BDb2xvckJtcC5HUkVFTl9CWVRFX09GRlNFVF0gPSBnO1xuICAgICAgICAgICAgdGhpcy5kYXRhW3BpeEluZGV4ICsgQ1BDb2xvckJtcC5CTFVFX0JZVEVfT0ZGU0VUXSA9IGI7XG4gICAgICAgICAgICB0aGlzLmRhdGFbcGl4SW5kZXggKyBDUENvbG9yQm1wLkFMUEhBX0JZVEVfT0ZGU0VUXSA9IGE7XG5cbiAgICAgICAgICAgIHIgKz0gclN0ZXA7XG4gICAgICAgICAgICBnICs9IGdTdGVwO1xuICAgICAgICAgICAgYiArPSBiU3RlcDtcbiAgICAgICAgICAgIGEgKz0gYVN0ZXA7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBUaGUgc2VjdGlvbiBhZnRlciB0aGUgZW5kIG9mIHRoZSBncmFkaWVudFxuICAgICAgICBmb3IgKDsgeCA8IHJlY3QucmlnaHQ7IHgrKywgcGl4SW5kZXggKz0gQ1BDb2xvckJtcC5CWVRFU19QRVJfUElYRUwpIHtcbiAgICAgICAgICAgIHRoaXMuZGF0YVtwaXhJbmRleCArIENQQ29sb3JCbXAuUkVEX0JZVEVfT0ZGU0VUXSA9IHRvQ29sb3IucjtcbiAgICAgICAgICAgIHRoaXMuZGF0YVtwaXhJbmRleCArIENQQ29sb3JCbXAuR1JFRU5fQllURV9PRkZTRVRdID0gdG9Db2xvci5nO1xuICAgICAgICAgICAgdGhpcy5kYXRhW3BpeEluZGV4ICsgQ1BDb2xvckJtcC5CTFVFX0JZVEVfT0ZGU0VUXSA9IHRvQ29sb3IuYjtcbiAgICAgICAgICAgIHRoaXMuZGF0YVtwaXhJbmRleCArIENQQ29sb3JCbXAuQUxQSEFfQllURV9PRkZTRVRdID0gdG9Db2xvci5hO1xuICAgICAgICB9XG4gICAgfVxufTtcblxuLyoqXG4gKiBSZXBsYWNlIHRoZSBwaXhlbHMgaW4gdGhlIGdpdmVuIHJlY3Qgd2l0aCB0aGUgZ2l2ZW4gdmVydGljYWwgZ3JhZGllbnQuXG4gKlxuICogQHBhcmFtIHJlY3QgQ1BSZWN0XG4gKiBAcGFyYW0gZnJvbVkgaW50XG4gKiBAcGFyYW0gdG9ZIGludFxuICogQHBhcmFtIGdyYWRpZW50UG9pbnRzIGludFtdXG4gKi9cbkNQTGF5ZXIucHJvdG90eXBlLmdyYWRpZW50VmVydFJlcGxhY2UgPSBmdW5jdGlvbihyZWN0LCBmcm9tWSwgdG9ZLCBncmFkaWVudFBvaW50cykge1xuICAgIHZhclxuICAgICAgICBmcm9tQ29sb3IgPSB7XG4gICAgICAgICAgICByOiAoZ3JhZGllbnRQb2ludHNbMF0gPj4gMTYpICYgMHhGRixcbiAgICAgICAgICAgIGc6IChncmFkaWVudFBvaW50c1swXSA+PiA4KSAmIDB4RkYsXG4gICAgICAgICAgICBiOiBncmFkaWVudFBvaW50c1swXSAmIDB4RkYsXG4gICAgICAgICAgICBhOiAoZ3JhZGllbnRQb2ludHNbMF0gPj4gMjQpICYgMHhGRlxuICAgICAgICB9LFxuICAgICAgICB0b0NvbG9yID0ge1xuICAgICAgICAgICAgcjogKGdyYWRpZW50UG9pbnRzWzFdID4+IDE2KSAmIDB4RkYsXG4gICAgICAgICAgICBnOiAoZ3JhZGllbnRQb2ludHNbMV0gPj4gOCkgJiAweEZGLFxuICAgICAgICAgICAgYjogZ3JhZGllbnRQb2ludHNbMV0gJiAweEZGLFxuICAgICAgICAgICAgYTogKGdyYWRpZW50UG9pbnRzWzFdID4+IDI0KSAmIDB4RkZcbiAgICAgICAgfSxcblxuICAgICAgICB5U3RyaWRlID0gKHRoaXMud2lkdGggLSByZWN0LmdldFdpZHRoKCkpICogQ1BDb2xvckJtcC5CWVRFU19QRVJfUElYRUwsXG4gICAgICAgIHBpeEluZGV4ID0gdGhpcy5vZmZzZXRPZlBpeGVsKHJlY3QubGVmdCwgcmVjdC50b3ApIHwgMCxcbiAgICAgICAgdyA9IChyZWN0LnJpZ2h0IC0gcmVjdC5sZWZ0KSB8IDA7XG5cbiAgICBpZiAodG9ZIDwgZnJvbVkpIHtcbiAgICAgICAgdmFyXG4gICAgICAgICAgICB0ZW1wID0gdG9ZO1xuICAgICAgICB0b1kgPSBmcm9tWTtcbiAgICAgICAgZnJvbVkgPSB0ZW1wO1xuXG4gICAgICAgIHRlbXAgPSBmcm9tQ29sb3I7XG4gICAgICAgIGZyb21Db2xvciA9IHRvQ29sb3I7XG4gICAgICAgIHRvQ29sb3IgPSB0ZW1wO1xuICAgIH1cblxuICAgIHZhclxuICAgICAgICB5ID0gcmVjdC50b3A7XG5cbiAgICAvLyBUaGUgc29saWQgY29sb3Igc2VjdGlvbiBiZWZvcmUgdGhlIHN0YXJ0IG9mIHRoZSBncmFkaWVudFxuICAgIGZvciAodmFyIHlFbmQgPSBNYXRoLm1pbihyZWN0LmJvdHRvbSwgZnJvbVkpIHwgMDsgeSA8IHlFbmQ7IHkrKywgcGl4SW5kZXggKz0geVN0cmlkZSkge1xuICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IHc7IHgrKywgcGl4SW5kZXggKz0gQ1BDb2xvckJtcC5CWVRFU19QRVJfUElYRUwpIHtcbiAgICAgICAgICAgIHRoaXMuZGF0YVtwaXhJbmRleCArIENQQ29sb3JCbXAuUkVEX0JZVEVfT0ZGU0VUXSA9IGZyb21Db2xvci5yO1xuICAgICAgICAgICAgdGhpcy5kYXRhW3BpeEluZGV4ICsgQ1BDb2xvckJtcC5HUkVFTl9CWVRFX09GRlNFVF0gPSBmcm9tQ29sb3IuZztcbiAgICAgICAgICAgIHRoaXMuZGF0YVtwaXhJbmRleCArIENQQ29sb3JCbXAuQkxVRV9CWVRFX09GRlNFVF0gPSBmcm9tQ29sb3IuYjtcbiAgICAgICAgICAgIHRoaXMuZGF0YVtwaXhJbmRleCArIENQQ29sb3JCbXAuQUxQSEFfQllURV9PRkZTRVRdID0gZnJvbUNvbG9yLmE7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBJbnNpZGUgdGhlIGdyYWRpZW50XG4gICAgdmFyXG4gICAgICAgIGdyYWRpZW50UmFuZ2UgPSAodG9ZIC0gZnJvbVkpIHwgMCxcbiAgICAgICAgclN0ZXAgPSAodG9Db2xvci5yIC0gZnJvbUNvbG9yLnIpIC8gZ3JhZGllbnRSYW5nZSxcbiAgICAgICAgZ1N0ZXAgPSAodG9Db2xvci5nIC0gZnJvbUNvbG9yLmcpIC8gZ3JhZGllbnRSYW5nZSxcbiAgICAgICAgYlN0ZXAgPSAodG9Db2xvci5iIC0gZnJvbUNvbG9yLmIpIC8gZ3JhZGllbnRSYW5nZSxcbiAgICAgICAgYVN0ZXAgPSAodG9Db2xvci5hIC0gZnJvbUNvbG9yLmEpIC8gZ3JhZGllbnRSYW5nZSxcbiAgICAgICAgXG4gICAgICAgIGp1bXAgPSBNYXRoLm1heCh5IC0gZnJvbVksIDApLFxuICAgICAgICByID0gZnJvbUNvbG9yLnIgKyByU3RlcCAqIGp1bXAsXG4gICAgICAgIGcgPSBmcm9tQ29sb3IuZyArIGdTdGVwICoganVtcCxcbiAgICAgICAgYiA9IGZyb21Db2xvci5iICsgYlN0ZXAgKiBqdW1wLFxuICAgICAgICBhID0gZnJvbUNvbG9yLmEgKyBhU3RlcCAqIGp1bXA7XG5cbiAgICBmb3IgKHZhciB5RW5kID0gTWF0aC5taW4ocmVjdC5ib3R0b20sIHRvWSkgfCAwOyB5IDwgeUVuZDsgeSsrLCBwaXhJbmRleCArPSB5U3RyaWRlKSB7XG4gICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgdzsgeCsrLCBwaXhJbmRleCArPSBDUENvbG9yQm1wLkJZVEVTX1BFUl9QSVhFTCkge1xuICAgICAgICAgICAgdGhpcy5kYXRhW3BpeEluZGV4ICsgQ1BDb2xvckJtcC5SRURfQllURV9PRkZTRVRdID0gcjtcbiAgICAgICAgICAgIHRoaXMuZGF0YVtwaXhJbmRleCArIENQQ29sb3JCbXAuR1JFRU5fQllURV9PRkZTRVRdID0gZztcbiAgICAgICAgICAgIHRoaXMuZGF0YVtwaXhJbmRleCArIENQQ29sb3JCbXAuQkxVRV9CWVRFX09GRlNFVF0gPSBiO1xuICAgICAgICAgICAgdGhpcy5kYXRhW3BpeEluZGV4ICsgQ1BDb2xvckJtcC5BTFBIQV9CWVRFX09GRlNFVF0gPSBhO1xuICAgICAgICB9XG5cbiAgICAgICAgciArPSByU3RlcDtcbiAgICAgICAgZyArPSBnU3RlcDtcbiAgICAgICAgYiArPSBiU3RlcDtcbiAgICAgICAgYSArPSBhU3RlcDtcbiAgICB9XG5cbiAgICAvLyBUaGUgc2VjdGlvbiBhZnRlciB0aGUgZW5kIG9mIHRoZSBncmFkaWVudFxuICAgIGZvciAoOyB5IDwgcmVjdC5ib3R0b207IHkrKywgcGl4SW5kZXggKz0geVN0cmlkZSkge1xuICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IHc7IHgrKywgcGl4SW5kZXggKz0gQ1BDb2xvckJtcC5CWVRFU19QRVJfUElYRUwpIHtcbiAgICAgICAgICAgIHRoaXMuZGF0YVtwaXhJbmRleCArIENQQ29sb3JCbXAuUkVEX0JZVEVfT0ZGU0VUXSA9IHRvQ29sb3IucjtcbiAgICAgICAgICAgIHRoaXMuZGF0YVtwaXhJbmRleCArIENQQ29sb3JCbXAuR1JFRU5fQllURV9PRkZTRVRdID0gdG9Db2xvci5nO1xuICAgICAgICAgICAgdGhpcy5kYXRhW3BpeEluZGV4ICsgQ1BDb2xvckJtcC5CTFVFX0JZVEVfT0ZGU0VUXSA9IHRvQ29sb3IuYjtcbiAgICAgICAgICAgIHRoaXMuZGF0YVtwaXhJbmRleCArIENQQ29sb3JCbXAuQUxQSEFfQllURV9PRkZTRVRdID0gdG9Db2xvci5hO1xuICAgICAgICB9XG4gICAgfVxufTtcblxuLyoqXG4gKiBSZXBsYWNlIHRoZSBwaXhlbHMgaW4gdGhlIGdpdmVuIHJlY3Qgd2l0aCB0aGUgZ2l2ZW4gZ3JhZGllbnQuXG4gKlxuICogQHBhcmFtIHJlY3QgQ1BSZWN0XG4gKiBAcGFyYW0gZnJvbVggaW50XG4gKiBAcGFyYW0gZnJvbVkgaW50XG4gKiBAcGFyYW0gdG9YIGludFxuICogQHBhcmFtIHRvWSBpbnRcbiAqIEBwYXJhbSBncmFkaWVudFBvaW50cyBpbnRbXVxuICovXG5DUExheWVyLnByb3RvdHlwZS5ncmFkaWVudFJlcGxhY2UgPSBmdW5jdGlvbihyZWN0LCBmcm9tWCwgZnJvbVksIHRvWCwgdG9ZLCBncmFkaWVudFBvaW50cykge1xuICAgIHZhclxuICAgICAgICB5U3RyaWRlID0gKHRoaXMud2lkdGggLSByZWN0LmdldFdpZHRoKCkpICogQ1BDb2xvckJtcC5CWVRFU19QRVJfUElYRUwsXG4gICAgICAgIHBpeEluZGV4ID0gdGhpcy5vZmZzZXRPZlBpeGVsKHJlY3QubGVmdCwgcmVjdC50b3ApIHwgMCxcbiAgICAgICAgdyA9IChyZWN0LnJpZ2h0IC0gcmVjdC5sZWZ0KSB8IDAsXG5cbiAgICAgICAgZnJvbUNvbG9yID0ge1xuICAgICAgICAgICAgcjogKGdyYWRpZW50UG9pbnRzWzBdID4+IDE2KSAmIDB4RkYsXG4gICAgICAgICAgICBnOiAoZ3JhZGllbnRQb2ludHNbMF0gPj4gOCkgJiAweEZGLFxuICAgICAgICAgICAgYjogZ3JhZGllbnRQb2ludHNbMF0gJiAweEZGLFxuICAgICAgICAgICAgYTogKGdyYWRpZW50UG9pbnRzWzBdID4+IDI0KSAmIDB4RkZcbiAgICAgICAgfSxcbiAgICAgICAgdG9Db2xvciA9IHtcbiAgICAgICAgICAgIHI6IChncmFkaWVudFBvaW50c1sxXSA+PiAxNikgJiAweEZGLFxuICAgICAgICAgICAgZzogKGdyYWRpZW50UG9pbnRzWzFdID4+IDgpICYgMHhGRixcbiAgICAgICAgICAgIGI6IGdyYWRpZW50UG9pbnRzWzFdICYgMHhGRixcbiAgICAgICAgICAgIGE6IChncmFkaWVudFBvaW50c1sxXSA+PiAyNCkgJiAweEZGXG4gICAgICAgIH0sXG5cbiAgICAvLyBIb3cgbWFueSBwaXhlbHMgdmVydGljYWxseSBkb2VzIHRoZSBncmFkaWVudCBzZXF1ZW5jZSBjb21wbGV0ZSBvdmVyICgraW5maW5pdHkgZm9yIGhvcml6b250YWwgZ3JhZGllbnRzISlcbiAgICAgICAgdmVydFJhbmdlID0gKHRvWSAtIGZyb21ZKSArICgodG9YIC0gZnJvbVgpICogKHRvWCAtIGZyb21YKSkgLyAodG9ZIC0gZnJvbVkpLFxuICAgIC8vIFNhbWUgZm9yIGhvcml6b250YWxcbiAgICAgICAgaG9yelJhbmdlID0gKHRvWCAtIGZyb21YKSArICgodG9ZIC0gZnJvbVkpICogKHRvWSAtIGZyb21ZKSkgLyAodG9YIC0gZnJvbVgpLFxuICAgICAgICBob3J6U3RlcCA9IDEgLyBob3J6UmFuZ2U7XG5cbiAgICBmb3IgKHZhciB5ID0gcmVjdC50b3A7IHkgPCByZWN0LmJvdHRvbTsgeSsrLCBwaXhJbmRleCArPSB5U3RyaWRlKSB7XG4gICAgICAgIHZhclxuICAgICAgICAvLyBUaGUgcG9zaXRpb24gdGhlIHJvdyBzdGFydHMgYXQgaW4gdGhlIGdyYWRpZW50IFswLjAgLi4uIDEuMClcbiAgICAgICAgICAgIHByb3AgPSAocmVjdC5sZWZ0IC0gZnJvbVgpIC8gaG9yelJhbmdlICsgKHkgLSBmcm9tWSkgLyB2ZXJ0UmFuZ2U7XG5cbiAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCB3OyB4KyssIHBpeEluZGV4ICs9IENQQ29sb3JCbXAuQllURVNfUEVSX1BJWEVMKSB7XG4gICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICBwcm9wQ2xhbXBlZCA9IE1hdGgubWluKE1hdGgubWF4KHByb3AsIDAuMCksIDEuMCksXG4gICAgICAgICAgICAgICAgaW52UHJvcENsYW1wZWQgPSAxIC0gcHJvcENsYW1wZWQ7XG5cbiAgICAgICAgICAgIHRoaXMuZGF0YVtwaXhJbmRleCArIENQQ29sb3JCbXAuUkVEX0JZVEVfT0ZGU0VUXSA9IGZyb21Db2xvci5yICogaW52UHJvcENsYW1wZWQgKyB0b0NvbG9yLnIgKiBwcm9wQ2xhbXBlZDtcbiAgICAgICAgICAgIHRoaXMuZGF0YVtwaXhJbmRleCArIENQQ29sb3JCbXAuR1JFRU5fQllURV9PRkZTRVRdID0gZnJvbUNvbG9yLmcgKiBpbnZQcm9wQ2xhbXBlZCArIHRvQ29sb3IuZyAqIHByb3BDbGFtcGVkO1xuICAgICAgICAgICAgdGhpcy5kYXRhW3BpeEluZGV4ICsgQ1BDb2xvckJtcC5CTFVFX0JZVEVfT0ZGU0VUXSA9IGZyb21Db2xvci5iICogaW52UHJvcENsYW1wZWQgKyB0b0NvbG9yLmIgKiBwcm9wQ2xhbXBlZDtcbiAgICAgICAgICAgIHRoaXMuZGF0YVtwaXhJbmRleCArIENQQ29sb3JCbXAuQUxQSEFfQllURV9PRkZTRVRdID0gZnJvbUNvbG9yLmEgKiBpbnZQcm9wQ2xhbXBlZCArIHRvQ29sb3IuYSAqIHByb3BDbGFtcGVkO1xuXG4gICAgICAgICAgICBwcm9wICs9IGhvcnpTdGVwO1xuICAgICAgICB9XG4gICAgfVxufTtcblxuLyoqXG4gKiBBbHBoYSBibGVuZCB0aGUgZ2l2ZW4gZ3JhZGllbnQgb250byB0aGUgcGl4ZWxzIGluIHRoZSBnaXZlbiByZWN0LlxuICpcbiAqIEBwYXJhbSByZWN0IENQUmVjdFxuICogQHBhcmFtIGZyb21YIGludFxuICogQHBhcmFtIGZyb21ZIGludFxuICogQHBhcmFtIHRvWCBpbnRcbiAqIEBwYXJhbSB0b1kgaW50XG4gKiBAcGFyYW0gZ3JhZGllbnRQb2ludHMgaW50W11cbiAqL1xuQ1BMYXllci5wcm90b3R5cGUuZ3JhZGllbnRBbHBoYSA9IGZ1bmN0aW9uKHJlY3QsIGZyb21YLCBmcm9tWSwgdG9YLCB0b1ksIGdyYWRpZW50UG9pbnRzKSB7XG4gICAgdmFyXG4gICAgICAgIHlTdHJpZGUgPSAodGhpcy53aWR0aCAtIHJlY3QuZ2V0V2lkdGgoKSkgKiBDUENvbG9yQm1wLkJZVEVTX1BFUl9QSVhFTCxcbiAgICAgICAgcGl4SW5kZXggPSB0aGlzLm9mZnNldE9mUGl4ZWwocmVjdC5sZWZ0LCByZWN0LnRvcCkgfCAwLFxuICAgICAgICB3ID0gKHJlY3QucmlnaHQgLSByZWN0LmxlZnQpIHwgMCxcblxuICAgICAgICBmcm9tQ29sb3IgPSB7XG4gICAgICAgICAgICByOiAoZ3JhZGllbnRQb2ludHNbMF0gPj4gMTYpICYgMHhGRixcbiAgICAgICAgICAgIGc6IChncmFkaWVudFBvaW50c1swXSA+PiA4KSAmIDB4RkYsXG4gICAgICAgICAgICBiOiBncmFkaWVudFBvaW50c1swXSAmIDB4RkYsXG4gICAgICAgICAgICBhOiAoZ3JhZGllbnRQb2ludHNbMF0gPj4gMjQpICYgMHhGRlxuICAgICAgICB9LFxuICAgICAgICB0b0NvbG9yID0ge1xuICAgICAgICAgICAgcjogKGdyYWRpZW50UG9pbnRzWzFdID4+IDE2KSAmIDB4RkYsXG4gICAgICAgICAgICBnOiAoZ3JhZGllbnRQb2ludHNbMV0gPj4gOCkgJiAweEZGLFxuICAgICAgICAgICAgYjogZ3JhZGllbnRQb2ludHNbMV0gJiAweEZGLFxuICAgICAgICAgICAgYTogKGdyYWRpZW50UG9pbnRzWzFdID4+IDI0KSAmIDB4RkZcbiAgICAgICAgfSxcblxuICAgIC8vIEhvdyBtYW55IHBpeGVscyB2ZXJ0aWNhbGx5IGRvZXMgdGhlIGdyYWRpZW50IHNlcXVlbmNlIGNvbXBsZXRlIG92ZXIgKCtpbmZpbml0eSBmb3IgaG9yaXpvbnRhbCBncmFkaWVudHMhKVxuICAgICAgICB2ZXJ0UmFuZ2UgPSAodG9ZIC0gZnJvbVkpICsgKCh0b1ggLSBmcm9tWCkgKiAodG9YIC0gZnJvbVgpKSAvICh0b1kgLSBmcm9tWSksXG4gICAgLy8gU2FtZSBmb3IgaG9yaXpvbnRhbFxuICAgICAgICBob3J6UmFuZ2UgPSAodG9YIC0gZnJvbVgpICsgKCh0b1kgLSBmcm9tWSkgKiAodG9ZIC0gZnJvbVkpKSAvICh0b1ggLSBmcm9tWCksXG4gICAgICAgIGhvcnpTdGVwID0gMSAvIGhvcnpSYW5nZTtcblxuICAgIGZvciAodmFyIHkgPSByZWN0LnRvcDsgeSA8IHJlY3QuYm90dG9tOyB5KyssIHBpeEluZGV4ICs9IHlTdHJpZGUpIHtcbiAgICAgICAgdmFyXG4gICAgICAgIC8vIFRoZSBwb3NpdGlvbiB0aGUgcm93IHN0YXJ0cyBhdCBpbiB0aGUgZ3JhZGllbnQgWzAuMCAuLi4gMS4wKVxuICAgICAgICAgICAgcHJvcCA9IChyZWN0LmxlZnQgLSBmcm9tWCkgLyBob3J6UmFuZ2UgKyAoeSAtIGZyb21ZKSAvIHZlcnRSYW5nZTtcblxuICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IHc7IHgrKywgcGl4SW5kZXggKz0gQ1BDb2xvckJtcC5CWVRFU19QRVJfUElYRUwpIHtcbiAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgIHByb3BDbGFtcGVkID0gTWF0aC5taW4oTWF0aC5tYXgocHJvcCwgMC4wKSwgMS4wKSxcbiAgICAgICAgICAgICAgICBpbnZQcm9wQ2xhbXBlZCA9IDEgLSBwcm9wQ2xhbXBlZCxcblxuICAgICAgICAgICAgICAgIC8vIFRoZSBncmFkaWVudCBjb2xvciB0byBkcmF3XG4gICAgICAgICAgICAgICAgciA9IGZyb21Db2xvci5yICogaW52UHJvcENsYW1wZWQgKyB0b0NvbG9yLnIgKiBwcm9wQ2xhbXBlZCxcbiAgICAgICAgICAgICAgICBnID0gZnJvbUNvbG9yLmcgKiBpbnZQcm9wQ2xhbXBlZCArIHRvQ29sb3IuZyAqIHByb3BDbGFtcGVkLFxuICAgICAgICAgICAgICAgIGIgPSBmcm9tQ29sb3IuYiAqIGludlByb3BDbGFtcGVkICsgdG9Db2xvci5iICogcHJvcENsYW1wZWQsXG4gICAgICAgICAgICAgICAgYSA9IGZyb21Db2xvci5hICogaW52UHJvcENsYW1wZWQgKyB0b0NvbG9yLmEgKiBwcm9wQ2xhbXBlZCxcblxuICAgICAgICAgICAgICAgIGFscGhhMiA9IHRoaXMuZGF0YVtwaXhJbmRleCArIEFMUEhBX0JZVEVfT0ZGU0VUXSxcbiAgICAgICAgICAgICAgICBuZXdBbHBoYSA9IChhICsgYWxwaGEyIC0gYSAqIGFscGhhMiAvIDI1NSkgfCAwO1xuXG4gICAgICAgICAgICBpZiAobmV3QWxwaGEgPiAwKSB7XG4gICAgICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgICAgIHJlYWxBbHBoYSA9IChhICogMjU1IC8gbmV3QWxwaGEpIHwgMCxcbiAgICAgICAgICAgICAgICAgICAgaW52QWxwaGEgPSAyNTUgLSByZWFsQWxwaGE7XG5cbiAgICAgICAgICAgICAgICB0aGlzLmRhdGFbcGl4SW5kZXggKyBDUENvbG9yQm1wLlJFRF9CWVRFX09GRlNFVF0gPSAgICgociAqIHJlYWxBbHBoYSArIHRoaXMuZGF0YVtwaXhJbmRleCArIENQQ29sb3JCbXAuUkVEX0JZVEVfT0ZGU0VUXSAqIGludkFscGhhKSAvIDI1NSkgfCAwO1xuICAgICAgICAgICAgICAgIHRoaXMuZGF0YVtwaXhJbmRleCArIENQQ29sb3JCbXAuR1JFRU5fQllURV9PRkZTRVRdID0gKChnICogcmVhbEFscGhhICsgdGhpcy5kYXRhW3BpeEluZGV4ICsgQ1BDb2xvckJtcC5HUkVFTl9CWVRFX09GRlNFVF0gKiBpbnZBbHBoYSkgLyAyNTUpIHwgMDtcbiAgICAgICAgICAgICAgICB0aGlzLmRhdGFbcGl4SW5kZXggKyBDUENvbG9yQm1wLkJMVUVfQllURV9PRkZTRVRdID0gICgoYiAqIHJlYWxBbHBoYSArIHRoaXMuZGF0YVtwaXhJbmRleCArIENQQ29sb3JCbXAuQkxVRV9CWVRFX09GRlNFVF0gKiBpbnZBbHBoYSkgLyAyNTUpIHwgMDtcbiAgICAgICAgICAgICAgICB0aGlzLmRhdGFbcGl4SW5kZXggKyBDUENvbG9yQm1wLkFMUEhBX0JZVEVfT0ZGU0VUXSA9IG5ld0FscGhhO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBwcm9wICs9IGhvcnpTdGVwO1xuICAgICAgICB9XG4gICAgfVxufTtcblxuLyoqXG4gKiBEcmF3IGEgZ3JhZGllbnQgd2hpY2ggYmVnaW5zIGF0IGZyb21YLCBmcm9tWSBhbmQgZW5kcyBhdCB0b1gsIHRvWSwgY2xpcHBlZCB0byB0aGUgZ2l2ZW4gcmVjdCwgb24gdG9wIG9mIHRoZVxuICogcGl4ZWxzIGluIHRoZSBsYXllci5cbiAqXG4gKiBAcGFyYW0gZ3JhZGllbnRQb2ludHMgQXJyYXkgd2l0aCBncmFkaWVudCBjb2xvcnMgKEFSR0IgaW50ZWdlcnMpXG4gKiBAcGFyYW0gcmVjdCBDUFJlY3RcbiAqIEBwYXJhbSByZXBsYWNlIFNldCB0byB0cnVlIHRvIHJlcGxhY2UgdGhlIHBpeGVscyBpbiB0aGUgbGF5ZXIgcmF0aGVyIHRoYW4gYmxlbmRpbmcgdGhlIGdyYWRpZW50IG9uIHRvcCBvZiB0aGVtLlxuICovXG5DUExheWVyLnByb3RvdHlwZS5ncmFkaWVudCA9IGZ1bmN0aW9uKHJlY3QsIGZyb21YLCBmcm9tWSwgdG9YLCB0b1ksIGdyYWRpZW50UG9pbnRzLCByZXBsYWNlKSB7XG4gICAgcmVjdCA9IHRoaXMuZ2V0Qm91bmRzKCkuY2xpcChyZWN0KTtcblxuICAgIC8vIERlZ2VuZXJhdGUgY2FzZVxuICAgIGlmIChmcm9tWCA9PSB0b1ggJiYgZnJvbVkgPT0gdG9ZKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBPcGFxdWUgYmxlbmQgaWYgcG9zc2libGVcbiAgICBpZiAocmVwbGFjZSB8fCBncmFkaWVudFBvaW50c1swXSA+Pj4gMjQgPT0gMjU1ICYmIGdyYWRpZW50UG9pbnRzWzFdID4+PiAyNCA9PSAyNTUpIHtcbiAgICAgICAgaWYgKGZyb21YID09IHRvWCkge1xuICAgICAgICAgICAgdGhpcy5ncmFkaWVudFZlcnRSZXBsYWNlKHJlY3QsIGZyb21ZLCB0b1ksIGdyYWRpZW50UG9pbnRzKTtcbiAgICAgICAgfSBlbHNlIGlmIChmcm9tWSA9PSB0b1kpIHtcbiAgICAgICAgICAgIHRoaXMuZ3JhZGllbnRIb3J6UmVwbGFjZShyZWN0LCBmcm9tWCwgdG9YLCBncmFkaWVudFBvaW50cyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmdyYWRpZW50UmVwbGFjZShyZWN0LCBmcm9tWCwgZnJvbVksIHRvWCwgdG9ZLCBncmFkaWVudFBvaW50cyk7XG4gICAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmdyYWRpZW50QWxwaGEocmVjdCwgZnJvbVgsIGZyb21ZLCB0b1gsIHRvWSwgZ3JhZGllbnRQb2ludHMpO1xuICAgIH1cbn07XG5cbi8qKlxuICogQHBhcmFtIHIgQ1BSZWN0XG4gKi9cbkNQTGF5ZXIucHJvdG90eXBlLmZpbGxXaXRoQ29sb3JOb2lzZSA9IGZ1bmN0aW9uKHJlY3QpIHtcbiAgICByZWN0ID0gdGhpcy5nZXRCb3VuZHMoKS5jbGlwKHJlY3QpO1xuXG4gICAgdmFyXG4gICAgICAgIHZhbHVlLFxuICAgICAgICB5U3RyaWRlID0gKHRoaXMud2lkdGggLSByZWN0LmdldFdpZHRoKCkpICogQ1BDb2xvckJtcC5CWVRFU19QRVJfUElYRUwsXG4gICAgICAgIFxuICAgICAgICBwaXhJbmRleCA9IHRoaXMub2Zmc2V0T2ZQaXhlbChyZWN0LmxlZnQsIHJlY3QudG9wKTtcblxuICAgIGZvciAodmFyIHkgPSByZWN0LnRvcDsgeSA8IHJlY3QuYm90dG9tOyB5KyssIHBpeEluZGV4ICs9IHlTdHJpZGUpIHtcbiAgICAgICAgZm9yICh2YXIgeCA9IHJlY3QubGVmdDsgeCA8IHJlY3QucmlnaHQ7IHgrKywgcGl4SW5kZXggKz0gQ1BDb2xvckJtcC5CWVRFU19QRVJfUElYRUwpIHtcbiAgICAgICAgICAgIHZhbHVlID0gKE1hdGgucmFuZG9tKCkgKiAweDEwMDAwMDApIHwgMDtcblxuICAgICAgICAgICAgdGhpcy5kYXRhW3BpeEluZGV4ICsgQ1BDb2xvckJtcC5SRURfQllURV9PRkZTRVRdID0gKHZhbHVlID4+IDE2KSAmIDB4RkY7XG4gICAgICAgICAgICB0aGlzLmRhdGFbcGl4SW5kZXggKyBDUENvbG9yQm1wLkdSRUVOX0JZVEVfT0ZGU0VUXSA9ICh2YWx1ZSA+PiA4KSAmIDB4RkY7XG4gICAgICAgICAgICB0aGlzLmRhdGFbcGl4SW5kZXggKyBDUENvbG9yQm1wLkJMVUVfQllURV9PRkZTRVRdID0gdmFsdWUgJiAweEZGO1xuICAgICAgICAgICAgdGhpcy5kYXRhW3BpeEluZGV4ICsgQ1BDb2xvckJtcC5BTFBIQV9CWVRFX09GRlNFVF0gPSAweEZGO1xuICAgICAgICB9XG4gICAgfVxufTtcblxuLyoqXG4gKiBAcGFyYW0gciBDUFJlY3RcbiAqL1xuQ1BMYXllci5wcm90b3R5cGUuaW52ZXJ0ID0gZnVuY3Rpb24ocmVjdCkge1xuICAgIHJlY3QgPSB0aGlzLmdldEJvdW5kcygpLmNsaXAocmVjdCk7XG5cbiAgICB2YXJcbiAgICAgICAgeVN0cmlkZSA9ICh0aGlzLndpZHRoIC0gcmVjdC5nZXRXaWR0aCgpKSAqIENQQ29sb3JCbXAuQllURVNfUEVSX1BJWEVMLFxuICAgICAgICBcbiAgICAgICAgcGl4SW5kZXggPSB0aGlzLm9mZnNldE9mUGl4ZWwocmVjdC5sZWZ0LCByZWN0LnRvcCk7XG5cbiAgICBmb3IgKHZhciB5ID0gcmVjdC50b3A7IHkgPCByZWN0LmJvdHRvbTsgeSsrLCBwaXhJbmRleCArPSB5U3RyaWRlKSB7XG4gICAgICAgIGZvciAodmFyIHggPSByZWN0LmxlZnQ7IHggPCByZWN0LnJpZ2h0OyB4KyssIHBpeEluZGV4ICs9IENQQ29sb3JCbXAuQllURVNfUEVSX1BJWEVMKSB7XG4gICAgICAgICAgICB0aGlzLmRhdGFbcGl4SW5kZXggKyBDUENvbG9yQm1wLlJFRF9CWVRFX09GRlNFVF0gXj0gMHhGRjtcbiAgICAgICAgICAgIHRoaXMuZGF0YVtwaXhJbmRleCArIENQQ29sb3JCbXAuR1JFRU5fQllURV9PRkZTRVRdIF49IDB4RkY7XG4gICAgICAgICAgICB0aGlzLmRhdGFbcGl4SW5kZXggKyBDUENvbG9yQm1wLkJMVUVfQllURV9PRkZTRVRdIF49IDB4RkY7XG4gICAgICAgIH1cbiAgICB9XG59O1xuXG5DUExheWVyLnByb3RvdHlwZS5nZXRBbHBoYSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLmFscGhhO1xufTtcblxuQ1BMYXllci5wcm90b3R5cGUuZ2V0QmxlbmRNb2RlID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuYmxlbmRNb2RlO1xufTtcblxuQ1BMYXllci5wcm90b3R5cGUuY29weUZyb20gPSBmdW5jdGlvbihsYXllcikge1xuICAgIHRoaXMubmFtZSA9IGxheWVyLm5hbWU7XG4gICAgdGhpcy5ibGVuZE1vZGUgPSBsYXllci5ibGVuZE1vZGU7XG4gICAgdGhpcy5hbHBoYSA9IGxheWVyLmFscGhhO1xuICAgIHRoaXMudmlzaWJsZSA9IGxheWVyLnZpc2libGU7XG5cbiAgICB0aGlzLmNvcHlEYXRhRnJvbShsYXllcik7XG59O1xuXG4vLyBEbyB3ZSBoYXZlIGFueSBub24tb3BhcXVlIHBpeGVscyBpbiB0aGUgZW50aXJlIGxheWVyP1xuQ1BMYXllci5wcm90b3R5cGUuaGFzQWxwaGEgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAodGhpcy5hbHBoYSAhPSAxMDApIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIFxuICAgIHZhciBcbiAgICAgICAgcGl4SW5kZXggPSBBTFBIQV9CWVRFX09GRlNFVDtcbiAgICBcbiAgICBmb3IgKHZhciB5ID0gMDsgeSA8IGhlaWdodDsgeSsrKSB7XG4gICAgICAgIHZhclxuICAgICAgICAgICAgYWxwaGFBbmRlZCA9IDB4RkY7XG4gICAgICAgIFxuICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IHRoaXMud2lkdGg7IHgrKywgcGl4SW5kZXggKz0gQllURVNfUEVSX1BJWEVMKSB7XG4gICAgICAgICAgICBhbHBoYUFuZGVkICY9IHRoaXMuZGF0YVtwaXhJbmRleF07XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIE9ubHkgY2hlY2sgb25jZSBwZXIgcm93IGluIG9yZGVyIHRvIHJlZHVjZSBicmFuY2hpbmcgaW4gdGhlIGlubmVyIGxvb3BcbiAgICAgICAgaWYgKGFscGhhQW5kZWQgIT0gMHhGRikge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIGZhbHNlO1xufTtcblxuLy8gRG8gd2UgaGF2ZSBhbnkgc2VtaS10cmFuc3BhcmVudCBwaXhlbHMgaW4gdGhlIGdpdmVuIHJlY3RhbmdsZT9cbkNQTGF5ZXIucHJvdG90eXBlLmhhc0FscGhhSW5SZWN0ID0gZnVuY3Rpb24ocmVjdCkge1xuICAgIGlmICh0aGlzLmFscGhhICE9IDEwMCkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICByZWN0ID0gdGhpcy5nZXRCb3VuZHMoKS5jbGlwKHJlY3QpO1xuXG4gICAgdmFyIFxuICAgICAgICB5U3RyaWRlID0gKHRoaXMud2lkdGggLSByZWN0LmdldFdpZHRoKCkpICogQllURVNfUEVSX1BJWEVMLFxuICAgICAgICBwaXhJbmRleCA9IHRoaXMub2Zmc2V0T2ZQaXhlbChyZWN0LmxlZnQsIHJlY3QudG9wKSArIEFMUEhBX0JZVEVfT0ZGU0VUO1xuICAgIFxuICAgIGZvciAodmFyIHkgPSByZWN0LnRvcDsgeSA8IHJlY3QuYm90dG9tOyB5KyssIHBpeEluZGV4ICs9IHlTdHJpZGUpIHtcbiAgICAgICAgdmFyXG4gICAgICAgICAgICBhbHBoYUFuZGVkID0gMHhGRjtcbiAgICAgICAgXG4gICAgICAgIGZvciAodmFyIHggPSByZWN0LmxlZnQ7IHggPCByZWN0LnJpZ2h0OyB4KyssIHBpeEluZGV4ICs9IEJZVEVTX1BFUl9QSVhFTCkge1xuICAgICAgICAgICAgYWxwaGFBbmRlZCAmPSB0aGlzLmRhdGFbcGl4SW5kZXhdO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBPbmx5IGNoZWNrIG9uY2UgcGVyIHJvdyBpbiBvcmRlciB0byByZWR1Y2UgYnJhbmNoaW5nIGluIHRoZSBpbm5lciBsb29wXG4gICAgICAgIGlmIChhbHBoYUFuZGVkICE9IDB4RkYpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIHJldHVybiBmYWxzZTtcbn07XG5cbi8vIFJldHVybiB0aGUgY2FudmFzIEltYWdlRGF0YSB0aGF0IGJhY2tzIHRoaXMgbGF5ZXJcbkNQTGF5ZXIucHJvdG90eXBlLmdldEltYWdlRGF0YSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLmltYWdlRGF0YTtcbn07XG5cbkNQTGF5ZXIuTE1fTk9STUFMID0gMDtcbkNQTGF5ZXIuTE1fTVVMVElQTFkgPSAxO1xuQ1BMYXllci5MTV9BREQgPSAyO1xuQ1BMYXllci5MTV9TQ1JFRU4gPSAzO1xuQ1BMYXllci5MTV9MSUdIVEVOID0gNDtcbkNQTGF5ZXIuTE1fREFSS0VOID0gNTtcbkNQTGF5ZXIuTE1fU1VCVFJBQ1QgPSA2O1xuQ1BMYXllci5MTV9ET0RHRSA9IDc7XG5DUExheWVyLkxNX0JVUk4gPSA4O1xuQ1BMYXllci5MTV9PVkVSTEFZID0gOTtcbkNQTGF5ZXIuTE1fSEFSRExJR0hUID0gMTA7XG5DUExheWVyLkxNX1NPRlRMSUdIVCA9IDExO1xuQ1BMYXllci5MTV9WSVZJRExJR0hUID0gMTI7XG5DUExheWVyLkxNX0xJTkVBUkxJR0hUID0gMTM7XG5DUExheWVyLkxNX1BJTkxJR0hUID0gMTQ7XG5cbkNQTGF5ZXIucHJvdG90eXBlLm1ha2VMb29rVXBUYWJsZXMgPSBmdW5jdGlvbigpIHtcbiAgICAvLyBWIC0gVl4yIHRhYmxlXG4gICAgQ1BMYXllci5wcm90b3R5cGUuc29mdExpZ2h0TFVUU3F1YXJlID0gbmV3IEFycmF5KDI1Nik7XG4gICAgXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCAyNTY7IGkrKykge1xuICAgICAgICB2YXIgXG4gICAgICAgICAgICB2ID0gaSAvIDI1NS47XG4gICAgICAgIFxuICAgICAgICBDUExheWVyLnByb3RvdHlwZS5zb2Z0TGlnaHRMVVRTcXVhcmVbaV0gPSAoKHYgLSB2ICogdikgKiAyNTUuKSB8IDA7XG4gICAgfVxuXG4gICAgLy8gc3FydChWKSAtIFYgdGFibGVcbiAgICBDUExheWVyLnByb3RvdHlwZS5zb2Z0TGlnaHRMVVRTcXVhcmVSb290ID0gbmV3IEFycmF5KDI1Nik7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCAyNTY7IGkrKykge1xuICAgICAgICB2YXJcbiAgICAgICAgICAgIHYgPSBpIC8gMjU1LjtcbiAgICAgICAgXG4gICAgICAgIENQTGF5ZXIucHJvdG90eXBlLnNvZnRMaWdodExVVFNxdWFyZVJvb3RbaV0gPSAoKE1hdGguc3FydCh2KSAtIHYpICogMjU1LikgfCAwO1xuICAgIH1cbn07XG5cbkNQTGF5ZXIucHJvdG90eXBlLnNldEFscGhhID0gZnVuY3Rpb24oYWxwaGEpIHtcbiAgICB0aGlzLmFscGhhID0gYWxwaGE7XG59O1xuXG5DUExheWVyLnByb3RvdHlwZS5zZXRCbGVuZE1vZGUgPSBmdW5jdGlvbihibGVuZE1vZGUpIHtcbiAgICB0aGlzLmJsZW5kTW9kZSA9IGJsZW5kTW9kZTtcbn07XG5cbkNQTGF5ZXIucHJvdG90eXBlLmdldEFscGhhID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuYWxwaGE7XG59O1xuXG5DUExheWVyLnByb3RvdHlwZS5nZXRCbGVuZE1vZGUgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5ibGVuZE1vZGU7XG59O1xuXG4vKipcbiAqIFJldHVybnMgYSBuZXcgY2FudmFzIHdpdGggYSByb3RhdGVkIHZlcnNpb24gb2YgdGhlIGdpdmVuIGNhbnZhcy5cbiAqIFxuICogUm90YXRpb24gaXMgWzAuLjNdIGFuZCBzZWxlY3RzIGEgbXVsdGlwbGUgb2YgOTAgZGVncmVlcyBvZiBjbG9ja3dpc2Ugcm90YXRpb24gdG8gYmUgYXBwbGllZC5cbiAqL1xuZnVuY3Rpb24gZ2V0Um90YXRlZENhbnZhcyhjYW52YXMsIHJvdGF0aW9uKSB7XG4gICAgcm90YXRpb24gPSByb3RhdGlvbiAlIDQ7XG4gICAgXG4gICAgaWYgKHJvdGF0aW9uID09IDApIHtcbiAgICAgICAgcmV0dXJuIGNhbnZhcztcbiAgICB9XG4gICAgXG4gICAgdmFyXG4gICAgICAgIHJvdGF0ZWRDYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpLFxuICAgICAgICByb3RhdGVkQ2FudmFzQ29udGV4dCA9IHJvdGF0ZWRDYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpO1xuXG4gICAgaWYgKHJvdGF0aW9uICUgMiA9PSAwKSB7XG4gICAgICAgIHJvdGF0ZWRDYW52YXMud2lkdGggPSBjYW52YXMud2lkdGg7XG4gICAgICAgIHJvdGF0ZWRDYW52YXMuaGVpZ2h0ID0gY2FudmFzLmhlaWdodDtcbiAgICB9IGVsc2Uge1xuICAgICAgICByb3RhdGVkQ2FudmFzLndpZHRoID0gY2FudmFzLmhlaWdodDtcbiAgICAgICAgcm90YXRlZENhbnZhcy5oZWlnaHQgPSBjYW52YXMud2lkdGg7XG4gICAgfVxuICAgIFxuICAgIHN3aXRjaCAocm90YXRpb24pIHtcbiAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgLy8gOTAgZGVncmVlIGNsb2Nrd2lzZTpcbiAgICAgICAgICAgIHJvdGF0ZWRDYW52YXNDb250ZXh0LnJvdGF0ZShNYXRoLlBJIC8gMik7XG4gICAgICAgICAgICByb3RhdGVkQ2FudmFzQ29udGV4dC5kcmF3SW1hZ2UoY2FudmFzLCAwLCAtY2FudmFzLmhlaWdodCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgcm90YXRlZENhbnZhc0NvbnRleHQucm90YXRlKE1hdGguUEkpO1xuICAgICAgICAgICAgcm90YXRlZENhbnZhc0NvbnRleHQuZHJhd0ltYWdlKGNhbnZhcywgLWNhbnZhcy53aWR0aCwgLWNhbnZhcy5oZWlnaHQpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgIC8vIDkwIGRlZ3JlZSBjb3VudGVyLWNsb2Nrd2lzZTpcbiAgICAgICAgICAgIHJvdGF0ZWRDYW52YXNDb250ZXh0LnJvdGF0ZSgtTWF0aC5QSSAvIDIpO1xuICAgICAgICAgICAgcm90YXRlZENhbnZhc0NvbnRleHQuZHJhd0ltYWdlKGNhbnZhcywgLWNhbnZhcy53aWR0aCwgMCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAwOlxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIGNhbnZhcztcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIHJvdGF0ZWRDYW52YXM7XG59XG5cbmZ1bmN0aW9uIGRlY29kZUJhc2U2NFBOR0RhdGFVUkwodXJsKSB7XG4gICAgaWYgKHR5cGVvZiB1cmwgIT09IFwic3RyaW5nXCIgfHwgIXVybC5tYXRjaCgvXmRhdGE6aW1hZ2VcXC9wbmc7YmFzZTY0LC9pKSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIFxuICAgIHJldHVybiB3aW5kb3cuYXRvYih1cmwuc3Vic3RyaW5nKFwiZGF0YTppbWFnZVxcL3BuZztiYXNlNjQsXCIubGVuZ3RoKSk7XG59XG5cbi8qKlxuICogR2V0IHRoZSBsYXllciBhcyBhIFBORyBpbWFnZS5cbiAqIFxuICogUm90YXRpb24gaXMgWzAuLjNdIGFuZCBzZWxlY3RzIGEgbXVsdGlwbGUgb2YgOTAgZGVncmVlcyBvZiBjbG9ja3dpc2Ugcm90YXRpb24gdG8gYmUgYXBwbGllZCwgb3IgMCB0byBsZWF2ZVxuICogdW5yb3RhdGVkLlxuICovXG5DUExheWVyLnByb3RvdHlwZS5nZXRBc1BORyA9IGZ1bmN0aW9uKHJvdGF0aW9uKSB7XG4gICAgdmFyXG4gICAgICAgIGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIiksXG4gICAgICAgIGNhbnZhc0NvbnRleHQgPSBjYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpO1xuICAgIFxuICAgIC8vIEZpcnN0IGRyYXcgb3VyIGltYWdlIGRhdGEgb250byBhIGNhbnZhcy4uLlxuICAgIGNhbnZhcy53aWR0aCA9IHRoaXMuaW1hZ2VEYXRhLndpZHRoO1xuICAgIGNhbnZhcy5oZWlnaHQgPSB0aGlzLmltYWdlRGF0YS5oZWlnaHQ7XG4gICAgXG4gICAgY2FudmFzQ29udGV4dC5wdXRJbWFnZURhdGEodGhpcy5pbWFnZURhdGEsIDAsIDApO1xuICAgIFxuICAgIC8vIFJvdGF0ZSBpdCBpZiBuZWVkZWRcbiAgICBjYW52YXMgPSBnZXRSb3RhdGVkQ2FudmFzKGNhbnZhcywgcm90YXRpb24gfHwgMCk7XG4gICAgXG4gICAgcmV0dXJuIGRlY29kZUJhc2U2NFBOR0RhdGFVUkwoY2FudmFzLnRvRGF0YVVSTCgnaW1hZ2UvcG5nJykpO1xufTtcblxuQ1BMYXllci5wcm90b3R5cGUubWFrZUxvb2tVcFRhYmxlcygpOyIsIi8qXG4gICAgQ2hpY2tlblBhaW50XG4gICAgXG4gICAgQ2hpY2tlblBhaW50IGlzIGEgdHJhbnNsYXRpb24gb2YgQ2hpYmlQYWludCBmcm9tIEphdmEgdG8gSmF2YVNjcmlwdFxuICAgIGJ5IE5pY2hvbGFzIFNoZXJsb2NrIC8gQ2hpY2tlbiBTbW9vdGhpZS5cbiAgICBcbiAgICBDaGliaVBhaW50IGlzIENvcHlyaWdodCAoYykgMjAwNi0yMDA4IE1hcmMgU2NoZWZlclxuXG4gICAgQ2hpY2tlblBhaW50IGlzIGZyZWUgc29mdHdhcmU6IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vciBtb2RpZnlcbiAgICBpdCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGFzIHB1Ymxpc2hlZCBieVxuICAgIHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb24sIGVpdGhlciB2ZXJzaW9uIDMgb2YgdGhlIExpY2Vuc2UsIG9yXG4gICAgKGF0IHlvdXIgb3B0aW9uKSBhbnkgbGF0ZXIgdmVyc2lvbi5cblxuICAgIENoaWNrZW5QYWludCBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLFxuICAgIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mXG4gICAgTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiAgU2VlIHRoZVxuICAgIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuXG5cbiAgICBZb3Ugc2hvdWxkIGhhdmUgcmVjZWl2ZWQgYSBjb3B5IG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZVxuICAgIGFsb25nIHdpdGggQ2hpY2tlblBhaW50LiBJZiBub3QsIHNlZSA8aHR0cDovL3d3dy5nbnUub3JnL2xpY2Vuc2VzLz4uXG4qL1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBDUExvb2tVcFRhYmxlKCkge1xuICAgIHRoaXMudGFibGUgPSBuZXcgVWludDhBcnJheSgyNTYpO1xuXG4gICAgdGhpcy5sb2FkSWRlbnRpdHkgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAyNTY7IGkrKykge1xuICAgICAgICAgICAgdGhpcy50YWJsZVtpXSA9IGk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgdGhpcy5sb2FkQnJpZ2h0bmVzc0NvbnRyYXN0ID0gZnVuY3Rpb24oYnJpZ2h0bmVzcywgY29udHJhc3QpIHtcbiAgICAgICAgdmFyIFxuICAgICAgICAgICAgc2xvcGUgPSBjb250cmFzdCA+IDAuMCA/ICgxLjAgLyAoMS4wMDAxIC0gY29udHJhc3QpKTogMS4wICsgY29udHJhc3QsXG4gICAgICAgICAgICBvZmZzZXQgPSAwLjUgLSBzbG9wZSAqIDAuNSArIGJyaWdodG5lc3M7XG4gICAgICAgICAgICBcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAyNTY7IGkrKykge1xuICAgICAgICAgICAgdmFyIFxuICAgICAgICAgICAgICAgIHggPSBpIC8gMjU1LjAsXG4gICAgICAgICAgICAgICAgeSA9IHggKiBzbG9wZSArIG9mZnNldDtcblxuICAgICAgICAgICAgdGhpcy50YWJsZVtpXSA9IE1hdGgubWluKDI1NSwgTWF0aC5tYXgofn4oeSAqIDI1NS4wKSwgMCkpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIHRoaXMuaW52ZXJ0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgMjU2OyBpKyspIHtcbiAgICAgICAgICAgIHRoaXMudGFibGVbaV0gPSAyNTUgLSB0aGlzLnRhYmxlW2ldO1xuICAgICAgICB9XG4gICAgfTtcbn1cbiIsImltcG9ydCBDUENoaWJpRmlsZSBmcm9tIFwiLi9DUENoaWJpRmlsZVwiO1xuaW1wb3J0IENQQXJ0d29yayBmcm9tIFwiLi9DUEFydHdvcmtcIjtcbmltcG9ydCBDUExheWVyIGZyb20gXCIuL0NQTGF5ZXJcIjtcbmltcG9ydCBBZG9iZUNvbG9yVGFibGUgZnJvbSBcIi4uL3V0aWwvQWRvYmVDb2xvclRhYmxlXCI7XG5cbi8qKlxuICogTG9hZHMgQ2hpY2tlblBhaW50IHJlc291cmNlcyBmcm9tIGEgcmVtb3RlIHNlcnZlciBhbmQgZW1pdHMgcHJvZ3Jlc3MgZXZlbnRzLlxuICpcbiAqIGxvYWRJbWFnZVVSTCAtIFVSTCBvZiBQTkcvSlBFRyBpbWFnZSB0byBsb2FkIGZvciBlZGl0aW5nIChvcHRpb25hbClcbiAqIGxvYWRDaGliaUZpbGVVUkwgLSBVUkwgb2YgLmNoaSBmaWxlIHRvIGxvYWQgZm9yIGVkaXRpbmcgKG9wdGlvbmFsKS4gVXNlZCBpbiBwcmVmZXJlbmNlIHRvIGxvYWRJbWFnZS5cbiAqIGxvYWRTd2F0Y2hlc1VSTCAtIFVSTCBvZiBhbiAuYWNvIHBhbGV0dGUgdG8gbG9hZCAob3B0aW9uYWwpXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIENQUmVzb3VyY2VMb2FkZXIob3B0aW9ucykge1xuICAgIHZhclxuICAgICAgICByZXNvdXJjZXMgPSBbXSxcbiAgICAgICAgY29tcGxldGVkID0ge30sXG4gICAgICAgIHRoYXQgPSB0aGlzO1xuXG4gICAgaWYgKG9wdGlvbnMubG9hZENoaWJpRmlsZVVybCAmJiAoXCJcIiArIG9wdGlvbnMubG9hZENoaWJpRmlsZVVybCkubGVuZ3RoID4gMCkge1xuICAgICAgICByZXNvdXJjZXMucHVzaCh7XG4gICAgICAgICAgICB1cmw6IG9wdGlvbnMubG9hZENoaWJpRmlsZVVybCxcbiAgICAgICAgICAgIGZyaWVuZGx5OiBcImRyYXdpbmcgbGF5ZXJzXCIsXG4gICAgICAgICAgICBuYW1lOiBcImxheWVyc1wiLFxuICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWVcbiAgICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKG9wdGlvbnMubG9hZEltYWdlVXJsICYmIChcIlwiICsgb3B0aW9ucy5sb2FkSW1hZ2VVcmwpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHJlc291cmNlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICB1cmw6IG9wdGlvbnMubG9hZEltYWdlVXJsLFxuICAgICAgICAgICAgICAgIGZyaWVuZGx5OiBcImRyYXdpbmdcIixcbiAgICAgICAgICAgICAgICBuYW1lOiBcImZsYXRcIixcbiAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgaWYgKG9wdGlvbnMubG9hZFN3YXRjaGVzVXJsKSB7XG4gICAgICAgIHJlc291cmNlcy5wdXNoKHtcbiAgICAgICAgICAgIHVybDogb3B0aW9ucy5sb2FkU3dhdGNoZXNVcmwsXG4gICAgICAgICAgICBmcmllbmRseTogXCJjb2xvciBzd2F0Y2hlc1wiLFxuICAgICAgICAgICAgbmFtZTogXCJzd2F0Y2hlc1wiLFxuICAgICAgICAgICAgcmVxdWlyZWQ6IGZhbHNlLFxuICAgICAgICAgICAgbm9Qcm9ncmVzczogdHJ1ZSAvLyBTbyBzaG9ydCB0aGF0IHdlIG1heSBhcyB3ZWxsIGtlZXAgdGhlIHNtb290aGllIGRyYWluZWRcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZGVjb2RlUmVzb3VyY2UocmVzb3VyY2UsIHJlc291cmNlRGF0YSkge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgICBzd2l0Y2ggKHJlc291cmNlLm5hbWUpIHtcbiAgICAgICAgICAgICAgICBjYXNlIFwiZmxhdFwiOlxuICAgICAgICAgICAgICAgICAgICB2YXIgXG4gICAgICAgICAgICAgICAgICAgICAgICBibG9iID0gbmV3IEJsb2IoW3Jlc291cmNlRGF0YV0sIHt0eXBlOiBcImltYWdlL3BuZ1wifSksXG4gICAgICAgICAgICAgICAgICAgICAgICBpbWFnZVVybCA9IHdpbmRvdy5VUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgaWYgKGltYWdlVXJsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW1hZ2UgPSBuZXcgSW1hZ2UoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgaW1hZ2Uub25sb2FkID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFydHdvcmsgPSBuZXcgQ1BBcnR3b3JrKHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0KSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGF5ZXIgPSBuZXcgQ1BMYXllcih0aGlzLndpZHRoLCB0aGlzLmhlaWdodCwgXCJMYXllciAxXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxheWVyLmxvYWRGcm9tSW1hZ2UoaW1hZ2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFydHdvcmsuYWRkTGF5ZXJPYmplY3QobGF5ZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGltYWdlID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cuVVJMLnJldm9rZU9iamVjdFVSTChpbWFnZVVybCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShhcnR3b3JrKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGltYWdlLnNyYyA9IGltYWdlVXJsO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShudWxsKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgXCJzd2F0Y2hlc1wiOlxuICAgICAgICAgICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRlciA9IG5ldyBBZG9iZUNvbG9yVGFibGUoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9ycyA9IHJlYWRlci5yZWFkKHJlc291cmNlRGF0YSk7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKGNvbG9ycyk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBcImxheWVyc1wiOlxuICAgICAgICAgICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRlciA9IG5ldyBDUENoaWJpRmlsZSgpLFxuICAgICAgICAgICAgICAgICAgICAgICAgYXJ0d29yayA9IHJlYWRlci5yZWFkKHJlc291cmNlRGF0YSk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoYXJ0d29yayk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShudWxsKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcmVwb3J0UHJvZ3Jlc3MocmVzb3VyY2UsIHByb2dyZXNzKSB7XG4gICAgICAgIGlmIChwcm9ncmVzcyA9PT0gbnVsbCkge1xuICAgICAgICAgICAgdGhhdC5lbWl0RXZlbnQoXCJsb2FkaW5nUHJvZ3Jlc3NcIiwgWzEuMCwgXCJMb2FkaW5nIHlvdXIgXCIgKyByZXNvdXJjZS5mcmllbmRseSArIFwiLi4uXCJdKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoYXQuZW1pdEV2ZW50KFwibG9hZGluZ1Byb2dyZXNzXCIsIFtwcm9ncmVzcywgXCJMb2FkaW5nIHlvdXIgXCIgKyByZXNvdXJjZS5mcmllbmRseSArIFwiIChcIiArIE1hdGgucm91bmQocHJvZ3Jlc3MgKiAxMDApICsgXCIlKS4uLlwiXSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgdGhpcy5sb2FkID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmIChyZXNvdXJjZXMubGVuZ3RoID09IDApIHtcbiAgICAgICAgICAgIHRoYXQuZW1pdEV2ZW50KFwibG9hZGluZ0NvbXBsZXRlXCIsIFtjb21wbGV0ZWRdKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhclxuICAgICAgICAgICAgcmVzb3VyY2UgPSByZXNvdXJjZXMuc2hpZnQoKSxcbiAgICAgICAgICAgIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuXG4gICAgICAgIHhoci5hZGRFdmVudExpc3RlbmVyKFwicHJvZ3Jlc3NcIiwgZnVuY3Rpb24oZXZ0KSB7XG4gICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICBwcm9ncmVzcztcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKGV2dC5sZW5ndGhDb21wdXRhYmxlICYmICFyZXNvdXJjZS5ub1Byb2dyZXNzKSB7XG4gICAgICAgICAgICAgICAgcHJvZ3Jlc3MgPSBldnQubG9hZGVkIC8gZXZ0LnRvdGFsO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBwcm9ncmVzcyA9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzKHJlc291cmNlLCBwcm9ncmVzcyk7XG4gICAgICAgIH0sIGZhbHNlKTtcblxuICAgICAgICBmdW5jdGlvbiBoYW5kbGVGYXRhbCgpIHtcbiAgICAgICAgICAgIGlmIChyZXNvdXJjZS5yZXF1aXJlZCkge1xuICAgICAgICAgICAgICAgIHRoYXQuZW1pdEV2ZW50KFwibG9hZGluZ0ZhaWx1cmVcIiwgW1wiRmFpbGVkIHRvIGxvYWQgeW91ciBcIiArIHJlc291cmNlLmZyaWVuZGx5ICsgXCIsIHBsZWFzZSB0cnkgYWdhaW4gbGF0ZXIuXCJdKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gU2tpcCB1bmltcG9ydGFudCByZXNvdXJjZXNcbiAgICAgICAgICAgICAgICB0aGF0LmxvYWQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgeGhyLmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsIGZ1bmN0aW9uKGV2dCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuc3RhdHVzID09IDIwMCkge1xuICAgICAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgICAgICByZXNwb25zZSA9IHRoaXMucmVzcG9uc2U7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgdGhhdC5lbWl0RXZlbnQoXCJsb2FkaW5nUHJvZ3Jlc3NcIiwgWzEuMCwgXCJTdGFydGluZyBDaGlja2VuUGFpbnQuLi5cIl0pO1xuICAgIFxuICAgICAgICAgICAgICAgIC8vIFlpZWxkIHRvIHRoZSBET00gdG8gZ2l2ZSBpdCBhIGNoYW5jZSB0byBwYWludCB0aGUgbG9hZGVkIG1lc3NhZ2UgYmVmb3JlIHdlIGJlZ2luIGRlY29kaW5nXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dChcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWNvZGVSZXNvdXJjZShyZXNvdXJjZSwgcmVzcG9uc2UpLnRoZW4oZnVuY3Rpb24oZGVjb2RlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkZWNvZGVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBsZXRlZFtyZXNvdXJjZS5uYW1lXSA9IGRlY29kZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBNb3ZlIG9uIHRvIHRoZSBuZXh0IGZpbGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC5sb2FkKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC5lbWl0RXZlbnQoXCJsb2FkaW5nRmFpbHVyZVwiLCBbXCJGYWlsZWQgdG8gcmVhZCB5b3VyIFwiICsgcmVzb3VyY2UuZnJpZW5kbHldKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgMFxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGhhbmRsZUZhdGFsKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIGZhbHNlKTtcblxuICAgICAgICB4aHIuYWRkRXZlbnRMaXN0ZW5lcihcImVycm9yXCIsIGhhbmRsZUZhdGFsKTtcblxuICAgICAgICByZXBvcnRQcm9ncmVzcyhyZXNvdXJjZSwgcmVzb3VyY2Uubm9Qcm9ncmVzcyA/IG51bGwgOiAwLjApO1xuXG4gICAgICAgIHhoci5vcGVuKFwiR0VUXCIsIHJlc291cmNlLnVybCwgdHJ1ZSk7XG4gICAgICAgIFxuICAgICAgICB4aHIucmVzcG9uc2VUeXBlID0gJ2FycmF5YnVmZmVyJztcblxuICAgICAgICB4aHIuc2VuZCgpO1xuICAgIH1cbn1cblxuQ1BSZXNvdXJjZUxvYWRlci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKEV2ZW50RW1pdHRlci5wcm90b3R5cGUpO1xuQ1BSZXNvdXJjZUxvYWRlci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBDUFJlc291cmNlTG9hZGVyO1xuIiwiaW1wb3J0IENQQ2hpYmlGaWxlIGZyb20gXCIuL0NQQ2hpYmlGaWxlXCI7XG5pbXBvcnQgQ1BBcnR3b3JrIGZyb20gXCIuL0NQQXJ0d29ya1wiO1xuaW1wb3J0IEFkb2JlQ29sb3JUYWJsZSBmcm9tIFwiLi4vdXRpbC9BZG9iZUNvbG9yVGFibGVcIjtcblxuLyoqXG4gKiBXZSBnZW5lcmFsbHkgY2FuJ3QgZG8gbXVjaCB3aXRoIGJpbmFyeSBzdHJpbmdzIGJlY2F1c2UgdmFyaW91cyBtZXRob2RzIHdpbGwgdHJ5IHRvIFVURi04IG1hbmdsZSB0aGVtLlxuICogVGhpcyBmdW5jdGlvbiBjb252ZXJ0cyBzdWNoIGEgc3RyaW5nIHRvIGEgVWludDhBcnJheSBpbnN0ZWFkLlxuICovXG5mdW5jdGlvbiBiaW5hcnlTdHJpbmdUb0J5dGVBcnJheShzKSB7XG4gICAgdmFyXG4gICAgICAgIHJlc3VsdCA9IG5ldyBVaW50OEFycmF5KHMubGVuZ3RoKTtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcy5sZW5ndGg7IGkrKykge1xuICAgICAgICByZXN1bHRbaV0gPSBzLmNoYXJDb2RlQXQoaSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cblxuLyoqXG4gKiBTYXZlcyBDaGlja2VuUGFpbnQgcmVzb3VyY2VzIHRvIGEgcmVtb3RlIHNlcnZlciBvciB0byB0aGUgZGlzayBhbmQgZW1pdHMgcHJvZ3Jlc3MgZXZlbnRzLlxuICpcbiAqIE9wdGlvbnM6XG4gKiAgICAgdXJsIC0gVVJMIHRvIHNlbmQgdG8uIElmIG9taXR0ZWQsIHdpbGwgc2F2ZSB0byB0aGUgZGlzayBpbnN0ZWFkLlxuICogICAgIGFydHdvcmsgLSBBcnR3b3JrIHRvIHNlbmRcbiAqICAgICByb3RhdGlvbiAtIEludGVnZXIgWzAuLjNdIG9mIHRoZSBudW1iZXIgb2YgOTAgZGVncmVlIHJvdGF0aW9uIHN0ZXBzIHRoYXQgc2hvdWxkIGJlIGFwcGxpZWQgdG8gY2FudmFzIHVwb24gb3BlbmluZy5cbiAqICAgICBzd2F0Y2hlcyAtIEFycmF5IG9mIEFSR0IgaW50ZWdlciBjb2xvcnMgdG8gc2F2ZSBhcyB0aGUgaW1hZ2Ugc3dhdGNoZXMgKG9wdGlvbmFsKVxuICovXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBDUFJlc291cmNlU2F2ZXIob3B0aW9ucykge1xuICAgIHZhclxuICAgICAgICB0aGF0ID0gdGhpcyxcbiAgICAgICAgXG4gICAgICAgIGNhbmNlbGxlZCA9IGZhbHNlO1xuICAgIFxuICAgIG9wdGlvbnMucm90YXRpb24gPSBvcHRpb25zLnJvdGF0aW9uIHx8IDA7XG4gICAgXG4gICAgZnVuY3Rpb24gcmVwb3J0UHJvZ3Jlc3MocHJvZ3Jlc3MpIHtcbiAgICAgICAgaWYgKHByb2dyZXNzID09PSBudWxsKSB7XG4gICAgICAgICAgICB0aGF0LmVtaXRFdmVudChcInNhdmluZ1Byb2dyZXNzXCIsIFsxLjAsIFwiU2F2aW5nIHlvdXIgZHJhd2luZyB0byB0aGUgc2VydmVyLi4uXCJdKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoYXQuZW1pdEV2ZW50KFwic2F2aW5nUHJvZ3Jlc3NcIiwgW3Byb2dyZXNzLCBcIlNhdmluZyB5b3VyIGRyYXdpbmcgdG8gdGhlIHNlcnZlci4uLiAgKFwiICsgTWF0aC5yb3VuZChwcm9ncmVzcyAqIDEwMCkgKyBcIiUpXCJdKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBcbiAgICBmdW5jdGlvbiByZXBvcnRGYXRhbChzZXJ2ZXJNZXNzYWdlKSB7XG4gICAgICAgIHRoYXQuZW1pdEV2ZW50KFwic2F2aW5nRmFpbHVyZVwiLCBbc2VydmVyTWVzc2FnZV0pO1xuICAgIH1cbiAgICBcbiAgICBmdW5jdGlvbiBwb3N0RHJhd2luZyhmb3JtRGF0YSkge1xuICAgICAgICB2YXJcbiAgICAgICAgICAgIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuICAgIFxuICAgICAgICB4aHIudXBsb2FkLmFkZEV2ZW50TGlzdGVuZXIoXCJwcm9ncmVzc1wiLCBmdW5jdGlvbihldnQpIHtcbiAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgIHByb2dyZXNzO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoZXZ0Lmxlbmd0aENvbXB1dGFibGUpIHtcbiAgICAgICAgICAgICAgICBwcm9ncmVzcyA9IGV2dC5sb2FkZWQgLyBldnQudG90YWw7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHByb2dyZXNzID0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3MocHJvZ3Jlc3MpO1xuICAgICAgICB9LCBmYWxzZSk7XG4gICAgXG4gICAgICAgIHhoci5hZGRFdmVudExpc3RlbmVyKFwibG9hZFwiLCBmdW5jdGlvbihldnQpIHtcbiAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzKDEuMCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmICh0aGlzLnN0YXR1cyA9PSAyMDAgJiYgL15DSElCSU9LLy50ZXN0KHRoaXMucmVzcG9uc2UpKSB7XG4gICAgICAgICAgICAgICAgdGhhdC5lbWl0RXZlbnQoXCJzYXZpbmdDb21wbGV0ZVwiKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmVwb3J0RmF0YWwodGhpcy5yZXNwb25zZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIGZhbHNlKTtcbiAgICBcbiAgICAgICAgeGhyLmFkZEV2ZW50TGlzdGVuZXIoXCJlcnJvclwiLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJlcG9ydEZhdGFsKHRoaXMucmVzcG9uc2UpO1xuICAgICAgICB9LCBmYWxzZSk7XG4gICAgXG4gICAgICAgIHJlcG9ydFByb2dyZXNzKDApO1xuICAgIFxuICAgICAgICB4aHIub3BlbihcIlBPU1RcIiwgb3B0aW9ucy51cmwsIHRydWUpO1xuICAgICAgICBcbiAgICAgICAgeGhyLnJlc3BvbnNlVHlwZSA9IFwidGV4dFwiO1xuICAgICAgICBcbiAgICAgICAgeGhyLnNlbmQoZm9ybURhdGEpO1xuICAgIH1cbiAgICBcbiAgICAvKipcbiAgICAgKiBCZWdpbiBzYXZpbmcgdGhlIGRhdGEgcHJvdmlkZWQgaW4gdGhlIGNvbnN0cnVjdG9yLiBSZXR1cm5zIGltbWVkaWF0ZWx5LCBhbmQgZmlyZXMgdGhlc2UgZXZlbnRzIHRvIHJlcG9ydCB0aGVcbiAgICAgKiBzYXZpbmcgcHJvZ3Jlc3M6XG4gICAgICogXG4gICAgICogc2F2aW5nUHJvZ3Jlc3MocHJvZ3Jlc3MpIC0gUHJvZ3Jlc3MgaXMgWzAuMCAuLi4gMS4wXSBhbmQgcmVwb3J0cyBob3cgbXVjaCBoYXMgdXBsb2FkZWQgc28gZmFyLCBvciBudWxsIGlmIHRoZSBcbiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b3RhbCBwcm9ncmVzcyBjb3VsZCBub3QgYmUgZGV0ZXJtaW5lZC5cbiAgICAgKiBzYXZpbmdGYWlsdXJlKGVycm9yKSAgICAgLSBXaGVuIHNhdmluZyBmYWlscywgYWxvbmcgd2l0aCBhIHN0cmluZyBlcnJvciBtZXNzYWdlIHRvIGRpc3BsYXkgdG8gdGhlIHVzZXIuIFxuICAgICAqIHNhdmluZ0NvbXBsZXRlKCkgICAgICAgICAtIFdoZW4gc2F2aW5nIGNvbXBsZXRlcyBzdWNjZXNmdWxseVxuICAgICAqL1xuICAgIHRoaXMuc2F2ZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXJcbiAgICAgICAgICAgIGZsYXQsXG4gICAgICAgICAgICBmbGF0QmxvYixcbiAgICAgICAgICAgIHN3YXRjaGVzQmxvYjtcblxuICAgICAgICBmbGF0ID0gYmluYXJ5U3RyaW5nVG9CeXRlQXJyYXkob3B0aW9ucy5hcnR3b3JrLmdldEZsYXRQTkcob3B0aW9ucy5yb3RhdGlvbikpO1xuICAgICAgICBmbGF0QmxvYiA9IG5ldyBCbG9iKFtmbGF0XSwge3R5cGU6IFwiaW1hZ2UvcG5nXCJ9KTtcbiAgICAgICAgZmxhdCA9IG51bGw7IC8vIERvbid0IG5lZWQgdGhpcyBhbnkgbW9yZVxuICAgICAgICBcbiAgICAgICAgdmFyXG4gICAgICAgICAgICBzZXJpYWxpemVMYXllcnM7XG5cbiAgICAgICAgaWYgKG9wdGlvbnMuYXJ0d29yay5pc1NpbXBsZURyYXdpbmcoKSkge1xuICAgICAgICAgICAgc2VyaWFsaXplTGF5ZXJzID0gUHJvbWlzZS5yZXNvbHZlKG51bGwpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc2VyaWFsaXplTGF5ZXJzID0gKG5ldyBDUENoaWJpRmlsZSgpKS5zZXJpYWxpemUob3B0aW9ucy5hcnR3b3JrKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgc2VyaWFsaXplTGF5ZXJzLnRoZW4oZnVuY3Rpb24oY2hpYmlCbG9iKSB7XG4gICAgICAgICAgICBpZiAoY2FuY2VsbGVkKSB7XG4gICAgICAgICAgICAgICAgdGhhdC5lbWl0RXZlbnQoXCJzYXZpbmdGYWlsdXJlXCIpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKG9wdGlvbnMuc3dhdGNoZXMpIHtcbiAgICAgICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICAgICAgYWNvID0gbmV3IEFkb2JlQ29sb3JUYWJsZSgpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHN3YXRjaGVzQmxvYiA9IG5ldyBCbG9iKFthY28ud3JpdGUob3B0aW9ucy5zd2F0Y2hlcyldLCB7dHlwZTogXCJhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW1cIn0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBzd2F0Y2hlc0Jsb2IgPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKG9wdGlvbnMudXJsKSB7XG4gICAgICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgICAgIG1hcmtlciA9IFwiVGhpcyBtYXJrZXIgZW5zdXJlcyB0aGUgdXBsb2FkIHdhc24ndCB0cnVuY2F0ZWRcIixcbiAgICAgICAgICAgICAgICAgICAgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKTtcblxuICAgICAgICAgICAgICAgIGZvcm1EYXRhLmFwcGVuZChcImJlZ2luTWFya2VyXCIsIG1hcmtlcik7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgZm9ybURhdGEuYXBwZW5kKFwicGljdHVyZVwiLCBmbGF0QmxvYik7XG4gICAgICAgICAgICAgICAgZmxhdEJsb2IgPSBudWxsO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGlmIChjaGliaUJsb2IpIHtcbiAgICAgICAgICAgICAgICAgICAgZm9ybURhdGEuYXBwZW5kKFwiY2hpYmlmaWxlXCIsIGNoaWJpQmxvYik7XG4gICAgICAgICAgICAgICAgICAgIGNoaWJpQmxvYiA9IG51bGw7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gTGF5ZXJzIHdpbGwgbmVlZCB0byBiZSByb3RhdGVkIHVwb24gb3BlbmluZ1xuICAgICAgICAgICAgICAgICAgICBmb3JtRGF0YS5hcHBlbmQoXCJyb3RhdGlvblwiLCBcIlwiICsgb3B0aW9ucy5yb3RhdGlvbik7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLypcbiAgICAgICAgICAgICAgICAgICAgICogQmVjYXVzZSB0aGUgaW1hZ2UgaXMgYSBmbGF0IFBORywgd2Ugcm90YXRlIGl0IGJlZm9yZSB3ZSBzYXZlZCBpdCBhbmQgaXQgZG9lc24ndCBuZWVkIGZ1cnRoZXJcbiAgICAgICAgICAgICAgICAgICAgICogcm90YXRpb24gdXBvbiBvcGVuaW5nLlxuICAgICAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAgICAgZm9ybURhdGEuYXBwZW5kKFwicm90YXRpb25cIiwgXCIwXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBpZiAoc3dhdGNoZXNCbG9iKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvcm1EYXRhLmFwcGVuZChcInN3YXRjaGVzXCIsIHN3YXRjaGVzQmxvYik7XG4gICAgICAgICAgICAgICAgICAgIHN3YXRjaGVzQmxvYiA9IG51bGw7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgZm9ybURhdGEuYXBwZW5kKFwiZW5kTWFya2VyXCIsIG1hcmtlcik7XG5cbiAgICAgICAgICAgICAgICBwb3N0RHJhd2luZyhmb3JtRGF0YSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHdpbmRvdy5zYXZlQXMoZmxhdEJsb2IsIFwib2VrYWtpLnBuZ1wiKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBpZiAoY2hpYmlCbG9iKSB7XG4gICAgICAgICAgICAgICAgICAgIHdpbmRvdy5zYXZlQXMoY2hpYmlCbG9iLCBcIm9la2FraS5jaGlcIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChzd2F0Y2hlc0Jsb2IpIHtcbiAgICAgICAgICAgICAgICAgICAgd2luZG93LnNhdmVBcyhzd2F0Y2hlc0Jsb2IsIFwib2VrYWtpLmFjb1wiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgXG4gICAgdGhpcy5jYW5jZWwgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgY2FuY2VsbGVkID0gdHJ1ZTtcbiAgICB9O1xufVxuXG5DUFJlc291cmNlU2F2ZXIucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShFdmVudEVtaXR0ZXIucHJvdG90eXBlKTtcbkNQUmVzb3VyY2VTYXZlci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBDUFJlc291cmNlU2F2ZXI7XG4iLCIvKlxuICAgIENoaWNrZW5QYWludFxuICAgIFxuICAgIENoaWNrZW5QYWludCBpcyBhIHRyYW5zbGF0aW9uIG9mIENoaWJpUGFpbnQgZnJvbSBKYXZhIHRvIEphdmFTY3JpcHRcbiAgICBieSBOaWNob2xhcyBTaGVybG9jayAvIENoaWNrZW4gU21vb3RoaWUuXG4gICAgXG4gICAgQ2hpYmlQYWludCBpcyBDb3B5cmlnaHQgKGMpIDIwMDYtMjAwOCBNYXJjIFNjaGVmZXJcblxuICAgIENoaWNrZW5QYWludCBpcyBmcmVlIHNvZnR3YXJlOiB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3IgbW9kaWZ5XG4gICAgaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBhcyBwdWJsaXNoZWQgYnlcbiAgICB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uLCBlaXRoZXIgdmVyc2lvbiAzIG9mIHRoZSBMaWNlbnNlLCBvclxuICAgIChhdCB5b3VyIG9wdGlvbikgYW55IGxhdGVyIHZlcnNpb24uXG5cbiAgICBDaGlja2VuUGFpbnQgaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCxcbiAgICBidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZlxuICAgIE1FUkNIQU5UQUJJTElUWSBvciBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS4gIFNlZSB0aGVcbiAgICBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9yZSBkZXRhaWxzLlxuXG4gICAgWW91IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2VcbiAgICBhbG9uZyB3aXRoIENoaWNrZW5QYWludC4gSWYgbm90LCBzZWUgPGh0dHA6Ly93d3cuZ251Lm9yZy9saWNlbnNlcy8+LlxuKi9cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gQ1BVbmRvKCkge1xufVxuXG5DUFVuZG8ucHJvdG90eXBlLm1lcmdlID0gZnVuY3Rpb24odW5kbykge1xuICAgIHJldHVybiBmYWxzZTtcbn07XG5cbkNQVW5kby5wcm90b3R5cGUubm9DaGFuZ2UgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gZmFsc2U7XG59O1xuXG5DUFVuZG8ucHJvdG90eXBlLmdldE1lbW9yeVVzZWQgPSBmdW5jdGlvbih1bmRvbmUsIHBhcmFtKSB7XG4gICAgcmV0dXJuIDA7XG59XG4iLCIvKlxuICAgIENoaWNrZW5QYWludFxuICAgIFxuICAgIENoaWNrZW5QYWludCBpcyBhIHRyYW5zbGF0aW9uIG9mIENoaWJpUGFpbnQgZnJvbSBKYXZhIHRvIEphdmFTY3JpcHRcbiAgICBieSBOaWNob2xhcyBTaGVybG9jayAvIENoaWNrZW4gU21vb3RoaWUuXG4gICAgXG4gICAgQ2hpYmlQYWludCBpcyBDb3B5cmlnaHQgKGMpIDIwMDYtMjAwOCBNYXJjIFNjaGVmZXJcblxuICAgIENoaWNrZW5QYWludCBpcyBmcmVlIHNvZnR3YXJlOiB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3IgbW9kaWZ5XG4gICAgaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBhcyBwdWJsaXNoZWQgYnlcbiAgICB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uLCBlaXRoZXIgdmVyc2lvbiAzIG9mIHRoZSBMaWNlbnNlLCBvclxuICAgIChhdCB5b3VyIG9wdGlvbikgYW55IGxhdGVyIHZlcnNpb24uXG5cbiAgICBDaGlja2VuUGFpbnQgaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCxcbiAgICBidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZlxuICAgIE1FUkNIQU5UQUJJTElUWSBvciBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS4gIFNlZSB0aGVcbiAgICBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9yZSBkZXRhaWxzLlxuXG4gICAgWW91IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2VcbiAgICBhbG9uZyB3aXRoIENoaWNrZW5QYWludC4gSWYgbm90LCBzZWUgPGh0dHA6Ly93d3cuZ251Lm9yZy9saWNlbnNlcy8+LlxuKi9cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gQ1BBYm91dERpYWxvZyhwYXJlbnQpIHtcbiAgICB2YXJcbiAgICAgICAgZGlhbG9nID0gXG4gICAgICAgICAgICAkKGA8ZGl2IGNsYXNzPVwibW9kYWwgZmFkZSBjaGlja2VucGFpbnQtYWJvdXQtZGlhbG9nXCIgdGFiaW5kZXg9XCItMVwiIHJvbGU9XCJkaWFsb2dcIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibW9kYWwtZGlhbG9nXCI+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtb2RhbC1jb250ZW50XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibW9kYWwtaGVhZGVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJjbG9zZVwiIGRhdGEtZGlzbWlzcz1cIm1vZGFsXCIgYXJpYS1sYWJlbD1cIkNsb3NlXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPiZ0aW1lczs8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGg0IGNsYXNzPVwibW9kYWwtdGl0bGVcIj5BYm91dCBDaGlja2VuUGFpbnQ8L2g0PlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibW9kYWwtYm9keVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxhIGNsYXNzPVwiY2hpY2tlbnBhaW50LW9uLWdpdGh1YlwiIHRhcmdldD1cIl9ibGFua1wiIGhyZWY9XCJodHRwczovL2dpdGh1Yi5jb20vdGhlbmlja2R1ZGUvY2hpY2tlbnBhaW50XCI+PHNwYW4gY2xhc3M9XCJmYSBmYS1naXRodWJcIj48L3NwYW4+IENoaWNrZW5QYWludCBvbiBHaXRIdWI8L2E+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENoaWNrZW5QYWludCBpcyBhIHRyYW5zbGF0aW9uIG9mIDxhIGhyZWY9XCJodHRwOi8vd3d3LmNoaWJpcGFpbnQuY29tL1wiIHRhcmdldD1cIl9ibGFua1wiPkNoaWJpUGFpbnQ8L2E+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZyb20gSmF2YSB0byBKYXZhU2NyaXB0IGJ5IE5pY2hvbGFzIFNoZXJsb2NrIC8gQ2hpY2tlbiBTbW9vdGhpZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ2hpYmlQYWludCBpcyBDb3B5cmlnaHQgKGMpIDIwMDYtMjAwOCBNYXJjIFNjaGVmZXIuIEFsbCBSaWdodHMgUmVzZXJ2ZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENoaWNrZW5QYWludCBpcyBmcmVlIHNvZnR3YXJlOiB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3IgbW9kaWZ5XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgYXMgcHVibGlzaGVkIGJ5XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb24sIGVpdGhlciB2ZXJzaW9uIDMgb2YgdGhlIExpY2Vuc2UsIG9yXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChhdCB5b3VyIG9wdGlvbikgYW55IGxhdGVyIHZlcnNpb24uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ2hpY2tlblBhaW50IGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1FUkNIQU5UQUJJTElUWSBvciBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS4gIFNlZSB0aGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGEgdGFyZ2V0PVwiX2JsYW5rXCIgaHJlZj1cImh0dHA6Ly93d3cuZ251Lm9yZy9saWNlbnNlcy9cIj5HTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZTwvYT4gZm9yIG1vcmUgZGV0YWlscy5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwcmUgY2xhc3M9XCJwcmUtc2Nyb2xsYWJsZSBjaGlja2VucGFpbnQtdGhpcmQtcGFydHktbGljZW5zZXNcIj5JbmNsdWRlcyBpY29ucyBmcm9tIHRoZSA8YSBocmVmPVwiaHR0cDovL3RhbmdvLmZyZWVkZXNrdG9wLm9yZy9cIiB0YXJnZXQ9XCJfYmxhbmtcIj5UYW5nbyBEZXNrdG9wIFByb2plY3Q8L2E+XG4gICAgICAgICAgICAgICAgICAgIFxuSW5jbHVkZXMgdGhlIDxhIHRhcmdldD1cIl9ibGFua1wiIGhyZWY9XCJodHRwczovL2dpdGh1Yi5jb20vZWxpZ3JleS9GaWxlU2F2ZXIuanNcIj5GaWxlU2F2ZXIuanMgbGlicmFyeTwvYT5cbiAgICAgICAgICAgICAgICAgICAgXG4gICAgRmlsZVNhdmVyLmpzIENvcHlyaWdodCDCqSAyMDE1IDxhIHRhcmdldD1cIl9ibGFua1wiIGhyZWY9XCJodHRwOi8vZWxpZ3JleS5jb20vXCI+RWxpIEdyZXk8L2E+XG5cbiAgICBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvblxuICAgIG9idGFpbmluZyBhIGNvcHkgb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uXG4gICAgZmlsZXMgKHRoZSBcIlNvZnR3YXJlXCIpLCB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0XG4gICAgcmVzdHJpY3Rpb24sIGluY2x1ZGluZyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsXG4gICAgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCwgZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yXG4gICAgc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGVcbiAgICBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZ1xuICAgIGNvbmRpdGlvbnM6XG5cbiAgICBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZVxuICAgIGluY2x1ZGVkIGluIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuXG4gICAgVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCxcbiAgICBFWFBSRVNTIE9SIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVNcbiAgICBPRiBNRVJDSEFOVEFCSUxJVFksIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORFxuICAgIE5PTklORlJJTkdFTUVOVC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUlMgT1IgQ09QWVJJR0hUIFxuICAgIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLFxuICAgIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lOR1xuICAgIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1JcbiAgICBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuXG5cbkluY2x1ZGVzIHRoZSA8YSBocmVmPVwiaHR0cDovL3d3dy5qcXVlcnkuY29tL1wiIHRhcmdldD1cIl9ibGFua1wiPkpRdWVyeSBsaWJyYXJ5PC9hPlxuXG4gICAgQ29weXJpZ2h0IDxhIGhyZWY9XCJodHRwczovL2pxdWVyeS5vcmcvXCIgdGFyZ2V0PVwiX2JsYW5rXCI+alF1ZXJ5IEZvdW5kYXRpb24gYW5kIG90aGVyIGNvbnRyaWJ1dG9yczwvYT5cbiAgICBcbiAgICBUaGlzIHNvZnR3YXJlIGNvbnNpc3RzIG9mIHZvbHVudGFyeSBjb250cmlidXRpb25zIG1hZGUgYnkgbWFueVxuICAgIGluZGl2aWR1YWxzLiBGb3IgZXhhY3QgY29udHJpYnV0aW9uIGhpc3RvcnksIHNlZSB0aGUgcmV2aXNpb24gXG4gICAgaGlzdG9yeSBhdmFpbGFibGUgYXQgaHR0cHM6Ly9naXRodWIuY29tL2pxdWVyeS9qcXVlcnlcbiAgICBcbiAgICBUaGUgZm9sbG93aW5nIGxpY2Vuc2UgYXBwbGllcyB0byBhbGwgcGFydHMgb2YgdGhpcyBzb2Z0d2FyZSBcbiAgICBleGNlcHQgYXMgZG9jdW1lbnRlZCBiZWxvdzpcbiAgICBcbiAgICBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBcbiAgICBvYnRhaW5pbmcgYSBjb3B5IG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvblxuICAgIGZpbGVzICh0aGUgXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dFxuICAgIHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcgd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMgdG8gdXNlLCBcbiAgICBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLCBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3JcbiAgICBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZVxuICAgIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nXG4gICAgY29uZGl0aW9uczpcbiAgICBcbiAgICBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZVxuICAgIGluY2x1ZGVkIGluIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuICAgIFxuICAgIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsXG4gICAgRVhQUkVTUyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTXG4gICAgT0YgTUVSQ0hBTlRBQklMSVRZLCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkRcbiAgICBOT05JTkZSSU5HRU1FTlQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1JTIE9SIENPUFlSSUdIVFxuICAgIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLFxuICAgIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lOR1xuICAgIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1JcbiAgICBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuXG5cbkluY2x1ZGVzIHRoZSA8YSB0YXJnZXQ9XCJfYmxhbmtcIiBocmVmPVwiaHR0cHM6Ly9naXRodWIuY29tL25vZGVjYS9wYWtvXCI+UGFrbyB6bGliIGNvbXByZXNzaW9uIGxpYnJhcnk8L2E+XG5cbiAgICBDb3B5cmlnaHQgKEMpIDIwMTQtMjAxNSBieSBWaXRhbHkgUHV6cmluXG4gICAgXG4gICAgUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb25cbiAgICBvYnRhaW5pbmcgYSBjb3B5IG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvblxuICAgIGZpbGVzICh0aGUgXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dFxuICAgIHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcgd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMgdG8gdXNlLFxuICAgIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vclxuICAgIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhlXG4gICAgU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmdcbiAgICBjb25kaXRpb25zOlxuXG4gICAgVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmVcbiAgICBpbmNsdWRlZCBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cblxuICAgIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsXG4gICAgRVhQUkVTUyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTXG4gICAgT0YgTUVSQ0hBTlRBQklMSVRZLCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkRcbiAgICBOT05JTkZSSU5HRU1FTlQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1JTIE9SIENPUFlSSUdIVCBcbiAgICBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLCBEQU1BR0VTIE9SIE9USEVSIExJQUJJTElUWSxcbiAgICBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkdcbiAgICBGUk9NLCBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUgVVNFIE9SXG4gICAgT1RIRVIgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLlxuICAgIFxuSW5jbHVkZXMgdGhlIDxhIHRhcmdldD1cIl9ibGFua1wiIGhyZWY9XCJodHRwczovL2dpdGh1Yi5jb20vbWFkcm9iYnkva2V5bWFzdGVyXCI+a2V5bWFzdGVyLmpzPC9hPiBrZXlib2FyZCBsaWJyYXJ5XG4gICAgXG4gICAgQ29weXJpZ2h0IChjKSAyMDExLTIwMTMgVGhvbWFzIEZ1Y2hzXG5cbiAgICBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvblxuICAgIG9idGFpbmluZyBhIGNvcHkgb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uXG4gICAgZmlsZXMgKHRoZSBcIlNvZnR3YXJlXCIpLCB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0XG4gICAgcmVzdHJpY3Rpb24sIGluY2x1ZGluZyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsXG4gICAgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCwgZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yXG4gICAgc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGVcbiAgICBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZ1xuICAgIGNvbmRpdGlvbnM6XG5cbiAgICBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZVxuICAgIGluY2x1ZGVkIGluIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuXG4gICAgVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCxcbiAgICBFWFBSRVNTIE9SIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVNcbiAgICBPRiBNRVJDSEFOVEFCSUxJVFksIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORFxuICAgIE5PTklORlJJTkdFTUVOVC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUlMgT1IgQ09QWVJJR0hUIFxuICAgIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLFxuICAgIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lOR1xuICAgIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1JcbiAgICBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuXG4gICAgXG5JbmNsdWRlcyB0aGUgPGEgdGFyZ2V0PVwiX2JsYW5rXCIgaHJlZj1cImh0dHBzOi8vZ2l0aHViLmNvbS9zdGVmYW5wZW5uZXIvZXM2LXByb21pc2VcIj5lczYtcHJvbWlzZTwvYT4gbGlicmFyeVxuICAgIFxuICAgIENvcHlyaWdodCAoYykgMjAxNCBZZWh1ZGEgS2F0eiwgVG9tIERhbGUsIFN0ZWZhbiBQZW5uZXIgYW5kIGNvbnRyaWJ1dG9yc1xuXG4gICAgUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb25cbiAgICBvYnRhaW5pbmcgYSBjb3B5IG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvblxuICAgIGZpbGVzICh0aGUgXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dFxuICAgIHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcgd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMgdG8gdXNlLFxuICAgIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vclxuICAgIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhlXG4gICAgU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmdcbiAgICBjb25kaXRpb25zOlxuXG4gICAgVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmVcbiAgICBpbmNsdWRlZCBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cblxuICAgIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsXG4gICAgRVhQUkVTUyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTXG4gICAgT0YgTUVSQ0hBTlRBQklMSVRZLCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkRcbiAgICBOT05JTkZSSU5HRU1FTlQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1JTIE9SIENPUFlSSUdIVCBcbiAgICBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLCBEQU1BR0VTIE9SIE9USEVSIExJQUJJTElUWSxcbiAgICBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkdcbiAgICBGUk9NLCBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUgVVNFIE9SXG4gICAgT1RIRVIgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLlxuICAgICAgICAgICAgICAgICAgICA8L3ByZT5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICBgKTtcbiAgICBcbiAgICAvLyBEZXN0cm95IHRoZSBtb2RhbCB1cG9uIGNsb3NlXG4gICAgZGlhbG9nLm9uKFwiaGlkZGVuLmJzLm1vZGFsXCIsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgZGlhbG9nLnJlbW92ZSgpO1xuICAgIH0pO1xuICAgIFxuICAgIGRpYWxvZy5tb2RhbCh7XG4gICAgICAgIHNob3c6IGZhbHNlXG4gICAgfSk7XG4gICAgXG4gICAgLy8gRml4IHRoZSBiYWNrZHJvcCBsb2NhdGlvbiBpbiB0aGUgRE9NIGJ5IHJlcGFyZW50aW5nIGl0IHRvIHRoZSBjaGlja2VucGFpbnQgY29udGFpbmVyXG4gICAgZGlhbG9nLmRhdGEoXCJicy5tb2RhbFwiKS4kYm9keSA9ICQocGFyZW50KTtcbiAgICBcbiAgICBwYXJlbnQuYXBwZW5kQ2hpbGQoZGlhbG9nWzBdKTtcblxuICAgIHRoaXMuc2hvdyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBkaWFsb2cubW9kYWwoXCJzaG93XCIpO1xuICAgIH07XG59IiwiLypcbiAgICBDaGlja2VuUGFpbnRcbiAgICBcbiAgICBDaGlja2VuUGFpbnQgaXMgYSB0cmFuc2xhdGlvbiBvZiBDaGliaVBhaW50IGZyb20gSmF2YSB0byBKYXZhU2NyaXB0XG4gICAgYnkgTmljaG9sYXMgU2hlcmxvY2sgLyBDaGlja2VuIFNtb290aGllLlxuICAgIFxuICAgIENoaWJpUGFpbnQgaXMgQ29weXJpZ2h0IChjKSAyMDA2LTIwMDggTWFyYyBTY2hlZmVyXG5cbiAgICBDaGlja2VuUGFpbnQgaXMgZnJlZSBzb2Z0d2FyZTogeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yIG1vZGlmeVxuICAgIGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgYXMgcHVibGlzaGVkIGJ5XG4gICAgdGhlIEZyZWUgU29mdHdhcmUgRm91bmRhdGlvbiwgZWl0aGVyIHZlcnNpb24gMyBvZiB0aGUgTGljZW5zZSwgb3JcbiAgICAoYXQgeW91ciBvcHRpb24pIGFueSBsYXRlciB2ZXJzaW9uLlxuXG4gICAgQ2hpY2tlblBhaW50IGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsXG4gICAgYnV0IFdJVEhPVVQgQU5ZIFdBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2ZcbiAgICBNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuICBTZWUgdGhlXG4gICAgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy5cblxuICAgIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXG4gICAgYWxvbmcgd2l0aCBDaGlja2VuUGFpbnQuIElmIG5vdCwgc2VlIDxodHRwOi8vd3d3LmdudS5vcmcvbGljZW5zZXMvPi5cbiovXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIENQQm94Qmx1ckRpYWxvZyhwYXJlbnQsIGNvbnRyb2xsZXIpIHtcbiAgICB2YXJcbiAgICAgICAgZGlhbG9nID0gXG4gICAgICAgICAgICAkKGA8ZGl2IGNsYXNzPVwibW9kYWwgZmFkZVwiIHRhYmluZGV4PVwiLTFcIiByb2xlPVwiZGlhbG9nXCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm1vZGFsLWRpYWxvZ1wiPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibW9kYWwtY29udGVudFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm1vZGFsLWhlYWRlclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiY2xvc2VcIiBkYXRhLWRpc21pc3M9XCJtb2RhbFwiIGFyaWEtbGFiZWw9XCJDbG9zZVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBhcmlhLWhpZGRlbj1cInRydWVcIj4mdGltZXM7PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoNCBjbGFzcz1cIm1vZGFsLXRpdGxlXCI+Qm94IGJsdXI8L2g0PlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibW9kYWwtYm9keVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxmb3JtPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZm9ybS1ncm91cFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsPkJsdXIgYW1vdW50IChwaXhlbHMpPC9sYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIGNsYXNzPVwiZm9ybS1jb250cm9sIGNoaWNrZW5wYWludC1ibHVyLWFtb3VudFwiIHZhbHVlPVwiM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImZvcm0tZ3JvdXBcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD5JdGVyYXRpb25zICgxLTgsIGxhcmdlciBnaXZlcyBzbW9vdGhlciBibHVyKTwvbGFiZWw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cInRleHRcIiBjbGFzcz1cImZvcm0tY29udHJvbCBjaGlja2VucGFpbnQtYmx1ci1pdGVyYXRpb25zXCIgdmFsdWU9XCIxXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZm9ybT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm1vZGFsLWZvb3RlclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiYnRuIGJ0bi1kZWZhdWx0XCIgZGF0YS1kaXNtaXNzPVwibW9kYWxcIj5DYW5jZWw8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImJ0biBidG4tcHJpbWFyeSBjaGlja2VucGFpbnQtYXBwbHktYm94LWJsdXJcIiBkYXRhLWRpc21pc3M9XCJtb2RhbFwiPk9rPC9idXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgYCksXG4gICAgICAgIFxuICAgICAgICBibHVyQW1vdW50RWxlbSA9ICQoXCIuY2hpY2tlbnBhaW50LWJsdXItYW1vdW50XCIsIGRpYWxvZyksXG4gICAgICAgIGJsdXJJdGVyYXRpb25zRWxlbSA9ICQoXCIuY2hpY2tlbnBhaW50LWJsdXItaXRlcmF0aW9uc1wiLCBkaWFsb2cpLFxuICAgICAgICBhcHBseUJ1dHRvbiA9ICQoXCIuY2hpY2tlbnBhaW50LWFwcGx5LWJveC1ibHVyXCIsIGRpYWxvZyk7XG5cbiAgICB0aGlzLnNob3cgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgZGlhbG9nLm1vZGFsKFwic2hvd1wiKTtcbiAgICB9O1xuICAgIFxuICAgIGFwcGx5QnV0dG9uLmNsaWNrKGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgdmFyXG4gICAgICAgICAgICBibHVyID0gTWF0aC5tYXgocGFyc2VJbnQoYmx1ckFtb3VudEVsZW0udmFsKCksIDEwKSwgMSksXG4gICAgICAgICAgICBpdGVyYXRpb25zID0gTWF0aC5taW4oTWF0aC5tYXgocGFyc2VJbnQoYmx1ckl0ZXJhdGlvbnNFbGVtLnZhbCgpLCAxMCksIDEpLCA4KTtcbiAgICAgICAgXG4gICAgICAgIGNvbnRyb2xsZXIuZ2V0QXJ0d29yaygpLmJveEJsdXIoYmx1ciwgYmx1ciwgaXRlcmF0aW9ucyk7XG4gICAgfSk7XG4gICAgXG4gICAgZGlhbG9nXG4gICAgICAgIC5tb2RhbCh7XG4gICAgICAgICAgICBzaG93OiBmYWxzZVxuICAgICAgICB9KVxuICAgICAgICAub24oJ3Nob3duLmJzLm1vZGFsJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBibHVyQW1vdW50RWxlbS5mb2N1cygpO1xuICAgICAgICB9KVxuICAgICAgICAub24oJ2tleXByZXNzJywgZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgaWYgKGUua2V5Q29kZSA9PSAxMykge1xuICAgICAgICAgICAgICAgIGFwcGx5QnV0dG9uLmNsaWNrKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIFxuICAgIC8vIEZpeCB0aGUgYmFja2Ryb3AgbG9jYXRpb24gaW4gdGhlIERPTSBieSByZXBhcmVudGluZyBpdCB0byB0aGUgY2hpY2tlbnBhaW50IGNvbnRhaW5lclxuICAgIGRpYWxvZy5kYXRhKFwiYnMubW9kYWxcIikuJGJvZHkgPSAkKHBhcmVudCk7XG4gICAgXG4gICAgcGFyZW50LmFwcGVuZENoaWxkKGRpYWxvZ1swXSk7XG4gICAgXG4gICAgLyogVE9ET1xuICAgIHBhbmVsLmFkZChuZXcgSkxhYmVsKFwiQmx1ciBhbW91bnQ6XCIpKTtcbiAgICBTcGlubmVyTW9kZWwgYmx1clhTTSA9IG5ldyBTcGlubmVyTnVtYmVyTW9kZWwoMywgMSwgMTAwLCAxKTtcbiAgICBcbiAgICBwYW5lbC5hZGQobmV3IEpMYWJlbChcIkl0ZXJhdGlvbnM6XCIpKTtcbiAgICBTcGlubmVyTW9kZWwgaXRlclNNID0gbmV3IFNwaW5uZXJOdW1iZXJNb2RlbCgxLCAxLCA4LCAxKTtcbiAgICAqL1xufSIsIi8qXG4gICAgQ2hpY2tlblBhaW50XG4gICAgXG4gICAgQ2hpY2tlblBhaW50IGlzIGEgdHJhbnNsYXRpb24gb2YgQ2hpYmlQYWludCBmcm9tIEphdmEgdG8gSmF2YVNjcmlwdFxuICAgIGJ5IE5pY2hvbGFzIFNoZXJsb2NrIC8gQ2hpY2tlbiBTbW9vdGhpZS5cbiAgICBcbiAgICBDaGliaVBhaW50IGlzIENvcHlyaWdodCAoYykgMjAwNi0yMDA4IE1hcmMgU2NoZWZlclxuXG4gICAgQ2hpY2tlblBhaW50IGlzIGZyZWUgc29mdHdhcmU6IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vciBtb2RpZnlcbiAgICBpdCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGFzIHB1Ymxpc2hlZCBieVxuICAgIHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb24sIGVpdGhlciB2ZXJzaW9uIDMgb2YgdGhlIExpY2Vuc2UsIG9yXG4gICAgKGF0IHlvdXIgb3B0aW9uKSBhbnkgbGF0ZXIgdmVyc2lvbi5cblxuICAgIENoaWNrZW5QYWludCBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLFxuICAgIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mXG4gICAgTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiAgU2VlIHRoZVxuICAgIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuXG5cbiAgICBZb3Ugc2hvdWxkIGhhdmUgcmVjZWl2ZWQgYSBjb3B5IG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZVxuICAgIGFsb25nIHdpdGggQ2hpY2tlblBhaW50LiBJZiBub3QsIHNlZSA8aHR0cDovL3d3dy5nbnUub3JnL2xpY2Vuc2VzLz4uXG4qL1xuXG5pbXBvcnQgQ2hpY2tlblBhaW50IGZyb20gXCIuLi9DaGlja2VuUGFpbnRcIjtcblxuaW1wb3J0IENQUGFsZXR0ZSBmcm9tIFwiLi9DUFBhbGV0dGVcIjtcbmltcG9ydCBDUENoZWNrYm94IGZyb20gXCIuL0NQQ2hlY2tib3hcIjtcbmltcG9ydCBDUENvbG9yU3dhdGNoIGZyb20gXCIuL0NQQ29sb3JTd2F0Y2hcIjtcbmltcG9ydCBDUFNsaWRlciBmcm9tIFwiLi9DUFNsaWRlclwiO1xuaW1wb3J0IHtjcmVhdGVDaGVja2VyYm9hcmRQYXR0ZXJufSBmcm9tIFwiLi9DUEdVSVV0aWxzXCI7XG5cbmltcG9ydCBDUExheWVyIGZyb20gXCIuLi9lbmdpbmUvQ1BMYXllclwiO1xuXG5pbXBvcnQgQ1BDb2xvciBmcm9tIFwiLi4vdXRpbC9DUENvbG9yXCI7XG5cbmNvbnN0XG4gICAgVElQX05BTUVTID0gW1wiUm91bmQgUGl4ZWxhdGVkXCIsIFwiUm91bmQgSGFyZCBFZGdlXCIsIFwiUm91bmQgU29mdFwiLCBcIlNxdWFyZSBQaXhlbGF0ZWRcIiwgXCJTcXVhcmUgSGFyZCBFZGdlXCJdLFxuICAgIEJSVVNIX1NJWkVTID0gWzEsIDIsIDMsIDQsIDUsIDYsIDcsIDgsIDksIDEwLCAxNSwgMjAsIDI1LCAzMCwgMzUsIDQwLCA0NSwgNTAsIDYwLCA3MCwgODAsIDkwLCAxMDAsIDEyNSwgMTUwLCAxNzUsIDIwMF07XG5cbmZ1bmN0aW9uIENQR3JhZGllbnRQcmV2aWV3KGNvbnRyb2xsZXIpIHtcbiAgICB2YXJcbiAgICAgICAgdGhhdCA9IHRoaXMsXG5cbiAgICAgICAgdyA9IDE1MCwgaCA9IDMyLFxuXG4gICAgICAgIGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIiksXG4gICAgICAgIGNhbnZhc0NvbnRleHQgPSBjYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpLFxuXG4gICAgICAgIGNoZWNrZXJib2FyZCA9IGNyZWF0ZUNoZWNrZXJib2FyZFBhdHRlcm4oY2FudmFzQ29udGV4dCksXG5cbiAgICAgICAgaW1hZ2UgPSBuZXcgQ1BMYXllcih3LCBoLCBcIlwiKSxcbiAgICAgICAgaW1hZ2VDYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpLFxuICAgICAgICBpbWFnZUNhbnZhc0NvbnRleHQgPSBpbWFnZUNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIiksXG5cbiAgICAgICAgZ3JhZGllbnQgPSBjb250cm9sbGVyLmdldEN1ckdyYWRpZW50KCk7XG5cbiAgICBmdW5jdGlvbiBwYWludCgpIHtcbiAgICAgICAgaW1hZ2UuZ3JhZGllbnQoaW1hZ2UuZ2V0Qm91bmRzKCksIDAsIDAsIGltYWdlLndpZHRoLCAwLCBncmFkaWVudCwgdHJ1ZSk7XG4gICAgICAgIGltYWdlQ2FudmFzQ29udGV4dC5wdXRJbWFnZURhdGEoaW1hZ2UuaW1hZ2VEYXRhLCAwLCAwLCAwLCAwLCB3LCBoKTtcblxuICAgICAgICBjYW52YXNDb250ZXh0LmZpbGxSZWN0KDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7XG4gICAgICAgIGNhbnZhc0NvbnRleHQuZHJhd0ltYWdlKGltYWdlQ2FudmFzLCAwLCAwKTtcbiAgICB9XG5cbiAgICB0aGlzLmdldEVsZW1lbnQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIGNhbnZhcztcbiAgICB9O1xuXG4gICAgY29udHJvbGxlci5vbihcImdyYWRpZW50Q2hhbmdlXCIsIGZ1bmN0aW9uKF9ncmFkaWVudCkge1xuICAgICAgICBncmFkaWVudCA9IF9ncmFkaWVudDtcblxuICAgICAgICBwYWludCgpO1xuICAgIH0pO1xuXG4gICAgY2FudmFzLndpZHRoID0gaW1hZ2VDYW52YXMud2lkdGggPSB3O1xuICAgIGNhbnZhcy5oZWlnaHQgPSBpbWFnZUNhbnZhcy5oZWlnaHQgPSBoO1xuXG4gICAgY2FudmFzLmNsYXNzTmFtZSA9ICdjaGlja2VucGFpbnQtZ3JhZGllbnQtcHJldmlldyc7XG5cbiAgICBjYW52YXNDb250ZXh0LmZpbGxTdHlsZSA9IGNoZWNrZXJib2FyZDtcblxuICAgIHBhaW50KCk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIENQQnJ1c2hQYWxldHRlKGNvbnRyb2xsZXIpIHtcbiAgICBDUFBhbGV0dGUuY2FsbCh0aGlzLCBjb250cm9sbGVyLCBcImJydXNoXCIsIFwiVG9vbCBvcHRpb25zXCIpO1xuXG4gICAgdmFyXG4gICAgICAgIGJydXNoUGFuZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLFxuXG4gICAgICAgIHRpcENvbWJvID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNlbGVjdFwiKSxcblxuICAgICAgICBhbHBoYUNCID0gbmV3IENQQ2hlY2tib3goZmFsc2UsIFwiQ29udHJvbCBicnVzaCBvcGFjaXR5IHdpdGggcGVuIHByZXNzdXJlXCIpLCBcbiAgICAgICAgYWxwaGFTbGlkZXIgPSBuZXcgQ1BTbGlkZXIoMSwgMjU1KSxcbiAgICAgICAgXG4gICAgICAgIHNpemVDQiA9IG5ldyBDUENoZWNrYm94KHRydWUsIFwiQ29udHJvbCBicnVzaCBzaXplIHdpdGggcGVuIHByZXNzdXJlXCIpLCBcbiAgICAgICAgc2l6ZVNsaWRlciA9IG5ldyBDUFNsaWRlcigxLCAyMDAsIGZhbHNlLCB0cnVlKSxcbiAgICAgICAgXG4gICAgICAgIHNjYXR0ZXJpbmdDQiAgPSBuZXcgQ1BDaGVja2JveChmYWxzZSwgXCJDb250cm9sIGJydXNoIHNjYXR0ZXJpbmcgd2l0aCBwZW4gcHJlc3N1cmVcIiksXG4gICAgICAgIHNjYXR0ZXJpbmdTbGlkZXIgPSBuZXcgQ1BTbGlkZXIoMCwgMTAwMCwgZmFsc2UsIHRydWUpLFxuICAgIFxuICAgICAgICByZXNhdFNsaWRlciA9IG5ldyBDUFNsaWRlcigwLCAxMDAsIGZhbHNlLCB0cnVlKSxcbiAgICAgICAgYmxlZWRTbGlkZXIgPSBuZXcgQ1BTbGlkZXIoMCwgMTAwLCBmYWxzZSwgdHJ1ZSksXG4gICAgICAgIHNwYWNpbmdTbGlkZXIgPSBuZXcgQ1BTbGlkZXIoMCwgMTAwLCBmYWxzZSwgdHJ1ZSksXG4gICAgICAgIHNtb290aGluZ1NsaWRlciA9IG5ldyBDUFNsaWRlcigwLCAxMDAsIGZhbHNlLCB0cnVlKSxcblxuICAgICAgICBicnVzaFByZXZpZXcgPSBuZXcgQ1BCcnVzaFBhbGV0dGUuQ1BCcnVzaFByZXZpZXcoY29udHJvbGxlciksXG5cbiAgICAgICAgZ3JhZGllbnRQYW5lbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksXG4gICAgICAgIGdyYWRpZW50UHJldmlldyA9IG5ldyBDUEdyYWRpZW50UHJldmlldyhjb250cm9sbGVyKSxcbiAgICAgICAgXG4gICAgICAgIGdyYWRpZW50U3RhcnRTd2F0Y2ggPSBuZXcgQ1BDb2xvclN3YXRjaChuZXcgQ1BDb2xvcihjb250cm9sbGVyLmdldEN1ckdyYWRpZW50KClbMF0gJiAweEZGRkZGRikpLFxuICAgICAgICBncmFkaWVudEVuZFN3YXRjaCA9IG5ldyBDUENvbG9yU3dhdGNoKG5ldyBDUENvbG9yKGNvbnRyb2xsZXIuZ2V0Q3VyR3JhZGllbnQoKVsxXSAmIDB4RkZGRkZGKSksXG5cbiAgICAgICAgYm9keSA9IHRoaXMuZ2V0Qm9keUVsZW1lbnQoKTtcblxuICAgIGZ1bmN0aW9uIHNsaWRlckNoZWNrYm94R3JvdXAoY2hlY2tib3gsIHNsaWRlcikge1xuICAgICAgICB2YXJcbiAgICAgICAgZ3JvdXAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICBcbiAgICAgICAgZ3JvdXAuY2xhc3NOYW1lID0gXCJjaGlja2VucGFpbnQtY2hlY2tib3gtc2xpZGVyLWdyb3VwXCI7XG4gICAgICAgIFxuICAgICAgICBncm91cC5hcHBlbmRDaGlsZChjaGVja2JveC5nZXRFbGVtZW50KCkpO1xuICAgICAgICBncm91cC5hcHBlbmRDaGlsZChzbGlkZXIuZ2V0RWxlbWVudCgpKTtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiBncm91cDtcbiAgICB9XG4gICAgXG4gICAgZnVuY3Rpb24gZmlsbENvbWJvYm94KGNvbWJvLCBvcHRpb25OYW1lcykge1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG9wdGlvbk5hbWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgXG4gICAgICAgICAgICAgICAgb3B0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIm9wdGlvblwiKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgb3B0aW9uLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKG9wdGlvbk5hbWVzW2ldKSk7XG4gICAgICAgICAgICBvcHRpb24udmFsdWUgPSBpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb21iby5hcHBlbmRDaGlsZChvcHRpb24pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYnVpbGRCcnVzaFBhbmVsKCkge1xuICAgICAgICBhbHBoYVNsaWRlci50aXRsZSA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgcmV0dXJuIFwiT3BhY2l0eTogXCIgKyB2YWx1ZTtcbiAgICAgICAgfTtcblxuICAgICAgICBhbHBoYVNsaWRlci5vbigndmFsdWVDaGFuZ2UnLCBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgIGNvbnRyb2xsZXIuc2V0QWxwaGEodmFsdWUpO1xuICAgICAgICB9KTtcblxuICAgICAgICBzaXplU2xpZGVyLnRpdGxlID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICByZXR1cm4gXCJCcnVzaCBzaXplOiBcIiArIHZhbHVlO1xuICAgICAgICB9XG5cbiAgICAgICAgc2l6ZVNsaWRlci5vbigndmFsdWVDaGFuZ2UnLCBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgIGNvbnRyb2xsZXIuc2V0QnJ1c2hTaXplKHZhbHVlKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmVzYXRTbGlkZXIudGl0bGUgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgIHJldHVybiBcIkNvbG9yOiBcIiArIHZhbHVlICsgXCIlXCI7XG4gICAgICAgIH07XG5cbiAgICAgICAgcmVzYXRTbGlkZXIub24oJ3ZhbHVlQ2hhbmdlJywgZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICBjb250cm9sbGVyLmdldEJydXNoSW5mbygpLnJlc2F0ID0gdmFsdWUgLyAxMDAuMDtcbiAgICAgICAgICAgIGNvbnRyb2xsZXIuY2FsbFRvb2xMaXN0ZW5lcnMoKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgYmxlZWRTbGlkZXIudGl0bGUgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgIHJldHVybiBcIkJsZW5kOiBcIiArIHZhbHVlICsgXCIlXCI7XG4gICAgICAgIH07XG5cbiAgICAgICAgYmxlZWRTbGlkZXIub24oJ3ZhbHVlQ2hhbmdlJywgZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICBjb250cm9sbGVyLmdldEJydXNoSW5mbygpLmJsZWVkID0gdmFsdWUgLyAxMDAuMDtcbiAgICAgICAgICAgIGNvbnRyb2xsZXIuY2FsbFRvb2xMaXN0ZW5lcnMoKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgc3BhY2luZ1NsaWRlci50aXRsZSA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgcmV0dXJuIFwiU3BhY2luZzogXCIgKyB2YWx1ZSArIFwiJVwiO1xuICAgICAgICB9O1xuXG4gICAgICAgIHNwYWNpbmdTbGlkZXIub24oJ3ZhbHVlQ2hhbmdlJywgZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICBjb250cm9sbGVyLmdldEJydXNoSW5mbygpLnNwYWNpbmcgPSB2YWx1ZSAvIDEwMC4wO1xuICAgICAgICAgICAgY29udHJvbGxlci5jYWxsVG9vbExpc3RlbmVycygpO1xuICAgICAgICB9KTtcblxuICAgICAgICBzY2F0dGVyaW5nU2xpZGVyLnRpdGxlID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICByZXR1cm4gXCJTY2F0dGVyaW5nOiBcIiArIHZhbHVlICsgXCIlXCI7XG4gICAgICAgIH07XG5cbiAgICAgICAgc2NhdHRlcmluZ1NsaWRlci5vbigndmFsdWVDaGFuZ2UnLCBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgIGNvbnRyb2xsZXIuZ2V0QnJ1c2hJbmZvKCkuc2NhdHRlcmluZyA9IHZhbHVlIC8gMTAwLjA7XG4gICAgICAgICAgICBjb250cm9sbGVyLmNhbGxUb29sTGlzdGVuZXJzKCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHNtb290aGluZ1NsaWRlci50aXRsZSA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgcmV0dXJuIFwiU21vb3RoaW5nOiBcIiArIHZhbHVlICsgXCIlXCI7XG4gICAgICAgIH07XG5cbiAgICAgICAgc21vb3RoaW5nU2xpZGVyLm9uKCd2YWx1ZUNoYW5nZScsIGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgY29udHJvbGxlci5nZXRCcnVzaEluZm8oKS5zbW9vdGhpbmcgPSB2YWx1ZSAvIDEwMC4wO1xuICAgICAgICAgICAgY29udHJvbGxlci5jYWxsVG9vbExpc3RlbmVycygpO1xuICAgICAgICB9KTtcblxuICAgICAgICBzY2F0dGVyaW5nQ0Iub24oJ3ZhbHVlQ2hhbmdlJywgZnVuY3Rpb24gKHN0YXRlKSB7XG4gICAgICAgICAgICBjb250cm9sbGVyLmdldEJydXNoSW5mbygpLnByZXNzdXJlU2NhdHRlcmluZyA9IHN0YXRlO1xuICAgICAgICAgICAgY29udHJvbGxlci5jYWxsVG9vbExpc3RlbmVycygpO1xuICAgICAgICB9KTtcblxuICAgICAgICBhbHBoYUNCLm9uKCd2YWx1ZUNoYW5nZScsIGZ1bmN0aW9uIChzdGF0ZSkge1xuICAgICAgICAgICAgY29udHJvbGxlci5nZXRCcnVzaEluZm8oKS5wcmVzc3VyZUFscGhhID0gc3RhdGU7XG4gICAgICAgICAgICBjb250cm9sbGVyLmNhbGxUb29sTGlzdGVuZXJzKCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHNpemVDQi5vbigndmFsdWVDaGFuZ2UnLCBmdW5jdGlvbiAoc3RhdGUpIHtcbiAgICAgICAgICAgIGNvbnRyb2xsZXIuZ2V0QnJ1c2hJbmZvKCkucHJlc3N1cmVTaXplID0gc3RhdGU7XG4gICAgICAgICAgICBjb250cm9sbGVyLmNhbGxUb29sTGlzdGVuZXJzKCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRpcENvbWJvLmFkZEV2ZW50TGlzdGVuZXIoXCJjaGFuZ2VcIiwgZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgY29udHJvbGxlci5nZXRCcnVzaEluZm8oKS50eXBlID0gcGFyc2VJbnQodGlwQ29tYm8udmFsdWUsIDEwKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGlwQ29tYm8uY2xhc3NOYW1lID0gJ2Zvcm0tY29udHJvbCc7XG4gICAgICAgIGZpbGxDb21ib2JveCh0aXBDb21ibywgVElQX05BTUVTKTtcblxuICAgICAgICBicnVzaFBhbmVsLmFwcGVuZENoaWxkKHRpcENvbWJvKTtcblxuICAgICAgICBicnVzaFBhbmVsLmFwcGVuZENoaWxkKGJydXNoUHJldmlldy5nZXRFbGVtZW50KCkpO1xuXG4gICAgICAgIGJydXNoUGFuZWwuYXBwZW5kQ2hpbGQoc2xpZGVyQ2hlY2tib3hHcm91cChzaXplQ0IsIHNpemVTbGlkZXIpKTtcbiAgICAgICAgYnJ1c2hQYW5lbC5hcHBlbmRDaGlsZChzbGlkZXJDaGVja2JveEdyb3VwKGFscGhhQ0IsIGFscGhhU2xpZGVyKSk7XG4gICAgICAgIGJydXNoUGFuZWwuYXBwZW5kQ2hpbGQocmVzYXRTbGlkZXIuZ2V0RWxlbWVudCgpKTtcbiAgICAgICAgYnJ1c2hQYW5lbC5hcHBlbmRDaGlsZChibGVlZFNsaWRlci5nZXRFbGVtZW50KCkpO1xuICAgICAgICBicnVzaFBhbmVsLmFwcGVuZENoaWxkKHNwYWNpbmdTbGlkZXIuZ2V0RWxlbWVudCgpKTtcbiAgICAgICAgYnJ1c2hQYW5lbC5hcHBlbmRDaGlsZChzbGlkZXJDaGVja2JveEdyb3VwKHNjYXR0ZXJpbmdDQiwgc2NhdHRlcmluZ1NsaWRlcikpO1xuICAgICAgICBicnVzaFBhbmVsLmFwcGVuZENoaWxkKHNtb290aGluZ1NsaWRlci5nZXRFbGVtZW50KCkpO1xuXG4gICAgICAgIGFscGhhQ0Iuc2V0VmFsdWUoY29udHJvbGxlci5nZXRCcnVzaEluZm8oKS5wcmVzc3VyZUFscGhhKTtcbiAgICAgICAgYWxwaGFTbGlkZXIuc2V0VmFsdWUoY29udHJvbGxlci5nZXRBbHBoYSgpKTtcblxuICAgICAgICBzaXplQ0Iuc2V0VmFsdWUoY29udHJvbGxlci5nZXRCcnVzaEluZm8oKS5wcmVzc3VyZVNpemUpO1xuICAgICAgICBzaXplU2xpZGVyLnNldFZhbHVlKGNvbnRyb2xsZXIuZ2V0QnJ1c2hTaXplKCkpO1xuXG4gICAgICAgIHNjYXR0ZXJpbmdDQi5zZXRWYWx1ZShjb250cm9sbGVyLmdldEJydXNoSW5mbygpLnByZXNzdXJlU2NhdHRlcmluZyk7XG4gICAgICAgIHNjYXR0ZXJpbmdTbGlkZXIuc2V0VmFsdWUofn4oY29udHJvbGxlci5nZXRCcnVzaEluZm8oKS5zY2F0dGVyaW5nICogMTAwKSk7XG5cbiAgICAgICAgdGlwQ29tYm8udmFsdWUgPSBjb250cm9sbGVyLmdldEJydXNoSW5mbygpLnR5cGU7XG5cbiAgICAgICAgcmVzYXRTbGlkZXIuc2V0VmFsdWUofn4oY29udHJvbGxlci5nZXRCcnVzaEluZm8oKS5yZXNhdCAqIDEwMCkpO1xuICAgICAgICBibGVlZFNsaWRlci5zZXRWYWx1ZSh+fihjb250cm9sbGVyLmdldEJydXNoSW5mbygpLmJsZWVkICogMTAwKSk7XG4gICAgICAgIHNwYWNpbmdTbGlkZXIuc2V0VmFsdWUofn4oY29udHJvbGxlci5nZXRCcnVzaEluZm8oKS5zcGFjaW5nICogMTAwKSk7XG4gICAgICAgIHNtb290aGluZ1NsaWRlci5zZXRWYWx1ZSh+fihjb250cm9sbGVyLmdldEJydXNoSW5mbygpLnNtb290aGluZyAqIDEwMCkpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHVwZGF0ZUdyYWRpZW50KCkge1xuICAgICAgICB2YXJcbiAgICAgICAgICAgIGdyYWRpZW50ID0gbmV3IEFycmF5KDIpO1xuXG4gICAgICAgIGdyYWRpZW50WzBdID0gKGdyYWRpZW50U3RhcnRTd2F0Y2guZ2V0QWxwaGEoKSA8PCAyNCkgfCBncmFkaWVudFN0YXJ0U3dhdGNoLmdldENvbG9yUmdiKCk7XG4gICAgICAgIGdyYWRpZW50WzFdID0gKGdyYWRpZW50RW5kU3dhdGNoLmdldEFscGhhKCkgPDwgMjQpIHwgIGdyYWRpZW50RW5kU3dhdGNoLmdldENvbG9yUmdiKCk7XG5cbiAgICAgICAgY29udHJvbGxlci5zZXRDdXJHcmFkaWVudChncmFkaWVudCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYnVpbGRHcmFkaWVudFBhbmVsKCkge1xuICAgICAgICBncmFkaWVudFBhbmVsLmNsYXNzTmFtZSA9IFwiY2hpY2tlbnBhaW50LWdyYWRpZW50LXBhbmVsXCI7XG4gICAgICAgIGdyYWRpZW50UGFuZWwuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuXG4gICAgICAgIGdyYWRpZW50U3RhcnRTd2F0Y2gub24oXCJjb2xvckNoYW5nZVwiLCB1cGRhdGVHcmFkaWVudCk7XG4gICAgICAgIGdyYWRpZW50U3RhcnRTd2F0Y2gub24oXCJhbHBoYUNoYW5nZVwiLCB1cGRhdGVHcmFkaWVudCk7XG4gICAgICAgIGdyYWRpZW50RW5kU3dhdGNoLm9uKFwiY29sb3JDaGFuZ2VcIiwgdXBkYXRlR3JhZGllbnQpO1xuICAgICAgICBncmFkaWVudEVuZFN3YXRjaC5vbihcImFscGhhQ2hhbmdlXCIsIHVwZGF0ZUdyYWRpZW50KTtcblxuICAgICAgICB2YXJcbiAgICAgICAgICAgIHRpdGxlLCBjb2xvcnNHcm91cCwgY29sb3JHcm91cDtcblxuICAgICAgICB0aXRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpO1xuICAgICAgICB0aXRsZS5pbm5lckhUTUwgPSBcIkdyYWRpZW50XCI7XG5cbiAgICAgICAgZ3JhZGllbnRQYW5lbC5hcHBlbmRDaGlsZCh0aXRsZSk7XG4gICAgICAgIGdyYWRpZW50UGFuZWwuYXBwZW5kQ2hpbGQoZ3JhZGllbnRQcmV2aWV3LmdldEVsZW1lbnQoKSk7XG5cbiAgICAgICAgY29sb3JzR3JvdXAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICBjb2xvcnNHcm91cC5jbGFzc05hbWUgPSBcImNoaWNrZW5wYWludC1ncmFkaWVudC1jb2xvcnNcIjtcblxuICAgICAgICBjb2xvckdyb3VwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgY29sb3JHcm91cC5jbGFzc05hbWUgPSBcImNoaWNrZW5wYWludC1ncmFkaWVudC1zdGFydC1jb2xvclwiO1xuICAgICAgICBcbiAgICAgICAgY29sb3JHcm91cC5hcHBlbmRDaGlsZChncmFkaWVudFN0YXJ0U3dhdGNoLmdldEVsZW1lbnQoKSk7XG5cbiAgICAgICAgY29sb3JzR3JvdXAuYXBwZW5kQ2hpbGQoY29sb3JHcm91cCk7XG5cbiAgICAgICAgY29sb3JHcm91cCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIGNvbG9yR3JvdXAuY2xhc3NOYW1lID0gXCJjaGlja2VucGFpbnQtZ3JhZGllbnQtZW5kLWNvbG9yXCI7XG5cbiAgICAgICAgY29sb3JHcm91cC5hcHBlbmRDaGlsZChncmFkaWVudEVuZFN3YXRjaC5nZXRFbGVtZW50KCkpO1xuXG4gICAgICAgIGNvbG9yc0dyb3VwLmFwcGVuZENoaWxkKGNvbG9yR3JvdXApO1xuXG4gICAgICAgIGdyYWRpZW50UGFuZWwuYXBwZW5kQ2hpbGQoY29sb3JzR3JvdXApO1xuICAgIH1cblxuICAgIGJ1aWxkQnJ1c2hQYW5lbCgpO1xuICAgIGJvZHkuYXBwZW5kQ2hpbGQoYnJ1c2hQYW5lbCk7XG5cbiAgICBidWlsZEdyYWRpZW50UGFuZWwoKTtcbiAgICBib2R5LmFwcGVuZENoaWxkKGdyYWRpZW50UGFuZWwpO1xuXG4gICAgY29udHJvbGxlci5vbigndG9vbENoYW5nZScsIGZ1bmN0aW9uKHRvb2wsIHRvb2xJbmZvKSB7XG4gICAgICAgIGFscGhhU2xpZGVyLnNldFZhbHVlKHRvb2xJbmZvLmFscGhhKTtcbiAgICAgICAgc2l6ZVNsaWRlci5zZXRWYWx1ZSh0b29sSW5mby5zaXplKTtcbiAgICAgICAgc2l6ZUNCLnNldFZhbHVlKHRvb2xJbmZvLnByZXNzdXJlU2l6ZSk7XG4gICAgICAgIGFscGhhQ0Iuc2V0VmFsdWUodG9vbEluZm8ucHJlc3N1cmVBbHBoYSk7XG4gICAgICAgIHRpcENvbWJvLnZhbHVlID0gdG9vbEluZm8udHlwZTtcbiAgICAgICAgc2NhdHRlcmluZ0NCLnNldFZhbHVlKHRvb2xJbmZvLnByZXNzdXJlU2NhdHRlcmluZyk7XG5cbiAgICAgICAgaWYgKH5+KHRvb2xJbmZvLnJlc2F0ICogMTAwLjApICE9IHJlc2F0U2xpZGVyLnZhbHVlKSB7XG4gICAgICAgICAgICByZXNhdFNsaWRlci5zZXRWYWx1ZSh+fih0b29sSW5mby5yZXNhdCAqIDEwMC4wKSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAofn4odG9vbEluZm8uYmxlZWQgKiAxMDAuMCkgIT0gYmxlZWRTbGlkZXIudmFsdWUpIHtcbiAgICAgICAgICAgIGJsZWVkU2xpZGVyLnNldFZhbHVlKH5+KHRvb2xJbmZvLmJsZWVkICogMTAwLjApKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh+fih0b29sSW5mby5zcGFjaW5nICogMTAwLjApICE9IHNwYWNpbmdTbGlkZXIudmFsdWUpIHtcbiAgICAgICAgICAgIHNwYWNpbmdTbGlkZXIuc2V0VmFsdWUofn4odG9vbEluZm8uc3BhY2luZyAqIDEwMC4wKSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAofn4odG9vbEluZm8uc2NhdHRlcmluZyAqIDEwMC4wKSAhPSBzY2F0dGVyaW5nU2xpZGVyLnZhbHVlKSB7XG4gICAgICAgICAgICBzY2F0dGVyaW5nU2xpZGVyLnNldFZhbHVlKH5+KHRvb2xJbmZvLnNjYXR0ZXJpbmcgKiAxMDAuMCkpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKH5+KHRvb2xJbmZvLnNtb290aGluZyAqIDEwMC4wKSAhPSBzbW9vdGhpbmdTbGlkZXIudmFsdWUpIHtcbiAgICAgICAgICAgIHNtb290aGluZ1NsaWRlci5zZXRWYWx1ZSh+fih0b29sSW5mby5zbW9vdGhpbmcgKiAxMDAuMCkpO1xuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICBjb250cm9sbGVyLm9uKCdtb2RlQ2hhbmdlJywgZnVuY3Rpb24obW9kZSkge1xuICAgICAgIHN3aXRjaCAobW9kZSkge1xuICAgICAgICAgICBjYXNlIENoaWNrZW5QYWludC5NX0dSQURJRU5URklMTDpcbiAgICAgICAgICAgICAgIGJydXNoUGFuZWwuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgICAgICAgICAgZ3JhZGllbnRQYW5lbC5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgIGJydXNoUGFuZWwuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcbiAgICAgICAgICAgICAgIGdyYWRpZW50UGFuZWwuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgICAgICBicmVhaztcbiAgICAgICB9XG4gICAgfSk7XG5cbiAgICBrZXkoXCIxLDIsMyw0LDUsNiw3LDgsOSwwXCIsIGZ1bmN0aW9uKGV2ZW50LCBoYW5kbGVyKSB7XG4gICAgICAgIHZhclxuICAgICAgICAgICAgc2hvcnRjdXQgPSBwYXJzZUludChoYW5kbGVyLnNob3J0Y3V0LCAxMCk7XG5cbiAgICAgICAgaWYgKHNob3J0Y3V0ID09IDApIHtcbiAgICAgICAgICAgIHNob3J0Y3V0ID0gMTA7XG4gICAgICAgIH1cblxuICAgICAgICBjb250cm9sbGVyLnNldEFscGhhKE1hdGgucm91bmQoc2hvcnRjdXQgLyAxMCAqIDI1NSkpO1xuICAgIH0pO1xuXG4gICAga2V5KFwieyxbXCIsIGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXJcbiAgICAgICAgICAgIHNpemUgPSBjb250cm9sbGVyLmdldEJydXNoU2l6ZSgpO1xuXG4gICAgICAgIGZvciAodmFyIGkgPSBCUlVTSF9TSVpFUy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgICAgICAgaWYgKHNpemUgPiBCUlVTSF9TSVpFU1tpXSkge1xuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIuc2V0QnJ1c2hTaXplKEJSVVNIX1NJWkVTW2ldKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAga2V5KFwifSxdXCIsIGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXJcbiAgICAgICAgICAgIHNpemUgPSBjb250cm9sbGVyLmdldEJydXNoU2l6ZSgpO1xuXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgQlJVU0hfU0laRVMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmIChzaXplIDwgQlJVU0hfU0laRVNbaV0pIHtcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyLnNldEJydXNoU2l6ZShCUlVTSF9TSVpFU1tpXSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KTtcbn1cblxuQ1BCcnVzaFBhbGV0dGUucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShDUFBhbGV0dGUucHJvdG90eXBlKTtcbkNQQnJ1c2hQYWxldHRlLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IENQQnJ1c2hQYWxldHRlO1xuXG5DUEJydXNoUGFsZXR0ZS5DUEJydXNoUHJldmlldyA9IGZ1bmN0aW9uKGNvbnRyb2xsZXIpIHtcbiAgICB2YXIgXG4gICAgICAgIHNpemUgPSAxNixcbiAgICAgICAgXG4gICAgICAgIGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIiksXG4gICAgICAgIGNhbnZhc0NvbnRleHQgPSBjYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpLFxuICAgICAgICBcbiAgICAgICAgbW91c2VDYXB0dXJlZCA9IGZhbHNlO1xuICAgIFxuICAgIGZ1bmN0aW9uIHBhaW50KCkge1xuICAgICAgICBjYW52YXNDb250ZXh0LmNsZWFyUmVjdCgwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpO1xuICAgICAgICBcbiAgICAgICAgY2FudmFzQ29udGV4dC5iZWdpblBhdGgoKTtcbiAgICAgICAgY2FudmFzQ29udGV4dC5hcmMoY2FudmFzLndpZHRoIC8gMiwgY2FudmFzLmhlaWdodCAvIDIsIHNpemUgLyAyICogd2luZG93LmRldmljZVBpeGVsUmF0aW8sIDAsIE1hdGguUEkgKiAyKTtcbiAgICAgICAgY2FudmFzQ29udGV4dC5zdHJva2UoKTtcbiAgICB9XG4gICAgXG4gICAgZnVuY3Rpb24gaGFuZGxlTW91c2VEcmFnKGUpIHtcbiAgICAgICAgdmFyIFxuICAgICAgICAgICAgb2Zmc2V0ID0gJChjYW52YXMpLm9mZnNldCgpLFxuICAgICAgICAgICAgXG4gICAgICAgICAgICBwdCA9IHt4OiBlLnBhZ2VYIC0gb2Zmc2V0LmxlZnQsIHk6IGUucGFnZVkgLSBvZmZzZXQudG9wfSxcbiAgICAgICAgXG4gICAgICAgICAgICB4ID0gcHQueCAtICQoY2FudmFzKS53aWR0aCgpIC8gMixcbiAgICAgICAgICAgIHkgPSBwdC55IC0gJChjYW52YXMpLmhlaWdodCgpIC8gMixcblxuICAgICAgICAgICAgbmV3U2l6ZSA9IE1hdGgucm91bmQoTWF0aC5zcXJ0KHggKiB4ICsgeSAqIHkpICogMik7XG4gICAgICAgIFxuICAgICAgICBzaXplID0gTWF0aC5tYXgoMSwgTWF0aC5taW4oMjAwLCBuZXdTaXplKSk7XG5cbiAgICAgICAgcGFpbnQoKTtcbiAgICAgICAgY29udHJvbGxlci5zZXRCcnVzaFNpemUoc2l6ZSk7XG4gICAgfVxuICAgIFxuICAgIGZ1bmN0aW9uIGhhbmRsZU1vdXNlVXAoZSkge1xuICAgICAgICBpZiAobW91c2VDYXB0dXJlZCkge1xuICAgICAgICAgICAgbW91c2VDYXB0dXJlZCA9IGZhbHNlO1xuICAgICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCBoYW5kbGVNb3VzZVVwKTtcbiAgICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBoYW5kbGVNb3VzZURyYWcpO1xuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIHRoaXMuZ2V0RWxlbWVudCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gY2FudmFzO1xuICAgIH07XG4gICAgXG4gICAgY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgaWYgKCFtb3VzZUNhcHR1cmVkKSB7XG4gICAgICAgICAgICBtb3VzZUNhcHR1cmVkID0gdHJ1ZTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCBoYW5kbGVNb3VzZVVwKTtcbiAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBoYW5kbGVNb3VzZURyYWcpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBoYW5kbGVNb3VzZURyYWcoZSk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBcbiAgICBjb250cm9sbGVyLm9uKFwidG9vbENoYW5nZVwiLCBmdW5jdGlvbih0b29sLCB0b29sSW5mbykge1xuICAgICAgICBpZiAodG9vbEluZm8uc2l6ZSAhPSBzaXplKSB7XG4gICAgICAgICAgICBzaXplID0gdG9vbEluZm8uc2l6ZTtcbiAgICAgICAgICAgIHBhaW50KCk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBcbiAgICBjYW52YXMud2lkdGggPSA2NDsgXG4gICAgY2FudmFzLmhlaWdodCA9IDY0O1xuICAgIFxuICAgIGlmICh3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyA+IDEpIHtcbiAgICAgICAgY2FudmFzLnN0eWxlLndpZHRoID0gY2FudmFzLndpZHRoICsgJ3B4JztcbiAgICAgICAgY2FudmFzLnN0eWxlLmhlaWdodCA9IGNhbnZhcy5oZWlnaHQgKyAncHgnO1xuICAgICAgICBcbiAgICAgICAgY2FudmFzLndpZHRoID0gY2FudmFzLndpZHRoICogd2luZG93LmRldmljZVBpeGVsUmF0aW87XG4gICAgICAgIGNhbnZhcy5oZWlnaHQgPSBjYW52YXMuaGVpZ2h0ICogd2luZG93LmRldmljZVBpeGVsUmF0aW87XG4gICAgfVxuICAgIFxuICAgIGNhbnZhcy5jbGFzc05hbWUgPSAnY2hpY2tlbnBhaW50LWJydXNoLXByZXZpZXcnO1xuXG4gICAgY2FudmFzQ29udGV4dC5zdHJva2VTdHlsZSA9ICdibGFjayc7XG4gICAgY2FudmFzQ29udGV4dC5saW5lV2lkdGggPSAxLjAgKiB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbztcbiAgICBcbiAgICBwYWludCgpO1xufVxuIiwiLypcbiAgICBDaGlja2VuUGFpbnRcbiAgICBcbiAgICBDaGlja2VuUGFpbnQgaXMgYSB0cmFuc2xhdGlvbiBvZiBDaGliaVBhaW50IGZyb20gSmF2YSB0byBKYXZhU2NyaXB0XG4gICAgYnkgTmljaG9sYXMgU2hlcmxvY2sgLyBDaGlja2VuIFNtb290aGllLlxuICAgIFxuICAgIENoaWJpUGFpbnQgaXMgQ29weXJpZ2h0IChjKSAyMDA2LTIwMDggTWFyYyBTY2hlZmVyXG5cbiAgICBDaGlja2VuUGFpbnQgaXMgZnJlZSBzb2Z0d2FyZTogeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yIG1vZGlmeVxuICAgIGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgYXMgcHVibGlzaGVkIGJ5XG4gICAgdGhlIEZyZWUgU29mdHdhcmUgRm91bmRhdGlvbiwgZWl0aGVyIHZlcnNpb24gMyBvZiB0aGUgTGljZW5zZSwgb3JcbiAgICAoYXQgeW91ciBvcHRpb24pIGFueSBsYXRlciB2ZXJzaW9uLlxuXG4gICAgQ2hpY2tlblBhaW50IGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsXG4gICAgYnV0IFdJVEhPVVQgQU5ZIFdBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2ZcbiAgICBNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuICBTZWUgdGhlXG4gICAgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy5cblxuICAgIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXG4gICAgYWxvbmcgd2l0aCBDaGlja2VuUGFpbnQuIElmIG5vdCwgc2VlIDxodHRwOi8vd3d3LmdudS5vcmcvbGljZW5zZXMvPi5cbiovXG5cbmltcG9ydCBDUFJlY3QgZnJvbSBcIi4uL3V0aWwvQ1BSZWN0XCI7XG5pbXBvcnQgQ1BUcmFuc2Zvcm0gZnJvbSBcIi4uL3V0aWwvQ1BUcmFuc2Zvcm1cIjtcbmltcG9ydCBDUFdhY29tVGFibGV0IGZyb20gXCIuLi91dGlsL0NQV2Fjb21UYWJsZXRcIjtcbmltcG9ydCBDUEJlemllciBmcm9tIFwiLi4vdXRpbC9DUEJlemllclwiO1xuXG5pbXBvcnQgQ1BCcnVzaEluZm8gZnJvbSBcIi4uL2VuZ2luZS9DUEJydXNoSW5mb1wiO1xuXG5pbXBvcnQge2NyZWF0ZUNoZWNrZXJib2FyZFBhdHRlcm59IGZyb20gXCIuL0NQR1VJVXRpbHNcIjtcbmltcG9ydCBDUFNjcm9sbGJhciBmcm9tIFwiLi9DUFNjcm9sbGJhclwiO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBDUENhbnZhcyhjb250cm9sbGVyKSB7XG4gICAgY29uc3RcbiAgICAgICAgQlVUVE9OX1BSSU1BUlkgPSAwLFxuICAgICAgICBCVVRUT05fV0hFRUwgPSAxLFxuICAgICAgICBCVVRUT05fU0VDT05EQVJZID0gMixcblxuICAgICAgICBNSU5fWk9PTSA9IDAuMTAsXG4gICAgICAgIE1BWF9aT09NID0gMTYuMDtcblxuICAgIHZhclxuICAgICAgICB0aGF0ID0gdGhpcyxcbiAgICBcbiAgICAgICAgY2FudmFzQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSxcbiAgICAgICAgY2FudmFzQ29udGFpbmVyVG9wID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSxcbiAgICAgICAgY2FudmFzQ29udGFpbmVyQm90dG9tID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSxcbiAgICAgICAgXG4gICAgICAgIC8vIE91ciBjYW52YXMgdGhhdCBmaWxscyB0aGUgZW50aXJlIHNjcmVlblxuICAgICAgICBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpLFxuICAgICAgICBjYW52YXNDb250ZXh0ID0gY2FudmFzLmdldENvbnRleHQoXCIyZFwiKSxcbiAgICAgICAgXG4gICAgICAgIC8vIE91ciBjYWNoZSBvZiB0aGUgYXJ0d29yaydzIGZ1c2lvbiB0byBiZSBkcmF3biBvbnRvIG91ciBtYWluIGNhbnZhcyB1c2luZyBvdXIgY3VycmVudCB0cmFuc2Zvcm1cbiAgICAgICAgYXJ0d29ya0NhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIiksXG4gICAgICAgIGFydHdvcmtDYW52YXNDb250ZXh0ID0gYXJ0d29ya0NhbnZhcy5nZXRDb250ZXh0KFwiMmRcIiksXG4gICAgICAgIFxuICAgICAgICBjaGVja2VyYm9hcmRQYXR0ZXJuID0gY3JlYXRlQ2hlY2tlcmJvYXJkUGF0dGVybihjYW52YXNDb250ZXh0KSxcbiAgICAgICAgXG4gICAgICAgIGFydHdvcmsgPSBjb250cm9sbGVyLmdldEFydHdvcmsoKSxcblxuICAgICAgICAvLyBDYW52YXMgdHJhbnNmb3JtYXRpb25zXG4gICAgICAgIHpvb20gPSAxLFxuICAgICAgICBvZmZzZXRYID0gMCwgb2Zmc2V0WSA9IDAsXG4gICAgICAgIGNhbnZhc1JvdGF0aW9uID0gMC4wLFxuICAgICAgICB0cmFuc2Zvcm0gPSBuZXcgQ1BUcmFuc2Zvcm0oKSxcbiAgICAgICAgaW50ZXJwb2xhdGlvbiA9IGZhbHNlLFxuXG4gICAgICAgIC8vIEdyaWQgb3B0aW9uc1xuICAgICAgICBzaG93R3JpZCA9IGZhbHNlLFxuICAgICAgICBncmlkU2l6ZSA9IDMyLFxuICAgICAgICBcbiAgICAgICAgbW91c2VYID0gMCwgbW91c2VZID0gMCxcbiAgICAgICAgXG4gICAgICAgIGJydXNoUHJldmlldyA9IGZhbHNlLFxuICAgICAgICBcbiAgICAgICAgLyogVGhlIGxhc3QgcmVjdGFuZ2xlIHdlIGRpcnRpZWQgd2l0aCBhIGJydXNoIHByZXZpZXcgY2lyY2xlLCBvciBudWxsIGlmIG9uZSBoYXNuJ3QgYmVlbiBkcmF3biB5ZXQgKi9cbiAgICAgICAgb2xkUHJldmlld1JlY3QgPSBudWxsLFxuICAgICAgICBcbiAgICAgICAgZGVmYXVsdEN1cnNvciA9IFwiZGVmYXVsdFwiLCBtb3ZlQ3Vyc29yID0gXCJncmFiXCIsIG1vdmluZ0N1cnNvciA9IFwiZ3JhYmJpbmdcIiwgY3Jvc3NDdXJzb3IgPSBcImNyb3NzaGFpclwiLFxuICAgICAgICBtb3VzZUluID0gZmFsc2UsIG1vdXNlRG93biA9IGZhbHNlLCB3YWNvbVBlbkRvd24gPSBmYWxzZSxcbiAgICAgICAgXG4gICAgICAgIGRvbnRTdGVhbEZvY3VzID0gZmFsc2UsXG4gICAgICAgIFxuICAgICAgICAvKiBUaGUgYXJlYSBvZiB0aGUgZG9jdW1lbnQgdGhhdCBzaG91bGQgaGF2ZSBpdHMgbGF5ZXJzIGZ1c2VkIGFuZCByZXBhaW50ZWQgdG8gdGhlIHNjcmVlblxuICAgICAgICAgKiAoaS5lLiBhbiBhcmVhIG1vZGlmaWVkIGJ5IGRyYXdpbmcgdG9vbHMpLiBcbiAgICAgICAgICogXG4gICAgICAgICAqIEluaXRpYWxseSBzZXQgdG8gdGhlIHNpemUgb2YgdGhlIGFydHdvcmsgc28gd2UgY2FuIHJlcGFpbnQgdGhlIHdob2xlIHRoaW5nLlxuICAgICAgICAgKi9cbiAgICAgICAgYXJ0d29ya1VwZGF0ZVJlZ2lvbiA9IG5ldyBDUFJlY3QoMCwgMCwgYXJ0d29yay53aWR0aCwgYXJ0d29yay5oZWlnaHQpLFxuICAgICAgICBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBhcmVhIG9mIHRoZSBjYW52YXMgdGhhdCBzaG91bGQgYmUgcmVwYWludGVkIHRvIHRoZSBzY3JlZW4gZHVyaW5nIHRoZSBuZXh0IHJlcGFpbnQgaW50ZXJuYWwgKGluIGNhbnZhc1xuICAgICAgICAgKiBjb29yZGluYXRlcykuXG4gICAgICAgICAqL1xuICAgICAgICByZXBhaW50UmVnaW9uID0gbmV3IENQUmVjdCgwLCAwLCAwLCAwKSxcbiAgICAgICAgc2NoZWR1bGVkUmVwYWludCA9IGZhbHNlLFxuICAgICAgICBcbiAgICAgICAgLy9cbiAgICAgICAgLy8gTW9kZXMgc3lzdGVtOiBtb2RlcyBjb250cm9sIHRoZSB3YXkgdGhlIEdVSSBpcyByZWFjdGluZyB0byB0aGUgdXNlciBpbnB1dFxuICAgICAgICAvLyBBbGwgdGhlIHRvb2xzIGFyZSBpbXBsZW1lbnRlZCB0aHJvdWdoIG1vZGVzXG4gICAgICAgIC8vXG4gICAgICAgIFxuICAgICAgICBkZWZhdWx0TW9kZSxcbiAgICAgICAgY29sb3JQaWNrZXJNb2RlLFxuICAgICAgICBtb3ZlQ2FudmFzTW9kZSxcbiAgICAgICAgcm90YXRlQ2FudmFzTW9kZSxcbiAgICAgICAgZmxvb2RGaWxsTW9kZSxcbiAgICAgICAgZ3JhZGllbnRGaWxsTW9kZSxcbiAgICAgICAgcmVjdFNlbGVjdGlvbk1vZGUsXG4gICAgICAgIG1vdmVUb29sTW9kZSxcblxuICAgICAgICAvLyB0aGlzIG11c3QgY29ycmVzcG9uZCB0byB0aGUgc3Ryb2tlIG1vZGVzIGRlZmluZWQgaW4gQ1BUb29sSW5mb1xuICAgICAgICBkcmF3aW5nTW9kZXMgPSBbXSxcblxuICAgICAgICBjdXJEcmF3TW9kZSwgY3VyU2VsZWN0ZWRNb2RlLCBhY3RpdmVNb2RlLFxuICAgICAgICBcbiAgICAgICAgaG9yelNjcm9sbCA9IG5ldyBDUFNjcm9sbGJhcihmYWxzZSksIFxuICAgICAgICB2ZXJ0U2Nyb2xsID0gbmV3IENQU2Nyb2xsYmFyKHRydWUpLFxuICAgICAgICBcbiAgICAgICAgdGFibGV0ID0gQ1BXYWNvbVRhYmxldC5nZXRSZWYoKTtcblxuICAgIE1hdGguc2lnbiA9IE1hdGguc2lnbiB8fCBmdW5jdGlvbih4KSB7XG4gICAgICAgIHggPSAreDsgLy8gY29udmVydCB0byBhIG51bWJlclxuICAgICAgICBpZiAoeCA9PT0gMCB8fCBpc05hTih4KSkge1xuICAgICAgICAgICAgcmV0dXJuIHg7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHggPiAwID8gMSA6IC0xO1xuICAgIH07XG5cbiAgICAvLyBQYXJlbnQgY2xhc3Mgd2l0aCBlbXB0eSBldmVudCBoYW5kbGVycyBmb3IgdGhvc2UgZHJhd2luZyBtb2RlcyB0aGF0IGRvbid0IG5lZWQgZXZlcnkgZXZlbnRcbiAgICBmdW5jdGlvbiBDUE1vZGUoKSB7XG4gICAgfVxuICAgIFxuICAgIENQTW9kZS5wcm90b3R5cGUua2V5RG93biA9IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgaWYgKGUua2V5Q29kZSA9PSAzMiAvKiBTcGFjZSAqLykge1xuICAgICAgICAgICAgLy8gU3RvcCB0aGUgcGFnZSBmcm9tIHNjcm9sbGluZyBpbiBtb2RlcyB0aGF0IGRvbid0IGNhcmUgYWJvdXQgc3BhY2VcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgXG4gICAgQ1BNb2RlLnByb3RvdHlwZS5tb3VzZU1vdmVkID0gQ1BNb2RlLnByb3RvdHlwZS5wYWludCA9IENQTW9kZS5wcm90b3R5cGUubW91c2VQcmVzc2VkIFxuICAgICAgICA9IENQTW9kZS5wcm90b3R5cGUubW91c2VEcmFnZ2VkID0gQ1BNb2RlLnByb3RvdHlwZS5tb3VzZVJlbGVhc2VkIFxuICAgICAgICA9IENQTW9kZS5wcm90b3R5cGUua2V5VXAgPSBmdW5jdGlvbigpIHt9O1xuICAgIFxuICAgIC8vXG4gICAgLy8gRGVmYXVsdCBVSSBNb2RlIHdoZW4gbm90IGRvaW5nIGFueXRoaW5nOiB1c2VkIHRvIHN0YXJ0IHRoZSBvdGhlciBtb2Rlc1xuICAgIC8vXG5cbiAgICBmdW5jdGlvbiBDUERlZmF1bHRNb2RlKCkge1xuICAgIH1cbiAgICBcbiAgICBDUERlZmF1bHRNb2RlLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoQ1BNb2RlLnByb3RvdHlwZSk7XG4gICAgQ1BEZWZhdWx0TW9kZS5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBDUERlZmF1bHRNb2RlO1xuICAgIFxuICAgIENQRGVmYXVsdE1vZGUucHJvdG90eXBlLm1vdXNlUHJlc3NlZCA9IGZ1bmN0aW9uKGUsIHByZXNzdXJlKSB7XG4gICAgICAgIHZhclxuICAgICAgICAgICAgc3BhY2VQcmVzc2VkID0ga2V5LmlzUHJlc3NlZChcInNwYWNlXCIpO1xuICAgICAgICBcbiAgICAgICAgLy8gRklYTUU6IHJlcGxhY2UgdGhlIG1vdmVUb29sTW9kZSBoYWNrIGJ5IGEgbmV3IGFuZCBpbXByb3ZlZCBzeXN0ZW1cbiAgICAgICAgaWYgKCFzcGFjZVByZXNzZWQgJiYgZS5idXR0b24gPT0gQlVUVE9OX1BSSU1BUllcbiAgICAgICAgICAgICAgICAmJiAoIWUuYWx0S2V5IHx8IGN1clNlbGVjdGVkTW9kZSA9PSBtb3ZlVG9vbE1vZGUpKSB7XG5cbiAgICAgICAgICAgIGlmICghYXJ0d29yay5nZXRBY3RpdmVMYXllcigpLnZpc2libGUgJiYgY3VyU2VsZWN0ZWRNb2RlICE9IHJvdGF0ZUNhbnZhc01vZGVcbiAgICAgICAgICAgICAgICAgICAgJiYgY3VyU2VsZWN0ZWRNb2RlICE9IHJlY3RTZWxlY3Rpb25Nb2RlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuOyAvLyBkb24ndCBkcmF3IG9uIGEgaGlkZGVuIGxheWVyXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8qIFN3aXRjaCB0byB0aGUgbmV3IG1vZGUgYmVmb3JlIHRyeWluZyB0byByZXBhaW50IHRoZSBicnVzaCBwcmV2aWV3ICh0aGUgbmV3IG1vZGVcbiAgICAgICAgICAgICAqIG1pZ2h0IHdhbnQgdG8gZXJhc2UgaXQhXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGFjdGl2ZU1vZGUgPSBjdXJTZWxlY3RlZE1vZGU7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHJlcGFpbnRCcnVzaFByZXZpZXcoKTtcblxuICAgICAgICAgICAgYWN0aXZlTW9kZS5tb3VzZVByZXNzZWQoZSwgcHJlc3N1cmUpO1xuICAgICAgICB9IGVsc2UgaWYgKCFzcGFjZVByZXNzZWRcbiAgICAgICAgICAgICAgICAmJiAoZS5idXR0b24gPT0gQlVUVE9OX1NFQ09OREFSWSB8fCBlLmJ1dHRvbiA9PSBCVVRUT05fUFJJTUFSWSAmJiBlLmFsdEtleSkpIHtcbiAgICAgICAgICAgIHJlcGFpbnRCcnVzaFByZXZpZXcoKTtcblxuICAgICAgICAgICAgYWN0aXZlTW9kZSA9IGNvbG9yUGlja2VyTW9kZTtcbiAgICAgICAgICAgIGFjdGl2ZU1vZGUubW91c2VQcmVzc2VkKGUsIHByZXNzdXJlKTtcbiAgICAgICAgfSBlbHNlIGlmICgoZS5idXR0b24gPT0gQlVUVE9OX1dIRUVMIHx8IHNwYWNlUHJlc3NlZCkgJiYgIWUuYWx0S2V5KSB7XG4gICAgICAgICAgICByZXBhaW50QnJ1c2hQcmV2aWV3KCk7XG5cbiAgICAgICAgICAgIGFjdGl2ZU1vZGUgPSBtb3ZlQ2FudmFzTW9kZTtcbiAgICAgICAgICAgIGFjdGl2ZU1vZGUubW91c2VQcmVzc2VkKGUsIHByZXNzdXJlKTtcbiAgICAgICAgfSBlbHNlIGlmICgoZS5idXR0b24gPT0gQlVUVE9OX1dIRUVMIHx8IHNwYWNlUHJlc3NlZCkgJiYgZS5hbHRLZXkpIHtcbiAgICAgICAgICAgIHJlcGFpbnRCcnVzaFByZXZpZXcoKTtcblxuICAgICAgICAgICAgYWN0aXZlTW9kZSA9IHJvdGF0ZUNhbnZhc01vZGU7XG4gICAgICAgICAgICBhY3RpdmVNb2RlLm1vdXNlUHJlc3NlZChlLCBwcmVzc3VyZSk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgQ1BEZWZhdWx0TW9kZS5wcm90b3R5cGUubW91c2VNb3ZlZCA9IGZ1bmN0aW9uKGUsIHByZXNzdXJlKSB7XG4gICAgICAgIHZhclxuICAgICAgICAgICAgc3BhY2VQcmVzc2VkID0ga2V5LmlzUHJlc3NlZChcInNwYWNlXCIpO1xuICAgICAgICBcbiAgICAgICAgaWYgKCFzcGFjZVByZXNzZWQgJiYgY3VyU2VsZWN0ZWRNb2RlID09IGN1ckRyYXdNb2RlKSB7XG4gICAgICAgICAgICBicnVzaFByZXZpZXcgPSB0cnVlO1xuXG4gICAgICAgICAgICB2YXIgXG4gICAgICAgICAgICAgICAgLy9wZiA9IGNvb3JkVG9Eb2N1bWVudChtb3VzZUNvb3JkVG9DYW52YXMoe3g6IGUucGFnZVgsIHk6IGUucGFnZVl9KSksXG4gICAgICAgICAgICAgICAgciA9IGdldEJydXNoUHJldmlld092YWwoKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgci5ncm93KDIsIDIpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBJZiBhIGJydXNoIHByZXZpZXcgd2FzIGRyYXduIHByZXZpb3VzbHksIHN0cmV0Y2ggdGhlIHJlcGFpbnQgcmVnaW9uIHRvIHJlbW92ZSB0aGF0IG9sZCBjb3B5XG4gICAgICAgICAgICBpZiAob2xkUHJldmlld1JlY3QgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHIudW5pb24ob2xkUHJldmlld1JlY3QpO1xuICAgICAgICAgICAgICAgIG9sZFByZXZpZXdSZWN0ID0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuLyogICAgICAgICAgICBpZiAoYXJ0d29yay5pc1BvaW50V2l0aGluKHBmLngsIHBmLnkpKSB7XG4gICAgICAgICAgICAgICAgc2V0Q3Vyc29yKGRlZmF1bHRDdXJzb3IpOyAvLyBGSVhNRSBmaW5kIGEgY3Vyc29yIHRoYXQgZXZlcnlvbmUgbGlrZXNcbiAgICAgICAgICAgIH0gZWxzZSB7ICovXG4gICAgICAgICAgICAgICAgc2V0Q3Vyc29yKGRlZmF1bHRDdXJzb3IpO1xuICAgICAgICAgICAgLy99XG5cbiAgICAgICAgICAgIHJlcGFpbnRSZWN0KHIpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBcbiAgICBDUERlZmF1bHRNb2RlLnByb3RvdHlwZS5rZXlEb3duID0gZnVuY3Rpb24oZSkge1xuICAgICAgICBpZiAoZS5rZXlDb2RlID09IDMyIC8qIFNwYWNlICovKSB7XG4gICAgICAgICAgICBpZiAoZS5hbHRLZXkpIHtcbiAgICAgICAgICAgICAgICBhY3RpdmVNb2RlID0gcm90YXRlQ2FudmFzTW9kZTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgYWN0aXZlTW9kZSA9IG1vdmVDYW52YXNNb2RlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYWN0aXZlTW9kZS5rZXlEb3duKGUpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBcbiAgICBDUERlZmF1bHRNb2RlLnByb3RvdHlwZS5wYWludCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAoYnJ1c2hQcmV2aWV3ICYmIGN1clNlbGVjdGVkTW9kZSA9PSBjdXJEcmF3TW9kZSkge1xuICAgICAgICAgICAgYnJ1c2hQcmV2aWV3ID0gZmFsc2U7XG5cbiAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgIHIgPSBnZXRCcnVzaFByZXZpZXdPdmFsKCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNhbnZhc0NvbnRleHQuYmVnaW5QYXRoKCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNhbnZhc0NvbnRleHQuYXJjKFxuICAgICAgICAgICAgICAgIChyLmxlZnQgKyByLnJpZ2h0KSAvIDIsXG4gICAgICAgICAgICAgICAgKHIudG9wICsgci5ib3R0b20pIC8gMixcbiAgICAgICAgICAgICAgICByLmdldFdpZHRoKCkgLyAyLFxuICAgICAgICAgICAgICAgIDAsXG4gICAgICAgICAgICAgICAgTWF0aC5QSSAqIDJcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGNhbnZhc0NvbnRleHQuc3Ryb2tlKCk7XG5cbiAgICAgICAgICAgIHIuZ3JvdygyLCAyKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKG9sZFByZXZpZXdSZWN0ID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBvbGRQcmV2aWV3UmVjdCA9IHI7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIG9sZFByZXZpZXdSZWN0LnVuaW9uKHIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICBcbiAgICBmdW5jdGlvbiBDUEZyZWVoYW5kTW9kZSgpIHtcbiAgICAgICAgdGhpcy5kcmFnTGVmdCA9IGZhbHNlLFxuICAgICAgICB0aGlzLnNtb290aE1vdXNlID0ge3g6MC4wLCB5OjAuMH07XG4gICAgfVxuICAgIFxuICAgIENQRnJlZWhhbmRNb2RlLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoQ1BNb2RlLnByb3RvdHlwZSk7XG4gICAgQ1BGcmVlaGFuZE1vZGUucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gQ1BGcmVlaGFuZE1vZGU7XG4gICAgXG4gICAgQ1BGcmVlaGFuZE1vZGUucHJvdG90eXBlLm1vdXNlUHJlc3NlZCA9IGZ1bmN0aW9uKGUsIHByZXNzdXJlKSB7XG4gICAgICAgIGlmICghdGhpcy5kcmFnTGVmdCAmJiBlLmJ1dHRvbiA9PSBCVVRUT05fUFJJTUFSWSkge1xuICAgICAgICAgICAgdmFyIFxuICAgICAgICAgICAgICAgIHBmID0gY29vcmRUb0RvY3VtZW50KHt4OiBtb3VzZVgsIHk6bW91c2VZfSk7XG5cbiAgICAgICAgICAgIHRoaXMuZHJhZ0xlZnQgPSB0cnVlO1xuICAgICAgICAgICAgYXJ0d29yay5iZWdpblN0cm9rZShwZi54LCBwZi55LCBwcmVzc3VyZSk7XG5cbiAgICAgICAgICAgIHRoaXMuc21vb3RoTW91c2UgPSBwZjtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBDUEZyZWVoYW5kTW9kZS5wcm90b3R5cGUubW91c2VEcmFnZ2VkID0gZnVuY3Rpb24oZSwgcHJlc3N1cmUpIHtcbiAgICAgICAgdmFyIFxuICAgICAgICAgICAgcGYgPSBjb29yZFRvRG9jdW1lbnQoe3g6IG1vdXNlWCwgeTogbW91c2VZfSksXG4gICAgICAgICAgICBzbW9vdGhpbmcgPSBNYXRoLm1pbigwLjk5OSwgTWF0aC5wb3coY29udHJvbGxlci5nZXRCcnVzaEluZm8oKS5zbW9vdGhpbmcsIDAuMykpO1xuXG4gICAgICAgIHRoaXMuc21vb3RoTW91c2UueCA9ICgxLjAgLSBzbW9vdGhpbmcpICogcGYueCArIHNtb290aGluZyAqIHRoaXMuc21vb3RoTW91c2UueDtcbiAgICAgICAgdGhpcy5zbW9vdGhNb3VzZS55ID0gKDEuMCAtIHNtb290aGluZykgKiBwZi55ICsgc21vb3RoaW5nICogdGhpcy5zbW9vdGhNb3VzZS55O1xuXG4gICAgICAgIGlmICh0aGlzLmRyYWdMZWZ0KSB7XG4gICAgICAgICAgICBhcnR3b3JrLmNvbnRpbnVlU3Ryb2tlKHRoaXMuc21vb3RoTW91c2UueCwgdGhpcy5zbW9vdGhNb3VzZS55LCBwcmVzc3VyZSk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgQ1BGcmVlaGFuZE1vZGUucHJvdG90eXBlLm1vdXNlUmVsZWFzZWQgPSBmdW5jdGlvbihlKSB7XG4gICAgICAgIGlmICh0aGlzLmRyYWdMZWZ0ICYmIGUuYnV0dG9uID09IEJVVFRPTl9QUklNQVJZKSB7XG4gICAgICAgICAgICB0aGlzLmRyYWdMZWZ0ID0gZmFsc2U7XG4gICAgICAgICAgICBhcnR3b3JrLmVuZFN0cm9rZSgpO1xuXG4gICAgICAgICAgICBhY3RpdmVNb2RlID0gZGVmYXVsdE1vZGU7IC8vIHlpZWxkIGNvbnRyb2wgdG8gdGhlIGRlZmF1bHQgbW9kZVxuICAgICAgICB9XG4gICAgfTtcbiAgICAgICAgXG4gICAgQ1BGcmVlaGFuZE1vZGUucHJvdG90eXBlLm1vdXNlTW92ZWQgPSBDUEZyZWVoYW5kTW9kZS5wcm90b3R5cGUucGFpbnQgPSBmdW5jdGlvbihlKSB7XG4gICAgfTtcbiAgICBcbiAgICBmdW5jdGlvbiBDUExpbmVNb2RlKCkge1xuICAgICAgICB2YXJcbiAgICAgICAgICAgIGRyYWdMaW5lID0gZmFsc2UsXG4gICAgICAgICAgICBkcmFnTGluZUZyb20sIGRyYWdMaW5lVG8sXG4gICAgICAgICAgICBMSU5FX1BSRVZJRVdfV0lEVEggPSAxO1xuXG4gICAgICAgIHRoaXMubW91c2VQcmVzc2VkID0gZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgaWYgKCFkcmFnTGluZSAmJiBlLmJ1dHRvbiA9PSBCVVRUT05fUFJJTUFSWSkge1xuICAgICAgICAgICAgICAgIGRyYWdMaW5lID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBkcmFnTGluZUZyb20gPSBkcmFnTGluZVRvID0ge3g6IG1vdXNlWCArIDAuNSwgeTogbW91c2VZICsgMC41fTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLm1vdXNlRHJhZ2dlZCA9IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgIC8vIFRoZSBvbGQgbGluZSBwb3NpdGlvbiB0aGF0IHdlJ2xsIGludmFsaWRhdGUgZm9yIHJlZHJhd1xuICAgICAgICAgICAgICAgIGludmFsaWRhdGVSZWN0ID0gbmV3IENQUmVjdChcbiAgICAgICAgICAgICAgICAgICAgTWF0aC5taW4oZHJhZ0xpbmVGcm9tLngsIGRyYWdMaW5lVG8ueCkgLSBMSU5FX1BSRVZJRVdfV0lEVEggLSAxLFxuICAgICAgICAgICAgICAgICAgICBNYXRoLm1pbihkcmFnTGluZUZyb20ueSwgZHJhZ0xpbmVUby55KSAtIExJTkVfUFJFVklFV19XSURUSCAtIDEsXG4gICAgICAgICAgICAgICAgICAgIE1hdGgubWF4KGRyYWdMaW5lRnJvbS54LCBkcmFnTGluZVRvLngpICsgTElORV9QUkVWSUVXX1dJRFRIICsgMSArIDEsXG4gICAgICAgICAgICAgICAgICAgIE1hdGgubWF4KGRyYWdMaW5lRnJvbS55LCBkcmFnTGluZVRvLnkpICsgTElORV9QUkVWSUVXX1dJRFRIICsgMSArIDFcbiAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBkcmFnTGluZVRvID0ge3g6IG1vdXNlWCArIDAuNSwgeTogbW91c2VZICsgMC41fTsgLy8gVGFyZ2V0IGNlbnRyZSBvZiBwaXhlbFxuXG4gICAgICAgICAgICBpZiAoZS5zaGlmdEtleSkge1xuICAgICAgICAgICAgICAgIC8vIFNuYXAgdG8gbmVhcmVzdCA0NSBkZWdyZWVzXG4gICAgICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgICAgIHNuYXAgPSBNYXRoLlBJIC8gNCxcbiAgICAgICAgICAgICAgICAgICAgYW5nbGUgPSBNYXRoLnJvdW5kKE1hdGguYXRhbjIoZHJhZ0xpbmVUby55IC0gZHJhZ0xpbmVGcm9tLnksIGRyYWdMaW5lVG8ueCAtIGRyYWdMaW5lRnJvbS54KSAvIHNuYXApO1xuXG4gICAgICAgICAgICAgICAgc3dpdGNoIChhbmdsZSkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGRyYWdMaW5lVG8ueSA9IGRyYWdMaW5lRnJvbS55O1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNjpcbiAgICAgICAgICAgICAgICAgICAgICAgIGRyYWdMaW5lVG8ueCA9IGRyYWdMaW5lRnJvbS54O1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgYW5nbGUgKj0gc25hcDtcblxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVuZ3RoID0gTWF0aC5zcXJ0KChkcmFnTGluZVRvLnkgLSBkcmFnTGluZUZyb20ueSkgKiAoZHJhZ0xpbmVUby55IC0gZHJhZ0xpbmVGcm9tLnkpICsgKGRyYWdMaW5lVG8ueCAtIGRyYWdMaW5lRnJvbS54KSAqIChkcmFnTGluZVRvLnggLSBkcmFnTGluZUZyb20ueCkpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBkcmFnTGluZVRvLnggPSBkcmFnTGluZUZyb20ueCArIGxlbmd0aCAqIE1hdGguY29zKGFuZ2xlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRyYWdMaW5lVG8ueSA9IGRyYWdMaW5lRnJvbS55ICsgbGVuZ3RoICogTWF0aC5zaW4oYW5nbGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gVGhlIG5ldyBsaW5lIHBvc2l0aW9uXG4gICAgICAgICAgICBpbnZhbGlkYXRlUmVjdC51bmlvbihuZXcgQ1BSZWN0KFxuICAgICAgICAgICAgICAgIE1hdGgubWluKGRyYWdMaW5lRnJvbS54LCBkcmFnTGluZVRvLngpIC0gTElORV9QUkVWSUVXX1dJRFRIIC0gMSxcbiAgICAgICAgICAgICAgICBNYXRoLm1pbihkcmFnTGluZUZyb20ueSwgZHJhZ0xpbmVUby55KSAtIExJTkVfUFJFVklFV19XSURUSCAtIDEsXG4gICAgICAgICAgICAgICAgTWF0aC5tYXgoZHJhZ0xpbmVGcm9tLngsIGRyYWdMaW5lVG8ueCkgKyBMSU5FX1BSRVZJRVdfV0lEVEggKyAxICsgMSxcbiAgICAgICAgICAgICAgICBNYXRoLm1heChkcmFnTGluZUZyb20ueSwgZHJhZ0xpbmVUby55KSArIExJTkVfUFJFVklFV19XSURUSCArIDEgKyAxXG4gICAgICAgICAgICApKTtcblxuICAgICAgICAgICAgcmVwYWludFJlY3QoaW52YWxpZGF0ZVJlY3QpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMubW91c2VSZWxlYXNlZCA9IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgIGlmIChkcmFnTGluZSAmJiBlLmJ1dHRvbiA9PSBCVVRUT05fUFJJTUFSWSkge1xuICAgICAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgICAgICBmcm9tID0gY29vcmRUb0RvY3VtZW50KGRyYWdMaW5lRnJvbSksXG4gICAgICAgICAgICAgICAgICAgIHRvID0gY29vcmRUb0RvY3VtZW50KGRyYWdMaW5lVG8pO1xuXG4gICAgICAgICAgICAgICAgZHJhZ0xpbmUgPSBmYWxzZTtcblxuICAgICAgICAgICAgICAgIHRoaXMuZHJhd0xpbmUoZnJvbSwgdG8pO1xuXG4gICAgICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgICAgIGludmFsaWRhdGVSZWN0ID0gbmV3IENQUmVjdChcbiAgICAgICAgICAgICAgICAgICAgICAgIE1hdGgubWluKGRyYWdMaW5lRnJvbS54LCBkcmFnTGluZVRvLngpIC0gTElORV9QUkVWSUVXX1dJRFRIIC0gMSxcbiAgICAgICAgICAgICAgICAgICAgICAgIE1hdGgubWluKGRyYWdMaW5lRnJvbS55LCBkcmFnTGluZVRvLnkpIC0gTElORV9QUkVWSUVXX1dJRFRIIC0gMSxcbiAgICAgICAgICAgICAgICAgICAgICAgIE1hdGgubWF4KGRyYWdMaW5lRnJvbS54LCBkcmFnTGluZVRvLngpICsgTElORV9QUkVWSUVXX1dJRFRIICsgMSArIDEsXG4gICAgICAgICAgICAgICAgICAgICAgICBNYXRoLm1heChkcmFnTGluZUZyb20ueSwgZHJhZ0xpbmVUby55KSArIExJTkVfUFJFVklFV19XSURUSCArIDEgKyAxXG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgcmVwYWludFJlY3QoaW52YWxpZGF0ZVJlY3QpO1xuXG4gICAgICAgICAgICAgICAgYWN0aXZlTW9kZSA9IGRlZmF1bHRNb2RlOyAvLyB5aWVsZCBjb250cm9sIHRvIHRoZSBkZWZhdWx0IG1vZGVcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLnBhaW50ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpZiAoZHJhZ0xpbmUpIHtcbiAgICAgICAgICAgICAgICBjYW52YXNDb250ZXh0LmxpbmVXaWR0aCA9IExJTkVfUFJFVklFV19XSURUSDtcbiAgICAgICAgICAgICAgICBjYW52YXNDb250ZXh0LmJlZ2luUGF0aCgpO1xuICAgICAgICAgICAgICAgIGNhbnZhc0NvbnRleHQubW92ZVRvKGRyYWdMaW5lRnJvbS54LCBkcmFnTGluZUZyb20ueSk7XG4gICAgICAgICAgICAgICAgY2FudmFzQ29udGV4dC5saW5lVG8oZHJhZ0xpbmVUby54LCBkcmFnTGluZVRvLnkpO1xuICAgICAgICAgICAgICAgIGNhbnZhc0NvbnRleHQuc3Ryb2tlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxuICAgIFxuICAgIENQTGluZU1vZGUucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShDUE1vZGUucHJvdG90eXBlKTtcbiAgICBDUExpbmVNb2RlLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IENQTGluZU1vZGU7XG5cbiAgICBDUExpbmVNb2RlLnByb3RvdHlwZS5kcmF3TGluZSA9IGZ1bmN0aW9uKGZyb20sIHRvKSB7XG4gICAgICAgIGFydHdvcmsuYmVnaW5TdHJva2UoZnJvbS54LCBmcm9tLnksIDEpO1xuICAgICAgICBhcnR3b3JrLmNvbnRpbnVlU3Ryb2tlKHRvLngsIHRvLnksIDEpO1xuICAgICAgICBhcnR3b3JrLmVuZFN0cm9rZSgpO1xuICAgIH07XG5cbiAgICBmdW5jdGlvbiBDUEJlemllck1vZGUoKSB7XG4gICAgICAgIGNvbnN0XG4gICAgICAgICAgICBCRVpJRVJfUE9JTlRTID0gNTAwLFxuICAgICAgICAgICAgQkVaSUVSX1BPSU5UU19QUkVWSUVXID0gMTAwO1xuXG4gICAgICAgIHZhclxuICAgICAgICAgICAgZHJhZ0JlemllciA9IGZhbHNlLFxuICAgICAgICAgICAgZHJhZ0Jlemllck1vZGUgPSAwLCAvLyAwIEluaXRpYWwgZHJhZywgMSBmaXJzdCBjb250cm9sIHBvaW50LCAyIHNlY29uZCBwb2ludFxuICAgICAgICAgICAgZHJhZ0JlemllclAwLCBkcmFnQmV6aWVyUDEsIGRyYWdCZXppZXJQMiwgZHJhZ0JlemllclAzO1xuICAgICAgICAgICAgXG5cbiAgICAgICAgdGhpcy5tb3VzZVByZXNzZWQgPSBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICB2YXIgXG4gICAgICAgICAgICAgICAgc3BhY2VQcmVzc2VkID0ga2V5LmlzUHJlc3NlZChcInNwYWNlXCIpLFxuICAgICAgICAgICAgICAgIHAgPSBjb29yZFRvRG9jdW1lbnQobW91c2VDb29yZFRvQ2FudmFzKHt4OiBlLnBhZ2VYLCB5OiBlLnBhZ2VZfSkpO1xuXG4gICAgICAgICAgICBpZiAoIWRyYWdCZXppZXIgJiYgIXNwYWNlUHJlc3NlZCAmJiBlLmJ1dHRvbiA9PSBCVVRUT05fUFJJTUFSWSkge1xuICAgICAgICAgICAgICAgIGRyYWdCZXppZXIgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGRyYWdCZXppZXJNb2RlID0gMDtcbiAgICAgICAgICAgICAgICBkcmFnQmV6aWVyUDAgPSBkcmFnQmV6aWVyUDEgPSBkcmFnQmV6aWVyUDIgPSBkcmFnQmV6aWVyUDMgPSBwO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMubW91c2VEcmFnZ2VkID0gZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgcCA9IGNvb3JkVG9Eb2N1bWVudChtb3VzZUNvb3JkVG9DYW52YXMoe3g6IGUucGFnZVgsIHk6IGUucGFnZVl9KSk7XG5cbiAgICAgICAgICAgIGlmIChkcmFnQmV6aWVyICYmIGRyYWdCZXppZXJNb2RlID09IDApIHtcbiAgICAgICAgICAgICAgICBkcmFnQmV6aWVyUDIgPSBkcmFnQmV6aWVyUDMgPSBwO1xuICAgICAgICAgICAgICAgIHRoYXQucmVwYWludEFsbCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMubW91c2VSZWxlYXNlZCA9IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgIGlmIChkcmFnQmV6aWVyICYmIGUuYnV0dG9uID09IEJVVFRPTl9QUklNQVJZKSB7XG4gICAgICAgICAgICAgICAgaWYgKGRyYWdCZXppZXJNb2RlID09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgZHJhZ0Jlemllck1vZGUgPSAxO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZHJhZ0Jlemllck1vZGUgPT0gMSkge1xuICAgICAgICAgICAgICAgICAgICBkcmFnQmV6aWVyTW9kZSA9IDI7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChkcmFnQmV6aWVyTW9kZSA9PSAyKSB7XG4gICAgICAgICAgICAgICAgICAgIGRyYWdCZXppZXIgPSBmYWxzZTtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgXG4gICAgICAgICAgICAgICAgICAgICAgICBwMCA9IGRyYWdCZXppZXJQMCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHAxID0gZHJhZ0JlemllclAxLFxuICAgICAgICAgICAgICAgICAgICAgICAgcDIgPSBkcmFnQmV6aWVyUDIsXG4gICAgICAgICAgICAgICAgICAgICAgICBwMyA9IGRyYWdCZXppZXJQMyxcblxuICAgICAgICAgICAgICAgICAgICAgICAgYmV6aWVyID0gbmV3IENQQmV6aWVyKCk7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBiZXppZXIueDAgPSBwMC54O1xuICAgICAgICAgICAgICAgICAgICBiZXppZXIueTAgPSBwMC55O1xuICAgICAgICAgICAgICAgICAgICBiZXppZXIueDEgPSBwMS54O1xuICAgICAgICAgICAgICAgICAgICBiZXppZXIueTEgPSBwMS55O1xuICAgICAgICAgICAgICAgICAgICBiZXppZXIueDIgPSBwMi54O1xuICAgICAgICAgICAgICAgICAgICBiZXppZXIueTIgPSBwMi55O1xuICAgICAgICAgICAgICAgICAgICBiZXppZXIueDMgPSBwMy54O1xuICAgICAgICAgICAgICAgICAgICBiZXppZXIueTMgPSBwMy55O1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciBcbiAgICAgICAgICAgICAgICAgICAgICAgIHggPSBuZXcgQXJyYXkoQkVaSUVSX1BPSU5UUyksXG4gICAgICAgICAgICAgICAgICAgICAgICB5ID0gbmV3IEFycmF5KEJFWklFUl9QT0lOVFMpO1xuXG4gICAgICAgICAgICAgICAgICAgIGJlemllci5jb21wdXRlKHgsIHksIEJFWklFUl9QT0lOVFMpO1xuXG4gICAgICAgICAgICAgICAgICAgIGFydHdvcmsuYmVnaW5TdHJva2UoeFswXSwgeVswXSwgMSk7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgQkVaSUVSX1BPSU5UUzsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhcnR3b3JrLmNvbnRpbnVlU3Ryb2tlKHhbaV0sIHlbaV0sIDEpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGFydHdvcmsuZW5kU3Ryb2tlKCk7XG4gICAgICAgICAgICAgICAgICAgIHRoYXQucmVwYWludEFsbCgpO1xuXG4gICAgICAgICAgICAgICAgICAgIGFjdGl2ZU1vZGUgPSBkZWZhdWx0TW9kZTsgLy8geWllbGQgY29udHJvbCB0byB0aGUgZGVmYXVsdCBtb2RlXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMubW91c2VNb3ZlZCA9IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgIHAgPSBjb29yZFRvRG9jdW1lbnQobW91c2VDb29yZFRvQ2FudmFzKHt4OiBlLnBhZ2VYLCB5OiBlLnBhZ2VZfSkpO1xuXG4gICAgICAgICAgICBpZiAoZHJhZ0Jlemllcikge1xuICAgICAgICAgICAgICAgIGlmIChkcmFnQmV6aWVyTW9kZSA9PSAxKSB7XG4gICAgICAgICAgICAgICAgICAgIGRyYWdCZXppZXJQMSA9IHA7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChkcmFnQmV6aWVyTW9kZSA9PSAyKSB7XG4gICAgICAgICAgICAgICAgICAgIGRyYWdCZXppZXJQMiA9IHA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoYXQucmVwYWludEFsbCgpOyAvLyBGSVhNRTogcmVwYWludCBvbmx5IHRoZSBiZXppZXIgcmVnaW9uXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5wYWludCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaWYgKGRyYWdCZXppZXIpIHtcbiAgICAgICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICAgICAgYmV6aWVyID0gbmV3IENQQmV6aWVyKCksXG5cbiAgICAgICAgICAgICAgICAgICAgcDAgPSBjb29yZFRvRGlzcGxheShkcmFnQmV6aWVyUDApLFxuICAgICAgICAgICAgICAgICAgICBwMSA9IGNvb3JkVG9EaXNwbGF5KGRyYWdCZXppZXJQMSksXG4gICAgICAgICAgICAgICAgICAgIHAyID0gY29vcmRUb0Rpc3BsYXkoZHJhZ0JlemllclAyKSxcbiAgICAgICAgICAgICAgICAgICAgcDMgPSBjb29yZFRvRGlzcGxheShkcmFnQmV6aWVyUDMpO1xuXG4gICAgICAgICAgICAgICAgYmV6aWVyLngwID0gcDAueDtcbiAgICAgICAgICAgICAgICBiZXppZXIueTAgPSBwMC55O1xuICAgICAgICAgICAgICAgIGJlemllci54MSA9IHAxLng7XG4gICAgICAgICAgICAgICAgYmV6aWVyLnkxID0gcDEueTtcbiAgICAgICAgICAgICAgICBiZXppZXIueDIgPSBwMi54O1xuICAgICAgICAgICAgICAgIGJlemllci55MiA9IHAyLnk7XG4gICAgICAgICAgICAgICAgYmV6aWVyLngzID0gcDMueDtcbiAgICAgICAgICAgICAgICBiZXppZXIueTMgPSBwMy55O1xuXG4gICAgICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgICAgIHggPSBuZXcgQXJyYXkoQkVaSUVSX1BPSU5UU19QUkVWSUVXKSxcbiAgICAgICAgICAgICAgICAgICAgeSA9IG5ldyBBcnJheShCRVpJRVJfUE9JTlRTX1BSRVZJRVcpO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBiZXppZXIuY29tcHV0ZSh4LCB5LCBCRVpJRVJfUE9JTlRTX1BSRVZJRVcpO1xuXG4gICAgICAgICAgICAgICAgY2FudmFzQ29udGV4dC5iZWdpblBhdGgoKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBjYW52YXNDb250ZXh0Lm1vdmVUbyh4WzBdLCB5WzBdKTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IEJFWklFUl9QT0lOVFNfUFJFVklFVzsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhbnZhc0NvbnRleHQubGluZVRvKHhbaV0sIHlbaV0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBjYW52YXNDb250ZXh0Lm1vdmVUbyh+fnAwLngsIH5+cDAueSk7XG4gICAgICAgICAgICAgICAgY2FudmFzQ29udGV4dC5saW5lVG8ofn5wMS54LCB+fnAxLnkpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGNhbnZhc0NvbnRleHQubW92ZVRvKH5+cDIueCwgfn5wMi55KTtcbiAgICAgICAgICAgICAgICBjYW52YXNDb250ZXh0LmxpbmVUbyh+fnAzLngsIH5+cDMueSk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgY2FudmFzQ29udGV4dC5zdHJva2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9XG4gICAgXG4gICAgQ1BCZXppZXJNb2RlLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoQ1BNb2RlLnByb3RvdHlwZSk7XG4gICAgQ1BCZXppZXJNb2RlLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IENQQmV6aWVyTW9kZTtcblxuICAgIGZ1bmN0aW9uIENQQ29sb3JQaWNrZXJNb2RlKCkge1xuICAgICAgICB2YXIgXG4gICAgICAgICAgICBtb3VzZUJ1dHRvbjtcblxuICAgICAgICB0aGlzLm1vdXNlUHJlc3NlZCA9IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgIG1vdXNlQnV0dG9uID0gZS5idXR0b247XG5cbiAgICAgICAgICAgIHNldEN1cnNvcihjcm9zc0N1cnNvcik7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoaXMubW91c2VEcmFnZ2VkKGUpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMubW91c2VEcmFnZ2VkID0gZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgdmFyIHBmID0gY29vcmRUb0RvY3VtZW50KG1vdXNlQ29vcmRUb0NhbnZhcyh7eDogZS5wYWdlWCwgeTogZS5wYWdlWX0pKTtcblxuICAgICAgICAgICAgaWYgKGFydHdvcmsuaXNQb2ludFdpdGhpbihwZi54LCBwZi55KSkge1xuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIuc2V0Q3VyQ29sb3JSZ2IoYXJ0d29yay5jb2xvclBpY2tlcihwZi54LCBwZi55KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5tb3VzZVJlbGVhc2VkID0gZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgaWYgKGUuYnV0dG9uID09IG1vdXNlQnV0dG9uKSB7XG4gICAgICAgICAgICAgICAgc2V0Q3Vyc29yKGRlZmF1bHRDdXJzb3IpO1xuICAgICAgICAgICAgICAgIGFjdGl2ZU1vZGUgPSBkZWZhdWx0TW9kZTsgLy8geWllbGQgY29udHJvbCB0byB0aGUgZGVmYXVsdCBtb2RlXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxuICAgIFxuICAgIENQQ29sb3JQaWNrZXJNb2RlLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoQ1BNb2RlLnByb3RvdHlwZSk7XG4gICAgQ1BDb2xvclBpY2tlck1vZGUucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gQ1BDb2xvclBpY2tlck1vZGU7XG5cbiAgICBmdW5jdGlvbiBDUE1vdmVDYW52YXNNb2RlKCkge1xuICAgICAgICB2YXJcbiAgICAgICAgICAgIGRyYWdNaWRkbGUgPSBmYWxzZSxcbiAgICAgICAgICAgIGRyYWdNb3ZlWCwgZHJhZ01vdmVZLFxuICAgICAgICAgICAgZHJhZ01vdmVPZmZzZXQsXG4gICAgICAgICAgICBkcmFnTW92ZUJ1dHRvbjtcblxuICAgICAgICB0aGlzLmtleURvd24gPSBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICBpZiAoZS5rZXlDb2RlID09IDMyIC8qIFNwYWNlICovKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFkcmFnTWlkZGxlKSB7XG4gICAgICAgICAgICAgICAgICAgIHNldEN1cnNvcihtb3ZlQ3Vyc29yKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMua2V5VXAgPSBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICBpZiAoIWRyYWdNaWRkbGUgJiYgZS5rZXlDb2RlID09IDMyIC8qIFNwYWNlICovKSB7XG4gICAgICAgICAgICAgICAgc2V0Q3Vyc29yKGRlZmF1bHRDdXJzb3IpO1xuICAgICAgICAgICAgICAgIGFjdGl2ZU1vZGUgPSBkZWZhdWx0TW9kZTsgLy8geWllbGQgY29udHJvbCB0byB0aGUgZGVmYXVsdCBtb2RlXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5tb3VzZVByZXNzZWQgPSBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICBwID0ge3g6IGUucGFnZVgsIHk6IGUucGFnZVl9LFxuICAgICAgICAgICAgICAgIHNwYWNlUHJlc3NlZCA9IGtleS5pc1ByZXNzZWQoXCJzcGFjZVwiKTtcblxuICAgICAgICAgICAgaWYgKCFkcmFnTWlkZGxlICYmIChlLmJ1dHRvbiA9PSBCVVRUT05fV0hFRUwgfHwgc3BhY2VQcmVzc2VkKSkge1xuICAgICAgICAgICAgICAgIHJlcGFpbnRCcnVzaFByZXZpZXcoKTtcblxuICAgICAgICAgICAgICAgIGRyYWdNaWRkbGUgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGRyYWdNb3ZlQnV0dG9uID0gZS5idXR0b247XG4gICAgICAgICAgICAgICAgZHJhZ01vdmVYID0gcC54O1xuICAgICAgICAgICAgICAgIGRyYWdNb3ZlWSA9IHAueTtcbiAgICAgICAgICAgICAgICBkcmFnTW92ZU9mZnNldCA9IHRoYXQuZ2V0T2Zmc2V0KCk7XG4gICAgICAgICAgICAgICAgc2V0Q3Vyc29yKG1vdmluZ0N1cnNvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5tb3VzZURyYWdnZWQgPSBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICBpZiAoZHJhZ01pZGRsZSkge1xuICAgICAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgICAgICBwID0ge3g6IGUucGFnZVgsIHk6IGUucGFnZVl9O1xuXG4gICAgICAgICAgICAgICAgdGhhdC5zZXRPZmZzZXQoZHJhZ01vdmVPZmZzZXQueCArIHAueCAtIGRyYWdNb3ZlWCwgZHJhZ01vdmVPZmZzZXQueSArIHAueSAtIGRyYWdNb3ZlWSk7XG4gICAgICAgICAgICAgICAgdGhhdC5yZXBhaW50QWxsKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5tb3VzZVJlbGVhc2VkID0gZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgaWYgKGRyYWdNaWRkbGUgJiYgZS5idXR0b24gPT0gZHJhZ01vdmVCdXR0b24pIHtcbiAgICAgICAgICAgICAgICBkcmFnTWlkZGxlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgc2V0Q3Vyc29yKGRlZmF1bHRDdXJzb3IpO1xuXG4gICAgICAgICAgICAgICAgYWN0aXZlTW9kZSA9IGRlZmF1bHRNb2RlOyAvLyB5aWVsZCBjb250cm9sIHRvIHRoZSBkZWZhdWx0IG1vZGVcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9XG4gICAgXG4gICAgQ1BNb3ZlQ2FudmFzTW9kZS5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKENQTW9kZS5wcm90b3R5cGUpO1xuICAgIENQTW92ZUNhbnZhc01vZGUucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gQ1BGbG9vZEZpbGxNb2RlO1xuXG4gICAgZnVuY3Rpb24gQ1BGbG9vZEZpbGxNb2RlKCkge1xuICAgIH1cbiAgICBcbiAgICBDUEZsb29kRmlsbE1vZGUucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShDUE1vZGUucHJvdG90eXBlKTtcbiAgICBDUEZsb29kRmlsbE1vZGUucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gQ1BGbG9vZEZpbGxNb2RlO1xuXG4gICAgQ1BGbG9vZEZpbGxNb2RlLnByb3RvdHlwZS5tb3VzZVByZXNzZWQgPSBmdW5jdGlvbihlKSB7XG4gICAgICAgIHZhciBcbiAgICAgICAgICAgIHBmID0gY29vcmRUb0RvY3VtZW50KG1vdXNlQ29vcmRUb0NhbnZhcyh7eDogZS5wYWdlWCwgeTogZS5wYWdlWX0pKTtcbiAgICBcbiAgICAgICAgaWYgKGFydHdvcmsuaXNQb2ludFdpdGhpbihwZi54LCBwZi55KSkge1xuICAgICAgICAgICAgYXJ0d29yay5mbG9vZEZpbGwocGYueCwgcGYueSk7XG4gICAgICAgICAgICB0aGF0LnJlcGFpbnRBbGwoKTtcbiAgICAgICAgfVxuICAgIFxuICAgICAgICBhY3RpdmVNb2RlID0gZGVmYXVsdE1vZGU7IC8vIHlpZWxkIGNvbnRyb2wgdG8gdGhlIGRlZmF1bHQgbW9kZVxuICAgIH07XG5cbiAgICBmdW5jdGlvbiBDUFJlY3RTZWxlY3Rpb25Nb2RlKCkge1xuICAgICAgICB2YXJcbiAgICAgICAgICAgIGZpcnN0Q2xpY2ssXG4gICAgICAgICAgICBjdXJSZWN0ID0gbmV3IENQUmVjdCgwLCAwLCAwLCAwKTtcblxuICAgICAgICB0aGlzLm1vdXNlUHJlc3NlZCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICBwID0gY29vcmRUb0RvY3VtZW50SW50KG1vdXNlQ29vcmRUb0NhbnZhcyh7eDogZS5wYWdlWCwgeTogZS5wYWdlWX0pKTtcblxuICAgICAgICAgICAgY3VyUmVjdC5tYWtlRW1wdHkoKTtcbiAgICAgICAgICAgIGZpcnN0Q2xpY2sgPSBwO1xuXG4gICAgICAgICAgICB0aGF0LnJlcGFpbnRBbGwoKTtcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLm1vdXNlRHJhZ2dlZCA9IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgIHAgPSBjb29yZFRvRG9jdW1lbnRJbnQobW91c2VDb29yZFRvQ2FudmFzKHt4OiBlLnBhZ2VYLCB5OiBlLnBhZ2VZfSkpLFxuICAgICAgICAgICAgICAgIHNxdWFyZSA9IGUuc2hpZnRLZXksXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgc3F1YXJlRGlzdCA9IH5+TWF0aC5tYXgoTWF0aC5hYnMocC54IC0gZmlyc3RDbGljay54KSwgTWF0aC5hYnMocC55IC0gZmlyc3RDbGljay55KSk7XG5cbiAgICAgICAgICAgIGlmIChwLnggPj0gZmlyc3RDbGljay54KSB7XG4gICAgICAgICAgICAgICAgY3VyUmVjdC5sZWZ0ID0gZmlyc3RDbGljay54O1xuICAgICAgICAgICAgICAgIGN1clJlY3QucmlnaHQgPSAoc3F1YXJlID8gZmlyc3RDbGljay54ICsgc3F1YXJlRGlzdCA6IHAueCkgKyAxO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjdXJSZWN0LmxlZnQgPSBzcXVhcmUgPyBmaXJzdENsaWNrLnggLSBzcXVhcmVEaXN0IDogcC54O1xuICAgICAgICAgICAgICAgIGN1clJlY3QucmlnaHQgPSBmaXJzdENsaWNrLnggKyAxO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAocC55ID49IGZpcnN0Q2xpY2sueSkge1xuICAgICAgICAgICAgICAgIGN1clJlY3QudG9wID0gZmlyc3RDbGljay55O1xuICAgICAgICAgICAgICAgIGN1clJlY3QuYm90dG9tID0gKHNxdWFyZSA/IGZpcnN0Q2xpY2sueSArIHNxdWFyZURpc3QgOiBwLnkpICsgMTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY3VyUmVjdC50b3AgPSBzcXVhcmUgPyBmaXJzdENsaWNrLnkgLSBzcXVhcmVEaXN0IDogcC55O1xuICAgICAgICAgICAgICAgIGN1clJlY3QuYm90dG9tID0gZmlyc3RDbGljay55ICsgMTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhhdC5yZXBhaW50QWxsKCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5tb3VzZVJlbGVhc2VkID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGFydHdvcmsucmVjdGFuZ2xlU2VsZWN0aW9uKGN1clJlY3QpO1xuICAgICAgICAgICAgY3VyUmVjdC5tYWtlRW1wdHkoKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgYWN0aXZlTW9kZSA9IGRlZmF1bHRNb2RlOyAvLyB5aWVsZCBjb250cm9sIHRvIHRoZSBkZWZhdWx0IG1vZGVcbiAgICAgICAgICAgIHRoYXQucmVwYWludEFsbCgpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMucGFpbnQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmICghY3VyUmVjdC5pc0VtcHR5KCkpIHtcbiAgICAgICAgICAgICAgICBjYW52YXNDb250ZXh0LmxpbmVXaWR0aCA9IDE7XG4gICAgICAgICAgICAgICAgcGxvdFNlbGVjdGlvblJlY3QoY2FudmFzQ29udGV4dCwgY3VyUmVjdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfTtcblxuICAgIENQUmVjdFNlbGVjdGlvbk1vZGUucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShDUE1vZGUucHJvdG90eXBlKTtcbiAgICBDUFJlY3RTZWxlY3Rpb25Nb2RlLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IENQUmVjdFNlbGVjdGlvbk1vZGU7XG5cbiAgICBmdW5jdGlvbiBDUE1vdmVUb29sTW9kZSgpIHtcbiAgICAgICAgdmFyIFxuICAgICAgICAgICAgZmlyc3RDbGljaztcblxuICAgICAgICB0aGlzLm1vdXNlUHJlc3NlZCA9IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgIHAgPSBjb29yZFRvRG9jdW1lbnQobW91c2VDb29yZFRvQ2FudmFzKHt4OiBlLnBhZ2VYLCB5OiBlLnBhZ2VZfSkpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBmaXJzdENsaWNrID0gcDtcblxuICAgICAgICAgICAgYXJ0d29yay5iZWdpblByZXZpZXdNb2RlKGUuYWx0S2V5KTtcblxuICAgICAgICAgICAgLy8gRklYTUU6IFRoZSBmb2xsb3dpbmcgaGFjayBhdm9pZHMgYSBzbGlnaHQgZGlzcGxheSBnbGl0Y2hcbiAgICAgICAgICAgIC8vIGlmIHRoZSB3aG9sZSBtb3ZlIHRvb2wgbWVzcyBpcyBmaXhlZCBpdCBwcm9iYWJseSB3b24ndCBiZSBuZWNlc3NhcnkgYW55bW9yZVxuICAgICAgICAgICAgYXJ0d29yay5tb3ZlKDAsIDApO1xuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMubW91c2VEcmFnZ2VkID0gZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgcCA9IGNvb3JkVG9Eb2N1bWVudChtb3VzZUNvb3JkVG9DYW52YXMoe3g6IGUucGFnZVgsIHk6IGUucGFnZVl9KSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGFydHdvcmsubW92ZShNYXRoLnJvdW5kKHAueCAtIGZpcnN0Q2xpY2sueCksIE1hdGgucm91bmQocC55IC0gZmlyc3RDbGljay55KSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoYXQucmVwYWludEFsbCgpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMubW91c2VSZWxlYXNlZCA9IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgIGFydHdvcmsuZW5kUHJldmlld01vZGUoKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgYWN0aXZlTW9kZSA9IGRlZmF1bHRNb2RlOyAvLyB5aWVsZCBjb250cm9sIHRvIHRoZSBkZWZhdWx0IG1vZGVcbiAgICAgICAgICAgIHRoYXQucmVwYWludEFsbCgpO1xuICAgICAgICB9O1xuICAgIH1cbiAgICBcbiAgICBDUE1vdmVUb29sTW9kZS5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKENQTW9kZS5wcm90b3R5cGUpO1xuICAgIENQTW92ZVRvb2xNb2RlLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IENQTW92ZVRvb2xNb2RlO1xuXG4gICAgZnVuY3Rpb24gQ1BSb3RhdGVDYW52YXNNb2RlKCkge1xuICAgICAgICB2YXIgXG4gICAgICAgICAgICBmaXJzdENsaWNrLFxuICAgICAgICAgICAgaW5pdEFuZ2xlID0gMC4wLFxuICAgICAgICAgICAgaW5pdFRyYW5zZm9ybSxcbiAgICAgICAgICAgIGRyYWdnZWQgPSBmYWxzZTtcblxuICAgICAgICB0aGlzLm1vdXNlUHJlc3NlZCA9IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgIGZpcnN0Q2xpY2sgPSB7eDogZS5wYWdlWCAtICQoY2FudmFzKS5vZmZzZXQoKS5sZWZ0LCB5OiBlLnBhZ2VZIC0gJChjYW52YXMpLm9mZnNldCgpLnRvcH07XG5cbiAgICAgICAgICAgIGluaXRBbmdsZSA9IHRoYXQuZ2V0Um90YXRpb24oKTtcbiAgICAgICAgICAgIGluaXRUcmFuc2Zvcm0gPSB0cmFuc2Zvcm0uY2xvbmUoKTtcblxuICAgICAgICAgICAgZHJhZ2dlZCA9IGZhbHNlO1xuXG4gICAgICAgICAgICByZXBhaW50QnJ1c2hQcmV2aWV3KCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5tb3VzZURyYWdnZWQgPSBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICBkcmFnZ2VkID0gdHJ1ZTtcblxuICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgcCA9IHt4OiBlLnBhZ2VYIC0gJChjYW52YXMpLm9mZnNldCgpLmxlZnQsIHk6IGUucGFnZVkgLSAkKGNhbnZhcykub2Zmc2V0KCkudG9wfSxcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGRpc3BsYXlDZW50ZXIgPSB7eDogJChjYW52YXMpLndpZHRoKCkgLyAyLCB5OiAkKGNhbnZhcykuaGVpZ2h0KCkgLyAyfSxcbiAgICAgICAgICAgICAgICBjYW52YXNDZW50ZXIgPSB7eDogY2FudmFzLndpZHRoIC8gMiwgeTogY2FudmFzLmhlaWdodCAvIDJ9LFxuXG4gICAgICAgICAgICAgICAgZGVsdGFBbmdsZSA9IE1hdGguYXRhbjIocC55IC0gZGlzcGxheUNlbnRlci55LCBwLnggLSBkaXNwbGF5Q2VudGVyLngpIC0gTWF0aC5hdGFuMihmaXJzdENsaWNrLnkgLSBkaXNwbGF5Q2VudGVyLnksIGZpcnN0Q2xpY2sueCAtIGRpc3BsYXlDZW50ZXIueCksXG5cbiAgICAgICAgICAgICAgICByb3RUcmFucyA9IG5ldyBDUFRyYW5zZm9ybSgpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICByb3RUcmFucy5yb3RhdGVBcm91bmRQb2ludChkZWx0YUFuZ2xlLCBjYW52YXNDZW50ZXIueCwgY2FudmFzQ2VudGVyLnkpO1xuXG4gICAgICAgICAgICByb3RUcmFucy5tdWx0aXBseShpbml0VHJhbnNmb3JtKTtcblxuICAgICAgICAgICAgdGhhdC5zZXRSb3RhdGlvbihpbml0QW5nbGUgKyBkZWx0YUFuZ2xlKTtcbiAgICAgICAgICAgIHRoYXQuc2V0T2Zmc2V0KH5+cm90VHJhbnMuZ2V0VHJhbnNsYXRlWCgpLCB+fnJvdFRyYW5zLmdldFRyYW5zbGF0ZVkoKSk7XG4gICAgICAgICAgICB0aGF0LnJlcGFpbnRBbGwoKTtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogV2hlbiB0aGUgbW91c2UgaXMgcmVsZWFzZWQgYWZ0ZXIgcm90YXRpb24sIHdlIG1pZ2h0IHdhbnQgdG8gc25hcCBvdXIgYW5nbGUgdG8gdGhlIG5lYXJlc3QgOTAgZGVncmVlIG1hcmsuXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBmaW5pc2hSb3RhdGlvbigpIHtcbiAgICAgICAgICAgIGNvbnN0XG4gICAgICAgICAgICAgICAgUk9UQVRFX1NOQVBfREVHUkVFUyA9IDU7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHZhciBcbiAgICAgICAgICAgICAgICBuZWFyZXN0OTAgPSBNYXRoLnJvdW5kKGNhbnZhc1JvdGF0aW9uIC8gKE1hdGguUEkgLyAyKSkgKiBNYXRoLlBJIC8gMjtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKE1hdGguYWJzKGNhbnZhc1JvdGF0aW9uIC0gbmVhcmVzdDkwKSA8IFJPVEFURV9TTkFQX0RFR1JFRVMgLyAxODAgKiBNYXRoLlBJKSB7XG4gICAgICAgICAgICAgICAgdmFyIFxuICAgICAgICAgICAgICAgICAgICBkZWx0YUFuZ2xlID0gbmVhcmVzdDkwIC0gaW5pdEFuZ2xlLFxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBjZW50ZXIgPSB7eDogY2FudmFzLndpZHRoIC8gMiwgeTogY2FudmFzLmhlaWdodCAvIDJ9LFxuXG4gICAgICAgICAgICAgICAgICAgIHJvdFRyYW5zID0gbmV3IENQVHJhbnNmb3JtKCk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgcm90VHJhbnMucm90YXRlQXJvdW5kUG9pbnQoZGVsdGFBbmdsZSwgY2VudGVyLngsIGNlbnRlci55KTtcblxuICAgICAgICAgICAgICAgIHJvdFRyYW5zLm11bHRpcGx5KGluaXRUcmFuc2Zvcm0pO1xuXG4gICAgICAgICAgICAgICAgdGhhdC5zZXRSb3RhdGlvbihpbml0QW5nbGUgKyBkZWx0YUFuZ2xlKTtcbiAgICAgICAgICAgICAgICB0aGF0LnNldE9mZnNldCh+fnJvdFRyYW5zLmdldFRyYW5zbGF0ZVgoKSwgfn5yb3RUcmFucy5nZXRUcmFuc2xhdGVZKCkpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHRoYXQucmVwYWludEFsbCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICB0aGlzLm1vdXNlUmVsZWFzZWQgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgaWYgKGRyYWdnZWQpIHtcbiAgICAgICAgICAgICAgICBmaW5pc2hSb3RhdGlvbigpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGF0LnJlc2V0Um90YXRpb24oKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgYWN0aXZlTW9kZSA9IGRlZmF1bHRNb2RlOyAvLyB5aWVsZCBjb250cm9sIHRvIHRoZSBkZWZhdWx0IG1vZGVcbiAgICAgICAgfTtcbiAgICB9XG4gICAgXG4gICAgQ1BSb3RhdGVDYW52YXNNb2RlLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoQ1BNb2RlLnByb3RvdHlwZSk7XG4gICAgQ1BSb3RhdGVDYW52YXNNb2RlLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IENQUm90YXRlQ2FudmFzTW9kZTtcbiAgICBcbiAgICBmdW5jdGlvbiBDUEdyYWRpZW50RmlsbE1vZGUoKSB7XG4gICAgICAgIC8vIFN1cGVyIGNvbnN0cnVjdG9yXG4gICAgICAgIENQTGluZU1vZGUuY2FsbCh0aGlzKTtcbiAgICB9XG4gICAgXG4gICAgQ1BHcmFkaWVudEZpbGxNb2RlLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoQ1BMaW5lTW9kZS5wcm90b3R5cGUpO1xuICAgIENQR3JhZGllbnRGaWxsTW9kZS5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBDUEdyYWRpZW50RmlsbE1vZGU7XG5cbiAgICBDUEdyYWRpZW50RmlsbE1vZGUucHJvdG90eXBlLmRyYXdMaW5lID0gZnVuY3Rpb24oZnJvbSwgdG8pIHtcbiAgICAgICAgYXJ0d29yay5ncmFkaWVudEZpbGwoTWF0aC5yb3VuZChmcm9tLngpLCBNYXRoLnJvdW5kKGZyb20ueSksIE1hdGgucm91bmQodG8ueCksIE1hdGgucm91bmQodG8ueSksIGNvbnRyb2xsZXIuZ2V0Q3VyR3JhZGllbnQoKSk7XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIHJlcXVlc3RGb2N1c0luV2luZG93KCkge1xuICAgICAgICAvLyBUT0RPXG4gICAgfVxuICAgIFxuICAgIGZ1bmN0aW9uIHNldEN1cnNvcihjdXJzb3IpIHtcbiAgICAgICAgaWYgKGNhbnZhcy5nZXRBdHRyaWJ1dGUoXCJkYXRhLWN1cnNvclwiKSAhPSBjdXJzb3IpIHtcbiAgICAgICAgICAgIGNhbnZhcy5zZXRBdHRyaWJ1dGUoXCJkYXRhLWN1cnNvclwiLCBjdXJzb3IpO1xuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB2aXNNaW4gVGhlIHNtYWxsZXN0IGNvb3JkaW5hdGUgaW4gdGhpcyBheGlzIGluIHdoaWNoIHRoZSBkcmF3aW5nIGFwcGVhcnNcbiAgICAgKiBAcGFyYW0gdmlzV2lkdGggVGhlIGV4dGVudCBvZiB0aGUgZHJhd2luZyBpbiB0aGlzIGF4aXNcbiAgICAgKiBAcGFyYW0gdmlld1NpemUgVGhlIGV4dGVudCBvZiB0aGUgc2NyZWVuIGNhbnZhcyBpbiB0aGlzIGF4aXNcbiAgICAgKiBAcGFyYW0gb2Zmc2V0IFRoZSBwcmVzZW50IHBpeGVsIG9mZnNldCBvZiB0aGUgZHJhd2luZyBpbiB0aGlzIGF4aXNcbiAgICAgKi9cbiAgICBmdW5jdGlvbiB1cGRhdGVTY3JvbGxCYXIoc2Nyb2xsYmFyLCB2aXNNaW4sIHZpc1dpZHRoLCB2aWV3U2l6ZSwgb2Zmc2V0KSB7XG4gICAgICAgIHZhclxuICAgICAgICAgICAgeE1pbiA9IHZpc01pbiAtIHZpZXdTaXplIC0gb2Zmc2V0ICsgdmlzV2lkdGggLyA0LFxuICAgICAgICAgICAgeE1heCA9IHZpc01pbiArIHZpc1dpZHRoIC0gb2Zmc2V0IC0gdmlzV2lkdGggLyA0O1xuICAgICAgICBcbiAgICAgICAgc2Nyb2xsYmFyLnNldFZhbHVlcygtb2Zmc2V0LCB2aWV3U2l6ZSwgeE1pbiwgeE1heCk7XG4gICAgICAgIFxuICAgICAgICBzY3JvbGxiYXIuc2V0QmxvY2tJbmNyZW1lbnQoTWF0aC5tYXgoMSwgfn4odmlld1NpemUgKiAuNjYpKSk7XG4gICAgICAgIHNjcm9sbGJhci5zZXRVbml0SW5jcmVtZW50KE1hdGgubWF4KDEsIH5+KHZpZXdTaXplICogLjA1KSkpO1xuICAgIH1cbiAgICBcbiAgICBmdW5jdGlvbiB1cGRhdGVTY3JvbGxCYXJzKCkge1xuICAgICAgICBpZiAoaG9yelNjcm9sbCA9PSBudWxsIHx8IHZlcnRTY3JvbGwgPT0gbnVsbFxuICAgICAgICAgICAgICAgIHx8IGhvcnpTY3JvbGwuZ2V0VmFsdWVJc0FkanVzdGluZygpIHx8IHZlcnRTY3JvbGwuZ2V0VmFsdWVJc0FkanVzdGluZygpICkge1xuICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICB9XG5cbiAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICB2aXNpYmxlUmVjdCA9IGdldFJlZnJlc2hBcmVhKG5ldyBDUFJlY3QoMCwgMCwgYXJ0d29ya0NhbnZhcy53aWR0aCwgYXJ0d29ya0NhbnZhcy5oZWlnaHQpKTtcbiAgICAgICAgICAgXG4gICAgICAgICAgIHVwZGF0ZVNjcm9sbEJhcihob3J6U2Nyb2xsLCB2aXNpYmxlUmVjdC5sZWZ0LCB2aXNpYmxlUmVjdC5nZXRXaWR0aCgpLCAkKGNhbnZhcykud2lkdGgoKSwgdGhhdC5nZXRPZmZzZXQoKS54KTtcbiAgICAgICAgICAgdXBkYXRlU2Nyb2xsQmFyKHZlcnRTY3JvbGwsIHZpc2libGVSZWN0LnRvcCwgdmlzaWJsZVJlY3QuZ2V0SGVpZ2h0KCksICQoY2FudmFzKS5oZWlnaHQoKSwgdGhhdC5nZXRPZmZzZXQoKS55KTtcbiAgICAgICB9XG5cbiAgICBmdW5jdGlvbiB1cGRhdGVUcmFuc2Zvcm0oKSB7XG4gICAgICAgIHRyYW5zZm9ybS5zZXRUb0lkZW50aXR5KCk7XG4gICAgICAgIHRyYW5zZm9ybS50cmFuc2xhdGUob2Zmc2V0WCwgb2Zmc2V0WSk7XG4gICAgICAgIHRyYW5zZm9ybS5zY2FsZSh6b29tLCB6b29tKTtcbiAgICAgICAgdHJhbnNmb3JtLnJvdGF0ZShjYW52YXNSb3RhdGlvbik7XG5cbiAgICAgICAgdXBkYXRlU2Nyb2xsQmFycygpO1xuICAgICAgICB0aGF0LnJlcGFpbnRBbGwoKTtcbiAgICB9XG4gICAgXG4gICAgLyoqXG4gICAgICogQ29udmVydCBhIGNhbnZhcy1yZWxhdGl2ZSBjb29yZGluYXRlIGludG8gZG9jdW1lbnQgY29vcmRpbmF0ZXMuXG4gICAgICovXG4gICAgZnVuY3Rpb24gY29vcmRUb0RvY3VtZW50KGNvb3JkKSB7XG4gICAgICAgIC8vIFRPRE8gY2FjaGUgaW52ZXJ0ZWQgdHJhbnNmb3JtXG4gICAgICAgIHJldHVybiB0cmFuc2Zvcm0uZ2V0SW52ZXJ0ZWQoKS50cmFuc2Zvcm1Qb2ludChjb29yZC54LCBjb29yZC55KTtcbiAgICB9XG4gICAgXG4gICAgLyoqXG4gICAgICogQ29udmVydCBhIGNhbnZhcy1yZWxhdGl2ZSBjb29yZGluYXRlIGludG8gZG9jdW1lbnQgY29vcmRpbmF0ZXMuXG4gICAgICovXG4gICAgZnVuY3Rpb24gY29vcmRUb0RvY3VtZW50SW50KGNvb3JkKSB7XG4gICAgICAgIC8vIFRPRE8gY2FjaGUgaW52ZXJ0ZWQgdHJhbnNmb3JtXG4gICAgICAgIHZhciBcbiAgICAgICAgICAgIHJlc3VsdCA9IGNvb3JkVG9Eb2N1bWVudChjb29yZCk7XG4gICAgICAgIFxuICAgICAgICByZXN1bHQueCA9IE1hdGguZmxvb3IocmVzdWx0LngpO1xuICAgICAgICByZXN1bHQueSA9IE1hdGguZmxvb3IocmVzdWx0LnkpO1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gICAgXG4gICAgLyoqXG4gICAgICogQ29udmVydCBhIHt4OiBwYWdlWCwgeTogcGFnZVl9IGNvLW9yZGluYXRlIHBhaXIgZnJvbSBhIG1vdXNlIGV2ZW50IHRvIGNhbnZhcy1yZWxhdGl2ZSBjb29yZGluYXRlcy5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBtb3VzZUNvb3JkVG9DYW52YXMoY29vcmQpIHtcbiAgICAgICAgdmFyXG4gICAgICAgICAgICByZWN0ID0gY2FudmFzLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuXG4gICAgICAgIHJldHVybiB7eDogY29vcmQueCAtIHJlY3QubGVmdCAtIHdpbmRvdy5wYWdlWE9mZnNldCwgeTogY29vcmQueSAtIHJlY3QudG9wIC0gd2luZG93LnBhZ2VZT2Zmc2V0fTtcbiAgICB9XG4gICAgXG4gICAgZnVuY3Rpb24gY29vcmRUb0Rpc3BsYXkocCkge1xuICAgICAgICByZXR1cm4gdHJhbnNmb3JtLnRyYW5zZm9ybVBvaW50KHAueCwgcC55KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjb29yZFRvRGlzcGxheUludChwKSB7XG4gICAgICAgIHZhclxuICAgICAgICAgICAgcmVzdWx0ID0gY29vcmRUb0Rpc3BsYXkocCk7XG4gICAgICAgIFxuICAgICAgICByZXN1bHQueCA9IE1hdGgucm91bmQocmVzdWx0LngpO1xuICAgICAgICByZXN1bHQueSA9IE1hdGgucm91bmQocmVzdWx0LnkpO1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTdHJva2UgYSBzZWxlY3Rpb24gcmVjdGFuZ2xlIHRoYXQgZW5jbG9zZXMgdGhlIHBpeGVscyBpbiB0aGUgZ2l2ZW4gcmVjdGFuZ2xlIChpbiBkb2N1bWVudCBjby1vcmRpbmF0ZXMpLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHBsb3RTZWxlY3Rpb25SZWN0KGNvbnRleHQsIHJlY3QpIHtcbiAgICAgICAgY29udGV4dC5iZWdpblBhdGgoKTtcblxuICAgICAgICB2YXJcbiAgICAgICAgICAgIGNlbnRlciA9IGNvb3JkVG9EaXNwbGF5KHt4OiAocmVjdC5sZWZ0ICsgcmVjdC5yaWdodCkgLyAyLCB5OiAocmVjdC50b3AgKyByZWN0LmJvdHRvbSkgLyAyfSksXG4gICAgICAgICAgICBjb29yZHMgPSBbXG4gICAgICAgICAgICAgICAge3g6IHJlY3QubGVmdCwgeTogcmVjdC50b3B9LFxuICAgICAgICAgICAgICAgIHt4OiByZWN0LnJpZ2h0LCB5OiByZWN0LnRvcH0sXG4gICAgICAgICAgICAgICAge3g6IHJlY3QucmlnaHQsIHk6IHJlY3QuYm90dG9tfSxcbiAgICAgICAgICAgICAgICB7eDogcmVjdC5sZWZ0LCB5OiByZWN0LmJvdHRvbX0sXG4gICAgICAgICAgICBdO1xuXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY29vcmRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBjb29yZHNbaV0gPSBjb29yZFRvRGlzcGxheUludChjb29yZHNbaV0pO1xuXG4gICAgICAgICAgICAvLyBOZWVkIHRvIGluc2V0IHRoZSBjby1vcmRpbmF0ZXMgYnkgMC41IGRpc3BsYXkgcGl4ZWxzIGZvciB0aGUgbGluZSB0byBwYXNzIHRocm91Z2ggdGhlIG1pZGRsZSBvZiB0aGUgZGlzcGxheSBwaXhlbFxuICAgICAgICAgICAgY29vcmRzW2ldLnggKz0gIE1hdGguc2lnbihjZW50ZXIueCAtIGNvb3Jkc1tpXS54KSAqIDAuNTtcbiAgICAgICAgICAgIGNvb3Jkc1tpXS55ICs9ICBNYXRoLnNpZ24oY2VudGVyLnkgLSBjb29yZHNbaV0ueSkgKiAwLjU7XG4gICAgICAgIH1cblxuICAgICAgICBjb250ZXh0Lm1vdmVUbyhjb29yZHNbMF0ueCwgY29vcmRzWzBdLnkpO1xuICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGNvb3Jkcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgY29udGV4dC5saW5lVG8oY29vcmRzW2ldLngsIGNvb3Jkc1tpXS55KTtcbiAgICAgICAgfVxuICAgICAgICBjb250ZXh0LmxpbmVUbyhjb29yZHNbMF0ueCwgY29vcmRzWzBdLnkpO1xuXG4gICAgICAgIGNvbnRleHQuc3Ryb2tlKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGFrZSBhIENQUmVjdCBvZiBkb2N1bWVudCBjb29yZGluYXRlcyBhbmQgcmV0dXJuIGEgQ1BSZWN0IG9mIGNhbnZhcyBjb29yZGluYXRlcyB0byByZXBhaW50IGZvciB0aGF0IHJlZ2lvbi5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBnZXRSZWZyZXNoQXJlYShyKSB7XG4gICAgICAgIHZhclxuICAgICAgICAgICAgcDEgPSBjb29yZFRvRGlzcGxheUludCh7eDogci5sZWZ0IC0gMSwgeTogci50b3AgLSAxfSksXG4gICAgICAgICAgICBwMiA9IGNvb3JkVG9EaXNwbGF5SW50KHt4OiByLmxlZnQgLSAxLCB5OiByLmJvdHRvbX0pLFxuICAgICAgICAgICAgcDMgPSBjb29yZFRvRGlzcGxheUludCh7eDogci5yaWdodCwgeTogci50b3AgLSAxfSksXG4gICAgICAgICAgICBwNCA9IGNvb3JkVG9EaXNwbGF5SW50KHt4OiByLnJpZ2h0LCB5OiByLmJvdHRvbX0pLFxuXG4gICAgICAgICAgICByMiA9IG5ldyBDUFJlY3QoXG4gICAgICAgICAgICAgICAgTWF0aC5taW4oTWF0aC5taW4ocDEueCwgcDIueCksIE1hdGgubWluKHAzLngsIHA0LngpKSxcbiAgICAgICAgICAgICAgICBNYXRoLm1pbihNYXRoLm1pbihwMS55LCBwMi55KSwgTWF0aC5taW4ocDMueSwgcDQueSkpLFxuICAgICAgICAgICAgICAgIE1hdGgubWF4KE1hdGgubWF4KHAxLngsIHAyLngpLCBNYXRoLm1heChwMy54LCBwNC54KSkgKyAxLFxuICAgICAgICAgICAgICAgIE1hdGgubWF4KE1hdGgubWF4KHAxLnksIHAyLnkpLCBNYXRoLm1heChwMy55LCBwNC55KSkgKyAxXG4gICAgICAgICAgICApO1xuXG4gICAgICAgIHIyLmdyb3coMiwgMik7IC8vIHRvIGJlIHN1cmUgdG8gaW5jbHVkZSBldmVyeXRoaW5nXG5cbiAgICAgICAgcmV0dXJuIHIyO1xuICAgIH1cbiAgICBcbiAgICAvKipcbiAgICAgKiBSZXBhaW50IHRoZSBhcmVhIG9mIHRoZSBjYW52YXMgdGhhdCB3YXMgbGFzdCBvY2N1cGllZCBieSB0aGUgYnJ1c2ggcHJldmlldyBjaXJjbGUgKHVzZWZ1bCBmb3IgZXJhc2luZ1xuICAgICAqIHRoZSBicnVzaCBwcmV2aWV3IHdoZW4gc3dpdGNoaW5nIGRyYXdpbmcgbW9kZXMgdG8gb25lIHRoYXQgd29uJ3QgYmUgdXNpbmcgYSBwcmV2aWV3KS5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiByZXBhaW50QnJ1c2hQcmV2aWV3KCkge1xuICAgICAgICBpZiAob2xkUHJldmlld1JlY3QgIT0gbnVsbCkge1xuICAgICAgICAgICAgdmFyIHIgPSBvbGRQcmV2aWV3UmVjdDtcbiAgICAgICAgICAgIG9sZFByZXZpZXdSZWN0ID0gbnVsbDtcbiAgICAgICAgICAgIHJlcGFpbnRSZWN0KHIpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IGEgcmVjdGFuZ2xlIHRoYXQgZW5jbG9zZXMgdGhlIHByZXZpZXcgYnJ1c2gsIGluIHNjcmVlbiBjb29yZGluYXRlcy5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBnZXRCcnVzaFByZXZpZXdPdmFsKCkge1xuICAgICAgICB2YXIgXG4gICAgICAgICAgICBicnVzaFNpemUgPSBjb250cm9sbGVyLmdldEJydXNoU2l6ZSgpICogem9vbTtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiBuZXcgQ1BSZWN0KFxuICAgICAgICAgICAgbW91c2VYIC0gYnJ1c2hTaXplIC8gMixcbiAgICAgICAgICAgIG1vdXNlWSAtIGJydXNoU2l6ZSAvIDIsXG4gICAgICAgICAgICBtb3VzZVggKyBicnVzaFNpemUgLyAyLFxuICAgICAgICAgICAgbW91c2VZICsgYnJ1c2hTaXplIC8gMlxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFkanVzdCB0aGUgY3VycmVudCBvZmZzZXQgdG8gYnJpbmcgdGhlIGNlbnRlciBvZiB0aGUgYXJ0d29yayB0byB0aGUgY2VudGVyIG9mIHRoZSBjYW52YXNcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBjZW50ZXJDYW52YXMoKSB7XG4gICAgICAgIHZhclxuICAgICAgICAgICAgd2lkdGggPSBjYW52YXMud2lkdGgsXG4gICAgICAgICAgICBoZWlnaHQgPSBjYW52YXMuaGVpZ2h0LFxuICAgICAgICBcbiAgICAgICAgICAgIGFydHdvcmtDZW50ZXIgPSBjb29yZFRvRGlzcGxheSh7eDogYXJ0d29yay53aWR0aCAvIDIsIHk6IGFydHdvcmsuaGVpZ2h0IC8gMn0pO1xuICAgICAgICBcbiAgICAgICAgdGhhdC5zZXRPZmZzZXQoXG4gICAgICAgICAgICBNYXRoLnJvdW5kKG9mZnNldFggKyB3aWR0aCAvIDIuMCAtIGFydHdvcmtDZW50ZXIueCksXG4gICAgICAgICAgICBNYXRoLnJvdW5kKG9mZnNldFkgKyBoZWlnaHQgLyAyLjAgLSBhcnR3b3JrQ2VudGVyLnkpXG4gICAgICAgICk7XG4gICAgfVxuICAgIFxuICAgIHRoaXMuc2V0Wm9vbSA9IGZ1bmN0aW9uKF96b29tKSB7XG4gICAgICAgIHpvb20gPSBfem9vbTtcbiAgICAgICAgdXBkYXRlVHJhbnNmb3JtKCk7XG4gICAgfTtcblxuICAgIHRoaXMuZ2V0Wm9vbSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gem9vbTtcbiAgICB9O1xuICAgIFxuICAgIHRoaXMuc2V0R3JpZFNpemUgPSBmdW5jdGlvbihfZ3JpZFNpemUpIHtcbiAgICAgICAgZ3JpZFNpemUgPSBNYXRoLm1heChNYXRoLnJvdW5kKF9ncmlkU2l6ZSksIDEpO1xuICAgICAgICB0aGlzLnJlcGFpbnRBbGwoKTtcbiAgICB9O1xuXG4gICAgdGhpcy5nZXRHcmlkU2l6ZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gZ3JpZFNpemU7XG4gICAgfTtcblxuICAgIHRoaXMuc2V0T2Zmc2V0ID0gZnVuY3Rpb24oeCwgeSkge1xuICAgICAgICBpZiAoaXNOYU4oeCkgfHwgaXNOYU4oeSkpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQmFkIG9mZnNldFwiKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG9mZnNldFggPSB4O1xuICAgICAgICAgICAgb2Zmc2V0WSA9IHk7XG4gICAgICAgICAgICB1cGRhdGVUcmFuc2Zvcm0oKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICB0aGlzLmdldE9mZnNldCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4ge3g6IG9mZnNldFgsIHk6IG9mZnNldFl9O1xuICAgIH07XG4gICAgXG4gICAgdGhpcy5zZXRJbnRlcnBvbGF0aW9uID0gZnVuY3Rpb24oZW5hYmxlZCkge1xuICAgICAgICBpbnRlcnBvbGF0aW9uID0gZW5hYmxlZDtcbiAgICAgICAgXG4gICAgICAgIHZhclxuICAgICAgICAgICAgYnJvd3NlclByb3BlcnRpZXMgPSBbXG4gICAgICAgICAgICAgICAgIFwiaW1hZ2VTbW9vdGhpbmdFbmFibGVkXCIsIFwibW96SW1hZ2VTbW9vdGhpbmdFbmFibGVkXCIsIFwid2Via2l0SW1hZ2VTbW9vdGhpbmdFbmFibGVkXCIsXG4gICAgICAgICAgICAgICAgIFwibXNJbWFnZVNtb290aGluZ0VuYWJsZWRcIlxuICAgICAgICAgICAgXTtcbiAgICAgICAgXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYnJvd3NlclByb3BlcnRpZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmIChicm93c2VyUHJvcGVydGllc1tpXSBpbiBjYW52YXNDb250ZXh0KSB7XG4gICAgICAgICAgICAgICAgY2FudmFzQ29udGV4dFticm93c2VyUHJvcGVydGllc1tpXV0gPSBlbmFibGVkO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5yZXBhaW50QWxsKCk7XG4gICAgfTtcblxuICAgIHRoaXMuc2V0Um90YXRpb24gPSBmdW5jdGlvbihhbmdsZSkge1xuICAgICAgICBjYW52YXNSb3RhdGlvbiA9IGFuZ2xlICUgKDIgKiBNYXRoLlBJKTtcbiAgICAgICAgdXBkYXRlVHJhbnNmb3JtKCk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEdldCBjYW52YXMgcm90YXRpb24gaW4gcmFkaWFucy5cbiAgICAgKiBcbiAgICAgKiBAcmV0dXJuIGZsb2F0XG4gICAgICovXG4gICAgdGhpcy5nZXRSb3RhdGlvbiA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gY2FudmFzUm90YXRpb247XG4gICAgfTtcbiAgICBcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIHJvdGF0aW9uIGFzIHRoZSBuZWFyZXN0IG51bWJlciBvZiB3aG9sZSA5MCBkZWdyZWUgY2xvY2t3aXNlIHJvdGF0aW9ucyAoWzAuLjNdKVxuICAgICAqL1xuICAgIHRoaXMuZ2V0Um90YXRpb245MCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXJcbiAgICAgICAgICAgIHJvdGF0aW9uID0gTWF0aC5yb3VuZCh0aGlzLmdldFJvdGF0aW9uKCkgLyBNYXRoLlBJICogMik7XG4gICAgICAgIFxuICAgICAgICAvLyBKdXN0IGluIGNhc2U6XG4gICAgICAgIHJvdGF0aW9uICU9IDQ7XG4gICAgICAgIFxuICAgICAgICAvLyBXZSB3YW50IFswLi4zXSBhcyBvdXRwdXRcbiAgICAgICAgaWYgKHJvdGF0aW9uIDwgMCkge1xuICAgICAgICAgICAgcm90YXRpb24gKz0gNDtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHJvdGF0aW9uO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEBwYXJhbSB6b29tIGZsb2F0XG4gICAgICogQHBhcmFtIGNlbnRlclggZmxvYXQgWCBjby1vcmRpbmF0ZSBpbiB0aGUgY2FudmFzIHNwYWNlXG4gICAgICogQHBhcmFtIGNlbnRlclkgZmxvYXQgWSBjby1vcmRpbmF0ZSBpbiB0aGUgY2FudmFzIHNwYWNlXG4gICAgICovXG4gICAgZnVuY3Rpb24gem9vbU9uUG9pbnQoem9vbSwgY2VudGVyWCwgY2VudGVyWSkge1xuICAgICAgICB6b29tID0gTWF0aC5tYXgoTUlOX1pPT00sIE1hdGgubWluKE1BWF9aT09NLCB6b29tKSk7XG4gICAgICAgIFxuICAgICAgICBpZiAodGhhdC5nZXRab29tKCkgIT0gem9vbSkge1xuICAgICAgICAgICAgdmFyIFxuICAgICAgICAgICAgICAgIG9mZnNldCA9IHRoYXQuZ2V0T2Zmc2V0KCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoYXQuc2V0T2Zmc2V0KFxuICAgICAgICAgICAgICAgIG9mZnNldC54ICsgfn4oKGNlbnRlclggLSBvZmZzZXQueCkgKiAoMSAtIHpvb20gLyB0aGF0LmdldFpvb20oKSkpLCBcbiAgICAgICAgICAgICAgICBvZmZzZXQueSArIH5+KChjZW50ZXJZIC0gb2Zmc2V0LnkpICogKDEgLSB6b29tIC8gdGhhdC5nZXRab29tKCkpKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhhdC5zZXRab29tKHpvb20pO1xuXG4gICAgICAgICAgICAvKkNQQ29udHJvbGxlci5DUFZpZXdJbmZvIHZpZXdJbmZvID0gbmV3IENQQ29udHJvbGxlci5DUFZpZXdJbmZvKCk7XG4gICAgICAgICAgICB2aWV3SW5mby56b29tID0gem9vbTtcbiAgICAgICAgICAgIHZpZXdJbmZvLm9mZnNldFggPSBvZmZzZXRYO1xuICAgICAgICAgICAgdmlld0luZm8ub2Zmc2V0WSA9IG9mZnNldFk7XG4gICAgICAgICAgICBjb250cm9sbGVyLmNhbGxWaWV3TGlzdGVuZXJzKHZpZXdJbmZvKTsgVE9ETyAqL1xuXG4gICAgICAgICAgICB0aGF0LnJlcGFpbnRBbGwoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBcbiAgICAvLyBNb3JlIGFkdmFuY2VkIHpvb20gbWV0aG9kc1xuICAgIGZ1bmN0aW9uIHpvb21PbkNlbnRlcih6b29tKSB7XG4gICAgICAgIHZhciBcbiAgICAgICAgICAgIHdpZHRoID0gJChjYW52YXMpLndpZHRoKCksXG4gICAgICAgICAgICBoZWlnaHQgPSAkKGNhbnZhcykuaGVpZ2h0KClcbiAgICAgICAgICAgIFxuICAgICAgICB6b29tT25Qb2ludCh6b29tLCB3aWR0aCAvIDIsIGhlaWdodCAvIDIpO1xuICAgIH1cblxuICAgIHRoaXMuem9vbUluID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHpvb21PbkNlbnRlcih0aGlzLmdldFpvb20oKSAqIDIpO1xuICAgIH07XG5cbiAgICB0aGlzLnpvb21PdXQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgem9vbU9uQ2VudGVyKHRoaXMuZ2V0Wm9vbSgpICogMC41KTtcbiAgICB9O1xuXG4gICAgdGhpcy56b29tMTAwID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHpvb21PbkNlbnRlcigxKTtcbiAgICAgICAgY2VudGVyQ2FudmFzKCk7XG4gICAgfTtcblxuICAgIHRoaXMucmVzZXRSb3RhdGlvbiA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXJcbiAgICAgICAgICAgIGNlbnRlciA9IHt4OiBjYW52YXMud2lkdGggLyAyLCB5OiBjYW52YXMuaGVpZ2h0IC8gMn0sXG5cbiAgICAgICAgICAgIHJvdFRyYW5zID0gbmV3IENQVHJhbnNmb3JtKCk7XG4gICAgICAgIFxuICAgICAgICByb3RUcmFucy5yb3RhdGVBcm91bmRQb2ludCgtdGhpcy5nZXRSb3RhdGlvbigpLCBjZW50ZXIueCwgY2VudGVyLnkpO1xuICAgICAgICByb3RUcmFucy5tdWx0aXBseSh0cmFuc2Zvcm0pO1xuXG4gICAgICAgIHRoaXMuc2V0T2Zmc2V0KH5+cm90VHJhbnMuZ2V0VHJhbnNsYXRlWCgpLCB+fnJvdFRyYW5zLmdldFRyYW5zbGF0ZVkoKSk7XG4gICAgICAgIHRoaXMuc2V0Um90YXRpb24oMCk7XG4gICAgfTtcbiAgICBcbiAgICAvKipcbiAgICAgKiBBZGQgdGhlIHBvaW50ZXIgcHJlc3N1cmUgZmllbGQgdG8gdGhlIGdpdmVuIHBvaW50ZXIgZXZlbnQuXG4gICAgICovXG4gICAgZnVuY3Rpb24gZ2V0UG9pbnRlclByZXNzdXJlKGUpIHtcbiAgICAgICAgLy8gVXNlIFdhY29tIHByZXNzdXJlIGluIHByZWZlcmVuY2UgdG8gcG9pbnRlciBldmVudCBwcmVzc3VyZSAoaWYgcHJlc2VudClcbiAgICAgICAgaWYgKHdhY29tUGVuRG93bikge1xuICAgICAgICAgICAgcmV0dXJuIHRhYmxldC5nZXRQcmVzc3VyZSgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLyogSW4gdGhlIFBvaW50ZXIgRXZlbnRzIEFQSSwgbWljZSBoYXZlIGEgZGVmYXVsdCBwcmVzc3VyZSBvZiAwLjUsIGJ1dCB3ZSB3YW50IDEuMC4gU2luY2Ugd2UgY2FuJ3QgXG4gICAgICAgICAgICAgKiBkaXN0aW5ndWlzaCBiZXR3ZWVuIG1pY2UgYW5kIHBlbnMgYXQgdGhpcyBwb2ludCwgd2UgZG9uJ3QgaGF2ZSBhbnkgYmV0dGVyIG9wdGlvbnM6XG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIHJldHVybiBlLnByZXNzdXJlICogMjtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHZhclxuICAgICAgICBtb3VzZVdoZWVsRGVib3VuY2UgPSBmYWxzZTtcblxuICAgIGZ1bmN0aW9uIGhhbmRsZU1vdXNlV2hlZWwoZSkge1xuICAgICAgICBpZiAoZS5kZWx0YVkgIT0gMCkge1xuICAgICAgICAgICAgaWYgKCFtb3VzZVdoZWVsRGVib3VuY2UgfHwgTWF0aC5hYnMoZS5kZWx0YVkpID4gMjApIHtcbiAgICAgICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICAgICAgZmFjdG9yO1xuXG4gICAgICAgICAgICAgICAgaWYgKGUuZGVsdGFZID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBmYWN0b3IgPSAxIC8gMS4xNTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBmYWN0b3IgPSAxLjE1O1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgICAgICBjYW52YXNQb2ludCA9IG1vdXNlQ29vcmRUb0NhbnZhcyh7eDogZS5wYWdlWCwgeTogZS5wYWdlWX0pLFxuICAgICAgICAgICAgICAgICAgICBkb2NQb2ludCA9IGNvb3JkVG9Eb2N1bWVudChjYW52YXNQb2ludCk7XG5cbiAgICAgICAgICAgICAgICBpZiAoYXJ0d29yay5pc1BvaW50V2l0aGluKGRvY1BvaW50LngsIGRvY1BvaW50LnkpKSB7XG4gICAgICAgICAgICAgICAgICAgIHpvb21PblBvaW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC5nZXRab29tKCkgKiBmYWN0b3IsXG4gICAgICAgICAgICAgICAgICAgICAgICBjYW52YXNQb2ludC54LFxuICAgICAgICAgICAgICAgICAgICAgICAgY2FudmFzUG9pbnQueVxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHpvb21PblBvaW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC5nZXRab29tKCkgKiBmYWN0b3IsXG4gICAgICAgICAgICAgICAgICAgICAgICBvZmZzZXRYICsgfn4oYXJ0d29yay53aWR0aCAqIHpvb20gLyAyKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG9mZnNldFkgKyB+fihhcnR3b3JrLmhlaWdodCAqIHpvb20gLyAyKVxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIG1vdXNlV2hlZWxEZWJvdW5jZSA9IG1vdXNlV2hlZWxEZWJvdW5jZSB8fCBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICBtb3VzZVdoZWVsRGVib3VuY2UgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9LCA1MCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHZhclxuICAgICAgICBjYW52YXNDbGllbnRSZWN0O1xuXG4gICAgZnVuY3Rpb24gaGFuZGxlUG9pbnRlck1vdmUoZSkge1xuICAgICAgICAvLyBVc2UgdGhlIGNhY2hlZCBwb3NpdGlvbiBvZiB0aGUgY2FudmFzIG9uIHRoZSBwYWdlIGlmIHBvc3NpYmxlXG4gICAgICAgIGlmICghY2FudmFzQ2xpZW50UmVjdCkge1xuICAgICAgICAgICAgY2FudmFzQ2xpZW50UmVjdCA9IGNhbnZhcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhclxuICAgICAgICAgICAgbW91c2VQb3MgPSB7eDogZS5jbGllbnRYIC0gY2FudmFzQ2xpZW50UmVjdC5sZWZ0LCB5OiBlLmNsaWVudFkgLSBjYW52YXNDbGllbnRSZWN0LnRvcH07XG4gICAgICAgIFxuICAgICAgICAvLyBTdG9yZSB0aGVzZSBnbG9iYWxseSBmb3IgdGhlIGV2ZW50IGhhbmRsZXJzIHRvIHJlZmVyIHRvXG4gICAgICAgIG1vdXNlWCA9IG1vdXNlUG9zLng7XG4gICAgICAgIG1vdXNlWSA9IG1vdXNlUG9zLnk7XG5cbiAgICAgICAgaWYgKCFkb250U3RlYWxGb2N1cykge1xuICAgICAgICAgICAgcmVxdWVzdEZvY3VzSW5XaW5kb3coKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChtb3VzZURvd24pIHtcbiAgICAgICAgICAgIGFjdGl2ZU1vZGUubW91c2VEcmFnZ2VkKGUsIGdldFBvaW50ZXJQcmVzc3VyZShlKSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBhY3RpdmVNb2RlLm1vdXNlTW92ZWQoZSwgZ2V0UG9pbnRlclByZXNzdXJlKGUpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBcbiAgICBmdW5jdGlvbiBoYW5kbGVQb2ludGVyVXAoZSkge1xuICAgICAgICBtb3VzZURvd24gPSBmYWxzZTtcbiAgICAgICAgd2Fjb21QZW5Eb3duID0gZmFsc2U7XG4gICAgICAgIGFjdGl2ZU1vZGUubW91c2VSZWxlYXNlZChlKTtcbiAgICAgICAgY2FudmFzLnJlbGVhc2VQb2ludGVyQ2FwdHVyZShlLnBvaW50ZXJJZCk7XG4gICAgfVxuICAgIFxuICAgIGZ1bmN0aW9uIGhhbmRsZVBvaW50ZXJEb3duKGUpIHtcbiAgICAgICAgY2FudmFzLnNldFBvaW50ZXJDYXB0dXJlKGUucG9pbnRlcklkKTtcblxuICAgICAgICBjYW52YXNDbGllbnRSZWN0ID0gY2FudmFzLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuXG4gICAgICAgIHZhclxuICAgICAgICAgICAgbW91c2VQb3MgPSB7eDogZS5jbGllbnRYIC0gY2FudmFzQ2xpZW50UmVjdC5sZWZ0LCB5OiBlLmNsaWVudFkgLSBjYW52YXNDbGllbnRSZWN0LnRvcH07XG5cbiAgICAgICAgLy8gU3RvcmUgdGhlc2UgZ2xvYmFsbHkgZm9yIHRoZSBldmVudCBoYW5kbGVycyB0byByZWZlciB0b1xuICAgICAgICBtb3VzZVggPSBtb3VzZVBvcy54O1xuICAgICAgICBtb3VzZVkgPSBtb3VzZVBvcy55O1xuXG4gICAgICAgIGlmICghbW91c2VEb3duKSB7XG4gICAgICAgICAgICBtb3VzZURvd24gPSB0cnVlO1xuICAgICAgICAgICAgd2Fjb21QZW5Eb3duID0gdGFibGV0LmlzUGVuKCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHJlcXVlc3RGb2N1c0luV2luZG93KCk7XG4gICAgICAgICAgICBhY3RpdmVNb2RlLm1vdXNlUHJlc3NlZChlLCBnZXRQb2ludGVyUHJlc3N1cmUoZSkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIGZ1bmN0aW9uIGhhbmRsZUtleURvd24oZSkge1xuICAgICAgICBhY3RpdmVNb2RlLmtleURvd24oZSk7XG4gICAgfVxuICAgIFxuICAgIGZ1bmN0aW9uIGhhbmRsZUtleVVwKGUpIHtcbiAgICAgICAgYWN0aXZlTW9kZS5rZXlVcChlKTtcbiAgICB9XG4gICAgXG4gICAgLy8gR2V0IHRoZSBET00gZWxlbWVudCBmb3IgdGhlIGNhbnZhcyBhcmVhXG4gICAgdGhpcy5nZXRFbGVtZW50ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBjYW52YXNDb250YWluZXI7XG4gICAgfTtcbiAgICBcbiAgICAvKipcbiAgICAgKiBTY2hlZHVsZSBhIHJlcGFpbnQgZm9yIHRoZSBjdXJyZW50IHJlcGFpbnQgcmVnaW9uLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHJlcGFpbnQoKSB7XG4gICAgICAgIGlmICghc2NoZWR1bGVkUmVwYWludCkge1xuICAgICAgICAgICAgc2NoZWR1bGVkUmVwYWludCA9IHRydWU7XG4gICAgICAgICAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHRoYXQucGFpbnQoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8qKlxuICAgICAqIFNjaGVkdWxlIGEgcmVwYWludCBmb3IgdGhlIGVudGlyZSBzY3JlZW4uXG4gICAgICovXG4gICAgdGhpcy5yZXBhaW50QWxsID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJlcGFpbnRSZWdpb24ubGVmdCA9IDA7XG4gICAgICAgIHJlcGFpbnRSZWdpb24udG9wID0gMDtcbiAgICAgICAgcmVwYWludFJlZ2lvbi5yaWdodCA9IGNhbnZhcy53aWR0aDtcbiAgICAgICAgcmVwYWludFJlZ2lvbi5ib3R0b20gPSBjYW52YXMuaGVpZ2h0O1xuICAgICAgICBcbiAgICAgICAgcmVwYWludCgpO1xuICAgIH07XG4gICAgXG4gICAgLyoqXG4gICAgICogU2NoZWR1bGUgYSByZXBhaW50IGZvciBhbiBhcmVhIG9mIHRoZSBzY3JlZW4gZm9yIGxhdGVyLlxuICAgICAqIFxuICAgICAqIEBwYXJhbSByZWN0IENQUmVjdCBSZWdpb24gdGhhdCBzaG91bGQgYmUgcmVwYWludGVkIHVzaW5nIGRpc3BsYXkgY29vcmRpbmF0ZXNcbiAgICAgKi9cbiAgICBmdW5jdGlvbiByZXBhaW50UmVjdChyZWN0KSB7XG4gICAgICAgIHJlcGFpbnRSZWdpb24udW5pb24ocmVjdCk7XG4gICAgICAgIFxuICAgICAgICByZXBhaW50KCk7XG4gICAgfTtcbiAgICBcbiAgICB0aGlzLnBhaW50ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhclxuICAgICAgICAgICAgZHJhd2luZ1dhc0NsaXBwZWQgPSBmYWxzZTtcbiAgICAgICAgXG4gICAgICAgIHNjaGVkdWxlZFJlcGFpbnQgPSBmYWxzZTtcbiAgICAgICAgXG4gICAgICAgIC8qIENsaXAgZHJhd2luZyB0byB0aGUgYXJlYSBvZiB0aGUgc2NyZWVuIHdlIHdhbnQgdG8gcmVwYWludCAqL1xuICAgICAgICBpZiAoIXJlcGFpbnRSZWdpb24uaXNFbXB0eSgpKSB7XG4gICAgICAgICAgICBjYW52YXNDb250ZXh0LnNhdmUoKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKGNhbnZhc0NvbnRleHQuY2xpcCkge1xuICAgICAgICAgICAgICAgIGNhbnZhc0NvbnRleHQuYmVnaW5QYXRoKCk7XG5cbiAgICAgICAgICAgICAgICByZXBhaW50UmVnaW9uLmxlZnQgPSByZXBhaW50UmVnaW9uLmxlZnQgfCAwOyBcbiAgICAgICAgICAgICAgICByZXBhaW50UmVnaW9uLnRvcCA9IHJlcGFpbnRSZWdpb24udG9wIHwgMDtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBjYW52YXNDb250ZXh0LnJlY3QoXG4gICAgICAgICAgICAgICAgICAgIHJlcGFpbnRSZWdpb24ubGVmdCxcbiAgICAgICAgICAgICAgICAgICAgcmVwYWludFJlZ2lvbi50b3AsXG4gICAgICAgICAgICAgICAgICAgIE1hdGguY2VpbChyZXBhaW50UmVnaW9uLmdldFdpZHRoKCkpLFxuICAgICAgICAgICAgICAgICAgICBNYXRoLmNlaWwocmVwYWludFJlZ2lvbi5nZXRIZWlnaHQoKSlcbiAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgY2FudmFzQ29udGV4dC5jbGlwKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGRyYXdpbmdXYXNDbGlwcGVkID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLyogQ29weSBwaXhlbHMgdGhhdCBjaGFuZ2VkIGluIHRoZSBkb2N1bWVudCBpbnRvIG91ciBsb2NhbCBmdXNlZCBpbWFnZSBjYWNoZSAqL1xuICAgICAgICBpZiAoIWFydHdvcmtVcGRhdGVSZWdpb24uaXNFbXB0eSgpKSB7XG4gICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICBpbWFnZURhdGEgPSBhcnR3b3JrLmZ1c2lvbkxheWVycygpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBhcnR3b3JrQ2FudmFzQ29udGV4dC5wdXRJbWFnZURhdGEoXG4gICAgICAgICAgICAgICAgaW1hZ2VEYXRhLCAwLCAwLCBhcnR3b3JrVXBkYXRlUmVnaW9uLmxlZnQsIGFydHdvcmtVcGRhdGVSZWdpb24udG9wLCBhcnR3b3JrVXBkYXRlUmVnaW9uLnJpZ2h0IC0gYXJ0d29ya1VwZGF0ZVJlZ2lvbi5sZWZ0LCBhcnR3b3JrVXBkYXRlUmVnaW9uLmJvdHRvbSAtIGFydHdvcmtVcGRhdGVSZWdpb24udG9wXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBhcnR3b3JrVXBkYXRlUmVnaW9uLm1ha2VFbXB0eSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgY2FudmFzQ29udGV4dC5maWxsU3R5bGUgPSAnIzYwNjA2MCc7XG4gICAgICAgIGNhbnZhc0NvbnRleHQuZmlsbFJlY3QoMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTtcbiAgICAgICAgXG4gICAgICAgIC8vIFRyYW5zZm9ybSB0aGUgY29vcmRpbmF0ZSBzeXN0ZW0gdG8gYnJpbmcgdGhlIGRvY3VtZW50IGludG8gdGhlIHJpZ2h0IHBvc2l0aW9uIG9uIHRoZSBzY3JlZW4gKHRyYW5zbGF0ZS96b29tL2V0YylcbiAgICAgICAgY2FudmFzQ29udGV4dC5zYXZlKCk7XG4gICAgICAgIHtcbiAgICAgICAgICAgIGNhbnZhc0NvbnRleHQuc2V0VHJhbnNmb3JtKHRyYW5zZm9ybS5tWzBdLCB0cmFuc2Zvcm0ubVsxXSwgdHJhbnNmb3JtLm1bMl0sIHRyYW5zZm9ybS5tWzNdLCB0cmFuc2Zvcm0ubVs0XSwgdHJhbnNmb3JtLm1bNV0pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjYW52YXNDb250ZXh0LmZpbGxTdHlsZSA9IGNoZWNrZXJib2FyZFBhdHRlcm47XG4gICAgICAgICAgICBjYW52YXNDb250ZXh0LmZpbGxSZWN0KDAsIDAsIGFydHdvcmsud2lkdGgsIGFydHdvcmsuaGVpZ2h0KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY2FudmFzQ29udGV4dC5kcmF3SW1hZ2UoXG4gICAgICAgICAgICAgICAgYXJ0d29ya0NhbnZhcywgMCwgMCwgYXJ0d29ya0NhbnZhcy53aWR0aCwgYXJ0d29ya0NhbnZhcy5oZWlnaHRcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgICAgY2FudmFzQ29udGV4dC5yZXN0b3JlKCk7XG4gICAgICAgIFxuICAgICAgICAvLyBUaGUgcmVzdCBvZiB0aGUgZHJhd2luZyBoYXBwZW5zIHVzaW5nIHRoZSBvcmlnaW5hbCBzY3JlZW4gY29vcmRpbmF0ZSBzeXN0ZW1cbiAgICAgICAgXG4gICAgICAgIGNhbnZhc0NvbnRleHQuZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uID0gJ2V4Y2x1c2lvbic7XG4gICAgICAgIFxuICAgICAgICBpZiAoY2FudmFzQ29udGV4dC5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb24gPT0gXCJleGNsdXNpb25cIikge1xuICAgICAgICAgICAgLy8gV2hpdGUgKyBleGNsdXNpb24gaW52ZXJ0cyB0aGUgY29sb3JzIHVuZGVybmVhdGgsIGdpdmluZyB1cyBnb29kIGNvbnRyYXN0XG4gICAgICAgICAgICBjYW52YXNDb250ZXh0LnN0cm9rZVN0eWxlID0gJ3doaXRlJztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIElFIEVkZ2UgZG9lc24ndCBzdXBwb3J0IEV4Y2x1c2lvbiwgc28gaG93IGFib3V0IERpZmZlcmVuY2Ugd2l0aCBtaWQtZ3JleSBpbnN0ZWFkXG4gICAgICAgICAgICAvLyBUaGlzIGlzIHZpc2libGUgb24gYmxhY2sgYW5kIHdoaXRlLCBidXQgZGlzYXBwZWFycyBvbiBhIGdyZXkgYmFja2dyb3VuZFxuICAgICAgICAgICAgY2FudmFzQ29udGV4dC5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb24gPSAnZGlmZmVyZW5jZSc7XG4gICAgICAgICAgICBjYW52YXNDb250ZXh0LnN0cm9rZVN0eWxlID0gJyM4ODgnO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBGb3Igc3VwZXIgZHVtYiBicm93c2VycyAob25seSBzdXBwb3J0IHNvdXJjZS1vdmVyKSwgYXQgbGVhc3QgZG9uJ3QgbWFrZSB0aGUgY3Vyc29yIGludmlzaWJsZSBvbiBhIHdoaXRlIEJHIVxuICAgICAgICAgICAgaWYgKGNhbnZhc0NvbnRleHQuZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uICE9IFwiZGlmZmVyZW5jZVwiKSB7XG4gICAgICAgICAgICAgICAgY2FudmFzQ29udGV4dC5zdHJva2VTdHlsZSA9ICdibGFjayc7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY2FudmFzQ29udGV4dC5saW5lV2lkdGggPSAxLjA7XG4gICAgICAgIFxuICAgICAgICAvLyBEcmF3IHNlbGVjdGlvblxuICAgICAgICBpZiAoIWFydHdvcmsuZ2V0U2VsZWN0aW9uKCkuaXNFbXB0eSgpKSB7XG4gICAgICAgICAgICBjYW52YXNDb250ZXh0LnNldExpbmVEYXNoKFszLCAyXSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHBsb3RTZWxlY3Rpb25SZWN0KGNhbnZhc0NvbnRleHQsIGFydHdvcmsuZ2V0U2VsZWN0aW9uKCkpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjYW52YXNDb250ZXh0LnNldExpbmVEYXNoKFtdKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gRHJhdyBncmlkXG4gICAgICAgIGlmIChzaG93R3JpZCkge1xuICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgYm91bmRzID0gYXJ0d29yay5nZXRCb3VuZHMoKSxcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBncmlkVmlzdWFsUGl0Y2ggPSB6b29tICogZ3JpZFNpemU7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8qIElmIHRoZSBncmlkIGlzIGdvaW5nIHRvIGJlIG1pbmlzY3VsZSBvbiB0aGUgc2NyZWVuIChiYXNpY2FsbHkganVzdCBjb3ZlcmluZy9pbnZlcnRpbmcgdGhlIGVudGlyZSBhcnR3b3JrLFxuICAgICAgICAgICAgICogZG8gbm90IHBhaW50IGl0LlxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBpZiAoZ3JpZFZpc3VhbFBpdGNoID4gMikge1xuICAgICAgICAgICAgICAgIGNhbnZhc0NvbnRleHQuYmVnaW5QYXRoKCk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gVmVydGljYWwgbGluZXNcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gZ3JpZFNpemUgLSAxOyBpIDwgYm91bmRzLnJpZ2h0OyBpICs9IGdyaWRTaXplKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgICAgICAgICAgcDEgPSBjb29yZFRvRGlzcGxheSh7eDogaSwgeTogYm91bmRzLnRvcH0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgcDIgPSBjb29yZFRvRGlzcGxheSh7eDogaSwgeTogYm91bmRzLmJvdHRvbX0pO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgY2FudmFzQ29udGV4dC5tb3ZlVG8ocDEueCArIDAuNSwgcDEueSArIDAuNSk7XG4gICAgICAgICAgICAgICAgICAgIGNhbnZhc0NvbnRleHQubGluZVRvKHAyLnggKyAwLjUsIHAyLnkgKyAwLjUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICAvLyBIb3Jpem9udGFsIGxpbmVzXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IGdyaWRTaXplIC0gMTsgaSA8IGJvdW5kcy5ib3R0b207IGkgKz0gZ3JpZFNpemUpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgICAgICAgICBwMSA9IGNvb3JkVG9EaXNwbGF5KHt4OiAwLCB5OiBpfSksXG4gICAgICAgICAgICAgICAgICAgICAgICBwMiA9IGNvb3JkVG9EaXNwbGF5KHt4OiBib3VuZHMucmlnaHQsIHk6IGl9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBjYW52YXNDb250ZXh0Lm1vdmVUbyhwMS54ICsgMC41LCBwMS55ICsgMC41KTtcbiAgICAgICAgICAgICAgICAgICAgY2FudmFzQ29udGV4dC5saW5lVG8ocDIueCArIDAuNSwgcDIueSArIDAuNSk7XG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIGNhbnZhc0NvbnRleHQuc3Ryb2tlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIEFkZGl0aW9uYWwgZHJhd2luZyBieSB0aGUgY3VycmVudCBtb2RlXG4gICAgICAgIGFjdGl2ZU1vZGUucGFpbnQoY2FudmFzQ29udGV4dCk7XG4gICAgICAgIFxuICAgICAgICBjYW52YXNDb250ZXh0Lmdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbiA9ICdzb3VyY2Utb3Zlcic7XG4gICAgICAgIFxuICAgICAgICBpZiAoZHJhd2luZ1dhc0NsaXBwZWQpIHtcbiAgICAgICAgICAgIHJlcGFpbnRSZWdpb24ubWFrZUVtcHR5KCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNhbnZhc0NvbnRleHQucmVzdG9yZSgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBcbiAgICB0aGlzLnNob3dHcmlkID0gZnVuY3Rpb24oc2hvdykge1xuICAgICAgICBzaG93R3JpZCA9IHNob3c7XG4gICAgICAgIHRoaXMucmVwYWludEFsbCgpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBSZXNpemUgdGhlIGNhbnZhcyBhcmVhIHRvIHRoZSBnaXZlbiBoZWlnaHQgKGluIHBpeGVscylcbiAgICAgKlxuICAgICAqIEBwYXJhbSBoZWlnaHQgTmV3IGNhbnZhcyBhcmVhIGhlaWdodCBpbiBwaXhlbHNcbiAgICAgKi9cbiAgICB0aGlzLnJlc2l6ZSA9IGZ1bmN0aW9uKGhlaWdodCkge1xuICAgICAgICAvLyBMZWF2ZSByb29tIGZvciB0aGUgYm90dG9tIHNjcm9sbGJhclxuICAgICAgICBoZWlnaHQgLT0gJChjYW52YXNDb250YWluZXJCb3R0b20pLm91dGVySGVpZ2h0KCk7XG5cbiAgICAgICAgJChjYW52YXMpLmNzcygnaGVpZ2h0JywgaGVpZ2h0ICsgXCJweFwiKTtcblxuICAgICAgICBjYW52YXMud2lkdGggPSAkKGNhbnZhcykud2lkdGgoKTtcbiAgICAgICAgY2FudmFzLmhlaWdodCA9IGhlaWdodDtcblxuICAgICAgICBjYW52YXNDbGllbnRSZWN0ID0gbnVsbDtcblxuICAgICAgICBjZW50ZXJDYW52YXMoKTtcblxuICAgICAgICAvLyBJbnRlcnBvbGF0aW9uIHByb3BlcnR5IGdldHMgcmVzZXQgd2hlbiBjYW52YXMgcmVzaXplc1xuICAgICAgICB0aGlzLnNldEludGVycG9sYXRpb24oaW50ZXJwb2xhdGlvbik7XG5cbiAgICAgICAgdGhpcy5yZXBhaW50QWxsKCk7XG4gICAgfTtcblxuICAgIGNvbnRyb2xsZXIub24oXCJ0b29sQ2hhbmdlXCIsIGZ1bmN0aW9uKHRvb2wsIHRvb2xJbmZvKSB7XG4gICAgICAgIHZhclxuICAgICAgICAgICAgc3BhY2VQcmVzc2VkID0ga2V5LmlzUHJlc3NlZChcInNwYWNlXCIpO1xuXG4gICAgICAgIGlmIChjdXJTZWxlY3RlZE1vZGUgPT0gY3VyRHJhd01vZGUpIHtcbiAgICAgICAgICAgIGN1clNlbGVjdGVkTW9kZSA9IGRyYXdpbmdNb2Rlc1t0b29sSW5mby5zdHJva2VNb2RlXTtcbiAgICAgICAgfVxuICAgICAgICBjdXJEcmF3TW9kZSA9IGRyYXdpbmdNb2Rlc1t0b29sSW5mby5zdHJva2VNb2RlXTtcblxuICAgICAgICBpZiAoIXNwYWNlUHJlc3NlZCAmJiBtb3VzZUluKSB7XG4gICAgICAgICAgICBicnVzaFByZXZpZXcgPSB0cnVlO1xuXG4gICAgICAgICAgICB2YXIgXG4gICAgICAgICAgICAgICAgcmVjdCA9IGdldEJydXNoUHJldmlld092YWwoKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgcmVjdC5ncm93KDIsIDIpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAob2xkUHJldmlld1JlY3QgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHJlY3QudW5pb24ob2xkUHJldmlld1JlY3QpO1xuICAgICAgICAgICAgICAgIG9sZFByZXZpZXdSZWN0ID0gbnVsbDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmVwYWludFJlY3QocmVjdCk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBcbiAgICBjb250cm9sbGVyLm9uKFwibW9kZUNoYW5nZVwiLCBmdW5jdGlvbihtb2RlKSB7XG4gICAgICAgIHN3aXRjaCAobW9kZSkge1xuICAgICAgICAgICAgY2FzZSBDaGlja2VuUGFpbnQuTV9EUkFXOlxuICAgICAgICAgICAgICAgIGN1clNlbGVjdGVkTW9kZSA9IGN1ckRyYXdNb2RlO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgIFxuICAgICAgICAgICAgY2FzZSBDaGlja2VuUGFpbnQuTV9GTE9PREZJTEw6XG4gICAgICAgICAgICAgICAgY3VyU2VsZWN0ZWRNb2RlID0gZmxvb2RGaWxsTW9kZTtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgY2FzZSBDaGlja2VuUGFpbnQuTV9HUkFESUVOVEZJTEw6XG4gICAgICAgICAgICAgICAgY3VyU2VsZWN0ZWRNb2RlID0gZ3JhZGllbnRGaWxsTW9kZTtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgY2FzZSBDaGlja2VuUGFpbnQuTV9SRUNUX1NFTEVDVElPTjpcbiAgICAgICAgICAgICAgICBjdXJTZWxlY3RlZE1vZGUgPSByZWN0U2VsZWN0aW9uTW9kZTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICBcbiAgICAgICAgICAgIGNhc2UgQ2hpY2tlblBhaW50Lk1fTU9WRV9UT09MOlxuICAgICAgICAgICAgICAgIGN1clNlbGVjdGVkTW9kZSA9IG1vdmVUb29sTW9kZTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICBcbiAgICAgICAgICAgIGNhc2UgQ2hpY2tlblBhaW50Lk1fUk9UQVRFX0NBTlZBUzpcbiAgICAgICAgICAgICAgICBjdXJTZWxlY3RlZE1vZGUgPSByb3RhdGVDYW52YXNNb2RlO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgIFxuICAgICAgICAgICAgY2FzZSBDaGlja2VuUGFpbnQuTV9DT0xPUl9QSUNLRVI6XG4gICAgICAgICAgICAgICAgY3VyU2VsZWN0ZWRNb2RlID0gY29sb3JQaWNrZXJNb2RlO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgXG4gICAgLy9cbiAgICAvLyBNb2RlcyBzeXN0ZW06IG1vZGVzIGNvbnRyb2wgdGhlIHdheSB0aGUgR1VJIGlzIHJlYWN0aW5nIHRvIHRoZSB1c2VyIGlucHV0XG4gICAgLy8gQWxsIHRoZSB0b29scyBhcmUgaW1wbGVtZW50ZWQgdGhyb3VnaCBtb2Rlc1xuICAgIC8vXG4gICAgXG4gICAgZGVmYXVsdE1vZGUgPSBuZXcgQ1BEZWZhdWx0TW9kZSgpO1xuICAgIGNvbG9yUGlja2VyTW9kZSA9IG5ldyBDUENvbG9yUGlja2VyTW9kZSgpO1xuICAgIG1vdmVDYW52YXNNb2RlID0gbmV3IENQTW92ZUNhbnZhc01vZGUoKTtcbiAgICByb3RhdGVDYW52YXNNb2RlID0gbmV3IENQUm90YXRlQ2FudmFzTW9kZSgpO1xuICAgIGZsb29kRmlsbE1vZGUgPSBuZXcgQ1BGbG9vZEZpbGxNb2RlKCk7XG4gICAgZ3JhZGllbnRGaWxsTW9kZSA9IG5ldyBDUEdyYWRpZW50RmlsbE1vZGUoKTtcbiAgICByZWN0U2VsZWN0aW9uTW9kZSA9IG5ldyBDUFJlY3RTZWxlY3Rpb25Nb2RlKCk7XG4gICAgbW92ZVRvb2xNb2RlID0gbmV3IENQTW92ZVRvb2xNb2RlKCk7XG5cbiAgICAvLyB0aGlzIG11c3QgY29ycmVzcG9uZCB0byB0aGUgc3Ryb2tlIG1vZGVzIGRlZmluZWQgaW4gQ1BUb29sSW5mb1xuICAgIGRyYXdpbmdNb2RlcyA9IFtuZXcgQ1BGcmVlaGFuZE1vZGUoKSwgbmV3IENQTGluZU1vZGUoKSwgbmV3IENQQmV6aWVyTW9kZSgpXTtcblxuICAgIGN1ckRyYXdNb2RlID0gZHJhd2luZ01vZGVzW0NQQnJ1c2hJbmZvLlNNX0ZSRUVIQU5EXTtcbiAgICBjdXJTZWxlY3RlZE1vZGUgPSBjdXJEcmF3TW9kZTtcbiAgICBhY3RpdmVNb2RlID0gZGVmYXVsdE1vZGU7XG4gICAgXG4gICAgYXJ0d29ya0NhbnZhcy53aWR0aCA9IGFydHdvcmsud2lkdGg7XG4gICAgYXJ0d29ya0NhbnZhcy5oZWlnaHQgPSBhcnR3b3JrLmhlaWdodDtcbiAgICBcbiAgICBjYW52YXMud2lkdGggPSA4MDA7XG4gICAgY2FudmFzLmhlaWdodCA9IDkwMDtcbiAgICBjYW52YXMuY2xhc3NOYW1lID0gXCJjaGlja2VucGFpbnQtY2FudmFzXCI7XG4gICAgY2FudmFzLnNldEF0dHJpYnV0ZShcInRvdWNoLWFjdGlvblwiLCBcIm5vbmVcIik7XG4gICAgXG4gICAgaWYgKCFjYW52YXNDb250ZXh0LnNldExpbmVEYXNoKSB7IFxuICAgICAgICBjYW52YXNDb250ZXh0LnNldExpbmVEYXNoID0gZnVuY3Rpb24gKCkge30gLy8gRm9yIElFIDEwIGFuZCBvbGRlclxuICAgIH1cbiAgICBcbiAgICBjYW52YXMuYWRkRXZlbnRMaXN0ZW5lcihcImNvbnRleHRtZW51XCIsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH0pO1xuICAgIFxuICAgIGNhbnZhcy5hZGRFdmVudExpc3RlbmVyKFwibW91c2VlbnRlclwiLCBmdW5jdGlvbigpIHtcbiAgICAgICAgbW91c2VJbiA9IHRydWU7XG4gICAgfSk7XG4gICAgXG4gICAgY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWxlYXZlXCIsIGZ1bmN0aW9uKCkge1xuICAgICAgICBtb3VzZUluID0gZmFsc2U7XG4gICAgICAgIFxuICAgICAgICBpZiAoIW1vdXNlRG93bikge1xuICAgICAgICAgICAgdGhhdC5yZXBhaW50QWxsKCk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBcbiAgICBjYW52YXMuYWRkRXZlbnRMaXN0ZW5lcihcInBvaW50ZXJkb3duXCIsIGhhbmRsZVBvaW50ZXJEb3duKTtcbiAgICBjYW52YXMuYWRkRXZlbnRMaXN0ZW5lcihcInBvaW50ZXJtb3ZlXCIsIGhhbmRsZVBvaW50ZXJNb3ZlKTtcbiAgICBjYW52YXMuYWRkRXZlbnRMaXN0ZW5lcihcInBvaW50ZXJ1cFwiLCBoYW5kbGVQb2ludGVyVXApO1xuICAgIGNhbnZhcy5hZGRFdmVudExpc3RlbmVyKFwid2hlZWxcIiwgaGFuZGxlTW91c2VXaGVlbClcbiAgICBcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBoYW5kbGVLZXlEb3duKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5dXBcIiwgaGFuZGxlS2V5VXApO1xuXG4gICAgLyogV29ya2Fyb3VuZCBmb3IgQ2hyb21lIE1hYyBidWcgdGhhdCBjYXVzZXMgY2FudmFzIHRvIGJlIGRpc3Bvc2VkIGFuZCBuZXZlciByZWNyZWF0ZWQgd2hlbiB0YWIgaXMgc3dpdGNoZWQgaW50byB0aGUgXG4gICAgICogYmFja2dyb3VuZCBodHRwczovL2J1Z3MuY2hyb21pdW0ub3JnL3AvY2hyb21pdW0vaXNzdWVzL2RldGFpbD9pZD01ODg0MzRcbiAgICAgKi9cbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwidmlzaWJpbGl0eWNoYW5nZVwiLCBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyXG4gICAgICAgICAgICBvbGRIZWlnaHQgPSBjYW52YXMuaGVpZ2h0ICsgJChjYW52YXNDb250YWluZXJCb3R0b20pLm91dGVySGVpZ2h0KCk7XG5cbiAgICAgICAgY2FudmFzLndpZHRoID0gMTtcbiAgICAgICAgY2FudmFzLmhlaWdodCA9IDE7XG5cbiAgICAgICAgdGhhdC5yZXNpemUob2xkSGVpZ2h0KTtcbiAgICB9LCBmYWxzZSk7XG4gICAgXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJzY3JvbGxcIiwgZnVuY3Rpb24oKSB7XG4gICAgICAgIGNhbnZhc0NsaWVudFJlY3QgPSBudWxsO1xuICAgIH0pO1xuICAgIFxuICAgIGNhbnZhcy5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgaWYgKGUuYnV0dG9uID09IEJVVFRPTl9XSEVFTCkge1xuICAgICAgICAgICAgLy8gUHJldmVudCBtaWRkbGUtbW91c2Ugc2Nyb2xsaW5nIGluIEZpcmVmb3hcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIFxuICAgIGFydHdvcmsub24oXCJ1cGRhdGVSZWdpb25cIiwgZnVuY3Rpb24ocmVnaW9uKSB7XG4gICAgICAgIGFydHdvcmtVcGRhdGVSZWdpb24udW5pb24ocmVnaW9uKTtcbiAgICAgICAgXG4gICAgICAgIHJlcGFpbnRSZWN0KGdldFJlZnJlc2hBcmVhKGFydHdvcmtVcGRhdGVSZWdpb24pKTtcbiAgICB9KTtcbiAgICBcbiAgICBob3J6U2Nyb2xsLm9uKFwidmFsdWVDaGFuZ2VkXCIsIGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgIHZhciBcbiAgICAgICAgICAgIHAgPSB0aGF0LmdldE9mZnNldCgpO1xuICAgICAgICBcbiAgICAgICAgdGhhdC5zZXRPZmZzZXQoLXZhbHVlLCBwLnkpO1xuICAgIH0pO1xuICAgIFxuICAgIHZlcnRTY3JvbGwub24oXCJ2YWx1ZUNoYW5nZWRcIiwgZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgdmFyIFxuICAgICAgICAgICAgcCA9IHRoYXQuZ2V0T2Zmc2V0KCk7XG4gICAgICAgIFxuICAgICAgICB0aGF0LnNldE9mZnNldChwLngsIC12YWx1ZSk7XG4gICAgfSk7XG4gICAgXG4gICAgdGhpcy5zZXRJbnRlcnBvbGF0aW9uKGZhbHNlKTtcblxuICAgIHZhclxuICAgICAgICBjYW52YXNTcGFjaW5nV3JhcHBlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgXG4gICAgY2FudmFzU3BhY2luZ1dyYXBwZXIuY2xhc3NOYW1lID0gJ2NoaWNrZW5wYWludC1jYW52YXMtY29udGFpbmVyLXdyYXBwZXInO1xuICAgIGNhbnZhc1NwYWNpbmdXcmFwcGVyLmFwcGVuZENoaWxkKGNhbnZhcyk7XG4gICAgXG4gICAgY2FudmFzQ29udGFpbmVyVG9wLmNsYXNzTmFtZSA9ICdjaGlja2VucGFpbnQtY2FudmFzLWNvbnRhaW5lci10b3AnO1xuICAgIGNhbnZhc0NvbnRhaW5lclRvcC5hcHBlbmRDaGlsZChjYW52YXNTcGFjaW5nV3JhcHBlcik7XG4gICAgY2FudmFzQ29udGFpbmVyVG9wLmFwcGVuZENoaWxkKHZlcnRTY3JvbGwuZ2V0RWxlbWVudCgpKTtcbiAgICBcbiAgICBjYW52YXNDb250YWluZXJCb3R0b20uY2xhc3NOYW1lID0gJ2NoaWNrZW5wYWludC1jYW52YXMtY29udGFpbmVyLWJvdHRvbSc7XG4gICAgY2FudmFzQ29udGFpbmVyQm90dG9tLmFwcGVuZENoaWxkKGhvcnpTY3JvbGwuZ2V0RWxlbWVudCgpKTtcbiAgICBcbiAgICBjYW52YXNDb250YWluZXIuYXBwZW5kQ2hpbGQoY2FudmFzQ29udGFpbmVyVG9wKTtcbiAgICBjYW52YXNDb250YWluZXIuYXBwZW5kQ2hpbGQoY2FudmFzQ29udGFpbmVyQm90dG9tKTtcbiAgICBcbiAgICBjb250cm9sbGVyLnNldENhbnZhcyh0aGlzKTtcbn0iLCIvKlxuICAgIENoaWNrZW5QYWludFxuICAgIFxuICAgIENoaWNrZW5QYWludCBpcyBhIHRyYW5zbGF0aW9uIG9mIENoaWJpUGFpbnQgZnJvbSBKYXZhIHRvIEphdmFTY3JpcHRcbiAgICBieSBOaWNob2xhcyBTaGVybG9jayAvIENoaWNrZW4gU21vb3RoaWUuXG4gICAgXG4gICAgQ2hpYmlQYWludCBpcyBDb3B5cmlnaHQgKGMpIDIwMDYtMjAwOCBNYXJjIFNjaGVmZXJcblxuICAgIENoaWNrZW5QYWludCBpcyBmcmVlIHNvZnR3YXJlOiB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3IgbW9kaWZ5XG4gICAgaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBhcyBwdWJsaXNoZWQgYnlcbiAgICB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uLCBlaXRoZXIgdmVyc2lvbiAzIG9mIHRoZSBMaWNlbnNlLCBvclxuICAgIChhdCB5b3VyIG9wdGlvbikgYW55IGxhdGVyIHZlcnNpb24uXG5cbiAgICBDaGlja2VuUGFpbnQgaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCxcbiAgICBidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZlxuICAgIE1FUkNIQU5UQUJJTElUWSBvciBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS4gIFNlZSB0aGVcbiAgICBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9yZSBkZXRhaWxzLlxuXG4gICAgWW91IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2VcbiAgICBhbG9uZyB3aXRoIENoaWNrZW5QYWludC4gSWYgbm90LCBzZWUgPGh0dHA6Ly93d3cuZ251Lm9yZy9saWNlbnNlcy8+LlxuKi9cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gQ1BDaGVja2JveChzdGF0ZSwgdGl0bGUpIHtcbiAgICB2YXJcbiAgICAgICAgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyksXG4gICAgICAgIGNhbnZhc0NvbnRleHQgPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKSxcbiAgICAgICAgXG4gICAgICAgIHRoYXQgPSB0aGlzO1xuICAgIFxuICAgIHRoaXMuc3RhdGUgPSBzdGF0ZSB8fCBmYWxzZTtcbiAgICBcbiAgICBmdW5jdGlvbiBwYWludCgpIHtcbiAgICAgICAgdmFyIFxuICAgICAgICAgICAgd2lkdGggPSBjYW52YXMud2lkdGgsXG4gICAgICAgICAgICBoZWlnaHQgPSBjYW52YXMuaGVpZ2h0O1xuXG4gICAgICAgIGNhbnZhc0NvbnRleHQuY2xlYXJSZWN0KDAsIDAsIHdpZHRoLCBoZWlnaHQpO1xuICAgICAgICBcbiAgICAgICAgY2FudmFzQ29udGV4dC5iZWdpblBhdGgoKTtcbiAgICAgICAgY2FudmFzQ29udGV4dC5hcmMod2lkdGggLyAyICsgMSwgd2lkdGggLyAyICsgMSwgTWF0aC5tYXgod2lkdGggLyAyLCAxKSAtIDIsIDAsIE1hdGguUEkgKiAyKTtcbiAgICAgICAgXG4gICAgICAgIGlmICh0aGF0LnN0YXRlKSB7XG4gICAgICAgICAgICBjYW52YXNDb250ZXh0LmZpbGwoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNhbnZhc0NvbnRleHQuc3Ryb2tlKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLnNldFZhbHVlID0gZnVuY3Rpb24oYikge1xuICAgICAgICBpZiAodGhpcy5zdGF0ZSAhPSBiKSB7XG4gICAgICAgICAgICB0aGlzLnN0YXRlID0gYjtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy5lbWl0RXZlbnQoJ3ZhbHVlQ2hhbmdlJywgW2JdKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgcGFpbnQoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgXG4gICAgdGhpcy5nZXRFbGVtZW50ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBjYW52YXM7XG4gICAgfVxuICAgIFxuICAgIGNhbnZhcy5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgdGhhdC5zZXRWYWx1ZSghdGhhdC5zdGF0ZSk7XG4gICAgfSk7XG4gICAgXG4gICAgY2FudmFzLnRpdGxlID0gdGl0bGUgfHwgXCJcIjtcbiAgICBjYW52YXMuY2xhc3NOYW1lID0gJ2NoaWNrZW5wYWludC1jaGVja2JveCc7XG4gICAgXG4gICAgY2FudmFzLndpZHRoID0gMjA7XG4gICAgY2FudmFzLmhlaWdodCA9IDIwO1xuICAgIFxuICAgIGNhbnZhcy5maWxsU3R5bGUgPSAnYmxhY2snO1xuICAgIGNhbnZhcy5zdHJva2VTdHlsZSA9ICdibGFjayc7XG4gICAgXG4gICAgcGFpbnQoKTtcbn07XG5cbkNQQ2hlY2tib3gucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShFdmVudEVtaXR0ZXIucHJvdG90eXBlKTtcbkNQQ2hlY2tib3gucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gQ1BDaGVja2JveDsiLCIvKlxuICAgIENoaWNrZW5QYWludFxuICAgIFxuICAgIENoaWNrZW5QYWludCBpcyBhIHRyYW5zbGF0aW9uIG9mIENoaWJpUGFpbnQgZnJvbSBKYXZhIHRvIEphdmFTY3JpcHRcbiAgICBieSBOaWNob2xhcyBTaGVybG9jayAvIENoaWNrZW4gU21vb3RoaWUuXG4gICAgXG4gICAgQ2hpYmlQYWludCBpcyBDb3B5cmlnaHQgKGMpIDIwMDYtMjAwOCBNYXJjIFNjaGVmZXJcblxuICAgIENoaWNrZW5QYWludCBpcyBmcmVlIHNvZnR3YXJlOiB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3IgbW9kaWZ5XG4gICAgaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBhcyBwdWJsaXNoZWQgYnlcbiAgICB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uLCBlaXRoZXIgdmVyc2lvbiAzIG9mIHRoZSBMaWNlbnNlLCBvclxuICAgIChhdCB5b3VyIG9wdGlvbikgYW55IGxhdGVyIHZlcnNpb24uXG5cbiAgICBDaGlja2VuUGFpbnQgaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCxcbiAgICBidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZlxuICAgIE1FUkNIQU5UQUJJTElUWSBvciBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS4gIFNlZSB0aGVcbiAgICBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9yZSBkZXRhaWxzLlxuXG4gICAgWW91IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2VcbiAgICBhbG9uZyB3aXRoIENoaWNrZW5QYWludC4gSWYgbm90LCBzZWUgPGh0dHA6Ly93d3cuZ251Lm9yZy9saWNlbnNlcy8+LlxuKi9cblxuaW1wb3J0IENQUGFsZXR0ZSBmcm9tICcuL0NQUGFsZXR0ZSc7XG5pbXBvcnQgQ1BDb2xvclNlbGVjdCBmcm9tICcuL0NQQ29sb3JTZWxlY3QnO1xuaW1wb3J0IENQQ29sb3JTbGlkZXIgZnJvbSAnLi9DUENvbG9yU2xpZGVyJztcblxuaW1wb3J0IENQQ29sb3IgZnJvbSBcIi4uL3V0aWwvQ1BDb2xvclwiO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBDUENvbG9yUGFsZXR0ZShjcENvbnRyb2xsZXIpIHtcbiAgICBDUFBhbGV0dGUuY2FsbCh0aGlzLCBjcENvbnRyb2xsZXIsIFwiY29sb3JcIiwgXCJDb2xvclwiKTtcbiAgICBcbiAgICB2YXIgXG4gICAgICAgIGNvbG9yU2VsZWN0ID0gbmV3IENQQ29sb3JTZWxlY3QoY3BDb250cm9sbGVyKSxcbiAgICAgICAgY29sb3JTbGlkZXIgPSBuZXcgQ1BDb2xvclNsaWRlcihjcENvbnRyb2xsZXIsIGNvbG9yU2VsZWN0KSxcbiAgICAgICAgY29sb3JTaG93ID0gbmV3IENQQ29sb3JTaG93KGNwQ29udHJvbGxlciksXG4gICAgXG4gICAgICAgIGJvZHkgPSB0aGlzLmdldEJvZHlFbGVtZW50KCksXG4gICAgICAgIHRvcFNlY3Rpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIFxuICAgIHRvcFNlY3Rpb24uY2xhc3NOYW1lID0gJ2NoaWNrZW5wYWludC1jb2xvcnBpY2tlci10b3AnO1xuICAgIFxuICAgIHRvcFNlY3Rpb24uYXBwZW5kQ2hpbGQoY29sb3JTZWxlY3QuZ2V0RWxlbWVudCgpKTtcbiAgICB0b3BTZWN0aW9uLmFwcGVuZENoaWxkKGNvbG9yU2xpZGVyLmdldEVsZW1lbnQoKSk7XG4gICAgXG4gICAgYm9keS5hcHBlbmRDaGlsZCh0b3BTZWN0aW9uKTtcbiAgICBib2R5LmFwcGVuZENoaWxkKGNvbG9yU2hvdy5nZXRFbGVtZW50KCkpO1xufVxuXG5mdW5jdGlvbiBDUENvbG9yU2hvdyhjcENvbnRyb2xsZXIpIHtcbiAgICB2YXJcbiAgICAgICAgY29sb3IgPSAwLFxuICAgICAgICBcbiAgICAgICAgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG5cbiAgICBmdW5jdGlvbiBwYWRMZWZ0KHN0cmluZywgcGFkZGluZywgbGVuKSB7XG4gICAgICAgIHdoaWxlIChzdHJpbmcubGVuZ3RoIDwgbGVuKSB7XG4gICAgICAgICAgICBzdHJpbmcgPSBwYWRkaW5nICsgc3RyaW5nO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzdHJpbmc7XG4gICAgfVxuICAgIFxuICAgIGZ1bmN0aW9uIHBhaW50KCkge1xuICAgICAgICBlbGVtZW50LnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICcjJyArIHBhZExlZnQoTnVtYmVyKGNvbG9yKS50b1N0cmluZygxNiksIFwiMFwiLCA2KTtcbiAgICB9XG4gICAgXG4gICAgZnVuY3Rpb24gbW91c2VDbGljayhlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgXG4gICAgICAgIHZhciBcbiAgICAgICAgICAgIGNvbEhleCA9IFwiI1wiICsgcGFkTGVmdChOdW1iZXIoY29sb3IpLnRvU3RyaW5nKDE2KSwgXCIwXCIsIDYpO1xuXG4gICAgICAgIGNvbEhleCA9IHdpbmRvdy5wcm9tcHQoXCJQbGVhc2UgZW50ZXIgYSBjb2xvciBpbiBoZXggZm9ybWF0XCIsIGNvbEhleCk7XG4gICAgICAgIFxuICAgICAgICBpZiAoY29sSGV4ICE9IG51bGwpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgaWYgKGNvbEhleC5tYXRjaCgvXiMvKSB8fCBjb2xIZXgubWF0Y2goL14kLykpIHtcbiAgICAgICAgICAgICAgICAgICAgY29sSGV4ID0gY29sSGV4LnN1YnN0cmluZygxKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB2YXIgXG4gICAgICAgICAgICAgICAgICAgIG5ld0NvbG9yID0gcGFyc2VJbnQoY29sSGV4LCAxNik7XG5cbiAgICAgICAgICAgICAgICBjcENvbnRyb2xsZXIuc2V0Q3VyQ29sb3IobmV3IENQQ29sb3IobmV3Q29sb3IpKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBcbiAgICB0aGlzLmdldEVsZW1lbnQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIGVsZW1lbnQ7XG4gICAgfTtcbiAgICBcbiAgICBjcENvbnRyb2xsZXIub24oXCJjb2xvckNoYW5nZVwiLCBmdW5jdGlvbihfY29sb3IpIHtcbiAgICAgICAgY29sb3IgPSBfY29sb3IuZ2V0UmdiKCk7XG4gICAgICAgIHBhaW50KCk7XG4gICAgfSk7XG4gICAgXG4gICAgZWxlbWVudC5jbGFzc05hbWUgPSAnY2hpY2tlbnBhaW50LWNvbG9ycGlja2VyLXNob3cnO1xuICAgIFxuICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIG1vdXNlQ2xpY2spO1xuXG4gICAgcGFpbnQoKTtcbn1cblxuQ1BDb2xvclBhbGV0dGUucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShDUFBhbGV0dGUucHJvdG90eXBlKTtcbkNQQ29sb3JQYWxldHRlLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IENQQ29sb3JQYWxldHRlO1xuIiwiLypcbiAgICBDaGlja2VuUGFpbnRcblxuICAgIENoaWNrZW5QYWludCBpcyBhIHRyYW5zbGF0aW9uIG9mIENoaWJpUGFpbnQgZnJvbSBKYXZhIHRvIEphdmFTY3JpcHRcbiAgICBieSBOaWNob2xhcyBTaGVybG9jayAvIENoaWNrZW4gU21vb3RoaWUuXG5cbiAgICBDaGliaVBhaW50IGlzIENvcHlyaWdodCAoYykgMjAwNi0yMDA4IE1hcmMgU2NoZWZlclxuXG4gICAgQ2hpY2tlblBhaW50IGlzIGZyZWUgc29mdHdhcmU6IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vciBtb2RpZnlcbiAgICBpdCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGFzIHB1Ymxpc2hlZCBieVxuICAgIHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb24sIGVpdGhlciB2ZXJzaW9uIDMgb2YgdGhlIExpY2Vuc2UsIG9yXG4gICAgKGF0IHlvdXIgb3B0aW9uKSBhbnkgbGF0ZXIgdmVyc2lvbi5cblxuICAgIENoaWNrZW5QYWludCBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLFxuICAgIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mXG4gICAgTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiAgU2VlIHRoZVxuICAgIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuXG5cbiAgICBZb3Ugc2hvdWxkIGhhdmUgcmVjZWl2ZWQgYSBjb3B5IG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZVxuICAgIGFsb25nIHdpdGggQ2hpY2tlblBhaW50LiBJZiBub3QsIHNlZSA8aHR0cDovL3d3dy5nbnUub3JnL2xpY2Vuc2VzLz4uXG4qL1xuXG5pbXBvcnQgQ1BDb2xvciBmcm9tIFwiLi4vdXRpbC9DUENvbG9yXCI7XG5pbXBvcnQgQ1BDb2xvckJtcCBmcm9tIFwiLi4vZW5naW5lL0NQQ29sb3JCbXBcIjtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gQ1BDb2xvclNlbGVjdChjcENvbnRyb2xsZXIsIGluaXRpYWxDb2xvcikge1xuICAgIHZhclxuICAgICAgICB3ID0gMTI4LCBoID0gMTI4LFxuXG4gICAgICAgIGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIiksXG4gICAgICAgIGNhbnZhc0NvbnRleHQgPSBjYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpLFxuXG4gICAgICAgIGltYWdlRGF0YSA9IGNhbnZhc0NvbnRleHQuY3JlYXRlSW1hZ2VEYXRhKHcsIGgpLFxuICAgICAgICBkYXRhID0gaW1hZ2VEYXRhLmRhdGEsXG4gICAgICAgIGNvbG9yID0gbmV3IENQQ29sb3IoKSxcblxuICAgICAgICBuZWVkUmVmcmVzaCA9IHRydWUsXG5cbiAgICAgICAgY2FwdHVyZWRNb3VzZSA9IGZhbHNlO1xuXG4gICAgZnVuY3Rpb24gbWFrZUJpdG1hcCgpIHtcbiAgICAgICAgdmFyXG4gICAgICAgICAgICBjb2wgPSBjb2xvci5jbG9uZSgpLFxuICAgICAgICAgICAgcGl4SW5kZXggPSAwO1xuXG4gICAgICAgIGZvciAodmFyIHkgPSAwOyB5IDwgaDsgeSsrKSB7XG4gICAgICAgICAgICBjb2wuc2V0VmFsdWUoMjU1IC0gKHkgKiAyNTUpIC8gaCk7XG5cbiAgICAgICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgdzsgeCsrKSB7XG4gICAgICAgICAgICAgICAgY29sLnNldFNhdHVyYXRpb24oKHggKiAyNTUpIC8gdyk7XG5cbiAgICAgICAgICAgICAgICBkYXRhW3BpeEluZGV4ICsgQ1BDb2xvckJtcC5SRURfQllURV9PRkZTRVRdID0gKGNvbC5yZ2IgPj4gMTYpICYgMHhGRjtcbiAgICAgICAgICAgICAgICBkYXRhW3BpeEluZGV4ICsgQ1BDb2xvckJtcC5HUkVFTl9CWVRFX09GRlNFVF0gPSAoY29sLnJnYiA+PiA4KSAmIDB4RkZcbiAgICAgICAgICAgICAgICBkYXRhW3BpeEluZGV4ICsgQ1BDb2xvckJtcC5CTFVFX0JZVEVfT0ZGU0VUXSA9IGNvbC5yZ2IgJiAweEZGXG4gICAgICAgICAgICAgICAgZGF0YVtwaXhJbmRleCArIENQQ29sb3JCbXAuQUxQSEFfQllURV9PRkZTRVRdID0gMHhGRjtcblxuICAgICAgICAgICAgICAgIHBpeEluZGV4ICs9IENQQ29sb3JCbXAuQllURVNfUEVSX1BJWEVMO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgbmVlZFJlZnJlc2ggPSBmYWxzZTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBwYWludCgpIHtcbiAgICAgICAgaWYgKG5lZWRSZWZyZXNoKSB7XG4gICAgICAgICAgICBtYWtlQml0bWFwKCk7XG4gICAgICAgIH1cblxuICAgICAgICBjYW52YXNDb250ZXh0LnB1dEltYWdlRGF0YShpbWFnZURhdGEsIDAsIDAsIDAsIDAsIHcsIGgpO1xuXG4gICAgICAgIHZhclxuICAgICAgICAgICAgeCA9IGNvbG9yLmdldFNhdHVyYXRpb24oKSAqIHcgLyAyNTUsXG4gICAgICAgICAgICB5ID0gKDI1NSAtIGNvbG9yLmdldFZhbHVlKCkpICogaCAvIDI1NTtcblxuICAgICAgICBjYW52YXNDb250ZXh0Lmdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbiA9ICdleGNsdXNpb24nO1xuICAgICAgICBjYW52YXNDb250ZXh0LnN0cm9rZVN0eWxlID0gJ3doaXRlJztcbiAgICAgICAgY2FudmFzQ29udGV4dC5saW5lV2lkdGggPSAxLjU7XG5cbiAgICAgICAgY2FudmFzQ29udGV4dC5iZWdpblBhdGgoKTtcbiAgICAgICAgY2FudmFzQ29udGV4dC5hcmMoeCwgeSwgNSwgMCwgTWF0aC5QSSAqIDIpO1xuICAgICAgICBjYW52YXNDb250ZXh0LnN0cm9rZSgpO1xuXG4gICAgICAgIGNhbnZhc0NvbnRleHQuZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uID0gJ3NvdXJjZS1vdmVyJztcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBtb3VzZVBpY2tDb2xvcihlKSB7XG4gICAgICAgIHZhclxuICAgICAgICAgICAgeCA9IGUucGFnZVggLSAkKGNhbnZhcykub2Zmc2V0KCkubGVmdCxcbiAgICAgICAgICAgIHkgPSBlLnBhZ2VZIC0gJChjYW52YXMpLm9mZnNldCgpLnRvcCxcblxuICAgICAgICAgICAgc2F0ID0geCAqIDI1NSAvIHcsXG4gICAgICAgICAgICB2YWx1ZSA9IDI1NSAtIHkgKiAyNTUgLyBoO1xuXG4gICAgICAgIGNvbG9yLnNldFNhdHVyYXRpb24oTWF0aC5tYXgoMCwgTWF0aC5taW4oMjU1LCBzYXQpKSk7XG4gICAgICAgIGNvbG9yLnNldFZhbHVlKE1hdGgubWF4KDAsIE1hdGgubWluKDI1NSwgdmFsdWUpKSk7XG5cbiAgICAgICAgcGFpbnQoKTtcbiAgICAgICAgY3BDb250cm9sbGVyLnNldEN1ckNvbG9yKGNvbG9yKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjb250aW51ZURyYWcoZSkge1xuICAgICAgICBtb3VzZVBpY2tDb2xvcihlKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBlbmREcmFnKGUpIHtcbiAgICAgICAgY2FudmFzLnJlbGVhc2VQb2ludGVyQ2FwdHVyZShlLnBvaW50ZXJJZCk7XG4gICAgICAgIGNhcHR1cmVkTW91c2UgPSBmYWxzZTtcbiAgICAgICAgY2FudmFzLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJwb2ludGVydXBcIiwgZW5kRHJhZyk7XG4gICAgICAgIGNhbnZhcy5yZW1vdmVFdmVudExpc3RlbmVyKFwicG9pbnRlcm1vdmVcIiwgY29udGludWVEcmFnKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzdGFydERyYWcoZSkge1xuICAgICAgICBpZiAoIWNhcHR1cmVkTW91c2UpIHtcbiAgICAgICAgICAgIGNhcHR1cmVkTW91c2UgPSB0cnVlO1xuICAgICAgICAgICAgY2FudmFzLnNldFBvaW50ZXJDYXB0dXJlKGUucG9pbnRlcklkKTtcbiAgICAgICAgICAgIGNhbnZhcy5hZGRFdmVudExpc3RlbmVyKFwicG9pbnRlcnVwXCIsIGVuZERyYWcpO1xuICAgICAgICAgICAgY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoXCJwb2ludGVybW92ZVwiLCBjb250aW51ZURyYWcpO1xuICAgICAgICB9XG5cbiAgICAgICAgbW91c2VQaWNrQ29sb3IoZSk7XG4gICAgfVxuXG4gICAgdGhpcy5zZXRIdWUgPSBmdW5jdGlvbihodWUpIHtcbiAgICAgICAgaWYgKGNvbG9yLmdldEh1ZSgpICE9IGh1ZSkge1xuICAgICAgICAgICAgY29sb3Iuc2V0SHVlKGh1ZSk7XG4gICAgICAgICAgICBjcENvbnRyb2xsZXIuc2V0Q3VyQ29sb3IoY29sb3IpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIHRoaXMuZ2V0RWxlbWVudCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gY2FudmFzO1xuICAgIH07XG5cbiAgICBjcENvbnRyb2xsZXIub24oXCJjb2xvckNoYW5nZVwiLCBmdW5jdGlvbihjKSB7XG4gICAgICAgIGNvbG9yLmNvcHlGcm9tKGMpO1xuXG4gICAgICAgIG5lZWRSZWZyZXNoID0gdHJ1ZTtcbiAgICAgICAgcGFpbnQoKTtcbiAgICB9KTtcblxuICAgIGNhbnZhcy5hZGRFdmVudExpc3RlbmVyKFwicG9pbnRlcmRvd25cIiwgc3RhcnREcmFnKTtcblxuICAgIGNhbnZhcy5jbGFzc05hbWUgPSAnY2hpY2tlbnBhaW50LWNvbG9ycGlja2VyLXNlbGVjdCc7XG4gICAgY2FudmFzLnNldEF0dHJpYnV0ZShcInRvdWNoLWFjdGlvblwiLCBcIm5vbmVcIik7XG5cbiAgICBjYW52YXMud2lkdGggPSB3O1xuICAgIGNhbnZhcy5oZWlnaHQgPSBoO1xuXG4gICAgaWYgKGluaXRpYWxDb2xvcikge1xuICAgICAgICBjb2xvci5jb3B5RnJvbShpbml0aWFsQ29sb3IpO1xuICAgIH1cblxuICAgIHBhaW50KCk7XG59IiwiLypcbiAgICBDaGlja2VuUGFpbnRcblxuICAgIENoaWNrZW5QYWludCBpcyBhIHRyYW5zbGF0aW9uIG9mIENoaWJpUGFpbnQgZnJvbSBKYXZhIHRvIEphdmFTY3JpcHRcbiAgICBieSBOaWNob2xhcyBTaGVybG9jayAvIENoaWNrZW4gU21vb3RoaWUuXG5cbiAgICBDaGliaVBhaW50IGlzIENvcHlyaWdodCAoYykgMjAwNi0yMDA4IE1hcmMgU2NoZWZlclxuXG4gICAgQ2hpY2tlblBhaW50IGlzIGZyZWUgc29mdHdhcmU6IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vciBtb2RpZnlcbiAgICBpdCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGFzIHB1Ymxpc2hlZCBieVxuICAgIHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb24sIGVpdGhlciB2ZXJzaW9uIDMgb2YgdGhlIExpY2Vuc2UsIG9yXG4gICAgKGF0IHlvdXIgb3B0aW9uKSBhbnkgbGF0ZXIgdmVyc2lvbi5cblxuICAgIENoaWNrZW5QYWludCBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLFxuICAgIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mXG4gICAgTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiAgU2VlIHRoZVxuICAgIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuXG5cbiAgICBZb3Ugc2hvdWxkIGhhdmUgcmVjZWl2ZWQgYSBjb3B5IG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZVxuICAgIGFsb25nIHdpdGggQ2hpY2tlblBhaW50LiBJZiBub3QsIHNlZSA8aHR0cDovL3d3dy5nbnUub3JnL2xpY2Vuc2VzLz4uXG4qL1xuXG5pbXBvcnQgQ1BDb2xvciBmcm9tIFwiLi4vdXRpbC9DUENvbG9yXCI7XG5pbXBvcnQgQ1BDb2xvckJtcCBmcm9tIFwiLi4vZW5naW5lL0NQQ29sb3JCbXBcIjtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gQ1BDb2xvclNsaWRlcihjcENvbnRyb2xsZXIsIHNlbGVjdGVyLCBpbml0aWFsSHVlKSB7XG4gICAgdmFyXG4gICAgICAgIHRoYXQgPSB0aGlzLFxuXG4gICAgICAgIHcgPSAyNCwgaCA9IDEyOCxcblxuICAgICAgICBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpLFxuICAgICAgICBjYW52YXNDb250ZXh0ID0gY2FudmFzLmdldENvbnRleHQoXCIyZFwiKSxcblxuICAgICAgICBpbWFnZURhdGEgPSBjYW52YXNDb250ZXh0LmNyZWF0ZUltYWdlRGF0YSh3LCBoKSxcbiAgICAgICAgZGF0YSA9IGltYWdlRGF0YS5kYXRhLFxuXG4gICAgICAgIGNhcHR1cmVkTW91c2UgPSBmYWxzZSxcblxuICAgICAgICBodWUgPSBpbml0aWFsSHVlIHx8IDA7XG5cbiAgICBmdW5jdGlvbiBtYWtlQml0bWFwKCkge1xuICAgICAgICB2YXJcbiAgICAgICAgICAgIGNvbG9yID0gbmV3IENQQ29sb3IoKSxcbiAgICAgICAgICAgIHBpeEluZGV4ID0gMDtcblxuICAgICAgICBjb2xvci5zZXRSZ2JDb21wb25lbnRzKDAsIDI1NSwgMjU1KTtcblxuICAgICAgICBmb3IgKHZhciB5ID0gMDsgeSA8IGg7IHkrKykge1xuICAgICAgICAgICAgY29sb3Iuc2V0SHVlKCh5ICogMzU5KSAvIGgpO1xuXG4gICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IHc7IHgrKykge1xuICAgICAgICAgICAgICAgIGRhdGFbcGl4SW5kZXggKyBDUENvbG9yQm1wLlJFRF9CWVRFX09GRlNFVF0gPSAoY29sb3IucmdiID4+IDE2KSAmIDB4RkY7XG4gICAgICAgICAgICAgICAgZGF0YVtwaXhJbmRleCArIENQQ29sb3JCbXAuR1JFRU5fQllURV9PRkZTRVRdID0gKGNvbG9yLnJnYiA+PiA4KSAmIDB4RkZcbiAgICAgICAgICAgICAgICBkYXRhW3BpeEluZGV4ICsgQ1BDb2xvckJtcC5CTFVFX0JZVEVfT0ZGU0VUXSA9IGNvbG9yLnJnYiAmIDB4RkZcbiAgICAgICAgICAgICAgICBkYXRhW3BpeEluZGV4ICsgQ1BDb2xvckJtcC5BTFBIQV9CWVRFX09GRlNFVF0gPSAweEZGO1xuXG4gICAgICAgICAgICAgICAgcGl4SW5kZXggKz0gQ1BDb2xvckJtcC5CWVRFU19QRVJfUElYRUw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBwYWludCgpIHtcbiAgICAgICAgY2FudmFzQ29udGV4dC5wdXRJbWFnZURhdGEoaW1hZ2VEYXRhLCAwLCAwLCAwLCAwLCB3LCBoKTtcblxuICAgICAgICB2YXJcbiAgICAgICAgICAgIHkgPSAoaHVlICogaCkgLyAzNjA7XG5cbiAgICAgICAgY2FudmFzQ29udGV4dC5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb24gPSAnZXhjbHVzaW9uJztcbiAgICAgICAgY2FudmFzQ29udGV4dC5zdHJva2VTdHlsZSA9ICd3aGl0ZSc7XG4gICAgICAgIGNhbnZhc0NvbnRleHQubGluZVdpZHRoID0gMS41O1xuXG4gICAgICAgIGNhbnZhc0NvbnRleHQuYmVnaW5QYXRoKCk7XG4gICAgICAgIGNhbnZhc0NvbnRleHQubW92ZVRvKDAsIHkpO1xuICAgICAgICBjYW52YXNDb250ZXh0LmxpbmVUbyh3LCB5KTtcbiAgICAgICAgY2FudmFzQ29udGV4dC5zdHJva2UoKTtcblxuICAgICAgICBjYW52YXNDb250ZXh0Lmdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbiA9ICdzb3VyY2Utb3Zlcic7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbW91c2VQaWNrQ29sb3IoZSkge1xuICAgICAgICB2YXJcbiAgICAgICAgICAgIHkgPSBlLnBhZ2VZIC0gJChjYW52YXMpLm9mZnNldCgpLnRvcCxcblxuICAgICAgICAgICAgX2h1ZSA9IH5+KHkgKiAzNjAgLyBoKTtcblxuICAgICAgICBodWUgPSBNYXRoLm1heCgwLCBNYXRoLm1pbigzNTksIF9odWUpKTtcbiAgICAgICAgcGFpbnQoKTtcblxuICAgICAgICBpZiAoc2VsZWN0ZXIgIT0gbnVsbCkge1xuICAgICAgICAgICAgc2VsZWN0ZXIuc2V0SHVlKGh1ZSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjb250aW51ZURyYWcoZSkge1xuICAgICAgICBtb3VzZVBpY2tDb2xvcihlKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBlbmREcmFnKGUpIHtcbiAgICAgICAgY2FudmFzLnJlbGVhc2VQb2ludGVyQ2FwdHVyZShlLnBvaW50ZXJJZCk7XG4gICAgICAgIGNhcHR1cmVkTW91c2UgPSBmYWxzZTtcbiAgICAgICAgY2FudmFzLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJwb2ludGVydXBcIiwgZW5kRHJhZyk7XG4gICAgICAgIGNhbnZhcy5yZW1vdmVFdmVudExpc3RlbmVyKFwicG9pbnRlcm1vdmVcIiwgY29udGludWVEcmFnKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzdGFydERyYWcoZSkge1xuICAgICAgICBpZiAoIWNhcHR1cmVkTW91c2UpIHtcbiAgICAgICAgICAgIGNhcHR1cmVkTW91c2UgPSB0cnVlO1xuICAgICAgICAgICAgY2FudmFzLnNldFBvaW50ZXJDYXB0dXJlKGUucG9pbnRlcklkKTtcbiAgICAgICAgICAgIGNhbnZhcy5hZGRFdmVudExpc3RlbmVyKFwicG9pbnRlcnVwXCIsIGVuZERyYWcpO1xuICAgICAgICAgICAgY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoXCJwb2ludGVybW92ZVwiLCBjb250aW51ZURyYWcpO1xuICAgICAgICB9XG5cbiAgICAgICAgbW91c2VQaWNrQ29sb3IoZSk7XG4gICAgfVxuXG4gICAgdGhpcy5nZXRFbGVtZW50ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBjYW52YXM7XG4gICAgfTtcblxuICAgIHRoaXMuc2V0SHVlID0gZnVuY3Rpb24oaCkge1xuICAgICAgICBodWUgPSBoO1xuICAgICAgICBwYWludCgpO1xuICAgIH07XG5cbiAgICBjcENvbnRyb2xsZXIub24oXCJjb2xvckNoYW5nZVwiLCBmdW5jdGlvbihjb2xvcikge1xuICAgICAgICB0aGF0LnNldEh1ZShjb2xvci5nZXRIdWUoKSk7XG4gICAgfSk7XG5cbiAgICBjYW52YXMuc2V0QXR0cmlidXRlKFwidG91Y2gtYWN0aW9uXCIsIFwibm9uZVwiKTtcblxuICAgIGNhbnZhcy5hZGRFdmVudExpc3RlbmVyKFwicG9pbnRlcmRvd25cIiwgc3RhcnREcmFnKTtcblxuICAgIGNhbnZhcy53aWR0aCA9IHc7XG4gICAgY2FudmFzLmhlaWdodCA9IGg7XG5cbiAgICBjYW52YXMuY2xhc3NOYW1lID0gJ2NoaWNrZW5wYWludC1jb2xvcnBpY2tlci1zbGlkZXInO1xuXG4gICAgbWFrZUJpdG1hcCgpO1xuICAgIHBhaW50KCk7XG5cbn0iLCIvKlxuICAgIENoaWNrZW5QYWludFxuXG4gICAgQ2hpY2tlblBhaW50IGlzIGEgdHJhbnNsYXRpb24gb2YgQ2hpYmlQYWludCBmcm9tIEphdmEgdG8gSmF2YVNjcmlwdFxuICAgIGJ5IE5pY2hvbGFzIFNoZXJsb2NrIC8gQ2hpY2tlbiBTbW9vdGhpZS5cblxuICAgIENoaWJpUGFpbnQgaXMgQ29weXJpZ2h0IChjKSAyMDA2LTIwMDggTWFyYyBTY2hlZmVyXG5cbiAgICBDaGlja2VuUGFpbnQgaXMgZnJlZSBzb2Z0d2FyZTogeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yIG1vZGlmeVxuICAgIGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgYXMgcHVibGlzaGVkIGJ5XG4gICAgdGhlIEZyZWUgU29mdHdhcmUgRm91bmRhdGlvbiwgZWl0aGVyIHZlcnNpb24gMyBvZiB0aGUgTGljZW5zZSwgb3JcbiAgICAoYXQgeW91ciBvcHRpb24pIGFueSBsYXRlciB2ZXJzaW9uLlxuXG4gICAgQ2hpY2tlblBhaW50IGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsXG4gICAgYnV0IFdJVEhPVVQgQU5ZIFdBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2ZcbiAgICBNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuICBTZWUgdGhlXG4gICAgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy5cblxuICAgIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXG4gICAgYWxvbmcgd2l0aCBDaGlja2VuUGFpbnQuIElmIG5vdCwgc2VlIDxodHRwOi8vd3d3LmdudS5vcmcvbGljZW5zZXMvPi5cbiovXG5cbmltcG9ydCBDUENvbG9yIGZyb20gJy4uL3V0aWwvQ1BDb2xvcic7XG5cbmltcG9ydCBDUFNsaWRlciBmcm9tICcuL0NQU2xpZGVyJztcbmltcG9ydCBDUENvbG9yU2VsZWN0IGZyb20gJy4vQ1BDb2xvclNlbGVjdCc7XG5pbXBvcnQgQ1BDb2xvclNsaWRlciBmcm9tICcuL0NQQ29sb3JTbGlkZXInO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBDUENvbG9yU3dhdGNoKGluaXRpYWxDb2xvciwgaW5pdGlhbEFscGhhKSB7XG4gICAgdmFyXG4gICAgICAgIHRoYXQgPSB0aGlzLFxuICAgICAgICBjb2xvciA9IG5ldyBDUENvbG9yKDApLFxuICAgICAgICBhbHBoYSA9IDI1NSxcblxuICAgICAgICBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcblxuICAgIGZ1bmN0aW9uIHBhZExlZnQoc3RyaW5nLCBwYWRkaW5nLCBsZW4pIHtcbiAgICAgICAgd2hpbGUgKHN0cmluZy5sZW5ndGggPCBsZW4pIHtcbiAgICAgICAgICAgIHN0cmluZyA9IHBhZGRpbmcgKyBzdHJpbmc7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHN0cmluZztcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBwYWludCgpIHtcbiAgICAgICAgZWxlbWVudC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAnIycgKyBwYWRMZWZ0KE51bWJlcihjb2xvci5nZXRSZ2IoKSkudG9TdHJpbmcoMTYpLCBcIjBcIiwgNik7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbW91c2VDbGljayhlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICB9XG5cbiAgICB0aGlzLmdldEVsZW1lbnQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIGVsZW1lbnQ7XG4gICAgfTtcblxuICAgIHRoaXMuc2V0Q29sb3IgPSBmdW5jdGlvbihfY29sb3IpIHtcbiAgICAgICAgaWYgKCFjb2xvci5pc0VxdWFsKF9jb2xvcikpIHtcbiAgICAgICAgICAgIGNvbG9yLmNvcHlGcm9tKF9jb2xvcik7XG5cbiAgICAgICAgICAgIHBhaW50KCk7XG5cbiAgICAgICAgICAgIHRoaXMuZW1pdEV2ZW50KFwiY29sb3JDaGFuZ2VcIiwgW2NvbG9yXSk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgdGhpcy5zZXRBbHBoYSA9IGZ1bmN0aW9uKF9hbHBoYSkge1xuICAgICAgICBpZiAoX2FscGhhICE9IGFscGhhKSB7XG4gICAgICAgICAgICBhbHBoYSA9IF9hbHBoYTtcblxuICAgICAgICAgICAgcGFpbnQoKTtcblxuICAgICAgICAgICAgdGhpcy5lbWl0RXZlbnQoXCJhbHBoYUNoYW5nZVwiLCBbYWxwaGFdKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICB0aGlzLmdldENvbG9yUmdiID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBjb2xvci5nZXRSZ2IoKTtcbiAgICB9O1xuXG4gICAgdGhpcy5nZXRBbHBoYSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gYWxwaGE7XG4gICAgfTtcblxuICAgIHRoaXMuc2V0Q3VyQ29sb3IgPSB0aGlzLnNldENvbG9yO1xuXG4gICAgZnVuY3Rpb24gYnVpbGRDb2xvckVkaXRQYW5lbCgpIHtcbiAgICAgICAgdmFyXG4gICAgICAgICAgICBwYW5lbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksXG4gICAgICAgICAgICBncm91cCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksXG4gICAgICAgICAgICBzZWxlY3QgPSBuZXcgQ1BDb2xvclNlbGVjdCh0aGF0LCBjb2xvciksXG4gICAgICAgICAgICBzbGlkZXIgPSBuZXcgQ1BDb2xvclNsaWRlcih0aGF0LCBzZWxlY3QsIGNvbG9yLmdldEh1ZSgpKSxcbiAgICAgICAgICAgIGFscGhhU2xpZGVyID0gbmV3IENQU2xpZGVyKDAsIDI1NSk7XG5cbiAgICAgICAgcGFuZWwuY2xhc3NOYW1lID0gXCJjaGlja2VucGFpbnQtY29sb3ItcGljay1wYW5lbFwiO1xuXG4gICAgICAgIGdyb3VwLmNsYXNzTmFtZSA9IFwiY2hpY2tlbnBhaW50LWNvbG9ycGlja2VyLXRvcFwiO1xuXG4gICAgICAgIGdyb3VwLmFwcGVuZENoaWxkKHNlbGVjdC5nZXRFbGVtZW50KCkpO1xuICAgICAgICBncm91cC5hcHBlbmRDaGlsZChzbGlkZXIuZ2V0RWxlbWVudCgpKTtcblxuICAgICAgICBwYW5lbC5hcHBlbmRDaGlsZChncm91cCk7XG5cbiAgICAgICAgYWxwaGFTbGlkZXIudmFsdWUgPSBhbHBoYTtcbiAgICAgICAgYWxwaGFTbGlkZXIudGl0bGUgPSBmdW5jdGlvbihhbHBoYSkge1xuICAgICAgICAgICAgcmV0dXJuIFwiT3BhY2l0eTogXCIgKyBhbHBoYTtcbiAgICAgICAgfTtcbiAgICAgICAgYWxwaGFTbGlkZXIub24oXCJ2YWx1ZUNoYW5nZVwiLCBmdW5jdGlvbihhbHBoYSkge1xuICAgICAgICAgICAgdGhhdC5zZXRBbHBoYShhbHBoYSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHBhbmVsLmFwcGVuZENoaWxkKGFscGhhU2xpZGVyLmdldEVsZW1lbnQoKSk7XG5cbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGFscGhhU2xpZGVyLnJlc2l6ZSgpO1xuICAgICAgICB9LCAwKTtcblxuICAgICAgICByZXR1cm4gcGFuZWw7XG4gICAgfVxuXG4gICAgZWxlbWVudC5jbGFzc05hbWUgPSAnY2hpY2tlbnBhaW50LWNvbG9yLXBpY2stc3dhdGNoJztcblxuICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIG1vdXNlQ2xpY2spO1xuXG4gICAgaWYgKGluaXRpYWxDb2xvcikge1xuICAgICAgICBjb2xvci5jb3B5RnJvbShpbml0aWFsQ29sb3IpO1xuICAgIH1cblxuICAgIGlmIChpbml0aWFsQWxwaGEpIHtcbiAgICAgICAgYWxwaGEgPSBpbml0aWFsQWxwaGE7XG4gICAgfVxuXG4gICAgLy8gQ2xpY2tpbmcgb3V0c2lkZSB0aGUgcG9wb3ZlciB3aWxsIGRpc21pc3MgaXRcbiAgICBmdW5jdGlvbiBjbG9zZUNsaWNrSGFuZGxlcihlKSB7XG4gICAgICAgIGlmICgkKGUudGFyZ2V0KS5jbG9zZXN0KFwiLnBvcG92ZXJcIikubGVuZ3RoID09IDAgJiYgJChlLnRhcmdldCkuY2xvc2VzdChcIi5jaGlja2VucGFpbnQtY29sb3ItcGljay1zd2F0Y2hcIilbMF0gIT0gZWxlbWVudCkge1xuICAgICAgICAgICAgJChlbGVtZW50KS5wb3BvdmVyKFwiaGlkZVwiKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgICQoZWxlbWVudClcbiAgICAgICAgLnBvcG92ZXIoe1xuICAgICAgICAgICAgaHRtbDogdHJ1ZSxcbiAgICAgICAgICAgIGNvbnRlbnQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIGNsb3NlQ2xpY2tIYW5kbGVyKTtcblxuICAgICAgICAgICAgICAgIHJldHVybiBidWlsZENvbG9yRWRpdFBhbmVsKCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgdHJpZ2dlcjogXCJtYW51YWxcIixcbiAgICAgICAgICAgIHBsYWNlbWVudDogXCJib3R0b21cIixcblxuICAgICAgICB9KVxuICAgICAgICAub24oXCJjbGlja1wiLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICQodGhpcykucG9wb3ZlcihcInRvZ2dsZVwiKTtcbiAgICAgICAgfSlcbiAgICAgICAgLm9uKFwiaGlkZGVuLmJzLnBvcG92ZXJcIiwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCBjbG9zZUNsaWNrSGFuZGxlcik7XG4gICAgICAgIH0pO1xuXG4gICAgcGFpbnQoKTtcbn1cblxuQ1BDb2xvclN3YXRjaC5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKEV2ZW50RW1pdHRlci5wcm90b3R5cGUpO1xuQ1BDb2xvclN3YXRjaC5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBDUENvbG9yU3dhdGNoOyIsIi8qKlxuICogQ3JlYXRlIGEgY2hlY2tlcmJvYXJkIEhUTUw1IENhbnZhc1BhdHRlcm4gKHdoaWNoIGNhbiBiZSB1c2VkIGZvciBmaWxsU3R5bGUpIHVzaW5nIHRoZSBnaXZlbiBjYW52YXMgY29udGV4dC5cbiAqIFxuICogQHBhcmFtIGNhbnZhc0NvbnRleHRcbiAqIEByZXR1cm5zIHtDYW52YXNQYXR0ZXJufVxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlQ2hlY2tlcmJvYXJkUGF0dGVybihjYW52YXNDb250ZXh0KSB7XG4gICAgdmFyXG4gICAgICAgIGNoZWNrZXJib2FyZENhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIiksXG4gICAgICAgIGNoZWNrZXJib2FyZENvbnRleHQgPSBjaGVja2VyYm9hcmRDYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpLFxuICAgICAgICBcbiAgICAgICAgaW1hZ2VEYXRhID0gY2hlY2tlcmJvYXJkQ29udGV4dC5jcmVhdGVJbWFnZURhdGEoNjQsIDY0KSxcbiAgICAgICAgZGF0YSA9IGltYWdlRGF0YS5kYXRhLFxuICAgICAgICBcbiAgICAgICAgcGl4ZWxPZmZzZXQgPSAwO1xuXG4gICAgZm9yICh2YXIgaiA9IDA7IGogPCA2NDsgaisrKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgNjQ7IGkrKykge1xuICAgICAgICAgICAgaWYgKChpICYgMHg4KSAhPSAwIF4gKGogJiAweDgpICE9IDApIHtcbiAgICAgICAgICAgICAgICAvLyBXaGl0ZVxuICAgICAgICAgICAgICAgIGRhdGFbcGl4ZWxPZmZzZXQrK10gPSAweGZmO1xuICAgICAgICAgICAgICAgIGRhdGFbcGl4ZWxPZmZzZXQrK10gPSAweGZmO1xuICAgICAgICAgICAgICAgIGRhdGFbcGl4ZWxPZmZzZXQrK10gPSAweGZmO1xuICAgICAgICAgICAgICAgIGRhdGFbcGl4ZWxPZmZzZXQrK10gPSAweGZmO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBHcmV5XG4gICAgICAgICAgICAgICAgZGF0YVtwaXhlbE9mZnNldCsrXSA9IDB4Y2M7XG4gICAgICAgICAgICAgICAgZGF0YVtwaXhlbE9mZnNldCsrXSA9IDB4Y2M7XG4gICAgICAgICAgICAgICAgZGF0YVtwaXhlbE9mZnNldCsrXSA9IDB4Y2M7XG4gICAgICAgICAgICAgICAgZGF0YVtwaXhlbE9mZnNldCsrXSA9IDB4ZmY7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBjaGVja2VyYm9hcmRDYW52YXMud2lkdGggPSA2NDtcbiAgICBjaGVja2VyYm9hcmRDYW52YXMuaGVpZ2h0ID0gNjQ7XG4gICAgY2hlY2tlcmJvYXJkQ29udGV4dC5wdXRJbWFnZURhdGEoaW1hZ2VEYXRhLCAwLCAwKTtcblxuICAgIHJldHVybiBjYW52YXNDb250ZXh0LmNyZWF0ZVBhdHRlcm4oY2hlY2tlcmJvYXJkQ2FudmFzLCAncmVwZWF0Jyk7XG59IiwiLypcbiAgICBDaGlja2VuUGFpbnRcbiAgICBcbiAgICBDaGlja2VuUGFpbnQgaXMgYSB0cmFuc2xhdGlvbiBvZiBDaGliaVBhaW50IGZyb20gSmF2YSB0byBKYXZhU2NyaXB0XG4gICAgYnkgTmljaG9sYXMgU2hlcmxvY2sgLyBDaGlja2VuIFNtb290aGllLlxuICAgIFxuICAgIENoaWJpUGFpbnQgaXMgQ29weXJpZ2h0IChjKSAyMDA2LTIwMDggTWFyYyBTY2hlZmVyXG5cbiAgICBDaGlja2VuUGFpbnQgaXMgZnJlZSBzb2Z0d2FyZTogeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yIG1vZGlmeVxuICAgIGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgYXMgcHVibGlzaGVkIGJ5XG4gICAgdGhlIEZyZWUgU29mdHdhcmUgRm91bmRhdGlvbiwgZWl0aGVyIHZlcnNpb24gMyBvZiB0aGUgTGljZW5zZSwgb3JcbiAgICAoYXQgeW91ciBvcHRpb24pIGFueSBsYXRlciB2ZXJzaW9uLlxuXG4gICAgQ2hpY2tlblBhaW50IGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsXG4gICAgYnV0IFdJVEhPVVQgQU5ZIFdBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2ZcbiAgICBNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuICBTZWUgdGhlXG4gICAgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy5cblxuICAgIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXG4gICAgYWxvbmcgd2l0aCBDaGlja2VuUGFpbnQuIElmIG5vdCwgc2VlIDxodHRwOi8vd3d3LmdudS5vcmcvbGljZW5zZXMvPi5cbiovXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIENQR3JpZERpYWxvZyhwYXJlbnQsIGNhbnZhcykge1xuICAgIHZhclxuICAgICAgICBkaWFsb2cgPSBcbiAgICAgICAgICAgICQoYDxkaXYgY2xhc3M9XCJtb2RhbCBmYWRlXCIgdGFiaW5kZXg9XCItMVwiIHJvbGU9XCJkaWFsb2dcIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibW9kYWwtZGlhbG9nXCI+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtb2RhbC1jb250ZW50XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibW9kYWwtaGVhZGVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJjbG9zZVwiIGRhdGEtZGlzbWlzcz1cIm1vZGFsXCIgYXJpYS1sYWJlbD1cIkNsb3NlXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPiZ0aW1lczs8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGg0IGNsYXNzPVwibW9kYWwtdGl0bGVcIj5HcmlkIG9wdGlvbnM8L2g0PlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibW9kYWwtYm9keVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxmb3JtPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZm9ybS1ncm91cFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsPkdyaWQgc2l6ZTwvbGFiZWw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cInRleHRcIiBjbGFzcz1cImZvcm0tY29udHJvbCBjaGlja2VucGFpbnQtZ3JpZC1zaXplXCIgdmFsdWU9XCJcIiBhdXRvZm9jdXM+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZm9ybT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm1vZGFsLWZvb3RlclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiYnRuIGJ0bi1kZWZhdWx0XCIgZGF0YS1kaXNtaXNzPVwibW9kYWxcIj5DYW5jZWw8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImJ0biBidG4tcHJpbWFyeSBjaGlja2VucGFpbnQtYXBwbHktZ3JpZC1zZXR0aW5nc1wiIGRhdGEtZGlzbWlzcz1cIm1vZGFsXCI+T2s8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICBgKSxcbiAgICAgICAgXG4gICAgICAgIGdyaWRTaXplRWxlbSA9ICQoXCIuY2hpY2tlbnBhaW50LWdyaWQtc2l6ZVwiLCBkaWFsb2cpLFxuICAgICAgICBhcHBseUJ1dHRvbiA9ICQoXCIuY2hpY2tlbnBhaW50LWFwcGx5LWdyaWQtc2V0dGluZ3NcIiwgZGlhbG9nKTtcbiAgICBcbiAgICBncmlkU2l6ZUVsZW0udmFsKGNhbnZhcy5nZXRHcmlkU2l6ZSgpKTtcbiAgICBcbiAgICAkKFwiLmNoaWNrZW5wYWludC1hcHBseS1ncmlkLXNldHRpbmdzXCIsIGRpYWxvZykuY2xpY2soZnVuY3Rpb24oZSkge1xuICAgICAgICB2YXJcbiAgICAgICAgICAgIGdyaWRTaXplID0gcGFyc2VJbnQoZ3JpZFNpemVFbGVtLnZhbCgpLCAxMCk7XG4gICAgICAgIFxuICAgICAgICBjYW52YXMuc2V0R3JpZFNpemUoZ3JpZFNpemUpO1xuICAgIH0pO1xuIFxuICAgIGRpYWxvZ1xuICAgICAgICAubW9kYWwoe1xuICAgICAgICAgICAgc2hvdzogZmFsc2VcbiAgICAgICAgfSlcbiAgICAgICAgLm9uKCdzaG93bi5icy5tb2RhbCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgZ3JpZFNpemVFbGVtLmZvY3VzKCk7XG4gICAgICAgIH0pLm9uKCdrZXlwcmVzcycsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgIGlmIChlLmtleUNvZGUgPT0gMTMpIHtcbiAgICAgICAgICAgICAgICBhcHBseUJ1dHRvbi5jbGljaygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICBcbiAgICAvLyBGaXggdGhlIGJhY2tkcm9wIGxvY2F0aW9uIGluIHRoZSBET00gYnkgcmVwYXJlbnRpbmcgaXQgdG8gdGhlIGNoaWNrZW5wYWludCBjb250YWluZXJcbiAgICBkaWFsb2cuZGF0YShcImJzLm1vZGFsXCIpLiRib2R5ID0gJChwYXJlbnQpO1xuICAgIFxuICAgIHBhcmVudC5hcHBlbmRDaGlsZChkaWFsb2dbMF0pO1xuICAgIFxuICAgIHRoaXMuc2hvdyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBkaWFsb2cubW9kYWwoXCJzaG93XCIpO1xuICAgIH07XG59IiwiLypcbiAgICBDaGlja2VuUGFpbnRcbiAgICBcbiAgICBDaGlja2VuUGFpbnQgaXMgYSB0cmFuc2xhdGlvbiBvZiBDaGliaVBhaW50IGZyb20gSmF2YSB0byBKYXZhU2NyaXB0XG4gICAgYnkgTmljaG9sYXMgU2hlcmxvY2sgLyBDaGlja2VuIFNtb290aGllLlxuICAgIFxuICAgIENoaWJpUGFpbnQgaXMgQ29weXJpZ2h0IChjKSAyMDA2LTIwMDggTWFyYyBTY2hlZmVyXG5cbiAgICBDaGlja2VuUGFpbnQgaXMgZnJlZSBzb2Z0d2FyZTogeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yIG1vZGlmeVxuICAgIGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgYXMgcHVibGlzaGVkIGJ5XG4gICAgdGhlIEZyZWUgU29mdHdhcmUgRm91bmRhdGlvbiwgZWl0aGVyIHZlcnNpb24gMyBvZiB0aGUgTGljZW5zZSwgb3JcbiAgICAoYXQgeW91ciBvcHRpb24pIGFueSBsYXRlciB2ZXJzaW9uLlxuXG4gICAgQ2hpY2tlblBhaW50IGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsXG4gICAgYnV0IFdJVEhPVVQgQU5ZIFdBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2ZcbiAgICBNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuICBTZWUgdGhlXG4gICAgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy5cblxuICAgIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXG4gICAgYWxvbmcgd2l0aCBDaGlja2VuUGFpbnQuIElmIG5vdCwgc2VlIDxodHRwOi8vd3d3LmdudS5vcmcvbGljZW5zZXMvPi5cbiovXG5cbmltcG9ydCBDUFBhbGV0dGUgZnJvbSBcIi4vQ1BQYWxldHRlXCI7XG5pbXBvcnQgQ1BTbGlkZXIgZnJvbSBcIi4vQ1BTbGlkZXJcIjtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gQ1BMYXllcnNQYWxldHRlKGNvbnRyb2xsZXIpIHtcbiAgICBDUFBhbGV0dGUuY2FsbCh0aGlzLCBjb250cm9sbGVyLCBcImxheWVyc1wiLCBcIkxheWVyc1wiLCB0cnVlKTtcbiAgICBcbiAgICBjb25zdFxuICAgICAgICBNT0RFX05BTUVTID0gW1xuICAgICAgICAgICAgICBcIk5vcm1hbFwiLCBcIk11bHRpcGx5XCIsIFwiQWRkXCIsIFwiU2NyZWVuXCIsIFwiTGlnaHRlblwiLCBcIkRhcmtlblwiLCBcIlN1YnRyYWN0XCIsIFwiRG9kZ2VcIiwgXCJCdXJuXCIsXG4gICAgICAgICAgICAgIFwiT3ZlcmxheVwiLCBcIkhhcmQgTGlnaHRcIiwgXCJTb2Z0IExpZ2h0XCIsIFwiVml2aWQgTGlnaHRcIiwgXCJMaW5lYXIgTGlnaHRcIiwgXCJQaW4gTGlnaHRcIlxuICAgICAgICBdO1xuICAgIFxuICAgIHZhclxuICAgICAgICBsYXllckggPSAzMiwgZXllVyA9IDI0LFxuICAgICAgICBcbiAgICAgICAgYm9keSA9IHRoaXMuZ2V0Qm9keUVsZW1lbnQoKSxcblxuICAgICAgICBsYXllcldpZGdldCA9IG5ldyBDUExheWVyV2lkZ2V0KCksXG4gICAgICAgIGFscGhhU2xpZGVyID0gbmV3IENQU2xpZGVyKDAsIDEwMCksXG4gICAgICAgIGJsZW5kQ29tYm8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic2VsZWN0XCIpLFxuICAgIFxuICAgICAgICByZW5hbWVGaWVsZCA9IG5ldyBDUFJlbmFtZUZpZWxkKCksXG4gICAgXG4gICAgICAgIGNiU2FtcGxlQWxsTGF5ZXJzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpLFxuICAgICAgICBjYkxvY2tBbHBoYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKSxcbiAgICAgICAgXG4gICAgICAgIGFkZEJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsaVwiKSxcbiAgICAgICAgcmVtb3ZlQnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxpXCIpO1xuICAgIFxuICAgIGZ1bmN0aW9uIGZpbGxDb21ib2JveChjb21ibywgb3B0aW9uTmFtZXMpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBvcHRpb25OYW1lcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdmFyIFxuICAgICAgICAgICAgICAgIG9wdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJvcHRpb25cIik7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIG9wdGlvbi5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShvcHRpb25OYW1lc1tpXSkpO1xuICAgICAgICAgICAgb3B0aW9uLnZhbHVlID0gaTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29tYm8uYXBwZW5kQ2hpbGQob3B0aW9uKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBcbiAgICBmdW5jdGlvbiB3cmFwQ2hlY2tib3hXaXRoTGFiZWwoY2hlY2tib3gsIHRpdGxlKSB7XG4gICAgICAgIHZhclxuICAgICAgICAgICAgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSxcbiAgICAgICAgICAgIGxhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxhYmVsXCIpO1xuXG4gICAgICAgIGRpdi5jbGFzc05hbWUgPSBcImNoZWNrYm94XCI7XG4gICAgICAgIFxuICAgICAgICBsYWJlbC5hcHBlbmRDaGlsZChjaGVja2JveCk7XG4gICAgICAgIGxhYmVsLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHRpdGxlKSk7XG4gICAgICAgIFxuICAgICAgICBkaXYuYXBwZW5kQ2hpbGQobGFiZWwpO1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuIGRpdjtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzaG93UmVuYW1lQ29udHJvbChsYXllckluZGV4KSB7XG4gICAgICAgIHZhclxuICAgICAgICAgICAgZCA9IGxheWVyV2lkZ2V0LmdldENTU1NpemUoKSxcbiAgICAgICAgICAgIGFydHdvcmsgPSBjb250cm9sbGVyLmdldEFydHdvcmsoKSxcbiAgICAgICAgICAgIGxheWVyID0gYXJ0d29yay5nZXRMYXllcihsYXllckluZGV4KTtcblxuICAgICAgICByZW5hbWVGaWVsZC5zaG93KFxuICAgICAgICAgICAgZXllVyAvIHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvLCBcbiAgICAgICAgICAgIGQuaGVpZ2h0IC0gKGxheWVySW5kZXggKyAxKSAqIGxheWVySCAvIHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvLFxuICAgICAgICAgICAgbGF5ZXJJbmRleCxcbiAgICAgICAgICAgIGxheWVyLm5hbWVcbiAgICAgICApO1xuICAgIH1cbiAgICBcbiAgICB2YXJcbiAgICAgICAgcGFyZW50U2V0U2l6ZSA9IHRoaXMuc2V0U2l6ZSxcbiAgICAgICAgcGFyZW50U2V0SGVpZ2h0ID0gdGhpcy5zZXRIZWlnaHQ7XG4gICAgXG4gICAgdGhpcy5zZXRTaXplID0gZnVuY3Rpb24odywgaCkge1xuICAgICAgICBwYXJlbnRTZXRTaXplLmNhbGwodGhpcywgdywgaCk7XG4gICAgICAgIFxuICAgICAgICBsYXllcldpZGdldC5yZXNpemUoKTtcbiAgICAgICAgYWxwaGFTbGlkZXIucmVzaXplKCk7XG4gICAgfTtcblxuICAgIHRoaXMuc2V0SGVpZ2h0ID0gZnVuY3Rpb24oaCkge1xuICAgICAgICBwYXJlbnRTZXRIZWlnaHQuY2FsbCh0aGlzLCBoKTtcbiAgICAgICAgXG4gICAgICAgIGxheWVyV2lkZ2V0LnJlc2l6ZSgpO1xuICAgIH07XG5cbiAgICBmdW5jdGlvbiBDUExheWVyV2lkZ2V0KCkge1xuICAgICAgICB2YXIgXG4gICAgICAgICAgICBsYXllckRyYWcsIGxheWVyRHJhZ1JlYWxseSxcbiAgICAgICAgICAgIGxheWVyRHJhZ0luZGV4LCBsYXllckRyYWdZLFxuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLFxuICAgICAgICAgICAgXG4gICAgICAgICAgICBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpLFxuICAgICAgICAgICAgY2FudmFzQ29udGV4dCA9IGNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIiksXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoYXQgPSB0aGlzO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBHZXQgdGhlIHNpemUgb2YgdGhlIGNvbXBvbmVudCBvbiBzY3JlZW4gaW4gQ1NTIHBpeGVscy5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZ2V0Q1NTU2l6ZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIHt3aWR0aDogJChjYW52YXMpLndpZHRoKCksIGhlaWdodDogJChjYW52YXMpLmhlaWdodCgpfTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgZnVuY3Rpb24gZ2V0TGF5ZXJJbmRleChwb2ludCkge1xuICAgICAgICAgICAgcmV0dXJuIE1hdGguZmxvb3IoKGNhbnZhcy5oZWlnaHQgLSBwb2ludC55IC8gJChjYW52YXMpLmhlaWdodCgpICogY2FudmFzLmhlaWdodCkgLyBsYXllckgpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvKipcbiAgICAgICAgICogQHBhcmFtIGxheWVyIENQTGF5ZXJcbiAgICAgICAgICogQHBhcmFtIHNlbGVjdGVkIGJvb2xlYW5cbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIGRyYXdMYXllcihsYXllciwgc2VsZWN0ZWQpIHtcbiAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgIGQgPSB7d2lkdGg6IGNhbnZhcy53aWR0aCwgaGVpZ2h0OiBjYW52YXMuaGVpZ2h0fTtcblxuICAgICAgICAgICAgaWYgKHNlbGVjdGVkKSB7XG4gICAgICAgICAgICAgICAgY2FudmFzQ29udGV4dC5maWxsU3R5bGUgPSAnI0IwQjBDMCc7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNhbnZhc0NvbnRleHQuZmlsbFN0eWxlID0gJ3doaXRlJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhbnZhc0NvbnRleHQuZmlsbFJlY3QoMCwgMCwgZC53aWR0aCwgbGF5ZXJIKTtcblxuICAgICAgICAgICAgY2FudmFzQ29udGV4dC5iZWdpblBhdGgoKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY2FudmFzQ29udGV4dC5tb3ZlVG8oMCwgMCk7XG4gICAgICAgICAgICBjYW52YXNDb250ZXh0LmxpbmVUbyhkLndpZHRoLCAwKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY2FudmFzQ29udGV4dC5tb3ZlVG8oZXllVywgMCk7XG4gICAgICAgICAgICBjYW52YXNDb250ZXh0LmxpbmVUbyhleWVXLCBsYXllckgpO1xuXG4gICAgICAgICAgICBjYW52YXNDb250ZXh0Lm1vdmVUbyhleWVXICsgNiAqIHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvLCBsYXllckggLyAyKTtcbiAgICAgICAgICAgIGNhbnZhc0NvbnRleHQubGluZVRvKGQud2lkdGggLSA2ICogd2luZG93LmRldmljZVBpeGVsUmF0aW8sIGxheWVySCAvIDIpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjYW52YXNDb250ZXh0LnN0cm9rZSgpO1xuXG4gICAgICAgICAgICBjYW52YXNDb250ZXh0LmZpbGxTdHlsZSA9ICdibGFjayc7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNhbnZhc0NvbnRleHQuZmlsbFRleHQobGF5ZXIubmFtZSwgZXllVyArIDYgKiB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbywgMTIgKiB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyk7XG4gICAgICAgICAgICBjYW52YXNDb250ZXh0LmZpbGxUZXh0KE1PREVfTkFNRVNbbGF5ZXIuYmxlbmRNb2RlXSArIFwiOiBcIiArIGxheWVyLmFscGhhICsgXCIlXCIsIGV5ZVcgKyA2ICogd2luZG93LmRldmljZVBpeGVsUmF0aW8sIGxheWVySCAtIDUgKiB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyk7XG5cbiAgICAgICAgICAgIGNhbnZhc0NvbnRleHQuYmVnaW5QYXRoKCk7XG4gICAgICAgICAgICBpZiAobGF5ZXIudmlzaWJsZSkge1xuICAgICAgICAgICAgICAgIGNhbnZhc0NvbnRleHQuYXJjKGV5ZVcgLyAyLCBsYXllckggLyAyLCAxMCAqIHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvLCAwLCBNYXRoLlBJICogMik7XG4gICAgICAgICAgICAgICAgY2FudmFzQ29udGV4dC5maWxsKCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNhbnZhc0NvbnRleHQuYXJjKGV5ZVcgLyAyLCBsYXllckggLyAyLCAxMCAqIHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvLCAwLCBNYXRoLlBJICogMik7XG4gICAgICAgICAgICAgICAgY2FudmFzQ29udGV4dC5zdHJva2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgZnVuY3Rpb24gbW91c2VVcChlKSB7XG4gICAgICAgICAgICBpZiAoZS5idXR0b24gPT0gMCkge1xuICAgICAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgICAgICBvZmZzZXQgPSAkKGNhbnZhcykub2Zmc2V0KCksXG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBhcnR3b3JrID0gY29udHJvbGxlci5nZXRBcnR3b3JrKCksXG4gICAgICAgICAgICAgICAgICAgIGxheWVycyA9IGFydHdvcmsuZ2V0TGF5ZXJzKCksXG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBtb3VzZUxvYyA9IHt4OiBlLnBhZ2VYIC0gb2Zmc2V0LmxlZnQsIHk6IGUucGFnZVkgLSBvZmZzZXQudG9wfSxcbiAgICAgICAgICAgICAgICAgICAgbGF5ZXJPdmVyID0gZ2V0TGF5ZXJJbmRleChtb3VzZUxvYyk7XG5cbiAgICAgICAgICAgICAgICAvL2xheWVyRHJhZ1kgPSBlLnBhZ2VZIC0gb2Zmc2V0LnRvcDtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBpZiAobGF5ZXJPdmVyID49IDAgJiYgbGF5ZXJPdmVyIDw9IGxheWVycy5sZW5ndGggJiYgbGF5ZXJPdmVyICE9IGxheWVyRHJhZ0luZGV4ICYmIGxheWVyT3ZlciAhPSBsYXllckRyYWdJbmRleCArIDEpIHtcbiAgICAgICAgICAgICAgICAgICAgYXJ0d29yay5tb3ZlTGF5ZXIobGF5ZXJEcmFnSW5kZXgsIGxheWVyT3Zlcik7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gRG8gd2UgbmVlZCB0byByZXBhaW50IHRvIGVyYXNlIGRyYWdsaW5lcz9cbiAgICAgICAgICAgICAgICBpZiAobGF5ZXJEcmFnUmVhbGx5KSB7XG4gICAgICAgICAgICAgICAgICAgIGxheWVyRHJhZ1JlYWxseSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB0aGF0LnBhaW50KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGxheWVyRHJhZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsIG1vdXNlRHJhZ2dlZCk7XG4gICAgICAgICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsIG1vdXNlVXApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gbW91c2VEcmFnZ2VkKGUpIHtcbiAgICAgICAgICAgIGlmIChsYXllckRyYWcpIHtcbiAgICAgICAgICAgICAgICBsYXllckRyYWdSZWFsbHkgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGxheWVyRHJhZ1kgPSBlLnBhZ2VZIC0gJChjYW52YXMpLm9mZnNldCgpLnRvcDtcbiAgICAgICAgICAgICAgICB0aGF0LnBhaW50KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogUmVwYWludCBqdXN0IHRoZSBsYXllciB3aXRoIHRoZSBzcGVjaWZpZWQgaW5kZXhcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMucGFpbnRMYXllciA9IGZ1bmN0aW9uKGxheWVySW5kZXgpIHtcbiAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgIGxheWVyID0gYXJ0d29yay5nZXRMYXllcihsYXllckluZGV4KSxcbiAgICAgICAgICAgICAgICBsYXllclRvcCA9IGNhbnZhcy5oZWlnaHQgLSBsYXllckggKiAobGF5ZXJJbmRleCArIDEpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjYW52YXNDb250ZXh0LnNhdmUoKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY2FudmFzQ29udGV4dC5maWxsU3R5bGUgPSAnIzYwNjA2MCc7XG4gICAgICAgICAgICBjYW52YXNDb250ZXh0LmZpbGxSZWN0KDAsIGxheWVyVG9wLCBjYW52YXMud2lkdGgsIGxheWVySCk7XG5cbiAgICAgICAgICAgIGNhbnZhc0NvbnRleHQuc3Ryb2tlU3R5bGUgPSAnYmxhY2snO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjYW52YXNDb250ZXh0LnRyYW5zbGF0ZSgwLCBsYXllclRvcCk7XG4gICAgICAgICAgICBkcmF3TGF5ZXIobGF5ZXIsIGxheWVySW5kZXggPT0gYXJ0d29yay5nZXRBY3RpdmVMYXllckluZGV4KCkpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjYW52YXNDb250ZXh0LnJlc3RvcmUoKTtcbiAgICAgICAgfTtcbiAgICAgICAgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBSZXBhaW50IHRoZSBlbnRpcmUgY29udHJvbFxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5wYWludCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgYXJ0d29yayA9IGNvbnRyb2xsZXIuZ2V0QXJ0d29yaygpLFxuICAgICAgICAgICAgICAgIGxheWVycyA9IGFydHdvcmsuZ2V0TGF5ZXJzKCksXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgZCA9IHt3aWR0aDogY2FudmFzLndpZHRoLCBoZWlnaHQ6IGNhbnZhcy5oZWlnaHR9LFxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGNhbnZhc1NjYWxlRmFjdG9yID0gY2FudmFzLmhlaWdodCAvICQoY2FudmFzKS5oZWlnaHQoKTtcblxuICAgICAgICAgICAgY2FudmFzQ29udGV4dC5zYXZlKCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNhbnZhc0NvbnRleHQuZmlsbFN0eWxlID0gJyM2MDYwNjAnO1xuICAgICAgICAgICAgY2FudmFzQ29udGV4dC5maWxsUmVjdCgwLCAwLCBkLndpZHRoLCBkLmhlaWdodCAtIGxheWVycy5sZW5ndGggKiBsYXllckgpO1xuXG4gICAgICAgICAgICBjYW52YXNDb250ZXh0LnN0cm9rZVN0eWxlID0gJ2JsYWNrJztcblxuICAgICAgICAgICAgLy8gRHJhdyB0aGUgbGlzdCBvZiBsYXllcnMsIHdpdGggdGhlIGZpcnN0IGxheWVyIGF0IHRoZSBib3R0b20gb2YgdGhlIGNvbnRyb2xcbiAgICAgICAgICAgIGNhbnZhc0NvbnRleHQudHJhbnNsYXRlKDAsIGQuaGVpZ2h0IC0gbGF5ZXJIKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsYXllcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBkcmF3TGF5ZXIobGF5ZXJzW2ldLCBpID09IGFydHdvcmsuZ2V0QWN0aXZlTGF5ZXJJbmRleCgpKTtcbiAgICAgICAgICAgICAgICBjYW52YXNDb250ZXh0LnRyYW5zbGF0ZSgwLCAtbGF5ZXJIKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGxheWVyRHJhZ1JlYWxseSkge1xuICAgICAgICAgICAgICAgIGNhbnZhc0NvbnRleHQudHJhbnNsYXRlKDAsIGxheWVycy5sZW5ndGggKiBsYXllckggLSAoZC5oZWlnaHQgLSBsYXllckgpKTtcbiAgICAgICAgICAgICAgICBjYW52YXNDb250ZXh0LnN0cm9rZVJlY3QoMCwgbGF5ZXJEcmFnWSAqIGNhbnZhc1NjYWxlRmFjdG9yICAtIGxheWVySCAvIDIsIGQud2lkdGgsIGxheWVySCk7XG5cbiAgICAgICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICAgICAgbGF5ZXJPdmVyID0gZ2V0TGF5ZXJJbmRleCh7eDogMCwgeTogbGF5ZXJEcmFnWX0pO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGlmIChsYXllck92ZXIgPD0gbGF5ZXJzLmxlbmd0aCAmJiBsYXllck92ZXIgIT0gbGF5ZXJEcmFnSW5kZXggJiYgbGF5ZXJPdmVyICE9IGxheWVyRHJhZ0luZGV4ICsgMSkge1xuICAgICAgICAgICAgICAgICAgICBjYW52YXNDb250ZXh0LmZpbGxSZWN0KDAsIGQuaGVpZ2h0IC0gbGF5ZXJPdmVyICogbGF5ZXJIIC0gMiwgZC53aWR0aCwgNCAqIHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNhbnZhc0NvbnRleHQucmVzdG9yZSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5yZXNpemUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgIGFydHdvcmsgPSBjb250cm9sbGVyLmdldEFydHdvcmsoKSxcblxuICAgICAgICAgICAgICAgIC8vIE91ciBwYXJlbnQgY29udGFpbmVyIHdpbGwgYWN0IGFzIG91ciBzY3JvbGxiYXIgY2xpcCBhcmVhXG4gICAgICAgICAgICAgICAgcGFyZW50ID0gJChjYW52YXMpLnBhcmVudCgpLFxuICAgICAgICAgICAgICAgIHBhcmVudEhlaWdodCA9IHBhcmVudC5oZWlnaHQoKSxcbiAgICAgICAgICAgICAgICBwYXJlbnRXaWR0aCA9IHBhcmVudC53aWR0aCgpLFxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIG5ld1dpZHRoLCBuZXdIZWlnaHQ7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGxheWVySCA9IDM0ICogd2luZG93LmRldmljZVBpeGVsUmF0aW87XG4gICAgICAgICAgICBleWVXID0gMjQgKiB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbztcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgbmV3V2lkdGggPSBwYXJlbnRXaWR0aCAqIHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvO1xuICAgICAgICAgICAgbmV3SGVpZ2h0ID0gTWF0aC5tYXgobGF5ZXJIICogYXJ0d29yay5nZXRMYXllckNvdW50KCksIHBhcmVudEhlaWdodCAqIHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gU2hvdWxkIHdlIHRyaWdnZXIgYSBzY3JvbGxiYXIgdG8gYXBwZWFyP1xuICAgICAgICAgICAgaWYgKG5ld0hlaWdodCA+IHBhcmVudEhlaWdodCAqIHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvKSB7XG4gICAgICAgICAgICAgICAgLy8gVGFrZSB0aGUgc2Nyb2xsYmFyIHdpZHRoIGludG8gYWNjb3VudCBpbiBvdXIgd2lkdGhcbiAgICAgICAgICAgICAgICBuZXdXaWR0aCAtPSAxNSAqIHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvO1xuICAgICAgICAgICAgICAgIHBhcmVudFswXS5zdHlsZS5vdmVyZmxvd1kgPSAnc2Nyb2xsJztcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcGFyZW50WzBdLnN0eWxlLm92ZXJmbG93WSA9ICdoaWRkZW4nO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjYW52YXMud2lkdGggPSBuZXdXaWR0aDtcbiAgICAgICAgICAgIGNhbnZhcy5oZWlnaHQgPSBuZXdIZWlnaHQ7XG5cbiAgICAgICAgICAgIGNhbnZhcy5zdHlsZS53aWR0aCA9IChuZXdXaWR0aCAvIHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvKSArIFwicHhcIjtcbiAgICAgICAgICAgIGNhbnZhcy5zdHlsZS5oZWlnaHQgPSAobmV3SGVpZ2h0IC8gd2luZG93LmRldmljZVBpeGVsUmF0aW8pICsgXCJweFwiO1xuXG4gICAgICAgICAgICBjYW52YXNDb250ZXh0LmZvbnQgPSAobGF5ZXJIICogMC4yNSkgKyBcInB0IHNhbnMtc2VyaWZcIjtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy5wYWludCgpO1xuICAgICAgICB9O1xuICAgICAgICBcbiAgICAgICAgdGhpcy5nZXRFbGVtZW50ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gY29udGFpbmVyO1xuICAgICAgICB9O1xuICAgICAgICBcbiAgICAgICAgY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICBpZiAocmVuYW1lRmllbGQuaXNWaXNpYmxlKCkpIHtcbiAgICAgICAgICAgICAgICByZW5hbWVGaWVsZC5yZW5hbWVBbmRIaWRlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoXCJkYmxjbGlja1wiLCBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICB2YXIgXG4gICAgICAgICAgICAgICAgb2Zmc2V0ID0gJChjYW52YXMpLm9mZnNldCgpLFxuICAgICAgICAgICAgICAgIG1vdXNlTG9jID0ge3g6IGUucGFnZVggLSBvZmZzZXQubGVmdCwgeTogZS5wYWdlWSAtIG9mZnNldC50b3B9LFxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGxheWVySW5kZXggPSBnZXRMYXllckluZGV4KG1vdXNlTG9jKTtcblxuICAgICAgICAgICAgaWYgKG1vdXNlTG9jLnggKiB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyA+IGV5ZVcgJiYgbGF5ZXJJbmRleCA+PSAwICYmIGxheWVySW5kZXggPCBhcnR3b3JrLmdldExheWVyQ291bnQoKSkge1xuICAgICAgICAgICAgICAgIHNob3dSZW5hbWVDb250cm9sKGxheWVySW5kZXgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBjYW52YXMuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICBvZmZzZXQgPSAkKGNhbnZhcykub2Zmc2V0KCksXG4gICAgICAgICAgICAgICAgbW91c2VMb2MgPSB7eDogZS5wYWdlWCAtIG9mZnNldC5sZWZ0LCB5OiBlLnBhZ2VZIC0gb2Zmc2V0LnRvcH07XG5cbiAgICAgICAgICAgIC8qIENsaWNrLCBtb3ZlZCBmcm9tIG1vdXNlQ2xpY2tlZCBkdWUgdG8gcHJvYmxlbXMgd2l0aCBmb2N1cyBhbmQgc3R1ZmYgKi9cbiAgICAgICAgICAgIGlmIChlLmJ1dHRvbiA9PSAwKSB7IC8qIExlZnQgYnV0dG9uICovXG4gICAgICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgICAgIGFydHdvcmsgPSBjb250cm9sbGVyLmdldEFydHdvcmsoKSxcbiAgICAgICAgICAgICAgICAgICAgbGF5ZXJzID0gYXJ0d29yay5nZXRMYXllcnMoKSxcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGxheWVySW5kZXggPSBnZXRMYXllckluZGV4KG1vdXNlTG9jKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBpZiAobGF5ZXJJbmRleCA+PSAwICYmIGxheWVySW5kZXggPCBhcnR3b3JrLmdldExheWVyQ291bnQoKSkge1xuICAgICAgICAgICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxheWVyID0gYXJ0d29yay5nZXRMYXllcihsYXllckluZGV4KTtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGlmIChtb3VzZUxvYy54IC8gJChjYW52YXMpLndpZHRoKCkgKiBjYW52YXMud2lkdGggPCBleWVXKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhcnR3b3JrLnNldExheWVyVmlzaWJpbGl0eShsYXllckluZGV4LCAhbGF5ZXIudmlzaWJsZSk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhcnR3b3JrLnNldEFjdGl2ZUxheWVySW5kZXgobGF5ZXJJbmRleCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBTaW5jZSB0aGlzIGlzIGEgc2xvdyBHVUkgb3BlcmF0aW9uLCB0aGlzIGlzIGEgZ29vZCBjaGFuY2UgdG8gZ2V0IHRoZSBjYW52YXMgcmVhZHkgZm9yIGRyYXdpbmdcbiAgICAgICAgICAgICAgICAgICAgICAgIGFydHdvcmsucGVyZm9ybUlkbGVUYXNrcygpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGlmIChsYXllckluZGV4IDwgbGF5ZXJzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICBsYXllckRyYWcgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBsYXllckRyYWdZID0gbW91c2VMb2MueTtcbiAgICAgICAgICAgICAgICAgICAgbGF5ZXJEcmFnSW5kZXggPSBsYXllckluZGV4O1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIiwgbW91c2VEcmFnZ2VkKTtcbiAgICAgICAgICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsIG1vdXNlVXApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICBpZiAoIXdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvKSB7XG4gICAgICAgICAgICB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyA9IDEuMDtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgY2FudmFzQ29udGV4dC5zdHJva2VTdHlsZSA9ICdibGFjayc7XG4gICAgICAgIFxuICAgICAgICBjb250YWluZXIuY2xhc3NOYW1lID0gXCJjaGlja2VucGFpbnQtbGF5ZXJzLXdpZGdldFwiO1xuICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoY2FudmFzKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBDUFJlbmFtZUZpZWxkKCkge1xuICAgICAgICB2YXJcbiAgICAgICAgICAgIGxheWVySW5kZXggPSAtMSxcbiAgICAgICAgICAgIHRleHRCb3ggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIiksXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoYXQgPSB0aGlzO1xuXG4gICAgICAgIHRoaXMuaGlkZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgbGF5ZXJJbmRleCA9IC0xO1xuICAgICAgICAgICAgdGV4dEJveC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMucmVuYW1lQW5kSGlkZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIFxuICAgICAgICAgICAgICAgIGFydHdvcmsgPSBjb250cm9sbGVyLmdldEFydHdvcmsoKTtcblxuICAgICAgICAgICAgYXJ0d29yay5zZXRMYXllck5hbWUobGF5ZXJJbmRleCwgdGV4dEJveC52YWx1ZSk7XG5cbiAgICAgICAgICAgIHRoaXMuaGlkZSgpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMuaXNWaXNpYmxlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gdGV4dEJveC5zdHlsZS5kaXNwbGF5ICE9ICdub25lJztcbiAgICAgICAgfTtcbiAgICAgICAgXG4gICAgICAgIHRoaXMuc2V0TG9jYXRpb24gPSBmdW5jdGlvbihwb3NpdGlvblgsIHBvc2l0aW9uWSkge1xuICAgICAgICAgICAgdGV4dEJveC5zdHlsZS5sZWZ0ID0gcG9zaXRpb25YICsgXCJweFwiO1xuICAgICAgICAgICAgdGV4dEJveC5zdHlsZS50b3AgPSBwb3NpdGlvblkgKyBcInB4XCI7XG4gICAgICAgIH07XG4gICAgICAgIFxuICAgICAgICB0aGlzLnNob3cgPSBmdW5jdGlvbih4LCB5LCBfbGF5ZXJJbmRleCwgbGF5ZXJOYW1lKSB7XG4gICAgICAgICAgICBsYXllckluZGV4ID0gX2xheWVySW5kZXg7XG4gICAgICAgICAgICB0ZXh0Qm94LnZhbHVlID0gbGF5ZXJOYW1lO1xuICAgICAgICAgICAgdGhpcy5zZXRMb2NhdGlvbih4LCB5KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGV4dEJveC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAgICAgICAgIHRleHRCb3guc2VsZWN0KCk7XG4gICAgICAgIH07XG4gICAgICAgIFxuICAgICAgICB0aGlzLmdldEVsZW1lbnQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiB0ZXh0Qm94O1xuICAgICAgICB9O1xuICAgICAgICBcbiAgICAgICAgdGV4dEJveC50eXBlID0gXCJ0ZXh0XCI7XG4gICAgICAgIHRleHRCb3guY2xhc3NOYW1lID0gXCJjaGlja2VucGFpbnQtbGF5ZXItbmV3LW5hbWUgZm9ybS1jb250cm9sIGlucHV0LXNtXCI7XG4gICAgICAgIHRleHRCb3guc3R5bGUuZGlzcGxheSA9ICdub25lJztcblxuICAgICAgICB0ZXh0Qm94LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgIC8vIFByZXZlbnQgb3RoZXIga2V5aGFuZGxlcnMgKENQQ2FudmFzKSBmcm9tIGdldHRpbmcgdGhlaXIgZ3J1YmJ5IGhhbmRzIG9uIHRoZSBpbnB1dFxuICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGV4dEJveC5hZGRFdmVudExpc3RlbmVyKFwia2V5cHJlc3NcIiwgZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgaWYgKGUua2V5Q29kZSA9PSAxMykgeyAvLyBFbnRlclxuICAgICAgICAgICAgICAgIHRoYXQucmVuYW1lQW5kSGlkZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGV4dEJveC5hZGRFdmVudExpc3RlbmVyKFwia2V5dXBcIiwgZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgaWYgKGUua2V5Q29kZSA9PSAyNykgeyAvLyBFc2NhcGVcbiAgICAgICAgICAgICAgICB0aGF0LmhpZGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRleHRCb3guYWRkRXZlbnRMaXN0ZW5lcihcImJsdXJcIiwgZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgdGhhdC5yZW5hbWVBbmRIaWRlKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBcbiAgICBibGVuZENvbWJvLmNsYXNzTmFtZSA9IFwiZm9ybS1jb250cm9sXCI7XG4gICAgYmxlbmRDb21iby50aXRsZSA9IFwiTGF5ZXIgYmxlbmRpbmcgbW9kZVwiO1xuICAgIGJsZW5kQ29tYm8uYWRkRXZlbnRMaXN0ZW5lcihcImNoYW5nZVwiLCBmdW5jdGlvbihlKSB7XG4gICAgICAgIHZhclxuICAgICAgICAgICAgYXJ0d29yayA9IGNvbnRyb2xsZXIuZ2V0QXJ0d29yaygpO1xuICAgICAgICBcbiAgICAgICAgYXJ0d29yay5zZXRMYXllckJsZW5kTW9kZShhcnR3b3JrLmdldEFjdGl2ZUxheWVySW5kZXgoKSwgcGFyc2VJbnQoYmxlbmRDb21iby52YWx1ZSwgMTApKTtcbiAgICB9KTtcbiAgICBcbiAgICBmaWxsQ29tYm9ib3goYmxlbmRDb21ibywgTU9ERV9OQU1FUyk7XG5cbiAgICBib2R5LmFwcGVuZENoaWxkKGJsZW5kQ29tYm8pO1xuICAgIFxuICAgIGFscGhhU2xpZGVyLnRpdGxlID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIFwiT3BhY2l0eTogXCIgKyB2YWx1ZSArIFwiJVwiO1xuICAgIH07XG4gICAgXG4gICAgYWxwaGFTbGlkZXIub24oXCJ2YWx1ZUNoYW5nZVwiLCBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICB2YXJcbiAgICAgICAgICAgIGFydHdvcmsgPSBjb250cm9sbGVyLmdldEFydHdvcmsoKTtcbiAgICAgICAgXG4gICAgICAgIGFydHdvcmsuc2V0TGF5ZXJBbHBoYShhcnR3b3JrLmdldEFjdGl2ZUxheWVySW5kZXgoKSwgdmFsdWUpO1xuICAgIH0pO1xuICAgIFxuICAgIGJvZHkuYXBwZW5kQ2hpbGQoYWxwaGFTbGlkZXIuZ2V0RWxlbWVudCgpKTtcblxuICAgIGNiU2FtcGxlQWxsTGF5ZXJzLnR5cGUgPSBcImNoZWNrYm94XCI7XG4gICAgY2JTYW1wbGVBbGxMYXllcnMuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgdmFyXG4gICAgICAgICAgICBhcnR3b3JrID0gY29udHJvbGxlci5nZXRBcnR3b3JrKCk7XG4gICAgICAgIFxuICAgICAgICBhcnR3b3JrLnNldFNhbXBsZUFsbExheWVycyhjYlNhbXBsZUFsbExheWVycy5jaGVja2VkKTtcbiAgICB9KTtcbiAgICBcbiAgICBib2R5LmFwcGVuZENoaWxkKHdyYXBDaGVja2JveFdpdGhMYWJlbChjYlNhbXBsZUFsbExheWVycywgXCJTYW1wbGUgYWxsIGxheWVyc1wiKSk7XG4gICAgXG4gICAgY2JMb2NrQWxwaGEudHlwZSA9IFwiY2hlY2tib3hcIjtcbiAgICBjYkxvY2tBbHBoYS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24oZSkge1xuICAgICAgICB2YXJcbiAgICAgICAgICAgIGFydHdvcmsgPSBjb250cm9sbGVyLmdldEFydHdvcmsoKTtcbiAgICAgICAgXG4gICAgICAgYXJ0d29yay5zZXRMb2NrQWxwaGEoY2JMb2NrQWxwaGEuY2hlY2tlZCk7XG4gICAgfSk7XG4gICAgICAgIFxuICAgIGJvZHkuYXBwZW5kQ2hpbGQod3JhcENoZWNrYm94V2l0aExhYmVsKGNiTG9ja0FscGhhLCBcIkxvY2sgYWxwaGFcIikpO1xuXG4gICAgbGF5ZXJXaWRnZXQuZ2V0RWxlbWVudCgpLmFwcGVuZENoaWxkKHJlbmFtZUZpZWxkLmdldEVsZW1lbnQoKSk7XG5cbiAgICBib2R5LmFwcGVuZENoaWxkKGxheWVyV2lkZ2V0LmdldEVsZW1lbnQoKSk7XG5cbiAgICAvLyBBZGQvUmVtb3ZlIGxheWVyIGJ1dHRvbnNcbiAgICB2YXJcbiAgICAgICAgYWRkUmVtb3ZlQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInVsXCIpO1xuICAgIFxuICAgIGFkZFJlbW92ZUNvbnRhaW5lci5jbGFzc05hbWUgPSAnY2hpY2tlbnBhaW50LWxheWVyLWFkZC1yZW1vdmUgbGlzdC11bnN0eWxlZCc7XG4gICAgXG4gICAgYWRkQnV0dG9uLmNsYXNzTmFtZSA9ICdjaGlja2VucGFpbnQtc21hbGwtdG9vbGJhci1idXR0b24gY2hpY2tlbnBhaW50LWFkZC1sYXllcic7XG4gICAgYWRkQnV0dG9uLnRpdGxlID0gJ0FkZCBsYXllcic7XG4gICAgYWRkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbigpIHtcbiAgICAgICAgY29udHJvbGxlci5nZXRBcnR3b3JrKCkuYWRkTGF5ZXIoKTtcbiAgICB9KTtcblxuICAgIHJlbW92ZUJ1dHRvbi5jbGFzc05hbWUgPSAnY2hpY2tlbnBhaW50LXNtYWxsLXRvb2xiYXItYnV0dG9uIGNoaWNrZW5wYWludC1yZW1vdmUtbGF5ZXInO1xuICAgIHJlbW92ZUJ1dHRvbi50aXRsZSA9IFwiRGVsZXRlIGxheWVyXCI7XG4gICAgcmVtb3ZlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKCFjb250cm9sbGVyLmdldEFydHdvcmsoKS5yZW1vdmVMYXllcigpKSB7XG4gICAgICAgICAgICBhbGVydChcIkVycm9yOiBZb3UgY2FuJ3QgcmVtb3ZlIHRoZSBsYXN0IHJlbWFpbmluZyBsYXllciBpbiB0aGUgZHJhd2luZy5cIik7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBcbiAgICBhZGRSZW1vdmVDb250YWluZXIuYXBwZW5kQ2hpbGQoYWRkQnV0dG9uKTtcbiAgICBhZGRSZW1vdmVDb250YWluZXIuYXBwZW5kQ2hpbGQocmVtb3ZlQnV0dG9uKTtcblxuICAgIGJvZHkuYXBwZW5kQ2hpbGQoYWRkUmVtb3ZlQ29udGFpbmVyKTtcbiAgICBcbiAgICAvLyBTZXQgaW5pdGlhbCB2YWx1ZXNcbiAgICB2YXJcbiAgICAgICAgYXJ0d29yayA9IGNvbnRyb2xsZXIuZ2V0QXJ0d29yaygpO1xuICAgIFxuICAgIGFscGhhU2xpZGVyLnNldFZhbHVlKGFydHdvcmsuZ2V0QWN0aXZlTGF5ZXIoKS5nZXRBbHBoYSgpKTtcbiAgICBibGVuZENvbWJvLnZhbHVlID0gYXJ0d29yay5nZXRBY3RpdmVMYXllcigpLmdldEJsZW5kTW9kZSgpO1xuXG4gICAgLy8gYWRkIGxpc3RlbmVyc1xuICAgIGNvbnRyb2xsZXIuZ2V0QXJ0d29yaygpLm9uKFwiY2hhbmdlTGF5ZXJcIiwgZnVuY3Rpb24obGF5ZXJJbmRleCkge1xuICAgICAgICB2YXJcbiAgICAgICAgICAgIGFydHdvcmsgPSB0aGlzO1xuICAgICAgICBcbiAgICAgICAgaWYgKGFydHdvcmsuZ2V0QWN0aXZlTGF5ZXIoKS5nZXRBbHBoYSgpICE9IGFscGhhU2xpZGVyLnZhbHVlKSB7XG4gICAgICAgICAgICBhbHBoYVNsaWRlci5zZXRWYWx1ZShhcnR3b3JrLmdldEFjdGl2ZUxheWVyKCkuZ2V0QWxwaGEoKSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoYXJ0d29yay5nZXRBY3RpdmVMYXllcigpLmdldEJsZW5kTW9kZSgpICE9IHBhcnNlSW50KGJsZW5kQ29tYm8udmFsdWUsIDEwKSkge1xuICAgICAgICAgICAgYmxlbmRDb21iby52YWx1ZSA9IGFydHdvcmsuZ2V0QWN0aXZlTGF5ZXIoKS5nZXRCbGVuZE1vZGUoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChsYXllckluZGV4ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGxheWVyV2lkZ2V0LnBhaW50TGF5ZXIobGF5ZXJJbmRleCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBXZSBtYXkgaGF2ZSBhZGRlZCBvciByZW1vdmVkIGxheWVycywgcmVzaXplIGFzIGFwcHJvcHJpYXRlXG4gICAgICAgICAgICBsYXllcldpZGdldC5yZXNpemUoKTtcbiAgICAgICAgfVxuICAgIH0pO1xufVxuXG5DUExheWVyc1BhbGV0dGUucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShDUFBhbGV0dGUucHJvdG90eXBlKTtcbkNQTGF5ZXJzUGFsZXR0ZS5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBDUExheWVyc1BhbGV0dGU7IiwiLypcbiAgICBDaGlja2VuUGFpbnRcbiAgICBcbiAgICBDaGlja2VuUGFpbnQgaXMgYSB0cmFuc2xhdGlvbiBvZiBDaGliaVBhaW50IGZyb20gSmF2YSB0byBKYXZhU2NyaXB0XG4gICAgYnkgTmljaG9sYXMgU2hlcmxvY2sgLyBDaGlja2VuIFNtb290aGllLlxuICAgIFxuICAgIENoaWJpUGFpbnQgaXMgQ29weXJpZ2h0IChjKSAyMDA2LTIwMDggTWFyYyBTY2hlZmVyXG5cbiAgICBDaGlja2VuUGFpbnQgaXMgZnJlZSBzb2Z0d2FyZTogeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yIG1vZGlmeVxuICAgIGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgYXMgcHVibGlzaGVkIGJ5XG4gICAgdGhlIEZyZWUgU29mdHdhcmUgRm91bmRhdGlvbiwgZWl0aGVyIHZlcnNpb24gMyBvZiB0aGUgTGljZW5zZSwgb3JcbiAgICAoYXQgeW91ciBvcHRpb24pIGFueSBsYXRlciB2ZXJzaW9uLlxuXG4gICAgQ2hpY2tlblBhaW50IGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsXG4gICAgYnV0IFdJVEhPVVQgQU5ZIFdBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2ZcbiAgICBNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuICBTZWUgdGhlXG4gICAgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy5cblxuICAgIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXG4gICAgYWxvbmcgd2l0aCBDaGlja2VuUGFpbnQuIElmIG5vdCwgc2VlIDxodHRwOi8vd3d3LmdudS5vcmcvbGljZW5zZXMvPi5cbiovXG5cbmltcG9ydCBDUENhbnZhcyBmcm9tIFwiLi9DUENhbnZhc1wiO1xuaW1wb3J0IENQUGFsZXR0ZU1hbmFnZXIgZnJvbSBcIi4vQ1BQYWxldHRlTWFuYWdlclwiO1xuaW1wb3J0IENQTWFpbk1lbnUgZnJvbSBcIi4vQ1BNYWluTWVudVwiO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBDUE1haW5HVUkoY29udHJvbGxlciwgdWlFbGVtKSB7XG4gICAgdmFyXG4gICAgICAgIGxvd2VyQXJlYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksXG4gICAgICAgIGNhbnZhcyA9IG5ldyBDUENhbnZhcyhjb250cm9sbGVyKSxcbiAgICAgICAgcGFsZXR0ZU1hbmFnZXIgPSBuZXcgQ1BQYWxldHRlTWFuYWdlcihjb250cm9sbGVyKSxcbiAgICAgICAgbWVudUJhcixcblxuICAgICAgICBmdWxsU2NyZWVuTW9kZSA9IGZhbHNlLFxuICAgICAgICBcbiAgICAgICAgdGhhdCA9IHRoaXM7XG4gICAgXG4gICAgdGhpcy50b2dnbGVQYWxldHRlcyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBwYWxldHRlTWFuYWdlci50b2dnbGVQYWxldHRlcygpO1xuICAgIH07XG4gICAgXG4gICAgdGhpcy5hcnJhbmdlUGFsZXR0ZXMgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgLy8gR2l2ZSB0aGUgYnJvd3NlciBhIGNoYW5jZSB0byBkbyB0aGUgc2l6aW5nIG9mIHRoZSBwYWxldHRlcyBiZWZvcmUgd2UgdHJ5IHRvIHJlYXJyYW5nZSB0aGVtXG4gICAgICAgIHNldFRpbWVvdXQocGFsZXR0ZU1hbmFnZXIuYXJyYW5nZVBhbGV0dGVzLmJpbmQocGFsZXR0ZU1hbmFnZXIpLCAwKTtcbiAgICB9O1xuXG4gICAgdGhpcy5jb25zdHJhaW5QYWxldHRlcyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBwYWxldHRlTWFuYWdlci5jb25zdHJhaW5QYWxldHRlcygpO1xuICAgIH07XG4gICAgXG4gICAgdGhpcy5zaG93UGFsZXR0ZSA9IGZ1bmN0aW9uKHBhbGV0dGVOYW1lLCBzaG93KSB7XG4gICAgICAgIHBhbGV0dGVNYW5hZ2VyLnNob3dQYWxldHRlQnlOYW1lKHBhbGV0dGVOYW1lLCBzaG93KTtcbiAgICB9O1xuICAgIFxuICAgIHRoaXMuZ2V0U3dhdGNoZXMgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHBhbGV0dGVNYW5hZ2VyLnBhbGV0dGVzLnN3YXRjaGVzLmdldFN3YXRjaGVzKCk7XG4gICAgfTtcblxuICAgIHRoaXMuc2V0U3dhdGNoZXMgPSBmdW5jdGlvbihzd2F0Y2hlcykge1xuICAgICAgICBwYWxldHRlTWFuYWdlci5wYWxldHRlcy5zd2F0Y2hlcy5zZXRTd2F0Y2hlcyhzd2F0Y2hlcyk7XG4gICAgfTtcbiAgICBcbiAgICB0aGlzLmdldFBhbGV0dGVNYW5hZ2VyID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBwYWxldHRlTWFuYWdlcjtcbiAgICB9O1xuICAgIFxuICAgIHRoaXMuc2V0Um90YXRpb24gPSBmdW5jdGlvbihyb3RhdGlvbikge1xuICAgICAgICBjYW52YXMuc2V0Um90YXRpb24ocm90YXRpb24pO1xuICAgIH07XG5cbiAgICB0aGlzLnNldEZ1bGxTY3JlZW5Nb2RlID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgZnVsbFNjcmVlbk1vZGUgPSB2YWx1ZTtcblxuICAgICAgICB0aGF0LnJlc2l6ZSgpO1xuICAgICAgICB0aGF0LmFycmFuZ2VQYWxldHRlcygpO1xuICAgIH07XG5cbiAgICB0aGlzLnJlc2l6ZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXJcbiAgICAgICAgICAgIG5ld0hlaWdodDtcblxuICAgICAgICBpZiAoZnVsbFNjcmVlbk1vZGUpIHtcbiAgICAgICAgICAgIG5ld0hlaWdodCA9ICQod2luZG93KS5oZWlnaHQoKSAtICQobWVudUJhci5nZXRFbGVtZW50KCkpLmhlaWdodCgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbmV3SGVpZ2h0ID0gTWF0aC5taW4oTWF0aC5tYXgoKCQod2luZG93KS5oZWlnaHQoKSAtICQobWVudUJhci5nZXRFbGVtZW50KCkpLmhlaWdodCgpIC0gNjUpLCA1MDApLCA3NTApO1xuICAgICAgICB9XG5cbiAgICAgICAgY2FudmFzLnJlc2l6ZShuZXdIZWlnaHQpO1xuICAgICAgICB0aGF0LmNvbnN0cmFpblBhbGV0dGVzKCk7XG4gICAgfTtcblxuICAgIG1lbnVCYXIgPSBuZXcgQ1BNYWluTWVudShjb250cm9sbGVyLCB0aGlzKVxuXG4gICAgdWlFbGVtLmFwcGVuZENoaWxkKG1lbnVCYXIuZ2V0RWxlbWVudCgpKTtcbiAgICBcbiAgICBsb3dlckFyZWEuY2xhc3NOYW1lID0gJ2NoaWNrZW5wYWludC1tYWluLXNlY3Rpb24nO1xuICAgIFxuICAgIGxvd2VyQXJlYS5hcHBlbmRDaGlsZChjYW52YXMuZ2V0RWxlbWVudCgpKTtcbiAgICBsb3dlckFyZWEuYXBwZW5kQ2hpbGQocGFsZXR0ZU1hbmFnZXIuZ2V0RWxlbWVudCgpKTtcbiAgICBcbiAgICB1aUVsZW0uYXBwZW5kQ2hpbGQobG93ZXJBcmVhKTtcblxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicmVzaXplXCIsIHRoaXMucmVzaXplLmJpbmQodGhpcykpO1xuXG4gICAgc2V0VGltZW91dCh0aGlzLnJlc2l6ZS5iaW5kKHRoaXMpLCAwKTtcbn1cblxuQ1BNYWluR1VJLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoRXZlbnRFbWl0dGVyLnByb3RvdHlwZSk7XG5DUE1haW5HVUkucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gQ1BNYWluR1VJOyIsIi8qXG4gICAgQ2hpY2tlblBhaW50XG4gICAgXG4gICAgQ2hpY2tlblBhaW50IGlzIGEgdHJhbnNsYXRpb24gb2YgQ2hpYmlQYWludCBmcm9tIEphdmEgdG8gSmF2YVNjcmlwdFxuICAgIGJ5IE5pY2hvbGFzIFNoZXJsb2NrIC8gQ2hpY2tlbiBTbW9vdGhpZS5cbiAgICBcbiAgICBDaGliaVBhaW50IGlzIENvcHlyaWdodCAoYykgMjAwNi0yMDA4IE1hcmMgU2NoZWZlclxuXG4gICAgQ2hpY2tlblBhaW50IGlzIGZyZWUgc29mdHdhcmU6IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vciBtb2RpZnlcbiAgICBpdCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGFzIHB1Ymxpc2hlZCBieVxuICAgIHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb24sIGVpdGhlciB2ZXJzaW9uIDMgb2YgdGhlIExpY2Vuc2UsIG9yXG4gICAgKGF0IHlvdXIgb3B0aW9uKSBhbnkgbGF0ZXIgdmVyc2lvbi5cblxuICAgIENoaWNrZW5QYWludCBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLFxuICAgIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mXG4gICAgTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiAgU2VlIHRoZVxuICAgIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuXG5cbiAgICBZb3Ugc2hvdWxkIGhhdmUgcmVjZWl2ZWQgYSBjb3B5IG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZVxuICAgIGFsb25nIHdpdGggQ2hpY2tlblBhaW50LiBJZiBub3QsIHNlZSA8aHR0cDovL3d3dy5nbnUub3JnL2xpY2Vuc2VzLz4uXG4qL1xuXG52YXJcbiAgICBNRU5VX0VOVFJJRVMgPSBbXG4gICAgICAgIHtcbiAgICAgICAgICAgIG5hbWU6IFwiRmlsZVwiLFxuICAgICAgICAgICAgbW5lbW9uaWM6IFwiRlwiLFxuICAgICAgICAgICAgY2hpbGRyZW46IFtcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IFwiU2F2ZSB0byBteSBjb21wdXRlclwiLFxuICAgICAgICAgICAgICAgICAgICBhY3Rpb246IFwiQ1BTYXZlXCIsXG4gICAgICAgICAgICAgICAgICAgIG1uZW1vbmljOiBcIlNcIixcbiAgICAgICAgICAgICAgICAgICAgc2hvcnRjdXQ6IFwiY3RybCtzXCJcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJTYXZlIE9la2FraVwiLFxuICAgICAgICAgICAgICAgICAgICBhY3Rpb246IFwiQ1BTZW5kXCIsXG4gICAgICAgICAgICAgICAgICAgIG1uZW1vbmljOiBcIlNcIixcbiAgICAgICAgICAgICAgICAgICAgc2hvcnRjdXQ6IFwiY3RybCtzXCJcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgXSxcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgICAgbmFtZTogXCJFZGl0XCIsXG4gICAgICAgICAgICBtbmVtb25pYzogXCJFXCIsXG4gICAgICAgICAgICBjaGlsZHJlbjogW1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJVbmRvXCIsXG4gICAgICAgICAgICAgICAgICAgIGFjdGlvbjogXCJDUFVuZG9cIixcbiAgICAgICAgICAgICAgICAgICAgbW5lbW9uaWM6IFwiVVwiLFxuICAgICAgICAgICAgICAgICAgICBzaG9ydGN1dDogXCJjdHJsK3pcIixcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IFwiVW5kb2VzIHRoZSBtb3N0IHJlY2VudCBhY3Rpb25cIlxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiBcIlJlZG9cIixcbiAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiBcIkNQUmVkb1wiLFxuICAgICAgICAgICAgICAgICAgICBtbmVtb25pYzogXCJSXCIsXG4gICAgICAgICAgICAgICAgICAgIHNob3J0Y3V0OiBcInNoaWZ0K2N0cmwrelwiLFxuICAgICAgICAgICAgICAgICAgICB0aXRsZTogXCJSZWRvZXMgYSBwcmV2aW91c2x5IHVuZG9uZSBhY3Rpb25cIlxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiBcIkNsZWFyIGhpc3RvcnlcIixcbiAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiBcIkNQQ2xlYXJIaXN0b3J5XCIsXG4gICAgICAgICAgICAgICAgICAgIG1uZW1vbmljOiBcIkhcIixcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IFwiUmVtb3ZlcyBhbGwgdW5kby9yZWRvIGluZm9ybWF0aW9uIHRvIHJlZ2FpbiBtZW1vcnlcIlxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiBcIi1cIixcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJDdXRcIixcbiAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiBcIkNQQ3V0XCIsXG4gICAgICAgICAgICAgICAgICAgIG1uZW1vbmljOiBcIlRcIixcbiAgICAgICAgICAgICAgICAgICAgc2hvcnRjdXQ6IFwiY3RybCt4XCJcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJDb3B5XCIsXG4gICAgICAgICAgICAgICAgICAgIGFjdGlvbjogXCJDUENvcHlcIixcbiAgICAgICAgICAgICAgICAgICAgbW5lbW9uaWM6IFwiQ1wiLFxuICAgICAgICAgICAgICAgICAgICBzaG9ydGN1dDogXCJjdHJsK2NcIlxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiBcIkNvcHkgbWVyZ2VkXCIsXG4gICAgICAgICAgICAgICAgICAgIGFjdGlvbjogXCJDUENvcHlNZXJnZWRcIixcbiAgICAgICAgICAgICAgICAgICAgbW5lbW9uaWM6IFwiWVwiLFxuICAgICAgICAgICAgICAgICAgICBzaG9ydGN1dDogXCJzaGlmdCtjdHJsK2NcIlxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiBcIlBhc3RlXCIsXG4gICAgICAgICAgICAgICAgICAgIGFjdGlvbjogXCJDUFBhc3RlXCIsXG4gICAgICAgICAgICAgICAgICAgIG1uZW1vbmljOiBcIlBcIixcbiAgICAgICAgICAgICAgICAgICAgc2hvcnRjdXQ6IFwiY3RybCt2XCJcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogXCItXCJcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJTZWxlY3QgYWxsXCIsXG4gICAgICAgICAgICAgICAgICAgIGFjdGlvbjogXCJDUFNlbGVjdEFsbFwiLFxuICAgICAgICAgICAgICAgICAgICBtbmVtb25pYzogXCJBXCIsXG4gICAgICAgICAgICAgICAgICAgIHNob3J0Y3V0OiBcImN0cmwrYVwiXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IFwiRGVzZWxlY3RcIixcbiAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiBcIkNQRGVzZWxlY3RBbGxcIixcbiAgICAgICAgICAgICAgICAgICAgbW5lbW9uaWM6IFwiRFwiLFxuICAgICAgICAgICAgICAgICAgICBzaG9ydGN1dDogXCJjdHJsK2RcIlxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIF1cbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgICAgbmFtZTogXCJMYXllcnNcIixcbiAgICAgICAgICAgIG1uZW1vbmljOiBcIkxcIixcbiAgICAgICAgICAgIGNoaWxkcmVuOiBbXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiBcIkR1cGxpY2F0ZVwiLFxuICAgICAgICAgICAgICAgICAgICBhY3Rpb246IFwiQ1BMYXllckR1cGxpY2F0ZVwiLFxuICAgICAgICAgICAgICAgICAgICBtbmVtb25pYzogXCJEXCIsXG4gICAgICAgICAgICAgICAgICAgIHNob3J0Y3V0OiBcInNoaWZ0K2N0cmwrZFwiLFxuICAgICAgICAgICAgICAgICAgICB0aXRsZTogXCJDcmVhdGVzIGEgY29weSBvZiB0aGUgY3VycmVudGx5IHNlbGVjdGVkIGxheWVyXCJcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogXCItXCJcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJNZXJnZSBkb3duXCIsXG4gICAgICAgICAgICAgICAgICAgIGFjdGlvbjogXCJDUExheWVyTWVyZ2VEb3duXCIsXG4gICAgICAgICAgICAgICAgICAgIG1uZW1vbmljOiBcIkVcIixcbiAgICAgICAgICAgICAgICAgICAgc2hvcnRjdXQ6IFwiY3RybCtlXCIsXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiBcIk1lcmdlcyB0aGUgY3VycmVudGx5IHNlbGVjdGVkIGxheWVyIHdpdGggdGhlIG9uZSBkaXJlY3RseSBiZWxvdyBpdFwiXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IFwiTWVyZ2UgYWxsIGxheWVyc1wiLFxuICAgICAgICAgICAgICAgICAgICBhY3Rpb246IFwiQ1BMYXllck1lcmdlQWxsXCIsXG4gICAgICAgICAgICAgICAgICAgIG1uZW1vbmljOiBcIkFcIixcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IFwiTWVyZ2VzIGFsbCB0aGUgbGF5ZXJzXCJcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgXSxcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgICAgbmFtZTogXCJFZmZlY3RzXCIsXG4gICAgICAgICAgICBtbmVtb25pYzogXCJFXCIsXG4gICAgICAgICAgICBjaGlsZHJlbjogW1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJDbGVhclwiLFxuICAgICAgICAgICAgICAgICAgICBhY3Rpb246IFwiQ1BDbGVhclwiLFxuICAgICAgICAgICAgICAgICAgICBtbmVtb25pYzogXCJEXCIsXG4gICAgICAgICAgICAgICAgICAgIHNob3J0Y3V0OiBcImRlbCxiYWNrc3BhY2VcIixcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IFwiQ2xlYXJzIHRoZSBzZWxlY3RlZCBhcmVhXCJcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJGaWxsXCIsXG4gICAgICAgICAgICAgICAgICAgIGFjdGlvbjogXCJDUEZpbGxcIixcbiAgICAgICAgICAgICAgICAgICAgbW5lbW9uaWM6IFwiRlwiLFxuICAgICAgICAgICAgICAgICAgICBzaG9ydGN1dDogXCJjdHJsK2ZcIixcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IFwiRmlsbHMgdGhlIHNlbGVjdGVkIGFyZWEgd2l0aCB0aGUgY3VycmVudCBjb2xvclwiXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IFwiRmxpcCBob3Jpem9udGFsXCIsXG4gICAgICAgICAgICAgICAgICAgIGFjdGlvbjogXCJDUEhGbGlwXCIsXG4gICAgICAgICAgICAgICAgICAgIG1uZW1vbmljOiBcIkhcIixcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IFwiRmxpcHMgdGhlIGN1cnJlbnQgc2VsZWN0ZWQgYXJlYSBob3Jpem9udGFsbHlcIlxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiBcIkZsaXAgdmVydGljYWxcIixcbiAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiBcIkNQVkZsaXBcIixcbiAgICAgICAgICAgICAgICAgICAgbW5lbW9uaWM6IFwiVlwiLFxuICAgICAgICAgICAgICAgICAgICB0aXRsZTogXCJGbGlwcyB0aGUgY3VycmVudCBzZWxlY3RlZCBhcmVhIHZlcnRpY2FsbHlcIlxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiBcIkludmVydFwiLFxuICAgICAgICAgICAgICAgICAgICBhY3Rpb246IFwiQ1BGWEludmVydFwiLFxuICAgICAgICAgICAgICAgICAgICBtbmVtb25pYzogXCJJXCIsXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiBcIkludmVydCB0aGUgaW1hZ2UgY29sb3JzXCJcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogXCItXCJcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJCb3ggYmx1ci4uLlwiLFxuICAgICAgICAgICAgICAgICAgICBhY3Rpb246IFwiQ1BGWEJveEJsdXJcIixcbiAgICAgICAgICAgICAgICAgICAgbW5lbW9uaWM6IFwiQlwiLFxuICAgICAgICAgICAgICAgICAgICB0aXRsZTogXCJCbHVyIGVmZmVjdFwiXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IFwiLVwiXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IFwiTW9ub2Nocm9tYXRpYyBub2lzZVwiLFxuICAgICAgICAgICAgICAgICAgICBhY3Rpb246IFwiQ1BNTm9pc2VcIixcbiAgICAgICAgICAgICAgICAgICAgbW5lbW9uaWM6IFwiTVwiLFxuICAgICAgICAgICAgICAgICAgICB0aXRsZTogXCJGaWxscyB0aGUgc2VsZWN0aW9uIHdpdGggbm9pc2VcIlxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiBcIkNvbG9yIG5vaXNlXCIsXG4gICAgICAgICAgICAgICAgICAgIGFjdGlvbjogXCJDUENOb2lzZVwiLFxuICAgICAgICAgICAgICAgICAgICBtbmVtb25pYzogXCJDXCIsXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiBcIkZpbGxzIHRoZSBzZWxlY3Rpb24gd2l0aCBjb2xvcmVkIG5vaXNlXCJcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBdLFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgICBuYW1lOiBcIlZpZXdcIixcbiAgICAgICAgICAgIG1uZW1vbmljOiBcIlZcIixcbiAgICAgICAgICAgIGNoaWxkcmVuOiBbXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiBcIkZ1bGwtc2NyZWVuIG1vZGVcIixcbiAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiBcIkNQRnVsbFNjcmVlblwiLFxuICAgICAgICAgICAgICAgICAgICBtbmVtb25pYzogXCJGXCIsXG4gICAgICAgICAgICAgICAgICAgIGNoZWNrYm94OiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBjaGVja2VkOiBmYWxzZVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiBcIi1cIlxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiBcIlpvb20gaW5cIixcbiAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiBcIkNQWm9vbUluXCIsXG4gICAgICAgICAgICAgICAgICAgIG1uZW1vbmljOiBcIklcIixcbiAgICAgICAgICAgICAgICAgICAgc2hvcnRjdXQ6IFwiY3RybCs9XCIsXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiBcIlpvb21zIGluXCJcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJab29tIG91dFwiLFxuICAgICAgICAgICAgICAgICAgICBhY3Rpb246IFwiQ1Bab29tT3V0XCIsXG4gICAgICAgICAgICAgICAgICAgIG1uZW1vbmljOiBcIk9cIixcbiAgICAgICAgICAgICAgICAgICAgc2hvcnRjdXQ6IFwiY3RybCstXCIsXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiBcIlpvb21zIG91dFwiXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IFwiWm9vbSAxMDAlXCIsXG4gICAgICAgICAgICAgICAgICAgIGFjdGlvbjogXCJDUFpvb20xMDBcIixcbiAgICAgICAgICAgICAgICAgICAgbW5lbW9uaWM6IFwiMVwiLFxuICAgICAgICAgICAgICAgICAgICBzaG9ydGN1dDogXCJjdHJsKzBcIixcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IFwiUmVzZXRzIHRoZSB6b29tIGZhY3RvciB0byAxMDAlXCJcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogXCItXCJcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJTbW9vdGgtb3V0IHpvb21lZCBjYW52YXNcIixcbiAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiBcIkNQTGluZWFySW50ZXJwb2xhdGlvblwiLFxuICAgICAgICAgICAgICAgICAgICBtbmVtb25pYzogXCJMXCIsXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiBcIkxpbmVhciBpbnRlcnBvbGF0aW9uIGlzIHVzZWQgdG8gZ2l2ZSBhIHNtb290aGVkIGxvb2tlZCB0byB0aGUgcGljdHVyZSB3aGVuIHpvb21lZCBpblwiLFxuICAgICAgICAgICAgICAgICAgICBjaGVja2JveDogdHJ1ZVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiBcIi1cIlxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiBcIlNob3cgZ3JpZFwiLFxuICAgICAgICAgICAgICAgICAgICBhY3Rpb246IFwiQ1BUb2dnbGVHcmlkXCIsXG4gICAgICAgICAgICAgICAgICAgIG1uZW1vbmljOiBcIkdcIixcbiAgICAgICAgICAgICAgICAgICAgc2hvcnRjdXQ6IFwiY3RybCtnXCIsXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiBcIkRpc3BsYXlzIGEgZ3JpZCBvdmVyIHRoZSBpbWFnZVwiLFxuICAgICAgICAgICAgICAgICAgICBjaGVja2JveDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgY2hlY2tlZDogZmFsc2VcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJHcmlkIG9wdGlvbnMuLi5cIixcbiAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiBcIkNQR3JpZE9wdGlvbnNcIixcbiAgICAgICAgICAgICAgICAgICAgbW5lbW9uaWM6IFwiRFwiLFxuICAgICAgICAgICAgICAgICAgICB0aXRsZTogXCJTaG93cyB0aGUgZ3JpZCBvcHRpb25zIGRpYWxvZyBib3hcIixcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBdLFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgICBuYW1lOiBcIlBhbGV0dGVzXCIsXG4gICAgICAgICAgICBtbmVtb25pYzogXCJQXCIsXG4gICAgICAgICAgICBjaGlsZHJlbjogW1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJSZWFycmFuZ2VcIixcbiAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiBcIkNQQXJyYW5nZVBhbGV0dGVzXCIsXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiBcIlJlYXJyYW5nZSB0aGUgcGFsZXR0ZSB3aW5kb3dzXCJcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJUb2dnbGUgcGFsZXR0ZXNcIixcbiAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiBcIkNQVG9nZ2xlUGFsZXR0ZXNcIixcbiAgICAgICAgICAgICAgICAgICAgbW5lbW9uaWM6IFwiUFwiLFxuICAgICAgICAgICAgICAgICAgICBzaG9ydGN1dDogXCJ0YWJcIixcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IFwiSGlkZXMgb3Igc2hvd3MgYWxsIHBhbGV0dGVzXCJcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogXCItXCJcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJTaG93IHRvb2wgb3B0aW9uc1wiLFxuICAgICAgICAgICAgICAgICAgICBhY3Rpb246IFwiQ1BQYWxCcnVzaFwiLFxuICAgICAgICAgICAgICAgICAgICBtbmVtb25pYzogXCJCXCIsXG4gICAgICAgICAgICAgICAgICAgIGNoZWNrYm94OiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBjaGVja2VkOiB0cnVlXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IFwiU2hvdyBjb2xvclwiLFxuICAgICAgICAgICAgICAgICAgICBhY3Rpb246IFwiQ1BQYWxDb2xvclwiLFxuICAgICAgICAgICAgICAgICAgICBtbmVtb25pYzogXCJDXCIsXG4gICAgICAgICAgICAgICAgICAgIGNoZWNrYm94OiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBjaGVja2VkOiB0cnVlXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IFwiU2hvdyBsYXllcnNcIixcbiAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiBcIkNQUGFsTGF5ZXJzXCIsXG4gICAgICAgICAgICAgICAgICAgIG1uZW1vbmljOiBcIllcIixcbiAgICAgICAgICAgICAgICAgICAgY2hlY2tib3g6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ6IHRydWVcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJTaG93IG1pc2NcIixcbiAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiBcIkNQUGFsTWlzY1wiLFxuICAgICAgICAgICAgICAgICAgICBtbmVtb25pYzogXCJNXCIsXG4gICAgICAgICAgICAgICAgICAgIGNoZWNrYm94OiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBjaGVja2VkOiB0cnVlXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IFwiU2hvdyBzdHJva2VcIixcbiAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiBcIkNQUGFsU3Ryb2tlXCIsXG4gICAgICAgICAgICAgICAgICAgIG1uZW1vbmljOiBcIlNcIixcbiAgICAgICAgICAgICAgICAgICAgY2hlY2tib3g6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ6IHRydWVcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJTaG93IHN3YXRjaGVzXCIsXG4gICAgICAgICAgICAgICAgICAgIGFjdGlvbjogXCJDUFBhbFN3YXRjaGVzXCIsXG4gICAgICAgICAgICAgICAgICAgIG1uZW1vbmljOiBcIldcIixcbiAgICAgICAgICAgICAgICAgICAgY2hlY2tib3g6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ6IHRydWVcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJTaG93IHRleHR1cmVzXCIsXG4gICAgICAgICAgICAgICAgICAgIGFjdGlvbjogXCJDUFBhbFRleHR1cmVzXCIsXG4gICAgICAgICAgICAgICAgICAgIG1uZW1vbmljOiBcIlhcIixcbiAgICAgICAgICAgICAgICAgICAgY2hlY2tib3g6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ6IHRydWVcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJTaG93IHRvb2xzXCIsXG4gICAgICAgICAgICAgICAgICAgIGFjdGlvbjogXCJDUFBhbFRvb2xcIixcbiAgICAgICAgICAgICAgICAgICAgbW5lbW9uaWM6IFwiVFwiLFxuICAgICAgICAgICAgICAgICAgICBjaGVja2JveDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgY2hlY2tlZDogdHJ1ZVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIF1cbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgICAgbmFtZTogXCJIZWxwXCIsXG4gICAgICAgICAgICBtbmVtb25pYzogXCJIXCIsXG4gICAgICAgICAgICBjaGlsZHJlbjogW1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJUYWJsZXQgc3VwcG9ydFwiLFxuICAgICAgICAgICAgICAgICAgICBtbmVtb25pYzogXCJUXCIsXG4gICAgICAgICAgICAgICAgICAgIGFjdGlvbjogXCJDUFRhYmxldFN1cHBvcnRcIixcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IFwiSGVscCB3aXRoIGdldHRpbmcgYSBkcmF3aW5nIHRhYmxldCB3b3JraW5nXCJcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJTaG9ydGN1dHNcIixcbiAgICAgICAgICAgICAgICAgICAgbW5lbW9uaWM6IFwiU1wiLFxuICAgICAgICAgICAgICAgICAgICBhY3Rpb246IFwiQ1BTaG9ydGN1dHNcIixcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IFwiTGlzdCBvZiBrZXlib2FyZCBhbmQgbW91c2Ugc2hvcnRjdXRzXCJcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogXCItXCJcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJBYm91dFwiLFxuICAgICAgICAgICAgICAgICAgICBtbmVtb25pYzogXCJBXCIsXG4gICAgICAgICAgICAgICAgICAgIGFjdGlvbjogXCJDUEFib3V0XCIsXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiBcIkRpc3BsYXlzIHNvbWUgaW5mb3JtYXRpb24gYWJvdXQgQ2hpY2tlblBhaW50XCJcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBdXG4gICAgICAgIH0sXG4gICAgXTtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gQ1BNYWluTWVudShjb250cm9sbGVyLCBtYWluR1VJKSB7XG4gICAgdmFyXG4gICAgICAgIGJhciA9ICQoXG4gICAgICAgICAgICAnPG5hdiBjbGFzcz1cIm5hdmJhciBuYXZiYXItZGVmYXVsdFwiPidcbiAgICAgICAgICAgICAgICArICc8ZGl2IGNsYXNzPVwiY29udGFpbmVyLWZsdWlkXCI+J1xuICAgICAgICAgICAgICAgICAgICArICc8ZGl2IGNsYXNzPVwibmF2YmFyLWhlYWRlclwiPidcbiAgICAgICAgICAgICAgICAgICAgICAgICsgJzxhIGNsYXNzPVwibmF2YmFyLWJyYW5kXCIgaHJlZj1cIiNcIj5DaGlja2VuUGFpbnQ8L2E+J1xuICAgICAgICAgICAgICAgICAgICArICc8L2Rpdj4nXG4gICAgICAgICAgICAgICAgICAgICsgJzx1bCBjbGFzcz1cIm5hdiBuYXZiYXItbmF2XCI+J1xuICAgICAgICAgICAgICAgICAgICArICc8L3VsPidcbiAgICAgICAgICAgICAgICArICc8L2Rpdj4nXG4gICAgICAgICAgICArICc8L25hdj4nXG4gICAgICAgICksXG4gICAgICAgIG1hY1BsYXRmb3JtID0gL15NYWMvaS50ZXN0KG5hdmlnYXRvci5wbGF0Zm9ybSk7XG4gICAgXG4gICAgZnVuY3Rpb24gbWVudUl0ZW1DbGlja2VkKHRhcmdldCkge1xuICAgICAgICB2YXJcbiAgICAgICAgICAgIGFjdGlvbiA9IHRhcmdldC5kYXRhKCdhY3Rpb24nKSxcbiAgICAgICAgICAgIGNoZWNrYm94ID0gdGFyZ2V0LmRhdGEoJ2NoZWNrYm94JyksXG4gICAgICAgICAgICBzZWxlY3RlZDtcbiAgICAgICAgXG4gICAgICAgIGlmIChjaGVja2JveCkge1xuICAgICAgICAgICAgdGFyZ2V0LnRvZ2dsZUNsYXNzKFwic2VsZWN0ZWRcIik7XG4gICAgICAgICAgICBzZWxlY3RlZCA9IHRhcmdldC5oYXNDbGFzcyhcInNlbGVjdGVkXCIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc2VsZWN0ZWQgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgY29udHJvbGxlci5hY3Rpb25QZXJmb3JtZWQoe1xuICAgICAgICAgICAgYWN0aW9uOiBhY3Rpb24sXG4gICAgICAgICAgICBjaGVja2JveDogY2hlY2tib3gsXG4gICAgICAgICAgICBzZWxlY3RlZDogc2VsZWN0ZWRcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIFxuICAgIGZ1bmN0aW9uIHByZXNlbnRTaG9ydGN1dFRleHQoc2hvcnRjdXQpIHtcbiAgICAgICAgc2hvcnRjdXQgPSBzaG9ydGN1dC50b1VwcGVyQ2FzZSgpO1xuICAgICAgICBcbiAgICAgICAgLy8gT25seSBzaG93IHRoZSBmaXJzdCBwb3RlbnRpYWwgc2hvcnRjdXQgb3V0IG9mIHRoZSBjb21tYS1zZXBhcmF0ZWQgbGlzdFxuICAgICAgICBzaG9ydGN1dCA9IHNob3J0Y3V0LnJlcGxhY2UoLygsLispJC8sIFwiXCIpO1xuICAgICAgICBcbiAgICAgICAgLy8gQWx0aG91Z2ggdGhlIGtleWNvZGUgZm9yIHpvb20gaW4gaXMgXCI9XCIsIHdlJ2xsIHByZXNlbnQgaXQgdG8gdGhlIHVzZXIgYXMgXCIrXCJcbiAgICAgICAgc2hvcnRjdXQgPSBzaG9ydGN1dC5yZXBsYWNlKFwiY3RybCs9XCIsIFwiY3RybCsrXCIpO1xuICAgICAgICBzaG9ydGN1dCA9IHNob3J0Y3V0LnJlcGxhY2UoXCLijJgrPVwiLCBcIuKMmCsrXCIpO1xuICAgICAgICBcbiAgICAgICAgaWYgKG1hY1BsYXRmb3JtKSB7XG4gICAgICAgICAgICBzaG9ydGN1dCA9IHNob3J0Y3V0LnJlcGxhY2UoLyhbXitdKVxcKy9nLCBcIiQxXCIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc2hvcnRjdXQgPSBzaG9ydGN1dC5yZXBsYWNlKC8oW14rXSlcXCsvZywgXCIkMSBcIik7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHJldHVybiBzaG9ydGN1dDtcbiAgICB9XG4gICAgXG4gICAgZnVuY3Rpb24gcmVjdXJzZUZpbGxNZW51KG1lbnVFbGVtLCBlbnRyaWVzKSB7XG4gICAgICAgIG1lbnVFbGVtLmFwcGVuZChlbnRyaWVzLm1hcChmdW5jdGlvbihlbnRyeSkge1xuICAgICAgICAgICAgdmFyIFxuICAgICAgICAgICAgICAgIGVudHJ5RWxlbTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKGVudHJ5LmFjdGlvbiAmJiAhY29udHJvbGxlci5pc0FjdGlvblN1cHBvcnRlZChlbnRyeS5hY3Rpb24pKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoZW50cnkuY2hpbGRyZW4pIHtcbiAgICAgICAgICAgICAgICBlbnRyeUVsZW0gPSAkKFxuICAgICAgICAgICAgICAgICAgICAnPGxpIGNsYXNzPVwiZHJvcGRvd25cIj4nXG4gICAgICAgICAgICAgICAgICAgICAgICArICc8YSBocmVmPVwiI1wiIGNsYXNzPVwiZHJvcGRvd24tdG9nZ2xlXCIgZGF0YS10b2dnbGU9XCJkcm9wZG93blwiIHJvbGU9XCJidXR0b25cIiBhcmlhLWhhc3BvcHVwPVwidHJ1ZVwiIGFyaWEtZXhwYW5kZWQ9XCJmYWxzZVwiPicgKyBlbnRyeS5uYW1lICsgJyA8c3BhbiBjbGFzcz1cImNhcmV0XCI+PC9zcGFuPjwvYT4nXG4gICAgICAgICAgICAgICAgICAgICAgICArICc8dWwgY2xhc3M9XCJkcm9wZG93bi1tZW51XCI+J1xuICAgICAgICAgICAgICAgICAgICAgICAgKyAnPC91bD4nXG4gICAgICAgICAgICAgICAgICAgICsgJzwvbGk+J1xuICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICAkKFwiLmRyb3Bkb3duLXRvZ2dsZVwiLCBlbnRyeUVsZW0pLmRyb3Bkb3duKCk7XG5cbiAgICAgICAgICAgICAgICBlbnRyeUVsZW0ub24oXCJzaG93LmJzLmRyb3Bkb3duXCIsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAvKiBJbnN0ZWFkIG9mIEJvb3RzdHJhcCdzIGV4dHJlbWVseSBleHBlbnNpdmUgZGF0YSBBUEksIHdlJ2xsIG9ubHkgbGlzdGVuIGZvciBkaXNtaXNzIGNsaWNrcyBvbiB0aGVcbiAgICAgICAgICAgICAgICAgICAgICogZG9jdW1lbnQgKndoaWxlIHRoZSBtZW51IGlzIG9wZW4hKlxuICAgICAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAgICAgJChkb2N1bWVudCkub25lKFwiY2xpY2tcIiwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZW50cnlFbGVtLmhhc0NsYXNzKFwib3BlblwiKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoXCIuZHJvcGRvd24tdG9nZ2xlXCIsIGVudHJ5RWxlbSkuZHJvcGRvd24oXCJ0b2dnbGVcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHJlY3Vyc2VGaWxsTWVudSgkKFwiLmRyb3Bkb3duLW1lbnVcIiwgZW50cnlFbGVtKSwgZW50cnkuY2hpbGRyZW4pO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChlbnRyeS5uYW1lID09ICctJykge1xuICAgICAgICAgICAgICAgIGVudHJ5RWxlbSA9ICQoJzxsaSByb2xlPVwic2VwYXJhdG9yXCIgY2xhc3M9XCJkaXZpZGVyXCI+PC9saT4nKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgZW50cnlFbGVtID0gJCgnPGxpPjxhIGhyZWY9XCIjXCIgZGF0YS1hY3Rpb249XCInICsgZW50cnkuYWN0aW9uICsgJ1wiPjxzcGFuPicgKyBlbnRyeS5uYW1lICsgJzwvc3Bhbj48L2E+PC9saT4nKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBpZiAoZW50cnkuY2hlY2tib3gpIHtcbiAgICAgICAgICAgICAgICAgICAgJChcImFcIiwgZW50cnlFbGVtKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmRhdGEoXCJjaGVja2JveFwiLCB0cnVlKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnRvZ2dsZUNsYXNzKFwic2VsZWN0ZWRcIiwgISFlbnRyeS5jaGVja2VkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChlbnRyeS50aXRsZSkge1xuICAgICAgICAgICAgICAgIGVudHJ5RWxlbS5hdHRyKCd0aXRsZScsIGVudHJ5LnRpdGxlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKGVudHJ5LnNob3J0Y3V0KSB7XG4gICAgICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgICAgIG1lbnVMaW5rID0gJChcIj4gYVwiLCBlbnRyeUVsZW0pLFxuICAgICAgICAgICAgICAgICAgICBzaG9ydGN1dERlc2MgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic21hbGxcIik7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gUmV3cml0ZSB0aGUgc2hvcnRjdXRzIHRvIE1hYy1zdHlsZVxuICAgICAgICAgICAgICAgIGlmIChtYWNQbGF0Zm9ybSkge1xuICAgICAgICAgICAgICAgICAgICBlbnRyeS5zaG9ydGN1dCA9IGVudHJ5LnNob3J0Y3V0LnJlcGxhY2UoL1NISUZUL2ltLCBcIuKHp1wiKTtcbiAgICAgICAgICAgICAgICAgICAgZW50cnkuc2hvcnRjdXQgPSBlbnRyeS5zaG9ydGN1dC5yZXBsYWNlKC9BTFQvaW0sIFwi4oylXCIpO1xuICAgICAgICAgICAgICAgICAgICBlbnRyeS5zaG9ydGN1dCA9IGVudHJ5LnNob3J0Y3V0LnJlcGxhY2UoL0NUUkwvaW0sIFwi4oyYXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBzaG9ydGN1dERlc2MuY2xhc3NOYW1lID0gXCJjaGlja2VucGFpbnQtc2hvcnRjdXRcIjtcbiAgICAgICAgICAgICAgICBzaG9ydGN1dERlc2MuaW5uZXJIVE1MID0gcHJlc2VudFNob3J0Y3V0VGV4dChlbnRyeS5zaG9ydGN1dCk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgbWVudUxpbmsuYXBwZW5kKHNob3J0Y3V0RGVzYyk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAga2V5KGVudHJ5LnNob3J0Y3V0LCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgbWVudUl0ZW1DbGlja2VkKG1lbnVMaW5rKTtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgcmV0dXJuIGVudHJ5RWxlbTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBcbiAgICB0aGlzLmdldEVsZW1lbnQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIGJhclswXTtcbiAgICB9O1xuICAgIFxuICAgIHJlY3Vyc2VGaWxsTWVudSgkKFwiLm5hdmJhci1uYXZcIiwgYmFyKSwgTUVOVV9FTlRSSUVTKTtcblxuICAgICQoYmFyKS5vbignY2xpY2snLCAnYTpub3QoLmRyb3Bkb3duLXRvZ2dsZSknLCBmdW5jdGlvbihlKSB7XG4gICAgICAgIG1lbnVJdGVtQ2xpY2tlZCgkKHRoaXMpKTtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH0pO1xuICAgIFxuICAgIGZ1bmN0aW9uIG9uUGFsZXR0ZVZpc0NoYW5nZShwYWxldHRlTmFtZSwgc2hvdykge1xuICAgICAgICAvLyBUb2dnbGUgdGhlIHRpY2tib3ggb2YgdGhlIGNvcnJlc3BvbmRpbmcgbWVudSBlbnRyeSB0byBtYXRjaCB0aGUgbmV3IHBhbGV0dGUgdmlzaWJpbGl0eVxuICAgICAgICB2YXJcbiAgICAgICAgICAgIHBhbE1lbnVFbnRyeSA9ICQoJ1tkYXRhLWFjdGlvbj1cXFwiQ1BQYWwnICsgcGFsZXR0ZU5hbWUuc3Vic3RyaW5nKDAsIDEpLnRvVXBwZXJDYXNlKCkgKyBwYWxldHRlTmFtZS5zdWJzdHJpbmcoMSkgKyAnXFxcIl0nLCBiYXIpO1xuICAgICAgICBcbiAgICAgICAgcGFsTWVudUVudHJ5LnRvZ2dsZUNsYXNzKFwic2VsZWN0ZWRcIiwgc2hvdyk7XG4gICAgfVxuXG4gICAgbWFpbkdVSS5nZXRQYWxldHRlTWFuYWdlcigpLm9uKFwicGFsZXR0ZVZpc0NoYW5nZVwiLCBvblBhbGV0dGVWaXNDaGFuZ2UpO1xufSIsIi8qXG4gICAgQ2hpY2tlblBhaW50XG4gICAgXG4gICAgQ2hpY2tlblBhaW50IGlzIGEgdHJhbnNsYXRpb24gb2YgQ2hpYmlQYWludCBmcm9tIEphdmEgdG8gSmF2YVNjcmlwdFxuICAgIGJ5IE5pY2hvbGFzIFNoZXJsb2NrIC8gQ2hpY2tlbiBTbW9vdGhpZS5cbiAgICBcbiAgICBDaGliaVBhaW50IGlzIENvcHlyaWdodCAoYykgMjAwNi0yMDA4IE1hcmMgU2NoZWZlclxuXG4gICAgQ2hpY2tlblBhaW50IGlzIGZyZWUgc29mdHdhcmU6IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vciBtb2RpZnlcbiAgICBpdCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGFzIHB1Ymxpc2hlZCBieVxuICAgIHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb24sIGVpdGhlciB2ZXJzaW9uIDMgb2YgdGhlIExpY2Vuc2UsIG9yXG4gICAgKGF0IHlvdXIgb3B0aW9uKSBhbnkgbGF0ZXIgdmVyc2lvbi5cblxuICAgIENoaWNrZW5QYWludCBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLFxuICAgIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mXG4gICAgTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiAgU2VlIHRoZVxuICAgIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuXG5cbiAgICBZb3Ugc2hvdWxkIGhhdmUgcmVjZWl2ZWQgYSBjb3B5IG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZVxuICAgIGFsb25nIHdpdGggQ2hpY2tlblBhaW50LiBJZiBub3QsIHNlZSA8aHR0cDovL3d3dy5nbnUub3JnL2xpY2Vuc2VzLz4uXG4qL1xuXG5pbXBvcnQgQ1BQYWxldHRlIGZyb20gJy4vQ1BQYWxldHRlJztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gQ1BNaXNjUGFsZXR0ZShjcENvbnRyb2xsZXIpIHtcbiAgICBDUFBhbGV0dGUuY2FsbCh0aGlzLCBjcENvbnRyb2xsZXIsIFwibWlzY1wiLCBcIk1pc2NcIik7XG4gICAgXG4gICAgdmFyIFxuICAgICAgICB0aGF0ID0gdGhpcyxcblxuICAgICAgICBidXR0b25zID0gW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJjaGlja2VucGFpbnQtdG9vbC16b29tLWluXCIsXG4gICAgICAgICAgICAgICAgY29tbWFuZDogXCJDUFpvb21JblwiLFxuICAgICAgICAgICAgICAgIHRvb2xUaXA6IFwiWm9vbSBpblwiXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJjaGlja2VucGFpbnQtdG9vbC16b29tLW91dFwiLFxuICAgICAgICAgICAgICAgIGNvbW1hbmQ6IFwiQ1Bab29tT3V0XCIsXG4gICAgICAgICAgICAgICAgdG9vbFRpcDogXCJab29tIG91dFwiXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJjaGlja2VucGFpbnQtdG9vbC16b29tLTEwMFwiLFxuICAgICAgICAgICAgICAgIGNvbW1hbmQ6IFwiQ1Bab29tMTAwXCIsXG4gICAgICAgICAgICAgICAgdG9vbFRpcDogXCJab29tIDEwMCVcIlxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IFwiY2hpY2tlbnBhaW50LXRvb2wtdW5kb1wiLFxuICAgICAgICAgICAgICAgIGNvbW1hbmQ6IFwiQ1BVbmRvXCIsXG4gICAgICAgICAgICAgICAgdG9vbFRpcDogXCJVbmRvXCJcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBcImNoaWNrZW5wYWludC10b29sLXJlZG9cIixcbiAgICAgICAgICAgICAgICBjb21tYW5kOiBcIkNQUmVkb1wiLFxuICAgICAgICAgICAgICAgIHRvb2xUaXA6IFwiUmVkb1wiXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJjaGlja2VucGFpbnQtdG9vbC1zZW5kXCIsXG4gICAgICAgICAgICAgICAgY29tbWFuZDogXCJDUFNlbmRcIixcbiAgICAgICAgICAgICAgICB0b29sVGlwOiBcIlNhdmUgcGljXCJcbiAgICAgICAgICAgIH0sXG4gICAgICAgIF07XG5cbiAgICBmdW5jdGlvbiBidWlsZEJ1dHRvbnMoKSB7XG4gICAgICAgIHZhclxuICAgICAgICAgICAgYm9keSA9IHRoYXQuZ2V0Qm9keUVsZW1lbnQoKSxcbiAgICAgICAgICAgIGxpc3RFbGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInVsXCIpO1xuICAgICAgICBcbiAgICAgICAgbGlzdEVsZW0uY2xhc3NOYW1lID0gXCJjaGlja2VucGFpbnQtbWlzYy10b29scyBsaXN0LXVuc3R5bGVkXCI7XG4gICAgICAgIFxuICAgICAgICBmb3IgKHZhciBpIGluIGJ1dHRvbnMpIHtcbiAgICAgICAgICAgIHZhciBcbiAgICAgICAgICAgICAgICBidXR0b24gPSBidXR0b25zW2ldLFxuICAgICAgICAgICAgICAgIGJ1dHRvbkVsZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGlcIik7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGJ1dHRvbkVsZW0uY2xhc3NOYW1lID0gXCJjaGlja2VucGFpbnQtdG9vbGJhci1idXR0b24gXCIgKyBidXR0b24uY2xhc3NOYW1lO1xuICAgICAgICAgICAgYnV0dG9uRWxlbS5zZXRBdHRyaWJ1dGUoXCJkYXRhLWJ1dHRvbkluZGV4XCIsIGkpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBsaXN0RWxlbS5hcHBlbmRDaGlsZChidXR0b25FbGVtKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgbGlzdEVsZW0uYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICBpZiAoZS50YXJnZXQgJiYgZS50YXJnZXQubm9kZU5hbWUgPT0gXCJMSVwiKSB7XG4gICAgICAgICAgICAgICAgJChlLnRhcmdldCkuYWRkQ2xhc3MoXCJzZWxlY3RlZFwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICBsaXN0RWxlbS5hZGRFdmVudExpc3RlbmVyKFwibW91c2V1cFwiLCBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICBpZiAoZS50YXJnZXQgJiYgZS50YXJnZXQubm9kZU5hbWUgPT0gXCJMSVwiKSB7XG4gICAgICAgICAgICAgICAgJChlLnRhcmdldCkucmVtb3ZlQ2xhc3MoXCJzZWxlY3RlZFwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgbGlzdEVsZW0uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgIGlmIChlLnRhcmdldCAmJiBlLnRhcmdldC5ub2RlTmFtZSA9PSBcIkxJXCIpIHtcbiAgICAgICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICAgICAgYnV0dG9uID0gYnV0dG9uc1twYXJzZUludChlLnRhcmdldC5nZXRBdHRyaWJ1dGUoXCJkYXRhLWJ1dHRvbkluZGV4XCIpLCAxMCldO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGNwQ29udHJvbGxlci5hY3Rpb25QZXJmb3JtZWQoe2FjdGlvbjogYnV0dG9uLmNvbW1hbmR9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICBib2R5LmFwcGVuZENoaWxkKGxpc3RFbGVtKTtcbiAgICB9XG4gICAgXG4gICAgYnVpbGRCdXR0b25zKCk7XG59XG5cbkNQTWlzY1BhbGV0dGUucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShDUFBhbGV0dGUucHJvdG90eXBlKTtcbkNQTWlzY1BhbGV0dGUucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gQ1BNaXNjUGFsZXR0ZTtcbiIsIi8qXG4gICAgQ2hpY2tlblBhaW50XG4gICAgXG4gICAgQ2hpY2tlblBhaW50IGlzIGEgdHJhbnNsYXRpb24gb2YgQ2hpYmlQYWludCBmcm9tIEphdmEgdG8gSmF2YVNjcmlwdFxuICAgIGJ5IE5pY2hvbGFzIFNoZXJsb2NrIC8gQ2hpY2tlbiBTbW9vdGhpZS5cbiAgICBcbiAgICBDaGliaVBhaW50IGlzIENvcHlyaWdodCAoYykgMjAwNi0yMDA4IE1hcmMgU2NoZWZlclxuXG4gICAgQ2hpY2tlblBhaW50IGlzIGZyZWUgc29mdHdhcmU6IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vciBtb2RpZnlcbiAgICBpdCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGFzIHB1Ymxpc2hlZCBieVxuICAgIHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb24sIGVpdGhlciB2ZXJzaW9uIDMgb2YgdGhlIExpY2Vuc2UsIG9yXG4gICAgKGF0IHlvdXIgb3B0aW9uKSBhbnkgbGF0ZXIgdmVyc2lvbi5cblxuICAgIENoaWNrZW5QYWludCBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLFxuICAgIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mXG4gICAgTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiAgU2VlIHRoZVxuICAgIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuXG5cbiAgICBZb3Ugc2hvdWxkIGhhdmUgcmVjZWl2ZWQgYSBjb3B5IG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZVxuICAgIGFsb25nIHdpdGggQ2hpY2tlblBhaW50LiBJZiBub3QsIHNlZSA8aHR0cDovL3d3dy5nbnUub3JnL2xpY2Vuc2VzLz4uXG4qL1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBDUFBhbGV0dGUoY3BDb250cm9sbGVyLCBjbGFzc05hbWUsIHRpdGxlLCByZXNpemVWZXJ0KSB7XG4gICAgdGhpcy50aXRsZSA9IHRpdGxlO1xuICAgIHRoaXMubmFtZSA9IGNsYXNzTmFtZTtcbiAgICB0aGlzLnJlc2l6ZVZlcnQgPSByZXNpemVWZXJ0IHx8IGZhbHNlO1xuICAgIFxuICAgIHZhclxuICAgICAgICBjb250YWluZXJFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSxcbiAgICAgICAgaGVhZEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLFxuICAgICAgICBjbG9zZUJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIiksXG4gICAgICAgIGJvZHlFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSxcbiAgICAgICAgXG4gICAgICAgIHZlcnRIYW5kbGUgPSBudWxsLFxuICAgICAgICBcbiAgICAgICAgZHJhZ09mZnNldCxcbiAgICAgICAgXG4gICAgICAgIHRoYXQgPSB0aGlzO1xuICAgIFxuICAgIHRoaXMuZ2V0RWxlbWVudCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gY29udGFpbmVyRWxlbWVudDtcbiAgICB9O1xuICAgIFxuICAgIHRoaXMuZ2V0Qm9keUVsZW1lbnQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIGJvZHlFbGVtZW50O1xuICAgIH07XG4gICAgXG4gICAgdGhpcy5nZXRXaWR0aCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gJChjb250YWluZXJFbGVtZW50KS5vdXRlcldpZHRoKCk7XG4gICAgfTtcbiAgICBcbiAgICB0aGlzLmdldEhlaWdodCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gJChjb250YWluZXJFbGVtZW50KS5vdXRlckhlaWdodCgpO1xuICAgIH07XG4gICAgXG4gICAgdGhpcy5nZXRYID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBwYXJzZUludChjb250YWluZXJFbGVtZW50LnN0eWxlLmxlZnQsIDEwKSB8fCAwO1xuICAgIH07XG4gICAgXG4gICAgdGhpcy5nZXRZID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBwYXJzZUludChjb250YWluZXJFbGVtZW50LnN0eWxlLnRvcCwgMTApIHx8IDA7XG4gICAgfTtcbiAgICBcbiAgICB0aGlzLnNldExvY2F0aW9uID0gZnVuY3Rpb24oeCwgeSkge1xuICAgICAgICBjb250YWluZXJFbGVtZW50LnN0eWxlLmxlZnQgPSB4ICsgXCJweFwiO1xuICAgICAgICBjb250YWluZXJFbGVtZW50LnN0eWxlLnRvcCA9IHkgKyBcInB4XCI7XG4gICAgfTtcbiAgICBcbiAgICB0aGlzLnNldFdpZHRoID0gZnVuY3Rpb24od2lkdGgpIHtcbiAgICAgICAgY29udGFpbmVyRWxlbWVudC5zdHlsZS53aWR0aCA9IHdpZHRoICsgXCJweFwiO1xuICAgIH07XG5cbiAgICB0aGlzLnNldEhlaWdodCA9IGZ1bmN0aW9uKGhlaWdodCkge1xuICAgICAgICBjb250YWluZXJFbGVtZW50LnN0eWxlLmhlaWdodCA9IGhlaWdodCArIFwicHhcIjtcbiAgICB9O1xuICAgIFxuICAgIHRoaXMuc2V0U2l6ZSA9IGZ1bmN0aW9uKHdpZHRoLCBoZWlnaHQpIHtcbiAgICAgICAgdGhpcy5zZXRXaWR0aCh3aWR0aCk7XG4gICAgICAgIHRoaXMuc2V0SGVpZ2h0KGhlaWdodCk7XG4gICAgfTtcbiAgICBcbiAgICBmdW5jdGlvbiBtb3VzZURyYWcoZSkge1xuICAgICAgICB0aGF0LnNldExvY2F0aW9uKGUucGFnZVggLSBkcmFnT2Zmc2V0LngsIGUucGFnZVkgLSBkcmFnT2Zmc2V0LnkpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIG1vdXNlRHJhZ1JlbGVhc2UoZSkge1xuICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLCBtb3VzZURyYWcpO1xuICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNldXBcIiwgbW91c2VEcmFnUmVsZWFzZSk7XG4gICAgfVxuICAgIFxuICAgIGZ1bmN0aW9uIHZlcnRIYW5kbGVEcmFnKGUpIHtcbiAgICAgICAgdGhhdC5zZXRIZWlnaHQoZS5wYWdlWSAtICQoY29udGFpbmVyRWxlbWVudCkub2Zmc2V0KCkudG9wKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiB2ZXJ0SGFuZGxlUmVsZWFzZShlKSB7XG4gICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsIHZlcnRIYW5kbGVEcmFnKTtcbiAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsIHZlcnRIYW5kbGVSZWxlYXNlKTtcbiAgICB9XG4gICAgXG4gICAgZnVuY3Rpb24gdmVydEhhbmRsZU1vdXNlRG93bihlKSB7XG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsIHZlcnRIYW5kbGVEcmFnKTtcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsIHZlcnRIYW5kbGVSZWxlYXNlKTtcbiAgICB9XG4gICAgXG4gICAgZnVuY3Rpb24gYWRkVmVydFJlc2l6ZUhhbmRsZSgpIHtcbiAgICAgICAgdmVydEhhbmRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIFxuICAgICAgICB2ZXJ0SGFuZGxlLmNsYXNzTmFtZSA9IFwiY2hpY2tlbnBhaW50LXJlc2l6ZS1oYW5kbGUtdmVydFwiO1xuICAgICAgICBcbiAgICAgICAgdmVydEhhbmRsZS5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIHZlcnRIYW5kbGVNb3VzZURvd24pO1xuICAgICAgICBcbiAgICAgICAgY29udGFpbmVyRWxlbWVudC5hcHBlbmRDaGlsZCh2ZXJ0SGFuZGxlKTtcbiAgICB9XG5cbiAgICBjbG9zZUJ1dHRvbi50eXBlID0gXCJidXR0b25cIjtcbiAgICBjbG9zZUJ1dHRvbi5jbGFzc05hbWUgPSBcImNsb3NlXCI7XG4gICAgY2xvc2VCdXR0b24uaW5uZXJIVE1MID0gXCImdGltZXM7XCI7XG4gICAgXG4gICAgY29udGFpbmVyRWxlbWVudC5jbGFzc05hbWUgPSBcImNoaWNrZW5wYWludC1wYWxldHRlIGNoaWNrZW5wYWludC1wYWxldHRlLVwiICsgY2xhc3NOYW1lO1xuICAgIFxuICAgIGhlYWRFbGVtZW50LmNsYXNzTmFtZSA9IFwiY2hpY2tlbnBhaW50LXBhbGV0dGUtaGVhZFwiO1xuXG4gICAgdmFyXG4gICAgICAgIGhlYWRUaXRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJoNFwiKTtcbiAgICBcbiAgICBoZWFkVGl0bGUuY2xhc3NOYW1lID0gJ21vZGFsLXRpdGxlJztcbiAgICBoZWFkVGl0bGUuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUodGhpcy50aXRsZSkpXG4gICAgXG4gICAgaGVhZEVsZW1lbnQuYXBwZW5kQ2hpbGQoY2xvc2VCdXR0b24pO1xuICAgIGhlYWRFbGVtZW50LmFwcGVuZENoaWxkKGhlYWRUaXRsZSk7XG4gICAgXG4gICAgYm9keUVsZW1lbnQuY2xhc3NOYW1lID0gXCJjaGlja2VucGFpbnQtcGFsZXR0ZS1ib2R5XCI7XG4gICAgXG4gICAgY29udGFpbmVyRWxlbWVudC5hcHBlbmRDaGlsZChoZWFkRWxlbWVudCk7XG4gICAgY29udGFpbmVyRWxlbWVudC5hcHBlbmRDaGlsZChib2R5RWxlbWVudCk7XG5cbiAgICBpZiAodGhpcy5yZXNpemVWZXJ0KSB7XG4gICAgICAgIGFkZFZlcnRSZXNpemVIYW5kbGUoKTtcbiAgICB9XG5cbiAgICBoZWFkRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgaWYgKGUuYnV0dG9uID09IDApIHsvKiBMZWZ0ICovXG4gICAgICAgICAgICBpZiAoZS50YXJnZXQubm9kZU5hbWUgPT0gXCJCVVRUT05cIikge1xuICAgICAgICAgICAgICAgIHRoYXQuZW1pdEV2ZW50KFwicGFsZXR0ZVZpc0NoYW5nZVwiLCBbdGhhdCwgZmFsc2VdKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIiwgbW91c2VEcmFnKTtcbiAgICAgICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNldXBcIiwgbW91c2VEcmFnUmVsZWFzZSk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgZHJhZ09mZnNldCA9IHt4OiBlLnBhZ2VYIC0gJChjb250YWluZXJFbGVtZW50KS5wb3NpdGlvbigpLmxlZnQsIHk6IGUucGFnZVkgLSAkKGNvbnRhaW5lckVsZW1lbnQpLnBvc2l0aW9uKCkudG9wfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pO1xufVxuXG5DUFBhbGV0dGUucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShFdmVudEVtaXR0ZXIucHJvdG90eXBlKTtcbkNQUGFsZXR0ZS5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBFdmVudEVtaXR0ZXI7IiwiLypcbiAgICBDaGlja2VuUGFpbnRcbiAgICBcbiAgICBDaGlja2VuUGFpbnQgaXMgYSB0cmFuc2xhdGlvbiBvZiBDaGliaVBhaW50IGZyb20gSmF2YSB0byBKYXZhU2NyaXB0XG4gICAgYnkgTmljaG9sYXMgU2hlcmxvY2sgLyBDaGlja2VuIFNtb290aGllLlxuICAgIFxuICAgIENoaWJpUGFpbnQgaXMgQ29weXJpZ2h0IChjKSAyMDA2LTIwMDggTWFyYyBTY2hlZmVyXG5cbiAgICBDaGlja2VuUGFpbnQgaXMgZnJlZSBzb2Z0d2FyZTogeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yIG1vZGlmeVxuICAgIGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgYXMgcHVibGlzaGVkIGJ5XG4gICAgdGhlIEZyZWUgU29mdHdhcmUgRm91bmRhdGlvbiwgZWl0aGVyIHZlcnNpb24gMyBvZiB0aGUgTGljZW5zZSwgb3JcbiAgICAoYXQgeW91ciBvcHRpb24pIGFueSBsYXRlciB2ZXJzaW9uLlxuXG4gICAgQ2hpY2tlblBhaW50IGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsXG4gICAgYnV0IFdJVEhPVVQgQU5ZIFdBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2ZcbiAgICBNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuICBTZWUgdGhlXG4gICAgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy5cblxuICAgIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXG4gICAgYWxvbmcgd2l0aCBDaGlja2VuUGFpbnQuIElmIG5vdCwgc2VlIDxodHRwOi8vd3d3LmdudS5vcmcvbGljZW5zZXMvPi5cbiovXG5cbmltcG9ydCBDUFRvb2xQYWxldHRlIGZyb20gXCIuL0NQVG9vbFBhbGV0dGVcIjtcbmltcG9ydCBDUE1pc2NQYWxldHRlIGZyb20gXCIuL0NQTWlzY1BhbGV0dGVcIjtcbmltcG9ydCBDUFN0cm9rZVBhbGV0dGUgZnJvbSBcIi4vQ1BTdHJva2VQYWxldHRlXCI7XG5pbXBvcnQgQ1BDb2xvclBhbGV0dGUgZnJvbSBcIi4vQ1BDb2xvclBhbGV0dGVcIjtcbmltcG9ydCBDUEJydXNoUGFsZXR0ZSBmcm9tIFwiLi9DUEJydXNoUGFsZXR0ZVwiO1xuaW1wb3J0IENQTGF5ZXJzUGFsZXR0ZSBmcm9tIFwiLi9DUExheWVyc1BhbGV0dGVcIjtcbmltcG9ydCBDUFRleHR1cmVQYWxldHRlIGZyb20gXCIuL0NQVGV4dHVyZVBhbGV0dGVcIjtcbmltcG9ydCBDUFN3YXRjaGVzUGFsZXR0ZSBmcm9tIFwiLi9DUFN3YXRjaGVzUGFsZXR0ZVwiO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBDUFBhbGV0dGVNYW5hZ2VyKGNwQ29udHJvbGxlcikge1xuICAgIHZhclxuICAgICAgICBwYWxldHRlcyA9IHtcbiAgICAgICAgICAgIHRvb2w6IG5ldyBDUFRvb2xQYWxldHRlKGNwQ29udHJvbGxlciksXG4gICAgICAgICAgICBtaXNjOiBuZXcgQ1BNaXNjUGFsZXR0ZShjcENvbnRyb2xsZXIpLFxuICAgICAgICAgICAgc3Ryb2tlOiBuZXcgQ1BTdHJva2VQYWxldHRlKGNwQ29udHJvbGxlciksXG4gICAgICAgICAgICBjb2xvcjogbmV3IENQQ29sb3JQYWxldHRlKGNwQ29udHJvbGxlciksXG4gICAgICAgICAgICBicnVzaDogbmV3IENQQnJ1c2hQYWxldHRlKGNwQ29udHJvbGxlciksXG4gICAgICAgICAgICBsYXllcnM6IG5ldyBDUExheWVyc1BhbGV0dGUoY3BDb250cm9sbGVyKSxcbiAgICAgICAgICAgIHRleHR1cmVzOiBuZXcgQ1BUZXh0dXJlUGFsZXR0ZShjcENvbnRyb2xsZXIpLFxuICAgICAgICAgICAgc3dhdGNoZXM6IG5ldyBDUFN3YXRjaGVzUGFsZXR0ZShjcENvbnRyb2xsZXIpXG4gICAgICAgIH0sXG4gICAgICAgIFxuICAgICAgICBwYWxldHRlRnJhbWVzID0gW10sXG4gICAgICAgIGhpZGRlbkZyYW1lcyA9IFtdLFxuICAgICAgICBcbiAgICAgICAgcGFyZW50RWxlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksXG4gICAgICAgIFxuICAgICAgICB0aGF0ID0gdGhpcztcbiAgICBcbiAgICB0aGlzLnBhbGV0dGVzID0gcGFsZXR0ZXM7XG5cbiAgICBmdW5jdGlvbiBzaG93UGFsZXR0ZShwYWxldHRlLCBzaG93KSB7XG4gICAgICAgIHZhclxuICAgICAgICAgICAgcGFsRWxlbWVudCA9IHBhbGV0dGUuZ2V0RWxlbWVudCgpO1xuICAgICAgICBcbiAgICAgICAgaWYgKHNob3cpIHtcbiAgICAgICAgICAgIHBhcmVudEVsZW0uYXBwZW5kQ2hpbGQocGFsRWxlbWVudCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBwYXJlbnRFbGVtLnJlbW92ZUNoaWxkKHBhbEVsZW1lbnQpO1xuICAgICAgICB9XG4gICAgICAgIHRoYXQuZW1pdEV2ZW50KFwicGFsZXR0ZVZpc0NoYW5nZVwiLCBbcGFsZXR0ZS5uYW1lLCBzaG93XSk7XG5cbiAgICAgICAgLy8gRklYTUU6IGZvY3VzIGhhY2tcbiAgICAgICAgLy8gY29udHJvbGxlci5jYW52YXMuZ3JhYkZvY3VzKCk7IFRPRE9cbiAgICB9XG4gICAgXG4gICAgdGhpcy5zaG93UGFsZXR0ZUJ5TmFtZSA9IGZ1bmN0aW9uKHBhbGV0dGVOYW1lLCBzaG93KSB7XG4gICAgICAgIHZhciBcbiAgICAgICAgICAgIHBhbGV0dGUgPSBwYWxldHRlc1twYWxldHRlTmFtZV07XG4gICAgICAgIFxuICAgICAgICBpZiAocGFsZXR0ZSkge1xuICAgICAgICAgICAgc2hvd1BhbGV0dGUocGFsZXR0ZSwgc2hvdyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLnRvZ2dsZVBhbGV0dGVzID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmIChoaWRkZW5GcmFtZXMubGVuZ3RoID09IDApIHtcbiAgICAgICAgICAgICQoXCI+IC5jaGlja2VucGFpbnQtcGFsZXR0ZVwiLCBwYXJlbnRFbGVtKS5lYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHRoYXQuc2hvd1BhbGV0dGVCeU5hbWUodGhpcy5nZXRBdHRyaWJ1dGUoXCJkYXRhLXBhbGV0dGVOYW1lXCIpLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgaGlkZGVuRnJhbWVzLnB1c2godGhpcyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaGlkZGVuRnJhbWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIFxuICAgICAgICAgICAgICAgICAgICBmcmFtZSA9IGhpZGRlbkZyYW1lc1tpXTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB0aGF0LnNob3dQYWxldHRlQnlOYW1lKGZyYW1lLmdldEF0dHJpYnV0ZShcImRhdGEtcGFsZXR0ZU5hbWVcIiksIHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaGlkZGVuRnJhbWVzID0gW107XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogUG9wIHBhbGV0dGVzIHRoYXQgYXJlIGN1cnJlbnRseSBvdXRzaWRlIHRoZSB2aXNpYmxlIGFyZWEgYmFjayBpbnRvIHZpZXcuXG4gICAgICovXG4gICAgdGhpcy5jb25zdHJhaW5QYWxldHRlcyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXJcbiAgICAgICAgICAgIHdpbmRvd1dpZHRoID0gJChwYXJlbnRFbGVtKS5wYXJlbnRzKFwiLmNoaWNrZW5wYWludC1tYWluLXNlY3Rpb25cIikud2lkdGgoKSxcbiAgICAgICAgICAgIHdpbmRvd0hlaWdodCA9ICQocGFyZW50RWxlbSkucGFyZW50cyhcIi5jaGlja2VucGFpbnQtbWFpbi1zZWN0aW9uXCIpLmhlaWdodCgpO1xuXG4gICAgICAgIGZvciAodmFyIGkgaW4gcGFsZXR0ZXMpIHtcbiAgICAgICAgICAgIHZhciBwYWxldHRlID0gcGFsZXR0ZXNbaV07XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8qIE1vdmUgcGFsZXR0ZXMgdGhhdCBhcmUgbW9yZSB0aGFuIGhhbGYgb3V0IG9mIHRoZSBmcmFtZSBiYWNrIGludG8gaXQgKi9cbiAgICAgICAgICAgIGlmIChwYWxldHRlLmdldFgoKSArIHBhbGV0dGUuZ2V0V2lkdGgoKSAvIDIgPiB3aW5kb3dXaWR0aCkge1xuICAgICAgICAgICAgICAgIHBhbGV0dGUuc2V0TG9jYXRpb24od2luZG93V2lkdGggLSBwYWxldHRlLmdldFdpZHRoKCksIHBhbGV0dGUuZ2V0WSgpKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHBhbGV0dGUuZ2V0WSgpICsgcGFsZXR0ZS5nZXRIZWlnaHQoKSAvIDIgPiB3aW5kb3dIZWlnaHQpIHtcbiAgICAgICAgICAgICAgICBwYWxldHRlLnNldExvY2F0aW9uKHBhbGV0dGUuZ2V0WCgpLCB3aW5kb3dIZWlnaHQgLSBwYWxldHRlLmdldEhlaWdodCgpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy9Nb3ZlIHNtYWxsIHBhbGV0dGVzIHRvIHRoZSBmcm9udCBzbyB0aGF0IHRoZXkgYXJlbid0IGNvbXBsZXRlbHkgaGlkZGVuXG4gICAgICAgIC8vcGFsZXR0ZXMuc3dhdGNoZXMubW92ZVRvRnJvbnQoKTtcbiAgICAgICAgXG4gICAgICAgIC8vU3BlY2lhbCBoYW5kbGluZyBmb3IgdGhlIHN3YXRjaGVzIHBhbGV0dGUgYmVpbmcgdW5kZXIgdGhlIGJydXNoIHBhbGV0dGU6XG4gICAgICAgIHZhclxuICAgICAgICAgICAgd2lkdGhUb1NwYXJlID0gd2luZG93V2lkdGggLSBwYWxldHRlcy50b29sLmdldFdpZHRoKCkgLSBwYWxldHRlcy5taXNjLmdldFdpZHRoKCkgLSBwYWxldHRlcy5zdHJva2UuZ2V0V2lkdGgoKSAtIHBhbGV0dGVzLmNvbG9yLmdldFdpZHRoKCkgLSBwYWxldHRlcy5icnVzaC5nZXRXaWR0aCgpIC0gMTUgPiAwO1xuXG4gICAgICAgIGlmIChwYWxldHRlcy5zd2F0Y2hlcy5nZXRYKCkgKyBwYWxldHRlcy5zd2F0Y2hlcy5nZXRXaWR0aCgpID09ICBwYWxldHRlcy5icnVzaC5nZXRYKCkgKyBwYWxldHRlcy5icnVzaC5nZXRXaWR0aCgpICYmXG4gICAgICAgICAgICAgICAgTWF0aC5hYnMocGFsZXR0ZXMuc3dhdGNoZXMuZ2V0WSgpIC0gcGFsZXR0ZXMuYnJ1c2guZ2V0WSgpKSA8IDIwKSB7XG4gICAgICAgICAgICBwYWxldHRlcy5zd2F0Y2hlcy5zZXRMb2NhdGlvbihwYWxldHRlcy5icnVzaC5nZXRYKCkgLSBwYWxldHRlcy5zd2F0Y2hlcy5nZXRXaWR0aCgpIC0gKHdpZHRoVG9TcGFyZSA/IDUgOiAxKSwgMCk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vU3BlY2lhbCBoYW5kbGluZyBmb3IgbGF5ZXJzIHBhbGV0dGUgYmVpbmcgdG9vIGRhbW4gdGFsbDpcbiAgICAgICAgaWYgKHBhbGV0dGVzLmxheWVycy5nZXRZKCkgKyBwYWxldHRlcy5sYXllcnMuZ2V0SGVpZ2h0KCkgPiB3aW5kb3dIZWlnaHQpIHtcbiAgICAgICAgICAgIHBhbGV0dGVzLmxheWVycy5zZXRIZWlnaHQoTWF0aC5tYXgod2luZG93SGVpZ2h0IC0gcGFsZXR0ZXMubGF5ZXJzLmdldFkoKSwgMjAwKSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFxuICAgIC8qKlxuICAgICAqIFJlYXJyYW5nZSB0aGUgcGFsZXR0ZXMgZnJvbSBzY3JhdGNoIGludG8gYSB1c2VmdWwgYXJyYW5nZW1lbnQuXG4gICAgICovXG4gICAgdGhpcy5hcnJhbmdlUGFsZXR0ZXMgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyXG4gICAgICAgICAgICB3aW5kb3dXaWR0aCA9ICQocGFyZW50RWxlbSkucGFyZW50cyhcIi5jaGlja2VucGFpbnQtbWFpbi1zZWN0aW9uXCIpLndpZHRoKCksXG4gICAgICAgICAgICB3aW5kb3dIZWlnaHQgPSAkKHBhcmVudEVsZW0pLnBhcmVudHMoXCIuY2hpY2tlbnBhaW50LW1haW4tc2VjdGlvblwiKS5oZWlnaHQoKSxcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaGF2ZVdpZHRoVG9TcGFyZSA9IHdpbmRvd1dpZHRoIC0gcGFsZXR0ZXMudG9vbC5nZXRXaWR0aCgpIC0gcGFsZXR0ZXMubWlzYy5nZXRXaWR0aCgpIC0gcGFsZXR0ZXMuc3Ryb2tlLmdldFdpZHRoKCkgLSBwYWxldHRlcy5jb2xvci5nZXRXaWR0aCgpIC0gcGFsZXR0ZXMuYnJ1c2guZ2V0V2lkdGgoKSAtIDE1ID4gMDtcblxuICAgICAgICBwYWxldHRlcy5icnVzaC5zZXRMb2NhdGlvbih3aW5kb3dXaWR0aCAtIHBhbGV0dGVzLmJydXNoLmdldFdpZHRoKCkgLSAxNSwgMCk7XG5cbiAgICAgICAgdmFyIFxuICAgICAgICAgICAgYm90dG9tT2ZCcnVzaCA9IHBhbGV0dGVzLmJydXNoLmdldFkoKSArIHBhbGV0dGVzLmJydXNoLmdldEhlaWdodCgpO1xuXG4gICAgICAgIHBhbGV0dGVzLmxheWVycy5zZXRMb2NhdGlvbihwYWxldHRlcy5icnVzaC5nZXRYKCksIHdpbmRvd0hlaWdodCAtIGJvdHRvbU9mQnJ1c2ggPiAzMDAgPyBib3R0b21PZkJydXNoICsgMiA6IGJvdHRvbU9mQnJ1c2gpO1xuICAgICAgICBwYWxldHRlcy5sYXllcnMuc2V0U2l6ZShwYWxldHRlcy5icnVzaC5nZXRXaWR0aCgpLCB3aW5kb3dIZWlnaHQgLSBwYWxldHRlcy5sYXllcnMuZ2V0WSgpKTtcblxuICAgICAgICBwYWxldHRlcy50b29sLnNldExvY2F0aW9uKDAsIDApO1xuICAgICAgICBcbiAgICAgICAgcGFsZXR0ZXMubWlzYy5zZXRMb2NhdGlvbihwYWxldHRlcy50b29sLmdldFgoKSArIHBhbGV0dGVzLnRvb2wuZ2V0V2lkdGgoKSArIChoYXZlV2lkdGhUb1NwYXJlID8gNSA6IDEpLCAwKTtcbiAgICAgICAgXG4gICAgICAgIGlmIChoYXZlV2lkdGhUb1NwYXJlKSB7XG4gICAgICAgICAgICBwYWxldHRlcy5zdHJva2Uuc2V0TG9jYXRpb24ocGFsZXR0ZXMubWlzYy5nZXRYKCkgKyBwYWxldHRlcy5taXNjLmdldFdpZHRoKCkgKyAoaGF2ZVdpZHRoVG9TcGFyZSA/IDUgOiAxKSwgMCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBwYWxldHRlcy5zdHJva2Uuc2V0TG9jYXRpb24ocGFsZXR0ZXMubWlzYy5nZXRYKCksIHBhbGV0dGVzLm1pc2MuZ2V0WSgpICsgcGFsZXR0ZXMubWlzYy5nZXRIZWlnaHQoKSArIDEpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBwYWxldHRlcy5zd2F0Y2hlcy5zZXRMb2NhdGlvbihwYWxldHRlcy5icnVzaC5nZXRYKCkgLSBwYWxldHRlcy5zd2F0Y2hlcy5nZXRXaWR0aCgpIC0gKGhhdmVXaWR0aFRvU3BhcmUgPyA1IDogMSksIDApO1xuXG4gICAgICAgIHBhbGV0dGVzLnRleHR1cmVzLnNldFdpZHRoKE1hdGgubWluKHBhbGV0dGVzLmxheWVycy5nZXRYKCkgLSBwYWxldHRlcy50ZXh0dXJlcy5nZXRYKCksIDQ5MCkpO1xuICAgICAgICBwYWxldHRlcy50ZXh0dXJlcy5zZXRMb2NhdGlvbihwYWxldHRlcy5jb2xvci5nZXRYKCkgKyBwYWxldHRlcy5jb2xvci5nZXRXaWR0aCgpICsgNCwgd2luZG93SGVpZ2h0IC0gcGFsZXR0ZXMudGV4dHVyZXMuZ2V0SGVpZ2h0KCkpO1xuXG4gICAgICAgIHBhbGV0dGVzLmNvbG9yLnNldExvY2F0aW9uKDAsIE1hdGgubWF4KHBhbGV0dGVzLnRvb2wuZ2V0WSgpICsgcGFsZXR0ZXMudG9vbC5nZXRIZWlnaHQoKSwgd2luZG93SGVpZ2h0IC0gcGFsZXR0ZXMuY29sb3IuZ2V0SGVpZ2h0KCkpKTtcbiAgICB9O1xuICAgIFxuICAgIHRoaXMuZ2V0RWxlbWVudCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gcGFyZW50RWxlbTtcbiAgICB9O1xuXG4gICAgcGFyZW50RWxlbS5jbGFzc05hbWUgPSBcImNoaWNrZW5wYWludC1wYWxldHRlc1wiO1xuXG4gICAgZm9yICh2YXIgcGFsZXR0ZU5hbWUgaW4gcGFsZXR0ZXMpIHtcbiAgICAgICAgdmFyIFxuICAgICAgICAgICAgcGFsZXR0ZSA9IHBhbGV0dGVzW3BhbGV0dGVOYW1lXSxcbiAgICAgICAgICAgIHBhbEVsZW1lbnQgPSBwYWxldHRlLmdldEVsZW1lbnQoKTtcbiAgICAgICAgXG4gICAgICAgIHBhbGV0dGUub24oXCJwYWxldHRlVmlzQ2hhbmdlXCIsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgc2hvd1BhbGV0dGUodGhpcywgZmFsc2UpO1xuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIHBhbEVsZW1lbnQuc2V0QXR0cmlidXRlKFwiZGF0YS1wYWxldHRlTmFtZVwiLCBwYWxldHRlTmFtZSk7XG4gICAgICAgIHBhbGV0dGVGcmFtZXMucHVzaChwYWxFbGVtZW50KTtcbiAgICB9XG4gICAgXG4gICAgZm9yICh2YXIgcGFsZXR0ZU5hbWUgaW4gcGFsZXR0ZXMpIHtcbiAgICAgICAgdmFyIFxuICAgICAgICAgICAgcGFsRWxlbWVudCA9IHBhbGV0dGVzW3BhbGV0dGVOYW1lXS5nZXRFbGVtZW50KCk7XG5cbiAgICAgICAgcGFyZW50RWxlbS5hcHBlbmRDaGlsZChwYWxFbGVtZW50KTtcbiAgICB9XG59XG5cbkNQUGFsZXR0ZU1hbmFnZXIucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShFdmVudEVtaXR0ZXIucHJvdG90eXBlKTtcbkNQUGFsZXR0ZU1hbmFnZXIucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gQ1BQYWxldHRlTWFuYWdlcjsiLCIvKlxuICAgIENoaWNrZW5QYWludFxuICAgIFxuICAgIENoaWNrZW5QYWludCBpcyBhIHRyYW5zbGF0aW9uIG9mIENoaWJpUGFpbnQgZnJvbSBKYXZhIHRvIEphdmFTY3JpcHRcbiAgICBieSBOaWNob2xhcyBTaGVybG9jayAvIENoaWNrZW4gU21vb3RoaWUuXG4gICAgXG4gICAgQ2hpYmlQYWludCBpcyBDb3B5cmlnaHQgKGMpIDIwMDYtMjAwOCBNYXJjIFNjaGVmZXJcblxuICAgIENoaWNrZW5QYWludCBpcyBmcmVlIHNvZnR3YXJlOiB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3IgbW9kaWZ5XG4gICAgaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBhcyBwdWJsaXNoZWQgYnlcbiAgICB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uLCBlaXRoZXIgdmVyc2lvbiAzIG9mIHRoZSBMaWNlbnNlLCBvclxuICAgIChhdCB5b3VyIG9wdGlvbikgYW55IGxhdGVyIHZlcnNpb24uXG5cbiAgICBDaGlja2VuUGFpbnQgaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCxcbiAgICBidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZlxuICAgIE1FUkNIQU5UQUJJTElUWSBvciBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS4gIFNlZSB0aGVcbiAgICBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9yZSBkZXRhaWxzLlxuXG4gICAgWW91IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2VcbiAgICBhbG9uZyB3aXRoIENoaWNrZW5QYWludC4gSWYgbm90LCBzZWUgPGh0dHA6Ly93d3cuZ251Lm9yZy9saWNlbnNlcy8+LlxuKi9cblxuLyoqXG4gKiBAcGFyYW0gdmVydGljYWwgYm9vbGVhblxuICovXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBDUFNjcm9sbGJhcih2ZXJ0aWNhbCkge1xuICAgIHZhclxuICAgICAgICBiYXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLFxuICAgICAgICBoYW5kbGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLFxuICAgICAgICBoYW5kbGVJbm5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksXG4gICAgICAgIFxuICAgICAgICBtaW4gPSAwLCBtYXggPSAxLCBvZmZzZXQgPSAwLCB2aXNpYmxlUmFuZ2UgPSAxLFxuICAgICAgICBcbiAgICAgICAgYmxvY2tJbmNyZW1lbnQgPSAxMCwgdW5pdEluY3JlbWVudCA9IDEsXG4gICAgICAgIFxuICAgICAgICB2YWx1ZUlzQWRqdXN0aW5nID0gZmFsc2UsXG4gICAgICAgIFxuICAgICAgICBoYW5kbGVTaXplID0gMSxcbiAgICAgICAgXG4gICAgICAgIGRyYWdMYXN0T2Zmc2V0LFxuICAgICAgICBcbiAgICAgICAgdGhhdCA9IHRoaXM7XG4gICAgXG4gICAgZnVuY3Rpb24gdXBkYXRlQmFyKCkge1xuICAgICAgICB2YXJcbiAgICAgICAgICAgIGxvbmdEaW1lbnNpb24gPSB2ZXJ0aWNhbCA/ICQoYmFyKS5oZWlnaHQoKSA6ICQoYmFyKS53aWR0aCgpO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIC8qIEFzIHRoZSBzaXplIG9mIHRoZSBkb2N1bWVudCBhcHByb2FjaGVzIHRoZSBzaXplIG9mIHRoZSBjb250YWluZXIsIGhhbmRsZSBzaXplIGdyb3dzIHRvIGZpbGwgdGhlIFxuICAgICAgICAgICAgICogd2hvbGUgdHJhY2s6XG4gICAgICAgICAgICAgKi9cbiAgICAgICAgaGFuZGxlU2l6ZSA9IHZpc2libGVSYW5nZSAvIChtYXggLSBtaW4pICogbG9uZ0RpbWVuc2lvbjsgXG4gICAgICAgIFxuICAgICAgICB2YXJcbiAgICAgICAgICAgIGhhbmRsZU9mZnNldCA9IChvZmZzZXQgLSBtaW4pIC8gKG1heCAtIG1pbikgKiAobG9uZ0RpbWVuc2lvbiAtIGhhbmRsZVNpemUpO1xuICAgICAgICBcbiAgICAgICAgaGFuZGxlSW5uZXIuc3R5bGVbdmVydGljYWwgPyBcImhlaWdodFwiIDogXCJ3aWR0aFwiXSA9IGhhbmRsZVNpemUgKyBcInB4XCI7XG4gICAgICAgIGhhbmRsZS5zdHlsZVt2ZXJ0aWNhbCA/IFwiaGVpZ2h0XCIgOiBcIndpZHRoXCJdID0gaGFuZGxlU2l6ZSArIFwicHhcIjtcbiAgICAgICAgXG4gICAgICAgIGhhbmRsZS5zdHlsZVt2ZXJ0aWNhbCA/IFwidG9wXCIgOiBcImxlZnRcIl0gPSBoYW5kbGVPZmZzZXQgKyBcInB4XCI7XG4gICAgfVxuICAgIFxuICAgIHRoaXMuc2V0VmFsdWVzID0gZnVuY3Rpb24oX29mZnNldCwgX3Zpc2libGVSYW5nZSwgX21pbiwgX21heCkge1xuICAgICAgICBvZmZzZXQgPSBfb2Zmc2V0O1xuICAgICAgICB2aXNpYmxlUmFuZ2UgPSBfdmlzaWJsZVJhbmdlO1xuICAgICAgICBtaW4gPSBfbWluO1xuICAgICAgICBtYXggPSBfbWF4O1xuICAgICAgICBcbiAgICAgICAgdXBkYXRlQmFyKCk7XG4gICAgfTtcbiAgICBcbiAgICB0aGlzLnNldEJsb2NrSW5jcmVtZW50ID0gZnVuY3Rpb24oaW5jcmVtZW50KSB7XG4gICAgICAgIGJsb2NrSW5jcmVtZW50ID0gaW5jcmVtZW50O1xuICAgIH07XG4gICAgXG4gICAgdGhpcy5zZXRVbml0SW5jcmVtZW50ID0gZnVuY3Rpb24oaW5jcmVtZW50KSB7XG4gICAgICAgIHVuaXRJbmNyZW1lbnQgPSBpbmNyZW1lbnQ7XG4gICAgfTtcbiAgICBcbiAgICB0aGlzLmdldEVsZW1lbnQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIGJhcjtcbiAgICB9O1xuICAgIFxuICAgIHRoaXMuZ2V0VmFsdWVJc0FkanVzdGluZyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdmFsdWVJc0FkanVzdGluZztcbiAgICB9O1xuICAgIFxuICAgIGZ1bmN0aW9uIG9uQmFyQ2xpY2soZSkge1xuICAgICAgICBpZiAodGhpcyA9PSBiYXIpIHtcbiAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgIGNsaWNrUG9zID0gdmVydGljYWwgPyBlLnBhZ2VZIC0gJChiYXIpLm9mZnNldCgpLnRvcCA6IGUucGFnZVggLSAkKGJhcikub2Zmc2V0KCkubGVmdCxcbiAgICAgICAgICAgICAgICBiYXJQb3MgPSBwYXJzZUludChoYW5kbGUuc3R5bGVbdmVydGljYWwgPyBcInRvcFwiIDogXCJsZWZ0XCJdLCAxMCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChjbGlja1BvcyA8IGJhclBvcykge1xuICAgICAgICAgICAgICAgIG9mZnNldCAtPSBibG9ja0luY3JlbWVudDtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgb2Zmc2V0ICs9IGJsb2NrSW5jcmVtZW50O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICB0aGF0LmVtaXRFdmVudChcInZhbHVlQ2hhbmdlZFwiLCBbb2Zmc2V0XSk7XG4gICAgICAgICAgICB1cGRhdGVCYXIoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBcbiAgICBmdW5jdGlvbiBvbkhhbmRsZVByZXNzKGUpIHtcbiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgZHJhZ0xhc3RPZmZzZXQgPSB2ZXJ0aWNhbCA/IGUucGFnZVkgLSAkKGJhcikub2Zmc2V0KCkudG9wIDogZS5wYWdlWCAtICQoYmFyKS5vZmZzZXQoKS5sZWZ0O1xuICAgICAgICBcbiAgICAgICAgJChoYW5kbGUpLmFkZENsYXNzKFwiZHJhZ2dpbmdcIik7XG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwibW91c2V1cFwiLCBvbkhhbmRsZVJlbGVhc2UpO1xuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLCBvbkhhbmRsZURyYWcpO1xuICAgIH1cbiAgICBcbiAgICBmdW5jdGlvbiBvbkhhbmRsZUNsaWNrKGUpIHtcbiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICB9XG4gICAgXG4gICAgZnVuY3Rpb24gb25IYW5kbGVEcmFnKGUpIHtcbiAgICAgICAgdmFsdWVJc0FkanVzdGluZyA9IHRydWU7XG4gICAgICAgIFxuICAgICAgICB2YXJcbiAgICAgICAgICAgIGxvbmdEaW1lbnNpb24gPSB2ZXJ0aWNhbCA/ICQoYmFyKS5oZWlnaHQoKSA6ICQoYmFyKS53aWR0aCgpLFxuICAgICAgICAgICAgbW91c2VPZmZzZXQgPSB2ZXJ0aWNhbCA/IGUucGFnZVkgLSAkKGJhcikub2Zmc2V0KCkudG9wIDogZS5wYWdlWCAtICQoYmFyKS5vZmZzZXQoKS5sZWZ0O1xuICAgICAgICBcbiAgICAgICAgb2Zmc2V0ID0gb2Zmc2V0ICsgKG1vdXNlT2Zmc2V0IC0gZHJhZ0xhc3RPZmZzZXQpICogKG1heCAtIG1pbikgLyAobG9uZ0RpbWVuc2lvbiAtIGhhbmRsZVNpemUpO1xuICAgICAgICBcbiAgICAgICAgb2Zmc2V0ID0gTWF0aC5taW4oTWF0aC5tYXgob2Zmc2V0LCBtaW4pLCBtYXgpO1xuICAgICAgICBcbiAgICAgICAgZHJhZ0xhc3RPZmZzZXQgPSBtb3VzZU9mZnNldDtcbiAgICAgICAgXG4gICAgICAgIHRoYXQuZW1pdEV2ZW50KFwidmFsdWVDaGFuZ2VkXCIsIFtvZmZzZXRdKTtcbiAgICAgICAgdXBkYXRlQmFyKCk7XG4gICAgICAgIFxuICAgICAgICB2YWx1ZUlzQWRqdXN0aW5nID0gZmFsc2U7XG4gICAgfVxuICAgIFxuICAgIGZ1bmN0aW9uIG9uSGFuZGxlUmVsZWFzZShlKSB7XG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICQoaGFuZGxlKS5yZW1vdmVDbGFzcyhcImRyYWdnaW5nXCIpO1xuICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNldXBcIiwgb25IYW5kbGVSZWxlYXNlKTtcbiAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIiwgb25IYW5kbGVEcmFnKTtcbiAgICB9XG4gICAgXG4gICAgYmFyLmNsYXNzTmFtZSA9IFwiY2hpY2tlbnBhaW50LXNjcm9sbGJhciBcIiAgKyAodmVydGljYWwgPyBcImNoaWNrZW5wYWludC1zY3JvbGxiYXItdmVydGljYWxcIiA6IFwiY2hpY2tlbnBhaW50LXNjcm9sbGJhci1ob3Jpem9udGFsXCIpO1xuICAgIGhhbmRsZS5jbGFzc05hbWUgPSBcImNoaWNrZW5wYWludC1zY3JvbGxiYXItaGFuZGxlXCI7XG4gICAgaGFuZGxlSW5uZXIuY2xhc3NOYW1lID0gXCJjaGlja2VucGFpbnQtc2Nyb2xsYmFyLWhhbmRsZS1pbm5lclwiO1xuICAgIFxuICAgIGhhbmRsZS5hcHBlbmRDaGlsZChoYW5kbGVJbm5lcik7XG4gICAgYmFyLmFwcGVuZENoaWxkKGhhbmRsZSk7XG4gICAgXG4gICAgaGFuZGxlLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgb25IYW5kbGVQcmVzcyk7XG4gICAgaGFuZGxlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBvbkhhbmRsZUNsaWNrKTtcbiAgICBcbiAgICBiYXIuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIG9uQmFyQ2xpY2spO1xufVxuXG5DUFNjcm9sbGJhci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKEV2ZW50RW1pdHRlci5wcm90b3R5cGUpO1xuQ1BTY3JvbGxiYXIucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gQ1BTY3JvbGxiYXI7IiwiLypcbiAgICBDaGlja2VuUGFpbnRcbiAgICBcbiAgICBDaGlja2VuUGFpbnQgaXMgYSB0cmFuc2xhdGlvbiBvZiBDaGliaVBhaW50IGZyb20gSmF2YSB0byBKYXZhU2NyaXB0XG4gICAgYnkgTmljaG9sYXMgU2hlcmxvY2sgLyBDaGlja2VuIFNtb290aGllLlxuICAgIFxuICAgIENoaWJpUGFpbnQgaXMgQ29weXJpZ2h0IChjKSAyMDA2LTIwMDggTWFyYyBTY2hlZmVyXG5cbiAgICBDaGlja2VuUGFpbnQgaXMgZnJlZSBzb2Z0d2FyZTogeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yIG1vZGlmeVxuICAgIGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgYXMgcHVibGlzaGVkIGJ5XG4gICAgdGhlIEZyZWUgU29mdHdhcmUgRm91bmRhdGlvbiwgZWl0aGVyIHZlcnNpb24gMyBvZiB0aGUgTGljZW5zZSwgb3JcbiAgICAoYXQgeW91ciBvcHRpb24pIGFueSBsYXRlciB2ZXJzaW9uLlxuXG4gICAgQ2hpY2tlblBhaW50IGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsXG4gICAgYnV0IFdJVEhPVVQgQU5ZIFdBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2ZcbiAgICBNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuICBTZWUgdGhlXG4gICAgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy5cblxuICAgIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXG4gICAgYWxvbmcgd2l0aCBDaGlja2VuUGFpbnQuIElmIG5vdCwgc2VlIDxodHRwOi8vd3d3LmdudS5vcmcvbGljZW5zZXMvPi5cbiovXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIENQU2VuZERpYWxvZyhjb250cm9sbGVyLCBwYXJlbnQsIHJlc291cmNlU2F2ZXIpIHtcbiAgICB2YXJcbiAgICAgICAgZGlhbG9nID0gXG4gICAgICAgICAgICAkKGA8ZGl2IGNsYXNzPVwibW9kYWwgZmFkZVwiIHRhYmluZGV4PVwiLTFcIiByb2xlPVwiZGlhbG9nXCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm1vZGFsLWRpYWxvZ1wiPlxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibW9kYWwtY29udGVudFwiIGRhdGEtc3RhZ2U9XCJzYXZpbmdcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtb2RhbC1oZWFkZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImNsb3NlXCIgZGF0YS1kaXNtaXNzPVwibW9kYWxcIiBhcmlhLWxhYmVsPVwiQ2xvc2VcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gYXJpYS1oaWRkZW49XCJ0cnVlXCI+JnRpbWVzOzwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDQgY2xhc3M9XCJtb2RhbC10aXRsZVwiPlNhdmluZyBkcmF3aW5nLi4uPC9oND5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm1vZGFsLWJvZHlcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzcz1cImNoaWNrZW5wYWludC1zYXZpbmctcHJvZ3Jlc3MtbWVzc2FnZVwiPlByZXBhcmluZyB5b3VyIGRyYXdpbmcgdG8gYmUgc2F2ZWQsIHBsZWFzZSB3YWl0Li4uPC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwcmUgY2xhc3M9XCJjaGlja2VucGFpbnQtc2F2aW5nLWVycm9yLW1lc3NhZ2UgcHJlLXNjcm9sbGFibGVcIj48L3ByZT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwicHJvZ3Jlc3NcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInByb2dyZXNzLWJhclwiIHJvbGU9XCJwcm9ncmVzc2JhclwiIGFyaWEtdmFsdWVub3c9XCIwXCIgYXJpYS12YWx1ZW1pbj1cIjBcIiBhcmlhLXZhbHVlbWF4PVwiMTAwXCIgc3R5bGU9XCJ3aWR0aDogMCU7XCI+PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtb2RhbC1mb290ZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImJ0biBidG4tZGVmYXVsdCBjaGlja2VucGFpbnQtc2VuZC1jYW5jZWxcIiBkYXRhLWRpc21pc3M9XCJtb2RhbFwiPkNhbmNlbDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibW9kYWwtY29udGVudFwiIGRhdGEtc3RhZ2U9XCJzdWNjZXNzLW5vdC1wcmV2aW91c2x5LXBvc3RlZFwiIHN0eWxlPVwiZGlzcGxheTpub25lXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibW9kYWwtaGVhZGVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJjbG9zZVwiIGRhdGEtZGlzbWlzcz1cIm1vZGFsXCIgYXJpYS1sYWJlbD1cIkNsb3NlXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPiZ0aW1lczs8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGg0IGNsYXNzPVwibW9kYWwtdGl0bGVcIj5EcmF3aW5nIHNhdmVkITwvaDQ+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtb2RhbC1ib2R5XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHA+WW91ciBkcmF3aW5nIGhhcyBiZWVuIHNhdmVkLCB3b3VsZCB5b3UgbGlrZSB0byBwb3N0IGl0IHRvIHRoZSBmb3J1bSBub3c/PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibW9kYWwtZm9vdGVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJidG4gYnRuLXByaW1hcnkgY2hpY2tlbnBhaW50LXBvc3QtZHJhd2luZ1wiIGRhdGEtZGlzbWlzcz1cIm1vZGFsXCI+WWVzLCBwb3N0IGl0IG5vdzwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiYnRuIGJ0bi1kZWZhdWx0XCIgZGF0YS1kaXNtaXNzPVwibW9kYWxcIj5Obywga2VlcCBkcmF3aW5nPC9idXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJidG4gYnRuLWRlZmF1bHQgY2hpY2tlbnBhaW50LWV4aXRcIiBkYXRhLWRpc21pc3M9XCJtb2RhbFwiPk5vLCBxdWl0IGFuZCBJJ2xsIGZpbmlzaCBpdCBsYXRlcjwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibW9kYWwtY29udGVudFwiIGRhdGEtc3RhZ2U9XCJzdWNjZXNzLWFscmVhZHktcG9zdGVkXCIgc3R5bGU9XCJkaXNwbGF5Om5vbmVcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtb2RhbC1oZWFkZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImNsb3NlXCIgZGF0YS1kaXNtaXNzPVwibW9kYWxcIiBhcmlhLWxhYmVsPVwiQ2xvc2VcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gYXJpYS1oaWRkZW49XCJ0cnVlXCI+JnRpbWVzOzwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDQgY2xhc3M9XCJtb2RhbC10aXRsZVwiPkRyYXdpbmcgc2F2ZWQhPC9oND5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm1vZGFsLWJvZHlcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cD5Zb3VyIGRyYXdpbmcgaGFzIGJlZW4gc2F2ZWQsIHdvdWxkIHlvdSBsaWtlIHRvIHZpZXcgaXQgb24gdGhlIGZvcnVtIG5vdz88L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtb2RhbC1mb290ZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImJ0biBidG4tcHJpbWFyeSBjaGlja2VucGFpbnQtcG9zdC1kcmF3aW5nXCIgZGF0YS1kaXNtaXNzPVwibW9kYWxcIj5ZZXMsIHZpZXcgdGhlIHBvc3Q8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImJ0biBidG4tZGVmYXVsdFwiIGRhdGEtZGlzbWlzcz1cIm1vZGFsXCI+Tm8sIGtlZXAgZHJhd2luZzwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgIGApLFxuICAgICAgICBwcm9ncmVzc01lc3NhZ2VFbGVtID0gJChcIi5jaGlja2VucGFpbnQtc2F2aW5nLXByb2dyZXNzLW1lc3NhZ2VcIiwgZGlhbG9nKSxcbiAgICAgICAgcHJvZ3Jlc3NFcnJvciA9ICQoXCIuY2hpY2tlbnBhaW50LXNhdmluZy1lcnJvci1tZXNzYWdlXCIsIGRpYWxvZyksXG4gICAgICAgIHByb2dyZXNzRWxlbSA9ICQoXCIucHJvZ3Jlc3MtYmFyXCIsIGRpYWxvZyksXG5cbiAgICAgICAgdGhhdCA9IHRoaXM7XG4gICAgXG4gICAgcmVzb3VyY2VTYXZlci5vbihcInNhdmluZ1Byb2dyZXNzXCIsIGZ1bmN0aW9uKHByb2dyZXNzLCBtZXNzYWdlKSB7XG4gICAgICAgIHByb2dyZXNzICo9IDEwMDtcbiAgICAgICAgXG4gICAgICAgIHByb2dyZXNzTWVzc2FnZUVsZW0udGV4dChtZXNzYWdlKTtcbiAgICAgICAgXG4gICAgICAgICQocHJvZ3Jlc3NFbGVtKVxuICAgICAgICAgICAgLmF0dHIoXCJhcmlhLXZhbHVlbm93XCIsIHByb2dyZXNzKVxuICAgICAgICAgICAgLmNzcyhcIndpZHRoXCIsIHByb2dyZXNzICsgXCIlXCIpO1xuICAgIH0pO1xuIFxuICAgIHJlc291cmNlU2F2ZXIub24oXCJzYXZpbmdDb21wbGV0ZVwiLCBmdW5jdGlvbihwcm9ncmVzcykge1xuICAgICAgICAkKFwiLm1vZGFsLWNvbnRlbnRbZGF0YS1zdGFnZT0nc2F2aW5nJ11cIiwgZGlhbG9nKS5oaWRlKCk7XG4gICAgICAgIFxuICAgICAgICBpZiAoY29udHJvbGxlci5pc0FjdGlvblN1cHBvcnRlZChcIkNQRXhpdFwiKSkge1xuICAgICAgICAgICAgJChcIi5tb2RhbC1jb250ZW50W2RhdGEtc3RhZ2U9J3N1Y2Nlc3Mtbm90LXByZXZpb3VzbHktcG9zdGVkJ11cIiwgZGlhbG9nKS5zaG93KCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAkKFwiLm1vZGFsLWNvbnRlbnRbZGF0YS1zdGFnZT0nc3VjY2Vzcy1hbHJlYWR5LXBvc3RlZCddXCIsIGRpYWxvZykuc2hvdygpO1xuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICByZXNvdXJjZVNhdmVyLm9uKFwic2F2aW5nRmFpbHVyZVwiLCBmdW5jdGlvbihzZXJ2ZXJNZXNzYWdlKSB7XG4gICAgICAgIHByb2dyZXNzRWxlbS5hZGRDbGFzcyhcInByb2dyZXNzLWJhci1kYW5nZXJcIik7XG4gICAgICAgIFxuICAgICAgICB2YXJcbiAgICAgICAgICAgIGVycm9yTWVzc2FnZSA9IFwiU29ycnksIHlvdXIgZHJhd2luZyBjb3VsZCBub3QgYmUgc2F2ZWQsIHBsZWFzZSB0cnkgYWdhaW4gbGF0ZXIuXCI7XG4gICAgICAgIFxuICAgICAgICBpZiAoc2VydmVyTWVzc2FnZSkge1xuICAgICAgICAgICAgc2VydmVyTWVzc2FnZSA9IHNlcnZlck1lc3NhZ2UucmVwbGFjZSgvXkNISUJJRVJST1JcXHMqLywgXCJcIik7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChzZXJ2ZXJNZXNzYWdlLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBlcnJvck1lc3NhZ2UgKz0gXCI8YnI+PGJyPlRoZSBlcnJvciByZXR1cm5lZCBmcm9tIHRoZSBzZXJ2ZXIgd2FzOlwiO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHByb2dyZXNzRXJyb3JcbiAgICAgICAgICAgICAgICAgICAgLnRleHQoc2VydmVyTWVzc2FnZSlcbiAgICAgICAgICAgICAgICAgICAgLnNob3coKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgcHJvZ3Jlc3NNZXNzYWdlRWxlbS5odG1sKGVycm9yTWVzc2FnZSk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgfSk7XG4gICAgXG4gICAgJChcIi5jaGlja2VucGFpbnQtcG9zdC1kcmF3aW5nXCIsIGRpYWxvZykuY2xpY2soZnVuY3Rpb24oKSB7XG4gICAgICAgIGNvbnRyb2xsZXIuYWN0aW9uUGVyZm9ybWVkKHthY3Rpb246IFwiQ1BQb3N0XCJ9KTtcbiAgICB9KTtcblxuICAgICQoXCIuY2hpY2tlbnBhaW50LWV4aXRcIiwgZGlhbG9nKS5jbGljayhmdW5jdGlvbigpIHtcbiAgICAgICAgYWxlcnQoXCJXaGVuIHlvdSB3YW50IHRvIGNvbWUgYmFjayBhbmQgZmluaXNoIHlvdXIgZHJhd2luZywganVzdCBjbGljayB0aGUgJ25ldyBkcmF3aW5nJyBidXR0b24gYWdhaW4gYW5kIFwiIFxuICAgICAgICAgICAgKyBcInlvdSBjYW4gY2hvb3NlIHRvIGNvbnRpbnVlIHRoaXMgZHJhd2luZy5cIik7XG4gICAgICAgIGNvbnRyb2xsZXIuYWN0aW9uUGVyZm9ybWVkKHthY3Rpb246IFwiQ1BFeGl0XCJ9KTtcbiAgICB9KTtcbiAgICBcbiAgICAkKFwiLmNoaWNrZW5wYWludC1zZW5kLWNhbmNlbFwiLCBkaWFsb2cpLmNsaWNrKGZ1bmN0aW9uKCkge1xuICAgICAgICByZXNvdXJjZVNhdmVyLmNhbmNlbCgpO1xuICAgIH0pO1xuICAgIFxuICAgIC8vIERlc3Ryb3kgdGhlIG1vZGFsIHVwb24gY2xvc2VcbiAgICBkaWFsb2cub24oXCJoaWRkZW4uYnMubW9kYWxcIiwgZnVuY3Rpb24oZSkge1xuICAgICAgICBkaWFsb2cucmVtb3ZlKCk7XG4gICAgfSk7XG4gICAgXG4gICAgZGlhbG9nLm1vZGFsKHtcbiAgICAgICAgc2hvdzogZmFsc2VcbiAgICB9KTtcblxuICAgIGRpYWxvZy5vbignc2hvd24uYnMubW9kYWwnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgdGhhdC5lbWl0RXZlbnQoXCJzaG93blwiKTtcbiAgICB9KTtcbiAgICBcbiAgICAvLyBGaXggdGhlIGJhY2tkcm9wIGxvY2F0aW9uIGluIHRoZSBET00gYnkgcmVwYXJlbnRpbmcgaXQgdG8gdGhlIGNoaWNrZW5wYWludCBjb250YWluZXJcbiAgICBkaWFsb2cuZGF0YShcImJzLm1vZGFsXCIpLiRib2R5ID0gJChwYXJlbnQpO1xuICAgIFxuICAgIHBhcmVudC5hcHBlbmRDaGlsZChkaWFsb2dbMF0pO1xuXG4gICAgdGhpcy5zaG93ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGRpYWxvZy5tb2RhbChcInNob3dcIik7XG4gICAgfTtcbn1cblxuQ1BTZW5kRGlhbG9nLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoRXZlbnRFbWl0dGVyLnByb3RvdHlwZSk7XG5DUFNlbmREaWFsb2cucHJvdG90eXBlLmNvbnRydWN0b3IgPSBDUFNlbmREaWFsb2c7IiwiLypcbiAgICBDaGlja2VuUGFpbnRcbiAgICBcbiAgICBDaGlja2VuUGFpbnQgaXMgYSB0cmFuc2xhdGlvbiBvZiBDaGliaVBhaW50IGZyb20gSmF2YSB0byBKYXZhU2NyaXB0XG4gICAgYnkgTmljaG9sYXMgU2hlcmxvY2sgLyBDaGlja2VuIFNtb290aGllLlxuICAgIFxuICAgIENoaWJpUGFpbnQgaXMgQ29weXJpZ2h0IChjKSAyMDA2LTIwMDggTWFyYyBTY2hlZmVyXG5cbiAgICBDaGlja2VuUGFpbnQgaXMgZnJlZSBzb2Z0d2FyZTogeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yIG1vZGlmeVxuICAgIGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgYXMgcHVibGlzaGVkIGJ5XG4gICAgdGhlIEZyZWUgU29mdHdhcmUgRm91bmRhdGlvbiwgZWl0aGVyIHZlcnNpb24gMyBvZiB0aGUgTGljZW5zZSwgb3JcbiAgICAoYXQgeW91ciBvcHRpb24pIGFueSBsYXRlciB2ZXJzaW9uLlxuXG4gICAgQ2hpY2tlblBhaW50IGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsXG4gICAgYnV0IFdJVEhPVVQgQU5ZIFdBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2ZcbiAgICBNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuICBTZWUgdGhlXG4gICAgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy5cblxuICAgIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXG4gICAgYWxvbmcgd2l0aCBDaGlja2VuUGFpbnQuIElmIG5vdCwgc2VlIDxodHRwOi8vd3d3LmdudS5vcmcvbGljZW5zZXMvPi5cbiovXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIENQU2hvcnRjdXRzRGlhbG9nKHBhcmVudCkge1xuICAgIHZhclxuICAgICAgICBkaWFsb2cgPSBcbiAgICAgICAgICAgICQoYDxkaXYgY2xhc3M9XCJtb2RhbCBmYWRlIGNoaWNrZW5wYWludC1zaG9ydGN1dHMtZGlhbG9nXCIgdGFiaW5kZXg9XCItMVwiIHJvbGU9XCJkaWFsb2dcIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibW9kYWwtZGlhbG9nIG1vZGFsLWxnXCI+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtb2RhbC1jb250ZW50XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibW9kYWwtaGVhZGVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJjbG9zZVwiIGRhdGEtZGlzbWlzcz1cIm1vZGFsXCIgYXJpYS1sYWJlbD1cIkNsb3NlXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPiZ0aW1lczs8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGg0IGNsYXNzPVwibW9kYWwtdGl0bGVcIj5TaG9ydGN1dHM8L2g0PlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibW9kYWwtYm9keVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNYW55IG9mIHRoZSBtZW51IG9wdGlvbnMgYW5kIHBhaW50aW5nIHRvb2xzIGhhdmUga2V5Ym9hcmQgc2hvcnRjdXRzIHdoaWNoIGFyZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3cml0dGVuIG5leHQgdG8gdGhlbSBvciBhcHBlYXIgd2hlbiB5b3UgaG92ZXIuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBIZXJlIGFyZSBzb21lIG90aGVyIHNob3J0Y3V0cyB3aGljaCBhcmUgbm90IGFzIG9idmlvdXMhXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjaGlja2VucGFpbnQtc2hvcnRjdXRzLXNlY3Rpb25zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjaGlja2VucGFpbnQtc2hvcnRjdXRzLXNlY3Rpb25cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoNT5Db2xvciBzd2F0Y2hlcyBwYWxldHRlPC9oNT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx1bCBjbGFzcz1cImNoaWNrZW5wYWludC1zaG9ydGN1dHMtbGlzdCBsaXN0LXVuc3R5bGVkXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZHQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJjaGlja2VucGFpbnQtc2hvcnRjdXRcIj48c3BhbiBjbGFzcz1cImZhIGZhLW1vdXNlLXBvaW50ZXJcIj48L3NwYW4+IExlZnQ8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2R0PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFVzZSBhcyB0aGUgZHJhd2luZyBjb2xvclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkdD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImNoaWNrZW5wYWludC1zaG9ydGN1dFwiPjxzcGFuIGNsYXNzPVwiZmEgZmEtbW91c2UtcG9pbnRlclwiPjwvc3Bhbj4gUmlnaHQ8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2R0PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlbW92ZSBvciByZXBsYWNlIGEgY29sb3Igc3dhdGNoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2RkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kbD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xpPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC91bD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjaGlja2VucGFpbnQtc2hvcnRjdXRzLXNlY3Rpb25cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoNT5MaW5lIGRyYXdpbmcgbW9kZTwvaDU+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dWwgY2xhc3M9XCJjaGlja2VucGFpbnQtc2hvcnRjdXRzLWxpc3QgbGlzdC11bnN0eWxlZFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRsPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGR0PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiY2hpY2tlbnBhaW50LXNob3J0Y3V0XCI+PHNwYW4gY2xhc3M9XCJjaGlja2VucGFpbnQtc2hvcnRjdXQta2V5XCI+U2hpZnQ8L3NwYW4+ICsgPHNwYW4gY2xhc3M9XCJmYSBmYS1tb3VzZS1wb2ludGVyXCI+PC9zcGFuPiBMZWZ0PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kdD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTbmFwIGxpbmUgdG8gbmVhcmVzdCA0NSBkZWdyZWVzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2RkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kbD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xpPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC91bD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjaGlja2VucGFpbnQtc2hvcnRjdXRzLXNlY3Rpb25cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoNT5QYWludGluZyB0b29sczwvaDU+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dWwgY2xhc3M9XCJjaGlja2VucGFpbnQtc2hvcnRjdXRzLWxpc3QgbGlzdC11bnN0eWxlZFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRsPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGR0PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiY2hpY2tlbnBhaW50LXNob3J0Y3V0XCI+PHNwYW4gY2xhc3M9XCJjaGlja2VucGFpbnQtc2hvcnRjdXQta2V5XCI+MTwvc3Bhbj4gLSA8c3BhbiBjbGFzcz1cImNoaWNrZW5wYWludC1zaG9ydGN1dC1rZXlcIj45PC9zcGFuPiAsIDxzcGFuIGNsYXNzPVwiY2hpY2tlbnBhaW50LXNob3J0Y3V0LWtleVwiPjA8L3NwYW4+PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kdD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDaGFuZ2UgYnJ1c2ggb3BhY2l0eVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkdD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImNoaWNrZW5wYWludC1zaG9ydGN1dFwiPjxzcGFuIGNsYXNzPVwiY2hpY2tlbnBhaW50LXNob3J0Y3V0LWtleVwiPls8L3NwYW4+ICwgPHNwYW4gY2xhc3M9XCJjaGlja2VucGFpbnQtc2hvcnRjdXQta2V5XCI+XTwvc3Bhbj48L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2R0PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENoYW5nZSBicnVzaCBzaXplXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2RkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2RsPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGk+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3VsPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNoaWNrZW5wYWludC1zaG9ydGN1dHMtc2VjdGlvblwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGg1PkJydXNoIHBhbGV0dGU8L2g1PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHVsIGNsYXNzPVwiY2hpY2tlbnBhaW50LXNob3J0Y3V0cy1saXN0IGxpc3QtdW5zdHlsZWRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGk+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkbD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkdD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImNoaWNrZW5wYWludC1zaG9ydGN1dFwiPjxzcGFuIGNsYXNzPVwiZmEgZmEtbW91c2UtcG9pbnRlclwiPjwvc3Bhbj4gUmlnaHQgZHJhZzwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZHQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQWRqdXN0IGJydXNoIHNsaWRlcnMgbW9yZSBwcmVjaXNlbHlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9saT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdWw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY2hpY2tlbnBhaW50LXNob3J0Y3V0cy1zZWN0aW9uXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDU+RHJhd2luZyBjYW52YXM8L2g1PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHVsIGNsYXNzPVwiY2hpY2tlbnBhaW50LXNob3J0Y3V0cy1saXN0IGxpc3QtdW5zdHlsZWRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGk+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkbD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkdD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImNoaWNrZW5wYWludC1zaG9ydGN1dFwiPjxzcGFuIGNsYXNzPVwiZmEgZmEtbW91c2UtcG9pbnRlclwiPjwvc3Bhbj4gTWlkZGxlPC9zcGFuPiA8c3BhbiBjbGFzcz1cImNoaWNrZW5wYWludC1zaG9ydGN1dC1hbHRlcm5hdGVcIj5vcjwvc3Bhbj4gPHNwYW4gY2xhc3M9XCJjaGlja2VucGFpbnQtc2hvcnRjdXRcIj48c3BhbiBjbGFzcz1cImNoaWNrZW5wYWludC1zaG9ydGN1dC1rZXlcIj5TcGFjZTwvc3Bhbj4gKyA8c3BhbiBjbGFzcz1cImZhIGZhLW1vdXNlLXBvaW50ZXJcIj48L3NwYW4+IExlZnQ8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2R0PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1vdmUgdGhlIGNhbnZhcyBhcm91bmRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZHQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJjaGlja2VucGFpbnQtc2hvcnRjdXRcIj48c3BhbiBjbGFzcz1cImNoaWNrZW5wYWludC1zaG9ydGN1dC1rZXlcIj5BbHQ8L3NwYW4+ICsgPHNwYW4gY2xhc3M9XCJmYSBmYS1tb3VzZS1wb2ludGVyXCI+PC9zcGFuPiBNaWRkbGU8L3NwYW4+IDxzcGFuIGNsYXNzPVwiY2hpY2tlbnBhaW50LXNob3J0Y3V0LWFsdGVybmF0ZVwiPm9yPC9zcGFuPiA8c3BhbiBjbGFzcz1cImNoaWNrZW5wYWludC1zaG9ydGN1dFwiPjxzcGFuIGNsYXNzPVwiY2hpY2tlbnBhaW50LXNob3J0Y3V0LWtleVwiPkFsdDwvc3Bhbj4gKyA8c3BhbiBjbGFzcz1cImNoaWNrZW5wYWludC1zaG9ydGN1dC1rZXlcIj5TcGFjZTwvc3Bhbj4gKyA8c3BhbiBjbGFzcz1cImZhIGZhLW1vdXNlLXBvaW50ZXJcIj48L3NwYW4+IExlZnQ8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2R0PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJvdGF0ZSB0aGUgY2FudmFzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2RkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGR0PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiY2hpY2tlbnBhaW50LXNob3J0Y3V0XCI+PHNwYW4gY2xhc3M9XCJmYSBmYS1tb3VzZS1wb2ludGVyXCI+PC9zcGFuPiBSaWdodDwvc3Bhbj4gPHNwYW4gY2xhc3M9XCJjaGlja2VucGFpbnQtc2hvcnRjdXQtYWx0ZXJuYXRlXCI+b3I8L3NwYW4+IDxzcGFuIGNsYXNzPVwiY2hpY2tlbnBhaW50LXNob3J0Y3V0XCI+PHNwYW4gY2xhc3M9XCJjaGlja2VucGFpbnQtc2hvcnRjdXQta2V5XCI+QWx0PC9zcGFuPiArIDxzcGFuIGNsYXNzPVwiZmEgZmEtbW91c2UtcG9pbnRlclwiPjwvc3Bhbj4gTGVmdDwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZHQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU2FtcGxlIHRoZSBjb2xvciB1bmRlciB0aGUgY3Vyc29yXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2RkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kbD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xpPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC91bD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjaGlja2VucGFpbnQtc2hvcnRjdXRzLXNlY3Rpb25cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoNT5MYXllcnMgcGFsZXR0ZTwvaDU+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dWwgY2xhc3M9XCJjaGlja2VucGFpbnQtc2hvcnRjdXRzLWxpc3QgbGlzdC11bnN0eWxlZFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRsPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGR0PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiY2hpY2tlbnBhaW50LXNob3J0Y3V0XCI+PHNwYW4gY2xhc3M9XCJmYSBmYS1tb3VzZS1wb2ludGVyXCI+PC9zcGFuPiBEb3VibGUgY2xpY2s8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2R0PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlbmFtZSBsYXllclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9saT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdWw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgYCk7XG4gICAgXG4gICAgLy8gRGVzdHJveSB0aGUgbW9kYWwgdXBvbiBjbG9zZVxuICAgIGRpYWxvZy5vbihcImhpZGRlbi5icy5tb2RhbFwiLCBmdW5jdGlvbihlKSB7XG4gICAgICAgIGRpYWxvZy5yZW1vdmUoKTtcbiAgICB9KTtcbiAgICBcbiAgICBkaWFsb2cubW9kYWwoe1xuICAgICAgICBzaG93OiBmYWxzZVxuICAgIH0pO1xuICAgIFxuICAgIC8vIEZpeCB0aGUgYmFja2Ryb3AgbG9jYXRpb24gaW4gdGhlIERPTSBieSByZXBhcmVudGluZyBpdCB0byB0aGUgY2hpY2tlbnBhaW50IGNvbnRhaW5lclxuICAgIGRpYWxvZy5kYXRhKFwiYnMubW9kYWxcIikuJGJvZHkgPSAkKHBhcmVudCk7XG4gICAgXG4gICAgcGFyZW50LmFwcGVuZENoaWxkKGRpYWxvZ1swXSk7XG5cbiAgICB0aGlzLnNob3cgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgZGlhbG9nLm1vZGFsKFwic2hvd1wiKTtcbiAgICB9O1xufSIsIi8qXG4gICAgQ2hpY2tlblBhaW50XG4gICAgXG4gICAgQ2hpY2tlblBhaW50IGlzIGEgdHJhbnNsYXRpb24gb2YgQ2hpYmlQYWludCBmcm9tIEphdmEgdG8gSmF2YVNjcmlwdFxuICAgIGJ5IE5pY2hvbGFzIFNoZXJsb2NrIC8gQ2hpY2tlbiBTbW9vdGhpZS5cbiAgICBcbiAgICBDaGliaVBhaW50IGlzIENvcHlyaWdodCAoYykgMjAwNi0yMDA4IE1hcmMgU2NoZWZlclxuXG4gICAgQ2hpY2tlblBhaW50IGlzIGZyZWUgc29mdHdhcmU6IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vciBtb2RpZnlcbiAgICBpdCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGFzIHB1Ymxpc2hlZCBieVxuICAgIHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb24sIGVpdGhlciB2ZXJzaW9uIDMgb2YgdGhlIExpY2Vuc2UsIG9yXG4gICAgKGF0IHlvdXIgb3B0aW9uKSBhbnkgbGF0ZXIgdmVyc2lvbi5cblxuICAgIENoaWNrZW5QYWludCBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLFxuICAgIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mXG4gICAgTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiAgU2VlIHRoZVxuICAgIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuXG5cbiAgICBZb3Ugc2hvdWxkIGhhdmUgcmVjZWl2ZWQgYSBjb3B5IG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZVxuICAgIGFsb25nIHdpdGggQ2hpY2tlblBhaW50LiBJZiBub3QsIHNlZSA8aHR0cDovL3d3dy5nbnUub3JnL2xpY2Vuc2VzLz4uXG4qL1xuXG4vKipcbiAqIEEgc2ltcGxlIHNsaWRlciBjb250cm9sLlxuICovXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBDUFNsaWRlcihtaW5WYWx1ZSwgbWF4VmFsdWUsIGNlbnRlck1vZGUsIGV4cE1vZGUpIHtcbiAgICBjb25zdFxuICAgICAgICBQUkVDSVNFX0RSQUdfU0NBTEUgPSA0LFxuICAgICAgICBFWFBfTU9ERV9GQUNUT1IgPSAxLjU7XG5cbiAgICB2YXIgXG4gICAgICAgIGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIiksXG4gICAgICAgIGNhbnZhc0NvbnRleHQgPSBjYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpLFxuICAgICAgICBcbiAgICAgICAgdmFsdWVSYW5nZSA9IG1heFZhbHVlIC0gbWluVmFsdWUsXG4gICAgICAgIFxuICAgICAgICBkcmFnTm9ybWFsID0gZmFsc2UsIGRyYWdQcmVjaXNlID0gZmFsc2UsXG4gICAgICAgIGRyYWdQcmVjaXNlWCxcbiAgICAgICAgXG4gICAgICAgIGRvbmVJbml0aWFsUGFpbnQgPSBmYWxzZSxcbiAgICAgICAgXG4gICAgICAgIHRoYXQgPSB0aGlzO1xuICAgIFxuICAgIHRoaXMudmFsdWUgPSB1bmRlZmluZWQ7XG5cbiAgICAvKipcbiAgICAgKiBFaXRoZXIgYSBzdHJpbmcgdG8gZHJhdyBvbiB0aGUgc2xpZGVyLCBvciBhIGZ1bmN0aW9uKHZhbHVlKSB3aGljaCByZWNlaXZlcyB0aGUgY3VycmVudCB2YWx1ZSBvZiB0aGUgc2xpZGVyIGFuZFxuICAgICAqIHNob3VsZCByZXR1cm4gdGhlIHN0cmluZyB0byBiZSBwYWludGVkIHRvIHRoZSBzbGlkZXIuXG4gICAgICpcbiAgICAgKiBAbmFtZSBDUFNsaWRlciN0aXRsZVxuICAgICAqIEBkZWZhdWx0IFwiXCJcbiAgICAgKi9cbiAgICB0aGlzLnRpdGxlID0gXCJcIjtcbiAgICBcbiAgICBjZW50ZXJNb2RlID0gY2VudGVyTW9kZSB8fCBmYWxzZTtcblxuICAgIGZ1bmN0aW9uIHBhaW50KCkge1xuICAgICAgICB2YXJcbiAgICAgICAgICAgIHdpZHRoID0gY2FudmFzLndpZHRoLFxuICAgICAgICAgICAgaGVpZ2h0ID0gY2FudmFzLmhlaWdodCxcbiAgICAgICAgICAgIHRpdGxlID0gdHlwZW9mIHRoYXQudGl0bGUgPT09IFwic3RyaW5nXCIgPyB0aGF0LnRpdGxlIDogdGhhdC50aXRsZSh0aGF0LnZhbHVlKSxcbiAgICAgICAgICAgIHRleHRYID0gMiAqIHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvLFxuICAgICAgICAgICAgdGV4dFkgPSBjYW52YXMuaGVpZ2h0ICogMC43NTtcblxuICAgICAgICBpZiAoY2VudGVyTW9kZSkge1xuICAgICAgICAgICAgY2FudmFzQ29udGV4dC5zYXZlKCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNhbnZhc0NvbnRleHQuZmlsbFN0eWxlID0gJ3doaXRlJztcblxuICAgICAgICAgICAgY2FudmFzQ29udGV4dC5maWxsUmVjdCgwLCAwLCB3aWR0aCwgaGVpZ2h0KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY2FudmFzQ29udGV4dC5maWxsU3R5bGUgPSAnYmxhY2snO1xuXG4gICAgICAgICAgICBjYW52YXNDb250ZXh0LmZpbGxUZXh0KHRpdGxlLCB0ZXh0WCwgdGV4dFkpO1xuICAgICAgICAgICAgY2FudmFzQ29udGV4dC5iZWdpblBhdGgoKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKHRoYXQudmFsdWUgPj0gdmFsdWVSYW5nZSAvIDIpIHtcbiAgICAgICAgICAgICAgICBjYW52YXNDb250ZXh0LnJlY3Qod2lkdGggLyAyLCAwLCAodGhhdC52YWx1ZSAtIHZhbHVlUmFuZ2UgLyAyKSAqIHdpZHRoIC8gdmFsdWVSYW5nZSwgaGVpZ2h0KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY2FudmFzQ29udGV4dC5yZWN0KHRoYXQudmFsdWUgKiB3aWR0aCAvIHZhbHVlUmFuZ2UsIDAsICh2YWx1ZVJhbmdlIC8gMiAtIHRoYXQudmFsdWUpICogd2lkdGggLyB2YWx1ZVJhbmdlLCBoZWlnaHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBjYW52YXNDb250ZXh0LmZpbGwoKTtcbiAgICAgICAgICAgIGNhbnZhc0NvbnRleHQuY2xpcCgpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjYW52YXNDb250ZXh0LmZpbGxTdHlsZSA9ICd3aGl0ZSc7XG4gICAgICAgICAgICBjYW52YXNDb250ZXh0LmZpbGxUZXh0KHRpdGxlLCB0ZXh0WCwgdGV4dFkpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjYW52YXNDb250ZXh0LnJlc3RvcmUoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgIGJhclByb3AgPSAodGhhdC52YWx1ZSAtIG1pblZhbHVlKSAvIHZhbHVlUmFuZ2UsXG4gICAgICAgICAgICAgICAgYmFyV2lkdGg7XG5cbiAgICAgICAgICAgIGlmIChleHBNb2RlKSB7XG4gICAgICAgICAgICAgICAgYmFyUHJvcCA9IE1hdGgucG93KGJhclByb3AsIDEgLyBFWFBfTU9ERV9GQUNUT1IpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBiYXJXaWR0aCA9IGJhclByb3AgKiB3aWR0aDtcblxuICAgICAgICAgICAgY2FudmFzQ29udGV4dC5zYXZlKCk7XG4gICAgICAgICAgICBjYW52YXNDb250ZXh0LnNhdmUoKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY2FudmFzQ29udGV4dC5maWxsU3R5bGUgPSAnYmxhY2snO1xuXG4gICAgICAgICAgICBjYW52YXNDb250ZXh0LmJlZ2luUGF0aCgpO1xuICAgICAgICAgICAgY2FudmFzQ29udGV4dC5yZWN0KDAsIDAsIGJhcldpZHRoLCBoZWlnaHQpO1xuICAgICAgICAgICAgY2FudmFzQ29udGV4dC5maWxsKCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNhbnZhc0NvbnRleHQuY2xpcCgpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjYW52YXNDb250ZXh0LmZpbGxTdHlsZSA9ICd3aGl0ZSc7XG4gICAgICAgICAgICBjYW52YXNDb250ZXh0LmZpbGxUZXh0KHRpdGxlLCB0ZXh0WCwgdGV4dFkpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBSZW1vdmUgdGhlIGNsaXAgcmVnaW9uXG4gICAgICAgICAgICBjYW52YXNDb250ZXh0LnJlc3RvcmUoKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY2FudmFzQ29udGV4dC5maWxsU3R5bGUgPSAnd2hpdGUnO1xuXG4gICAgICAgICAgICBjYW52YXNDb250ZXh0LmJlZ2luUGF0aCgpO1xuICAgICAgICAgICAgY2FudmFzQ29udGV4dC5yZWN0KGJhcldpZHRoLCAwLCB3aWR0aCwgaGVpZ2h0KTtcbiAgICAgICAgICAgIGNhbnZhc0NvbnRleHQuZmlsbCgpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjYW52YXNDb250ZXh0LmNsaXAoKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY2FudmFzQ29udGV4dC5maWxsU3R5bGUgPSAnYmxhY2snO1xuICAgICAgICAgICAgY2FudmFzQ29udGV4dC5maWxsVGV4dCh0aXRsZSwgdGV4dFgsIHRleHRZKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY2FudmFzQ29udGV4dC5yZXN0b3JlKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBtb3VzZVNlbGVjdChlKSB7XG4gICAgICAgIHZhciBcbiAgICAgICAgICAgIHdpZHRoID0gJChjYW52YXMpLndpZHRoKCksXG4gICAgICAgICAgICBsZWZ0ID0gJChjYW52YXMpLm9mZnNldCgpLmxlZnQsXG5cbiAgICAgICAgICAgIHByb3BvcnRpb24gPSAoZS5wYWdlWCAtIGxlZnQpIC8gd2lkdGg7XG5cbiAgICAgICAgaWYgKGV4cE1vZGUpIHtcbiAgICAgICAgICAgIC8vIEdpdmUgdGhlIHVzZXIgZmluZXIgY29udHJvbCBvdmVyIHRoZSBsb3cgdmFsdWVzXG4gICAgICAgICAgICBwcm9wb3J0aW9uID0gTWF0aC5wb3coTWF0aC5tYXgocHJvcG9ydGlvbiwgMC4wKSwgRVhQX01PREVfRkFDVE9SKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoYXQuc2V0VmFsdWUocHJvcG9ydGlvbiAqIHZhbHVlUmFuZ2UgKyBtaW5WYWx1ZSk7XG4gICAgfVxuICAgICAgICBcbiAgICBmdW5jdGlvbiBtb3VzZURyYWdnZWQoZSkge1xuICAgICAgICBpZiAoZHJhZ05vcm1hbCkge1xuICAgICAgICAgICAgbW91c2VTZWxlY3QoZSk7XG4gICAgICAgIH0gZWxzZSBpZiAoZHJhZ1ByZWNpc2UpIHtcbiAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgIGRpZmYgPSAoZS5wYWdlWCAtIGRyYWdQcmVjaXNlWCkgLyBQUkVDSVNFX0RSQUdfU0NBTEU7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChkaWZmICE9IDApIHtcbiAgICAgICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICAgICAgdW5yb3VuZGVkID0gdGhhdC52YWx1ZSArIGRpZmYsXG4gICAgICAgICAgICAgICAgICAgIHJvdW5kZWQgPSB1bnJvdW5kZWQgfCAwO1xuXG4gICAgICAgICAgICAgICAgdGhhdC5zZXRWYWx1ZShyb3VuZGVkKTtcblxuICAgICAgICAgICAgICAgIC8qIFR3ZWFrIHRoZSBcIm9sZCBtb3VzZVhcIiBwb3NpdGlvbiBzdWNoIHRoYXQgdGhlIGZyYWN0aW9uYWwgcGFydCBvZiB0aGUgdmFsdWUgd2Ugd2VyZSB1bmFibGUgdG8gc2V0XG4gICAgICAgICAgICAgICAgICogd2lsbCBiZSBhY2N1bXVsYXRlZFxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIGRyYWdQcmVjaXNlWCA9IGUucGFnZVggLSAodW5yb3VuZGVkIC0gcm91bmRlZCkgKiBQUkVDSVNFX0RSQUdfU0NBTEU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBtb3VzZVVwKGUpIHtcbiAgICAgICAgaWYgKGRyYWdOb3JtYWwgJiYgZS5idXR0b24gPT0gMCkge1xuICAgICAgICAgICAgZHJhZ05vcm1hbCA9IGZhbHNlO1xuICAgICAgICB9IGVsc2UgaWYgKGRyYWdQcmVjaXNlICYmIGUuYnV0dG9uID09IDIpIHtcbiAgICAgICAgICAgIGRyYWdQcmVjaXNlID0gZmFsc2U7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBjYW52YXMucmVsZWFzZVBvaW50ZXJDYXB0dXJlKGUucG9pbnRlcklkKTtcbiAgICAgICAgY2FudmFzLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJwb2ludGVydXBcIiwgbW91c2VVcCk7XG4gICAgICAgIGNhbnZhcy5yZW1vdmVFdmVudExpc3RlbmVyKFwicG9pbnRlcm1vdmVcIiwgbW91c2VEcmFnZ2VkKTtcbiAgICB9XG4gICAgXG4gICAgdGhpcy5zZXRWYWx1ZSA9IGZ1bmN0aW9uKF92YWx1ZSkge1xuICAgICAgICBfdmFsdWUgPSB+fk1hdGgubWF4KG1pblZhbHVlLCBNYXRoLm1pbihtYXhWYWx1ZSwgX3ZhbHVlKSk7XG4gICAgICAgIFxuICAgICAgICBpZiAodGhpcy52YWx1ZSAhPSBfdmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXMudmFsdWUgPSBfdmFsdWU7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFRoZSBldmVudCBsaXN0ZW5lcnMgbWlnaHQgbGlrZSB0byB1cGRhdGUgb3VyIHRpdGxlIHByb3BlcnR5IGF0IHRoaXMgcG9pbnQgdG8gcmVmbGVjdCB0aGUgbmV3IHZhbHVlXG4gICAgICAgICAgICB0aGlzLmVtaXRFdmVudCgndmFsdWVDaGFuZ2UnLCBbdGhpcy52YWx1ZV0pO1xuICAgICAgICBcbiAgICAgICAgICAgIGlmIChkb25lSW5pdGlhbFBhaW50KSB7XG4gICAgICAgICAgICAgICAgcGFpbnQoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gV2UgZG9uJ3QgYm90aGVyIHRvIGRvIG91ciBjYW52YXMgZGltZW5zaW9uaW5nIHVudGlsIHdlJ3JlIHN1cHBsaWVkIHdpdGggYW4gaW5pdGlhbCB2YWx1ZVxuICAgICAgICAgICAgICAgIGRvbmVJbml0aWFsUGFpbnQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHRoaXMucmVzaXplKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgRE9NIGVsZW1lbnQgZm9yIHRoZSBzbGlkZXIgY29tcG9uZW50LlxuICAgICAqL1xuICAgIHRoaXMuZ2V0RWxlbWVudCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gY2FudmFzO1xuICAgIH07XG4gICAgXG4gICAgdGhpcy5yZXNpemUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgY2FudmFzLndpZHRoID0gJChjYW52YXMpLndpZHRoKCkgfHwgMTUwO1xuICAgICAgICBjYW52YXMuaGVpZ2h0ID0gJChjYW52YXMpLmhlaWdodCgpIHx8IDIwO1xuICAgICAgICBcbiAgICAgICAgaWYgKHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvID4gMSkge1xuICAgICAgICAgICAgLy8gQXNzdW1lIG91ciB3aWR0aCBpcyBzZXQgdG8gMTAwJSBvciBzaW1pbGFyLCBzbyB3ZSBvbmx5IG5lZWQgdG8gdGhlIGZpeCB0aGUgaGVpZ2h0XG4gICAgICAgICAgICBjYW52YXMuc3R5bGUuaGVpZ2h0ID0gY2FudmFzLmhlaWdodCArICdweCc7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNhbnZhcy53aWR0aCA9IGNhbnZhcy53aWR0aCAqIHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvO1xuICAgICAgICAgICAgY2FudmFzLmhlaWdodCA9IGNhbnZhcy5oZWlnaHQgKiB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbztcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgY2FudmFzQ29udGV4dC5mb250ID0gKGNhbnZhcy5oZWlnaHQgKiAwLjQ3KSArICdwdCBzYW5zLXNlcmlmJztcbiAgICAgICAgXG4gICAgICAgIHBhaW50KCk7XG4gICAgfTtcbiAgICBcbiAgICBjYW52YXMuYWRkRXZlbnRMaXN0ZW5lcihcInBvaW50ZXJkb3duXCIsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgdmFyXG4gICAgICAgICAgICBkcmFnZ2luZyA9IGRyYWdOb3JtYWwgfHwgZHJhZ1ByZWNpc2U7XG4gICAgICAgIFxuICAgICAgICBpZiAoIWRyYWdnaW5nKSB7XG4gICAgICAgICAgICBjYW52YXMuc2V0UG9pbnRlckNhcHR1cmUoZS5wb2ludGVySWQpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBzd2l0Y2ggKGUuYnV0dG9uKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAwOiAvLyBMZWZ0XG4gICAgICAgICAgICAgICAgICAgIGRyYWdOb3JtYWwgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBtb3VzZVNlbGVjdChlKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDI6IC8vIFJpZ2h0XG4gICAgICAgICAgICAgICAgICAgIGRyYWdQcmVjaXNlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgZHJhZ1ByZWNpc2VYID0gZS5wYWdlWDtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNhbnZhcy5hZGRFdmVudExpc3RlbmVyKFwicG9pbnRlcnVwXCIsIG1vdXNlVXApO1xuICAgICAgICAgICAgY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoXCJwb2ludGVybW92ZVwiLCBtb3VzZURyYWdnZWQpO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgXG4gICAgY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoXCJjb250ZXh0bWVudVwiLCBmdW5jdGlvbihlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKVxuICAgIH0pO1xuXG4gICAgY2FudmFzLnNldEF0dHJpYnV0ZShcInRvdWNoLWFjdGlvblwiLCBcIm5vbmVcIik7XG5cbiAgICBjYW52YXMuY2xhc3NOYW1lID0gJ2NoaWNrZW5wYWludC1zbGlkZXInO1xuICAgIFxuICAgIGlmICghd2luZG93LmRldmljZVBpeGVsUmF0aW8pIHtcbiAgICAgICAgLy8gT2xkIGJyb3dzZXJzXG4gICAgICAgIHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvID0gMS4wO1xuICAgIH1cbn1cblxuQ1BTbGlkZXIucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShFdmVudEVtaXR0ZXIucHJvdG90eXBlKTtcbkNQU2xpZGVyLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IENQU2xpZGVyO1xuIiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gQ1BTcGxhc2hTY3JlZW4odWlQYXJlbnQsIGxvYWRlciwgcmVzb3VyY2VzUm9vdCkge1xuICAgIGNvbnN0XG4gICAgICAgIE1BWF9TTU9PVEhJRV9PRkZTRVQgPSAxNzA7XG5cbiAgICB2YXJcbiAgICAgICAgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKSxcbiAgICAgICAgY2FudmFzQ29udGV4dCA9IGNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIiksXG5cbiAgICAgICAgY3VwID0gbmV3IEltYWdlKCksXG4gICAgICAgIGxpZCA9IG5ldyBJbWFnZSgpLFxuICAgICAgICBvdXRsaW5lcyA9IG5ldyBJbWFnZSgpLFxuICAgICAgICB0ZXh0ID0gbmV3IEltYWdlKCksXG5cbiAgICAgICAgc2hhZGluZyA9IG5ldyBJbWFnZSgpLFxuICAgICAgICBoaWdobGlnaHRzID0gbmV3IEltYWdlKCksXG4gICAgICAgIHNtb290aGllID0gbmV3IEltYWdlKCksXG5cbiAgICAgICAgaW1hZ2VzID0gW2N1cCwgbGlkLCBvdXRsaW5lcywgdGV4dCwgc2hhZGluZywgaGlnaGxpZ2h0cywgc21vb3RoaWVdLFxuICAgICAgICBsb2FkZWRDb3VudCA9IDAsXG5cbiAgICAgICAgY3VwQ29tcG9zaXRlLCBzbW9vdGhpZUNvbXBvc2l0ZSxcbiAgICAgICAgY3VwQ29tcG9zaXRlQ29udGV4dCwgc21vb3RoaWVDb21wb3NpdGVDb250ZXh0LFxuXG4gICAgICAgIHByb2dyZXNzID0gMC4wLFxuICAgICAgICBtZXNzYWdlID0gXCJcIixcblxuICAgICAgICBmb250SGVpZ2h0ID0gMTQ7XG5cbiAgICB2YXIgaW1hZ2VSb290ID0gcmVzb3VyY2VzUm9vdCArIFwic3BsYXNoL1wiO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpbWFnZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaW1hZ2VzW2ldLm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgbG9hZGVkQ291bnQrKztcblxuICAgICAgICAgICAgaWYgKGxvYWRlZENvdW50ID09IGltYWdlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICByZXBhaW50KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBjdXAuc3JjID0gaW1hZ2VSb290ICsgXCJjdXAucG5nXCI7XG4gICAgaGlnaGxpZ2h0cy5zcmMgPSBpbWFnZVJvb3QgKyBcImhpZ2hsaWdodHMucG5nXCI7XG4gICAgbGlkLnNyYyA9IGltYWdlUm9vdCArIFwibGlkLnBuZ1wiO1xuICAgIG91dGxpbmVzLnNyYyA9IGltYWdlUm9vdCArIFwibGluZXMucG5nXCI7XG4gICAgc2hhZGluZy5zcmMgPSBpbWFnZVJvb3QgKyBcInNoYWRpbmcucG5nXCI7XG4gICAgc21vb3RoaWUuc3JjID0gaW1hZ2VSb290ICsgXCJzbW9vdGhpZS5wbmdcIjtcbiAgICB0ZXh0LnNyYyA9IGltYWdlUm9vdCArIFwidGV4dC5wbmdcIjtcblxuICAgIGZ1bmN0aW9uIGJ1aWxkU21vb3RoaWVDb21wb3NpdGUoaW1nV2lkdGgsIGltZ0hlaWdodCwgcHJvZ3Jlc3MpIHtcbiAgICAgICAgaWYgKCFzbW9vdGhpZUNvbXBvc2l0ZSkge1xuICAgICAgICAgICAgc21vb3RoaWVDb21wb3NpdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpO1xuXG4gICAgICAgICAgICBzbW9vdGhpZUNvbXBvc2l0ZS53aWR0aCA9IGltZ1dpZHRoO1xuICAgICAgICAgICAgc21vb3RoaWVDb21wb3NpdGUuaGVpZ2h0ID0gaW1nSGVpZ2h0O1xuXG4gICAgICAgICAgICBzbW9vdGhpZUNvbXBvc2l0ZUNvbnRleHQgPSBzbW9vdGhpZUNvbXBvc2l0ZS5nZXRDb250ZXh0KFwiMmRcIik7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBGaXJzdCBkcmF3IHRoZSBzbW9vdGhpZSBpbiBpdHMgbWFzayBwb3NpdGlvbjpcbiAgICAgICAgc21vb3RoaWVDb21wb3NpdGVDb250ZXh0Lmdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbiA9IFwiY29weVwiO1xuICAgICAgICBzbW9vdGhpZUNvbXBvc2l0ZUNvbnRleHQuZHJhd0ltYWdlKHNtb290aGllLCAwLCAwKTtcblxuICAgICAgICAvLyBOb3cgc2hpZnQgdGhlIHNtb290aGllIGRvd253YXJkcyBhbmQgdXNlIHRoZSBvcmlnaW5hbCBwb3NpdGlvbiBhcyBhIG1hc2tcbiAgICAgICAgc21vb3RoaWVDb21wb3NpdGVDb250ZXh0Lmdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbiA9IFwic291cmNlLWluXCI7XG4gICAgICAgIHNtb290aGllQ29tcG9zaXRlQ29udGV4dC5kcmF3SW1hZ2Uoc21vb3RoaWUsIDAsIE1hdGgucm91bmQocHJvZ3Jlc3MgKiBNQVhfU01PT1RISUVfT0ZGU0VUKSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYnVpbGRDdXBDb21wb3NpdGUoaW1nV2lkdGgsIGltZ0hlaWdodCwgcHJvZ3Jlc3MpIHtcbiAgICAgICAgaWYgKCFjdXBDb21wb3NpdGUpIHtcbiAgICAgICAgICAgIGN1cENvbXBvc2l0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIik7XG5cbiAgICAgICAgICAgIGN1cENvbXBvc2l0ZS53aWR0aCA9IGltZ1dpZHRoO1xuICAgICAgICAgICAgY3VwQ29tcG9zaXRlLmhlaWdodCA9IGltZ0hlaWdodDtcblxuICAgICAgICAgICAgY3VwQ29tcG9zaXRlQ29udGV4dCA9IGN1cENvbXBvc2l0ZS5nZXRDb250ZXh0KFwiMmRcIik7XG4gICAgICAgIH1cblxuICAgICAgICBjdXBDb21wb3NpdGVDb250ZXh0Lmdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbiA9IFwiY29weVwiO1xuICAgICAgICBjdXBDb21wb3NpdGVDb250ZXh0LmRyYXdJbWFnZShjdXAsIDAsIDApO1xuXG4gICAgICAgIGJ1aWxkU21vb3RoaWVDb21wb3NpdGUoaW1nV2lkdGgsIGltZ0hlaWdodCwgcHJvZ3Jlc3MpO1xuXG4gICAgICAgIGN1cENvbXBvc2l0ZUNvbnRleHQuZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uID0gXCJzb3VyY2Utb3ZlclwiO1xuICAgICAgICBjdXBDb21wb3NpdGVDb250ZXh0LmRyYXdJbWFnZShzbW9vdGhpZUNvbXBvc2l0ZSwgMCwgMCk7XG5cbiAgICAgICAgY3VwQ29tcG9zaXRlQ29udGV4dC5kcmF3SW1hZ2UobGlkLCAwLCAwKTtcblxuICAgICAgICBjdXBDb21wb3NpdGVDb250ZXh0Lmdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbiA9IFwic2NyZWVuXCI7XG4gICAgICAgIGN1cENvbXBvc2l0ZUNvbnRleHQuZHJhd0ltYWdlKGhpZ2hsaWdodHMsIDAsIDApO1xuXG4gICAgICAgIGN1cENvbXBvc2l0ZUNvbnRleHQuZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uID0gXCJtdWx0aXBseVwiO1xuICAgICAgICBjdXBDb21wb3NpdGVDb250ZXh0LmRyYXdJbWFnZShzaGFkaW5nLCAwLCAwKTtcblxuICAgICAgICByZXR1cm4gY3VwQ29tcG9zaXRlO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHJlcGFpbnQoKSB7XG4gICAgICAgIHZhclxuICAgICAgICAgICAgY2VudGVyWCA9IGNhbnZhcy53aWR0aCAvIDIsXG4gICAgICAgICAgICBjZW50ZXJZID0gY2FudmFzLmhlaWdodCAvIDI7XG5cbiAgICAgICAgY2FudmFzQ29udGV4dC5maWxsU3R5bGUgPSAnd2hpdGUnO1xuICAgICAgICBjYW52YXNDb250ZXh0LmZpbGxSZWN0KDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7XG5cbiAgICAgICAgaWYgKGxvYWRlZENvdW50ID09IGltYWdlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgIGltZ1dpZHRoID0gdGV4dC53aWR0aCxcbiAgICAgICAgICAgICAgICBpbWdIZWlnaHQgPSB0ZXh0LmhlaWdodCxcbiAgICAgICAgICAgICAgICBsZWZ0ID0gTWF0aC5yb3VuZChjZW50ZXJYIC0gaW1nV2lkdGggLyAyKSxcbiAgICAgICAgICAgICAgICB0b3AgPSBNYXRoLnJvdW5kKGNlbnRlclkgLSBpbWdIZWlnaHQgLyAyKTtcblxuICAgICAgICAgICAgY2FudmFzQ29udGV4dC5kcmF3SW1hZ2UodGV4dCwgbGVmdCwgdG9wKTtcblxuICAgICAgICAgICAgYnVpbGRDdXBDb21wb3NpdGUoaW1nV2lkdGgsIGltZ0hlaWdodCwgcHJvZ3Jlc3MpO1xuXG4gICAgICAgICAgICAvL1RoZSB3aG9sZSBjdXAgY29tcG9zaXRlIGlzIHNsaWdodGx5IHRyYW5zcGFyZW50XG4gICAgICAgICAgICBjYW52YXNDb250ZXh0Lmdsb2JhbEFscGhhID0gMC44ODtcbiAgICAgICAgICAgIGNhbnZhc0NvbnRleHQuZHJhd0ltYWdlKGN1cENvbXBvc2l0ZSwgbGVmdCwgdG9wKTtcblxuICAgICAgICAgICAgY2FudmFzQ29udGV4dC5nbG9iYWxBbHBoYSA9IDEuMDtcblxuICAgICAgICAgICAgY2FudmFzQ29udGV4dC5kcmF3SW1hZ2Uob3V0bGluZXMsIGxlZnQsIHRvcCk7XG5cbiAgICAgICAgICAgIGNlbnRlclkgPSBNYXRoLnJvdW5kKGNlbnRlclkgKyBpbWdIZWlnaHQgLyAyICsgMik7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAobWVzc2FnZSAhPSBcIlwiKSB7XG4gICAgICAgICAgICBjYW52YXNDb250ZXh0LmZpbGxTdHlsZSA9IFwiYmxhY2tcIjtcblxuICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgbGluZXMgPSBtZXNzYWdlLnNwbGl0KFwiXFxuXCIpO1xuXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxpbmVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgICAgIGxpbmUgPSBsaW5lc1tpXSxcbiAgICAgICAgICAgICAgICAgICAgbGluZVdpZHRoID0gY2FudmFzQ29udGV4dC5tZWFzdXJlVGV4dChsaW5lKS53aWR0aDtcblxuICAgICAgICAgICAgICAgIGNlbnRlclkgKz0gZm9udEhlaWdodCAqIDI7XG5cbiAgICAgICAgICAgICAgICBjYW52YXNDb250ZXh0LmZpbGxUZXh0KGxpbmUsIGNlbnRlclggLSBsaW5lV2lkdGggLyAyLCBjZW50ZXJZKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHJlc2l6ZSgpIHtcbiAgICAgICAgLy8gVXNlIHRoZSBjYW52YXMgZGltZW5zaW9ucyBzZXQgYnkgdGhlIENTUyBzdHlsZXNcbiAgICAgICAgY2FudmFzLndpZHRoID0gY2FudmFzLmNsaWVudFdpZHRoO1xuICAgICAgICBjYW52YXMuaGVpZ2h0ID0gY2FudmFzLmNsaWVudEhlaWdodDtcblxuICAgICAgICBjYW52YXNDb250ZXh0LmZvbnQgPSBmb250SGVpZ2h0ICsgXCJwdCBzYW5zLXNlcmlmXCI7XG5cbiAgICAgICAgcmVwYWludCgpO1xuICAgIH1cblxuICAgIGxvYWRlci5vbihcImxvYWRpbmdQcm9ncmVzc1wiLCBmdW5jdGlvbihfcHJvZ3Jlc3MsIF9tZXNzYWdlKSB7XG4gICAgICAgIHByb2dyZXNzID0gX3Byb2dyZXNzO1xuICAgICAgICBtZXNzYWdlID0gX21lc3NhZ2U7XG5cbiAgICAgICAgcmVwYWludCgpO1xuICAgIH0pO1xuXG4gICAgbG9hZGVyLm9uKFwibG9hZGluZ0ZhaWx1cmVcIiwgZnVuY3Rpb24oX21lc3NhZ2UpIHtcbiAgICAgICAgcHJvZ3Jlc3MgPSAwO1xuICAgICAgICBtZXNzYWdlID0gX21lc3NhZ2U7XG5cbiAgICAgICAgcmVwYWludCgpO1xuICAgIH0pO1xuXG4gICAgbG9hZGVyLm9uKFwibG9hZGluZ0NvbXBsZXRlXCIsIGZ1bmN0aW9uKCkge1xuICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLCByZXNpemUpO1xuICAgICAgICB1aVBhcmVudC5yZW1vdmVDaGlsZChjYW52YXMpO1xuICAgIH0pO1xuXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIiwgcmVzaXplKTtcblxuICAgIGNhbnZhcy5jbGFzc05hbWUgPSBcImNoaWNrZW5wYWludC1zcGxhc2gtc2NyZWVuXCI7XG5cbiAgICB1aVBhcmVudC5hcHBlbmRDaGlsZChjYW52YXMpO1xuXG4gICAgcmVzaXplKCk7XG59XG4iLCIvKlxuICAgIENoaWNrZW5QYWludFxuICAgIFxuICAgIENoaWNrZW5QYWludCBpcyBhIHRyYW5zbGF0aW9uIG9mIENoaWJpUGFpbnQgZnJvbSBKYXZhIHRvIEphdmFTY3JpcHRcbiAgICBieSBOaWNob2xhcyBTaGVybG9jayAvIENoaWNrZW4gU21vb3RoaWUuXG4gICAgXG4gICAgQ2hpYmlQYWludCBpcyBDb3B5cmlnaHQgKGMpIDIwMDYtMjAwOCBNYXJjIFNjaGVmZXJcblxuICAgIENoaWNrZW5QYWludCBpcyBmcmVlIHNvZnR3YXJlOiB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3IgbW9kaWZ5XG4gICAgaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBhcyBwdWJsaXNoZWQgYnlcbiAgICB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uLCBlaXRoZXIgdmVyc2lvbiAzIG9mIHRoZSBMaWNlbnNlLCBvclxuICAgIChhdCB5b3VyIG9wdGlvbikgYW55IGxhdGVyIHZlcnNpb24uXG5cbiAgICBDaGlja2VuUGFpbnQgaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCxcbiAgICBidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZlxuICAgIE1FUkNIQU5UQUJJTElUWSBvciBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS4gIFNlZSB0aGVcbiAgICBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9yZSBkZXRhaWxzLlxuXG4gICAgWW91IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2VcbiAgICBhbG9uZyB3aXRoIENoaWNrZW5QYWludC4gSWYgbm90LCBzZWUgPGh0dHA6Ly93d3cuZ251Lm9yZy9saWNlbnNlcy8+LlxuKi9cblxuaW1wb3J0IENQUGFsZXR0ZSBmcm9tICcuL0NQUGFsZXR0ZSc7XG5cbmltcG9ydCBDUEJydXNoSW5mbyBmcm9tICcuLi9lbmdpbmUvQ1BCcnVzaEluZm8nO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBDUFN0cm9rZVBhbGV0dGUoY3BDb250cm9sbGVyKSB7XG4gICAgQ1BQYWxldHRlLmNhbGwodGhpcywgY3BDb250cm9sbGVyLCBcInN0cm9rZVwiLCBcIlN0cm9rZVwiKTtcbiAgICBcbiAgICB2YXIgXG4gICAgICAgIHRoYXQgPSB0aGlzLFxuXG4gICAgICAgIGJ1dHRvbnMgPSBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBcImNoaWNrZW5wYWludC10b29sLWZyZWVoYW5kXCIsXG4gICAgICAgICAgICAgICAgY29tbWFuZDogXCJDUEZyZWVIYW5kXCIsXG4gICAgICAgICAgICAgICAgdG9vbFRpcDogXCJGcmVlLWhhbmRcIixcbiAgICAgICAgICAgICAgICBzZWxlY3RlZDogdHJ1ZVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IFwiY2hpY2tlbnBhaW50LXRvb2wtbGluZVwiLFxuICAgICAgICAgICAgICAgIGNvbW1hbmQ6IFwiQ1BMaW5lXCIsXG4gICAgICAgICAgICAgICAgdG9vbFRpcDogXCJTdHJhaWdodCBsaW5lXCJcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBcImNoaWNrZW5wYWludC10b29sLWJlemllclwiLFxuICAgICAgICAgICAgICAgIGNvbW1hbmQ6IFwiQ1BCZXppZXJcIixcbiAgICAgICAgICAgICAgICB0b29sVGlwOiBcIkJlemllciBjdXJ2ZVwiXG4gICAgICAgICAgICB9XG4gICAgICAgIF0sXG5cbiAgICAgICAgYm9keSA9IHRoYXQuZ2V0Qm9keUVsZW1lbnQoKTtcblxuICAgIGZ1bmN0aW9uIGJ1aWxkQnV0dG9ucygpIHtcbiAgICAgICAgdmFyXG4gICAgICAgICAgICBsaXN0RWxlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ1bFwiKTtcbiAgICAgICAgXG4gICAgICAgIGxpc3RFbGVtLmNsYXNzTmFtZSA9IFwiY2hpY2tlbnBhaW50LXN0cm9rZS10b29scyBsaXN0LXVuc3R5bGVkXCI7XG4gICAgICAgIFxuICAgICAgICBmb3IgKHZhciBpIGluIGJ1dHRvbnMpIHtcbiAgICAgICAgICAgIHZhciBcbiAgICAgICAgICAgICAgICBidXR0b24gPSBidXR0b25zW2ldLFxuICAgICAgICAgICAgICAgIGJ1dHRvbkVsZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGlcIik7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGJ1dHRvbkVsZW0uY2xhc3NOYW1lID0gXCJjaGlja2VucGFpbnQtdG9vbGJhci1idXR0b24gXCIgKyBidXR0b24uY2xhc3NOYW1lO1xuICAgICAgICAgICAgYnV0dG9uRWxlbS5zZXRBdHRyaWJ1dGUoXCJkYXRhLWJ1dHRvbkluZGV4XCIsIGkpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoYnV0dG9uLnNlbGVjdGVkKSB7XG4gICAgICAgICAgICAgICAgYnV0dG9uRWxlbS5jbGFzc05hbWUgPSBidXR0b25FbGVtLmNsYXNzTmFtZSArIFwiIHNlbGVjdGVkXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGxpc3RFbGVtLmFwcGVuZENoaWxkKGJ1dHRvbkVsZW0pO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBsaXN0RWxlbS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgaWYgKGUudGFyZ2V0ICYmIGUudGFyZ2V0Lm5vZGVOYW1lID09IFwiTElcIikge1xuICAgICAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgICAgICBidXR0b24gPSBidXR0b25zW3BhcnNlSW50KGUudGFyZ2V0LmdldEF0dHJpYnV0ZShcImRhdGEtYnV0dG9uSW5kZXhcIiksIDEwKV07XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgJChcImxpXCIsIGxpc3RFbGVtKS5yZW1vdmVDbGFzcyhcInNlbGVjdGVkXCIpO1xuICAgICAgICAgICAgICAgICQoZS50YXJnZXQpLmFkZENsYXNzKFwic2VsZWN0ZWRcIik7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgY3BDb250cm9sbGVyLmFjdGlvblBlcmZvcm1lZCh7YWN0aW9uOiBidXR0b24uY29tbWFuZH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIGJvZHkuYXBwZW5kQ2hpbGQobGlzdEVsZW0pO1xuICAgIH1cbiAgICBcbiAgICBidWlsZEJ1dHRvbnMoKTtcbiAgICBcbiAgICBjcENvbnRyb2xsZXIub24oXCJ0b29sQ2hhbmdlXCIsIGZ1bmN0aW9uKHRvb2wsIHRvb2xJbmZvKSB7XG4gICAgICAgICQoXCIuY2hpY2tlbnBhaW50LXRvb2wtZnJlZWhhbmRcIiwgYm9keSkudG9nZ2xlQ2xhc3MoXCJzZWxlY3RlZFwiLCB0b29sSW5mby5zdHJva2VNb2RlID09IENQQnJ1c2hJbmZvLlNNX0ZSRUVIQU5EKTtcbiAgICAgICAgJChcIi5jaGlja2VucGFpbnQtdG9vbC1saW5lXCIsIGJvZHkpLnRvZ2dsZUNsYXNzKFwic2VsZWN0ZWRcIiwgdG9vbEluZm8uc3Ryb2tlTW9kZSA9PSBDUEJydXNoSW5mby5TTV9MSU5FKTtcbiAgICAgICAgJChcIi5jaGlja2VucGFpbnQtdG9vbC1iZXppZXJcIiwgYm9keSkudG9nZ2xlQ2xhc3MoXCJzZWxlY3RlZFwiLCB0b29sSW5mby5zdHJva2VNb2RlID09IENQQnJ1c2hJbmZvLlNNX0JFWklFUik7XG4gICAgfSk7XG59XG5cbkNQU3Ryb2tlUGFsZXR0ZS5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKENQUGFsZXR0ZS5wcm90b3R5cGUpO1xuQ1BTdHJva2VQYWxldHRlLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IENQU3Ryb2tlUGFsZXR0ZTtcbiIsIi8qXG4gICAgQ2hpY2tlblBhaW50XG4gICAgXG4gICAgQ2hpY2tlblBhaW50IGlzIGEgdHJhbnNsYXRpb24gb2YgQ2hpYmlQYWludCBmcm9tIEphdmEgdG8gSmF2YVNjcmlwdFxuICAgIGJ5IE5pY2hvbGFzIFNoZXJsb2NrIC8gQ2hpY2tlbiBTbW9vdGhpZS5cbiAgICBcbiAgICBDaGliaVBhaW50IGlzIENvcHlyaWdodCAoYykgMjAwNi0yMDA4IE1hcmMgU2NoZWZlclxuXG4gICAgQ2hpY2tlblBhaW50IGlzIGZyZWUgc29mdHdhcmU6IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vciBtb2RpZnlcbiAgICBpdCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGFzIHB1Ymxpc2hlZCBieVxuICAgIHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb24sIGVpdGhlciB2ZXJzaW9uIDMgb2YgdGhlIExpY2Vuc2UsIG9yXG4gICAgKGF0IHlvdXIgb3B0aW9uKSBhbnkgbGF0ZXIgdmVyc2lvbi5cblxuICAgIENoaWNrZW5QYWludCBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLFxuICAgIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mXG4gICAgTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiAgU2VlIHRoZVxuICAgIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuXG5cbiAgICBZb3Ugc2hvdWxkIGhhdmUgcmVjZWl2ZWQgYSBjb3B5IG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZVxuICAgIGFsb25nIHdpdGggQ2hpY2tlblBhaW50LiBJZiBub3QsIHNlZSA8aHR0cDovL3d3dy5nbnUub3JnL2xpY2Vuc2VzLz4uXG4qL1xuXG5pbXBvcnQgQ1BQYWxldHRlIGZyb20gJy4vQ1BQYWxldHRlJztcblxuaW1wb3J0IENQQ29sb3IgZnJvbSAnLi4vdXRpbC9DUENvbG9yJztcbmltcG9ydCBBZG9iZUNvbG9yVGFibGUgZnJvbSAnLi4vdXRpbC9BZG9iZUNvbG9yVGFibGUnO1xuXG5mdW5jdGlvbiBwYWRMZWZ0KHN0cmluZywgcGFkZGluZywgbGVuKSB7XG4gICAgd2hpbGUgKHN0cmluZy5sZW5ndGggPCBsZW4pIHtcbiAgICAgICAgc3RyaW5nID0gcGFkZGluZyArIHN0cmluZztcbiAgICB9XG4gICAgcmV0dXJuIHN0cmluZztcbn1cblxuZnVuY3Rpb24gd3JhcFdpdGhFbGVtKGUsIHdyYXBXaXRoTmFtZSkge1xuICAgIHZhclxuICAgICAgICBwYXJlbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KHdyYXBXaXRoTmFtZSk7XG4gICAgXG4gICAgcGFyZW50LmFwcGVuZENoaWxkKGUpO1xuICAgIFxuICAgIHJldHVybiBwYXJlbnQ7XG59XG5cbmZ1bmN0aW9uIGZpbGVBUElzU3VwcG9ydGVkKCkge1xuICAgIHJldHVybiB3aW5kb3cuRmlsZSAmJiB3aW5kb3cuRmlsZVJlYWRlciAmJiB3aW5kb3cuRmlsZUxpc3QgJiYgd2luZG93LkJsb2I7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIENQU3dhdGNoZXNQYWxldHRlKGNvbnRyb2xsZXIpIHtcbiAgICBDUFBhbGV0dGUuY2FsbCh0aGlzLCBjb250cm9sbGVyLCBcInN3YXRjaGVzXCIsIFwiQ29sb3Igc3dhdGNoZXNcIik7XG4gICAgXG4gICAgdmFyXG4gICAgICAgIElOSVRfQ09MT1JTID0gWzB4ZmZmZmZmLCAweDAwMDAwMCwgMHhmZjAwMDAsIDB4MDBmZjAwLCAweDAwMDBmZiwgMHhmZmZmMDBdLFxuICAgICAgICBcbiAgICAgICAgbW9kaWZpZWQgPSBmYWxzZSxcbiAgICAgICAgc3dhdGNoUGFuZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidWxcIiksXG4gICAgICAgIGJ1dHRvblBhbmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSxcbiAgICAgICAgXG4gICAgICAgIGZpbGVJbnB1dCxcbiAgICAgICAgXG4gICAgICAgIHRoYXQgPSB0aGlzO1xuXG4gICAgZnVuY3Rpb24gQ1BDb2xvclN3YXRjaChjb2xvcikge1xuICAgICAgICB2YXJcbiAgICAgICAgICAgIHdyYXBwZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLFxuICAgICAgICAgICAgc3dhdGNoRWxlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJhXCIpLFxuICAgICAgICAgICAgc3dhdGNoTWVudSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ1bFwiKSxcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgbW51UmVtb3ZlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImFcIiksXG4gICAgICAgICAgICBtbnVTZXRUb0N1cnJlbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYVwiKSxcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhhdCA9IHRoaXM7XG4gICAgICAgIFxuICAgICAgICB0aGlzLmdldEVsZW1lbnQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiB3cmFwcGVyO1xuICAgICAgICB9O1xuICAgICAgICBcbiAgICAgICAgdGhpcy5zZXRDb2xvciA9IGZ1bmN0aW9uKGNvbG9yKSB7XG4gICAgICAgICAgICBzd2F0Y2hFbGVtLnNldEF0dHJpYnV0ZShcImRhdGEtY29sb3JcIiwgY29sb3IpO1xuICAgICAgICAgICAgc3dhdGNoRWxlbS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAnIycgKyBwYWRMZWZ0KFwiXCIgKyBOdW1iZXIoY29sb3IpLnRvU3RyaW5nKDE2KSwgXCIwXCIsIDYpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMuc2V0Q29sb3IoY29sb3IpO1xuICAgICAgICBcbiAgICAgICAgc3dhdGNoRWxlbS5ocmVmID0gXCIjXCI7XG4gICAgICAgIHN3YXRjaEVsZW0uY2xhc3NOYW1lID0gXCJjaGlja2VucGFpbnQtY29sb3Itc3dhdGNoIGRyb3Bkb3duLXRvZ2dsZVwiO1xuICAgICAgICBzd2F0Y2hFbGVtLnNldEF0dHJpYnV0ZShcImRhdGEtdG9nZ2xlXCIsIFwiZHJvcGRvd25cIik7XG4gICAgICAgIFxuICAgICAgICBtbnVSZW1vdmUuaHJlZiA9IFwiI1wiO1xuICAgICAgICBtbnVSZW1vdmUuaW5uZXJIVE1MID0gXCJSZW1vdmVcIjtcbiAgICAgICAgXG4gICAgICAgIG1udVJlbW92ZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgJCh3cmFwcGVyKS5yZW1vdmUoKTtcblxuICAgICAgICAgICAgbW9kaWZpZWQgPSB0cnVlO1xuICAgICAgICB9KTtcbiAgICAgICAgICAgIFxuICAgICAgICBtbnVTZXRUb0N1cnJlbnQuaHJlZiA9IFwiI1wiO1xuICAgICAgICBtbnVTZXRUb0N1cnJlbnQuaW5uZXJIVE1MID0gXCJSZXBsYWNlIHdpdGggY3VycmVudCBjb2xvclwiO1xuICAgICAgICBcbiAgICAgICAgbW51U2V0VG9DdXJyZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoYXQuc2V0Q29sb3IoY29udHJvbGxlci5nZXRDdXJDb2xvcigpLmdldFJnYigpKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgbW9kaWZpZWQgPSB0cnVlO1xuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIHN3YXRjaE1lbnUuY2xhc3NOYW1lID0gXCJkcm9wZG93bi1tZW51XCI7XG4gICAgICAgIFxuICAgICAgICBzd2F0Y2hNZW51LmFwcGVuZENoaWxkKHdyYXBXaXRoRWxlbShtbnVSZW1vdmUsIFwibGlcIikpO1xuICAgICAgICBzd2F0Y2hNZW51LmFwcGVuZENoaWxkKHdyYXBXaXRoRWxlbShtbnVTZXRUb0N1cnJlbnQsIFwibGlcIikpO1xuICAgICAgICBcbiAgICAgICAgd3JhcHBlci5jbGFzc05hbWUgPSBcImNoaWNrZW5wYWludC1jb2xvci1zd2F0Y2gtd3JhcHBlclwiO1xuICAgICAgICB3cmFwcGVyLmFwcGVuZENoaWxkKHN3YXRjaEVsZW0pO1xuICAgICAgICB3cmFwcGVyLmFwcGVuZENoaWxkKHN3YXRjaE1lbnUpO1xuICAgICAgICBcbiAgICAgICAgJCh3cmFwcGVyKS5vbihcInNob3cuYnMuZHJvcGRvd25cIiwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgXG4gICAgICAgICAgICAgICAgJGJ0bkRyb3BEb3duID0gJCh0aGlzKS5maW5kKFwiLmRyb3Bkb3duLXRvZ2dsZVwiKSxcbiAgICAgICAgICAgICAgICAkbGlzdEhvbGRlciA9ICQodGhpcykuZmluZChcIi5kcm9wZG93bi1tZW51XCIpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAkbGlzdEhvbGRlci5jc3Moe1xuICAgICAgICAgICAgICAgIFwidG9wXCI6ICgkYnRuRHJvcERvd24ucG9zaXRpb24oKS50b3AgKyAkYnRuRHJvcERvd24ub3V0ZXJIZWlnaHQodHJ1ZSkpICsgXCJweFwiLFxuICAgICAgICAgICAgICAgIFwibGVmdFwiOiAkYnRuRHJvcERvd24ucG9zaXRpb24oKS5sZWZ0ICsgXCJweFwiXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIFxuICAgIGZ1bmN0aW9uIGNsZWFyU3dhdGNoZXMoKSB7XG4gICAgICAgIHdoaWxlIChzd2F0Y2hQYW5lbC5sYXN0Q2hpbGQpIHtcbiAgICAgICAgICAgIHN3YXRjaFBhbmVsLnJlbW92ZUNoaWxkKHN3YXRjaFBhbmVsLmxhc3RDaGlsZCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBhZGRTd2F0Y2goY29sb3IpIHtcbiAgICAgICAgdmFyXG4gICAgICAgICAgICBzd2F0Y2ggPSBuZXcgQ1BDb2xvclN3YXRjaChjb2xvcik7XG5cbiAgICAgICAgc3dhdGNoUGFuZWwuYXBwZW5kQ2hpbGQoc3dhdGNoLmdldEVsZW1lbnQoKSk7XG4gICAgfVxuICAgIFxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYW4gYXJyYXkgb2YgY29sb3JzIGluIFJHQiAzMi1iaXQgaW50ZWdlciBmb3JtYXRcbiAgICAgKi9cbiAgICB0aGlzLmdldFN3YXRjaGVzID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhclxuICAgICAgICAgICAgc3dhdGNoZXMgPSAkKFwiLmNoaWNrZW5wYWludC1jb2xvci1zd2F0Y2hcIiwgc3dhdGNoUGFuZWwpLFxuICAgICAgICAgICAgY29sb3JzID0gbmV3IEFycmF5KHN3YXRjaGVzLmxlbmd0aCk7XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzd2F0Y2hlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgY29sb3JzW2ldID0gcGFyc2VJbnQoc3dhdGNoZXMuZ2V0KGkpLmdldEF0dHJpYnV0ZShcImRhdGEtY29sb3JcIiksIDEwKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBjb2xvcnM7XG4gICAgfTtcblxuICAgIHRoaXMuc2V0U3dhdGNoZXMgPSBmdW5jdGlvbihzd2F0Y2hlcykge1xuICAgICAgICBjbGVhclN3YXRjaGVzKCk7XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzd2F0Y2hlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgYWRkU3dhdGNoKHN3YXRjaGVzW2ldKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgbW9kaWZpZWQgPSB0cnVlO1xuICAgIH07XG4gICAgXG4gICAgdGhpcy5pc01vZGlmaWVkID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBtb2RpZmllZDtcbiAgICB9O1xuICAgIFxuICAgIGZ1bmN0aW9uIGxvYWRTd2F0Y2hlcygpIHtcbiAgICAgICAgZmlsZUlucHV0Lm9uY2hhbmdlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgXG4gICAgICAgICAgICAgICAgZmlsZUxpc3QgPSB0aGlzLmZpbGVzO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoZmlsZUxpc3QubGVuZ3RoIDwgMSlcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgIGZpbGUgPSBmaWxlTGlzdFswXSxcbiAgICAgICAgICAgICAgICByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICByZWFkZXIub25sb2FkID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgICAgIHN3YXRjaGVzID0gbmV3IEFkb2JlQ29sb3JUYWJsZSgpLnJlYWQodGhpcy5yZXN1bHQpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGlmIChzd2F0Y2hlcyAhPSBudWxsICYmIHN3YXRjaGVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgdGhhdC5zZXRTd2F0Y2hlcyhzd2F0Y2hlcyk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgYWxlcnQoXCJUaGUgc3dhdGNoZXMgY291bGQgbm90IGJlIHJlYWQsIGRpZCB5b3Ugc2VsZWN0IGFuIC5hY28gZmlsZT9cIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgcmVhZGVyLnJlYWRBc0FycmF5QnVmZmVyKGZpbGUpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBmaWxlSW5wdXQuY2xpY2soKTtcbiAgICB9XG4gICAgXG4gICAgZnVuY3Rpb24gc2F2ZVN3YXRjaGVzKCkge1xuICAgICAgICB2YXJcbiAgICAgICAgICAgIGFjbyA9IG5ldyBBZG9iZUNvbG9yVGFibGUoKS53cml0ZSh0aGF0LmdldFN3YXRjaGVzKCkpLFxuICAgICAgICAgICAgYmxvYiA9IG5ldyBCbG9iKFthY29dLCB7dHlwZTogXCJhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW1cIn0pO1xuICAgICAgICBcbiAgICAgICAgd2luZG93LnNhdmVBcyhibG9iLCBcIm9la2FraXN3YXRjaGVzLmFjb1wiKTtcbiAgICB9XG4gICAgXG4gICAgZnVuY3Rpb24gaW5pdFN3YXRjaFBhbmVsKCkge1xuICAgICAgICBzd2F0Y2hQYW5lbC5jbGFzc05hbWUgPSBcImNoaWNrZW5wYWludC1jb2xvci1zd2F0Y2hlcyBsaXN0LXVuc3R5bGVkXCI7XG4gICAgICAgIFxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IElOSVRfQ09MT1JTLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBzd2F0Y2hQYW5lbC5hcHBlbmRDaGlsZChuZXcgQ1BDb2xvclN3YXRjaChJTklUX0NPTE9SU1tpXSkuZ2V0RWxlbWVudCgpKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgc3dhdGNoUGFuZWwuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgIHN3YXRjaCA9IGUudGFyZ2V0O1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoIS9jaGlja2VucGFpbnQtY29sb3Itc3dhdGNoLy50ZXN0KHN3YXRjaC5jbGFzc05hbWUpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoZS5idXR0b24gPT0gMCAvKiBMZWZ0ICovICYmIHN3YXRjaC5nZXRBdHRyaWJ1dGUoXCJkYXRhLWNvbG9yXCIpICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyLnNldEN1ckNvbG9yKG5ldyBDUENvbG9yKHBhcnNlSW50KHN3YXRjaC5nZXRBdHRyaWJ1dGUoXCJkYXRhLWNvbG9yXCIpLCAxMCkpKTtcbiAgICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICBzd2F0Y2hQYW5lbC5hZGRFdmVudExpc3RlbmVyKFwiY29udGV4dG1lbnVcIiwgZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgc3dhdGNoID0gZS50YXJnZXQ7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmICghL2NoaWNrZW5wYWludC1jb2xvci1zd2F0Y2gvLnRlc3Qoc3dhdGNoLmNsYXNzTmFtZSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgJChzd2F0Y2gpXG4gICAgICAgICAgICAgICAgLmRyb3Bkb3duKFwidG9nZ2xlXCIpXG4gICAgICAgICAgICAgICAgLm9mZihcImNsaWNrLmJzLmRyb3Bkb3duXCIpOyAvLyBSZW1vdmUgQm9vdHN0cmFwJ3MgbGVmdC1jbGljayBoYW5kbGVyIGluc3RhbGxlZCBieSB0b2dnbGVcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIFxuICAgIGZ1bmN0aW9uIGluaXRCdXR0b25zUGFuZWwoKSB7XG4gICAgICAgIHZhclxuICAgICAgICAgICAgYnRuU2V0dGluZ3MgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLCBcbiAgICAgICAgICAgIGJ0bkFkZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHNldHRpbmdzTWVudSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ1bFwiKSxcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgbW51U2F2ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJhXCIpLFxuICAgICAgICAgICAgbW51TG9hZCAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYVwiKTtcbiAgICAgICAgXG4gICAgICAgIGJ0bkFkZC50aXRsZSA9IFwiQWRkIHRoZSBjdXJyZW50IGJydXNoIGNvbG9yIGFzIGEgbmV3IHN3YXRjaFwiO1xuICAgICAgICBidG5BZGQuY2xhc3NOYW1lID0gXCJjaGlja2VucGFpbnQtc21hbGwtdG9vbGJhci1idXR0b24gY2hpY2tlbnBhaW50LWNvbG9yLXN3YXRjaC1hZGRcIjtcbiAgICAgICAgXG4gICAgICAgIGJ0blNldHRpbmdzLmNsYXNzTmFtZSA9IFwiY2hpY2tlbnBhaW50LXNtYWxsLXRvb2xiYXItYnV0dG9uIGNoaWNrZW5wYWludC1jb2xvci1zd2F0Y2gtc2V0dGluZ3NcIjtcbiAgICAgICAgYnRuU2V0dGluZ3Muc2V0QXR0cmlidXRlKFwiZGF0YS10b2dnbGVcIiwgXCJkcm9wZG93blwiKTtcbiAgICAgICAgJChidG5TZXR0aW5ncykuZHJvcGRvd24oKTtcblxuICAgICAgICBtbnVTYXZlLmhyZWYgPSBcIiNcIjtcbiAgICAgICAgbW51U2F2ZS5pbm5lckhUTUwgPSBcIlNhdmUgc3dhdGNoZXMgdG8geW91ciBjb21wdXRlci4uLlwiO1xuICAgICAgICBtbnVTYXZlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHNhdmVTd2F0Y2hlcygpO1xuICAgICAgICB9KTtcbiAgICAgICAgICAgIFxuICAgICAgICBtbnVMb2FkLmhyZWYgPSBcIiNcIjtcbiAgICAgICAgbW51TG9hZC5pbm5lckhUTUwgPSBcIkxvYWQgc3dhdGNoZXMgZnJvbSB5b3VyIGNvbXB1dGVyLi4uXCI7XG4gICAgICAgIG1udUxvYWQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgbG9hZFN3YXRjaGVzKCk7XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgc2V0dGluZ3NNZW51LmNsYXNzTmFtZSA9IFwiZHJvcGRvd24tbWVudSBkcm9wZG93bi1tZW51LXJpZ2h0XCI7XG4gICAgICAgIFxuICAgICAgICBzZXR0aW5nc01lbnUuYXBwZW5kQ2hpbGQod3JhcFdpdGhFbGVtKG1udVNhdmUsIFwibGlcIikpO1xuICAgICAgICBzZXR0aW5nc01lbnUuYXBwZW5kQ2hpbGQod3JhcFdpdGhFbGVtKG1udUxvYWQsIFwibGlcIikpO1xuICAgICAgICBcbiAgICAgICAgdmFyXG4gICAgICAgICAgICBidG5TZXR0aW5nc0NvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIFxuICAgICAgICBidG5TZXR0aW5nc0NvbnRhaW5lci5jbGFzc05hbWUgPSAnZHJvcGRvd24nO1xuICAgICAgICBidG5TZXR0aW5nc0NvbnRhaW5lci5hcHBlbmRDaGlsZChidG5TZXR0aW5ncyk7XG4gICAgICAgIGJ0blNldHRpbmdzQ29udGFpbmVyLmFwcGVuZENoaWxkKHNldHRpbmdzTWVudSk7XG5cbiAgICAgICAgJChidG5TZXR0aW5nc0NvbnRhaW5lcikub24oXCJzaG93LmJzLmRyb3Bkb3duXCIsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgLyogSW5zdGVhZCBvZiBCb290c3RyYXAncyBleHRyZW1lbHkgZXhwZW5zaXZlIGRhdGEgQVBJLCB3ZSdsbCBvbmx5IGxpc3RlbiBmb3IgZGlzbWlzcyBjbGlja3Mgb24gdGhlXG4gICAgICAgICAgICAgKiBkb2N1bWVudCAqd2hpbGUgdGhlIG1lbnUgaXMgb3BlbiEqXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICQoZG9jdW1lbnQpLm9uZShcImNsaWNrXCIsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIGlmICgkKGJ0blNldHRpbmdzQ29udGFpbmVyKS5oYXNDbGFzcyhcIm9wZW5cIikpIHtcbiAgICAgICAgICAgICAgICAgICAgJChidG5TZXR0aW5ncykuZHJvcGRvd24oXCJ0b2dnbGVcIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGJ0bkFkZC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgYWRkU3dhdGNoKGNvbnRyb2xsZXIuZ2V0Q3VyQ29sb3IoKS5nZXRSZ2IoKSk7XG4gICAgICAgICAgICBtb2RpZmllZCA9IHRydWU7XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgYnV0dG9uUGFuZWwuY2xhc3NOYW1lID0gJ2NoaWNrZW5wYWludC1jb2xvci1zd2F0Y2hlcy1idXR0b25zJztcbiAgICAgICAgXG4gICAgICAgIC8vIERvbid0IG9mZmVyIHRvIGxvYWQvc2F2ZSBzd2F0Y2hlcyBpZiB3ZSBkb24ndCBoYXZlIHRoZSBmaWxlIEFQSSBuZWVkZWQgZm9yIHJlYWRpbmcgdGhlbVxuICAgICAgICBpZiAoZmlsZUFQSXNTdXBwb3J0ZWQoKSkge1xuICAgICAgICAgICAgZmlsZUlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBmaWxlSW5wdXQudHlwZSA9IFwiZmlsZVwiO1xuICAgICAgICAgICAgZmlsZUlucHV0Lm11bHRpcGxlID0gZmFsc2U7XG4gICAgICAgICAgICBmaWxlSW5wdXQuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgYnV0dG9uUGFuZWwuYXBwZW5kQ2hpbGQoYnRuU2V0dGluZ3NDb250YWluZXIpO1xuICAgICAgICAgICAgYnV0dG9uUGFuZWwuYXBwZW5kQ2hpbGQoZmlsZUlucHV0KTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgYnV0dG9uUGFuZWwuYXBwZW5kQ2hpbGQoYnRuQWRkKTtcbiAgICB9XG4gICAgXG4gICAgaW5pdFN3YXRjaFBhbmVsKCk7XG4gICAgdGhpcy5nZXRCb2R5RWxlbWVudCgpLmFwcGVuZENoaWxkKHN3YXRjaFBhbmVsKTtcblxuICAgIGluaXRCdXR0b25zUGFuZWwoKTtcbiAgICB0aGlzLmdldEJvZHlFbGVtZW50KCkuYXBwZW5kQ2hpbGQoYnV0dG9uUGFuZWwpO1xufVxuXG5DUFN3YXRjaGVzUGFsZXR0ZS5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKENQUGFsZXR0ZS5wcm90b3R5cGUpO1xuQ1BTd2F0Y2hlc1BhbGV0dGUucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gQ1BTd2F0Y2hlc1BhbGV0dGU7IiwiLypcbiAgICBDaGlja2VuUGFpbnRcbiAgICBcbiAgICBDaGlja2VuUGFpbnQgaXMgYSB0cmFuc2xhdGlvbiBvZiBDaGliaVBhaW50IGZyb20gSmF2YSB0byBKYXZhU2NyaXB0XG4gICAgYnkgTmljaG9sYXMgU2hlcmxvY2sgLyBDaGlja2VuIFNtb290aGllLlxuICAgIFxuICAgIENoaWJpUGFpbnQgaXMgQ29weXJpZ2h0IChjKSAyMDA2LTIwMDggTWFyYyBTY2hlZmVyXG5cbiAgICBDaGlja2VuUGFpbnQgaXMgZnJlZSBzb2Z0d2FyZTogeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yIG1vZGlmeVxuICAgIGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgYXMgcHVibGlzaGVkIGJ5XG4gICAgdGhlIEZyZWUgU29mdHdhcmUgRm91bmRhdGlvbiwgZWl0aGVyIHZlcnNpb24gMyBvZiB0aGUgTGljZW5zZSwgb3JcbiAgICAoYXQgeW91ciBvcHRpb24pIGFueSBsYXRlciB2ZXJzaW9uLlxuXG4gICAgQ2hpY2tlblBhaW50IGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsXG4gICAgYnV0IFdJVEhPVVQgQU5ZIFdBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2ZcbiAgICBNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuICBTZWUgdGhlXG4gICAgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy5cblxuICAgIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXG4gICAgYWxvbmcgd2l0aCBDaGlja2VuUGFpbnQuIElmIG5vdCwgc2VlIDxodHRwOi8vd3d3LmdudS5vcmcvbGljZW5zZXMvPi5cbiovXG5cbmltcG9ydCBDUFdhY29tVGFibGV0IGZyb20gXCIuLi91dGlsL0NQV2Fjb21UYWJsZXRcIjtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gQ1BUYWJsZXREaWFsb2cocGFyZW50KSB7XG4gICAgdmFyXG4gICAgICAgIGRpYWxvZyA9IFxuICAgICAgICAgICAgJChgPGRpdiBjbGFzcz1cIm1vZGFsIGZhZGVcIiB0YWJpbmRleD1cIi0xXCIgcm9sZT1cImRpYWxvZ1wiPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtb2RhbC1kaWFsb2dcIj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm1vZGFsLWNvbnRlbnRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtb2RhbC1oZWFkZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImNsb3NlXCIgZGF0YS1kaXNtaXNzPVwibW9kYWxcIiBhcmlhLWxhYmVsPVwiQ2xvc2VcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gYXJpYS1oaWRkZW49XCJ0cnVlXCI+JnRpbWVzOzwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDQgY2xhc3M9XCJtb2RhbC10aXRsZVwiPkRyYXdpbmcgdGFibGV0IHN1cHBvcnQ8L2g0PlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibW9kYWwtYm9keVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzPVwiY2hpY2tlbnBhaW50LXRhYmxldC10aGVyZS1hcmUtdHdvLW9wdGlvbnNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVGhlcmUgYXJlIHR3byB3YXlzIHlvdSBjb3VsZCB1c2UgeW91ciB0YWJsZXQncyBwZW4gcHJlc3N1cmUgc3VwcG9ydCB3aXRoIENoaWNrZW5QYWludC5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNoaWNrZW5wYWludC10YWJsZXQtc3VwcG9ydCBjaGlja2VucGFpbnQtd2Fjb20tc3VwcG9ydFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBQbHVnaW4gZm9yIFdhY29tIHRhYmxldHNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9oND5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNoaWNrZW5wYWludC1zdXBwb3J0ZWQtYnJvd3NlcnNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjaGlja2VucGFpbnQtc3VwcG9ydGVkLWJyb3dzZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImZhIGZhLWludGVybmV0LWV4cGxvcmVyXCI+PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIElFIDEwLCAxMVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY2hpY2tlbnBhaW50LXN1cHBvcnRlZC1icm93c2VyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJmYSBmYS1maXJlZm94XCI+PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEZpcmVmb3ggKDMyLWJpdCBvbmx5KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY2hpY2tlbnBhaW50LXN1cHBvcnRlZC1icm93c2VyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJmYSBmYS1zYWZhcmlcIj48L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU2FmYXJpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY2hpY2tlbnBhaW50LXN1cHBvcnRlZC1icm93c2VyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJmYSBmYS1vcGVyYVwiPjwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBPcGVyYVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzcz1cImNoaWNrZW5wYWludC1ub3QtaW5zdGFsbGVkXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUaGUgcGx1Z2luIGZvciBXYWNvbSB0YWJsZXRzIGRvZXNuJ3Qgc2VlbSB0byBiZSBpbnN0YWxsZWQgaW4geW91ciBicm93c2VyIHlldC5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzcz1cImNoaWNrZW5wYWludC1ub3QtaW5zdGFsbGVkXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBQbGVhc2UgbWFrZSBzdXJlIHRoYXQgeW91J3ZlIGluc3RhbGxlZCB0aGUgbGF0ZXN0IGRyaXZlcnMgZm9yIHlvdXIgdGFibGV0IGZyb20gdGhlIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj1cImh0dHA6Ly93d3cud2Fjb20uY29tL2VuLXVzL3N1cHBvcnQvcHJvZHVjdC1zdXBwb3J0L2RyaXZlcnNcIiB0YXJnZXQ9XCJfYmxhbmtcIj5XYWNvbSBkcml2ZXJzIHBhZ2U8L2E+LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhlbiByZXN0YXJ0IHlvdXIgYnJvd3Nlci5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzcz1cImNoaWNrZW5wYWludC1ub3Qtc3VwcG9ydGVkXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBZb3VyIGJyb3dzZXIgZG9lc24ndCBzdXBwb3J0IHRoZSBXYWNvbSB0YWJsZXQgcGx1Z2luLCBwbGVhc2UgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnkgb25lIG9mIHRoZSBicm93c2VycyBsaXN0ZWQgYWJvdmUgaW5zdGVhZC5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzcz1cImNoaWNrZW5wYWludC1zdXBwb3J0ZWQgYWxlcnQgYWxlcnQtc3VjY2Vzc1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVGhlIFdhY29tIHRhYmxldCBwbHVnaW4gaXMgaW5zdGFsbGVkIGFuZCB3b3JraW5nLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNoaWNrZW5wYWludC10YWJsZXQtc3VwcG9ydCBjaGlja2VucGFpbnQtcG9pbnRlcmV2ZW50cy1zdXBwb3J0XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoND5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEJ1aWx0LWluIHN1cHBvcnQgZm9yIG1vc3QgdGFibGV0cyA8c21hbGw+aW5jbHVkaW5nIFdhY29tIHRhYmxldHM8L3NtYWxsPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2g0PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY2hpY2tlbnBhaW50LXN1cHBvcnRlZC1icm93c2Vyc1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNoaWNrZW5wYWludC1zdXBwb3J0ZWQtYnJvd3NlclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZmEgZmEtaW50ZXJuZXQtZXhwbG9yZXJcIj48L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSUUgKFdpbmRvd3MgOClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjaGlja2VucGFpbnQtc3VwcG9ydGVkLWJyb3dzZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImZhIGZhLWVkZ2VcIj48L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRWRnZSAoV2luZG93cyAxMClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNoaWNrZW5wYWludC1zdXBwb3J0ZWQtYnJvd3NlclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZmEgZmEtZmlyZWZveFwiPjwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBGaXJlZm94ICg8YSBocmVmPVwiaHR0cHM6Ly9naXRodWIuY29tL3RoZW5pY2tkdWRlL2NoaWNrZW5wYWludC9ibG9iL21hc3Rlci9oZWxwL0ZpcmVmb3ggcHJlc3N1cmUgc3VwcG9ydC5tZFwiIHRhcmdldD1cIl9ibGFua1wiPmV4cGVyaW1lbnRhbCA8aSBjbGFzcz1cImdseXBoaWNvbiBnbHlwaGljb24tbmV3LXdpbmRvd1wiPjwvaT48L2E+KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY2hpY2tlbnBhaW50LXN1cHBvcnRlZC1icm93c2VyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJmYSBmYS1jaHJvbWVcIj48L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ2hyb21lIChjb21pbmcgc29vbilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3M9XCJjaGlja2VucGFpbnQtbm90LXN1cHBvcnRlZFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgWW91ciBicm93c2VyIGRvZXNuJ3QgaGF2ZSBidWlsdC1pbiBzdXBwb3J0IGZvciBkcmF3aW5nIHRhYmxldHMsIHBsZWFzZSB0cnlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uZSBvZiB0aGUgb3RoZXIgYnJvd3NlcnMgbGlzdGVkIGFib3ZlLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzPVwiY2hpY2tlbnBhaW50LXN1cHBvcnRlZCBhbGVydCBhbGVydC1zdWNjZXNzXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBZb3VyIGJyb3dzZXIgaGFzIGJ1aWx0LWluIHN1cHBvcnQgZm9yIGRyYXdpbmcgdGFibGV0cyFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgYCk7XG4gICAgXG4gICAgdmFyXG4gICAgICAgIHdhY29tU3VwcG9ydEVsZW0gPSAkKFwiLmNoaWNrZW5wYWludC13YWNvbS1zdXBwb3J0XCIsIGRpYWxvZyksXG4gICAgICAgIHBlU3VwcG9ydEVsZW0gPSAkKFwiLmNoaWNrZW5wYWludC1wb2ludGVyZXZlbnRzLXN1cHBvcnRcIiwgZGlhbG9nKSxcbiAgICAgICAgYm90aE9wdGlvbnNFbGVtID0gJChcIi5jaGlja2VucGFpbnQtdGFibGV0LXRoZXJlLWFyZS10d28tb3B0aW9uc1wiLCBkaWFsb2cpLFxuICAgICAgICBcbiAgICAgICAgd2Fjb21QcmVzZW50ID0gQ1BXYWNvbVRhYmxldC5nZXRSZWYoKS5pc1RhYmxldFByZXNlbnQoKSxcbiAgICAgICAgcGVTdXBwb3J0ZWQgPSAhIXdpbmRvdy5oYXNOYXRpdmVQb2ludGVyRXZlbnRzO1xuICAgIFxuICAgIHdhY29tU3VwcG9ydEVsZW0udG9nZ2xlQ2xhc3MoXCJzdXBwb3J0ZWRcIiwgd2Fjb21QcmVzZW50KTtcbiAgICBcbiAgICBpZiAod2Fjb21QcmVzZW50KSB7XG4gICAgICAgIC8vIERvbid0IGJvdGhlciBkaXNwbGF5aW5nIGluZm8gYWJvdXQgUG9pbnRlciBFdmVudHMgaWYgd2UgaGF2ZSB0aGUgV2Fjb20gcGx1Z2luIGluc3RhbGxlZFxuICAgICAgICBwZVN1cHBvcnRFbGVtLmhpZGUoKTtcbiAgICAgICAgYm90aE9wdGlvbnNFbGVtLmhpZGUoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICAvLyBDaHJvbWUgaGFzIGRyb3BwZWQgTlBBUEkgc3VwcG9ydCwgc28gdGhlIFdhY29tIHBsdWdpbiBjYW5ub3QgYmUgaW5zdGFsbGVkXG4gICAgICAgIGlmICgvQ2hyb21lL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSAmJiAhL09QUi8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KVxuICAgICAgICAgICAgICAgIHx8IC9pUGFkLy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpIHx8IC9pUGhvbmUvLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkpIHtcbiAgICAgICAgICAgIHdhY29tU3VwcG9ydEVsZW0uYWRkQ2xhc3MoXCJub3Qtc3VwcG9ydGVkXCIpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBEb24ndCBib3RoZXIgc2hvd2luZyB0aGUgV2Fjb20gcGx1Z2luIGRldGFpbHMgaWYgdGhpcyBicm93c2VyIHN1cHBvcnRzIHBvaW50ZXIgZXZlbnRzXG4gICAgICAgIGlmIChwZVN1cHBvcnRlZCkge1xuICAgICAgICAgICAgd2Fjb21TdXBwb3J0RWxlbS5oaWRlKCk7XG4gICAgICAgICAgICBib3RoT3B0aW9uc0VsZW0uaGlkZSgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIHBlU3VwcG9ydEVsZW0udG9nZ2xlQ2xhc3MoXCJzdXBwb3J0ZWRcIiwgcGVTdXBwb3J0ZWQpO1xuICAgIHBlU3VwcG9ydEVsZW0udG9nZ2xlQ2xhc3MoXCJub3Qtc3VwcG9ydGVkXCIsICFwZVN1cHBvcnRlZCk7XG5cbiAgICBkaWFsb2cubW9kYWwoe1xuICAgICAgICBzaG93OiBmYWxzZVxuICAgIH0pO1xuICAgIFxuICAgIC8vIEZpeCB0aGUgYmFja2Ryb3AgbG9jYXRpb24gaW4gdGhlIERPTSBieSByZXBhcmVudGluZyBpdCB0byB0aGUgY2hpY2tlbnBhaW50IGNvbnRhaW5lclxuICAgIGRpYWxvZy5kYXRhKFwiYnMubW9kYWxcIikuJGJvZHkgPSAkKHBhcmVudCk7XG4gICAgXG4gICAgcGFyZW50LmFwcGVuZENoaWxkKGRpYWxvZ1swXSk7XG5cbiAgICB0aGlzLnNob3cgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgZGlhbG9nLm1vZGFsKFwic2hvd1wiKTtcbiAgICB9O1xufSIsIi8qXG4gICAgQ2hpY2tlblBhaW50XG4gICAgXG4gICAgQ2hpY2tlblBhaW50IGlzIGEgdHJhbnNsYXRpb24gb2YgQ2hpYmlQYWludCBmcm9tIEphdmEgdG8gSmF2YVNjcmlwdFxuICAgIGJ5IE5pY2hvbGFzIFNoZXJsb2NrIC8gQ2hpY2tlbiBTbW9vdGhpZS5cbiAgICBcbiAgICBDaGliaVBhaW50IGlzIENvcHlyaWdodCAoYykgMjAwNi0yMDA4IE1hcmMgU2NoZWZlclxuXG4gICAgQ2hpY2tlblBhaW50IGlzIGZyZWUgc29mdHdhcmU6IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vciBtb2RpZnlcbiAgICBpdCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGFzIHB1Ymxpc2hlZCBieVxuICAgIHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb24sIGVpdGhlciB2ZXJzaW9uIDMgb2YgdGhlIExpY2Vuc2UsIG9yXG4gICAgKGF0IHlvdXIgb3B0aW9uKSBhbnkgbGF0ZXIgdmVyc2lvbi5cblxuICAgIENoaWNrZW5QYWludCBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLFxuICAgIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mXG4gICAgTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiAgU2VlIHRoZVxuICAgIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuXG5cbiAgICBZb3Ugc2hvdWxkIGhhdmUgcmVjZWl2ZWQgYSBjb3B5IG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZVxuICAgIGFsb25nIHdpdGggQ2hpY2tlblBhaW50LiBJZiBub3QsIHNlZSA8aHR0cDovL3d3dy5nbnUub3JnL2xpY2Vuc2VzLz4uXG4qL1xuXG5pbXBvcnQgQ1BHcmV5Qm1wIGZyb20gJy4uL2VuZ2luZS9DUEdyZXlCbXAnO1xuaW1wb3J0IENQTG9va1VwVGFibGUgZnJvbSAnLi4vZW5naW5lL0NQTG9va1VwVGFibGUnO1xuXG5pbXBvcnQgQ1BQYWxldHRlIGZyb20gJy4vQ1BQYWxldHRlJztcbmltcG9ydCBDUFNsaWRlciBmcm9tICcuL0NQU2xpZGVyJztcblxuZnVuY3Rpb24gd3JhcENoZWNrYm94V2l0aExhYmVsKGNoZWNrYm94LCB0aXRsZSkge1xuICAgIHZhclxuICAgICAgICBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLFxuICAgICAgICBsYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsYWJlbFwiKTtcblxuICAgIGRpdi5jbGFzc05hbWUgPSBcImNoZWNrYm94XCI7XG4gICAgXG4gICAgbGFiZWwuYXBwZW5kQ2hpbGQoY2hlY2tib3gpO1xuICAgIGxhYmVsLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHRpdGxlKSk7XG4gICAgXG4gICAgZGl2LmFwcGVuZENoaWxkKGxhYmVsKTtcbiAgICBcbiAgICByZXR1cm4gZGl2O1xufVxuXG5mdW5jdGlvbiBsb2FkVGV4dHVyZXModGV4dHVyZUZpbGVuYW1lLCB3aWR0aCwgaGVpZ2h0LCB0ZXh0dXJlQ291bnQsIHRoZW4pIHtcbiAgICB2YXJcbiAgICAgICAgaW1nID0gbmV3IEltYWdlKCksXG4gICAgICAgIHRleHR1cmVzID0gW107XG4gICAgXG4gICAgaW1nLm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXJcbiAgICAgICAgICAgIGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIiksXG4gICAgICAgICAgICBjYW52YXNDb250ZXh0ID0gY2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcbiAgICAgICAgXG4gICAgICAgIGNhbnZhcy53aWR0aCA9IGltZy53aWR0aDtcbiAgICAgICAgY2FudmFzLmhlaWdodCA9IGltZy5oZWlnaHQ7XG4gICAgICAgIFxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRleHR1cmVDb3VudDsgaSsrKSB7XG4gICAgICAgICAgICBjYW52YXNDb250ZXh0LmRyYXdJbWFnZShpbWcsIDAsIGkgKiBoZWlnaHQsIHdpZHRoLCBoZWlnaHQsIDAsIDAsIHdpZHRoLCBoZWlnaHQpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgICAgICBpbWFnZURhdGEgPSBjYW52YXNDb250ZXh0LmdldEltYWdlRGF0YSgwLCAwLCB3aWR0aCwgaGVpZ2h0KSxcbiAgICAgICAgICAgICAgICAgICAgdGV4dHVyZSA9IG5ldyBDUEdyZXlCbXAod2lkdGgsIGhlaWdodCk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gVGFrZSBqdXN0IHRoZSByZWQgY2hhbm5lbCBmcm9tIHRoZSBpbWFnZSB0byBmb3JtIHRoZSBuZXcgZ3JheXNjYWxlIHRleHR1cmVcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHdpZHRoICogaGVpZ2h0OyBqKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdGV4dHVyZS5kYXRhW2pdID0gaW1hZ2VEYXRhLmRhdGFbaiAqIDRdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB0ZXh0dXJlcy5wdXNoKHRleHR1cmUpO1xuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIC8vIFF1aWV0bHkgaWdub3JlIGVycm9ycyB0aGF0IG9jY3VyIHdoaWxlIGxvYWRpbmcgdGhlIGltYWdlIChlLmcuIGNyb3NzLW9yaWdpbiBzZWN1cml0eSBmYWlsdXJlcylcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgdGhlbih0ZXh0dXJlcyk7XG4gICAgfTtcbiAgICBcbiAgICBpbWcuc3JjID0gdGV4dHVyZUZpbGVuYW1lO1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBDUFRleHR1cmVQYWxldHRlKGNvbnRyb2xsZXIpIHtcbiAgICBDUFBhbGV0dGUuY2FsbCh0aGlzLCBjb250cm9sbGVyLCBcInRleHR1cmVzXCIsIFwiVGV4dHVyZXNcIik7XG4gICAgXG4gICAgdmFyXG4gICAgICAgIFRFWFRVUkVfUFJFVklFV19TSVpFID0gNjQsXG4gICAgICAgIFRFWFRVUkVfU1dBVENIX0JVVFRPTl9TSVpFID0gMzIsXG4gICAgXG4gICAgICAgIHRleHR1cmVzID0gW10sIC8vIEFycmF5IG9mIENQR3JleUJtcFxuICAgICAgICBzZWxlY3RlZFRleHR1cmUsIHByb2Nlc3NlZFRleHR1cmUsIC8vQm90aCBDUEdyZXlCbXBcblxuICAgICAgICBtaXJyb3IgPSBmYWxzZSwgaW52ZXJzZSA9IGZhbHNlLFxuICAgICAgICBcbiAgICAgICAgYnJpZ2h0bmVzcyA9IDAuMCwgY29udHJhc3QgPSAwLjAsXG4gICAgICAgIG9wdGlvbnNQYW5lbCxcbiAgICAgICAgdGV4dHVyZXNQYW5lbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksXG4gICAgICAgIFxuICAgICAgICBib2R5ID0gdGhpcy5nZXRCb2R5RWxlbWVudCgpO1xuXG4gICAgLyoqXG4gICAgICogQWRkIGFuIGFycmF5IG9mIHRleHR1cmVzIHRvIHRoZSBnbG9iYWwgdGV4dHVyZSBsaXN0LCBhbmQgYWRkIHN3YXRjaGVzIGZvciB0aGVtIHRvIHRoZSBVSS5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBhZGRUZXh0dXJlcyhuZXdUZXh0dXJlcykge1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG5ld1RleHR1cmVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICB0ZXh0dXJlID0gbmV3VGV4dHVyZXNbaV07XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRleHR1cmVzLnB1c2godGV4dHVyZSk7XG4gICAgXG4gICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICBidXR0b24gPSBuZXcgQ1BUZXh0dXJlU3dhdGNoKHRleHR1cmUsIFRFWFRVUkVfU1dBVENIX0JVVFRPTl9TSVpFLCBURVhUVVJFX1NXQVRDSF9CVVRUT05fU0laRSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGJ1dHRvbi5vbihcImNsaWNrXCIsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHNlbGVjdGVkVGV4dHVyZSA9IHRoaXMudGV4dHVyZTtcbiAgICAgICAgICAgICAgICB1cGRhdGVTZWxlY3RlZFRleHR1cmUoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB0ZXh0dXJlc1BhbmVsLmFwcGVuZENoaWxkKGJ1dHRvbi5nZXRFbGVtZW50KCkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8qKlxuICAgICAqIEdlbmVyYXRlIGFuZCByZXR1cm4gYW4gYXJyYXkgb2YgcHJvY2VkdXJhbGx5LWdlbmVyYXRlZCB0ZXh0dXJlc1xuICAgICAqIFxuICAgICAqIEByZXR1cm5zIENQR3JleUJtcFtdXG4gICAgICovXG4gICAgZnVuY3Rpb24gbWFrZVByb2NlZHVyYWxUZXh0dXJlcygpIHtcbiAgICAgICAgdmFyXG4gICAgICAgICAgICByZXN1bHQgPSBbbnVsbF07XG4gICAgICAgIFxuICAgICAgICB2YXJcbiAgICAgICAgICAgIHRleHR1cmUgPSBuZXcgQ1BHcmV5Qm1wKDIsIDIpO1xuICAgICAgICB0ZXh0dXJlLmRhdGFbMF0gPSAweEZGO1xuICAgICAgICB0ZXh0dXJlLmRhdGFbM10gPSAweEZGO1xuICAgICAgICByZXN1bHQucHVzaCh0ZXh0dXJlKTtcblxuICAgICAgICByZXN1bHQucHVzaChtYWtlRG90VGV4dHVyZSgyKSk7XG4gICAgICAgIHJlc3VsdC5wdXNoKG1ha2VEb3RUZXh0dXJlKDMpKTtcbiAgICAgICAgcmVzdWx0LnB1c2gobWFrZURvdFRleHR1cmUoNCkpO1xuICAgICAgICByZXN1bHQucHVzaChtYWtlRG90VGV4dHVyZSg2KSk7XG4gICAgICAgIHJlc3VsdC5wdXNoKG1ha2VEb3RUZXh0dXJlKDgpKTtcblxuICAgICAgICByZXN1bHQucHVzaChtYWtlVmVydExpbmVzVGV4dHVyZSgxLCAyKSk7XG4gICAgICAgIHJlc3VsdC5wdXNoKG1ha2VWZXJ0TGluZXNUZXh0dXJlKDIsIDQpKTtcblxuICAgICAgICByZXN1bHQucHVzaChtYWtlSG9yaXpMaW5lc1RleHR1cmUoMSwgMikpO1xuICAgICAgICByZXN1bHQucHVzaChtYWtlSG9yaXpMaW5lc1RleHR1cmUoMiwgNCkpO1xuXG4gICAgICAgIHJlc3VsdC5wdXNoKG1ha2VDaGVja2VyQm9hcmRUZXh0dXJlKDIpKTtcbiAgICAgICAgcmVzdWx0LnB1c2gobWFrZUNoZWNrZXJCb2FyZFRleHR1cmUoNCkpO1xuICAgICAgICByZXN1bHQucHVzaChtYWtlQ2hlY2tlckJvYXJkVGV4dHVyZSg4KSk7XG4gICAgICAgIHJlc3VsdC5wdXNoKG1ha2VDaGVja2VyQm9hcmRUZXh0dXJlKDE2KSk7XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSBzaXplIGludFxuICAgICAqIFxuICAgICAqIEByZXR1cm5zIENQR3JleUJtcFxuICAgICAqL1xuICAgIGZ1bmN0aW9uIG1ha2VEb3RUZXh0dXJlKHNpemUpIHtcbiAgICAgICAgdmFyXG4gICAgICAgICAgICB0ZXh0dXJlID0gbmV3IENQR3JleUJtcChzaXplLCBzaXplKTtcbiAgICAgICAgXG4gICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgc2l6ZSAqIHNpemU7IGkrKykge1xuICAgICAgICAgICAgdGV4dHVyZS5kYXRhW2ldID0gMHhGRjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGV4dHVyZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBNYWtlIGEgY2hlY2tlcmJvYXJkIHRleHR1cmUgb2YgdGhlIGdpdmVuIGRpbWVuc2lvbnMuXG4gICAgICogXG4gICAgICogQHBhcmFtIHNpemUgaW50XG4gICAgICogXG4gICAgICogQHJldHVybnMgQ1BHcmV5Qm1wXG4gICAgICovXG4gICAgZnVuY3Rpb24gbWFrZUNoZWNrZXJCb2FyZFRleHR1cmUoc2l6ZSkge1xuICAgICAgICB2YXJcbiAgICAgICAgICAgIHRleHR1cmVTaXplID0gMiAqIHNpemUsXG4gICAgICAgICAgICB0ZXh0dXJlID0gbmV3IENQR3JleUJtcCh0ZXh0dXJlU2l6ZSwgdGV4dHVyZVNpemUpO1xuICAgICAgICBcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0ZXh0dXJlU2l6ZTsgaSsrKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHRleHR1cmVTaXplOyBqKyspIHtcbiAgICAgICAgICAgICAgICB0ZXh0dXJlLmRhdGFbaSArIGogKiB0ZXh0dXJlU2l6ZV0gPSAoKH5+KGkgLyBzaXplKSArIH5+KGogLyBzaXplKSkgJSAyID09IDApID8gMCA6IDB4RkY7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHJldHVybiB0ZXh0dXJlO1xuICAgIH1cblxuICAgICAvKipcbiAgICAgICogTWFrZSBhIHRleHR1cmUgY29uc2lzdGluZyBvZiBhIHNlcmllcyBvZiBldmVubHktc3BhY2VkIHZlcnRpY2FsIGxpbmVzXG4gICAgICAqIFxuICAgICAgKiBAcGFyYW0gbGluZVNpemUgaW50XG4gICAgICAqIEBwYXJhbSBzaXplIGludFxuICAgICAgKiBcbiAgICAgICogQHJldHVybnMgQ1BHcmV5Qm1wXG4gICAgICAqL1xuICAgICBmdW5jdGlvbiBtYWtlVmVydExpbmVzVGV4dHVyZShsaW5lU2l6ZSwgc2l6ZSkge1xuICAgICAgICB2YXJcbiAgICAgICAgICAgIHRleHR1cmUgPSBuZXcgQ1BHcmV5Qm1wKHNpemUsIHNpemUpO1xuICAgICAgICBcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzaXplICogc2l6ZTsgaSsrKSB7XG4gICAgICAgICAgICBpZiAofn4oaSAlIHNpemUpID49IGxpbmVTaXplKSB7XG4gICAgICAgICAgICAgICAgdGV4dHVyZS5kYXRhW2ldID0gMHhGRjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHRleHR1cmU7XG4gICAgfVxuXG4gICAgIC8qKlxuICAgICAgKiBNYWtlIGEgdGV4dHVyZSBjb25zaXN0aW5nIG9mIGEgc2VyaWVzIG9mIGV2ZW5seS1zcGFjZWQgaG9yaXpvbnRhbCBsaW5lc1xuICAgICAgKlxuICAgICAgKiBAcGFyYW0gbGluZVNpemUgaW50XG4gICAgICAqIEBwYXJhbSBzaXplIGludFxuICAgICAgKiBcbiAgICAgICogQHJldHVybnMgQ1BHcmV5Qm1wXG4gICAgICAqL1xuICAgIGZ1bmN0aW9uIG1ha2VIb3JpekxpbmVzVGV4dHVyZShsaW5lU2l6ZSwgc2l6ZSkge1xuICAgICAgICB2YXJcbiAgICAgICAgICAgIHRleHR1cmUgPSBuZXcgQ1BHcmV5Qm1wKHNpemUsIHNpemUpO1xuICAgICAgICBcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzaXplICogc2l6ZTsgaSsrKSB7XG4gICAgICAgICAgICBpZiAoaSAvIHNpemUgPj0gbGluZVNpemUpIHtcbiAgICAgICAgICAgICAgICB0ZXh0dXJlLmRhdGFbaV0gPSAweEZGO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gdGV4dHVyZTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiB1cGRhdGVTZWxlY3RlZFRleHR1cmUoKSB7XG4gICAgICAgIGlmIChzZWxlY3RlZFRleHR1cmUgIT0gbnVsbCkge1xuICAgICAgICAgICAgcHJvY2Vzc2VkVGV4dHVyZSA9IHNlbGVjdGVkVGV4dHVyZS5jbG9uZSgpO1xuXG4gICAgICAgICAgICBpZiAobWlycm9yKSB7XG4gICAgICAgICAgICAgICAgcHJvY2Vzc2VkVGV4dHVyZS5taXJyb3JIb3Jpem9udGFsbHkoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgbHV0ID0gbmV3IENQTG9va1VwVGFibGUoKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgbHV0LmxvYWRCcmlnaHRuZXNzQ29udHJhc3QoYnJpZ2h0bmVzcywgY29udHJhc3QpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoaW52ZXJzZSkge1xuICAgICAgICAgICAgICAgIGx1dC5pbnZlcnQoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcHJvY2Vzc2VkVGV4dHVyZS5hcHBseUxVVChsdXQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcHJvY2Vzc2VkVGV4dHVyZSA9IG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICBjb250cm9sbGVyLmdldEFydHdvcmsoKS5zZXRCcnVzaFRleHR1cmUocHJvY2Vzc2VkVGV4dHVyZSk7XG4gICAgICAgIFxuICAgICAgICBpZiAob3B0aW9uc1BhbmVsICE9IG51bGwpIHtcbiAgICAgICAgICAgIG9wdGlvbnNQYW5lbC51cGRhdGVUZXh0dXJlKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgZnVuY3Rpb24gQ1BUZXh0dXJlT3B0aW9uc1BhbmVsKCkge1xuICAgICAgICB2YXJcbiAgICAgICAgICAgIHBhbmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSxcbiAgICAgICAgXG4gICAgICAgICAgICBjYkludmVyc2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIiksXG4gICAgICAgICAgICBjYk1pcnJvciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKSxcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgc2xCcmlnaHRuZXNzID0gbmV3IENQU2xpZGVyKDAsIDIwMCwgdHJ1ZSksXG4gICAgICAgICAgICBzbENvbnRyYXN0ID0gbmV3IENQU2xpZGVyKDAsIDIwMCwgdHJ1ZSksXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHNhbXBsZVN3YXRjaCA9IG5ldyBDUFRleHR1cmVTd2F0Y2gobnVsbCwgVEVYVFVSRV9QUkVWSUVXX1NJWkUsIFRFWFRVUkVfUFJFVklFV19TSVpFKSxcbiAgICAgICAgICAgIGJ0bkN1c3RvbWl6ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIiksXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRleHR1cmVDb250cm9sc1BhbmVsO1xuICAgICAgICBcbiAgICAgICAgZnVuY3Rpb24gdXBkYXRlUG9wb3ZlckNvbnRyb2xzKCkge1xuICAgICAgICAgICAgY2JJbnZlcnNlLmNoZWNrZWQgPSBpbnZlcnNlO1xuICAgICAgICAgICAgY2JNaXJyb3IuY2hlY2tlZCA9IG1pcnJvcjtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgc2xCcmlnaHRuZXNzLnNldFZhbHVlKGJyaWdodG5lc3MgKiAxMDAgKyAxMDApO1xuICAgICAgICAgICAgc2xDb250cmFzdC5zZXRWYWx1ZShjb250cmFzdCAqIDEwMCArIDEwMCk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGZ1bmN0aW9uIGJ1aWxkVGV4dHVyZUNvbnRyb2xzUGFuZWwoKSB7XG4gICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICBwYW5lbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG5cbiAgICAgICAgICAgIGNiSW52ZXJzZS50eXBlID0gXCJjaGVja2JveFwiO1xuICAgICAgICAgICAgY2JJbnZlcnNlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAgICAgaW52ZXJzZSA9IHRoaXMuY2hlY2tlZDtcbiAgICAgICAgICAgICAgICB1cGRhdGVTZWxlY3RlZFRleHR1cmUoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBwYW5lbC5hcHBlbmRDaGlsZCh3cmFwQ2hlY2tib3hXaXRoTGFiZWwoY2JJbnZlcnNlLCBcIkludmVyc2VcIikpO1xuXG4gICAgICAgICAgICBjYk1pcnJvci50eXBlID0gXCJjaGVja2JveFwiO1xuICAgICAgICAgICAgY2JNaXJyb3IuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgICAgICBtaXJyb3IgPSB0aGlzLmNoZWNrZWQ7XG4gICAgICAgICAgICAgICAgdXBkYXRlU2VsZWN0ZWRUZXh0dXJlKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgcGFuZWwuYXBwZW5kQ2hpbGQod3JhcENoZWNrYm94V2l0aExhYmVsKGNiTWlycm9yLCBcIk1pcnJvclwiKSk7XG5cbiAgICAgICAgICAgIHNsQnJpZ2h0bmVzcy50aXRsZSA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiQnJpZ2h0bmVzczogXCIgKyAodmFsdWUgLSAxMDApICsgXCIlXCI7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBzbEJyaWdodG5lc3Mub24oXCJ2YWx1ZUNoYW5nZVwiLCBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICAgICAgICAgIGJyaWdodG5lc3MgPSAodmFsdWUgLSAxMDApIC8gMTAwLjA7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgdXBkYXRlU2VsZWN0ZWRUZXh0dXJlKCk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgcGFuZWwuYXBwZW5kQ2hpbGQoc2xCcmlnaHRuZXNzLmdldEVsZW1lbnQoKSk7XG5cbiAgICAgICAgICAgIHNsQ29udHJhc3QudGl0bGUgPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBcIkNvbnRyYXN0OiBcIiArICh2YWx1ZSAtIDEwMCkgKyBcIiVcIjtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHNsQ29udHJhc3Qub24oXCJ2YWx1ZUNoYW5nZVwiLCBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICAgICAgICAgIGNvbnRyYXN0ID0gKHZhbHVlIC0gMTAwKSAvIDEwMDtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB1cGRhdGVTZWxlY3RlZFRleHR1cmUoKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBwYW5lbC5hcHBlbmRDaGlsZChzbENvbnRyYXN0LmdldEVsZW1lbnQoKSk7XG5cbiAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgIG9rYXlCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpLFxuICAgICAgICAgICAgICAgIHJlc2V0QnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgb2theUJ1dHRvbi5pbm5lckhUTUwgPSBcIk9rXCI7XG4gICAgICAgICAgICBva2F5QnV0dG9uLmNsYXNzTmFtZSA9IFwiYnRuIGJ0bi1wcmltYXJ5IGJ0bi1zbVwiO1xuICAgICAgICAgICAgb2theUJ1dHRvbi50eXBlID0gXCJidXR0b25cIjtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgb2theUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgICAgICQoYnRuQ3VzdG9taXplKS5wb3BvdmVyKCdoaWRlJyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgcGFuZWwuYXBwZW5kQ2hpbGQob2theUJ1dHRvbik7XG4gICAgICAgICAgICBwYW5lbC5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShcIiBcIikpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICByZXNldEJ1dHRvbi5pbm5lckhUTUwgPSBcIlJlc2V0XCI7XG4gICAgICAgICAgICByZXNldEJ1dHRvbi5jbGFzc05hbWUgPSBcImJ0biBidG4tZGVmYXVsdCBidG4tc21cIjtcbiAgICAgICAgICAgIHJlc2V0QnV0dG9uLnR5cGUgPSBcImJ1dHRvblwiO1xuXG4gICAgICAgICAgICByZXNldEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgICAgIGJyaWdodG5lc3MgPSAwO1xuICAgICAgICAgICAgICAgIGNvbnRyYXN0ID0gMDtcbiAgICAgICAgICAgICAgICBtaXJyb3IgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBpbnZlcnNlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgdXBkYXRlUG9wb3ZlckNvbnRyb2xzKCk7XG4gICAgICAgICAgICAgICAgdXBkYXRlU2VsZWN0ZWRUZXh0dXJlKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgcGFuZWwuYXBwZW5kQ2hpbGQocmVzZXRCdXR0b24pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB1cGRhdGVQb3BvdmVyQ29udHJvbHMoKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgcmV0dXJuIHBhbmVsO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBUT0RPIHVzZSBldmVudHMgaW5zdGVhZFxuICAgICAgICB0aGlzLnVwZGF0ZVRleHR1cmUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGJ0bkN1c3RvbWl6ZS5kaXNhYmxlZCA9IChwcm9jZXNzZWRUZXh0dXJlID09IG51bGwpO1xuICAgICAgICAgICAgc2FtcGxlU3dhdGNoLnNldFRleHR1cmUocHJvY2Vzc2VkVGV4dHVyZSk7XG4gICAgICAgIH07XG4gICAgICAgIFxuICAgICAgICB0aGlzLmdldEVsZW1lbnQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiBwYW5lbDtcbiAgICAgICAgfVxuXG4gICAgICAgIHBhbmVsLmNsYXNzTmFtZSA9IFwiY2hpY2tlbnBhaW50LXRleHR1cmUtb3B0aW9uc1wiO1xuICAgICAgICBwYW5lbC5hcHBlbmRDaGlsZChzYW1wbGVTd2F0Y2guZ2V0RWxlbWVudCgpKTtcblxuICAgICAgICBidG5DdXN0b21pemUudHlwZSA9IFwiYnV0dG9uXCI7XG4gICAgICAgIGJ0bkN1c3RvbWl6ZS5jbGFzc05hbWUgPSBcImJ0biBidG4tZGVmYXVsdCBidG4tc21cIjtcbiAgICAgICAgYnRuQ3VzdG9taXplLmlubmVySFRNTCA9IFwiQ3VzdG9taXplXCI7XG5cbiAgICAgICAgdGV4dHVyZUNvbnRyb2xzUGFuZWwgPSBidWlsZFRleHR1cmVDb250cm9sc1BhbmVsKCk7XG4gICAgICAgIFxuICAgICAgICAkKGJ0bkN1c3RvbWl6ZSlcbiAgICAgICAgICAgIC5wb3BvdmVyKHtcbiAgICAgICAgICAgICAgICBodG1sOiB0cnVlLFxuICAgICAgICAgICAgICAgIGNvbnRlbnQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGV4dHVyZUNvbnRyb2xzUGFuZWw7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB0cmlnZ2VyOiBcIm1hbnVhbFwiXG4gICAgICAgICAgICB9KS5cbiAgICAgICAgICAgIG9uKFwiY2xpY2tcIiwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgJCh0aGlzKS5wb3BvdmVyKFwidG9nZ2xlXCIpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICBwYW5lbC5hcHBlbmRDaGlsZChidG5DdXN0b21pemUpO1xuICAgICAgICBcbiAgICAgICAgdGhpcy51cGRhdGVUZXh0dXJlKCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gQ1BUZXh0dXJlU3dhdGNoKHRleHR1cmUsIHdpZHRoLCBoZWlnaHQpIHtcbiAgICAgICAgdmFyXG4gICAgICAgICAgICBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpLFxuICAgICAgICAgICAgY2FudmFzQ29udGV4dCA9IGNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIiksXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoYXQgPSB0aGlzO1xuXG4gICAgICAgIHRoaXMuc2V0VGV4dHVyZSA9IGZ1bmN0aW9uKHRleHR1cmUpIHtcbiAgICAgICAgICAgIHRoaXMudGV4dHVyZSA9IHRleHR1cmU7XG5cbiAgICAgICAgICAgIHRoaXMucGFpbnQoKTtcbiAgICAgICAgfTtcbiAgICAgICAgXG4gICAgICAgIHRoaXMuZ2V0RWxlbWVudCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIGNhbnZhcztcbiAgICAgICAgfTtcbiAgICAgICAgXG4gICAgICAgIHRoaXMucGFpbnQgPSBmdW5jdGlvbigpICB7XG4gICAgICAgICAgICBpZiAodGhpcy50ZXh0dXJlICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICBjYW52YXNDb250ZXh0LmZpbGxTdHlsZSA9IGNhbnZhc0NvbnRleHQuY3JlYXRlUGF0dGVybih0aGlzLnRleHR1cmUudG9DYW52YXMoKSwgXCJyZXBlYXRcIik7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNhbnZhc0NvbnRleHQuZmlsbFN0eWxlID0gJ3doaXRlJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhbnZhc0NvbnRleHQuZmlsbFJlY3QoMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTtcbiAgICAgICAgfTtcbiAgICAgICAgXG4gICAgICAgIGNhbnZhcy5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB0aGF0LmVtaXQoXCJjbGlja1wiKTtcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICBjYW52YXMud2lkdGggPSB3aWR0aDtcbiAgICAgICAgY2FudmFzLmhlaWdodCA9IGhlaWdodDtcbiAgICAgICAgXG4gICAgICAgIHRoaXMuc2V0VGV4dHVyZSh0ZXh0dXJlKTtcbiAgICB9XG4gICAgXG4gICAgQ1BUZXh0dXJlU3dhdGNoLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoRXZlbnRFbWl0dGVyLnByb3RvdHlwZSk7XG4gICAgQ1BUZXh0dXJlU3dhdGNoLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IENQVGV4dHVyZVN3YXRjaDtcbiAgICBcbiAgICBvcHRpb25zUGFuZWwgPSBuZXcgQ1BUZXh0dXJlT3B0aW9uc1BhbmVsKClcbiAgICBcbiAgICBib2R5LmFwcGVuZENoaWxkKG9wdGlvbnNQYW5lbC5nZXRFbGVtZW50KCkpO1xuXG4gICAgdGV4dHVyZXNQYW5lbC5jbGFzc05hbWUgPSAnY2hpY2tlbnBhaW50LXRleHR1cmUtc3dhdGNoZXMnO1xuXG4gICAgYm9keS5hcHBlbmRDaGlsZCh0ZXh0dXJlc1BhbmVsKTtcbiAgICBcbiAgICBhZGRUZXh0dXJlcyhtYWtlUHJvY2VkdXJhbFRleHR1cmVzKCkpO1xuICAgIFxuICAgIGxvYWRUZXh0dXJlcyhjb250cm9sbGVyLmdldFJlc291cmNlc1Jvb3QoKSArIFwiZ2Z4L3RleHR1cmVzMzIucG5nXCIsIDMyLCAzMiwgMiwgZnVuY3Rpb24obG9hZGVkVGV4dHVyZXMpIHtcbiAgICAgICAgYWRkVGV4dHVyZXMobG9hZGVkVGV4dHVyZXMpO1xuICAgIH0pO1xufVxuXG5DUFRleHR1cmVQYWxldHRlLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoQ1BQYWxldHRlLnByb3RvdHlwZSk7XG5DUFRleHR1cmVQYWxldHRlLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IENQVGV4dHVyZVBhbGV0dGU7XG4iLCIvKlxuICAgIENoaWNrZW5QYWludFxuICAgIFxuICAgIENoaWNrZW5QYWludCBpcyBhIHRyYW5zbGF0aW9uIG9mIENoaWJpUGFpbnQgZnJvbSBKYXZhIHRvIEphdmFTY3JpcHRcbiAgICBieSBOaWNob2xhcyBTaGVybG9jayAvIENoaWNrZW4gU21vb3RoaWUuXG4gICAgXG4gICAgQ2hpYmlQYWludCBpcyBDb3B5cmlnaHQgKGMpIDIwMDYtMjAwOCBNYXJjIFNjaGVmZXJcblxuICAgIENoaWNrZW5QYWludCBpcyBmcmVlIHNvZnR3YXJlOiB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3IgbW9kaWZ5XG4gICAgaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBhcyBwdWJsaXNoZWQgYnlcbiAgICB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uLCBlaXRoZXIgdmVyc2lvbiAzIG9mIHRoZSBMaWNlbnNlLCBvclxuICAgIChhdCB5b3VyIG9wdGlvbikgYW55IGxhdGVyIHZlcnNpb24uXG5cbiAgICBDaGlja2VuUGFpbnQgaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCxcbiAgICBidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZlxuICAgIE1FUkNIQU5UQUJJTElUWSBvciBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS4gIFNlZSB0aGVcbiAgICBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9yZSBkZXRhaWxzLlxuXG4gICAgWW91IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2VcbiAgICBhbG9uZyB3aXRoIENoaWNrZW5QYWludC4gSWYgbm90LCBzZWUgPGh0dHA6Ly93d3cuZ251Lm9yZy9saWNlbnNlcy8+LlxuKi9cblxuaW1wb3J0IENQUGFsZXR0ZSBmcm9tICcuL0NQUGFsZXR0ZSc7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIENQVG9vbFBhbGV0dGUoY3BDb250cm9sbGVyKSB7XG4gICAgQ1BQYWxldHRlLmNhbGwodGhpcywgY3BDb250cm9sbGVyLCBcInRvb2xcIiwgXCJUb29sc1wiKTtcbiAgICBcbiAgICB2YXIgXG4gICAgICAgIHRoYXQgPSB0aGlzLFxuXG4gICAgICAgIGJ1dHRvbnMgPSBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBcImNoaWNrZW5wYWludC10b29sLXJlY3Qtc2VsZWN0aW9uXCIsXG4gICAgICAgICAgICAgICAgY29tbWFuZDogXCJDUFJlY3RTZWxlY3Rpb25cIixcbiAgICAgICAgICAgICAgICB0b29sVGlwOiBcIk1hcnF1ZWVcIixcbiAgICAgICAgICAgICAgICBzaG9ydGN1dDogXCJtXCJcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBcImNoaWNrZW5wYWludC10b29sLW1vdmVcIixcbiAgICAgICAgICAgICAgICBjb21tYW5kOiBcIkNQTW92ZVRvb2xcIixcbiAgICAgICAgICAgICAgICB0b29sVGlwOiBcIk1vdmUgdG9vbFwiLFxuICAgICAgICAgICAgICAgIHNob3J0Y3V0OiBcInZcIlxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IFwiY2hpY2tlbnBhaW50LXRvb2wtZmxvb2QtZmlsbFwiLFxuICAgICAgICAgICAgICAgIGNvbW1hbmQ6IFwiQ1BGbG9vZEZpbGxcIixcbiAgICAgICAgICAgICAgICB0b29sVGlwOiBcIkZsb29kIGZpbGxcIixcbiAgICAgICAgICAgICAgICBzaG9ydGN1dDogXCJmXCJcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBcImNoaWNrZW5wYWludC10b29sLWdyYWRpZW50LWZpbGxcIixcbiAgICAgICAgICAgICAgICBjb21tYW5kOiBcIkNQR3JhZGllbnRGaWxsXCIsXG4gICAgICAgICAgICAgICAgdG9vbFRpcDogXCJHcmFkaWVudCBmaWxsXCIsXG4gICAgICAgICAgICAgICAgc2hvcnRjdXQ6IFwiZ1wiXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJjaGlja2VucGFpbnQtdG9vbC1jb2xvci1waWNrZXJcIixcbiAgICAgICAgICAgICAgICBjb21tYW5kOiBcIkNQQ29sb3JQaWNrZXJcIixcbiAgICAgICAgICAgICAgICB0b29sVGlwOiBcIkNvbG9yIHBpY2tlclwiLFxuICAgICAgICAgICAgICAgIHNob3J0Y3V0OiBcImlcIlxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IFwiY2hpY2tlbnBhaW50LXRvb2wtcm90YXRlLWNhbnZhc1wiLFxuICAgICAgICAgICAgICAgIGNvbW1hbmQ6IFwiQ1BSb3RhdGVDYW52YXNcIixcbiAgICAgICAgICAgICAgICBjb21tYW5kRG91YmxlQ2xpY2s6IFwiQ1BSZXNldENhbnZhc1JvdGF0aW9uXCIsXG4gICAgICAgICAgICAgICAgdG9vbFRpcDogXCJSb3RhdGUgY2FudmFzXCJcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBcImNoaWNrZW5wYWludC10b29sLXBlbmNpbFwiLFxuICAgICAgICAgICAgICAgIGNvbW1hbmQ6IFwiQ1BQZW5jaWxcIixcbiAgICAgICAgICAgICAgICB0b29sVGlwOiBcIlBlbmNpbFwiLFxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IFwiY2hpY2tlbnBhaW50LXRvb2wtcGVuXCIsXG4gICAgICAgICAgICAgICAgY29tbWFuZDogXCJDUFBlblwiLFxuICAgICAgICAgICAgICAgIHRvb2xUaXA6IFwiUGVuXCIsXG4gICAgICAgICAgICAgICAgc2VsZWN0ZWQ6IHRydWUgLy8gVE9ETyBhIGJldHRlciBtZWNoYW5pc20gZm9yIHRoZSBjb250cm9sbGVyIHRvIGxldCB1cyBrbm93IHRoZSBpbml0aWFsIHRvb2wgXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJjaGlja2VucGFpbnQtdG9vbC1haXJicnVzaFwiLFxuICAgICAgICAgICAgICAgIGNvbW1hbmQ6IFwiQ1BBaXJicnVzaFwiLFxuICAgICAgICAgICAgICAgIHRvb2xUaXA6IFwiQWlyYnJ1c2hcIlxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IFwiY2hpY2tlbnBhaW50LXRvb2wtd2F0ZXJcIixcbiAgICAgICAgICAgICAgICBjb21tYW5kOiBcIkNQV2F0ZXJcIixcbiAgICAgICAgICAgICAgICB0b29sVGlwOiBcIldhdGVycGFpbnRcIlxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IFwiY2hpY2tlbnBhaW50LXRvb2wtZXJhc2VyXCIsXG4gICAgICAgICAgICAgICAgY29tbWFuZDogXCJDUEVyYXNlclwiLFxuICAgICAgICAgICAgICAgIHRvb2xUaXA6IFwiRXJhc2VyXCIsXG4gICAgICAgICAgICAgICAgc2hvcnRjdXQ6IFwiZVwiXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJjaGlja2VucGFpbnQtdG9vbC1zb2Z0LWVyYXNlclwiLFxuICAgICAgICAgICAgICAgIGNvbW1hbmQ6IFwiQ1BTb2Z0RXJhc2VyXCIsXG4gICAgICAgICAgICAgICAgdG9vbFRpcDogXCJTb2Z0IGVyYXNlclwiXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJjaGlja2VucGFpbnQtdG9vbC1zbXVkZ2VcIixcbiAgICAgICAgICAgICAgICBjb21tYW5kOiBcIkNQU211ZGdlXCIsXG4gICAgICAgICAgICAgICAgdG9vbFRpcDogXCJTbXVkZ2VcIlxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IFwiY2hpY2tlbnBhaW50LXRvb2wtYmxlbmRlclwiLFxuICAgICAgICAgICAgICAgIGNvbW1hbmQ6IFwiQ1BCbGVuZGVyXCIsXG4gICAgICAgICAgICAgICAgdG9vbFRpcDogXCJCbGVuZGVyXCJcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBcImNoaWNrZW5wYWludC10b29sLWRvZGdlXCIsXG4gICAgICAgICAgICAgICAgY29tbWFuZDogXCJDUERvZGdlXCIsXG4gICAgICAgICAgICAgICAgdG9vbFRpcDogXCJEb2RnZVwiLFxuICAgICAgICAgICAgICAgIHNob3J0Y3V0OiBcIm9cIlxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IFwiY2hpY2tlbnBhaW50LXRvb2wtYnVyblwiLFxuICAgICAgICAgICAgICAgIGNvbW1hbmQ6IFwiQ1BCdXJuXCIsXG4gICAgICAgICAgICAgICAgdG9vbFRpcDogXCJCdXJuXCIsXG4gICAgICAgICAgICAgICAgc2hvcnRjdXQ6IFwicFwiXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJjaGlja2VucGFpbnQtdG9vbC1ibHVyXCIsXG4gICAgICAgICAgICAgICAgY29tbWFuZDogXCJDUEJsdXJcIixcbiAgICAgICAgICAgICAgICB0b29sVGlwOiBcIkJsdXJcIlxuICAgICAgICAgICAgfVxuICAgICAgICBdLFxuICAgICAgICBsaXN0RWxlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ1bFwiKTtcbiAgICBcbiAgICBmdW5jdGlvbiBidXR0b25DbGlja2VkKGUpIHtcbiAgICAgICAgaWYgKHRoaXMubm9kZU5hbWUgPT0gXCJMSVwiKSB7XG4gICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICBidXR0b24gPSBidXR0b25zW3BhcnNlSW50KHRoaXMuZ2V0QXR0cmlidXRlKFwiZGF0YS1idXR0b25JbmRleFwiKSwgMTApXTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgJChcImxpXCIsIGxpc3RFbGVtKS5yZW1vdmVDbGFzcyhcInNlbGVjdGVkXCIpO1xuICAgICAgICAgICAgJCh0aGlzKS5hZGRDbGFzcyhcInNlbGVjdGVkXCIpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjcENvbnRyb2xsZXIuYWN0aW9uUGVyZm9ybWVkKHthY3Rpb246IGJ1dHRvbi5jb21tYW5kfSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBidWlsZEJ1dHRvbnMoKSB7XG4gICAgICAgIHZhclxuICAgICAgICAgICAgYm9keSA9IHRoYXQuZ2V0Qm9keUVsZW1lbnQoKTtcbiAgICAgICAgXG4gICAgICAgIGxpc3RFbGVtLmNsYXNzTmFtZSA9IFwiY2hpY2tlbnBhaW50LXRvb2xzIGxpc3QtdW5zdHlsZWRcIjtcbiAgICAgICAgXG4gICAgICAgIGZvciAodmFyIGkgaW4gYnV0dG9ucykge1xuICAgICAgICAgICAgKGZ1bmN0aW9uKGkpIHtcbiAgICAgICAgICAgICAgICB2YXIgXG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvbiA9IGJ1dHRvbnNbaV0sXG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvbkVsZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGlcIik7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgYnV0dG9uRWxlbS5jbGFzc05hbWUgPSBcImNoaWNrZW5wYWludC10b29sYmFyLWJ1dHRvbiBcIiArIGJ1dHRvbi5jbGFzc05hbWU7XG4gICAgICAgICAgICAgICAgYnV0dG9uRWxlbS5zZXRBdHRyaWJ1dGUoXCJkYXRhLWJ1dHRvbkluZGV4XCIsIGkpO1xuICAgICAgICAgICAgICAgIGJ1dHRvbkVsZW0udGl0bGUgPSBidXR0b24udG9vbFRpcDtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBpZiAoYnV0dG9uLnNob3J0Y3V0KSB7XG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvbkVsZW0udGl0bGUgKz0gXCIgKFwiICsgYnV0dG9uLnNob3J0Y3V0LnRvVXBwZXJDYXNlKCkgKyBcIilcIjtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGtleShidXR0b24uc2hvcnRjdXQsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYnV0dG9uQ2xpY2tlZC5jYWxsKGJ1dHRvbkVsZW0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBpZiAoYnV0dG9uLnNlbGVjdGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvbkVsZW0uY2xhc3NOYW1lID0gYnV0dG9uRWxlbS5jbGFzc05hbWUgKyBcIiBzZWxlY3RlZFwiO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBsaXN0RWxlbS5hcHBlbmRDaGlsZChidXR0b25FbGVtKTtcbiAgICAgICAgICAgIH0pKGkpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAkKGxpc3RFbGVtKS5vbihcImNsaWNrXCIsIFwibGlcIiwgYnV0dG9uQ2xpY2tlZCk7XG4gICAgICAgIFxuICAgICAgICBsaXN0RWxlbS5hZGRFdmVudExpc3RlbmVyKFwiZGJsY2xpY2tcIiwgZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgaWYgKHRoaXMubm9kZU5hbWUgPT0gXCJMSVwiKSB7XG4gICAgICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvbiA9IGJ1dHRvbnNbcGFyc2VJbnQodGhpcy5nZXRBdHRyaWJ1dGUoXCJkYXRhLWJ1dHRvbkluZGV4XCIpLCAxMCldO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGlmIChidXR0b24uY29tbWFuZERvdWJsZUNsaWNrKSB7XG4gICAgICAgICAgICAgICAgICAgIGNwQ29udHJvbGxlci5hY3Rpb25QZXJmb3JtZWQoe2FjdGlvbjogYnV0dG9uLmNvbW1hbmREb3VibGVDbGlja30pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICBib2R5LmFwcGVuZENoaWxkKGxpc3RFbGVtKTtcbiAgICB9XG4gICAgXG4gICAgYnVpbGRCdXR0b25zKCk7XG59XG5cbkNQVG9vbFBhbGV0dGUucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShDUFBhbGV0dGUucHJvdG90eXBlKTtcbkNQVG9vbFBhbGV0dGUucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gQ1BUb29sUGFsZXR0ZTtcbiIsIi8qIFxuICogQnkgTmljaG9sYXMgU2hlcmxvY2sgPG4uc2hlcmxvY2tAZ21haWwuY29tPlxuICogXG4gKiBSZWxlYXNlZCB1bmRlciB0aGUgV1RGUEx2MiBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9XVEZQTFxuICovXG5cbmltcG9ydCBBcnJheURhdGFTdHJlYW0gZnJvbSBcIi4vQXJyYXlEYXRhU3RyZWFtXCI7XG5cbnZhciBcbiAgICBBQ09fQ09MT1JTUEFDRV9SR0IgPSAwLFxuICAgIEFDT19DT0xPUlNQQUNFX0hTQiA9IDEsXG4gICAgQUNPX0NPTE9SU1BBQ0VfQ01ZSyA9IDIsXG4gICAgQUNPX0NPTE9SU1BBQ0VfTEFCID0gNyxcbiAgICBBQ09fQ09MT1JTUEFDRV9HUkFZU0NBTEUgPSA4O1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBBZG9iZUNvbG9yVGFibGUoKSB7XG59XG5cbi8qKlxuICogUmVhZCBhbiAuYWNvIChBZG9iZSBDT2xvcikgc3dhdGNoZXMgZmlsZSBhbmQgcmV0dXJuIGFuIGFycmF5IG9mIFJHQiBjb2xvcnMuXG4gKiBcbiAqIFN1cHBvcnRzIHZlcnNpb24gMSBwYWxldHRlcywgb25seSBSR0IgZm9ybWF0LlxuICogXG4gKiBAcGFyYW0gaW5wdXQgQSBVaW50OEFycmF5IG9mIHRoZSAuYWNvIGZpbGUgY29udGVudHNcbiAqIEByZXR1cm4gQW4gYXJyYXkgb2YgY29sb3Vycywgb3IgbnVsbCBpZiB0aGUgZmlsZSB3YXMgbm90IHN1cHBvcnRlZC5cbiAqL1xuQWRvYmVDb2xvclRhYmxlLnByb3RvdHlwZS5yZWFkID0gZnVuY3Rpb24oaW5wdXQpIHtcbiAgICBpZiAoaW5wdXQgPT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgXG4gICAgdmFyXG4gICAgICAgIHN0cmVhbSA9IG5ldyBBcnJheURhdGFTdHJlYW0obmV3IFVpbnQ4QXJyYXkoaW5wdXQpKSxcbiAgICAgICAgdmVyc2lvbiwgY291bnQsXG4gICAgICAgIHJlc3VsdCA9IFtdO1xuXG4gICAgdmVyc2lvbiA9IHN0cmVhbS5yZWFkVTE2QkUoKTtcbiAgICBpZiAodmVyc2lvbiAhPSAxKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBjb3VudCA9IHN0cmVhbS5yZWFkVTE2QkUoKTtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY291bnQ7IGkrKykge1xuICAgICAgICB2YXJcbiAgICAgICAgICAgIGNvbG91cnNwYWNlID0gc3RyZWFtLnJlYWRVMTZCRSgpO1xuXG4gICAgICAgIGlmIChjb2xvdXJzcGFjZSAhPSBBQ09fQ09MT1JTUEFDRV9SR0IpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlOyAvLyBEcm9wIHVuc3VwcG9ydGVkIGNvbG91cnMgc2lsZW50bHlcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFNjYWxlIGJhY2sgZG93biBmcm9tIDE2LWJpdCB0byA4LWJpdFxuICAgICAgICB2YXJcbiAgICAgICAgICAgIHIgPSAoc3RyZWFtLnJlYWRVMTZCRSgpICogMjU1KSAvIDY1NTM1LFxuICAgICAgICAgICAgZyA9IChzdHJlYW0ucmVhZFUxNkJFKCkgKiAyNTUpIC8gNjU1MzUsXG4gICAgICAgICAgICBiID0gKHN0cmVhbS5yZWFkVTE2QkUoKSAqIDI1NSkgLyA2NTUzNTtcbiAgICAgICAgXG4gICAgICAgIHN0cmVhbS5yZWFkVTE2QkUoKTsgLy8gdGhpcmQgdmFsdWUgdW51c2VkXG5cbiAgICAgICAgcmVzdWx0LnB1c2gociA8PCAxNiB8IGcgPDwgOCB8IGIpO1xuICAgIH1cblxuICAgIHJldHVybiByZXN1bHQ7XG59O1xuXG4vKipcbiAqIFdyaXRlIGFuIC5hY28gKEFkb2JlIENPbG9yKSBzd2F0Y2hlcyBmaWxlIG9mIHRoZSBnaXZlbiBhcnJheSBvZiBSR0IgY29sb3VycyAoY29sb3JzIGFyZSBpbnRlZ2VycyB3aXRoIHRoZVxuICogYmx1ZSBjaGFubmVsIGluIHRoZSBsZWFzdC1zaWduaWZpY2FudCBwb3NpdGlvbikuXG4gKi9cbkFkb2JlQ29sb3JUYWJsZS5wcm90b3R5cGUud3JpdGUgPSBmdW5jdGlvbihjb2xvdXJzKSB7XG4gICAgdmFyXG4gICAgICAgIGJ1ZmZlciA9IG5ldyBVaW50OEFycmF5KDIgKiAyICsgY29sb3Vycy5sZW5ndGggKiAxMCksXG4gICAgICAgIHN0cmVhbSA9IG5ldyBBcnJheURhdGFTdHJlYW0oYnVmZmVyKTtcbiAgICBcbiAgICBzdHJlYW0ud3JpdGVVMTZCRSgxKTsgLy8gVmVyc2lvbiAxXG4gICAgc3RyZWFtLndyaXRlVTE2QkUoY29sb3Vycy5sZW5ndGgpOyAvLyBOdW1iZXIgb2YgY29sb3Vyc1xuICAgIFxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY29sb3Vycy5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXJcbiAgICAgICAgICAgIGNvbG91ciA9IGNvbG91cnNbaV07XG4gICAgICAgIFxuICAgICAgICBzdHJlYW0ud3JpdGVVMTZCRShBQ09fQ09MT1JTUEFDRV9SR0IpO1xuXG4gICAgICAgIC8vIFNjYWxlIHVwIGNvbG91cnMgdG8gMTYtYml0cyAoNjU1MzUvMjU1ID0gMjU3KVxuICAgICAgICBzdHJlYW0ud3JpdGVVMTZCRSgoKGNvbG91ciA+PiAxNikgJiAweEZGKSAqIDI1Nyk7XG4gICAgICAgIHN0cmVhbS53cml0ZVUxNkJFKCgoY29sb3VyID4+IDgpICYgMHhGRikgKiAyNTcpO1xuICAgICAgICBzdHJlYW0ud3JpdGVVMTZCRSgoY29sb3VyICYgMHhGRikgKiAyNTcpO1xuICAgICAgICBzdHJlYW0ud3JpdGVVMTZCRSgwKTtcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIHN0cmVhbS5nZXRBc0RhdGFBcnJheSgpO1xufTtcbiIsIi8qKlxuICogQSB0b29sIGZvciBwcmVzZW50aW5nIGEgVWludDhBcnJheSBhcyBhIHN0cmVhbSBmb3IgcmVhZGluZyBhbmQgd3JpdGluZyBzb21lIHNpbXBsZSBkYXRhIHR5cGVzLlxuICogXG4gKiBCeSBOaWNob2xhcyBTaGVybG9jayA8bi5zaGVybG9ja0BnbWFpbC5jb20+IDIwMTYsIHJlbGVhc2VkIHVuZGVyIHRoZSBXVEZQTCBsaWNlbnNlLlxuICovXG5cbnZhciBFT0YgPSAtMTtcblxuZnVuY3Rpb24gc2lnbkV4dGVuZDE2Qml0KHdvcmQpIHtcbiAgICAvL0lmIHNpZ24gYml0IGlzIHNldCwgZmlsbCB0aGUgdG9wIGJpdHMgd2l0aCAxcyB0byBzaWduLWV4dGVuZFxuICAgIHJldHVybiAod29yZCAmIDB4ODAwMCkgPyAod29yZCB8IDB4RkZGRjAwMDApIDogd29yZDtcbn1cblxuZnVuY3Rpb24gc2lnbkV4dGVuZDhCaXQoYnl0ZSkge1xuICAgIC8vSWYgc2lnbiBiaXQgaXMgc2V0LCBmaWxsIHRoZSB0b3AgYml0cyB3aXRoIDFzIHRvIHNpZ24tZXh0ZW5kXG4gICAgcmV0dXJuIChieXRlICYgMHg4MCkgPyAoYnl0ZSB8IDB4RkZGRkZGMDApIDogYnl0ZTtcbn1cblxuLyoqXG4gKiBDcmVhdGUgYSBzdHJlYW0gb24gZXhpc3RpbmcgYXJyYXkgb2YgdW5zaWduZWQgYnl0ZSBkYXRhIChpLmUuIGhvcGVmdWxseSBVaW50OEFycmF5KS5cbiAqIFxuICogQHBhcmFtIGRhdGEgVWludDhBcnJheSB0byBzdHJlYW0gZGF0YSBmcm9tXG4gKiBAcGFyYW0gc3RhcnQgVGhlIGluZGV4IG9mIHRoZSBieXRlIGluIHRoZSBhcnJheSB0aGF0IHdpbGwgYmUgcmVhZCBmaXJzdCwgb3IgbGVhdmUgdW5kZWZpbmVkIHRvIGJlZ2luIGF0IHRoZVxuICogICAgICAgICAgICAgIGJlZ2lubmluZyBvZiB0aGUgYXJyYXlcbiAqIEBwYXJhbSBlbmQgVGhlIGluZGV4IG9mIHRoZSBlbmQgb2YgdGhlIHN0cmVhbSwgb3IgbGVhdmUgdW5kZWZpbmVkIHRvIHVzZSB0aGUgZW5kIG9mIHRoZSBhcnJheSBhcyB0aGUgZW5kIG9mXG4gKiAgICAgICAgICAgIHRoZSBzdHJlYW0uXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIEFycmF5RGF0YVN0cmVhbShkYXRhLCBzdGFydCwgZW5kKSB7XG4gICAgdGhpcy5kYXRhID0gZGF0YTtcbiAgICB0aGlzLmVvZiA9IGZhbHNlO1xuICAgIHRoaXMuc3RhcnQgPSBzdGFydCA9PT0gdW5kZWZpbmVkID8gMCA6IHN0YXJ0O1xuICAgIHRoaXMuZW5kID0gZW5kID09PSB1bmRlZmluZWQgPyBkYXRhLmxlbmd0aCA6IGVuZDtcbiAgICB0aGlzLnBvcyA9IHRoaXMuc3RhcnQ7XG59O1xuXG4vKipcbiAqIFJlYWQgYSBzaW5nbGUgYnl0ZSBmcm9tIHRoZSBzdHJlYW0gYW5kIHR1cm4gaXQgaW50byBhIEphdmFTY3JpcHQgc3RyaW5nIChhc3N1bWluZyBBU0NJSSkuXG4gKiBcbiAqIEByZXR1cm5zIFN0cmluZyBjb250YWluaW5nIG9uZSBjaGFyYWN0ZXIsIG9yIEVPRiBpZiB0aGUgZW5kIG9mIGZpbGUgd2FzIHJlYWNoZWQgKGVvZiBmbGFnXG4gKiBpcyBzZXQpLlxuICovXG5BcnJheURhdGFTdHJlYW0ucHJvdG90eXBlLnJlYWRDaGFyID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKHRoaXMucG9zIDwgdGhpcy5lbmQpIHtcbiAgICAgICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUodGhpcy5kYXRhW3RoaXMucG9zKytdKTtcbiAgICB9XG5cbiAgICB0aGlzLmVvZiA9IHRydWU7XG4gICAgcmV0dXJuIEVPRjtcbn07XG5cbi8qKlxuICogUmVhZCBvbmUgdW5zaWduZWQgYnl0ZSBmcm9tIHRoZSBzdHJlYW1cbiAqIFxuICogQHJldHVybnMgVW5zaWduZWQgYnl0ZSwgb3IgRU9GIGlmIHRoZSBlbmQgb2YgZmlsZSB3YXMgcmVhY2hlZCAoZW9mIGZsYWcgaXMgc2V0KS5cbiAqL1xuQXJyYXlEYXRhU3RyZWFtLnByb3RvdHlwZS5yZWFkQnl0ZSA9IGZ1bmN0aW9uKCkge1xuICAgIGlmICh0aGlzLnBvcyA8IHRoaXMuZW5kKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRhdGFbdGhpcy5wb3MrK107XG4gICAgfVxuXG4gICAgdGhpcy5lb2YgPSB0cnVlO1xuICAgIHJldHVybiBFT0Y7XG59O1xuXG4vL1N5bm9ueW06XG5BcnJheURhdGFTdHJlYW0ucHJvdG90eXBlLnJlYWRVOCA9IEFycmF5RGF0YVN0cmVhbS5wcm90b3R5cGUucmVhZEJ5dGU7XG5cbkFycmF5RGF0YVN0cmVhbS5wcm90b3R5cGUucmVhZFM4ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHNpZ25FeHRlbmQ4Qml0KHRoaXMucmVhZEJ5dGUoKSk7XG59O1xuXG5BcnJheURhdGFTdHJlYW0ucHJvdG90eXBlLnVucmVhZENoYXIgPSBmdW5jdGlvbihjKSB7XG4gICAgdGhpcy5wb3MtLTtcbn07XG4gICAgXG5BcnJheURhdGFTdHJlYW0ucHJvdG90eXBlLnBlZWtDaGFyID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKHRoaXMucG9zIDwgdGhpcy5lbmQpIHtcbiAgICAgICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUodGhpcy5kYXRhW3RoaXMucG9zXSk7XG4gICAgfVxuXG4gICAgdGhpcy5lb2YgPSB0cnVlO1xuICAgIHJldHVybiBFT0Y7XG59O1xuXG5BcnJheURhdGFTdHJlYW0ucHJvdG90eXBlLnJlYWRTdHJpbmcgPSBmdW5jdGlvbihsZW5ndGgpIHtcbiAgICB2YXIgXG4gICAgICAgIGNoYXJzID0gbmV3IEFycmF5KGxlbmd0aCksXG4gICAgICAgIGk7XG4gICAgXG4gICAgZm9yIChpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNoYXJzW2ldID0gdGhpcy5yZWFkQ2hhcigpO1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4gY2hhcnMuam9pbihcIlwiKTtcbn07XG5cbkFycmF5RGF0YVN0cmVhbS5wcm90b3R5cGUucmVhZFMxNiA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBcbiAgICAgICAgYjEgPSB0aGlzLnJlYWRCeXRlKCksXG4gICAgICAgIGIyID0gdGhpcy5yZWFkQnl0ZSgpO1xuICAgIFxuICAgIHJldHVybiBzaWduRXh0ZW5kMTZCaXQoKGIxIDw8IDgpIHwgYjIpOyBcbn07XG5cbkFycmF5RGF0YVN0cmVhbS5wcm90b3R5cGUucmVhZFUxNkJFID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIFxuICAgICAgICBiMSA9IHRoaXMucmVhZEJ5dGUoKSxcbiAgICAgICAgYjIgPSB0aGlzLnJlYWRCeXRlKCk7XG4gICAgXG4gICAgcmV0dXJuIChiMSA8PCA4KSB8IGIyOyBcbn07XG5cbkFycmF5RGF0YVN0cmVhbS5wcm90b3R5cGUucmVhZFUxNkxFID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIFxuICAgICAgICBiMSA9IHRoaXMucmVhZEJ5dGUoKSxcbiAgICAgICAgYjIgPSB0aGlzLnJlYWRCeXRlKCk7XG4gICAgXG4gICAgcmV0dXJuIChiMiA8PCA4KSB8IGIxOyBcbn07XG5cbkFycmF5RGF0YVN0cmVhbS5wcm90b3R5cGUucmVhZFUzMkJFID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIFxuICAgICAgICBiMSA9IHRoaXMucmVhZEJ5dGUoKSxcbiAgICAgICAgYjIgPSB0aGlzLnJlYWRCeXRlKCksXG4gICAgICAgIGIzID0gdGhpcy5yZWFkQnl0ZSgpLFxuICAgICAgICBiNCA9IHRoaXMucmVhZEJ5dGUoKTtcbiAgICByZXR1cm4gKChiMSA8PCAyNCkgfCAoYjIgPDwgMTYpIHwgKGIzIDw8IDgpIHwgYjQpID4+PiAwOyBcbn07XG5cbkFycmF5RGF0YVN0cmVhbS5wcm90b3R5cGUucmVhZFUzMkxFID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIFxuICAgICAgICBiMSA9IHRoaXMucmVhZEJ5dGUoKSxcbiAgICAgICAgYjIgPSB0aGlzLnJlYWRCeXRlKCksXG4gICAgICAgIGIzID0gdGhpcy5yZWFkQnl0ZSgpLFxuICAgICAgICBiNCA9IHRoaXMucmVhZEJ5dGUoKTtcbiAgICByZXR1cm4gKChiNCA8PCAyNCkgfCAoYjMgPDwgMTYpIHwgKGIyIDw8IDgpIHwgYjEpID4+PiAwOyBcbn07XG5cbkFycmF5RGF0YVN0cmVhbS5wcm90b3R5cGUucmVhZEJ5dGVzID0gZnVuY3Rpb24oY291bnQpIHtcbiAgICB2YXJcbiAgICAgICAgcmVzdWx0ID0gdGhpcy5kYXRhLnN1YmFycmF5KHRoaXMucG9zLCB0aGlzLnBvcyArIGNvdW50KTtcbiAgICBcbiAgICB0aGlzLnBvcyArPSBjb3VudDtcbiAgICBcbiAgICBpZiAodGhpcy5wb3MgPiB0aGlzLmVuZCkge1xuICAgICAgICB0aGlzLmVvZiA9IHRydWU7XG4gICAgfVxuICAgIFxuICAgIHJldHVybiByZXN1bHQ7XG59XG5cbkFycmF5RGF0YVN0cmVhbS5wcm90b3R5cGUuc2tpcCA9IGZ1bmN0aW9uKG51bUJ5dGVzKSB7XG4gICAgdGhpcy5wb3MgKz0gbnVtQnl0ZXM7XG4gICAgXG4gICAgaWYgKHRoaXMucG9zID4gdGhpcy5lbmQpIHtcbiAgICAgICAgdGhpcy5lb2YgPSB0cnVlO1xuICAgIH1cbn07XG5cbkFycmF5RGF0YVN0cmVhbS5wcm90b3R5cGUuc2VlayA9IGZ1bmN0aW9uKG9mZnNldCkge1xuICAgIHRoaXMucG9zID0gb2Zmc2V0O1xufTtcblxuQXJyYXlEYXRhU3RyZWFtLnByb3RvdHlwZS53cml0ZUJ5dGVzID0gZnVuY3Rpb24oYXJyKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdGhpcy5kYXRhW3RoaXMucG9zKytdID0gYXJyW2ldO1xuICAgIH1cbn07XG5cbkFycmF5RGF0YVN0cmVhbS5wcm90b3R5cGUud3JpdGVCeXRlID0gZnVuY3Rpb24oYikge1xuICAgIHRoaXMuZGF0YVt0aGlzLnBvcysrXSA9IGI7XG59O1xuXG4vL1N5bm9ueW06XG5BcnJheURhdGFTdHJlYW0ucHJvdG90eXBlLndyaXRlVTggPSBBcnJheURhdGFTdHJlYW0ucHJvdG90eXBlLndyaXRlQnl0ZTtcblxuQXJyYXlEYXRhU3RyZWFtLnByb3RvdHlwZS53cml0ZVUxNkxFID0gZnVuY3Rpb24odSkge1xuICAgIHRoaXMuZGF0YVt0aGlzLnBvcysrXSA9IHU7XG4gICAgdGhpcy5kYXRhW3RoaXMucG9zKytdID0gdSA+PiA4O1xufTtcblxuQXJyYXlEYXRhU3RyZWFtLnByb3RvdHlwZS53cml0ZVUxNkJFID0gZnVuY3Rpb24odSkge1xuICAgIHRoaXMuZGF0YVt0aGlzLnBvcysrXSA9IHUgPj4gODtcbiAgICB0aGlzLmRhdGFbdGhpcy5wb3MrK10gPSB1O1xufTtcblxuQXJyYXlEYXRhU3RyZWFtLnByb3RvdHlwZS53cml0ZVUzMkJFID0gZnVuY3Rpb24odSkge1xuICAgIHRoaXMuZGF0YVt0aGlzLnBvcysrXSA9IHUgPj4gMjQ7XG4gICAgdGhpcy5kYXRhW3RoaXMucG9zKytdID0gdSA+PiAxNjtcbiAgICB0aGlzLmRhdGFbdGhpcy5wb3MrK10gPSB1ID4+IDg7XG4gICAgdGhpcy5kYXRhW3RoaXMucG9zKytdID0gdTtcbn07XG5cbkFycmF5RGF0YVN0cmVhbS5wcm90b3R5cGUud3JpdGVVMzJMRSA9IGZ1bmN0aW9uKHUpIHtcbiAgICB0aGlzLmRhdGFbdGhpcy5wb3MrK10gPSB1O1xuICAgIHRoaXMuZGF0YVt0aGlzLnBvcysrXSA9IHUgPj4gODtcbiAgICB0aGlzLmRhdGFbdGhpcy5wb3MrK10gPSB1ID4+IDE2O1xuICAgIHRoaXMuZGF0YVt0aGlzLnBvcysrXSA9IHUgPj4gMjQ7XG59O1xuXG5BcnJheURhdGFTdHJlYW0ucHJvdG90eXBlLndyaXRlRG91YmxlQkUgPSBmdW5jdGlvbihkKSB7XG4gICAgdmFyIFxuICAgICAgICBieXRlcyA9IG5ldyBVaW50OEFycmF5KG5ldyBGbG9hdDY0QXJyYXkoW2RdKS5idWZmZXIpO1xuICAgIFxuICAgIGZvciAodmFyIGkgPSBieXRlcy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgICB0aGlzLndyaXRlQnl0ZShieXRlc1tpXSk7XG4gICAgfVxufTtcblxuQXJyYXlEYXRhU3RyZWFtLnByb3RvdHlwZS53cml0ZUZsb2F0QkUgPSBmdW5jdGlvbihkKSB7XG4gICAgdmFyIFxuICAgICAgICBieXRlcyA9IG5ldyBVaW50OEFycmF5KG5ldyBGbG9hdDMyQXJyYXkoW2RdKS5idWZmZXIpO1xuICAgIFxuICAgIGZvciAodmFyIGkgPSBieXRlcy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgICB0aGlzLndyaXRlQnl0ZShieXRlc1tpXSk7XG4gICAgfVxufTtcblxuLyoqXG4gKiBXcml0ZSBhbiBBU0NJSSBzdHJpbmcgdG8gdGhlIHN0cmVhbVxuICovXG5BcnJheURhdGFTdHJlYW0ucHJvdG90eXBlLndyaXRlU3RyaW5nID0gZnVuY3Rpb24ocykge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcy5sZW5ndGg7IGkrKykge1xuICAgICAgICB0aGlzLmRhdGFbdGhpcy5wb3MrK10gPSBzLmNoYXJDb2RlQXQoaSk7XG4gICAgfVxufTtcblxuLyoqXG4gKiBXcml0ZSB0aGUgZ2l2ZW4gdW5zaWduZWQgMzItYml0IGludGVnZXIgdG8gdGhlIHN0cmVhbSBpbiBiaWctZW5kaWFuIG9yZGVyIHVzaW5nIHRoZSBnaXZlbiBieXRlIHdpZHRoLlxuICogTm8gZXJyb3IgY2hlY2tpbmcgaXMgcGVyZm9ybWVkIHRvIGVuc3VyZSB0aGF0IHRoZSBzdXBwbGllZCB3aWR0aCBpcyBjb3JyZWN0IGZvciB0aGUgaW50ZWdlci5cbiAqIFxuICogT21pdCB0aGUgd2lkdGggcGFyYW1ldGVyIHRvIGhhdmUgaXQgZGV0ZXJtaW5lZCBhdXRvbWF0aWNhbGx5IGZvciB5b3UuXG4gKiBcbiAqIEBwYXJhbSB1IFVuc2lnbmVkIGludGVnZXIgdG8gYmUgd3JpdHRlblxuICogQHBhcmFtIHdpZHRoIE51bWJlciBvZiBieXRlcyB0byB3cml0ZSB0byB0aGUgc3RyZWFtXG4gKi9cbkFycmF5RGF0YVN0cmVhbS5wcm90b3R5cGUud3JpdGVVbnNpZ25lZEludEJFID0gZnVuY3Rpb24odSwgd2lkdGgpIHtcbiAgICBpZiAod2lkdGggPT09IHVuZGVmaW5lZCkge1xuICAgICAgICB3aWR0aCA9IHRoaXMubWVhc3VyZVVuc2lnbmVkSW50KHUpO1xuICAgIH1cbiAgICBcbiAgICAvLyBFYWNoIGNhc2UgZmFsbHMgdGhyb3VnaDpcbiAgICBzd2l0Y2ggKHdpZHRoKSB7XG4gICAgICAgIGNhc2UgNTpcbiAgICAgICAgICAgIHRoaXMud3JpdGVVOChNYXRoLmZsb29yKHUgLyA0Mjk0OTY3Mjk2KSk7IC8vIE5lZWQgdG8gdXNlIGRpdmlzaW9uIHRvIGFjY2VzcyA+MzIgYml0cyBvZiBmbG9hdGluZyBwb2ludCB2YXJcbiAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgdGhpcy53cml0ZVU4KHUgPj4gMjQpO1xuICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICB0aGlzLndyaXRlVTgodSA+PiAxNik7XG4gICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgIHRoaXMud3JpdGVVOCh1ID4+IDgpO1xuICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICB0aGlzLndyaXRlVTgodSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgdGhyb3cgbmV3IFJ1bnRpbWVFeGNlcHRpb24oXCJCYWQgVUlOVCBzaXplIFwiICsgd2lkdGgpO1xuICAgIH1cbn07XG5cbi8qKlxuICogUmV0dXJuIHRoZSBudW1iZXIgb2YgYnl0ZXMgbmVlZGVkIHRvIGhvbGQgdGhlIG5vbi16ZXJvIGJpdHMgb2YgdGhlIGdpdmVuIHVuc2lnbmVkIGludGVnZXIuXG4gKi9cbkFycmF5RGF0YVN0cmVhbS5wcm90b3R5cGUubWVhc3VyZVVuc2lnbmVkSW50ID0gZnVuY3Rpb24odmFsKSB7XG4gICAgLy8gRm9yY2UgdG8gMzItYml0IHVuc2lnbmVkIGludGVnZXJcbiAgICBpZiAodmFsIDwgKDEgPDwgOCkpIHtcbiAgICAgICAgcmV0dXJuIDE7XG4gICAgfSBlbHNlIGlmICh2YWwgPCAoMSA8PCAxNikpIHtcbiAgICAgICAgcmV0dXJuIDI7XG4gICAgfSBlbHNlIGlmICh2YWwgPCAoMSA8PCAyNCkpIHtcbiAgICAgICAgcmV0dXJuIDM7XG4gICAgfSBlbHNlIGlmICh2YWwgPCA0Mjk0OTY3Mjk2KSB7XG4gICAgICAgIHJldHVybiA0O1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiA1O1xuICAgIH1cbn07XG5cbi8qKlxuICogUmV0dXJuIGEgdmlldyBvbiB0aGUgcG9ydGlvbiBvZiB0aGUgYnVmZmVyIGZyb20gdGhlIGJlZ2lubmluZyB0byB0aGUgY3VycmVudCBzZWVrIHBvc2l0aW9uIGFzIGEgVWludDhBcnJheS5cbiAqL1xuQXJyYXlEYXRhU3RyZWFtLnByb3RvdHlwZS5nZXRBc0RhdGFBcnJheSA9IGZ1bmN0aW9uKCkge1xuICAgIGlmICh0aGlzLnBvcyA8IHRoaXMuZGF0YS5ieXRlTGVuZ3RoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRhdGEuc3ViYXJyYXkoMCwgdGhpcy5wb3MpO1xuICAgIH0gZWxzZSBpZiAodGhpcy5wb3MgPT0gdGhpcy5kYXRhLmJ5dGVMZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0YTtcbiAgICB9IGVsc2Uge1xuICAgICAgICB0aHJvdyBcIkFycmF5RGF0YVN0cmVhbSdzIHBvcyBsaWVzIGJleW9uZCBlbmQgb2YgYnVmZmVyXCI7IFxuICAgICAgICAvLyBDaGFuY2UgaXMgcHJldHR5IGdvb2QgdGhhdCB5b3Ugb3ZlcmZsb3dlZCB0aGUgZW5kIG9mIHRoZSBidWZmZXIgZHVyaW5nIHdyaXRpbmcgYW5kIHlvdXIgZmlsZSBpcyB0cmFzaCBcbiAgICB9XG59O1xuXG5BcnJheURhdGFTdHJlYW0ucHJvdG90eXBlLkVPRiA9IEVPRjsiLCIvKlxuICAgIENoaWNrZW5QYWludFxuICAgIFxuICAgIENoaWNrZW5QYWludCBpcyBhIHRyYW5zbGF0aW9uIG9mIENoaWJpUGFpbnQgZnJvbSBKYXZhIHRvIEphdmFTY3JpcHRcbiAgICBieSBOaWNob2xhcyBTaGVybG9jayAvIENoaWNrZW4gU21vb3RoaWUuXG4gICAgXG4gICAgQ2hpYmlQYWludCBpcyBDb3B5cmlnaHQgKGMpIDIwMDYtMjAwOCBNYXJjIFNjaGVmZXJcblxuICAgIENoaWNrZW5QYWludCBpcyBmcmVlIHNvZnR3YXJlOiB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3IgbW9kaWZ5XG4gICAgaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBhcyBwdWJsaXNoZWQgYnlcbiAgICB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uLCBlaXRoZXIgdmVyc2lvbiAzIG9mIHRoZSBMaWNlbnNlLCBvclxuICAgIChhdCB5b3VyIG9wdGlvbikgYW55IGxhdGVyIHZlcnNpb24uXG5cbiAgICBDaGlja2VuUGFpbnQgaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCxcbiAgICBidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZlxuICAgIE1FUkNIQU5UQUJJTElUWSBvciBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS4gIFNlZSB0aGVcbiAgICBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9yZSBkZXRhaWxzLlxuXG4gICAgWW91IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2VcbiAgICBhbG9uZyB3aXRoIENoaWNrZW5QYWludC4gSWYgbm90LCBzZWUgPGh0dHA6Ly93d3cuZ251Lm9yZy9saWNlbnNlcy8+LlxuKi9cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gQ1BCZXppZXIoKSB7XG5cbiAgICAvLyBIb3cgdG8gdXNlIHRoaXMgY2xhc3M6XG4gICAgLy9cbiAgICAvLyAxIC0gc2V0IHRoZSA0IHBvaW50cyBjb29yZGluYXRlcyAoeDAtMywgeTAtMylcbiAgICAvLyB0d28gb3B0aW9uczpcbiAgICAvLyAyYSAtIGNhbGwgaW5pdCgpIHdpdGggZGVzaXJlZCBkdCB0aGVuIHJlYWQgdGhlIGN1cnJlbnQgY29vcmRpbmF0ZSAoQngsIEJ5KSBhbmQgdXNlIG5leHRQb2ludCgpIHRvIGNvbXB1dGUgdGhlXG4gICAgLy8gbmV4dCBwb2ludFxuICAgIC8vIDJiIC0gdXNlIG9uZSBvZiB0aGUgXCJjb21wdXRlXCIgbWV0aG9kcyB0byBjb21wdXRlIHRoZSB2YWx1ZXMgZm9yIHRoZSB3aG9sZSBjdXJ2ZSBpbiBvbmUgc3RlcFxuXG4gICAgLy8gVGhlIDQgcG9pbnRzIGNvb3JkaW5hdGVzXG4gICAgdGhpcy54MCA9IHRoaXMueTAgPSB0aGlzLngxID0gdGhpcy55MSA9IHRoaXMueDIgPSB0aGlzLnkyID0gdGhpcy54MyA9IHRoaXMueTMgPSAwLjA7XG5cbiAgICAvLyB1c2VkIHRvIGNvbXB1dGUgdGhlIEJlemllciBjdXJ2ZSB3aXRoIHRoZSBmb3J3YXJkIGRpZmZlcmVuY2VzIG1ldGhvZFxuICAgIHZhclxuICAgICAgICBCeCwgZEJ4LCBkZEJ4LCBkZGRCeCxcbiAgICAgICAgQnksIGRCeSwgZGRCeSwgZGRkQnksXG4gICAgICAgIFxuICAgICAgICB0aGF0ID0gdGhpcztcblxuICAgIGZ1bmN0aW9uIGluaXQoZHQpIHtcbiAgICAgICAgLy8gSW1wbGVtZW50cyBhIGZhc3QgZGVncmVlLTMgQmV6aWVyIGN1cnZlIHVzaW5nIHRoZSBmb3J3YXJkIGRpZmZlcmVuY2VzIG1ldGhvZFxuICAgICAgICAvL1xuICAgICAgICAvLyBSZWZlcmVuY2UgZm9yIHRoaXMgYWxnb3JpdGhtOlxuICAgICAgICAvLyBcIkN1cnZlcyBhbmQgU3VyZmFjZXMgZm9yIENvbXB1dGVyIEdyYXBoaWNzXCIgYnkgRGF2aWQgU2Fsb21vbiwgcGFnZSAxODlcblxuICAgICAgICB2YXJcbiAgICAgICAgICAgIHExID0gMy4wICogZHQsXG4gICAgICAgICAgICBxMiA9IHExICogZHQsXG4gICAgICAgICAgICBxMyA9IGR0ICogZHQgKiBkdCxcbiAgICAgICAgICAgIHE0ID0gMi4wICogcTIsXG4gICAgICAgICAgICBxNSA9IDYuMCAqIHEzLFxuICAgICAgICAgICAgcTZ4ID0gdGhhdC54MCAtIDIuMCAqIHRoYXQueDEgKyB0aGF0LngyLFxuICAgICAgICAgICAgcTZ5ID0gdGhhdC55MCAtIDIuMCAqIHRoYXQueTEgKyB0aGF0LnkyLFxuICAgICAgICAgICAgcTd4ID0gMy4wICogKHRoYXQueDEgLSB0aGF0LngyKSAtIHRoYXQueDAgKyB0aGF0LngzLFxuICAgICAgICAgICAgcTd5ID0gMy4wICogKHRoYXQueTEgLSB0aGF0LnkyKSAtIHRoYXQueTAgKyB0aGF0LnkzO1xuXG4gICAgICAgIEJ4ID0gdGhhdC54MDtcbiAgICAgICAgQnkgPSB0aGF0LnkwO1xuXG4gICAgICAgIGRCeCA9ICh0aGF0LngxIC0gdGhhdC54MCkgKiBxMSArIHE2eCAqIHEyICsgcTd4ICogcTM7XG4gICAgICAgIGRCeSA9ICh0aGF0LnkxIC0gdGhhdC55MCkgKiBxMSArIHE2eSAqIHEyICsgcTd5ICogcTM7XG5cbiAgICAgICAgZGRCeCA9IHE2eCAqIHE0ICsgcTd4ICogcTU7XG4gICAgICAgIGRkQnkgPSBxNnkgKiBxNCArIHE3eSAqIHE1O1xuXG4gICAgICAgIGRkZEJ4ID0gcTd4ICogcTU7XG4gICAgICAgIGRkZEJ5ID0gcTd5ICogcTU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRmlsbCB0aGUgZ2l2ZW4geCx5IGFycmF5cyB3aXRoIGEgc2VyaWVzIG9mIHBvaW50cyBvbiB0aGUgY3VydmUuXG4gICAgICogXG4gICAgICogQHBhcmFtIHggaW50W11cbiAgICAgKiBAcGFyYW0geSBpbnRbXVxuICAgICAqIEBwYXJhbSBlbGVtZW50cyBpbnQgQ291bnQgb2YgZWxlbWVudHMgdG8gZmlsbCB4IGFuZCB5IGFycmF5c1xuICAgICAqL1xuICAgIHRoaXMuY29tcHV0ZSA9IGZ1bmN0aW9uKHgsIHksIGVsZW1lbnRzKSB7XG4gICAgICAgIGluaXQoMS4wIC8gZWxlbWVudHMpO1xuXG4gICAgICAgIHhbMF0gPSB+fkJ4O1xuICAgICAgICB5WzBdID0gfn5CeTtcbiAgICAgICAgXG4gICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgZWxlbWVudHM7IGkrKykge1xuICAgICAgICAgICAgQnggKz0gZEJ4O1xuICAgICAgICAgICAgQnkgKz0gZEJ5O1xuICAgICAgICAgICAgZEJ4ICs9IGRkQng7XG4gICAgICAgICAgICBkQnkgKz0gZGRCeTtcbiAgICAgICAgICAgIGRkQnggKz0gZGRkQng7XG4gICAgICAgICAgICBkZEJ5ICs9IGRkZEJ5O1xuXG4gICAgICAgICAgICB4W2ldID0gfn5CeDtcbiAgICAgICAgICAgIHlbaV0gPSB+fkJ5O1xuICAgICAgICB9XG4gICAgfTtcbn0iLCIvKlxuICAgIENoaWNrZW5QYWludFxuICAgIFxuICAgIENoaWNrZW5QYWludCBpcyBhIHRyYW5zbGF0aW9uIG9mIENoaWJpUGFpbnQgZnJvbSBKYXZhIHRvIEphdmFTY3JpcHRcbiAgICBieSBOaWNob2xhcyBTaGVybG9jayAvIENoaWNrZW4gU21vb3RoaWUuXG4gICAgXG4gICAgQ2hpYmlQYWludCBpcyBDb3B5cmlnaHQgKGMpIDIwMDYtMjAwOCBNYXJjIFNjaGVmZXJcblxuICAgIENoaWNrZW5QYWludCBpcyBmcmVlIHNvZnR3YXJlOiB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3IgbW9kaWZ5XG4gICAgaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBhcyBwdWJsaXNoZWQgYnlcbiAgICB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uLCBlaXRoZXIgdmVyc2lvbiAzIG9mIHRoZSBMaWNlbnNlLCBvclxuICAgIChhdCB5b3VyIG9wdGlvbikgYW55IGxhdGVyIHZlcnNpb24uXG5cbiAgICBDaGlja2VuUGFpbnQgaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCxcbiAgICBidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZlxuICAgIE1FUkNIQU5UQUJJTElUWSBvciBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS4gIFNlZSB0aGVcbiAgICBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9yZSBkZXRhaWxzLlxuXG4gICAgWW91IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2VcbiAgICBhbG9uZyB3aXRoIENoaWNrZW5QYWludC4gSWYgbm90LCBzZWUgPGh0dHA6Ly93d3cuZ251Lm9yZy9saWNlbnNlcy8+LlxuKi9cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gQ1BDb2xvcihyZ2IpIHtcbiAgICB2YXJcbiAgICAgICAgdGhhdCA9IHRoaXM7XG4gICAgXG4gICAgdGhpcy5yZ2IgPSAwOyAvLyBpbiBSR0IgYnl0ZSBvcmRlclxuICAgIFxuICAgIHRoaXMuaHVlID0gMDtcbiAgICB0aGlzLnNhdHVyYXRpb24gPSAwO1xuICAgIHRoaXMudmFsdWUgPSAwO1xuICAgIFxuICAgIGZ1bmN0aW9uIHJnYlRvSHN2KCkge1xuICAgICAgICB2YXJcbiAgICAgICAgICAgIHIgPSAodGhhdC5yZ2IgPj4gMTYpICYgMHhmZixcbiAgICAgICAgICAgIGcgPSAodGhhdC5yZ2IgPj4gOCkgJiAweGZmLFxuICAgICAgICAgICAgYiA9IHRoYXQucmdiICYgMHhmZjtcblxuICAgICAgICAvLyBWYWx1ZVxuICAgICAgICB0aGF0LnZhbHVlID0gTWF0aC5tYXgociwgTWF0aC5tYXgoZywgYikpO1xuXG4gICAgICAgIC8vIFNhdHVyYXRpb25cbiAgICAgICAgdmFyIFxuICAgICAgICAgICAgbWluaSA9IE1hdGgubWluKHIsIE1hdGgubWluKGcsIGIpKTtcbiAgICAgICAgXG4gICAgICAgIGlmICh0aGF0LnZhbHVlID09IDApIHtcbiAgICAgICAgICAgIHRoYXQuc2F0dXJhdGlvbiA9IDA7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGF0LnNhdHVyYXRpb24gPSB+figodGhhdC52YWx1ZSAtIG1pbmkpIC8gdGhhdC52YWx1ZSAqIDI1NSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBIdWVcbiAgICAgICAgaWYgKHRoYXQuc2F0dXJhdGlvbiA9PSAwKSB7XG4gICAgICAgICAgICB0aGF0Lmh1ZSA9IDA7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB2YXIgXG4gICAgICAgICAgICAgICAgY3IgPSAodGhhdC52YWx1ZSAtIHIpIC8gKHRoYXQudmFsdWUgLSBtaW5pKSxcbiAgICAgICAgICAgICAgICBjZyA9ICh0aGF0LnZhbHVlIC0gZykgLyAodGhhdC52YWx1ZSAtIG1pbmkpLFxuICAgICAgICAgICAgICAgIGNiID0gKHRoYXQudmFsdWUgLSBiKSAvICh0aGF0LnZhbHVlIC0gbWluaSk7XG5cbiAgICAgICAgICAgIHZhciBcbiAgICAgICAgICAgICAgICBfaHVlID0gMDtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKHRoYXQudmFsdWUgPT0gcikge1xuICAgICAgICAgICAgICAgIF9odWUgPSBjYiAtIGNnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoYXQudmFsdWUgPT0gZykge1xuICAgICAgICAgICAgICAgIF9odWUgPSAyICsgY3IgLSBjYjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGF0LnZhbHVlID09IGIpIHtcbiAgICAgICAgICAgICAgICBfaHVlID0gNCArIGNnIC0gY3I7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIF9odWUgKj0gNjA7XG4gICAgICAgICAgICBpZiAoX2h1ZSA8IDApIHtcbiAgICAgICAgICAgICAgICBfaHVlICs9IDM2MDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhhdC5odWUgPSB+fl9odWU7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBoc3ZUb1JnYigpIHtcbiAgICAgICAgLy8gbm8gc2F0dXJhdGlvbiBtZWFucyBpdCdzIGp1c3QgYSBzaGFkZSBvZiBncmV5XG4gICAgICAgIGlmICh0aGF0LnNhdHVyYXRpb24gPT0gMCkge1xuICAgICAgICAgICAgdGhhdC5yZ2IgPSAodGhhdC52YWx1ZSA8PCAxNikgfCAodGhhdC52YWx1ZSA8PCA4KSB8IHRoYXQudmFsdWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB2YXIgXG4gICAgICAgICAgICAgICAgZiA9IHRoYXQuaHVlIC8gNjA7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGYgPSBmIC0gTWF0aC5mbG9vcihmKTtcbiAgICBcbiAgICAgICAgICAgIHZhciBcbiAgICAgICAgICAgICAgICBzID0gdGhhdC5zYXR1cmF0aW9uIC8gMjU1LFxuICAgICAgICAgICAgICAgIG0gPSB+fih0aGF0LnZhbHVlICogKDEgLSBzKSksXG4gICAgICAgICAgICAgICAgbiA9IH5+KHRoYXQudmFsdWUgKiAoMSAtIHMgKiBmKSksXG4gICAgICAgICAgICAgICAgayA9IH5+KHRoYXQudmFsdWUgKiAoMSAtIHMgKiAoMSAtIGYpKSk7XG4gICAgXG4gICAgICAgICAgICBzd2l0Y2ggKH5+KHRoYXQuaHVlIC8gNjApKSB7XG4gICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgdGhhdC5yZ2IgPSAodGhhdC52YWx1ZSA8PCAxNikgfCAoayA8PCA4KSB8IG07XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgdGhhdC5yZ2IgPSAobiA8PCAxNikgfCAodGhhdC52YWx1ZSA8PCA4KSB8IG07XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgdGhhdC5yZ2IgPSAobSA8PCAxNikgfCAodGhhdC52YWx1ZSA8PCA4KSB8IGs7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgdGhhdC5yZ2IgPSAobSA8PCAxNikgfCAobiA8PCA4KSB8IHRoYXQudmFsdWU7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICAgICAgdGhhdC5yZ2IgPSAoayA8PCAxNikgfCAobSA8PCA4KSB8IHRoYXQudmFsdWU7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDU6XG4gICAgICAgICAgICAgICAgdGhhdC5yZ2IgPSAodGhhdC52YWx1ZSA8PCAxNikgfCAobSA8PCA4KSB8IG47XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHRoYXQucmdiID0gMDsgLy8gaW52YWxpZCBodWVcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuZ2V0UmdiID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJnYjtcbiAgICB9O1xuICAgIFxuICAgIHRoaXMuZ2V0U2F0dXJhdGlvbiA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zYXR1cmF0aW9uO1xuICAgIH07XG5cbiAgICB0aGlzLmdldEh1ZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5odWU7XG4gICAgfTtcbiAgICBcbiAgICB0aGlzLmdldFZhbHVlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnZhbHVlO1xuICAgIH07XG4gICAgXG4gICAgdGhpcy5zZXRSZ2JDb21wb25lbnRzID0gZnVuY3Rpb24ociwgZywgYikge1xuICAgICAgICB0aGlzLnNldFJnYigociA8PCAxNikgfCAoZyA8PCA4KSB8IGIpO1xuICAgIH1cbiAgICBcbiAgICB0aGlzLnNldFJnYiA9IGZ1bmN0aW9uKHJnYikge1xuICAgICAgICB0aGlzLnJnYiA9IHJnYjtcbiAgICAgICAgcmdiVG9Ic3YoKTtcbiAgICB9O1xuXG4gICAgdGhpcy5zZXRIc3YgPSBmdW5jdGlvbihodWUsIHZhbHVlLCBzYXR1cmF0aW9uKSB7XG4gICAgICAgIHRoaXMuaHVlID0gaHVlO1xuICAgICAgICB0aGlzLnNhdHVyYXRpb24gPSBzYXR1cmF0aW9uO1xuICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7XG5cbiAgICAgICAgaHN2VG9SZ2IoKTtcbiAgICB9O1xuXG4gICAgdGhpcy5zZXRIdWUgPSBmdW5jdGlvbihodWUpIHtcbiAgICAgICAgdGhpcy5odWUgPSBodWU7XG4gICAgICAgIGhzdlRvUmdiKCk7XG4gICAgfTtcblxuICAgIHRoaXMuc2V0U2F0dXJhdGlvbiA9IGZ1bmN0aW9uKHNhdHVyYXRpb24pIHtcbiAgICAgICAgdGhpcy5zYXR1cmF0aW9uID0gc2F0dXJhdGlvbjtcbiAgICAgICAgaHN2VG9SZ2IoKTtcbiAgICB9O1xuXG4gICAgdGhpcy5zZXRWYWx1ZSA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgaHN2VG9SZ2IoKTtcbiAgICB9O1xuXG4gICAgdGhpcy5jbG9uZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgXG4gICAgICAgICAgICByZXN1bHQgPSBuZXcgQ1BDb2xvcigpO1xuICAgICAgICBcbiAgICAgICAgcmVzdWx0LmNvcHlGcm9tKHRoaXMpO1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9O1xuXG4gICAgdGhpcy5jb3B5RnJvbSA9IGZ1bmN0aW9uKGMpIHtcbiAgICAgICAgdGhpcy5yZ2IgPSBjLnJnYjtcbiAgICAgICAgdGhpcy5odWUgPSBjLmh1ZTtcbiAgICAgICAgdGhpcy5zYXR1cmF0aW9uID0gYy5zYXR1cmF0aW9uO1xuICAgICAgICB0aGlzLnZhbHVlID0gYy52YWx1ZTtcbiAgICB9O1xuXG4gICAgdGhpcy5pc0VxdWFsID0gZnVuY3Rpb24oY29sb3IpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmdiID09IGNvbG9yLnJnYiAmJiB0aGlzLmh1ZSA9PSBjb2xvci5odWUgJiYgdGhpcy5zYXR1cmF0aW9uID09IGNvbG9yLnNhdHVyYXRpb24gJiYgdGhpcy52YWx1ZSA9PSBjb2xvci52YWx1ZTtcbiAgICB9O1xuICAgIFxuICAgIHRoaXMuc2V0UmdiKHJnYiB8fCAwKTtcbn1cbiIsIi8qXG4gICAgQ2hpY2tlblBhaW50XG4gICAgXG4gICAgQ2hpY2tlblBhaW50IGlzIGEgdHJhbnNsYXRpb24gb2YgQ2hpYmlQYWludCBmcm9tIEphdmEgdG8gSmF2YVNjcmlwdFxuICAgIGJ5IE5pY2hvbGFzIFNoZXJsb2NrIC8gQ2hpY2tlbiBTbW9vdGhpZS5cbiAgICBcbiAgICBDaGliaVBhaW50IGlzIENvcHlyaWdodCAoYykgMjAwNi0yMDA4IE1hcmMgU2NoZWZlclxuXG4gICAgQ2hpY2tlblBhaW50IGlzIGZyZWUgc29mdHdhcmU6IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vciBtb2RpZnlcbiAgICBpdCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGFzIHB1Ymxpc2hlZCBieVxuICAgIHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb24sIGVpdGhlciB2ZXJzaW9uIDMgb2YgdGhlIExpY2Vuc2UsIG9yXG4gICAgKGF0IHlvdXIgb3B0aW9uKSBhbnkgbGF0ZXIgdmVyc2lvbi5cblxuICAgIENoaWNrZW5QYWludCBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLFxuICAgIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mXG4gICAgTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiAgU2VlIHRoZVxuICAgIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuXG5cbiAgICBZb3Ugc2hvdWxkIGhhdmUgcmVjZWl2ZWQgYSBjb3B5IG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZVxuICAgIGFsb25nIHdpdGggQ2hpY2tlblBhaW50LiBJZiBub3QsIHNlZSA8aHR0cDovL3d3dy5nbnUub3JnL2xpY2Vuc2VzLz4uXG4qL1xuXG4vLyBBbiBSR0IgY29sb3Igd2l0aCBmbG9hdGluZyBwb2ludCB2YWx1ZXMgZm9yIGVhY2ggY2hhbm5lbCAoYmV0d2VlbiAwLjAgYW5kIDEuMClcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIENQQ29sb3JGbG9hdChyLCBnLCBiKSB7XG4gICAgdGhpcy5yID0gcjtcbiAgICB0aGlzLmcgPSBnO1xuICAgIHRoaXMuYiA9IGI7XG59XG5cbkNQQ29sb3JGbG9hdC5wcm90b3R5cGUudG9JbnQgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gKE1hdGgubWF4KDAsIE1hdGgubWluKDI1NSwgTWF0aC5yb3VuZCh0aGlzLnIgKiAyNTUpKSkgPDwgMTYpIFxuICAgICAgICB8IChNYXRoLm1heCgwLCBNYXRoLm1pbigyNTUsIE1hdGgucm91bmQodGhpcy5nICogMjU1KSkpIDw8IDgpXG4gICAgICAgIHwgTWF0aC5tYXgoMCwgTWF0aC5taW4oMjU1LCBNYXRoLnJvdW5kKHRoaXMuYiAqIDI1NSkpKTtcbn07XG5cbkNQQ29sb3JGbG9hdC5wcm90b3R5cGUubWl4V2l0aCA9IGZ1bmN0aW9uKGNvbG9yLCBhbHBoYSkge1xuICAgIHRoaXMuciA9IHRoaXMuciAqICgxLjAgLSBhbHBoYSkgKyBjb2xvci5yICogYWxwaGE7XG4gICAgdGhpcy5nID0gdGhpcy5nICogKDEuMCAtIGFscGhhKSArIGNvbG9yLmcgKiBhbHBoYTtcbiAgICB0aGlzLmIgPSB0aGlzLmIgKiAoMS4wIC0gYWxwaGEpICsgY29sb3IuYiAqIGFscGhhO1xufTtcblxuQ1BDb2xvckZsb2F0LnByb3RvdHlwZS5jbG9uZSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBuZXcgQ1BDb2xvckZsb2F0KHRoaXMuciwgdGhpcy5nLCB0aGlzLmIpO1xufTtcblxuQ1BDb2xvckZsb2F0LmNyZWF0ZUZyb21JbnQgPSBmdW5jdGlvbihjb2xvcikge1xuICAgIHJldHVybiBuZXcgQ1BDb2xvckZsb2F0KFxuICAgICAgICAoKGNvbG9yID4+PiAxNikgJiAweGZmKSAvIDI1NSxcbiAgICAgICAgKChjb2xvciA+Pj4gOCkgJiAweGZmKSAvIDI1NSxcbiAgICAgICAgKGNvbG9yICYgMHhmZikgLyAyNTVcbiAgICApO1xufTsiLCIvKlxuICAgIENoaWNrZW5QYWludFxuICAgIFxuICAgIENoaWNrZW5QYWludCBpcyBhIHRyYW5zbGF0aW9uIG9mIENoaWJpUGFpbnQgZnJvbSBKYXZhIHRvIEphdmFTY3JpcHRcbiAgICBieSBOaWNob2xhcyBTaGVybG9jayAvIENoaWNrZW4gU21vb3RoaWUuXG4gICAgXG4gICAgQ2hpYmlQYWludCBpcyBDb3B5cmlnaHQgKGMpIDIwMDYtMjAwOCBNYXJjIFNjaGVmZXJcblxuICAgIENoaWNrZW5QYWludCBpcyBmcmVlIHNvZnR3YXJlOiB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3IgbW9kaWZ5XG4gICAgaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBhcyBwdWJsaXNoZWQgYnlcbiAgICB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uLCBlaXRoZXIgdmVyc2lvbiAzIG9mIHRoZSBMaWNlbnNlLCBvclxuICAgIChhdCB5b3VyIG9wdGlvbikgYW55IGxhdGVyIHZlcnNpb24uXG5cbiAgICBDaGlja2VuUGFpbnQgaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCxcbiAgICBidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZlxuICAgIE1FUkNIQU5UQUJJTElUWSBvciBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS4gIFNlZSB0aGVcbiAgICBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9yZSBkZXRhaWxzLlxuXG4gICAgWW91IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2VcbiAgICBhbG9uZyB3aXRoIENoaWNrZW5QYWludC4gSWYgbm90LCBzZWUgPGh0dHA6Ly93d3cuZ251Lm9yZy9saWNlbnNlcy8+LlxuKi9cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gQ1BSYW5kb20oKSB7XG4gICAgdmFyIFxuICAgICAgICBuZXh0TmV4dEdhdXNzaWFuLCBcbiAgICAgICAgaGF2ZU5leHROZXh0R2F1c3NpYW4gPSBmYWxzZTtcblxuICAgIC8qKlxuICAgICAqIERlZmluaXRpb24gZnJvbSBKYXZhLCBtZWFuIG9mIDAuMCBhbmQgc3RhbmRhcmQgZGV2aWF0aW9uIDEuMC5cbiAgICAgKi9cbiAgICB0aGlzLm5leHRHYXVzc2lhbiA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAoaGF2ZU5leHROZXh0R2F1c3NpYW4pIHtcbiAgICAgICAgICAgIGhhdmVOZXh0TmV4dEdhdXNzaWFuID0gZmFsc2U7XG4gICAgICAgICAgICByZXR1cm4gbmV4dE5leHRHYXVzc2lhbjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgdjEsIHYyLCBzO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBkbyB7XG4gICAgICAgICAgICAgICAgdjEgPSAyICogTWF0aC5yYW5kb20oKSAtIDE7IC8vIGJldHdlZW4gLTEuMCBhbmQgMS4wXG4gICAgICAgICAgICAgICAgdjIgPSAyICogTWF0aC5yYW5kb20oKSAtIDE7IC8vIGJldHdlZW4gLTEuMCBhbmQgMS4wXG4gICAgICAgICAgICAgICAgcyA9IHYxICogdjEgKyB2MiAqIHYyO1xuICAgICAgICAgICAgfSB3aGlsZSAocyA+PSAxIHx8IHMgPT0gMCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgIG11bHRpcGxpZXIgPSBNYXRoLnNxcnQoLTIgKiBNYXRoLmxvZyhzKSAvIHMpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBuZXh0TmV4dEdhdXNzaWFuID0gdjIgKiBtdWx0aXBsaWVyO1xuICAgICAgICAgICAgaGF2ZU5leHROZXh0R2F1c3NpYW4gPSB0cnVlO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICByZXR1cm4gdjEgKiBtdWx0aXBsaWVyO1xuICAgICAgICB9XG4gICAgfTtcbn07IiwiLypcbiAgICBDaGlja2VuUGFpbnRcbiAgICBcbiAgICBDaGlja2VuUGFpbnQgaXMgYSB0cmFuc2xhdGlvbiBvZiBDaGliaVBhaW50IGZyb20gSmF2YSB0byBKYXZhU2NyaXB0XG4gICAgYnkgTmljaG9sYXMgU2hlcmxvY2sgLyBDaGlja2VuIFNtb290aGllLlxuICAgIFxuICAgIENoaWJpUGFpbnQgaXMgQ29weXJpZ2h0IChjKSAyMDA2LTIwMDggTWFyYyBTY2hlZmVyXG5cbiAgICBDaGlja2VuUGFpbnQgaXMgZnJlZSBzb2Z0d2FyZTogeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yIG1vZGlmeVxuICAgIGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgYXMgcHVibGlzaGVkIGJ5XG4gICAgdGhlIEZyZWUgU29mdHdhcmUgRm91bmRhdGlvbiwgZWl0aGVyIHZlcnNpb24gMyBvZiB0aGUgTGljZW5zZSwgb3JcbiAgICAoYXQgeW91ciBvcHRpb24pIGFueSBsYXRlciB2ZXJzaW9uLlxuXG4gICAgQ2hpY2tlblBhaW50IGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsXG4gICAgYnV0IFdJVEhPVVQgQU5ZIFdBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2ZcbiAgICBNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuICBTZWUgdGhlXG4gICAgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy5cblxuICAgIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXG4gICAgYWxvbmcgd2l0aCBDaGlja2VuUGFpbnQuIElmIG5vdCwgc2VlIDxodHRwOi8vd3d3LmdudS5vcmcvbGljZW5zZXMvPi5cbiovXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIENQUmVjdChsZWZ0LCB0b3AsIHJpZ2h0LCBib3R0b20pIHtcbiAgICAvKlxuICAgIGlmIChsZWZ0ID09PSB1bmRlZmluZWQgfHwgdG9wID09PSB1bmRlZmluZWQgfHwgcmlnaHQgPT09IHVuZGVmaW5lZCB8fCBib3R0b20gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICB0aHJvdyBcIkJhZCByZWN0XCI7XG4gICAgfVxuICAgIFxuICAgIGlmICh+fmxlZnQgIT09IGxlZnQgfHwgfn50b3AgIT09IHRvcCB8fCB+fnJpZ2h0ICE9PSByaWdodCB8fCB+fmJvdHRvbSAhPT0gYm90dG9tKSB7XG4gICAgICAgIHRocm93IFwiQmFkIHJlY3RcIjtcbiAgICB9XG4gICAgKi9cbiAgICBcbiAgICB0aGlzLmxlZnQgPSBsZWZ0O1xuICAgIHRoaXMudG9wID0gdG9wO1xuICAgIHRoaXMucmlnaHQgPSByaWdodDtcbiAgICB0aGlzLmJvdHRvbSA9IGJvdHRvbTtcbn1cblxuQ1BSZWN0LnByb3RvdHlwZS5tYWtlRW1wdHkgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLmxlZnQgPSAwO1xuICAgIHRoaXMudG9wID0gMDtcbiAgICB0aGlzLnJpZ2h0ID0gMDtcbiAgICB0aGlzLmJvdHRvbSA9IDA7XG59O1xuXG5DUFJlY3QucHJvdG90eXBlLnVuaW9uID0gZnVuY3Rpb24odGhhdCkge1xuICAgIGlmICh0aGlzLmlzRW1wdHkoKSkge1xuICAgICAgICB0aGlzLnNldCh0aGF0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmxlZnQgPSBNYXRoLm1pbih0aGlzLmxlZnQsIHRoYXQubGVmdCk7XG4gICAgICAgIHRoaXMudG9wID0gTWF0aC5taW4odGhpcy50b3AsIHRoYXQudG9wKTtcbiAgICAgICAgdGhpcy5yaWdodCA9IE1hdGgubWF4KHRoaXMucmlnaHQsIHRoYXQucmlnaHQpO1xuICAgICAgICB0aGlzLmJvdHRvbSA9IE1hdGgubWF4KHRoaXMuYm90dG9tLCB0aGF0LmJvdHRvbSk7XG4gICAgfVxufTtcblxuLyoqXG4gKiBDbGlwIHRoaXMgcmVjdGFuZ2xlIHRvIGZpdCB3aXRoaW4gYHRoYXRgLlxuICogXG4gKiBAcmV0dXJucyBhIHJlZmVuY2UgdG8gdGhpcyByZWN0YW5nbGUgZm9yIGNoYWluaW5nIFxuICovXG5DUFJlY3QucHJvdG90eXBlLmNsaXAgPSBmdW5jdGlvbih0aGF0KSB7XG4gICAgaWYgKCF0aGlzLmlzRW1wdHkoKSkge1xuICAgICAgICBpZiAodGhhdC5pc0VtcHR5KCkpIHtcbiAgICAgICAgICAgIHRoaXMubWFrZUVtcHR5KCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmxlZnQgPSBNYXRoLm1heCh0aGlzLmxlZnQsIHRoYXQubGVmdCk7XG4gICAgICAgICAgICB0aGlzLnRvcCA9IE1hdGgubWF4KHRoaXMudG9wLCB0aGF0LnRvcCk7XG4gICAgICAgICAgICB0aGlzLnJpZ2h0ID0gTWF0aC5taW4odGhpcy5yaWdodCwgdGhhdC5yaWdodCk7XG4gICAgICAgICAgICB0aGlzLmJvdHRvbSA9IE1hdGgubWluKHRoaXMuYm90dG9tLCB0aGF0LmJvdHRvbSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIHRoaXM7XG59O1xuXG5DUFJlY3QucHJvdG90eXBlLmlzSW5zaWRlID0gZnVuY3Rpb24odGhhdCkge1xuICAgIHJldHVybiB0aGlzLmxlZnQgPj0gdGhhdC5sZWZ0ICYmIHRoaXMudG9wID49IHRoYXQudG9wICYmIHRoaXMucmlnaHQgPD0gdGhhdC5yaWdodCAmJiB0aGlzLmJvdHRvbSA8PSB0aGF0LmJvdHRvbTtcbn07XG5cbi8qKlxuICogVXNlIHRoaXMgcmVjdGFuZ2xlIGFzIGJvdW5kcyB0byBjbGlwIHRoZSBwbGFjZW1lbnQgb2YgdGhlIGFyZWEgb2Ygc3JjUmVjdCBhdCB0aGUgcG9zaXRpb24gb2YgZHN0UmVjdCBpbnNpZGVcbiAqIG91ciBib3VuZHMuXG4gKlxuICogZHN0UmVjdCBoYXMgaXRzIHJpZ2h0IGFuZCBib3R0b20gc2V0IGJ5IHRoaXMgb3BlcmF0aW9uIHRvIG1hdGNoIHRoZSBhcmVhIHRoYXQgd291bGQgYmUgY29waWVkIGZyb20gdGhlIHNvdXJjZS5cbiAqIHNyY1JlY3QgaGFzIGl0cyBjb29yZGluYXRlcyB0d2Vha2VkIHRvIG1hdGNoIHRoZSBhcmVhIHRoYXQgd2lsbCBiZSBjb3BpZWQuXG4gKi9cbkNQUmVjdC5wcm90b3R5cGUuY2xpcFNvdXJjZURlc3QgPSBmdW5jdGlvbihzcmNSZWN0LCBkc3RSZWN0KSB7XG4gICAgZHN0UmVjdC5yaWdodCA9IGRzdFJlY3QubGVmdCArIHNyY1JlY3QuZ2V0V2lkdGgoKTtcbiAgICBkc3RSZWN0LmJvdHRvbSA9IGRzdFJlY3QudG9wICsgc3JjUmVjdC5nZXRIZWlnaHQoKTtcblxuICAgIGlmICh0aGlzLmlzRW1wdHkoKSB8fCBkc3RSZWN0LmxlZnQgPj0gdGhpcy5yaWdodCB8fCBkc3RSZWN0LnRvcCA+PSB0aGlzLmJvdHRvbSB8fCBkc3RSZWN0LnJpZ2h0IDw9IHRoaXMubGVmdCB8fCBkc3RSZWN0LmJvdHRvbSA8PSB0aGlzLnRvcCkge1xuICAgICAgICBzcmNSZWN0Lm1ha2VFbXB0eSgpO1xuICAgICAgICBkc3RSZWN0Lm1ha2VFbXB0eSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIGJvdHRvbS9yaWdodFxuICAgICAgICBpZiAoZHN0UmVjdC5yaWdodCA+IHRoaXMucmlnaHQpIHtcbiAgICAgICAgICAgIHNyY1JlY3QucmlnaHQgLT0gZHN0UmVjdC5yaWdodCAtIHRoaXMucmlnaHQ7XG4gICAgICAgICAgICBkc3RSZWN0LnJpZ2h0ID0gdGhpcy5yaWdodDtcbiAgICAgICAgfVxuICAgIFxuICAgICAgICBpZiAoZHN0UmVjdC5ib3R0b20gPiB0aGlzLmJvdHRvbSkge1xuICAgICAgICAgICAgc3JjUmVjdC5ib3R0b20gLT0gZHN0UmVjdC5ib3R0b20gLSB0aGlzLmJvdHRvbTtcbiAgICAgICAgICAgIGRzdFJlY3QuYm90dG9tID0gdGhpcy5ib3R0b207XG4gICAgICAgIH1cbiAgICBcbiAgICAgICAgLy8gdG9wL2xlZnRcbiAgICAgICAgaWYgKGRzdFJlY3QubGVmdCA8IHRoaXMubGVmdCkge1xuICAgICAgICAgICAgc3JjUmVjdC5sZWZ0ICs9IHRoaXMubGVmdCAtIGRzdFJlY3QubGVmdDtcbiAgICAgICAgICAgIGRzdFJlY3QubGVmdCA9IHRoaXMubGVmdDtcbiAgICAgICAgfVxuICAgIFxuICAgICAgICBpZiAoZHN0UmVjdC50b3AgPCB0aGlzLnRvcCkge1xuICAgICAgICAgICAgc3JjUmVjdC50b3AgKz0gdGhpcy50b3AgLSBkc3RSZWN0LnRvcDtcbiAgICAgICAgICAgIGRzdFJlY3QudG9wID0gdGhpcy50b3A7XG4gICAgICAgIH1cbiAgICB9XG59O1xuXG5DUFJlY3QucHJvdG90eXBlLmdldFdpZHRoID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMucmlnaHQgLSB0aGlzLmxlZnQ7XG59O1xuXG5DUFJlY3QucHJvdG90eXBlLmdldEhlaWdodCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLmJvdHRvbSAtIHRoaXMudG9wO1xufTtcblxuQ1BSZWN0LnByb3RvdHlwZS5pc0VtcHR5ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMucmlnaHQgPD0gdGhpcy5sZWZ0IHx8IHRoaXMuYm90dG9tIDw9IHRoaXMudG9wO1xufTtcblxuQ1BSZWN0LnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbihyKSB7XG4gICAgdGhpcy5sZWZ0ID0gci5sZWZ0O1xuICAgIHRoaXMudG9wID0gci50b3A7XG4gICAgdGhpcy5yaWdodCA9IHIucmlnaHQ7XG4gICAgdGhpcy5ib3R0b20gPSByLmJvdHRvbTtcbn07XG5cbkNQUmVjdC5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gbmV3IENQUmVjdCh0aGlzLmxlZnQsIHRoaXMudG9wLCB0aGlzLnJpZ2h0LCB0aGlzLmJvdHRvbSk7XG59O1xuXG5DUFJlY3QucHJvdG90eXBlLnRyYW5zbGF0ZSA9IGZ1bmN0aW9uKHgsIHkpIHtcbiAgICB0aGlzLmxlZnQgKz0geDtcbiAgICB0aGlzLnJpZ2h0ICs9IHg7XG4gICAgdGhpcy50b3AgKz0geTtcbiAgICB0aGlzLmJvdHRvbSArPSB5O1xufTtcblxuQ1BSZWN0LnByb3RvdHlwZS5tb3ZlVG8gPSBmdW5jdGlvbih4LCB5KSB7XG4gICAgdGhpcy50cmFuc2xhdGUoeCAtIHRoaXMubGVmdCwgeSAtIHRoaXMudG9wKTtcbn07XG5cbkNQUmVjdC5wcm90b3R5cGUuZXF1YWxzID0gZnVuY3Rpb24odGhhdCkge1xuICAgIHJldHVybiB0aGlzLmxlZnQgPT0gdGhhdC5sZWZ0ICYmIHRoaXMucmlnaHQgPT0gdGhhdC5yaWdodCAmJiB0aGlzLnRvcCA9PSB0aGF0LnRvcCAmJiB0aGlzLmJvdHRvbSA9PSB0aGF0LmJvdHRvbTtcbn07XG5cbi8qKlxuICogQWRkIGggcGl4ZWxzIHRvIGJvdGggdGhlIGxlZnQgYW5kIHJpZ2h0IHNpZGVzIG9mIHRoZSByZWN0YW5nbGUsIGFuZCB2IHBpeGVscyB0byBib3RoIHRoZSB0b3AgYW5kIGJvdHRvbSBzaWRlcy5cbiAqICBcbiAqIEBwYXJhbSBoXG4gKiBAcGFyYW0gdlxuICovXG5DUFJlY3QucHJvdG90eXBlLmdyb3cgPSBmdW5jdGlvbihoLCB2KSB7XG4gICAgLy8gVE9ETyBjaGVja3MgZm9yIHJlY3RhbmdsZXMgd2l0aCB6ZXJvLWV4dGVudFxuICAgIHRoaXMubGVmdCAtPSBoO1xuICAgIHRoaXMucmlnaHQgKz0gaDtcbiAgICB0aGlzLnRvcCAtPSB2O1xuICAgIHRoaXMuYm90dG9tICs9IHY7XG59O1xuXG5DUFJlY3QucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIFwiKFwiICsgdGhpcy5sZWZ0ICsgXCIsXCIgKyB0aGlzLnRvcCArIFwiLFwiICsgdGhpcy5yaWdodCArIFwiLFwiICsgdGhpcy5ib3R0b20gKyBcIilcIjtcbn07XG5cbi8qIFxuICogQ2hyb21lIGlzIGluaXRpYWxseSBlYWdlciB0byBvcHRpbWl6ZSBDUFJlY3QgYW5kIHVzZXJzIGFzc3VtaW5nIHRoYXQgYWxsIHRoZSBmaWVsZHMgYXJlIFNNSXMsIHRoZW4gbGF0ZXIgb24gZGVjaWRlc1xuICogdGhhdCB0aGV5IHNob3VsZCBiZSB0YWdnZWQgbnVtYmVycyBhZnRlciBhbGwuIFRoaXMgY2F1c2VzIGFsbCB0aGUgYmxlbmRpbmcgb3BlcmF0aW9uIGZ1bmN0aW9ucyB0byBiZSByZW9wdGltaXplZFxuICogYSBjb3VwbGUgb2YgdGltZXMuIFxuICogXG4gKiBBdm9pZCB0aGF0IG1lc3MgYnkgc3RhcnRpbmcgdGhpbmdzIG9mZiB3aXRoIGZsb2F0cyBpbiB0aGUgbWVtYmVycy4gIFxuICovXG53aW5kb3cuY3BSZWN0R2FyYmFnZSA9IG5ldyBDUFJlY3QoMS41LCAyLjUsIDMuNSwgNC41KTsiLCIvLyBNb2RpZmljYXRpb25zIGJ5IE5pY2hvbGFzIFNoZXJsb2NrLiBPcmlnaW5hbCBkb2NzIGJlbG93OlxuXG4vLyBMYXN0IHVwZGF0ZWQgTm92ZW1iZXIgMjAxMVxuLy8gQnkgU2ltb24gU2FycmlzXG4vLyB3d3cuc2ltb25zYXJyaXMuY29tXG4vLyBzYXJyaXNAYWNtLm9yZ1xuLy9cbi8vIEZyZWUgdG8gdXNlIGFuZCBkaXN0cmlidXRlIGF0IHdpbGxcbi8vIFNvIGxvbmcgYXMgeW91IGFyZSBuaWNlIHRvIHBlb3BsZSwgZXRjXG5cbi8vIFNpbXBsZSBjbGFzcyBmb3Iga2VlcGluZyB0cmFjayBvZiB0aGUgY3VycmVudCB0cmFuc2Zvcm1hdGlvbiBtYXRyaXhcblxuLy8gRm9yIGluc3RhbmNlOlxuLy8gICAgdmFyIHQgPSBuZXcgVHJhbnNmb3JtKCk7XG4vLyAgICB0LnJvdGF0ZSg1KTtcbi8vICAgIHZhciBtID0gdC5tO1xuLy8gICAgY3R4LnNldFRyYW5zZm9ybShtWzBdLCBtWzFdLCBtWzJdLCBtWzNdLCBtWzRdLCBtWzVdKTtcblxuLy8gSXMgZXF1aXZhbGVudCB0bzpcbi8vICAgIGN0eC5yb3RhdGUoNSk7XG5cbi8vIEJ1dCBub3cgeW91IGNhbiByZXRyaWV2ZSBpdCA6KVxuXG4vLyBSZW1lbWJlciB0aGF0IHRoaXMgZG9lcyBub3QgYWNjb3VudCBmb3IgYW55IENTUyB0cmFuc2Zvcm1zIGFwcGxpZWQgdG8gdGhlIGNhbnZhc1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBDUFRyYW5zZm9ybSgpIHtcbiAgICB0aGlzLnNldFRvSWRlbnRpdHkoKTtcbn1cblxuQ1BUcmFuc2Zvcm0ucHJvdG90eXBlLnNldFRvSWRlbnRpdHkgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLm0gPSBbIDEsIDAsIDAsIDEsIDAsIDAgXTtcbn07XG5cbkNQVHJhbnNmb3JtLnByb3RvdHlwZS5tdWx0aXBseSA9IGZ1bmN0aW9uKG1hdHJpeCkge1xuICAgIHZhciBcbiAgICAgICAgbTExID0gdGhpcy5tWzBdICogbWF0cml4Lm1bMF0gKyB0aGlzLm1bMl0gKiBtYXRyaXgubVsxXSxcbiAgICAgICAgbTEyID0gdGhpcy5tWzFdICogbWF0cml4Lm1bMF0gKyB0aGlzLm1bM10gKiBtYXRyaXgubVsxXSxcblxuICAgICAgICBtMjEgPSB0aGlzLm1bMF0gKiBtYXRyaXgubVsyXSArIHRoaXMubVsyXSAqIG1hdHJpeC5tWzNdLFxuICAgICAgICBtMjIgPSB0aGlzLm1bMV0gKiBtYXRyaXgubVsyXSArIHRoaXMubVszXSAqIG1hdHJpeC5tWzNdLFxuXG4gICAgICAgIGR4ID0gdGhpcy5tWzBdICogbWF0cml4Lm1bNF0gKyB0aGlzLm1bMl0gKiBtYXRyaXgubVs1XSArIHRoaXMubVs0XSxcbiAgICAgICAgZHkgPSB0aGlzLm1bMV0gKiBtYXRyaXgubVs0XSArIHRoaXMubVszXSAqIG1hdHJpeC5tWzVdICsgdGhpcy5tWzVdO1xuXG4gICAgdGhpcy5tWzBdID0gbTExO1xuICAgIHRoaXMubVsxXSA9IG0xMjtcbiAgICB0aGlzLm1bMl0gPSBtMjE7XG4gICAgdGhpcy5tWzNdID0gbTIyO1xuICAgIHRoaXMubVs0XSA9IGR4O1xuICAgIHRoaXMubVs1XSA9IGR5O1xufTtcblxuQ1BUcmFuc2Zvcm0ucHJvdG90eXBlLmludmVydCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBcbiAgICAgICAgZCA9IDEgLyAodGhpcy5tWzBdICogdGhpcy5tWzNdIC0gdGhpcy5tWzFdICogdGhpcy5tWzJdKSxcbiAgICAgICAgbTAgPSB0aGlzLm1bM10gKiBkLFxuICAgICAgICBtMSA9IC10aGlzLm1bMV0gKiBkLFxuICAgICAgICBtMiA9IC10aGlzLm1bMl0gKiBkLFxuICAgICAgICBtMyA9IHRoaXMubVswXSAqIGQsXG4gICAgICAgIG00ID0gZCAqICh0aGlzLm1bMl0gKiB0aGlzLm1bNV0gLSB0aGlzLm1bM10gKiB0aGlzLm1bNF0pLFxuICAgICAgICBtNSA9IGQgKiAodGhpcy5tWzFdICogdGhpcy5tWzRdIC0gdGhpcy5tWzBdICogdGhpcy5tWzVdKTtcbiAgICBcbiAgICB0aGlzLm1bMF0gPSBtMDtcbiAgICB0aGlzLm1bMV0gPSBtMTtcbiAgICB0aGlzLm1bMl0gPSBtMjtcbiAgICB0aGlzLm1bM10gPSBtMztcbiAgICB0aGlzLm1bNF0gPSBtNDtcbiAgICB0aGlzLm1bNV0gPSBtNTtcbn07XG5cbkNQVHJhbnNmb3JtLnByb3RvdHlwZS5nZXRJbnZlcnRlZCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhclxuICAgICAgICByZXN1bHQgPSBuZXcgQ1BUcmFuc2Zvcm0oKTtcbiAgICBcbiAgICByZXN1bHQubVswXSA9IHRoaXMubVswXTtcbiAgICByZXN1bHQubVsxXSA9IHRoaXMubVsxXTtcbiAgICByZXN1bHQubVsyXSA9IHRoaXMubVsyXTtcbiAgICByZXN1bHQubVszXSA9IHRoaXMubVszXTtcbiAgICByZXN1bHQubVs0XSA9IHRoaXMubVs0XTtcbiAgICByZXN1bHQubVs1XSA9IHRoaXMubVs1XTtcbiAgICBcbiAgICByZXN1bHQuaW52ZXJ0KCk7XG4gICAgXG4gICAgcmV0dXJuIHJlc3VsdDtcbn07XG5cbkNQVHJhbnNmb3JtLnByb3RvdHlwZS5yb3RhdGUgPSBmdW5jdGlvbihyYWQpIHtcbiAgICB2YXIgXG4gICAgICAgIGMgPSBNYXRoLmNvcyhyYWQpLFxuICAgICAgICBzID0gTWF0aC5zaW4ocmFkKSxcbiAgICAgICAgbTExID0gdGhpcy5tWzBdICogYyArIHRoaXMubVsyXSAqIHMsXG4gICAgICAgIG0xMiA9IHRoaXMubVsxXSAqIGMgKyB0aGlzLm1bM10gKiBzLFxuICAgICAgICBtMjEgPSB0aGlzLm1bMF0gKiAtcyArIHRoaXMubVsyXSAqIGMsXG4gICAgICAgIG0yMiA9IHRoaXMubVsxXSAqIC1zICsgdGhpcy5tWzNdICogYztcbiAgICBcbiAgICB0aGlzLm1bMF0gPSBtMTE7XG4gICAgdGhpcy5tWzFdID0gbTEyO1xuICAgIHRoaXMubVsyXSA9IG0yMTtcbiAgICB0aGlzLm1bM10gPSBtMjI7XG59O1xuXG5DUFRyYW5zZm9ybS5wcm90b3R5cGUucm90YXRlQXJvdW5kUG9pbnQgPSBmdW5jdGlvbihyYWQsIHgsIHkpIHtcbiAgICB0aGlzLnRyYW5zbGF0ZSh4LCB5KTtcbiAgICB0aGlzLnJvdGF0ZShyYWQpO1xuICAgIHRoaXMudHJhbnNsYXRlKC14LCAteSk7XG59O1xuXG5DUFRyYW5zZm9ybS5wcm90b3R5cGUudHJhbnNsYXRlID0gZnVuY3Rpb24oeCwgeSkge1xuICAgIHRoaXMubVs0XSArPSB0aGlzLm1bMF0gKiB4ICsgdGhpcy5tWzJdICogeTtcbiAgICB0aGlzLm1bNV0gKz0gdGhpcy5tWzFdICogeCArIHRoaXMubVszXSAqIHk7XG59O1xuXG5DUFRyYW5zZm9ybS5wcm90b3R5cGUuc2NhbGUgPSBmdW5jdGlvbihzeCwgc3kpIHtcbiAgICB0aGlzLm1bMF0gKj0gc3g7XG4gICAgdGhpcy5tWzFdICo9IHN4O1xuICAgIHRoaXMubVsyXSAqPSBzeTtcbiAgICB0aGlzLm1bM10gKj0gc3k7XG59O1xuXG5DUFRyYW5zZm9ybS5wcm90b3R5cGUudHJhbnNmb3JtUG9pbnQgPSBmdW5jdGlvbihweCwgcHkpIHtcbiAgICB2YXIgXG4gICAgICAgIHggPSBweCxcbiAgICAgICAgeSA9IHB5O1xuICAgIFxuICAgIHB4ID0geCAqIHRoaXMubVswXSArIHkgKiB0aGlzLm1bMl0gKyB0aGlzLm1bNF07XG4gICAgcHkgPSB4ICogdGhpcy5tWzFdICsgeSAqIHRoaXMubVszXSArIHRoaXMubVs1XTtcbiAgICBcbiAgICByZXR1cm4ge3g6IHB4LCB5OiBweX07XG59O1xuXG5DUFRyYW5zZm9ybS5wcm90b3R5cGUuZ2V0VHJhbnNsYXRlWCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLm1bNF07XG59O1xuXG5DUFRyYW5zZm9ybS5wcm90b3R5cGUuZ2V0VHJhbnNsYXRlWSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLm1bNV07XG59O1xuXG5DUFRyYW5zZm9ybS5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbigpIHtcbiAgICB2YXJcbiAgICAgICAgcmVzdWx0ID0gbmV3IENQVHJhbnNmb3JtKCk7XG4gICAgXG4gICAgcmVzdWx0Lm1bMF0gPSB0aGlzLm1bMF07XG4gICAgcmVzdWx0Lm1bMV0gPSB0aGlzLm1bMV07XG4gICAgcmVzdWx0Lm1bMl0gPSB0aGlzLm1bMl07XG4gICAgcmVzdWx0Lm1bM10gPSB0aGlzLm1bM107XG4gICAgcmVzdWx0Lm1bNF0gPSB0aGlzLm1bNF07XG4gICAgcmVzdWx0Lm1bNV0gPSB0aGlzLm1bNV07XG4gICAgXG4gICAgcmV0dXJuIHJlc3VsdDtcbn07IiwiLypcbiAgICBDaGlja2VuUGFpbnRcbiAgICBcbiAgICBDaGlja2VuUGFpbnQgaXMgYSB0cmFuc2xhdGlvbiBvZiBDaGliaVBhaW50IGZyb20gSmF2YSB0byBKYXZhU2NyaXB0XG4gICAgYnkgTmljaG9sYXMgU2hlcmxvY2sgLyBDaGlja2VuIFNtb290aGllLlxuICAgIFxuICAgIENoaWJpUGFpbnQgaXMgQ29weXJpZ2h0IChjKSAyMDA2LTIwMDggTWFyYyBTY2hlZmVyXG5cbiAgICBDaGlja2VuUGFpbnQgaXMgZnJlZSBzb2Z0d2FyZTogeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yIG1vZGlmeVxuICAgIGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgYXMgcHVibGlzaGVkIGJ5XG4gICAgdGhlIEZyZWUgU29mdHdhcmUgRm91bmRhdGlvbiwgZWl0aGVyIHZlcnNpb24gMyBvZiB0aGUgTGljZW5zZSwgb3JcbiAgICAoYXQgeW91ciBvcHRpb24pIGFueSBsYXRlciB2ZXJzaW9uLlxuXG4gICAgQ2hpY2tlblBhaW50IGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsXG4gICAgYnV0IFdJVEhPVVQgQU5ZIFdBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2ZcbiAgICBNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuICBTZWUgdGhlXG4gICAgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy5cblxuICAgIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXG4gICAgYWxvbmcgd2l0aCBDaGlja2VuUGFpbnQuIElmIG5vdCwgc2VlIDxodHRwOi8vd3d3LmdudS5vcmcvbGljZW5zZXMvPi5cbiovXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIENQV2Fjb21UYWJsZXQoKSB7XG4gICAgdmFyIFxuICAgICAgICBwZW5BUEkgPSBudWxsLFxuICAgICAgICBwbHVnaW5PYmplY3QsXG4gICAgICAgIFxuICAgICAgICB0aGF0ID0gdGhpcztcblxuICAgIC8qKlxuICAgICAqIElzIHRoZSBwZW4gY3VycmVudGx5IGludGVyYWN0aW5nIHdpdGggdGhlIHRhYmxldCBzdXJmYWNlP1xuICAgICAqL1xuICAgIHRoaXMuaXNQZW4gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyXG4gICAgICAgICAgICBwb2ludGVyVHlwZTtcblxuICAgICAgICBpZiAocGVuQVBJKSB7XG4gICAgICAgICAgICBwb2ludGVyVHlwZSA9IHBlbkFQSS5wb2ludGVyVHlwZTtcblxuICAgICAgICAgICAgcmV0dXJuIHBvaW50ZXJUeXBlID09IDEgLyogUGVuICovIHx8IHBvaW50ZXJUeXBlID09IDMgLyogRXJhc2VyICovO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfTtcbiAgICBcbiAgICB0aGlzLmdldFByZXNzdXJlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmIChwZW5BUEkpIHtcbiAgICAgICAgICAgIHJldHVybiBwZW5BUEkucHJlc3N1cmU7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHJldHVybiAxLjA7XG4gICAgfTtcbiAgICBcbiAgICB0aGlzLnBsdWdpbkxvYWRlZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBjb25zb2xlLmxvZyhcIldhY29tIHRhYmxldCBzdXBwb3J0IGxvYWRlZCFcIik7XG5cbiAgICAgICAgcGVuQVBJID0gcGx1Z2luT2JqZWN0LnBlbkFQSTtcbiAgICB9O1xuICAgIFxuICAgIHRoaXMuaXNUYWJsZXRQcmVzZW50ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiAhIXBlbkFQSTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQ2FsbCBhZnRlciB0aGUgZG9jdW1lbnQgYm9keSBpcyByZWFkeSAobmVlZHMgRE9NIHRvIGJlIHJlYWR5IGZvciBsb2FkaW5nIHRoZSBXYWNvbSBwbHVnaW4pLlxuICAgICAqL1xuICAgIHRoaXMuZGV0ZWN0VGFibGV0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIC8vIENocm9tZSBoYXMgZHJvcHBlZCBOUEFQSSBzdXBwb3J0LCBzbyB0aGUgV2Fjb20gcGx1Z2luIGNhbm5vdCBiZSBpbnN0YWxsZWRcbiAgICAgICAgaWYgKC9DaHJvbWUvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpICYmICEvT1BSLy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpKSB7XG4gICAgICAgICAgICAvLyBQcmV2ZW50IGFuIHVnbHkgXCJ0aGlzIHBhZ2UgaGFzIHRyaWVkIHRvIGxvYWQgYSBwbHVnaW4gd2hpY2ggaXMgbm90IHN1cHBvcnRlZFwiIGVycm9yIG1lc3NhZ2VcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiTm90IGF0dGVtcHRpbmcgdG8gbG9hZCBXYWNvbSB0YWJsZXQgcGx1Z2luLCBzaW5jZSB0aGlzIGlzIENocm9tZVwiKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgY29uc29sZS5sb2coXCJBdHRlbXB0aW5nIHRvIGxvYWQgV2Fjb20gdGFibGV0IHN1cHBvcnQuLi5cIik7XG4gICAgICAgIFxuICAgICAgICBwbHVnaW5PYmplY3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwib2JqZWN0XCIpO1xuICAgICAgICBcbiAgICAgICAgaWYgKFwiY2xhc3NpZFwiIGluIHBsdWdpbk9iamVjdCkgeyAvLyBJRVxuICAgICAgICAgICAgcGx1Z2luT2JqZWN0LmNsYXNzaWQgPSBcIkNMU0lEOjA5MmRmYTg2LTU4MDctNWE5NC1iZjNiLTVhNTNiYTllNTMwOFwiO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgcGFyYW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicGFyYW1cIik7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHBhcmFtLm5hbWUgPSBcIm9ubG9hZFwiO1xuICAgICAgICAgICAgcGFyYW0udmFsdWUgPSBcIm9uV2Fjb21QbHVnaW5Mb2FkZWRcIjtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgcGx1Z2luT2JqZWN0LmFwcGVuZENoaWxkKHBhcmFtKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgcGx1Z2luT2JqZWN0LnR5cGUgPSBcImFwcGxpY2F0aW9uL3gtd2Fjb210YWJsZXRwbHVnaW5cIjtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgcGx1Z2luT2JqZWN0LnN0eWxlLnBvc2l0aW9uID0gXCJhYnNvbHV0ZVwiO1xuICAgICAgICBwbHVnaW5PYmplY3Quc3R5bGUudmlzaWJpbGl0eSA9IFwiaGlkZGVuXCI7XG4gICAgICAgIHBsdWdpbk9iamVjdC5vbmxvYWQgPSBcIm9uV2Fjb21QbHVnaW5Mb2FkZWRcIjtcbiAgICAgICAgXG4gICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQocGx1Z2luT2JqZWN0KTtcbiAgICAgICAgXG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpZiAoIXRoYXQuaXNUYWJsZXRQcmVzZW50KCkpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkxvb2tzIGxpa2UgdGhlIFdhY29tIHBsdWdpbiBpc24ndCBpbnN0YWxsZWQsIG9yIGZhaWxlZCB0byBsb2FkLlwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgNTAwMCk7XG4gICAgfTtcbn1cblxuQ1BXYWNvbVRhYmxldC5nZXRSZWYgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAoQ1BXYWNvbVRhYmxldC5pbnN0YW5jZSA9PSBudWxsKSB7XG4gICAgICAgIENQV2Fjb21UYWJsZXQuaW5zdGFuY2UgPSBuZXcgQ1BXYWNvbVRhYmxldCgpO1xuICAgIH1cbiAgICByZXR1cm4gQ1BXYWNvbVRhYmxldC5pbnN0YW5jZTtcbn1cblxud2luZG93Lm9uV2Fjb21QbHVnaW5Mb2FkZWQgPSBmdW5jdGlvbigpIHtcbiAgICBDUFdhY29tVGFibGV0LmdldFJlZigpLnBsdWdpbkxvYWRlZCgpO1xufSJdfQ==
